[{"tags": ["c++", "arrays", "char", "concatenation", "unsigned"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505951652, "post_id": 46333349, "comment_id": 79627480, "body": "Use a <code>std::stringstream</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1505951659, "post_id": 46333349, "comment_id": 79627485, "body": "No, C++ doesn&#39;t work this way. You have to construct an intermediate <code>std::ostringstream</code>, and then use <code>str()</code> to extract the composed string. But in that case it&#39;s going to be far easier to, you know, actually write C++ code, using C++ library classes, instead of dealing with C-style character arrays."}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1505951887, "post_id": 46333349, "comment_id": 79627533, "body": "@SamVarshavchik but this arrays are not character arrays. I am using <code>unsigned char</code> because the content of this arrays are not alphanumeric characters, and aren&#39;t terminated with <code>\\0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1522, "user_id": 8157511, "user_type": "registered", "profile_image": "https://graph.facebook.com/638941339628236/picture?type=large", "display_name": "James Maa", "link": "https://stackoverflow.com/users/8157511/james-maa"}, "is_accepted": true, "score": 2, "last_activity_date": 1505951782, "creation_date": 1505951782, "answer_id": 46333381, "question_id": 46333349, "link": "https://stackoverflow.com/questions/46333349/using-or-to-concatenate-a-unsigned-char-array/46333381#46333381", "title": "Using &lt;&lt; or &gt;&gt; to concatenate a unsigned char array", "body": "<p>You might want to use <code>stringstream</code> in this context. </p>\n\n<p>referenced here:\n<a href=\"http://www.cplusplus.com/reference/sstream/stringstream/?kw=stringstream\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/sstream/stringstream/?kw=stringstream</a></p>\n\n<p>in the header:</p>\n\n<pre><code>#include &lt;sstream&gt;\n</code></pre>\n\n<p>in the body:</p>\n\n<pre><code>unsigned char bytes1[2];\nunsigned char bytes2[3];\nunsigned char * bytes3 = new unsigned char[5];\n\nstd::stringstream ss;\nss &lt;&lt; bytes1 &lt;&lt; bytes2;\nss &gt;&gt; bytes3\n\n//This should be also good\nstd::string bytes3 = ss.str();\n</code></pre>\n\n<p>Your original code doesn't work because <code>byte3</code> isn't a <code>stream</code> (<code>ostream</code> specifically), so it doesn't have a <code>&lt;&lt;</code> operator</p>\n"}], "owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 46333381, "answer_count": 1, "score": 1, "last_activity_date": 1505951782, "creation_date": 1505951556, "question_id": 46333349, "link": "https://stackoverflow.com/questions/46333349/using-or-to-concatenate-a-unsigned-char-array", "title": "Using &lt;&lt; or &gt;&gt; to concatenate a unsigned char array", "body": "<p>If I have this 2 arrays:</p>\n\n<pre><code>unsigned char bytes1[n];\nunsigned char bytes2[m];\n</code></pre>\n\n<p>(<code>n</code> and <code>m</code> are arbitrary integer numbers) and I do this:</p>\n\n<pre><code>cout &lt;&lt; bytes1 &lt;&lt; bytes2;\n</code></pre>\n\n<p>I manage to display the content for this 2 arrays. Is it possible use this concept to concatenate this two arrays? Something like that:</p>\n\n<pre><code>usigned char bytes1[2];\nunsigned char bytes2[3];\nunsigned char * bytes3 = new unsigned char[5];\nbytes3 &lt;&lt; bytes1 &lt;&lt; bytes2;\n</code></pre>\n\n<p>In the end, <code>bytes2</code> should have the content of <code>bytes1</code> and <code>bytes2</code> in sequence.</p>\n"}, {"tags": ["c++", "compiler-errors", "syntax-error"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1505951097, "post_id": 46333285, "comment_id": 79627365, "body": "<code>bmin &gt;=18.5 and &lt;= 25</code> Can&#39;t do this. Use <code>bmin &gt;=18.5 and bmin &lt;= 25</code> instead."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1505951258, "post_id": 46333285, "comment_id": 79627397, "body": "I hope you weren&#39;t planning on posting a question on stackoverflow.com every time your C++ program doesn&#39;t compile and you can&#39;t figure out why. It will take you many, many years to learn C++ this way."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505951498, "post_id": 46333285, "comment_id": 79627446, "body": "Where is the return of the function <code>bmi</code>?"}, {"owner": {"reputation": 13, "user_id": 8644995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vlXDp.png?s=128&g=1", "display_name": "Finnegan", "link": "https://stackoverflow.com/users/8644995/finnegan"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505951772, "post_id": 46333285, "comment_id": 79627512, "body": "Not sure what that difference was @user4581301."}, {"owner": {"reputation": 13, "user_id": 8644995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vlXDp.png?s=128&g=1", "display_name": "Finnegan", "link": "https://stackoverflow.com/users/8644995/finnegan"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505951891, "post_id": 46333285, "comment_id": 79627534, "body": "@Raindrop7 It has a std::cout in it. Multiple times. Didn&#39;t you see that?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1505951896, "post_id": 46333285, "comment_id": 79627535, "body": "The difference is that one is valid C++, and the other one isn&#39;t."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505951976, "post_id": 46333285, "comment_id": 79627547, "body": "So then make it return <code>void</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505952032, "post_id": 46333285, "comment_id": 79627559, "body": "@Finnegan whar Raindrop means is <code>float bmi(float n1,float n2)</code> declares that it returns a <code>float</code>. The compiler will generate a program based on a <code>float</code> being returned. There is no <code>return</code> statement in the function, so the function is broken and the program will not work. It might LOOK like it works, but it doesn&#39;t and sooner or later it will get you."}, {"owner": {"reputation": 13, "user_id": 8644995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vlXDp.png?s=128&g=1", "display_name": "Finnegan", "link": "https://stackoverflow.com/users/8644995/finnegan"}, "edited": false, "score": 0, "creation_date": 1505952215, "post_id": 46333285, "comment_id": 79627593, "body": "Ah, okay. That actually makes sense."}, {"owner": {"reputation": 13, "user_id": 8644995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vlXDp.png?s=128&g=1", "display_name": "Finnegan", "link": "https://stackoverflow.com/users/8644995/finnegan"}, "edited": false, "score": 0, "creation_date": 1505952269, "post_id": 46333285, "comment_id": 79627605, "body": "Changed it, and now it <i>definitely</i> works."}], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505951708, "post_id": 46333325, "comment_id": 79627493, "body": "@Raindrop7 The compiler provides alternative tokens according to the C++ Standard. See &quot;2.5 Alternative tokens&quot; in the C++ Standard."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1505952393, "post_id": 46333325, "comment_id": 79627638, "body": "Disagree with your first &quot;is equivalent to&quot;  - the only equivalence is that they are both syntax errors"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1505951970, "last_edit_date": 1505951970, "creation_date": 1505951373, "answer_id": 46333325, "question_id": 46333285, "link": "https://stackoverflow.com/questions/46333285/error-expected-primary-expression-before-token-what-am-i-doing-wrong/46333325#46333325", "title": "&quot;error: expected primary-expression before &#39;&lt;=&#39; token&quot; What am I doing wrong?", "body": "<p>The condition in this else statement (and in other similar )</p>\n\n<pre><code>else if(bmin &gt;=18.5 and &lt;= 25){\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>else if( ( bmin &gt;=18.5 ) and ( &lt;= 25 )){\n</code></pre>\n\n<p>So the compiler issues an error because instead of the construction <code>&lt;= 25</code> it expects a valid expression.</p>\n\n<p>It is evident that you mean</p>\n\n<pre><code>else if(bmin &gt;=18.5 and bmin &lt;= 25){\n</code></pre>\n\n<p>Take into account that the function <code>bmi</code> has return type float but returns nothing.</p>\n\n<pre><code>float *bmi*(float n1,float n2);\n</code></pre>\n\n<p>And in this statement you forgot to place a semicolon.</p>\n\n<pre><code>else if (bmin &gt;=30){\n    std::cout &lt;&lt; \"You are obese...\"\n                                   ^^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1522, "user_id": 8157511, "user_type": "registered", "profile_image": "https://graph.facebook.com/638941339628236/picture?type=large", "display_name": "James Maa", "link": "https://stackoverflow.com/users/8157511/james-maa"}, "is_accepted": false, "score": 0, "last_activity_date": 1505951573, "creation_date": 1505951573, "answer_id": 46333351, "question_id": 46333285, "link": "https://stackoverflow.com/questions/46333285/error-expected-primary-expression-before-token-what-am-i-doing-wrong/46333351#46333351", "title": "&quot;error: expected primary-expression before &#39;&lt;=&#39; token&quot; What am I doing wrong?", "body": "<p>You want to explicitly indicate <code>bmin &lt;= 25</code> instead of saying <code>&lt;=25</code> without a subject </p>\n\n<pre><code>    if(bmin &lt;= 18.49){\n        std::cout &lt;&lt; \"You are underweight!\" &lt;&lt; std::endl;\n    }\n    else if(bmin &gt;=18.5 and bmin &lt;= 25){\n        std::cout &lt;&lt; \"You have normal weight!\" &lt;&lt; std::endl;\n    }\n    else if(bmin &gt;=25.01 and bmin &lt;=29.99){\n        std::cout &lt;&lt; \"You are overweight.\" &lt;&lt; std::endl;\n    }\n    else if (bmin &gt;=30){\n        std::cout &lt;&lt; \"You are obese...\"\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8644995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vlXDp.png?s=128&g=1", "display_name": "Finnegan", "link": "https://stackoverflow.com/users/8644995/finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 46333325, "answer_count": 2, "score": -2, "last_activity_date": 1505952089, "creation_date": 1505951011, "last_edit_date": 1505952089, "question_id": 46333285, "link": "https://stackoverflow.com/questions/46333285/error-expected-primary-expression-before-token-what-am-i-doing-wrong", "title": "&quot;error: expected primary-expression before &#39;&lt;=&#39; token&quot; What am I doing wrong?", "body": "<p>So here is my code. Honestly, I started learning C++ about ten days ago, and have just started if statements. Sorry in advance if my syntax is terrible.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\n\nfloat bmi(float, float);\n\nint main(){\n\n    float weight, height;\n\n    std::cout &lt;&lt; \"Input your weight(In pounds)\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; weight;\n    std::cout &lt;&lt; \"Input your height(In inches)\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; height;\n\n    bmi(weight, height);\n\n    return 0;\n}\n\nfloat bmi(float n1,float n2){\n    float bmin;\n    bmin = (n1*703)/(n2*n2);\n    std::cout &lt;&lt; \"Your BMI is: \" &lt;&lt; bmin &lt;&lt; std::endl;\n\n    if(bmin &lt;= 18.49){\n        std::cout &lt;&lt; \"You are underweight!\" &lt;&lt; std::endl;\n    }\n    else if(bmin &gt;=18.5 and &lt;= 25){\n        std::cout &lt;&lt; \"You have normal weight!\" &lt;&lt; std::endl;\n    }\n    else if(bmin &gt;=25.01 and &lt;=29.99){\n        std::cout &lt;&lt; \"You are overweight.\" &lt;&lt; std::endl;\n    }\n    else if (bmin &gt;=30){\n        std::cout &lt;&lt; \"You are obese...\"\n    }\n}\n</code></pre>\n\n<p>For the life of me, I cannot figure out what is wrong here.\nOh, and here's the error.\n The error is on lines 23 and 26.</p>\n\n<pre><code>C:\\Users\\Finnegan\\Desktop\\Computer Science 3-4\\Computer Science\\fm2-\n2.cpp|23|error: expected primary-expression before '&lt;=' token|\n</code></pre>\n\n<p>Then I have an error on line 31 which is </p>\n\n<pre><code>C:\\Users\\Finnegan\\Desktop\\Computer Science 3-4\\Computer Science\\fm2-\n\n2.cpp|31|error: expected ';' before '}' token|\n</code></pre>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c++", "c++11", "mbed", "nucleo"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 859023, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e09962686d08cf6f991bdb2262f7214?s=128&d=identicon&r=PG", "display_name": "Terry Rozmus", "link": "https://stackoverflow.com/users/859023/terry-rozmus"}, "edited": false, "score": 0, "creation_date": 1506032013, "post_id": 46338343, "comment_id": 79667897, "body": "Thanks Jan. I am learning C++ at the same time as mbed, so it is easy for me to miss important points like the fact that t had to be declared as a data member if it were to have scope throughout the class."}], "tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": true, "score": 2, "last_activity_date": 1505980297, "creation_date": 1505980297, "answer_id": 46338343, "question_id": 46333190, "link": "https://stackoverflow.com/questions/46333190/i-cannot-get-an-mbed-ticker-within-a-class-to-call-a-member-method/46338343#46338343", "title": "I cannot get an MBED ticker within a class to call a member method", "body": "<p>You declare <code>Ticker t;</code> in your constructor on the stack, when the constructor exits it will clear the object, and thus the code will not run.</p>\n\n<p>Declare the variable in your class, and it'll run as expected:</p>\n\n<pre><code>class TimedLED\n{\n    public:\n        TimedLED()\n        {\n            t.attach(callback(this, &amp;TimedLED::flip), 1.0f);\n        }\n\n        void flip(void)\n        {\n            static int count = 0;\n            greenLed.write(count%2); //-- toggle greenLed\n            count++;\n        }\n\n    private:\n        Ticker t;\n};\n</code></pre>\n\n<p>Also note the change in the constructor, this is the prefered (non-deprecated) way to attach callbacks in mbed OS 5.</p>\n"}], "owner": {"reputation": 396, "user_id": 859023, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e09962686d08cf6f991bdb2262f7214?s=128&d=identicon&r=PG", "display_name": "Terry Rozmus", "link": "https://stackoverflow.com/users/859023/terry-rozmus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 46338343, "answer_count": 1, "score": 0, "last_activity_date": 1505980297, "creation_date": 1505950235, "last_edit_date": 1505950873, "question_id": 46333190, "link": "https://stackoverflow.com/questions/46333190/i-cannot-get-an-mbed-ticker-within-a-class-to-call-a-member-method", "title": "I cannot get an MBED ticker within a class to call a member method", "body": "<p>I wrote the following MBED-based C++ program as an experiment for a more detailed project I am working on for my Nucleoboard Microcontroller:</p>\n\n<pre><code>#include \"mbed.h\"\n\nDigitalOut greenLed(PA_5);\n\n#include \"mbed.h\"\nclass TimedLED\n{\n    public:\n        TimedLED()\n        {\n            Ticker t;\n            t.attach_us(this, &amp;TimedLED::flip, 1000000);\n        }\n\n        void flip(void)\n        {\n           static int count = 0;\n           greenLed.write(count%2); //-- toggle greenLed\n           count++;\n        }\n};\n\nint main()\n{\n    TimedLED flash;\n    while (1);\n}\n</code></pre>\n\n<p>All the references I looked at seemed to indicate that t.attach_us(this, &amp;TimedLED::flip, 1000000) should call the method, 'flip' every second and so cause the LED to toggle on and off. This is not happening, however. I cannot see what the problem is. I hope someone can help me clear this up.</p>\n\n<p>I am getting the following warning message indicating that this format is deprecated, but the link to the documentation was broken, so I couldn't get more details:</p>\n\n<pre><code>Function \"mbed::Ticker::attach_us(T *, M, us_timestamp_t) [with T=TimedLED, M=void(TimedLED::*)()]\" (declared at /extras/mbed_fd96258d940d/drivers/Ticker.h:122) was declared \"deprecated\" \"t.attach_us(this, &amp;TimedLED::flip, 1000000);\"\n</code></pre>\n\n<p>Even if it is deprecated, it still should work, shouldn't it? Also, presumably if the deprecation message is correct, there is a newer way to do the same thing. I can't find reference to an alternative method though anywhere.</p>\n"}, {"tags": ["c++", "algorithm", "list", "data-structures", "tree"], "comments": [{"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1505948848, "post_id": 46332811, "comment_id": 79626797, "body": "It probably comes from the indirection introduced by the tree structure. You might want to try to replace some pointers by direct containment or try to represent your tree in some flat array, depending on how much you want to invest in the optimization."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1505950017, "post_id": 46332811, "comment_id": 79627127, "body": "Example of flat representation is <a href=\"https://en.wikipedia.org/wiki/Polish_notation\" rel=\"nofollow noreferrer\">polish notation</a>. You might want to use some additional indexes there to be able to skip some parts of the expression, when they are not neccessary."}], "answers": [{"comments": [{"owner": {"reputation": 10199, "user_id": 179634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42614ec033bd686a83323771622c41af?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/179634/luke"}, "edited": false, "score": 0, "creation_date": 1505999325, "post_id": 46333259, "comment_id": 79649567, "body": "My understanding is that in modern compilers there&#39;s negligible difference between the two approaches but I suppose it&#39;s worth profiling to find out."}, {"owner": {"reputation": 10199, "user_id": 179634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42614ec033bd686a83323771622c41af?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/179634/luke"}, "edited": false, "score": 0, "creation_date": 1506003399, "post_id": 46333259, "comment_id": 79652807, "body": "I just profiled this approach and there was in fact negligible difference."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1505950782, "creation_date": 1505950782, "answer_id": 46333259, "question_id": 46332811, "link": "https://stackoverflow.com/questions/46332811/how-can-i-make-this-tree-traversal-more-efficient/46333259#46333259", "title": "How can I make this tree traversal more efficient?", "body": "<p>Get rid of the switch and add <code>AndNode</code> and <code>OrNode</code> classes, and use a virtual function with suitable overrides.</p>\n"}], "owner": {"reputation": 10199, "user_id": 179634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42614ec033bd686a83323771622c41af?s=128&d=identicon&r=PG", "display_name": "Luke", "link": "https://stackoverflow.com/users/179634/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505950782, "creation_date": 1505947520, "question_id": 46332811, "link": "https://stackoverflow.com/questions/46332811/how-can-i-make-this-tree-traversal-more-efficient", "title": "How can I make this tree traversal more efficient?", "body": "<p>I have a project that processes a set of rules.  Currently a rule consists of one or more clauses, the syntax of which looks like so:</p>\n\n<pre><code>A\nA &amp; B\nA &amp; B &amp; C\netc\n</code></pre>\n\n<p>This is codified as follows:</p>\n\n<pre><code>struct Rule {\n    list&lt;Clause*&gt; Clauses;\n};\n\nbool ProcessRule(const Rule* Rule) {\n    for (const auto&amp; Clause : Rule-&gt;Clauses) {\n        if (!ProcessClause(Clause)) return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>I am tasked with implementing a complimentary logical or construct, the syntax of which looks like so:</p>\n\n<pre><code>A\nA &amp; B\nA | B\nA &amp; B &amp; C\nA &amp; B | C\nA | B &amp; C\nA | B | C\netc\n</code></pre>\n\n<p>I went with the most obvious approach and changed the implementation of the <code>Rule</code> structure from using a list to using a tree:</p>\n\n<pre><code>enum NodeType {\n    LogicalAnd,\n    LogicalOr,\n    Leaf,\n};\n\nstruct Node {\n    NodeType Type;\n};\n\nstruct LogicalNode : Node {\n    list&lt;Node*&gt; Children;\n};\n\nstruct LeafNode : Node {\n    Clause* Clause;\n};\n\nstruct Rule {\n    Node* Root;\n}\n\nbool ProcessRule(const Rule* Rule) {\n    return ProcessNode(Rule-&gt;Root);\n}\n\nbool ProcessNode(const Node* Node) {\n    switch (Node-&gt;Type) {\n        case LogicalAnd:\n            for (const auto&amp; Child : ((const LogicalNode*)Node)-&gt;Children) {\n                if (!ProcessNode(Child)) return false;\n            }\n            return true;\n        case LogicalOr:\n            for (const auto&amp; Child : ((const LogicalNode*)Node)-&gt;Children) {\n                if (ProcessNode(Child)) return true;\n            }\n            return false;\n        case Leaf:\n            return ProcessClause(((const LeafNode*)Node)-&gt;Clause);\n    }\n}\n</code></pre>\n\n<p>It all seems pretty straightforward but the problem is a relatively severe degradation of performance using the exact same set of rules, on the order of 15% or so.  I've run both versions through a profiler and the degradation is due to the overhead of the <code>ProcessNode()</code> function, I assume due to the switch statement and function calls as <code>ProcessRule()</code> is called millions of times.  Is there some way to mitigate this overhead?  It seems a bit excessive so I feel like I might be missing something obvious.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1505946838, "post_id": 46332712, "comment_id": 79626252, "body": "You need to provide return types for the function in the cpp file."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1505947465, "post_id": 46332712, "comment_id": 79626422, "body": "I suspect that you have disabled compiler warnings.  Turn them back on, so the compiler can tell you it is <b>guessing</b> that your return type is <code>int</code> everywhere you have omitted it."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 1, "creation_date": 1505947470, "post_id": 46332712, "comment_id": 79626425, "body": "Appears you are trying to write a getter method (for the vector).  see <a href=\"http://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html\" rel=\"nofollow noreferrer\">yegor256.com/2014/09/16/getters-and-setters-are-evil.html</a>.  There are plenty of articles both ways on this.   I do not use getters or setters, and recommend against them."}], "answers": [{"comments": [{"owner": {"reputation": 1160, "user_id": 8490870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c084fe165955c1d26cbc964c9291f566?s=128&d=identicon&r=PG", "display_name": "DrSvanHay", "link": "https://stackoverflow.com/users/8490870/drsvanhay"}, "edited": false, "score": 0, "creation_date": 1505948279, "post_id": 46332776, "comment_id": 79626652, "body": "Could someone explain to me, why this answer gets downvoted? Pls?"}, {"owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 0, "creation_date": 1505948642, "post_id": 46332776, "comment_id": 79626738, "body": "I don&#39;t downvote, but, I would say that you answer contains the right thing to do but at the same time contains a lot of &quot;not totaly correct&quot; information. Do you know the KISS? If it was applied you would have avoided the downvotes."}, {"owner": {"reputation": 1160, "user_id": 8490870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c084fe165955c1d26cbc964c9291f566?s=128&d=identicon&r=PG", "display_name": "DrSvanHay", "link": "https://stackoverflow.com/users/8490870/drsvanhay"}, "reply_to_user": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 0, "creation_date": 1505948932, "post_id": 46332776, "comment_id": 79626825, "body": "@StefanoBuora better now?"}, {"owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 0, "creation_date": 1506000848, "post_id": 46332776, "comment_id": 79650802, "body": "The votes talk for me ;)"}], "tags": [], "owner": {"reputation": 1160, "user_id": 8490870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c084fe165955c1d26cbc964c9291f566?s=128&d=identicon&r=PG", "display_name": "DrSvanHay", "link": "https://stackoverflow.com/users/8490870/drsvanhay"}, "is_accepted": true, "score": 1, "last_activity_date": 1505949524, "last_edit_date": 1505949524, "creation_date": 1505947247, "answer_id": 46332776, "question_id": 46332712, "link": "https://stackoverflow.com/questions/46332712/prototype-does-not-match-any-class-error-when-separating-into-h-and-cpp-file/46332776#46332776", "title": "&quot;prototype does not match any class&quot; error when separating into .h and .cpp files", "body": "<p>The problem is that the declarations of your functions in the .h file and the definitions in the .cpp file do not match: In the .h file you declare:</p>\n\n<pre><code>vector&lt;int&gt; code::getVector()\n</code></pre>\n\n<p>and in the .cpp file: </p>\n\n<pre><code>code::getVector()\n</code></pre>\n\n<p>The problem is that they don\u00b4t match, but they have to match. Write</p>\n\n<pre><code>vector&lt;int&gt; code::getVector()\n{\n    // code here \n}\n</code></pre>\n\n<p>The same is valid for all the other definitions.</p>\n\n<p>In ancient times giving no return type meant that the return type is int, which explains the error message you observe. But this is banned for a long time and should have given a warning.</p>\n"}], "owner": {"reputation": 17, "user_id": 8644790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1820358297992750/picture?type=large", "display_name": "Morgan Kohler", "link": "https://stackoverflow.com/users/8644790/morgan-kohler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "closed_date": 1505951386, "accepted_answer_id": 46332776, "answer_count": 1, "score": -3, "last_activity_date": 1505949524, "creation_date": 1505946780, "question_id": 46332712, "link": "https://stackoverflow.com/questions/46332712/prototype-does-not-match-any-class-error-when-separating-into-h-and-cpp-file", "closed_reason": "Needs details or clarity", "title": "&quot;prototype does not match any class&quot; error when separating into .h and .cpp files", "body": "<p>Writing a program for a game of \"Mastermind\". In one of my classes, code, I have seperated it into .h and .cpp files and I'm not sure why my cpp file keeps giving me this error when compiling: Error: prototype for 'int code :: getVector()' does not match any class in 'code'</p>\n\n<p>To my knowledge I have the correct header for getVector() in my code.h file:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n#ifndef CODE_H\n#define CODE_H\n\nusing namespace std;\n\nclass code      //strores code vector and checks for correct and incorrect numbers\n{\nprivate:\n\n    vector&lt;int&gt; codeVector {0,0,0,0};       //vector storing code (guess and secret code depending on object)\n\npublic:\n\n    vector&lt;int&gt; getVector();        //retrievs private codeVector\n\n    void setCodeVectorToGuess(vector&lt;int&gt; guess);   //sets private codeVector to vector passed in\n\n    void setCodeVectorToSecretCode();   //uses rand function to set random secret code vector\n\n    int checkCorrect(code guessObject);     //uses for loop to check what values are correct number correct location by checking equivalence at each vector index\n\n    int checkIncorrect(code guessObject);   //checks numbers between the two vectors using two for loops which each replace values in the vectors with non-equivalent out-of-range numbers\n\n};\n\n#endif // CODE_H\n</code></pre>\n\n<p>and the right syntax in my .cpp file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;time.h&gt;\n\n#include \"code.h\"\n\nusing namespace std;\n\n\n\n//code :: codeVector = {0,0,0,0};\n\ncode :: getVector()     //retrieves private codeVector\n{\n    return codeVector;\n}\n\ncode :: setCodeVectorToGuess(vector&lt;int&gt; guess) //sets private codeVector to vector passed in\n{\n    codeVector = guess;\n}\n\ncode :: setCodeVectorToSecretCode() //uses rand function to set random secret code vector\n{\n    srand (time(NULL));\n    codeVector = {rand() % 5 + 1, rand() % 5 + 1, rand() % 5 + 1, rand() % 5 + 1};\n}\n\ncode :: checkCorrect(code guessObject)      //uses simple for loop to check what values are correct number correct location\n{\n    int correctPlaceCorrectNum = 0;\n\n    vector&lt;int&gt; guessVector;\n    guessVector = guessObject.getVector();\n\n    for (int o=0; o&lt;codeVector.size(); o++)\n    {\n        if (codeVector[o] == guessVector[o])\n        {\n            correctPlaceCorrectNum ++;\n        }\n    }\n\n    return correctPlaceCorrectNum;\n}\n\ncode :: checkIncorrect(code guessObject)    //checks numbers between the two vectors using two for loops which each replace values in the vectors with non-equivalent out-of-range numbers\n{\n    int incorrectPlaceCorrectNum = 0;\n    int counter(0), counter2(0);\n\n    int array1[8] = {6,7,8,9};          //two arrays used for the elimination of vector values by substitution of non-equivalent values\n    int array2[8] = {10,11,12,13};      //\n\n    vector&lt;int&gt; secretCodeVector {0,0,0,0};     //copy of secret code vector\n    secretCodeVector = getVector();\n\n    vector&lt;int&gt; guessVector {0,0,0,0};          //copy of guess vector\n    guessVector = guessObject.getVector();\n\n    for (int u=0; u&lt;secretCodeVector.size(); u++)       //checks and replaces all correct number correct location values in secret code vector\n    {\n        if (secretCodeVector[u] == guessVector[u])\n        {\n\n            secretCodeVector[u] = array1[counter];\n\n            counter++;\n\n        }\n    }\n\n    for (int i=0; i&lt;secretCodeVector.size(); i++)       //checks and replaces all correct number incorrect location values in both vectors\n    {\n\n        for (int l=0; l&lt;secretCodeVector.size(); l++)           //checks each digit of secret code with all digits of guess code\n        {\n            if (secretCodeVector[i] == guessVector[l])  \n            {\n                secretCodeVector[i] = array1[counter];\n                guessVector[l] = array2[counter2];\n\n\n                incorrectPlaceCorrectNum++;\n\n                counter++;\n                counter2++;\n                break;\n            }\n        }\n\n    }\n\n    return incorrectPlaceCorrectNum;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "cmake", "qt5"], "comments": [{"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1505976552, "post_id": 46332672, "comment_id": 79634086, "body": "Note that it is <code>Qt5</code>, not <code>QT5</code>. This makes a difference on case-sensitive filesystems (like most Linuxes)."}, {"owner": {"reputation": 652, "user_id": 3921660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4c1e3a9e6846d4696f644b3ef83ea8?s=128&d=identicon&r=PG&f=1", "display_name": "KabCode", "link": "https://stackoverflow.com/users/3921660/kabcode"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1505993491, "post_id": 46332672, "comment_id": 79645402, "body": "Thanks for this suggestion. I changed it in the question."}], "answers": [{"tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": true, "score": 1, "last_activity_date": 1505976215, "creation_date": 1505976215, "answer_id": 46337126, "question_id": 46332672, "link": "https://stackoverflow.com/questions/46332672/cmake-and-qt5-using-different-components-of-qt5-in-different-subdirectories/46337126#46337126", "title": "Cmake and Qt5: Using different components of Qt5 in different subdirectories", "body": "<p>If you want to use Qt5 components in subdirectories while using <code>find_package</code> only once in the root CMakeLists.txt -- which is IMHO the right thing to do -- you will have to list all the wanted components when finding Qt.</p>\n\n<p>So following your example, root CMakeLists.txt should be something like that:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\n\nfind_package(QT5 COMPONENTS Xml Websocket REQUIRED)\n\nadd_subdirectory(exec1) # will use Xml\nadd_subdirectory(exec2) # will use Websocket\n</code></pre>\n\n<p>Note that I removed <code>Core</code> since it is implicitly added as a dependency of both <code>Xml</code> and <code>Websocket</code>. Same goes for the subdirectories:</p>\n\n<pre><code>add_executable(exec1 ${SRC} ${HDR})\ntarget_link_libraries(exec1 QT5::Xml)\n</code></pre>\n\n<p>Here <code>exec1</code> implicitly links against <code>Core</code> component because it is a dependency of <code>Xml</code>.</p>\n"}], "owner": {"reputation": 652, "user_id": 3921660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4c1e3a9e6846d4696f644b3ef83ea8?s=128&d=identicon&r=PG&f=1", "display_name": "KabCode", "link": "https://stackoverflow.com/users/3921660/kabcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 46337126, "answer_count": 1, "score": 2, "last_activity_date": 1521226068, "creation_date": 1505946535, "last_edit_date": 1521226068, "question_id": 46332672, "link": "https://stackoverflow.com/questions/46332672/cmake-and-qt5-using-different-components-of-qt5-in-different-subdirectories", "title": "Cmake and Qt5: Using different components of Qt5 in different subdirectories", "body": "<p>I want to use the Qt5 library in my subdirectories without adding the all components to each subdirectory. In the parent CMakeLists I use <code>find_package(Qt5)</code> to make sure that the library exists and the <code>Qt5_DIR</code> variable is set. Example:</p>\n\n<p><strong>CMakeLists.txt</strong>   </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\n\nfind_package(Qt5 COMPONENTS Core REQUIRED)\n\nadd_subdirectory(exec1)\nadd_subdirectory(exec2) \n</code></pre>\n\n<p>In the subdirectory <code>exec1</code> I want to use the <code>Qt5::Xml</code> component. As far as I have understood CMake, the <code>Qt5_DIR</code> variable is passed to the subdirectories. Therefore I do not have to use <code>find_package</code> again. Is this assumption correct? Example:</p>\n\n<p><strong>exec1/CMakeLists.txt</strong>   </p>\n\n<pre><code>project(exec1)\nset(SRC exec1.cpp)\nset(HDR exec1.h)\n\nadd_executable(exec1 ${SRC} ${HDR})\ntarget_link_libraries(exec1 Qt5::Core Qt5::Xml)\n</code></pre>\n\n<p>In a second subdirectory <code>exec2</code> I want to add other components of Qt5. Example:</p>\n\n<p><strong>exec2/CMakeLists.txt</strong>   </p>\n\n<pre><code>project(exec2)\nset(SRC exec2.cpp)\nset(HDR exec2.h)\n\nadd_executable(exec2 ${SRC} ${HDR})\ntarget_link_libraries(exec2 Qt5::Core Qt5::Websockets)\n</code></pre>\n\n<p>Does it make any difference if I add all components in the parent CMakeLists.txt instead of choosing for each subproject only some components?\nHow do I handle this case so that I can exchange Qt5 components in the subdirectories without affecting other subdirectories?\nOr is it more convenient to add the <code>find_package</code> to each subdirectory instead of using it once in the parent CMakeLists.txt?</p>\n\n<p>Any suggestions and tipps are appreciated.</p>\n"}, {"tags": ["c++", "arrays", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 2192, "user_id": 3817790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uosws.jpg?s=128&g=1", "display_name": "Naseef Chowdhury", "link": "https://stackoverflow.com/users/3817790/naseef-chowdhury"}, "edited": false, "score": 0, "creation_date": 1505946090, "post_id": 46332577, "comment_id": 79626001, "body": "Is the first two code snippets are from the main function? Please share clearer code."}, {"owner": {"reputation": 1, "user_id": 8062897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/918d7b81d78579038332a5cde2db0850?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Collins", "link": "https://stackoverflow.com/users/8062897/zachary-collins"}, "reply_to_user": {"reputation": 2192, "user_id": 3817790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uosws.jpg?s=128&g=1", "display_name": "Naseef Chowdhury", "link": "https://stackoverflow.com/users/3817790/naseef-chowdhury"}, "edited": false, "score": 0, "creation_date": 1505946767, "post_id": 46332577, "comment_id": 79626237, "body": "Yes it&#39;s from the main function. However, the insert function is separate. It compliments a standard linked list node structure."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1505947008, "post_id": 46332577, "comment_id": 79626309, "body": "You change the local variable tail."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8062897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/918d7b81d78579038332a5cde2db0850?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Collins", "link": "https://stackoverflow.com/users/8062897/zachary-collins"}, "edited": false, "score": 0, "creation_date": 1505948426, "post_id": 46332780, "comment_id": 79626684, "body": "That fixed the problem of them being added to the array. Now I&#39;m having the problem that instead of adding nodes to each individual linked list within the array, it overwrites it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "reply_to_user": {"reputation": 1, "user_id": 8062897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/918d7b81d78579038332a5cde2db0850?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Collins", "link": "https://stackoverflow.com/users/8062897/zachary-collins"}, "edited": false, "score": 0, "creation_date": 1505948828, "post_id": 46332780, "comment_id": 79626792, "body": "@ZacharyCollins tail is not tail but head."}], "tags": [], "owner": {"reputation": 137, "user_id": 5692500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58343f43392e6c8a9d9859f91c800e87?s=128&d=identicon&r=PG&f=1", "display_name": "adisib", "link": "https://stackoverflow.com/users/5692500/adisib"}, "is_accepted": true, "score": 2, "last_activity_date": 1505947292, "creation_date": 1505947292, "answer_id": 46332780, "question_id": 46332577, "link": "https://stackoverflow.com/questions/46332577/information-not-actually-being-stored-inside-array-of-nodes/46332780#46332780", "title": "Information not actually being stored inside array of nodes", "body": "<p>You are passing a pointer by value, rather than reference, so the address the passed-in variable is pointing to is not changed.</p>\n\n<p>Change\n<code>void insertion(node* tail, string info){</code>\ninto\n<code>void insertion(node*&amp; tail, string info){</code> .</p>\n"}], "owner": {"reputation": 1, "user_id": 8062897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/918d7b81d78579038332a5cde2db0850?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Collins", "link": "https://stackoverflow.com/users/8062897/zachary-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 46332780, "answer_count": 1, "score": 0, "last_activity_date": 1505951093, "creation_date": 1505945877, "last_edit_date": 1505951093, "question_id": 46332577, "link": "https://stackoverflow.com/questions/46332577/information-not-actually-being-stored-inside-array-of-nodes", "title": "Information not actually being stored inside array of nodes", "body": "<pre><code>node* nodeArray[1000]; \nfor (int j = 0; j &lt; 1000; j++){\nnodeArray[j] = new node;\n}\nint nodeCounter = 0;\nstring temporary = \"\";\nstring cont; //file content\nint i = 0;\nwhile (getline(fileObject, cont)){\n  for (int k = 0; k &lt; cont.length(); k++) \n    cont[k] = tolower(cont[k]);\n  while (i &lt; cont.length()){ \n</code></pre>\n\n<p>Here is where the problem comes in. The cout line tells me that my logic is fine in that it should be inserting nodes inside my array of linkedlists. But it's not actually adding them to the array of linkedlist.</p>\n\n<pre><code>    //cout &lt;&lt; \"nodeArray [\" &lt;&lt; nodeCounter &lt;&lt; \"] : \" &lt;&lt; temporary &lt;&lt; \"\\n\";\n    insert(nodeArray[nodeCounter], temporary);\n    temporary = \"\";\n  i++;\n}\ni = 0;\nnodeCounter++;\n\n}\n</code></pre>\n\n<p>And here's my insert function that might be messing with the program</p>\n\n<pre><code>  void insertion(node* tail, string info){\n      node* temp = new node;\n      temp-&gt;data = info;\n      temp-&gt;previous = tail;\n      temp-&gt;next = NULL;\n      tail = temp;\n  }\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "stdafx.h"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505944227, "post_id": 46332256, "comment_id": 79625302, "body": "What&#39;s with all the hate for <code>stdafx.h</code>? It&#39;s supposed to help compile times."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1505944245, "post_id": 46332256, "comment_id": 79625307, "body": "Your professor is right. Make an empty project, then create a source file manually. It&#39;s easier than changing all the settings to remove precompiled headers"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1505944246, "post_id": 46332256, "comment_id": 79625308, "body": "@tadman not if you&#39;re trying to compile the same code on a different compiler"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505944285, "post_id": 46332256, "comment_id": 79625322, "body": "@tadman It hardly does, and it causes lots of problems when following standard C++ texts. I have an old tutorial here that addresses this: <a href=\"https://latedev.wordpress.com/2012/04/13/howto-create-your-first-project-in-visual-c/\" rel=\"nofollow noreferrer\">latedev.wordpress.com/2012/04/13/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505944303, "post_id": 46332256, "comment_id": 79625327, "body": "If you&#39;re creating a cross-platform application, sure, but this is when creating a <i>Windows Application</i> which is by definition not going to be cross-platform."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1505944466, "post_id": 46332256, "comment_id": 79625394, "body": "Precompiled headers can decrease compilation times significantly, but it strongly depends on what you put in them and how you configure them. Done wrong, it&#39;s easy to <i>increase</i> compilation times significantly. For clean portability, it can be a better idea to use CMake and Cotire and never manually have a <code>#include &quot;stdafx.h&quot;</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505944736, "post_id": 46332256, "comment_id": 79625503, "body": "A portable program does not need that header. Just create an empty project and only include what you need."}, {"owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505944886, "post_id": 46332256, "comment_id": 79625563, "body": "@Justin I try to do this, and I create my source file manually and everything seems to be fine. But when running a simple program it crashes when trying to output something, randomly. For example, the program I&#39;m writing takes input, does a calculation and outputs a number. Right now, I can prompt the user to input something (using cout and cin) but then when I try to just output something (without taking anything as an input directly after) the program displays something then quickly crashes."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1505944998, "post_id": 46332256, "comment_id": 79625598, "body": "@frejil You just need to figure out what is wrong with out program, maybe debug it. Precompiled headers have nothing to do with it."}, {"owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1505945052, "post_id": 46332256, "comment_id": 79625620, "body": "@VTT precompiled headers are entirely my problem. If I paste the exact same code into a program created with these headers it behaves as normal."}, {"owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "edited": false, "score": 0, "creation_date": 1505945182, "post_id": 46332256, "comment_id": 79625665, "body": "@NeilButterworth We are getting somewhere! This is exactly my problem. On the lab computers in my class, the process of creating a program goes exactly like that, and I can check empty project and all. However, on my computer I am not given that wizard window with the options of &quot;Next&quot; and &quot;Finish&quot; it simply creates the project with no further prompts. That is why my professor suggested creating an &quot;Empty project&quot; instead of a &quot;Windows Console Application&quot;"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505945184, "post_id": 46332256, "comment_id": 79625667, "body": "@frejil Then you need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It&#39;s definitely not <i>just</i> precompiled headers."}, {"owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505945283, "post_id": 46332256, "comment_id": 79625716, "body": "@Justin my code is not the problem here, I can assure you of that. It is likely a compiler setting that I did or did not check. I don&#39;t know if it&#39;s against the rules, but if you shoot me your email I can further clarify the problem with pictures."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1505945284, "post_id": 46332256, "comment_id": 79625718, "body": "<code>cout &lt;&lt; &quot;enter height&quot; &lt;&lt; cin</code> won&#39;t even compile, there is no &lt;&lt; operator for output stream that takes input stream."}, {"owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505945581, "post_id": 46332256, "comment_id": 79625829, "body": "@Justin With all due respect, how exactly would I provide an example of something that doesn&#39;t involve code? My issue lies within my compiler. I could copy and paste one of the thousand &quot;Hello World&quot; examples from the internet into my project and it would not run properly. Not because of a code error, but because of an improper setting. Your responses are either going right over my head or you&#39;re not reading my question."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505945680, "post_id": 46332256, "comment_id": 79625869, "body": "@frejil I guarantee you that this is not a compiler bug. How you can provide an example is to supply a source file, the stdafx.h, and how you set up the project (step by step if necessary)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1505945748, "post_id": 46332256, "comment_id": 79625893, "body": "Here is the algorithm for you: 1) copy and paste one &quot;Hello World&quot; example code into your cpp file 2) build it (it&#39;s ok if it fails) 3) copy and paste entire content of you cpp file into question 4) copy and paste entire build log into your question"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1505945760, "post_id": 46332256, "comment_id": 79625899, "body": "@frejil For someone who just started out programming, your absolute conviction that it&#39;s impossible for your code to be wrong is.. entertaining. No seasoned programmer would ever make such an assumption."}], "answers": [{"tags": [], "owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "is_accepted": false, "score": 1, "last_activity_date": 1505946584, "last_edit_date": 1505946584, "creation_date": 1505944601, "answer_id": 46332365, "question_id": 46332256, "link": "https://stackoverflow.com/questions/46332256/how-to-avoid-stdafx-and-other-header-files/46332365#46332365", "title": "How to avoid stdafx and other header files", "body": "<p>when you create a project with visual studio ,you'll have the option \"use pre compiled headers\" which you can disable !</p>\n\n<p>NB Just discovered that the new update (15.3.5) of vs2017 has changed the creation of projects a little and seems to offer this only when choosing Windows desktop wizard !</p>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 3817790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uosws.jpg?s=128&g=1", "display_name": "Naseef Chowdhury", "link": "https://stackoverflow.com/users/3817790/naseef-chowdhury"}, "is_accepted": false, "score": 2, "last_activity_date": 1505946394, "last_edit_date": 1505946394, "creation_date": 1505945759, "answer_id": 46332557, "question_id": 46332256, "link": "https://stackoverflow.com/questions/46332256/how-to-avoid-stdafx-and-other-header-files/46332557#46332557", "title": "How to avoid stdafx and other header files", "body": "<p>You can create a new project and disable use of of precompiled headers and please also select <code>Empty Project</code> while creating. If you don't intend to create a new project file, you can do this in the existing project file.To do this, do the following - </p>\n\n<blockquote>\n  <p>Select your project, use the \"Project -> Properties\" menu and go to\n  the \"Configuration Properties -> C/C++ -> Precompiled Headers\"\n  section, then change the \"Precompiled Header\" setting to \"Not Using\n  Precompiled Headers\" option.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 7190696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af194004645333efc46ef8a859712be?s=128&d=identicon&r=PG&f=1", "display_name": "frejil", "link": "https://stackoverflow.com/users/7190696/frejil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "closed_date": 1505979163, "answer_count": 2, "score": -2, "last_activity_date": 1505946584, "creation_date": 1505944124, "last_edit_date": 1505944288, "question_id": 46332256, "link": "https://stackoverflow.com/questions/46332256/how-to-avoid-stdafx-and-other-header-files", "closed_reason": "Not suitable for this site", "title": "How to avoid stdafx and other header files", "body": "<p>When creating a new C++ Windows Application in Visual Studio 2017, I am always given an stdafx.cpp file, as well as stdafx.h and targetver.h files. I am taking an Intro Programming class and the instructor thoroughly disapproves of these files being included in our projects. I am using a Mac with BootCamp to run this compiler properly, and I am able to write my code and run it fine - but I need to get rid of these extraneous files that are included with my project.</p>\n\n<p>My professor's suggestion was to instead create an Empty Project when initially making the project, but this must leave out some type of necessary libraries/headers because my same code will misbehave with functions like \"cout\". (builds fine). </p>\n\n<p>Put simply, how can I create a new project that is empty besides my cpp file, and behaves as normal? </p>\n"}, {"tags": ["c++", "macos", "boost", "bitcoin", "bitcoind"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1505976096, "post_id": 46332011, "comment_id": 79633857, "body": "have you mentioned this on the boost.org mailing list?"}], "answers": [{"tags": [], "owner": {"reputation": 849, "user_id": 843669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc18cb78af438a2cbaf4d196a48cb707?s=128&d=identicon&r=PG", "display_name": "Jonny Heald", "link": "https://stackoverflow.com/users/843669/jonny-heald"}, "is_accepted": false, "score": 0, "last_activity_date": 1507793867, "creation_date": 1507793867, "answer_id": 46703996, "question_id": 46332011, "link": "https://stackoverflow.com/questions/46332011/boost-issue-building-litecoin-on-macos-10-12-6/46703996#46703996", "title": "Boost issue building Litecoin on MacOS 10.12.6", "body": "<p>Turns out it was a linker error, i uninstalled boost, reinstalled it and then</p>\n\n<p><code>brew link boost --force</code></p>\n\n<p>worked fine after that</p>\n"}], "owner": {"reputation": 849, "user_id": 843669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc18cb78af438a2cbaf4d196a48cb707?s=128&d=identicon&r=PG", "display_name": "Jonny Heald", "link": "https://stackoverflow.com/users/843669/jonny-heald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507793867, "creation_date": 1505942759, "question_id": 46332011, "link": "https://stackoverflow.com/questions/46332011/boost-issue-building-litecoin-on-macos-10-12-6", "title": "Boost issue building Litecoin on MacOS 10.12.6", "body": "<p>I have pulled Litecoin from master branch and when i try to build on OSX i get the error:</p>\n\n<pre><code>CXXLD litecoind\nUndefined symbols for architecture x86_64:\n\"boost::this_thread::hiden::sleep_for(timespec const&amp;)\", referenced from:\nMilliSleep(long long) in libbitcoin_util.a(libbitcoin_util_a-utiltime.o)\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [litecoind] Error 1\nmake[1]: *** [all-recursive] Error 1\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>I am running macOS Sierra 10.12.6\nBoost version installed is 1.65.1 via Homebrew\nin location:\n/usr/local/Cellar/boost/1.65.1/</p>\n\n<p>Litecoin Core: 0.13.99\nI have tried uninstalling boost and building from source as mentioned here:\n<a href=\"https://github.com/litecoin-project/litecoin/issues/170\" rel=\"nofollow noreferrer\">https://github.com/litecoin-project/litecoin/issues/170</a></p>\n\n<p>and i get the same error.\nI have made sure all the dependancies required are installed but seems to be a boost issue somewhere.</p>\n\n<p>A fresh pull from master and ./autogen.sh - ./configure - make produces this log:</p>\n\n<p><a href=\"https://pastebin.com/byUg2msu\" rel=\"nofollow noreferrer\">https://pastebin.com/byUg2msu</a></p>\n"}, {"tags": ["c++", "vector", "biginteger", "bitset", "std-bitset"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1505943056, "post_id": 46331998, "comment_id": 79624889, "body": "I&#39;m not sure any of the containers you mention support the full set of operations you want, but so what? You can implement your own class using one of the standard containers (like others have suggested, I would avoid <code>vector &lt;bool&gt;</code>) and then change the implementation as circumstances dictate. Isn&#39;t this one of the things OO programming is supposed to be about?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1505943645, "post_id": 46331998, "comment_id": 79625101, "body": "Maybe you should tske a look at <a href=\"https://gmplib.org\" rel=\"nofollow noreferrer\">GMP</a>."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1505945046, "post_id": 46331998, "comment_id": 79625619, "body": "@JesperJuhl or <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/multiprecision/doc/html/boost_multiprecision/tut/ints/cpp_int.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/libs/multiprecision/doc/html/&hellip;</a> (which also wraps other libs like GMP <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/multiprecision/doc/html/boost_multiprecision/tut/ints/gmp_int.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/libs/multiprecision/doc/html/&hellip;</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1505955195, "post_id": 46331998, "comment_id": 79628243, "body": "The critique of <code>vector&lt;bool&gt;</code> is generally that it doesn&#39;t store any <code>bool</code>s. That makes it impossible to fulfill all the requirements of a container, particularly returning references as <code>bool&amp;</code>. If this is not a problem for you, there is nothing else particularly wrong with the type."}], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1505944487, "post_id": 46332273, "comment_id": 79625401, "body": "Can you elaborate on that and provide objective arguments, or is this just an opinion ?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1505945098, "post_id": 46332273, "comment_id": 79625642, "body": "I&#39;m afraid this is just an opinion. My experience with dynamic bitset is that the interface is rather bitset oriented. You know. As in &quot;set of bits&quot; (not: a multi-limb integral type) /cc @Christophe"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1505945628, "post_id": 46332273, "comment_id": 79625849, "body": "A guess is <i>not</i> an answer. A comment at best."}, {"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1505975804, "post_id": 46332273, "comment_id": 79633694, "body": "@JesperJuhl I&#39;m sorry my language was too equivocal for you. I did not guess. I knew that <code>dynamic_bitset</code> satisfied everything the question had asked for, but didn&#39;t presume I had perfectly understood the questioner."}, {"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1505975818, "post_id": 46332273, "comment_id": 79633705, "body": "@Christophe Done"}, {"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1505975923, "post_id": 46332273, "comment_id": 79633772, "body": "@sehe That&#39;s true, but it seems to be what the questioner is after. They seem to ask for a lot of bit-oriented operations, and seem to mention integers only for the performance benefits of bit-packing, which dynamic bitset does provide (albeit with a dynamic memory allocation)."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1505976374, "post_id": 46332273, "comment_id": 79634005, "body": "Thanks for expanding the answer."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505978887, "post_id": 46332273, "comment_id": 79635458, "body": "@ArthurTacca agree. Somehow I picked on the &quot;BigInteger&quot; mention in the question a bit too much."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505998113, "post_id": 46332273, "comment_id": 79648622, "body": "@sehe I didn&#39;t quite know how best to refer to it, because I&#39;m doing integer stuff like less-than, but also adding a new msb, which feels more like bitset stuff. The dynamic_bitset indeed offers both.  The only slight drawback is the two-step left shift."}], "tags": [], "owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "is_accepted": false, "score": 4, "last_activity_date": 1505975706, "last_edit_date": 1505975706, "creation_date": 1505944222, "answer_id": 46332273, "question_id": 46331998, "link": "https://stackoverflow.com/questions/46331998/bitset-vector-of-bool-or-vector-of-ints-for-simple-big-integer/46332273#46332273", "title": "Bitset, vector of bool or vector of ints for simple big integer", "body": "<p>I think <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/dynamic_bitset/dynamic_bitset.html\" rel=\"nofollow noreferrer\"><code>boost::dynamic_bitset</code></a> is what you're after.</p>\n\n<p>Here is an example covering your requirements:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/dynamic_bitset.hpp&gt;\nint main() {\n    boost::dynamic_bitset&lt;&gt; a(3, 2); // a = 010\n    a[0] = true;                     // a = 011\n    a.push_back(true);               // a = 1011\n    boost::dynamic_bitset&lt;&gt; b = a;   // b = 1011\n    a &lt;&lt;= 1;                         // a = 0110\n    bool aless = a &lt; b;              // true\n    unsigned long al = a.to_ulong(); // al = 6\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \", al=\" &lt;&lt; a.to_ulong() &lt;&lt; \"\\n\"\n              &lt;&lt; \"b=\" &lt;&lt; b &lt;&lt; \", bl=\" &lt;&lt; b.to_ulong() &lt;&lt; \"\\n\"\n              &lt;&lt; \"a&lt;b=\" &lt;&lt; (a&lt;b) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>A few notes:</p>\n\n<ul>\n<li>The object is totally dynamic, with no opportunity to take advantage of your knowledge about a maximum size. I believe it doesn't even use the small object optimisation, so it will always allocate some dynamic memory.</li>\n<li>The constructor is a bit peculiar. The first parameter is the number of bits, and the second is their value as an integer. That means to initialise to a single true bit, as you requested, you would use <code>dynamic_bitset&lt;&gt;(1, 1)</code>. Sadly there is no <code>initializer_list</code> constructor so you can't just do <code>a = {true}</code>. Perhaps the clearest thing would be to default construct the object and <code>push_back(true)</code> on a separate line.</li>\n<li><code>push_back</code> affects the most significant bit i.e. the value on the left. That's because \"front\" means element 0, which is the least significant bit.</li>\n<li>The shift left operator does not grow the object, so to append an item to the front you need to:\n\n<ol>\n<li><code>a.push_back(false)</code> (the value you push doesn't matter because it will get thrown away in a moment).</li>\n<li><code>a &lt;&lt;= 1</code></li>\n<li><code>a[0] = x</code> if you want to set the new value.</li>\n</ol></li>\n<li><code>to_ulong()</code> will only work if the object has few enough elements that it fits in an <code>unsigned long</code> on your platform. Note that it is not an <code>unsigned long long</code>, so even on a 64 bit system it is likely to be 32 bits.</li>\n<li>There are some other interesting methods worth taking a look at e.g. <code>any()</code>, <code>all()</code> and <code>count()</code>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1506213636, "post_id": 46385210, "comment_id": 79729046, "body": "A deque of bools looks very useful. The less-than operator for a deque of ints would probably be too complex to make that a good choice."}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 0, "last_activity_date": 1506209589, "creation_date": 1506209589, "answer_id": 46385210, "question_id": 46331998, "link": "https://stackoverflow.com/questions/46331998/bitset-vector-of-bool-or-vector-of-ints-for-simple-big-integer/46385210#46385210", "title": "Bitset, vector of bool or vector of ints for simple big integer", "body": "<p>The operations you describe (leaving out the implicit interpretation as an integer) are actually those provided efficiently by a <a href=\"https://en.wikipedia.org/wiki/Double-ended_queue\" rel=\"nofollow noreferrer\">deque</a>.  If you can tolerate the memory overhead, you could use <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>std::deque&lt;bool&gt;</code></a> (<code>std::list&lt;bool&gt;</code> would also work, but would have even higher overhead).</p>\n\n<p>If the overhead is too much, you could start with</p>\n\n<pre><code>struct Bits {\n  std::deque&lt;unsigned&gt; deq;\n  int ms_free,ls_free;   // unused bits in the two end words\n};\n</code></pre>\n\n<p>and write methods to push bits on either end (for the right end, you would <code>deq.push_back()</code> if <code>lsb_free==0</code> and store <em>into</em> <code>deq.back()</code> otherwise).  Comparison would use <code>deq.size()</code> and <code>ms_free+ls_free</code> to know how to align the two sequences.</p>\n"}], "owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 1, "accepted_answer_id": 46385210, "answer_count": 2, "score": 2, "last_activity_date": 1506209589, "creation_date": 1505942722, "last_edit_date": 1506208340, "question_id": 46331998, "link": "https://stackoverflow.com/questions/46331998/bitset-vector-of-bool-or-vector-of-ints-for-simple-big-integer", "title": "Bitset, vector of bool or vector of ints for simple big integer", "body": "<p>I have an algorithm where I currently use two unsigned integers as bitmaps to store information about the input; this limits the maximum input size to 64, so I'd like to create a version where the integers are replaced by a bitset or simple big integer. I started writing something using vector&lt;bool&gt;, but looking around on SO, I'm seeing a lot of answers telling me to avoid vector&lt;bool&gt;.  </p>\n\n<p>The operations I need:</p>\n\n<ul>\n<li>Initialize to all-zeros.  </li>\n<li>Shift left (multiply by two) and set new lsb.  </li>\n<li>Add and set msb.</li>\n<li>Compare two sets to find smallest/lexicographically first.  </li>\n</ul>\n\n<p>When they are created, I know the maximum number of bits, but at first I'll need only 1 bit; then, at every step, one set is shifted left while the other will have a new highest bit added:  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>{\n    a &lt;&lt;= 1;\n    a[0] = x;\n    b[++msb] = y;\n    if (a &lt; b) b = a;\n} \n</code></pre>\n\n<p>If I create the bitsets with size 1, and then gradually expand them, maybe the comparisons will be quicker than if I immediately set the length to the maximum and have potentially thousands of leading zeros?  </p>\n\n<p>So should I continue using vector&lt;bool&gt; or use std::bitset (which unfortunately is fixed-size) or write a simple biginteger implementation capable of just the operations mentioned above using a vector of unsigned ints?</p>\n\n<hr>\n\n<p>Using vector&lt;bool&gt; you can intialize the vectors with zero-length:  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;bool&gt; a(0), b(0);\n</code></pre>\n\n<p>and then perform the operations mentioned above like this:  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>{\n    a.push_back(x);\n    b.insert(b.begin(), y);\n    if (a &lt; b) b = a;\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "clang", "openmp", "xcode9"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1505990518, "post_id": 46331918, "comment_id": 79643350, "body": "It&#39;s probably the case that Xcode is passing some Apple-specific option that is not understood by the vanilla Clang and rather treated as an input file name. It could be the <code>--serialize-diagnostics &#47;Users&#47;Nathan&#47;Documents&#47;Programming&#47;ISET_CoupledFormulationM&zwnj;&#8203;erged&#47;ProjectXcodePa&zwnj;&#8203;rallel&#47;lib&#47;ISET.buil&zwnj;&#8203;d&#47;Debug&#47;scieng.build&zwnj;&#8203;&#47;Objects-normal&#47;x86_&zwnj;&#8203;64&#47;ComplexFloat.dia</code> option."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 8648101, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/11d8909eb1dc976c0e3e99829d7af69a?s=128&d=identicon&r=PG", "display_name": "Mikael", "link": "https://stackoverflow.com/users/8648101/mikael"}, "is_accepted": true, "score": 5, "last_activity_date": 1505990911, "creation_date": 1505990911, "answer_id": 46341975, "question_id": 46331918, "link": "https://stackoverflow.com/questions/46331918/compilation-error-when-using-xcode-9-0-with-clang-cannot-specify-o-when-genera/46341975#46341975", "title": "Compilation error when using Xcode 9.0 with clang (cannot specify -o when generating multiple output files)", "body": "<p>Xcode 9.0 adds -index-store-path to the build command. It's not supported in clang yet. <a href=\"https://github.com/facebook/infer/commit/17cc5ec7bec1ef0d10fc3461f089384ee7e51c7f\" rel=\"noreferrer\">See this explanation.</a></p>\n\n<p>You can remove it by disabling the build option <strong>Index-While-Building Functionality</strong> in Xcode.</p>\n"}], "owner": {"reputation": 35, "user_id": 7097729, "user_type": "registered", "profile_image": "https://graph.facebook.com/1405747106109750/picture?type=large", "display_name": "Nathan Shauer", "link": "https://stackoverflow.com/users/7097729/nathan-shauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1951, "favorite_count": 2, "accepted_answer_id": 46341975, "answer_count": 1, "score": 3, "last_activity_date": 1505990911, "creation_date": 1505942265, "question_id": 46331918, "link": "https://stackoverflow.com/questions/46331918/compilation-error-when-using-xcode-9-0-with-clang-cannot-specify-o-when-genera", "title": "Compilation error when using Xcode 9.0 with clang (cannot specify -o when generating multiple output files)", "body": "<p>I updated my Xcode yesterday (version 9.0) and since then I cannot compile my code with clang anymore. It works great with with apple native compiler, but gives a compilation error with clang from macports. I will explain with more details now...</p>\n\n<p>I usually use clang 4.0 because it has openmp support and I change in Xcode by creating a user-defined setting as in the following figure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/r0M9r.png\" rel=\"nofollow noreferrer\">Image with how to use clang 4.0 from macports in Xcode</a></p>\n\n<p>This has been working perfectly for some time until I updated to Xcode 9.0. Now, I get the following error from clang compiler:</p>\n\n<p>cannot specify -o when generating multiple output files.</p>\n\n<p>I researched a bit and a lot of people say this is because you may have .h files in the compilation table. I double checked and this is not my case. I also would think that this error would have happened with and older Xcode version.</p>\n\n<p>Next, I am attaching the complete compilation command given by Xcode (it's a bit big though!).</p>\n\n<pre><code>CompileC /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/Objects-normal/x86_64/ComplexFloat.o SciEng/Algebra/ComplexFloat.C normal x86_64 c++ com.apple.compilers.llvm.clang.1_0.compiler\ncd /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver\nexport LANG=en_US.US-ASCII\n/opt/local/bin/clang-mp-4.0 -x c++ -arch x86_64 -fmessage-length=0 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wno-return-type -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wno-unused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-bool-conversion -Wno-enum-conversion -Wno-float-conversion -Wno-non-literal-null-conversion -Wno-objc-literal-conversion -Wno-shorten-64-to-32 -Wno-newline-eof -Wno-c++11-extensions -DCMAKE_INTDIR=\\\"Debug\\\" -DVECLIB_MAXIMUM_THREADS=8 -DPARALLEL_ON -DNUM_PROC=8 -DUSE_VTK -DvtkDomainsChemistry_AUTOINIT=1(vtkDomainsChemistryOpenGL2) -DvtkRenderingContext2D_AUTOINIT=1(vtkRenderingContextOpenGL2) -DvtkRenderingCore_AUTOINIT=3(vtkInteractionStyle,vtkRenderingFreeType,vtkRenderingOpenGL2) -DvtkRenderingOpenGL2_AUTOINIT=1(vtkRenderingGL2PSOpenGL2) -DvtkRenderingVolume_AUTOINIT=1(vtkRenderingVolumeOpenGL2) -DUSE_CGAL -DCGAL_USE_MPFR -DCGAL_USE_GMP -DUSE_CGAL_EXACT_ARITHMETIC -DMKL_VERSION_11 -DUSE_PARDISO_MKL -DMKL_NUM_THREADS=8 -DXLC_QNOTEMPINC -DNO_IMPLICIT_TEMPLATE -DSCIENG_CHECK_SUBSCRIPTS -DBOOST_DEBUG=1 -DSET_DEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -Winvalid-offsetof -mmacosx-version-min=10.13 -g -Wno-sign-conversion -Wno-infinite-recursion -Wno-move -Wno-comma -Wno-block-capture-autoreleasing -Wno-strict-prototypes -Wno-range-loop-analysis -index-store-path /Users/Nathan/Library/Developer/Xcode/DerivedData/ISET-eireryvadmfrwyarbuzbnkopwhid/Index/DataStore -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/Debug/include -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Algebra -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Array -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/AutoDeriv -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/DataModeling -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Function -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/LapackWrap -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/SciEng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Units -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Vector -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/include -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/analysis -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/cholmod -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/cosys -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crackmg2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgeoeng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgeoeng2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgrphysics -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/extract -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/fiber_gfem -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/grgeoeng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/integration -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/ma27solver -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/material -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/material2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/mesh -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/mesh2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/pardiso -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/post -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/pre -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/python -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/renumber -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/tNewtonRaphason -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/topology -I/opt/local/include -I/opt/local/include/vtk-7.1 -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/python2.7 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel -I/Users/Nathan/Documents/Programming/CGAL_CleanVersions/CGAL-4.10/compileXcode/include -I/Users/Nathan/Documents/Programming/CGAL_CleanVersions/CGAL-4.10/include -I/opt/intel/compilers_and_libraries_2016.2.146/mac/mkl/include -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/DerivedSources/x86_64 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/DerivedSources -Wmost -Wno-four-char-constants -Wno-unknown-pragmas -F/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/Debug -m64 -fopenmp -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Algebra -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Array -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/AutoDeriv -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/DataModeling -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Function -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/LapackWrap -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/SciEng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Units -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Vector -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/include -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/analysis -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/cholmod -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/cosys -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crackmg2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgeoeng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgeoeng2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/crgrphysics -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/extract -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/fiber_gfem -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/grgeoeng -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/integration -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/ma27solver -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/material -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/material2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/mesh -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/mesh2 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/pardiso -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/post -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/pre -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/python -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/renumber -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/tNewtonRaphason -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/topology -isystem /opt/local/include -I/opt/local/include/vtk-7.1 -I/usr/include/python2.7 -I/Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel -I/Users/Nathan/Documents/Programming/CGAL_CleanVersions/CGAL-4.10/compileXcode/include -I/Users/Nathan/Documents/Programming/CGAL_CleanVersions/CGAL-4.10/include -I/opt/intel/compilers_and_libraries_2016.2.146/mac/mkl/include -MMD -MT dependencies -MF /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/Objects-normal/x86_64/ComplexFloat.d --serialize-diagnostics /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/Objects-normal/x86_64/ComplexFloat.dia -c /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/SetSolver/SciEng/Algebra/ComplexFloat.C -o /Users/Nathan/Documents/Programming/ISET_CoupledFormulationMerged/ProjectXcodeParallel/lib/ISET.build/Debug/scieng.build/Objects-normal/x86_64/ComplexFloat.o\n</code></pre>\n\n<p><strong>Note: I use CMake to generate the project.</strong></p>\n\n<p>I can supply any more information that might be needed</p>\n\n<p>Thanks for the help!</p>\n\n<p>Nathan</p>\n"}, {"tags": ["c++", "multithreading", "qt", "ubuntu", "debugging"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1505942580, "post_id": 46331898, "comment_id": 79624719, "body": "On Windows I would attach a debugger and let it be signalled when a thread terminates. In WInDbg it is <code>sxe et</code>. To analyze it later, I would create a crash dump with <code>.dump</code>. I&#39;m sure all that exists in GDB as well."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1505942630, "post_id": 46331898, "comment_id": 79624745, "body": "Shouldn&#39;t your debugger immediately break when <code>SIGSEGV</code> is generated? You may want to check gdb signal handling settings."}, {"owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "edited": false, "score": 0, "creation_date": 1505942933, "post_id": 46331898, "comment_id": 79624860, "body": "Yes it is good idea to break process after SIGSEGV. I have ability to run/attach gdb on my program. What do you mean talking about signal handling settings?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1505943061, "post_id": 46331898, "comment_id": 79624890, "body": "So you didn&#39;t run program under debugger yet? Then you should definitely do so. You can read about signal handling settings <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Signals.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1505975075, "post_id": 46331898, "comment_id": 79633307, "body": "Useful tools are: <code>gdb</code>, <code>valgrind</code> and <code>rr</code>."}], "owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505942154, "creation_date": 1505942154, "question_id": 46331898, "link": "https://stackoverflow.com/questions/46331898/thread-falls-without-coredump", "title": "Thread falls without coredump", "body": "<p>I have multi-thread application, in which main thread falls on some event. Thread falls on SIGSEGV signal. Other threads continue work. My question is how to dig maximum information about  failed thread to analyse it later? Starting with the question of how to find out which of the threads fell.\nReally it is actual ussie which arose when working with qt 4.7 signal/slot system + webview widget. It's interesting that on version 5 everything is fine.\nI will be happy for any idea. I'm working on ubuntu, qt project.</p>\n"}, {"tags": ["c++", "windows", "microsoft-runtime-library"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505942337, "post_id": 46331874, "comment_id": 79624616, "body": "It is not exported so you can&#39;t link it.  Which is for the better, doing this is unlikely to come to good end.  Just restart the program."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505942503, "post_id": 46331874, "comment_id": 79624689, "body": "@HansPassant - no, this api is exported. say by <i>msvcrt.dll</i>. and in lib files we can found this names too"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505942874, "post_id": 46331874, "comment_id": 79624838, "body": "<i>my program is linked with crt</i> - which <i>lib</i> exactly you use ? you need open this lib and search for <code>initterm</code> string. think it exist and lib file and undefined reference only because you wrong declared it"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505943120, "post_id": 46331874, "comment_id": 79624916, "body": "for example if use say <i>ucrt.lib</i> here exist both <i>initterm</i> and was bind to <code>api-ms-win-crt-runtime-l1-1-0.dll</code>. in other words to <code>ucrtbase.dll</code>. another crt libs can bind to another dlls. and this functions very easy implement yourself too"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505943600, "post_id": 46331874, "comment_id": 79625084, "body": "<i>Is there any way to do it?</i> of course yes and very simply - correct declare it and call. or you have problems with input parameters ? like <code>#pragma const_seg(&quot;.CRT$XCA&quot;)   const _PVFV __xc_a = 0; #pragma const_seg(&quot;.CRT$XCZ&quot;)   const _PVFV __xc_z = 0;</code> and call <code>_initterm(&amp;__xc_a, &amp;__xc_z);</code>"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1505944272, "post_id": 46331874, "comment_id": 79625318, "body": "Oh how silly of me. In the declaration I didn&#39;t state that its c function (in programming in c++). So the name got mangled."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1505944395, "post_id": 46331874, "comment_id": 79625373, "body": "From the documentation: <b>&quot;Do not call these methods in a program.&quot;</b>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505944975, "post_id": 46331874, "comment_id": 79625590, "body": "The real question is; <i>why</i> do you want (or need) to do this?"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505946881, "post_id": 46331874, "comment_id": 79626269, "body": "My project has special requirements that require me to do ugly stuff @RbMm If you would make your comment into answer I would mark it"}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1505984139, "post_id": 46333220, "comment_id": 79638790, "body": "Thanks. Just a fast clarification: Shouldnt function pointer be postincremented instead of preincremented?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1505985063, "post_id": 46333220, "comment_id": 79639400, "body": "@MarcinK. - i use <code>__xc_a</code> as pointer begin. so <code>ppfn</code> at begin will be point exactly to <code>__xc_a</code> which is 0. so <code>*ppfn</code> at begin is 0. preincremented is small optimization. but if use postincrement will be no error"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 1, "last_activity_date": 1505950421, "creation_date": 1505950421, "answer_id": 46333220, "question_id": 46331874, "link": "https://stackoverflow.com/questions/46331874/how-to-explicitly-call-crt-startup-functions/46333220#46333220", "title": "How to explicitly call CRT startup functions", "body": "<p>the <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/initterm-initterm-e\" rel=\"nofollow noreferrer\">_initterm</a>, and <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/initterm-initterm-e\" rel=\"nofollow noreferrer\">_initterm_e</a> (note in msdn <code>_initterm_e</code> is wrong declared - really it used <code>_PIFV</code> type) is exported by different CRT dlls. and it declared in lib files too. and implementation of this functions is very simply:</p>\n\n<pre><code>typedef void (__cdecl *_PVFV)();\n\nvoid _initterm(const _PVFV *ppfn, const _PVFV *end)\n{\n    do \n    {\n        if (_PVFV pfn = *++ppfn)\n        {\n            pfn();\n        }\n    } while (ppfn &lt; end);\n}\n\ntypedef int  (__cdecl *_PIFV)();\n\nint _initterm_e(const _PIFV *ppfn, const _PIFV *end)\n{\n    do \n    {\n        if (_PIFV pfn = *++ppfn)\n        {\n            if (int err = pfn()) return err;\n        }\n    } while (ppfn &lt; end);\n\n    return 0;\n}\n</code></pre>\n\n<p>so you can import it ot use own implementation.\nhere faster question - what is use as input parameters ?</p>\n\n<p>say <em>c++</em> (<em>CL</em> compiler how minimum) use <code>( \".CRT$XCA\", \".CRT$XCZ\" )</code> sections for place <em>c++</em> global initializes. so we can do next:</p>\n\n<pre><code>extern \"C\"\n{\n#pragma const_seg(\".CRT$XCA\")\n  const _PVFV __xc_a = 0;\n#pragma const_seg(\".CRT$XCZ\")\n  const _PVFV __xc_z = 0;\n\n#pragma const_seg(\".CRT$XIA\")\n  const _PVFV __xi_a = 0;\n#pragma const_seg(\".CRT$XIZ\")\n  const _PVFV __xi_z = 0;\n}\n\n    /*\n     * do initializations\n     */\n    initret = _initterm_e( &amp;__xi_a, &amp;__xi_z );\n    if ( initret != 0 )\n        return initret;\n\n    /*\n     * do C++ initializations\n     */\n    _initterm( &amp;__xc_a, &amp;__xc_z );\n</code></pre>\n\n<p>but here need very good understand - what and why we doing</p>\n"}], "owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1407, "favorite_count": 0, "accepted_answer_id": 46333220, "answer_count": 1, "score": 0, "last_activity_date": 1505950421, "creation_date": 1505942053, "question_id": 46331874, "link": "https://stackoverflow.com/questions/46331874/how-to-explicitly-call-crt-startup-functions", "title": "How to explicitly call CRT startup functions", "body": "<p>Is there any way I can explicitly in my code call the functions that are normally called in mainCRTStartup functions? I'm specifically interested <strong>initterm</strong> and <strong>initterm_e</strong> functions. Even thought my program is linked with crt (it has to be, right?) I couldn't just call initterm - I tried to declare and just invoke and I got undefined reference.</p>\n\n<p>Is there any way to do it?</p>\n"}, {"tags": ["c++", "overloading", "default-arguments"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1505942063, "post_id": 46331861, "comment_id": 79624502, "body": "named parameters idiom (aka the Builder Pattern), structs (especially in C++20 with designated initializers), <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/parameter/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost Parameters</a> (or similar libraries)"}, {"owner": {"reputation": 1522, "user_id": 8157511, "user_type": "registered", "profile_image": "https://graph.facebook.com/638941339628236/picture?type=large", "display_name": "James Maa", "link": "https://stackoverflow.com/users/8157511/james-maa"}, "edited": false, "score": 0, "creation_date": 1505942260, "post_id": 46331861, "comment_id": 79624587, "body": "I don&#39;t think it is there right now, <code>va_arg</code> allows a similar feature, but I am quite sure not the same. <a href=\"http://www.cplusplus.com/reference/cstdarg/va_arg/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdarg/va_arg</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1505942613, "post_id": 46331861, "comment_id": 79624736, "body": "This gets asked a lot, but I&#39;ve rarely seen it asked with an actual real-world example where there wasn&#39;t a design problem. Perhaps you are different - in which case post miore details of your problem and design."}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1505944986, "post_id": 46331861, "comment_id": 79625594, "body": "@Neil One good example is the std::set constructor. There you can pass either nothing, the Compare, the Allocator, or both. Now imagine that instead of just those two, you have potentially N."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505945095, "post_id": 46331861, "comment_id": 79625641, "body": "@gmardau It&#39;s the imagining the case where you have potentially N that I have a problem with."}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1505947050, "post_id": 46331861, "comment_id": 79626321, "body": "@Neil When I say N it doesn&#39;t mean infinity, but not just 1 or 2. Some other containers have an Equal and a Hash. You can very easily end up with more."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505947216, "post_id": 46331861, "comment_id": 79626358, "body": "@gmardau You still haven&#39;t come up with a concrete case where you need this. which was the point of my original comment."}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1505947413, "post_id": 46331861, "comment_id": 79626406, "body": "@Neil I just gave you an example with the set container. If you need a more clear picture, merge the two range constructors (2) into one. <a href=\"http://en.cppreference.com/w/cpp/container/set/set\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/set/set</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505955949, "post_id": 46332159, "comment_id": 79628402, "body": "Can&#39;t help noting that <code>func(a, B{}, c);</code> is a lot less typing and can use the original function."}, {"owner": {"reputation": 411, "user_id": 8565659, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uWyrpvQQEgM/AAAAAAAAAAI/AAAAAAAAAAc/SqxAi_EUNug/photo.jpg?sz=128", "display_name": "Discoverer98", "link": "https://stackoverflow.com/users/8565659/discoverer98"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505957172, "post_id": 46332159, "comment_id": 79628625, "body": "That\u2019s absolutely true. However, I thought that the point of this exercise was to <i>not</i> pass values to the parameters. If we pass values to the parameters, then we don\u2019t even need default values: we can just pass values all the time."}], "tags": [], "owner": {"reputation": 411, "user_id": 8565659, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uWyrpvQQEgM/AAAAAAAAAAI/AAAAAAAAAAc/SqxAi_EUNug/photo.jpg?sz=128", "display_name": "Discoverer98", "link": "https://stackoverflow.com/users/8565659/discoverer98"}, "is_accepted": false, "score": 0, "last_activity_date": 1505944221, "last_edit_date": 1505944221, "creation_date": 1505943623, "answer_id": 46332159, "question_id": 46331861, "link": "https://stackoverflow.com/questions/46331861/c-combination-of-default-parameters/46332159#46332159", "title": "C++: Combination of default parameters", "body": "<p>I have seen problems like this particularly when you're dealing with a big and old codebase. The best solution would be to redesign things so that you don't end up with such a problem, but I understand that sometimes you are under pressure and you have to make do with minimal changes.</p>\n\n<p>For something like that, I would recommend creating a class that would encapsulate the parameters for that function. And that class would have the Builder design pattern:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Builder_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Builder_pattern</a></p>\n\n<p>So that you would have flexibility in which parameters you would pass.</p>\n\n<p>In the example you gave, you could have something like this:</p>\n\n<pre><code>class FuncParams\n{\n  public:\n     A&amp; getA();\n     B&amp; getB();\n     C&amp; getC();\n     D&amp; getD();\n\n     class FuncParamsBuilder\n     {\n         FuncParamsBuilder&amp; setA(A&amp; a);\n         FuncParamsBuilder&amp; setB(B&amp; b);\n         FuncParamsBuilder&amp; setC(C&amp; c);\n         FuncParamsBuilder&amp; setD(D&amp; d);\n         FuncParams *build();\n     }\n\n     static FuncParamsBuilder&amp; builder();\n}\n</code></pre>\n\n<p>Then, your function call would be just:</p>\n\n<pre><code>void func(FuncParams *params);\n</code></pre>\n\n<p>And you could call it this way:</p>\n\n<pre><code>func(FuncParams::builder().setA(a).setC(c).build());\n</code></pre>\n\n<p>Notice that this is not a perfect way to code this: you should adapt the code snippets above to fit better what you're trying to do. You may also think if you want to use pointers, references, or, even better, smart pointers such as unique_ptr objects. I hope this helps!</p>\n"}], "owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505944221, "creation_date": 1505941966, "question_id": 46331861, "link": "https://stackoverflow.com/questions/46331861/c-combination-of-default-parameters", "title": "C++: Combination of default parameters", "body": "<p>I have a function that takes up to 4 arguments, all of them optional. Also, all arguments have default values, and the user can specify whichever combination of arguments he wants.</p>\n\n<p>So if I have this:</p>\n\n<pre><code>void func (const A &amp;a = A(), const B &amp;b = B(), const C &amp;c = C(), const D &amp;d = D());\n</code></pre>\n\n<p>The user can use it as <code>func(A(), B())</code> but not as <code>func(B(), C())</code>.</p>\n\n<p>Is there any way to allow every argument combination without having to create a bunch of overloads? (In this case it would be 8)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1505941657, "post_id": 46331684, "comment_id": 79624317, "body": "When you declare something as <code>char</code> it is <code>char</code>, not an array or a pointer."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1505941665, "post_id": 46331684, "comment_id": 79624324, "body": "The reason for the compile error is because there is no standard overload of <code>istream::get</code> that takes args of type <code>char</code>, <code>streamsize</code>, <code>char</code>. I guess the obvious fix is to change <code>char m_name;</code> to <code>char m_name[32];</code> , but you should probably be using <code>std::string</code> instead :)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505943126, "post_id": 46331826, "comment_id": 79624918, "body": "Hint: prefer cppreference.com over cplusplus.com for your reference site needs. The latter has way too many errors and the former usually is more accurate."}], "tags": [], "owner": {"reputation": 592, "user_id": 752345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80df1901edc02f0d1a18627d9e458688?s=128&d=identicon&r=PG&f=1", "display_name": "BizarreCake", "link": "https://stackoverflow.com/users/752345/bizarrecake"}, "is_accepted": false, "score": 0, "last_activity_date": 1505944126, "last_edit_date": 1505944126, "creation_date": 1505941814, "answer_id": 46331826, "question_id": 46331684, "link": "https://stackoverflow.com/questions/46331684/beginner-c-having-trouble-compiling-my-code/46331826#46331826", "title": "Beginner C++ - Having trouble compiling my code", "body": "<p>istream::get has the following overloads (courtesy of <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/basic_istream/get</a>):</p>\n\n<pre><code>(1)     int_type get();\n(2)     basic_istream&amp; get( char_type&amp; ch );\n(3)     basic_istream&amp; get( char_type* s, std::streamsize count );\n(4)     basic_istream&amp; get( char_type* s, std::streamsize count, char_type delim );\n(5)     basic_istream&amp; get( basic_streambuf&amp; strbuf );\n(6)     basic_istream&amp; get( basic_streambuf&amp; strbuf, char_type delim );\n</code></pre>\n\n<p>You are calling get with three arguments, and out of the overloads above, only (4) matches.</p>\n\n<p>As you can see, it expects a char <strong>pointer</strong> as its first argument, where as you are passing a char. (m_name)</p>\n\n<p>I think you meant to define m_name as a char array (char m_name[128] for example), since that would be much more reasonable.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1505941852, "creation_date": 1505941852, "answer_id": 46331833, "question_id": 46331684, "link": "https://stackoverflow.com/questions/46331684/beginner-c-having-trouble-compiling-my-code/46331833#46331833", "title": "Beginner C++ - Having trouble compiling my code", "body": "<p>There are six overloads of <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>istream::get</code></a>. The arguments you are passing don't match any of them. That's why the compiler fails to compile that line.</p>\n\n<p>The problem is that you are using <code>char</code> for the <code>name</code> member variable of <code>Kingdom</code>. That does not sound right. A name is usually a string. It <code>char</code> cannot be used to represent a name.</p>\n\n<p>You can change <code>name</code> to be of type <code>std::string</code> or an array of <code>char</code>. If you use an array of <code>char</code>, you can use the function call like you have.</p>\n\n<pre><code>struct Kingdom {\n    char m_name[32]; // Since you are passing 32 to cin.get\n    int m_population;\n};\n</code></pre>\n\n<p>You use <code>std::string</code> for <code>name</code>, you need to use <code>std::getline</code>.</p>\n\n<pre><code>struct Kingdom {\n    std::string m_name;\n    int m_population;\n};\n</code></pre>\n\n<p>and ...</p>\n\n<pre><code>std::getline(std::cin, Kingdom.m_name);\n</code></pre>\n\n<p>I would recommend using <code>std::string</code>. They are much easier to work with.</p>\n"}], "owner": {"reputation": 148, "user_id": 8195210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2aa132c70a4eb3b467ce8a3368a82c1c?s=128&d=identicon&r=PG&f=1", "display_name": "displayName", "link": "https://stackoverflow.com/users/8195210/displayname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "closed_date": 1505942749, "answer_count": 2, "score": -3, "last_activity_date": 1508678864, "creation_date": 1505941272, "last_edit_date": 1508678864, "question_id": 46331684, "link": "https://stackoverflow.com/questions/46331684/beginner-c-having-trouble-compiling-my-code", "closed_reason": "Not suitable for this site", "title": "Beginner C++ - Having trouble compiling my code", "body": "<p><em>EDIT: Working code below</em></p>\n\n<p>I'll paste my code below, but if someone could please explain to me why what's happening is happening instead of simply writing me out an answer, that'd be much appreciated, thank you!</p>\n\n<p>Im having a compilation error, telling me there is <code>no instance of overloaded function</code>. I can circumvent this compilation error by commenting out the line <code>cin.get(Kingdom.m_name, 32, '\\n');</code>, but this is obviously useless, because now my program just terminates after entering the name of the first Kingdom. </p>\n\n<p>I assume the line <code>void read(sict::Kingdom&amp; Kingdom)</code> forces the computer to cycle through my Kingdom array, based on user input. </p>\n\n<pre><code>//header file\n#ifndef KINGDOM_H\n#define KINGDOM_H\n#include &lt;cstdlib&gt;\n// TODO: sict namespace\nnamespace sict\n{\n    // TODO: define the structure Kingdom in the sict namespace\n\n        struct Kingdom {\n            char m_name[32];\n            int m_population;\n        };\n        // TODO: declare the function display(...),\n        //         also in the sict namespace\n        void display(const Kingdom&amp; pKingdom);\n        void display(const Kingdom kingdoms[], size_t count);\n}\n\n\n#endif\n</code></pre>\n\n<p>`</p>\n\n<pre><code>//implementation .cpp\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include \"Kingdom.h\"\nusing namespace std;\n// TODO: the sict namespace\nnamespace sict\n{\n    // TODO:definition for display(...)\n\n    void display(const Kingdom&amp; pKingdom) {\n        cout &lt;&lt; pKingdom.m_name &lt;&lt; \", \" &lt;&lt; \"population \" &lt;&lt; pKingdom.m_population &lt;&lt; endl;\n    }\n\n    void display(const Kingdom kingdoms[], size_t count) {\n        cout &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n        cout &lt;&lt; \"Kingdoms of SICT\" &lt;&lt; endl;\n        cout &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n        int pop = 0;\n        for (size_t i = 0; i &lt; count; i++) {\n            cout &lt;&lt; i + 1 &lt;&lt; \". \";\n            display(kingdoms[i]);\n                pop += kingdoms[i].m_population;\n        }\n        cout &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n        cout &lt;&lt; \"Total population of SICT: \" &lt;&lt; pop &lt;&lt; endl;\n        cout &lt;&lt; \"------------------------------\";\n    }\n}\n</code></pre>\n\n<p>And my main,</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;cstring&gt; //for size_t definition\n    #include &lt;vector&gt;\n    #include \"Kingdom.h\"\n\n    using namespace std;\n    using namespace sict;\n\n    void read(Kingdom&amp;);\n\n    int main() {\n        int count = 0; // the number of kingdoms in the array\n\n        // TODO: declare the pKingdom pointer here (don't forget to initialize it)\n        Kingdom *pKingdom = nullptr;\n        cout &lt;&lt; \"==========\\n\"\n            &lt;&lt; \"Input data\\n\"\n            &lt;&lt; \"==========\\n\"\n            &lt;&lt; \"Enter the number of Kingdoms: \";\n        cin &gt;&gt; count;\n        cin.ignore();\n\n        if (count &lt; 1) return 1;\n\n        // TODO: allocate dynamic memory here for the pKingdom pointer\n        pKingdom = new Kingdom[count];\n        for (int i = 0; i &lt; count; ++i) {\n            cout &lt;&lt; \"Kingdom #\" &lt;&lt; i + 1 &lt;&lt; \": \" &lt;&lt; endl;\n            // TODO: add code to accept user input for Kingdom i\n            read(pKingdom[i]);\n        }\n        cout &lt;&lt; \"==========\" &lt;&lt; endl &lt;&lt; endl;\n\n        // testing that \"display(...)\" works\n        cout &lt;&lt; \"------------------------------\" &lt;&lt; endl\n            &lt;&lt; \"The 1st Kingdom entered is\" &lt;&lt; endl\n            &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n        display(pKingdom[0]);\n        cout &lt;&lt; \"------------------------------\" &lt;&lt; endl &lt;&lt; endl;\n\n        // expand the array of Kingdoms by 1 element\n        count = count + 1;\n        Kingdom *cpy_pKingdom = nullptr;\n        // TODO: allocate dynamic memory for count + 1 Kingdoms\n        cpy_pKingdom = new Kingdom[count];\n        // TODO: copy elements from original array into this newly allocated array\n        for (int i = 0; i &lt; count; i++) {\n            cpy_pKingdom[i] = pKingdom[i];\n        }\n        // TODO: deallocate the dynamic memory for the original array\n        delete[] pKingdom;\n        // TODO: copy the address of the newly allocated array into pKingdom pointer\n        pKingdom = cpy_pKingdom;\n        // add the new Kingdom\n        cout &lt;&lt; \"==========\\n\"\n             &lt;&lt; \"Input data\\n\"\n             &lt;&lt; \"==========\\n\";\n        cout &lt;&lt; \"Kingdom #\" &lt;&lt; count &lt;&lt; \": \" &lt;&lt; endl;\n             // TODO: accept input for the new element in the array\n             read(pKingdom[count - 1]);\n        cout &lt;&lt; \"==========\\n\" &lt;&lt; endl;\n\n        // testing that the overload of \"display(...)\" works\n        display(pKingdom, count);\n        cout &lt;&lt; endl;\n\n        // TODO: deallocate the dynamic memory here\n        //delete[] pKingdom;\n        //delete[] cpy_pKingdom;\n        getchar();\n        return 0;\n    }\n\n    // read accepts data for a Kingdom from standard input\n    //\n    void read(Kingdom&amp; pkingdom) {\n        cout &lt;&lt; \"Enter the name of the Kingdom: \";\n        cin.get(pkingdom.m_name, 32, '\\n');\n        cin.ignore(2000, '\\n');\n        cout &lt;&lt; \"Enter the number of people living in \" &lt;&lt; pkingdom.m_name &lt;&lt; \": \";\n        cin &gt;&gt; pkingdom.m_population;\n        cin.ignore(2000, '\\n');\n</code></pre>\n\n<p>This can be quite the headache, and my hat goes off to all programmers out there that have all gone through this. </p>\n"}, {"tags": ["c++", "c", "gcc", "standards"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1505941234, "post_id": 46331625, "comment_id": 79624122, "body": "Since you have to ask this question, it&#39;s probably a good idea to just not rely on it whether or not the expression is guaranteed not to execute. Future readers of your code / your coworkers / future you (while debugging) are likely to not know whether this is valid."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505941237, "post_id": 46331625, "comment_id": 79624125, "body": "<i>everything</i> is defined in terms of the &quot;as-if&quot; rule, applied to the abstract machine defined in the standard"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505941358, "post_id": 46331625, "comment_id": 79624183, "body": "Do note that accessing a member of a null pointer is undefined behavior.  That allows the compiler to do whatever it wants."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505941361, "post_id": 46331625, "comment_id": 79624186, "body": "I think the whole question can be rephrased as &quot;Is <code>(struct S*)NULL)-&gt;value;</code> line UB?&quot; The answer is Yes, I believe..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1505941410, "post_id": 46331625, "comment_id": 79624211, "body": "Why not use <code>sizeof((struct S *)0-&gt;X)</code>; you know <code>sizeof()</code> doesn&#39;t evaluate its operand, but it would fail if <code>X</code> is not a member of <code>struct S</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1505941417, "post_id": 46331625, "comment_id": 79624217, "body": "And dereferencing nullptr <b>is</b> UB."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1505941609, "post_id": 46331625, "comment_id": 79624282, "body": "In C++, you might write traits to know if <code>A::value</code> exists, see <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\"><code>std::experimental::is_detected</code></a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1505941686, "post_id": 46331625, "comment_id": 79624336, "body": "@VTT: would fail with overload methods."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1505941724, "post_id": 46331625, "comment_id": 79624352, "body": "@VTT this question is tagged for C as well as C++."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1505941897, "post_id": 46331625, "comment_id": 79624420, "body": "@Jarod42 and others, the trick is (was?) common and based on the fact that <i>there must not happen any dereferencing</i> at all. It seems like it is there, but it isn&#39;t. Even in this case of mine: if the expression isn&#39;t actually ever evaluated, the UB doesn&#39;t apply \u2014 but is the core of the question, if the evaluation happens or not."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1505942136, "post_id": 46331625, "comment_id": 79624535, "body": "@JonathanLeffler definitely the third fix\u2026 though the <code>offsetof</code> avoids the show <code>(struct S *)NULL</code> which puzzles many."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1505942158, "post_id": 46331625, "comment_id": 79624546, "body": "You even say in your question &quot;The comma operator should evaluate the left operand&quot; but then go on to ask a question &quot;is it guaranteed NOT to&quot;, you contradict what you already appeared to know"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505942213, "post_id": 46331625, "comment_id": 79624564, "body": "It <i>can</i> happen, and you have proven it by using <code>volatile</code>. The point is that the compiler might &quot;think&quot; this is some special memory, reading from which is triggering some unknown action (like some hardware register read is sometimes having some side effects), and has to be performed."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1505942362, "post_id": 46331625, "comment_id": 79624627, "body": "@M.M apparently. If you reason about it better, you reach that the standard could state somewhere something like &quot;the evaluation must be skipped in the following cases where the compiler can assure there aren&#39;t side effect: \u2026 follow the list\u2026&quot;. I haven&#39;t digged into them too much, as you can imagine by the question, but even in those few lines read I&#39;ve found sometimes surprises."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1505943427, "post_id": 46331625, "comment_id": 79625028, "body": "The program has undefined behaviour. One of the legitimate manifestations of undefined behaviour is not crashing. There is nothing to discuss, really."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505945821, "post_id": 46331625, "comment_id": 79625921, "body": "I&#39;m sorry, the other part of the question, namely, how to make rhe compilatiin fail if requested struct member doesn&#39;t exist, is actually well defined and does have an answer. You can use <code>sizeof</code> as others suggested, or a not-taken branch of a conditional operator, e.g. <code>(0?(void)((type*)0)-&gt;member:(void)0)</code>. The expression in the left branch <i>is</i> guaranteed not to evaluate."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505946619, "post_id": 46331625, "comment_id": 79626202, "body": "@n.m. The question is also about my ignorance about what standards have to say. There was a chance that the left operand of the comma operator could have been unevaluated (hopely using the right word\u2026) under specific conditions as per standard, so that UB couldn&#39;t be triggered. It happened to be not so."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505989747, "post_id": 46331625, "comment_id": 79642839, "body": "&quot;In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?&quot; \u2013 You don&#39;t even have to know anything about C++ (except for the fact that it is Turing-complete) to answer this: figuring out whether the left operand has side-effects is equivalent to solving the Halting Problem. Obviously, the standard cannot force compiler writers to solve the Halting Problem, therefore, such a clause cannot possibly exist in the standard."}, {"owner": {"reputation": 618, "user_id": 497123, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79496390df1f49a4d253b2d1bab3a0d4?s=128&d=identicon&r=PG", "display_name": "Federico Poloni", "link": "https://stackoverflow.com/users/497123/federico-poloni"}, "edited": false, "score": 0, "creation_date": 1505994005, "post_id": 46331625, "comment_id": 79645757, "body": "Philosoraptor questions: how can you tell if a line of code is executed or not, if it has no side effects? And: in your example, the left-hand operand may throw a segfault; isn&#39;t that a side effect?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505994128, "post_id": 46331625, "comment_id": 79645841, "body": "In C you&#39;d rather write <code>#define STR_MEMBER(S, X) ((struct S){.X = 0}, #X)</code> which is 100% safe. The proper solution is of course, not to invent such horrible macros in the first place, but rather take action based on type. C has <code>_Generic</code> and C++ has templates. I don&#39;t think this macro fills any purpose in either language, smells like an &quot;XY problem&quot;."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1505998148, "post_id": 46331625, "comment_id": 79648647, "body": "Instead of using pointers, you can use in-place values in both languages as long as you abstract the in-place part to a helper macro: <code>#define STR_MEMBER(S,X) (sizeof(VALUE(S).X), #X)</code> with <code>VALUE(S)</code> defined as either <code>std::declval&lt;S&gt;()</code> or <code>(struct S){0}</code> depending on the state of <code>__cplusplus</code>."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1506018579, "post_id": 46331625, "comment_id": 79661977, "body": "@J&#246;rgWMittag interesting: it means gcc solved it! \u2014 or, that there is at least one case for which compilers can \u201csee\u201d that the only effect of an expression is to read a value\u2026 that then is discarded (because it&#39;s the left operand of the comma op), hence it can be optimized simply removing it. In this and other cases a standard could mandate a no-op, it is a matter of deciding to write so."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 618, "user_id": 497123, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/79496390df1f49a4d253b2d1bab3a0d4?s=128&d=identicon&r=PG", "display_name": "Federico Poloni", "link": "https://stackoverflow.com/users/497123/federico-poloni"}, "edited": false, "score": 0, "creation_date": 1506018779, "post_id": 46331625, "comment_id": 79662088, "body": "@FedericoPoloni nonsense. The compiler produces code and before that, an intermediate representation which can be \u201canalyzed\u201d to determine many things, among these if a certain \u201cpiece\u201d would have no effects if the code would have been generated. Of course, all the physical changes into the cpu, that occurs to execute any piece of code, could be seen as a side effects of that code. But it&#39;s not what I mean usually, and hopefully I am not alone."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506019061, "post_id": 46331625, "comment_id": 79662251, "body": "@Lundin I wrote a sentence to avoid comments like &quot;invent such horrible macros&quot;. Can you solve the problem with <code>_Generic</code> and templates? I&#39;ll see later your answer where, after the ritual &quot;it is UB&quot;, there&#39;s an explanation of how you&#39;d use <code>_Generic</code>(C11 anyway) and templates to achieve what I wanted. The macro fills the purpose explained in the question. I don&#39;t know how &quot;XY problems&quot; smell like."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506062615, "post_id": 46331625, "comment_id": 79676439, "body": "@ShinTakezou My point is, there should be no situation where you need to find out what members a struct have in run-time, since members are determined at compile time. The need for such suggests a muddy design to begin with, hence &quot;XY problem&quot; - what you think you need is not necessarily the best solution."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506062703, "post_id": 46331625, "comment_id": 79676482, "body": "With _Generic you wouldn&#39;t write a macro to see if a type exists, but perhaps to access it in a type safe manner. Given a proper typedef&#39;d struct <code>typedef struct { int value; } a_t;</code> you could for example write something like <code>#define get_value(name) _Generic((name), a_t: (name).value)</code> and call it like <code>a_t a; int something = get_value(a)</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506062778, "post_id": 46331625, "comment_id": 79676537, "body": "Compound literals inside the macro is otherwise the best way to solve the problem in the question. Some answers to <a href=\"https://stackoverflow.com/questions/43043246/how-to-create-type-safe-enums\">How to create type safe enums?</a> use very similar techniques."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506153117, "post_id": 46331625, "comment_id": 79713323, "body": "@Lundin &quot;find out what members struct have in run-time&quot;. Nope. My intention was some sort-of metaprogramming where everything must be done <b>at compile time</b>. Moreover, even the wrong macro works because at compile time gcc &quot;optimizes&quot; it and there exists no code which actually can execute the access at runtime. (By &quot;execute the access&quot; I mean a piece of assembly code which reads from a memory address 0 plus the offset of the member. If I had seen such a code, using <code>-S</code>, this question likely wouldn&#39;t exist.)"}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506153728, "post_id": 46331625, "comment_id": 79713472, "body": "@Lundin <code>_Generic</code>\u2026 I don&#39;t need type safety, but a string (known at compile time) which contains letters which are the symbol of a struct member. My initial thought indeed was to write a minimal parser for <code>struct</code> able to generate another <code>struct</code> combining other infos, then all put in <code>.h</code>\u2014all that to be sure the strings contain no typo\u2026 But then I wondered if it could be done by the preprocessor/compiler at compile time. The real usage wasn&#39;t like the given example but more like <code>struct info xxx_info[] = {{STR_MEMBER{xxx,yyy}, &#47;*\u2026*&#47;},&#47;*\u2026*&#47;};</code> All data are known at compile time."}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 12, "last_activity_date": 1505942241, "last_edit_date": 1505942241, "creation_date": 1505941449, "answer_id": 46331733, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46331733#46331733", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"noreferrer\">comma operator</a> (<a href=\"http://en.cppreference.com/w/c/language/operator_other#Comma_operator\" rel=\"noreferrer\">C documentation</a>, says something very similar) has no such guarantees.</p>\n\n<blockquote>\n  <p>In a comma expression <code>E1, E2</code>, the expression E1 is evaluated, its result is discarded ..., and its side effects are completed before evaluation of the expression E2 begins</p>\n</blockquote>\n\n<p><sup>irrelevant information omitted</sup></p>\n\n<p>To put it simply, <code>E1</code> will be evaluated, although the compiler might optimize it away by the as-if rule if it is able to determine that there are no side-effects.</p>\n"}, {"comments": [{"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505942639, "post_id": 46331742, "comment_id": 79624748, "body": "If there isn&#39;t anything later stating that nothing is actually evaluated under listed conditions\u2026 You are implying that there isn&#39;t text stating this, I suppose you&#39;ve checked, but maybe it would be clearer to specify that there aren&#39;t such exceptions."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505942911, "post_id": 46331742, "comment_id": 79624854, "body": "@ShinTakezou No there is nothing like that. You can read the definition of the comma operator and see that it does not say &quot;the left operand is sometimes not evaluated&quot; or whatever"}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505943694, "post_id": 46331742, "comment_id": 79625115, "body": "A &quot;definition&quot; could be longer than few lines, it can be split in several paragraphs covering several cases. I suppose you are stating that it&#39;s not the case for the comma operator."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505943822, "post_id": 46331742, "comment_id": 79625149, "body": "Maybe, and it would have taken you less time to add to your answer that there aren&#39;t exceptions stated anywhere in the standards. (As per suggestion given in my first comment)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 1, "creation_date": 1505943995, "post_id": 46331742, "comment_id": 79625218, "body": "@ShinTakezou I think &quot;The standard guarantees that the left operand IS evaluated&quot; already clearly implies there are no exceptions."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1505944375, "post_id": 46331742, "comment_id": 79625365, "body": "Note that OP is conflating &quot;evaluated&quot; and &quot;access the value&quot;. In C++ in particular, the lvalue-to-rvalue conversion is not applied to a discarded glvalue expression that does not have volatile-qualified type. That said, the UB in this case comes from the <code>-&gt;</code>, so whether an subsequent attempt to access the stored value is made is irrelevant."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1505944595, "post_id": 46331742, "comment_id": 79625446, "body": "@T.C. Yeah , funnily enough I considered adding that to my answer originally but decided not to  complicate things (probably the wrong decision). Thanks for clearly stating the matter"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1505946130, "post_id": 46331742, "comment_id": 79626014, "body": "@T.C. maybe the C++ case will be slightly more complicated if the &quot;empty lvalue&quot; proposal goes through ; In C++14 I believe we&#39;re &quot;saved&quot; by the provision that an lvalue must actually designate storage  (since using <code>*</code> on a null pointer is not explicitly UB)"}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1505946166, "post_id": 46331742, "comment_id": 79626025, "body": "@T.C. my fault, I used terms without a specific jargon in mind, maybe mixing merely syntax parsing / compile time checks with evaluating = generating the code which will run and cause problems."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1505946324, "post_id": 46331742, "comment_id": 79626088, "body": "@M.M Class member access on something that isn&#39;t an object of the right type is currently UB by omission; &quot;empty lvalues&quot; won&#39;t change that except perhaps make it explicitly UB."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 17, "last_activity_date": 1505946570, "last_edit_date": 1505946570, "creation_date": 1505941471, "answer_id": 46331742, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46331742#46331742", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<blockquote>\n  <p>Is there anything in the C and C++ languages standard which guarantees that compilers will always avoid actual evaluation of the left operand of the comma operator ?</p>\n</blockquote>\n\n<p>It's the opposite. The standard guarantees that the left operand IS evaluated (really it does, there aren't any exceptions). The result is discarded.</p>\n\n<hr>\n\n<p><em>Note:</em> for lvalue expressions, \"evaluate\" does not mean \"access the stored value\".  Instead, it means to work out where the designated memory location is.  The other code encompassing the lvalue expression may or may not then go on to access the memory location.   The process of reading from the memory location is known as \"lvalue conversion\" in C, or \"lvalue to rvalue conversion\" in C++.</p>\n\n<p>In C++ a discarded-value expression (such as the left operand of the comma operator) only has lvalue to rvalue conversion performed on it if it is <code>volatile</code> and also meets some other criteria (see C++14 [expr]/11 for detail). In C lvalue conversion <em>does</em> occur for expressions whose result is not used (C11 6.3.2.1/2).</p>\n\n<p>In your example, it is moot whether or not lvalue conversion happens. In both languages <code>X-&gt;Y</code>, where <code>X</code> is a pointer, is defined as <code>(*X).Y</code>; in C the act of applying <code>*</code> to a null pointer already causes undefined behaviour (C11 6.5.3/3), and in C++ the <code>.</code> operator is only defined for the case when the left operand actually designates an object (C++14 [expr.ref]/4.2).  </p>\n"}, {"comments": [{"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505943412, "post_id": 46331805, "comment_id": 79625019, "body": "I think I will go for <code>sizeof</code>. Unfortuntely when I did my empirical checks I hadn&#39;t clang at hand. <code>-fsanitize=undefined</code> is accepted by gcc 6.3 too, but it seems everything is fine\u2026 clang 3.0-6.2 accepts it too, but the same result, except for warnings <code>expression result unused</code>. Indeed I&#39;m testing a different code where the macro is used only to populate a struct."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 3, "last_activity_date": 1505941714, "creation_date": 1505941714, "answer_id": 46331805, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46331805#46331805", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<blockquote>\n  <p>Gcc/g++ 6.3 and 4.9.2 never produced that dangerous code, even with -O0, as if they were always able to \u201csee\u201d that the evaluation hasn't side effects and so it can be skipped.</p>\n</blockquote>\n\n<p>clang will produce code which raises an error if you pass it the <code>-fsanitize=undefined</code> option. Which should answer your question: at least one major implementation's developers clearly consider the code as having undefined behaviour. And they are correct.</p>\n\n<blockquote>\n  <p>Suggestions about other possible \u201cfixes\u201d are welcome, too.</p>\n</blockquote>\n\n<p>I would look for something which is guaranteed not to evaluate the expression. Your suggestion of <code>offsetof</code> does the job, but may occasionally cause code to be rejected that would otherwise be accepted, such as when <code>X</code> is <code>a.b</code>. If you want that to be accepted, my thought would be to use <code>sizeof</code> to force an expression to remain unevaluated.</p>\n"}, {"comments": [{"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505942511, "post_id": 46331907, "comment_id": 79624690, "body": "<code>offsetof</code> should appear somewhere at least in the C standard, if I remember well. Is it discarded or unevaluated like <code>sizeof</code>?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 1, "creation_date": 1505942678, "post_id": 46331907, "comment_id": 79624767, "body": "I looked at the C++ draft N4296, <code>offsetof</code> is a macro. I didn&#39;t find much more about it at first glance. But <code>sizeof</code> is described as having an unevaluated operand."}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505942813, "post_id": 46331907, "comment_id": 79624818, "body": "gcc defines it as a built-in, I&#39;ve tried using it with <code>volatile</code>, it seems fine (no segfault), but I can&#39;t find an assurance about this behaviour."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 1, "creation_date": 1505942827, "post_id": 46331907, "comment_id": 79624823, "body": "@ShinTakezou Also, the first operand of <code>offsetof</code> must be a standard-layout class, else the behavior is undefined. <code>sizeof</code> doesn&#39;t have this limitation. (In C++)"}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1505942919, "post_id": 46331907, "comment_id": 79624857, "body": "good point for <code>sizeof</code> against <code>offsetof</code>. The struct was a POD but you never know, maybe it will change!"}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 2, "last_activity_date": 1505944692, "last_edit_date": 1505944692, "creation_date": 1505942196, "answer_id": 46331907, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46331907#46331907", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<p>The left operand of the comma operator is a <em>discarded-value expression</em></p>\n\n<blockquote>\n  <p><strong>5 Expressions</strong><br>\n  11 In some contexts, an expression only appears for its side effects. Such an expression is called a discarded-value\n  expression. The expression is evaluated and its value is discarded.\n  [...]</p>\n</blockquote>\n\n<p>There are also <em>unevaluated operands</em> which, as the name implies, are not evaluated.</p>\n\n<blockquote>\n  <p>8  In some contexts, unevaluated operands appear (5.2.8, 5.3.3, 5.3.7,\n  7.1.6.2). An unevaluated operand is not evaluated. An unevaluated operand is considered a full-expression. [...]</p>\n</blockquote>\n\n<p>Using a discarded-value expression in your use case is undefined behavior, but using an unevaluated operand is not.</p>\n\n<p>Using <code>sizeof</code> for example would not cause UB because it takes an unevaluated operand.</p>\n\n<pre><code>#define STR_MEMBER(S,X) (sizeof(S::X), #X)\n</code></pre>\n\n<p><code>sizeof</code> is preferable to <code>offsetof</code>, because <code>offsetof</code> can't be used for static members and classes that are not standard-layout:</p>\n\n<blockquote>\n  <p><strong>18 Language support library</strong><br>\n  4  The macro offsetof(type, member-designator) accepts a restricted\n  set of type arguments in this International Standard. If type is not a\n  standard-layout class (Clause 9), the results are undefined. [...] The result of applying the offsetof macro to a field that\n  is a static data member or a function member is undefined. [...]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1505946304, "creation_date": 1505946304, "answer_id": 46332639, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46332639#46332639", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<p>You ask,</p>\n\n<blockquote>\n  <p>is there anything in the C and C++ languages standard which guarantees\n  that compilers will always avoid actual evaluation of the left operand\n  of the comma operator when the compiler can be sure that the\n  evaluation hasn't side effects?</p>\n</blockquote>\n\n<p>As others have remarked, the answer is \"no\".  On the contrary, the standards both unconditionally state that the left-hand operand of the comma operator <strong>is</strong> evaluated, and that the result is discarded.</p>\n\n<p>This is of course a description of the execution model of an abstract machine; implementations are permitted to work differently, so long as the observable behavior is the same as the abstract machine behavior would produce.  If indeed evaluation of the left-hand expression produces no side effects, then that would <em>permit</em> skipping it altogether, but there is nothing in either standard that provides for <em>requiring</em> that it be skipped.</p>\n\n<p>As for fixing it, you have various options, some of which apply only to one or the other of the two languages you have named.  I tend to like your <code>offsetof()</code> alternative, but others have noted that in C++, there are types to which <code>offsetof</code> cannot be applied.  In C, on the other hand, the standard specifically describes its application to <em>structure</em> types, but says nothing about union types.  Its behavior on union types, though very likely to be consistent and natural, as technically undefined.</p>\n\n<p>In C only, you could use a compound literal to avoid the undefined behavior in your approach:</p>\n\n<pre><code>#define HAS_MEMBER(T,X) (((T){0}).X, #X)\n</code></pre>\n\n<p>That works equally well on structure and union types (though you need to provide a full type name for this version, not just a tag).  Its behavior is well defined when the given type does have such a member.  The expansion violates a language constraint -- thus requiring a diagnostic to be emitted -- when the type does not have such a member, including when it is neither a structure type nor a union type.</p>\n\n<p>You might also use <code>sizeof</code>, as @alain suggested, because although the <code>sizeof</code> expression will be evaluated, <em>its</em> operand will not be evaluated (except, in C, when its operand has variably-modified type, which will not apply to your use).  I think this variation will work in both C and C++ without introducing any undefined behavior:</p>\n\n<pre><code>#define HAS_MEMBER(T,X) (sizeof(((T *)NULL)-&gt;X), #X)\n</code></pre>\n\n<p>I have again written it so that it works for both structs and unions.</p>\n"}, {"comments": [{"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1506019948, "post_id": 46333895, "comment_id": 79662675, "body": "I would rather say that the first paragraph would be a reason to suggest adding a mandatory \u201celimination\u201d of the no side effects - discarded value case. / About the 2nd par, it isn&#39;t clear how they are on the same side\u2026 Anyway, few days ago I was joking with a friend about the fact that containers and similar technologies change the \u201cit works on my machine\u201d to \u201cI can guarantee it works on all these machines (like mine)\u201d. It could push an interesting paradigm shift and remove that annoying cliche on \u201cnasal demons\u201d and the already mentioned nice one \u201cit works on my machine\u201d!"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1506022176, "post_id": 46333895, "comment_id": 79663815, "body": "You can&#39;t make eliminating <i>all</i> side-effect-free evaluations mandatory, since that&#39;s undecidable.  Exactly how hard, then, should the implementation be required to try to prove something eliminable? /  Those considerations are on the same side because they both allow the implementation to do things that are not the result of a simpleminded reading of the source.  (And &quot;it works on my machine&quot; really just means &quot;I haven&#39;t found the case that fails yet&quot;.  Containers or no, it&#39;s no substitute for correctness.)"}, {"owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "edited": false, "score": 0, "creation_date": 1506023434, "post_id": 46333895, "comment_id": 79664453, "body": "The compiler has something like <code>(discard (read 0 16))</code>, in an on-the-fly invented representation of a piece of the result of parsing (plus whatever) <code>(((p*)0)-&gt;x, &quot;x&quot;)</code>. The special rule for the comma op could consider a finite number of well defined cases, e.g. literals, const expressions and \u201cread only\u201d operations (w/o <code>volatile</code>). These few cases can be handled. Anyway, no point in discussing it further here./ E.g. consider this very case: gcc vN.N\u2026doesn&#39;t emit code to access <code>0-&gt;X</code>. Hence it works on my machine with that compiler, thus\u2026The case that fails doesn&#39;t exist at all here."}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 2, "last_activity_date": 1505956516, "creation_date": 1505956516, "answer_id": 46333895, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute/46333895#46333895", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<p>The language doesn't need to say anything about \"actual execution\" because of the <a href=\"http://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow noreferrer\">as-if rule</a>.  After all, with no side effects how could you tell whether the expression is evaluated?  (Looking at the assembly or setting breakpoints doesn't count; that's not part of execution of the program, which is all the language describes.)</p>\n\n<p>On the other hand, dereferencing a null pointer is undefined behavior, so the language says nothing at all about what happens.  You can't expect as-if to save you: as-if is a <em>relaxation</em> of otherwise-plausible restrictions on the implementation, and undefined behavior is a relaxation of <em>all</em> restrictions on the implementation.  There is therefore no \"conflict\" between \"this doesn't have side effects, so we can ignore it\" and \"this is undefined behavior, so nasal demons\"; they're on the same side!</p>\n"}], "owner": {"reputation": 8637, "user_id": 354803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de274de1f9ac102d96ec846c006176?s=128&d=identicon&r=PG", "display_name": "ShinTakezou", "link": "https://stackoverflow.com/users/354803/shintakezou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1862, "favorite_count": 4, "accepted_answer_id": 46331733, "answer_count": 6, "score": 30, "last_activity_date": 1505956516, "creation_date": 1505940981, "last_edit_date": 1505945669, "question_id": 46331625, "link": "https://stackoverflow.com/questions/46331625/in-the-comma-operator-is-the-left-operand-guaranteed-not-to-be-actually-execute", "title": "In the comma operator, is the left operand guaranteed not to be actually executed if it hasn&#39;t side effects?", "body": "<p>To show the topic I'm going to use C, but the same macro can be used also in C++ (with or without <code>struct</code>), raising the same question.</p>\n\n<p>I came up with this macro</p>\n\n<pre><code>#define STR_MEMBER(S,X) (((struct S*)NULL)-&gt;X, #X)\n</code></pre>\n\n<p>Its purpose is to have strings (<code>const char*</code>) of an existing member of a <code>struct</code>, so that if the member doesn't exist, the compilation fails. A minimal usage example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct a\n{\n    int value;\n};\n\nint main(void)\n{\n    printf(\"a.%s member really exists\\n\", STR_MEMBER(a, value));\n    return 0;\n}\n</code></pre>\n\n<p>If <code>value</code> weren't a member of <code>struct a</code>, the code wouldn't compile, and this is what I wanted.</p>\n\n<p>The comma operator should evaluate the left operand and then discard the result of the expression (if there is one), so that my understanding is that usually this operator is used when the evaluation of the left operand has side effects.</p>\n\n<p>In this case, however, there aren't (intended) side effects, but of course it works <em>iff</em> the compiler doesn't actually produce the code which evaluates the expression, for otherwise it would access to a <code>struct</code> located at <code>NULL</code> and a <em>segmentation fault</em> would occur.</p>\n\n<p>Gcc/g++ 6.3 and 4.9.2 never produced that dangerous code, even with <code>-O0</code>, as if they were always able to \u201csee\u201d that the evaluation hasn't side effects and so it can be skipped.</p>\n\n<p>Adding <code>volatile</code> in the macro (e.g. because accessing that memory address <em>is</em> the desired side effect) was so far the only way to trigger the segmentation fault.</p>\n\n<p>So the question: <strong>is there anything in the C and C++ languages standard which guarantees that compilers will always avoid actual evaluation of the left operand of the comma operator when the compiler can be sure that the evaluation hasn't side effects?</strong></p>\n\n<h2>Notes and fixing</h2>\n\n<p>I am not asking for a judgment about the macro <em>as it is</em> and the opportunity to use it or make it better. For the purpose of this question, the macro is bad <em>if and only if</em> it evokes undefined behaviour \u2014 i.e., <em>if and only if</em> it is risky because compilers are allowed to generate the \u201cevaluation code\u201d even when this hasn't side effects.</p>\n\n<p>I have already two obvious fixes in mind: \u201creifying\u201d the <code>struct</code> and using <code>offsetof</code>. The former needs an accessible memory area as big as the biggest <code>struct</code> we use as first argument of <code>STR_MEMBER</code> (e.g. maybe a static union could do\u2026). The latter should work flawlessly: it gives an offset we aren't interested in and avoids the access problem \u2014 indeed I'm assuming <em>gcc</em>, because it's the compiler I use (hence the tag), and that its <code>offsetof</code> built-in behaves.</p>\n\n<p>With the <code>offsetof</code> fix the macro becomes</p>\n\n<pre><code>#define STR_MEMBER(S,X) (offsetof(struct S,X), #X)\n</code></pre>\n\n<p>Writing <code>volatile struct S</code> instead of <code>struct S</code> doesn't cause the segfault.</p>\n\n<p>Suggestions about other possible \u201cfixes\u201d are welcome, too.</p>\n\n<h2>Added note</h2>\n\n<p>Actually, the real usage case was in C++ in a static storage <code>struct</code>. This seems to be fine in C++, but as soon as I tried C with a code closer to the original instead of the one boiled for this question, I realized that C isn't happy at all with that:</p>\n\n<pre><code>error: initializer element is not constant\n</code></pre>\n\n<p>C wants the struct to be initializable at compile time, instead C++ it's fine with that.</p>\n"}, {"tags": ["c++", "windows", "io", "windows-defender"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 5, "creation_date": 1505940550, "post_id": 46331485, "comment_id": 79623824, "body": "Antivirus software killing io is nothing new."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1505940608, "post_id": 46331485, "comment_id": 79623848, "body": "@VTT Particularly if more than one piece of active scanning software is running."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1505940664, "post_id": 46331485, "comment_id": 79623872, "body": "Why would you be surprised that a program intercepting and analyzing all your IO has a negative impact on performance?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505940714, "post_id": 46331485, "comment_id": 79623893, "body": "@JesperJuhl the surprising part is that anybody puts up with it. Although I have to admit that a virus infection can be worse."}, {"owner": {"reputation": 95, "user_id": 2888090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/h0pp2.jpg?s=128&g=1", "display_name": "LeoVannini", "link": "https://stackoverflow.com/users/2888090/leovannini"}, "edited": false, "score": 0, "creation_date": 1505940770, "post_id": 46331485, "comment_id": 79623919, "body": "I&#39;m not necessarily surprised that the I/O is being negatively impacted, I&#39;m surprised the time jumps from 9 seconds to 120 seconds."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1505940934, "post_id": 46331485, "comment_id": 79623991, "body": "@Mark Ransom I don&#39;t use Windows personally (nor any kind of &quot;anti-virus&quot; software), but I think the general population has just been suckered into the belief that you need this necessary evil to be safe, so this is just how you should expect things to perform.. and nobody (or close to) pays it any second thought.. it&#39;s just &quot;how computers are&quot;.. Sad really."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505941103, "post_id": 46331485, "comment_id": 79624067, "body": "@LeoVannini &quot;I&#39;m surprised the time jumps from 9 seconds to 120 seconds&quot; - welcome to the crappy world of commercial software in general and &quot;anti virus&quot; software in particular..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505943907, "post_id": 46331485, "comment_id": 79625177, "body": "@JesperJuhl You are really missing out, man. In Windows 10 we even have a calculator app that ignores operator precedence!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505944000, "post_id": 46331485, "comment_id": 79625222, "body": "@user4581301 have fun with that."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505947243, "post_id": 46331485, "comment_id": 79626371, "body": "@JesperJuhl It&#39;s because those 9 seconds aren&#39;t really measuring I/O speed. You&#39;re writing to the same location in the same file over and over. The I/O only takes place once. But the security software has no idea that another write is coming, so it security checks each one."}], "owner": {"reputation": 95, "user_id": 2888090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/h0pp2.jpg?s=128&g=1", "display_name": "LeoVannini", "link": "https://stackoverflow.com/users/2888090/leovannini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505940338, "creation_date": 1505940338, "question_id": 46331485, "link": "https://stackoverflow.com/questions/46331485/windows-defender-increases-file-write-times", "title": "Windows Defender increases file write times", "body": "<p>On a Windows 10 machine, I seem to be running into substantially increased write times on our cache files.</p>\n\n<p>Below I have included timing operations for our writes with/without Defender's intervention. For this test, we are writing 32KB blocks to a 1GB, pre-allocated cache file, 36000 times.</p>\n\n<p>Here are file write times with Windows Defender enabled (default behavior on machines):</p>\n\n<pre><code>@@@ Manager: [CacheFile]   --&gt; 123.524 secs\n@@@ Count: 36784. Time: 123524(ms). Average: 3(ms). Max Finished: 218(ms).\n@@@ Unfinished: 0. Max Unfinished: 0(ms). Min Unfinished: 0(ms).\n@@@ Max Finished Item: [Name: [DirectFileWrite:4294967293]. Pid: 0x00000000000002E8. Tid: 0x00000000000010A0. Data: 0x0000000000000000.].\n@@@ Max Unfinished Item: [].\n@@@ Min Unfinished Item: [].\n@@@ Reporting Time: 0(ms).\n</code></pre>\n\n<p>And here's the same operations performed when our cache file is added to Windows Defender's exclusion list:</p>\n\n<pre><code>@@@ Manager: [CacheFile]   --&gt; 9.194 secs\n@@@ Count: 36784. Time: 9194(ms). Average: 0(ms). Max Finished: 126(ms).\n@@@ Unfinished: 0. Max Unfinished: 0(ms). Min Unfinished: 0(ms).\n@@@ Max Finished Item: [Name: [DirectFileWrite:4294967293]. Pid: 0x00000000000006F4. Tid: 0x000000000000130C. Data: 0x0000000000000000.].\n@@@ Max Unfinished Item: [].\n@@@ Min Unfinished Item: [].\n@@@ Reporting Time: 0(ms).\n@@@@@@@@@\n</code></pre>\n\n<p>I'm thinking that Windows Defender is running some sort of check on the entire file (opening and checking the entire data of the 1GB file), every time we write to the file.</p>\n\n<p>Adding the cache files to the exclusion list would be the last option, so I'm wondering if anyone run in to any issues of similar nature?</p>\n\n<p>I'm using Windows C++ API for all I/O operations.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1505939147, "post_id": 46331195, "comment_id": 79623210, "body": "measuring &gt; speculations"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505939198, "post_id": 46331195, "comment_id": 79623233, "body": "also you can take a look at the output of the compiler to see what is the difference: <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505939257, "post_id": 46331195, "comment_id": 79623256, "body": "Outside may be faster, baring sneaky compiler switcheroos, because <code>arr</code> will be recreated every time in the function. A better option is to leave <code>arr</code> in the function, but declare it <code>static</code> so it is only created once."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505939264, "post_id": 46331195, "comment_id": 79623261, "body": "Are you serious: <code>check if num is in arr... If yes, return num, otherwise return 0.</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1505939324, "post_id": 46331195, "comment_id": 79623293, "body": "Pretty sure they&#39;re serious. I&#39;m the only person who gets to make jokes around here."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1505939362, "post_id": 46331195, "comment_id": 79623308, "body": "btw first of all you should take care that your code expresses your intent. If the function uses always the same array, then passing it to the function each time you call it is obfuscating your original intent (array is always the same)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1505939566, "post_id": 46331195, "comment_id": 79623379, "body": "It is more efficient to write readable code, you spent much more time debugging than executing."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505940132, "post_id": 46331195, "comment_id": 79623638, "body": "<a href=\"http://c2.com/cgi/wiki?PrematureOptimization\" rel=\"nofollow noreferrer\">Premature optimization is the root of all evil</a>"}, {"owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505940211, "post_id": 46331195, "comment_id": 79623670, "body": "@tobi303 but in my example code, wouldn&#39;t it be most optimal to go with code number 2? I mean let&#39;s say that we run something() 100 times, then we could save 99 initializations and destructions?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505957885, "post_id": 46331195, "comment_id": 79628753, "body": "@sdsad - How do you know if passing an extra parameter 100 times is faster than initializing the array. And if it is, on a PC we are still talking nanoseconds here. I would go with <code>const int arr[]</code> and trust the compiler to handle that."}, {"owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505973828, "post_id": 46331195, "comment_id": 79632766, "body": "@BoPersson would you have <code>const int arr[] inside </code>something()<code>, why not in </code>main`? Is that only for readability reasons?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505984197, "post_id": 46331195, "comment_id": 79638823, "body": "@sdsadasdasd the correct way would be option 3: declare the array <code>static</code> inside the function: only one initalization even if you call it 1 million times (100 times is not something you should ever worry about). And it should be <code>const</code> too"}, {"owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505986535, "post_id": 46331195, "comment_id": 79640372, "body": "@tobi303 is the reason why you would declare the array inside the function to improve readability? Also, why also declare it const if you already have declared it static? There will be one initialization in both cases?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1505986775, "post_id": 46331195, "comment_id": 79640538, "body": "<code>const</code> and <code>static</code> are orthogonal concepts. If it is <code>static</code> it could still change between function call, but as you dont want it to change you should declare it <code>const</code>. Yes it is for readability. If you want an orange then you write &quot;orange&quot; and not &quot;apple&quot; and explain everybody reading the code that it looks like &quot;apple&quot; but you are supposed to pronounce it as &quot;orange&quot; (I love exaggerated analogies ;)"}, {"owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505992333, "post_id": 46331195, "comment_id": 79644629, "body": "@tobi303 ahh thanks! But regarding <code>const</code>, would you only use it for readability in this case or also for expectations of some optimization done by the compiler? Or is that not what to think about?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1505992565, "post_id": 46331195, "comment_id": 79644802, "body": "@sdsadasdasd afaik in most cases the compiler is clever enough to realize that a variable does not change its value even if you dont declare it as <code>const</code>. Yes, again this is for readability. It is to remind you that it is not supposed to change and to enable the compiler to throw an error at you in case you try to modify it accidentally."}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "edited": false, "score": 0, "creation_date": 1505940799, "post_id": 46331405, "comment_id": 79623929, "body": "Yea okay, thanks. But are you implying that multiple constructions of objects are slower than only one? Also, as I just asked tobi, wouldn&#39;t it be most optimal to go with code number 2 theoretically? I mean let&#39;s say that we run something() 100 times, then we could save 99 initializations and destructions? If the compiler is not smart. Like if we should not think about readability :-)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "edited": false, "score": 0, "creation_date": 1505942545, "post_id": 46331405, "comment_id": 79624708, "body": "@sdsadasdasd Multiple initializations, if they occur, will be slower than one. But the compiler am smart. It may notice that multiple initializations are not required and turn option 1 into something like the <code>static</code> approach. The only way to be absolutely certain that Option 1 is slower than option 2 is to make a release build, do a couple billion calls to <code>something</code> and try out both options."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "edited": false, "score": 0, "creation_date": 1505942570, "post_id": 46331405, "comment_id": 79624716, "body": "That said you&#39;re better of writing your program the easiest, simplest possible way, and profiling it to pinpoint exactly what is too slow. Nothing may be too slow. Don&#39;t make something fast for the sake of making it fast. Make it fast because it needs to be fast. You don&#39;t get paid big bucks to obsess over insignificant details when there are significant details to obsess over."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1506007081, "last_edit_date": 1506007081, "creation_date": 1505940002, "answer_id": 46331405, "question_id": 46331195, "link": "https://stackoverflow.com/questions/46331195/is-it-most-efficient-to-have-one-variable-initialization-in-outer-function-or-mu/46331405#46331405", "title": "Is it most efficient to have one variable initialization in outer function or multiple in inner function?", "body": "<p>In speed testing Option A versus option B the answer is, \"Hard to say.\" You'd have to profile and find out. A smart compiler may note that <code>arr</code> never changes and is never modified and optimize accordingly. </p>\n\n<p>But...</p>\n\n<p><code>arr</code> should stay as close as possible to where it is used to enhance readability, so this is a point for option A. Plus, declaring <code>arr</code> as a <code>static</code> variable eliminates the re-initialization problem entirely. </p>\n\n<pre><code>int something(int num){\n    const static int arr[] = {1,3,5,7}; // const so it is harder to accidentally change\n    //check if num is in arr... If yes, return num, otherwise return 0.\n}\n</code></pre>\n\n<p>As a <code>static</code>, <code>arr</code> is initialized exactly once and hangs around until the program ends (which in a resource constrained environment may be a problem of its own).</p>\n"}], "owner": {"reputation": 391, "user_id": 8525706, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17725ead9ee4df5f5a5efaf1a74aa439?s=128&d=identicon&r=PG&f=1", "display_name": "sdsad asdasd", "link": "https://stackoverflow.com/users/8525706/sdsad-asdasd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 46331405, "answer_count": 1, "score": -3, "last_activity_date": 1506007081, "creation_date": 1505939079, "last_edit_date": 1505939187, "question_id": 46331195, "link": "https://stackoverflow.com/questions/46331195/is-it-most-efficient-to-have-one-variable-initialization-in-outer-function-or-mu", "title": "Is it most efficient to have one variable initialization in outer function or multiple in inner function?", "body": "<p>This:</p>\n\n<pre><code>int something(num){\n    int arr[] = {1,3,5,7};\n    //check if num is in arr... If yes, return num, otherwise return 0.\n}\n\nint main(){\n    something(5);\n    return 0;\n}\n</code></pre>\n\n<p>Vs.</p>\n\n<pre><code>int something(num, &amp;parr){\n    //check if num is in parr... If yes, return num, otherwise return 0.\n}\n\nint main(){\n    int arr[] = {1, 3, 5, 7};\n    something(5, arr);\n\n    return 0;\n}\n</code></pre>\n\n<p>And why? I would choose to believe that number two is most efficient, because that there will only happen one initialization for the array, whereas in code number 1, there happen an initialization of the array each time we would call <code>something()</code>; and don't initializations take time to perform?</p>\n"}, {"tags": ["c++", "boost", "particle.io", "particle-photon"], "comments": [{"owner": {"reputation": 131, "user_id": 918310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6e36ded9fa8898b067fc15c056035a9e?s=128&d=identicon&r=PG", "display_name": "bitcyber", "link": "https://stackoverflow.com/users/918310/bitcyber"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1505939487, "post_id": 46331118, "comment_id": 79623343, "body": "I&#39;m aware of the debug versus release requirements.  The RELEASE_BUILD macro is defined for the build and I&#39;ve also tried defining the RELEASE macro. Is there a separate boost specific release build macro?  (I&#39;m not using the boost build system because I need to incorporate the application code in with the particle photon build system. Plus the statechart library is a header only library.)"}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 1, "last_activity_date": 1505941081, "creation_date": 1505941081, "answer_id": 46331647, "question_id": 46331118, "link": "https://stackoverflow.com/questions/46331118/can-boost-statechart-library-be-used-with-the-particle-photon-embedded-system/46331647#46331647", "title": "Can Boost Statechart library be used with the particle photon embedded system", "body": "<p>Try adding <code>-DNDEBUG</code> to your compilation command.</p>\n\n<hr>\n\n<p>Boost Statechart <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/statechart/doc/configuration.html#DebugModeCompilationOptions\" rel=\"nofollow noreferrer\">requires RTTI to be enabled when it's compiled in \"debug mode\"</a>:</p>\n\n<blockquote>\n  <h2>Debug mode compilation options</h2>\n  \n  <ul>\n  <li>C++ RTTI must be turned on (used by various asserts)</li>\n  </ul>\n</blockquote>\n\n<p>Your error message comes from a <code>BOOST_ASSERT</code>, so I dove into the source code of <strong>rtti_policy.hpp</strong> to find</p>\n\n<blockquote>\n<pre><code>struct id_provider\n{\n  const void * pCustomId_;\n  #if defined( BOOST_ENABLE_ASSERT_HANDLER ) || !defined( NDEBUG )\n  const std::type_info * pCustomIdType_;\n  #endif\n};\n</code></pre>\n</blockquote>\n\n<p>It seems that the way Statechart is detecting whether you are in debug mode is by inspecting the <code>NDEBUG</code> preprocessor macro.</p>\n"}], "owner": {"reputation": 131, "user_id": 918310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6e36ded9fa8898b067fc15c056035a9e?s=128&d=identicon&r=PG", "display_name": "bitcyber", "link": "https://stackoverflow.com/users/918310/bitcyber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 46331647, "answer_count": 1, "score": 0, "last_activity_date": 1515092287, "creation_date": 1505938729, "last_edit_date": 1515092287, "question_id": 46331118, "link": "https://stackoverflow.com/questions/46331118/can-boost-statechart-library-be-used-with-the-particle-photon-embedded-system", "title": "Can Boost Statechart library be used with the particle photon embedded system", "body": "<p>So I have a particle photon embedded board. And I have the local build system set up on a Windows platform, using mingw, per: <a href=\"https://docs.particle.io/faq/particle-tools/local-build/photon/\" rel=\"nofollow noreferrer\">https://docs.particle.io/faq/particle-tools/local-build/photon/</a>. Lastly, I would really like to use the statechart library from the boost set of libraries.</p>\n\n<p>Per the boost statechart library configuration page, it should be possible to use it even with RTTI disabled: <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/statechart/doc/configuration.html#GeneralConfiguration\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_65_1/libs/statechart/doc/configuration.html#GeneralConfiguration</a>\n(The RTTI is disabled in the build makefile with -fno-rtti. As one might expect.)</p>\n\n<p>So I added the flag -DBOOST_NO_RTTI to the build configuration and confirm that it's present in the compile command.</p>\n\n<p>However upon testing a simple 'blinkled' application where the simplest header files are included:</p>\n\n<pre><code>#include &lt;boost/statechart/state_machine.hpp&gt;\n#include &lt;boost/statechart/simple_state.hpp&gt;\n</code></pre>\n\n<p>with build command:</p>\n\n<pre><code>make -C ../modules/photon/user-part all\nmake[1]: Entering directory `/d/projects/software/particle/firmware/modules/photon/user-part'\nmake -C ../../../user \nmake[2]: Entering directory `/d/projects/software/particle/firmware/user'\nBuilding cpp file: ../../blinkled//src/blinkled.cpp\nInvoking: ARM GCC CPP Compiler\nmkdir -p ../build/target/user/platform-6-m/blinkled/src/\narm-none-eabi-gcc -DSTM32_DEVICE -DSTM32F2XX -DPLATFORM_THREADING=1 -DPLATFORM_ID=6 -DPLATFORM_NAME=photon -DUSBD_VID_SPARK=0x2B04 -DUSBD_PID_DFU=0xD006 -DUSBD_PID_CDC=0xC006 -DSPARK_PLATFORM -g3 -gdwarf-2 -Os -mcpu=cortex-m3 -mthumb -DINCLUDE_PLATFORM=1 -DPRODUCT_ID=6 -DPRODUCT_FIRMWARE_VERSION=65535 -DUSE_STDPERIPH_DRIVER -DDFU_BUILD_ENABLE -DSYSTEM_VERSION_STRING=0.6.2 -DRELEASE_BUILD -I./inc -I../wiring/inc -I../system/inc -I../services/inc -I../communication/src -I../hal/inc -I../hal/shared -I../hal/src/photon -I../hal/src/stm32f2xx -I../hal/src/stm32 -I../hal/src/photon/api -I../platform/shared/inc -I../platform/MCU/STM32F2xx/CMSIS/Include -I../platform/MCU/STM32F2xx/CMSIS/Device/ST/Include -I../platform/MCU/STM32F2xx/SPARK_Firmware_Driver/inc -I../platform/MCU/shared/STM32/inc -I../platform/MCU/STM32F2xx/STM32_StdPeriph_Driver/inc -I../platform/MCU/STM32F2xx/STM32_USB_Device_Driver/inc -I../platform/MCU/STM32F2xx/STM32_USB_Host_Driver/inc -I../platform/MCU/STM32F2xx/STM32_USB_OTG_Driver/inc -I../dynalib/inc -I../../blinkled//src -I../../blinkled//inc -I../../blinkled//../boost -I./libraries -I../../blinkled//src -I../../blinkled//src -I../../blinkled//src -I../../blinkled//src -I. -MD -MP -MF ../build/target/user/platform-6-m/blinkled/src/blinkled.o.d -ffunction-sections -fdata-sections -Wall -Wno-switch -Wno-error=deprecated-declarations -fmessage-length=0 -fno-strict-aliasing -DSPARK=1 -DPARTICLE=1 -DSTART_DFU_FLASHER_SERIAL_SPEED=14400 -DSTART_YMODEM_FLASHER_SERIAL_SPEED=28800 -DSPARK_PLATFORM_NET=BCM9WCDUSI09 -fno-builtin-malloc -fno-builtin-free -fno-builtin-realloc  -DLOG_INCLUDE_SOURCE_INFO=1 -DPARTICLE_USER_MODULE -DUSE_THREADING=0 -DUSE_THREADING=0 -DUSE_SPI=SPI -DUSE_CS=A2 -DUSE_SPI=SPI -DUSE_CS=A2 -DUSER_FIRMWARE_IMAGE_SIZE=0x20000 -DUSER_FIRMWARE_IMAGE_LOCATION=0x80A0000 -DMODULAR_FIRMWARE=1 -DMODULE_VERSION=4 -DMODULE_FUNCTION=5 -DMODULE_INDEX=1 -DMODULE_DEPENDENCY=4,2,108 -D_WINSOCK_H -D_GNU_SOURCE -DLOG_MODULE_CATEGORY=\"\\\"app\\\"\"  -fno-exceptions -fno-rtti -fcheck-new -DRELEASE -DBOOST_NO_RTTI -std=gnu++11 -c -o ../build/target/user/platform-6-m/blinkled/src/blinkled.o ../../blinkled//src/blinkled.cpp\nmake[2]: Leaving directory `/d/projects/software/particle/firmware/user'\nmake[1]: Leaving directory `/d/projects/software/particle/firmware/modules/photon/user-part'\n</code></pre>\n\n<p>results in a list of errors, basically inferring it's not possible to use the library with RTTI.:</p>\n\n<pre><code>In file included from ../../blinkled//../boost/boost/assert.hpp:58:0,\n                 from ../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:11,\n                 from ../../blinkled//../boost/boost/statechart/event_base.hpp:11,\n                 from ../../blinkled//../boost/boost/statechart/event.hpp:11,\n                 from ../../blinkled//../boost/boost/statechart/state_machine.hpp:11,\n                 from ../../blinkled//src/blinkled.cpp:4:\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp: In member function 'const CustomId* boost::statechart::detail::rtti_policy::rtti_base_type&lt;Base&gt;::custom_dynamic_type_ptr() const':\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:106:62: error: cannot use typeid with -fno-rtti\n           ( *idProvider_-&gt;pCustomIdType_ == typeid( CustomId ) ) );\n                                                              ^\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:104:9: note: in expansion of macro 'BOOST_ASSERT'\n         BOOST_ASSERT(\n         ^\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp: In static member function 'static const CustomId* boost::statechart::detail::rtti_policy::rtti_derived_type&lt;MostDerived, Base&gt;::custom_static_type_ptr()':\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:172:30: error: cannot use typeid with -fno-rtti\n             typeid( CustomId ) ) );\n                              ^\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:169:9: note: in expansion of macro 'BOOST_ASSERT'\n         BOOST_ASSERT(\n         ^\nIn file included from ../../blinkled//../boost/boost/statechart/event_base.hpp:11:0,\n                 from ../../blinkled//../boost/boost/statechart/event.hpp:11,\n                 from ../../blinkled//../boost/boost/statechart/state_machine.hpp:11,\n                 from ../../blinkled//src/blinkled.cpp:4:\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp: In static member function 'static void boost::statechart::detail::rtti_policy::rtti_derived_type&lt;MostDerived, Base&gt;::custom_static_type_ptr(const CustomId*)':\n../../blinkled//../boost/boost/statechart/detail/rtti_policy.hpp:182:29: error: cannot use typeid with -fno-rtti\n           &amp;typeid( CustomId );\n</code></pre>\n\n<p>Have I misunderstood something here in regard to potential for usage with RTTI (or exceptions)? I understand the limitations involved, just trying to work out how to build the application.</p>\n\n<p>It would be a shame if not possible, it's a nice library.</p>\n"}, {"tags": ["c++", "this", "lvalue", "prvalue"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1505937613, "post_id": 46330784, "comment_id": 79622440, "body": "In what case do you need to use a pointer to a pointer? I&#39;d argue that it&#39;s not the proper approach most of the time"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1505937615, "post_id": 46330784, "comment_id": 79622444, "body": "<code>&quot;&amp;this&quot; should have type Abc** right?</code> It would have such type, but <code>this</code> is not an lvalue, as the error says. You can&#39;t apply <code>&amp;</code> to it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505937627, "post_id": 46330784, "comment_id": 79622454, "body": "<code>this</code> may have a pointer type, but it&#39;s not a variable."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505937680, "post_id": 46330784, "comment_id": 79622480, "body": "Change the function signature to: <code>void function1(Abc* c1)</code> and in then: <code>function1(this);</code>"}, {"owner": {"reputation": 355, "user_id": 6490497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1cfba331a5fcf1b440a58c0a306e8df?s=128&d=identicon&r=PG&f=1", "display_name": "disccip", "link": "https://stackoverflow.com/users/6490497/disccip"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1505937702, "post_id": 46330784, "comment_id": 79622496, "body": "@UnholySheep this is defined by others, I&#39;m working on a project based on their defination..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 7, "creation_date": 1505937704, "post_id": 46330784, "comment_id": 79622499, "body": "A simple <code>auto p = this; function1(&amp;p);</code> will work."}, {"owner": {"reputation": 355, "user_id": 6490497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1cfba331a5fcf1b440a58c0a306e8df?s=128&d=identicon&r=PG&f=1", "display_name": "disccip", "link": "https://stackoverflow.com/users/6490497/disccip"}, "edited": false, "score": 0, "creation_date": 1505937875, "post_id": 46330784, "comment_id": 79622578, "body": "Thanks for everyone&#39;s help, as I said I can&#39;t change the definition, so are there any chance for me to achieve that?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1505938094, "post_id": 46330784, "comment_id": 79622689, "body": "Yes, there is...."}, {"owner": {"reputation": 355, "user_id": 6490497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1cfba331a5fcf1b440a58c0a306e8df?s=128&d=identicon&r=PG&f=1", "display_name": "disccip", "link": "https://stackoverflow.com/users/6490497/disccip"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505938268, "post_id": 46330784, "comment_id": 79622771, "body": "@StoryTeller Sorry...Thank you! This is brilliant!"}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 8, "last_activity_date": 1506005169, "last_edit_date": 1506005169, "creation_date": 1505937933, "answer_id": 46330927, "question_id": 46330784, "link": "https://stackoverflow.com/questions/46330784/expression-must-be-an-l-value-or-function-designator-error-when-taking-the-add/46330927#46330927", "title": "&quot;expression must be an l-value or function designator&quot; error when taking the address of this", "body": "<p>The error is clear enough. Since <code>this</code> is not an lvalue, you cannot take its address. If you just want the address of the object, then just pass <code>this</code>, not <code>&amp;this</code>, and change the function declaration to:</p>\n\n<pre><code>void function1(Abc* c1) //To just pass a pointer\n</code></pre>\n\n<p>However, since you mentioned you cannot change the definition of the function, you can create a temporary variable and pass its address:</p>\n\n<pre><code>auto temp = this;\nfunction1(&amp;temp);\n</code></pre>\n\n<p>How this works:</p>\n\n<ol>\n<li>Since <a href=\"http://en.cppreference.com/w/cpp/language/this\" rel=\"nofollow noreferrer\"><code>this</code></a> is a <a href=\"http://en.cppreference.com/w/cpp/language/value_category#prvalue\" rel=\"nofollow noreferrer\">prvalue</a> and cannot have its address taken, you need something to point to it to turn it into an lvalue, here <code>temp</code>.</li>\n<li>Now that <code>temp</code> points to <code>this</code>, taking <code>temp</code>'s address will effectively take <code>this</code>'s address, albeit indirectly.</li>\n<li>Therefore, since you are passing the address of an lvalue to <code>function1</code>, the code compiles and works as expected.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1505938335, "creation_date": 1505938335, "answer_id": 46331017, "question_id": 46330784, "link": "https://stackoverflow.com/questions/46330784/expression-must-be-an-l-value-or-function-designator-error-when-taking-the-add/46331017#46331017", "title": "&quot;expression must be an l-value or function designator&quot; error when taking the address of this", "body": "<p>The expression <code>this</code> is an rvalue, the same way that the expressions <code>137</code> or <code>'a'</code> are, and so you can't take its address.</p>\n\n<p>If you want to get a pointer to a pointer to <code>this</code>, you'll need to create a new variable of the right type:</p>\n\n<pre><code>auto* ptr = this;\ndoSomething(&amp;ptr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1505938718, "creation_date": 1505938718, "answer_id": 46331111, "question_id": 46330784, "link": "https://stackoverflow.com/questions/46330784/expression-must-be-an-l-value-or-function-designator-error-when-taking-the-add/46331111#46331111", "title": "&quot;expression must be an l-value or function designator&quot; error when taking the address of this", "body": "<p>From the C++ Standard (9.2.2.1 The this pointer)</p>\n\n<blockquote>\n  <p>1 In the body of a non-static (9.2.1) member function, <strong>the keyword\n  this is a prvalue expression</strong> whose value is the address of the\n  object for which the function is called.</p>\n</blockquote>\n\n<p>and (5.3.1 Unary operators)</p>\n\n<blockquote>\n  <p>3 The result of the unary &amp; operator is a pointer to its operand. <strong>The\n  operand shall be an lvalue</strong> or a qualified-id....</p>\n</blockquote>\n\n<p>To make it more clear consider the following code snippet.</p>\n\n<p>If for example you have a declaration</p>\n\n<pre><code>int x = 10;\n</code></pre>\n\n<p>then you may not write</p>\n\n<pre><code>int **p = &amp;&amp;x;\n</code></pre>\n\n<p>In the right expression <code>&amp;x</code> is a <code>prvalue</code> and according to the second quote from the Standard you may not apply the unary operator <code>&amp;</code> to the <code>prvalue</code>.</p>\n\n<p>You could write</p>\n\n<pre><code>int *q = &amp;x;\nint **p = &amp;q;\n</code></pre>\n\n<p>because <code>q</code> is <code>lvalue</code>.</p>\n"}], "owner": {"reputation": 355, "user_id": 6490497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1cfba331a5fcf1b440a58c0a306e8df?s=128&d=identicon&r=PG&f=1", "display_name": "disccip", "link": "https://stackoverflow.com/users/6490497/disccip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19563, "favorite_count": 2, "accepted_answer_id": 46330927, "answer_count": 3, "score": 8, "last_activity_date": 1506005169, "creation_date": 1505937385, "last_edit_date": 1505939466, "question_id": 46330784, "link": "https://stackoverflow.com/questions/46330784/expression-must-be-an-l-value-or-function-designator-error-when-taking-the-add", "title": "&quot;expression must be an l-value or function designator&quot; error when taking the address of this", "body": "<p>I'm trying to do this in C++:</p>\n\n<pre><code>class Abc\n{\n   int callFunction1()\n};\n\nvoid function1(Abc** c1) {//do something}\n\nint Abc::callFunction1()\n{\n   function1(&amp;this);\n   return 0;\n}\n</code></pre>\n\n<p>And I get \"expression must be an l-value or function designator\" error in visual studio 2015. So I don't understand where I go wrong. To my knowledge, <code>&amp;this</code> should have the type <code>Abc**</code> right?</p>\n\n<p>The function definition isn't mine to change. So I can't just change the parameter type.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1505937628, "post_id": 46330783, "comment_id": 79622458, "body": "<code>=</code> and <code>==</code> are different operations"}, {"owner": {"reputation": 273, "user_id": 2480884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68307bc6b4c769fc2d67ce24493f49?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/2480884/geek"}, "edited": false, "score": 4, "creation_date": 1505937757, "post_id": 46330783, "comment_id": 79622519, "body": "% operator is for integer not double."}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 2480884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68307bc6b4c769fc2d67ce24493f49?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/2480884/geek"}, "is_accepted": false, "score": 1, "last_activity_date": 1505938982, "last_edit_date": 1505938982, "creation_date": 1505937912, "answer_id": 46330918, "question_id": 46330783, "link": "https://stackoverflow.com/questions/46330783/c-basic-calculator/46330918#46330918", "title": "C++ Basic Calculator", "body": "<p>You are using % for double, it is only for integers.\nIf you want to use same functionality for double. you can use fmod()</p>\n\n<pre><code>double z = fmod(x,y);\n</code></pre>\n\n<p>You should modify your code to below </p>\n\n<pre><code> #include &lt;iostream&gt;;\n #include &lt;iomanip&gt;;\n using namespace std;\n int main() {\n    double x,y;\n    char op;\n    cout &lt;&lt; \"Enter Expression:\";\n    cin &gt;&gt; x &gt;&gt; op &gt;&gt; y;\n            if (op == '+')\n        {\n            cout &lt;&lt; \"Result:\" &lt;&lt; x + y &lt;&lt; endl;\n        }\n            else if (op == '-') {\n            cout &lt;&lt; \"Result:\" &lt;&lt; x - y &lt;&lt; endl;\n        }\n            else if (op == '*') {\n            cout &lt;&lt; \"Result:\" &lt;&lt; x*y &lt;&lt; endl;\n        }\n            else if (op == '/') {\n            cout &lt;&lt; \"Result:\" &lt;&lt; x / y &lt;&lt; endl;\n        }\n            else if (op == '%') {\n            cout &lt;&lt; \"Result:\" &lt;&lt; fmode(x,y) &lt;&lt; endl;\n        }\n            else{\n            return 0;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1505938781, "post_id": 46330921, "comment_id": 79623041, "body": "Eeek. C-style casts. At <i>least</i> use proper C++ casts.. no need to make the situation more dangerous and unclear than it <i>has</i> to be."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505941056, "post_id": 46330921, "comment_id": 79624043, "body": "@Jesper Juhl: agree in general; but is the situation really dangerous or unclear when casting primitive data type <code>double</code> to <code>int</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505941398, "post_id": 46330921, "comment_id": 79624205, "body": "perhaps not in this <i>specific</i> case, but since a C-style cast may degenerate into a <code>reinterpret_cast</code> of a <code>const_cast</code> of the variable in question, I&#39;d consider it extremely dangerous and something to avoid <i>always</i> - even if provably safe in given circumstances. Definately not something to advice newbies to do. Also; the C++ casts are easier to <code>grep</code> for and are more explicit about the conversion being done ;-)"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1505942222, "last_edit_date": 1505942222, "creation_date": 1505937923, "answer_id": 46330921, "question_id": 46330783, "link": "https://stackoverflow.com/questions/46330783/c-basic-calculator/46330921#46330921", "title": "C++ Basic Calculator", "body": "<p>The remainder operator <code>%</code> does not work for operands of type <code>double</code> (cf., for example, <a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">cppreference.com/Multiplicative operators</a>):</p>\n\n<blockquote>\n  <p>For the built-in operator <code>%</code>, lhs and rhs must both have integral or\n  unscoped enumeration type</p>\n</blockquote>\n\n<p>You could write <code>static_cast&lt;int&gt;(x)%static_cast&lt;int&gt;(y)</code> instead.</p>\n\n<p>Further, note that <code>=</code> is assignment operator; for comparisons (as in your case with <code>if (op = '%')</code>), use equality operator <code>==</code>, i.e. <code>if (op == '%')</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 6737975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc0b85e276eac75c5046565e35153a32?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/6737975/grigory"}, "is_accepted": false, "score": 1, "last_activity_date": 1505937925, "creation_date": 1505937925, "answer_id": 46330923, "question_id": 46330783, "link": "https://stackoverflow.com/questions/46330783/c-basic-calculator/46330923#46330923", "title": "C++ Basic Calculator", "body": "<p>The <code>%</code> operation is defined only for integer values. You cannot apply it for doubles. Also you have a typical novice mistake: In C++ <code>operator =</code> is assignment operator <code>a = b</code> mean get b value and put it in a. But <code>operator ==</code> is comparison operator, <code>a == b</code> mean if <code>a</code> equally <code>b</code> return <code>true</code>. If you want to compare values use <code>==</code>, not <code>=</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1505939286, "post_id": 46330932, "comment_id": 79623274, "body": "Please do not use C-style casts in a C++ program, if you can help it."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1505939492, "post_id": 46330932, "comment_id": 79623346, "body": "@Striezel in general I do agree, but I dont see how it would make any difference here"}, {"owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1505940189, "post_id": 46330932, "comment_id": 79623658, "body": "People who are new to programming (and the person who asked that question said he is) tend to use the example code snippets that get thrown at them, because they do not know any better way yet. And if these examples use any obsolete / outdated coding styles (like C-casts, pointer to char instead of <code>std::string</code>, etc.), they just copy it and assume that is the normal way to do things. That is why I think one should not use such stuff even in small snippets, because they serve as bad example."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1505984068, "post_id": 46330932, "comment_id": 79638745, "body": "@Striezel ok you convinced me, if you want you can edit it, or I will do it later..."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1505938077, "last_edit_date": 1505938077, "creation_date": 1505937963, "answer_id": 46330932, "question_id": 46330783, "link": "https://stackoverflow.com/questions/46330783/c-basic-calculator/46330932#46330932", "title": "C++ Basic Calculator", "body": "<p>With floating point division there is no remainder. What should be the result of <code>2.5 % 1.2</code>?</p>\n\n<p>You could use <code>int</code>s for that case:</p>\n\n<pre><code>    else if (op == '%') {\n        cout &lt;&lt; \"Result:\" &lt;&lt; (int)x % (int)y &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>but note that when the user types <code>2.5 % 1.2</code> this will show the result for <code>2 % 1</code>.</p>\n\n<p>PS: Also note that you have <code>=</code> (assignment) in the conditions when it should be <code>==</code> (comparison).</p>\n"}], "owner": {"reputation": 5, "user_id": 8550097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566d2c46bcc6d4b369acdccbe41873cd?s=128&d=identicon&r=PG&f=1", "display_name": "John Richards", "link": "https://stackoverflow.com/users/8550097/john-richards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 1, "answer_count": 4, "score": -4, "last_activity_date": 1505951496, "creation_date": 1505937382, "last_edit_date": 1505951496, "question_id": 46330783, "link": "https://stackoverflow.com/questions/46330783/c-basic-calculator", "title": "C++ Basic Calculator", "body": "<p>I'm new to C++ and programming in General. I was assigned to make a calculator for my C++ class and this is what I have so far.</p>\n\n<pre><code>#include &lt;iostream&gt;;\n#include &lt;iomanip&gt;;\nusing namespace std;\nint main() {\n    double x,y;\n    char op;\n    cout &lt;&lt; \"Enter Expression:\";\n    cin &gt;&gt; x &gt;&gt; op &gt;&gt; y;\n    if (op = '+')\n    {\n        cout &lt;&lt; \"Result:\" &lt;&lt; x + y &lt;&lt; endl;\n    }\n    else if (op = '-') {\n        cout &lt;&lt; \"Result:\" &lt;&lt; x - y &lt;&lt; endl;\n    }\n    else if (op = '*') {\n        cout &lt;&lt; \"Result:\" &lt;&lt; x*y &lt;&lt; endl;\n    }\n    else if (op = '/') {\n        cout &lt;&lt; \"Result:\" &lt;&lt; x / y &lt;&lt; endl;\n    }\n    else if (op = '%') {\n        cout &lt;&lt; \"Result:\" &lt;&lt; x % y &lt;&lt; endl; // &lt;--- line 23\n    }\n    else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>The x and y variables on line 23 both have errors saying that the expression must have an integral or unscoped enum type and I don't understand why.</p>\n"}, {"tags": ["c++", "arrays", "iterator"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 3, "creation_date": 1505937352, "post_id": 46330745, "comment_id": 79622291, "body": "What optimization level did you use to build that?"}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1505937419, "post_id": 46330745, "comment_id": 79622336, "body": "Sorry, I have no idea. I used this command: clang++ -std=c++14 filename.cpp and then ./a.out"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1505937422, "post_id": 46330745, "comment_id": 79622342, "body": "Also, use many more elements then you currently are.  A blip in another process could affect your timings since they are so small.  You really should check over a 100,000 elements  or more to get a nice average."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1505937556, "post_id": 46330745, "comment_id": 79622414, "body": "@Arghya then the benchmark here is invalid. Any number you got there is meaningless. Try compiling with <code>clang++ -std=c++14 -O3</code> at least. Also, as  @NathanOliver said, try with 100,000 element to have relevant amounts of data."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505937617, "post_id": 46330745, "comment_id": 79622446, "body": "also you should make a larger number of measurements. Strictly speaking measuring once is as good as measuring zero times, because you have no control over what your uncertainties are"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505937993, "post_id": 46330745, "comment_id": 79622635, "body": "Benchmarking can be hard to do right.  If you are interested in more on the topic here is a very good video/start of the subject: <a href=\"https://www.youtube.com/watch?v=nXaxk27zwlk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=nXaxk27zwlk</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505939088, "post_id": 46330745, "comment_id": 79623189, "body": "If you are measuring this with an unoptimized build your results are meaningless. Add a <code>-O2</code> or <code>-O3</code> in there with your compiler options and try again.. also (as mentioned) benchmark <i>a lot more</i> than a single execution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1505939564, "post_id": 46330745, "comment_id": 79623378, "body": "You are measuring cout."}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1505940114, "post_id": 46330745, "comment_id": 79623627, "body": "@Guillaume Racicot  Please see the updated answer post."}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505940152, "post_id": 46330745, "comment_id": 79623647, "body": "@NathanOliver Thank you for the video link, I will check it out. Also please see the answer post."}], "owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505940505, "creation_date": 1505937236, "last_edit_date": 1505940505, "question_id": 46330745, "link": "https://stackoverflow.com/questions/46330745/c-iterator-in-loop", "title": "C++ iterator in loop", "body": "<p>+++ See update below +++</p>\n\n<p>This is a code for reverse printing the content of an array. I used 3 slightly different methods for doing it: directly putting the dimension of the array in the for loop, using iterator and using reverse_iterator and measured the execution time of printing the for loop.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n\nusing get_time = std::chrono::high_resolution_clock;\n\nint main() {\n    std::cout &lt;&lt; \"Enter the array dimension:\";\n    int N;\n    std::cin &gt;&gt; N;\n\n    //Read the array elements\n    std::cout &lt;&lt; \"Enter the array elements:\" &lt;&lt;'\\n';\n    std::vector &lt;int&gt; v;\n    int input;\n    for(size_t i=0; i&lt;N; i++){\n        std::cin &gt;&gt; input;\n        v.push_back(input);\n    }\n\n    auto start = get_time::now();\n    for(int i=N-1; i&gt;=0; i--){\n        std::cout &lt;&lt; v[i] &lt;&lt;\" \";\n    }\n    auto finish = get_time::now();\n    auto time_diff=finish-start;\n    std::cout &lt;&lt; \"Elapsed time,non-iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n\n    auto start2 = get_time::now();\n    std::vector &lt;int&gt;::reverse_iterator ri;\n    for(ri=v.rbegin(); ri!=v.rend(); ri++){\n        std::cout &lt;&lt; *ri &lt;&lt;\" \";\n    }\n    auto finish2 = get_time::now();\n    auto time_diff2=finish2-start2;\n    std::cout &lt;&lt; \"Elapsed time, reverse iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff2).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n\n    auto start3 = get_time::now();\n    std::vector &lt;int&gt;::iterator i;\n    for(i=v.end()-1; i&gt;=v.begin(); i--){\n        std::cout &lt;&lt; *i &lt;&lt;\" \";\n    }\n    auto finish3 = get_time::now();\n    auto time_diff3=finish3-start3;\n    std::cout &lt;&lt; \"Elapsed time, iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff3).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>Output:\n5 4 3 2 1 Elapsed time,non-iterator= 2.7913e-05 Seconds\n5 4 3 2 1 Elapsed time, reverse iterator= 5.57e-06 Seconds\n5 4 3 2 1 Elapsed time, iterator= 4.56e-06 Seconds  \n</code></pre>\n\n<p>My question is: \nWhy the direct method is almost 5 times slower than both iterator and reverse_iterator methods? Also, is this faster execution of iterator machine dependent?</p>\n\n<p>This is a prototype, but I will need to deal with much bigger matrices; that is why I am asking this question. Thank you.    </p>\n\n<p>+++ Update +++</p>\n\n<p>I am posting the updated results after incorporating the comments. It was too big for a comment.</p>\n\n<p>I changed the for loop to evaluate the sum of an array with 100000 elements. I evaluated the same sum using the above mentioned methods (compiled with -O3 in clang++) and I have averaged the execution time for 3 methods over 10000 runs. Here are the results:</p>\n\n<pre><code>Average (10000 runs) elapsed time, non-iterator= 2.50183e-05\nAverage (10000 runs) elapsed time, reverse-iterator= 3.48299e-05\nAverage (10000 runs) elapsed time, iterator= 7.35307e-05\n</code></pre>\n\n<p>The results are much more uniform now, and now the non-iterator method is the fastest! Any insights? Or even this result is meaningless and I should do some more test?</p>\n\n<p>the updated code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n\nusing get_time = std::chrono::high_resolution_clock;\n\nint main() {\n    double time1,time2,time3;\n    int run=10000;\n    for(int k=0; k&lt;run; k++){\n    //Read the array elements\n    std::vector &lt;int&gt; v;\n    int input,N=100000;\n    for(size_t i=0; i&lt;N; i++){\n        v.push_back(i);\n    }\n    int sum1{0},sum2{0},sum3{0};\n    auto start = get_time::now();\n    for(int i=N-1; i&gt;=0; i--){\n        sum1+=v[i];\n    }\n    auto finish = get_time::now();\n    auto time_diff=finish-start;\n    std::cout &lt;&lt; \"Sum= \" &lt;&lt; sum1 &lt;&lt; \" \" &lt;&lt; \"Elapsed time,non-iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n\n    auto start2 = get_time::now();\n    std::vector &lt;int&gt;::reverse_iterator ri;\n    for(ri=v.rbegin(); ri!=v.rend(); ri++){\n        sum2+=*ri;\n    }\n    auto finish2 = get_time::now();\n    auto time_diff2=finish2-start2;\n    std::cout &lt;&lt; \"Sum= \" &lt;&lt; sum2 &lt;&lt;\" Elapsed time, reverse iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff2).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n\n    auto start3 = get_time::now();\n    std::vector &lt;int&gt;::iterator i;\n    for(i=v.end()-1; i&gt;=v.begin(); i--){\n        sum3+=*i;\n    }\n    auto finish3 = get_time::now();\n    auto time_diff3=finish3-start3;\n    std::cout &lt;&lt; \"Sum= \" &lt;&lt;sum3 &lt;&lt; \" Elapsed time, iterator= \" &lt;&lt; std::chrono::duration&lt;double&gt;\n        (time_diff3).count() &lt;&lt; \" Seconds\" &lt;&lt; '\\n';\n    time1+=std::chrono::duration&lt;double&gt;(time_diff).count();\n    time2+=std::chrono::duration&lt;double&gt;(time_diff2).count();\n    time3+=std::chrono::duration&lt;double&gt;(time_diff3).count();\n    }\n    std::cout &lt;&lt; \"Average (\" &lt;&lt; run &lt;&lt; \" runs)\" &lt;&lt; \" elapsed time, non-iterator= \" &lt;&lt; time1/double(run) &lt;&lt;'\\n';\n    std::cout &lt;&lt; \"Average (\" &lt;&lt; run &lt;&lt; \" runs)\" &lt;&lt; \" elapsed time, reverse-iterator= \" &lt;&lt; time2/double(run) &lt;&lt;'\\n';\n    std::cout &lt;&lt; \"Average (\" &lt;&lt; run &lt;&lt; \" runs)\" &lt;&lt; \" elapsed time, iterator= \" &lt;&lt; time3/double(run) &lt;&lt;'\\n';\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "swig"], "answers": [{"tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 3, "last_activity_date": 1508831158, "creation_date": 1508831158, "answer_id": 46904912, "question_id": 46330679, "link": "https://stackoverflow.com/questions/46330679/swig-includeall-except/46904912#46904912", "title": "Swig -includeall except...", "body": "<p>I'm not an expert in SWIG but taking a look at both <a href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html\" rel=\"nofollow noreferrer\">documentation for latest version</a> and source code (specifically to the <code>Source/Modules/main.cxx</code> file, where command line arguments are read), is it clear that such option doesn't exist (even not a hidden one).</p>\n\n<p>On the other hand, if you feel like you can modify the source code quite easily to do so.</p>\n\n<p>You can add a new command line option in the <code>main.cxx</code> file to add filenames to exclude and then compare such names to find a match. You can add a global function in the <code>Source/Preprocessor/preprocessor.h</code> file, which is already included by <code>main.cxx</code>.</p>\n\n<p>The code for the <code>-includeall</code> option is in <code>Source/Preprocessor/cpp.c</code>. In that file there is also a global variable called <code>include_all</code> that is set to <code>1</code> when the analog argument is set in the command line (it will guide you to find where such option is executed too).</p>\n\n<p>Now, in the <code>Preprocessor_parse(...)</code> function you can find where the header files are parsed (starting at line 1715 for version 3.0.12):</p>\n\n<pre><code>s1 = cpp_include(fn, sysfile);\nif (s1) {\n  /* ....... */\n}\n</code></pre>\n\n<p>You will be interested in the <code>String *Swig_last_file(void)</code> function, that will return the filename of the header line just parsed.</p>\n\n<pre><code>s1 = cpp_include(fn, sysfile);\nif (s1) {\n  int found = 0;\n\n  String* filename = Swig_last_file();\n  /* Here find for a match in the exclusion list */\n\n  if (!found) { /* keep working as usual */\n    /* ....... */\n  } /* if found, just ignore the include directive for that file */\n\n  Delete(s1);\n}\n</code></pre>\n\n<p>I know it is not a full solution but hope can guide you to get the desired behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 704, "user_id": 428831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/302d9c5ad16aa21aec9bf7f950809d4b?s=128&d=identicon&r=PG", "display_name": "Shlomi Loubaton", "link": "https://stackoverflow.com/users/428831/shlomi-loubaton"}, "is_accepted": false, "score": 3, "last_activity_date": 1531231712, "last_edit_date": 1531231712, "creation_date": 1531223787, "answer_id": 51264576, "question_id": 46330679, "link": "https://stackoverflow.com/questions/46330679/swig-includeall-except/51264576#51264576", "title": "Swig -includeall except...", "body": "<p>From the <a href=\"http://www.swig.org/Doc1.3/Preprocessor.html\" rel=\"nofollow noreferrer\">Docs about the SWIG Preprocessor</a>:</p>\n\n<blockquote>\n  <p>SWIG fully supports the use of #if, #ifdef, #ifndef, #else, #endif to conditionally include parts of an interface. The following symbols are predefined by SWIG when it is parsing the interface: <br>\n  SWIG - Always defined when SWIG is processing a file</p>\n</blockquote>\n\n<p>So you can write something like this:</p>\n\n<pre><code>#ifndef SWIG\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#endif // !SWIG\n</code></pre>\n\n<p>and SWIG will ignore it during the -includeall pass.</p>\n"}], "owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 46904912, "answer_count": 2, "score": 6, "last_activity_date": 1531231712, "creation_date": 1505937013, "question_id": 46330679, "link": "https://stackoverflow.com/questions/46330679/swig-includeall-except", "title": "Swig -includeall except...", "body": "<p>I have a large project where using the Swig -includeall flag seems to make sense. However, there are certain files I would not like expanded, primarily the STL libraries (e.g. vector and list). Is it possible to use the -includeall flag, but to blacklist certain files from expansion (like vector and list)?</p>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1505936973, "post_id": 46330646, "comment_id": 79622080, "body": "Do you know what a reference is?  Do you know what a default function parameter is?  If not you should get a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 589, "user_id": 7189763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd4441913cdd6fb742c6405b8ecb575?s=128&d=identicon&r=PG&f=1", "display_name": "jesuisgenial", "link": "https://stackoverflow.com/users/7189763/jesuisgenial"}, "edited": false, "score": 0, "creation_date": 1505938426, "post_id": 46330646, "comment_id": 79622852, "body": "it&#39;s c++ template syntax. K and V can be any type of class or structure."}, {"owner": {"reputation": 589, "user_id": 7189763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd4441913cdd6fb742c6405b8ecb575?s=128&d=identicon&r=PG&f=1", "display_name": "jesuisgenial", "link": "https://stackoverflow.com/users/7189763/jesuisgenial"}, "edited": false, "score": 0, "creation_date": 1505938465, "post_id": 46330646, "comment_id": 79622875, "body": "this is injecting instance of K and V into class&#39;s private property"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 589, "user_id": 7189763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd4441913cdd6fb742c6405b8ecb575?s=128&d=identicon&r=PG&f=1", "display_name": "jesuisgenial", "link": "https://stackoverflow.com/users/7189763/jesuisgenial"}, "edited": false, "score": 0, "creation_date": 1505939014, "post_id": 46330646, "comment_id": 79623155, "body": "@jesuisgenial c++ class members are not called &quot;properties&quot; and calling default parameters to a constructor &quot;injection&quot; may lead to confusion too imho"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 589, "user_id": 7189763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd4441913cdd6fb742c6405b8ecb575?s=128&d=identicon&r=PG&f=1", "display_name": "jesuisgenial", "link": "https://stackoverflow.com/users/7189763/jesuisgenial"}, "edited": false, "score": 0, "creation_date": 1505941082, "post_id": 46330646, "comment_id": 79624059, "body": "@jesuisgenial template type parameters can be any type"}, {"owner": {"reputation": 589, "user_id": 7189763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd4441913cdd6fb742c6405b8ecb575?s=128&d=identicon&r=PG&f=1", "display_name": "jesuisgenial", "link": "https://stackoverflow.com/users/7189763/jesuisgenial"}, "edited": false, "score": 0, "creation_date": 1505941265, "post_id": 46330646, "comment_id": 79624141, "body": "you guys are right. i&#39;m a bit confused too. thanks for revise"}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1505939640, "post_id": 46331279, "comment_id": 79623422, "body": "It might not hurt to talk about what the syntax <code>K()</code> and <code>V()</code> mean, since I think the OP doesn&#39;t know you can do that."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1505940782, "last_edit_date": 1505940782, "creation_date": 1505939492, "answer_id": 46331279, "question_id": 46330646, "link": "https://stackoverflow.com/questions/46330646/what-does-const-k-k-k-mean-in-this-constructor-function/46331279#46331279", "title": "What does const K&amp; k = K() mean in this constructor function?", "body": "<p><code>K</code> and <code>V</code> are template parameters, they can be any data type the user of <code>Entry</code> wants.</p>\n\n<p><code>k</code> and <code>v</code> are input parameters of the <code>Entry</code> constructor.  They are being passed in by const reference, and they have default values specified, where <code>K()</code> default-constructs a temp object of type <code>K</code>, and <code>V()</code> default-constructs a temp object of type <code>V</code>.  If the user does not provide explicit input values when creating an <code>Entry</code> object instance, the defaults are used instead.</p>\n\n<p>For example:</p>\n\n<pre><code>Entry&lt;int, int&gt; e1(1, 2);\n// K = int, k = 1\n// V = int, v = 2\n\nEntry&lt;int, int&gt; e2(1);\n// aka Entry&lt;int, int&gt; e2(1, int())\n// K = int, k = 1\n// V = int, v = 0\n\nEntry&lt;int, int&gt; e3;\n// aka Entry&lt;int, int&gt; e3(int(), int())\n// K = int, k = 0\n// V = int, v = 0\n\nEntry&lt;std::string, std::string&gt; e4(\"key\", \"value\");\n// K = std::string, k = \"key\"\n// V = std::string, v = \"value\"\n\nEntry&lt;std::string, std::string&gt; e5(\"key\");\n// aka Entry&lt;std::string, std::string&gt; e4(\"key\", std::string())\n// K = std::string, k = \"key\"\n// V = std::string, v = \"\"\n\nEntry&lt;std::string, std::string&gt; e6;\n// aka Entry&lt;std::string, std::string&gt; e4(std::string(), std::string())\n// K = std::string, k = \"\"\n// V = std::string, v = \"\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6715187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba23d46a8cc5d971ba361f9073f6671b?s=128&d=identicon&r=PG", "display_name": "sbryan1", "link": "https://stackoverflow.com/users/6715187/sbryan1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505940782, "creation_date": 1505936881, "question_id": 46330646, "link": "https://stackoverflow.com/questions/46330646/what-does-const-k-k-k-mean-in-this-constructor-function", "title": "What does const K&amp; k = K() mean in this constructor function?", "body": "<p>I am having difficulty understanding the syntax of this code fragment</p>\n\n<p>What is the purpose of \"const K&amp; k = K(), const V&amp; v = V()\"?</p>\n\n<pre><code>template&lt;typename K, typename V&gt;\nclass Entry{\n\n    public:\n        typedef K Key;\n        typedef V Value;\n    public:\n        Entry(const K&amp; k = K(), const V&amp; v = V()) : _key(k), _value(v) {}\n\n    ....\n        ....\n            ....\n    private:\n        K _key;\n        V _value;\n};\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "qt", "qt-installer", "qscript"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 6737975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc0b85e276eac75c5046565e35153a32?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/6737975/grigory"}, "is_accepted": false, "score": 1, "last_activity_date": 1512229571, "last_edit_date": 1512229571, "creation_date": 1506293178, "answer_id": 46395571, "question_id": 46330610, "link": "https://stackoverflow.com/questions/46330610/disable-native-next-button-in-qt-installer-framework/46395571#46395571", "title": "Disable native Next button in Qt installer framework", "body": "<p>The only solution i had found is call <code>installer.setValue(\"canContinue\" \"false\");</code></p>\n\n<p>Then connect page entered event using <code>gui.pageById(QInstaller.TargetDirectory).entered.\nconnect(Component.prototype.targetPageEntered);</code></p>\n\n<p>In <code>targetPageEntered</code> check our value:</p>\n\n<pre><code>Component.prototype.targetPageEntered = function () {\n    if (installer.value(\"canContinue\") != \"true\") {\n        gui.clickButton(buttons.BackButton);\n        QMessageBox.information(\"someid\", \"Installer\", \n        \"You must do smth to continue\", QMessageBox.Ok);\n    }\n}\n</code></pre>\n\n<p>Of course you need to change the <code>installer.value</code> when user complete required actions.</p>\n"}, {"tags": [], "owner": {"reputation": 859, "user_id": 737672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cfc95f736e1f638adf0f7200c0b8f89?s=128&d=identicon&r=PG", "display_name": "dydil", "link": "https://stackoverflow.com/users/737672/dydil"}, "is_accepted": false, "score": 4, "last_activity_date": 1533399202, "creation_date": 1533399202, "answer_id": 51687415, "question_id": 46330610, "link": "https://stackoverflow.com/questions/46330610/disable-native-next-button-in-qt-installer-framework/51687415#51687415", "title": "Disable native Next button in Qt installer framework", "body": "<p>In case someone else end ups here, I finally found a cleaner solution: a dynamic widget has a property <code>complete</code> that can be changed to enable and disable the \"Next\" button. Set it to <code>false</code> to disable the button.</p>\n\n<pre><code>Controller.prototype.DynamicMyWidgetCallback = function()\n{\n    var currentWidget = gui.currentPageWidget();\n    if (currentWidget != null)\n    {\n        currentWidget.complete = false\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6737975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc0b85e276eac75c5046565e35153a32?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/6737975/grigory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1533399202, "creation_date": 1505936737, "last_edit_date": 1505942622, "question_id": 46330610, "link": "https://stackoverflow.com/questions/46330610/disable-native-next-button-in-qt-installer-framework", "title": "Disable native Next button in Qt installer framework", "body": "<p>I have to disable standard next button, on my custom page via installscript.qs file.</p>\n\n<p>I can disable my own button (that I created in .ui file) via .qs script like this: <code>widget.myButton.setEnabled(false);</code></p>\n\n<p><a href=\"http://doc.qt.io/qtinstallerframework/scripting-buttons.html\" rel=\"noreferrer\">This</a> man shows that native buttons represented as enumeration and I cannot disable them same way. </p>\n\n<p>Controller Scripting manual page shows some interactions with native buttons. Like <code>gui.clickButton(buttons.NextButton)</code>. I go through whole gui object man and don't found anything useful.</p>\n\n<p>Qt installer framework has a native license check page with Next button logic that I need, but I have not found any samples that do it manually. (license page work because its default license page and it's logic inside framework as I understand).</p>\n\n<p>Finally I <a href=\"http://doc.qt.io/qt-5/qwizardpage.html#isComplete\" rel=\"noreferrer\">found</a> isComplete() method that can be useful for me, but it is for C++ API not for qs.\nSo how to disable native button via installscript.qs file?</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-range"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505940015, "post_id": 46331302, "comment_id": 79623583, "body": "I just noticed, it&#39;s a problem with GCC versions <a href=\"https://wandbox.org/permlink/7rs7mKkvFnFJFdow\" rel=\"nofollow noreferrer\">wandbox.org/permlink/7rs7mKkvFnFJFdow</a> (GCC 6.3) but not <a href=\"https://wandbox.org/permlink/B8eULRznwUgvimJv\" rel=\"nofollow noreferrer\">wandbox.org/permlink/B8eULRznwUgvimJv</a> (GCC 7.1). Not a problem in Clang as far as I can tell. On 6.3 indeed the workardoung from my answer works: <a href=\"https://wandbox.org/permlink/XBtyhElRNIqXzkZm\" rel=\"nofollow noreferrer\">wandbox.org/permlink/XBtyhElRNIqXzkZm</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1505939564, "creation_date": 1505939564, "answer_id": 46331302, "question_id": 46330593, "link": "https://stackoverflow.com/questions/46330593/how-to-use-boostrangeadaptorstransformed-over-stdunordered-set/46331302#46331302", "title": "How to use boost::range::adaptors::transformed over std::unordered_set?", "body": "<p>I can't really see the problem:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6b3c26e44e0883f9\" rel=\"nofollow noreferrer\">Your exact sample code</a> (live) prints:</p>\n\n<pre><code>8 20 6 4 0 2 \n4 10 3 2 0 1 \n</code></pre>\n\n<p>Which seems to be what you should expect.</p>\n\n<hr>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/7f0e7115f742360b\" rel=\"nofollow noreferrer\">Using the other elements</a>:</p>\n\n<pre><code>10 8 6 4 2 0 \n5 4 3 2 1 0 \n</code></pre>\n\n<h2>IDEA:</h2>\n\n<p>It could be <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behaviour</a> to assign the template expression:</p>\n\n<pre><code>auto range = set | boost::adaptors::transformed(double_int());\n</code></pre>\n\n<p>Because <code>double_int()</code> might be kept in the <code>transformed</code> adaptor <em>BY REFERENCE</em> (haven't checked).</p>\n\n<p>See whether this removes the issue for you:</p>\n\n<pre><code>for (auto i : set | boost::adaptors::transformed(double_int()))\n    std::cout &lt;&lt; i &lt;&lt; \" \";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1505945711, "creation_date": 1505945711, "answer_id": 46332549, "question_id": 46330593, "link": "https://stackoverflow.com/questions/46330593/how-to-use-boostrangeadaptorstransformed-over-stdunordered-set/46332549#46332549", "title": "How to use boost::range::adaptors::transformed over std::unordered_set?", "body": "<p><code>transformed</code> doesn't store a reference to the range as a range; it grabs the <code>begin</code>/<code>end</code> iterators of the range at the time of <a href=\"http://www.boost.org/doc/libs/1_65_1/boost/range/adaptor/transformed.hpp\" rel=\"nofollow noreferrer\">the range adaptor's construction</a>.</p>\n\n<p>When you later insert into the set after the adaptor's been constructed, the new element might not be in the range delimited by the old <code>begin/end</code> iterators prior to the insertion. Or, even worse, the insertion will invalidate all the iterators if it triggers a rehash. </p>\n"}], "owner": {"reputation": 47, "user_id": 8643925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740c988af86bb151ddfbe6f90aa28f6d?s=128&d=identicon&r=PG&f=1", "display_name": "CaTo", "link": "https://stackoverflow.com/users/8643925/cato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 0, "accepted_answer_id": 46332549, "answer_count": 2, "score": 2, "last_activity_date": 1505945775, "creation_date": 1505936666, "last_edit_date": 1505945775, "question_id": 46330593, "link": "https://stackoverflow.com/questions/46330593/how-to-use-boostrangeadaptorstransformed-over-stdunordered-set", "title": "How to use boost::range::adaptors::transformed over std::unordered_set?", "body": "<p>I'm trying to use boost::adaptors::transformed over a std::unordered_set but seems to produce weird behaviors even on quite small experiments.</p>\n\n<p>I'm using Boost 1.58.0 on Ubuntu 16.04 with gcc 5.4.0.</p>\n\n<p>Added elements after range initialization are not listed while iterating the range:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;unordered_set&gt;\n#include &lt;boost/range/adaptor/transformed.hpp&gt;\n\nstruct double_int\n{\n    typedef int result_type;\n    int operator()(int x) const { return x * 2; }\n};\n\nint main()\n{\n  std::unordered_set&lt;int&gt; set;\n\n  for(int i = 0; i &lt; 5; ++i)\n    set.insert(i); //adding ints to set\n\n  auto range = set | boost::adaptors::transformed(double_int());\n\n  set.insert(10); //adding some other int\n\n  //this produces: '8 0 2 4 6'\n  for(auto i : range)\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n  //this produces: '10 4 0 1 2 3'\n  for(auto i : set)\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n  //element 10 is not doubled!\n\n  return 0;\n}\n</code></pre>\n\n<p>Following the same scheme with other std containers (like std::list) work as intended, doubling the latter added elements.</p>\n\n<p>Even more weirdly if the set is initialized using: </p>\n\n<pre><code>std::unordered_set&lt;int&gt; set = {0,1,2,3,4,5};\n</code></pre>\n\n<p>range iteration gives only '10' while container's '10 0 1 2 3 4 5'</p>\n\n<p>Could someone tell me what is wrong with this example?</p>\n"}, {"tags": ["c++", "linux", "email", "debian-jessie", "ssmtp"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505934076, "post_id": 46329846, "comment_id": 79620580, "body": "What exactly do you mean by &quot;success or failure&quot;?"}, {"owner": {"reputation": 1, "user_id": 8448384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2920bc0c9faf13cce24bf71f1ca70ab?s=128&d=identicon&r=PG", "display_name": "user8448384", "link": "https://stackoverflow.com/users/8448384/user8448384"}, "edited": false, "score": 0, "creation_date": 1505934158, "post_id": 46329846, "comment_id": 79620624, "body": "Let&#39;s say the internet was down and the mail did not send. How might my program know to keep trying?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505934262, "post_id": 46329846, "comment_id": 79620689, "body": "That depends on what your mail client can return as an indicator - the system() library function returns the exit status of the program it executes, which you can test in your C++ code."}, {"owner": {"reputation": 1, "user_id": 8448384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2920bc0c9faf13cce24bf71f1ca70ab?s=128&d=identicon&r=PG", "display_name": "user8448384", "link": "https://stackoverflow.com/users/8448384/user8448384"}, "edited": false, "score": 0, "creation_date": 1505935108, "post_id": 46329846, "comment_id": 79621127, "body": "Ahhhh... I didn&#39;t know that. Will have to try, thanks!"}], "owner": {"reputation": 1, "user_id": 8448384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2920bc0c9faf13cce24bf71f1ca70ab?s=128&d=identicon&r=PG", "display_name": "user8448384", "link": "https://stackoverflow.com/users/8448384/user8448384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1505933993, "creation_date": 1505933993, "question_id": 46329846, "link": "https://stackoverflow.com/questions/46329846/how-do-i-get-an-error-or-confirmation-from-mailutils-to-c", "title": "How do I get an error or confirmation from mailutils to c++?", "body": "<p>I use a system() call to mailutils to send email alerts from a c++ program (running on a Debian Linux machine). Is there a way for my program to determine success or failure?</p>\n"}, {"tags": ["c++", "distributed-computing", "actor", "c++-actor-framework"], "answers": [{"comments": [{"owner": {"reputation": 6951, "user_id": 481602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f6b67393f3255ec820a8621425124bc?s=128&d=identicon&r=PG", "display_name": "Sebastien Diot", "link": "https://stackoverflow.com/users/481602/sebastien-diot"}, "edited": false, "score": 0, "creation_date": 1505992432, "post_id": 46331619, "comment_id": 79644705, "body": "Looking at the CAF doc again, it seems atm only TCP is supported. Publishing an actor involve calling a method with an *IP-address&quot;(char *) and a &quot;port&quot;(uint16_t), rather than the more usual &quot;protocol/URL&quot; string. The networking layer itself doesn&#39;t seem to be pluggable, so, AFAIK, you can&#39;t replace it, and pervert the IP-address parameter to contain a URL. Using multiple IP-addresses seems like the simplest work-around, assuming you run in a LAN."}, {"owner": {"reputation": 6951, "user_id": 481602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f6b67393f3255ec820a8621425124bc?s=128&d=identicon&r=PG", "display_name": "Sebastien Diot", "link": "https://stackoverflow.com/users/481602/sebastien-diot"}, "edited": false, "score": 0, "creation_date": 1505992511, "post_id": 46331619, "comment_id": 79644762, "body": "I&#39;ll wait some more before choosing your answer, in can there IS an easy way to configure generic &quot;proxy actors&quot;."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 1, "last_activity_date": 1505940951, "creation_date": 1505940951, "answer_id": 46331619, "question_id": 46329780, "link": "https://stackoverflow.com/questions/46329780/how-to-publish-a-large-number-of-actors-in-caf/46331619#46331619", "title": "How to &quot;publish&quot; a large number of actors in CAF?", "body": "<h2>Smooth scaling with ( almost ) no limits is alpha &amp; omega</h2>\n\n<p>One way, used in agent-based systems ( not sure if CAF has implemented tools for going this way ) is to use multiple transport-classes <code>{ inproc:// | ipc:// | tcp:// | .. | vmci:// }</code> and thus be able to pick from, on an as needed basis.</p>\n\n<p>While building a <em>proxy</em> may sound attractive, welding together two different actor-models one \"atop\" the other does not mean that it is as simple to achieve as it sounds ( eventloops are fragile to get tuned / blocking-prevented / event-handled in a fair manner - the do not like any other master to try to take their own Hat ... ).</p>\n\n<h2>In case CAF provides<sub> at the moment </sub>no other transport-means but TCP:</h2>\n\n<p>still one may resort to use O/S-level steps and measures and harness the features of the ISO-OSI-model up to the limits or as necessary:</p>\n\n<pre><code>sudo ip address add 172.16.100.17/24 dev eth0\n</code></pre>\n\n<p>or better, make the additional IP-addresses permanent - i.e. edit the file <code>/etc/network/interfaces</code> ( or Ubuntu ) and add as many stanzas, so that it looks like:</p>\n\n<pre><code>iface eth0 inet static\n    address 172.16.100.17/24\n\niface eth0 inet static\n    address 172.16.24.11/24\n</code></pre>\n\n<p>This way the configuration-space could get extended for cases the CAF does not provide any other means for such actors but the said TCP (address:port#)-transport-class.</p>\n"}, {"comments": [{"owner": {"reputation": 6951, "user_id": 481602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f6b67393f3255ec820a8621425124bc?s=128&d=identicon&r=PG", "display_name": "Sebastien Diot", "link": "https://stackoverflow.com/users/481602/sebastien-diot"}, "edited": false, "score": 0, "creation_date": 1506015209, "post_id": 46347901, "comment_id": 79660221, "body": "After reading your explanation AND re-reading the documentation, it starts to make sense. Publishing actors to a specific port and connecting to it, and then having the framework communicate with them without using/needing that port and connection is very counter-intuitive IMHO. I think the documentation should make this clearer, because implying you need to use a different port for each actor you want to publish sounds like an &quot;anti-feature&quot; to me."}, {"owner": {"reputation": 768, "user_id": 112736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af71dde4af71d209a99935830edd2ed?s=128&d=identicon&r=PG", "display_name": "neverlord", "link": "https://stackoverflow.com/users/112736/neverlord"}, "reply_to_user": {"reputation": 6951, "user_id": 481602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f6b67393f3255ec820a8621425124bc?s=128&d=identicon&r=PG", "display_name": "Sebastien Diot", "link": "https://stackoverflow.com/users/481602/sebastien-diot"}, "edited": false, "score": 0, "creation_date": 1506018488, "post_id": 46347901, "comment_id": 79661933, "body": "I hear you. The docs need to do a better job at explaining how the network layer actually works."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1506019320, "post_id": 46347901, "comment_id": 79662349, "body": "@neverlord <b>Sounds as a nice piece of engineering</b>, Sir. Could you state also <b>what are</b> the best-case / worst-case <b>latency [ns] figures</b> for { inital local/remote-actor setup | local/remote-actor event-delivery } for eco-systems with { 1E+3 | 1E+6 | 1E+9 | 1E+12 }-actor instances and how does these figures creep in relation to the event-&quot;size&quot; { B | kB | MB }? Are these production-grade performance planning facts / benchmark readings tested &amp; also somewhere published? <b>Thank you in advance.</b>"}, {"owner": {"reputation": 768, "user_id": 112736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af71dde4af71d209a99935830edd2ed?s=128&d=identicon&r=PG", "display_name": "neverlord", "link": "https://stackoverflow.com/users/112736/neverlord"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1506064433, "post_id": 46347901, "comment_id": 79677409, "body": "@user3666197 I don&#39;t have microbenchmark results for the networking components, but you can have a look at <a href=\"http://www.sciencedirect.com/science/article/pii/S1477842416000038\" rel=\"nofollow noreferrer\">our latest publication</a> (the final draft version is also available as <a href=\"https://arxiv.org/abs/1505.07368\" rel=\"nofollow noreferrer\">arxiv version</a>). Network performance is generally on par with OpenMPI (on commodity hardware using TCP). CAF is already used in production, for example by finance, gaming, and big data companies. Whether or not it fits your requirements is something I would recommend evaluating on a case-by-case bases, though."}], "tags": [], "owner": {"reputation": 768, "user_id": 112736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af71dde4af71d209a99935830edd2ed?s=128&d=identicon&r=PG", "display_name": "neverlord", "link": "https://stackoverflow.com/users/112736/neverlord"}, "is_accepted": true, "score": 2, "last_activity_date": 1506007946, "creation_date": 1506007946, "answer_id": 46347901, "question_id": 46329780, "link": "https://stackoverflow.com/questions/46329780/how-to-publish-a-large-number-of-actors-in-caf/46347901#46347901", "title": "How to &quot;publish&quot; a large number of actors in CAF?", "body": "<p>Let me add some background. The <code>middleman::publish</code>/<code>middleman::remote_actor</code> function pair does two things: connecting two CAF instances and giving you a handle for communicating to a remote actor. The actor you \"publish\" to a given port is meant to act as an entry point. This is a convenient rendezvous point, nothing more.</p>\n\n<p>All you need to communicate between two actors is a handle. Of course you need to somehow learn new handles if you want to talk to more actors. The <code>remote_actor</code> function is simply a convenient way to implement a rendezvous between two actors. However, after you learn the handle you can freely pass it around in your distributed system. Actor handles are network transparent.</p>\n\n<p>Also, CAF will always maintain a <em>single</em> TCP connection between two actor system. If you publish 10 actors on host A and \"connect\" to all 10 actors from host B via <code>remote_actor</code>, you'll see that CAF will initially open 10 connections (because the target node could run multiple actor system) but all but one connection will get closed.</p>\n\n<p>If you don't care about the rendezvous for actors offered by <code>publish</code>/<code>remote_actor</code> then you can also use <code>middleman::open</code> and <code>middleman::connect</code> instead. This will only connect two CAF instances without exchanging actor handles. Instead, <code>connect</code> will return a <code>node_id</code> on success. This is all you need for some features. For example <a href=\"https://actor-framework.readthedocs.io/en/stable/RemoteSpawn.html\" rel=\"nofollow noreferrer\">remote spawning of actors</a>.</p>\n\n<blockquote>\n  <p>Is there a way to publish one actor as a proxy for all actors in an actor system ( preferably without any significant performance loss )?</p>\n</blockquote>\n\n<p>You can publish one actor at a port that's sole purpose it is to model a rendezvous point. If that actor sends 1000 more actor handles to a remote actor this will not cause any additional network connections.</p>\n\n<p>Writing a custom actor that explicitly models the rendezvous between multiple systems by offering some sort dictionary is the recommended way.</p>\n\n<p>Just for the sake of completeness: CAF also has a registry mechanism. However, keys are limited to <code>atom</code> values, i.e., 10-characters-or-less. Since the registry is generic it also only stores <code>strong_actor_ptr</code> and leaves type safety to you. However, if that's all you need: you put handles to the registry (see <code>actor_system::registry</code>) and then access this registry remotely via <code>middleman::remote_lookup</code> (you only need a <code>node_id</code> to do this).</p>\n"}], "owner": {"reputation": 6951, "user_id": 481602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f6b67393f3255ec820a8621425124bc?s=128&d=identicon&r=PG", "display_name": "Sebastien Diot", "link": "https://stackoverflow.com/users/481602/sebastien-diot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "accepted_answer_id": 46347901, "answer_count": 2, "score": 5, "last_activity_date": 1506007946, "creation_date": 1505933749, "last_edit_date": 1505939512, "question_id": 46329780, "link": "https://stackoverflow.com/questions/46329780/how-to-publish-a-large-number-of-actors-in-caf", "title": "How to &quot;publish&quot; a large number of actors in CAF?", "body": "<p>I've just learned about CAF, the <a href=\"https://actor-framework.org/#components\" rel=\"nofollow noreferrer\">C++ Actor Framework</a>.</p>\n\n<p>The one thing that surprised me is that the way to make an actor available over the network is to <a href=\"http://actor-framework.readthedocs.io/en/latest/NetworkTransparency.html#publishing-and-connecting\" rel=\"nofollow noreferrer\">\"publish\"</a> it to a <em>specific TCP port</em>.</p>\n\n<p>This basically means that the number of actors that you can publish is limited by the number of ports you have ( 64k ). Since you need both one port to publish an actor and one port to access a remote actor, I assume that two processes would each be able to share at best about 32k actors each, while they could probably each hold a million actors on a commodity server. This would be even worse, if the cluster had, say, 10 nodes.</p>\n\n<p>To make the publishing scalable, each process should only need to open <em>1</em> port, for each and every actor in one system, and open <em>1</em> connection to each actor system that they want to access.</p>\n\n<p>Is there a way to publish one actor as a <em>proxy</em> for all actors in an actor system ( preferably without any significant performance loss )?</p>\n"}, {"tags": ["c++", "loops", "int", "modulo"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1505933526, "post_id": 46329647, "comment_id": 79620273, "body": "Have you gone over recursion?  iterating plus a stack == recursion."}, {"owner": {"reputation": 67, "user_id": 8251984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e400bf7f3228e412813e199b93891c04?s=128&d=identicon&r=PG&f=1", "display_name": "Vickie", "link": "https://stackoverflow.com/users/8251984/vickie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505934021, "post_id": 46329647, "comment_id": 79620551, "body": "We&#39;ve gone over basic recursion, but I am not familiar with how to push the numbers onto a stack."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1505934298, "post_id": 46329647, "comment_id": 79620712, "body": "<a href=\"http://coliru.stacked-crooked.com/a/2df9da8fc9cba815\" rel=\"nofollow noreferrer\">Here</a> is a little example of how you can go &quot;backwards&quot;."}, {"owner": {"reputation": 6118, "user_id": 7550472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/5iSxd.jpg?s=128&g=1", "display_name": "Kaushik NP", "link": "https://stackoverflow.com/users/7550472/kaushik-np"}, "edited": false, "score": 0, "creation_date": 1505934546, "post_id": 46329647, "comment_id": 79620834, "body": "Basically have got result in the reverse order right? Why not just reverse it manually?"}], "answers": [{"tags": [], "owner": {"reputation": 411, "user_id": 8565659, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uWyrpvQQEgM/AAAAAAAAAAI/AAAAAAAAAAc/SqxAi_EUNug/photo.jpg?sz=128", "display_name": "Discoverer98", "link": "https://stackoverflow.com/users/8565659/discoverer98"}, "is_accepted": true, "score": 3, "last_activity_date": 1505934682, "last_edit_date": 1505934682, "creation_date": 1505934160, "answer_id": 46329895, "question_id": 46329647, "link": "https://stackoverflow.com/questions/46329647/how-to-extract-each-digit-from-int-without-using-stack-or-array-c/46329895#46329895", "title": "How to extract each digit from int without using stack or array? (C++)", "body": "<p>One easy way is through recursion. In fact, it is quite elegant. You can write something like this:</p>\n\n<pre><code>string barCode(int zip)\n{\n    if (zip &lt;= 0) return \"\";\n    return (barCode(zip / 10) + codeForDigit(zip % 10));\n}\n</code></pre>\n\n<p>Basically, you're using the call stack as your stack for storing the previous strings. It's also a minimal way of writing this function.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1505936016, "last_edit_date": 1505936016, "creation_date": 1505934861, "answer_id": 46330092, "question_id": 46329647, "link": "https://stackoverflow.com/questions/46329647/how-to-extract-each-digit-from-int-without-using-stack-or-array-c/46330092#46330092", "title": "How to extract each digit from int without using stack or array? (C++)", "body": "<p>You can reverse the string result after you're done with conversion to char each digit:</p>\n\n<pre><code>std::string barCode(int zip){\n    std::string result;\n    while(zip &gt; 0){\n        result += zip % 10 + '0';\n        zip /= 10;\n    }\n\n    std::reverse(result.begin(), result.end());     \n    return result;\n}\n\n\nint main(){\n    std::cout &lt;&lt; barCode(245) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18493, "user_id": 8176478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bfdd0a05bddc5a0bcaf042597babdef?s=128&d=identicon&r=PG&f=1", "display_name": "MKR", "link": "https://stackoverflow.com/users/8176478/mkr"}, "is_accepted": false, "score": 0, "last_activity_date": 1505935315, "creation_date": 1505935315, "answer_id": 46330224, "question_id": 46329647, "link": "https://stackoverflow.com/questions/46329647/how-to-extract-each-digit-from-int-without-using-stack-or-array-c/46330224#46330224", "title": "How to extract each digit from int without using stack or array? (C++)", "body": "<p>One solution could be:</p>\n\n<pre><code>string barCode(int zip)\n{\n    string result;\n    if(zip &lt;=0) return \"\";\n\n    //Find 10s in zip\n    int i=zip/10;\n\n    int nTens = 0;\n    while( i&lt;=0)\n    {\n        i = i/10;\n        nTens++;\n    }\n\n    int n;\n    for (int j=0; j&lt;=nTens ; j++)\n    {\n        n = zip / pow(10, (nTens-j));\n        result += codeForDigit(n);\n        zip = zip - n * pow(10, (nTens-j))\n    }\n    return result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8286077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cad9585e4d212985ae30a7d56c05b?s=128&d=identicon&r=PG", "display_name": "Eduardo Claudio", "link": "https://stackoverflow.com/users/8286077/eduardo-claudio"}, "is_accepted": false, "score": 0, "last_activity_date": 1505937651, "creation_date": 1505937651, "answer_id": 46330853, "question_id": 46329647, "link": "https://stackoverflow.com/questions/46329647/how-to-extract-each-digit-from-int-without-using-stack-or-array-c/46330853#46330853", "title": "How to extract each digit from int without using stack or array? (C++)", "body": "<p>I think the easy way is transform the number in a string and the iterates over it:</p>\n\n<pre><code>int zip = 123456789;\nstd::string digits = std::to_string(zip);\nstd::string barcode;\nint d=0;\n\nfor (auto it=digits.begin(); it != digits.end();it++)\n{\n    d= int(*it);\n    barcode.push_back(codeForDigit(d-'0'));\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8251984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e400bf7f3228e412813e199b93891c04?s=128&d=identicon&r=PG&f=1", "display_name": "Vickie", "link": "https://stackoverflow.com/users/8251984/vickie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 46329895, "answer_count": 4, "score": 1, "last_activity_date": 1505937651, "creation_date": 1505933264, "last_edit_date": 1505935039, "question_id": 46329647, "link": "https://stackoverflow.com/questions/46329647/how-to-extract-each-digit-from-int-without-using-stack-or-array-c", "title": "How to extract each digit from int without using stack or array? (C++)", "body": "<p>I have an assignment where I'm suppose to print a specific code when a number is entered such as 90621. I am suppose to extract that number in order and print the code ex: extract digit 9 print code --> extract 0 (in order). </p>\n\n<p>The thing is I only figured out how to extract the numbers in reverse order ( ex: extracting 1 first and then 2 for 90621) and I'm not sure how to do it in order. I have seen some post on here where people convert the digit to a string, but I can't do that since one of the function I'm calling takes an int as a parameter. We've also only covered basics such as loops and if functions so far, so I'm not sure how to use stack or array. </p>\n\n<p>This is my code for extracting the numbers and printing the code so far: </p>\n\n<pre><code>string barCode(int zip){\n    string result;\n    int n;\n    while (zip &gt; 0){\n        n = zip % 10;\n        result += codeForDigit(n);\n        zip = zip / 10;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Some info on the functions: \n - The function <strong>codeForDigit(int digit)</strong> takes one digit and returns the code for that digit.\n - <code>barCode(int zip)</code> Which returns an entire bar code by breaking the number into individual digits, encoding that digit, and adding it to the string return value.</p>\n"}, {"tags": ["c++", "access-violation", "c++builder-xe5", "comctl32"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505935256, "post_id": 46329622, "comment_id": 79621203, "body": "There some people here with staggering amounts of knowledge and intuition who might recognize that stack trace and manage to infer exactly what triggers it, but the rest of us mere mortals are going to need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1505946444, "post_id": 46329622, "comment_id": 79626141, "body": "The stack trace shown implies that the <code>WM_MOUSEMOVE</code> message handler in <code>TControl</code> is directly calling the <code>WM_LBUTTONDOWN</code> message handler in <code>TCustomTreeView</code>, which is not true, and would be very wrong if it actually did. Do you, by chance, have an <code>OnMouseMove</code> event handler assigned to your <code>TTreeView</code> that simulates a mouse button press?"}], "owner": {"reputation": 21, "user_id": 2911563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd16ae4bba6195d608ca26c0bd9e72e2?s=128&d=identicon&r=PG&f=1", "display_name": "MissCoder", "link": "https://stackoverflow.com/users/2911563/misscoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2258, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1505946219, "creation_date": 1505933176, "last_edit_date": 1505946219, "question_id": 46329622, "link": "https://stackoverflow.com/questions/46329622/how-to-fix-access-violation-at-address-in-module-comctl32-dll-read-of-addr", "title": "How to fix Access violation at address &lt;&gt; in module &#39;COMCTL32.DLL&#39;. Read of address FFFFFFFF. in Embarcadero C++ XE5", "body": "<p>We are getting Access violation errors in COMCTL32.DLL on a desktop application developed in Emabarcadero C++ XE5. \nThis issue happens mostly in user environment where he leaves the application running overnight and when he accesses it after a prolonged duration - the application crashes.</p>\n\n<p>The stack trace looks as follows</p>\n\n<pre>\nexception class    : EAccessViolation\nexception message  : Access violation at address 72E5B95A in module 'COMCTL32.DLL'. Read of address FFFFFFFF.\n\nmain thread ($57c):\n72e5b95a +000 COMCTL32.DLL\n7770df12 +092 USER32.dll                    CallWindowProcW\n5046777a +0e6 vcl190.bpl   Vcl              Controls.TWinControl.DefaultHandler\n504631b1 +015 vcl190.bpl   Vcl              Controls.TControl.WMLButtonDown\n504cf874 +034 vcl190.bpl   Vcl              Comctrls.TCustomTreeView.WMLButtonDown\n5046345e +07e vcl190.bpl   Vcl              Controls.TControl.WMMouseMove\n50462b49 +2bd vcl190.bpl   Vcl              Controls.TControl.WndProc\n50467669 +5c5 vcl190.bpl   Vcl              Controls.TWinControl.WndProc\n504ceeb6 +082 vcl190.bpl   Vcl              Comctrls.TCustomTreeView.WndProc\n50466cac +02c vcl190.bpl   Vcl              Controls.TWinControl.MainWndProc\n7770df9b +00b USER32.dll                    DispatchMessageW\n50590dc3 +0f3 vcl190.bpl   Vcl              Forms.TApplication.ProcessMessage\n50590e06 +00a vcl190.bpl   Vcl              Forms.TApplication.HandleMessage\n50591141 +0c9 vcl190.bpl   Vcl              Forms.TApplication.Run\n00406011 +69d vat.exe      vat.cpp 189 +116 WinMain\n0072d46d +14d vat.exe                       __startup\n76e962c2 +022 KERNEL32.DLL                  BaseThreadInitThunk\n</pre>\n\n<p>Has anyone else seen similar issue?</p>\n\n<p>Any suggestions to resolve this issue?</p>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1505933304, "post_id": 46329550, "comment_id": 79620176, "body": "Btw your condition should have <code>mid!=end</code> on the left of <code>&amp;&amp;</code>, otherwise you can get UB"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1505933754, "post_id": 46329550, "comment_id": 79620404, "body": "And as usual: Don&#39;t use &quot;using namespace std&quot;. <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">See here why</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1505939857, "post_id": 46329550, "comment_id": 79623520, "body": "You know std::lower_bound?"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1505933127, "post_id": 46329578, "comment_id": 79620088, "body": "or <code>vector&lt;char&gt; s{&#39;a&#39;,&#39;b&#39;,&#39;c&#39;};</code> ;)"}, {"owner": {"reputation": 123, "user_id": 7143058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SnEzF.jpg?s=128&g=1", "display_name": "Beach Williams", "link": "https://stackoverflow.com/users/7143058/beach-williams"}, "edited": false, "score": 0, "creation_date": 1505933151, "post_id": 46329578, "comment_id": 79620098, "body": "That was the problem. Thanks"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 2, "creation_date": 1505933867, "post_id": 46329578, "comment_id": 79620469, "body": "Yes, but please test for <code>end</code> BEFORE dereferencing !! <code>while(mid!=end &amp;&amp; *mid!=sough)</code>"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1505933025, "creation_date": 1505933025, "answer_id": 46329578, "question_id": 46329550, "link": "https://stackoverflow.com/questions/46329550/no-match-for-operator-c-iterators/46329578#46329578", "title": "No match for operator &quot;!=&quot; (c++ iterators)", "body": "<p>The type of <code>'c'</code> is <code>char</code>. The type of <code>*mid</code> is <code>std::string</code>. <code>operator!=</code> is not defined between <code>char</code> and <code>std::string</code>.</p>\n\n<p>You can change <code>sought</code> to:</p>\n\n<pre><code>auto sought = \"c\"; // C-style string\n</code></pre>\n\n<p>Or to:</p>\n\n<pre><code>using namespace std::literals;\nauto sought = \"c\"s; // `std::string`\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7143058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SnEzF.jpg?s=128&g=1", "display_name": "Beach Williams", "link": "https://stackoverflow.com/users/7143058/beach-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 46329578, "answer_count": 1, "score": 1, "last_activity_date": 1505933025, "creation_date": 1505932932, "question_id": 46329550, "link": "https://stackoverflow.com/questions/46329550/no-match-for-operator-c-iterators", "title": "No match for operator &quot;!=&quot; (c++ iterators)", "body": "<p>The program should be a binary search in a vector. In the end it prints the found element. My code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;string&gt; s{\"a\",\"b\",\"c\"};\n\n    auto beg=s.begin(), end=s.end(), mid=s.begin()+(end-beg)/2;\n    auto sought='c';\n\n    while(*mid!=sought &amp;&amp; mid!=end)\n    {\n        if(*mid&gt;sought)\n            end=mid;\n\n        else\n                beg=mid+1;\n\n        mid=beg+(end-beg)/2;\n    }\n\n    cout&lt;&lt;(*mid)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>It says that the error is that operator != has no match at (*mid!=sought &amp;&amp; mid!=end). If I try to do it on a simple string instead of a vector it works. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9, "user_id": 7264669, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acba7f3eb3116b37ea0bc25e6e39f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Cavustius", "link": "https://stackoverflow.com/users/7264669/cavustius"}, "edited": false, "score": 0, "creation_date": 1505932801, "post_id": 46329500, "comment_id": 79619934, "body": "if (l - templ &gt;= 2) \t\tQuicksort(h - 1, templ, arrayToSort); \tif (temph - h &gt;= 2) \t\tQuicksort(temph, l + 1, arrayToSort); should also be added at the bottom of the while loop, sorry missed it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1505932918, "post_id": 46329500, "comment_id": 79620001, "body": "You may answer your own questions when you come up with the answer yourself. No need to limit it to a comment."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505932996, "post_id": 46329500, "comment_id": 79620042, "body": "Why are you writing your own sort routine?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505933222, "post_id": 46329500, "comment_id": 79620138, "body": "Unrelated: What you have implemented doesn&#39;t look much like a quicksort. If this is for school you may lose some marks even if it does successfully sort."}], "answers": [{"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 0, "last_activity_date": 1505933561, "creation_date": 1505933561, "answer_id": 46329739, "question_id": 46329500, "link": "https://stackoverflow.com/questions/46329500/quicksort-algorithm-not-working-displays-a-10-instead-of-a-4/46329739#46329739", "title": "Quicksort algorithm not working, displays a 10 instead of a 4", "body": "<p>The first bug is here, you overwrite the Pivot'th position instead of the Pivot's position.</p>\n\n<pre><code>arrayToSort[Pivot] = arrayToSort[l];\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7264669, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acba7f3eb3116b37ea0bc25e6e39f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Cavustius", "link": "https://stackoverflow.com/users/7264669/cavustius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505933778, "creation_date": 1505932771, "last_edit_date": 1505933778, "question_id": 46329500, "link": "https://stackoverflow.com/questions/46329500/quicksort-algorithm-not-working-displays-a-10-instead-of-a-4", "title": "Quicksort algorithm not working, displays a 10 instead of a 4", "body": "<p>I am trying to use the quicksort algorithm to sort some binary files. I did a merge sort algorithm and was able to sort 10,000,000 numbers in 7 seconds. I am trying to see if quicksort will do it faster or not, however, I am having trouble getting my quicksort to work. It sorts the data correctly, however it takes a 4 from the binary file and converts it into a 10. </p>\n\n<p>When I call quicksort I do: Quicksort(size, 1, arrayToSort);\n- Size is the size of the binary list, so it is changing, I am testing 10 numbers, so it is 10 right now, and represents high, or h. I am using 1 for low, or l because I am starting at 1 base. I combined the partition and sorting functions to just be one big function. Any ideas will help, thanks.</p>\n\n<pre><code>void Quicksort(int h, int l, int *arrayToSort)\n{\n    int Pivot = arrayToSort[(l + h) / 2];\n    arrayToSort[Pivot] = arrayToSort[l];\n    int templ = l, temph = h;\n\n    while (true)\n    {\n        while (arrayToSort[h] &gt; Pivot &amp;&amp; l &lt; h)\n        {\n            h--;\n        }\n        if (l &lt; h)\n        {\n            arrayToSort[l] = arrayToSort[h];\n            l++;\n        }\n        else\n        {\n            arrayToSort[h] = Pivot;\n            break;\n        }\n        while (arrayToSort[l] &lt; Pivot &amp;&amp; l &lt; h)\n        {\n            l++;\n        }\n        if (l &lt; h)\n        {\n            arrayToSort[h] = arrayToSort[l];\n            h--;\n        }\n        else\n        {\n            arrayToSort[l] = Pivot;\n            break;\n        }\n    }\n    if (l - templ &gt;= 2)\n        Quicksort(h - 1, templ, arrayToSort);\n    if (temph - h &gt;= 2)\n        Quicksort(temph, l + 1, arrayToSort);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qtablewidget", "qtablewidgetitem"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 4, "last_activity_date": 1505941516, "last_edit_date": 1505941516, "creation_date": 1505940855, "answer_id": 46331593, "question_id": 46329431, "link": "https://stackoverflow.com/questions/46329431/how-to-show-the-row-where-qpushbutton-is-clicked-in-qtablewidget/46331593#46331593", "title": "How to show the row where QPushButton is clicked in QTableWidget", "body": "<p>This task can be solved using the <a href=\"http://doc.qt.io/qt-5/qtablewidget.html#removeRow\" rel=\"nofollow noreferrer\"><code>removeRow()</code></a> method but before we must get the row. First of all we will connect all the buttons to a slot inside the loop as shown below:</p>\n\n<p><strong>*.h</strong></p>\n\n<pre><code>private slots:\n    void onClicked();\n</code></pre>\n\n<p><strong>*.cpp</strong></p>\n\n<pre><code>[...]\nQPushButton* btn_edit = new QPushButton();\nbtn_edit-&gt;setText(\"Remove\");\nconnect(btn_edit, &amp;QPushButton::clicked, this, &amp;MainWindow::onClicked);\n[...]\n</code></pre>\n\n<p>In the slot we can get the button that emits the signal through the <a href=\"http://doc.qt.io/qt-5/qobject.html#sender\" rel=\"nofollow noreferrer\"><code>sender()</code></a> method, then we get <code>QWidget</code> parent (created with the name pWidget), this is the widget that is added to the <code>QTableWidget</code> and its position is relative to it, then we use the method <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#indexAt\" rel=\"nofollow noreferrer\"><code>indexAt()</code></a> to get the <code>QModelIndex</code> associated with the cell, and this has the information of the row through the method <a href=\"http://doc.qt.io/qt-5/qmodelindex.html#row\" rel=\"nofollow noreferrer\"><code>row()</code></a>. All of the above is implemented in the following lines:</p>\n\n<pre><code>void MainWindow::onClicked()\n{\n    QWidget *w = qobject_cast&lt;QWidget *&gt;(sender()-&gt;parent());\n    if(w){\n        int row = ui-&gt;tableWidget-&gt;indexAt(w-&gt;pos()).row();\n        ui-&gt;tableWidget-&gt;removeRow(row);\n        ui-&gt;tableWidget-&gt;setCurrentCell(0, 0);\n    }\n}\n</code></pre>\n\n<p><em>Note:</em> The <a href=\"http://doc.qt.io/qt-5/qtablewidget.html#setCurrentCell\" rel=\"nofollow noreferrer\"><code>setCurrentCell()</code></a> method is used to set the focus since the last cell that has it has been deleted.</p>\n\n<p>The complete example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/46329431-how-to-show-the-row-where-qpushbutton-is-clicked-in-qtablewidget\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 6825968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f75140eec10f948648c4ba271fe7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Pjentack", "link": "https://stackoverflow.com/users/6825968/pjentack"}, "is_accepted": false, "score": 2, "last_activity_date": 1506005601, "creation_date": 1506005601, "answer_id": 46347136, "question_id": 46329431, "link": "https://stackoverflow.com/questions/46329431/how-to-show-the-row-where-qpushbutton-is-clicked-in-qtablewidget/46347136#46347136", "title": "How to show the row where QPushButton is clicked in QTableWidget", "body": "<p>When you are creating QPushButton just add :</p>\n\n<pre><code>    btn_delete = new QPushButton(\"Remove\", ui-&gt;tableWidget);\n    btn_delete-&gt;setObjectName(QString(\"%1\").arg(ui-&gt;tableWidget-&gt;rowCount()));\n\n    connect(btn_delete, SIGNAL(clicked()), this,    SLOT(CellButtonDeleteClicked()));\n</code></pre>\n\n<p>And create function CellButtonDeleteClicked()</p>\n\n<pre><code>     void CellButtonDeleteClicked()\n     {\n\n      //   by this line I can get the sender of signal\n      QPushButton *pb = qobject_cast&lt;QPushButton *&gt;(QObject::sender());\n\n      int row = pb-&gt;objectName().toInt();\n      ui-&gt;tableWidget-&gt;removeRow(row);\n     }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8167852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3094, "favorite_count": 0, "accepted_answer_id": 46331593, "answer_count": 2, "score": 4, "last_activity_date": 1506005601, "creation_date": 1505932523, "last_edit_date": 1505944211, "question_id": 46329431, "link": "https://stackoverflow.com/questions/46329431/how-to-show-the-row-where-qpushbutton-is-clicked-in-qtablewidget", "title": "How to show the row where QPushButton is clicked in QTableWidget", "body": "<p>I would like to delete row where <code>QPushButton</code> is clicked how it is possible to I think it is reasonable to use slots but how to do it don't know , if you have any ideas how to get a row of selected button please share, thanks.</p>\n\n<p>It is my table</p>\n\n<p><img src=\"https://i.stack.imgur.com/uPhUW.png\" alt=\"\"></p>\n\n<p>It is a code where i add rows to my QTableWidget</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    for(int i = 0; i&lt;20;i++)\n        ui-&gt;tableWidget-&gt;insertRow(ui-&gt;tableWidget-&gt;rowCount());\n    QVector&lt;QString&gt;vec;\n    vec&lt;&lt;\"first\"&lt;&lt;\"sec\"&lt;&lt;\"third\"&lt;&lt;\"for\"&lt;&lt;\"fif\"&lt;&lt;\"first\"&lt;&lt;\"sec\"\n      &lt;&lt;\"third\"&lt;&lt;\"for\"&lt;&lt;\"fif\";\n    vec&lt;&lt;\"first\"&lt;&lt;\"sec\"&lt;&lt;\"third\"&lt;&lt;\"for\"&lt;&lt;\"fif\"&lt;&lt;\"first\"&lt;&lt;\"sec\"\n      &lt;&lt;\"third\"&lt;&lt;\"for\"&lt;&lt;\"fif\";\n    for(int i = 0; i&lt;ui-&gt;tableWidget-&gt;rowCount();i++)\n    {\n        for(int j = 0; j&lt;ui-&gt;tableWidget-&gt;columnCount();j++)\n        {\n            if(j == 0)\n            {\n                QWidget* pWidget = new QWidget();\n                QPushButton* btn_edit = new QPushButton();\n                btn_edit-&gt;setText(\"Remove\");\n                QHBoxLayout* pLayout = new QHBoxLayout(pWidget);\n                pLayout-&gt;addWidget(btn_edit);\n                pLayout-&gt;setAlignment(Qt::AlignCenter);\n                pLayout-&gt;setContentsMargins(0, 0, 0, 0);\n                pWidget-&gt;setLayout(pLayout);\n                ui-&gt;tableWidget-&gt;setCellWidget(i, j, pWidget);\n                continue;\n\n            }\n            QTableWidgetItem*item = new QTableWidgetItem(vec[i]);\n            item-&gt;setFlags(item-&gt;flags() ^ Qt::ItemIsEditable);\n            ui-&gt;tableWidget-&gt;setItem(i, j, item);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "constructor", "singly-linked-list"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 4, "creation_date": 1505932122, "post_id": 46329314, "comment_id": 79619558, "body": "I&#39;m voting to close this question as off-topic because it should go to Code Review SE"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1505932197, "post_id": 46329314, "comment_id": 79619599, "body": "Consider a <code>std::initializer_list</code> as formal argument type?"}, {"owner": {"reputation": 3, "user_id": 4033154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p6B7wF7tvk/AAAAAAAAAAI/AAAAAAAAABQ/e_UrspRwUfg/photo.jpg?sz=128", "display_name": "jimm bo", "link": "https://stackoverflow.com/users/4033154/jimm-bo"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1505932793, "post_id": 46329314, "comment_id": 79619924, "body": "@VittorioRomeo i was trying to look for a specific site for c++ but didnt see it"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505933735, "post_id": 46329314, "comment_id": 79620392, "body": "I disagree with the prevailing wisdom that this is a job for Code Review as some of the code in question does not work. @jimmbo <a href=\"https://codereview.stackexchange.com\">Code Review</a> is a companion site for code that works, but you suspect could work (or at least look) better. My problem with this question is it asks too many questions. Reduce this question to getting help with <b>one</b> of your outstanding problems. Ask more questions to resolve other problems as needed. When you have no problems and are looking for help tuning up the code you go to Code Review."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1505934062, "post_id": 46329314, "comment_id": 79620572, "body": "Step 1) Don&#39;t create your own linked list when there already is one, that provides everything you are providing, in the STL, that conforms to standards, and is used by millions of people, unless you are doing so in an academic setting."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1505934537, "post_id": 46329314, "comment_id": 79620831, "body": "@ChristopherPisz technically none of the list classes in the standard library are required to be implemented with a linked list. They just have to have linked list-like behaviour."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1505935057, "post_id": 46329314, "comment_id": 79621106, "body": "@user123435456o54343 Sure, but isn&#39;t that what one is after? unless they are one of those dummies that is going to implement it themselves, because they think they will get better performance then something put together by committees of people which has been reviewed over a decade. And if they are, then they need to do it in an academic setting."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505935683, "post_id": 46329314, "comment_id": 79621423, "body": "I see writing a linked list as a rite of passage for programmers, be it an exercise in school or not. It teaches a number of excellent lessons on pointer use, memory management, visualization and almost certainly debugging. I think it should be learned <i>after</i> the standard library rather than before, but the lessons still need to be learned one way or another."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505935934, "post_id": 46329314, "comment_id": 79621545, "body": "Which rolls back to a comment targeted at @jimmbo . Visualize the list. Draw the sucker. If you want to add N nodes to the list with a particular order of numbers in it, draw your way through it node by node, connection by connection. Take notes on what you had to do and use the notes as the basis for your code. Once you&#39;ve done that, you may notice that if you put the sequence into the list <i>backwards</i>, you&#39;ve already done most of the work in the <code>addFront</code> method."}, {"owner": {"reputation": 3, "user_id": 4033154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p6B7wF7tvk/AAAAAAAAAAI/AAAAAAAAABQ/e_UrspRwUfg/photo.jpg?sz=128", "display_name": "jimm bo", "link": "https://stackoverflow.com/users/4033154/jimm-bo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505951742, "post_id": 46329314, "comment_id": 79627503, "body": "@user4581301 ok good idea! I was thinking it should be somewhat similar tot he addfront function"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505952313, "post_id": 46329314, "comment_id": 79627618, "body": "@jimmbo see the solution in Remy&#39;s answer below because not only is it similar, but you can <i>use</i> the <code>addFront</code> function and save yourself rewriting a bunch of code. Code that doesn&#39;t exist has no bugs. Unless not writing it is the bug, but that&#39;s a different problem. Also worth bringing extra attention to the trick he pulls with the double pointer in the commented out code. Work through the code he put in the comments and understand it. Ask a question about it if you need to. It is a very useful concept that can save you a lot of time and code."}, {"owner": {"reputation": 3, "user_id": 4033154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p6B7wF7tvk/AAAAAAAAAAI/AAAAAAAAABQ/e_UrspRwUfg/photo.jpg?sz=128", "display_name": "jimm bo", "link": "https://stackoverflow.com/users/4033154/jimm-bo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505952753, "post_id": 46329314, "comment_id": 79627730, "body": "@user4581301 thank you! i will look over his code and check it."}, {"owner": {"reputation": 3, "user_id": 4033154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p6B7wF7tvk/AAAAAAAAAAI/AAAAAAAAABQ/e_UrspRwUfg/photo.jpg?sz=128", "display_name": "jimm bo", "link": "https://stackoverflow.com/users/4033154/jimm-bo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1505954987, "post_id": 46329314, "comment_id": 79628191, "body": "@user4581301 so say I wanted to creat a list and use that constructor and print the values with printList, how would I go about doing that. (sorry i am barely learning singly linked lists)"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1505944607, "creation_date": 1505944607, "answer_id": 46332367, "question_id": 46329314, "link": "https://stackoverflow.com/questions/46329314/how-to-initialize-values-of-singly-linked-list-with-constructor/46332367#46332367", "title": "How to initialize values of Singly Linked List with constructor", "body": "<p>Try something more like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\n#include &lt;initializer_list&gt; // C++11 and later only\n\ntemplate &lt;typename E&gt;\nclass SLinkedList {\npublic:\n    SLinkedList();\n    SLinkedList(const E *vals, int num_vals);\n    SLinkedList(std::initializer_list&lt;E&gt; vals); // C++11 and later only\n\n    ~SLinkedList();\n\n    bool empty() const;\n    int size() const;                   \n\n    E&amp; front();\n\n    void addFront(const E &amp;e);\n    void removeFront();\n\n    void printList() const;\n\nprivate:\n    class SNode\n    {\n    public:\n        E elem;\n        SNode *next;\n        SNode(const E &amp;e, SNode *n = NULL);\n    };\n\n    SNode* head;             \n    int n; // number of items\n};\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SNode::SNode(const E &amp;e, SLinkedList&lt;E&gt;::SNode *n)\n    : elem(e), next(n) { }\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SLinkedList()\n    : head(NULL), n(0) { }\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SLinkedList(const E *vals, int num_vals)\n    : head(NULL), n(0)\n{\n    for (int i = num_vals-1; i &gt;= 0; --i)\n        addFront(vals[i]);\n\n    /* alternatively:\n    SNode **ptr = &amp;head;\n    for (int i = 0; i &lt; num_vals; ++i)\n    {\n        *ptr = new SNode(vals[i]);\n        ++n;\n        ptr = &amp;((*ptr)-&gt;next);\n    }\n    */\n}\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SLinkedList(std::initializer_list&lt;E&gt; vals)\n    : head(NULL), n(0)\n{\n    const E *begin = vals.begin(), *iter = vals.end();\n    while (iter != begin)\n        addFront(*(--iter));\n\n    /* alternatively:\n    const E *iter = vals.begin(), *end = vals.end();\n    SNode **ptr = &amp;head;\n    while (iter != end)\n    {        \n        *ptr = new SNode(*iter);\n        ++n;\n        ptr = &amp;((*ptr)-&gt;next);\n    }\n    */\n}\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::~SLinkedList()          \n{\n    while (head)\n        removeFront();\n}\n\ntemplate &lt;typename E&gt;\nbool SLinkedList&lt;E&gt;::empty() const      \n{\n    return (!head);\n}\n\ntemplate &lt;typename E&gt;\nint SLinkedList&lt;E&gt;::size() const\n{\n    return n;\n}\n\ntemplate &lt;typename E&gt;\nE&amp; SLinkedList&lt;E&gt;::front()      \n{\n    if (!head) throw std::length_error(\"empty list\");\n    return head-&gt;elem;\n}\n\ntemplate&lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::printList() const\n{\n    SNode *p = head;\n    while (p)\n    {\n        std::cout &lt;&lt; p-&gt;elem &lt;&lt; \" \";\n        p = p-&gt;next;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::addFront(const E&amp; e)\n{\n    head = new SNode(e, head);\n    ++n;\n}\n\ntemplate &lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::removeFront()\n{\n    SNode* old = head;           \n    if (!old) throw std::length_error(\"empty list\");\n    head = old-&gt;next;           \n    --n;\n    delete old;             \n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/cc3lQQ\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 3, "user_id": 4033154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2p6B7wF7tvk/AAAAAAAAAAI/AAAAAAAAABQ/e_UrspRwUfg/photo.jpg?sz=128", "display_name": "jimm bo", "link": "https://stackoverflow.com/users/4033154/jimm-bo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 0, "closed_date": 1505944829, "accepted_answer_id": 46332367, "answer_count": 1, "score": 0, "last_activity_date": 1505944607, "creation_date": 1505932097, "question_id": 46329314, "link": "https://stackoverflow.com/questions/46329314/how-to-initialize-values-of-singly-linked-list-with-constructor", "closed_reason": "Not suitable for this site", "title": "How to initialize values of Singly Linked List with constructor", "body": "<p>I have to create a constructor that allows a new linked list to be populated with ten consecutive values, starting at 0. Then I need to print the list! So i want to check if the functions I wrote for those are ok. Thanks!! </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\n\nusing namespace std;\n\ntemplate &lt;typename E&gt; class SLinkedList;    // forward declaration to be used when declaring SNode\n\ntemplate &lt;typename E&gt;\nclass SNode {                   \nprivate:\n    E elem;                 \n    SNode&lt;E&gt; *next;             \n    friend class SLinkedList&lt;E&gt;;        \n};\n\ntemplate &lt;typename E&gt;\nclass SLinkedList {             \npublic:\n    SLinkedList();              \n    SLinkedList(SNode&lt;E&gt;* v);   //What I need help with\n    ~SLinkedList();             \n    bool empty() const;         \n    E&amp; front();                 \n    void printList(SLinkedList&lt;E&gt; &amp;list); //what i need help with\n    void addFront(const E&amp; e);      \n    void removeFront();         \n    int size() const;                   \nprivate:\n    SNode&lt;E&gt;* head;             \n    int     n;                          // number of items\n};\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SLinkedList()           // constructor\n    : head(NULL), n(0) { }\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::SLinkedList(SNode&lt;E&gt;* v){ //WHat I  Need Help With\n    SNode&lt;E&gt;* v = new SNode&lt;E&gt;;\n    for (int i = 0; i &lt; 10; i++)\n        v-&gt;elem = i;\n}\n\ntemplate &lt;typename E&gt;\nbool SLinkedList&lt;E&gt;::empty() const      \n{\n    return head == NULL; // can also use return (n == 0);\n}\n\n\n\ntemplate &lt;typename E&gt;\nE&amp; SLinkedList&lt;E&gt;::front()      \n{\n    if (empty()) throw length_error(\"empty list\");\n    return head-&gt;elem;\n}\n\ntemplate &lt;typename E&gt;\nSLinkedList&lt;E&gt;::~SLinkedList()          \n{\n    while (!empty()) removeFront();\n}\n\ntemplate&lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::printList(SLinkedList&lt;E&gt; &amp;list) //What I need help with\n{\n    for (int i = 0; i &lt; list.size(); i++)\n    {\n        cout &lt;&lt; list &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n\ntemplate &lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::addFront(const E&amp; e) { \n    SNode&lt;E&gt;* v = new SNode&lt;E&gt;;     // create new node\n    v-&gt;elem = e;                // store data\n    v-&gt;next = head;             // head now follows v\n    head = v;               // v is now the head\n    n++;\n}\n\ntemplate &lt;typename E&gt;\nvoid SLinkedList&lt;E&gt;::removeFront() {        \n    if (empty()) throw length_error(\"empty list\");\n    SNode&lt;E&gt;* old = head;           \n    head = old-&gt;next;           \n    delete old;             \n    n--;\n}\n\ntemplate &lt;typename E&gt;\nint SLinkedList&lt;E&gt;::size() const {              \n    return n;\n}\n</code></pre>\n\n<p>thanks in advance for any help or suggestions! It is just these two functions that i am not sure about.</p>\n"}, {"tags": ["c++", "if-statement", "switch-statement", "case"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1505930051, "post_id": 46328765, "comment_id": 79618451, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1505930152, "post_id": 46328765, "comment_id": 79618502, "body": "I don&#39;t see a <code>return next_coin_value;</code> in <code>next_coin()</code>"}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505930547, "post_id": 46328765, "comment_id": 79618707, "body": "@JohnnyMopp should I put a return in each case or just for the hole block?"}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505930974, "post_id": 46328765, "comment_id": 79618910, "body": "@JohnnyMopp same thing, both ways."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505931285, "post_id": 46328765, "comment_id": 79619082, "body": "That was just one of your issues. Look at <code>if (coins_used &gt; 0) {..} else {...}</code>. What happens when this is true, but <code>remainder</code> is not 0?"}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1505931474, "post_id": 46328765, "comment_id": 79619187, "body": "That is the real problem, I have to add another else the leads to next_coin_value."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505931563, "post_id": 46328765, "comment_id": 79619236, "body": "@JohnnyMopp it should be this peace &#39;else { next_coin_value = next_coin(coin_value); calculate_change(remainder,next_coin_value); }&#39; , but it is not really working."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505931891, "post_id": 46328765, "comment_id": 79619429, "body": "There should be no <code>else</code>. The part about printing the value has nothing to do with the rest of the function."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1505933322, "post_id": 46328765, "comment_id": 79620187, "body": "Solved it by substituting coin_value for another variable and puting the remainder declaration out of the while statement. All done."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1505933368, "post_id": 46328765, "comment_id": 79620197, "body": "<code>int value; \tvalue = 100;  \t     calculate_change(change_needed,value);</code>"}], "owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505930453, "creation_date": 1505929994, "last_edit_date": 1505930453, "question_id": 46328765, "link": "https://stackoverflow.com/questions/46328765/how-to-skip-to-next-case-instead-of-ending-change-calculation-program", "title": "How to skip to next case instead of ending change calculation program?", "body": "<p>I am constructing a recursion example for calculating change. Although I am compilling correctly, after calculation of how many pound coins (100 pences), the program ends instead of skipping to 50's coins. There seems to be missing something from the if statement that says how many coins used for the first step. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"change.h\"\nusing namespace std;\n\n//\nmain()\n{\n   int coin_value;\n   coin_value = 100; \n   int change_needed;\n   cout &lt;&lt; \"Please enter change needed in pence : \";\n   cin &gt;&gt; change_needed;\n   calculate_change(change_needed,coin_value);\n}\n\nvoid calculate_change ( int change_needed, int coin_value)\n{\n   int coins_used = 0;\n   int remainder;\n   int next_coin_value;\n   while ( change_needed &gt;= coin_value ) {\n      change_needed -= coin_value;\n      coins_used++;\n      remainder = change_needed;\n   }\n   if ( coins_used &gt; 0 )\n      cout &lt;&lt; \"Coin value \" &lt;&lt; coin_value &lt;&lt; \" number of coins \"&lt;&lt; coins_used &lt;&lt; \"\\n\";\n   else {\n\n      if (remainder == 0)\n         return;\n      else {\n         next_coin_value = next_coin(coin_value);\n         calculate_change(remainder,next_coin_value);\n      }\n   }\n}\n\nint next_coin (int coin_value)\n{\n   int next_coin_value;\n\n   switch ( coin_value ) {\n      case 100 : next_coin_value = 50;\n                 break;\n      case 50 : next_coin_value = 20;\n                break;\n      case 20 : next_coin_value = 10;\n                break;\n      case 10 : next_coin_value = 5;\n                break;\n      case 5 : next_coin_value = 2;\n               break;\n      case 2 : next_coin_value = 1;\n               break;\n      case 1 : next_coin_value = 0;\n               break;\n      default : cout &lt;&lt; \"unknown coin value\" &lt;&lt; coin_value &lt;&lt; \"\\n\";\n\n   }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qtquick2"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1505941296, "post_id": 46328429, "comment_id": 79624158, "body": "The <a href=\"/help/mcve\">MCVE</a> is still missing. It would include a complete QML file, so that the whole setup actually reproduces the problem."}, {"owner": {"reputation": 578, "user_id": 4986475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618a99046cf31323a7058d327f8aed3?s=128&d=identicon&r=PG&f=1", "display_name": "Macias", "link": "https://stackoverflow.com/users/4986475/macias"}, "reply_to_user": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1506009719, "post_id": 46328429, "comment_id": 79657187, "body": "@derM Check EDIT2"}], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 4986475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618a99046cf31323a7058d327f8aed3?s=128&d=identicon&r=PG&f=1", "display_name": "Macias", "link": "https://stackoverflow.com/users/4986475/macias"}, "edited": false, "score": 0, "creation_date": 1505931758, "post_id": 46328821, "comment_id": 79619339, "body": "Sorry, but I said it too early. <code>isComponentComplete()</code> actually returns true, after calling <code>QQuickItem::componentComplete()</code>  but <code>width</code> and <code>height</code> are still 0"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1505932641, "post_id": 46328821, "comment_id": 79619850, "body": "Maybe <code>Component.onCompleted</code> might be emitted in <code>QQuickItem::componentComplete()</code>? So if you follow the documentation and call the base class method first, the signal will be emitted before you have the dimensions. Try to move <code>QQuickItem::componentComplete()</code> to the end of the function despite what the documentation tells you, and see if nothing crashes :S"}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 578, "user_id": 4986475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618a99046cf31323a7058d327f8aed3?s=128&d=identicon&r=PG&f=1", "display_name": "Macias", "link": "https://stackoverflow.com/users/4986475/macias"}, "edited": false, "score": 1, "creation_date": 1505933747, "post_id": 46328821, "comment_id": 79620397, "body": "@Macias: a minimal complete example would help in answering your question."}, {"owner": {"reputation": 578, "user_id": 4986475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618a99046cf31323a7058d327f8aed3?s=128&d=identicon&r=PG&f=1", "display_name": "Macias", "link": "https://stackoverflow.com/users/4986475/macias"}, "edited": false, "score": 0, "creation_date": 1505935584, "post_id": 46328821, "comment_id": 79621376, "body": "@Mitch I&#39;ve edited my question and actually you gives the correct answer, but It was not exacly what I meant :f"}], "tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1505932330, "last_edit_date": 1505932330, "creation_date": 1505930222, "answer_id": 46328821, "question_id": 46328429, "link": "https://stackoverflow.com/questions/46328429/how-to-find-out-when-the-qquickitem-derived-class-object-is-initialized/46328821#46328821", "title": "How to find out when the QQuickItem-derived class object is initialized?", "body": "<p><a href=\"http://code.qt.io/cgit/qt/qtquickcontrols2.git/tree/src/quicktemplates2/qquickcontrol.cpp#n1288\" rel=\"nofollow noreferrer\">Qt code</a> uses <a href=\"http://doc.qt.io/qt-5/qquickitem.html#componentComplete\" rel=\"nofollow noreferrer\"><code>componentComplete()</code></a> like so:</p>\n\n<pre><code>void QQuickControl::componentComplete()\n{\n    Q_D(QQuickControl);\n    QQuickItem::componentComplete();\n    d-&gt;resizeContent();\n    // ...\n}\n</code></pre>\n\n<p>You can do something similar, replacing <code>resizeContent()</code> with your function that works on the <code>width</code> and <code>height</code>. Assuming that function is also called whenever <code>source</code> changes, you'd need the <code>isComponentComplete()</code> check. With this approach, you shouldn't have any issues.</p>\n"}, {"comments": [{"owner": {"reputation": 544, "user_id": 5405069, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/872170dced53d779e1b7909a1a9309dd?s=128&d=identicon&r=PG&f=1", "display_name": "senx", "link": "https://stackoverflow.com/users/5405069/senx"}, "edited": false, "score": 0, "creation_date": 1531592364, "post_id": 50773273, "comment_id": 89657749, "body": "You will not be able to inherit from both QQuickItem and QQmlParserStatus because QQuickItem itself inherits from QQmlParserStatus"}, {"owner": {"reputation": 1, "user_id": 9917761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef3fa577aeafd850cf81ff5d6e29225?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Larsson", "link": "https://stackoverflow.com/users/9917761/erik-larsson"}, "reply_to_user": {"reputation": 544, "user_id": 5405069, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/872170dced53d779e1b7909a1a9309dd?s=128&d=identicon&r=PG&f=1", "display_name": "senx", "link": "https://stackoverflow.com/users/5405069/senx"}, "edited": false, "score": 0, "creation_date": 1533898855, "post_id": 50773273, "comment_id": 90526993, "body": "Yeah, right! But then skip inheter QQmlParserStatus and just override classBegin() and componentComplete()."}], "tags": [], "owner": {"reputation": 1, "user_id": 9917761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef3fa577aeafd850cf81ff5d6e29225?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Larsson", "link": "https://stackoverflow.com/users/9917761/erik-larsson"}, "is_accepted": false, "score": -1, "last_activity_date": 1528539991, "creation_date": 1528539991, "answer_id": 50773273, "question_id": 46328429, "link": "https://stackoverflow.com/questions/46328429/how-to-find-out-when-the-qquickitem-derived-class-object-is-initialized/50773273#50773273", "title": "How to find out when the QQuickItem-derived class object is initialized?", "body": "<p>You can inherit <a href=\"http://doc.qt.io/qt-5/qqmlparserstatus.html\" rel=\"nofollow noreferrer\">QQmlParserStatus</a> and implement componentComplete().</p>\n\n<pre><code>class MyQQuickItem : public QQuickItem, public QQmlParserStatus\n{\n    Q_OBJECT\n    Q_PROPERTY(QUrl source MEMBER m_source NOTIFY sourceChanged)\n\npublic:\n    explicit MyQQuickItem(QQuickItem *a_parent = Q_NULLPTR);\n    ~PDFPage();\n\n    void classBegin();\n    void componentComplete();\n\nsignals:\n    void sourceChanged(const QUrl a_source);\n\nprivate:\n    QUrl m_source;\n};\n</code></pre>\n\n<p>componentComplete() will be called automatically by the QML-engine.</p>\n"}], "owner": {"reputation": 578, "user_id": 4986475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618a99046cf31323a7058d327f8aed3?s=128&d=identicon&r=PG&f=1", "display_name": "Macias", "link": "https://stackoverflow.com/users/4986475/macias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 46328821, "answer_count": 2, "score": 1, "last_activity_date": 1528539991, "creation_date": 1505928847, "last_edit_date": 1506010198, "question_id": 46328429, "link": "https://stackoverflow.com/questions/46328429/how-to-find-out-when-the-qquickitem-derived-class-object-is-initialized", "title": "How to find out when the QQuickItem-derived class object is initialized?", "body": "<p>I've got class that inherits from <code>QQuickItem</code> and inside I'm operating on its <code>width</code> <code>height</code> properties. I'm also exposing my own properties.</p>\n\n<pre><code>class MyQQuickItem : public QQuickItem\n{\n    Q_OBJECT\n    Q_PROPERTY(QUrl source MEMBER m_source NOTIFY sourceChanged)\n\n    public:\n    explicit MyQQuickItem(QQuickItem *a_parent = Q_NULLPTR);\n     ~PDFPage();\n\n    signals:\n    void sourceChanged(const QUrl a_source);\n\n    private:\n    QUrl m_source;\n};\n</code></pre>\n\n<p>In qml:</p>\n\n<pre><code>...\nMyQQuickItem\n{\n    width: parent.width / 2\n    height: parent.height\n    source: \"someSource\"\n    Component.onCompleted\n    {\n        console.log(\"component onCompleted\");\n    }\n}\n</code></pre>\n\n<p>When <code>sourceChanged</code> is emmited I'm working on <code>width</code> <code>height</code> properties, but with the first emit they are not initialized yet, and <code>Component.onCompleted</code> is called after my NOTIFY signal.</p>\n\n<p>I can check if component is ready before getting <code>width</code> and <code>height</code> by calling <a href=\"http://doc.qt.io/qt-5/qquickitem.html#isComponentComplete\" rel=\"nofollow noreferrer\">isComponentComplete</a> and execute my code when it is, but I can't find out when it happens and the initial value of <code>source</code> is skipped when it is not.</p>\n\n<p>Of course I could create slot <code>'itemReady'</code> and call it from <code>Component.onCompleted</code>, but I have many QMLs using my class and I will create more in the future, so I don't want to make copy-paste job. </p>\n\n<p>I also do not want to set the source in <code>Component.onCompleted</code>.</p>\n\n<p>Connecting to <code>widthChanged</code>, and <code>heightChanged</code> signals isn't also good idea, because I'm resizing my item very frequently, and I don't want to execute my code then.\n<br/><br/></p>\n\n<p>Is there any way to get <code>completed</code> signal from C++?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I did as @Mitch said - overriten <a href=\"http://doc.qt.io/qt-5/qquickitem.html#componentComplete\" rel=\"nofollow noreferrer\">componentComplete</a> method and inside, called it's base class equavilent. <code>isComponentComplete()</code> returns true, but I'm still getting 0 from <code>width()</code> and <code>height()</code> methods:</p>\n\n<pre><code>void MyQQuickItem::componentComplete()\n{\n    QQuickItem::componentComplete();\n    if(isComponentComplete())\n    {\n        qDebug() &lt;&lt; \"c++: oncompleted, width,height: \" &lt;&lt; width() &lt;&lt; height(); //gives 0,0\n    }\n\n}\n</code></pre>\n\n<p>Actually I figured out that <code>Component.onCompleted</code> in QML prints 0's too:</p>\n\n<pre><code>...\nMyQQuickItem\n{\n    width: parent.width / 2\n    height: parent.height\n    source: \"someSource\"\n    Component.onCompleted\n    {\n        console.log(\"component onCompleted width, height: \", width, height); //it gives 0 too\n    }\n}\n</code></pre>\n\n<p>@derM <code>Component.onCompleted</code> is not emmited by <code>QQuickItem::componentComplete()</code> directly, because it prints its log after the qDebug in c++ above.</p>\n\n<p>So, although it is ready, properties are not initialized.\n<br/><br/></p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>Finally I've solved it. The <a href=\"http://doc.qt.io/qt-5/qml-qtquick-window-window.html\" rel=\"nofollow noreferrer\">Window</a> was guilty, because it uses <code>contentItem</code> as the parent of his childrens, and in MyQQuickItem <code>Component.onCompleted</code> <code>width</code> and <code>height</code> of <code>contentItem</code>(his parent) are 0.</p>\n\n<p>When I do so:</p>\n\n<pre><code>Window\n{\n    id: wnd\n    width: 640\n    height: 480\n    Component.onCompleted:\n    {\n        console.log(\"Window completed: \", this, width, height);\n        console.log(\"windowContentItem: \", contentItem, width, height);\n    }\n\n    MyQQuickItem\n    {\n        width: parent.width\n        height: parent.height\n        Component.onCompleted:\n        {\n            console.log(\"MyQQuickItem completed: \", this, width, height);\n            console.log(\"MyQQuickItem parent: \", parent, parent.width, parent.height);\n        }\n    }\n}\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>qml: Window completed:  QQuickWindowQmlImpl(0x345b5eb4d0) 640 480\nqml: windowContentItem:  QQuickRootItem(0x345e2cdec0) 640 480\nqml: MyQQuickItem completed:  MyQQuickItem(0x345b5b99e0) 0 0\nqml: MyQQuickItem parent:  QQuickRootItem(0x345e2cdec0) 0 0\n</code></pre>\n\n<p>So <code>MyQQuickItem</code> <code>parent</code> is <code>Window</code>'s <code>contentItem</code>. When I replace </p>\n\n<pre><code>width: parent.width\nheight: parent.height\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>width: wnd.width\nheight: wnd.height\n</code></pre>\n\n<p>It works perfectly, and in my <code>void MyQQuickItem::componentComplete()</code> I've got <code>width</code> and <code>height</code> initialized as expected.</p>\n\n<p>One thing that I do not understand is why in <code>Window</code> <code>onCompleted</code>, <code>contentItem</code> size is correct, but in <code>MyQQuickItem</code> <code>onCompleted</code> the size is 0,0. If anyone could explain it to me, I would be grateful :P</p>\n"}, {"tags": ["c++", "cmake", "clion"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 8446104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a714a1427235056bf376c6636de5d906?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duvilanski", "link": "https://stackoverflow.com/users/8446104/daniel-duvilanski"}, "is_accepted": true, "score": 3, "last_activity_date": 1505929639, "creation_date": 1505929639, "answer_id": 46328665, "question_id": 46328422, "link": "https://stackoverflow.com/questions/46328422/c-ostream-operator-overload-odd-undefined-reference-when-building/46328665#46328665", "title": "C++ Ostream Operator Overload - odd undefined reference when building", "body": "<p>The problem is that you defined <code>ostream &amp;operator&lt;&lt;(ostream&amp; out, ComplexNumber&amp; num)</code> inside the class. This doesn't make much sense to the compiler because it knows to override the <code>operator&lt;&lt;</code> when it gets an ostream object and a class of some type,\nbut the way you implemented it, it gets the ostream, a ComplexNumber, and another ComplexNumber as the 'this' reference.</p>\n\n<p>In order to correctly overload a binary operator you have two options:</p>\n\n<p>Define the operator inside the class, and give it only the ostream as parameter</p>\n\n<pre><code>class ComplexNumber \n{\n    ...\n    ostream &amp;operator&lt;&lt;(ostream&amp; out) const;\n};\n</code></pre>\n\n<p>Or define the operator outside the class and give it both the parameters:</p>\n\n<pre><code>class ComplexNumber \n{\n    ...\n};\n\nostream &amp;operator&lt;&lt;(ostream&amp; out, const ComplexNumber&amp; num);\n</code></pre>\n\n<p>Note that in the second implementation, you need to add the function as a friend of the class if you want to access any private members.</p>\n\n<p>Also note, that it's a good idea to use const here like I put in the examples, otherwise you won't be able to use the operator on const ComplexNumbers.</p>\n"}], "owner": {"reputation": 93, "user_id": 5889036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-tf0y49h1ABk/AAAAAAAAAAI/AAAAAAAAABY/1Wi_dHOMwEs/photo.jpg?sz=128", "display_name": "Jonathan McDevitt", "link": "https://stackoverflow.com/users/5889036/jonathan-mcdevitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 46328665, "answer_count": 1, "score": -2, "last_activity_date": 1505929639, "creation_date": 1505928829, "question_id": 46328422, "link": "https://stackoverflow.com/questions/46328422/c-ostream-operator-overload-odd-undefined-reference-when-building", "title": "C++ Ostream Operator Overload - odd undefined reference when building", "body": "<p>I'm doing a tutorial on C++ to really dig into the nitty-gritty of it, because frankly it's an awesome and powerful language. I'm still fairly new at it though, and I'm having issues with my operator overloading for the ostream operator.</p>\n\n<p>Since this is a tutorial I'm trying to keep my code as organized and modular as possible to avoid confusion. There are 3 layers to my code:</p>\n\n<ul>\n<li><strong>main.cpp</strong> - runs the Exercises.</li>\n<li><strong>Exercises.cpp/Exercises.h</strong> - contains static functions for the exercises.</li>\n<li><strong>ComplexNumber.cpp/ComplexNumber.h</strong> - represents a complex number object in line with the tutorial.</li>\n</ul>\n\n<p>Main is fairly simple: set of calls to Exercises::ExerciseName().</p>\n\n<p>Exercises.cpp:</p>\n\n<pre><code>#include \"Exercises.h\"\nvoid Exercises::ComplexNumberClass() {\n    ComplexNumber c;    /** Runs the blank constructor  */\n    ComplexNumber c1(2, 3); /** Runs the args-filled constructor    */\n    ComplexNumber c2 = c1;  /** Runs the copy constructor   */\n\n    c = c2;\n\n    cout &lt;&lt; c1 &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The header file only has the header for that function as a public static void function, i.e. callable and executable. The ComplexNumber files are where I think the problem is (please correct me if I'm wrong):</p>\n\n<p>ComplexNumber.cpp (without constructors and accessors):</p>\n\n<pre><code>#include \"ComplexNumber.h\"\n\nusing namespace ComplexNumbers;\nusing namespace std;\n\nostream&amp; operator&lt;&lt; (ostream&amp; out, ComplexNumber&amp; num){\n    out &lt;&lt; \"(\" &lt;&lt; num.GetReal() &lt;&lt; \", \" &lt;&lt; num.GetImaginary() &lt;&lt; \")\";\n    return out;\n}\n\nconst ComplexNumber &amp;ComplexNumber::operator=(const ComplexNumber &amp;num) {\n    cout &lt;&lt; \"Using assignment operator override\" &lt;&lt; endl;\n\n    real = num.real;\n    imaginary = num.imaginary;\n\n    return *this;\n}\n</code></pre>\n\n<p>ComplexNumber.h:</p>\n\n<pre><code>#ifndef OPERATOROVERLOADING_COMPLEXNUMBER_H\n#define OPERATOROVERLOADING_COMPLEXNUMBER_H\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nnamespace ComplexNumbers {\n    class ComplexNumber {\n    private:\n        double real;\n        double imaginary;\n\n    public:\n        ComplexNumber();\n\n        ComplexNumber(double real, double imaginary);\n\n        ComplexNumber(const ComplexNumber &amp;num);\n\n        const ComplexNumber &amp;operator=(const ComplexNumber &amp;num);\n\n        double GetReal() const {\n            return real;\n        }\n\n        double GetImaginary() const {\n            return imaginary;\n        }\n    };\n\n    ostream &amp;operator&lt;&lt;(ostream&amp; out, ComplexNumber&amp; num);\n}\n\n#endif //OPERATOROVERLOADING_COMPLEXNUMBER_H\n</code></pre>\n\n<p>When I build this, it's telling me that I have an \"undefined reference to 'cave_of_programming::operator&lt;&lt;(std::ostream&amp;, cave_of_programming::ComplexNumber&amp;)'. The method headers match, and I'm building with Jetbrains CLion.</p>\n\n<p>My research suggests that the problem is in the linker, but I've looked at my CMakeLists.txt and found that it is linking up all of the appropriate files.</p>\n\n<pre><code>SOURCE_FILES main.cpp Exercises.cpp Exercises.h ComplexNumbers/ComplexNumber.cpp ComplexNumbers/ComplexNumber.h\n</code></pre>\n\n<p>Does anybody have an idea as to why this isn't working? What am I missing?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1505928807, "post_id": 46328363, "comment_id": 79617759, "body": "Typically a +1 is for a NUL terminator for the string, but the sizeof() part strikes me as strange honestly.  Max int on 32-bit system is in single digit billions - so 10 digits.  For 64-bits, 2^64, log 10 is 20 digits.  Even octal, base 8, is going to be smaller than that size of.  Hence, strange."}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1505928840, "post_id": 46328363, "comment_id": 79617778, "body": "I got it from here <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.2.0/com.ibm.zos.v2r2.bpxbd00/itoa.htm\" rel=\"nofollow noreferrer\">ibm.com/support/knowledgecenter/en/SSLTBW_2.2.0/&hellip;</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1505928919, "post_id": 46328363, "comment_id": 79617832, "body": "I can think of reasoning for <code>char buffer [sizeof(int)*3.4+3];</code>, but not <code>*8</code>."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 6022279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267a52d972f5018320963cd6663601c5?s=128&d=identicon&r=PG&f=1", "display_name": "N&#249;m&#233;nor", "link": "https://stackoverflow.com/users/6022279/n%c3%b9m%c3%a9nor"}, "is_accepted": false, "score": -2, "last_activity_date": 1505928778, "creation_date": 1505928778, "answer_id": 46328405, "question_id": 46328363, "link": "https://stackoverflow.com/questions/46328363/using-itoa-with-an-integer-setting-limits-of-a-buffer/46328405#46328405", "title": "using itoa with an integer . Setting limits of a buffer", "body": "<p>This is C-style strings. Those strings are null-terminated. For instance the string \"Hello\" will contain the characters 'H', 'e', 'l', 'l', 'o' and '\\0'.</p>\n\n<p>The +1 is for the null character '\\0'.</p>\n"}, {"comments": [{"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1505929054, "post_id": 46328475, "comment_id": 79617906, "body": "Thanks for clearing this up on a side note will the above example also work for converting int32_t ? Will this suffice <code>sizeof(int32_t)*8+1</code> ?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1505929058, "post_id": 46328475, "comment_id": 79617908, "body": "Ok, safety for binary numbers makes sense.  The example used octal, but if they wanted to switch to binary, then nice no changes needed, no phantom buffer overruns."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 1, "creation_date": 1505929156, "post_id": 46328475, "comment_id": 79617974, "body": "@Rajeshwar Yes.  Ideally you should use <code>char buffer [sizeof(some_type)*CHAR_BIT+1];</code> to be completely safe."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1505929276, "post_id": 46328475, "comment_id": 79618035, "body": "@MichaelDorgan Yeah, even though the author didn&#39;t use binary using the value they did guarantees it will work in case they ever do."}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1505929468, "post_id": 46328475, "comment_id": 79618151, "body": "When i try this example out I am getting the error &quot;Use of undeclared identifier DECIMAL&quot; does DECIMAL need a specific header ? can I use std::dec instead ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 1, "creation_date": 1505929778, "post_id": 46328475, "comment_id": 79618296, "body": "@Rajeshwar I&#39;m not 100% sure.  <code>itoa</code> takes a integer for the last parameter so most likely in the example there is a <code>define DECIMAL 10</code> some where in the headers.  You can just replace the text with the value to get it to compile."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505937411, "post_id": 46328475, "comment_id": 79622331, "body": "From <a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow noreferrer\">cplusplus</a>, the last parameter is the &quot;<i>Numerical base used to represent the value as a string, between 2 and 36, where 10 means decimal base, 16 hexadecimal, 8 octal, and 2 binary</i>&quot;."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1505928981, "creation_date": 1505928981, "answer_id": 46328475, "question_id": 46328363, "link": "https://stackoverflow.com/questions/46328363/using-itoa-with-an-integer-setting-limits-of-a-buffer/46328475#46328475", "title": "using itoa with an integer . Setting limits of a buffer", "body": "<p>If you have an <code>int</code> then the number of binary digits it has is <code>sizeof(int) * CHAR_BIT</code>.  Since generally <code>CHAR_BIT</code> is 8 and as long as it is then <code>char buffer [sizeof(int)*8+1];</code> will make a bufffer that can store ever binary digit and the terminating null character you need for a valid c-string.</p>\n"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 46328475, "answer_count": 2, "score": 1, "last_activity_date": 1505929058, "creation_date": 1505928637, "last_edit_date": 1505929058, "question_id": 46328363, "link": "https://stackoverflow.com/questions/46328363/using-itoa-with-an-integer-setting-limits-of-a-buffer", "title": "using itoa with an integer . Setting limits of a buffer", "body": "<p>I was going over this example using <code>itoa</code> and wanted to know more about the statement</p>\n\n<pre><code>char buffer [sizeof(int)*8+1];\n</code></pre>\n\n<p>why did the author do <code>[sizeof(int)*8+1]</code>?  I understand <code>sizeof(int)</code> but why did the author do <code>*8+1</code>?</p>\n\n<p>This is the code</p>\n\n<pre><code>#define _OPEN_SYS_ITOA_EXT\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main ()\n{\n   int i;\n   char buffer [sizeof(int)*8+1];\n   printf (\"Enter a number: \");\n   if (scanf (\"%d\",&amp;i) == 1) {\n      itoa (i,buffer,DECIMAL);\n      printf (\"decimal: %s\\n\",buffer);\n      itoa (i,buffer,HEX);\n      printf (\"hexadecimal: %s\\n\",buffer);\n      itoa (i,buffer,OCTAL);\n      printf (\"octal: %s\\n\",buffer);\n   }\n   return 0;\n}\n</code></pre>\n\n<p>I got this example from <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.2.0/com.ibm.zos.v2r2.bpxbd00/itoa.htm\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["c++", "pointers", "winapi", "return"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1505928558, "post_id": 46328311, "comment_id": 79617604, "body": "This constructor <code>std::wstring group(buf);</code> copies the characters pointed to by <code>buf</code> into the newly created <code>group</code>.  <code>buf</code> can now be safely freed."}, {"owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "edited": false, "score": 0, "creation_date": 1505928704, "post_id": 46328311, "comment_id": 79617700, "body": "I&#39;ve never used this API before, but at a quick glance this looks correct to me. Just keep in mind that the constructor you&#39;re using of <code>wstring</code> assumes that <code>buf</code> is a null-terminated string. If <code>buf</code> is not null-terminated, then you may need to provide the size as a constructor argument. Otherwise this looks correct!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "edited": false, "score": 0, "creation_date": 1505928808, "post_id": 46328311, "comment_id": 79617760, "body": "@Bitwize: since <code>NetGetJoinInformation()</code> dynamically allocates an output string and does not return how much memory was actually allocated for it, the string HAS to be null-terminated otherwise the caller could never use it safely."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505930241, "post_id": 46328311, "comment_id": 79618552, "body": "why not direct return <code>buf</code> as is ? an better of course return it via parameter <code>PWSTR*</code> and function itself return error code"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505938293, "post_id": 46328311, "comment_id": 79622783, "body": "@RbMm: returning <code>buf</code> directly to the caller would require the caller to take ownership of the memory and call <code>NetApiBufferFree()</code> when done using it. And that is assuming the caller even knows that <code>GetNetStatus()</code> internally uses an API that returns a pointer that needs to be freed using <code>NetApiBufferFree()</code> and not <code>free()</code> or <code>delete[]</code> or <code>LocalFree()</code> or anything like that.  Returning a <code>std::wstring</code> is safer, and more C++-ish anyway."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505938902, "post_id": 46328311, "comment_id": 79623101, "body": "@RemyLebeau - if caller call some function - it must know what this function do, how need free resources allocated inside this function. this will be the same agreement like for <code>NetGetJoinInformation</code> - need call <code>NetApiBufferFree</code> for free buffer. this already question of style. but i never can understand for what need allocate additional buffer, copy data to it and free initial. and <code>std::wstring</code> also use some free routine. what be if we call this function from another module, which bind to another crt ? are this like call <i>new</i> in one module and <i>delete</i> from another"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505940106, "post_id": 46328311, "comment_id": 79623623, "body": "@RbMm: &quot;<i>if caller call some function - it must know what this function do</i>&quot; - no, it only needs to know what the input is and what the output is, not what the function does internally. &quot;<i>how need free resources allocated inside this function</i>&quot; - only resources that are returned to the caller. &quot;<i>but i never can understand for what need allocate additional buffer, copy data to it and free initial</i>&quot; - it makes the data safer to work with, and hides details about the internal API, in case it has to be changed at a later time without changing the function&#39;s interface."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1505940107, "post_id": 46328311, "comment_id": 79623624, "body": "<code>NetGetJoinInformation</code> has C-interface. If you don&#39;t want to do the copy, then return some other smart pointer. <code>std::unique_ptr</code> for example."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505940110, "post_id": 46328311, "comment_id": 79623625, "body": "@RbMm: &quot;<i>what be if we call this function from another module, which bind to another crt ?</i>&quot; - you can&#39;t safely pass class objects across module boundaries, for exactly that reason."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505940816, "post_id": 46328311, "comment_id": 79623936, "body": "@RemyLebeau - in <code>NetGetJoinInformation</code> description said that need use  <code>NetApiBufferFree</code> for free buffer. so exactly this note need and for <code>GetNetStatus</code>. this i mean. and this work across different modules, unlike <code>std::wstring</code>. as result i think that use <code>NetApiBufferFree</code> as free routine and not do additional allocation and copy much more better compare <code>wstring</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505941500, "post_id": 46328311, "comment_id": 79624244, "body": "@RbMm: If <code>GetNetStatus()</code> doesn&#39;t return <code>LPWSTR</code>, the caller of <code>GetNetStatus()</code> doesn&#39;t need to know that <code>NetGetJoinInformation()</code> is used. Suppose someday <code>GetNetStatus()</code> wants to use a different API that fills a pre-allocated <code>WCHAR[]</code> buffer. If <code>GetNetStatus()</code> returned <code>LPWSTR</code>, it would have to allocate a local buffer with <code>NetApiBufferAllocate()</code> to not break older callers, defeating any benefit that the newer API might offer. Using <code>std::wstring</code>, <code>GetNetStatus()</code> can use whatever API it wants, change over time, and the details are hidden from callers. This is &quot;better&quot; API design."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505941575, "post_id": 46328311, "comment_id": 79624273, "body": "@RbMm: And you are arguing that <code>GetNetStatus()</code> can be called over module boundaries to begin with, which is not likely to happen given the OP&#39;s original code.  If you want to write code that follows C semantics instead of C++ semantics, go right ahead.  Most C++ developers actually want to write C++ code."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505941963, "post_id": 46328311, "comment_id": 79624453, "body": "@RemyLebeau - not view any problem for call <code>NetApiBufferAllocate</code> for allocate memory direct if need. this is anyway better than call some crt allocator (because exists different crts, and different modules can use different, when <code>NetApiBufferAllocate</code> only one). and how i say at begin - this is personal choice and style - what to use"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505945892, "post_id": 46328311, "comment_id": 79625943, "body": "@RbMm: <i>Assume</i> a newer API is added in the future, and <code>GetNetStatus()</code> wants to use it.  Returning <code>std::wstring</code> could look like this: <code>std::wstring GetNetStatus() { WCHAR buf[MAX_SIZE]; DWORD size; CHECK_OS_ERROR(::NetGetJoinInformation2(nullptr, buf, MAX_SIZE, &amp;size, &amp;bufType) == NERR_Success); return std::wstring(buf, size); }</code> This change in API doesn&#39;t break any existing callers who only knew about <code>std::wstring</code> and nothing about <code>NetGetJoinInformation()</code> or <code>NetApiBufferFree()</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505945912, "post_id": 46328311, "comment_id": 79625951, "body": "@RbMm: If <code>GetNetStatus()</code> returned <code>LPWSTR</code>, changing the API would require logic like this to maintain backwards compatibility with callers who call <code>NetApiBufferFree()</code> directly: <code>LPWSTR GetNetStatus() { LPWSTR buf; DWORD size; NET_API_STATUS err = NetApiBufferAllocate((MAX_SIZE+1)*sizeof(WCHAR), (void**)&amp;buf); CHECK_OS_ERROR(err == NERR_Success); err = ::NetGetJoinInformation2(nullptr, buf, MAX_SIZE, &amp;size, &amp;bufType); if (err != NERR_Success) { ::NetApiBufferFree(buf); CHECK_OS_ERROR(false); } buf[size] = 0; return buf; }</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1505945918, "post_id": 46328311, "comment_id": 79625954, "body": "@RbMm: Besides, the use of <code>CHECK_OS_ERROR()</code> implies an exception is raised if something goees wrong, and that doesn&#39;t work across module boundaries anyway, so returning <code>std::wstring</code> is safe.  Returning <code>LPWSTR</code> is more work for everyone, and is more prone to error.  Using <code>std::wstring</code> is safer and less work for everyone."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505950849, "post_id": 46328311, "comment_id": 79627302, "body": "@RemyLebeau - i supporter of nt style coding. all functions must return error code (or void). and <code>PWSTR</code> return not direct by via out parameter - exactly as <code>NetGetJoinInformation</code> do this. and not raise exception from function. but everybody can decide yourself how do coding"}], "answers": [{"comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1505930998, "post_id": 46328713, "comment_id": 79618923, "body": "Out of interest, isn&#39;t there a standard/common class which already does what your <code>NetApiBuffer</code> does? Since the functionality is pretty generic?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1505937848, "post_id": 46328713, "comment_id": 79622566, "body": "@Jarod42: look again more carefully at my <code>std::unique_ptr</code> example. <code>buf</code> is the raw <code>wchar_t*</code> pointer, <code>deleter</code> is the <code>std::unique_ptr</code> object.  What you would say is true if I were passing the <code>std::unique_ptr</code> object to the <code>std::wstring</code> constructor, but I&#39;m not."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 1, "creation_date": 1505938052, "post_id": 46328713, "comment_id": 79622666, "body": "@Lou: No, there is no <i>standard</i> class for this. <code>std::unique_ptr</code> with a custom deleter comes close, but it doesn&#39;t implement <code>operator&amp;</code> to get the address of the data pointer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1505929803, "creation_date": 1505929803, "answer_id": 46328713, "question_id": 46328311, "link": "https://stackoverflow.com/questions/46328311/how-to-correctly-return-pointer-from-function/46328713#46328713", "title": "How to correctly return pointer from function", "body": "<p>What you have shown is technically correct.</p>\n\n<p>However, just be aware that when the <code>std::wstring</code> copies the character data from <code>buf</code>, it has the <em>potential</em> to throw an exception, so you should be prepared to handle that to avoid any possible memory leak.</p>\n\n<p>You could use a <code>__try/__finally</code>:</p>\n\n<pre><code>std::wstring GetNetStatus()\n{\n    std::wstring result;\n\n    NETSETUP_JOIN_STATUS bufType;\n    ::ZeroMemory(&amp;bufType, sizeof(NETSETUP_JOIN_STATUS));\n\n    LPWSTR buf;\n    CHECK_OS_ERROR(::NetGetJoinInformation(nullptr, &amp;buf, &amp;bufType) == NERR_Success);\n\n    try {\n        result = buf;\n    }\n    __finally {\n        ::NetApiBufferFree(buf);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Or, you could write a custom <code>class</code>/<code>struct</code> that follows RAII semantics:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass NetApiBuffer\n{\nprivate:\n    T* m_buf;\n\n    NetApiBuffer(const NetApiBuffer &amp;) {}\n    NetApiBuffer&amp; operator=(const NetApiBuffer &amp;) { return *this; }\n\npublic:    \n    NetApiBuffer(T *buf = 0) : m_buf(buf) {}\n\n    ~NetApiBuffer() {\n        ::NetApiBufferFree(m_buf);\n    }\n\n    operator T*() { return m_buf; }\n    T** operator&amp;() { return &amp;m_buf; }\n};\n\nstd::wstring GetNetStatus()\n{\n    NETSETUP_JOIN_STATUS bufType;\n    ::ZeroMemory(&amp;bufType, sizeof(NETSETUP_JOIN_STATUS));\n\n    NetApiBuffer&lt;WCHAR&gt; buf;\n    CHECK_OS_ERROR(::NetGetJoinInformation(nullptr, &amp;buf, &amp;bufType) == NERR_Success);\n\n    return std::wstring(buf);\n}\n</code></pre>\n\n<p>Or, if you are using C++11 or later, you can use <code>std::unique_ptr</code> with a custom deleter:</p>\n\n<pre><code>std::wstring GetNetStatus()\n{\n    NETSETUP_JOIN_STATUS bufType;\n    ::ZeroMemory(&amp;bufType, sizeof(NETSETUP_JOIN_STATUS));\n\n    LPWSTR buf;\n    CHECK_OS_ERROR(::NetGetJoinInformation(nullptr, &amp;buf, &amp;bufType) == NERR_Success);\n\n    std::unique_ptr&lt;WCHAR, decltype(&amp;::NetApiBufferFree)&gt; deleter(buf, &amp;::NetApiBufferFree);\n    return std::wstring(buf);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505938143, "post_id": 46328792, "comment_id": 79622709, "body": "You don&#39;t need a lambda for the <code>deleter</code>, you can pass <code>NetApiBufferFree()</code> directly to <code>std::unique_ptr</code>, as shown in my answer"}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505939521, "post_id": 46328792, "comment_id": 79623361, "body": "@RemyLebeau: I read your answer after writing my code, but I honestly don&#39;t like repeating twice <code>&amp;::NetApiBufferFree</code> like you did; I also think defining a lambda scales up better for longer deleter code, and when the deleter code changes I can change it only in one place."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1505952626, "post_id": 46328792, "comment_id": 79627688, "body": "if you don&#39;t want to duplicate specifying <code>&amp;NetApiBufferFree</code> twice, that is easy enough to remedy - just use a variable: <code>auto deleter = ::NetApiBufferFree; std::unique_ptr&lt;wchar_t, decltype(deleter)&gt; autoDelete(buf, deleter);</code>"}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 0, "last_activity_date": 1505930478, "last_edit_date": 1505930478, "creation_date": 1505930125, "answer_id": 46328792, "question_id": 46328311, "link": "https://stackoverflow.com/questions/46328311/how-to-correctly-return-pointer-from-function/46328792#46328792", "title": "How to correctly return pointer from function", "body": "<p>Once you build a <code>std::wstring</code> with that raw C-style string pointer, the <code>wstring</code> object <em>deep-copies</em> the string pointed by the input raw pointer, so you are safe to return the <code>wstring</code> object back to the caller.</p>\n\n<p>What you could do to improve your code quality is replacing the <em>explicit</em> string memory release call to <code>NetApiBufferFree</code> with a safe RAII wrapper, for example using <code>std::unique_ptr</code> with a custom deleter, e.g.:</p>\n\n<pre><code>// LPWSTR buf;\n// ... \n//  \n// ::NetApiBufferFree(buf);\n\nauto deleter = [](void* ptr) { ::NetApiBufferFree(ptr); };\nstd::unique_ptr&lt;wchar_t, decltype(deleter)&gt; autoDelete(buf, deleter);\n</code></pre>\n\n<p>Your whole function code can be adjusted like this:</p>\n\n<pre><code>std::wstring GetNetStatus() \n{\n    NETSETUP_JOIN_STATUS bufType;\n    ::ZeroMemory(&amp;bufType, sizeof(NETSETUP_JOIN_STATUS));\n\n    LPWSTR buf = nullptr;\n    CHECK_OS_ERROR(::NetGetJoinInformation(nullptr, &amp;buf, &amp;bufType) == NERR_Success);\n\n    // Safe RAII wrapper around NetApiBufferFree()\n    auto deleter = [](void* ptr) { ::NetApiBufferFree(ptr); };\n    std::unique_ptr&lt;wchar_t, decltype(deleter)&gt; autoDelete(buf, deleter);\n\n    return std::wstring(buf);\n\n// NetApiBufferFree() *automatically* invoked at function exit\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 8234088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RZyYv.jpg?s=128&g=1", "display_name": "definename", "link": "https://stackoverflow.com/users/8234088/definename"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 46328713, "answer_count": 2, "score": 1, "last_activity_date": 1505932317, "creation_date": 1505928443, "last_edit_date": 1505932317, "question_id": 46328311, "link": "https://stackoverflow.com/questions/46328311/how-to-correctly-return-pointer-from-function", "title": "How to correctly return pointer from function", "body": "<p>I have the following function:</p>\n\n<pre><code>std::wstring GetNetStatus()\n{\n    NETSETUP_JOIN_STATUS bufType;\n    ::ZeroMemory(&amp;bufType, sizeof(NETSETUP_JOIN_STATUS));\n\n    LPWSTR buf;\n    CHECK_OS_ERROR(::NetGetJoinInformation(nullptr, &amp;buf, &amp;bufType) == NERR_Success);\n\n    std::wstring group(buf);\n    ::NetApiBufferFree(buf);\n\n    return group;\n}\n</code></pre>\n\n<p>I need to return an <code>LPWSTR</code> value but according to the API I'm using, I need to free this pointer before I leave the function scope.</p>\n\n<p>Is it correct to assign an <code>LPWSTR</code> value to the STL string and return it or are there some other tricks?</p>\n"}, {"tags": ["c++", "qt", "raspberry-pi", "qml", "cross-compiling"], "comments": [{"owner": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 0, "creation_date": 1505927937, "post_id": 46328049, "comment_id": 79617204, "body": "Sorry but have you tried with <code>qmake-qtrpi &quot;CONFIG+=lang-all&quot;</code>?"}, {"owner": {"reputation": 41, "user_id": 7191036, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b6611a9cee6cba6dcf5b096568efce?s=128&d=identicon&r=PG&f=1", "display_name": "mehran", "link": "https://stackoverflow.com/users/7191036/mehran"}, "reply_to_user": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 0, "creation_date": 1505928114, "post_id": 46328049, "comment_id": 79617305, "body": "yes i run this command in this path of my laptop &quot;/opt/qtrpi/modules/qtvirtualkeyboard&quot;"}, {"owner": {"reputation": 962, "user_id": 1404658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/QqHs0.jpg?s=128&g=1", "display_name": "H.Ghassami", "link": "https://stackoverflow.com/users/1404658/h-ghassami"}, "edited": false, "score": 0, "creation_date": 1562656925, "post_id": 46328049, "comment_id": 100433887, "body": "I know this post is too old, but do you get the answer?"}, {"owner": {"reputation": 41, "user_id": 7191036, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b6611a9cee6cba6dcf5b096568efce?s=128&d=identicon&r=PG&f=1", "display_name": "mehran", "link": "https://stackoverflow.com/users/7191036/mehran"}, "edited": false, "score": 0, "creation_date": 1562777218, "post_id": 46328049, "comment_id": 100486743, "body": "yes, read this link  <a href=\"https://github.com/neuronalmotion/qtrpi/issues/74\" rel=\"nofollow noreferrer\">github.com/neuronalmotion/qtrpi/issues/74</a>"}], "owner": {"reputation": 41, "user_id": 7191036, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b6611a9cee6cba6dcf5b096568efce?s=128&d=identicon&r=PG&f=1", "display_name": "mehran", "link": "https://stackoverflow.com/users/7191036/mehran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 895, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505938658, "creation_date": 1505927500, "last_edit_date": 1505938658, "question_id": 46328049, "link": "https://stackoverflow.com/questions/46328049/qt-virtual-keyboard-in-raspberry-pi-with-multi-language", "title": "Qt Virtual Keyboard in Raspberry pi with multi language", "body": "<p>I want to use Qt Virtual Keyboard in my QML application on Raspberry pi. \nI use <code>qtrpi</code> <a href=\"https://github.com/neuronalmotion/qtrpi\" rel=\"nofollow noreferrer\">link</a> for cross-compiling my code.</p>\n\n<p>I install qtrpi and the Virtual Keyboard module and run sample app on my rpi correctly, but my problem is the default language is English, and I can't add more languages to it.</p>\n\n<p>I read this <a href=\"https://forum.qt.io/topic/76802/how-to-enable-virtual-keyboard-languages/5\" rel=\"nofollow noreferrer\">link</a>, which stated that I should recompile the virtual keyboard module with <code>qmake \"CONFIG+=lang-all\"</code> argument. (I use \"qmake-qtrpi\" instead of <code>qmake</code> because I'm cross-compiling, though.) </p>\n\n<p>I do this on my laptop (not on rpi) and run the sample app again, but it doesn't work. How can I solve this?</p>\n\n<p><strong>Edit:</strong> All code is in this <a href=\"https://github.com/qt/qtvirtualkeyboard\" rel=\"nofollow noreferrer\">repository</a>.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++17", "template-templates"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505928728, "post_id": 46328005, "comment_id": 79617713, "body": "@StoryTeller I get your point. I&#39;ll try to edit the question to be less suggestive when get back to computer"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505928927, "post_id": 46328005, "comment_id": 79617835, "body": "@StoryTeller I don&#39;t understand your comment. <code>TT</code> is a template template-parameter, that deduces to <code>Bar</code> just fine? clang&#39;s problem is in deducing <code>V</code>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1505929968, "post_id": 46328005, "comment_id": 79618401, "body": "@Barry - My comment was about the mcve. I can swear TT was a plain <code>decltype(auto)</code>. Not a template. Appearantly I just misread."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505930192, "post_id": 46328005, "comment_id": 79618533, "body": "Anyway, I&#39;m not by a computer, but I too would be really surprised if this isn&#39;t officially well-formed."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 5, "creation_date": 1505930550, "post_id": 46328005, "comment_id": 79618709, "body": "Simpler example: have <code>foo</code> just be <code>template &lt;decltype(auto) V&gt; void foo(Bar&lt;V&gt; ) { }</code> - same behavior, just one less variable"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1505935068, "post_id": 46328005, "comment_id": 79621113, "body": "@Barry: I think that pretty much solidifies it as a clang bug, yeah?"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1505935791, "post_id": 46328005, "comment_id": 79621479, "body": "I&#39;ll try to find appropriate standard fragment and get back with filed bug, not sure if I will be able do it today. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1505999892, "creation_date": 1505999892, "answer_id": 46345014, "question_id": 46328005, "link": "https://stackoverflow.com/questions/46328005/are-reference-non-type-template-parameters-deduced-by-decltypeauto-forwardable/46345014#46345014", "title": "Are reference non-type template parameters deduced by decltype(auto) forwardable in case of template template parameter", "body": "<p>According to error clang does not have a problem with deducing template <em>template-parameter</em> which is also standard compliant - <a href=\"http://eel.is/c++draft/temp.arg.template#3\" rel=\"nofollow noreferrer\">[temp.arg.template]/3</a> (empasis mine): </p>\n\n<blockquote>\n  <p><strong>A template-argument matches a template template-parameter P when P is\n  at least as specialized as the template-argument A</strong>. If P contains a\n  parameter pack, then A also matches P if each of A's template\n  parameters matches the corresponding template parameter in the\n  template-parameter-list of P. <strong>Two template parameters match if they\n  are of the same kind (type, non-type, template), for non-type\n  template-parameters, their types are equivalent ([temp.over.link])</strong>,\n  and for template template-parameters, each of their corresponding\n  template-parameters matches, recursively. When P's\n  template-parameter-list contains a template parameter pack, the\n  template parameter pack will match zero or more template parameters or\n  template parameter packs in the template-parameter-list of A with the\n  same type and form as the template parameter pack in P (ignoring\n  whether those template parameters are template parameter packs)</p>\n</blockquote>\n\n<p>Now lets make sure the <code>Bar&lt;(x)&gt;{}</code> should be deduced as reference. This is covered by <a href=\"http://eel.is/c++draft/dcl.type.auto.deduct#5\" rel=\"nofollow noreferrer\">[dcl.type.auto.deduct]/5</a> and <a href=\"http://eel.is/c++draft/dcl.type.simple#4\" rel=\"nofollow noreferrer\">[dcl.type.simple]/4</a>.</p>\n\n<p>Finally lets check if we actually can use the reference to the variable with linkage as a template argument <a href=\"http://eel.is/c++draft/temp.arg.nontype#2\" rel=\"nofollow noreferrer\">[temp.arg.nontype]/2</a>:</p>\n\n<blockquote>\n  <p>A template-argument for a non-type template-parameter shall be a\n  converted constant expression of the type of the template-parameter.\n  <strong>For a non-type template-parameter of reference or pointer type, the\n  value of the constant expression shall not refer to (or for a pointer\n  type, shall not be the address of)</strong>:</p>\n  \n  <ul>\n  <li><strong>a subobject,</strong></li>\n  <li><strong>a temporary object,</strong></li>\n  <li><strong>a string literal,</strong></li>\n  <li><strong>the result of a typeid expression, or</strong></li>\n  <li><strong>a predefined <em>\u00ad</em>\u00adfunc_\u00ad_\u00ad variable.</strong></li>\n  </ul>\n  \n  <p>[\u2009Note: If the template-argument represents a set of overloaded\n  functions (or a pointer or member pointer to such), the matching\n  function is selected from the set ([over.over]). \u2014\u2009end note \u2009]</p>\n</blockquote>\n\n<p>The deduced argument fulfils the requirements. This makes the code well-formed and suggests clang's bug.</p>\n\n<p><a href=\"https://bugs.llvm.org/show_bug.cgi?id=34690\" rel=\"nofollow noreferrer\">Filed bug 34690</a></p>\n"}], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 5, "answer_count": 1, "score": 9, "last_activity_date": 1505999892, "creation_date": 1505927340, "question_id": 46328005, "link": "https://stackoverflow.com/questions/46328005/are-reference-non-type-template-parameters-deduced-by-decltypeauto-forwardable", "title": "Are reference non-type template parameters deduced by decltype(auto) forwardable in case of template template parameter", "body": "<p>Yet another <code>decltype(auto)</code> template <em>template-parameter</em> question. This time minimal code I was able to create to reproduce the error looks like this:</p>\n\n<pre><code>template &lt;template &lt;decltype(auto)&gt; class TT, decltype(auto) V&gt;\nvoid foo(TT&lt;V&gt;) {\n};\n\ntemplate &lt;decltype(auto)&gt;\nstruct Bar{};\n\nint x;\n\nint main() {\n    foo(Bar&lt;(x)&gt;{});\n}\n</code></pre>\n\n<p>This in <a href=\"https://wandbox.org/permlink/VSbNzcgxE7KCWnvw\" rel=\"noreferrer\">[clang]</a> results in:</p>\n\n<pre><code>prog.cc:11:5: error: no matching function for call to 'foo'\n    foo(Bar&lt;(x)&gt;{});\n    ^~~\nprog.cc:2:6: note: candidate template ignored: substitution failure [with TT = Bar]: non-type template argument is not a constant expression\nvoid foo(TT&lt;V&gt;) {\n     ^\n1 error generated.\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/3jeDfwTpWDLLMqO7\" rel=\"noreferrer\">[gcc]</a> accepts the code.</p>\n\n<p>To my understanding the code is well-formed and clang is buggy in its interpretation, but need the confirmation before submitting a bug to lvvm. Am I right?</p>\n"}, {"tags": ["c++", "header-files"], "comments": [{"owner": {"reputation": 2193, "user_id": 124755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd45919ed4f213ecff295cbfbd2ba9a?s=128&d=identicon&r=PG", "display_name": "Gnawme", "link": "https://stackoverflow.com/users/124755/gnawme"}, "edited": false, "score": 1, "creation_date": 1505927374, "post_id": 46327890, "comment_id": 79616868, "body": "That&#39;s what private methods are for: To encapsulate implementation details that aren&#39;t for public consumption. For the methods to have access to private class member data, it&#39;s easiest to have them be methods in the class."}, {"owner": {"reputation": 101, "user_id": 4707436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9902ccfe19624247b98c3ab500a02f?s=128&d=identicon&r=PG", "display_name": "jumper0x08", "link": "https://stackoverflow.com/users/4707436/jumper0x08"}, "edited": false, "score": 1, "creation_date": 1505927680, "post_id": 46327890, "comment_id": 79617065, "body": "You are missing the scope resolution operator mySolver:: when defining intermediateCalculation1 and intermediateCalculation2. So your class functions are never defined."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505927907, "post_id": 46327890, "comment_id": 79617190, "body": "your example isnt the best, because there is no reason why those methods should be inside a class in the first place. I mean your class has no state that needs to persist between calls to (public) methods. You have <code>mInput</code> and <code>mOutput</code>, but they could be simply local variables in  a free function <code>solve</code> that calls two or more free functions. tl;dr: you are right, implementation details dont need to be placed in the header"}, {"owner": {"reputation": 101, "user_id": 4707436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9902ccfe19624247b98c3ab500a02f?s=128&d=identicon&r=PG", "display_name": "jumper0x08", "link": "https://stackoverflow.com/users/4707436/jumper0x08"}, "edited": false, "score": 0, "creation_date": 1505928063, "post_id": 46327890, "comment_id": 79617273, "body": "Well if they are part of the class and only used by the class, then I think it does make sense for them to be member functions. The class provides encapsulation for the functions."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1505928154, "post_id": 46327890, "comment_id": 79617327, "body": "This doesn&#39;t address the question, but names that contain two consecutive underscores (<code>__mySolver_h__</code>) and names that begin with an underscore followed by a capital letter are reserved for use by the implementation. Don&#39;t use them in your code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 101, "user_id": 4707436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9902ccfe19624247b98c3ab500a02f?s=128&d=identicon&r=PG", "display_name": "jumper0x08", "link": "https://stackoverflow.com/users/4707436/jumper0x08"}, "edited": false, "score": 1, "creation_date": 1505928405, "post_id": 46327890, "comment_id": 79617507, "body": "@jumper0x08 there is nothing to encapsulate here. C++ isnt java. Any function that can be a free function makes a class easier to understand and maintain while it is still considered as part of a class interface. Here the easiest would be to not use a class at all"}, {"owner": {"reputation": 422, "user_id": 6292794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MIACn9yU5Iw/AAAAAAAAAAI/AAAAAAAAAEk/WtfbGSubAwQ/photo.jpg?sz=128", "display_name": "JMikes", "link": "https://stackoverflow.com/users/6292794/jmikes"}, "edited": false, "score": 0, "creation_date": 1505928702, "post_id": 46327890, "comment_id": 79617699, "body": "@jumper0x08missing scope resolution operator mySolver:: was a typo in the question, my original code has that. Thanks for the catch. Will edit question accordingly."}, {"owner": {"reputation": 422, "user_id": 6292794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MIACn9yU5Iw/AAAAAAAAAAI/AAAAAAAAAEk/WtfbGSubAwQ/photo.jpg?sz=128", "display_name": "JMikes", "link": "https://stackoverflow.com/users/6292794/jmikes"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1505928710, "post_id": 46327890, "comment_id": 79617704, "body": "@tobi303 I&#39;ve tried to simplify my original code to get to the crux of my question. In my original code, I have multiple outputs I&#39;d like to return, some of which are true outputs while others are intermediate results I&#39;d like to be able to access for error checking. For this reason, I&#39;ve made it a class so that I can simply add other getters when needed. If a class is still overkill I&#39;d be interested to hear why."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505930378, "post_id": 46327890, "comment_id": 79618608, "body": "not really &quot;overkill&quot;, but I dont see the instance here that would need a constructor, destructor and all that stuff that comes with a class. Consider how calling code would look: <code>auto x = mySolver(3.0);</code> ? I would find it confusing if I need to create an instance and wouldnt really know what to do with it. I dont know your real code, there defining a class might make sense, but then imho you simplified it too much to demonstrate the crux of the issue. If you worry about debugging and additional print outs I would rather try to group and encapsulate the parameters you are passing around"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 101, "user_id": 4707436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9902ccfe19624247b98c3ab500a02f?s=128&d=identicon&r=PG", "display_name": "jumper0x08", "link": "https://stackoverflow.com/users/4707436/jumper0x08"}, "edited": false, "score": 0, "creation_date": 1505930674, "post_id": 46327890, "comment_id": 79618768, "body": "@jumper0x08  &quot;The class provides encapsulation for the functions&quot; What does that even mean?  Encapsulation does not mean &quot;member of a class&quot;. In fact, adding them to the class when they don&#39;t need to be breaks encapsulation. They could live entirely within the .cpp file unexposed to anything outside it. Making them members of the class, even private, exposes them via the header file."}, {"owner": {"reputation": 101, "user_id": 4707436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9902ccfe19624247b98c3ab500a02f?s=128&d=identicon&r=PG", "display_name": "jumper0x08", "link": "https://stackoverflow.com/users/4707436/jumper0x08"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1505931911, "post_id": 46327890, "comment_id": 79619445, "body": "@RobK I have mentioned if the functions are part of the class and are only used by the class. Of course they shouldn&#39;t be added to the class just to encapsulate them in some class. Here, the functions intermediateCalculation s may be better suited to the class depending upon what they do. If there is a class named &quot;LinearEquationSolver&quot;, doesn&#39;t it make sense for a function SolveLinearEquations() which solves linear equations to be within that class? ( This is assuming, of course having a class LinearEquationSolver actually makes sense in the first place)"}], "answers": [{"comments": [{"owner": {"reputation": 2193, "user_id": 124755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd45919ed4f213ecff295cbfbd2ba9a?s=128&d=identicon&r=PG", "display_name": "Gnawme", "link": "https://stackoverflow.com/users/124755/gnawme"}, "edited": false, "score": 0, "creation_date": 1505927946, "post_id": 46327946, "comment_id": 79617212, "body": "OP wants the methods to have access to private member data, so they must be member functions."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 2193, "user_id": 124755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd45919ed4f213ecff295cbfbd2ba9a?s=128&d=identicon&r=PG", "display_name": "Gnawme", "link": "https://stackoverflow.com/users/124755/gnawme"}, "edited": false, "score": 0, "creation_date": 1505928051, "post_id": 46327946, "comment_id": 79617265, "body": "@Gnawme or be declared as friend or OP could realize that there is no need to have those two members if the methods would be implemented as free functions instead of being placed inside a clas"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1505928955, "post_id": 46327946, "comment_id": 79617849, "body": "We&#39;ve been wasting almost 3 days once, just to find out we had confused the linker by using such construct unprotected by an unnamed namespace. Those few letters additional typing may save you a lot."}], "tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 1, "last_activity_date": 1505927145, "creation_date": 1505927145, "answer_id": 46327946, "question_id": 46327890, "link": "https://stackoverflow.com/questions/46327890/c-can-class-functions-be-declared-outside-of-header/46327946#46327946", "title": "C++ - Can Class Functions be Declared Outside of Header?", "body": "<p>You can do that by just defining the function before you use them in the .cpp file.  No need to define them in the header file because there is no need to make them member functions.  These are just free functions.</p>\n\n<p>Also, you probably would want to put them in an anonymous namespace so they are only visible to the existing file.</p>\n"}, {"comments": [{"owner": {"reputation": 422, "user_id": 6292794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MIACn9yU5Iw/AAAAAAAAAAI/AAAAAAAAAEk/WtfbGSubAwQ/photo.jpg?sz=128", "display_name": "JMikes", "link": "https://stackoverflow.com/users/6292794/jmikes"}, "edited": false, "score": 0, "creation_date": 1505929046, "post_id": 46328240, "comment_id": 79617902, "body": "Thanks so much for your response. I really appreciate the example code. Will give your first suggestion a try and mark as accepted answer if it works."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1506439681, "post_id": 46328240, "comment_id": 79818025, "body": "How does intermediateCalculation2() defined outside the class in the anonymous namespace access the private member mInput that should happen in the function&#39;s body according to OP&#39;s comments ?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1506440478, "post_id": 46328240, "comment_id": 79818571, "body": "@Christophe It&#39;s not intended to access that private member, but get it passed as parameter."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1506440924, "post_id": 46328240, "comment_id": 79818883, "body": "@user0042 ok, can you please clarify this assumption by changing the comment &quot;//do stuff while accessing value of member variable mInput&quot;  to reflect this approach ? And SO doesn&#39;t let me upvote if there&#39;s no edit :-/"}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 4, "last_activity_date": 1506450667, "last_edit_date": 1506450667, "creation_date": 1505928158, "answer_id": 46328240, "question_id": 46327890, "link": "https://stackoverflow.com/questions/46327890/c-can-class-functions-be-declared-outside-of-header/46328240#46328240", "title": "C++ - Can Class Functions be Declared Outside of Header?", "body": "<blockquote>\n  <p>1) Is there a simple way to do this without having to include the intermediate functions in the header file?</p>\n</blockquote>\n\n<p>Yes. In addition to <a href=\"https://stackoverflow.com/a/46327946/8242698\">this answer</a>, if you put these into an anonymous (unnamed) namespaces you will really hide those implementation details from any access outside of the translation units. It also helps not to confuse the linker in case of name clashes:</p>\n\n<pre><code>namespace { // &lt;&lt;&lt;&lt; unnamed namespace\n    double intermediateCalculation1(double input) {\n        //do stuff\n    }\n\n    double intermediateCaluclation2(double intermediateValue1, double input) {\n        // the member variable mInput should be passed as parameter\n    }\n}\n\nmySolver::mySolver(double input) {\n    mInput = input;\n\n    double intermediateValue1 = intermediateCalculation1(mInput);\n    mOutput = intermediateCalculation2(intermediateValue1,mInput);\n\n    cout &lt;&lt; \"Output is: \" &lt;&lt; mOutput &lt;&lt; endl;\n}\n</code></pre>\n\n<blockquote>\n  <p>2) Is there a simple way to do this without having to include the intermediate functions in the header file that still lets me access member variables in the intermediate functions?</p>\n</blockquote>\n\n<p>Not really, these would need to be <code>friend</code>ed to do so, which requires them to appear at the class declaration.</p>\n\n<p>You still have the option as your code example does now and pass them the necessary parameters, or go with the <em>pimpl</em> idiom as you mentioned.  Since <em>pimpl</em> only needs a forward declaration, I believe you can do the full declaration and definition in an anonymous namespace as well.</p>\n"}], "owner": {"reputation": 422, "user_id": 6292794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MIACn9yU5Iw/AAAAAAAAAAI/AAAAAAAAAEk/WtfbGSubAwQ/photo.jpg?sz=128", "display_name": "JMikes", "link": "https://stackoverflow.com/users/6292794/jmikes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2556, "favorite_count": 0, "accepted_answer_id": 46328240, "answer_count": 2, "score": 2, "last_activity_date": 1506450667, "creation_date": 1505926914, "last_edit_date": 1505928891, "question_id": 46327890, "link": "https://stackoverflow.com/questions/46327890/c-can-class-functions-be-declared-outside-of-header", "title": "C++ - Can Class Functions be Declared Outside of Header?", "body": "<p>I'm fairly new to C++ and trying to write a class that's purpose is to solve a mathematical problem when the class is instantiated with an input. I've broken those calculations up over a couple of sub-functions and so the header/source code looks something like this:</p>\n\n<p>mySolver.h</p>\n\n<pre><code>#ifndef __mySolver_h__\n\nclass mySolver\n{\nprivate:\n    double mInput, mOutput; //member variables\n    double intermediateCalculation1(double input);\n    double intermediateCalculation2(double intermediateValue1);\npublic:\n    mySolver(double input);\n};\n\n#endif\n</code></pre>\n\n<p>mySolver.cpp</p>\n\n<pre><code>#include \"mySolver.h\"\n\nmySolver::mySolver(double input)\n{\n    mInput = input;\n\n    double intermediateValue1 = intermediateCalculation1(mInput);\n    double mOutput = intermediateCalculation2(intermediateValue1);\n\n    cout &lt;&lt; \"Output is: \" &lt;&lt; mOutput &lt;&lt; endl;\n }\ndouble mySolver::intermediateCalculation1(double input)\n{\n    //do stuff\n}\n\ndouble mySolver::intermediateCaluclation2(double intermediateValue1)\n{\n    //do stuff while accessing value of member variable mInput\n}\n</code></pre>\n\n<p>This works <em>but</em> I have to list the methods intermediateCalculation1/2 in the header file despite their being purely implementation details. As a result, if I want to change some of the details of how the calculations are performed (e.g. split things into 3 intermediate calculations rather than 2) I would have to change the header file and re-compile every file that includes mySolver.h which seems to defeat the purpose of separating interface from implementation.</p>\n\n<p>My question is:</p>\n\n<p>1) Is there a simple way to do this without having to include the intermediate functions in the header file?</p>\n\n<p>2) Is there a simple way to do this without having to include the intermediate functions in the header file <em>that still lets me access member variables in the intermediate functions</em>?</p>\n\n<p>I've come across some references to the <a href=\"http://en.cppreference.com/w/cpp/language/pimpl\" rel=\"nofollow noreferrer\">pImpl technique</a> that could be a solution, but for my purposes that seems unnecessarily complicated.</p>\n\n<p>EDIT: Regarding why this is in a class at all, I've simplified my example for clarity but in my actual code I have multiple outputs, some of which are intermediate results I only want to access some of the time (i.e. for error checking), hence my choice of class structure.</p>\n"}, {"tags": ["android", "c++", "qt", "user-interface", "statusbar"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "is_accepted": true, "score": 1, "last_activity_date": 1506330899, "creation_date": 1506330899, "answer_id": 46401589, "question_id": 46327886, "link": "https://stackoverflow.com/questions/46327886/qt-for-android-statusbar-color/46401589#46401589", "title": "Qt for Android - Statusbar color", "body": "<h1>Solved</h1>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/2784899/volodymyr-shevchyk\">Volodymyr Shevchyk</a></p>\n\n<p><strong>Final solution:</strong> (mine is a bit hardcode-ish)</p>\n\n<pre><code>QtAndroid::runOnAndroidThread([=]()\n{\n    QAndroidJniObject window = QtAndroid::androidActivity().callObjectMethod(\"getWindow\", \"()Landroid/view/Window;\");\n    window.callMethod&lt;void&gt;(\"addFlags\", \"(I)V\", 0x80000000);\n    window.callMethod&lt;void&gt;(\"clearFlags\", \"(I)V\", 0x04000000);\n    window.callMethod&lt;void&gt;(\"setStatusBarColor\", \"(I)V\", 0xffffffff); // Desired statusbar color\n});                                                      // A R G B\n</code></pre>\n\n<p>Using extracts frome <a href=\"https://github.com/jpnurmi/statusbar/blob/master/src/statusbar.cpp\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.kdab.com/qt-android-run-c-code-android-ui-thread/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Make sure, that you are on Qt version 5.7 or above. Otherwise <code>QtAndroid::runOnAndroidThread</code> won't work.</p>\n\n<h1>Note</h1>\n\n<p>If you're using white, or some other very bright color as background, the statusbar's text can be made a little darker using the following code:</p>\n\n<pre><code>    QAndroidJniObject decorView = window.callObjectMethod(\"getDecorView\", \"()Landroid/view/View;\");\n    decorView.callMethod&lt;void&gt;(\"setSystemUiVisibility\", \"(I)V\", 0x00002000);\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "accepted_answer_id": 46401589, "answer_count": 1, "score": 0, "last_activity_date": 1506330899, "creation_date": 1505926888, "last_edit_date": 1506330870, "question_id": 46327886, "link": "https://stackoverflow.com/questions/46327886/qt-for-android-statusbar-color", "title": "Qt for Android - Statusbar color", "body": "<p>Does anyone know a way to change the Android statusbar color of a Qt Application?</p>\n\n<p>So far i've tried a lot of c++ solutions - all of them seem to fail, because that code does not run inside the main ui thread - and some xml adjustments in <code>AndroidManifest.xml</code> and <code>styles.xml</code> - that seems to influence at least the toolbar* but not the statusbar*..</p>\n\n<p>Can someone maybe offer a c++ solution, or has anyone reached results with xml?</p>\n\n<p>Thanks for your help!</p>\n\n<hr>\n\n<p>*about the terms 'statusbar' and 'toolbar': Android calls two different ui elements 'statusbar'. So in this case, i'm calling one of them 'toolbar'. To clarify:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TzTz7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TzTz7.png\" alt=\"Screenshot\"></a></p>\n"}, {"tags": ["c++", "qt", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 4435650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/784a4ce9ab32608b95bf8d8cf4c31f09?s=128&d=identicon&r=PG&f=1", "display_name": "Shuji", "link": "https://stackoverflow.com/users/4435650/shuji"}, "edited": false, "score": 0, "creation_date": 1552204004, "post_id": 46329614, "comment_id": 96916333, "body": "Link is broken :&#39;("}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1552204037, "last_edit_date": 1552204037, "creation_date": 1505933138, "answer_id": 46329614, "question_id": 46327656, "link": "https://stackoverflow.com/questions/46327656/qt-write-a-code-view-with-debug-point/46329614#46329614", "title": "qt write a code view with debug point", "body": "<p>For simplicity the red circles will be added when clicking in the right space where the numbers are similar to <code>QtCreator</code>, the following procedure can be extrapolated to your specific requirement.</p>\n\n<p>The first thing to get is the position of the cursor with respect to the editor, actually get the height or rectangle where the line that we want to find is located, in the case of <code>mousePressEvent</code> returns the position of the click with respect to the widget that draws the numbers, with this height we can get the position with the following algorithm, then store it if it does not exist or delete it if it was already stored (<strong>h</strong> is the position relative to the top of the widget):</p>\n\n<pre><code>QTextBlock block = firstVisibleBlock();\nint top = (int) blockBoundingGeometry(block).translated(contentOffset()).top();\nint bottom = top + (int) blockBoundingRect(block).height();\n\nint blockNumber =  block.blockNumber();\nwhile (block.isValid()) {\n    if (block.isVisible()) {\n        if(h &gt; top &amp;&amp; h&lt;bottom){\n            int index = breakpoints.indexOf(blockNumber);\n            if(index != -1){\n                breakpoints.remove(index);\n            }\n            else\n                breakpoints&lt;&lt;blockNumber;\n            update();\n            return;\n        }\n    }\n    blockNumber++;\n    block = block.next();\n    top = bottom;\n    bottom = top + (int) blockBoundingRect(block).height();\n}\n</code></pre>\n\n<p>Then in the method that paints the numbers, in this case <code>lineNumberAreaPaintEvent</code>, as there we have the blocks and their respective index, it is compared and if one of the stored numbers is painted.</p>\n\n<pre><code>void CodeEditor::lineNumberAreaPaintEvent(QPaintEvent *event)\n{\n    QPainter painter(lineNumberArea);\n    painter.fillRect(event-&gt;rect(), Qt::lightGray);\n\n    QTextBlock block = firstVisibleBlock();\n    int blockNumber = block.blockNumber();\n    int top = (int) blockBoundingGeometry(block).translated(contentOffset()).top();\n    int bottom = top + (int) blockBoundingRect(block).height();\n\n    while (block.isValid() &amp;&amp; top &lt;= event-&gt;rect().bottom()) {\n        if (block.isVisible() &amp;&amp; bottom &gt;= event-&gt;rect().top()) {\n            QString number = QString::number(blockNumber + 1);\n            //add next lines\n            if(breakpoints.indexOf(blockNumber) != -1){\n                painter.setBrush(Qt::red);\n                painter.drawEllipse(0, top + (fontMetrics().height()-width_circle)/2, width_circle, width_circle);\n            }\n            //end lines\n            painter.setPen(Qt::black);\n            painter.drawText(0, top, lineNumberArea-&gt;width(), fontMetrics().height(),\n                             Qt::AlignRight, number);\n        }\n        block = block.next();\n        top = bottom;\n        bottom = top + (int) blockBoundingRect(block).height();\n        ++blockNumber;\n    }\n}\n</code></pre>\n\n<p>The following image shows the result.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yVkNC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yVkNC.png\" alt=\"enter image description here\"></a></p>\n\n<p>The complete example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/questions/46327656\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 329, "user_id": 6934621, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-T45RbaAqoMU/AAAAAAAAAAI/AAAAAAAAABc/QVWMKsrSrTg/photo.jpg?sz=128", "display_name": "noodles guo", "link": "https://stackoverflow.com/users/6934621/noodles-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 46329614, "answer_count": 1, "score": 1, "last_activity_date": 1552204037, "creation_date": 1505926113, "last_edit_date": 1505965189, "question_id": 46327656, "link": "https://stackoverflow.com/questions/46327656/qt-write-a-code-view-with-debug-point", "title": "qt write a code view with debug point", "body": "<p>everyone!</p>\n\n<p>I'am trying to writing a custom debugger for my own hardware. A problem I face is that I don't know how to realize the add debug point function.\nIn details, I want to enter (F9) in one line, and tag a red point on the left column. Or, I double click the left column and tag a red point.</p>\n\n<p>I have learned the code Editor Example provided by Qt itself, but I have no idea how to realize my design.</p>\n\n<p>Some tiny example project would be better.</p>\n\n<p>The red point looks like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/xcKyp.png\" alt=\"\"></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 880, "user_id": 3661738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acddd9c3372908d0903c4611aea1a9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3661738/tyler"}, "edited": false, "score": 0, "creation_date": 1505926219, "post_id": 46327651, "comment_id": 79616208, "body": "The input is ended with the enter key, how will you expect the i/o to know when an integer is done being typed without an enter?"}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1505926240, "post_id": 46327651, "comment_id": 79616219, "body": "If I am reading this correctly...you want the console to show  <code>How much money do you have?</code> <code>$</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505926257, "post_id": 46327651, "comment_id": 79616232, "body": "Do you want the <code>$</code> to come before or after the user input?"}, {"owner": {"reputation": 1522, "user_id": 8157511, "user_type": "registered", "profile_image": "https://graph.facebook.com/638941339628236/picture?type=large", "display_name": "James Maa", "link": "https://stackoverflow.com/users/8157511/james-maa"}, "edited": false, "score": 0, "creation_date": 1505926262, "post_id": 46327651, "comment_id": 79616236, "body": "It&#39;s not possible, input stream wasn&#39;t flushed until you press the enter key (meaning, program can&#39;t read any input until enter)"}, {"owner": {"reputation": 21, "user_id": 6482937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0dW2Q.png?s=128&g=1", "display_name": "frankakn_7", "link": "https://stackoverflow.com/users/6482937/frankakn-7"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505943774, "post_id": 46327651, "comment_id": 79625134, "body": "@NathanOliver After"}], "answers": [{"tags": [], "owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1505926528, "creation_date": 1505926528, "answer_id": 46327781, "question_id": 46327651, "link": "https://stackoverflow.com/questions/46327651/how-to-cout-on-same-line-as-user-input-c/46327781#46327781", "title": "How to cout on same line as user input? C++", "body": "<p>I think if I am reading this correctly, you just need to put the <code>$</code> before your <code>cin</code> statement.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int money;\n    std::cout &lt;&lt; \"How much money do you have?\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"$\";\n    std::cin &gt;&gt; money;\n\n    return 0;\n\n}\n</code></pre>\n\n<p>It will then show on the console as<br>\n<code>How much money do you have?</code><br>\n<code>$</code>(insert input here)</p>\n"}, {"comments": [{"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 1, "creation_date": 1505927501, "post_id": 46327974, "comment_id": 79616953, "body": "For Windows, one can use the IC library, developed in a german C++ forum (<a href=\"https://www.c-plusplus.net/code/ic/\" rel=\"nofollow noreferrer\">c-plusplus.net/code/ic</a>), as the conio.h support gradually deteriorated over the years. Despite being in German, the interface should be pretty self-explanatory."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 1, "last_activity_date": 1505948989, "last_edit_date": 1505948989, "creation_date": 1505927242, "answer_id": 46327974, "question_id": 46327651, "link": "https://stackoverflow.com/questions/46327651/how-to-cout-on-same-line-as-user-input-c/46327974#46327974", "title": "How to cout on same line as user input? C++", "body": "<p>The problem is, that when you read the user's input, the terminal interface reads all the way to when the user press the Enter key, and a newline is printed, i.e. the cursor moves to the next terminal line. And then whatever you print appears on that next line.</p>\n\n<p>You can't really avoid this in purely platform-independent C++, since it requires manipulating the file descriptor \"under the hood\" of the input stream: </p>\n\n<ul>\n<li>Making it not read all the way to the next newline, or</li>\n<li>Making it not echo all of the characters it reads</li>\n</ul>\n\n<p>(or both). This can be done in a standard way on systems conforming to the <a href=\"https://en.wikipedia.org/wiki/POSIX\" rel=\"nofollow noreferrer\">POSIX standard(s)</a> - but it's complicated. You can read a bit more about it in <a href=\"https://stackoverflow.com/a/20482594/1593077\">this SO answer</a>; but the bottom line is that you should use a library to do this. One of:</p>\n\n<ul>\n<li>GNU <a href=\"http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/\" rel=\"nofollow noreferrer\">ncurses</a></li>\n<li>GNU <a href=\"http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html\" rel=\"nofollow noreferrer\">readline</a></li>\n</ul>\n\n<p>should work for you.</p>\n\n<p>PS: Sometimes your input is not a terminal but a file and you might also need to check whether that is the case.</p>\n"}, {"comments": [{"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505935240, "post_id": 46329616, "comment_id": 79621194, "body": "@StoryTeller - It certainly wouldn&#39;t be the first time."}], "tags": [], "owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "is_accepted": false, "score": -2, "last_activity_date": 1505934728, "last_edit_date": 1505934728, "creation_date": 1505933147, "answer_id": 46329616, "question_id": 46327651, "link": "https://stackoverflow.com/questions/46327651/how-to-cout-on-same-line-as-user-input-c/46329616#46329616", "title": "How to cout on same line as user input? C++", "body": "<p>You can do damn near anything with judicious use of the comma operator.</p>\n\n<pre><code>int money;\nstd::cout &lt;&lt; \"How much money do you have?\" &lt;&lt; std::endl;\nstd::cin &gt;&gt; money, std::cout &lt;&lt; money &lt;&lt; \" $\";\n</code></pre>\n\n<p>Will perform your input and output on one line. You could even do all three on the same line by changing the semicolon on the <code>std::endl;</code> out for another comma.</p>\n\n<p>I'm guessing that isn't what you wanted though. You wanted to use the output from std::cin directly without the variable, right? You can take a step further toward that with the comma operator:</p>\n\n<pre><code>int money;\nstd::cout &lt;&lt; \"How much money do you have?\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; (std::cin &gt;&gt; money, money) &lt;&lt; \" $\";\n</code></pre>\n\n<p>You could also use a lambda for this purpose, but the syntax overhead of that is greater than what I wrote above</p>\n\n<p>Unfortunately I don't know that you can get rid of two steps of formatted read, then return variable, without using some kind of sequence operator (as I did) or sticking the steps in a function (eg: a lambda), or using some formatted I/O routine that isn't standard C++ (which kind of amounts to the same thing). The problem is that \">>\" is <strong>the</strong> C++ standard routine for formatted input, and that operator is designed to return the stream, not the variable read out.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 6770517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NoUky.jpg?s=128&g=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/6770517/ankush"}, "is_accepted": false, "score": 0, "last_activity_date": 1505941625, "creation_date": 1505941625, "answer_id": 46331786, "question_id": 46327651, "link": "https://stackoverflow.com/questions/46327651/how-to-cout-on-same-line-as-user-input-c/46331786#46331786", "title": "How to cout on same line as user input? C++", "body": "<p>If you want the <code>$</code> to be printed just beside the input <code>money</code> value, one way can be to move one line up and remove the user input line after taking the input and printing money and $ on the very same line.</p>\n\n<p>i.e can be done as:</p>\n\n<pre><code> int money;\n std::cout &lt;&lt; \"How much money do you have?\" &lt;&lt; std::endl; \n std::cin &gt;&gt; money;\n std::cout &lt;&lt; \"\\033[F\";\n std::cout &lt;&lt; money &lt;&lt; \" $\";`\n</code></pre>\n\n<p>Here's the reference to <a href=\"https://stackoverflow.com/questions/45134217/c-go-back-a-line\">answer</a> by <a href=\"https://stackoverflow.com/users/783510/philipp-cla%C3%9Fen\">Philipp Cla\u00dfen</a></p>\n\n<p>Seems to serve the purpose :)</p>\n"}], "owner": {"reputation": 21, "user_id": 6482937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0dW2Q.png?s=128&g=1", "display_name": "frankakn_7", "link": "https://stackoverflow.com/users/6482937/frankakn-7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5477, "favorite_count": 0, "accepted_answer_id": 46327974, "answer_count": 4, "score": 0, "last_activity_date": 1505948989, "creation_date": 1505926088, "last_edit_date": 1505943948, "question_id": 46327651, "link": "https://stackoverflow.com/questions/46327651/how-to-cout-on-same-line-as-user-input-c", "title": "How to cout on same line as user input? C++", "body": "<p>I was wondering if it is possible to output something on the same line where the user gave its input</p>\n\n<pre><code>int money;\ncout &lt;&lt; \"How much money do you have?\" &lt;&lt; endl;\ncin &gt;&gt; money;\n//I want this to appear next to the user input\ncout &lt;&lt; \" $\";\n</code></pre>\n\n<p>I hope that you know what i mean and that you can help :)</p>\n\n<p>Edit: I was just wandering if this is possible but as it seems it's not. Not with the standard c++ at least but thanks to everyone who tried to help anyway </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1505926959, "post_id": 46327400, "comment_id": 79616631, "body": "As your types do not have a <a href=\"http://en.cppreference.com/w/cpp/concept/StandardLayoutType\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/concept/StandardLayoutType</a>, I would highly doubt that you can calculate any offset without entering the realm of undefined behaviour."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1505930309, "post_id": 46327400, "comment_id": 79618585, "body": "@Jodocus: no problem, as I&#39;ve said in the question, UB is fine in this case, if the code happens to work."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505931720, "post_id": 46327400, "comment_id": 79619321, "body": "Consider using pointers to members instead of offsets."}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1505930261, "post_id": 46328657, "comment_id": 79618563, "body": "Thanks, interesting solution! But I&#39;d like to keep using offsets instead of function calls (because of the overhead of function calling - yeah I know it is not huge, but this <code>call</code> function is used a lot, so it needs to be as efficient as possible). (The reason I&#39;ve described my original problem is people can see why I&#39;d like to have compile-time offsets.)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1505929592, "creation_date": 1505929592, "answer_id": 46328657, "question_id": 46327400, "link": "https://stackoverflow.com/questions/46327400/getting-compile-time-constant-offsetof-of-base-class-in-multiple-inheritance/46328657#46328657", "title": "Getting compile-time constant offsetof of base class in multiple-inheritance", "body": "<p>How about something like:</p>\n\n<pre><code>struct Entry {\n    void* (*data_member_getter)(void*);\n    void (*function)(void *member);\n};\n\nnamespace details\n{\n    template &lt;std::size_t I, typename Tuple&gt;\n    constexpr void* voidPGetter(void* tuple)\n    {\n        return &amp;std::get&lt;I&gt;(*reinterpret_cast&lt;Tuple*&gt;(tuple));\n    }\n\n    template &lt;typename Tuple, std::size_t I&gt;\n    constexpr MakeEntry()\n    {\n        using type = std::tuple_element_t&lt;I, Tuple&gt;;\n        return { &amp;voidPGetter&lt;I, Tuple&gt;, &amp;type::static_function };\n    }\n\n    template &lt;typename Tuple, std::size_t ... Is&gt;\n    constexpr std::array&lt;Entry, sizeof...(Is)&gt;\n    ComputeEntryHelper(std::index_sequence&lt;Is...&gt;)\n    {\n        return {{MakeEntry&lt;Is, Tuple&gt;()...}};\n    }\n}\n\ntemplate &lt;typename Tuple&gt;\nconstexpt auto ComputeEntry()\n{\n    constexpr auto size = std::tuple_size&lt;Tuple&gt;::value;\n    return details::ComputeEntryHelper(std::make_index_sequence&lt;size&gt;());\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>void call(void* tuple, const Entry* entries, int n) {\n    for (int i = 0; i != n; ++i) {\n        entries[i].function(entries[i].data_member_getter(tuple));\n    }\n}\n</code></pre>\n\n<p>So instead of offset, having a function to get the data.</p>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505929592, "creation_date": 1505925259, "question_id": 46327400, "link": "https://stackoverflow.com/questions/46327400/getting-compile-time-constant-offsetof-of-base-class-in-multiple-inheritance", "title": "Getting compile-time constant offsetof of base class in multiple-inheritance", "body": "<p>Look at this example:</p>\n\n<pre><code>struct s77 {\n    char d[77];\n};\n\nstruct s1 {\n    char d;\n};\n\nstruct Foo: s77, s1 {\n};\n\nstruct Off {\n    static const int v = std::size_t(static_cast&lt;s1*&gt;(static_cast&lt;Foo*&gt;(nullptr)+1)) - std::size_t(static_cast&lt;Foo*&gt;(nullptr)+1);\n};\n</code></pre>\n\n<p>This code tries to put the offset of <code>s1</code> in <code>Foo</code> into <code>Off::v</code>. This code compiles with GCC/clang (without any warnings), but fails to compile with VS2015/VS2017 (error C2131: expression did not evaluate to a constant)</p>\n\n<p>Which compiler is correct?</p>\n\n<p>Can I achieve this functionality in a standard conformant way? If it is not possible, is it possible to create a working solution which works with VS2015/VS2017? I'm willing to accept any working solution, even which has undefined behavior according to the standard (but happens to work with VS2015 and VS2017). <code>Off::v</code> must be a compile time constant.</p>\n\n<hr>\n\n<p>My original problem is this: I have an own implementation of <code>tuple</code>, which is implemented with multiple inheritance (like clang's <code>tuple</code>). I'd like to create a compile-time constant \"descriptor\" for the tuple, which contains all of its members' offset in the tuple. This descriptor contains a function pointer for each tuple member too. If I'd create this descriptor by hand, it would look like this (for example):</p>\n\n<pre><code>struct Entry {\n    int offset;\n    void (*function)(void *member);\n};\n\nEntry descriptor[] = {\n    { 0, &amp;SomeType1::static_function },\n    { 12, &amp;SomeType2::static_function },\n    { 20, &amp;SomeType3::static_function }\n};\n</code></pre>\n\n<p>The intention of this is that I could have a general function (which is not a template), which can use this descriptor to call a type-specific function on each tuple member:</p>\n\n<pre><code>void call(void *tuple, const Entry *entries, int n) {\n    for (int i=0; i&lt;n; i++) {\n        entries[i].function(static_cast&lt;char *&gt;(tuple)+entries[i].offset);\n    }\n}\n</code></pre>\n\n<p>(The reason of this solution instead of a templated <code>call</code> function is that <code>call</code> is actually a huge function in my real code, and <code>entry[i].function</code> calls cannot be factored out from it. I'd like to avoid massive code duplication.)</p>\n"}, {"tags": ["c++", "memory-leaks", "raii"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505925230, "post_id": 46327355, "comment_id": 79615603, "body": "If you are calling <code>exit</code>, is a leak still a major concern? If you care for the stack to be unwound. Throw an exception that only <code>main</code> can catch."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505925347, "post_id": 46327355, "comment_id": 79615690, "body": "@StoryTeller I want to use std::exit as the usual way of exiting my program, since I&#39;d have to call return 3 times, with a bool value checking, whether to retrun and it seems easier to do with <code>std::exit</code>. <code>throw</code> is an interesting idea, but it seems like a hack to throw a successful exit"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505925427, "post_id": 46327355, "comment_id": 79615745, "body": "If the program is exited what is there to leak?  The OS will clean up the process."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505925454, "post_id": 46327355, "comment_id": 79615761, "body": "To be honest, a successful exit not via a return in main is kinda hacky itself."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505925538, "post_id": 46327355, "comment_id": 79615805, "body": "@StoryTeller Is it? Is it not even hackier to return from 4 layers of functions?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505925547, "post_id": 46327355, "comment_id": 79615809, "body": "See the <a href=\"http://en.cppreference.com/w/cpp/utility/program/exit\" rel=\"nofollow noreferrer\">reference</a>: <i>Stack is not unwound: destructors of variables with automatic storage duration are not called.</i>"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505925571, "post_id": 46327355, "comment_id": 79615828, "body": "@NathanOliver well, I just want to make sure. Why would dr. memory report additional potential leaks?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505925584, "post_id": 46327355, "comment_id": 79615836, "body": "@kim366 - No. It&#39;s a natural flow of a program to terminate. It did what it had to do, and now it returns."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1505925549, "creation_date": 1505925549, "answer_id": 46327478, "question_id": 46327355, "link": "https://stackoverflow.com/questions/46327355/can-stdexit-leak-memory/46327478#46327478", "title": "Can std::exit leak memory?", "body": "<blockquote>\n  <p>So is std::exit a safe function to use, or should you always return from main to prevent memory leaks?</p>\n</blockquote>\n\n<p>Yes, it can leak memory.</p>\n\n<p>That's the less worrisome problem though. The more important problem will be if your program acquired resources that could not be released by shutting down the process. To handle such cases, it is better to either return with some error state until you are able to exit from <code>main</code> or use <code>try-throw-catch</code> to make sure that <code>main</code> is able to catch all uncaught exceptions and exits gracefully.</p>\n"}], "owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 46327478, "answer_count": 1, "score": 0, "last_activity_date": 1505925549, "creation_date": 1505925096, "question_id": 46327355, "link": "https://stackoverflow.com/questions/46327355/can-stdexit-leak-memory", "title": "Can std::exit leak memory?", "body": "<p>To answer my question, I conducted some tests:</p>\n\n<p>(to replicate following includes are necessary)</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;memory&gt;\n</code></pre>\n\n<p>I made a function that called <code>std::exit</code>, with a <code>std::unique_ptr</code> in the <code>main</code>function.</p>\n\n<pre><code>void some_function()\n{\n    std::exit(EXIT_SUCCESS);\n}\n\nint main()\n{\n    std::unique_ptr&lt;int&gt; relying_on_raii{new int{5}};\n}\n</code></pre>\n\n<p>If I called <code>some_function</code> after the <code>unique_ptr</code> declaration, memory might leak.</p>\n\n<p>The two logs I got from <a href=\"https://github.com/DynamoRIO/drmemory\" rel=\"nofollow noreferrer\">Dr. Memory</a> differed in the following line:</p>\n\n<pre><code>1 potential leak(s) (suspected false positives)\n        [\u2026]\n    6 unique,     6 total,    797 byte(s) of still-reachable allocation(s)\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>1 potential leak(s) (suspected false positives)\n        [\u2026]\n    7 unique,     7 total,    801 byte(s) of still-reachable allocation(s)\n</code></pre>\n\n<p>As can be seen, in the second example a 7th potential leak occured, which was 4 bytes in size, which is exactly the size of an <code>int</code>. When I repeated this test with double, it indeed turned out to be <code>805 byte(s)</code> in the test with <code>std::exit</code>.</p>\n\n<p>So is <code>std::exit</code> a safe function to use, or should you always return from main to prevent memory leaks?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 1, "creation_date": 1505925271, "post_id": 46327330, "comment_id": 79615630, "body": "I don&#39;t get it. Aren&#39;t you asking for a fixed precision in you example (2 in this case)? What do you mean by non fixed precision?"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1505925341, "post_id": 46327330, "comment_id": 79615687, "body": "Please, show the code where you are converting floats to strings."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1505925570, "post_id": 46327330, "comment_id": 79615826, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It is not clear what you have now vs. what you want."}, {"owner": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "edited": false, "score": 0, "creation_date": 1505925593, "post_id": 46327330, "comment_id": 79615842, "body": "I&#39;ve changed the example a little bit, to make it more clear. I want to set the precision only for the digits after the decimal, not for all digits in the number, but don&#39;t want trailing zeros."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1505926116, "post_id": 46327330, "comment_id": 79616163, "body": "Have a look at <a href=\"https://stackoverflow.com/a/17342002/1460794\">this answer</a>. But honestly, with a short program showing what you are trying to do this would be lot easier to answer."}], "answers": [{"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 1, "last_activity_date": 1505927994, "creation_date": 1505927994, "answer_id": 46328186, "question_id": 46327330, "link": "https://stackoverflow.com/questions/46327330/c-float-to-string-non-fixed-precision-after-decimal/46328186#46328186", "title": "c++ float to string non-fixed precision after decimal", "body": "<p>The following rounds to two decimals and then uses the default precision:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n\nint main()\n{\n    double vals[]{1.00000, 1.23456, 12.3456, 12.3000};\n    for(auto i : vals) {\n        i = std::round(i * 100) / 100;\n        std::cout &lt;&lt; i &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>1\n1.23\n12.35\n12.3\n</code></pre>\n"}], "owner": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505927994, "creation_date": 1505925019, "last_edit_date": 1505926406, "question_id": 46327330, "link": "https://stackoverflow.com/questions/46327330/c-float-to-string-non-fixed-precision-after-decimal", "title": "c++ float to string non-fixed precision after decimal", "body": "<p>Is there an easy way to set a non-fixed precision after decimal in c++ when converting floats to strings?</p>\n\n<p>What std::setprecision( 2 ) does is:</p>\n\n<pre><code>1.00000 -&gt; 1\n1.23456 -&gt; 1.2\n12.3456 -&gt; 12\n12.3000 -&gt; 12.3\n</code></pre>\n\n<p>What std::fixed adds to it is:</p>\n\n<pre><code>1.00000 -&gt; 1.00\n1.23456 -&gt; 1.20\n12.3456 -&gt; 12.34\n12.3000 -&gt; 12.30\n</code></pre>\n\n<p>What I want to do is:</p>\n\n<pre><code>1.00000 -&gt; 1\n1.23456 -&gt; 1.23\n12.3456 -&gt; 12.34\n12.3000 -&gt; 12.3\n</code></pre>\n"}, {"tags": ["c++", "file-io"], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "edited": false, "score": 0, "creation_date": 1505932466, "post_id": 46328286, "comment_id": 79619756, "body": "Minor improvement: You could save half the code by refactoring out stuff. if (vote == &#39;Y&#39;) { yestotal++, overalltotal++ if (district==&#39;1&#39;) D1Yesvotes++...."}, {"owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1505934507, "post_id": 46328286, "comment_id": 79620811, "body": "This is what I have atm: <a href=\"https://pastebin.com/w8Pu7tFD\" rel=\"nofollow noreferrer\">pastebin.com/w8Pu7tFD</a>  It&#39;s still not outputting the proper text file.  Everything is still showing up as zeros in the votingresults.txt"}, {"owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1505935856, "post_id": 46328286, "comment_id": 79621513, "body": "i fixed it.  the issue was my data file has a space between the district and the vote.  haha.  thank you for the help!"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1505937779, "post_id": 46328286, "comment_id": 79622532, "body": "Nice. You can mark my answer as the accepted answer by pressing the gray checker under the votes if you feel it was what was needed. :-)"}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 0, "last_activity_date": 1505928722, "last_edit_date": 1505928722, "creation_date": 1505928366, "answer_id": 46328286, "question_id": 46327326, "link": "https://stackoverflow.com/questions/46327326/issue-with-numbers-calculating-in-c-outfile/46328286#46328286", "title": "Issue with numbers calculating in C++ outfile", "body": "<p>There are a few things wrong with your code.\n- It only reads 1 line of the code, then quits\n- You are not incrementing your variables properly</p>\n\n<pre><code>yesTotal+1;\n</code></pre>\n\n<p>Will effectively just calculate yesTotal + 1, but not store iy anywhere.\nYou need to do one of the following</p>\n\n<pre><code>yesTotal=yesTotal+1;\nyesTotal++; // This does the same thing\n</code></pre>\n\n<p>Here is a fixed version of your code</p>\n\n<pre><code>#include &lt;string&gt;   \n#include &lt;iostream&gt;  \n#include &lt;fstream&gt; \n#include &lt;iomanip&gt; \n\nusing namespace std;\n\nint main()\n\n{\n\nifstream infile;\nofstream outfile;\nchar vote;\nint district;\nint overallTotal=0;\nint yesTotal=0;\nint noTotal=0;\nint d1Yesvotes=0;\nint d1Novotes=0;\nint d2Yesvotes=0;\nint d2Novotes=0;\nint d3Yesvotes=0;\nint d3Novotes=0;\n\n\n//open file\n\ninfile.open(\"votes.dat\");\n\n\n//if statement for 'yes' and 'no' votes, containing nested if statements\nstring line;\nif (!infile.is_open()) {\n  cout &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n  return 0;\n}\n\nwhile (getline(infile, line)) {\n  cout &lt;&lt; line &lt;&lt; endl;\n  if (line.size() &lt; 2)\n    continue;\n  district=line[0];\n  vote=line[1];\n  if (district=='1')\n  {        \n    if(vote=='Y') \n    {\n      yesTotal++;\n      d1Yesvotes++;\n      overallTotal++;\n    }\n\n    else if(vote=='N')\n    { \n      noTotal++;\n      d1Novotes++;\n      overallTotal++;\n    }\n  }\n\n  else if (district=='2')\n  {        \n    if(vote=='Y') \n    {\n      yesTotal++;\n      d2Yesvotes++;\n      overallTotal++;\n    }\n\n    else if(vote=='N')\n    {\n      noTotal++;\n      d2Novotes++;\n      overallTotal++;\n    }\n  }\n  else if (district=='3')\n  {        \n    if(vote=='Y') {\n      yesTotal++;\n      d3Yesvotes++;\n      overallTotal++;\n    }\n\n    else if(vote=='N')\n    {\n      noTotal++;\n      d3Novotes++;\n      overallTotal++;\n    }\n  }\n}\n\n\noutfile.open(\"votingresults.txt\"); \noutfile&lt;&lt;endl&lt;&lt;\"Number of Overall votes: \"&lt;&lt;overallTotal;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of Yes votes: \"&lt;&lt;yesTotal;\noutfile&lt;&lt;endl&lt;&lt;\"Number of No votes: \"&lt;&lt;noTotal;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 1 Yes Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 1 No Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 2 Yes Votes: \"&lt;&lt;d2Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 2 No Votes: \"&lt;&lt;d2Yesvotes;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 3 Yes Votes: \"&lt;&lt;d3Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 3 No Votes: \"&lt;&lt;d3Yesvotes;\n\n\n\n\n//close files\n\ninfile.close();\noutfile.close();\n\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>I also changed the output variables to use the correct ones, as your example was writing d1YesVotes and d1NoVotes for all 3 districts.</p>\n"}], "owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46328286, "answer_count": 1, "score": 0, "last_activity_date": 1505928722, "creation_date": 1505925008, "question_id": 46327326, "link": "https://stackoverflow.com/questions/46327326/issue-with-numbers-calculating-in-c-outfile", "title": "Issue with numbers calculating in C++ outfile", "body": "<p>I am trying to create a text file output that shows the results and breakdown of district voting from a data file.  I am having issues getting the proper numbers to calculate.  The voting document (votes.dat) only contains two characters per line \"District and Y/N\".  I am not sure why I keep coming up with numbers like 4317448 and 2600960 when there are only a handful of entries (less than 10).  </p>\n\n<pre><code>#include &lt;string&gt;   \nstring using namespace std\n#include &lt;iostream&gt;  \n#include &lt;fstream&gt; \n#include &lt;iomanip&gt; \n\nusing namespace std;\n\nint main()\n\n{\n\nifstream infile;\nofstream outfile;\nchar vote;\nint district;\nint overallTotal;\nint yesTotal;\nint noTotal;\nint d1Yesvotes;\nint d1Novotes;\nint d2Yesvotes;\nint d2Novotes;\nint d3Yesvotes;\nint d3Novotes;\n\n\n//open file\n\n infile.open(\"votes.dat\");\n\ninfile&gt;&gt;district&gt;&gt;vote;\n\n\n//if statement for 'yes' and 'no' votes, containing nested if statements\n\n\n\nif (district=='1')\n    {        \n        if(vote=='Y') \n        {\n            yesTotal+1;\n            d1Yesvotes+1;\n            overallTotal+1; }\n\n    else if(vote=='N')\n    { \n        noTotal+1;\n            d1Novotes+1;\n            overallTotal+1; }\n     }\n\n    else\nif (district=='2')\n    {        \n        if(vote=='Y') \n        {yesTotal+1;\n            d2Yesvotes+1;\n            overallTotal+1;}\n\n    else if(vote=='N')\n    { noTotal+1;\n            d2Novotes+1;\n            overallTotal+1;}\n       }\n      else\nif (district=='3')\n    {        \n        if(vote=='Y') \n        {yesTotal+1;\n            d3Yesvotes+1;\n            overallTotal+1;}\n\n    else if(vote=='N')\n    { noTotal+1;\n            d3Novotes+1;\n            overallTotal+1;}\n\n       }\n\n\noutfile.open(\"votingresults.txt\"); \noutfile&lt;&lt;endl&lt;&lt;\"Number of Overall votes: \"&lt;&lt;overallTotal;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of Yes votes: \"&lt;&lt;yesTotal;\noutfile&lt;&lt;endl&lt;&lt;\"Number of No votes: \"&lt;&lt;noTotal;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 1 Yes Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 1 No Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 2 Yes Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 2 No Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl;\noutfile&lt;&lt;endl&lt;&lt;\"Number of District 3 Yes Votes: \"&lt;&lt;d1Yesvotes;\n    outfile&lt;&lt;endl&lt;&lt;\"Number of District 3 No Votes: \"&lt;&lt;d1Yesvotes;\n\n\n\n\n//close files\n\ninfile.close();\n    outfile.close();\n\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "cin", "cout"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505924971, "post_id": 46327264, "comment_id": 79615459, "body": "Are you trying to say that an empty string isn&#39;t valid input?  Then check it"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 1, "creation_date": 1505925059, "post_id": 46327264, "comment_id": 79615507, "body": "not related to the question, but I don&#39;t see a good reason to write this recursively rather than adding a loop inside the main function"}, {"owner": {"reputation": 9, "user_id": 8642920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee0295694a9c487f52d860f87ebe344?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMAD AZIMUDDIN ", "link": "https://stackoverflow.com/users/8642920/mohamad-azimuddin"}, "edited": false, "score": 0, "creation_date": 1505925113, "post_id": 46327264, "comment_id": 79615535, "body": "no, at the first time it will be  question: answer question: answer  but at second time if user want to add another information it will be  question: question:  answer  i want the output like the first"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1505925851, "post_id": 46327264, "comment_id": 79616005, "body": "Read the duplicate question. If you&#39;re using formatted extraction (which you <i>are</i> with you y/n prompt), your input stream continues to harbor the trailing newline you entered upon hitting thumping &lt;enter&gt; on your keyboard following your y/n choice. Consuming the input stream through <code>&#39;\\n&#39;</code> should handle that, and the duplicate question shows ways to do that."}], "owner": {"reputation": 9, "user_id": 8642920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee0295694a9c487f52d860f87ebe344?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMAD AZIMUDDIN ", "link": "https://stackoverflow.com/users/8642920/mohamad-azimuddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1505925677, "answer_count": 0, "score": 0, "last_activity_date": 1505927659, "creation_date": 1505924846, "last_edit_date": 1505927659, "question_id": 46327264, "link": "https://stackoverflow.com/questions/46327264/why-does-my-program-not-display-the-output-in-correct-order", "closed_reason": "Duplicate", "title": "Why does my program not display the output in correct order?", "body": "<p>I want to create a program that asks the user to input values. </p>\n\n<p>The program will ask the user if they want to add more information but when the user wants to add another piece of information the output displays: </p>\n\n<p>First-Question: Answer<br>\nQuestion: Answer<br>\nSecond-Question:<br>\nQuestion: Answer</p>\n\n<p><img src=\"https://i.stack.imgur.com/jJE1s.png\" alt=\"Error\"> </p>\n\n<p>This is my code </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;iomanip&gt;\n#include&lt;string&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nvoid IssueBooks() {\n\n    vector&lt;string&gt; bookID;\n    vector&lt;string&gt; bookTitle;\n    vector&lt;string&gt; bookAuthor;\n    vector&lt;string&gt; bookIssuer;\n\n    string ID;\n    string  Title, Author, Issuer;\n    char question;\n\n    //get bookID\n    cout &lt;&lt; \"Enter book ID: \"&lt;&lt;endl;\n    getline(cin, ID);\n    bookID.push_back(ID);\n\n    //get bookTitle\n    cout &lt;&lt; \"Enter book title: \"&lt;&lt;endl;\n    getline(cin, Title);\n    bookTitle.push_back(Title);\n\n    //get bookAuthor\n    cout &lt;&lt; \"Enter book author: \"&lt;&lt;endl;\n    getline(cin, Author);\n    bookAuthor.push_back(Author);\n\n    //get bookIssuer\n    cout &lt;&lt; \"Enter Issuer Name: \"&lt;&lt;endl;\n    getline(cin, Issuer);\n    bookIssuer.push_back(Issuer);\n\n    ofstream out(\"IssueRecord.txt\");\n\n    for (int j = bookID.size() - 1 ; j &gt;= 0 ; j--) {\n        out &lt;&lt; bookID[j] &lt;&lt; \" \" &lt;&lt; bookTitle[j] &lt;&lt; \" \" &lt;&lt; bookAuthor[j] \n&lt;&lt; \" \" &lt;&lt; bookIssuer[j]&lt;&lt;endl;\n    }\n\n    cout &lt;&lt; \"Do you want to add more books? &lt;Y/N&gt;\" &lt;&lt; endl;\n    cin &gt;&gt; question;\n\n    switch(question) {\n    case 'Y' :\n        IssueBooks();\n        break;\n    case 'y' :\n        IssueBooks();\n        break;\n\n    case 'N' :\n        break;\n    case 'n' :\n        break;\n\n    default :\n        cout &lt;&lt; \"Invalid input, try again !\" &lt;&lt; endl;\n    }\n}\n\nint main() {\n    IssueBooks();\n\n   return 0;\n}\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 1, "creation_date": 1505925145, "post_id": 46327183, "comment_id": 79615559, "body": "Copy the code and use a debugger"}, {"owner": {"reputation": 3294, "user_id": 2190251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9318640992144436a6b04d07eb947933?s=128&d=identicon&r=PG", "display_name": "FelixEnescu", "link": "https://stackoverflow.com/users/2190251/felixenescu"}, "edited": false, "score": 0, "creation_date": 1505930089, "post_id": 46327183, "comment_id": 79618469, "body": "ASCII code of <code>a</code> is 97: <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ASCII</a>"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8568930, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uNTQa.jpg?s=128&g=1", "display_name": "Iti Shree", "link": "https://stackoverflow.com/users/8568930/iti-shree"}, "edited": false, "score": 0, "creation_date": 1505930212, "post_id": 46328420, "comment_id": 79618541, "body": "Thanks, got it now."}], "tags": [], "owner": {"reputation": 96, "user_id": 6281260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43d6b575f82a76bc2df75175cf5aa71?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram Kumar", "link": "https://stackoverflow.com/users/6281260/vikram-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1505928822, "creation_date": 1505928822, "answer_id": 46328420, "question_id": 46327183, "link": "https://stackoverflow.com/questions/46327183/codechefs-subsequence-equality/46328420#46328420", "title": "CodeChef&#39;s Subsequence Equality", "body": "<p>In the line <code>if(a[s[i]-97] &gt;= 2)</code>, we are actually checking for occurrence of that particular character(s[i]) with help of array a(index 0 for a, index 1 for b, index 2 for c, and so on...)..\nAs 97 is ascii code of 'a' so 'a'-97 will give you 0, 'b' - 97(i.e. 98 - 97) will give 1.. and so on.</p>\n"}], "owner": {"reputation": 115, "user_id": 8568930, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uNTQa.jpg?s=128&g=1", "display_name": "Iti Shree", "link": "https://stackoverflow.com/users/8568930/iti-shree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 46328420, "answer_count": 1, "score": 0, "last_activity_date": 1505928822, "creation_date": 1505924583, "question_id": 46327183, "link": "https://stackoverflow.com/questions/46327183/codechefs-subsequence-equality", "title": "CodeChef&#39;s Subsequence Equality", "body": "<p>I am a beginner coder (I studied C++ in high school) now I started solving questions from this competitive programming website. I tried to solve this question but wasn't quite successful. </p>\n\n<p>So, this is someone else code, what I cannot understand is Why they subtracted ASCII value of 'a' from string that is inside an array. Here is the question and solution:</p>\n\n<p><a href=\"https://www.codechef.com/problems/LIKECS01\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/LIKECS01</a>\n<a href=\"https://i.stack.imgur.com/GilnS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GilnS.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/28tHX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/28tHX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "boost-python", "boost-optional"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8271191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309e6058dcefd55b8a5690b892b30a6?s=128&d=identicon&r=PG&f=1", "display_name": "rocketeer", "link": "https://stackoverflow.com/users/8271191/rocketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1506019685, "last_edit_date": 1506019685, "creation_date": 1506011751, "answer_id": 46349023, "question_id": 46327013, "link": "https://stackoverflow.com/questions/46327013/exposing-boostoptionalt-via-boost-python-as-internal-reference-or-none/46349023#46349023", "title": "Exposing boost::optional&lt;T&gt; via Boost.Python as internal reference or None", "body": "<p>I found a workaround by adding a getter to <code>struct Foo</code> that either returns a pointer to the object held by boost::optional or a nullptr in case of boost::none. As <code>&amp;*bar</code> returns <code>const Bar*</code> I had to use <code>const_cast</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Bar {}\n\nstruct Foo {\n  Bar* getBar() { return (bar ? const_cast&lt;Bar*&gt;(&amp;*bar) : nullptr); };\n  boost::optional&lt;Bar&gt; bar;\n}\n\nBOOST_PYTHON_MODULE(mymodule) {\n  using namespace boost::python;\n\n  python_optional&lt;Bar&gt;();  //registering the converter\n\n  class_&lt;Foo&gt;(\"Foo\")\n    .add_property ( \"bar\", make_function(static_cast&lt; Bar*(Foo::*)() &gt;(&amp;Foo::getBar), return_internal_reference&lt;&gt;() ), make_setter(&amp;Foo::bar) )\n  ;\n}\n</code></pre>\n\n<hr>\n\n<p>In case <code>bar</code> belongs to a base class of <code>Foo</code> Python will produce an ArgumentError like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt; import mymodule\n&gt;&gt; foo = mymodule.Foo()\n&gt;&gt; foo.bar = mymodule.Bar()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nBoost.Python.ArgumentError: Python argument tpyes in\n  None.None(Foo, Bar)\ndid not match C++ signature:\n  None(FooBase {lvalue}, boost::optional&lt;Bar&gt;)\n</code></pre>\n\n<p>To solve the problem define a getter and a setter for <code>bar</code> in class <code>Foo</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Bar {}\n\nstruct FooBase {\n  boost::optional&lt;Bar&gt; bar;\n}\n\nstruct Foo : public FooBase {\n  Bar* getBar() { return (bar ? const_cast&lt;Bar*&gt;(&amp;*bar) : nullptr); };\n  void setBar(const Bar* bar) { bar ?  this-&gt;bar = *bar : this-&gt;bar = boost::none; }\n}\n\nvoid (Foo::*foo_bar_set)(const Bar*) = &amp;Foo::setBar;\n\nBOOST_PYTHON_MODULE(mymodule) {\n  using namespace boost::python;\n\n  python_optional&lt;Bar&gt;();  //registering the converter\n\n  class_&lt;Foo&gt;(\"Foo\")\n    .add_property ( \"bar\", make_function(static_cast&lt; Bar*(Foo::*)() &gt;(&amp;Foo::getBar), return_internal_reference&lt;&gt;() ), foo_bar_set )\n  ;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8271191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309e6058dcefd55b8a5690b892b30a6?s=128&d=identicon&r=PG&f=1", "display_name": "rocketeer", "link": "https://stackoverflow.com/users/8271191/rocketeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 46349023, "answer_count": 1, "score": 1, "last_activity_date": 1506019787, "creation_date": 1505923961, "last_edit_date": 1506019787, "question_id": 46327013, "link": "https://stackoverflow.com/questions/46327013/exposing-boostoptionalt-via-boost-python-as-internal-reference-or-none", "title": "Exposing boost::optional&lt;T&gt; via Boost.Python as internal reference or None", "body": "<p>I am exposing my C++ classes via Boost.Python. My intention is to expose member variables that are of a user-defined class type with an internal reference. This worked fine until I decided to introduce a member variable of type boost::optional&lt;T&gt;.</p>\n\n<p>There are several great posts that show how to expose boost::optional&lt;T&gt; as return by value. Specifically, I have implemented <a href=\"https://stackoverflow.com/a/28604575/8271191\">this converter</a>. The other relevant pieces of my code look like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Bar {}\n\nstruct Foo {\n  boost::optional&lt;Bar&gt; bar;\n}\n\nBOOST_PYTHON_MODULE(mymodule) {\n  using namespace boost::python;\n\n  python_optional&lt;Bar&gt;();  //registering the converter\n\n  class_&lt;Foo&gt;(\"Foo\")\n    .add_property ( \"bar\", make_getter(&amp;Foo::bar, return_value_policy&lt;return_by_value&gt;()), make_setter(&amp;Foo::bar) )\n  ;\n}\n</code></pre>\n\n<p>I tried to replace <code>return_value_policy&lt;return_by_value&gt;()</code> with either <code>return_value_policy&lt;reference_existing_object&gt;()</code> or <code>return_internal_reference&lt;&gt;()</code>. Both produced a Python TypeError:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt; import mymodule\n&gt;&gt; foo = mymodule.Foo()\n&gt;&gt; bar = foo.bar\nTypeError: No Python class registered for C++ class boost::optional&lt;Bar&gt;\n</code></pre>\n\n<p>My understanding is that I now I am getting a reference to the boost::optional&lt;T&gt; object. The converter I registered is, however, not called because it expects a boost::optional&lt;T&gt; object and not a reference to such an object. I thought about changing the converter but I am new to this and I really do not know how. Any suggestions?</p>\n"}, {"tags": ["c++", "string", "gdi+"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1505923992, "post_id": 46326980, "comment_id": 79614843, "body": "use a <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostringstream\" rel=\"nofollow noreferrer\"><code>std::wostringstream</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 3, "last_activity_date": 1505925141, "last_edit_date": 1505925141, "creation_date": 1505924178, "answer_id": 46327067, "question_id": 46326980, "link": "https://stackoverflow.com/questions/46326980/how-to-make-concatenations-at-const-wchar-t-parameters/46327067#46327067", "title": "How to make concatenations at const wchar_t* parameters?", "body": "<p>Raw C-style string pointers (like <code>const wchar_t*</code>) cannot be concatenated together with a string semantic using <code>operator+</code>. However, you can concatenate instances of <strong>C++ string classes</strong>, like ATL <code>CString</code> or <code>std::wstring</code>, just to name a few.</p>\n\n<p>Since you have also <em>integer</em> values to concatenate, you can first convert these to string objects (e.g using <code>std::to_wstring()</code>), and then use the overloaded <code>operator</code>+ to concatenate the various strings.</p>\n\n<pre><code>#include &lt;string&gt; // for std::wstring and to_wstring()\n...\n\n// Build the file name string using the std::wstring class\nstd::wstring filename = L\"C:/Users/PCUSER/AppData/screen-\";\nfilename += std::to_wstring(filenumber); // from integer to wstring\nfilename += L\".jpg\";\n\np_bmp-&gt;Save(filename.c_str(), // convert from wstring to const wchar_t*\n            &amp;pngClsid, \n            NULL);\n</code></pre>\n\n<hr>\n\n<p>Another approach you may follow if you use the ATL <code>CString</code> class is formatting the result string in a way similar to <code>printf()</code>, invoking the <code>CString::Format()</code> method, e.g.:</p>\n\n<pre><code>CStringW filename;\nfilename.Format(L\"C:/Users/PCUSER/AppData/screen-%d.jpg\", filenumber);\n\np_bmp-&gt;Save(filename, // implicit conversion from CStringW to const wchar_t*\n            &amp;pngClsid, \n            NULL);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8642768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eff901692c01c210015e442300121e?s=128&d=identicon&r=PG&f=1", "display_name": "A. Cakolli", "link": "https://stackoverflow.com/users/8642768/a-cakolli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 46327067, "answer_count": 1, "score": 3, "last_activity_date": 1505925685, "creation_date": 1505923858, "last_edit_date": 1505925685, "question_id": 46326980, "link": "https://stackoverflow.com/questions/46326980/how-to-make-concatenations-at-const-wchar-t-parameters", "title": "How to make concatenations at const wchar_t* parameters?", "body": "<p>How to make concatenations at <strong><code>const wchar_t*</code></strong> parameter in this case? </p>\n\n<p>I'm trying to make screenshots that are saved automatically with names like: </p>\n\n<pre><code>screen-1.jpg\nscreen-2.jpg\nscreen-3.jpg\n...\nscreen-i.jpg`\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>p_bmp-&gt;Save(L\"C:/Users/PCUSER/AppData/screen-\" + filenumber + \".jpg\", &amp;pngClsid, NULL);\n //filenumber is ant int that increases automatically\n</code></pre>\n\n<p>But it's giving me an error:</p>\n\n<blockquote>\n<pre><code>expression must have integral or unscoped\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "c", "c++11", "casting", "static-cast"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1505924014, "post_id": 46326947, "comment_id": 79614857, "body": "1) Just because something compiles doesn&#39;t mean that it&#39;ll work, or will produce the correct results. 2) Doing things the right way is usually more work than taking illegal shortcuts 3) The drawback is that it&#39;s undefined behavior."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1505924792, "post_id": 46326947, "comment_id": 79615332, "body": "A C-style cast tells the compiler &quot;Just shut up and do it!&quot;. That &quot;takes care of&quot; the error or warning message, but then it is up to you whether it actually works. The compiler will not tell you, as you just asked it not to."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 1, "creation_date": 1505926443, "post_id": 46326947, "comment_id": 79616341, "body": "Runtime polymorphism and the STL do not mix well. This is an alternative, <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/ptr_container/doc/ptr_container.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/libs/ptr_container/doc/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1505924218, "creation_date": 1505924218, "answer_id": 46327070, "question_id": 46326947, "link": "https://stackoverflow.com/questions/46326947/c-style-cast-of-stdvector/46327070#46327070", "title": "C-style cast of std::vector", "body": "<blockquote>\n  <p>Why does the first snippet even compile but using a static_cast causes a compilation error?</p>\n</blockquote>\n\n<p>Because a C-style cast is a sledgehammer that will throw all caution to the wind. Its motto is \"you want it? you got it\", regardless of what \"it\" is. A static cast will only do a cast that is correct in terms of static type checking.</p>\n\n<blockquote>\n  <p>What is the computational cost of the two methods? I expect the second one to incur into extra costs due to creating the temporary vector object new_vec, but I am not sure.</p>\n</blockquote>\n\n<p>Your expectation is correct. But the cost of code with well defined semantics can be in added work for the program.</p>\n\n<blockquote>\n  <p>What are the drawbacks of using the C-style cast in these cases?</p>\n</blockquote>\n\n<p>That it will always compile, and you won't find out there's a problem until you try to run it, on some platform in the future. Because it <em>may</em> work today.</p>\n"}, {"tags": [], "owner": {"reputation": 1435, "user_id": 180656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c91c0ae420dcaf04e5e9061be6a93c?s=128&d=identicon&r=PG", "display_name": "Josef Grahn", "link": "https://stackoverflow.com/users/180656/josef-grahn"}, "is_accepted": false, "score": 1, "last_activity_date": 1505925102, "last_edit_date": 1505925102, "creation_date": 1505924753, "answer_id": 46327229, "question_id": 46326947, "link": "https://stackoverflow.com/questions/46326947/c-style-cast-of-stdvector/46327229#46327229", "title": "C-style cast of std::vector", "body": "<ol>\n<li>There are many cases in C++ where the specification allows the compiler to not give an error, but where the behaviour of the resulting program is undefined. C-style casts are largely a legacy compatibility leftover from the C heritage, and invokes undefined (often broken) behaviour in a lot of cases.</li>\n<li>Theoretically the compiler can optimise it away, but most likely yes, it will incur some computational cost. It's likely smaller than e.g. the overhead of calling all of those objects, which you would presumably do after having cast them.</li>\n<li>C-style cast have the drawback that it doesn't prevent you from invoking undefined behaviour, and doesn't make it clear what your intent is (e.g. with <code>auto x = (Foo) someConstType</code>, did you mean to remove a <code>const</code> qualifier or was that by accident?).</li>\n</ol>\n\n<p>In your specific case, the C-style version will yield an incorrect program if you have multiple inheritance, and up-casting a pointer means its address needs to change to point to the appropriate base class object.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1505933194, "last_edit_date": 1505933194, "creation_date": 1505924898, "answer_id": 46327287, "question_id": 46326947, "link": "https://stackoverflow.com/questions/46326947/c-style-cast-of-stdvector/46327287#46327287", "title": "C-style cast of std::vector", "body": "<p>That code is nonsense. There is no requirement that the <strong>value</strong> of a <code>Derived*</code> is the same as the <strong>value</strong> of a <code>Base*</code>, so telling the compiler to pretend that a <code>std::vector&lt;B*&gt;</code> is a <code>std::vector&lt;A*&gt;</code> is not required to to anything sensible. In fact, that pointer type pun is impossible if you have multiple bases of the same type. Try it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Base {\n    int i;\n};\n\nstruct I1 : Base {\n    int j;\n};\n\nstruct I2 : Base {\n    int k;\n};\n\nstruct Derived : I1, I2 {\n    int l;\n};\n\nint main() {\n    Derived d;\n    Base* b1 = &amp;(I1&amp;)d;\n    Base* b2 = &amp;(I2&amp;)d;\n    std::cout &lt;&lt; (void*)&amp;d &lt;&lt; ' ' &lt;&lt; (void*)b1 &lt;&lt; ' ' &lt;&lt; (void*)b2 &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1505935475, "creation_date": 1505935475, "answer_id": 46330272, "question_id": 46326947, "link": "https://stackoverflow.com/questions/46326947/c-style-cast-of-stdvector/46330272#46330272", "title": "C-style cast of std::vector", "body": "<p>A <code>std::vector&lt;Derived*&gt;</code> is a type unrelated to a <code>std::vector&lt;Base*&gt;</code>.  There is no legal way to interpret the memory of one as the other, short of something insanely stupid like placement new.</p>\n\n<p>Your attempts generate errors if you are lucky.  If you are not, they generate undefined behavior, which means it may seem to work today but tomorrow they can silently format your hard drive due to anything from a compiler upgrade, to code far away being changed, or the phase of the moon.</p>\n\n<p>Now, it is the case that many of the operations on a <code>vector&lt;Base*&gt;</code> work on a <code>vector&lt;Derived*&gt;</code>.  We can handle this with <em>type erasure</em>.</p>\n\n<p>Here is a low-efficiency type erasure class:</p>\n\n<pre><code>template&lt;class R, class...Args&gt;\nusing vcfunc = std::function&lt;R(void const*, Args...)&gt;;\n\ntemplate&lt;class T, class R, class...Args, class F&gt;\nvcfunc&lt;R,Args...&gt; vcimpl( F&amp;&amp; f ) {\n  return [f=std::forward&lt;F&gt;(f)](void const* pt, Args&amp;&amp;...args)-&gt;R{\n    return f( *static_cast&lt;T const*&gt;(pt), std::forward&lt;Args&gt;(args)... );\n  };\n}\ntemplate&lt;class T&gt;\nstruct random_access_container_view {\n  using self=random_access_container_view;\n  struct vtable_t {\n    vcfunc&lt;std::size_t&gt; size;\n    vcfunc&lt;bool&gt; empty;\n    vcfunc&lt;T, std::size_t&gt; get;\n  };  \n  vtable_t vtable;\n  void const* ptr = 0;\n  template&lt;class C,\n    class dC=std::decay_t&lt;C&gt;,\n    std::enable_if_t&lt;!std::is_same&lt;dC, self&gt;{}, int&gt; =0\n  &gt;\n  random_access_container_view( C&amp;&amp; c ):\n    vtable{\n      vcimpl&lt;dC, std::size_t&gt;( [](auto&amp; c){ return c.size(); } ),\n      vcimpl&lt;dC, bool&gt;( [](auto&amp; c){ return c.empty(); } ),\n      vcimpl&lt;dC, T, std::size_t&gt;( [](auto&amp; c, std::size_t i){ return c[i]; } )\n    },\n    ptr( std::addressof(c) )\n  {}\n\n  std::size_t size() const { return vtable.size( ptr ); }\n  bool empty() const { return vtable.empty( ptr ); }\n  T operator[](std::size_t i) const { return vtable.get( ptr, i ); }\n};\n</code></pre>\n\n<p>Now this is a bit toy as it doesn't support iteration.  (Iterators are about as complex as the container I wrote above).</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/26799224cce7624f\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<pre><code>struct A {\n    char name='A';\n};\n\nstruct B:A {\n    B(){ name='B'; }\n};\n\nvoid print_them( random_access_container_view&lt;A&gt; container ) {\n    for (std::size_t i = 0; i &lt; container.size(); ++i ) {\n        std::cout &lt;&lt; container[i].name &lt;&lt; \"\\n\";\n    }\n}\nint main() {\n    std::vector&lt;B&gt; bs(10);\n    print_them( bs );\n}\n</code></pre>\n\n<p>Languages that permit containers-of-child to be treated as lists-of-base basically do the above kind of thing automatically.  Either the containers themselves have the equivalent of a virtual function table, or when you treat a container as a view to base a virtual function table is synthesized and used by the client code.</p>\n\n<p>The above isn't maximally efficient; note that every <code>std::function</code> was stateless.  I could replace them with function pointers pretty easily, and store a static vtable based on the type <code>C</code> instead to save memory (but add an other indirection).</p>\n\n<p>We can also do this a bit simpler with a non-view type, in that we could use the type erasure model-concept pattern instead of this manual vtable pattern.</p>\n"}], "owner": {"reputation": 112, "user_id": 7168080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-MgXTO6inLpI/AAAAAAAAAAI/AAAAAAAAAHg/Z58RjQVuGdo/photo.jpg?sz=128", "display_name": "antogilbert", "link": "https://stackoverflow.com/users/7168080/antogilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 46327070, "answer_count": 4, "score": 0, "last_activity_date": 1505935475, "creation_date": 1505923754, "question_id": 46326947, "link": "https://stackoverflow.com/questions/46326947/c-style-cast-of-stdvector", "title": "C-style cast of std::vector", "body": "<p>I stumbled upon this implementation in an existing code base when trying to find a solution to casting an <code>std::vector&lt;Derived *&gt;</code> to a <code>std::vector&lt;Base *&gt;</code>. I am using C++11.</p>\n\n<p>Consider the following code snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass A\n{\n    // some implementation details\n};\n\nclass B : public A\n{\n    // some implementation details\n};\n\nvoid count(std::vector&lt;A *&gt; const &amp; a_vec)\n{\n  std::cout &lt;&lt; \"IT HAS THESE MANY PTRS: \" &lt;&lt; a_vec.size() &lt;&lt; std::endl;\n}\n\nint main()\n{\n  B * b;\n\n  std::vector&lt;B *&gt; b_vec {b};\n  count((std::vector&lt;A *&gt; &amp;) b_vec);\n\n  return 0;\n}\n</code></pre>\n\n<p>It felt extremely dodgy and so I tried to find an alternative. <a href=\"https://stackoverflow.com/a/902703/7168080\">This post</a> suggested an approach using <code>std::vector::assign</code>. So now, \n my main function would look like this:</p>\n\n<pre><code>int main()\n{\n  B * b;\n\n  std::vector&lt;B *&gt; b_vec {b};\n  std::vector&lt;A *&gt; new_vec;\n  new_vec.assign(b_vec.begin(), b_vec.end());\n  count(new_vec);\n\n  return 0;\n}\n</code></pre>\n\n<p>It compiles and works as expected. Now I have the following questions:</p>\n\n<p>1) Why does the first snippet even compile but using a <code>static_cast</code> causes a compilation error?</p>\n\n<p>2) What is the computational cost of the two methods? I expect the second one to incur into extra costs due to creating the temporary vector object <code>new_vec</code>, but I am not sure.</p>\n\n<p>3) What are the drawbacks of using the C-style cast in these cases?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "pyqt"], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1505928195, "creation_date": 1505928195, "answer_id": 46328248, "question_id": 46326933, "link": "https://stackoverflow.com/questions/46326933/getting-pyqt-winid-handle-pass-it-to-c/46328248#46328248", "title": "Getting pyqt winID handle pass it to c++", "body": "<p>The <code>winid</code>  returned from <code>window.winId()</code> is an unsigned integer pointer(in C/C++ terms). And so your <code>handle</code> is also.</p>\n\n<p>Hopefully you already loaded the shared object library, which has the \"C\" functions.</p>\n\n<p>Then just pass the handle by calling your C function using your library object.</p>\n\n<p>something like,</p>\n\n<pre><code>lib.game_init(handle)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10957219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df01099eea6bc2eafea71c47c7df3160?s=128&d=identicon&r=PG&f=1", "display_name": "Alexej", "link": "https://stackoverflow.com/users/10957219/alexej"}, "is_accepted": false, "score": 0, "last_activity_date": 1548266426, "creation_date": 1548266426, "answer_id": 54333100, "question_id": 46326933, "link": "https://stackoverflow.com/questions/46326933/getting-pyqt-winid-handle-pass-it-to-c/54333100#54333100", "title": "Getting pyqt winID handle pass it to c++", "body": "<p>I have got winID handle for windows so</p>\n\n<pre><code>class CamViewWidget(QtGui.QWidget):\n...\ndef on_sync_message(self, bus, message):\n    if message.get_structure().get_name() == 'prepare-window-handle':\n        message.src.set_property('force-aspect-ratio', True)\n        message.src.set_window_handle(self.winId().__int__())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 10537571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15914bf29c70a591c6183337bb52c257?s=128&d=identicon&r=PG&f=1", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/10537571/mehdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1600774494, "creation_date": 1600774494, "answer_id": 64008900, "question_id": 46326933, "link": "https://stackoverflow.com/questions/46326933/getting-pyqt-winid-handle-pass-it-to-c/64008900#64008900", "title": "Getting pyqt winID handle pass it to c++", "body": "<p>winId() returns sip.voidptr object. To use it in WinAPIs such as MessageBoxA, you need to convert it by int().</p>\n<pre><code>hWnd = int(QWidget.winId())\nctypes.windll.user32.MessageBoxA(hWnd,&quot;Hi&quot;,&quot;Hi&quot;, 0x40)\n</code></pre>\n"}], "owner": {"reputation": 1061, "user_id": 1051003, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b40a5dd56673f2fa56f05e6f95a1f030?s=128&d=identicon&r=PG", "display_name": "user1051003", "link": "https://stackoverflow.com/users/1051003/user1051003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1042, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1600774494, "creation_date": 1505923722, "question_id": 46326933, "link": "https://stackoverflow.com/questions/46326933/getting-pyqt-winid-handle-pass-it-to-c", "title": "Getting pyqt winID handle pass it to c++", "body": "<p>I have a function called:</p>\n\n<pre><code>bool game_init(void* window);\n</code></pre>\n\n<p>takes a pointer to window handle,basically it just initialize opengl, and do rendering from c++(I export this function to python using boost::python),now I created a simple hello word window,to try it.</p>\n\n<pre><code>app = QtWidgets.QApplication([\"\",\"\"])\nwindow = QtWidgets.QMainWindow()\nwinid = window.winId()\nctypes.pythonapi.PyCapsule_GetPointer.restype = ctypes.c_void_p\nctypes.pythonapi.PyCapsule_GetPointer.argtypes = [ctypes.py_object, ctypes.c_char_p]\nhandle = ctypes.pythonapi.PyCapsule_GetPointer(winid.ascapsule() , None)\n</code></pre>\n\n<p>Interesting that All I did the handle is just an integer something like <code>85983252</code> which I guess it is the handle of the hello world window,but how do I pass this integer as void * so that my c++ code can create an opengl window using that?\nCurrently the error gives me: python parameter bool game_init(int); does not match the cpp code.</p>\n\n<pre><code>environment:\nLinux,pyqt5 boost::python gcc,python 3.4\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "linux-kernel"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1505923598, "post_id": 46326867, "comment_id": 79614603, "body": "A file is stored in the filesytem. dd does the same."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1505923598, "post_id": 46326867, "comment_id": 79614604, "body": "You can bypass the block cache on <code>open()</code> by setting the <code>O_DIRECT</code> flag (if it is supported by the file-system driver)."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1505924343, "post_id": 46326867, "comment_id": 79615041, "body": "What makes you think that the file system is not &quot;efficient&quot; here?"}, {"owner": {"reputation": 3732, "user_id": 1719372, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Xwn9U.jpg?s=128&g=1", "display_name": "bytefire", "link": "https://stackoverflow.com/users/1719372/bytefire"}, "edited": false, "score": 1, "creation_date": 1505924731, "post_id": 46326867, "comment_id": 79615290, "body": "Source code of <code>dd</code> which you mentioned, might have some hints. <code>dd_copy</code> function can be a good starting point: <a href=\"http://lingrok.org/xref/coreutils/src/dd.c#2039\" rel=\"nofollow noreferrer\">lingrok.org/xref/coreutils/src/dd.c#2039</a>"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505924999, "post_id": 46326867, "comment_id": 79615472, "body": "Filesystems generally prefer contiguous blocks, except if you append multiple times (which is fully in your control), or if they do transparent compression (and why do you care about that?)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505925408, "post_id": 46326867, "comment_id": 79615730, "body": "How big are your files: terabytes or gigabytes or petabytes??"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1505926100, "post_id": 46326867, "comment_id": 79616154, "body": "@mldssr: could you please <b>edit your question</b> to improve it: explain how large are your files and what kind of application are you coding!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505980753, "post_id": 46326867, "comment_id": 79636643, "body": "Even with the edit, you don&#39;t explain enough your context (e.g. total volume of data, number of files) and application (is it video, web server, ...).... But 16 disks to keep a few hundred files of a few giogabytes each is overkill."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505985475, "post_id": 46326867, "comment_id": 79639667, "body": "If your question is related to <a href=\"https://stackoverflow.com/questions/46199135/how-to-design-a-driver-for-this-storage-system\">this one</a> you should have mentioned it. But all your questions still lack context and motivation (what kind of application are you developing, what industry, what data volume)...."}], "answers": [{"tags": [], "owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "is_accepted": false, "score": 1, "last_activity_date": 1506002682, "last_edit_date": 1506002682, "creation_date": 1505924245, "answer_id": 46327081, "question_id": 46326867, "link": "https://stackoverflow.com/questions/46326867/how-to-store-a-file-directly-in-certain-continuous-disk-blocks-in-linux-with-c-c/46327081#46327081", "title": "How to store a file directly in certain continuous disk blocks in Linux with C/C++?", "body": "<p>No, there's no way to do this.</p>\n\n<p>The point of the various system and library calls, and of the whole idea of a filesystem, is to present to a program an <em>abstraction</em> of the various messy details involved in storing bytes on disk. There is no unix-standard way of getting below this, and opening up the abstraction.</p>\n\n<p>It's conceivable that there is some back-door API to the inner workings of some filesystems, but I doubt it.  There be (very bad-tempered) dragons.</p>\n\n<p>If you're concerned with high-bandwidth access to storage, then you should look instead at whatever tuning opportunities your filesystem offers, and consider changing the filesystem, or other storage solution, that you're using.  That's a big project, which I wouldn't want to offer advice on.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505982252, "post_id": 46327381, "comment_id": 79637636, "body": "Probably bypassing the page cache would slow down the system (in  the OP&#39;s context)"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505986776, "post_id": 46327381, "comment_id": 79640541, "body": "@BasileStarynkevitch I would benchmark to find that out."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1505925184, "creation_date": 1505925184, "answer_id": 46327381, "question_id": 46326867, "link": "https://stackoverflow.com/questions/46326867/how-to-store-a-file-directly-in-certain-continuous-disk-blocks-in-linux-with-c-c/46327381#46327381", "title": "How to store a file directly in certain continuous disk blocks in Linux with C/C++?", "body": "<p>Using <code>O_DIRECT</code> when <code>open</code>ing file bypasses the page cache in the kernel.</p>\n\n<p>It must be supported by the filesystem. And you must satisfy the constraints specified in <code>man open(2)</code> when using <code>O_DIRECT</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1505987244, "post_id": 46327383, "comment_id": 79640949, "body": "I was under impression that <code>O_DIRECT</code> is often used by databases. For example, MySQL InnoDB opens data files with <code>O_DIRECT</code>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1505987640, "post_id": 46327383, "comment_id": 79641295, "body": "Probably useful for very large files. But OP have small (gigabyte sized) ones"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1506014237, "last_edit_date": 1506014237, "creation_date": 1505925198, "answer_id": 46327383, "question_id": 46326867, "link": "https://stackoverflow.com/questions/46326867/how-to-store-a-file-directly-in-certain-continuous-disk-blocks-in-linux-with-c-c/46327383#46327383", "title": "How to store a file directly in certain continuous disk blocks in Linux with C/C++?", "body": "<p>The <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow noreferrer\">page cache</a> is <em>improving</em> performance, so you don't want to bypass it (or file system and other layers in the kernel). BTW, you are wrong in believing that <code>dd</code> would bypass them (and you could <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> some <code>dd</code> command to check), since <code>dd</code> is using (like your applications) <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system calls</a> (listed in <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>)</p>\n\n<p>You could read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\"><em>Advanced Linux Programming</em></a> and <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems : Three Easy Pieces</em></a> (both are freely downloadable) to understand that more.</p>\n\n<p>BTW, when creating a file system (e.g. <code>mkefs</code>) you can tune parameters like block size (e.g. <code>-b</code> option to <a href=\"http://man7.org/linux/man-pages/man8/mke2fs.8.html\" rel=\"nofollow noreferrer\">mke2fs(8)</a>...); perhaps you might recreate your file system with a larger block size (but that won't matter a lot).</p>\n\n<p>You could dedicate a disk partition to your application (but you probably <em>should not</em>). See <a href=\"http://man7.org/linux/man-pages/man8/raw.8.html\" rel=\"nofollow noreferrer\">raw(8)</a> -probably deprecated- and <a href=\"http://man7.org/linux/man-pages/man4/sd.4.html\" rel=\"nofollow noreferrer\">sd(4)</a>. Then format your disk and access e.g. <code>/dev/sdb3</code> as a block device from your code. But again, this is often unwise.</p>\n\n<p>Notice that these days applications rarely use raw disk partition. As an example, consider RDBMS such as PostGreSQL or MySQL. In the 1980s they generally used raw disk partitions, today they are using large disk <em>files</em> (so the file overhead does not matter) and routinely manage datasets of many terabytes.</p>\n\n<p>If you care about performance, I recommend instead to use a large buffer (e.g. a megabyte or some of them, not a kilobyte) for <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"nofollow noreferrer\">read(2)</a> and <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow noreferrer\">write(2)</a> operations, perhaps with the <a href=\"http://man7.org/linux/man-pages/man2/posix_fadvise.2.html\" rel=\"nofollow noreferrer\">posix_fadvise(2)</a> (and even the <a href=\"http://man7.org/linux/man-pages/man2/readahead.2.html\" rel=\"nofollow noreferrer\">readahead(2)</a>) system call. Using <code>O_DIRECT</code> to <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">open(2)</a> (mentioned in <a href=\"https://stackoverflow.com/a/46327381/841108\">Maxim's answer</a>) would bypass the page cache so could slow down things (even if in some cases it could slightly speed up). Look also <a href=\"http://man7.org/linux/man-pages/man2/fdatasync.2.html\" rel=\"nofollow noreferrer\">fsync(2)</a>. In some (but not all) cases accessing a file thru memory mapping with <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a> could be useful. Benchmark to find out the good buffer size for your particular application and computer (including hardware).</p>\n\n<p>But you won't get miracles: the bottleneck is probably the disk hardware itself (not the file system or any other software layer). If possible, buy more RAM (to have a better <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow noreferrer\">page cache</a>) and get a fast SSD.</p>\n\n<p>Maybe (or probably) you should consider using RDBMS (PosGresSQL, MySQL), or non-SQL DBMS (MongoDb, ....), or libraries like <a href=\"http://sqlite.org/\" rel=\"nofollow noreferrer\">Sqlite</a> or <a href=\"http://www.gnu.org.ua/software/gdbm/\" rel=\"nofollow noreferrer\">GDBM</a>. They are well tuned and support many terabytes.</p>\n\n<p>For huge datasets (petabytes), you are likely to redesign your application, buy/use/develop specialized hardware and software and hire experts (but then you won't ask here). For large content (terabytes), using files is sensible, and big files of several terabytes are well managed today. If you have lots -e.g. millions- of files (each of small size) you may want to organize them in directory trees (e.g. rather long paths like <code>dir01/subdir234/file4566</code>); if possible avoid huge directories (e.g. of many thousand files). I see no reason to want contiguous disk blocks, since file systems manage that very well today.</p>\n\n<p>BTW, on current disk hardware (both spinning &amp; SSD), \"contiguous\" blocks  don't mean much....</p>\n\n<p>Look also for inspiration into existing code of <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> applications similar to yours.</p>\n\n<p><sup>Note. I am guessing that by \"large files\" you mean something which can be kept on a single disk (so a few terabytes at most).</sup></p>\n\n<blockquote>\n  <p>All the files I need to store are 100MB ~ 1GB. </p>\n</blockquote>\n\n<p>These are actually quite small (or at least medium sized) files, and they would likely sit entirely in RAM (in the page cache, see also <a href=\"http://linuxatemyram.com/\" rel=\"nofollow noreferrer\">http://linuxatemyram.com/</a> ...). So you really should not bother, and of course you'll better keep them as plain files in some ordinary file system (no need to tune anything in practice).</p>\n\n<blockquote>\n  <p>All I need is to store them into <code>/dev/sd[bcd...]</code> and remember where they are stored in case to read.</p>\n</blockquote>\n\n<p>It seems you think of bypassing the file system, use some raw disk partition, and painfully mimic the role of a file system in your user-land code. In short, <strong>don't do that</strong> (remember that file systems are extremely well designed and tuned system code in the kernel; you won't do as well in only a few months of work).  It could even be worse (because you won't use the page cache as efficiently as your system does). Keep your data as ordinary file in ordinary file systems.\n(Life is short, don't reinvent the wheel!).</p>\n\n<blockquote>\n  <p>I am making a small simply storage system consisting of 16+ HDDs. </p>\n</blockquote>\n\n<p>Perhaps you want an <a href=\"https://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29\" rel=\"nofollow noreferrer\">LVM</a> and/or some <a href=\"https://en.wikipedia.org/wiki/RAID\" rel=\"nofollow noreferrer\">RAID</a>. I'm surprised you mention a small thing with more than 16 disks (perhaps buying fewer, but larger, disks might be better). BTW, 16 disks to keep a few dozen files of a  few gigabytes each is really overkill (since that fits in <em>one</em> terabyte disk). Don't forget to have <em>enough RAM!</em> And <em>don't forget backups!</em></p>\n\n<p>Remember that CPUs are many thousands times <a href=\"http://norvig.com/21-days.html#answers\" rel=\"nofollow noreferrer\">faster</a> than disks (even SSDs). So almost always file system software layer overhead don't matter at all. Probably your code is I/O bound, not CPU bound, so optimizing your code for CPU is useless (however, tuning buffer sizes etc... is worthwhile, but you should benchmark).</p>\n\n<p><sup>P.S. it is a pity that you are asking <a href=\"https://stackoverflow.com/questions/46199135/how-to-design-a-driver-for-this-storage-system\">several</a> questions related to the same task, but don't give enough context, motivation, and details (what volume &amp; bandwidth of data, what computer, what kind of application and code, what domain and industry, etc ...). I'm sure that with better and more detailed questions -as long as this answer- you'll get better and more useful answers.</sup></p>\n"}], "owner": {"reputation": 21, "user_id": 8374081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348ee545747fde8172c6aa5942c8728c?s=128&d=identicon&r=PG&f=1", "display_name": "mldssr", "link": "https://stackoverflow.com/users/8374081/mldssr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "closed_date": 1505943423, "answer_count": 3, "score": -3, "last_activity_date": 1506014237, "creation_date": 1505923449, "last_edit_date": 1505975496, "question_id": 46326867, "link": "https://stackoverflow.com/questions/46326867/how-to-store-a-file-directly-in-certain-continuous-disk-blocks-in-linux-with-c-c", "closed_reason": "Needs more focus", "title": "How to store a file directly in certain continuous disk blocks in Linux with C/C++?", "body": "<p>I am making a small simply storage system consisting of 16+ HDDs. All the files I need to store are 100MB ~ 1GB. It makes a big fuss over a minor issue to employ a complete file system. All I need is to store them into \n<code>/dev/sd[bcd...]</code> and remember where they are stored in case to read.</p>\n\n<p>Write()/fwrite() would have system buffer and file system involved, I think? How can I skip the file system and store a file directly in certainly continuous disk blocks with C/C++ efficiently, just like <code>dd</code>?</p>\n"}, {"tags": ["c++", "boost", "boost-units"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505940330, "post_id": 46326816, "comment_id": 79623726, "body": "I&#39;m not so sure about that linked sample. It seems to return wrong things: <a href=\"http://coliru.stacked-crooked.com/a/615e8be190e18463\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/615e8be190e18463</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505940847, "post_id": 46326816, "comment_id": 79623950, "body": "Oh aha. That sample is not doing what you&#39;d think it does: <a href=\"https://www.wolframalpha.com/input/?i=sqrt((1+foot)+%5E+2+%2B+(2m)%5E2)\" rel=\"nofollow noreferrer\">wolframalpha.com/input/?i=sqrt((1+foot)+%5E+2+%2B+(2m)%5E2)</a>"}, {"owner": {"reputation": 191, "user_id": 1012961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07db3b5c32124d2f2c62e1011662399e?s=128&d=identicon&r=PG", "display_name": "BaroneAshura", "link": "https://stackoverflow.com/users/1012961/baroneashura"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505976308, "post_id": 46326816, "comment_id": 79633966, "body": "@sehe the linked example is relevant only for the use of the <b>conversion_factor</b> function, which seems to return what I need. I have compiled nor run the code actually."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505979174, "post_id": 46337121, "comment_id": 79635617, "body": "Using C++11 you can write it as <a href=\"http://coliru.stacked-crooked.com/a/55b960720b737c48\" rel=\"nofollow noreferrer\"><code>using miles_per_hour = decltype(mile_unit{}&#47;hour_unit{});</code> -- see live demo/proof</a>"}, {"owner": {"reputation": 191, "user_id": 1012961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07db3b5c32124d2f2c62e1011662399e?s=128&d=identicon&r=PG", "display_name": "BaroneAshura", "link": "https://stackoverflow.com/users/1012961/baroneashura"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1505983156, "post_id": 46337121, "comment_id": 79638197, "body": "@sehe thanks for the suggestion, I will investigate if I can do it, since the source code needs to be compiled with different compilers, and at the moment it is unclear to me which C++ standards we can take advantage of (at the moment we stick to C++98 -.-&#39;)"}], "tags": [], "owner": {"reputation": 191, "user_id": 1012961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07db3b5c32124d2f2c62e1011662399e?s=128&d=identicon&r=PG", "display_name": "BaroneAshura", "link": "https://stackoverflow.com/users/1012961/baroneashura"}, "is_accepted": true, "score": 1, "last_activity_date": 1506072099, "last_edit_date": 1506072099, "creation_date": 1505976191, "answer_id": 46337121, "question_id": 46326816, "link": "https://stackoverflow.com/questions/46326816/conversion-factor-for-units-in-boost-units/46337121#46337121", "title": "conversion factor for units in boost.units", "body": "<p>I managed to find a relevant example in the Boost-users mailing list archive (<a href=\"https://groups.google.com/forum/#!searchin/boost-list/mph%7Csort:relevance/boost-list/AUw58m5XzYs/PnCxrDueClgJ\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>#include &lt;boost/units/base_units/us/mile.hpp&gt;\n#include &lt;boost/units/base_units/metric/hour.hpp&gt;\n\ntypedef boost::units::us::mile_base_unit::unit_type mile_unit;\ntypedef boost::units::metric::hour_base_unit::unit_type hour_unit;\n\ntypedef boost::units::divide_typeof_helper&lt;mile_unit, hour_unit&gt;::type miles_per_hour;\n</code></pre>\n\n<p>Once the unit is correctly declared, the <strong>conversion_factor</strong> function can be called to get what I need.</p>\n"}], "owner": {"reputation": 191, "user_id": 1012961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07db3b5c32124d2f2c62e1011662399e?s=128&d=identicon&r=PG", "display_name": "BaroneAshura", "link": "https://stackoverflow.com/users/1012961/baroneashura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 46337121, "answer_count": 1, "score": 1, "last_activity_date": 1506072099, "creation_date": 1505923293, "question_id": 46326816, "link": "https://stackoverflow.com/questions/46326816/conversion-factor-for-units-in-boost-units", "title": "conversion factor for units in boost.units", "body": "<p>I just started using boost-units, and I am trying to understand what code I should write to get the conversion factor between units. Following the <a href=\"http://www.boost.org/doc/libs/1_56_0/doc/html/boost_units/Examples.html#boost_units.Examples.RuntimeUnits\" rel=\"nofollow noreferrer\">Runtime Units Example</a>, I managed to get what I need for base_units. </p>\n\n<p>As an example, for length I can easily get the conversion factor from inch to meter as follows:</p>\n\n<pre><code>conversion_factor(imperial::inch_base_unit::unit_type(), si::meter_base_unit::unit_type())\n</code></pre>\n\n<p>This eventually allows me to define as many scaled units as I want, and get all the needed conversion factors.</p>\n\n<p>In the case of velocity, for example, which is declared as 'meter_per_second' unit in the relevant header, I cant figure out how to retrieve the conversion factor to convert it to kmh, or mph. I guess I need to define my own mph unit, which leads to the need to define (or retrieve) the definition of miles and hours, and putting them all together.</p>\n\n<p>How am I supposed achieve the desired result?</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "mfc"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1505923639, "post_id": 46326733, "comment_id": 79614627, "body": "You might need to AttachConsole and duplicate the returned handle."}, {"owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1505930366, "post_id": 46326733, "comment_id": 79618606, "body": "<code>AttachConsole(ATTACH_PARENT_PROCESS);</code> gives me a nonzero result, which the documentation defines as a successful result. But I still get no visible output. <code>AttachConsole(GetCurrentProcessId())</code> fails, and in that case <code>GetLastError()</code> says 0x1f, &quot;Device not working&quot;."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1505931807, "post_id": 46326733, "comment_id": 79619371, "body": "After AttachConsole(ATTACH_PARENT_PROCESS) you should be able to printf to console."}, {"owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1505934227, "post_id": 46326733, "comment_id": 79620666, "body": "@VuVirt That&#39;s what I thought. I even inserted an explicit <code>printf(&quot;Hello World!\\n&quot;);</code>as an extra check. Nothing appears."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1505976291, "post_id": 46326733, "comment_id": 79633957, "body": "Didn&#39;t understand why somebody has close voted this very clear and well written question."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "edited": false, "score": 0, "creation_date": 1505943167, "post_id": 46331943, "comment_id": 79624932, "body": "Thanks - things are getting better. I actually did get console output this time, but curiously, the console window showed the next command prompt before it showed my output."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1505960363, "post_id": 46331943, "comment_id": 79629287, "body": "Also set the standard handles to <code>NULL</code> before calling <code>AttachConsole</code> to ensure they get set to the console, which supports code that uses <code>GetStdHandle</code> directly. For a non-console app, the CRT won&#39;t update these handles automatically when it updates file descriptors 0, 1, and 2."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "edited": false, "score": 0, "creation_date": 1505960492, "post_id": 46331943, "comment_id": 79629313, "body": "@vacuumhead, in interactive mode the shell checks the subsystem of the child process to determine whether it should wait on it. It only waits for console applications. Your design is wrong with respect to this, and the only option is to forcibly wait via <code>start &#47;wait</code>. It would be better to create a console application -- at least a stub that calls your normal GUI app."}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": true, "score": 4, "last_activity_date": 1614294327, "last_edit_date": 1614294327, "creation_date": 1505942384, "answer_id": 46331943, "question_id": 46326733, "link": "https://stackoverflow.com/questions/46326733/stdout-output-doesnt-display-on-console-in-windows-mfc-dialog-based-app/46331943#46331943", "title": "stdout output doesn&#39;t display on console in Windows MFC dialog-based app", "body": "<p>Insert this code somewhere in <code>InitInstance()</code>, after that <code>printf()</code>, <code>std::cout</code> etc. should work:</p>\n<pre><code>if( AttachConsole( ATTACH_PARENT_PROCESS ) )\n{\n    freopen( &quot;CONIN$&quot;,  &quot;rb&quot;, stdin );   // reopen stdin handle as console window input\n    freopen( &quot;CONOUT$&quot;, &quot;wb&quot;, stdout );  // reopen stdout handle as console window output\n    freopen( &quot;CONOUT$&quot;, &quot;wb&quot;, stderr );  // reopen stderr handle as console window output\n}\n</code></pre>\n<p>You might also want to call <code>_setmode(_fileno(stdout), _O_U16TEXT)</code> (same for <code>stderr</code>) to <a href=\"https://stackoverflow.com/a/9051543/7571258\">enable Unicode output to the console</a>.</p>\n"}], "owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 1, "accepted_answer_id": 46331943, "answer_count": 1, "score": 2, "last_activity_date": 1614294327, "creation_date": 1505923071, "question_id": 46326733, "link": "https://stackoverflow.com/questions/46326733/stdout-output-doesnt-display-on-console-in-windows-mfc-dialog-based-app", "title": "stdout output doesn&#39;t display on console in Windows MFC dialog-based app", "body": "<h2>What I'm trying to do</h2>\n\n<p>I'm using Visual Studio to write a simple dialog based program. It performs its primary function as it should. Then I added support for running the app from a command prompt. It still works well when I invoke the program from a command line prompt, but any messages written to <code>stdout</code> or <code>stderr</code> are simply not displayed.</p>\n\n<h2>What I've tried</h2>\n\n<p>I've tried multiple variations of <code>_tprintf()</code>, <code>_ftprintf(stdout, etc)</code> and so on. No matter what, I don't get any output on the console.</p>\n\n<h2>How it decides whether to display the dialog</h2>\n\n<p>When the command line contains at least two arguments, the program bypasses the dialog and goes straight for executing the program's primary logic, which is embodied in the <code>Go(arg1, arg2)</code> function. When the command line doesn't have enough arguments, the dialog is used instead.</p>\n\n<h2>My Code</h2>\n\n<p>This is a very trimmed-down example. Much of what is left was generated by Visual Studio, and I've just added a few lines of my own code. This example won't actually compile, as there are unresolved external references.</p>\n\n<pre><code>BOOL CCNCSplineApp::InitInstance()\n{\n    // InitCommonControlsEx() is required on Windows XP if an application\n    // manifest specifies use of ComCtl32.dll version 6 or later to enable\n    // visual styles.  Otherwise, any window creation will fail.\n    INITCOMMONCONTROLSEX InitCtrls;\n    InitCtrls.dwSize = sizeof(InitCtrls);\n    // Set this to include all the common control classes you want to use\n    // in your application.\n    InitCtrls.dwICC = ICC_WIN95_CLASSES;\n    InitCommonControlsEx(&amp;InitCtrls);\n    std::time_t* p_clock = &amp;time_now;\n\n    CWinApp::InitInstance();\n    AfxEnableControlContainer();\n\n    // Create the shell manager, in case the dialog contains\n    // any shell tree view or shell list view controls.\n    CShellManager *pShellManager = new CShellManager;\n\n    // Standard initialization\n    SetRegistryKey(_T(\"MyCompany\"));\n\n    LPCTSTR cmdline = ::GetCommandLineW();\n    int argc;\n    LPWSTR* argv = ::CommandLineToArgvW(cmdline, &amp;argc);\n    if (2 &lt; argc)\n    {\n        FILE*tgt = _tfopen(argv[2], _T(\"w\"));\n        if (0 == tgt)\n        {\n            _tprintf(L\"Unable to open output file \\\"%s\\\"\\n\", argv[2]);\n            exit(-1);\n        }\n        CString inputFileName = argv[1];\n        Go(inputFileName, tgt);\n        CString status = StatusText();\n        if (status.GetLength() &gt; 0)\n        {\n            _tprintf(_T(\"%s\\n\"), (LPCTSTR)status);\n        }\n        return FALSE;\n    }\n\n    MyDialog dlg;\n    m_pMainWnd = &amp;dlg;\n    dlg.DoModal();\n\n    // Delete the shell manager created above.\n    if (pShellManager != NULL)\n    {\n        delete pShellManager;\n    }\n\n    // Since the dialog has been closed, return FALSE so that we exit the\n    //  application, rather than start the application'time_doa message pump.\n    return FALSE;\n}\n</code></pre>\n\n<h2>The Question</h2>\n\n<p>What do I need to change in this code to get the various <code>_tprintf()</code> calls to display text on the console?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1505923055, "post_id": 46326668, "comment_id": 79614236, "body": "You are overwriting the values in the array as you go along.  If you print everything at the end then you will only see the values from the last line (plus some values at the end from previous lines if those lines were longer).  You probably want either a 2D array, or you want to keep track of a an index that you can add to <code>j</code> so that you aren&#39;t starting at 0 when writing each line."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505923083, "post_id": 46326668, "comment_id": 79614252, "body": "Can I suggest looking at this?  <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1505923133, "post_id": 46326668, "comment_id": 79614291, "body": "Even after fixing that, your loop control limits are clearly different regardless. They&#39;re data-controlled in the first case, hard-coded to 99 in the second. Eventually that, too, is going to be an issue."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1505923205, "post_id": 46326668, "comment_id": 79614342, "body": "Plus of course, obligatory mention that you should be using <code>std::array</code> or <code>std::vector</code> instead of a raw array."}], "answers": [{"tags": [], "owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "is_accepted": true, "score": 0, "last_activity_date": 1505923270, "creation_date": 1505923270, "answer_id": 46326811, "question_id": 46326668, "link": "https://stackoverflow.com/questions/46326668/reading-from-a-text-file-and-printing-every-number-right-away-gives-different-ou/46326811#46326811", "title": "reading from a text file and printing every number right away gives different output than printing after reading all the file", "body": "<p>Each time you start the inner loop, you reset j to 0, so you overwrite the contents previously written to your array after reading each line. This results in your array only containing the last line of your file.<br>\nYou should maybe make another variable, initialize it once before the start of the outer loop and increment it inside the inner loop.</p>\n"}], "owner": {"reputation": 68, "user_id": 7277416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86103cc199cb412a61684849f23112f8?s=128&d=identicon&r=PG&f=1", "display_name": "jverbys", "link": "https://stackoverflow.com/users/7277416/jverbys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 46326811, "answer_count": 1, "score": 0, "last_activity_date": 1505923270, "creation_date": 1505922862, "question_id": 46326668, "link": "https://stackoverflow.com/questions/46326668/reading-from-a-text-file-and-printing-every-number-right-away-gives-different-ou", "title": "reading from a text file and printing every number right away gives different output than printing after reading all the file", "body": "<p>So I want to read number from a file, the file looks like so:</p>\n\n<pre><code>8\n9 5 7 -5 13 -4 11\n7 5 -3 12 -5 17 -3\n25 7 12 -3 5 -5 7 -5 3\n14 5 12 -3 10 -7 8\n5 1 -40\n33 5 15 -5 9 -3 8\n11 5 -12 8 -5 12 -3\n13 5 3 -4 25 -5 3\n</code></pre>\n\n<p>I need all the numbers, that are not on the first line and are not the first ones in the line, here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\n\nusing namespace std;\n\nint times[99];\n\nint n, k, t;\n\nint main()\n{\n    ifstream file(\"U1.txt\");\n\n    file &gt;&gt; n;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        file &gt;&gt; k &gt;&gt; t;\n        for (int j = 0; j &lt; t; j++)\n        {\n            file &gt;&gt; times[j];\n            cout &lt;&lt; times[j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n    for (int i = 0; i &lt; 99; i++)\n    {\n        cout &lt;&lt; times[i] &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Outputting every single number while reading gives what I want:</p>\n\n<pre><code>7 -5 13 -4 11\n-3 12 -5 17 -3\n12 -3 5 -5 7 -5 3\n12 -3 10 -7 8\n-40\n15 -5 9 -3 8\n-12 8 -5 12 -3\n3 -4 25 -5 3\n</code></pre>\n\n<p>For some reason my output after reading everything is like so (I don't mind about the 0s I know why they are here):</p>\n\n<pre><code>3 -4 25 -5 3 -5 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n</code></pre>\n"}, {"tags": ["c++", "class", "enums", "overloading", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "edited": false, "score": 0, "creation_date": 1505923048, "post_id": 46326686, "comment_id": 79614229, "body": "Hmm. I&#39;m new to the overloading operators but I&#39;ll definitely check it out. It&#39;s all still fuzzy to me. Thanks for the quick reply!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 14, "last_activity_date": 1505923613, "last_edit_date": 1505923613, "creation_date": 1505922914, "answer_id": 46326686, "question_id": 46326632, "link": "https://stackoverflow.com/questions/46326632/c-operator-overload-in-an-enum-class/46326686#46326686", "title": "c++ operator overload in an enum class", "body": "<pre><code>STEPS&amp; operator++(STEPS&amp; s);\n</code></pre>\n\n<p>is for <code>++step</code>.</p>\n\n<p>for <code>step++</code>, you need</p>\n\n<pre><code>STEPS operator++(STEPS&amp; s, int) { auto res = s; ++s; return res; }\n</code></pre>\n\n<p>It has been chosen to use extra parameter <code>int</code> to distinguish between pre and post increment operator.</p>\n\n<p>You may read <a href=\"http://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/language/operator_incdec</a> for more details.</p>\n"}], "owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4997, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1505923613, "creation_date": 1505922789, "question_id": 46326632, "link": "https://stackoverflow.com/questions/46326632/c-operator-overload-in-an-enum-class", "title": "c++ operator overload in an enum class", "body": "<p>So I'm writing a game using c++ and in my tutorial state, I have different steps that the user goes through, explaining how the game works.  I want to increment which step the user is on after a certain action is performed. (Mouse click). I tried overloading the <code>++</code> operator but I get an error saying <code>binary '++': 'STEPS' does not define this operator or a conversion to a type acceptable to the predefined operator</code>. I'm using visual studio and it's error code <code>C2676</code>.</p>\n\n<p>I have my enum class set up as follows:</p>\n\n<pre><code>enum class STEPS\n{\n    ONE,\n    TWO,\n    END_OF_LIST\n};\n\nSTEPS&amp; operator++(STEPS&amp; s)\n{\n    s = staic_cast&lt;STEPS&gt;(static_cast&lt;int&gt;(s) + 1);\n    if (s == STEPS::END_OF_LIST)\n    {\n        s = static_cast&lt;STEPS&gt;(static_cast&lt;int&gt;(s) - 1);\n    }\n    return s;\n}\n</code></pre>\n\n<p>In my updating function of my tutorial state class I check if the mouse was clicked. If it was I'm trying to increment steps.</p>\n\n<p>// this is defined in the header and set to STEPS::ONE upon initialization\n<code>STEPS steps;</code></p>\n\n<pre><code>TutorialState::Update()\n{\n    // If mouse was clicked\n    if (mouse.Left())\n    {\n        steps++; // this is giving me an error.\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "stl"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1505922744, "post_id": 46326572, "comment_id": 79614015, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow noreferrer\"><code>std::unordered_map::operator[]:</code> Returns a reference to the value that is mapped to a key equivalent to key, performing an insertion if such key does not already exist.</a>"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1505922780, "post_id": 46326572, "comment_id": 79614043, "body": "The documentation is pretty clear on this: <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_map/operator_a&zwnj;&#8203;t</a> &quot;Inserts a value_type object constructed in-place&quot; where <code>value_type</code> is a <code>pair&lt;Key, T&gt;</code>"}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 1, "creation_date": 1505922909, "post_id": 46326572, "comment_id": 79614136, "body": "Also, if you want to get an element without causing an insertion if the key does not exist (and causing an exception in that case), take a look at the <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/at\" rel=\"nofollow noreferrer\"><code>at</code></a> method. This is specially useful with <code>const</code> maps, since <code>operator[]</code> is, obviously, non-const."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1505943930, "post_id": 46326572, "comment_id": 79625187, "body": "@nwp, this is exactly what I am looking for. Could you add a reply? I will mark it as answer to benefit other people."}], "owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "closed_date": 1505944824, "answer_count": 0, "score": 0, "last_activity_date": 1505922622, "creation_date": 1505922622, "question_id": 46326572, "link": "https://stackoverflow.com/questions/46326572/things-happened-behind-the-scene-for-unordered-map-for-insert", "closed_reason": "Duplicate", "title": "things happened behind the scene for unordered_map for insert", "body": "<p>I created an <code>unordered_map</code>, and value type is <code>vector&lt;string&gt;</code>, when I insert element with key <code>1</code> on the 2nd line, it seems a new <code>vector&lt;string&gt;</code> is created on the fly -- since I can <code>push_back</code> smoothly (when key <code>1</code> does not exists)? I tried to refer C++ reference, but cannot find an answer. Does unordered_map responsible for automatically created an instance of value type when key does not exists?</p>\n\n<pre><code>unordered_map&lt;int, vector&lt;string&gt;&gt; a;\na[1].push_back(\"Hello C++ \");\ncout &lt;&lt; a[1][0] &lt;&lt; endl; // Hello C++ printed \n</code></pre>\n"}, {"tags": ["c++", "ios", "qt", "udp"], "comments": [{"owner": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1505981597, "post_id": 46326432, "comment_id": 79637209, "body": "You should really add your code, otherwise all you will get is wild guesses."}], "owner": {"reputation": 11, "user_id": 8642568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qwxBN9cvUjw/AAAAAAAAAAI/AAAAAAAAAOI/rladExbTy1I/photo.jpg?sz=128", "display_name": "Jacob_Lu", "link": "https://stackoverflow.com/users/8642568/jacob-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1537534592, "creation_date": 1505922185, "last_edit_date": 1537534592, "question_id": 46326432, "link": "https://stackoverflow.com/questions/46326432/qt-udp-works-well-on-android-but-ios", "title": "Qt UDP works well on Android, but IOS", "body": "<p>There is a Qt Project about data transmission with UDP\u3002</p>\n\n<p>1\uff0c successful build and run on computer, and transplant to Android working well;</p>\n\n<p>2,  To IOS, mobile debugging is ok , sending and receiving data both work;</p>\n\n<p>3,  Out of debugging mode, Open the App on mobile, Receiving data is ok, but sending is failed;</p>\n\n<p>4, Why the same project works well on Android ,but IOS?</p>\n"}, {"tags": ["c++", "objective-c", "macos", "notifications"], "owner": {"reputation": 11, "user_id": 8641971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032506c8ae71c1eb8f0bdf9503336a83?s=128&d=identicon&r=PG&f=1", "display_name": "DKirov", "link": "https://stackoverflow.com/users/8641971/dkirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505921981, "creation_date": 1505921981, "question_id": 46326368, "link": "https://stackoverflow.com/questions/46326368/how-to-notify-osx-for-an-external-file-change", "title": "How to notify OSX for an external file change", "body": "<p>I found a way to refresh the finder when a file is externally changed using:</p>\n\n<p><code>[[NSWorkspace sharedWorkspace] noteFileSystemChanged: path];</code></p>\n\n<p>But it looks like this does not notify the file system or any other apps about the change. What I'm trying to do is somehow broadcast a notification to every app using the file, or tell the OSX itself (and then the OSX to notify the apps) that it has changed.</p>\n\n<p>I also tried using:</p>\n\n<p><code>[[NSDistributedNotificationCenter defaultCenter] postNotificationName: NSWorkspaceDidPerformFileOperationNotification object: nil];</code></p>\n\n<p>But it does not work (also this notification is deprecated). And I don't know if other apps actually use this kind of notification system (for example I think VS Code is using it).</p>\n\n<p>If there is a solution in c++ will be better, but objective c++ is also okay.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qframe"], "comments": [{"owner": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "edited": false, "score": 0, "creation_date": 1505921653, "post_id": 46326216, "comment_id": 79613218, "body": "From the first impression it looks like that you forgot to declare <code>paintEvent</code> as <code>virtual</code> and/or using the <code>override</code> keyword."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "edited": false, "score": 1, "creation_date": 1505921843, "post_id": 46326216, "comment_id": 79613349, "body": "@PhilippLudwig It is not necessary to use override"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505921945, "post_id": 46326216, "comment_id": 79613435, "body": "@Som you can include the .ui file to be able to reproduce your code, which means: <i>not working fine.</i> ?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "edited": false, "score": 0, "creation_date": 1505922144, "post_id": 46326216, "comment_id": 79613591, "body": "Its a bit confusing, because when I keep the  values of row in &quot; QRect target(50,50,20,10);&quot; from 0 - 80, the image is displayed properly. After that it gets shrinking and then disappears, the image resolution is only 20*10 and the widget is around 500*400. @PhilippLudwig virtual is not making any change."}, {"owner": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505922488, "post_id": 46326216, "comment_id": 79613834, "body": "@eyllanesc You are right, my bad."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505922491, "post_id": 46326216, "comment_id": 79613836, "body": "@Som a query, you want <code>ui-&gt;frame</code> to be an object of the frame class you created?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505922587, "post_id": 46326216, "comment_id": 79613906, "body": "@eyllanesc yes. I have attached the widget.ui file in question. Thanks for your help ."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505922723, "post_id": 46326216, "comment_id": 79613996, "body": "I think you&#39;re going the wrong way. To confirm my idea, ie you want the frame you used in the design to be the frame class you created, am I correct?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505923032, "post_id": 46326216, "comment_id": 79614218, "body": "@eyllanesc yes.  What I want is to insert the image within the frame in the design, and I have to do it via subclassing the widget.cpp. But I am not sure if I am doing it in the right way."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "edited": false, "score": 0, "creation_date": 1505925144, "post_id": 46326216, "comment_id": 79615557, "body": "Thanks man , thats working."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1505984573, "post_id": 46326216, "comment_id": 79639053, "body": "Calling <code>QWidget::paintEvent(p);</code> in the end - is wrong. If you really need to draw original content - draw it at the begin of your <code>paintEvent</code> implementation"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1506001782, "last_edit_date": 1506001782, "creation_date": 1505924329, "answer_id": 46327104, "question_id": 46326216, "link": "https://stackoverflow.com/questions/46326216/drawing-on-a-main-classs-subclass-in-qt/46327104#46327104", "title": "Drawing on a main class&#39;s subclass in Qt", "body": "<p>If you want to replace a class X widget you must create a class that inherits from that class, in your case frame must inherit from <code>QFrame</code> and not directly from <code>QWidget</code>, since Qt Designer will use <code>QFrame</code> methods that <code>QWidget</code> does not have, instead a class that inherits from <code>QFrame</code> if it will have them.</p>\n\n<p>So you should change the next part in your code.</p>\n\n<p><strong>frame.h</strong></p>\n\n<pre><code>class frame : public QFrame\n{\n   ...\n</code></pre>\n\n<p><strong>frame.cpp</strong></p>\n\n<pre><code>frame::frame(QWidget *parent) : QFrame(parent)\n{\n\n}\n</code></pre>\n\n<p>Another error that is observed in your code is that you call <code>update()</code> inside <code>paintEvent()</code>, this can generate an infinite loop since <code>update()</code> calls <code>paintEvent()</code> indirectly. Also a widget your a painting space, this space we can get through the method <code>rect()</code>, if you draw outside that space not painted anything. Another bad practice is to create a pointer to <code>QPainter</code> since it will continually be called to that method and you will be creating memory in addition to that you are eliminating it correctly. From the above I propose the following code:</p>\n\n<pre><code>void frame::paintEvent(QPaintEvent *p)\n{\n    QWidget::paintEvent(p);\n    QPainter pPainter(this);\n    QImage img(\":/left.png\");\n    Q_ASSERT(!img.isNull());\n    QRect source(0,0,20,10);\n    QRect target(50,50,20,10);\n    pPainter.drawImage(target, img, source);\n}\n</code></pre>\n\n<p>And most importantly, when you run <code>f = new frame(ui-&gt;frame);</code> you are creating a new widget that by default takes a position relative to the parent, that's why you see the image, but this is not appropriate, what you should do is promote the widget.</p>\n\n<p>To promote right click on the <code>QFrame</code> that is in <code>QtDesigner</code>, and will be displayed a menu, select Promoted Widgets, opening a dialog window, in it you must put in Promoted class name the name of the class you have created, in your case <strong>frame</strong> , and in header file the .h file of your class, in your case <strong>frame.h</strong>, then press the add button and then the Promote button. As shown in the following images:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2nz7u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2nz7u.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/f9QIw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f9QIw.png\" alt=\"enter image description here\"></a></p>\n\n<p>After compiling your project, as final recommendation change the name of the widget in Qt Designer of frame to another for example myFrame so that there is no confusion with the name of the class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wRFUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wRFUR.png\" alt=\"enter image description here\"></a></p>\n\n<p>The complete example can be found in the following <a href=\"https://gist.github.com/eyllanesc/2d9e8ae64edade4d4090cba92819e000\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 46327104, "answer_count": 1, "score": 0, "last_activity_date": 1533646183, "creation_date": 1505921529, "last_edit_date": 1533646183, "question_id": 46326216, "link": "https://stackoverflow.com/questions/46326216/drawing-on-a-main-classs-subclass-in-qt", "title": "Drawing on a main class&#39;s subclass in Qt", "body": "<p>I have created a main class called widget.cpp, which inherits QFrame. And from widget.cpp I create a  subclass called frame.cpp in which I reimplement paintEvent() method for drawing image. The problem is that, when I try to draw image directly through widget.cpp by creating a paintEvent method for it , it works fine. But in the other case, when I implement it in the subclass frame.cpp its not working fine. Is there some thing I am doing wrong here. </p>\n\n<p>widget.h</p>\n\n<pre><code>#ifndef WIDGET_H\n#define WIDGET_H\n\n#include &lt;QFrame&gt;\n#include &lt;QPainter&gt;\n#include \"frame.h\"\n\nclass frame;\nnamespace Ui {\n    class Widget;\n}\nclass Widget : public QFrame\n{\n    Q_OBJECT\npublic:\n    explicit Widget(QWidget *parent = 0);\n    ~Widget();\nprivate:\n    Ui::Widget *ui;\n    frame * f;\n};\n#endif // WIDGET_H\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/PhqWe.png\" alt=\"enter image description here\"></p>\n\n<p>widget.cpp</p>\n\n<pre><code>#include \"widget.h\"\n#include \"ui_widget.h\"\n\nWidget::Widget(QWidget *parent) :\n    QFrame(parent),\n    ui(new Ui::Widget)\n{\n    ui-&gt;setupUi(this);\n    f = new frame(ui-&gt;frame);\n    f-&gt;show();\n}\n\nWidget::~Widget()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>frame.h</p>\n\n<pre><code>#ifndef FRAME_H\n#define FRAME_H\n\n#include &lt;QObject&gt;\n#include &lt;QWidget&gt;\n#include &lt;QPainter&gt;\n\nclass frame : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit frame(QWidget *parent = 0);\n\nprotected:\n    void paintEvent(QPaintEvent *p);\n\nsignals:\n\npublic slots:\n};\n\n#endif // FRAME_H\n</code></pre>\n\n<p>frame.cpp</p>\n\n<pre><code>#include \"frame.h\"\n\nframe::frame(QWidget *parent) : QWidget(parent)\n{\n\n}\n\nvoid frame::paintEvent(QPaintEvent *p)\n{\n    QPainter* pPainter = new QPainter(this);\n    QImage img(\":/left.png\");\n    Q_ASSERT(!img.isNull());\n    QRect source(0,0,20,10);\n    QRect target(50,50,20,10);\n    pPainter-&gt;drawImage(target, img,source);\n    QWidget::paintEvent(p);\n    QWidget::update();\n}\n</code></pre>\n\n<p>If I use QRect target(0,0,20,10) in the above code the image is drawn.</p>\n\n<p>testImage.pro</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = testImage\nTEMPLATE = app\n\nDEFINES += QT_DEPRECATED_WARNINGS\n\nSOURCES += main.cpp\\\n        widget.cpp \\\n    frame.cpp\n\nHEADERS  += widget.h \\\n    frame.h\n\nFORMS    += widget.ui\n\nRESOURCES += \\\n    src.qrc\n\nDISTFILES +=\n</code></pre>\n\n<p>widget.ui</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;Widget&lt;/class&gt;\n &lt;widget class=\"QWidget\" name=\"Widget\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;823&lt;/width&gt;\n    &lt;height&gt;468&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;Widget&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QFrame\" name=\"frame\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;200&lt;/x&gt;\n     &lt;y&gt;60&lt;/y&gt;\n     &lt;width&gt;420&lt;/width&gt;\n     &lt;height&gt;300&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n   &lt;property name=\"minimumSize\"&gt;\n    &lt;size&gt;\n     &lt;width&gt;420&lt;/width&gt;\n     &lt;height&gt;300&lt;/height&gt;\n    &lt;/size&gt;\n   &lt;/property&gt;\n   &lt;property name=\"maximumSize\"&gt;\n    &lt;size&gt;\n     &lt;width&gt;420&lt;/width&gt;\n     &lt;height&gt;306&lt;/height&gt;\n    &lt;/size&gt;\n   &lt;/property&gt;\n   &lt;property name=\"frameShape\"&gt;\n    &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;\n   &lt;/property&gt;\n   &lt;property name=\"frameShadow\"&gt;\n    &lt;enum&gt;QFrame::Raised&lt;/enum&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n &lt;/widget&gt;\n &lt;layoutdefault spacing=\"6\" margin=\"11\"/&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n\n"}, {"tags": ["c++", "visual-studio", "singleton"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1505921529, "post_id": 46326199, "comment_id": 79613118, "body": "And do you have an instance of it in a c++ file?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 4, "creation_date": 1505921603, "post_id": 46326199, "comment_id": 79613179, "body": "I recommend you consider this design for your singleton. <a href=\"https://stackoverflow.com/questions/1008019/c-singleton-design-pattern/1008289#1008289\" title=\"c singleton design pattern\">stackoverflow.com/questions/1008019/c-singleton-design-patte&zwnj;&#8203;rn/&hellip;</a>"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505921784, "post_id": 46326199, "comment_id": 79613309, "body": "Seconded. Your code is not a good C++ implementation for a singleton."}, {"owner": {"reputation": 741, "user_id": 1773011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/274b28985e391bb9d3d9bf53f8bc7b7c?s=128&d=identicon&r=PG", "display_name": "lightrek", "link": "https://stackoverflow.com/users/1773011/lightrek"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505922042, "post_id": 46326199, "comment_id": 79613507, "body": "@UKMonkey yes, this line <code>Conditions&amp; kcondition = Conditions::initialize();</code>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1505922186, "post_id": 46326199, "comment_id": 79613618, "body": "No, UKMonkey meant where is <code>Conditions* Conditions::instance;</code>?"}, {"owner": {"reputation": 741, "user_id": 1773011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/274b28985e391bb9d3d9bf53f8bc7b7c?s=128&d=identicon&r=PG", "display_name": "lightrek", "link": "https://stackoverflow.com/users/1773011/lightrek"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505923582, "post_id": 46326199, "comment_id": 79614590, "body": "@StoryTeller yes, you are right, I didn&#39;t define that static member."}], "owner": {"reputation": 741, "user_id": 1773011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/274b28985e391bb9d3d9bf53f8bc7b7c?s=128&d=identicon&r=PG", "display_name": "lightrek", "link": "https://stackoverflow.com/users/1773011/lightrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1505922312, "answer_count": 0, "score": 0, "last_activity_date": 1505921480, "creation_date": 1505921480, "question_id": 46326199, "link": "https://stackoverflow.com/questions/46326199/why-the-singleton-initialization-failed-link-error", "closed_reason": "Duplicate", "title": "Why the singleton initialization failed (link error)", "body": "<p>I have defined a singleton as below:</p>\n\n<pre><code>struct Conditions {\n    bool bMonolithic;\n    bool bKeepVersion;\n    bool bToc;\n\n    static Conditions&amp; initialize() {\n        if (instance == nullptr)\n            instance = new Conditions;\n        return *instance;\n    }\nprivate: \n    Conditions():bMonolithic(false), bKeepVersion(false), bToc(false) {}\n    static Conditions* instance;\n};\n</code></pre>\n\n<p>When I try to use it, I call the initialize() function:</p>\n\n<pre><code>Conditions&amp; kcondition = Conditions::initialize();\n</code></pre>\n\n<p>However, the compiler gives me this error:</p>\n\n<pre><code>error LNK2001: unresolved external symbol \"private: static struct Conditions * Conditions::instance\" (?instance@Conditions@@0PEAU1@EA)\n</code></pre>\n\n<p>What is the correct way to use the singleton?</p>\n"}, {"tags": ["c++", "linux", "qt", "arm"], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1505994021, "post_id": 46327041, "comment_id": 79645766, "body": "I thought the device has to be in the list under <code>qtbase&#47;mkspecs&#47;devices</code> as it&#39;s said in documentation : <i>italic_The device is selected through the configure tool&#39;s -device parameter. The name that follows after this argument must, at least  partially, match one of the subdirectories under devices._italic</i> So should I give the create the spec at this location? Also, where could I find documentation about the meaning and use of all those qmake variables?"}, {"owner": {"reputation": 8621, "user_id": 427544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aXnV3.jpg?s=128&g=1", "display_name": "Luca Carlon", "link": "https://stackoverflow.com/users/427544/luca-carlon"}, "reply_to_user": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1505994379, "post_id": 46327041, "comment_id": 79646004, "body": "Yes, place yours in there. There is a qmake manual but most are not documented. Read the specs for other chips and experiment."}, {"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1505996538, "post_id": 46327041, "comment_id": 79647385, "body": "Thanks, I&#39;ll try it and come back to tell you if I succeeded, however it can take a while as I have modifications to do to add Qt in buildroot."}], "tags": [], "owner": {"reputation": 8621, "user_id": 427544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aXnV3.jpg?s=128&g=1", "display_name": "Luca Carlon", "link": "https://stackoverflow.com/users/427544/luca-carlon"}, "is_accepted": false, "score": 1, "last_activity_date": 1505924082, "creation_date": 1505924082, "answer_id": 46327041, "question_id": 46326172, "link": "https://stackoverflow.com/questions/46326172/cross-compile-qt-for-specific-arm-target-from-64bits-linux/46327041#46327041", "title": "Cross-compile Qt for specific arm target from 64bits Linux", "body": "<p>Your assumptions are correct. You can read similar specs and create your own, those are pretty simple. For instance Pi2 is an armv7 device, you can start from <a href=\"https://github.com/qt/qtbase/blob/5.9/mkspecs/devices/linux-rasp-pi2-g%2B%2B/qmake.conf\" rel=\"nofollow noreferrer\">this qmake.conf</a>. Then, pass to configure:</p>\n\n<pre><code>-device &lt;given_name&gt; -device-option CROSS_COMPILE=&lt;path_and_prefix&gt; -sysroot &lt;your_sysroot&gt;\n</code></pre>\n\n<p>just change paths, tune cflags if needed etc... Then follow build tutorials.</p>\n"}], "owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505924082, "creation_date": 1505921406, "question_id": 46326172, "link": "https://stackoverflow.com/questions/46326172/cross-compile-qt-for-specific-arm-target-from-64bits-linux", "title": "Cross-compile Qt for specific arm target from 64bits Linux", "body": "<p>I'm currently trying to compile a project and port it to a 32bit target deploying a Linux based system.</p>\n\n<p>My host machine runs x86_64 Debian Stretch and my target is an Atmel SAMA5d2 running a custom Linux.\nMy cross toolchain is generated from buildroot.</p>\n\n<p>At the moment I'm able to cross compile applications for the target using the buildroot generated toolchain. However, I would like to integrate Qt and build Qt apps for the target.</p>\n\n<p>To be able to build my applications for the targetted platform I need to compile Qt for my target.\nTo do so I have to tell Qt to use the buildroot toolchain instead of the native one.</p>\n\n<p>From what I found I either have to provide <code>-device &lt;device&gt; --device-option CROSS_COMPILE=$TOOLCHAIN_PATH</code> or <code>-xplatform &lt;mkspec&gt;</code> to configure Qt with the expected toolchain.</p>\n\n<p>Obviously my target is not in the device list under <code>qtbase/mkspecs/devices</code> so I think the best solution is to create a mkspec for my target.</p>\n\n<p>My command should look like this : </p>\n\n<pre><code>./configure -xplatform &lt;my_mkspec&gt; -embedded arm -prefix &lt;customQtPath&gt;\n</code></pre>\n\n<p>However I'm kinda lost and I don't know how to do it only from documentation and what I found by googling my problem.<br/>\nAlso do I need to specify the target is 32bit as armv7 is only 32bits?</p>\n\n<p>I would be glad to have some help on this.\nThanks.</p>\n"}, {"tags": ["c++", "c++11", "io", "getline", "stringstream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505921429, "post_id": 46326117, "comment_id": 79613024, "body": "&quot; GDB confirms, line == &quot;2&quot; &quot;, but <code>line != ss</code>. The stream <code>ss</code> contains the line that you passed to the contructor, you read the first line from it, but after that you dont change contents of <code>ss</code> but expect it to contain more lines (that you read via <code>getline</code> but not into <code>ss</code>)"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1505921671, "post_id": 46326117, "comment_id": 79613229, "body": "If you want <code>ss</code> to contain the new line, you must give it to it: <code>ss.str(line)</code>. It won&#39;t read your mind and copy itself."}], "answers": [{"comments": [{"owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1505932325, "post_id": 46326272, "comment_id": 79619673, "body": "adding in <code>ss.str(line)</code> to begin the last code block did nothing for me. I have tried calling <code>ss.str(std::string())</code> as well to clear the string stream with no results"}, {"owner": {"reputation": 1160, "user_id": 8490870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c084fe165955c1d26cbc964c9291f566?s=128&d=identicon&r=PG", "display_name": "DrSvanHay", "link": "https://stackoverflow.com/users/8490870/drsvanhay"}, "reply_to_user": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "edited": false, "score": 0, "creation_date": 1505934302, "post_id": 46326272, "comment_id": 79620717, "body": "@Max Sorry, I&#180;ve added a clarification to my answer!"}], "tags": [], "owner": {"reputation": 1160, "user_id": 8490870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c084fe165955c1d26cbc964c9291f566?s=128&d=identicon&r=PG", "display_name": "DrSvanHay", "link": "https://stackoverflow.com/users/8490870/drsvanhay"}, "is_accepted": true, "score": 4, "last_activity_date": 1505934262, "last_edit_date": 1505934262, "creation_date": 1505921680, "answer_id": 46326272, "question_id": 46326117, "link": "https://stackoverflow.com/questions/46326117/stringstream-only-works-for-one-line-then-breaks-when-reused/46326272#46326272", "title": "stringstream only works for one line then breaks when reused", "body": "<p>The stringstream is not magically bound to your <code>std::string line;</code>:</p>\n\n<pre><code>   //second line\n   if (std::getline(file, line)) {               //GDB confirms, line == \"2\"\n     std::string num_waypoints_str;              \n     ss &gt;&gt; num_waypoints_str;                    //THIS DOES NOTHING?\n     num_waypoints = stoi(num_waypoints_str);\n</code></pre>\n\n<p>ss still has its value that was set up in the constructor much ahead of this. To be more precise:</p>\n\n<p><strong>The <a href=\"http://en.cppreference.com/w/cpp/io/basic_stringstream/basic_stringstream\" rel=\"nofollow noreferrer\">constructor</a> of std::stringstream makes a copy of the string you give it, it does not bind to it.</strong></p>\n\n<p>You can update the content of ss by using <a href=\"http://en.cppreference.com/w/cpp/io/basic_stringstream/str\" rel=\"nofollow noreferrer\">std::basic_stringstream::str</a> if you don\u00b4t want to construct another one. <strong>Note</strong>: Like the other streams stringstreams have flags, like eof for example, those need to be reset too. So in your case its:</p>\n\n<pre><code>    ss.clear();\n    ss.str(line);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1505933186, "creation_date": 1505933186, "answer_id": 46329626, "question_id": 46326117, "link": "https://stackoverflow.com/questions/46326117/stringstream-only-works-for-one-line-then-breaks-when-reused/46329626#46329626", "title": "stringstream only works for one line then breaks when reused", "body": "<p>Very close of an answer. You also need to clear the stringstream before reusing it.</p>\n\n<pre><code>//first use\ngetline(file, line);\nstringstream ss(line);\nss.clear()\n\n//second use\ngetline(file, line);\nss.str(line);\n</code></pre>\n"}], "owner": {"reputation": 1661, "user_id": 5141619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eaaef6fdf502d7df2b2be002fa9ad51c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5141619/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1079, "favorite_count": 0, "accepted_answer_id": 46326272, "answer_count": 2, "score": 0, "last_activity_date": 1505935094, "creation_date": 1505921232, "last_edit_date": 1505935094, "question_id": 46326117, "link": "https://stackoverflow.com/questions/46326117/stringstream-only-works-for-one-line-then-breaks-when-reused", "title": "stringstream only works for one line then breaks when reused", "body": "<p>I am trying to read in a simple file (simplified below) named <code>trajectory.txt</code> that looks like this:</p>\n\n<pre><code>true true false\n2\n</code></pre>\n\n<p>My code is simple, read in and store the the first two lines in some variables.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char** argv)\n{\n\nint num_waypoints=0;\nbool pos=1, vel=0, acc=0;\nstd::ifstream file;\nstd::string filename = \"trajectory.txt\";\nfile.open(filename.c_str());\nstd::string line;\n\n// Read first 2 lines\nif (std::getline(file, line)) {\n\n  //sstream for each line\n  std::stringstream ss(line);\n\n  //first line\n  std::string pos_str, vel_str, acc_str;\n  ss &gt;&gt; pos_str &gt;&gt; vel_str &gt;&gt; acc_str;\n\n  //evaluate\n  (pos_str == \"true\" ? pos = true : pos = false);\n  (vel_str == \"true\" ? vel = true : vel = false);\n  (acc_str == \"true\" ? acc = true : acc = false);\n\n  //second line\n  if (std::getline(file, line)) {               //GDB confirms, line == \"2\"\n    std::string num_waypoints_str;              \n    ss &gt;&gt; num_waypoints_str;                    //THIS DOES NOTHING?\n    num_waypoints = stoi(num_waypoints_str);\n}\n\n} //main()\n</code></pre>\n\n<p>The problem is that on the second to last line, <code>num_waypoints_str</code> is left empty after the stringstream is supposed to read in the values.</p>\n\n<p>Using GDB I was able to confirm that the stringstream did infact take on the value of \"2\" but it seems to be having a problem directing the value to num_waypoints_str.</p>\n\n<p>I therefore only have two questions:</p>\n\n<ol>\n<li>Why would the stringstream not pass its value to the string? (Does it have to do with being within a new scope)</li>\n<li>Can my code be simplified to input line 1 directly from the stringstream to the boolean <code>pos</code> or must I convert from string <code>pos_str</code> to <code>pos</code> by evaluating the string's value.</li>\n</ol>\n\n<p>I am compiling via <code>g++ -g -std=c++11 main.cpp -o main</code>. Please try to duplicate my issue. I feel I am missing something simple.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1505921428, "post_id": 46325994, "comment_id": 79613020, "body": "So, update <b>your</b> code so it does take those keys into account? As described in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646299(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a>, it retrieves the information for whole keyboard, including those keys.."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505921483, "post_id": 46325994, "comment_id": 79613077, "body": "Your code does&#39;nt show what you question implies. Care to create a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>?"}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1505921591, "post_id": 46325994, "comment_id": 79613169, "body": "@AlgirdasPreid\u017eius What do you mean by update my code? I use the value obtained from that method."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505921700, "post_id": 46325994, "comment_id": 79613256, "body": "It is an eternal question, you cannot reliably call neither GetKeyBoardState() nor GetKeyState() in a console mode app.  The values they return are synchronized with the message queue, a console mode app doesn&#39;t have one.  GetAsyncKeyState() is hack around that, but it is racy and can&#39;t solve the problem that GetKeyState solves.  You must use ReadConsoleInput()."}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505921882, "post_id": 46325994, "comment_id": 79613378, "body": "@HansPassant I am not trying to obtain console input, the console logs are only for debugging. The virtual keys come from a low level keyboard hook."}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505921974, "post_id": 46325994, "comment_id": 79613454, "body": "@spectras That code is essentially the whole application, besides a keyboard hook to get the virtual key. I added some comments to try and make it more understandable."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1505922128, "post_id": 46325994, "comment_id": 79613576, "body": "Sure, you cannot do this reliably either in a WH_KEYBOARD_LL hook, keyboard state is a thread-specific property and your thread state is not relevant to what the UI thread in the foreground process sees.  That is why WH_KEYBOARD exists."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1505922158, "post_id": 46325994, "comment_id": 79613599, "body": "@MichaelSmith Did you read the documentation, I linked to? The returned byte array contains the states for all relevant keys, including shift, ctrl, alt, and caps lock. Not every key in keyboard is a character key."}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1505922434, "post_id": 46325994, "comment_id": 79613796, "body": "@AlgirdasPreid\u017eius I am aware. I use the returned byte array. I understand the functionality of the method, and it does not work as I expected, which is why I am asking this question."}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505922796, "post_id": 46325994, "comment_id": 79614050, "body": "@HansPassant If <code>GetKeyboardState()</code> cannot be reliably used with a LL hook, then why does <code>GetKeyState()</code> work for individual keys, like shift."}, {"owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505926930, "post_id": 46325994, "comment_id": 79616618, "body": "@HansPassant When adding this line of code: <code>keyboard_state[VK_SHIFT] = GetKeyState(VK_SHIFT);</code> the issue I described is fixed. I just don&#39;t understand why I have to do this when <code>GetKeyboardState</code> does the same thing as <code>GetKeyState</code> but for all keys."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1505927564, "post_id": 46325994, "comment_id": 79616991, "body": "@MichaelSmith: <code>GetKeyState()</code> and <code>GetKeyboardState()</code> depend on the input state machine of the <b>calling thread</b>. Your hook runs in the thread that <b>installs it</b>, not the thread that <b>processes input</b> (<code>WH_KEYBOARD</code> is triggered by that thread). Your hook is not operating in the right state machine. Read the documentation more carefully..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505927586, "post_id": 46325994, "comment_id": 79617000, "body": "@MichaelSmith: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646301.aspx\" rel=\"nofollow noreferrer\"><code>GetKeyState()</code></a>: &quot;<i>The key status returned from this function changes as a thread reads key messages from its message queue. The status does not reflect the interrupt-level state associated with the hardware. Use the <code>GetAsyncKeyState</code> function to retrieve that information.</i>&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505927623, "post_id": 46325994, "comment_id": 79617018, "body": "@MichaelSmith: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646299.aspx\" rel=\"nofollow noreferrer\"><code>GetKeyboardState()</code></a>: &quot;<i>The status does not change as keyboard messages are posted to the thread&#39;s message queue, nor does it change as keyboard messages are posted to or retrieved from message queues of other threads. (Exception: Threads that are connected through <code>AttachThreadInput</code> share the same keyboard state.)</i>&quot;"}], "owner": {"reputation": 3, "user_id": 8638189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f780650659be31c2579dd4d09af4d22?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/8638189/michael-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505921801, "creation_date": 1505920903, "last_edit_date": 1505921801, "question_id": 46325994, "link": "https://stackoverflow.com/questions/46325994/winapi-getkeyboardstate-doesnt-include-shift-caps-lock-altgr", "title": "WinAPI - GetKeyboardState doesn&#39;t include shift/caps lock/altgr?", "body": "<p>I found <a href=\"https://stackoverflow.com/a/6949520/8638189\">this answer</a> when looking for a way to convert a virtual key to a unicode character. It happened to be for c#, but the same method was available in C++, so I used it. This is my current code:</p>\n\n<pre><code>BYTE keyboard_state[256];\nGetKeyboardState(keyboard_state); // Fill the array with the status of all keys.\n\n// vk_code comes from a low level keyboard hook.\n\nWCHAR data[256];\nconst int res = ToUnicode(vk_code, 0, keyboard_state, data, 256, 0); // Convert to unicode.\n\nchar str[256];\nwcstombs_s(0, str, data, 256); // Convert wchar to string.\nstd::cout &lt;&lt; str &lt;&lt; std::endl; // Logs lowercase regardless of shift/caps lock.\n</code></pre>\n\n<p>This worked great, except it did not take shift, altgr, or caps lock into account, even though <code>GetKeyboardState()</code> gets the current status of all keys. However, if I manually checked shift with <code>GetKeyState()</code> to see if shift is pressed, and then modified <code>keyboard_state</code> by setting the <code>VK_SHIFT</code> index to <code>0xff</code>, like in the C# example, it works.</p>\n\n<p>Why is that?</p>\n"}, {"tags": ["java", "c++", "string", "undefined", "swig"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505921588, "post_id": 46325975, "comment_id": 79613166, "body": "but ... std::string isn&#39;t undefined at all... your question is very misleading"}, {"owner": {"reputation": 39, "user_id": 1119738, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc76d9f5e0c23e2ee268acf37821a4a5?s=128&d=identicon&r=PG", "display_name": "dm_poy", "link": "https://stackoverflow.com/users/1119738/dm-poy"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505921696, "post_id": 46325975, "comment_id": 79613248, "body": "Oh I thought that was the problem. What is the problem then? because all the rest of the functions work."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505921740, "post_id": 46325975, "comment_id": 79613288, "body": "With a little bit of name unmangling: undefined symbol: AcornClient::open  The issue isn&#39;t in your header (else your compiler would complain) but in that your open() function isn&#39;t found - hence why you get a linker error."}, {"owner": {"reputation": 39, "user_id": 1119738, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc76d9f5e0c23e2ee268acf37821a4a5?s=128&d=identicon&r=PG", "display_name": "dm_poy", "link": "https://stackoverflow.com/users/1119738/dm-poy"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505922102, "post_id": 46325975, "comment_id": 79613559, "body": "Yes you are right, let me change the title but still I don&#39;t get it the .java and ...JNI.java files that were created have the open function as well."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505922993, "post_id": 46325975, "comment_id": 79614193, "body": "You&#39;ll need to include your (minimal) c++ file in the question."}, {"owner": {"reputation": 39, "user_id": 1119738, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc76d9f5e0c23e2ee268acf37821a4a5?s=128&d=identicon&r=PG", "display_name": "dm_poy", "link": "https://stackoverflow.com/users/1119738/dm-poy"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505923825, "post_id": 46325975, "comment_id": 79614748, "body": "At the moment my c++ functions are empty, the file includes the .hpp and the problem remains."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505923884, "post_id": 46325975, "comment_id": 79614779, "body": "You&#39;ve not posted it though."}], "owner": {"reputation": 39, "user_id": 1119738, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc76d9f5e0c23e2ee268acf37821a4a5?s=128&d=identicon&r=PG", "display_name": "dm_poy", "link": "https://stackoverflow.com/users/1119738/dm-poy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505922481, "creation_date": 1505920842, "last_edit_date": 1505922481, "question_id": 46325975, "link": "https://stackoverflow.com/questions/46325975/specific-fuction-is-undefined-for-java-swig-maybe-because-it-is-the-only-functi", "title": "Specific fuction is undefined for Java swig, maybe because it is the only function that uses strings", "body": "<p>I managed to setup swig for Java.\nIt works fine except from the functions that use std::string.</p>\n\n<p>My .hpp file has this:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt; \nusing namespace std; \n    namespace AcornClient {\n\n                int createConnection();     // Returns connection id\n\n                int freeConnection( int );  // Connection\n\n                int open( int,              // Connection\n                          std::string,      // Site\n                          std::string,      // Project\n                          std::string,      // Dataset\n                          std::string,      // Path\n                          bool,             // Recurse\n                          bool );           // Regex\n\n                int close( int );           // Server context\n        } \n</code></pre>\n\n<p>The interface is this:</p>\n\n<pre><code>%module AcornClientAPI\n%include \"std_string.i\"\n%include cpointer.i\n\ntypedef std::string String;\n\n%{\n  #include \"../cpp/AcornClientAPI.hpp\"\n    #include &lt;libxml/tree.h&gt;\n%}\n\n%include typemaps.i\n\nnamespace AcornClient {\n\n\n    int createConnection();     // Returns connection id\n\n    int freeConnection( int );  // Connection\n\n    int open( int,              // Connection\n              std::string,      // Site\n              std::string,      // Project\n              std::string,      // Dataset\n              std::string,      // Path\n              bool,             // Recurse\n              bool );           // Regex\n\n    int close( int );     // Server context \n}\n</code></pre>\n\n<p>Thhe code compiles and ruuns correctly when  I run the functions createConnection and freeConnection.</p>\n\n<p>When I try to use the fuction open in n Java like this:</p>\n\n<pre><code>int blah = AcornClientAPI.open(id, \"blah1\", \"blah2\", \"blah3\", \"blah4\", true, false);\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>java: symbol lookup error: libBlah.so: undefined symbol: _ZN11AcornClient4openEiSsSsSsSsbb\n</code></pre>\n\n<p>It should be something wrong with the strings. It doesn't identify them.</p>\n"}, {"tags": ["c++", "class", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 3, "creation_date": 1505920950, "post_id": 46325950, "comment_id": 79612665, "body": "This is a broad question. A quick and dirty way would be to drop your file in <code>&#47;usr&#47;local&#47;include</code> and <code>&#47;usr&#47;local&#47;lib</code>. <b>But</b> you don&#39;t want to do this, as this means your projects will be tied to the configuration of your system. The clean solution would be to build a library, either static (functions get copied into your programs when you compile) or dynamic (the library stands alone, and your programs find it dynamically when you run them). Managing this kind of things manually is error-prone though, you should use a build toolsuite (such as <a href=\"https://cmake.org/cmake-tutorial/\" rel=\"nofollow noreferrer\">CMake</a>)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505921381, "post_id": 46325950, "comment_id": 79612971, "body": "Learn to use a <a href=\"https://en.wikipedia.org/wiki/Build_automation\" rel=\"nofollow noreferrer\">build automation</a> tool like <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">make</a>  or <a href=\"https://ninja-build.org/\" rel=\"nofollow noreferrer\">ninja</a>. Configure it (with <code>make</code> by editing your <code>Makefile</code>) to compile with all warnings and debug info (<code>g++ -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505921477, "post_id": 46325950, "comment_id": 79613072, "body": "BTW, Linux don&#39;t have folders but directories. For simple projects, you don&#39;t want to have a subdirectory like your <code>include&#47;</code> and you could put all C++ header and source files in your build directory"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505921605, "post_id": 46325950, "comment_id": 79613184, "body": "Also, study the source code of existing free software projects (e.g. on <a href=\"http://github.com/\" rel=\"nofollow noreferrer\">github</a>...); they should inspire you!"}], "answers": [{"tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": false, "score": 2, "last_activity_date": 1505921155, "creation_date": 1505921155, "answer_id": 46326089, "question_id": 46325950, "link": "https://stackoverflow.com/questions/46325950/c-folder-of-personal-classes-in-ubuntu-16-04/46326089#46326089", "title": "C++ - Folder of personal classes in Ubuntu 16.04", "body": "<p>The reason why you don't have to manually link things form standard headers is that the compiler links <code>libc.a</code> by default. Other libraries are not linked by default and require compilation flags. For example, <code>cmath</code> requires the <code>-lm</code> flag since is not part of <code>libc</code>.</p>\n\n<p>Thus, the short answer is that you can't really avoid telling the compiler what to link. </p>\n"}], "owner": {"reputation": 562, "user_id": 4537160, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-eopRm1RsmD0/AAAAAAAAAAI/AAAAAAAAA7o/ILqdWSiUjTM/photo.jpg?sz=128", "display_name": "Carlo", "link": "https://stackoverflow.com/users/4537160/carlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505921155, "creation_date": 1505920775, "question_id": 46325950, "link": "https://stackoverflow.com/questions/46325950/c-folder-of-personal-classes-in-ubuntu-16-04", "title": "C++ - Folder of personal classes in Ubuntu 16.04", "body": "<p>Probably a stupid question, I've ben programming in C++ for some time but in comparison I'm kind of a newbie with Linux.</p>\n\n<p>I created a simple Matrix class in C++, and I've been using it in most of the programs I need for work.\nSo far, I've been copying the Matrix.h and Matrix.cc files in a /include subfolder I create inside of the different folders containing the programs I write, compiling them and linking everything together with makefiles. Not really that smart, I guess.</p>\n\n<p>Now, the first thing that came to my mind to improve the situation was to put a single copy of the Matrix.h and Matrix.cc in a folder, and to add their new path in the make files of my programs.\nIn this case, is there any \"preferred\" folder, where it should be more convenient to have the files? I seem to understand most header files are in /usr/include, while the class files are in /usr/lib.</p>\n\n<p>Specifically, I was thinking that, when I'm using this class I created, I have to include the header file in the main_program.cpp AND link the file Matrix.o when compiling.\nOn the other hand, when I use a \"normal\" class (say cmath, vector, iostream) I just need to include the header in the main file, and the compiler takes care of the linking.\nCan this be achieved by simply putting my class files in the right system folder? Should I modify anything in the compiler's options?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "windows", "http", "dns", "adblock"], "comments": [{"owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "edited": false, "score": 0, "creation_date": 1505920746, "post_id": 46325878, "comment_id": 79612473, "body": "You could change the ip preferences and put localhost as dns and then run your own dns server. beyond that everything would probably be too complicated."}, {"owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "edited": false, "score": 0, "creation_date": 1505920894, "post_id": 46325878, "comment_id": 79612614, "body": "Which brings me to a different point, you could just make your own adblock dns server and point dns queries there rather than have a list of domains on the computer itself. (I&#39;m not entirely sure about the legality, so you might want to investigate that before rerouting domains somewhere else)."}], "answers": [{"tags": [], "owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "is_accepted": true, "score": 0, "last_activity_date": 1506096054, "last_edit_date": 1506096054, "creation_date": 1506015145, "answer_id": 46349949, "question_id": 46325878, "link": "https://stackoverflow.com/questions/46325878/in-qt-c-how-do-i-redirect-x-com-domain-to-y-com-on-windows-without-hosts-file/46349949#46349949", "title": "In Qt/C++, How Do I Redirect x.com Domain to y.com on Windows without HOSTS file?", "body": "<p>There's a risk of doing domain intercepts and DLL hooks using APIs because AV products and/or Microsoft would have to whitelist you and certify you so that your activity doesn't look like a virus. And the odds of them doing that are not only low (unless you're a multimillion dollar company), but they want to protect their ad marketing too.</p>\n\n<p><strong>The best option is to make a browser extension for each of the browsers.</strong> You can even check the <a href=\"https://github.com/adblockplus/adblockpluschrome\" rel=\"nofollow noreferrer\">source code of the AdBlock Chrome extension</a> to see how it works. The trouble with that in 2017, however, is that there's no common browser extension platform just yet. It's getting much closer, but it's still not standardized yet. The new standard uses the Chrome standard. Opera, Firefox, Edge, and of course Chrome support this new standard to some degree, but it's kind of unsmooth still. And for anyone outside of that, such as IE11 or earlier, they're not going to have your Chrome-style browser extension and you'll have to go the seriously hard route to make one just for those earlier browsers or ask the customer to upgrade when your adware product installs.</p>\n\n<p>If you want something that doesn't require a browser extension, then the option you want is to add another DNS server connection in the user's DNS client settings. I don't know how to do this yet via C#, Qt/C++, or C++. However, you can shell out from those languages and use the \"netsh\" command to create those DNS connections. Probably a good strategy would be to find the user's default gateway IP. Then, make the DNS priority like so:</p>\n\n<ul>\n<li>your DNS server that redirects x.com to y.com so that you can do ad blocking from y.com via a web server</li>\n<li>the user's default gateway IP</li>\n<li>Google's DNS (8.8.8.8) in case the default gateway IP has changed for the user</li>\n</ul>\n\n<p>So, it would be something like these 4 netsh commands:</p>\n\n<pre><code>netsh delete dnsserver \"Wireless Network Connection\" all\nnetsh interface ip add dns name=\"Wireless Network Connection\" addr=1.1.1.1 index=1\nnetsh interface ip add dns name=\"Wireless Network Connection\" addr=192.168.254.254 index=2\nnetsh interface ip add dns name=\"Wireless Network Connection\" addr=8.8.8.8 index=3\n</code></pre>\n\n<p>Change \"Wireless Network Connection\" to \"Local Area Connection\" if they are using a cable for their computer instead of wireless. (Few do that these days.)</p>\n\n<p>Change 1.1.1.1 to the IP address of your special DNS server.</p>\n\n<p>Change 192.168.254.254 to the IP address of their default gateway.</p>\n\n<p>The third rule (8.8.8.8) tells the computer to use Google's DNS if all else fails. This is important because they could disconnect their laptop at home and go to a caf\u00e9 or something, and we need their DNS stuff to still work.</p>\n\n<p>Now, once you get the DNS client settings right, you need a cheap Linux cloud host to serve up the DNS server and web server. You might even need more than one in case one goes down for maintenance, and possibly on a different cloud zone or even cloud hosting provider.</p>\n\n<p>For the DNS product, if you have Linux skills, you can install and configure <code>dnsmasq</code> pretty easily to get a cheap and easy to manage DNS server on Linux. Or, if you search your Linux repositories, you can find other DNS servers, some more robust than others, some harder to use than others.</p>\n\n<p>For the web product, you can install NGINX or Apache on each of the two DNS servers. Then, you can make a configuration where any domain connection can come to it and it will load a web page for that domain. The web page can say something like, \"Ad Blocked By X Ad Blocker\" or whatever you want in very small font (small enough to fill the ad spot).</p>\n\n<p>Once this is all in place, you'll have to reboot the Win PC client and also clear their browser cache and history so that DNS will route through the new arrangement.</p>\n\n<p>The end result is that when people on that Windows PC surf the web and load an ad, their OS will make a DNS request to translate domain name to IP address. The first DNS server they'll reach will be your private DNS server. It can then say that x.com ad domain (as an example) is the IP address of your private DNS server. That private web server will then be contacted and it will display the ad block message. For all other requests not served up by your DNS servers, they'll go to their default gateway. If that's not serving up DNS as needed, then they'll failsafe to the Google DNS on 8.8.8.8. So, web browsing will work fine, minus ads.</p>\n\n<p>As for a bad domain list, there's a <a href=\"https://github.com/StevenBlack/hosts\" rel=\"nofollow noreferrer\">community-maintained bad domains list here on Github</a>.</p>\n\n<p>The trouble with the private DNS server that you host is that you're now having to pay a bandwidth bill for gobs of connections to it. That's probably undesirable unless you've got a proper way to monetize that. A better strategy would be to <em>NOT use a private DNS server on the web</em> and use a local DNS server and a local web server. You'd have to code both of those or use some third-party product for that. The trouble there, however, is that you may have some commercial licensing problems with that, or increased costs, and it won't work for some web developers who already use a web server on their workstation. </p>\n\n<blockquote>\n  <p>Therefore, as you can see from the added costs, hassle, and workstation configuration nuance troubles, the best strategy would be to use the browser extension for ad blocking.</p>\n</blockquote>\n\n<p>However, even at that, how are you going to differentiate your product from the free ad blockers out there that are doing a sensational job already?</p>\n"}], "owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 46349949, "answer_count": 1, "score": 1, "last_activity_date": 1506096054, "creation_date": 1505920598, "question_id": 46325878, "link": "https://stackoverflow.com/questions/46325878/in-qt-c-how-do-i-redirect-x-com-domain-to-y-com-on-windows-without-hosts-file", "title": "In Qt/C++, How Do I Redirect x.com Domain to y.com on Windows without HOSTS file?", "body": "<p>I've been thinking of the concept of an ad blocker that runs at the OS level, rather than as a browser extension. I know that I can place x.com in Windows' %windows%\\system32\\drivers\\etc\\hosts file and point it to the IP of y.com, and on y.com I can serve up content that says, \"This ad blocked by Example Ad Blocker\". However, the domain list I have is quite large -- like literally a thousand domains and growing, and so this wouldn't work well in file lookups. Does Windows permit some way to programmatically, like Qt/C++, add a DNS reroute rule in a more speedy way?</p>\n"}, {"tags": ["c++", "mfc", "webbrowser-control"], "comments": [{"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1505920757, "post_id": 46325868, "comment_id": 79612482, "body": "What browser version are you using, check <a href=\"https://weblog.west-wind.com/posts/2011/may/21/web-browser-control-specifying-the-ie-version\" rel=\"nofollow noreferrer\">this article</a>"}, {"owner": {"reputation": 487, "user_id": 1298683, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b925d0b40ff419cd0634682341802a33?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1298683/fernando"}, "reply_to_user": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1505921658, "post_id": 46325868, "comment_id": 79613223, "body": "@xMRi I&#39;m using IE11 and adding the X-UA-Compatible META tag just in case, to avoid older modes. I&#39;ll check out the article. Thank you."}, {"owner": {"reputation": 17362, "user_id": 3740093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XrJEq.png?s=128&g=1", "display_name": "Visual Vincent", "link": "https://stackoverflow.com/users/3740093/visual-vincent"}, "edited": false, "score": 0, "creation_date": 1505925256, "post_id": 46325868, "comment_id": 79615616, "body": "I&#39;m struggling to see what this has to do with VB.NET, when you mentioned C++?"}, {"owner": {"reputation": 487, "user_id": 1298683, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b925d0b40ff419cd0634682341802a33?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1298683/fernando"}, "reply_to_user": {"reputation": 17362, "user_id": 3740093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XrJEq.png?s=128&g=1", "display_name": "Visual Vincent", "link": "https://stackoverflow.com/users/3740093/visual-vincent"}, "edited": false, "score": 0, "creation_date": 1505930925, "post_id": 46325868, "comment_id": 79618886, "body": "@VisualVincent I don&#39;t actually work on the desktop app, so I thought since the app is in Windows and the team is 100% Windows based, I figured they built it in the vb.net environment. Also, it was one of the tags recommended so I went with it. I&#39;ll remove if it&#39;s not accurate."}, {"owner": {"reputation": 17362, "user_id": 3740093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XrJEq.png?s=128&g=1", "display_name": "Visual Vincent", "link": "https://stackoverflow.com/users/3740093/visual-vincent"}, "edited": false, "score": 0, "creation_date": 1505937908, "post_id": 46325868, "comment_id": 79622596, "body": "Well, it&#39;s not ;). VB.NET and C++ aren&#39;t even remotely close to each other. They&#39;re two completely different languages, and the only thing they have in common is that the .NET Framework (the VB.NET/C#/etc. environment) was built with C++."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1505940874, "post_id": 46325868, "comment_id": 79623965, "body": "Have a look at <a href=\"https://weblog.west-wind.com/posts/2017/Mar/08/Debugging-the-Web-Browser-Control-with-FireBug\" rel=\"nofollow noreferrer\">FireBug Lite</a>."}, {"owner": {"reputation": 487, "user_id": 1298683, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b925d0b40ff419cd0634682341802a33?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1298683/fernando"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1506031753, "post_id": 46325868, "comment_id": 79667812, "body": "@zett42 Thank you! I&#39;ve been looking for that like crazy Googling by I could not remember the name! I&#39;ve FireBug Lite a long time ago but the name had abandoned me completely. We&#39;ll see what I find. Thanks!"}], "owner": {"reputation": 487, "user_id": 1298683, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b925d0b40ff419cd0634682341802a33?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1298683/fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1505932583, "creation_date": 1505920568, "last_edit_date": 1505932583, "question_id": 46325868, "link": "https://stackoverflow.com/questions/46325868/can-i-debug-a-webpage-on-an-mfc-webbrowser-control", "title": "Can I debug a webpage on an MFC WebBrowser Control", "body": "<p>I have a desktop application built in <code>C++</code> that at one point opens a website in an <strong>MFC WebBrowser Control</strong>. I built this website myself and it looks perfect on standalone <code>IE11</code> but when it loads on the <strong>WebBrowser Control</strong> there are some issues with a font not loading. This font provides some icons for the site.</p>\n\n<p>I'm using the <strong>META</strong> tag to force <code>IE</code> to render in <code>IE11</code> and that's working fine. I just don't know why this font isn't loading on the <strong>WebBrowser Control</strong>.</p>\n\n<p>How can I debug this? The dev tools don't work here so I don't see a way to confirm the font is loading in the first place. Can the <strong>WebBrowser Control</strong> be configured to allow <code>DevTools</code>? I read the documentation but I didn't find any mentions of that.</p>\n\n<p>Any ideas? Thanks.</p>\n"}, {"tags": ["c++", "c++11", "bit-manipulation"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 6, "creation_date": 1505920636, "post_id": 46325847, "comment_id": 79612374, "body": "you mean <code>n &amp;\u00a01</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505920646, "post_id": 46325847, "comment_id": 79612379, "body": "&quot;This prints 5.&quot; really? what language is that?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1505920648, "post_id": 46325847, "comment_id": 79612383, "body": "\u201cThis prints 5.\u201d \u2014 it doesn\u2019t print anything. To get the low bit of a value, use <code>whatever &amp; 0x01</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1505920711, "post_id": 46325847, "comment_id": 79612442, "body": "<code>k = n &amp; 1</code> or <code>k = n % 2</code>. It&#39;s basically <a href=\"https://stackoverflow.com/q/8695945/995714\">getting a single bit</a>"}, {"owner": {"reputation": 57, "user_id": 4664178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b95bc4904f322a35c65925312349acbf?s=128&d=identicon&r=PG&f=1", "display_name": "noobita", "link": "https://stackoverflow.com/users/4664178/noobita"}, "edited": false, "score": 0, "creation_date": 1505920793, "post_id": 46325847, "comment_id": 79612510, "body": "Yeah. I got the answer. Thanks! :)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1505921018, "post_id": 46325847, "comment_id": 79612719, "body": "<code>n % 2</code> produces some trouble with negative <code>n</code>, it is a bit odd to say that the least significant bit of a negative number is negative 1"}, {"owner": {"reputation": 217, "user_id": 1774084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50caaf8e5b6670b3c64e695f79157d0?s=128&d=identicon&r=PG", "display_name": "Actarus", "link": "https://stackoverflow.com/users/1774084/actarus"}, "edited": false, "score": 0, "creation_date": 1505921136, "post_id": 46325847, "comment_id": 79612788, "body": "If you want k to be he last digit in binary representation of n (which is either  0 or 1), you want to know in fact if the number is even or odd ? Is it what you wanted ? if it is the case you can indeed use something line k = n %2"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 217, "user_id": 1774084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50caaf8e5b6670b3c64e695f79157d0?s=128&d=identicon&r=PG", "display_name": "Actarus", "link": "https://stackoverflow.com/users/1774084/actarus"}, "edited": false, "score": 0, "creation_date": 1505922245, "post_id": 46325847, "comment_id": 79613646, "body": "@Actarus&gt; not always. Sometimes you actually want the bit value (from a bit field, from some I/O port, \u2026). Since OP specifically tagged with bit manipulation I guess that&#39;s what he wants."}], "answers": [{"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 4, "creation_date": 1505920700, "post_id": 46325899, "comment_id": 79612435, "body": "OP asked for the last digit in binary though"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505920789, "post_id": 46325899, "comment_id": 79612507, "body": "suggest to replace 10 with 2 and add a note that its basically the same as <code>n &amp; 1</code>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1505921403, "post_id": 46325899, "comment_id": 79612994, "body": "or even just n% &lt;desired base&gt; just incase someone wants to work in hex or octal"}], "tags": [], "owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "is_accepted": true, "score": 0, "last_activity_date": 1505920658, "creation_date": 1505920658, "answer_id": 46325899, "question_id": 46325847, "link": "https://stackoverflow.com/questions/46325847/how-to-get-a-right-shifted-number-without-actual-calculation/46325899#46325899", "title": "How to get a right shifted number without actual calculation?", "body": "<p>You aren't going to be able to avoid some calculation. </p>\n\n<pre><code>int k = n % 10;\n</code></pre>\n\n<p>will get you the last decimal digit, as that assignment gives <code>k</code> the remainder of division by 10.</p>\n"}, {"comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505985618, "post_id": 46332330, "comment_id": 79639782, "body": "What&#39;s the point of that? I mean, if it was some I/O register, or some serialized form, fine, but for normal code?"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1506007607, "post_id": 46332330, "comment_id": 79655794, "body": "HI @spectras, I don&#39;t see much of a point, I was just answering the op&#39;s question. I added the update to try and frame it in a useful manor."}], "tags": [], "owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "is_accepted": false, "score": 1, "last_activity_date": 1505945043, "last_edit_date": 1505945043, "creation_date": 1505944482, "answer_id": 46332330, "question_id": 46325847, "link": "https://stackoverflow.com/questions/46325847/how-to-get-a-right-shifted-number-without-actual-calculation/46332330#46332330", "title": "How to get a right shifted number without actual calculation?", "body": "<pre><code>int main( )\n{\n    unsigned int val= 0x1010;\n    //so you just want the least siginificant bit?\n    //and assign it to another int?\n    unsigned int assign= val &amp; 0x1;\n\n    std::cout &lt;&lt; assign &lt;&lt; std::endl;\n    val= 0x1001;\n    assign= val &amp; 0x1;\n    std::cout &lt;&lt; assign &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>I would add that bit masking is not uncommon with c. I use ints to hold states often</p>\n\n<pre><code>#define STATE_MOTOR_RUNNING     0x0001\n#define STATE_UPDATE_DISPLAY    0x0002\n#define STATE_COUNTER_READY     0x0004\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>unsigned int state= STATE_COUNTER_READY;\nif( state &amp; STATE_COUNTER_READY )\n{\n    start_motor( );\n    state|= STATE_MOTOR_RUNNING;\n}\n//etc...\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4664178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b95bc4904f322a35c65925312349acbf?s=128&d=identicon&r=PG&f=1", "display_name": "noobita", "link": "https://stackoverflow.com/users/4664178/noobita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 46325899, "answer_count": 2, "score": -4, "last_activity_date": 1518086984, "creation_date": 1505920519, "last_edit_date": 1518086984, "question_id": 46325847, "link": "https://stackoverflow.com/questions/46325847/how-to-get-a-right-shifted-number-without-actual-calculation", "title": "How to get a right shifted number without actual calculation?", "body": "<p>I have the following snippet:</p>\n\n<pre><code>int n = 10;\nint k = n&gt;&gt;1;\nstd::cout&lt;&lt;k;\n</code></pre>\n\n<p>This prints 5.</p>\n\n<p>I want k to be the last digit in binary representation of n.\nLike bin(n) = 1010\nSo, I want k to be 0.</p>\n\n<p>I understand long methods are possible. Please suggest a one liner if possible.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>After going through the comments and answers, I discovered that there are various ways of doing that. </p>\n\n<p>Some of them are:</p>\n\n<pre><code>k = n%2\nk = n&amp;1\n</code></pre>\n\n<p>Thanks to all those who answered the question. :)</p>\n"}, {"tags": ["c++", "qt4"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1505920755, "post_id": 46325836, "comment_id": 79612479, "body": "@nwp I haven&#39;t tried it, but I should hope not; <code>d.rmdir(x)</code> is supposed to remove the (child) directory <code>x</code> within the directory <code>d</code>. In cases such as <code>C:\\foo\\foo</code>, how would <code>QDir f(&quot;C:\\foo&quot;); f.rmdir(&quot;foo&quot;);</code> distinguish between parent and child?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1505921137, "post_id": 46325836, "comment_id": 79612789, "body": "@nwp <code>dirName()</code> returns the last component of the path only. I can&#39;t imagine <code>d.rmdir(x)</code> interpreting a relative <code>x</code> as relative to something else than the directory referenced by <code>d</code>. I <i>will</i> try <code>d.rmdir(d.absolutePath())</code>, though. Didn&#39;t occur to me to use absolute an path."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1505926864, "post_id": 46325836, "comment_id": 79616587, "body": "The posix standard does not allow removing paths which have <code>.</code> or <code>..</code> as the last component. See <a href=\"https://unix.stackexchange.com/q/289385\">unix.stackexchange.com/q/289385</a>."}], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505920493, "creation_date": 1505920493, "question_id": 46325836, "link": "https://stackoverflow.com/questions/46325836/how-to-remove-directory-referred-to-by-qdir", "title": "How to remove directory referred to by QDir", "body": "<p>I have a <code>QDir</code> referencing an empty directory (it's verified that the directory is empty), and I want to delete the directory from disk. <code>rmdir</code> and <code>rmpath</code> both take a name/path argument. My first attempt:</p>\n\n<pre><code>QDir dir = whatever();\ndir.rmdir(\".\");\n</code></pre>\n\n<p>This works fine on Windows, but fails to remove the directory on Linux. So I had to change my code to this:</p>\n\n<pre><code>QDir dir = whatever();\nconst auto name = dir.dirName();\ndir.cdUp();\ndir.rmdir(name);\n</code></pre>\n\n<p>This works on both platforms, but seems rather convoluted for an operation as simple as \"remove the resource you're referring to.\" Am I missing a more straightforward way?</p>\n\n<p>Please note that I am currently limited to Qt 4. My current version is 4.8.7.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1505920286, "post_id": 46325738, "comment_id": 79612118, "body": "You should <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">check</a> instead of asking."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505921132, "post_id": 46325738, "comment_id": 79612785, "body": "<code>i &lt; n + 1</code> is equivalent to <code>i &lt;= n</code>. If the compiler doesn&#39;t know that, you will have lots of performance problems elsewhere. Don&#39;t sweat the small stuff!"}], "answers": [{"tags": [], "owner": {"reputation": 1860, "user_id": 7943474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47ce5c2efa9b8f5ac5f5af032625fac?s=128&d=identicon&r=PG&f=1", "display_name": "Neb", "link": "https://stackoverflow.com/users/7943474/neb"}, "is_accepted": false, "score": 0, "last_activity_date": 1505920482, "creation_date": 1505920482, "answer_id": 46325828, "question_id": 46325738, "link": "https://stackoverflow.com/questions/46325738/evaluation-of-conditional-expression-in-for-loop/46325828#46325828", "title": "Evaluation of Conditional Expression in for loop", "body": "<p>It depends. </p>\n\n<p>If <code>n</code> is modified inside the loop, then the compiler can't optimize and the condition needs to evaluate <code>n+1</code> first. If <code>n</code> is not modified, the compiler could assign a constant value to the upper bound of <code>i</code>. \nBoth in A and in B, the compiler will check if the variable which the upper bound depends on, will be modified inside the loop.</p>\n\n<p>Code <strong>B</strong> allows you to modify the <code>n</code> variable inside the loop without affecting the number of iterations the loop will have.</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "is_accepted": false, "score": 0, "last_activity_date": 1505920538, "creation_date": 1505920538, "answer_id": 46325857, "question_id": 46325738, "link": "https://stackoverflow.com/questions/46325738/evaluation-of-conditional-expression-in-for-loop/46325857#46325857", "title": "Evaluation of Conditional Expression in for loop", "body": "<p>It really depends on which compiler you are using, the level of optimization it is using, and whether the compiler can reliably tell if the value of <code>n</code> remains constant during each iteration of the loop. Personally, I'd go with <strong>B</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 5, "last_activity_date": 1505920815, "creation_date": 1505920815, "answer_id": 46325961, "question_id": 46325738, "link": "https://stackoverflow.com/questions/46325738/evaluation-of-conditional-expression-in-for-loop/46325961#46325961", "title": "Evaluation of Conditional Expression in for loop", "body": "<p>This depends on many factors. This kind of an optimization is legal if the compiler can prove that the value of <code>n</code> does not change for the duration of the loop. If <code>n</code>, for example, is a variable in global or dynamic scope and there's a function call in the middle of the loop, the compiler cannot generally assume that whatever the function gets called will not modify the globally or dynamically-scoped variable. Otherwise the two versions of the loop will not, obviously, be the same.</p>\n\n<p>Or, even if the variable is in local or automatic scope, and there's a pointer somewhere in the vicinity, it may or may not be possible for it to be modified through a pointer, so this optimization will not be safe either.</p>\n\n<p>The compiler is permitted to make optimization-related code changes only if the compiler can prove that there are no observable change from the optimization. And finally, if the compiler can prove that there will not be any observable changes from the optimization, whether or not the compiler will implement this may depend on the compilation options.</p>\n"}], "owner": {"reputation": 1569, "user_id": 7116413, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/be83939947f4caf350194b2c7886ffed?s=128&d=identicon&r=PG&f=1", "display_name": "arpanmangal", "link": "https://stackoverflow.com/users/7116413/arpanmangal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 46325961, "answer_count": 3, "score": 3, "last_activity_date": 1505921474, "creation_date": 1505920240, "last_edit_date": 1505921474, "question_id": 46325738, "link": "https://stackoverflow.com/questions/46325738/evaluation-of-conditional-expression-in-for-loop", "title": "Evaluation of Conditional Expression in for loop", "body": "<p>I have a query:</p>\n\n<p>Suppose I have the following code:</p>\n\n<p>Code A:</p>\n\n<pre><code>for (int i = 0; i &lt; n + 1; i++)\n{\n  // something here\n}\n</code></pre>\n\n<p>Code B:</p>\n\n<pre><code>int lim = n + 1;\nfor (int i = 0; i &lt; lim; i++)\n{\n   // something here\n}\n</code></pre>\n\n<p>Which code will be more efficient? Does the conditional expression in Code A gets computed in each iteration of the for loop or does modern compilers take care of it and themselves assign it a constant value?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "closures", "c++14"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1505920440, "post_id": 46325619, "comment_id": 79612231, "body": "Cannot reproduce, gcc v5.1.0 generates the same output in both cases"}, {"owner": {"reputation": 1165, "user_id": 4493225, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-s7Jc9VuXG9Q/AAAAAAAAAAI/AAAAAAAAAJo/GRu4jVBzQ8k/photo.jpg?sz=128", "display_name": "Lin", "link": "https://stackoverflow.com/users/4493225/lin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1505920488, "post_id": 46325619, "comment_id": 79612273, "body": "I am compiling with clang version 3.6.2."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1505920794, "post_id": 46325619, "comment_id": 79612513, "body": "Nevermind, it is UB, so particular output is irrelevant"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1505928343, "post_id": 46325619, "comment_id": 79617465, "body": "Why somebody downvoted it? It is rare case when OP followed rules precisely and created <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This is valid question no matter if code has UB or not."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1505928256, "post_id": 46328071, "comment_id": 79617402, "body": "Does [i=0] require c++14?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1505928506, "post_id": 46328071, "comment_id": 79617567, "body": "@Slava Yes, added a way to fix OP&#39;s original nested-lambda example to still work in C++11."}, {"owner": {"reputation": 1165, "user_id": 4493225, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-s7Jc9VuXG9Q/AAAAAAAAAAI/AAAAAAAAAJo/GRu4jVBzQ8k/photo.jpg?sz=128", "display_name": "Lin", "link": "https://stackoverflow.com/users/4493225/lin"}, "edited": false, "score": 0, "creation_date": 1505930666, "post_id": 46328071, "comment_id": 79618760, "body": "Thanks, since <code>i</code> is a local temporary object inside the <code>operator()</code> if you think the lambda like a <code>struct</code>. Thus what the returned lambda captures is an invalid reference to local variable. That&#39;s why both cases are UB. At first I thought it would behave like real closures."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1505931580, "post_id": 46328071, "comment_id": 79619247, "body": "Is there any reason why the &quot;<i>but it works?</i>&quot; part exists? I can&#39;t seem to think why it shouldn&#39;t. Also, why not just capture only <code>i</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1505938848, "post_id": 46328071, "comment_id": 79623071, "body": "@Rakete1111 I don&#39;t understand any of the questions. The &quot;but it works&quot; is a rhetorical counterpoint to &quot;kind of obnoxious&quot;"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 10, "last_activity_date": 1505928488, "last_edit_date": 1505928488, "creation_date": 1505927569, "answer_id": 46328071, "question_id": 46325619, "link": "https://stackoverflow.com/questions/46325619/c-closure-creation/46328071#46328071", "title": "c++ closure creation", "body": "<blockquote>\n  <p>I am not sure why these two blocks produce different results.</p>\n</blockquote>\n\n<p>Both are undefined behavior, so the question is moot. In either case, we have a lambda like:</p>\n\n<pre><code>auto f = []() { int i = 0; return [&amp;]() { return i++; }; };\n</code></pre>\n\n<p>And <code>f()</code> returns a lambda that has a dangling reference: <code>i</code> is destroyed at the end of the call to <code>f</code>. It's immaterial <em>when</em> that dangling reference happens - whether it happens long before the <code>generate()</code> call or into the <code>generate()</code> call.</p>\n\n<p>If you want to make a generating counter with a lambda, the direct way is to make the lambda mutable and use init-capture:</p>\n\n<pre><code>auto inc = [i=0]() mutable { return i++; };\n</code></pre>\n\n<p>The <code>mutable</code> is required because lambdas are <code>const</code> by default, and we need to directly modify the member <code>i</code>. </p>\n\n<hr />\n\n<p>The above is C++14 (due to the generalized init-capture). We could make this work in C++11 by simply changing the nested-lambda structure from the inner lambda capturing by reference to capturing by value:</p>\n\n<pre><code>auto inc = []{ int i = 0; return [=]() mutable { return i++; }; }();\n//                               ~~~   ~~~~~~~\n</code></pre>\n\n<p>That's... kind of obnoxious, but it works?</p>\n"}], "owner": {"reputation": 1165, "user_id": 4493225, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-s7Jc9VuXG9Q/AAAAAAAAAAI/AAAAAAAAAJo/GRu4jVBzQ8k/photo.jpg?sz=128", "display_name": "Lin", "link": "https://stackoverflow.com/users/4493225/lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 2, "accepted_answer_id": 46328071, "answer_count": 1, "score": 9, "last_activity_date": 1526670999, "creation_date": 1505919900, "last_edit_date": 1526670999, "question_id": 46325619, "link": "https://stackoverflow.com/questions/46325619/c-closure-creation", "title": "c++ closure creation", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  // Block 1\n  {\n    auto inc = []() { int i = 0; return [&amp;]() { return i++; }; }();\n    std::vector&lt;int&gt; v(10, 10);\n    std::generate(v.begin(), v.end(), inc);\n    for (auto i : v) std::cout &lt;&lt; i &lt;&lt; std::endl;\n  }\n\n  // Block 2\n  {\n    auto inc = []() { int i = 0; return [&amp;]() { return i++; }; };\n    std::vector&lt;int&gt; v(10, 10);\n    std::generate(v.begin(), v.end(), inc());\n    for (auto i : v) std::cout &lt;&lt; i &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>I am not sure why these two blocks produce different results. </p>\n\n<pre><code>Block 1: 32767 ... 32776\nBlock 2: 0 ... 10\n</code></pre>\n\n<p>And for <code>std::generate</code> the generator(<code>inc</code>) is passed by value, so I believe it should be fine, right? </p>\n\n<p>I am running OS X.</p>\n\n<p>Thanks,</p>\n\n<p><hr />\n<strong>Note that the results from above code are undefined, see below.</strong></p>\n"}, {"tags": ["c++", "visual-c++", "compilation", "linker", "cl"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1505920492, "post_id": 46325589, "comment_id": 79612276, "body": "<code>cl.exe</code> is part of the toolset. Once you start one of the several <code>cl.exe</code>s you have already chosen a toolset, probably by having that one in the PATH."}, {"owner": {"reputation": 167, "user_id": 8528922, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bb996c91fbf41703c272eb24e726c00?s=128&d=identicon&r=PG&f=1", "display_name": "YakibutaRamen", "link": "https://stackoverflow.com/users/8528922/yakibutaramen"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505920853, "post_id": 46325589, "comment_id": 79612569, "body": "@Bo Persson can you set a toolset from command line in vcvarsall ? Or is a vcvarsall a part of toolset?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505921499, "post_id": 46325589, "comment_id": 79613093, "body": "I prefer to build from the IDE so I haven&#39;t been experimenting much with the command line builds, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 8528922, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bb996c91fbf41703c272eb24e726c00?s=128&d=identicon&r=PG&f=1", "display_name": "YakibutaRamen", "link": "https://stackoverflow.com/users/8528922/yakibutaramen"}, "is_accepted": true, "score": 1, "last_activity_date": 1505984153, "creation_date": 1505984153, "answer_id": 46339543, "question_id": 46325589, "link": "https://stackoverflow.com/questions/46325589/compile-using-cl-exe-with-different-toolset/46339543#46339543", "title": "Compile using CL.exe with different toolset", "body": "<p>Just incase someone need it, i was able to solve this isuue. i added this option to cl.exe:</p>\n\n<pre><code>/D \\\"_USING_V110_SDK71_\\\"\n</code></pre>\n\n<p>And also i modified this option:</p>\n\n<pre><code>/SUBSYSTEM:WINDOWS\n</code></pre>\n\n<p>to</p>\n\n<pre><code>/SUBSYSTEM:WINDOWS,5.01\n</code></pre>\n\n<p>After the application runs succesfully on windows xp. You might encounter some problems if you are heavily useing crt in your exe, in my exe i only needed CRT to define Tls callbacks, they do not work without CRT, so i guess maybe this is why this worked for me</p>\n"}], "owner": {"reputation": 167, "user_id": 8528922, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bb996c91fbf41703c272eb24e726c00?s=128&d=identicon&r=PG&f=1", "display_name": "YakibutaRamen", "link": "https://stackoverflow.com/users/8528922/yakibutaramen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 46339543, "answer_count": 1, "score": 1, "last_activity_date": 1505984153, "creation_date": 1505919809, "question_id": 46325589, "link": "https://stackoverflow.com/questions/46325589/compile-using-cl-exe-with-different-toolset", "title": "Compile using CL.exe with different toolset", "body": "<p>I need to compile a program automatically with different platform toolsets. The compilation is done using <code>cl.exe</code> and <code>link.exe</code> like so:</p>\n\n<pre><code>cl.exe file.c /GS- /PlatformToolset=vc140xp /analyze- /W3 /Gy /Zc:wchar_t /Gm- /Od /Zc:inline /fp:precise /D \\\"WIN32\\\" /D \\\"_WINDOWS\\\" /D \\\"_UNICODE\\\" /D \\\"UNICODE\\\" /errorReport:prompt /WX- /Zc:forScope /Gd /Oy- /Oi /MD /Fa\\\"\\\" /EHsc /nologo /Fo\\\"\\\" /Fp\\\"\\\" /diagnostics:classic /link %link_additional% /ENTRY:wWinMain /SUBSYSTEM:WINDOWS /MANIFEST:EMBED  /NXCOMPAT /DYNAMICBASE \\\"kernel32.lib\\\" \\\"user32.lib\\\" \\\"gdi32.lib\\\" \\\"winspool.lib\\\" \\\"comdlg32.lib\\\" \\\"advapi32.lib\\\" \\\"shell32.lib\\\" \\\"ole32.lib\\\" \\\"oleaut32.lib\\\" \\\"uuid.lib\\\" \\\"odbc32.lib\\\" \\\"odbccp32.lib\\\" /DEBUG:NONE /MACHINE:%arch% /OPT:REF /SAFESEH /INCREMENTAL:NO /SUBSYSTEM:WINDOWS /MANIFESTUAC:\\\"level = 'asInvoker' uiAccess = 'false'\\\" /OPT:ICF /ERRORREPORT:PROMPT /NOLOGO /TLBID:1\\\n</code></pre>\n\n<p>I'm using the switch <code>/PlatformToolset=vc140xp</code> but, the cl.exe doesn't seem to reconginze it, i get an error:</p>\n\n<p><code>Unknown Option: /PlatformToolset</code></p>\n\n<p>Is there a way you can change toolset using cl.exe, without msbuild and vcproj ?</p>\n"}, {"tags": ["c++", "performance-testing", "chaiscript"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1505919836, "post_id": 46325550, "comment_id": 79611760, "body": "Looks like he cooked that up himself."}, {"owner": {"reputation": 5940, "user_id": 4605629, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/741edb45b2f1d3e3c3d9555085004ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/4605629/greg"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1505919869, "post_id": 46325550, "comment_id": 79611788, "body": "@BaummitAugen I thought the same however I&#39;ve seen it used before. It measures performance changes over new build versions"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1505961944, "post_id": 46325550, "comment_id": 79629614, "body": "Probably something like google benchmark and some custom analysis/diff tools"}], "owner": {"reputation": 5940, "user_id": 4605629, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/741edb45b2f1d3e3c3d9555085004ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/4605629/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505961161, "creation_date": 1505919730, "last_edit_date": 1505961161, "question_id": 46325550, "link": "https://stackoverflow.com/questions/46325550/what-is-the-c-performance-monitoring-tool-being-refered-to-in-the-following-cp", "title": "What is the C++ performance monitoring tool being refered to in the following cppcon video?", "body": "<p>What is the name of the performance monitoring tool being referenced in this talk: <a href=\"https://youtu.be/uzF4u9KgUWI?t=50m11s\" rel=\"nofollow noreferrer\">https://youtu.be/uzF4u9KgUWI?t=50m11s</a>?</p>\n"}, {"tags": ["c++", "sqlite", "fstream", "binary-data"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505919771, "post_id": 46325415, "comment_id": 79611719, "body": "You have lots of pointers - what are they pointing to? A common reason for a segmentation fault is that they are not pointing anywhere (uninitialized)"}, {"owner": {"reputation": 428, "user_id": 7636697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60809b23bd4948758005c3e72e48aed1?s=128&d=identicon&r=PG&f=1", "display_name": "ssovukluk", "link": "https://stackoverflow.com/users/7636697/ssovukluk"}, "edited": false, "score": 0, "creation_date": 1505919882, "post_id": 46325415, "comment_id": 79611799, "body": "I was trying to understand your callback function&#39;s input, could not understand anything to be hones."}, {"owner": {"reputation": 428, "user_id": 7636697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60809b23bd4948758005c3e72e48aed1?s=128&d=identicon&r=PG&f=1", "display_name": "ssovukluk", "link": "https://stackoverflow.com/users/7636697/ssovukluk"}, "edited": false, "score": 0, "creation_date": 1505920052, "post_id": 46325415, "comment_id": 79611924, "body": "try art-&gt;bin = *data[3]; ?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1505920054, "post_id": 46325415, "comment_id": 79611927, "body": "When is the callback called? When does the segfault happen? In your <code>write</code> function? Does that ask for the <code>name</code> variable or blow up before then? There&#39;s not enough info in the question to answer"}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1505932504, "creation_date": 1505932504, "answer_id": 46329427, "question_id": 46325415, "link": "https://stackoverflow.com/questions/46325415/c-fstream-write-segmentation-fault/46329427#46329427", "title": "C++ fstream.write segmentation fault", "body": "<p><code>sqlite3_exec()</code> is just a wrapper around a preapre/step/finalize loop.</p>\n\n<p>The <a href=\"http://www.sqlite.org/c3ref/exec.html\" rel=\"nofollow noreferrer\">sqlite3_exec() documentation</a> says:</p>\n\n<blockquote>\n  <p>The 3rd argument to the sqlite3_exec() callback is an array of pointers to strings obtained as if from <a href=\"http://www.sqlite.org/c3ref/column_blob.html\" rel=\"nofollow noreferrer\">sqlite3_column_text()</a>, one for each column.</p>\n</blockquote>\n\n<p>That documentation says:</p>\n\n<blockquote>\n  <p>These routines may only be called when the most recent call to <a href=\"http://www.sqlite.org/c3ref/step.html\" rel=\"nofollow noreferrer\">sqlite3_step()</a> has returned <a href=\"http://www.sqlite.org/rescode.html#row\" rel=\"nofollow noreferrer\">SQLITE_ROW</a> and neither <a href=\"http://www.sqlite.org/c3ref/reset.html\" rel=\"nofollow noreferrer\">sqlite3_reset()</a> nor <a href=\"http://www.sqlite.org/c3ref/finalize.html\" rel=\"nofollow noreferrer\">sqlite3_finalize()</a> have been called subsequently. If any of these routines are called after <a href=\"http://www.sqlite.org/c3ref/reset.html\" rel=\"nofollow noreferrer\">sqlite3_reset()</a> or <a href=\"http://www.sqlite.org/c3ref/finalize.html\" rel=\"nofollow noreferrer\">sqlite3_finalize()</a> or after <a href=\"http://www.sqlite.org/c3ref/step.html\" rel=\"nofollow noreferrer\">sqlite3_step()</a> has returned something other than <a href=\"http://www.sqlite.org/rescode.html#row\" rel=\"nofollow noreferrer\">SQLITE_ROW</a>, the results are undefined.</p>\n</blockquote>\n\n<p>In other words: the strings go away after the callback returns; you must copy the contents of the strings.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8404636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 46329427, "answer_count": 1, "score": -1, "last_activity_date": 1505932504, "creation_date": 1505919345, "last_edit_date": 1505920183, "question_id": 46325415, "link": "https://stackoverflow.com/questions/46325415/c-fstream-write-segmentation-fault", "title": "C++ fstream.write segmentation fault", "body": "<p>I am trying to write binary data to file and I get segmentation fault. I get binary data from sqlite blob.\ni need some help with this code.\nError blow up on write command. \nsqlite callback:</p>\n\n<pre><code>    static int callback(void* object, int, char** data, char**)\n{\n    if (fromdb* const art= static_cast&lt;fromdb*&gt;(object))\n    {\n        art-&gt;title = *data[1];\n        art-&gt;creator = *data[2];\n        art-&gt;bin = data[3];\n        art-&gt;year = *data[4];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Write function:</p>\n\n<pre><code>    void write() {\n    // &lt;&lt; bin;\n    ofstream towrite;\n    string name;\n    cout &lt;&lt; \"Podaj nazwe pliku do zapisu\";\n    cin &gt;&gt; name;\n    towrite.open(name, ios::out | ios::binary);\n    towrite.write(bin, sizeof(bin));\n    towrite.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "shader"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1505919786, "post_id": 46325344, "comment_id": 79611733, "body": "How do expect the Fragment Shader gets <code>fragmentColor</code>from? Uncomment the &quot;out&quot; command in the Vertex Shader, set some value for it  and try again."}], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 3, "last_activity_date": 1505920130, "creation_date": 1505920130, "answer_id": 46325694, "question_id": 46325344, "link": "https://stackoverflow.com/questions/46325344/opengl-shader-error/46325694#46325694", "title": "OpenGL shader error", "body": "<p>The <code>std::string</code> returned by <code>readShaderCode</code> only lives for the duration of the <code>.c_str()</code> call. After that, the <code>std::string</code> implementation is allowed to free the memory, leaving your <code>adapter[0]</code> point to memory that has just been freed (a use-after-free).</p>\n\n<p>You should assign the result of <code>readShaderCode</code> to a local <code>std::string</code> variable such that the memory is only freed at the end of the function. You can then safely store the result of <code>.c_str()</code> into <code>adapter</code>, knowing that the memory has not been freed yet.</p>\n"}], "owner": {"reputation": 9, "user_id": 8642001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61198e00d65f3e5c52d0f9e9ffd26fd8?s=128&d=identicon&r=PG&f=1", "display_name": "fomalhautgt86", "link": "https://stackoverflow.com/users/8642001/fomalhautgt86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "accepted_answer_id": 46325694, "answer_count": 1, "score": -2, "last_activity_date": 1505928650, "creation_date": 1505919183, "last_edit_date": 1505928650, "question_id": 46325344, "link": "https://stackoverflow.com/questions/46325344/opengl-shader-error", "title": "OpenGL shader error", "body": "<p>I'm writing an openGL program using the wxWidgets library, I have it mostly working, but I am getting shader compilation errors due to bad characters being inserted (I think), only I can't find where the characters are or what is causing them. The error is :</p>\n\n<pre><code>error 0(1) : error C0000: syntax error, unexpected $undefined at token \"&lt;undefined&gt;\"\n</code></pre>\n\n<p>I'm not sure why though, since I can't see any errors when I cout the string. Here is what is being fed to glshadersource() :</p>\n\n<pre><code>#version 430 core\n\nlayout(location =0) in vec3 vpos;\n\nout vec3 fragmentColor;\nuniform mat4 MVP;\n\nvoid main(void)\n\n{\n    gl_Position = MVP * vec4(vpos,1);\n};\n</code></pre>\n\n<p>Here are the shader compiler functions I use:</p>\n\n<pre><code>void GL_set::compileAndLink()\n{\n\n    GLint Result = GL_FALSE;\n    int InfoLogLength = 0;\n\n    // Create vertex shader, attach source code, compile\n    vertexShader = glCreateShader(GL_VERTEX_SHADER);\n    const GLchar* adapter[1];\n    adapter[0] = readShaderCode(\"Vshader.glsl\").c_str();\n    glShaderSource(vertexShader, 1, adapter, NULL);\n    glCompileShader(vertexShader);\n\n    // Check vertex shader for errors\n    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;Result);\n    glGetShaderiv(vertexShader, GL_INFO_LOG_LENGTH, &amp;InfoLogLength);\n    if (InfoLogLength &gt; 0)\n    {\n        char vertexError[1000];\n        glGetShaderInfoLog(vertexShader, InfoLogLength, NULL, &amp;vertexError[0]);\n        std::cout &lt;&lt; &amp;vertexError[0];\n    }\n\n    // Create fragment shader, attach source code, compile\n    fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n    adapter[0] = readShaderCode(\"Fshader.glsl\").c_str();\n    glShaderSource(fragmentShader, 1, adapter, NULL);\n    glCompileShader(fragmentShader);\n\n    // Check fragment shader for errors\n    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;Result);\n    glGetShaderiv(fragmentShader, GL_INFO_LOG_LENGTH, &amp;InfoLogLength);\n    if (InfoLogLength &gt; 0)\n    {\n        char fragmentError[1000];\n        glGetShaderInfoLog(fragmentShader, InfoLogLength, NULL, \n        &amp;fragmentError[0]);\n        std::cout &lt;&lt; &amp;fragmentError[0];\n    }\n\n    // Create program and attach shaders\n    program = glCreateProgram();\n    glAttachShader(program, vertexShader);\n    glAttachShader(program, fragmentShader);\n    glLinkProgram(program);\n\n    //check program for errors\n    glGetProgramiv(program, GL_LINK_STATUS, &amp;Result);\n    glGetProgramiv(program, GL_INFO_LOG_LENGTH, &amp;InfoLogLength);\n    if (InfoLogLength &gt; 0)\n    {\n        char programError[1000];\n        glGetProgramInfoLog(program, InfoLogLength, NULL, &amp;programError[0]);\n        std::cout &lt;&lt; &amp;programError[0];\n    }\n\n}\n\n\n\nstd::string GL_set::readShaderCode(const char* fileName)\n{\n    printf(\"passing %s to readShaderCode() \\n\", fileName);\n    std::ifstream input(fileName);\n    if(!input.good())\n    {\n        std::cout &lt;&lt; \"failed to load file \" &lt;&lt; fileName;\n        exit(1);\n    }\n\n    std::string code = std::string(\n    std::istreambuf_iterator&lt;char&gt;(input),\n    std::istreambuf_iterator&lt;char&gt;()\n    );\n\n    // output the code to cout for error checking\n    std::cout &lt;&lt; \"Read shader input: \\n\" &lt;&lt; code &lt;&lt; \"\\n\" &lt;&lt; std::endl;\n\n\n    return code;\n}\n</code></pre>\n\n<p>Here is the full console output:</p>\n\n<pre><code>normal display attribs are supported\ncalling gl_init()\ngl_set construtor called\nsetting buffers\npassing Vshader.glsl to readShaderCode()\nRead shader input:\n#version 430 core\n\nlayout(location =0) in vec3 vpos;\n\nout vec3 fragmentColor;\nuniform mat4 MVP;\n\nvoid main(void)\n{\n    //output position of the vertex in clip space MVP*position\n    gl_Position = MVP * vec4(vpos,1);\n};\n\n\n\n0(1) : error C0000: syntax error, unexpected $undefined at token \"&lt;undefined&gt;\"\npassing Fshader.glsl to readShaderCode()\nRead shader input:\n#version 430 core\n\nin vec3 fragmentColor;\n\nout vec3 color;\n\nvoid main()\n{\n    color = fragmentColor;\n};\n\n\n\n0(1) : error C0000: syntax error, unexpected $undefined at token \"&lt;undefined&gt;\"\nVertex info\n-----------\n0(1) : error C0000: syntax error, unexpected $undefined at token \"\n&lt;undefined&gt;\"\n(0) : error C2003: incompatible options for link\n\nFragment info\n-------------\n0(1) : error C0000: syntax error, unexpected $undefined at token \"&lt;undefined&gt;\"\n(0) : error C2003: incompatible options for link\nLoading OBJ file mod.obj...\n</code></pre>\n\n<p>Here is the rest of the class:</p>\n\n<pre><code>#include \"GL_set.h\"\n\nGL_set::GL_set()\n{\n\n    std::cout &lt;&lt; \"gl_set construtor called\" &lt;&lt; std::endl;\n\n    GL_set::setBuffers();\n\n}\n\n\nvoid GL_set::setBuffers()\n{\n\n    std::cout &lt;&lt; \"setting buffers\" &lt;&lt; std::endl;\n\n    glGenVertexArrays(1, &amp;vao);\n    glBindVertexArray(vao);\n\n    //create shaders and attach them to the program object\n    GL_set::compileAndLink();\n\n    loadOBJ(\"mod.obj\", vdata); // use OBJ loader\n\n    glGenBuffers(1, &amp;vertexbuffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n    glBufferData(GL_ARRAY_BUFFER, vdata.size()*sizeof(glm::vec3), &amp;vdata[0], GL_STATIC_DRAW);\n\n    //vertex buffer\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n    glVertexAttribPointer(\n        0,          //index\n        3,          //size\n        GL_FLOAT,   //type\n        GL_FALSE,   //normalized?\n        0,          //stride\n        0           //array buffer offset\n    );\n\n}\n\nvoid GL_set::draw()\n{\n\n    glBindVertexArray(vao);\n\n\n    GLuint matrixID = glGetUniformLocation(program, \"MVP\");\n\n\n    ////////////////////////////matrix operations/////////////////////////////////////////\n\n    //projection matrix 45 degree FoV, 4:3 ratio, display range 0.1 - 100\n    glm::mat4 projection = glm::perspective(45.0f, 4.0f/3.0f, 0.1f, 100.0f);\n\n    //camera matrix\n    glm::mat4 view = glm::lookAt(\n                 glm::vec3(8, 8,  8), //camera posiiton\n                 glm::vec3(0, 1,  0), //camera looks at this point\n                 glm::vec3(0, 1,  0)  //head up position\n                 );\n\n    //model matrix identity matrix\n    glm::mat4 model = glm::mat4(1.0f);\n\n    //rotate\n    model = glm::rotate(model, 1.0f, glm::vec3(1,1,1));\n\n    //model-view-projection\n    glm::mat4 MVP = projection * view * model;\n\n\n\n    /////////////////////////////////////////////////////////\n\n    glUniformMatrix4fv(matrixID, 1, GL_FALSE, &amp;MVP[0][0]);\n\n\n    glDrawArrays(GL_TRIANGLES, 0, vdata.size()*sizeof(glm::vec3));\n\n\n}\n</code></pre>\n\n<p>I think the wxWidgets related code I have is okay, the window interface loads with a blank white screen, presumably caused by the shader errors. I can post more if needed, thanks. </p>\n"}, {"tags": ["c++", "winapi", "64-bit"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1505920134, "post_id": 46325295, "comment_id": 79611982, "body": "You have to make an engineering decision. What are the odds that someone tries to send more than 2GB over a socket in your application? If the odds are zero, you might skip the test."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1505920852, "post_id": 46325295, "comment_id": 79612567, "body": "If there&#39;s no 64 bit version of the function then you have little choice but to cast and assume 2GB ought to be enough for anybody."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1505924556, "post_id": 46325295, "comment_id": 79615167, "body": "Write a wrapper function that deals with the case where size is &gt;2Gb and performs the API call in a loop. Use this function even if the size is &lt; 2Gb.  Put the static_cast(s), if required, inside the wrapper function."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1505924899, "post_id": 46325295, "comment_id": 79615412, "body": "In case of <code>send</code>, it makes no sense to specify a buffer that large, for optimal performance you should call <code>send</code> frequently and with small chunks (4..64KB)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1505927922, "post_id": 46325295, "comment_id": 79617196, "body": "<code>send()</code> will never be able to accept 2GB+ of data in one go. Networks can&#39;t handle data packets that large, and neither can the kernel that buffers outgoing data before transmitting it. Any noone in their right mind would ever try to call <code>MultiByteToWideChar()</code> with a block of text that has over 2billion ANSI characters in it in one go, which would require 2GB of input memory and 4GB of output memory. These aren&#39;t just technical limitations, they are logical ones, too. So there is no need to support 64bit sizes when they will not be utilized to their fullest extent to begin with"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505919062, "creation_date": 1505919062, "question_id": 46325295, "link": "https://stackoverflow.com/questions/46325295/64bit-size-types-and-windows-api", "title": "64bit size types and Windows API", "body": "<p>How do you handle Windows API calls that take a size after converting to 64bit properly and safely?</p>\n\n<p>For example:</p>\n\n<p>From winsock</p>\n\n<pre><code>int send(\n  _In_       SOCKET s,\n  _In_ const char   *buf,\n  _In_       int    len,\n  _In_       int    flags\n);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int MultiByteToWideChar(\n  _In_      UINT   CodePage,\n  _In_      DWORD  dwFlags,\n  _In_      LPCSTR lpMultiByteStr,\n  _In_      int    cbMultiByte,\n  _Out_opt_ LPWSTR lpWideCharStr,\n  _In_      int    cchWideChar\n);\n</code></pre>\n\n<p>One would naturally call some_container::size() which is going to return a size_t. size_t when using 64bit a msvc compiler is an unsigned long long.</p>\n\n<p>One could cast, but that isn't safe, since it is theoretically possible the container is a larger size than the boundry of an int.</p>\n\n<p>One could check and then cast, but is that what people are really doing in practice? That's a lot of work on a large project that is being converted. Find and replace isn't going to work on that one.</p>\n\n<p>What do you do? I have a feeling most people just ignore it, but that doesn't seem like the good thing to do. I like a nice build with no warnings.</p>\n\n<p>Why don't they have 64 bit versions of these functions similar to how they have wide and multibyte versions of various functions?</p>\n"}, {"tags": ["c++", "arrays", "variable-length-array"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 6, "creation_date": 1505918829, "post_id": 46325188, "comment_id": 79611026, "body": "It&#39;s an extension by your compiler, it&#39;s not standard C++."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505918839, "post_id": 46325188, "comment_id": 79611031, "body": "Don&#39;t compile it with GCC. It will stop working"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1505918987, "post_id": 46325188, "comment_id": 79611149, "body": "Add <code>-pedantic-errors</code> to your compiler flags. Also throw in <code>-Wall -Wextra -Wfatal-errors</code> for good measure."}, {"owner": {"reputation": 1673, "user_id": 5496463, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-VmcBB9rMIgM/AAAAAAAAAAI/AAAAAAAAACA/_9LWiGySKuc/photo.jpg?sz=128", "display_name": "danche", "link": "https://stackoverflow.com/users/5496463/danche"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505919017, "post_id": 46325188, "comment_id": 79611179, "body": "@StoryTeller I use clang++"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505919596, "post_id": 46325188, "comment_id": 79611584, "body": "@StoryTeller Wat? Stop working?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1505920219, "post_id": 46325188, "comment_id": 79612060, "body": "@hyde - To my knowledge, gcc was the only compiler with VLA support in C++."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505921304, "post_id": 46325188, "comment_id": 79612912, "body": "@StoryTeller <a href=\"https://clang.llvm.org/docs/LanguageExtensions.html#introduction\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/LanguageExtensions.html#introduction</a>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1505921553, "post_id": 46325188, "comment_id": 79613135, "body": "@hyde - Your point being?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505922580, "post_id": 46325188, "comment_id": 79613901, "body": "@StoryTeller Just expanding on your <i>&quot;To my knowledge, gcc was the only compiler...&quot;</i>, for benefit of all readers."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505922727, "post_id": 46325188, "comment_id": 79613999, "body": "NVM. They had to call it <code>cxx_runtime_array</code>... yuck"}], "answers": [{"comments": [{"owner": {"reputation": 1673, "user_id": 5496463, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-VmcBB9rMIgM/AAAAAAAAAAI/AAAAAAAAACA/_9LWiGySKuc/photo.jpg?sz=128", "display_name": "danche", "link": "https://stackoverflow.com/users/5496463/danche"}, "edited": false, "score": 0, "creation_date": 1505919209, "post_id": 46325301, "comment_id": 79611313, "body": "Thanks. But now in my env it works, why the elements in the array is not 0?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 1673, "user_id": 5496463, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-VmcBB9rMIgM/AAAAAAAAAAI/AAAAAAAAACA/_9LWiGySKuc/photo.jpg?sz=128", "display_name": "danche", "link": "https://stackoverflow.com/users/5496463/danche"}, "edited": false, "score": 0, "creation_date": 1505919244, "post_id": 46325301, "comment_id": 79611337, "body": "@danche Because <code>array</code> is still uninitialized, it&#39;s not zero-initialized."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1505922363, "post_id": 46325301, "comment_id": 79613745, "body": "&quot;or the compiler vendor decides to no longer support this feature&quot;, well, for extensions which are rather well established and documented, and have existed for longer than C++ has been standardized, I think that&#39;s just FUD. Features can&#39;t be retroactively removed from current versions. I&#39;d be more worried about using latest C++ standard features and encountering a compiler bug, which will silently alter code behavior when it gets fixed in a minor version bump, or when compiling with different compiler..."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 3, "last_activity_date": 1505919074, "creation_date": 1505919074, "answer_id": 46325301, "question_id": 46325188, "link": "https://stackoverflow.com/questions/46325188/using-variable-to-initialize-an-array-in-c/46325301#46325301", "title": "Using variable to initialize an array in C++", "body": "<p>This is an extension by your compiler called a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">Variable Length Array (VLA)</a> and is not in the C++ standard which means that this code can break at any moment you switch compilers or the compiler vendor decides to no longer support this feature. If you want a variable length array that does not depend on this extension but instead on the standard you should use a <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 1673, "user_id": 5496463, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-VmcBB9rMIgM/AAAAAAAAAAI/AAAAAAAAACA/_9LWiGySKuc/photo.jpg?sz=128", "display_name": "danche", "link": "https://stackoverflow.com/users/5496463/danche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "closed_date": 1505921635, "answer_count": 1, "score": 1, "last_activity_date": 1505919074, "creation_date": 1505918764, "last_edit_date": 1505918876, "question_id": 46325188, "link": "https://stackoverflow.com/questions/46325188/using-variable-to-initialize-an-array-in-c", "closed_reason": "Duplicate", "title": "Using variable to initialize an array in C++", "body": "<p>As C++ primer said, we can't use variable as the dimension of builtin array, so the following code did not work</p>\n\n<pre><code>int length = 3;\nint array[length] = {0, 1, 2};\n</code></pre>\n\n<p>the error is</p>\n\n<pre><code>error: variable-sized object may not be initialized\n</code></pre>\n\n<p>But why following code works?</p>\n\n<pre><code>int length = 3;\nint array[length];\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "specialization"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1505920216, "post_id": 46325133, "comment_id": 79612055, "body": "Function templates cannot be partially specialised. Overload instead."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1505922584, "post_id": 46325133, "comment_id": 79613905, "body": "<i>&quot;I didn&#39;t intend to specialize&quot;</i> - And yet you used specialization syntax <code>convertTo&lt;set&lt;T&gt;&gt;</code>"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1505923688, "post_id": 46325133, "comment_id": 79614660, "body": "Surely this is dupe, there are millions of partially specialize function templates on SO."}, {"owner": {"reputation": 153, "user_id": 2236584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64a039024f3f8920c28c059c88e596?s=128&d=identicon&r=PG", "display_name": "lawilog", "link": "https://stackoverflow.com/users/2236584/lawilog"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505923905, "post_id": 46325133, "comment_id": 79614789, "body": "I did intend to specialize, but as far as I understand it, &quot;partial template specialization&quot; means just fixing some template arguments, while leaving others templated. So, I think I want to write a full specialization?  @n.m.: I think that&#39;s what I tried by removing <code>template&lt;&gt;</code>."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1505924003, "post_id": 46325133, "comment_id": 79614849, "body": "@lawilog It&#39;s not fully fixed though, <code>set&lt;T&gt;</code> still has a free parameter. Partial specialization isn&#39;t only fixing down one template parameter while leaving the second free. You can partially specialize a struct with only one template parameter; if you have a primary definition for <code>T</code> and a secondary definition for <code>set&lt;T&gt;</code>, the second is still a template (and thus, not fully specialized), but it is more specialized than the primary in some cases. Thus, partial specialization."}, {"owner": {"reputation": 153, "user_id": 2236584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64a039024f3f8920c28c059c88e596?s=128&d=identicon&r=PG", "display_name": "lawilog", "link": "https://stackoverflow.com/users/2236584/lawilog"}, "edited": false, "score": 0, "creation_date": 1505924396, "post_id": 46325133, "comment_id": 79615074, "body": "I see. But I also cannot overload by return type."}], "answers": [{"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1505924070, "post_id": 46326895, "comment_id": 79614885, "body": "Pretty well disagree with this, overloading is superior for various reasons, some of which are only sometimes relevant but if nothing else it&#39;s less boilerplate per partial specialization."}, {"owner": {"reputation": 153, "user_id": 2236584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64a039024f3f8920c28c059c88e596?s=128&d=identicon&r=PG", "display_name": "lawilog", "link": "https://stackoverflow.com/users/2236584/lawilog"}, "edited": false, "score": 0, "creation_date": 1505925123, "post_id": 46326895, "comment_id": 79615542, "body": "Thanks. This is how I filled in the <code>&#47;&#47; ...</code> for me:          template&lt;class T&gt; struct Converter&lt;set&lt;T&gt;&gt; {           inline set&lt;T&gt; operator() (const char* str) {             set&lt;T&gt; S;             /* TODO  */             return S;           }         };"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1505955002, "post_id": 46326895, "comment_id": 79628195, "body": "@NirFriedman I prefer this method when the type doesn&#39;t appear in the parameters at all because I don&#39;t like dummy parameters, but that is also a perfectly good answer."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1505923557, "creation_date": 1505923557, "answer_id": 46326895, "question_id": 46325133, "link": "https://stackoverflow.com/questions/46325133/templated-function-template-specialization/46326895#46326895", "title": "Templated function template specialization", "body": "<p>A partial specialization is when you specify part of the type of the template, but not the whole thing. For example,</p>\n\n<pre><code>template &lt;&gt;\ntemplate&lt;class T&gt; set&lt;T&gt; convertTo&lt;set&lt;T&gt;&gt;(const char* str)\n</code></pre>\n\n<p>would partially specialize for <code>set&lt;T&gt;</code> if partial function specialization were allowed.</p>\n\n<p>The two main ways of handling this are to instead overload, by removing the <code>template&lt;&gt;</code> part, or better yet switch to using template class specialization. The problem with overloading is that it looks somewhat different if you are overloading with another template (as with <code>set&lt;T&gt;</code>) or with a single type (as with <code>int</code>), and mixing specialization and overload almost certainly doesn't work as you expect.</p>\n\n<p>Therefore, template class specialization is usually the best way to go, and can be done like this:</p>\n\n<pre><code>// Generic version\ntemplate &lt;typename T&gt;\nclass Converter {\n  public:\n    T operator() (const char* str) {\n          T output;\n          stringstream ss(str, stringstream::in);\n          ss &gt;&gt; output;\n          return output;\n    }\n};\n\ntemplate &lt;&gt;\nclass Converter&lt;int&gt; {\n  public:\n    int operator() (const char* str) {\n        return atoi(str);\n    }\n};\n\n// ...\n\ntemplate &lt;typename T&gt;\nT convertTo(const char* str) {\n    return Converter&lt;T&gt;{}(str);\n}\n</code></pre>\n\n<p>That way you can use any type of specialization you want for the class without issue.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 2236584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64a039024f3f8920c28c059c88e596?s=128&d=identicon&r=PG", "display_name": "lawilog", "link": "https://stackoverflow.com/users/2236584/lawilog"}, "edited": false, "score": 1, "creation_date": 1505925516, "post_id": 46327162, "comment_id": 79615794, "body": "Thank you. Looks nice. In this case I&#39;d name it like convert(x, to&lt;int&gt;);   :-)"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1505954674, "post_id": 46327162, "comment_id": 79628112, "body": "This is another good solution. I prefer the solution I gave because it doesn&#39;t involve adding a dummy parameter, but I&#39;d use overloading if the type appeared in the function arguments naturally. Do note that weird things can happen if you add specialization into the mix, though."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": 4, "last_activity_date": 1505924514, "creation_date": 1505924514, "answer_id": 46327162, "question_id": 46325133, "link": "https://stackoverflow.com/questions/46325133/templated-function-template-specialization/46327162#46327162", "title": "Templated function template specialization", "body": "<p>For whatever reason a common answer for this problem is to forward to a static method of an implementation struct. A struct can be partially specialized so this does solve the issue. But it's usually better to use overloading; there are various reasons for that but here I'll simply restrict myself to saying that it's less boilerplate per implementation. You can do it like this:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct tag{}; // implementation detail\n\ntemplate&lt;class T&gt;\nT convertTo(const char* str, tag&lt;T&gt;) {\n  T output;\n  stringstream ss(str, stringstream::in);\n  ss &gt;&gt; output;\n  return output;\n}\n\nint convertTo(const char* str, tag&lt;int&gt;) {\n  return atoi(str);\n}\n\ntemplate&lt;class T&gt;\nset&lt;T&gt; convertTo(const char* str, tag&lt;set&lt;T&gt;&gt;) {\n  set&lt;T&gt; S;\n  // TODO split str by comma, convertTo&lt;T&gt;(each element) and put into S\n  return S;\n}\n\ntemplate&lt;class T&gt;\nunordered_set&lt;T&gt; convertTo(const char* str, tag&lt;unordered_set&lt;T&gt;&gt;) {\n  unordered_set&lt;T&gt; S;\n  // TODO split str by comma, convertTo&lt;T&gt;(each element) and put into S\n  return S;\n}\n\ntemplate &lt;class T&gt;\nT convertTo(const char * s) {\n    return convertTo(s, tag&lt;T&gt;{});\n};\n</code></pre>\n\n<p>All of the <code>convertTo</code> taking two arguments are just overloads now, which is fine. The user facing <code>convertTo</code> simply calls to the two argument form using our little tag struct to control the dispatch in exactly the same way as partial specialization.</p>\n\n<p>There's lots of other interesting merits to this technique, like the ability to control overload resolution more precisely using additional <code>tag</code>-like structs and derived-base conversion, the utility of ADL/2-phase lookup, but it's a bit out of scope here.</p>\n"}], "owner": {"reputation": 153, "user_id": 2236584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64a039024f3f8920c28c059c88e596?s=128&d=identicon&r=PG", "display_name": "lawilog", "link": "https://stackoverflow.com/users/2236584/lawilog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 1, "accepted_answer_id": 46326895, "answer_count": 2, "score": 6, "last_activity_date": 1505927449, "creation_date": 1505918605, "last_edit_date": 1505927449, "question_id": 46325133, "link": "https://stackoverflow.com/questions/46325133/templated-function-template-specialization", "title": "Templated function template specialization", "body": "<p>I want to write a specialization for a template function, where the type for which it is specialized is itself a templated type. (I am using C++11 or higher.)</p>\n\n<p>In the example code below, I have the generic function <code>convertTo</code> and a working specialization for <code>int</code>, allowing me to use <code>convertTo&lt;int&gt;(s)</code> (as shown). But I cannot figure out how to write specializations for, e.g., <code>std::set&lt;T&gt;</code>. This is what I tried:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;set&gt;\n#include &lt;unordered_set&gt;\nusing namespace std;\n\n// generic version\ntemplate&lt;class T&gt; T convertTo(const char* str) {\n  T output;\n  stringstream ss(str, stringstream::in);\n  ss &gt;&gt; output;\n  return output;\n}\n\n// specialization for int. works.\ntemplate &lt;&gt;\nint convertTo&lt;int&gt;(const char* str) {\n  return atoi(str);\n}\n\ntemplate &lt;&gt;\ntemplate&lt;class T&gt; set&lt;T&gt; convertTo&lt;set&lt;T&gt;&gt;(const char* str) {\n  set&lt;T&gt; S;\n  // TODO split str by comma, convertTo&lt;T&gt;(each element) and put into S\n  return S;\n}\n\ntemplate &lt;&gt;\ntemplate&lt;class T&gt; unordered_set&lt;T&gt; convertTo&lt;unordered_set&lt;T&gt;&gt;(const char* str) {\n  unordered_set&lt;T&gt; S;\n  // TODO split str by comma, convertTo&lt;T&gt;(each element) and put into S\n  return S;\n}\n\nint main() {\n  float f = convertTo&lt;float&gt;(\"3.141\");\n  int i = convertTo&lt;int&gt;(\"123\");\n  set&lt;int&gt; os = convertTo&lt;set&lt;int&gt;&gt;(\"9,8,7,6\");\n  unordered_set&lt;int&gt; os = convertTo&lt;unordered_set&lt;int&gt;&gt;(\"9,8,7,6\");\n  return 0;\n}\n</code></pre>\n\n<p>With g++ 6.3.0 I get the error message:</p>\n\n<pre><code> too many template parameter lists in declaration of \u2018std::set&lt;T&gt; convertTo(const char*)\u2019\n</code></pre>\n\n<p>So I tried to comment out the lines <code>template&lt;&gt;</code> above the attempted specializations, but then I get:</p>\n\n<pre><code>non-class, non-variable partial specialization \u2018convertTo&lt;std::set&lt;T, std::less&lt;_Key&gt;, std::allocator&lt;_CharT&gt; &gt; &gt;\u2019 is not allowed\n</code></pre>\n\n<p>I don't understand. I didn't intend to write a partial specialization?</p>\n\n<p>I do not want to use <code>template&lt;class Container&gt;</code>, because I want to be able to write specific code for different container classes. (I need this for other template classes in my code.)</p>\n\n<p>Any advise on how to do this?</p>\n"}, {"tags": ["c++", "inheritance", "recursion", "static", "crtp"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505918810, "post_id": 46325095, "comment_id": 79611008, "body": "smells a bit like a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. What is that <code>x</code> good for? Does really need each instance of <code>Derived</code> its own copy of it? What can you do with <code>x</code> that you cannot do already with <code>myint</code> ?"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505919104, "post_id": 46325095, "comment_id": 79611238, "body": "well, no. Not each instance. X can be static as well. Actually it corresponds to the set of &quot;keywords&quot; allowed for that particular class. Each class has its own keywords, plus all those of its parents."}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505919208, "post_id": 46325095, "comment_id": 79611311, "body": "The methods in Base check if the keywords are allowed and just save the value provided."}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505920236, "post_id": 46325095, "comment_id": 79612081, "body": "Also I just want to add that it will rarely occurs to have multiple instances of the same class"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1505920938, "post_id": 46325869, "comment_id": 79612652, "body": "well, in the case of int it is indeed a good solution. However, the actual type of &quot;x&quot; is a std::set and, AFAIK, there&#39;s no way to pass particular instances of a type other than enum and int as template parameter."}], "tags": [], "owner": {"reputation": 21, "user_id": 3962089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2023da24bbb5cb1439b991886f71cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Yevtushenko", "link": "https://stackoverflow.com/users/3962089/anton-yevtushenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1505920572, "creation_date": 1505920572, "answer_id": 46325869, "question_id": 46325095, "link": "https://stackoverflow.com/questions/46325095/static-variable-in-all-children-with-recursion/46325869#46325869", "title": "Static variable in all children with &quot;recursion&quot;", "body": "<p>I would do it in this way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Base {\n    int x = 0;\n};\n\ntemplate &lt;class BASE, int MY&gt;\nstruct Derived : BASE {\n    static const int myint = MY;\n    Derived() {\n        this-&gt;x += myint;\n    }\n};\n\nstruct Derived1 : Derived&lt;Base, 1&gt; {};\nstruct Derived2 : Derived&lt;Derived1, 2&gt; {};\n\nint main() {\n    Derived1 d1;\n    Derived2 d2;\n    std::cout &lt;&lt; d1.x &lt;&lt; std::endl;\n    std::cout &lt;&lt; d2.x &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1505923555, "post_id": 46326399, "comment_id": 79614574, "body": "I feel like a pain in the ** in saying this but in this solution I believe all derived share the same static variable. Suppose to write   struct Derived1B : public Derived&lt;Base&gt;; There&#39;s no way to specialize Derived1::...::my_str=&quot;Derived&quot; and Derived1B::...::my_str=&quot;DerivedB&quot;"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1505925622, "post_id": 46326399, "comment_id": 79615865, "body": "very good idea. Probably it can be generalized with some helper structure. I&#39;ll give it a try. Thank you very much!"}], "tags": [], "owner": {"reputation": 21, "user_id": 3962089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2023da24bbb5cb1439b991886f71cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Yevtushenko", "link": "https://stackoverflow.com/users/3962089/anton-yevtushenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1505922083, "creation_date": 1505922083, "answer_id": 46326399, "question_id": 46325095, "link": "https://stackoverflow.com/questions/46325095/static-variable-in-all-children-with-recursion/46326399#46326399", "title": "Static variable in all children with &quot;recursion&quot;", "body": "<p>Variation for not-int/enum types:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n\nstruct Base {\n    std::set&lt;std::string&gt; x;\n};\n\ntemplate &lt;class BASE&gt;\nstruct Derived : BASE {\n    static const std::string my_str;\n    Derived() {\n        this-&gt;x.insert(my_str);\n    }\n};\n\nstruct Derived1 : Derived&lt;Base&gt; {};\ntemplate&lt;&gt;\nconst std::string Derived&lt;Base&gt;::my_str = \"derived\";\n\nstruct Derived2 : Derived&lt;Derived1&gt; {};\ntemplate&lt;&gt;\nconst std::string Derived&lt;Derived1&gt;::my_str = \"derived2\";\n\nint main() {\n    Derived1 d1;\n    Derived2 d2;\n\n    for (const auto &amp; word : d1.x) {\n        std::cout &lt;&lt; word &lt;&lt; std::endl;\n    }\n\n    for (const auto &amp; word : d2.x) {\n        std::cout &lt;&lt; word &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "is_accepted": false, "score": 0, "last_activity_date": 1505926551, "creation_date": 1505926551, "answer_id": 46327789, "question_id": 46325095, "link": "https://stackoverflow.com/questions/46325095/static-variable-in-all-children-with-recursion/46327789#46327789", "title": "Static variable in all children with &quot;recursion&quot;", "body": "<p>I have to thank Toxa Evtushenko for the help. Thanks to his idea I came up with this variation which I believe can be applied in a general way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n\nstruct Base {\n  std::set&lt;std::string&gt; x;\n};\n\ntemplate&lt;class DERIVED&gt;\nstruct help{\n  static const std::string my_str;\n};\n\ntemplate &lt;class BASE, class DERIVED&gt;\nstruct Derived : BASE {\nprivate:\n  help&lt;DERIVED&gt; val;\npublic:\n  Derived() {\n    this-&gt;x.insert(val.my_str);\n  }\n};\n\nstruct Derived1a;\ntemplate&lt;&gt; const std::string help&lt;Derived1a&gt;::my_str = \"Derived1A\";\n\nstruct Derived1a : Derived&lt;Base,Derived1a&gt; {};\n\nstruct Derived1b;\ntemplate&lt;&gt; const std::string help&lt;Derived1b&gt;::my_str = \"Derived1B\";\n\nstruct Derived1b : Derived&lt;Base,Derived1b&gt; {};\n\nstruct Derived2;\ntemplate&lt;&gt; const std::string help&lt;Derived2&gt;::my_str = \"Derived2\";\nstruct Derived2 : Derived&lt;Derived1a,Derived2&gt; {};\n\nint main() {\n  Derived1a d1a;\n  Derived1b d1b;\n  Derived2  d2;\n\n  for (const auto &amp; word : d1a.x) {\n    std::cout &lt;&lt; word &lt;&lt; std::endl;\n  }\n\n  std::cout &lt;&lt; std::endl;\n\n  for (const auto &amp; word : d1b.x) {\n    std::cout &lt;&lt; word &lt;&lt; std::endl;\n  }\n\n  std::cout &lt;&lt; std::endl;\n\n  for (const auto &amp; word : d2.x) {\n    std::cout &lt;&lt; word &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>Of course more elegant solutions are welcome!</p>\n"}], "owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1505926551, "creation_date": 1505918520, "question_id": 46325095, "link": "https://stackoverflow.com/questions/46325095/static-variable-in-all-children-with-recursion", "title": "Static variable in all children with &quot;recursion&quot;", "body": "<p>I have something like</p>\n\n<pre><code>struct Base{\n  int x=0;\n};\n</code></pre>\n\n<p>And I want all the children to have a static variable \"myint\" so that, when built, they cumulate in x the values of myint for all parents and themselves. (In reality in my case x is a set and what i want is the union of the sets of each children).</p>\n\n<pre><code>struct Derived : public Base {\n  static int myint =1;\n  Derived(){x+=myint;}\n};\n\nstruct Derived2 : public Derived {\n  static int myint = 2;\n  Derived2(){x+=myint;}\n};\n</code></pre>\n\n<p>So that x=1 for Derived and x=3 for Derived2.</p>\n\n<p>I've seen that something like this is possible with CRTP (<a href=\"https://stackoverflow.com/questions/12796580/static-variable-for-each-derived-class\">static variable for each derived class</a>) writing a BaseX class:</p>\n\n<pre><code>template&lt;class A&gt;\nstruct BaseX : public Base {\n  static int myint;\n  BaseX() {Base::x+=myint;}\n}\n\nstruct Derived : public BaseX&lt;Derived&gt;;\n</code></pre>\n\n<p>But such pattern can't be applied for the second level of inheritance. I tried with multiple inheritance but what I obtain, of course, is that I have two values for x, each one with the wrong value (say x=1 for the part inheriting from Derived, and x=2 for the part deriving from BaseX).</p>\n\n<p>Do you see any solution for this problem without having to call for (x+=myint) in all constructor and define myint in each derived?</p>\n"}, {"tags": ["c++", "cout"], "comments": [{"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1505918408, "post_id": 46324996, "comment_id": 79610709, "body": "Factor out all pointers. Then use <code>std::string</code> instead of char buffers. Don&#39;t do <code>using namespace std;</code> in headers. Finally, don&#39;t print out variables before they are initialized."}, {"owner": {"reputation": 1, "user_id": 4176389, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/406e481db30696843c68fab0c40286fc?s=128&d=identicon&r=PG&f=1", "display_name": "lucas", "link": "https://stackoverflow.com/users/4176389/lucas"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1505918833, "post_id": 46324996, "comment_id": 79611030, "body": "what do you mean by factor out all pointers?"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1505918883, "post_id": 46324996, "comment_id": 79611068, "body": "Don&#39;t use them in your code."}, {"owner": {"reputation": 1, "user_id": 4176389, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/406e481db30696843c68fab0c40286fc?s=128&d=identicon&r=PG&f=1", "display_name": "lucas", "link": "https://stackoverflow.com/users/4176389/lucas"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1505919065, "post_id": 46324996, "comment_id": 79611214, "body": "But I have to use pointers"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1505920322, "post_id": 46324996, "comment_id": 79612145, "body": "I don&#39;t think so."}], "answers": [{"tags": [], "owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1505920560, "last_edit_date": 1505920560, "creation_date": 1505919138, "answer_id": 46325326, "question_id": 46324996, "link": "https://stackoverflow.com/questions/46324996/cout-outputting-jibberish-line-of-message-instead-of-actual-users-cout-statemen/46325326#46325326", "title": "cout outputting jibberish line of message instead of actual user&#39;s cout statement", "body": "<p>Your programm prints garbage because the variables (<code>char[]</code> and <code>int</code>) are not initialized. The actual behavior is undefined. To fix this, you should probably add a constructor to your class and initialize the variables.</p>\n\n<p>For further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/3127454/1025391\">How do C++ class members get initialized if I don&#39;t do it explicitly?</a></li>\n<li><a href=\"https://stackoverflow.com/q/23937605/1025391\">Why do I not get compiler warning about access uninitialized member variable in ctor?</a></li>\n</ul>\n\n<p>Also, when you use <code>std::cin</code> to let users enter a kingdom name into the fixed size char array, they can easily produce a buffer overflow. This is usually not desirable. Please use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> instead.</p>\n\n<p>The use of <code>using namespace std;</code> is discouraged. Especially so in header files.</p>\n\n<p>For further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/1452721/1025391\">Why is &quot;using namespace std&quot; considered bad practice?</a></li>\n</ul>\n\n<p>Unless you have very good reasons you should normally not be using pointers to allocate objects or arrays dynamically. If you need to allocate an array at runtime, use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> instead.</p>\n\n<p>For further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/24136120/1025391\">What is wrong with using arrays dynamically allocated in C++?</a></li>\n</ul>\n\n<p>You should probably add overloads for the &lt;&lt; and >> operators for your class. You wouldn't need to declare those members public then.</p>\n\n<p>For further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/4421706/1025391\">What are the basic rules and idioms for operator overloading?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 8623929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HEZMH.jpg?s=128&g=1", "display_name": "Oleksandr Melnichenko", "link": "https://stackoverflow.com/users/8623929/oleksandr-melnichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1505923316, "creation_date": 1505923316, "answer_id": 46326820, "question_id": 46324996, "link": "https://stackoverflow.com/questions/46324996/cout-outputting-jibberish-line-of-message-instead-of-actual-users-cout-statemen/46326820#46326820", "title": "cout outputting jibberish line of message instead of actual user&#39;s cout statement", "body": "<p>You can do it like this. I did it quickly, so it's not perfect.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Kingdom.h\"\n\nint main() {\n    int count = 0; // the number of kingdoms in the array\n    sict::Kingdom* pKingdom = nullptr;\n\n\n    std::cout &lt;&lt; \"==========\\n\"\n        &lt;&lt; \"Input data\\n\"\n        &lt;&lt; \"==========\\n\"\n        &lt;&lt; \"Enter the number of Kingdoms: \";\n    std::cin &gt;&gt; count;\n    std::cin.ignore();\n\n    if (count &lt; 1) return 1;\n\n    //without read()\n    //pKingdom = new sict::Kingdom[count];\n    //for (int i = 0; i &lt; count; ++i) {\n    //    std::cout &lt;&lt; \"Kingdom #\" &lt;&lt; i + 1 &lt;&lt; \": \\n\";\n    //    //cin &gt;&gt; i;\n    //    std::cout &lt;&lt; \"Enter the name of the Kingdom: \";\n    //    pKingdom[i].setName();\n    //    std::cout &lt;&lt; \"Enter the number people living in \" &lt;&lt; pKingdom[i].m_name &lt;&lt; \": \";\n    //    std::cin &gt;&gt; pKingdom[i].m_population;\n\n    //}\n    //std::cout &lt;&lt; \"==========\\n\\n\";\n\n    pKingdom = new sict::Kingdom[count]();\n\n    for (int i = 1; i &lt;= count; ++i)\n    {\n        pKingdom[i-1].read();\n    }\n\n\n    // testing that \"display(...)\" works\n    std::cout &lt;&lt; \"------------------------------\\n\"\n        &lt;&lt; \"The 1st kingdom entered is:\\n\"\n        &lt;&lt; \"------------------------------\\n\";\n    pKingdom[0].display();\n    std::cout &lt;&lt; \"------------------------------\\n\\n\";\n\n\n    delete[]pKingdom;\n    pKingdom = nullptr;\n    return 0;\n}\n</code></pre>\n\n<p>Kingdom.h</p>\n\n<pre><code>#ifndef KINGDOM_H_\n#define KINGDOM_H_\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nnamespace sict {\n\n    class Kingdom {\n    private:\n        std::string m_name;\n        int m_population;\n    public:\n        Kingdom();\n\n        void display();\n        void read();\n\n        const std::string&amp; getName();\n        void setName(std::string name);\n        const int&amp; getPopulation();\n        void setPopulation(int population);\n    };\n}\n#endif\n</code></pre>\n\n<p>Kingdom.cpp</p>\n\n<pre><code>#include \"Kingdom.h\"\n\nnamespace sict {\n\n    Kingdom::Kingdom()\n        :m_name(\"\"),\n        m_population(0)\n    {}\n\n    void Kingdom::display() {\n        std::cout &lt;&lt; \"Name: \" &lt;&lt; m_name &lt;&lt; \", population: \" &lt;&lt; m_population &lt;&lt; \"\\n\";\n    }\n\n    void Kingdom::read() {\n        std::cout &lt;&lt; \"\\n\\nEnter the name of the Kingdom: \";\n        std::getline(std::cin, m_name);\n\n        std::cout &lt;&lt; \"Enter the number of people living in \" &lt;&lt; m_name &lt;&lt; \": \";\n        std::cin &gt;&gt; m_population;\n        std::cin.ignore();\n    }\n\n    const std::string&amp; Kingdom::getName()\n    {\n        return m_name;\n    }\n\n    void Kingdom::setName(std::string name)\n    {\n        m_name = name;\n    }\n\n    const int&amp; Kingdom::getPopulation()\n    {\n        return m_population;\n    }\n\n    void Kingdom::setPopulation(int population)\n    {\n        m_population = population;\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4176389, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/406e481db30696843c68fab0c40286fc?s=128&d=identicon&r=PG&f=1", "display_name": "lucas", "link": "https://stackoverflow.com/users/4176389/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505923316, "creation_date": 1505918202, "question_id": 46324996, "link": "https://stackoverflow.com/questions/46324996/cout-outputting-jibberish-line-of-message-instead-of-actual-users-cout-statemen", "title": "cout outputting jibberish line of message instead of actual user&#39;s cout statement", "body": "<p>This is my header file</p>\n\n<pre><code>#ifndef KINGDOM_H_\n#define KINGDOM_H_\n\n#include &lt;string&gt;\nusing namespace std;\nnamespace sict{\n    class Kingdom {\n    public:\n        char m_name[32];\n        int m_population;\n\n    };\n    void display(Kingdom&amp; pKingdom);\n}\n#endif\n</code></pre>\n\n<p>and these are my cpp files</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"kingdom.h\"\n\nusing namespace std;\n\nnamespace sict {\n\n    void display(Kingdom&amp; pKingdom) {\n        cout &lt;&lt; pKingdom.m_name &lt;&lt; \", population \" &lt;&lt; pKingdom.m_population &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>And this is my last cpp file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Kingdom.h\"\n\nusing namespace std;\nusing namespace sict;\n\nvoid read(sict::Kingdom&amp;);\n\nint main() {\n    int count = 0; // the number of kingdoms in the array\n    Kingdom* pKingdom = nullptr;\n\n\n    cout &lt;&lt; \"==========\\n\"\n        &lt;&lt; \"Input data\\n\"\n        &lt;&lt; \"==========\\n\"\n        &lt;&lt; \"Enter the number of Kingdoms: \";\n    cin &gt;&gt; count;\n    cin.ignore();\n\n    if (count &lt; 1) return 1;\n\n\n    pKingdom = new Kingdom[count];\n    for (int i = 0; i &lt; count; ++i) {\n        cout &lt;&lt; \"Kingdom #\" &lt;&lt; i + 1 &lt;&lt; \": \" &lt;&lt; endl;\n        cin &gt;&gt; i;\n        cout &lt;&lt; \"Enter the name of the Kingdom: \" &lt;&lt; pKingdom[i].m_name;\n        cin &gt;&gt; pKingdom[i].m_name;\n        cout &lt;&lt; \"Enter the number people living in \" &lt;&lt; pKingdom[i].m_population &lt;&lt; \": \";\n        cin &gt;&gt; pKingdom[i].m_population;\n\n    }\n    cout &lt;&lt; \"==========\" &lt;&lt; endl &lt;&lt; endl;\n\n    // testing that \"display(...)\" works\n    cout &lt;&lt; \"------------------------------\" &lt;&lt; endl\n        &lt;&lt; \"The 1st kingdom entered is\" &lt;&lt; endl\n        &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n    sict::display(pKingdom[0]);\n    cout &lt;&lt; \"------------------------------\" &lt;&lt; endl &lt;&lt; endl;\n\n\n    delete[]pKingdom;\n    pKingdom = nullptr;\n            return 0;\n}\n\n// read accepts data for a Kingdom from standard input\n\nvoid read(sict::Kingdom&amp; kingdom) {\n\n    cout &lt;&lt; \"Enter the name of the Kingdom: \";\n    cin.get(kingdom.m_name, 32, '\\n');\n    cin.ignore(2000, '\\n');\n    cout &lt;&lt; \"Enter the number of people living in \" &lt;&lt; kingdom.m_name &lt;&lt; \": \";\n    cin &gt;&gt; kingdom.m_population;\n    cin.ignore(2000, '\\n');\n}\n</code></pre>\n\n<p>When the code gets to the part Enter the Kingdom name, it would prompt the user for answer, but before it prompts, it just outputs jibberish like this</p>\n\n<p><a href=\"https://i.imgur.com/MSSHgvz.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/MSSHgvz.png</a></p>\n\n<p>Also, when it gets to enter the number of people living in, it would also output \"-842150451\" before I can even type a valid number.</p>\n\n<p>Any guesses to solve the problem?</p>\n"}, {"tags": ["c++", "templates", "inheritance", "polymorphism", "overriding"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8641223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaeccdfae4337871c580108fac59b59?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8641223/george"}, "edited": false, "score": 0, "creation_date": 1505923669, "post_id": 46324931, "comment_id": 79614646, "body": "Can something like this be used in a polymorphic way? For instance, if I create one <code>shared_ptr&lt;C&lt;A1, B&gt;&gt;</code> object, and another <code>shared_ptr&lt;C&lt;A1, B1&gt;&gt;</code> object, can both of those be stored in an a <code>list&lt;shared_ptr&lt;C&lt;A, B&gt;&gt;&gt;</code>? I&#39;m not sure what&#39;s required in the C class to convert some derived version to <code>C&lt;A, B&gt;</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23, "user_id": 8641223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaeccdfae4337871c580108fac59b59?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8641223/george"}, "edited": false, "score": 0, "creation_date": 1505923920, "post_id": 46324931, "comment_id": 79614797, "body": "@George - No. Either with a template or explicitly spelled out (like in your question) <code>C&lt;A, B&gt;</code> and <code>C&lt;A1, B&gt;</code> are not in a polymorphic relationship."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23, "user_id": 8641223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaeccdfae4337871c580108fac59b59?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8641223/george"}, "edited": false, "score": 0, "creation_date": 1505924667, "post_id": 46324931, "comment_id": 79615240, "body": "@George - But you can put all of those classes into a container of <code>B*</code> or a container of <code>A*</code>."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1505918675, "last_edit_date": 1505918675, "creation_date": 1505918066, "answer_id": 46324931, "question_id": 46324825, "link": "https://stackoverflow.com/questions/46324825/need-recommendations-on-multiple-inheritance-and-optional-function-overriding-c/46324931#46324931", "title": "Need recommendations on multiple inheritance and optional function overriding C++", "body": "<p>Your use case screams \"templates with constraints\". What you are missing is how to check and encode that the template parameters inherit from the correct classes. You can do that with <code>std::is_base_of</code></p>\n\n<pre><code>template&lt;class A_, class B_,\n         typename std::enable_if&lt;std::is_base_of&lt;A, A_&gt;::value&gt;, int&gt;::type = 0,\n         typename std::enable_if&lt;std::is_base_of&lt;B, B_&gt;::value&gt;, int&gt;::type = 0&gt;\nclass C : public A_, public B_\n{\n\n};\n</code></pre>\n\n<p>Here's how it works:</p>\n\n<p><code>std::enable_if</code> will have a <code>type</code> (an <code>int</code> as in our case), iff the boolean expression it is fed is true. Otherwise there is no type there, and the template will not compile. If there is a type there, then we obtained a non-type template parameter, which we give the default value of <code>0</code> to. Assigning the default is what makes us able to instantiate the template with two arguments.</p>\n\n<p>You'll find these utilities, and more, in the <a href=\"http://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow noreferrer\"><code>&lt;type_traits&gt;</code></a> header.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 8003825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb6ba4e739a5c54c94144adf4296a46?s=128&d=identicon&r=PG&f=1", "display_name": "Nash Sheldon", "link": "https://stackoverflow.com/users/8003825/nash-sheldon"}, "is_accepted": false, "score": 0, "last_activity_date": 1505921998, "creation_date": 1505921998, "answer_id": 46326372, "question_id": 46324825, "link": "https://stackoverflow.com/questions/46324825/need-recommendations-on-multiple-inheritance-and-optional-function-overriding-c/46326372#46326372", "title": "Need recommendations on multiple inheritance and optional function overriding C++", "body": "<p>I was interested in this subject a while back so I have some strategies. I think a socket program is the perfect demonstration of this type of abstraction. One of the easiest things to do is declare a base header with functions and variables you want available in any object of the class you declare. Then create classes that inherit from the base class when ITSELF is set as the template argument. For Example:</p>\n\n<pre><code>template&lt;class P&gt; class Socket {\n  protected:\n   int sock;\n   char datagram[4096];\n   struct sockaddr_in server;\n   struct sockaddr_in b;\n  public:\n   void dport(int port){server.sin_port=htons(port);}\n   int CONNECT(){return connect(sock , (struct sockaddr *)&amp;server , sizeof(server));};\n  template &lt;class Dst&gt; inline void dst(Dst d){server.sin_addr.s_addr=inet_addr(d);}\n  template &lt;class Src&gt; void src(Src s){b.sin_addr.s_addr=inet_addr(s);}  \n  int LISTEN(int port){b.sin_port=htons(port); return bind(sock,\n  (sockaddr*)&amp;b, sizeof(b));}\n</code></pre>\n\n<p>There are several ways you can specialize at this point. My favorite would be to create new classes that inherit by passing their own name as the template argument to base. </p>\n\n<pre><code>class UDP : public Socket&lt;UDP&gt; {\npublic:\n    UDP(){server.sin_family=AF_INET;\n    this-&gt;sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);}\n    template &lt;class Msg&gt; int SEND(Msg m, int length){\n    return sendto(this-&gt;sock, m, length, MSG_DONTWAIT, (sockaddr*)&amp;this-\n    &gt;server, sizeof(this-&gt;server));}\n    void RECV(void* buf, size_t size){socklen_t fromlen = sizeof(sockaddr);\n    ssize_t i = recvfrom(this-&gt;sock, buf, size, MSG_WAITALL,\n    (sockaddr*)&amp;this-&gt;b, &amp;fromlen);}\n};\n\nclass TCP : public Socket&lt;TCP&gt; {\npublic:\n TCP(){this-&gt;sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); this-\n &gt;server.sin_family=AF_INET;}\n int SEND(std::string buf){return send(this-&gt;sock, buf.c_str(), buf.size(), 0);}   //TODO: Error Handling\n void RECV(){char cur; while (read(this-&gt;sock, &amp;cur, 1) &gt; 0 ) {cout &lt;&lt; cur;}}};\n</code></pre>\n\n<p>Now UDP sockets use recvfrom() and sendto() while TCP sockets use send() and read(). All of these calls are now valid:</p>\n\n<pre><code>Socket&lt;TCP&gt; t1;\nSocket&lt;UDP&gt; u1;\nTCP t2;\nUDP u2;\n</code></pre>\n\n<p>I could not figure out any way to write specializations of the base class without duplicating code with each one. It's easier to create derived classes.</p>\n"}], "owner": {"reputation": 23, "user_id": 8641223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaeccdfae4337871c580108fac59b59?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8641223/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 46324931, "answer_count": 2, "score": 0, "last_activity_date": 1505921998, "creation_date": 1505917811, "question_id": 46324825, "link": "https://stackoverflow.com/questions/46324825/need-recommendations-on-multiple-inheritance-and-optional-function-overriding-c", "title": "Need recommendations on multiple inheritance and optional function overriding C++", "body": "<p>I've got a problem I'm trying to solve where I'd like to have some abstract base class, that inherits from multiple classes, where derivations can optionally have their methods overridden without declaring an additional class. I'll give an example here of what I'm trying to achieve:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A\n{\n    public:\n        virtual void foo() = 0;\n\n    protected:\n        A() {}\n};\n\nclass A1 : public A\n{\n    public:\n        A1() : A() {}\n\n        void foo() { cout &lt;&lt; \"A1 foo\" &lt;&lt; endl; };\n};\n\nclass A2 : public A\n{\n    public:\n        A2() : A() {}\n\n        void foo() { cout &lt;&lt; \"A2 foo\" &lt;&lt; endl; };\n};\n\nclass B\n{\n    public:\n        virtual void bar() { cout &lt;&lt; \"B bar: \" &lt;&lt; endl; }\n};\n\nclass B1 : public B\n{\n    public:\n        void bar()\n        {\n            cout &lt;&lt; \"B1 bar wrapper begin\" &lt;&lt; endl;\n            B::bar();\n            cout &lt;&lt; \"B1 bar wrapper end\" &lt;&lt; endl;\n        }\n};\n\n/*\n  ???\n  pure virtual class C\n  enforce derived classes to inherit something of type A\n  enforce derived classes to inherit something of type B\n\n  class C1 : public A1, either B or B1 ??? templates???\n  {\n\n  }\n\n  class C2 : public A2, either B or B1 ??? templates???\n  {\n\n  }\n\n  Can this be done without having to define classes CA1B, CA2B, CA1B1, CA2B1, etc.?\n*/\n\nint main(int argc, char *argv[])\n{\n    A1 a1;\n    a1.foo();\n    A2 a2;\n    a2.foo();\n\n/*\n    C1 c1b with type B\n    C1 c1b1 with type B1\n    C2 c2b with type B\n    C2 c2b1 with type B1\n\n    put c1b, c1b1, c2b, c2b1 in a list named \"combinations\"\n\n    cout &lt;&lt; \"Printing combinations\" &lt;&lt; endl;\n    for (auto i : combinations)\n    {\n        i-&gt;foo();\n        i-&gt;bar();\n    }\n*/\n\n    return 0;\n}\n</code></pre>\n\n<p>In theory the output would be:</p>\n\n<pre><code>A1 foo\nA2 foo\nPrinting combinations\nA1 foo\nB bar\nA1 foo\nB1 bar wrapper begin\nB bar\nB1 bar wrapper end\nA2 foo\nB bar\nA2 foo\nB1 bar wrapper begin\nB bar\nB1 bar wrapper end\n</code></pre>\n\n<p>If there's a way to accomplish this through some design pattern, or I'm using a bad approach, please let me know. I'm using C++11.</p>\n"}, {"tags": ["c++", "algorithm", "stl"], "comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1505917963, "post_id": 46324814, "comment_id": 79610383, "body": "It might be helpful to know what line of code is responsible for the compiler diagnostic message."}, {"owner": {"reputation": 2374, "user_id": 8491726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1550562035006492/picture?type=large", "display_name": "Artemy Vysotsky", "link": "https://stackoverflow.com/users/8491726/artemy-vysotsky"}, "edited": false, "score": 1, "creation_date": 1505918554, "post_id": 46324814, "comment_id": 79610830, "body": "try to replace <code>c.begin()</code> with std::inserter(c,c.begin())"}, {"owner": {"reputation": 335, "user_id": 6761900, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8BZ8E.jpg?s=128&g=1", "display_name": "Litchy", "link": "https://stackoverflow.com/users/6761900/litchy"}, "edited": false, "score": 0, "creation_date": 1505918868, "post_id": 46324814, "comment_id": 79611059, "body": "the code <code>std::inserter(c,c.begin())</code> works! Thank you! So which attribute does <code>inserter</code> change?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1505919256, "post_id": 46324814, "comment_id": 79611345, "body": "It provides an output iterator that inserts into the set. Assigning to <code>c.begin()</code> an onward requires there to be something in the set already. Not to mention, you aren&#39;t allowed to assign to a set member via iterator anyway (it can break the set invariant)."}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1505920325, "post_id": 46324814, "comment_id": 79612149, "body": "maybe not related, but why <code>x+4</code> and <code>y+5</code> used as second parameters for <code>a.insert</code> and <code>b.insert</code> It seems to me that you are pointing to some nowhereland memory, shouldn&#39;t it be x+3 and y+4 to point to the last element of the two arrays? (just asking, maybe I&#39;m completely missing how that overload of insert work)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1505920513, "post_id": 46324814, "comment_id": 79612294, "body": "@GianPaolo by convention, c++ uses half open ranges. &quot;end&quot; is one beyond the last element of the array"}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1505921006, "post_id": 46324814, "comment_id": 79612713, "body": "thanks, @Caleth, This is quite intuitive when you use an iterator from a container (someContainer.end()), it&#39;s weird to me with plane array such <code>int x[4]</code> (pointing to the first memory location after allocated memory of the array, which in many case is UB). but if that&#39;s the way it works, ok for me as well!"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1505921251, "post_id": 46324814, "comment_id": 79612878, "body": "@GianPaolo You can <i>compare to</i> a pointer one beyond the end, you can&#39;t dereference it. e.g. <code>for (int * p = a; p != a+4; ++p) { std::cout &lt;&lt; *p; }</code> is fine. Iterators are &quot;pointer like&quot; in, rather than the other way around"}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1505921389, "post_id": 46324814, "comment_id": 79612980, "body": "@Caleth, that&#39;s make sense actually. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 2, "last_activity_date": 1505920040, "last_edit_date": 1505920040, "creation_date": 1505919738, "answer_id": 46325553, "question_id": 46324814, "link": "https://stackoverflow.com/questions/46324814/assignment-of-read-only-location-while-using-set-union-to-merge-two-sets/46325553#46325553", "title": "Assignment of read-only location while using set_union to merge two sets", "body": "<p><code>std::set&lt;int&gt;::iterator</code> isn't an <a href=\"http://en.cppreference.com/w/cpp/concept/OutputIterator\" rel=\"nofollow noreferrer\">OutputIterator</a>, so it isn't suitable for use as the fifth argument of <code>std::set_union</code>. You probably mean to insert into <code>c</code>, so a suitable iterator is <a href=\"http://en.cppreference.com/w/cpp/iterator/inserter\" rel=\"nofollow noreferrer\"><code>std::inserter(c,c.begin())</code></a>. </p>\n\n<pre><code>set_union(a.begin(), a.end(), b.begin(), b.end(), std::inserter(c,c.begin()));\n</code></pre>\n\n<p>An OutputIterator is one that can have its pointed-to values assigned to, and a <code>std::insert_iterator&lt;std::set&lt;int&gt;&gt;</code> achieves this by returning a proxy object, that inserts into the set when assigned to, rather than a <code>int&amp;</code></p>\n\n<p>Alternatively, if you know how many items will result (or are prepared to overallocate), you could use a different container's begin, such as <code>std::array&lt;int, 7&gt;</code>, or a <code>std::vector&lt;int&gt;</code> whose size was sufficient to contain the 7 elements resulting from the union.</p>\n\n<pre><code>std::vector&lt;int&gt; d(a.size() + b.size(), 0); // preallocate enough\nstd::vector&lt;int&gt;::iterator end = std::set_union(a.begin(), a.end(), b.begin(), b.end(), d.begin());\nd.erase(end, d.end()); // clean up any excess elements not from `a` or `b`\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 6761900, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8BZ8E.jpg?s=128&g=1", "display_name": "Litchy", "link": "https://stackoverflow.com/users/6761900/litchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 46325553, "answer_count": 1, "score": 3, "last_activity_date": 1505920040, "creation_date": 1505917784, "last_edit_date": 1505918371, "question_id": 46324814, "link": "https://stackoverflow.com/questions/46324814/assignment-of-read-only-location-while-using-set-union-to-merge-two-sets", "title": "Assignment of read-only location while using set_union to merge two sets", "body": "<p>I am trying to combine two set to one set, but when I use the simplest example, a error:<code>assignment of read-only location '__result.std::_Rb_tree_const_iterator&lt;_Tp&gt;::operator*&lt;int&gt;()'</code> the code is:</p>\n\n<pre><code>set&lt;int&gt; a;\nset&lt;int&gt; b;\nint x[4] = {0,1,2,3};int y[5] = {1,2,4,6,9};\na.insert(x,x+4);\nb.insert(y,y+5);\nset&lt;int&gt; c;\nset_union(a.begin(), a.end(), b.begin(), b.end(), c.begin());\n</code></pre>\n\n<p>So am I writing wrong? What should I do if I want to merge two <code>set</code> and use a new <code>set</code> to contain the elements?</p>\n\n<p>The error calls from this line: <code>set_union(a.begin(), a.end(), b.begin(), b.end(), c.begin());</code></p>\n"}, {"tags": ["c++", "oop", "pointers", "vector"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1505917823, "post_id": 46324743, "comment_id": 79610265, "body": "Lookup the visitor pattern, for one solution. Other than that, your question doesn&#39;t fit the SO question format well."}], "answers": [{"tags": [], "owner": {"reputation": 727, "user_id": 6860744, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-3_2Ewze_gI8/AAAAAAAAAAI/AAAAAAAAACQ/fz_BqGtzSd4/photo.jpg?sz=128", "display_name": "Darius Duesentrieb", "link": "https://stackoverflow.com/users/6860744/darius-duesentrieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1505937465, "creation_date": 1505937465, "answer_id": 46330803, "question_id": 46324743, "link": "https://stackoverflow.com/questions/46324743/making-a-vector-of-superclass-type-that-can-store-subclass-objects/46330803#46330803", "title": "Making a vector of superclass type that can store subclass objects", "body": "<p>If you would like to call a member function from a element from <code>std::vector&lt;Hero*&gt; Heroes</code> and you know somehow that this element points to a <em>Hero2</em>-type, then you could create a new temporary variable <code>Hero2 * tmpPtr</code> and set this variable to the element whose memberfunction you want to call (<code>tmpPtr = Heroes[i]</code>). Then you should be able to call a memberfunction like this: <code>tmpPtr-&gt;hero2Memberfuncion()</code>.</p>\n\n<p>Full code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass SomeClass\n{\npublic:\n    void a() {\n        std::cout &lt;&lt; \"a\" &lt;&lt; std::endl;\n    }\n};\n\nclass AnotherClass : public SomeClass\n{\npublic:\n    void b() {\n        std::cout &lt;&lt; \"b\" &lt;&lt; std::endl;\n    }\n};\n\nvoid main() {\n    std::vector&lt;SomeClass *&gt; vec;\n    AnotherClass v;\n    vec.push_back(&amp;v);\n\n    AnotherClass * tmpPtr = (AnotherClass *)vec[0];\n    tmpPtr-&gt;b(); //Output: \"b\"\n}\n</code></pre>\n\n<p>However if you want for example loop through the whole vector and for every element run a memberfunction that has the same name but the body of that function differs depending on to what Hero-type the element points, then you may want to use <em>virtual</em> functions. Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass SomeClass\n{\npublic:\n    virtual void a() {\n        std::cout &lt;&lt; \"from SomeClass\" &lt;&lt; std::endl;\n    }\n};\n\nclass AnotherClass : public SomeClass\n{\npublic:\n    void a() {\n        std::cout &lt;&lt; \"from AnotherClass\" &lt;&lt; std::endl;\n    }\n};\n\nvoid main() {\n    std::vector&lt;SomeClass *&gt; vec;\n\n    AnotherClass v1;\n    vec.push_back(&amp;v1);\n    vec[0]-&gt;a(); //Output: \"from AnotherClass\"\n\n    SomeClass v2;\n    vec.push_back(&amp;v2);\n    vec[1]-&gt;a(); //Output: \"from SomeClass\"\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6106197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1505937465, "creation_date": 1505917609, "last_edit_date": 1505917834, "question_id": 46324743, "link": "https://stackoverflow.com/questions/46324743/making-a-vector-of-superclass-type-that-can-store-subclass-objects", "title": "Making a vector of superclass type that can store subclass objects", "body": "<p>So I started a small little project to work on while I am learning. Basically, what I'm trying to do is a small \"game\" which I plan to build on as I learn new things.</p>\n\n<p>Here is a brief description and my problem.</p>\n\n<p>Basically, I want to assign various Hero types to a player based on their choice.</p>\n\n<p>I made a base class \"Hero\" with only a HP parameter so far. After that, I made 2 derived classes from Hero, HeroType1, HeroType2 which will have specific abilities and so on. </p>\n\n<p>I decided on storing various hero types in <code>std::vector&lt;Hero*&gt; Heroes</code>. Basically, I start my \"game\" by calling initializeHeroes function which, depending on the player choice creates a new object of type NewHero1 or NewHero2 and stores it an the vector mentioned before. The thing is, no matter what I tried so far, I can't access derived member functions when I want to use them later, only those of the Hero class. </p>\n\n<p>What feels like a good solution: declare global variables player1, player2 and assign to them after players choose the HeroType. However, I can't do that because the data type has to be known before compiling. Sorry if this is a stupid and basic question, my knowledge is still very limited and that is why I am asking for some hints here.</p>\n\n<p>I'd kindly like to ask on how would you approach this, I know it is a very simple issue, but I'm still a beginner and I'm trying to figure out the best way to solve this. Thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1639, "user_id": 8571771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ZdpN9.jpg?s=128&g=1", "display_name": "ppianist", "link": "https://stackoverflow.com/users/8571771/ppianist"}, "edited": false, "score": 0, "creation_date": 1505918133, "post_id": 46324732, "comment_id": 79610484, "body": "Can you explain first error more correctly?"}, {"owner": {"reputation": 35, "user_id": 8575344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9bc56ce7fabf1cf6cdcec2d7f71a3e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/8575344/krishna"}, "reply_to_user": {"reputation": 1639, "user_id": 8571771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ZdpN9.jpg?s=128&g=1", "display_name": "ppianist", "link": "https://stackoverflow.com/users/8571771/ppianist"}, "edited": false, "score": 0, "creation_date": 1505918925, "post_id": 46324732, "comment_id": 79611103, "body": "r = sum(p,q); While compiling the program at above line the compiler shows &quot;/Function sum should have a prototype&quot; error.  But I have defined the function sum above before calling it."}, {"owner": {"reputation": 217, "user_id": 1774084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50caaf8e5b6670b3c64e695f79157d0?s=128&d=identicon&r=PG", "display_name": "Actarus", "link": "https://stackoverflow.com/users/1774084/actarus"}, "edited": false, "score": 0, "creation_date": 1505922942, "post_id": 46324732, "comment_id": 79614157, "body": "The function sum() is declared as a non-static member of class Complex. This means that you should call it on an existing object (for example p.sum(...). But in your case what you can probably do is declare it as static (class funciton) or outside the class."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8575344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9bc56ce7fabf1cf6cdcec2d7f71a3e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/8575344/krishna"}, "edited": false, "score": 0, "creation_date": 1505920013, "post_id": 46325275, "comment_id": 79611886, "body": "Please advise why it is causing error when I write the sum function in complex class. If I am not wrong I can declare a function in class and then define it outside class using scope resolution(::) operator."}], "tags": [], "owner": {"reputation": 996, "user_id": 7151534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzKw.jpg?s=128&g=1", "display_name": "mustafagok", "link": "https://stackoverflow.com/users/7151534/mustafagok"}, "is_accepted": true, "score": 1, "last_activity_date": 1505976896, "last_edit_date": 1505976896, "creation_date": 1505919000, "answer_id": 46325275, "question_id": 46324732, "link": "https://stackoverflow.com/questions/46324732/error-while-adding-complex-numbers/46325275#46325275", "title": "Error while adding Complex numbers", "body": "<p>For your purpose the \"sum\" function should not be in the \"Complex\" class. Here a bit changed code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\nclass Complex\n{\npublic:\n\n  int real;\n  int imag;\n\n  void getNo ()\n  {\n    cout &lt;&lt; \"Enter real part : \" &lt;&lt; endl;\n    cin &gt;&gt; real;\n    cout &lt;&lt; \"Enter imaginary part : \" &lt;&lt; endl;\n    cin &gt;&gt; imag;\n  }\n\n  void showNo ()\n  {\n    cout &lt;&lt; real &lt;&lt; \"+\" &lt;&lt; imag &lt;&lt; \"i\";\n  }\n\n\n};\n\nComplex sum (Complex c1, Complex c2);\n\nint main ()\n{\n  //clrscr ();\n  Complex p, q, r, s;\n  p.getNo ();\n  q.getNo ();\n  cout &lt;&lt; endl &lt;&lt; \"First complex number is : \";\n  p.showNo ();\n\n  cout &lt;&lt; endl &lt;&lt; \"Second complex number is : \";\n  q.showNo ();\n\n  r = sum (p, q);\n  cout &lt;&lt; endl &lt;&lt; \"Addtion of the complex no is : \";\n  r.showNo ();\n\n  getch ();\n}\n\nComplex sum (Complex c1, Complex c2)\n{\n  Complex\n    a;\n  a.real = c1.real + c2.real;\n  a.imag = c1.imag + c2.imag;\n  return a;\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Functions in class require an instance (object) of class.\nSimply you <strong>CAN</strong> do this:</p>\n\n<pre><code>p.getNo();\nt.sum();\nmyComplexNum.getReal();\n</code></pre>\n\n<p>But in your code you are trying to do this which you <strong>CAN NOT</strong>:</p>\n\n<pre><code>a = getNo();\nb = sum();\ngetReal();\n</code></pre>\n\n<p>Additionally you <strong>CAN</strong> make the function <strong>static</strong> like other answer.\nstatic functions and variables does not require an instance. Calling:</p>\n\n<pre><code>// We have 1 Box named b\nBox b;\nb.setHeight(5);\nb.setWidth(3);\nb.setDepth(3);\n\n//ClassName::StaticVariable;\nint c1 = Box::count;     // returns 1 \n\n//ClassName::StaticFunction(Parameters);\nint c2 = Box::getCount();        // returns 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 1774084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50caaf8e5b6670b3c64e695f79157d0?s=128&d=identicon&r=PG", "display_name": "Actarus", "link": "https://stackoverflow.com/users/1774084/actarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1505923352, "creation_date": 1505923352, "answer_id": 46326834, "question_id": 46324732, "link": "https://stackoverflow.com/questions/46324732/error-while-adding-complex-numbers/46326834#46326834", "title": "Error while adding Complex numbers", "body": "<p>When you declare a function (a method) in a class, this method can be called on a instance of this class (a object).\nIn the given code the function Complex sum (Complex c1, Complex c2); should be called on an object of type Complex.</p>\n\n<p>But as the function doesn't change anything inside the object, it rather creates a new object and returns it, you should better declare a static method.</p>\n\n<pre><code>static Complex sum(Complex, Complex);\n</code></pre>\n\n<p>in this case you can call the function without an existing Complex object.\nThe syntax is the following :</p>\n\n<pre><code>r = Complex::sum(a, b);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8575344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9bc56ce7fabf1cf6cdcec2d7f71a3e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/8575344/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 46325275, "answer_count": 2, "score": 1, "last_activity_date": 1505977264, "creation_date": 1505917574, "last_edit_date": 1505977264, "question_id": 46324732, "link": "https://stackoverflow.com/questions/46324732/error-while-adding-complex-numbers", "title": "Error while adding Complex numbers", "body": "<p>In below program I am getting 2 errors at below lines.</p>\n\n<pre><code> r = sum(p,q); //Function sum should have a prototype.\n r = sum(p,q); //Cannot convert int to complex\n</code></pre>\n\n<p>Kindly advise the changes in the code.</p>\n\n<p>Note: I have to do the code by passing objects of complex class to add and also the addition should return a complex number.</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\n\nclass Complex\n{\n  private:\n    int real;\n    int imag;\n\n  public:\n    void getNo()\n    {\n     cout&lt;&lt;\"Enter real part : \"&lt;&lt;endl;\n     cin&gt;&gt;real;\n     cout&lt;&lt;\"Enter imaginary part : \"&lt;&lt;endl;\n     cin&gt;&gt;imag;\n    }\n\n    void showNo()\n    {\n     cout&lt;&lt;real&lt;&lt;\"+\"&lt;&lt;imag&lt;&lt;\"i\";\n    }\n\n   Complex sum(Complex, Complex);\n};\n\nComplex Complex :: sum(Complex c1, Complex c2)\n{\n  Complex a;\n  a.real = c1.real + c2.real;\n  a.imag = c1.imag + c2.imag;\n  return a;\n}\n\n void main()\n {\n  clrscr();\n  Complex p,q,r,s;\n  p.getNo();\n  q.getNo();\n  cout&lt;&lt;endl&lt;&lt;\"First complex number is : \";\n  p.showNo();\n\n  cout&lt;&lt;endl&lt;&lt;\"Second complex number is : \";\n  q.showNo();\n\n  r = sum(p,q);\n  cout&lt;&lt;\"Addtion of the complex no is : \";\n  r.showNo();  \n\n  getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qt-signals"], "answers": [{"comments": [{"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1505979930, "post_id": 46325161, "comment_id": 79636091, "body": "Amazingly well spotted! I changed my function from on_... to when_... and the warning went. Thanks!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 4, "last_activity_date": 1525147117, "last_edit_date": 1525147117, "creation_date": 1505918695, "answer_id": 46325161, "question_id": 46324689, "link": "https://stackoverflow.com/questions/46324689/why-do-i-get-qmetaobjectconnectslotsbyname-no-matching-signal-with-a-custom/46325161#46325161", "title": "Why do I get &quot;QMetaObject::connectSlotsByName: No matching signal&quot; with a custom dialog?", "body": "<p>In some part of your code you are using the method <a href=\"http://doc.qt.io/qt-5/qmetaobject.html#connectSlotsByName\" rel=\"nofollow noreferrer\"><code>connectSlotsByName</code></a>, if you have created a design (<strong>.ui</strong>) this usually calls it since compiling generates a file <code>ui_somefile.h</code>, and this file is used.</p>\n\n<p>According to the <a href=\"http://doc.qt.io/qt-5/qmetaobject.html#connectSlotsByName\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>void QMetaObject::connectSlotsByName(QObject *object)</strong></p>\n  \n  <p>Searches recursively for all child objects of the given object, and\n  connects matching signals from them to slots of object that follow the\n  following form:</p>\n  \n  <p><code>void on_&lt;object name&gt;_&lt;signal name&gt;(&lt;signal parameters&gt;);</code></p>\n</blockquote>\n\n<p>From the above it is observed that this method will try to connect the slots that have that format, and in your case the second slot fulfills it, when trying to connect it looks for the objects and signals but in your case it does not find it since the object does not exist <code>dlgName</code> and generates the warning you see.</p>\n\n<p>This method is created by the .ui file because through the design you can create slots by right clicking on the widget and selecting <strong>go to slot</strong>, choosing the signal and finally creating the slot.</p>\n\n<hr>\n\n<p><strong>Note:</strong></p>\n\n<p>If you are going to create your own slot, <strong>avoid using the underscores</strong> as this could cause you problems because Qt would try to connect it and if the objects do not exist it will send you several warnings.</p>\n"}], "owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 2, "accepted_answer_id": 46325161, "answer_count": 1, "score": 1, "last_activity_date": 1525147117, "creation_date": 1505917460, "last_edit_date": 1524380433, "question_id": 46324689, "link": "https://stackoverflow.com/questions/46324689/why-do-i-get-qmetaobjectconnectslotsbyname-no-matching-signal-with-a-custom", "title": "Why do I get &quot;QMetaObject::connectSlotsByName: No matching signal&quot; with a custom dialog?", "body": "<p>I am using Qt5.</p>\n\n<p>I have a very simple dialog class that inherits from QDialog.</p>\n\n<p>I have a class that uses this dialog, and also a QFileDialog:</p>\n\n<pre><code>    NameDlg       m_name_dlg;\n    QFileDialog   m_file_dlg;\n</code></pre>\n\n<p>This class also has some slots to handle dialog closing:</p>\n\n<pre><code>private slots:\n    void on_dlgName_accepted();\n    void on_FileDlgClosed(int result);\n</code></pre>\n\n<p>In the constructor I do some connecting:</p>\n\n<pre><code>QObject::connect(&amp;m_file_dlg, SIGNAL(finished(int)),\n                 this, SLOT(on_FileDlgClosed(int)));\nQObject::connect(&amp;m_name_dlg, SIGNAL(accepted()),\n                 this, SLOT(on_dlgName_accepted()));\n</code></pre>\n\n<p>The first call to connect is fine, but the second call generates the output:</p>\n\n<pre><code>QMetaObject::connectSlotsByName: No matching signal for on_dlgName_accepted()\n</code></pre>\n\n<p>Curiously, my slot is correctly called when the name dialog is accepted!</p>\n\n<p>The documentation (and header file) for QDialog says:</p>\n\n<pre><code>Signals\n    void accepted()\n</code></pre>\n\n<p>So it isn't a parameter mismatch.</p>\n\n<p>As I said above, the signal is correctly called so my code all works fine, I just would really really like to understand why I get this warning (as an educational exercise) and also get rid of it (for peace of mind).</p>\n\n<p>I cannot post full code, but I do believe there should be enough for anyone to understand the problem.</p>\n\n<p>Things I have tried:</p>\n\n<ol>\n<li><p>Using finished() instead.</p></li>\n<li><p>Casting <code>&amp;m_name_dialog</code> to a <code>QDialog *</code>.</p></li>\n<li><p>Changing the signal to <code>QDialog::accepted()</code>.</p></li>\n</ol>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "mingw", "codeblocks", "x86-64", "mingw-w64"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1505916824, "post_id": 46324337, "comment_id": 79609557, "body": "if your program is written in standard c++ you can use any c++ compliant compiler and the code will still compile perfectly, that does not necessarily imply that the compilers are exactly the same"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1505916853, "post_id": 46324337, "comment_id": 79609574, "body": "Did you just compare 2 versions of a compiler on the metric that it compiles code correctly? That would be on the same level of usefulness as comparing 2 cars on the fact that they can drive."}, {"owner": {"reputation": 91, "user_id": 5005798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLQtu.jpg?s=128&g=1", "display_name": "Shubham Avasthi", "link": "https://stackoverflow.com/users/5005798/shubham-avasthi"}, "edited": false, "score": 0, "creation_date": 1505916923, "post_id": 46324337, "comment_id": 79609627, "body": "I can&#39;t understand how are these executables different. Hence the question."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505916978, "post_id": 46324337, "comment_id": 79609670, "body": "Run them both with <code>-v</code> and edit the results into your question.  <code>g++ -v</code> vs. <code>x86_64-w64-mingw32-something.exe -v</code> with no other args shows you some info about how each was configured, and what version of gcc it is."}, {"owner": {"reputation": 91, "user_id": 5005798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLQtu.jpg?s=128&g=1", "display_name": "Shubham Avasthi", "link": "https://stackoverflow.com/users/5005798/shubham-avasthi"}, "edited": false, "score": 0, "creation_date": 1505917056, "post_id": 46324337, "comment_id": 79609723, "body": "I am not judging the compilers to be the same. The question asks for what is the difference between the two."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505917108, "post_id": 46324337, "comment_id": 79609758, "body": "Maybe also look at a hello-world.exe from each, and see if they link different libraries or otherwise make different executables."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505923834, "post_id": 46324337, "comment_id": 79614750, "body": "One might be the default compiler for your system, and the other one for compiling to a specific target. If the &quot;specific target&quot; happens to be the same as the system you are using, they might be identical. Otherwise not."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1505924764, "post_id": 46324337, "comment_id": 79615311, "body": "See <a href=\"https://stackoverflow.com/questions/5731495/can-anyone-explain-the-gcc-cross-compiler-naming-convention\" title=\"can anyone explain the gcc cross compiler naming convention\">stackoverflow.com/questions/5731495/&hellip;</a>  on a linux system g++ would most likely by a symbolic link to the <b>native-native</b> version of the compiler.  MS Windows does not have convenient symbolic soft links so more than one file is provided."}, {"owner": {"reputation": 91, "user_id": 5005798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLQtu.jpg?s=128&g=1", "display_name": "Shubham Avasthi", "link": "https://stackoverflow.com/users/5005798/shubham-avasthi"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1505933384, "post_id": 46324337, "comment_id": 79620206, "body": "Can you please elaborate @RichardCritten."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1505939362, "post_id": 46324337, "comment_id": 79623307, "body": "@ShubhamAvasthi not really unless you have a specific question did you read the link ?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552395751, "post_id": 46324337, "comment_id": 96985641, "body": "Your edit (removing a specific question) made the question less answerable.  Or did it turn out that they&#39;re <i>not</i> the same executable?  If they&#39;re different, prove it with <code>md5sum</code> or something."}, {"owner": {"reputation": 91, "user_id": 5005798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLQtu.jpg?s=128&g=1", "display_name": "Shubham Avasthi", "link": "https://stackoverflow.com/users/5005798/shubham-avasthi"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552396472, "post_id": 46324337, "comment_id": 96986095, "body": "@PeterCordes, I understand that inclusion of that question can lead to some people believing that I am (wrongly) equating the compilers based on the fact that they both can compile as is the case in some of the previous comments. By the way, I got the answer to the question."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 2596667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284062f44586eabec8d078050f90ecac?s=128&d=identicon&r=PG", "display_name": "user2596667", "link": "https://stackoverflow.com/users/2596667/user2596667"}, "is_accepted": true, "score": 2, "last_activity_date": 1555795005, "creation_date": 1555795005, "answer_id": 55777818, "question_id": 46324337, "link": "https://stackoverflow.com/questions/46324337/what-is-the-difference-between-g-exe-and-x86-64-w64-mingw32-g-exe/55777818#55777818", "title": "What is the difference between g++.exe and x86_64-w64-mingw32-g++.exe?", "body": "<p>x86_64-w64-mingw32-g++.exe is a cross compiler, for compiling code that can run on a different type of computer than the one it was compiled on (based on the name, it looks like Windows 64-bit).  g++ is the regular compiler, for compiling code to run on the same computer or same type of computer.  On your system (e.g. if your system is 64-bit Windows) it's possible that they do the same thing.</p>\n"}], "owner": {"reputation": 91, "user_id": 5005798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLQtu.jpg?s=128&g=1", "display_name": "Shubham Avasthi", "link": "https://stackoverflow.com/users/5005798/shubham-avasthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3628, "favorite_count": 1, "accepted_answer_id": 55777818, "answer_count": 1, "score": 2, "last_activity_date": 1559072806, "creation_date": 1505916512, "last_edit_date": 1559072806, "question_id": 46324337, "link": "https://stackoverflow.com/questions/46324337/what-is-the-difference-between-g-exe-and-x86-64-w64-mingw32-g-exe", "title": "What is the difference between g++.exe and x86_64-w64-mingw32-g++.exe?", "body": "<p>Same question goes for gcc, ar, etc. as well.</p>\n\n<p>On changing the toolchain executable from something.exe to x86_64-w64-mingw32-something.exe in Code::Blocks, the code still compiles perfectly. Also, both 32-bit and 64-bit modes work perfectly in both the cases.</p>\n\n<p><code>g++ -v</code> and <code>x86_64-w64-mingw32-g++.exe -v</code> show the same output on command line.</p>\n\n<p>If these are exactly the same, why are they provided as different executables?</p>\n"}, {"tags": ["c++", "templates", "language-lawyer"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1505916286, "post_id": 46323991, "comment_id": 79609165, "body": "<code>std::function</code> is heavyweight for this. You don&#39;t need the type-erasure it does."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1505917271, "post_id": 46323991, "comment_id": 79609876, "body": "@chris you&#39;re right, but it doesn&#39;t help ;)"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1505916276, "creation_date": 1505916276, "answer_id": 46324251, "question_id": 46323991, "link": "https://stackoverflow.com/questions/46323991/template-argument-deduction-failure/46324251#46324251", "title": "Template argument deduction failure", "body": "<p>Because <code>std::plus&lt;int&gt;</code> is not an instance of <code>std::function&lt;O(O,I)&gt;</code> for some types <code>O,I</code> and they are in a deduced context there. </p>\n\n<p>The solution is to replace <code>std::function&lt;O(O,I)&gt;</code> with a new template parameter that is itself just constrained based on the requirement that it is invocable with two arguments <code>O,I</code> and that the return type is convertible to <code>O</code>:</p>\n\n<pre><code>template&lt;class Input, class Output, class F,\n    std::enable_if_t&lt;std::is_convertible_v&lt;\n        std::invoke_result_t&lt;F&amp;, Output, Input&gt;,\n        Output&gt;, int&gt; = 0&gt;\nOutput fold_left(Output zero, F op, std::valarray&lt;Input&gt; data)\n{ ... }\n</code></pre>\n\n<p>You could separately wrap the <code>op</code> argument in a non-deduced context, but you don't actually need the type erasure that <code>std::function</code> provides, so it's unnecssary. </p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1505917025, "last_edit_date": 1505917025, "creation_date": 1505916340, "answer_id": 46324272, "question_id": 46323991, "link": "https://stackoverflow.com/questions/46323991/template-argument-deduction-failure/46324272#46324272", "title": "Template argument deduction failure", "body": "<blockquote>\n  <p>This feels strange to me since the <code>Output</code> template argument should be obvious since we provided an <code>int</code> as the first argument </p>\n</blockquote>\n\n<p>The compiler will try to resolve <code>Output</code> is in every location it is used.  If the deduced types from different parameters don't match then you'll get an ambiguity which will cause the deduction to fail.</p>\n\n<p>Since you use <code>Output</code> in <code>Output zero</code> and <code>std::function&lt;Output(Output,Input)&gt; op</code> the compiler is going to use <code>0</code> and <code>std::plus&lt;int&gt;</code> to try and figure out what <code>Output</code> is.  <code>std::plus&lt;int&gt;</code> is not a std::function` so it can't figure out the type and that is why the substitution fails.</p>\n\n<p>If you cast <code>std::plus&lt;int&gt;{}</code> into a <code>std::function</code> then the compiler can deduce the template types</p>\n\n<pre><code>std::cout &lt;&lt; fold_left(0, std::function&lt;int(int, int)&gt;(std::plus&lt;int&gt;{}), data) &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>If you don't want to have to do this though you will need to instead make the function a generic type and then use SFINAE to constrain the template like <a href=\"https://stackoverflow.com/a/46324251/4342498\">answer</a> provided by <a href=\"https://stackoverflow.com/users/2069064/barry\">Barry</a> does.</p>\n"}, {"tags": [], "owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "is_accepted": true, "score": 1, "last_activity_date": 1505925938, "last_edit_date": 1505925938, "creation_date": 1505916604, "answer_id": 46324377, "question_id": 46323991, "link": "https://stackoverflow.com/questions/46323991/template-argument-deduction-failure/46324377#46324377", "title": "Template argument deduction failure", "body": "<p>The issue is that <code>std::function&lt;Output(Output,Input)&gt;</code> cannot properly deduce its template arguments, because <code>std::plus&lt;int&gt;</code> is not a <code>std::function</code>.</p>\n\n<p>Type-deduction only works if the template types can match up with the arguments being passed; it doesn't perform transformations that would be done through conversions/constructions; but rather takes the type in totality.</p>\n\n<p>In this case, <code>std::plus&lt;int&gt;</code> is <em>not</em> a <code>std::function&lt;int(int,int)&gt;</code>, it is <em>convertible</em> to a <code>std::function&lt;int(int,int)&gt;</code>. This is what is causing the deduction to fail.</p>\n\n<p>The alternatives are to either break contributions to the type-deduction with an alias, to explicitly pass a <code>std::function</code> type, or to accept the function as a different template argument (which may actually be more efficient)</p>\n\n<p><strong>1. Break contribution to the type-deduction with an alias</strong></p>\n\n<p>If you make an alias of the type, so that the types don't contribute to the deduction, then it can leave the first and third arguments to determine the types of the <code>std::function</code></p>\n\n<p>(off the top of my head; untested)</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct nodeduce{ using type = T; };\n\ntemplate&lt;typename T&gt;\nusing nodeduce_t = typename nodeduce&lt;T&gt;::type;\n\ntemplate&lt;class Input, class Output&gt;\nOutput fold_left(Output zero, std::function&lt;nodeduce_t&lt;Output&gt;(nodeduce_t&lt;Output&gt;,nodeduce_t&lt;Input&gt;)&gt; op, std::valarray&lt;Input&gt; data)\n{\n    ....\n}\n</code></pre>\n\n<p>It's a bit of an ugly approach, but it will disable <code>std::function</code> from contributing to the deduction because the types are transformed through <code>nodeduce_t</code>.</p>\n\n<p><strong>2. Pass as <code>std::function</code></strong></p>\n\n<p>This is the simplest approach; your calling code would become:</p>\n\n<pre><code> fold_left(0, std::function&lt;int(int,int)&gt;(std::plus&lt;int&gt;{}), data);\n</code></pre>\n\n<p>Admittedly, it's not pretty -- but it would resolve the deduction because <code>std::function&lt;int(int,int)&gt;</code> can directly match the input.</p>\n\n<p><strong>3. Pass as template argument</strong></p>\n\n<p>This actually has some additional performance benefits; if you accept the argument as a template type, then it also allows your function to be inlined better by the compiler (something that <code>std::function</code> has issues with)</p>\n\n<pre><code>template&lt;class Input, typename Fn, class Output&gt;\nOutput fold_left(Output zero, Fn&amp;&amp; op, std::valarray&lt;Input&gt; data)\n{\n    for (auto const&amp; item : data) {\n        zero = op(zero, item);\n    }\n    return zero;\n}\n</code></pre>\n\n<p>All of these are possible alternative that would accomplish the same task.\nIt's also worth mentioning that compile-time validation can be done using SFINAE with things like <code>enable_if</code> or <code>decltype</code> evaluations:</p>\n\n<pre><code>template&lt;class Input, typename Fn, class Output, typename = decltype( std::declval&lt;Output&gt; = std::declval&lt;Fn&gt;( std::declval&lt;Output&gt;, std::declval&lt;Input&gt; ), void())&gt;\nOutput fold_left( ... ){ ... }\n</code></pre>\n\n<p>The <code>decltype(...)</code> syntax ensures the expression is well-formed, and if it is, then it allows this function to be used for overload resolution.</p>\n\n<p><strong>Edit</strong>: Updated the <code>decltype</code> evaluation to test <code>Output</code> and <code>Input</code> types. With C++17, you can also use <code>std::is_convertible_v&lt;std::invoke_result_t&lt;F&amp;, Output, Input&gt;,Output&gt;</code> in an <code>enable_if</code>, as suggested by <a href=\"https://stackoverflow.com/a/46324251/1678770\">Barry</a> in a different answer.</p>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 46324377, "answer_count": 3, "score": 0, "last_activity_date": 1505925938, "creation_date": 1505915597, "last_edit_date": 1505917241, "question_id": 46323991, "link": "https://stackoverflow.com/questions/46323991/template-argument-deduction-failure", "title": "Template argument deduction failure", "body": "<p>Even though it seems the call to <code>fold_left</code> in the following program is specific enough to deduce the templated function's argument, a compilation error arises due to a <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow noreferrer\">template argument deduction</a> failure.</p>\n\n<pre><code>#include &lt;valarray&gt;\n#include &lt;functional&gt;\n\ntemplate&lt;class Input, class Output&gt;\nOutput fold_left(Output zero, std::function&lt;Output(Output,Input)&gt; op, std::valarray&lt;Input&gt; data)\n{\n    for (auto const&amp; item : data) {\n        zero = op(zero, item);\n    }\n    return zero;\n}\n\n#include &lt;iostream&gt;\nint main()\n{\n    std::valarray&lt;int&gt; data { 1, 2, 3, 4, 5 };\n    std::cout &lt;&lt; fold_left(0, std::plus&lt;int&gt;{}, data) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<blockquote>\n<pre><code>main.cpp: In function 'int main()':\nmain.cpp:17:66: error: no matching function for call to 'fold_left(int, std::plus&lt;int&gt;, std::valarray&lt;int&gt;&amp;)'\n     std::cout &lt;&lt; fold_left/*&lt;int,int&gt;*/(0, std::plus&lt;int&gt;{}, data) &lt;&lt; \"\\n\";\n                                                                  ^\nmain.cpp:5:8: note: candidate: template&lt;class Input, class Output&gt; Output fold_left(Output, std::function&lt;Output(Output, Input)&gt;, std::valarray&lt;_Tp&gt;)\n Output fold_left(Output zero, std::function&lt;Output(Output,Input)&gt; op, std::valarray&lt;Input&gt; data)\n        ^~~~~~~~~\nmain.cpp:5:8: note:   template argument deduction/substitution failed:\nmain.cpp:17:66: note:   'std::plus&lt;int&gt;' is not derived from 'std::function&lt;Output(Output, Input)&gt;'\n     std::cout &lt;&lt; fold_left/*&lt;int,int&gt;*/(0, std::plus&lt;int&gt;{}, data) &lt;&lt; \"\\n\";\n                                                                  ^\n</code></pre>\n</blockquote>\n\n<p>This minimal program would only compile if <code>fold_left</code> is called with:</p>\n\n<pre><code>fold_left&lt;int, int&gt;(0, std::plus&lt;int&gt;{}, data);\n</code></pre>\n\n<p>This feels strange to me since the <code>Output</code> template argument should be obvious since we provided an <code>int</code> as the first argument (<code>zero</code>); similarly the <code>Input</code> template argument should be deduced correctly since we have provided an <code>std::valarray&lt;int&gt;</code> as the third argument (<code>data</code>) expecting a <code>std::valarray&lt;Input&gt;</code>.</p>\n\n<p>The order of the arguments in the definition of <code>fold_left</code> <a href=\"http://coliru.stacked-crooked.com/a/c5ebe9e367c2ae6d\" rel=\"nofollow noreferrer\">are not relevant</a>.</p>\n\n<p>Why does template argument deduction fail here?</p>\n"}, {"tags": ["c++", "opencv", "c++11", "c++14"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1505915812, "post_id": 46323945, "comment_id": 79608809, "body": "second it a way to typecast expression 100,100,100,100 to cv::Rect, which  fails"}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "edited": false, "score": 0, "creation_date": 1505919133, "post_id": 46323973, "comment_id": 79611262, "body": "&quot;(100,100,100,100) is an expression which evaluates to 100&quot; Make sense, thank you very much for the answer."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1505915543, "creation_date": 1505915543, "answer_id": 46323973, "question_id": 46323945, "link": "https://stackoverflow.com/questions/46323945/why-static-cast-not-working-for-cvrect/46323973#46323973", "title": "Why static_cast not working for cv::Rect", "body": "<p>In the first case, <code>(100,100,100,100)</code> is the <em>parameter list</em> for the <code>cv::Rect</code> <em>constructor</em>.</p>\n\n<p>In the second case, <code>(100,100,100,100)</code> is an <em>expression</em> which evaluates to 100. Note that <code>,</code> acts as the <em>expression separator operator</em> in this context.</p>\n\n<p><code>static_cast&lt;cv::Rect&gt;(100)</code> obviously fails.</p>\n\n<p>There's no feasible way of using a <code>static_cast</code>, unless you're willing to enter the murky world of <em>user defined literals</em>. But even then, you'd have to tweak the syntax somewhat, and then you'd be able to drop the <code>static_cast</code> entirely.</p>\n"}], "owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 46323973, "answer_count": 1, "score": 1, "last_activity_date": 1505915543, "creation_date": 1505915471, "question_id": 46323945, "link": "https://stackoverflow.com/questions/46323945/why-static-cast-not-working-for-cvrect", "title": "Why static_cast not working for cv::Rect", "body": "<p>I am trying to create a cv::Rect object</p>\n\n<p>why <code>cv::Rect(100,100,100,100)</code>; works\nbut <code>static_cast&lt;cv::Rect&gt;(100,100,100,100)</code>; fails ?</p>\n\n<p>I understand first one is a constructor, and second one is simply attempting to typecast the parameters to <code>cv::Rect</code> object.</p>\n\n<p>Is there a way I can use <code>static_cast</code> here ?</p>\n"}, {"tags": ["c++", "amazon-s3"], "owner": {"reputation": 925, "user_id": 6243347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bjcXEoVtdGs/AAAAAAAAAAI/AAAAAAAABGQ/u8xNvatZnVM/photo.jpg?sz=128", "display_name": "Mitchell Tracy", "link": "https://stackoverflow.com/users/6243347/mitchell-tracy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505915304, "creation_date": 1505915304, "last_edit_date": 1592644375, "question_id": 46323885, "link": "https://stackoverflow.com/questions/46323885/s3-c-remove-recursive", "title": "S3 C++ remove recursive", "body": "<p>Suppose I have the following on S3:</p>\n<pre><code>mybucket/a=1/b=1/1.txt\nmybucket/a=1/b=2/2.txt\nmybucket/a=2/b=1/3.txt\nmybucket/a=2/b=2/4.txt\n</code></pre>\n<p>I am using the C++ SDK, and I would like to be able to specify a bucket and an arbitrary prefix (e.g. &quot;a=1&quot;) and have it delete all of the keys with that prefix.</p>\n<h3>Note:</h3>\n<p>I am aware of the CLI rm recursive command, but that is not available; it must be implemented with the C++ SDK.</p>\n<p>I am also aware of the multiple file delete, and that I could specify keys to a <code>DeleteObjectsRequest</code>, but that is not ideal since the keys to be deleted are not known a priori, so this would require a listing the keys of the bucket with the given prefix, and then populating a request with the resulting keys (or multiple requests, since a single <code>DeleteObjectsRequest</code> can only contain 1000 keys).</p>\n<p>So is it possible to delete all of the keys in S3 with a given prefix in the C++ SDK other than with the approach I have described above?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1505913964, "post_id": 46323266, "comment_id": 79607324, "body": "The first element cannot be padded, therefore <code>&amp;vec.x == vec.vals</code> even without the packing. As for accessing the member, reading any non-active member is UB in C++ but does what you think on most (all) compilers"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1505913997, "post_id": 46323266, "comment_id": 79607352, "body": "Are you asking about C or C++? They have different wording for unions. And is this limited to compilers supporting <code>#pragma pack</code>?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1505914191, "post_id": 46323266, "comment_id": 79607526, "body": "<code>write</code> <i>from</i> <code>v.x and...</code> or <code>write</code> <i>to</i> <code>v.x and...</code>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1505914511, "post_id": 46323266, "comment_id": 79607794, "body": "Remember that undefined behavior has implications for the optimizer, too.  Even though <code>&amp;vec.x == &amp;vec.vals[0]</code>, the optimizer might assume you aren&#39;t going to use both at once. If a bit of code writes through one and reads through the other, the compiler may assume that the read can be optimized away since the behavior for that operation isn&#39;t defined."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1505914547, "post_id": 46323266, "comment_id": 79607821, "body": "In C++ you could use a small accessor function <code>float&amp; x() { return vals[0]; }</code>. It <i>would</i> force you to write <code>v.x()</code> instead of <code>v.x</code> but would work correctly without any unions or non-portable hacks."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1505914613, "post_id": 46323266, "comment_id": 79607869, "body": "I really don&#39;t see any point worrying about the standard if you use compiler specific support. Just rely on the compiler documentation."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1505914835, "post_id": 46323266, "comment_id": 79608038, "body": "The rules are different in c++ and c. choose one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1505915381, "post_id": 46323266, "comment_id": 79608507, "body": "@RichardHodges And suppose the OP is interested in the difference between C and C++, since they are indeed different in this case. Then it is perfectly fine to use both language tags."}, {"owner": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505918178, "post_id": 46323266, "comment_id": 79610522, "body": "@All above. Yes, I&#39;m interested in the difference between C and C++. I was hoping to understand in which places all the &quot;variables&quot; (i.e. compilers, language, standard) agreed (which, I was hoping, was most places :P ) - and in which places they disagreed."}], "answers": [{"comments": [{"owner": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505918789, "post_id": 46323681, "comment_id": 79610994, "body": "Great answer. Clearly indicates the differences. Now, if only msvc supported C11, the world would be a happy place."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505920200, "post_id": 46323681, "comment_id": 79612043, "body": "@zac I quoted C11 because it is the current standard. C99 is identical when it comes to this. C89 was also the same although the wording was bad and could be misunderstood. Though I&#39;m guessing the world would be a happier place if msvc supported <i>any</i> form of C standard. The C89 support is sometimes questionable, the C99 support incomplete at best, and C11 support non-existent."}, {"owner": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505922169, "post_id": 46323681, "comment_id": 79613603, "body": "There we go, learn something new. I thought the footnote 95 you mentioned was only added in C11 for clarity."}, {"owner": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505922359, "post_id": 46323681, "comment_id": 79613738, "body": "(In fact, I&#39;m looking at it now, and it doesn&#39;t have it :S)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "edited": false, "score": 0, "creation_date": 1505976773, "post_id": 46323681, "comment_id": 79634201, "body": "@zac Alright, but the footnote is just a clarification, it isn&#39;t normative."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 6, "last_activity_date": 1505915231, "last_edit_date": 1505915231, "creation_date": 1505914825, "answer_id": 46323681, "question_id": 46323266, "link": "https://stackoverflow.com/questions/46323266/packing-and-pointer-aliasing-c-and-c/46323681#46323681", "title": "Packing and pointer aliasing, C and C++", "body": "<blockquote>\n  <ol>\n  <li>I believe I am guaranteed (via #pragma compiler documentation, not language guarantee) that sizeof(vec) == 3*sizeof(float)</li>\n  </ol>\n</blockquote>\n\n<p>Yes that's correct, assuming the <code>#pragma</code> disabled padding entirely.</p>\n\n<hr>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>As such, I believe I am guaranteed that &amp;vec.x == &amp;vec.vals[0], ect.</li>\n  </ol>\n</blockquote>\n\n<p>This is guaranteed regardless of padding, because there can never be padding at the beginning of the struct/union. See for example C11 6.7.2.1 \u00a715: </p>\n\n<blockquote>\n  <p>There may be unnamed padding within a structure object, but not at its beginning.</p>\n</blockquote>\n\n<p>This holds true for all versions of the C standard, and as far as I know, also for all versions of the C++ standard.</p>\n\n<hr>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>However, I am unsure if it is legal (that is, not allowed via strict aliasing), to write from v.x and then read from v.vals[0]</li>\n  </ol>\n</blockquote>\n\n<p>This is fine in C but undefined behavior in C++. </p>\n\n<p>In C, the <code>.</code>/<code>-&gt;</code> operator guarantees this, C11 6.5.2.3:</p>\n\n<blockquote>\n  <p>A postfix expression followed by the . operator and an identifier designates a member of\n  a structure or union object. The value is that of the named member,95) and is an lvalue if the first expression is an lvalue. </p>\n</blockquote>\n\n<p>Where footnote 95 (informative, not normative) says:</p>\n\n<blockquote>\n  <p>95) If the member used to read the contents of a union object is not the same as the member last used to\n  store a value in the object, the appropriate part of the object representation of the value is reinterpreted\n  as an object representation in the new type as described in 6.2.6 (a process sometimes called \u2018\u2018type\n  punning\u2019\u2019). This might be a trap representation.</p>\n</blockquote>\n\n<p>C++ have no guarantees like this, so \"type punning\" through unions is undefined behavior in C++. This is a major difference between the two languages.</p>\n\n<p>Furthermore, C has the concept of <em>common initial sequence</em> for unions, also specified in C11 6.5.2.3:</p>\n\n<blockquote>\n  <p>One special guarantee is made in order to simplify the use of unions: if a union contains\n  several structures that share a common initial sequence (see below), and if the union\n  object currently contains one of these structures, it is permitted to inspect the common\n  initial part of any of them anywhere that a declaration of the completed type of the union\n  is visible. Two structures share a <em>common initial sequence</em> if corresponding members have compatible types (and, for bit-fields, the same widths) for a sequence of one or more\n  initial members.</p>\n</blockquote>\n\n<hr>\n\n<p>It is true that the array and the struct in your example may alias, because of the part you cited \"an aggregate or union type that includes one of the aforementioned types among its members\". So writing to the struct and then reading that data through the array does not violate strict aliasing, neither in C nor C++.</p>\n\n<p><em>However</em>, C++ has the concept of \"active member\" when dealing with unions, so in C++ this would give poorly-specified behavior for other reasons than aliasing - namely that C++ only guaranteed that the last written member of the union can be safely read.</p>\n"}], "owner": {"reputation": 837, "user_id": 2556973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8367c78e6734853cb3157761f2eea3b5?s=128&d=identicon&r=PG", "display_name": "zac", "link": "https://stackoverflow.com/users/2556973/zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 46323681, "answer_count": 1, "score": 5, "last_activity_date": 1505915231, "creation_date": 1505913781, "question_id": 46323266, "link": "https://stackoverflow.com/questions/46323266/packing-and-pointer-aliasing-c-and-c", "title": "Packing and pointer aliasing, C and C++", "body": "<pre><code>union vec\n{\n#pragma pack(push,1)\n   struct\n   {\n      float x, y, z;\n   }\n#pragma pack(pop)\n   float vals[3];\n};\n</code></pre>\n\n<p>Consider the above definition. (Anonymous unions in C99 aside)</p>\n\n<p>I suppose this answer possibly permits different answers depending on choice of compiler, choice of language, and choice of standard.</p>\n\n<ol>\n<li>I believe I am guaranteed (via #pragma compiler documentation, not language guarantee) that <code>sizeof(vec) == 3*sizeof(float)</code></li>\n<li>As such, I believe I am guaranteed that <code>&amp;vec.x == &amp;vec.vals[0]</code>, ect.</li>\n<li>However, I am unsure if it is legal (that is, not allowed via strict aliasing), to write from <code>v.x</code> and then read from <code>v.vals[0]</code></li>\n</ol>\n\n<p>Packing aside, I believe the relevant verbiage (from the C99 standard, at least) is:</p>\n\n<blockquote>\n  <ul>\n  <li><p>a type compatible with the effective type of the object,</p></li>\n  <li><p>an aggregate or union type that includes one of the aforementioned\n  types among its members (including, recursively, a member of a\n  subaggregate or contained union), or</p></li>\n  </ul>\n</blockquote>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 639, "user_id": 6834990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uaxy3XKnAjs/AAAAAAAAAAI/AAAAAAAAABI/52ROGOYFmTw/photo.jpg?sz=128", "display_name": "Rajeshkumar", "link": "https://stackoverflow.com/users/6834990/rajeshkumar"}, "edited": false, "score": 0, "creation_date": 1505913708, "post_id": 46323217, "comment_id": 79607122, "body": "instead of byte, try with different name"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1505913708, "post_id": 46323217, "comment_id": 79607124, "body": "Don&#39;t spam tags, do you mean C or C++?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505913831, "post_id": 46323217, "comment_id": 79607227, "body": "Have you included one header more than once without using <code>inclusion guards</code> in your code?"}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "reply_to_user": {"reputation": 639, "user_id": 6834990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uaxy3XKnAjs/AAAAAAAAAAI/AAAAAAAAABI/52ROGOYFmTw/photo.jpg?sz=128", "display_name": "Rajeshkumar", "link": "https://stackoverflow.com/users/6834990/rajeshkumar"}, "edited": false, "score": 0, "creation_date": 1505913897, "post_id": 46323217, "comment_id": 79607272, "body": "@Rajeshkumar I can&#39;t edit library or Windows SDK headers. Even if I do, I get compile error on the edited file headers."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1505913975, "post_id": 46323217, "comment_id": 79607331, "body": "Is the one in the Cryptp++ library inside a namespace and if so are you using <code>using namespace whatever_it_i;</code>?"}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1505913991, "post_id": 46323217, "comment_id": 79607346, "body": "@Raindrop7 well all headers has #ifdef that prevents compiler to read twice. The problem is same <code>byte</code> is defined in different libraries"}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505914113, "post_id": 46323217, "comment_id": 79607458, "body": "@NathanOliver yes I use <code>using namespace CryptoPP</code>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1505914120, "post_id": 46323217, "comment_id": 79607465, "body": "@MustafaChelik put your declaration in a namespace, and remove  <code>using namespace</code>"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 1, "creation_date": 1505914234, "post_id": 46323217, "comment_id": 79607570, "body": "So I guess you can use namespaces."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1505914282, "post_id": 46323217, "comment_id": 79607616, "body": "@MustafaChelik Get rid of it then.  If the namespace name is long you can <a href=\"http://en.cppreference.com/w/cpp/language/namespace_alias\" rel=\"nofollow noreferrer\">alias</a> it to save some typing"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1505914388, "post_id": 46323217, "comment_id": 79607701, "body": "@MustafaChelik don&#39;t use <code>using namespace CryptoPP;  ... SomeCryptoFunction(...)</code> but just <code>CryptoPP::SomeCryptoFunction(...)</code>."}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "edited": false, "score": 0, "creation_date": 1505914420, "post_id": 46323217, "comment_id": 79607726, "body": "I removed the <code>using</code>, now I get many undefined type errors. Now I have to put <code>CryptoPP::</code> before every type, right?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1505914436, "post_id": 46323217, "comment_id": 79607741, "body": "@MustafaChelik yes, before every CryptoPP type and also before every CryptoPP function and possibly other CryptoPP stuff"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1505914589, "post_id": 46323217, "comment_id": 79607846, "body": "@MustafaChelik you can do <code>using CroptoPP::SomeType</code> so that type don&#39;t need the qualification."}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "edited": false, "score": 0, "creation_date": 1505916512, "post_id": 46323217, "comment_id": 79609328, "body": "thank you so much guys. appreciate your help +1"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 2, "last_activity_date": 1505914417, "creation_date": 1505914417, "answer_id": 46323533, "question_id": 46323217, "link": "https://stackoverflow.com/questions/46323217/redefinition-of-type-in-different-libraries/46323533#46323533", "title": "Redefinition of type in different libraries", "body": "<p>Namespaces were created for this reason so to avoid interference between identifiers define them under a namspace:</p>\n\n<pre><code>namespace crypto{\n    typedef unsigned char byte;\n};\n\nnamespace rpcndr{\n    typedef unsigned char byte;\n};\n\n\nint main(){\n    crypto::byte  bValue = 7;\n    rpcndr::byte  bvalue2 = 10;\n\n    ret\n}\n</code></pre>\n"}], "owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 46323533, "answer_count": 1, "score": -1, "last_activity_date": 1505914417, "creation_date": 1505913660, "last_edit_date": 1505913842, "question_id": 46323217, "link": "https://stackoverflow.com/questions/46323217/redefinition-of-type-in-different-libraries", "title": "Redefinition of type in different libraries", "body": "<p>I get <code>byte redefinition</code> error when I try to compile my application. One is defined in <code>Crypto++</code> library and the other one in <code>rpcdnr.h</code> of Windows Kit. I tried many things but none worked. Any idea to solve the problem is appreciated.</p>\n\n<pre><code>typedef unsigned char byte;\n</code></pre>\n\n<p>Thanks</p>\n\n<p>P.S. I'm using Qt on Windows.</p>\n"}, {"tags": ["c++", "objective-c", "xcode9"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1505913043, "post_id": 46322873, "comment_id": 79606650, "body": "Okay, so the header defines <code>__Check_Compile_Time</code>, but it seems <code>check_compile_time</code> isn&#39;t being defined."}], "answers": [{"comments": [{"owner": {"reputation": 2460, "user_id": 4349074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oNrWr.jpg?s=128&g=1", "display_name": "Mehul", "link": "https://stackoverflow.com/users/4349074/mehul"}, "edited": false, "score": 0, "creation_date": 1538264261, "post_id": 46347508, "comment_id": 92083052, "body": "Thanks , Perfect answer"}], "tags": [], "owner": {"reputation": 588, "user_id": 784703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ew4EU.jpg?s=128&g=1", "display_name": "Dany Balian", "link": "https://stackoverflow.com/users/784703/dany-balian"}, "is_accepted": true, "score": 15, "last_activity_date": 1506006742, "creation_date": 1506006742, "answer_id": 46347508, "question_id": 46322873, "link": "https://stackoverflow.com/questions/46322873/after-update-to-xcode9-im-getting-c-requires-a-type-specifier-for-all-declar/46347508#46347508", "title": "After update to Xcode9, I&#39;m getting C++ requires a type specifier for all declarations", "body": "<p>Thanks to StoryTeller's sharp comment, I just noticed, that Apple modified the name of __check_compile_time to __Check_Compile_Time in the module AssertMacros.h\nto fix the problem, update all instances of check_compile_time with __Check_Compile_Time</p>\n\n<p>so the updated code of Apple's SimplePing.h class should be the following:</p>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n\n#if TARGET_OS_EMBEDDED || TARGET_IPHONE_SIMULATOR\n    #import &lt;CFNetwork/CFNetwork.h&gt;\n#else\n    #import &lt;CoreServices/CoreServices.h&gt;\n#endif\n\n#include &lt;AssertMacros.h&gt;\n\n#pragma mark * SimplePing\n\n// The SimplePing class is a very simple class that lets you send and receive pings.\n\n@protocol SimplePingDelegate;\n\n@interface SimplePing : NSObject\n{\n    NSString *              _hostName;\n    NSData *                _hostAddress;\n    CFHostRef               _host;\n    CFSocketRef             _socket;\n\n    id&lt;SimplePingDelegate&gt;  _delegate;\n    uint16_t                _identifier;                            // host byte order\n    uint16_t                _nextSequenceNumber;                    // host byte order\n}\n\n+ (SimplePing *)simplePingWithHostName:(NSString *)hostName;        // chooses first IPv4 address\n+ (SimplePing *)simplePingWithHostAddress:(NSData *)hostAddress;    // contains (struct sockaddr)\n\n@property (nonatomic, assign, readwrite) id&lt;SimplePingDelegate&gt; delegate;\n\n@property (nonatomic, copy,   readonly)  NSString *             hostName;\n@property (nonatomic, copy,   readonly)  NSData *               hostAddress;\n@property (nonatomic, assign, readonly)  uint16_t               identifier;\n@property (nonatomic, assign, readonly)  uint16_t               nextSequenceNumber;\n\n- (void)start;\n    // Starts the pinger object pinging.  You should call this after \n    // you've setup the delegate and any ping parameters.\n\n- (void)sendPingWithData:(NSData *)data;\n    // Sends an actual ping.  Pass nil for data to use a standard 56 byte payload (resulting in a \n    // standard 64 byte ping).  Otherwise pass a non-nil value and it will be appended to the \n    // ICMP header.\n    //\n    // Do not try to send a ping before you receive the -simplePing:didStartWithAddress: delegate \n    // callback.\n\n- (void)stop;\n    // Stops the pinger object.  You should call this when you're done \n    // pinging.\n\n+ (const struct ICMPHeader *)icmpInPacket:(NSData *)packet;\n    // Given a valid IP packet contains an ICMP , returns the address of the ICMP header that \n    // follows the IP header.  This doesn't do any significant validation of the packet.\n\n@end\n\n@protocol SimplePingDelegate &lt;NSObject&gt;\n\n@optional\n\n- (void)simplePing:(SimplePing *)pinger didStartWithAddress:(NSData *)address;\n    // Called after the SimplePing has successfully started up.  After this callback, you \n    // can start sending pings via -sendPingWithData:\n\n- (void)simplePing:(SimplePing *)pinger didFailWithError:(NSError *)error;\n    // If this is called, the SimplePing object has failed.  By the time this callback is \n    // called, the object has stopped (that is, you don't need to call -stop yourself).\n\n// IMPORTANT: On the send side the packet does not include an IP header. \n// On the receive side, it does.  In that case, use +[SimplePing icmpInPacket:] \n// to find the ICMP header within the packet.\n\n- (void)simplePing:(SimplePing *)pinger didSendPacket:(NSData *)packet;\n    // Called whenever the SimplePing object has successfully sent a ping packet. \n\n- (void)simplePing:(SimplePing *)pinger didFailToSendPacket:(NSData *)packet error:(NSError *)error;\n    // Called whenever the SimplePing object tries and fails to send a ping packet.\n\n- (void)simplePing:(SimplePing *)pinger didReceivePingResponsePacket:(NSData *)packet;\n    // Called whenever the SimplePing object receives an ICMP packet that looks like \n    // a response to one of our pings (that is, has a valid ICMP checksum, has \n    // an identifier that matches our identifier, and has a sequence number in \n    // the range of sequence numbers that we've sent out).\n\n- (void)simplePing:(SimplePing *)pinger didReceiveUnexpectedPacket:(NSData *)packet;\n    // Called whenever the SimplePing object receives an ICMP packet that does not \n    // look like a response to one of our pings.\n\n@end\n\n#pragma mark * IP and ICMP On-The-Wire Format\n\n// The following declarations specify the structure of ping packets on the wire.\n\n// IP header structure:\n\nstruct IPHeader {\n    uint8_t     versionAndHeaderLength;\n    uint8_t     differentiatedServices;\n    uint16_t    totalLength;\n    uint16_t    identification;\n    uint16_t    flagsAndFragmentOffset;\n    uint8_t     timeToLive;\n    uint8_t     protocol;\n    uint16_t    headerChecksum;\n    uint8_t     sourceAddress[4];\n    uint8_t     destinationAddress[4];\n    // options...\n    // data...\n};\ntypedef struct IPHeader IPHeader;\n\n__Check_Compile_Time(sizeof(IPHeader) == 20);\n__Check_Compile_Time(offsetof(IPHeader, versionAndHeaderLength) == 0);\n__Check_Compile_Time(offsetof(IPHeader, differentiatedServices) == 1);\n__Check_Compile_Time(offsetof(IPHeader, totalLength) == 2);\n__Check_Compile_Time(offsetof(IPHeader, identification) == 4);\n__Check_Compile_Time(offsetof(IPHeader, flagsAndFragmentOffset) == 6);\n__Check_Compile_Time(offsetof(IPHeader, timeToLive) == 8);\n__Check_Compile_Time(offsetof(IPHeader, protocol) == 9);\n__Check_Compile_Time(offsetof(IPHeader, headerChecksum) == 10);\n__Check_Compile_Time(offsetof(IPHeader, sourceAddress) == 12);\n__Check_Compile_Time(offsetof(IPHeader, destinationAddress) == 16);\n\n// ICMP type and code combinations:\n\nenum {\n    kICMPTypeEchoReply   = 0,           // code is always 0\n    kICMPTypeEchoRequest = 8            // code is always 0\n};\n\n// ICMP header structure:\n\nstruct ICMPHeader {\n    uint8_t     type;\n    uint8_t     code;\n    uint16_t    checksum;\n    uint16_t    identifier;\n    uint16_t    sequenceNumber;\n    // data...\n};\ntypedef struct ICMPHeader ICMPHeader;\n\n__Check_Compile_Time(sizeof(ICMPHeader) == 8);\n__Check_Compile_Time(offsetof(ICMPHeader, type) == 0);\n__Check_Compile_Time(offsetof(ICMPHeader, code) == 1);\n__Check_Compile_Time(offsetof(ICMPHeader, checksum) == 2);\n__Check_Compile_Time(offsetof(ICMPHeader, identifier) == 4);\n__Check_Compile_Time(offsetof(ICMPHeader, sequenceNumber) == 6);\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 784703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ew4EU.jpg?s=128&g=1", "display_name": "Dany Balian", "link": "https://stackoverflow.com/users/784703/dany-balian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1517, "favorite_count": 1, "accepted_answer_id": 46347508, "answer_count": 1, "score": 5, "last_activity_date": 1506006742, "creation_date": 1505912663, "last_edit_date": 1505975339, "question_id": 46322873, "link": "https://stackoverflow.com/questions/46322873/after-update-to-xcode9-im-getting-c-requires-a-type-specifier-for-all-declar", "title": "After update to Xcode9, I&#39;m getting C++ requires a type specifier for all declarations", "body": "<p>I have a project coded in objective c that uses the SimplePing.h as provided by Apple.</p>\n\n<p>The code was running perfectly until I updated Xcode to v9.0; it's not compiling anymore with an Error in the file SimplePing.h provided by Apple here <a href=\"https://developer.apple.com/library/content/samplecode/SimplePing/Listings/Common_SimplePing_h.html\" rel=\"noreferrer\">SimplePing.h</a> </p>\n\n<blockquote>\n  <p>C++ requires a type specifier for all declarations</p>\n</blockquote>\n\n<p>The Error is generated on each of those lines in SimplePing.h</p>\n\n<pre><code>check_compile_time(sizeof(IPHeader) == 20);\ncheck_compile_time(offsetof(IPHeader, versionAndHeaderLength) == 0);\ncheck_compile_time(offsetof(IPHeader, differentiatedServices) == 1);\ncheck_compile_time(offsetof(IPHeader, totalLength) == 2);\ncheck_compile_time(offsetof(IPHeader, identification) == 4);\ncheck_compile_time(offsetof(IPHeader, flagsAndFragmentOffset) == 6);\ncheck_compile_time(offsetof(IPHeader, timeToLive) == 8);\ncheck_compile_time(offsetof(IPHeader, protocol) == 9);\ncheck_compile_time(offsetof(IPHeader, headerChecksum) == 10);\ncheck_compile_time(offsetof(IPHeader, sourceAddress) == 12);\ncheck_compile_time(offsetof(IPHeader, destinationAddress) == 16);\n</code></pre>\n\n<p>The Class SimplePing.h includes the following class</p>\n\n<pre><code>#include &lt;AssertMacros.h&gt;           // for __Check_Compile_Time\n</code></pre>\n\n<p>in which the code of check_compile_time is defined as below:</p>\n\n<pre><code>#ifndef __Check_Compile_Time\n    #ifdef __GNUC__ \n        #define __Check_Compile_Time( expr )    \\\n            extern int compile_time_assert_failed[ ( expr ) ? 1 : -1 ] __attribute__( ( unused ) )\n    #else\n        #define __Check_Compile_Time( expr )    \\\n            extern int compile_time_assert_failed[ ( expr ) ? 1 : -1 ]\n    #endif\n#endif\n</code></pre>\n\n<p>First Question: How can I solve this?\nSecond Question: I cannot seem to modify the AssertMacros.h file, it is locked.. should i unlock it and fix it? or is there anything else I can do to fix the problem?</p>\n"}, {"tags": ["c++", "multithreading", "opencv", "race-condition"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1505915521, "post_id": 46322848, "comment_id": 79608593, "body": "What do you mean by &quot;it doesn&#39;t work as intended&quot;? It does exactly the same thing as a simple <code>im.copyTo(result, mask);</code> does. What do you expect it to do?"}, {"owner": {"reputation": 1211, "user_id": 2928970, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/65acc98fc43bf4eee13ae060a7e7b730?s=128&d=identicon&r=PG&f=1", "display_name": "hovnatan", "link": "https://stackoverflow.com/users/2928970/hovnatan"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1505915607, "post_id": 46322848, "comment_id": 79608658, "body": "I&#39;m not interested in a simpler way, just trying to understand why this code results in race conditions."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1505916977, "post_id": 46322848, "comment_id": 79609668, "body": "I&#39;m simply explaining what it does by comparing it with an existing function. You claim that &quot;it doesn&#39;t work as intended&quot;, yet for some reason you choose to ignore the questions for clarification and post that instead. | As for the race condition, I don&#39;t really see any. Internally <code>forEach</code> uses parallel_for_ and splits it by rows. Does helgrind produce some details you could share?"}], "owner": {"reputation": 1211, "user_id": 2928970, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/65acc98fc43bf4eee13ae060a7e7b730?s=128&d=identicon&r=PG&f=1", "display_name": "hovnatan", "link": "https://stackoverflow.com/users/2928970/hovnatan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 666, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1505912540, "creation_date": 1505912540, "question_id": 46322848, "link": "https://stackoverflow.com/questions/46322848/opencv-cvmatforeach-method-race-condition", "title": "OpenCV cv::Mat::forEach() method race condition", "body": "<p>I have the following code, where I am trying to utilize the multithreaded access to elements of an OpenCV <code>cv::Mat</code> class using the <code>forEach()</code> member method. But when I run this code in <code>valgrind --tool=helgrind</code> I get multiple race condition reports. Also it doesn't work as intended, i.e., mask the image with another image. What is the reason for this behavior?</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nint main(int argc, char** argv)\n{\n  cv::Mat1f im(21, 21, 0.0f);\n  im(cv::Rect(7, 7, 7, 7)) = 0.5;\n  cv::Mat1b mask(21, 21, 0.0);\n  mask(cv::Rect(9, 9, 3, 3)) = 1;\n  cv::Mat1f result(21, 21, 0.0f);\n  mask.forEach([&amp;result, &amp;im] (uchar val, const int* pos)\n  {\n    if (val == 0)\n      result(pos[1], pos[0]) = 0;\n    else\n      result(pos[1], pos[0]) = im(pos[1], pos[0]);\n  });\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "valarray"], "answers": [{"tags": [], "owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": true, "score": 2, "last_activity_date": 1505912727, "creation_date": 1505912727, "answer_id": 46322890, "question_id": 46322812, "link": "https://stackoverflow.com/questions/46322812/wrong-value-from-valarrayint-after-initialization/46322890#46322890", "title": "Wrong value from valarray&lt;int&gt; after initialization", "body": "<p>When you use this kind of for loop:</p>\n\n<pre><code>for(auto &amp;i : va)\n</code></pre>\n\n<p><code>i</code> receives the contents of va, so, the correct way to display it is:</p>\n\n<pre><code>std::cout &lt;&lt; i &lt;&lt; ' ';   // not va[i]\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 4410323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NBejJ.png?s=128&g=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/4410323/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 46322890, "answer_count": 1, "score": 0, "last_activity_date": 1505912753, "creation_date": 1505912454, "last_edit_date": 1505912753, "question_id": 46322812, "link": "https://stackoverflow.com/questions/46322812/wrong-value-from-valarrayint-after-initialization", "title": "Wrong value from valarray&lt;int&gt; after initialization", "body": "<p>I'm trying to use std::valarray setting some initial values.\nPrinting the array values, I get something different from what I expect. \nI'm on Windows (10) with CodeBlocks (GCC 4.9.2, C++11 build option).</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;valarray&gt;\n\nvoid print(std::string aname, std::valarray&lt;int&gt; &amp; va)\n{\n    std::cout &lt;&lt; aname &lt;&lt; \"[ \";\n    for(auto &amp;i : va)\n    {\n        std::cout &lt;&lt; va[i] &lt;&lt; ' ';\n    }\n    cout &lt;&lt; ']'&lt;&lt; endl;\n}\n\nint main()\n{\n\n    std::valarray&lt;int&gt; one { 1, 0, 0 };\n    std::valarray&lt;int&gt; two  { 0, 1, 0 };\n    std::valarray&lt;int&gt; three { 0, 0, 1 };\n    std::cout &lt;&lt; std::endl;\n    print(\"one\", one);\n    print(\"two\", two);\n    print(\"three\", three);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>one[ 0 1 1 ]\ntwo[ 0 1 0 ]\nthree[ 0 0 0 ]\n</code></pre>\n"}, {"tags": ["c++", "winapi", "parent-child"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1505918529, "post_id": 46322811, "comment_id": 79610812, "body": "Have a look at <a href=\"https://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide\" rel=\"nofollow noreferrer\">Vista UAC: The Definitive Guide</a>. Start reading from &quot;Routing via ShellExecuteEx()&quot;. He is doing redirection by using named pipes and an intermediate helper process that is created using <code>ShellExecuteEx</code> which in turn calls <code>CreateProcess</code> for being able to inherit the named pipe handles to the actual child process (if I understand correctly)."}, {"owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1505918694, "post_id": 46322811, "comment_id": 79610929, "body": "Yes @zett42 But this solution looks really hacky in my opinion...Im good at spagethi coding when im desperate but im not here yet :P"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1505919227, "post_id": 46322811, "comment_id": 79611323, "body": "I don&#39;t think you will find an &quot;easy&quot; method for this. Once you start doing things out of the ordinary, UAC quickly gets messy. Anyway, if you fear spaghetti, just wrap all that mess into your own nifty interface. ;-)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1505948106, "post_id": 46322811, "comment_id": 79626611, "body": "If you are unable to modify the child process to send output to a designated console, you will need a proxy process to launch the child process on your behalf.  Run the proxy process elevated, and have it connect back to your console before it launches the child.  (Basically the same procedure as zett42 suggests, but simplified for your particular scenario.)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1505948492, "post_id": 46322811, "comment_id": 79626701, "body": "... incidentally, I assure you that any solution that does not involve a proxy process will be even hackier!"}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "edited": false, "score": 0, "creation_date": 1505918280, "post_id": 46324461, "comment_id": 79610607, "body": "Thanks for pointing out the fact that <code>ShellExecuteEx()</code> is calling <code>svchost.exe</code> and that <code>bHinheritHandles</code> is hardcoded to <code>FALSE</code> I will investigate a workaround knowing this"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1505925831, "post_id": 46324461, "comment_id": 79615987, "body": "The Application Information services creates the elevated process with an attribute to manually set the parent process to the client, so it could but does not support inheritance.  Also, there&#39;s another creation attribute that enables standard-handle duplication (not inheritance) when inheritance is disabled, but it&#39;s only used when a console app creates another console app attached to the same console. That&#39;s also unused here because the AppInfo service sets the creation flag to create a new console (for a new security context), which sets the child&#39;s standard handles to the new console."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1505926237, "post_id": 46324461, "comment_id": 79616217, "body": "@eryksun - yes, Application Information services use <code>PROC_THREAD_ATTRIBUTE_PARENT_PROCESS</code> for set process from which <code>ShellExecuteEx</code> was called as parent process. if it use also <code>bInheritHandles == TRUE</code> - new process will be inherit handles from our src process (where we called <code>ShellExecuteEx</code>) but not from <code>svchost.exe</code>. but <code>bInheritHandles</code> hardcoded to be false."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1505926450, "post_id": 46324461, "comment_id": 79616345, "body": "Even if it were possible by design, inheriting standard handles for another console isn&#39;t meaningful. What matters is the <code>ConsoleHandle</code> of the elevated process, which gets set up when it allocates the new console. The handles for the console input and screen buffer are only meaningful in the context of an attached console. The OP has another question where this was addressed. The elevated process has to call <code>FreeConsole</code> and <code>AttachConsole</code> to write to its parent&#39;s console -- or instead use an IPC scheme such as named pipes."}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 1, "last_activity_date": 1505922340, "last_edit_date": 1505922340, "creation_date": 1505916819, "answer_id": 46324461, "question_id": 46322811, "link": "https://stackoverflow.com/questions/46322811/how-can-i-create-a-elevated-child-process-with-inherited-handles-from-his-parent/46324461#46324461", "title": "How can I create a elevated child process with inherited handles from his parent", "body": "<p>When you use <code>ShellExecuteEx</code> with <code>runas</code> - The function <code>CreateProcessAsUserW</code> is called not from your process, but from <code>svchost.exe -k netsvcs</code> where <code>appinfo.dll</code> is running. And <em>bInheritHandles</em> is hardcoded to be <em>FALSE</em> - so\nyour process does not inherit any handles in this case. for making handles inheritable the only way is a direct call to <code>CreateProcessAsUserW</code> with a primary elevated token. But from where you got this token ? ok, you can run self exe second time as elevated (with <code>runas</code>) and duplicate elevated token back to original not-elevated process. but anyway (even with elevated token) - you need <code>SE_ASSIGNPRIMARYTOKEN_NAME</code> privilege for call <code>CreateProcessAsUser</code>. but you have no this privilege.</p>\n\n<p>Otherwise you could if you found some exploit.</p>\n\n<p>The process handle, returned by <code>ShellExecuteEx</code> have no <code>PROCESS_DUP_HANDLE</code> access - So you can't use it for manual handle duplication later.</p>\n\n<p>So in general - This is impossible by design</p>\n"}], "owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1505922340, "creation_date": 1505912450, "last_edit_date": 1505913477, "question_id": 46322811, "link": "https://stackoverflow.com/questions/46322811/how-can-i-create-a-elevated-child-process-with-inherited-handles-from-his-parent", "title": "How can I create a elevated child process with inherited handles from his parent", "body": "<p>I'm trying to create a child process with elevated rights in Windows (by trigerring a UAC prompt) and get this child process to inherit his parent STDOUT handle to be able to output back to the parent's console.</p>\n\n<p>Additionnal Infos:</p>\n\n<ul>\n<li>Win32 APIs</li>\n<li>Im currently using <code>ShellExecuteEx()</code> with a <code>ShellExecuteInformation</code> that specifies a \"runas\" verb to trigger the UAC but any other solution that can create a elevated copy of the current running program (The child process is the same executable as the parent) but beeing able to output back to the parent's console.</li>\n</ul>\n"}]