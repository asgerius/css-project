[{"tags": ["php", "c++", "openshift"], "comments": [{"owner": {"reputation": 5222, "user_id": 1765866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EVSS2.jpg?s=128&g=1", "display_name": "Daryl Gill", "link": "https://stackoverflow.com/users/1765866/daryl-gill"}, "edited": false, "score": 0, "creation_date": 1438818204, "post_id": 31844560, "comment_id": 51610593, "body": "... Did you turn it off and back on again?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1438881061, "post_id": 31844560, "comment_id": 51643096, "body": "Did you compile the c++ code on OpenShift or at least on a compatible system? (Maybe centos 64 bit or something like that?)"}], "owner": {"reputation": 21, "user_id": 5195994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ulWEdOPA0Zo/AAAAAAAAAAI/AAAAAAAADFQ/5rfvDB395MU/photo.jpg?sz=128", "display_name": "Charles Stratton", "link": "https://stackoverflow.com/users/5195994/charles-stratton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438818068, "creation_date": 1438818068, "question_id": 31844560, "link": "https://stackoverflow.com/questions/31844560/executing-c-code-with-php-gives-return-value-of-126", "title": "Executing c++ code with PHP gives return value of 126", "body": "<p>I have a simple c++ code I want to execute using php on my website hosted by openshift.  The return value it gives me is \"126\" which means it finds the executable but has a permission issue with running it.  I have the permissions set so it can be executed by all users (0755) so I really can't figure out what the problem is.  I have spent all day searching through stackexchange and other sites and no one has a solution to how to fix this.  </p>\n\n<p>The closest I got was with this page \"<a href=\"http://bytes.com/topic/php/answers/11402-exec-doesnt-work-c-c-executables\" rel=\"nofollow\">http://bytes.com/topic/php/answers/11402-exec-doesnt-work-c-c-executables</a>\" which the only solution that worked for him was to finally restart the web server.  Please help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 1, "creation_date": 1438817245, "post_id": 31844430, "comment_id": 51610333, "body": "The answer is the same as the answer to this one, just recently asked: <a href=\"http://stackoverflow.com/questions/31816473\">stackoverflow.com/questions/31816473</a> but also <a href=\"http://stackoverflow.com/questions/3075049\">stackoverflow.com/questions/3075049</a>"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438817345, "post_id": 31844430, "comment_id": 51610369, "body": "String literals are constants and can not be modified."}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 2, "creation_date": 1438817481, "post_id": 31844430, "comment_id": 51610405, "body": "Also: The compiler should give you a warning that your code is not valid.  See <a href=\"http://coliru.stacked-crooked.com/a/ef79aa4884d08883\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/ef79aa4884d08883</a>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1438817868, "post_id": 31844430, "comment_id": 51610517, "body": "<code>str[0] = &quot;a&quot;;</code> should definitely not even compile. How did it give you a runtime error?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438818573, "post_id": 31844430, "comment_id": 51610671, "body": "You should also get errors for <code>str[0] = &quot;a&quot;</code>. If you don&#39;t then you really need to turn up your compiler&#39;s diagnostic level."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1438818613, "post_id": 31844430, "comment_id": 51610686, "body": "@MobyDisk it&#39;s nothing to do with the first one you linked"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1438818653, "post_id": 31844430, "comment_id": 51610702, "body": "@chris common compilers give &quot;warning&quot; in their default mode for conversion from pointer to integer"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438819610, "post_id": 31844430, "comment_id": 51610930, "body": "@MattMcNabb, Both the Clang and GCC on Coliru give errors with no warning options. I don&#39;t recall seeing compilers give warnings for that except in C mode."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438820992, "post_id": 31844430, "comment_id": 51611268, "body": "Note the code above has <code>str[0] = &#39;a&#39;</code>, not <code>&quot;a&quot;</code>."}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438868167, "post_id": 31844430, "comment_id": 51633974, "body": "@MattMcNabb The similarity is that the first link shows code declaring a string literal without const."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1438894486, "post_id": 31844430, "comment_id": 51650402, "body": "@MobyDisk That&#39;s where the similarity ends though, the main thing about this question is writing to the string literal, which doesn&#39;t happen in the other one"}], "answers": [{"comments": [{"owner": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "edited": false, "score": 0, "creation_date": 1438819513, "post_id": 31844461, "comment_id": 51610903, "body": "I have one question, void reverse(char* str){}, am I passing a pointer or is * acting as a reference?"}, {"owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "reply_to_user": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "edited": false, "score": 0, "creation_date": 1438819993, "post_id": 31844461, "comment_id": 51611039, "body": "In C++, arrays &quot;decay&quot; into pointers in certain contexts. Here, the pointer argument to <code>reverse</code> starts out as a pointer to the first element of the array in <code>main</code>."}, {"owner": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "edited": false, "score": 0, "creation_date": 1438821157, "post_id": 31844461, "comment_id": 51611303, "body": "But when I write cout &lt;&lt; str &lt;&lt; endl;, why does it print out &quot;hello&quot;? Shouldn&#39;t it print only the first character of the string since it points to the first element of the array?"}, {"owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "reply_to_user": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "edited": false, "score": 0, "creation_date": 1438821602, "post_id": 31844461, "comment_id": 51611410, "body": "The type of <code>str</code> in <code>reverse</code> is pointer to <code>char</code>, which is treated by <code>std::cout</code> as a string. In contrast, plain <code>char</code> is a single character."}], "tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": false, "score": 6, "last_activity_date": 1438817300, "creation_date": 1438817300, "answer_id": 31844461, "question_id": 31844430, "link": "https://stackoverflow.com/questions/31844430/trying-to-reverse-a-string-and-getting-a-bus-error/31844461#31844461", "title": "Trying to reverse a string and getting a bus error", "body": "<p>Allocate your string as an array on the stack and not as a pointer into a possibly read-only segment of your program.</p>\n\n<pre><code>char str[] = \"hello\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1597, "user_id": 1307255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XEd.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/1307255/nishant"}, "is_accepted": true, "score": 2, "last_activity_date": 1438821981, "creation_date": 1438821981, "answer_id": 31845071, "question_id": 31844430, "link": "https://stackoverflow.com/questions/31844430/trying-to-reverse-a-string-and-getting-a-bus-error/31845071#31845071", "title": "Trying to reverse a string and getting a bus error", "body": "<p>First of all, this line should atleast give you a warning: </p>\n\n<pre><code>char* str = \"hello\";\n</code></pre>\n\n<p>you are converting a string constant to a pointer, which is not allowed.\nTo fix your code, you should use, <code>char str[] = \"hello\"</code> in <code>main()</code>.</p>\n\n<p>When you pass this array in <code>reverse()</code>, it decays to <code>char*</code>, now the question which you asked in previous answer's comment.</p>\n\n<blockquote>\n  <p>But when I write cout &lt;&lt; str &lt;&lt; endl;, why does it print out \"hello\"? Shouldn't it print only the first character of the string since it points to the first element of the array?</p>\n</blockquote>\n\n<p>It is because the <code>&lt;&lt;</code> operator on <code>std::cout</code> is overloaded. If you give it a <code>char*</code> or <code>const char*</code>, it treats the operand as a pointer to (the first character of) a C-style string, and prints the contents of that string:</p>\n\n<pre><code>const char * str= \"hello\";\ncout &lt;&lt; str; // prints \"hello\"\n</code></pre>\n\n<p>If you give it a char value, it prints that value as a character:</p>\n\n<pre><code>cout &lt;&lt; *str;   // prints \"h\"\ncout &lt;&lt; str[0]; // prints \"h\"\n</code></pre>\n"}], "owner": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 31845071, "answer_count": 2, "score": 1, "last_activity_date": 1438821981, "creation_date": 1438817099, "question_id": 31844430, "link": "https://stackoverflow.com/questions/31844430/trying-to-reverse-a-string-and-getting-a-bus-error", "title": "Trying to reverse a string and getting a bus error", "body": "<p>I am trying to reverse a string (but that's not the problem that I have). The problem is trying to change the value of the string array given a certain index. However, every time I try to change the value at the index, I get a bus error. Namely, <code>Bus error: 10</code>. I'm not sure what this means. Also, I tried <code>str[0] = \"a\"</code> but this also gives me a bus error. Any suggestions to fix this?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std; \n\nvoid reverse(char* str){\n    str[0] = 'a'; \n\n}\n\n\nint main(){\n\n    char* str = \"hello\"; \n    reverse(str); \n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1438816583, "post_id": 31844305, "comment_id": 51610166, "body": "What does this <code>at</code> function look like?"}, {"owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1438817579, "post_id": 31844305, "comment_id": 51610432, "body": "@BaummitAugen  &quot;at&quot; is a build-in function in opencv. It is just used to get the element at one point. But I do not know how the opencv source code convert the data type......"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "edited": false, "score": 0, "creation_date": 1438818316, "post_id": 31844452, "comment_id": 51610613, "body": "Thanks for your answer. But when I plug in the number 652.759 into the wrong code you provided, I got 147 instead of 68.....in fact, 68 is the number I needed in my case(even though it is wrong) and I hope to achieve it with c++ code without opencv...  Is there any other possible solutions to my problem?? Thx!"}], "tags": [], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "is_accepted": false, "score": 1, "last_activity_date": 1438817251, "creation_date": 1438817251, "answer_id": 31844452, "question_id": 31844305, "link": "https://stackoverflow.com/questions/31844305/difference-between-atuchar-and-static-castuchar-in-opencv/31844452#31844452", "title": "Difference between .at&lt;uchar&gt; and static_cast&lt;uchar&gt; in opencv?", "body": "<p>It's basically the same difference than in this code:</p>\n\n<pre><code>float f = 140.f;\nunsigned char c = static_cast&lt;unsigned char&gt;(f); // c is 140, this is ok\nunsigned char wrong = *((unsigned char*)&amp;f); // this is wrong\n</code></pre>\n\n<p>The last line is the same as the <code>a.at&lt;uchar&gt;(Point(x,y))</code> you have in your code. This is wrong because it access a <code>float</code> and reinterprets it (its bytes) as an <code>unsigned char</code>. There is no actual conversion of the binary values.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "edited": false, "score": 0, "creation_date": 1438819396, "post_id": 31844570, "comment_id": 51610875, "body": "It makes more sense! Thank you very much!"}, {"owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "edited": false, "score": 0, "creation_date": 1438883422, "post_id": 31844570, "comment_id": 51644246, "body": "Hello! Do you know how opencv uses .at&lt;&gt; to convert a Vec3f variable to uchar? For example, I have a floating-point image pixel and I want to use at&lt;uchar&gt; to access it. How opencv achieves it?"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "reply_to_user": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "edited": false, "score": 0, "creation_date": 1438906353, "post_id": 31844570, "comment_id": 51654565, "body": "as stated in my answer, the <code>at</code> function is agnostic to the <code>datatype</code> of your <code>Mat</code>. You&#39;ll have to call <code>at&lt;Vec3f&gt;(...)</code> and then convert that Vec3f to a uchar yourself. As a rule of thumb, always use the same type for both the template type for <code>at</code> function and for the <code>Mat::datatype</code>. Be aware that Vec3f is normally normalised to be between 0 and 1, while uchar is obviously between 0 and 255. So, you&#39;ll need to do your own maths... for example <code>uchar x1 = uchar(myVec3f[0] * 255f)</code>"}], "tags": [], "owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "is_accepted": false, "score": 2, "last_activity_date": 1438818664, "last_edit_date": 1438818664, "creation_date": 1438818154, "answer_id": 31844570, "question_id": 31844305, "link": "https://stackoverflow.com/questions/31844305/difference-between-atuchar-and-static-castuchar-in-opencv/31844570#31844570", "title": "Difference between .at&lt;uchar&gt; and static_cast&lt;uchar&gt; in opencv?", "body": "<p>The <code>at()</code> function is agnostic as to the number of bits per point, and bases its judgement on the supplied template type. </p>\n\n<p>So, <code>at&lt;float&gt;(2)</code> will return a float composed of a 32 bits range starting from the 4th byte of the array, while <code>at&lt;uchar&gt;(2)</code> will simply return the second byte in the array.</p>\n\n<p>For example, the following</p>\n\n<pre><code>Mat m(10, 1, CV_8U);\n\nm.at&lt;uchar&gt;(0) = 44;\nm.at&lt;uchar&gt;(1) = 1;\nm.at&lt;uchar&gt;(2) = 0;\nm.at&lt;uchar&gt;(3) = 0;\n\ncout &lt;&lt; \"char 0  : \" &lt;&lt; (int)m.at&lt;uchar&gt;(0) &lt;&lt; endl;\ncout &lt;&lt; \"char 1  : \" &lt;&lt; (int)m.at&lt;uchar&gt;(1) &lt;&lt; endl;\ncout &lt;&lt; \"short 0 : \" &lt;&lt; (int)m.at&lt;unsigned short&gt;(0) &lt;&lt; endl;\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>char 0  : 44\nchar 1  : 1\nshort 0 : 300\n</code></pre>\n\n<p><code>short 0</code> = <code>char 1</code> * <code>256</code> + <code>char 0</code></p>\n"}], "owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438818664, "creation_date": 1438816322, "last_edit_date": 1438817643, "question_id": 31844305, "link": "https://stackoverflow.com/questions/31844305/difference-between-atuchar-and-static-castuchar-in-opencv", "title": "Difference between .at&lt;uchar&gt; and static_cast&lt;uchar&gt; in opencv?", "body": "<p>I have a float matrix a and I want to access the element at the point (x,y), but I want to convert the data type to unsigned char. The float number in point(x,y) is 652.759</p>\n\n<p>The code I want to use (which is based on Opencv)is </p>\n\n<pre><code>    a.at&lt;uchar&gt;(Point(x,y))\n</code></pre>\n\n<p>The result of above code is 68.</p>\n\n<p>But when I checked the result with simple c++ code</p>\n\n<pre><code>    static_cast&lt;unsigned char&gt;(a.at&lt;float&gt;(Point(x,y)))\n</code></pre>\n\n<p>the result is 140. </p>\n\n<p>Anyone knows why? How can I get the same results by using both the code above?</p>\n\n<p>Thx!</p>\n"}, {"tags": ["c++", "variables"], "comments": [{"owner": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 0, "creation_date": 1438816858, "post_id": 31844296, "comment_id": 51610232, "body": "Do you want to save the variable name or only the content of the variable?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1438821084, "post_id": 31844296, "comment_id": 51611286, "body": "save in binary or text?"}], "answers": [{"tags": [], "owner": {"reputation": 404, "user_id": 5196035, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10204433982147330/picture?type=large", "display_name": "Vahid Zadeh", "link": "https://stackoverflow.com/users/5196035/vahid-zadeh"}, "is_accepted": true, "score": 0, "last_activity_date": 1438819844, "creation_date": 1438819844, "answer_id": 31844804, "question_id": 31844296, "link": "https://stackoverflow.com/questions/31844296/c-saving-variables-in-files/31844804#31844804", "title": "C++ Saving variables in files", "body": "<p>You just need to save that variable in a file and read from that file the next time you run your program.</p>\n\n<p>Say, you have the variable <code>int a;</code> which you allocate a value to <code>a=10</code>. You can save that variable in a text file with the following code:</p>\n\n<pre><code>  ofstream file;\n  file.open (\"filePath.txt\");\n  file &lt;&lt; a;\n  file.close();\n</code></pre>\n\n<p>If instead of one variable, you have a set of variables, you can either save them in different files or save all of them in a vector and save the vector in one single file. The variables will be saved in order. So you can use this to refer to any specific variable you need when you run your program again. Here's how you save a vector, say <code>std::vector&lt;double&gt; b = {1,2,3};</code></p>\n\n<pre><code>    ofstream output_file( filePath );\n    ostream_iterator&lt;int&gt; output_iterator( output_file, \"\\n\" );\n    // Passing all the variables inside the vector from the beginning of the vector to the end.\n    copy( b.begin( ), b.end( ), output_iterator );\n</code></pre>\n\n<p>To read from the file again, just do this:</p>\n\n<pre><code>std::vector&lt;double&gt; newVector;\nifstream input_file( filePath.txt );\ndouble tempVar;\nwhile ( input_file &gt;&gt; tempVar )\n{\n    newVector.push_back( tempVar );\n}\n</code></pre>\n\n<p>Make sure to <code>#include &lt;iostream&gt;</code> at the beginning of your code! :)</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 67, "user_id": 4289777, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc9b8236a09d873d905251824000c7ef?s=128&d=identicon&r=PG&f=1", "display_name": "will smith", "link": "https://stackoverflow.com/users/4289777/will-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12389, "favorite_count": 2, "closed_date": 1438848629, "accepted_answer_id": 31844804, "answer_count": 1, "score": 0, "last_activity_date": 1438820315, "creation_date": 1438816270, "last_edit_date": 1438820315, "question_id": 31844296, "link": "https://stackoverflow.com/questions/31844296/c-saving-variables-in-files", "closed_reason": "Needs more focus", "title": "C++ Saving variables in files", "body": "<p>I am new to c++ and I am trying to find a way to make a program store information in a variable. I don't understand how to make a file or variable save and be able to be reused the next time the program is open. For instance, let`s say that I make a program that asks for a username and saves it in a variable, how would I be able to store that variable so that the program can actually fetch it in a later use?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1438816327, "post_id": 31844262, "comment_id": 51610088, "body": "You&#39;re embarking down a slippery slope; at the bottom is a mountain of useless boilerplate code. Why not use <code>std::chrono</code>?"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1438816748, "post_id": 31844262, "comment_id": 51610198, "body": "I think what you want is implicit conversion operators."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1438816244, "creation_date": 1438816244, "answer_id": 31844289, "question_id": 31844262, "link": "https://stackoverflow.com/questions/31844262/is-there-a-way-to-inherit-a-base-type-such-as-int/31844289#31844289", "title": "Is there a way to &quot;inherit&quot; a base type such as int?", "body": "<p>I think you want <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/serialization/doc/strong_typedef.html\" rel=\"nofollow\"><code>BOOST_STRONG_TYPEDEF</code></a>. You can't inherit from <code>int</code>, as <code>int</code> is not a class type, but you could do:</p>\n\n<pre><code>BOOST_STRONG_TYPEDEF(int64_t, Time64Base);\n\nstruct Time64 : Time64Base {\n    std::string Parse() { ... }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "is_accepted": true, "score": 1, "last_activity_date": 1438817079, "creation_date": 1438817079, "answer_id": 31844427, "question_id": 31844262, "link": "https://stackoverflow.com/questions/31844262/is-there-a-way-to-inherit-a-base-type-such-as-int/31844427#31844427", "title": "Is there a way to &quot;inherit&quot; a base type such as int?", "body": "<p>Here is how to do it without boost:</p>\n\n<p>You need to make your structure implicitly convertable to the underlying type, like CoffeeandCode said.  That is a big part of what <a href=\"http://www.boost.org/doc/libs/1_37_0/boost/strong_typedef.hpp\" rel=\"nofollow\">BOOST_STRONG_TYPEDEF</a> does.</p>\n\n<pre><code>struct Time64 {\n    int64_t Milliseconds;\n\n    operator int64_t &amp;() { return Milliseconds; }\n};\n\nint main(){\n    Time64 x;\n\n    x.Milliseconds = 0;\n    x++;\n\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This can often be a dangerous approach.  If something is implicitly convertible to an integer, it can often be mistakenly used as a pointer, or it can be unclear what it will do when passed to printf() or cout.</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 31844427, "answer_count": 2, "score": 4, "last_activity_date": 1438817079, "creation_date": 1438816040, "question_id": 31844262, "link": "https://stackoverflow.com/questions/31844262/is-there-a-way-to-inherit-a-base-type-such-as-int", "title": "Is there a way to &quot;inherit&quot; a base type such as int?", "body": "<p>I have several structures that go similar to this:</p>\n\n<pre><code>struct Time64 {\n    int64_t Milliseconds;\n\n    Time64 operator+(const Time64&amp; right) {\n        return Time64(Milliseconds + right.Milliseconds);\n    }\n    ... blah blah all the arithmetic operators for calculating with Time64 and int64_t which is assumed to represent milliseconds\n\n    std::string Parse() {\n        fancy text output\n    }\n}\n</code></pre>\n\n<p>And now I need to add even more of them.. Essentially they are just interpretations of any of the base classes and defining all the operators and such for them is really tedious. The interpretation functions(such as \"parse\" in the example) are important because I use them all over the UI. I know I could create interpretation functions as standalone thingies like this</p>\n\n<pre><code>std::string InterpretInt64AsTimeString(const Int64_t input) {...}\n</code></pre>\n\n<p>but referring to those functions as class methods makes for a much nicer looking code.</p>\n\n<p>If only there was a way to \"typedef Int64_t Time64\" and then expand the Time64 \"class\" by adding some methods to it.. </p>\n\n<p>Is there any way to achieve what I'm trying to do easier than what I got going on right now?</p>\n"}, {"tags": ["c++", "exe"], "comments": [{"owner": {"reputation": 33, "user_id": 5195921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed4bbdbd3adf1fdeb2445139045b2b?s=128&d=identicon&r=PG&f=1", "display_name": "TommyL", "link": "https://stackoverflow.com/users/5195921/tommyl"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1438815522, "post_id": 31844134, "comment_id": 51609841, "body": "O I see. So it closes it automatically right away.......right.....thanks"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1438815570, "post_id": 31844134, "comment_id": 51609851, "body": "You can add <code>system(&quot;pause&quot;);</code> before the <code>return 0;</code> (<code>#include &lt;cstdlib&gt;</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 2, "last_activity_date": 1438815974, "last_edit_date": 1438815974, "creation_date": 1438815554, "answer_id": 31844196, "question_id": 31844134, "link": "https://stackoverflow.com/questions/31844134/why-does-my-program-not-work-as-an-exe-file/31844196#31844196", "title": "Why does my program not work as an exe file?", "body": "<p>After you give it the second number, the program will do its thing and print the result. Then it is done, so it exits and its window closes.</p>\n\n<p>Start it in an existing console window so you can look at the program's output after it terminated.</p>\n"}], "owner": {"reputation": 33, "user_id": 5195921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed4bbdbd3adf1fdeb2445139045b2b?s=128&d=identicon&r=PG&f=1", "display_name": "TommyL", "link": "https://stackoverflow.com/users/5195921/tommyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 31844196, "answer_count": 1, "score": 1, "last_activity_date": 1438815974, "creation_date": 1438815127, "question_id": 31844134, "link": "https://stackoverflow.com/questions/31844134/why-does-my-program-not-work-as-an-exe-file", "title": "Why does my program not work as an exe file?", "body": "<p>Hi I'm new to this programming thing. I just started to learn C++ in preparation for my Sophomore year in college.\nSo I was following some tutorials and got this \"calculator\" program completed. I'm using CodeBlocks as my IDE. It automatically creates an exe file that you can open and run the program. in the IDE when i run. everything works perfectly as intended.</p>\n\n<p>However running the exe program it automatically shuts down right after i input my second number. Instead of displaying the sum difference or product of the two numbers it just turns off.</p>\n\n<p>Here is my code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nstring input;\n\n   cout &lt;&lt; \"Addition(A), Subtraction(S), Multiplication(M), or Division(D)\"&lt;&lt;endl;\n   cin &gt;&gt;input;\n   int a;\n   int b;\n\n   if(input == \"Addition\")\n   {\n       cout &lt;&lt; \"Enter Your First Number\\n\";\n       cin&gt;&gt;a;\n       cout &lt;&lt; \"Enter Your Second Number\\n\";\n       cin&gt;&gt;b;\n       int sum = a+b;\n       cout &lt;&lt; \"Here is the sum of the two numbers:\" &lt;&lt;sum;\n   }\n   else if(input == \"Subtraction\"){\n        cout &lt;&lt; \"Enter Your First Number\\n\";\n        cin&gt;&gt;a;\n        cout &lt;&lt; \"Enter Your Second Number\\n\";\n        cin&gt;&gt;b;\n        int sub = a-b;\n        cout&lt;&lt; \"Here is the subtraction of the two numbers:\" &lt;&lt; sub;\n   }\n   else if(input == \"Multiplication\")\n   {\n        cout &lt;&lt; \"Enter Your First Number\\n\";\n        cin&gt;&gt;a;\n        cout &lt;&lt; \"Enter Your Second Number\\n\";\n        cin&gt;&gt;b;\n        int product = a*b;\n        cout&lt;&lt; \"Here is the product of the two numbers:\" &lt;&lt; product;\n   }\n   else if(input == \"Division\")\n   {\n       cout&lt;&lt;\"No Division Please.\";\n   }\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1438815202, "post_id": 31844086, "comment_id": 51609748, "body": "Probably has something to do with <code>getPlayersCards()</code>/<code>getDiscardPile()</code> returning <code>vector</code>s by value, but it&#39;s hard to say for sure without a complete example. Your code is not even valid because you&#39;re binding an rvalue to a non-const reference. I&#39;m guessing you compile using VisualStudio? Turn up the warning level."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1438815221, "post_id": 31844086, "comment_id": 51609759, "body": "<code>theTable.getPlayersCards()</code> is a temporary, so <code>theDeck.deal(theTable.getPlayersCards())</code> shouldn&#39;t even compile..."}, {"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1438815340, "post_id": 31844086, "comment_id": 51609789, "body": "You can write <code>deck.back()</code> instead of <code>deck[deck.size() - 1]</code>. You should make sure <code>deck.empty()</code> is false before doing that."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1438815865, "post_id": 31844086, "comment_id": 51609939, "body": "@Praetorian I do use visual studio, but what do you mean by rvalue to a non constant reference? Also what do you mean by warning level?"}], "answers": [{"comments": [{"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1438815796, "post_id": 31844141, "comment_id": 51609918, "body": "Thanks a ton. Had no idea."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 1, "last_activity_date": 1438815176, "creation_date": 1438815176, "answer_id": 31844141, "question_id": 31844086, "link": "https://stackoverflow.com/questions/31844086/c-passing-in-vector-by-reference-but-changes-still-not-being-saved/31844141#31844141", "title": "C++ Passing in Vector by Reference but changes still not being saved", "body": "<p>The result from <code>getPlayersCards()</code> is a copy of the cards. Not a reference. So when <code>deal</code> returns the copy of its argument gets destroyed.</p>\n"}, {"comments": [{"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1438815772, "post_id": 31844149, "comment_id": 51609909, "body": "That did it. Works perfectly now. Thank you guys so much. I had no idea return values worked like that."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1438815803, "post_id": 31844149, "comment_id": 51609923, "body": "@Hatefiend You should ask your instructor why he hasn&#39;t explained this basic concept to you."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438816840, "post_id": 31844149, "comment_id": 51610224, "body": "@JonathanPotter I&#39;m still extremely early on in my college classes. I&#39;ve only completed two so far. The most recent class was &#39;introduction to C&#39; and we stopped at &#39;pointers&#39;. I know the answer is going to be &#39;read a textbook&#39; but honestly I searched and searched on google and couldn&#39;t find anything about this."}], "tags": [], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "is_accepted": false, "score": 3, "last_activity_date": 1438815218, "creation_date": 1438815218, "answer_id": 31844149, "question_id": 31844086, "link": "https://stackoverflow.com/questions/31844086/c-passing-in-vector-by-reference-but-changes-still-not-being-saved/31844149#31844149", "title": "C++ Passing in Vector by Reference but changes still not being saved", "body": "<p>The problem is that <code>theTable.getPlayersCards()</code> is returning a copy of <code>vector&lt;Card&gt; playersCards</code> instead of a reference to it.</p>\n\n<p>Try changing this in <code>Table.cpp</code>: </p>\n\n<pre><code>vector&lt;Card&gt;&amp; Table::getPlayersCards()\n{\n  return playersCards;\n}\n\nvector&lt;Card&gt;&amp; Table::getDiscardPile()\n{\n  return discard;\n}\n</code></pre>\n\n<p>and this in <code>Table.h</code>:</p>\n\n<pre><code>vector&lt;Card&gt;&amp; getPlayersCards();\nvector&lt;Card&gt;&amp; getDiscardPile();\n</code></pre>\n"}], "owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438815231, "creation_date": 1438814862, "question_id": 31844086, "link": "https://stackoverflow.com/questions/31844086/c-passing-in-vector-by-reference-but-changes-still-not-being-saved", "title": "C++ Passing in Vector by Reference but changes still not being saved", "body": "<p>I made a project with a class called Card which has a name, suit, and value.</p>\n\n<p>I have a deck class which makes a vector of  which has 52 elements. </p>\n\n<p>I have a table class which handles many vectors: discard pile, players hand, etc.</p>\n\n<p>Then just my main cpp which runs it all.</p>\n\n<p><strong>Deck.h</strong></p>\n\n<pre><code>public:    \nDeck();\nvoid deal(vector&lt;Card&gt;&amp; pile); //Deals a card from the top \n//of the deck to any passed-in hand or pile. \n\nprivate:\nvector&lt;Card&gt; deck;\n</code></pre>\n\n<p><strong>Deck.cpp</strong></p>\n\n<pre><code>void Deck::deal(vector&lt;Card&gt;&amp; pile) //Deal a card to whichever pile on the table.\n{\n    pile.push_back(deck[deck.size() - 1]); //Add the card from the deck to the pile\n    deck.pop_back(); //Remove the card that we copied from      \n}\n</code></pre>\n\n<p><strong>Table.h</strong></p>\n\n<pre><code>public:    \nTable();\nvoid deal(vector&lt;Card&gt;&amp; pile); //Deals a card from the top \n//of the deck to any passed-in hand or pile. \nvector&lt;Card&gt; getPlayersCards();\n\nprivate:\nvector&lt;Card&gt; playersCards;\nvector&lt;Card&gt; discard;\n</code></pre>\n\n<p><strong>Table.cpp</strong></p>\n\n<pre><code>vector&lt;Card&gt; Table::getPlayersCards()\n{\n    return playersCards;\n}\n\nvector&lt;Card&gt; Table::getDiscardPile()\n{\n    return discard;\n}\n</code></pre>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>//VARIABLES\nDeck theDeck;\nTable theTable;\n\nint main()\n{\n    theDeck.deal(theTable.getPlayersCards()); //Attempt to deal a card\n    //out to the player's hand\n}\n</code></pre>\n\n<p>so here's the problem, I put some couts in the program and here's what is happening. Notice how it works perfectly once it's in the deal method but as soon as it goes back to my main cpp, it forgets all about ever having moved that card. However the main deck has 51 cards, meaning THAT worked, which makes sense because the variable deck was not passed in.</p>\n\n<p><a href=\"https://i.stack.imgur.com/h1gDC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h1gDC.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you guys can offer any help, I would be so appreciative. </p>\n"}, {"tags": ["c++", "hashtable", "valgrind"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1438814964, "post_id": 31844070, "comment_id": 51609669, "body": "The problem could equally well exist in the <code>insert</code> code-path.  Why don&#39;t you step through with a debugger to see what&#39;s going on?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1438815224, "post_id": 31844070, "comment_id": 51609761, "body": "Can you mark line 131?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1438815360, "post_id": 31844070, "comment_id": 51609794, "body": "And: Are all members of a linked list initialised in its constructors?"}, {"owner": {"reputation": 15, "user_id": 5162533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1072807262730782/picture?type=large", "display_name": "Victor Lazaro", "link": "https://stackoverflow.com/users/5162533/victor-lazaro"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1438827208, "post_id": 31844070, "comment_id": 51612679, "body": "@OliverCharlesworth , thank you so much for answering. So, the problem is that my debugger won&#39;t complain about it. It runs perfectly fine, valgrind is the one that accuses the issue, and in order for me to get full credit for this assignment, valgrind must be happy. I will check the insert code again, though."}, {"owner": {"reputation": 15, "user_id": 5162533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1072807262730782/picture?type=large", "display_name": "Victor Lazaro", "link": "https://stackoverflow.com/users/5162533/victor-lazaro"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1438827541, "post_id": 31844070, "comment_id": 51612762, "body": "@DanielJour, thank you for your help! I edited the question, marking line 131 and showing my constructors."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1438832118, "post_id": 31844070, "comment_id": 51613870, "body": "You may need to add<code>()</code> to your table allocation."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1438842276, "post_id": 31844070, "comment_id": 51617193, "body": "Glad the issue got solved. Did you check the tableSize init as well?"}], "answers": [{"tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": true, "score": 1, "last_activity_date": 1438859757, "last_edit_date": 1438859757, "creation_date": 1438830729, "answer_id": 31846198, "question_id": 31844070, "link": "https://stackoverflow.com/questions/31844070/hash-table-conditional-jump-or-move-depends-on-uninitialised-values/31846198#31846198", "title": "Hash Table - Conditional jump or move depends on uninitialised value(s)", "body": "<p>I'm going to take a lucky guess here: your <code>LinkedList</code> contains a <code>head</code> pointer and your <code>itemExists</code> function loads that pointer before checking if the <code>size</code> field is greater than zero.</p>\n\n<p>Something like</p>\n\n<pre><code>Node* node = head;\nfor (size_t i = 0; i &lt; size; i++)\n{\n    if (node-&gt;hash == ...)\n    ...\n    node = node-&gt;next;\n}\n</code></pre>\n\n<p>Looks innocent because the pointer isn't dereferenced if <code>size == 0</code>, but reading an uninitialized pointer is UB in itself.</p>\n"}, {"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 0, "last_activity_date": 1438838648, "creation_date": 1438838648, "answer_id": 31847425, "question_id": 31844070, "link": "https://stackoverflow.com/questions/31844070/hash-table-conditional-jump-or-move-depends-on-uninitialised-values/31847425#31847425", "title": "Hash Table - Conditional jump or move depends on uninitialised value(s)", "body": "<p>Oh my, that's hard to spot. If it isn't what @PaulGroke already suggested, then there's also a potential problem here:</p>\n\n<pre><code>HashSet()\n{\n    /* */int/* */ tableSize = 0; // HERE!\n    table = new LinkedList&lt;string&gt;[tableSize];\n}\n</code></pre>\n\n<p>From your <code>rehash</code> member function I'd guess that your hash set class has a member named <code>tableSize</code>. The above constructor has a local variable with the same name that <em>shadows</em> this member. As consequence, the member field is never initialised, and you have undefined behaviour. Removing the marked <code>int</code> should solve this.</p>\n\n<p>In general, you should use the initialiser list to write your constructors:</p>\n\n<pre><code>HashSet()\n : tableSize(0), \n   table(new LinkedList&lt;string&gt;[tableSize]); {\n}\n</code></pre>\n\n<p>Though it's debatable whether this should be done for allocations as I did above, but then you normally shouldn't use raw <code>new</code> or <code>new []</code> in code at all, better <code>std::shared_pointer</code>/<code>std::unique_pointer</code> or <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 5162533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1072807262730782/picture?type=large", "display_name": "Victor Lazaro", "link": "https://stackoverflow.com/users/5162533/victor-lazaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 31846198, "answer_count": 2, "score": 0, "last_activity_date": 1438859757, "creation_date": 1438814797, "last_edit_date": 1438827350, "question_id": 31844070, "link": "https://stackoverflow.com/questions/31844070/hash-table-conditional-jump-or-move-depends-on-uninitialised-values", "title": "Hash Table - Conditional jump or move depends on uninitialised value(s)", "body": "<p>I am coding a HashTable using a Doubly Linked list for one of my classes, but I am running into an error when I run valgrind. It says: Conditional jump or move depends on uninitialised value(s). When I run --track-origins=yes, it says:</p>\n\n<pre><code>==11453== Conditional jump or move depends on uninitialised value(s)\n==11453==    at 0x402904: LinkedList&lt;std::string&gt;::itemExists(std::string const&amp;) (LinkedList.h:89)\n==11453==    by 0x401FE6: HashSet&lt;std::string&gt;::find(std::string const&amp;) (HashSet.h:85)\n==11453==    by 0x401E42: HashSet&lt;std::string&gt;::add(std::string const&amp;) (HashSet.h:39)\n==11453==    by 0x4019D7: insert(std::string, std::basic_ifstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, std::string, HashSet&lt;std::string&gt;&amp;) (main.cpp:64)\n==11453==    by 0x4015B1: main (main.cpp:34)\n==11453==  Uninitialised value was created by a heap allocation\n==11453==    at 0x4C2B800: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==11453==    by 0x4024D8: HashSet&lt;std::string&gt;::rehash() (HashSet.h:131)\n==11453==    by 0x401E69: HashSet&lt;std::string&gt;::add(std::string const&amp;) (HashSet.h:45)\n==11453==    by 0x4019D7: insert(std::string, std::basic_ifstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, std::string, HashSet&lt;std::string&gt;&amp;) (main.cpp:64)\n==11453==    by 0x4015B1: main (main.cpp:34)\n</code></pre>\n\n<p>So I think the problem is in my rehash function, but I can't figure out where it is. Could you guys help me out? Here is my rehash function:</p>\n\n<pre><code>void rehash()\n{\n    int old_size = tableSize;\n    if (tableSize == itemsStored) {\n        tableSize = tableSize * 2 + 1;\n    }\n\n    else if (itemsStored &lt;= tableSize/2) {\n        tableSize = tableSize / 2;\n    }\n        LinkedList&lt;string&gt;* newTable = new LinkedList&lt;string&gt;[tableSize];    -------&gt; line 131\n        for (int i = 0; i &lt; old_size; ++i)\n        {\n            int table_size = 0;\n            table_size = table[i].getSize();\n            if(table_size != 0) {\n                for (int j = 0; j &lt; table_size; ++j) {\n                        unsigned index = hashFunction(table[i].getItem(j)) % tableSize;\n                        newTable[index].insert(newTable[index].getSize(), table-&gt;getItem(i));\n\n                }\n            }\n        }\n        LinkedList&lt;string&gt;* temp = table;\n        table = newTable;\n        delete [] temp;\n\n}\n</code></pre>\n\n<p>And this is my constructor for the Hash Set:</p>\n\n<pre><code>HashSet()\n{\n    int tableSize = 0;\n    table = new LinkedList&lt;string&gt;[tableSize];\n}\n</code></pre>\n\n<p>This is my constructor for the LinkedList:</p>\n\n<pre><code>LinkedList()\n{\n    size = 0;\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "ios", "xamarin", "static-libraries", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 722251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82cbcfea8a048f6f75e45f3b2d64cc9d?s=128&d=identicon&r=PG", "display_name": "staeryatz", "link": "https://stackoverflow.com/users/722251/staeryatz"}, "edited": false, "score": 0, "creation_date": 1438877273, "post_id": 31844849, "comment_id": 51640858, "body": "About the final build output, someone here has the same issue: <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/7645e8fc-c0c5-4935-9def-4bf00a825743/using-vs-2015-ios-static-library-output?forum=visualstudiogeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/vstudio/en-US/&hellip;</a>  Also note that the default platform for the static library is x86 (for simulator), so you want to open your configuration manager and change to ARM if you need to build for device."}], "tags": [], "owner": {"reputation": 429, "user_id": 722251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82cbcfea8a048f6f75e45f3b2d64cc9d?s=128&d=identicon&r=PG", "display_name": "staeryatz", "link": "https://stackoverflow.com/users/722251/staeryatz"}, "is_accepted": true, "score": 0, "last_activity_date": 1438820267, "creation_date": 1438820267, "answer_id": 31844849, "question_id": 31843957, "link": "https://stackoverflow.com/questions/31843957/vs2015-build-agent-request-has-failed-uri-not-set/31844849#31844849", "title": "VS2015 Build agent request has failed, URI not set", "body": "<p>I was wrong to think I can use a built-in VS2015 project template for Static Library (iOS), hit build and assuming my Xamarin build host is setup, that it would work. There is actually a couple of extra steps, you probably wouldn't know unless you were using a guide, because there are also remote VS tools which need to be installed on the build host (Mac). Here are two helpful guide sections in particular:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/library/dn707598(v=vs.140).aspx#InstallForiOS\" rel=\"nofollow\">Install tools for iOS</a></li>\n<li><a href=\"https://msdn.microsoft.com/library/dn707598(v=vs.140).aspx#ConfigureVS\" rel=\"nofollow\">Configure the remote agent for iOS in Visual Studio</a></li>\n</ul>\n\n<p>Even still there were a few quirks to get this running. Mostly due to the most recent version of npm will fail to install vcremote. Here's what I did:</p>\n\n<ul>\n<li><code>brew install node</code> assuming you have homebrew installed and want to install node this way</li>\n<li><code>npm install -g npm@2.6.0</code> forcing to use npm 2.6.0 in order to install vcremote</li>\n<li><code>npm install -g vcremote</code></li>\n</ul>\n\n<p>Then you should be able to run <code>vcremote</code> (taking note of host name and pin) and continue to setup your Visual Studio settings before building. The C++ static library for iOS will build and appear to complete on the Visual studio side. On the build host, under your project output inside your <code>remote root</code> path (set in VS options) your compiled library should exist there. One thing that pains me is that the final build output is not copied back to the output directory for the project on the Windows machine. If VS offers a way to reference this library to the application project and do some automatic resolution of binary dependencies then this won't be any kind of issue.</p>\n"}], "owner": {"reputation": 429, "user_id": 722251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82cbcfea8a048f6f75e45f3b2d64cc9d?s=128&d=identicon&r=PG", "display_name": "staeryatz", "link": "https://stackoverflow.com/users/722251/staeryatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 31844849, "answer_count": 1, "score": 0, "last_activity_date": 1438820267, "creation_date": 1438814145, "question_id": 31843957, "link": "https://stackoverflow.com/questions/31843957/vs2015-build-agent-request-has-failed-uri-not-set", "title": "VS2015 Build agent request has failed, URI not set", "body": "<p>I am a relatively long time Xamarin.iOS user, and normally I am able to use my Xamarin Build Host from Visual Studio 2012. I recently setup a new Windows 8.1 machine with VS2015 connected to my Xamarin account and the build host connection pairing seems to work fine, but as soon as I compile an (iOS) project from Visual Studio I get the following compile error:</p>\n\n<pre><code>Build agent request has failed, URI not set, please see the inner exception for details.\n</code></pre>\n\n<p>Hint: there is no inner exception.</p>\n\n<p>The Visual Studio solution I am using is just boilerplate stuff from using project templates, as my goal is to spike out the new C++ Cross Platform project support in VS2015. Here's what I've done:</p>\n\n<ol>\n<li>Create a new Project, Visual C#, Mobile Apps, Blank App (Xamarin.Forms Portable).</li>\n<li>In the generated solution, Add new project, Other Languages, Visual C++, Cross Platform, Static Library (iOS), named CppStaticIos.</li>\n<li>Attempt to build CppStaticIos, and the error will present itself.</li>\n<li>Attempting to build the .iOS version of the C# application will compile and run in the simulator on my build host.</li>\n</ol>\n\n<p>My Windows 8 Firewall seems to be allowing everything VS2015, and Xamarin Bonjour Service. I double-checked that both the host and client machines have the latest stable Xamarin updates installed.</p>\n"}, {"tags": ["c++", "qt", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 4688538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2757cff0bfe0b454db9d561e958cb794?s=128&d=identicon&r=PG&f=1", "display_name": "drewpts", "link": "https://stackoverflow.com/users/4688538/drewpts"}, "edited": false, "score": 0, "creation_date": 1438828388, "post_id": 31844893, "comment_id": 51612983, "body": "My thanks @Phil.     About your remark: I don&#39;t have qt installed through package manager. So even <code>whereis qmake</code> leads me to empty output."}, {"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "reply_to_user": {"reputation": 439, "user_id": 4688538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2757cff0bfe0b454db9d561e958cb794?s=128&d=identicon&r=PG&f=1", "display_name": "drewpts", "link": "https://stackoverflow.com/users/4688538/drewpts"}, "edited": false, "score": 1, "creation_date": 1438869558, "post_id": 31844893, "comment_id": 51634998, "body": "Qt does not need to be installed. You can have multiple versions of qt in many different locations. Unless you have stripped the file set to a minimum, you should have <code>bin&#47;qmake</code> somewhere. For qt4 just put that in your <code>PATH</code> and find_package should set the cmake variables for qt correctly. For Qt5, simply add <code>-DQt5_DIR</code> to your command line for your cmake configure step, and find_package should work."}], "tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 3, "last_activity_date": 1438829682, "last_edit_date": 1438829682, "creation_date": 1438820603, "answer_id": 31844893, "question_id": 31843689, "link": "https://stackoverflow.com/questions/31843689/cmake-doesnt-see-system-variable/31844893#31844893", "title": "CMake doesn&#39;t see system variable", "body": "<p>For checking environment variables I use <code>if (\"$ENV{QT_LIBS_DIR}\" STREQUAL \"\")</code> to see if the environment variable is defined. So your example becomes:</p>\n\n<pre><code>if (\"$ENV{QT_LIBS_DIR}\" STREQUAL \"\")\n  message(FATAL \"You need to have system-wide variable with path to Qt libs\")\n  set(QT_CMAKE_MODULES_FOUND FALSE)\nelseif()\n  set(QT_CMAKE_MODULES \"$ENV{QT_LIBS_DIR}/lib/cmake\" CACHE PATH \"CMake's modules which provided by Qt itself for Qt bindings\")\n  set(QT_CMAKE_MODULES_FOUND TRUE)\nendif()\n</code></pre>\n\n<p>But for what it is worth, I believe that <code>find_package</code> for qt gets the path for qt according to the qmake executable that it finds first in your path. This way you do not really need to use an environment variable. This applies to qt4; see <a href=\"https://forum.kde.org/viewtopic.php?f=217&amp;t=122342&amp;sid=a2cf3017287bd45dc376b1d8a5619bda#p317022\" rel=\"nofollow\">How specify Qt version/location?</a> for details.</p>\n\n<p>For QT5, the <a href=\"http://doc.qt.io/qt-5/cmake-manual.html\" rel=\"nofollow\">Qt5/CMake manual</a> says \"In order for find_package to be successful, Qt 5 must be found below the CMAKE_PREFIX_PATH, or the Qt5_DIR must be set in the CMake cache to the location of the Qt5WidgetsConfig.cmake file. The easiest way to use CMake is to set the CMAKE_PREFIX_PATH environment variable to the install prefix of Qt 5.\"</p>\n"}], "owner": {"reputation": 439, "user_id": 4688538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2757cff0bfe0b454db9d561e958cb794?s=128&d=identicon&r=PG&f=1", "display_name": "drewpts", "link": "https://stackoverflow.com/users/4688538/drewpts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438829682, "creation_date": 1438812526, "question_id": 31843689, "link": "https://stackoverflow.com/questions/31843689/cmake-doesnt-see-system-variable", "title": "CMake doesn&#39;t see system variable", "body": "<p>Why CMake doesn't see my system variable?</p>\n\n<pre><code>if (NOT DEFINED $ENV{QT_LIBS_DIR})\n  message(FATAL \"You need to have system-wide variable with path to Qt libs\")\n  set(QT_CMAKE_MODULES_FOUND FALSE)\nelseif(NOT DEFINED $ENV{QT_LIBS_DIR})\n  set(QT_CMAKE_MODULES \"$ENV{QT_LIBS_DIR}/lib/cmake\" CACHE PATH \"CMake's modules which provided by Qt itself for Qt bindings\")\n  set(QT_CMAKE_MODULES_FOUND TRUE)\nendif(NOT DEFINED $ENV{QT_LIBS_DIR})\n</code></pre>\n\n<p>I got fatal error. Please help me to investigate. Btw for:  </p>\n\n<pre><code>$ echo $QT_LIBS_DIR\n</code></pre>\n\n<p>output is: <em>/home/drew/Qt/5.5/gcc_64</em></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 2, "creation_date": 1438812817, "post_id": 31843683, "comment_id": 51608896, "body": "Are you sure auxfile.c is getting built at all? Can you add an error in that file just to be sure?"}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1438813052, "post_id": 31843683, "comment_id": 51608992, "body": "No, it&#39;s not. I added a random open curly brace { to auxfile.c, and the error message is the same. So my code isn&#39;t even seeing it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438816956, "post_id": 31843683, "comment_id": 51610255, "body": "You never compiled auxfile.c"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438813308, "post_id": 31843781, "comment_id": 51609098, "body": "The above will work better if you put a space character after the -o options."}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438813529, "post_id": 31843781, "comment_id": 51609166, "body": "Cool, Felix! Your commands totally work without any errors (as you probably knew would happen.) Unfortunately, my code is so minimized that I have no way of making the final executable do anything...but I&#39;ll see about that. Also, it&#39;ll take me some time to digest your instructions and apply them to the big program...but I think you&#39;ve solved my problem. Thanks a whole lot."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438813777, "post_id": 31843781, "comment_id": 51609258, "body": "@Jeff well, can&#39;t say anything about <i>that</i> here .. it&#39;s example code after all. Try this with a <i>real</i> project and you will see it works and you will get crazy and <i>then</i> explore the power of a <code>Makefile</code> ;)"}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438814063, "post_id": 31843781, "comment_id": 51609360, "body": "@Felix Okay, well it&#39;s a good start. By the way, I&#39;ve now gotten the final mainfile to print &quot;Hey.&quot; so I&#39;m well on my way. :) (I&#39;ll keep the possibility of Makefile in mind.) Thank you again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438814234, "post_id": 31843781, "comment_id": 51609421, "body": "@Jeff see my edit for a basic Makefile automating the build process."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438814344, "post_id": 31843781, "comment_id": 51609455, "body": "Sorry, my mistake. The gcc and g++ documentation say nothing about omitting the space between the -o switch and its filename argument, so I didn&#39;t realise this syntax actually worked."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438814585, "post_id": 31843781, "comment_id": 51609538, "body": "@evictorr doesn&#39;t have to be documented because it&#39;s a unix convention: one-letter options may be followed by the argument directly ;) nevermind."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438814888, "post_id": 31843781, "comment_id": 51609644, "body": "Yes, I just remembered that, it&#39;s handled by getopt. Thanks for the reminder."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1438814530, "last_edit_date": 1438814530, "creation_date": 1438813152, "answer_id": 31843781, "question_id": 31843683, "link": "https://stackoverflow.com/questions/31843683/undefined-reference-from-c-to-variables-functions-defined-in-c-file/31843781#31843781", "title": "Undefined reference from C++ to variables/functions defined in C file", "body": "<p>At the time of linking, all symbols (except those for dynamic linking, aka shared libraries) have to be defined. To create an object file with possibly unresolved symbols for later linking, there is the <code>-c</code> flag, that means <em>just compile, do not link</em>.</p>\n\n<p>So, the following would work:</p>\n\n<pre><code>g++ -c -omainfile.o mainfile.cpp\ngcc -c -oauxfile.o auxfile.c\ng++ -o mainfile mainfile.o auxfile.o\n</code></pre>\n\n<p>Only the last line actually invokes the linker and as you have both object files, all symbols are found.</p>\n\n<p>Just for completeness, in a real-world scenario you'd handle compiling and linking using <code>make</code>. Create a <code>Makefile</code> with the following contents:</p>\n\n<pre><code>OBJS:= mainfile.o auxfile.o\n\nall: mainfile\n\n# $@ means what to build (in this case \"mainfile\"), $^ is replaced by all\n# dependencies (here the contents of the variable OBJS)\nmainfile: $(OBJS)\n        g++ -o$@ $^\n\n# pattern for *.cpp -&gt; create a *.o file with same name using g++\n%.o: %.cpp\n        g++ -c -o$@ $&lt;\n\n# the same for *.c, but using gcc here\n%.o: %.c\n        gcc -c -o$@ $&lt;\n\nclean:\n        rm -f $(OBJS)\n\n# \"PHONY\" are targets, that are not actually the names of output files\n.PHONY: all clean\n</code></pre>\n\n<p>Then just type <code>make</code> and see the \"magic\" happening. Of course this is just for starters, no dependencies are tracked etc...</p>\n"}], "owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438814530, "creation_date": 1438812500, "question_id": 31843683, "link": "https://stackoverflow.com/questions/31843683/undefined-reference-from-c-to-variables-functions-defined-in-c-file", "title": "Undefined reference from C++ to variables/functions defined in C file", "body": "<p>I've been given a package of files (one .cpp, and some .c and .h) and want to make some modifications. But right now I'm just trying to get the original version to compile (in Linux).</p>\n\n<p>Here's a (really) minimal working example:</p>\n\n<p>mainfile.cpp    </p>\n\n<pre><code>extern \"C\"{\n#include \"auxfile.h\"\n}\n\nint main(int argc, char * argv[]){\ngetfoo(temperature);\nreturn 0;}\n</code></pre>\n\n<p>auxfile.h </p>\n\n<pre><code>#define PUBLIC\n#define PRIVATE static\nextern int temperature;\nint   getfoo(  int inputint);\n</code></pre>\n\n<p>auxfile.c</p>\n\n<pre><code>#include \"auxfile.h\"\nint temperature = 37;\nPUBLIC int getfoo(  int inputint){\nreturn 7;\n}\n</code></pre>\n\n<p>When I type</p>\n\n<pre><code>g++ mainfile.cpp\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>mainfile.cpp(.text+0x11): undefined reference to `temperature'\nmainfile.cpp(.text+0x18): undefined reference to `getfoo'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>For what it's worth, I've looked through numerous \"undefined reference\" questions and spent dozens of hours working on my own. The above code presents the essence of the problem. Any help would be massively appreciated. Thanks.</p>\n"}, {"tags": ["c++", "boost", "traits", "template-meta-programming", "c++03"], "comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1438815684, "post_id": 31843393, "comment_id": 51609886, "body": "I suspect that you&#39;re going to be more specific; some containers have &gt; 1 methods named <code>erase</code>. For example, <code>vector</code> has both <code>erase(iterator)</code> and <code>erase(iterator, iterator)</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1438818440, "post_id": 31843393, "comment_id": 51610645, "body": "How many containers will you meet before you upgrade to C++11?  10?  Hard code them.  Ifdef C++11 to do proper thing, maybe asserting they agree."}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1438848552, "post_id": 31843393, "comment_id": 51620687, "body": "I mean check vor &quot;void erase(iterator)&quot; vs &quot;iterator erase(iterator)&quot;. But I found a solution that works and will post it later today. It is some really nice piece of evil template trickery."}], "answers": [{"tags": [], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "is_accepted": true, "score": 0, "last_activity_date": 1438877667, "last_edit_date": 1495539841, "creation_date": 1438877667, "answer_id": 31860817, "question_id": 31843393, "link": "https://stackoverflow.com/questions/31843393/check-for-function-signature-also-for-inherited-functions/31860817#31860817", "title": "Check for function signature also for inherited functions", "body": "<p>The following works:</p>\n\n<pre><code>    /// \"Stores a type\"\n    template&lt;typename T&gt; struct Type2Type{\n        typedef T type;\n    };\n\n    /// Evil hackery to put an expression into a type\n    template&lt;typename T&gt;\n    Type2Type&lt;T&gt; operator,(T, Type2Type&lt;void&gt;);\n\n    template&lt;typename T&gt;\n    T declval();\n\n    template&lt;class T&gt;\n    struct EraseReturnsIterator\n    {\n        typedef typename T::iterator iterator;\n        typedef BOOST_TYPEOF_TPL((declval&lt;T&gt;().erase(declval&lt;iterator&gt;()), Type2Type&lt;void&gt;())) result;\n\n        static CONSTEXPR bool value = boost::is_same&lt;iterator, typename result::type&gt;::value;\n    };\n</code></pre>\n\n<p>Basicly we just call the function whose return type we need. If no function of this type ever returned void than BOOST_TYPEOF_TPL would already work. Unfortunately erase CAN return void which breaks the implementation as it tries to pass \"void&amp;\" somewhere down the stack.</p>\n\n<p>So to avoid the void (no pun intended) we put it in a type, that holds a type. To be able to do this for expressions, we overload the comma operator. This way result equals \"Type2Type\" which we can easily read. Done!</p>\n\n<p>Idea for the comma-overload: <a href=\"https://stackoverflow.com/a/5553460/1930508\">https://stackoverflow.com/a/5553460/1930508</a></p>\n"}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 31860817, "answer_count": 1, "score": 3, "last_activity_date": 1438877667, "creation_date": 1438811154, "last_edit_date": 1438812521, "question_id": 31843393, "link": "https://stackoverflow.com/questions/31843393/check-for-function-signature-also-for-inherited-functions", "title": "Check for function signature also for inherited functions", "body": "<p>I need to check, if a containers erase function returns the iterator. I'd normally check for the function signature via e.g. boost. But in case of a boost class (e.g. flat_set) erase is inherited and thus not found by the check. But I really need it. <a href=\"https://stackoverflow.com/questions/1966362/sfinae-to-check-for-inherited-member-functions\">SFINAE to check for inherited member functions</a> only shows a C++11 solution which I can't use yet.</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>    template &lt;typename T&gt; \n    class has_member_func_erase_it_constit\n    { \n        typedef typename T::iterator iterator;\n        typedef typename T::const_iterator const_iterator;\n        typedef BOOST_TYPEOF_TPL(&amp;T::erase) eraseType;\n\n        typedef typename boost::function_types::result_type&lt;eraseType&gt;::type result;\n    public: \n        static const bool value = boost::is_same&lt;iterator, result&gt;::value; \n    };\n\n    template&lt;class T&gt;\n    struct EraseReturnsIterator\n    {\n        static CONSTEXPR bool value = has_member_func_erase_it_constit&lt;T&gt;::value;\n    };\n</code></pre>\n\n<p>But it fails since erase is overloaded. I'd probably need decltype or something like that to check the return type from a compile-time invocation of erase with const_iterator, but I can't find one.</p>\n\n<p>How is this possible in pre C++11?</p>\n\n<p>This does also not work if there is an erase function returning void:</p>\n\n<pre><code>    template &lt;typename T&gt; \n    class has_member_func_erase_it\n    { \n        typedef typename T::iterator iterator;\n        typedef typename T::const_iterator const_iterator;\n\n        typedef char yes[1];\n        typedef char no [2];\n\n        static T makeT();\n        static iterator makeIt();\n\n        typedef BOOST_TYPEOF_TPL(makeT().erase(makeIt())) result;\n\n    public: \n        static const bool value = boost::is_same&lt;iterator, result&gt;::value; \n    };\n</code></pre>\n"}, {"tags": ["c++", "sse", "simd", "avx"], "comments": [{"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1438811026, "post_id": 31843345, "comment_id": 51608223, "body": "When you say &quot;load&quot; I assume you mean by copying an existing (register) variable, right? Not from memory?"}, {"owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1438811219, "post_id": 31843345, "comment_id": 51608318, "body": "@Mehrdad Well, mostly I mean from memory, unless it happens to be in the register already. For the precompute option, I mean set a __m128 somewhere in your code, and then reference it wherever you need it, instead of generating the same vector with _mm_set1_ps. That&#39;s the simplest explanation."}, {"owner": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "edited": false, "score": 2, "creation_date": 1438811660, "post_id": 31843345, "comment_id": 51608471, "body": "It&#39;s tricky to say outright since <code>mm_set1_ps</code> doesn&#39;t correspond to any  single instruction. It might even translate to what you&#39;re suggesting doing. Why not check the assembly and see? Also, since you tagged your post with AVX you might like to know there&#39;s a newer intrinsic that corresponds to a single instruction: <code>_mm_broadcast_ss</code>"}, {"owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "reply_to_user": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "edited": false, "score": 0, "creation_date": 1438811822, "post_id": 31843345, "comment_id": 51608536, "body": "@hayesti I did not know about that instruction. In the case of having avx available, that instruction is always favorable right?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "edited": false, "score": 2, "creation_date": 1438813595, "post_id": 31843345, "comment_id": 51609192, "body": "@hayesti: Just use <code>set1</code> in most cases.  The compiler will choose the best way to broadcast.  (Note that AVX1 only provides the memory-source <code>vbroadcastps</code> (uses the load port only).  AVX2 is requires for <code>vbroadcastps ymm, xmm</code> (uses the shuffle port))."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1438814071, "post_id": 31843345, "comment_id": 51609365, "body": "set1 usually compiles to 1 or 2 instructions depending on the situation and whether you have AVX2. It&#39;s fairly cheap."}], "answers": [{"tags": [], "owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "is_accepted": false, "score": 3, "last_activity_date": 1438811489, "creation_date": 1438811489, "answer_id": 31843464, "question_id": 31843345, "link": "https://stackoverflow.com/questions/31843345/for-for-an-sse-vector-that-has-all-the-same-components-generate-on-the-fly-or-p/31843464#31843464", "title": "For for an SSE vector that has all the same components, generate on the fly or precompute?", "body": "<p>I believe it's generally best to factor out your SSE vector from your code (e.g. loop), and use it whenever you need to, <strong>assuming</strong> you take care not to accidentally force it into memory. (For example, if you take its address or pass it by reference to another function, then it may be forced into memory and you may get odd behavior.)<br>\nThe idea is that <em>usually</em> it is best to avoid transferring values into and out of SSE registers, and if it happens that this isn't the case in your particular situation, the compiler already knows how the value was constructed, and could <a href=\"https://en.wikipedia.org/wiki/Rematerialization\" rel=\"nofollow\">rematerialize</a> it if need be. I think this is a lot easier than <a href=\"https://en.wikipedia.org/wiki/Loop-invariant_code_motion\" rel=\"nofollow\">loop-invariant code motion</a> in general, which is the reverse optimization (i.e. where the compiler factors it out for you) and which requires the compiler to prove that the code is indeed loop-invariant.</p>\n"}, {"tags": [], "owner": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "is_accepted": true, "score": 2, "last_activity_date": 1438814692, "last_edit_date": 1438814692, "creation_date": 1438814083, "answer_id": 31843944, "question_id": 31843345, "link": "https://stackoverflow.com/questions/31843345/for-for-an-sse-vector-that-has-all-the-same-components-generate-on-the-fly-or-p/31843944#31843944", "title": "For for an SSE vector that has all the same components, generate on the fly or precompute?", "body": "<p>Naturally it's going to depend a lot on your code, but I've implemented two simple functions using both approaches. <a href=\"http://goo.gl/hLOnl5\" rel=\"nofollow\">See code</a></p>\n\n<pre><code>__m128 calc_set1(float num1, float num2)\n{\n  __m128 num1_4 = _mm_set1_ps(num1);\n  __m128 num2_4 = _mm_set1_ps(num2);\n  __m128 result4 = _mm_mul_ps(num1_4, num2_4);\n\n  return result4;\n}\n\n__m128 calc_mov(float* num1_4_addr,  float* num2_4_addr)\n{\n   __m128 num1_4 = _mm_load_ps(num1_4_addr);\n  __m128 num2_4 = _mm_load_ps(num2_4_addr);\n  __m128 result4 = _mm_mul_ps(num1_4, num2_4);\n\n  return result4;\n}\n</code></pre>\n\n<p>and assembly</p>\n\n<pre><code>calc_set1(float, float):\n    shufps  $0, %xmm0, %xmm0\n    shufps  $0, %xmm1, %xmm1\n    mulps   %xmm1, %xmm0\n    ret\ncalc_mov(float*, float*):\n    movaps  (%rdi), %xmm0\n    mulps   (%rsi), %xmm0\n    ret\n</code></pre>\n\n<p>You can see that the <code>calc_mov()</code> does as what you'd expect and the <code>calc_set1()</code> uses a single shuffle instruction.</p>\n\n<p>A <code>movps</code> instruction can take approximately four cycles for the address generation + more if the load port of the L1 cache is busy + more in the rare event of a cache miss.</p>\n\n<p><code>shufps</code> will take a single cycle on any of the recent Intel microarchitectures. I believe this is true whether it's for SSE128 or AVX256. Therefore I would suggest using the <code>mm_set1_ps</code> approach.</p>\n\n<p>Of course, a shuffle instruction assumes the float is already in an SSE/AVX register. In the event that you're loading it from memory, then the broadcast will be better since it will capture the best of <code>movps</code> and <code>shufps</code> in a single instruction.</p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 3, "last_activity_date": 1438814511, "last_edit_date": 1495540680, "creation_date": 1438814511, "answer_id": 31844022, "question_id": 31843345, "link": "https://stackoverflow.com/questions/31843345/for-for-an-sse-vector-that-has-all-the-same-components-generate-on-the-fly-or-p/31844022#31844022", "title": "For for an SSE vector that has all the same components, generate on the fly or precompute?", "body": "<p>I was playing around with broadcasts for an answer to <a href=\"https://stackoverflow.com/questions/10609630/fastest-way-to-fill-a-vector-sse2-with-a-certain-value-templates-friendly/31803624#31803624\">fastest way to fill a vector (SSE2) with a certain value. Templates friendly</a>.  Have a look some some asm dumps of broadcasts.</p>\n\n<p><code>set1</code> every time it's used shouldn't make much difference, as long as the compiler knows the value to be broadcast doesn't alias anything.  (If the compiler can't assume it doesn't alias, it will have to redo the broadcast after every write to an array or pointer that might alias.)</p>\n\n<p>It's usually good style to store the <code>set1</code> result in a named variable.  If the compiler runs out of vector registers, it might spill the vector to the stack, and reload later, or it might re-broadcast.  I'm not sure if coding style will influence this decision.</p>\n\n<p>I wouldn't use a <code>static const</code> variable to cache it between calls to a function.  (That can lead to the compiler generating code to check if the variable was already initialized every call.)</p>\n\n<p>Broadcasts of compile-time constants sometimes result in compile-time broadcasts, so your code just has 16B of const data sitting in memory.</p>\n\n<p>AVX1 broadcasts of a value already in a register is the worst-case.  AVX1 only provides the memory-source <code>vbroadcastps</code> (uses the load port only).  A broadcast takes a <code>shufps / vinsertf128</code>.</p>\n\n<p>AVX2 is required for <code>vbroadcastps ymm, xmm</code> (uses the shuffle port)).</p>\n"}], "owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 31843944, "answer_count": 3, "score": 6, "last_activity_date": 1438814692, "creation_date": 1438810935, "last_edit_date": 1438811685, "question_id": 31843345, "link": "https://stackoverflow.com/questions/31843345/for-for-an-sse-vector-that-has-all-the-same-components-generate-on-the-fly-or-p", "title": "For for an SSE vector that has all the same components, generate on the fly or precompute?", "body": "<p>When I need to do an vector operation that has an operand that is just a float broadcasted to every component, should I precompute the <code>__m256</code> or <code>__m128</code>, and load it when I need it, or broadcast the float to the register using <code>_mm_set1_ps</code> every time I need the vector? </p>\n\n<p>I have been precomputing the vectors that are very important and highly used and generating on the fly the ones that are less important. But am I really gaining any speed with precomputing? Is it worth the trouble?</p>\n\n<p>Is the <code>_mm_set1_ps</code>  implemented with a single instruction? That might answer my question.</p>\n"}, {"tags": ["c++", "multithreading", "atomic", "volatile", "memory-fences"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438814366, "post_id": 31843254, "comment_id": 51609463, "body": "One is undefined behavior (assuming no external synchronization), the other isn&#39;t."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1544408113, "post_id": 31843254, "comment_id": 94252542, "body": "By definition volatile operations cannot be optimized, but atomic operations sometimes can be."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1544409063, "post_id": 31843254, "comment_id": 94252700, "body": "@T.C. Behavior that&#39;s defined by the ABI and CPU."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1544410576, "post_id": 31843254, "comment_id": 94252959, "body": "&quot;<i>By definition volatile operations cannot be optimized</i>&quot; Except they are by almost all modern platforms. For example, reads and writes to and from memory are done to and from cache instead which is an optimization. They are re-ordered (between cache and memory) on many platforms which is, again, an optimization."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545503145, "post_id": 31843254, "comment_id": 94642016, "body": "@DavidSchwartz They cannot be optimized away by the compiler. They are executed as written in the program. You can check that by pausing the program and reading memory, from the POV of the program (from the CPU). The POV of the CPU is the correct one, the POV of the RAM is not. You can use <code>ptrace</code> or the local equivalent to do that."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1545503310, "post_id": 31843254, "comment_id": 94642045, "body": "@curiousguy Are you claiming this is required by some standard? Or are you saying this is what happens to be the case on platforms you have experience with? If the former, what is the evidence of this? What standard? If the latter, it&#39;s not &quot;by definition&quot;, it&#39;s just what some platforms happen to do because that&#39;s what works best on them. (I&#39;ve never seen any standard that says the compiler can&#39;t optimize something but the CPU can. How weird would it be to distinguish since the standard specifies what the compiler commands the CPU to do.)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545503399, "post_id": 31843254, "comment_id": 94642068, "body": "@DavidSchwartz Yes the definition of <code>volatile</code> is what I just described. There is no conceivable way this wouldn&#39;t be the case. The cache is a transparent optimization so of course it doesn&#39;t change anything here. The correct POV is CPU POV."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1545503470, "post_id": 31843254, "comment_id": 94642082, "body": "@curiousguy The definition of <code>volatile</code> is that the compiler can&#39;t reorder them but the CPU can? The compiler&#39;s job is to tell the CPU what to do. There is no way a language standard could prohibit the compiler from doing something but allow the compiler to allow the CPU to do it. That&#39;s not even coherent -- all the compiler does is tell the CPU what to do and what not to do. (Your statement that the correct POV is the CPU POV may be what you&#39;ve seen on some systems. But it&#39;s not the definition of anything nor required by any standard.)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545503662, "post_id": 31843254, "comment_id": 94642135, "body": "@DavidSchwartz Exactly. The CPU never reorders stuff in a way that break <code>volatile</code> semantic."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1545503980, "post_id": 31843254, "comment_id": 94642223, "body": "@curiousguy Anything can be optimized so long as its semantics aren&#39;t violated and can&#39;t be optimized in a way that violates its semantics. Lots of optimizations are possible on <code>volatile</code> without violating its semantics, and those optimizations are made. So &quot;<i>By definition volatile operations cannot be optimized</i>&quot; is misleading and false. That was my original point. (Also, the CPU/compiler distinction is misleading and false too. All compilers do is tell CPUs what to do. To say the compiler can&#39;t do something but the CPU can is bizarre.)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545504308, "post_id": 31843254, "comment_id": 94642287, "body": "@DavidSchwartz It isn&#39;t misleading not false. Volatile operations are only guaranteed to be visible from <code>ptrace</code> POV or equivalent. You mentioned order of changes of RAM but RAM isn&#39;t the place where you can observe the value of volatile objects. The compiler must emit exactly load and store as prescribed by volatile variable operations; the CPU then preserve the order of these operations. From the POV of that CPU."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1545504725, "post_id": 31843254, "comment_id": 94642371, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185660/discussion-between-david-schwartz-and-curiousguy\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1459, "user_id": 426314, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8f0d07eaea5d790dfc67df7b09130bb?s=128&d=identicon&r=PG", "display_name": "kiv", "link": "https://stackoverflow.com/users/426314/kiv"}, "edited": false, "score": 0, "creation_date": 1438830662, "post_id": 31845333, "comment_id": 51613569, "body": "Ah, yeah - I actually specified atomic_uint thinking that a write to an unsigned int would always be atomic, but obviously that&#39;s architecture-dependent. Thanks for the reminder! :)  I&#39;m specifically more interested in the read-after-write consistency guarantees of both approaches. I&#39;ll edit my post to reflect that. Thanks!"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1576549424, "post_id": 31845333, "comment_id": 104927258, "body": "A volatile read is an observable of the execution: it must be really perform as written in the source code. It means that <i>if</i> the CPU provides an atomic way to do, the compiler <i>should</i> use it. All CPU that I heard of provide a way to read and write an unsigned int atomically."}, {"owner": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588714543, "post_id": 31845333, "comment_id": 109004940, "body": "@curiousguy No, volatile does not give you atomicity, and should not be relied upon to do so. The correct solution is to use std::atomic&lt;T&gt; , see <a href=\"https://stackoverflow.com/a/2485177/\">stackoverflow.com/a/2485177</a> , <a href=\"https://web.archive.org/web/20190219170904/https://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming/\" rel=\"nofollow noreferrer\">web.archive.org/web/20190219170904/https://software.intel.co&zwnj;&#8203;m/&hellip;</a>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "edited": false, "score": 0, "creation_date": 1588722584, "post_id": 31845333, "comment_id": 109007484, "body": "@MaxBarraclough &quot;<i>No</i>&quot; implies you disagree w/ a statement I made. I don&#39;t see which: 1)a) What words written implied that &quot;volatile does not give you atomicity&quot;? b) What operation that is naturally atomic when performed in the most obvious and efficient way on a CPU, is not atomic when performed as a volatile operation in C/C++? 2)a) What words written implied that volatile use is a good idea for MT programming in C/C++? b) If you have <code>atomic</code> support in your compiler (or some equiv library), why bother w/ <code>volatile</code>?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588722749, "post_id": 31845333, "comment_id": 109007536, "body": "&quot;<i>Hans Boehm points out that there are only three portable uses for volatile.</i>&quot; If he wrote that, that isn&#39;t the brightest thing he wrote, as it&#39;s patently wrong, as I explained many times. &quot;<i>&quot;Declaring your variables volatile will have no useful effect, and will simply cause your code to run a *lot* slower when you turn on optimisation in your compiler.&quot;</i>&quot; Compared to what, operations on atomics? LOL, that&#39;s patently wrong. Slower is always meaningless when you don&#39;t say what is being compared; lack of clear code to code comparison makes the statement silly."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588722921, "post_id": 31845333, "comment_id": 109007583, "body": "&quot;<i>A volatile read or write of a 32-bit int is atomic on most modern hardware, but volatile has nothing to do with it</i>&quot; LOL, how does that contradict the comment above, which you tried to refute by citing that source? It almost confirms what I wrote, except the &quot;almost&quot; is not needed. If you think not all &quot;modern hardware&quot; make 32-bit int reads or writes atomic, please cite one exception. By qualifying his statement with &quot;most&quot; when the correct word is all, the writer doesn&#39;t show a good grasp on HW."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588723141, "post_id": 31845333, "comment_id": 109007648, "body": "&quot;<i>a volatile read or write of a 129-bit structure is not going to be atomic</i>&quot; Again that exactly goes on the direction of what I explained: only operations on scalar types can be used. Not on composite types. Nowhere did I mention using a volatile qualified composite type. Later in your own reference: &quot;<i>Even if the compiler does not reorder the references,</i>&quot; That&#39;s exactly what I wrote: <b>w/ a volatile access, the compiler must produce asm code that exactly match source code.</b> That&#39;s what I asserted, no more no less. I&#39;m in 100% agreement with that part of your own reference."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588723535, "post_id": 31845333, "comment_id": 109007753, "body": "I&#39;m sure there are many programmers who 1) have not taken any course in MT programming; 2) want to write their own MT primitives to avoid the cost of mutex or sem synchronization; 3) feel that compiler optimizations can defeat their home made primitives. Then they might randomly sprinkle their code w/ volatile hoping to discourage the compiler from optimizing their code. Just don&#39;t do that. It isn&#39;t even MT or volatile specific: that approach to programming by ppl who don&#39;t understand the job occurs when ppl sprinkle their code w/ <code>shared_ptr</code> because they have no resource ownership design."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588723773, "post_id": 31845333, "comment_id": 109007823, "body": "And finally: &quot;<i>Hans Boehm points out that there are only three portable uses for volatile. I&#39;ll summarize them here:</i>&quot; ... &quot;<i>memory that is modified by an external agent or appears to be because of a screwy memory mapping</i>&quot; How is another concurrently running thread (say on another CPU) <b>not</b> &quot;an external agent&quot; from the POV of the compiler? It fits exactly. The source <b>you</b> referenced proves me right. Even the title does: the author took care to qualify the claim with <b>almost</b>. &quot;Volatile: Almost Useless for Multi-Threaded Programming&quot; How you could imagine that would PROVE me wrong?"}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588763436, "post_id": 31845333, "comment_id": 109021805, "body": "@curiousguy <code>volatile</code> and atomic operations are two completely distinct concepts that only happen to be often useful in combination. <code>volatile</code> just forces memory access (=disallows optimizing it away) and atomic just forces a memory access that may or may not happen to be atomic (in case it&#39;s not optimized away)."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588764478, "post_id": 31845333, "comment_id": 109022359, "body": "@PaulGroke In fact volatile guarantees that you get the guarantees of the underlying arch in the high level C/C++ loads/stores. If the CPU guarantees atomicity, you get that. It&#39;s rarely useful alone, but still, it shouldn&#39;t be vilified. Disallowing optimization is sometimes exactly what you want. Most of the time, it isn&#39;t, and you should use atomics. Atomics are almost never optimized, but might be in the future."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1588766091, "post_id": 31845333, "comment_id": 109023259, "body": "@curiousguy No, it doesn&#39;t <i>guarantee</i> that at all, that&#39;s the whole point. It <i>gets</i> you atomicity in many cases, but that&#39;s no <i>guarantee</i>. Also it&#39;s entirely non-trivial when &quot;the CPU guarantees&quot; atomicity. E.g. 64 bit accesses on 32 bit x86: the CPUs <i>has</i> instructions to make those atomic (without expensive memory barriers), but <code>volatile</code> will not result in atomic accesses. See <a href=\"https://godbolt.org/z/mhbaRr\" rel=\"nofollow noreferrer\">godbolt.org/z/mhbaRr</a> And since using relaxed atomic loads/stores has no performance penalty with modern compilers, there&#39;s simply no point in using the wrong tool here."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1588767342, "post_id": 31845333, "comment_id": 109024055, "body": "ps: And if one really needs a volatile, relaxed atomic load/store, then one should simply use one. The standard library allows for <code>volatile std::atomic</code>s."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588770331, "post_id": 31845333, "comment_id": 109025950, "body": "@PaulGroke Those atomic instr are not used by default by the compiler when they are not the most efficient choice. But when a single instr is atomic and efficient, for a scalar type, the compiler will never split the operation and write two half separatly."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588770847, "post_id": 31845333, "comment_id": 109026251, "body": "@curiousguy I know. But I&#39;m trying to make you see that this is <i>in no way a guarantee</i>. Calling this a <i>guarantee</i> is just plain <i>wrong</i>. If you disagree, please link/refer to the place where this guarantee is given. And even if there was such a guarantee, a guarantee that is platform dependent and dependent on what the compiler considers to be efficient - that wouldn&#39;t be a very good guarantee. And depending on such a (non-existent) bad guarantee makes no sense at all, if there are tools like true atomics that can be used instead - without any penalty."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588771895, "post_id": 31845333, "comment_id": 109026952, "body": "@curiousguy BTW: What would you expect the outcome to be if you changed the type of the variable to <code>double</code>. Same structure as in my example, again x86 32 bit on a common POSIX system (e.g. Linux). The CPU has an instruction to load a <code>double</code> atomically, it&#39;s even the same instruction that is being emitted for the volatile load. So will the volatile load be atomic? No, it won&#39;t. Because you&#39;re hit by the same strange alignment issue where a double can be placed on an address that&#39;s not sufficiently aligned. See now why this &quot;guarantee&quot; that you are trying to invent isn&#39;t worth much?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588777322, "post_id": 31845333, "comment_id": 109030640, "body": "@PaulGroke I think I made myself clear. The guarantee w/ volatile load/store is that you get the exact guarantees of the scalar operation on the given CPU. All practically used systems guarantee atomic load/stores on things like <code>int</code> and object pointers, and anything word sized and naturally aligned. So of course it&#39;s &quot;arch dependent&quot;, but it&#39;s practically portable. The &quot;place&quot; the guarantee is given is in the CPU doc. Now I could return the pointless questions to you. Where is the behavior of threads and atomics defined in C++? Nowhere. So don&#39;t go there!"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588777387, "post_id": 31845333, "comment_id": 109030679, "body": "@PaulGroke &quot;<i>the same strange alignment issue where a double can be placed on an address that&#39;s not sufficiently aligned</i>&quot; I have no idea what &quot;issue&quot; you have seen. Which compiler misaligned your variables?"}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588780608, "post_id": 31845333, "comment_id": 109032715, "body": "@curiousguy Every compiler that wants to be compatible with Linux&#39; x86 32 bit ABI. Check the godbolt link that I provided earlier and look at the disassembly of the &quot;offsetof&quot; functions. Or the simpler example here <a href=\"https://godbolt.org/z/sGSpKG\" rel=\"nofollow noreferrer\">godbolt.org/z/sGSpKG</a> The issue is that while <code>__alignof(long long)</code> is 8, <code>__alignof(struct_that_contains_long_long)</code> is 4. And the same with <code>double</code>. If you use <code>std::atomic&lt;long long&gt;</code> instead the issue disappears."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588781086, "post_id": 31845333, "comment_id": 109032981, "body": "@curiousguy The behavior of threads and atomics is defined in the C++ standard since C++11. And for C in the C standard since C11. And since those are the <i>only</i> things that count when talking about the C++ or C memory model..."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588818732, "post_id": 31845333, "comment_id": 109048726, "body": "@PaulGroke Then explain that MT semantic to me. When are programs allowed to progress non sequentially? Can any program be proven not to have UB? I have asked these as standalone Q, but those were closed, as they were too non PC for that site where you can&#39;t really criticize a std."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588849607, "post_id": 31845333, "comment_id": 109061109, "body": "@curiousguy If you want to full picture you have to read the standard yourself - which may take you weeks (I&#39;m not implying your stupid, just that the standard is very hard to read with its language and all the different rules interacting in often non-trivial ways etc.) Aside from that no, not every program can be shown to have UB. There are some  simple (in comparison) rules that one can follow that are good for 99% of all cases."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588854884, "post_id": 31845333, "comment_id": 109063984, "body": "@PaulGroke The standard is easy to read (on that matter) because <b>it says exactly nothing about what is sequential and what isn&#39;t</b>. Compare w/ the abject complexity of the Java spec about possible reordering and inevitable stores, which apparently common runtime compilers don&#39;t even implement and that are not even reasonable expectations according to experts. The way the C++ std gets away w/ not defining anything re: threads is that most ppl believe it&#39;s very complicated and give up. That&#39;s how they get away w/ essentially a language definition scam."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1588873895, "post_id": 31845333, "comment_id": 109075493, "body": "@curiousguy I&#39;m sorry but this is getting ridiculous. Read &quot;4.7 Multi-threaded execution&quot; (+ all referenced locations like section 32) of n4659 (which is the final working draft for C++17). Or the equivalent sections of another C++ standard &gt;= C++11."}], "tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": false, "score": 3, "last_activity_date": 1438824242, "creation_date": 1438824242, "answer_id": 31845333, "question_id": 31843254, "link": "https://stackoverflow.com/questions/31843254/memory-order-relaxed-load-vs-volatile-load/31845333#31845333", "title": "memory_order_relaxed load vs volatile load", "body": "<p>The volatile read isn't guaranteed to be atomic. That means you could read a value that was never written to the variable (and also could never be written by any part of your program). E.g. if your application only ever writes <code>0xAAAAAAAA</code> or <code>0xBBBBBBBB</code> to a variable, the volatile read could yield <code>0xAAAABBBB</code>. Or really anything else, since the standard doesn't specify behavior for when volatile reads and writes are appearing in different threads without other means of synchronization.</p>\n\n<p>I don't know if the standard says it's UB or implementation defined though. I can only say that there are implementations (e.g. MSVC 2005) that define behavior for unsynchronized volatile reads/writes as an extension.</p>\n"}, {"tags": [], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1544409404, "creation_date": 1544409404, "answer_id": 53698786, "question_id": 31843254, "link": "https://stackoverflow.com/questions/31843254/memory-order-relaxed-load-vs-volatile-load/53698786#53698786", "title": "memory_order_relaxed load vs volatile load", "body": "<p>The use of <code>memory_order_relaxed</code> essentially gives a well behaved volatile variable for the purpose of inter-thread communication:</p>\n\n<ul>\n<li>volatile is ultimately specified in term of ABI (Application Binary Interface), it's an external interface; volatiles are interfaces with the external world: <strong>an access to such object is part of the observable behavior and cannot ever be optimized away</strong>;</li>\n<li>atomics are well specified purely in term of internal semantics; the representation of objects isn't part of the specification; <strong>an access to such object is part of the abstract machine and can sometimes be optimized away, or reasoned with internally</strong> (by the compiler, in term of C/C++ semantics).</li>\n</ul>\n"}], "owner": {"reputation": 1459, "user_id": 426314, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8f0d07eaea5d790dfc67df7b09130bb?s=128&d=identicon&r=PG", "display_name": "kiv", "link": "https://stackoverflow.com/users/426314/kiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1544409404, "creation_date": 1438810517, "last_edit_date": 1438833213, "question_id": 31843254, "link": "https://stackoverflow.com/questions/31843254/memory-order-relaxed-load-vs-volatile-load", "title": "memory_order_relaxed load vs volatile load", "body": "<p>What is the difference between reading the value of an <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow\"><code>atomic_uint</code></a> with memory_order_relaxed, and reading the value of a <code>volatile unsigned int</code> (assuming the volatile operations are atomic)?</p>\n\n<p>Specifically, let's define:</p>\n\n<p><strong>Solution 1</strong></p>\n\n<ol>\n<li>The \"writer\" thread writes to an <code>atomic_uint</code> (with any memory order qualifier, from memory_order_relaxed to memory_order_seq_cst)</li>\n<li>The \"reader\" thread does an atomic relaxed read on the same <code>atomic_uint</code></li>\n</ol>\n\n<p><strong>Solution 2</strong></p>\n\n<ol>\n<li>The \"writer\" thread writes to a <code>volatile unsigned int</code></li>\n<li>The \"reader\" thread reads that value</li>\n</ol>\n\n<p>As-is, I know that both cases do not offer any guarantees regarding the ability of the reader to read the value written by the writer. What I'm trying to understand is the difference between the volatile read, and the relaxed atomic read. What does one provide that the other doesn't, when considering read-after-write consistency?</p>\n\n<p>The only difference I see is:</p>\n\n<ul>\n<li>volatile operations cannot be re-ordered between them, while the atomic load can be re-ordered with other atomic operations</li>\n</ul>\n\n<p>Is there something else?</p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1438810571, "post_id": 31843229, "comment_id": 51608007, "body": "<code>f-&gt;x</code> is correct but <code>f</code> isn&#39;t managing a pointer when you try accessing it"}], "answers": [{"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 5, "last_activity_date": 1438868956, "last_edit_date": 1438868956, "creation_date": 1438810715, "answer_id": 31843300, "question_id": 31843229, "link": "https://stackoverflow.com/questions/31843229/how-to-access-instance-member-variables-via-stdshared-ptr/31843300#31843300", "title": "How to access instance member variables via std::shared_ptr?", "body": "<p>You need to use:</p>\n\n<pre><code>std::shared_ptr&lt;Test&gt; f = std::make_shared&lt;Test&gt;();\n</code></pre>\n\n<p>Then you can access <code>f-&gt;x</code>. If you have C++11, you can remove some redundancy with the <code>auto</code> keyword and use:</p>\n\n<pre><code>auto f = std::make_shared&lt;Test&gt;();\n</code></pre>\n\n<blockquote>\n  <p>Note that as a general rule, std::make_shared() is \"better\" than using <code>new</code> directly. <code>make_shared</code> allocates an instance of Test and the reference count needed for the shared_ptr in one memory allocation; using <code>new</code> means there will be two memory allocations--one for the new Test instance and one for the reference count used inside the <code>shared_ptr</code>. As with any generalization, there are times when <code>make_shared</code> will not work (e.g., when the class uses a custom allocator), but for this simple case, I think using make_shared is more helpful.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1438810943, "post_id": 31843322, "comment_id": 51608177, "body": "This is a different solution than the current top answer.  Is it better?"}, {"owner": {"reputation": 249, "user_id": 1635591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ca5dc8daf22479c2b34d786c5d52f64?s=128&d=identicon&r=PG", "display_name": "agnor", "link": "https://stackoverflow.com/users/1635591/agnor"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1438811218, "post_id": 31843322, "comment_id": 51608317, "body": "No it is the same. make_shared is added in C++11 standard as a helper for instantiating shared data."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1438811266, "post_id": 31843322, "comment_id": 51608340, "body": "@DrewDormann Well, at least this one mentions that the shared data has to be initialized. The answer you refer to doesn&#39;t explain anything."}, {"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 4, "creation_date": 1438811627, "post_id": 31843322, "comment_id": 51608458, "body": "As a general rule, std::make_shared&lt;Test&gt;() is &quot;better.&quot; It allocates an instance of Test and the reference count needed for the shared_ptr in one memory allocation. As with any generalization, there are times when make_shared will not work (e.g., when the class uses a custom allocator), but for this simple case, I think using make_shared is more helpful."}], "tags": [], "owner": {"reputation": 249, "user_id": 1635591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ca5dc8daf22479c2b34d786c5d52f64?s=128&d=identicon&r=PG", "display_name": "agnor", "link": "https://stackoverflow.com/users/1635591/agnor"}, "is_accepted": false, "score": 1, "last_activity_date": 1438810844, "creation_date": 1438810844, "answer_id": 31843322, "question_id": 31843229, "link": "https://stackoverflow.com/questions/31843229/how-to-access-instance-member-variables-via-stdshared-ptr/31843322#31843322", "title": "How to access instance member variables via std::shared_ptr?", "body": "<p>You have to instantiate shared data. Something like this:</p>\n\n<pre><code>std::shared_ptr&lt;Test&gt; f( new Test());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 7, "last_activity_date": 1438810889, "creation_date": 1438810889, "answer_id": 31843335, "question_id": 31843229, "link": "https://stackoverflow.com/questions/31843229/how-to-access-instance-member-variables-via-stdshared-ptr/31843335#31843335", "title": "How to access instance member variables via std::shared_ptr?", "body": "<p>Your problem lies on the line <code>std::shared_ptr&lt;Test&gt; f;</code>.  That line is similar to <code>Test* f;</code>; you declare a pointer to a <code>Test</code>, but you've not created a <code>Test</code> object for it to point to.  You need to use</p>\n\n<pre><code>std::shared_ptr&lt;Test&gt; f(std::make_shared&lt;Test&gt;());\n</code></pre>\n\n<p>Then you can access members with <code>f-&gt;x</code> or <code>(*f).x</code> the same as you would a raw pointer.</p>\n"}], "owner": {"reputation": 2882, "user_id": 4995876, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3e3ef09fd46fd8c29fd94e661e2f4327?s=128&d=identicon&r=PG&f=1", "display_name": "helloB", "link": "https://stackoverflow.com/users/4995876/hellob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3322, "favorite_count": 1, "accepted_answer_id": 31843335, "answer_count": 3, "score": 0, "last_activity_date": 1438868956, "creation_date": 1438810413, "question_id": 31843229, "link": "https://stackoverflow.com/questions/31843229/how-to-access-instance-member-variables-via-stdshared-ptr", "title": "How to access instance member variables via std::shared_ptr?", "body": "<p>I don't know why I can't find this somewhere online, but how can I access <code>class instance member variables</code> via a <code>shared_ptr?</code> The ways I've tried are commented out in the code below. They've both result in a <code>segmentation fault</code>. </p>\n\n<p>I assume I could access the member variables by getting a <code>raw pointer</code> from the <code>shared_ptr</code> but I'd rather avoid that as it's not clean and negates the value of the <code>shared_ptr</code> What's a safe way to access these member variables?</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass Test{\npublic:\n  int x;\n  Test() : x(5){}\n};\n\nint main()\n{\n  std::shared_ptr&lt;Test&gt; f;\n // the following lines both produce seg faults\n //  std::cout &lt;&lt; (*f).x &lt;&lt; std::endl;\n //  std::cout &lt;&lt; f-&gt;x &lt;&lt; std::endl;\n\n    }\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438810883, "post_id": 31843278, "comment_id": 51608149, "body": "@dyp  It illustrates the qoute very well."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438886907, "post_id": 31843278, "comment_id": 51646237, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/85333/discussion-between-barry-and-vlad-from-moscow\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1438811741, "last_edit_date": 1438811741, "creation_date": 1438810623, "answer_id": 31843278, "question_id": 31843161, "link": "https://stackoverflow.com/questions/31843161/an-example-for-this-statement-in-section-3-4-3-1-of-the-c-standard/31843278#31843278", "title": "An example for this statement in section 3.4.3.1 of the C++ standard?", "body": "<p>I did not check the quote but I think this example will be relevant</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace N1\n{    \nstruct A\n{\n    static int x;\n};\n}    \n\nusing N1::A;\n\nint x = 10;\nint N1::A::x = 20;\n\nint A = 30;\n\nint main()\n{\n\n    std::cout &lt;&lt; A::x &lt;&lt; std::endl;\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>20\n</code></pre>\n\n<p>The words <strong>within the same scope</strong>  are ambiguous. So you can consider a modified example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace N1\n{    \nstruct A\n{\n    static int x;\n};\n\nint A = 30;\n}    \n\nusing N1::A;\n\nint x = 10;\nint N1::A::x = 20;\n\nint main()\n{\n\n    std::cout &lt;&lt; A::x &lt;&lt; std::endl;\n}    \n</code></pre>\n\n<p>In the both programs the declaration of the object A of type int </p>\n\n<pre><code>int A = 30;\n</code></pre>\n\n<p>hides the declaration of <code>struct A</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1438883139, "last_edit_date": 1438883139, "creation_date": 1438881655, "answer_id": 31862004, "question_id": 31843161, "link": "https://stackoverflow.com/questions/31843161/an-example-for-this-statement-in-section-3-4-3-1-of-the-c-standard/31862004#31862004", "title": "An example for this statement in section 3.4.3.1 of the C++ standard?", "body": "<p>This is a resolution of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#400\" rel=\"nofollow\">CWG 400</a> (which references <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/1996/N0905.pdf\" rel=\"nofollow\">N0905</a>) which questions if the following code was well-formed:</p>\n\n<pre><code>struct A { int i; struct i {}; };\nstruct B { int i; struct i {}; };\nstruct D : public A, public B { using A::i; void f (); };\nvoid D::f () { struct i x; }\n</code></pre>\n\n<p>The bullet point was added to the standard to make it clear that <code>using A::i</code> brings in <em>both</em> <code>struct i { }</code> <em>and</em> <code>int i</code> into <code>D</code>, such that <code>struct i x</code> is well-formed. </p>\n"}], "owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 31862004, "answer_count": 2, "score": 2, "last_activity_date": 1438883139, "creation_date": 1438810100, "question_id": 31843161, "link": "https://stackoverflow.com/questions/31843161/an-example-for-this-statement-in-section-3-4-3-1-of-the-c-standard", "title": "An example for this statement in section 3.4.3.1 of the C++ standard?", "body": "<p>Can someone post a useful example that illustrates (1.4).</p>\n\n<blockquote>\n  <p>If the nested-name-specifier of a qualified-id nominates a class, the name specified after the nested-namespecifier is looked up in the scope of the class (10.2), except for the cases listed below. The name shall represent one or more members of that class or of one of its base classes (Clause 10). [ Note: A class member can be referred to using a qualified-id at any point in its potential scope (3.3.7). \u2014 end note ] The exceptions to the name lookup rule above are the following: </p>\n  \n  <p>(1.1) \u2014 a destructor name is looked up as specified in</p>\n  \n  <p>(1.2) \u2014 a conversion-type-id of a conversion-function-id is looked up in the same manner as a conversion-type-id in a class member\n  access (see 3.4.5); </p>\n  \n  <p>(1.3) \u2014 the names in a template-argument of a template-id are looked up in the context in which the entire postfix-expression occurs. </p>\n  \n  <p><strong>(1.4) \u2014 the lookup for a name specified in a using-declaration (7.3.3) also finds class or enumeration names hidden within the same scope (3.3.10).</strong></p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio", "templates", "visual-studio-2013", "decltype"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1438812569, "post_id": 31843154, "comment_id": 51608800, "body": "Really MSVC? You can&#39;t figure out <code>decltype(a)</code> there?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1438813601, "post_id": 31843154, "comment_id": 51609196, "body": "Doesn&#39;t work in VS2015 either. This is fun..."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1438817880, "post_id": 31843154, "comment_id": 51610520, "body": "@Barry I think this may be a consequence of the lack of two-phase lookup, which still applies to VC 14. It probably waits until instantiation time to resolve <code>decltype(a)</code>, even though <code>a</code> is non-dependent. If we declare <code>x</code> in the class definition using <code>decltype(a)</code> as well, it compiles. That also explains why it compiles if <code>Foo</code> is not a template."}], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1462379792, "creation_date": 1438810070, "last_edit_date": 1462379792, "question_id": 31843154, "link": "https://stackoverflow.com/questions/31843154/visual-c-decltype-as-a-return-type-of-a-class-templates-member-function", "title": "Visual C++ - decltype as a return type of a class template&#39;s member function", "body": "<p>The code</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Foo\n{\n    int x_;\n\n    int x() const;\n};\n\nint a;\n\ntemplate &lt;typename T&gt;\ndecltype(a) Foo&lt;T&gt;::x() const\n{\n    return x_;\n}\n\nint main()\n{\n}\n</code></pre>\n\n<p>produces the following error in Visual Studio 2013:</p>\n\n<pre><code>1&gt;...\\source.cpp(15): error C2244: 'Foo&lt;T&gt;::x' : unable to match function \ndefinition to an existing declaration\n1&gt;          ...\\source.cpp(6) : see declaration of 'Foo&lt;T&gt;::x'\n1&gt;          definition\n1&gt;          'unknown-type Foo&lt;T&gt;::x(void) const'\n1&gt;          existing declarations\n1&gt;          'int Foo&lt;T&gt;::x(void) const'\n</code></pre>\n\n<p>but compiles fine on <a href=\"http://coliru.stacked-crooked.com/a/2909afae2128292e\" rel=\"nofollow\">Coliru's GCC</a>. Also, it compiles in VS as a non-template class. I guess this is due to Visual Studio's incompleteness and if it is indeed, I'm sure the cause of this already has its name. I just can't find it with my sloppy terminology. What's going on?</p>\n"}, {"tags": ["c++", "windows", "compilation", "native", "environment"], "comments": [{"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 1, "creation_date": 1438810107, "post_id": 31843123, "comment_id": 51607818, "body": "Use static linking or install the redistributable pack. The redistributable pack is less convenient but it can be updated without you having to recompile your program if there are fixes for it."}, {"owner": {"reputation": 431, "user_id": 4939315, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/45f320ef76cdb0a735b1cdf06c3b40b8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Granger", "link": "https://stackoverflow.com/users/4939315/ben-granger"}, "reply_to_user": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1438810538, "post_id": 31843123, "comment_id": 51607994, "body": "static linking at compile time? and the redist pack on every system I want to run my program on?"}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1438810607, "post_id": 31843123, "comment_id": 51608023, "body": "No, just do one <i>or</i> the other. Either statically link to the C runtime (which I assume is missing) or have your friend install the appropriate VC++ redistributable pack. You can use Dependency Walker (on your friends&#39; machine) to see exactly what DLL-s are missing but if your program is small and you haven&#39;t added any explicit 3rd-party DLL dependency, it&#39;ll likely just be the C runtime."}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1438810777, "post_id": 31843123, "comment_id": 51608109, "body": "Static linking will give you bigger exe files but pretty much everything will be compiled into the executable (except 3rd-party stuff)."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 4939315, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/45f320ef76cdb0a735b1cdf06c3b40b8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Granger", "link": "https://stackoverflow.com/users/4939315/ben-granger"}, "edited": false, "score": 0, "creation_date": 1438810402, "post_id": 31843182, "comment_id": 51607939, "body": "so I&#39;m correct in expecting the .exe to be able to run on any system? Edit: the missing dll is MSVCP120D.dll"}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1438810686, "post_id": 31843182, "comment_id": 51608068, "body": "That&#39;s the C debug runtime."}, {"owner": {"reputation": 1039, "user_id": 5020152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb59ef74a06d62ddf2602d22f74cd02?s=128&d=identicon&r=PG&f=1", "display_name": "FirebladeDan", "link": "https://stackoverflow.com/users/5020152/firebladedan"}, "edited": false, "score": 0, "creation_date": 1438811022, "post_id": 31843182, "comment_id": 51608221, "body": "No, you&#39;re incorrect. Even though any machine can run it can&#39;t guarantee that his machine has the same libraries as you."}, {"owner": {"reputation": 431, "user_id": 4939315, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/45f320ef76cdb0a735b1cdf06c3b40b8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Granger", "link": "https://stackoverflow.com/users/4939315/ben-granger"}, "edited": false, "score": 0, "creation_date": 1438811433, "post_id": 31843182, "comment_id": 51608396, "body": "so it&#39;s an assumed dependencies issue, not an environment issue?"}, {"owner": {"reputation": 1039, "user_id": 5020152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb59ef74a06d62ddf2602d22f74cd02?s=128&d=identicon&r=PG&f=1", "display_name": "FirebladeDan", "link": "https://stackoverflow.com/users/5020152/firebladedan"}, "edited": false, "score": 0, "creation_date": 1438811943, "post_id": 31843182, "comment_id": 51608575, "body": "It is a dependency issue."}], "tags": [], "owner": {"reputation": 1039, "user_id": 5020152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb59ef74a06d62ddf2602d22f74cd02?s=128&d=identicon&r=PG&f=1", "display_name": "FirebladeDan", "link": "https://stackoverflow.com/users/5020152/firebladedan"}, "is_accepted": false, "score": 1, "last_activity_date": 1438811210, "last_edit_date": 1438811210, "creation_date": 1438810209, "answer_id": 31843182, "question_id": 31843123, "link": "https://stackoverflow.com/questions/31843123/native-windows-c-programming/31843182#31843182", "title": "Native windows c++ programming?", "body": "<p>This issue is unrelated to language. If you are missing dependencies/libraries, with anything, of course it is going to yell. It's expecting to use code from the other dll to know how to do something.</p>\n\n<p>A good example is when you run a .exe and it says HEY! We noticed you're missing this driver/file/dependency and then it takes you to some other click through's to get it.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 3856634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46405e2b734cf34cfa6c5ee19249130d?s=128&d=identicon&r=PG&f=1", "display_name": "adammonroe", "link": "https://stackoverflow.com/users/3856634/adammonroe"}, "is_accepted": true, "score": 4, "last_activity_date": 1438810940, "creation_date": 1438810940, "answer_id": 31843346, "question_id": 31843123, "link": "https://stackoverflow.com/questions/31843123/native-windows-c-programming/31843346#31843346", "title": "Native windows c++ programming?", "body": "<p>Compiling a debugging version will dynamically link to debug version(s) of dll files that don't come standard with Windows. You're also not technically/legally allowed to redistribute debug versions of dll files. Either compile a release version, or include whatever .dll files you are linking to with your exe file. You might also have to worry about whether or not the target computer has the proper Microsoft Visual Studio C++ Redistributable Packages installed.</p>\n\n<p>Alternately, you can statically link by setting Runtime Library->Multithreaded /MT under Code Generation in your project's properties, thereby bypassing dll hell, although for various reasons I won't go into, this is generally frowned upon.</p>\n"}, {"tags": [], "owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "is_accepted": false, "score": 2, "last_activity_date": 1438811556, "last_edit_date": 1438811556, "creation_date": 1438811005, "answer_id": 31843357, "question_id": 31843123, "link": "https://stackoverflow.com/questions/31843123/native-windows-c-programming/31843357#31843357", "title": "Native windows c++ programming?", "body": "<p>In <em>theory</em>, the Exe file can run on any computer with suitable CPU etc.<br>\n(same opcode \"language\" as yours).  </p>\n\n<p>Practically, there are two major problems:  </p>\n\n<p>a) The program file contains more than CPU commands, what and how depends on eg, your operating system. Exe (PE) files are usually used in Windows, and while it is theoretically possible, Linux won\u00b4t run it because nobody programmed it in a way to understand Exe files (there is additional software like Wine, which <em>can</em> run Exe\u00b4s on Linux, but that has to be installed separately)  </p>\n\n<p>b) You\u00b4re not writing every bit from the OS from scratch, you\u00b4re relying that you can use a lot of pre-existing functions. As you know, these have to be present to run your program. The problem is, Visual Studio assumes the presence of libraries which are intentionally not part of Windows itself. It wouldn\u00b4t be a problem to ship them with every Windows installation, but Microsoft choose to keep them as separate download (the Redist. package mentioned in the comments). To stuff as much as possible in the Exe file without relying on other library files, use the static linking option for your project.</p>\n"}], "owner": {"reputation": 431, "user_id": 4939315, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/45f320ef76cdb0a735b1cdf06c3b40b8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Granger", "link": "https://stackoverflow.com/users/4939315/ben-granger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 31843346, "answer_count": 3, "score": 1, "last_activity_date": 1438811556, "creation_date": 1438809958, "question_id": 31843123, "link": "https://stackoverflow.com/questions/31843123/native-windows-c-programming", "title": "Native windows c++ programming?", "body": "<p>I have quick question about native c++, along with others, programming on windows-- I recently wrote a small c++ program in Visual Studio on my own computer that does a little math for me. I compiled it successfully and moved the .exe from the VS debug folder to my desktop. It runs fine on my computer, regardless of where the .exe is located. But then I gave the program to my friend, and when he tries to run it, it says he's missing all kinds of dll files. Now I have a feeling this is because there is a c++ environment that is included in VS, that allows it to run on mine and not his. But my question is why should it matter what language the program was originally written in? Isn't the point of compiling it into a .exe to turn the code into machine language so that it can run on any computer regardless of whether or not that have the dev tools?</p>\n"}, {"tags": ["c++", "gcc", "clang", "c++14", "one-definition-rule"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1438813194, "post_id": 31843093, "comment_id": 51609053, "body": "Interesting. Your final test case works with gcc -O2 and clang -O3, but not clang -O2 or gcc -O1. Your 2nd and 5th test case also don&#39;t work at -O0 on either compiler. Fun times...(also, the part of [basic.def.odr] on what counts and doesn&#39;t count as an odr-use makes my head hurt)."}, {"owner": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438813798, "post_id": 31843093, "comment_id": 51609267, "body": "Yeah I wouldn&#39;t consider pass by value to be an odr-use, since it shouldn&#39;t rely on the object&#39;s identity... but I don&#39;t have sufficient language-lawyer foo to discern."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1439177169, "post_id": 31843093, "comment_id": 51735975, "body": "Note that odr <a href=\"http://stackoverflow.com/a/28446388/1708801\">violations do not require a diagnostic</a> so both can be correct. The history of how we got the <a href=\"http://stackoverflow.com/q/31565836/1708801\">current odr rules is kind of twisted too</a>. This is a curious case."}, {"owner": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "edited": false, "score": 1, "creation_date": 1439216016, "post_id": 31843093, "comment_id": 51756286, "body": "I think I may know what&#39;s going on: when you pass by value, you invoke the copy constructor, and copy constructors are defined as taking a reference, so passing an object by value <i>implicitly also causes you to pass by reference to the copy constructor</i>. It just so happens that specifically the default generated copy constructors for empty classes in Clang/GCC don&#39;t trip the usual pass-by-reference-violates-odr-check. Unless the standard makes an explicit exception for this, which would be nice, since the object identity really isn&#39;t needed for defaulted POD copy constructors at all."}], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439568917, "post_id": 32013955, "comment_id": 51931199, "body": "I&#39;m not entirely sure if copy ctors always lead to odr-usage, there&#39;s a weird rule I haven&#39;t fully understood yet. David Krauss has mentioned it <a href=\"https://groups.google.com/a/isocpp.org/d/msg/std-discussion/rmJL-TzjlVY/7wGk34XaMHoJ\" rel=\"nofollow noreferrer\">in a discussion about ODR</a>, and later referred to <a href=\"http://wg21.cmeerw.net/cwg/issue1741\" rel=\"nofollow noreferrer\">wg21.cmeerw.net/cwg/issue1741</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439572652, "post_id": 32013955, "comment_id": 51933177, "body": "@dyp let me look at those then"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439573039, "post_id": 32013955, "comment_id": 51933370, "body": "@dyp interesting, so the proposed langauage appears in C++14 draft but the DR was moved to open, so not sure what to make of that."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439573415, "post_id": 32013955, "comment_id": 51933556, "body": "Yes, and the example is a bit tricky since [expr.call]p7 says that binding to <code>...</code> causes l-t-r; but there&#39;s no equivalent requirement for passing to a by-value parameter."}, {"owner": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "edited": false, "score": 0, "creation_date": 1439820725, "post_id": 32013955, "comment_id": 52004252, "body": "Yeah I&#39;d love to know if this language made it into the final draft because then we&#39;d know whether GCC/clang need a bug report."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "edited": false, "score": 0, "creation_date": 1441022674, "post_id": 32013955, "comment_id": 52496627, "body": "@JosephGarvin apologizes for the late response, I have been away. This language was part of the C++14 draft and is present in the latest draft as well. So that would seem to indicate gcc is incorrect in this case but the defect report has been moved to open which perhaps means there will be more changes. Let me think about it some more but a gcc bug report probably makes sense."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 7, "last_activity_date": 1439644673, "last_edit_date": 1495539920, "creation_date": 1439567252, "answer_id": 32013955, "question_id": 31843093, "link": "https://stackoverflow.com/questions/31843093/odd-behavior-passing-static-constexpr-members-without-definitions-by-value/32013955#32013955", "title": "Odd behavior passing static constexpr members without definitions by value", "body": "<p>So in the cases where E is a class they all looks like odr violations, if we look at cppreferences page on <a href=\"http://en.cppreference.com/w/cpp/language/definition#ODR-use\" rel=\"nofollow noreferrer\">odr-use</a> it says:</p>\n\n<blockquote>\n  <p>Informally, an object is odr-used if its address is taken, or a reference is bound to it, and a function is odr-used if a function call to it is made or its address is taken. If an object or a function is odr-used, its definition must exist somewhere in the program; a violation of that is a link-time error. </p>\n</blockquote>\n\n<p>and in this case we take a reference when we call the copy constructor on this line:</p>\n\n<pre><code>show(x.nested);\n</code></pre>\n\n<p>It is also worth it to note that <a href=\"https://stackoverflow.com/a/28446388/1708801\">odr-violations do not require a diagnostic</a>.</p>\n\n<p>It looks what you are seeing in some cases in the effects of constructor elision with gcc if we use <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/C_002b_002b-Dialect-Options.html#index-fno_002delide_002dconstructors-134\" rel=\"nofollow noreferrer\">-fno-elide-constructors</a> we get an error for all the cases where E is a class. In the enum cases the lvalue-to-rvalue conversion is applied and therefore there is no odr-use.</p>\n\n<p><B>Update</B> </p>\n\n<p>dyp pointed me to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1741\" rel=\"nofollow noreferrer\">defect report 1741</a> which questions whether binding to the reference parameter of a copy ctor is an odr-use or not:</p>\n\n<blockquote>\n  <p>Does this odr-use T::s, requiring it to have a definition, because of binding it to the reference parameter of S's copy constructor? </p>\n</blockquote>\n\n<p>and the result was the following change to [basic.def.odr] paragraph 3:</p>\n\n<blockquote>\n  <p>A variable x whose name appears as a potentially-evaluated expression ex is odr-used unless <s>x satisfies the requirements for appearing in a constant expression (5.20 [expr.const])</s> <strong>applying the lvalue-to-rvalue conversion (4.1 [conv.lval]) to x yields a constant expression (5.20 [expr.const]) that does not invoke any non-trivial functions</strong> and, if x is an object, ex is an element of the set of potential results of an expression e, where either the lvalue-to-rvalue conversion (4.1 [conv.lval]) is applied to e, or e is a discarded-value expression (Clause 5 [expr]). this is odr-used... </p>\n</blockquote>\n\n<p>So then the question becomes which cases are covered by this change. It would seem these examples are ok:</p>\n\n<pre><code>//static constexpr struct E {} nested {}; // works in gcc and clang\n//static constexpr struct E {T x;} nested {}; // doesn't work in gcc\nstatic constexpr struct E { constexpr E() {} constexpr E(const E&amp;) = default; T x=T(); } nested {}; // doesn't work in gcc\n</code></pre>\n\n<p>Since the copy ctor is trivial while this one is not trivial:</p>\n\n<pre><code>//static constexpr struct E { constexpr E() {} constexpr E(const E&amp;) {} T x=T();} nested {}; // works in gcc and clang\n</code></pre>\n\n<p>We can confirm this using <a href=\"http://en.cppreference.com/w/cpp/types/is_trivially_copyable\" rel=\"nofollow noreferrer\">std::is_trivially_copyable</a>, <a href=\"http://melpon.org/wandbox/permlink/BKKseLGjj5GjrOEJ\" rel=\"nofollow noreferrer\">see it live</a>. </p>\n\n<p>The enum cases are still ok for the same reasons I stated originally.</p>\n\n<p>The defect also report variance in implementation.</p>\n"}], "owner": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 3, "accepted_answer_id": 32013955, "answer_count": 1, "score": 17, "last_activity_date": 1439644673, "creation_date": 1438809832, "question_id": 31843093, "link": "https://stackoverflow.com/questions/31843093/odd-behavior-passing-static-constexpr-members-without-definitions-by-value", "title": "Odd behavior passing static constexpr members without definitions by value", "body": "<p>I was surprised to find that GCC and Clang disagree on whether to give me a linker error when passing a static constexpr member by value when there is no out-of-class definition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;typeinfo&gt;\n\ntemplate &lt;typename X&gt;\nvoid show(X)\n{\n    std::cout &lt;&lt; typeid(X).name() &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nstruct Foo\n{\n    //static constexpr struct E {} nested {}; // works in gcc and clang\n    //static constexpr struct E {T x;} nested {}; // doesn't work in gcc\n    //static constexpr enum E {} nested {}; // works in gcc and clang\n    //static constexpr enum E { FOO } nested {}; // works in gcc and clang\n    //static constexpr struct E { constexpr E() {} constexpr E(const E&amp;) {} T x=T();} nested {}; // works in gcc and clang\n    static constexpr struct E { constexpr E() {} constexpr E(const E&amp;) = default; T x=T(); } nested {}; // doesn't work in gcc\n};\n\nint main()\n{\n    Foo&lt;int&gt; x;\n    show(x.nested);\n}\n</code></pre>\n\n<p>Snippet can be played with <a href=\"http://coliru.stacked-crooked.com/a/104f2f58f67c14f6\">here</a>.</p>\n\n<p>I would like to use the first line's syntax with no out-of-class definition:</p>\n\n<pre><code>static constexpr struct E {} nested {}; // works in gcc and clang\n</code></pre>\n\n<p>When there are no members in <code>E</code>, Clang and GCC only seem to care that I have no out-of-class definition of <code>nested</code> if I trip ODR (e.g. by taking the address). <strong>Is this standard mandated or luck?</strong></p>\n\n<p>When there are members, GCC (5.2) appears to additionally want me to have manually defined a constexpr copy constructor. <strong>Is this a bug?</strong></p>\n\n<p>From googling and SO I have found several different answers but it's hard to tease apart which are up to date with C++14. In C++98/03 I believe only integer types could be initialized inside the class. I <em>think</em> that C++14 expanded this to 'literal' types which includes constexpr constructable things. I don't know if this is the same as saying I am allowed to get away with not having an out-of-class definition though.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 2705414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/89316c7ffffeebdfec815c9b9573210b?s=128&d=identicon&r=PG&f=1", "display_name": "bdristan", "link": "https://stackoverflow.com/users/2705414/bdristan"}, "edited": false, "score": 0, "creation_date": 1438811096, "post_id": 31843236, "comment_id": 51608247, "body": "It is strange indeed - or at least not intuitive.  Thanks."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 914, "user_id": 2705414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/89316c7ffffeebdfec815c9b9573210b?s=128&d=identicon&r=PG&f=1", "display_name": "bdristan", "link": "https://stackoverflow.com/users/2705414/bdristan"}, "edited": false, "score": 1, "creation_date": 1438811789, "post_id": 31843236, "comment_id": 51608525, "body": "@bdristan The concept here is that functions from different namespaces don&#39;t overload. If you want <code>A::Foo()</code> to be an overload for <code>B::Foo()</code>, it needs to also live in <code>B</code>"}], "tags": [], "owner": {"reputation": 249, "user_id": 1635591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ca5dc8daf22479c2b34d786c5d52f64?s=128&d=identicon&r=PG", "display_name": "agnor", "link": "https://stackoverflow.com/users/1635591/agnor"}, "is_accepted": true, "score": 4, "last_activity_date": 1438810499, "last_edit_date": 1438810499, "creation_date": 1438810453, "answer_id": 31843236, "question_id": 31843003, "link": "https://stackoverflow.com/questions/31843003/cant-call-base-classs-method-when-another-overload-present-in-derived-class/31843236#31843236", "title": "Can&#39;t call base class&#39;s method when another overload present in derived class", "body": "<p>Add this line:</p>\n\n<pre><code>using A::Foo;\n</code></pre>\n\n<p>in class <code>B</code> (public part) and it will work. </p>\n\n<p>In this case <code>Foo</code> from <code>B</code> <em>hides</em> <code>Foo</code> from <code>A</code>. One of the C++ strange behaviors.</p>\n"}], "owner": {"reputation": 914, "user_id": 2705414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/89316c7ffffeebdfec815c9b9573210b?s=128&d=identicon&r=PG&f=1", "display_name": "bdristan", "link": "https://stackoverflow.com/users/2705414/bdristan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 31843236, "answer_count": 1, "score": 5, "last_activity_date": 1438810499, "creation_date": 1438809438, "last_edit_date": 1438810423, "question_id": 31843003, "link": "https://stackoverflow.com/questions/31843003/cant-call-base-classs-method-when-another-overload-present-in-derived-class", "title": "Can&#39;t call base class&#39;s method when another overload present in derived class", "body": "<p>I get a compiler error \"function does not take 0 arguments\" when compiling the following code.</p>\n\n<pre><code>class A\n{\npublic:\n    int Foo()\n    {\n        return 1;\n    }\n\nprotected:\n    virtual void Foo(int&amp; n)\n    {\n        n += 1;\n    }\n};\n\nclass B : public A\n{\nprotected:\n    // Override of A\n    void Foo(int&amp; n)\n    {\n        n += 2;\n    }\n};\n\n\nint main(int argc, char* argv[])\n{\n\n    B b;\n    int n = b.Foo();\n    return n;\n}\n</code></pre>\n\n<p>It looks like the compiler insists on calling overload B::Foo(int&amp;) instead of A::Foo().  I must be missing something obvious here.  Any pointers to C++ standard that explain the compiler's behaviour will be appreciated.</p>\n\n<p>I do realise that \"int n = ((A)b).Foo();\" will make the compiler happy but this is not an ideal solution for me.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 22495, "user_id": 3510483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qubeh.jpg?s=128&g=1", "display_name": "quantdev", "link": "https://stackoverflow.com/users/3510483/quantdev"}, "edited": false, "score": 3, "creation_date": 1438808865, "post_id": 31842836, "comment_id": 51607207, "body": "ever heard of type safety ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438808983, "post_id": 31842836, "comment_id": 51607277, "body": "You can, if you really want..troubles."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1438809075, "post_id": 31842836, "comment_id": 51607319, "body": "Sure you can. <code>double d; int *p = (int*)&amp;d;</code>. Nothing could possibly go wrong. &lt;/sarcasm&gt;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 22495, "user_id": 3510483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qubeh.jpg?s=128&g=1", "display_name": "quantdev", "link": "https://stackoverflow.com/users/3510483/quantdev"}, "edited": false, "score": 0, "creation_date": 1438809088, "post_id": 31842836, "comment_id": 51607324, "body": "@quantdev Is it really about type safety? <code>C</code> is not that concerned about it.. It&#39;s more about strict aliasing, that optimizer might mess with it."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1438809269, "post_id": 31842836, "comment_id": 51607403, "body": "@EugeneSh.: But the inability to assign one type to another without an explicit cast <b>is</b> about type safety."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1438809574, "post_id": 31842836, "comment_id": 51607553, "body": "&quot;We know that&quot; followed by complete speculation."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1438810789, "post_id": 31842836, "comment_id": 51608117, "body": "@OliverCharlesworth except for <code>void *</code> in C"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438815578, "post_id": 31842836, "comment_id": 51609854, "body": "You can, if you write assembly. <i>Not</i> being able to do this is actually a <i>feature</i> of C."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438832357, "post_id": 31842977, "comment_id": 51613930, "body": "&quot;convert a pointer to any other type to a pointer to unsigned char&quot; - I think an exception is a pointer to a function."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 6, "last_activity_date": 1438834309, "last_edit_date": 1438834309, "creation_date": 1438809377, "answer_id": 31842977, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe/31842977#31842977", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<p>Many computers have alignment requirements, so (for example) to read a 2-byte value, the address at which it's located must be a multiple of 2 (and likewise, a 4-byte value must be located at an address that's a multiple of 4, and so on). In fact, this alignment requirement is common enough that it's frequently referred to as \"natural alignment\".</p>\n\n<p>Likewise, some types (e.g., floating point types) impose requirements on the bit sequence that can be read as that type, so if you try to take some arbitrary data and treat it as a double, you might trigger something like a floating point exception.</p>\n\n<p>If you want to do this badly enough, you can use a cast to turn the pointer into the target type (but the results, if any, aren't usually portable).</p>\n\n<p>You are guaranteed that you can convert a pointer to any other type of object to a pointer to unsigned char, and use that to read the bytes that represent the pointee object.</p>\n\n<p>Also, if you primarily want an opaque pointer, without type information attached, you can assign a pointer to some other type to a <code>void *</code>.</p>\n\n<p>Finally: no, not all pointers are actually the same. Pointers to different types can be different sizes (e.g., on the early Cray compilers, a <code>char *</code> was substantially different from an <code>int *</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438810961, "post_id": 31843306, "comment_id": 51608187, "body": "Disagree with the para &quot;This is why...&quot;  . The requirement for casting has nothing to do with whether representation change might happen. For example <code>float f = 5.0; int i = f;</code> does not require a cast. Nor does <code>int i = -1; unsigned int u = i;</code> which would change representation on non 2&#39;s complement.  The cast requirement is to say &quot;do you really want to do that?&quot; when trying to make a pointer point to memory that contains objects of a different type , which carries high degree of risk of undefined behaviour"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438811411, "post_id": 31843306, "comment_id": 51608387, "body": "@MattMcNabb John&#39;s para talks about pointers. Neither of your examples has pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438811678, "post_id": 31843306, "comment_id": 51608479, "body": "given <a href=\"http://port70.net/~nsz/c/c99/n1256.html#6.3.2.3p1\" rel=\"nofollow noreferrer\">6.3.2.3p1</a>, although your points are valid, it doesn&#39;t really answer the question. With <b>that</b> requirement in mind, it would&#39;ve been quite easy to have all data pointers be implicitly convertible. The reason not to do this is much more a <i>design decision</i> for some <i>type safety</i>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438812046, "post_id": 31843306, "comment_id": 51608614, "body": "@BlueMoon I&#39;m saying that representation change is not the reason and gave some examples of why representation change is not important in C. C is based on values."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1438810772, "creation_date": 1438810772, "answer_id": 31843306, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe/31843306#31843306", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<blockquote>\n  <p>In case of <strong>pointers</strong>, we know that their size <strong>is always same</strong> irrespective of <strong>data type of the variable</strong> it is pointing.</p>\n</blockquote>\n\n<p>No, we do <strong>not</strong> know that.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">Chapter and verse for C</a></p>\n\n<blockquote>\n<strong>6.2.5 Types</strong><br>\n...<br>\n28 A pointer to <code>void</code> shall have the same representation and alignment requirements as a\npointer to a character type.<sup>48)</sup> Similarly, pointers to qualified or unqualified versions of\ncompatible types shall have the same representation and alignment requirements. All\npointers to structure types shall have the same representation and alignment requirements\nas each other. All pointers to union types shall have the same representation and\nalignment requirements as each other. <strong><em>Pointers to other types need not have the same\nrepresentation or alignment requirements.</em></strong>\n<hr>\n<sup>48) The same representation and alignment requirements are meant to imply interchangeability as\narguments to functions, return values from functions, and members of unions.</sup>\n</blockquote>\n\n<p>Emphasis added.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow\">Chapter and verse for C++</a></p>\n\n<blockquote>\n<strong>3.9.2 Compound types</strong><br>\n...<br>\n3 The type of a pointer to <code>void</code> or a pointer to an object type is called an <em>object pointer type</em>. [ <em>Note:</em> A pointer\nto void does not have a pointer-to-object type, however, because <code>void</code> is not an object type. <em>\u2014 end note</em> ]\nThe type of a pointer that can designate a function is called a <em>function pointer type</em>. A pointer to objects\nof type <code>T</code> is referred to as a \u201cpointer to <code>T</code>.\u201d [<em>Example:</em> a pointer to an object of type <code>int</code> is referred to as\n\u201cpointer to <code>int</code> \u201d and a pointer to an object of class <code>X</code> is called a \u201cpointer to <code>X</code>.\u201d <em>\u2014 end example</em> ] Except\nfor pointers to static members, text referring to \u201cpointers\u201d does not apply to pointers to members. Pointers\nto incomplete types are allowed although there are restrictions on what can be done with them (3.11).\nA valid value of an object pointer type represents either the address of a byte in memory (1.7) or a null\npointer (4.10). If an object of type <code>T</code> is located at an address <code>A</code>, a pointer of type <em>cv</em> <code>T*</code> whose value is the\naddress <code>A</code> is said to point to that object, regardless of how the value was obtained. [ <em>Note:</em> For instance,\nthe address one past the end of an array (5.7) would be considered to point to an unrelated object of the\narray\u2019s element type that might be located at that address. There are further restrictions on pointers to\nobjects with dynamic storage duration; see 3.7.4.3. <em>\u2014 end note</em> ] The value representation of pointer types\nis implementation-defined. <strong><em>Pointers to layout-compatible types shall have the same value representation and\nalignment requirements</em></strong> (3.11). [ <em>Note:</em> Pointers to over-aligned types (3.11) have no special representation,\nbut their range of valid values is restricted by the extended alignment requirement. This International\nStandard specifies only two ways of obtaining such a pointer: taking the address of a valid object with\nan over-aligned type, and using one of the runtime pointer alignment functions. An implementation may\nprovide other means of obtaining a valid pointer value for an over-aligned type. <em>\u2014 end note</em> ]<br><br>\n4 A pointer to <em>cv</em>-qualified (3.9.3) or <em>cv</em>-unqualified <code>void</code> can be used to point to objects of unknown type.\nSuch a pointer shall be able to hold any object pointer. An object of type <em>cv</em> <code>void*</code> shall have the same\nrepresentation and alignment requirements as <em>cv</em> <code>char*</code>.\n</blockquote>\n\n<p>Emphasis added.  It is <em>entirely</em> possible to have different sizes and representations for different pointer types.  There is no reason to expect a pointer to <code>int</code> to have the same size and representation as a pointer to <code>double</code>, or a pointer to a <code>struct</code> type, or a pointer to a function type.  It's true for commodity platforms like x86, but not all the world runs on x86.  </p>\n\n<p>This is why you can't assign pointer values of one type to pointer values of another type without an explicit cast (except for converting between <code>void *</code> and other pointer types in C), since a representation change <em>may</em> be required.</p>\n\n<p>Secondly, pointer arithmetic depends on the size of the pointed-to type.  Assume you have pointers to a 32-bit <code>int</code> and a 64-bit <code>double</code>:</p>\n\n<pre><code>int *ip;\ndouble *dp;\n</code></pre>\n\n<p>The expression <code>ip + 1</code> will return the address of the next integer object (current address plus 4), while the expression <code>dp + 1</code> will return the address of the next double object (current address plus 8).  </p>\n\n<p>If I assign the address of a <code>double</code> to a pointer to <code>int</code>, incrementing that int pointer won't take me to the next <code>double</code> object.  </p>\n"}], "owner": {"reputation": 1, "user_id": 5173150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe3a205f587a6d75df1ad50531af27e?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Kumar Nalla", "link": "https://stackoverflow.com/users/5173150/manoj-kumar-nalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1438834309, "creation_date": 1438808822, "last_edit_date": 1438809222, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<p>In case of pointers, we know that their size is always same irrespective of data type of the variable it is pointing.</p>\n\n<p>Data type is needed when dereferencing the pointer so it knows how much data it should read. So why cant i assign address of variable of double type to a pointer of int type?</p>\n\n<p>why cant it happen like dereferencing a int pointer reads next 4 bytes from variable of double type and print its value?</p>\n"}, {"tags": ["c++", "string", "vector", "find"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438808456, "post_id": 31842684, "comment_id": 51607005, "body": "Have you tried using <code>string::find_first_of</code> ?"}, {"owner": {"reputation": 1, "user_id": 5195652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2855d7e60cc62b00939e7815b82f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Not Larangi", "link": "https://stackoverflow.com/users/5195652/not-larangi"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438809615, "post_id": 31842684, "comment_id": 51607569, "body": "I am gonna try it , but that does not solve the problem of outputin to the text file"}, {"owner": {"reputation": 1, "user_id": 5195652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2855d7e60cc62b00939e7815b82f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Not Larangi", "link": "https://stackoverflow.com/users/5195652/not-larangi"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438812830, "post_id": 31842684, "comment_id": 51608899, "body": "It works thanks man  , you are the best"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5195652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2855d7e60cc62b00939e7815b82f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Not Larangi", "link": "https://stackoverflow.com/users/5195652/not-larangi"}, "is_accepted": false, "score": 0, "last_activity_date": 1438813121, "creation_date": 1438813121, "answer_id": 31843776, "question_id": 31842684, "link": "https://stackoverflow.com/questions/31842684/c-script-that-finds-questions-in-string/31843776#31843776", "title": "c++ Script that finds questions in string", "body": "<p>The code is not finished yet but i got it working with help.\nThanks</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nint main (){\n\n\n\nstd::vector&lt; int &gt; interrogation ;\nstd::vector&lt; int &gt; dot;\n//std::vector&lt; int &gt; exclamation;\n\n\n\nstring look = \"?\";\nstring look_again = \".\";\nstring look_again_again = \"!\";\n\nstring test = \" ver.o que e isto? nao sei. ola? adeus.\";\n\n\n\nstring::size_type pos = test.find(look);\nstring::size_type sop = test.find(look_again);\n\n\n\nwhile (pos != std::string::npos)\n{\n\n\n\nint a = pos ;\nint b = sop;\n\n\n\n   cout &lt;&lt; \" . found at : \" &lt;&lt; sop &lt;&lt; std::endl;\n   cout &lt;&lt; \" ? found at : \" &lt;&lt; pos &lt;&lt; std::endl;\n  // cout &lt;&lt; \" ! found at : \" &lt;&lt; exc &lt;&lt; std::endl;\n\ninterrogation.push_back(a);\ndot.push_back(b);\n//exclamation.push_back(c);\n\nstring fragment = test.substr (0 , pos  );    // works\n//cout &lt;&lt; fragment &lt;&lt; endl ;\n\nstring fragment2 = test.substr (0 , sop) ;    // works\n//cout &lt;&lt; fragment2 &lt;&lt; endl ;\n\n\n\nstring fragment3 = test.substr (dot.back() + 1,  interrogation.back() -       dot.back());    // works\ncout &lt;&lt; fragment3 &lt;&lt; endl ;\n\n\n\n\n  pos = test.find(look, pos + 1);\n  sop = test.find(look_again, sop + 1);\n\n\n\n\n\n}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205, "user_id": 2185548, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dLsXm.jpg?s=128&g=1", "display_name": "Gama the Great", "link": "https://stackoverflow.com/users/2185548/gama-the-great"}, "is_accepted": false, "score": 0, "last_activity_date": 1439379470, "creation_date": 1439379470, "answer_id": 31964120, "question_id": 31842684, "link": "https://stackoverflow.com/questions/31842684/c-script-that-finds-questions-in-string/31964120#31964120", "title": "c++ Script that finds questions in string", "body": "<p>You can do something like this:</p>\n\n<pre><code>void function(string str) {\n  string sentence = \"\";\n  for(int i=0; i &lt; str.length(); i++) {\n      if(str[i] == '.' || str[i] == '!')\n          sentence = \"\"; // the sentence is not a question so clear the sentence\n      else if(str[i] == '?') {\n          sentence.push_back(str[i]);\n          cout &lt;&lt; sentence &lt;&lt; endl; // output the question - just replace cout with your ofstream\n      }\n      else\n          sentence.push_back(str[i]);\n  }\n}\n</code></pre>\n\n<p>I think I've seen this question before though..</p>\n"}], "owner": {"reputation": 1, "user_id": 5195652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2855d7e60cc62b00939e7815b82f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Not Larangi", "link": "https://stackoverflow.com/users/5195652/not-larangi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439379470, "creation_date": 1438808201, "question_id": 31842684, "link": "https://stackoverflow.com/questions/31842684/c-script-that-finds-questions-in-string", "title": "c++ Script that finds questions in string", "body": "<p>I am new at coding , been coding for about a week and i am trying to do a script that finds the \"?\" and the \".\" in the script , then outputs their position in the script and i use those value to print the question to a text file.</p>\n\n<p>Except it does not really work.</p>\n\n<p>If you put the value in like this, it works.</p>\n\n<pre><code>myfile &lt;&lt; test.substr( 18, 20 ) \n</code></pre>\n\n<p>But like this it does not work it just print the whole script from the value of dot[0] until the end of the script.</p>\n\n<pre><code>myfile &lt;&lt; test.substr( dot[0], interrogation[0] )\n</code></pre>\n\n<p>The way that i use to find the \"?\" position in the string is also not very accurate.</p>\n\n<p>Where there is the .</p>\n\n<pre><code>    if(x &gt; 0){ \n</code></pre>\n\n<p>I had a while loop but i replaced it for debugging reasons .\nThis is the whole code.\nIf you can help me i appreciate it.\nThanks.</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nint main (){\n\n\n\nstd::vector&lt; int &gt; interrogation ;\nstd::vector&lt; int &gt; dot;\n\n\n\nstring look = \"?\";\nstring look_again = \".\";\n\n\nstring test = \"ver. o que e isto? nao sei. ola? adeus. fghfghfhfghf\";\n\n\n\nstring::size_type pos = test.find(look);\nstring::size_type sop = test.find(look_again);\nstring::size_type exc = test.find(look_again_again);\n\n\nwhile (pos != std::string::npos)\n{\n\n\n\nint a = pos ;\nint b = sop;\n\n\n\n   cout &lt;&lt; \" . found at : \" &lt;&lt; sop &lt;&lt; std::endl;\n   cout &lt;&lt; \" ? found at : \" &lt;&lt; pos &lt;&lt; std::endl;\n\ninterrogation.push_back(a);\ndot.push_back(b);\n\n\nstring fragment = test.substr (0 , pos );    // works\n//cout &lt;&lt; fragment &lt;&lt; endl ;\n\nstring fragment2 = test.substr (0 , sop );    // works\n//cout &lt;&lt; fragment2 &lt;&lt; endl ;\n\n\n  pos = test.find(look, pos + 1);\n  sop = test.find(look_again, sop + 1);\n\n}\n\n\n\n\n\nint x = 1;\n\nif(x &gt; 0){\n\n\n\n\n\nint a = 1;\n\nint q = dot[a];\nint w = interrogation[a];\n// to save text\n\n\n// to save text\nstring save = \"saved_question.txt\" ;\nofstream myfile;\nmyfile.open (save.c_str(), ios::app);\nmyfile &lt;&lt; test.substr( 18, 20 ) + \"\\n\"  ;\nmyfile.close();\n\n\ncout &lt;&lt; \"Question saved in text file\" &lt;&lt; endl;\n\n\n\n\n}\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "find"], "comments": [{"owner": {"reputation": 13026, "user_id": 855050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7LxPC.jpg?s=128&g=1", "display_name": "becko", "link": "https://stackoverflow.com/users/855050/becko"}, "edited": false, "score": 0, "creation_date": 1438807551, "post_id": 31842429, "comment_id": 51606505, "body": "Can you post the error message?"}, {"owner": {"reputation": 13026, "user_id": 855050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7LxPC.jpg?s=128&g=1", "display_name": "becko", "link": "https://stackoverflow.com/users/855050/becko"}, "edited": false, "score": 1, "creation_date": 1438807642, "post_id": 31842429, "comment_id": 51606556, "body": "Also, you will never find <code>Testing_Object</code> inside <code>Testing_List</code> using that definition of <code>operator==</code>."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1438807757, "post_id": 31842429, "comment_id": 51606615, "body": "@john oops, I didn&#39;t see that : )"}, {"owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "reply_to_user": {"reputation": 13026, "user_id": 855050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7LxPC.jpg?s=128&g=1", "display_name": "becko", "link": "https://stackoverflow.com/users/855050/becko"}, "edited": false, "score": 0, "creation_date": 1438808258, "post_id": 31842429, "comment_id": 51606903, "body": "@becko. Thanks, I included the error message in the question above."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438808335, "post_id": 31842429, "comment_id": 51606954, "body": "I assume you&#39;re doing <code>Testing_List.push_back(Testing_Object);</code> and then expecting to find it? In that case the <code>&amp;lhs == &amp;rhs</code> test will never work, since <code>push_back</code> makes a copy of the object - the addresses will be different. You need to work out some other way of comparing objects based on something other than their addresses."}, {"owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438808549, "post_id": 31842429, "comment_id": 51607049, "body": "@JonathanPotter. You&#39;re right, thanks. So what&#39;s the best way to compare two objects in this situation? Let&#39;s say if I use an array of pointers to the Testing objects instead, how can I find the index of a certain object in the array?"}, {"owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438808585, "post_id": 31842429, "comment_id": 51607067, "body": "@JonathanPotter. FYI - What I wanted to do here was to locate that certain object in the container (be it a list or an array), and then delete it when prompted. Thanks!"}, {"owner": {"reputation": 13026, "user_id": 855050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7LxPC.jpg?s=128&g=1", "display_name": "becko", "link": "https://stackoverflow.com/users/855050/becko"}, "edited": false, "score": 0, "creation_date": 1438808619, "post_id": 31842429, "comment_id": 51607086, "body": "@Newbie, C++ always copies things around (in some sophisticated manners). <code>Testing_Object</code> will never have the same memory address as the objects inside the list."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438808621, "post_id": 31842429, "comment_id": 51607087, "body": "@Newbie: The best way depends on the definition of the objects in question. For the <code>Testing</code> object you&#39;ve shown above, there&#39;s no way at all."}, {"owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438809120, "post_id": 31842429, "comment_id": 51607338, "body": "@JonathanPotter. Thank you so much. I guess I should change it to list&lt;Testing *&gt;"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438809906, "post_id": 31842429, "comment_id": 51607715, "body": "@Newbie I wonder that someone who working on MySQL, C++, Java, Python is called Newbie.:) I think it is a professional.:)"}], "answers": [{"comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1438808227, "post_id": 31842498, "comment_id": 51606882, "body": "That seems like a rather bold assumption :)"}, {"owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "edited": false, "score": 0, "creation_date": 1438808371, "post_id": 31842498, "comment_id": 51606972, "body": "@john. Thanks! I tried your suggestion but the old problem lingers. Any hints?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1438808946, "post_id": 31842498, "comment_id": 51607252, "body": "I&#39;m not sure I know what the old problem is. But the issue you seem to be having is that you don&#39;t know what equality means for your Testing object. That obviously makes it hard to find anything as you don&#39;t know when two objects are the same."}, {"owner": {"reputation": 380, "user_id": 5049516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5PjHt.jpg?s=128&g=1", "display_name": "nv3", "link": "https://stackoverflow.com/users/5049516/nv3"}, "reply_to_user": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "edited": false, "score": 0, "creation_date": 1438809099, "post_id": 31842498, "comment_id": 51607328, "body": "@Newbie: What exactly is &quot;the old problem&quot;? The code compiles, so that&#39;s step one. Could you post the complete code of your test case, please. It could well be that the problem is what Vlad Feinstein already pointed out. You are comparing pointers to two objects, not if they contain an equivalent value. So with your current code, you most likely never find a given object."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1438807582, "creation_date": 1438807582, "answer_id": 31842498, "question_id": 31842429, "link": "https://stackoverflow.com/questions/31842429/finding-an-element-in-list-c/31842498#31842498", "title": "Finding an Element in List c++", "body": "<p>Your mistake was putting <code>operator==</code> inside the Testing class. It should be a global function.</p>\n\n<pre><code>bool operator==(const Testing &amp; lhs, const Testing &amp; rhs) {\n    return &amp;lhs == &amp;rhs;\n}\n</code></pre>\n\n<p>I'm ignoring your actual definition of <code>operator==</code>, I'll assume you know what you're doing.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1438809411, "creation_date": 1438809411, "answer_id": 31842998, "question_id": 31842429, "link": "https://stackoverflow.com/questions/31842429/finding-an-element-in-list-c/31842998#31842998", "title": "Finding an Element in List c++", "body": "<p>First of all this operator</p>\n\n<pre><code>bool operator==(const Testing &amp; lhs, const Testing &amp; rhs) {\n    return &amp;lhs == &amp;rhs;\n}\n</code></pre>\n\n<p>does not make sense for the container and the searched element declared like</p>\n\n<pre><code>list&lt;Testing&gt; Testing_List;\n\nTesting Testing_Object;\n</code></pre>\n\n<p>because it compares addresses of elements in the list with the address of the local variable that evidently are different for all elements of the list. You could use this operator if you know the address of some element in the list. </p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;algorithm&gt;\n\nclass Testing \n{\npublic: \n    Testing() = default;\n};\n\nbool operator==(const Testing &amp; lhs, const Testing &amp; rhs) {\n    return &amp;lhs == &amp;rhs;\n}\n\nint main()\n{\n    const size_t N = 10;\n\n    std::list&lt;Testing&gt; Testing_List;\n    Testing *sixthElement;\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        Testing_List.push_back( Testing() );\n        if ( i + 1 == 6 ) sixthElement = &amp;Testing_List.back();\n    }\n\n    auto it = std::find( Testing_List.begin(), Testing_List.end(), *sixthElement );\n\n    if ( it != Testing_List.end() ) std::cout &lt;&lt; \"Wow, the sixth element is found!\" &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"It is the end of the World\" &lt;&lt; std::endl;\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Wow, the sixth element is found!\n</code></pre>\n\n<p>However there is no great sense to use such an approach.</p>\n\n<p>You should define some properties in your class and use them to compare objects of the class. In this case you should not use pointers in the body of the operator.</p>\n\n<p>For example</p>\n\n<pre><code>class Testing \n{\npublic: \n    Testing( int i = 0 ) aProperty( i ) {}\n    int getProperty() const { return aProperty; }\nprivate:\n    int aProperty;\n};\n\nbool operator ==( const Testing &amp;lhs, const Testing &amp;rhs ) \n{\n    return lhs.getProperty() == rhs.getProperty();\n}\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 4303624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10138567962308a2a39976323ef9b408?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie", "link": "https://stackoverflow.com/users/4303624/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 31842998, "answer_count": 2, "score": 1, "last_activity_date": 1438809411, "creation_date": 1438807271, "last_edit_date": 1438808182, "question_id": 31842429, "link": "https://stackoverflow.com/questions/31842429/finding-an-element-in-list-c", "title": "Finding an Element in List c++", "body": "<p>I am trying to find an element in a list:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;list&gt; \n\nusing namespace std;\n\nclass Testing {\npublic: \nTesting();\n}\n\nlist&lt;Testing&gt; Testing_List;\n\nTesting Testing_Object;\n\nauto List_Index = find(Testing_List.begin(), Testing_List.end(), Testing_Object);\n</code></pre>\n\n<p>It gave me the Error message</p>\n\n<pre><code>Semantic Issue. Invalid Operands to binary expression \n\n\ntemplate &lt;class _InputIterator, class _Tp&gt;\ninline _LIBCPP_INLINE_VISIBILITY\n_InputIterator\nfind(_InputIterator __first, _InputIterator __last, const _Tp&amp; __value_)\n{\n    for (; __first != __last; ++__first)\n        if (*__first == __value_)\n            break;\n    return __first;\n}\n</code></pre>\n\n<p>Presumably it's because there's no proper comparison operator== defined for the Testing class. So what I did was to try to define the == operator for the Testing class like this:</p>\n\n<pre><code>bool operator==(const Testing &amp; lhs, const Testing &amp; rhs) {\n    return &amp;lhs == &amp;rhs;\n}\n</code></pre>\n\n<p>Still no luck! Can you please tell me what's wrong? How should I go about finding the element in that list of Testing objects?</p>\n\n<p>Many thanks for your time.</p>\n"}, {"tags": ["c++", "arrays", "loops", "csv"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1438808308, "post_id": 31842370, "comment_id": 51606937, "body": "I don&#39;t underrstand why a number with a decimal point would be difficult to get out of an array. In fact I don&#39;t understand what you are trying to do at all. I think you would be better off writing a very small &#39;toy&#39; program that illustrates the difficulty you are having, rather than expecting anyone to follow several hundred lines of code."}, {"owner": {"reputation": 33, "user_id": 4282991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6d2d66a56d92d9adb9caaa2e7ea8e876?s=128&d=identicon&r=PG&f=1", "display_name": "chadbyoung", "link": "https://stackoverflow.com/users/4282991/chadbyoung"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1438808921, "post_id": 31842370, "comment_id": 51607236, "body": "Thanks John - This is actually a paired down version. The real version is five files and has ~7000 lines per file. Basically I am trying to get the &quot;data sets&quot; as i described them. Do you have any specific question that might help me describe what it is that I am trying to do?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1438809066, "post_id": 31842370, "comment_id": 51607316, "body": "OK well good for trying to cut down your code, but you need to go a lot further. Can you not illustrate your problem with 10 lines of code, instead of 500? It seems to be a simple techincal issue from what I can tell."}, {"owner": {"reputation": 33, "user_id": 4282991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6d2d66a56d92d9adb9caaa2e7ea8e876?s=128&d=identicon&r=PG&f=1", "display_name": "chadbyoung", "link": "https://stackoverflow.com/users/4282991/chadbyoung"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1438809297, "post_id": 31842370, "comment_id": 51607420, "body": "Well..... I don&#39;t think so. I put the whole program up there because I am not sure what to do and this way someone can see what I have done. It could be possible to pair down the code but not sure what to toss."}], "answers": [{"tags": [], "owner": {"reputation": 2863, "user_id": 228344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pURkA.png?s=128&g=1", "display_name": "jstevenco", "link": "https://stackoverflow.com/users/228344/jstevenco"}, "is_accepted": false, "score": 0, "last_activity_date": 1438820233, "last_edit_date": 1438820233, "creation_date": 1438814189, "answer_id": 31843966, "question_id": 31842370, "link": "https://stackoverflow.com/questions/31842370/c-need-help-parsing-a-convoluted-file/31843966#31843966", "title": "c++ - Need help parsing a convoluted file", "body": "<p>To me this looks like a general issue of understanding indexing.  In general unless you have a specific reason for doing so, you should deal with your arrays as zero-offset since that's the languages native representation; e.g. a line like:</p>\n\n<pre><code>mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][1] = columnData1.calcChipPwr;\n</code></pre>\n\n<p>you should prefer as:</p>\n\n<pre><code>mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][0][0] = columnData1.calcChipPwr;\n</code></pre>\n\n<p>Second, your issue of the \"floating point\" index.  When you are calculating <code>VEUPLOOP</code> and <code>VEDOWNLOOP</code> you transform that aspect of the value away:</p>\n\n<p><code>int VEUPLOOP = (int)(columnData1.VEUP * 10.) - 10;</code></p>\n\n<p>so <code>1</code> becomes <code>0</code> and <code>1.1</code> becomes <code>1</code>.  This points out another problem  with your code -- all of your data files include <code>VEUP</code> values of <code>2</code>, which results in a <code>VEUPLOOP</code> value of <code>10</code>. Not all of your data structures are dimensioned to have valid storage at that index location, so I'd expect to see possibly garbaged values (or a crash) in calculations involving any of your <code>...Diff</code> structures. </p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1438818565, "creation_date": 1438818565, "answer_id": 31844633, "question_id": 31842370, "link": "https://stackoverflow.com/questions/31842370/c-need-help-parsing-a-convoluted-file/31844633#31844633", "title": "c++ - Need help parsing a convoluted file", "body": "<p>Stop thinking of this as one problem. There are a minimum of three problems here (read in data, process data, output results) so start by breaking the program up with functions.</p>\n\n<p>For example, with a slightly smarter stepData that knows how to read itself from a file:</p>\n\n<pre><code>struct stepData\n{\n    double VEUP;                                        // A    1\n    double VEDOWN;                                      // B    2\n    ...\n    double junk2;                                       // AX   50\n\n    bool readin(ifstream &amp;inputFile)\n    {\n        std::string line;\n        if (std::getline(inputFile, line)) // read in exactly one line\n        {  \n            std::stringstream stream(line);// parse the line \n            if (stream &gt;&gt;\n                //columnData1 &lt;&lt;-- does not exist\n                VEUP &gt;&gt;\n                VEDOWN &gt;&gt;\n                ...\n                junk2)\n            {\n                return true;\n            }\n        }\n        cout &lt;&lt; \"Something went wrong! errno \" &lt;&lt; errno &lt;&lt; \": \";\n        cout &lt;&lt; strerror(errno) &lt;&lt; \"\\n\";\n        return false;\n    }\n};\n</code></pre>\n\n<p>The previous version would read off the end of a line and into the next if the file was malformed. It also did not check any of the reads for success. This one does. Note that the errno is not set if <code>chipP5</code> is fed \"Hippo\". Better error reporting is still needed, but at least you now know there was an error.</p>\n\n<p>In addition that massive reading block in the middle of main condenses into</p>\n\n<pre><code>if (!(columnData1.readin(inputFile1) &amp;&amp;\n      columnData2.readin(inputFile2) &amp;&amp;\n      columnData3.readin(inputFile3)))\n{\n    return -1;\n}\n</code></pre>\n\n<p>If you have a bug in the input, you now have only one place to look. Not three or five or 7000. Also lost about a hundred lines of code.</p>\n\n<p>You can probably do the same with most if not all of your calculation and output code.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4282991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6d2d66a56d92d9adb9caaa2e7ea8e876?s=128&d=identicon&r=PG&f=1", "display_name": "chadbyoung", "link": "https://stackoverflow.com/users/4282991/chadbyoung"}, "is_accepted": false, "score": 0, "last_activity_date": 1439830396, "creation_date": 1439830396, "answer_id": 32055783, "question_id": 31842370, "link": "https://stackoverflow.com/questions/31842370/c-need-help-parsing-a-convoluted-file/32055783#32055783", "title": "c++ - Need help parsing a convoluted file", "body": "<p>After working on this for a while and some help from a co-worker, here a solution that works.</p>\n\n<pre><code>for (int x = 0; x &lt;=rowsCount; x +=dataGroupSize)\n{\n    double sum_err[6][6];\n\n    // set(reset) the error to zero\n    double grp_err = 0.;\n\n    // set the array contents to zero\n    for (i = 1; i &lt;= testFreqs; i++)\n    {\n        for (j = 1; j &lt;= testFreqs; j++)\n        {\n            sum_err[i][j] = 0.;\n        }\n    }\n\n    //\n    for (int y = 0; y &lt; dataGroupSize; y++)\n    {\n        for (i = 1; i &lt;= testFreqs; i++)\n        {\n            for (j = 1; j &lt;= testFreqs; j++)\n            {\n                sum_err[i][j] += diffChip[x+y][i][j];\n            }\n        }\n    }\n\n    for (i = 1; i &lt;= testFreqs; i++)\n    {\n        for (j = 1; j &lt;= testFreqs; j++)\n        {\n            grp_err += (sum_err[i][j]/dataGroupSize);\n            if (i ==testFreqs &amp;&amp; j==testFreqs)\n            {\n                avgErrFile &lt;&lt; veup_array[x] &lt;&lt; \",\" &lt;&lt; vedown_array[x] &lt;&lt; \",grp_err,\" &lt;&lt; (grp_err/25) &lt;&lt; \"\\n\";\n            }\n        }\n    }\n}\n\n\n// Calculate absolute data\nfor (int x = 1; x &lt;=rowsCount; x +=dataGroupSize)\n{\n    double sum_err_abs[6][6];\n    double grp_err_abs = 0.;\n\n    for (i = 1; i &lt;= testFreqs; i++)\n    {\n        for (j = 1; j &lt;= testFreqs; j++)\n        {\n            sum_err_abs[i][j] = 0.;\n        }\n    }\n    for (int y = 0; y &lt; dataGroupSize; y++)\n    {\n        for (i = 1; i &lt;= testFreqs; i++)\n        {\n            for (j = 1; j &lt;= testFreqs; j++)\n            {\n                sum_err_abs[i][j] += absDiffChip[x+y][i][j];\n            }\n        }\n    }\n    for (i = 1; i &lt;= testFreqs; i++)\n    {\n        for (j = 1; j &lt;= testFreqs; j++)\n        {\n            grp_err_abs += (sum_err_abs[i][j]/dataGroupSize);\n            if (i ==testFreqs &amp;&amp; j==testFreqs)\n            {\n                absAvgErrFile &lt;&lt; veup_array[x] &lt;&lt; \",\" &lt;&lt; vedown_array[x] &lt;&lt; \",grp_err_abs,\" &lt;&lt; (grp_err_abs/25) &lt;&lt; \"\\n\";\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4282991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6d2d66a56d92d9adb9caaa2e7ea8e876?s=128&d=identicon&r=PG&f=1", "display_name": "chadbyoung", "link": "https://stackoverflow.com/users/4282991/chadbyoung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1439830396, "creation_date": 1438807094, "last_edit_date": 1438808811, "question_id": 31842370, "link": "https://stackoverflow.com/questions/31842370/c-need-help-parsing-a-convoluted-file", "title": "c++ - Need help parsing a convoluted file", "body": "<p>[Setup]\nThere are three data files (csv \u2013 space delimited).</p>\n\n<p>Each file, and each line in that file, represents a data that will be used.</p>\n\n<p>Line 1 of each file makes subset_1, Line 2 of each file makes subset_2 and so on until you have four subsets. Then you have a full data set consisting of lines 1~4 in each file.</p>\n\n<p>Since there are 16 lines in each file and each data set consists of 4 lines.... there is a total of four datasets to be dealt with.</p>\n\n<p>What happens now is that each line of data for each file is run through the parser.</p>\n\n<ol>\n<li>Line 1 (all three files) \u2013 subset_1</li>\n<li>The percentage difference between multiple points is calculated.</li>\n<li>The percentage difference generated from step one is turned into an absolute value</li>\n<li>The non-absolute value, from step one, is set as the non-absolute subtotal</li>\n<li>The absolute value, from step two, is set as the absolute subtotal.</li>\n<li>Line 2 (all three files) \u2013 subset_2</li>\n<li>The percentage difference between multiple points is calculated.</li>\n<li>The percentage difference generated from step one is turned into an absolute value</li>\n<li>The non-absolute value, from step one, is added to the non-absolute subtotal</li>\n<li>The absolute value, from step two, is added to the absolute subtotal.\n\u2026\nThe same thing is done for lines 3 and 4. After line four you have dataset 1 non-absolute/absolute totals\n\u2026</li>\n<li>Line 5 (all three files) \u2013 subset_5</li>\n<li>repeat all the same steps you did previously for subsets_1~4\n\u2026</li>\n<li>Repeat again and again until all sixteen lines have been read and four datasets have been created.</li>\n</ol>\n\n<p>At present all of the above steps are working fine.</p>\n\n<p>[What I am trying to do]</p>\n\n<p>For each full data set that is created I want to output this dataset to an array so that I can use this data in more math/calculations. I have tried and succeeded at putting the data into an array, however, getting the data out of an array is not so easy because of one reason \u2013 a decimal point. Column 1 and column 2 of each data file contains a number with a decimal point. I cannot figure out how to get the data out of the array that I put it into because I don't know how :(\nCan someone help me get this working?</p>\n\n<p>XXX WORKING FILES XXX</p>\n\n<p>Statistics_BOB_1400MHz.csv _http://pastebin.com/9xXZDSxQ</p>\n\n<p>Statistics_BOB_1700MHz.csv _http://pastebin.com/a6yGcv6Z</p>\n\n<p>Statistics_BOB_2300MHz.csv _http://pastebin.com/tnGKwAyB</p>\n\n<p>XXXXXXXXXXXXXXXXXXXXX</p>\n\n<pre><code>/*\n * main.cpp\n *\n *  Created on: Jul 30, 2015\n *      Author: youngc\n */\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;cerrno&gt;\n#include &lt;errno.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\n\n//step info &amp; names for the raw data array\nstruct stepData\n{\n    // The following letters correspond to the Columns in the spread sheet\n                                                        // \"\"   0 &lt;-- Does not exist\n    double VEUP;                                        // A    1\n    double VEDOWN;                                      // B    2\n    string info;                                        // C    3\n    int group;                                          // D    4\n    int step;                                           // E    5\n    double pwr;//measured chip power from Arduino       // F    6\n    double calcDynPwr;                                  // G    7\n    double calcChipPwr;                                 // H    8\n    double estDynErr;                                   // I    9\n    double estChipPwr;                                  // J    10\n    double estDynErrAbs;                                // K    11\n    double estChipErrAbs;                               // L    12\n    string staP5PH; // Place Holder                 // M    13\n    double staP5;                                   // N    14\n    string dynP5PH; // Place Holder                 // O    15\n    double dynP5;                                   // P    16\n    string chipP5PH; // Place Holder                // Q    17\n    double chipP5;                                  // R    18\n    string staP4PH; // Place Holder                 // S    19\n    double staP4;                                   // T    20\n    string dynP4PH; // Place Holder                 // U    21\n    double dynP4;                                   // V    22\n    string chipP4PH; // Place Holder                // W    23\n    double chipP4;                                  // X    24\n    string staP3PH; // Place Holder                 // Y    25\n    double staP3;                                   // Z    26\n    string dynP3PH; // Place Holder                 // AA   27\n    double dynP3;                                   // AB   28\n    string chipP3PH; // Place Holder                // AC   29\n    double chipP3;                                  // AD   30\n    string staP2PH; // Place Holder                 // AE   31\n    double staP2;                                   // AF   32\n    string dynP2PH;// Place Holder                  // AG   33\n    double dynP2;                                   // AH   34\n    string chipP2PH; // Place Holder                // AI   35\n    double chipP2;                                  // AJ   36\n    string staP1PH; // Place Holder                 // AK   37\n    double staP1;                                   // AL   38\n    string dynP1PH; // Place Holder                 // AM   39\n    double dynP1;                                   // AN   40\n    string chipP1PH; // Place Holder                // AO   41\n    double chipP1;                                  // AP   42\n    double chipEnergyMeasure;                           // AQ   43\n    double chipEnergy5;                                 // AR   44\n    double chipEnergy4;                                 // AS   45\n    double chipEnergy3;                                 // AT   46\n    double chipEnergy2;                                 // AU   47\n    double chipEnergy1;                                 // AV   48\n    double junk1;                                       // AW   49\n    double junk2;                                       // AX   50\n};\n\n\n// There are 48 variables\n// Split the line up into an array, 0 - 50 variables starting at 0, Array Size = 51\nstepData columnData1, columnData2, columnData3;\n\n// String variable names\nstring fileData1, fileData2, fileData3;\n\n// Needed for the file.open\nifstream inputFile1, inputFile2, inputFile3;\n\n\nint main ()\n{\n    // variable name for the number of rows in a spread sheet\n    int numLines;\n    int numLines1=0, numLines2=0, numLines3=0;\n    int rowsCount=0, dataSetCount=0;\n    int i, j;\n\n    // Open one of the files to get the number of lines that you will be working with\n    inputFile1.open(\"Statistics_BOB_1400MHz.csv\");\n    inputFile2.open(\"Statistics_BOB_1700MHz.csv\");\n    inputFile3.open(\"Statistics_BOB_2300MHz.csv\");\n\n    // Make sure that all of the input files have the same number of lines\n    if ( inputFile1.is_open() )\n    {\n        //cout &lt;&lt; \"Opening the \" &lt;&lt; inputFile_1 &lt;&lt; \"file \\n\";\n        while (getline (inputFile1, fileData1))\n            {\n                numLines1++;\n            }\n    }\n    // Close the file\n    inputFile1.close();\n\n\n    //**********\n    numLines = numLines1;\n    //**********\n\n\n    if ( inputFile2.is_open() )\n    {\n        //cout &lt;&lt; \"Opening the \" &lt;&lt; inputFile_2 &lt;&lt; \"file \\n\";\n        while (getline (inputFile2, fileData2))\n            {\n                numLines2++;\n            }\n    }\n    // Close the file\n    inputFile2.close();\n\n\n    if ( inputFile3.is_open() )\n    {\n        //cout &lt;&lt; \"Opening the \" &lt;&lt; inputFile_3 &lt;&lt; \"file \\n\";\n        while (getline (inputFile3, fileData3))\n            {\n                numLines3++;\n            }\n    }\n    // Close the file\n    inputFile3.close();\n\n    cout &lt;&lt; \"What is the row count for each file of input\" &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"*************************************************\\n\";\n    cout &lt;&lt; \"***** The rowCount_1 is \" &lt;&lt; numLines1 &lt;&lt; \" *****\\n\";\n    cout &lt;&lt; \"***** The rowCount_2 is \" &lt;&lt; numLines2 &lt;&lt; \" *****\\n\";\n    cout &lt;&lt; \"***** The rowCount_3 is \" &lt;&lt; numLines3 &lt;&lt; \" *****\\n\";\n    cout &lt;&lt; \"*************************************************\\n\\n\";\n\n    //cout &lt;&lt; \"Start int main()\" &lt;&lt; \"\\n\";\n\n    // Working variable names (data imported from each line)\n    double mesChip[17][11][11][4][4];\n    double estChip[17][11][11][4][4];\n    // Create array variable names\n    double diffChip[17][5][5][4][4];                    // find the difference in power\n    double absDiffChip[17][5][5][4][4];             // find the absolute difference in power\n    double sumDiffChip[17][5][5][4][4];             // sum up the differences in power\n    double absSumDiffChip[17][5][5][4][4];          // sum up the absolute differences in power\n\n\n    // Open each results file and iterate import the data from each line of the file.\n    inputFile1.open(\"Statistics_BOB_1400MHz.csv\");\n    inputFile2.open(\"Statistics_BOB_1700MHz.csv\");\n    inputFile3.open(\"Statistics_BOB_2300MHz.csv\");\n\n\n    //cout &lt;&lt; \"Start line by line import (loop)\\n\" &lt;&lt; endl;\n    // Iterate through each line of all five files to put\n    // the data, of each line, into a raw data array\n\n    for (rowsCount=1; rowsCount &lt;=16; rowsCount++)\n    {\n        cout &lt;&lt; \"\\n ***** Starting rowsCount = \" &lt;&lt; rowsCount &lt;&lt; \"*****\\n\\n\";\n\n        //DEBUG\n\n        //DEBUG\n\n            //cout &lt;&lt; \"\\n ***** dataSetCount = \" &lt;&lt; dataSetCount &lt;&lt; \"*****\\n\\n\";\n            //cout &lt;&lt; \"import file 1\" &lt;&lt; \"\\n\";\n            // Iterate through the file\n            if ( inputFile1.is_open() )\n            {\n                inputFile1 &gt;&gt;\n                //columnData1 &lt;&lt;-- does not exist\n                columnData1.VEUP &gt;&gt;\n                columnData1.VEDOWN &gt;&gt;\n                columnData1.info &gt;&gt;\n                columnData1.group &gt;&gt;\n                columnData1.step &gt;&gt;\n                columnData1.pwr &gt;&gt;\n                columnData1.calcDynPwr &gt;&gt;\n                columnData1.calcChipPwr &gt;&gt;\n                columnData1.estDynErr &gt;&gt;\n                columnData1.estChipPwr &gt;&gt;\n                columnData1.estDynErrAbs &gt;&gt;\n                columnData1.estChipErrAbs &gt;&gt;\n                columnData1.staP5PH &gt;&gt;\n                columnData1.staP5 &gt;&gt;\n                columnData1.dynP5PH &gt;&gt;\n                columnData1.dynP5 &gt;&gt;\n                columnData1.chipP5PH &gt;&gt;\n                columnData1.chipP5 &gt;&gt;\n                columnData1.staP4PH &gt;&gt;\n                columnData1.staP4 &gt;&gt;\n                columnData1.dynP4PH &gt;&gt;\n                columnData1.dynP4 &gt;&gt;\n                columnData1.chipP4PH &gt;&gt;\n                columnData1.chipP4 &gt;&gt;\n                columnData1.staP3PH &gt;&gt;\n                columnData1.staP3 &gt;&gt;\n                columnData1.dynP3PH &gt;&gt;\n                columnData1.dynP3 &gt;&gt;\n                columnData1.chipP3PH &gt;&gt;\n                columnData1.chipP3 &gt;&gt;\n                columnData1.staP2PH &gt;&gt;\n                columnData1.staP2 &gt;&gt;\n                columnData1.dynP2PH &gt;&gt;\n                columnData1.dynP2 &gt;&gt;\n                columnData1.chipP2PH &gt;&gt;\n                columnData1.chipP2 &gt;&gt;\n                columnData1.staP1PH &gt;&gt;\n                columnData1.staP1 &gt;&gt;\n                columnData1.dynP1PH &gt;&gt;\n                columnData1.dynP1 &gt;&gt;\n                columnData1.chipP1PH &gt;&gt;\n                columnData1.chipP1 &gt;&gt;\n                columnData1.chipEnergyMeasure &gt;&gt;\n                columnData1.chipEnergy5 &gt;&gt;\n                columnData1.chipEnergy4 &gt;&gt;\n                columnData1.chipEnergy3 &gt;&gt;\n                columnData1.chipEnergy2 &gt;&gt;\n                columnData1.chipEnergy1 &gt;&gt;\n                columnData1.junk1 &gt;&gt;\n                columnData1.junk2;\n            }\n            else\n            {\n                cout &lt;&lt; \"Something went wrong! errno \" &lt;&lt; errno &lt;&lt; \": \";\n                cout &lt;&lt; strerror(errno) &lt;&lt; \"\\n\";\n                return 1;\n            }\n\n            //cout &lt;&lt; \"import file 2\" &lt;&lt; \"\\n\";\n            // Iterate through the file\n            if ( inputFile2.is_open() )\n            {\n                inputFile2 &gt;&gt;\n                //columnData2 &lt;&lt;-- does not exist\n                columnData2.VEUP &gt;&gt;\n                columnData2.VEDOWN &gt;&gt;\n                columnData2.info &gt;&gt;\n                columnData2.group &gt;&gt;\n                columnData2.step &gt;&gt;\n                columnData2.pwr &gt;&gt;\n                columnData2.calcDynPwr &gt;&gt;\n                columnData2.calcChipPwr &gt;&gt;\n                columnData2.estDynErr &gt;&gt;\n                columnData2.estChipPwr &gt;&gt;\n                columnData2.estDynErrAbs &gt;&gt;\n                columnData2.estChipErrAbs &gt;&gt;\n                columnData2.staP5PH &gt;&gt;\n                columnData2.staP5 &gt;&gt;\n                columnData2.dynP5PH &gt;&gt;\n                columnData2.dynP5 &gt;&gt;\n                columnData2.chipP5PH &gt;&gt;\n                columnData2.chipP5 &gt;&gt;\n                columnData2.staP4PH &gt;&gt;\n                columnData2.staP4 &gt;&gt;\n                columnData2.dynP4PH &gt;&gt;\n                columnData2.dynP4 &gt;&gt;\n                columnData2.chipP4PH &gt;&gt;\n                columnData2.chipP4 &gt;&gt;\n                columnData2.staP3PH &gt;&gt;\n                columnData2.staP3 &gt;&gt;\n                columnData2.dynP3PH &gt;&gt;\n                columnData2.dynP3 &gt;&gt;\n                columnData2.chipP3PH &gt;&gt;\n                columnData2.chipP3 &gt;&gt;\n                columnData2.staP2PH &gt;&gt;\n                columnData2.staP2 &gt;&gt;\n                columnData2.dynP2PH &gt;&gt;\n                columnData2.dynP2 &gt;&gt;\n                columnData2.chipP2PH &gt;&gt;\n                columnData2.chipP2 &gt;&gt;\n                columnData2.staP1PH &gt;&gt;\n                columnData2.staP1 &gt;&gt;\n                columnData2.dynP1PH &gt;&gt;\n                columnData2.dynP1 &gt;&gt;\n                columnData2.chipP1PH &gt;&gt;\n                columnData2.chipP1 &gt;&gt;\n                columnData2.chipEnergyMeasure &gt;&gt;\n                columnData2.chipEnergy5 &gt;&gt;\n                columnData2.chipEnergy4 &gt;&gt;\n                columnData2.chipEnergy3 &gt;&gt;\n                columnData2.chipEnergy2 &gt;&gt;\n                columnData2.chipEnergy1 &gt;&gt;\n                columnData2.junk1 &gt;&gt;\n                columnData2.junk2;\n            }\n            else\n            {\n                cout &lt;&lt; \"Something went wrong! errno \" &lt;&lt; errno &lt;&lt; \": \";\n                cout &lt;&lt; strerror(errno) &lt;&lt; \"\\n\";\n                return 1;\n            }\n            //cout &lt;&lt; \"import file 3\" &lt;&lt; \"\\n\";\n            // Iterate through the file\n            if ( inputFile3.is_open() )\n            {\n                inputFile3 &gt;&gt;\n                //columnData3 &lt;&lt;-- does not exist\n                columnData3.VEUP &gt;&gt;\n                columnData3.VEDOWN &gt;&gt;\n                columnData3.info &gt;&gt;\n                columnData3.group &gt;&gt;\n                columnData3.step &gt;&gt;\n                columnData3.pwr &gt;&gt;\n                columnData3.calcDynPwr &gt;&gt;\n                columnData3.calcChipPwr &gt;&gt;\n                columnData3.estDynErr &gt;&gt;\n                columnData3.estChipPwr &gt;&gt;\n                columnData3.estDynErrAbs &gt;&gt;\n                columnData3.estChipErrAbs &gt;&gt;\n                columnData3.staP5PH &gt;&gt;\n                columnData3.staP5 &gt;&gt;\n                columnData3.dynP5PH &gt;&gt;\n                columnData3.dynP5 &gt;&gt;\n                columnData3.chipP5PH &gt;&gt;\n                columnData3.chipP5 &gt;&gt;\n                columnData3.staP4PH &gt;&gt;\n                columnData3.staP4 &gt;&gt;\n                columnData3.dynP4PH &gt;&gt;\n                columnData3.dynP4 &gt;&gt;\n                columnData3.chipP4PH &gt;&gt;\n                columnData3.chipP4 &gt;&gt;\n                columnData3.staP3PH &gt;&gt;\n                columnData3.staP3 &gt;&gt;\n                columnData3.dynP3PH &gt;&gt;\n                columnData3.dynP3 &gt;&gt;\n                columnData3.chipP3PH &gt;&gt;\n                columnData3.chipP3 &gt;&gt;\n                columnData3.staP2PH &gt;&gt;\n                columnData3.staP2 &gt;&gt;\n                columnData3.dynP2PH &gt;&gt;\n                columnData3.dynP2 &gt;&gt;\n                columnData3.chipP2PH &gt;&gt;\n                columnData3.chipP2 &gt;&gt;\n                columnData3.staP1PH &gt;&gt;\n                columnData3.staP1 &gt;&gt;\n                columnData3.dynP1PH &gt;&gt;\n                columnData3.dynP1 &gt;&gt;\n                columnData3.chipP1PH &gt;&gt;\n                columnData3.chipP1 &gt;&gt;\n                columnData3.chipEnergyMeasure &gt;&gt;\n                columnData3.chipEnergy5 &gt;&gt;\n                columnData3.chipEnergy4 &gt;&gt;\n                columnData3.chipEnergy3 &gt;&gt;\n                columnData3.chipEnergy2 &gt;&gt;\n                columnData3.chipEnergy1 &gt;&gt;\n                columnData3.junk1 &gt;&gt;\n                columnData3.junk2;\n            }\n            else\n            {\n                cout &lt;&lt; \"Something went wrong! errno \" &lt;&lt; errno &lt;&lt; \": \";\n                cout &lt;&lt; strerror(errno) &lt;&lt; \"\\n\";\n                return 1;\n            }\n\n\n\n            cout &lt;&lt; \"columnData1.VEUP = \" &lt;&lt; columnData1.VEUP &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"((columnData1.VEUP * 10.)- 10 = \" &lt;&lt; ((columnData1.VEUP * 10.)-10);\n            int VEUPLOOP = (int)(columnData1.VEUP * 10.) - 10;\n            cout &lt;&lt; \"VEUPLOOP = \" &lt;&lt; VEUPLOOP &lt;&lt; \"\\n\";\n\n\n            cout &lt;&lt; \"columnData1.VEDOWN = \" &lt;&lt; columnData1.VEDOWN &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"((columnData1.VEUP * 10.)- 10 = \" &lt;&lt; ((columnData1.VEUP * 10.)-10);\n            int VEDOWNLOOP = (int)(columnData1.VEDOWN * 10.) - 10;\n            cout &lt;&lt; \"VEDOWNLOOP = \" &lt;&lt; VEDOWNLOOP &lt;&lt; \"\\n\";\n\n\n            //cout &lt;&lt; \"\\n\\nStart data calculations, VEUPLOOP, VEDOWNLOOP\" &lt;&lt; \"\\n\\n\";\n            // retrieve the relevant line data from the array\n            // -- Arduino measured power\n            mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][1] = columnData1.calcChipPwr;\n            mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][2] = columnData2.calcChipPwr;\n            mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][3] = columnData3.calcChipPwr;\n\n            // --  projected power data\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][1] = columnData1.chipP1;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][1] = columnData2.chipP1;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][1] = columnData3.chipP1;\n\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][2] = columnData1.chipP2;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][2] = columnData2.chipP2;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][2] = columnData3.chipP2;\n\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][3] = columnData1.chipP3;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][3] = columnData2.chipP3;\n            estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][3] = columnData3.chipP3;\n\n            cout &lt;&lt; \"\\nFrequency 1\" &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"mesChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][1][1] = \" &lt;&lt; mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][1] &lt;&lt; \" &lt;&lt;--\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][1][1] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][1] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][2][1] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][1] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][3][1] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][1] &lt;&lt; \"\\n\";\n\n            cout &lt;&lt; \"\\nFrequency 2\" &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"mesChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][2][2] = \" &lt;&lt; mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][2] &lt;&lt; \" &lt;&lt;--\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][1][2] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][2] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][2][2] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][2] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][3][2] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][2] &lt;&lt; \"\\n\";\n\n            cout &lt;&lt; \"\\nFrequency 3\" &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"mesChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][3][3] = \" &lt;&lt; mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][3] &lt;&lt; \" &lt;&lt;--\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][1][3] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][1][3] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][2][3] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][2][3] &lt;&lt; \"\\n\";\n            cout &lt;&lt; \"estChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][3][3] = \" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][3][3] &lt;&lt; \"\\n\\n\";\n\n            // Calculate the difference in power for the measurements\n\n            for (i = 1; i &lt;= 3; i++)\n            {\n                for (j = 1; j &lt;= 3; j++)\n                {\n                    diffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] = ((estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] - mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i])/mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i]);\n\n                    //diffDataStorage[dataPoint][loop][VEUPLOOP][VEDOWNLOOP][j][i] = diffChip[VEUPLOOP][VEDOWNLOOP][j][i];\n\n                    cout &lt;&lt; \"diffChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; \\\n                            ((estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] - \\\n                                    mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i])/mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i]) &lt;&lt; \\\n                            \"\\t&gt;&gt;&gt;&gt; \" &lt;&lt; \\\n                            diffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] &lt;&lt; \\\n                            \" =(\" &lt;&lt; estChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] &lt;&lt; \\\n                            \" - \" &lt;&lt; mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i] &lt;&lt; \") / \" &lt;&lt;\\\n                            mesChip[rowsCount][VEUPLOOP][VEDOWNLOOP][i][i] &lt;&lt; \"\\n\";\n\n                }\n                // end of for j diffChip\n            }\n            // end of for i diffChip\n\n\n    //add a line spacer\n    cout &lt;&lt; \"\\n\";\n\n            for (i = 1; i &lt;= 3; i++)\n            {\n                for (j = 1; j &lt;= 3; j++)\n                {\n                    absDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] = fabs(diffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i]);\n\n                    cout &lt;&lt; \"absDiffChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; \\\n                            fabs(diffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i]) &lt;&lt; \"\\n\";\n                }\n                // end of for j diffChip\n            }\n            // end of for i diffChip\n\n            //add a line spacer\n            cout &lt;&lt; \"\\n\";\n\n            for (i = 1; i &lt;= 3; i++)\n            {\n                for (j = 1; j &lt;= 3; j++)\n                {\n                    sumDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] += diffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i];\n                    cout &lt;&lt; \"sumDiffChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; sumDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] &lt;&lt; \"\\n\";\n                }\n                // end of for j diffChip\n            }\n            // end of for i diffChip\n\n            //add a line spacer\n            cout &lt;&lt; \"\\n\";\n\n            cout &lt;&lt; \"\\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\n\" &lt;&lt; \"\\n\";\n            for (i = 1; i &lt;= 3; i++)\n            {\n                for (j = 1; j &lt;= 3; j++)\n                {\n                    absSumDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] += absDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i];\n\n                    //int remainder = rowsCount % 52;\n                    //if (remainder == 0)\n                    //{\n                        cout &lt;&lt; \"absSumDiffChip[\" &lt;&lt; rowsCount &lt;&lt; \"][\" &lt;&lt; VEUPLOOP &lt;&lt; \"][\" &lt;&lt; VEDOWNLOOP &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; absSumDiffChip[rowsCount][VEUPLOOP][VEDOWNLOOP][j][i] &lt;&lt; \"\\n\";\n                    //}\n                }\n                // end of for j diffChip\n            }\n            // end of for i diffChip\n\n            cout &lt;&lt; \"\\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" &lt;&lt; \"\\n\";\n\n            //add a line spacer\n            cout &lt;&lt; \"\\n\";\n        // end of dataSetCount\n        //DEBUG\n\n\n\n    }\n    //end of if (rowsCount\n\n\n    inputFile1.close();\n    inputFile2.close();\n    inputFile3.close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl", "opengl-es", "shader"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1438807878, "post_id": 31842366, "comment_id": 51606691, "body": "It also looks as if the project matrix function does not correspond with the output you show. In the function you set element at [row=3, column=2] to -1, but in the output it is 0. The output looks correct to me."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1438808102, "post_id": 31842366, "comment_id": 51606825, "body": "Other thing: You are looking along negative z-direction. When you move the object to z=20, it is located behind the camera."}], "answers": [{"tags": [], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "is_accepted": false, "score": 0, "last_activity_date": 1438834170, "last_edit_date": 1438834170, "creation_date": 1438814440, "answer_id": 31844013, "question_id": 31842366, "link": "https://stackoverflow.com/questions/31842366/setting-up-opengl-view-and-projection-transformations/31844013#31844013", "title": "setting up opengl view and projection transformations", "body": "<p>thanks to @foobaz on ##opengl freenode irc channel. The issue is that opengl 3.x doesn't support doubles and my matrix as well as vector classes were double types. Switching those over to floats and the code worked just as expected.</p>\n\n<p>double point precision is supported in opengl 4.5 or greater.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1438834170, "creation_date": 1438807091, "question_id": 31842366, "link": "https://stackoverflow.com/questions/31842366/setting-up-opengl-view-and-projection-transformations", "title": "setting up opengl view and projection transformations", "body": "<p>I am making some basic steps towards rendering with opengl. I wrote some shaders as well as a some math functions to do the linear algebra.</p>\n\n<p>I can get a quad that's 2d tris to render on screen but when it comes to applying any sort of transformations I see nothing.</p>\n\n<p>Here is the relevant code as to the matrix data that I am sending to the gpu, etc.</p>\n\n<p><strong>setup matricies</strong></p>\n\n<pre><code>mat4identity(&amp;vm);\nvec3f eye    = {0, 0, 0};\nvec3f center = {0, 0, -1};\nvec3f up     = {0, 1, 0};\n\nmat4LookAt(&amp;vm, &amp;eye, &amp;center, &amp;up);\nmat4print(\"lookat\",&amp;vm);\n\nmat4OrthoProjection(&amp;opm, 200, 0, 200, 0, 0.001, 1000.0);\nmat4print(\"2d projection\",&amp;opm);\n</code></pre>\n\n<p><strong>render code</strong>    </p>\n\n<pre><code>glUseProgram(sp);\nglBindVertexArray(vao1);\n\npMat = getUniformLocation(sp, \"proj\");\nvMat = getUniformLocation(sp, \"view\");\ntransMat = getUniformLocation(sp, \"transform\");\n\nglUniformMatrix4dv(pMat, 1, GL_FALSE, opm.m);\nglUniformMatrix4dv(vMat, 1, GL_FALSE, vm.m);\nglUniformMatrix4dv(transMat, 1, GL_FALSE, tm.m);\n\nglDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>the mat4 is a column major struct in c.</p>\n\n<p><strong>mat4 lookat function</strong></p>\n\n<pre><code>mat4* lookat(vec3f* eye, vec3f* center, vec3f* up) {\nvec3f x = {1, 0, 0};\nvec3f y = {0, 1, 0};\nvec3f z = {0, 0, 1};\n\nz = vec3fsub(eye, center);\nvec3fnorm(z);\nx = vec3fcross(y, z);\ny = vec3fcross(z, x);\nvec3fnorm(x);\nvec3fnorm(y);\n\ndouble x1, y1, z1;\nx1 = vec3fdotr(&amp;x, eye);\ny1 = vec3fdotr(&amp;y, eye);\nz1 = vec3fdotr(&amp;z, eye);\n\ndouble data[] = { (&amp;x)-&gt;p[0], (&amp;y)-&gt;p[0], (&amp;z)-&gt;p[0], 0,\n                  (&amp;x)-&gt;p[1], (&amp;y)-&gt;p[1], (&amp;z)-&gt;p[1], 0,\n                  (&amp;x)-&gt;p[2], (&amp;y)-&gt;p[2], (&amp;z)-&gt;p[2], 0,\n                  x1,        y1,       z1,        1      };\nreturn makeMat4(data);\n\n}\n</code></pre>\n\n<p><strong>orthographic projection code</strong></p>\n\n<pre><code>mat4* mat4Projection(double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2*n)/(r-l),  0,           (r+l)/(r-l),        0,\n                       0,          (2*n)/(t-b),  (t+b)/(t-b),        0,\n                       0,           0,           (-(f+n))/(f-n),     (-2*(f*n))/(f-n),\n                       0,           0,           -1,                 1                };\n    return makeMat4(data);\n}\n</code></pre>\n\n<p>I also try to send down just a simple transform matrix that moves the objects 20 units in the +z direction. Running the above code and printing out the matrices along the way I get these results.</p>\n\n<pre><code>    lookat matrix\n[   1.000000    0.000000    0.000000    0.000000    ]\n[   0.000000    1.000000    0.000000    0.000000    ]\n[   0.000000    0.000000    1.000000    0.000000    ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n\n    2d projection matrix\n[   0.010000    0.000000    0.000000    -1.000000   ]\n[   0.000000    0.010000    0.000000    -1.000000   ]\n[   0.000000    0.000000    -0.002000   -1.000002   ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n\n    translation matrix  \n[   1.000000    0.000000    0.000000    0.000000    ]\n[   0.000000    1.000000    0.000000    0.000000    ]\n[   0.000000    0.000000    1.000000    20.000000   ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n</code></pre>\n\n<p>The error could be at this line when I am sending the data to the gpu</p>\n\n<pre><code>glUniformMatrix4dv(pMat, 1, GL_FALSE, opm.m);\n</code></pre>\n\n<p>but again I am not sure. This is the vertex shader:</p>\n\n<pre><code>#version 330 core\n\nuniform mat4 view;\nuniform mat4 proj;\n\nin vec3 position;\n\nvoid main()\n{\n    gl_Position = proj * view * vec4(position.x, position.y, position.z, 1.0);\n}\n</code></pre>\n\n<p>removing the proj and view transformations I get the rectangle in the middle of the screen. Using either projection or view transformations and I can't see anything on screen, just the clear background.</p>\n"}, {"tags": ["c++", "arrays", "printing"], "comments": [{"owner": {"reputation": 218, "user_id": 4143334, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1c13b6bffd5c47d3e562a516d211f621?s=128&d=identicon&r=PG&f=1", "display_name": "JackV", "link": "https://stackoverflow.com/users/4143334/jackv"}, "edited": false, "score": 0, "creation_date": 1438806932, "post_id": 31842277, "comment_id": 51606098, "body": "<code>cout &lt;&lt; anArray[N_row,N_column];</code> should be <code>cout &lt;&lt;anArray[N_row][N_column]</code> You also have no value for NumColumn and NumRow you need to set those to an integer value."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1438807180, "post_id": 31842277, "comment_id": 51606263, "body": "That <a href=\"http://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\">comma operator</a> isn&#39;t doing what you think it is..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1438807230, "post_id": 31842277, "comment_id": 51606288, "body": "Before you try arrays of arrays (C++ doesn&#39;t have &quot;2d&quot; arrays), you might need to think about the term &quot;<i>array of arrays</i>&quot;, and how that would be expressed in code. Then you would also understand why e.g. <code>anArray[N_row,N_column]</code> is wrong. And you also need to find a better understanding of simple arrays in general, and how they are indexed. I suggest you check out <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a> for a good beginner book or tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5150813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6e98f04a330589463cd7b531f1a65a?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5150813/steven"}, "edited": false, "score": 0, "creation_date": 1438807378, "post_id": 31842314, "comment_id": 51606386, "body": "Thank you, it really helped me to print out an answer, but one thing, why is it that I get: 1324 right next to each other instead of 1 2 and 3 4 under neath?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438807393, "post_id": 31842314, "comment_id": 51606396, "body": "Not real problems but would improve the code nevertheless: 4. <code>NumRow</code> and <code>NumColumn</code> are not const. 5. <code>NumRow</code> and <code>NumColumn</code> are not used in the initialization of <code>anArray</code>. 6. <code>using namespace std;</code>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 1, "user_id": 5150813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6e98f04a330589463cd7b531f1a65a?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5150813/steven"}, "edited": false, "score": 2, "creation_date": 1438807423, "post_id": 31842314, "comment_id": 51606413, "body": "@Steven Did you print a line break in between? No. The compiler can&#39;t read your mind."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 1, "user_id": 5150813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6e98f04a330589463cd7b531f1a65a?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5150813/steven"}, "edited": false, "score": 1, "creation_date": 1438807814, "post_id": 31842314, "comment_id": 51606652, "body": "@Steven they are &quot;connected&quot; since you didn&#39;t print any separator (a space for example) and the order is &quot;wrong&quot; because you&#39;re iterating the outside array in the inside for and the inside arrayS in the outside for. switch the column / row variables in the <code>for</code>s to fix that"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438807870, "post_id": 31842314, "comment_id": 51606683, "body": "@zenith - very true, but hardly the right audience for that, don&#39;t you think? maybe after a few books :-)"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438807908, "post_id": 31842314, "comment_id": 51606703, "body": "@Amit Agreed, that&#39;s why it&#39;s only a comment :)"}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 4, "last_activity_date": 1438806949, "last_edit_date": 1438806949, "creation_date": 1438806893, "answer_id": 31842314, "question_id": 31842277, "link": "https://stackoverflow.com/questions/31842277/printing-2d-arrays/31842314#31842314", "title": "Printing 2D arrays?", "body": "<p>3 problems:</p>\n\n<ol>\n<li>Array indexes start at 0.</li>\n<li><code>NumColumn</code>, <code>NumRow</code> are uninitialized.</li>\n<li>wrong syntax <code>[y,j]</code>, use <code>[i][j]</code></li>\n</ol>\n\n<p>Try like this:</p>\n\n<pre><code>...\nint NumRow = 2, NumColumn = 2;\nint anArray[2][2] = {{1,2},{3,4}};\nfor (int N_column = 0; N_column &lt; NumColumn; N_column++)\n{\n    for (int N_row = 0; N_row &lt; NumRow; N_row++)\n    {\n         cout &lt;&lt; anArray[N_row][N_column];\n    }\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19681, "user_id": 4751173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Haz6W.jpg?s=128&g=1", "display_name": "Glorfindel", "link": "https://stackoverflow.com/users/4751173/glorfindel"}, "is_accepted": false, "score": 2, "last_activity_date": 1438807257, "last_edit_date": 1438807257, "creation_date": 1438806918, "answer_id": 31842318, "question_id": 31842277, "link": "https://stackoverflow.com/questions/31842277/printing-2d-arrays/31842318#31842318", "title": "Printing 2D arrays?", "body": "<p>You declare</p>\n\n<pre><code>int NumRow, NumColumn;\n</code></pre>\n\n<p>but you never assign a value to them. Use</p>\n\n<pre><code>int NumRow = 2, NumColumn = 2;\n</code></pre>\n\n<p>instead. Also, C-arrays <a href=\"http://www.cplusplus.com/doc/tutorial/arrays/\" rel=\"nofollow\">start at 0, not at 1</a>, so you must update your for-loops as well:</p>\n\n<pre><code>for (int N_column = 0; ...\n\n    for (int N_row = 0; ...\n</code></pre>\n\n<p>Last, change the output statement, as multidimensional arrays need to be reached <a href=\"http://www.cplusplus.com/doc/tutorial/arrays/#multidimensional\" rel=\"nofollow\">in a different way</a>: </p>\n\n<pre><code>cout &lt;&lt; anArray[N_row][N_column];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 1, "last_activity_date": 1438807549, "last_edit_date": 1438807549, "creation_date": 1438807203, "answer_id": 31842405, "question_id": 31842277, "link": "https://stackoverflow.com/questions/31842277/printing-2d-arrays/31842405#31842405", "title": "Printing 2D arrays?", "body": "<p>There are few issues in your code:</p>\n\n<p><strong>1st:</strong> You declare <code>NumRow, NumColumn</code> but use them without initializing them before which cause to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behaviour</a>.</p>\n\n<p>Solution: Initialized them </p>\n\n<pre><code>NumRow = 2;\nNumColumn = 2;\n</code></pre>\n\n<p><strong>2nd:</strong> Array syntax in the following line-</p>\n\n<pre><code>cout &lt;&lt; anArray[N_row,N_column];\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>cout &lt;&lt; anArray[N_row][N_column];\n</code></pre>\n\n<p><strong>3rd:</strong> C++ arrays are <a href=\"https://en.wikipedia.org/wiki/Zero-based_numbering\" rel=\"nofollow\">zero indexed</a>, so you should start initializing the loop control variables like following:</p>\n\n<pre><code>for (int N_column = 0; N_column &lt; NumColumn; N_column++)\n{                   ^^^\n    for (int N_row = 0; N_row &lt; NumRow; N_row++)\n    {               ^^^^\n        //...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5150813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6e98f04a330589463cd7b531f1a65a?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/5150813/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1438811318, "answer_count": 3, "score": -3, "last_activity_date": 1438807549, "creation_date": 1438806758, "last_edit_date": 1438807391, "question_id": 31842277, "link": "https://stackoverflow.com/questions/31842277/printing-2d-arrays", "closed_reason": "Not suitable for this site", "title": "Printing 2D arrays?", "body": "<p>I have encountered a problem with printing 2D arrays. Here is my code, any help will be greatly appreciated.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nint NumRow, NumColumn;\nint anArray[2][2] = {{1,2},{3,4}};\nfor (int N_column = 1; N_column &lt; NumColumn; N_column++)\n{\n    for (int N_row = 1; N_row &lt; NumRow; N_row++)\n{\n    cout &lt;&lt; anArray[N_row,N_column];\n}\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1438805965, "post_id": 31842076, "comment_id": 51605587, "body": "Unless you save the dimensions ahead of time you can&#39;t. Use <code>std::vector</code> or <code>std::array</code>."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 2, "creation_date": 1438806092, "post_id": 31842076, "comment_id": 51605653, "body": "Store them in constants"}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806224, "post_id": 31842076, "comment_id": 51605713, "body": "This was what I tried to avoid. Because if I save them I also have to pass them to the class making the code a bit messier. But it seems I will have to do that."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438806365, "post_id": 31842076, "comment_id": 51605796, "body": "Does the array have to be allocated dynamically?"}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806435, "post_id": 31842076, "comment_id": 51605827, "body": "No. The array is, once created, not changed anymore."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438806499, "post_id": 31842076, "comment_id": 51605862, "body": "I mean, do you have to allocate it with <code>new</code>? Or are the dimensions really this small and known at compile time? If you create your array like <code>MyStruct mySt[5][4][3]</code> then you can do what you are asking."}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806677, "post_id": 31842076, "comment_id": 51605968, "body": "I cant exactly follow you, but I can describe how the arrays are created. There are 3 fix sizes for the dimensions eg. 32, 32, 64. Then in 3 loops the arrays are created like in sample code and filled with data. Those arrays are often created at runtime."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1438807938, "post_id": 31842076, "comment_id": 51606724, "body": "Your &quot;3D array&quot; doesn&#39;t have a size. The problem of making ND array this way is that, not all columns/rows/depths are necessarily the same length. Like the one you have created, all rows except [0,0,:] are of length 0."}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438808028, "post_id": 31842076, "comment_id": 51606785, "body": "In the way the array is created it is given that colums/rows/depths have to have the same size.  The short example is not representative, sorry."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438808029, "post_id": 31842076, "comment_id": 51606787, "body": "This would be a good place to use <code>std::array</code>, since it knows its own size (in a zero-overhead manner). Also its superior to raw arrays in other ways as well."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438808244, "post_id": 31842076, "comment_id": 51606892, "body": "@Eskalior You can do that but it&#39;s not enforced by the standard."}], "answers": [{"comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438807115, "post_id": 31842140, "comment_id": 51606220, "body": "I don&#39;t think it is true that you cannot get sizes from &quot;plain C++ arrays&quot;. That is exactly what <a href=\"http://en.cppreference.com/w/cpp/types/extent\" rel=\"nofollow noreferrer\"><code>std::extent</code></a> is for but you can&#39;t get the size of a plain C++ array if all you have is a pointer."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1438808658, "post_id": 31842140, "comment_id": 51607112, "body": "@ChrisDrew You are right, I should have clarified that I am talking about the situation in OP&#39;s post. Of course you can get the number of elements of an array-typed variable by using either <code>std::extent</code> or the old-way division of <code>sizeof</code>s."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1438808552, "last_edit_date": 1438808552, "creation_date": 1438806180, "answer_id": 31842140, "question_id": 31842076, "link": "https://stackoverflow.com/questions/31842076/how-to-get-the-length-of-multidimensional-struct-arrays/31842140#31842140", "title": "How to get the length of multidimensional struct arrays?", "body": "<p>You cannot get sizes from plain C++ arrays allocated with <code>new</code> and stored as pointers: there is no language construct that would let you retrieve an array size.</p>\n\n<p>There are two options for how to deal with this situation:</p>\n\n<ul>\n<li>In C++ use a container that supports sizing - for example, <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a> of vectors of vectors, or</li>\n<li>In C (or in C++, if you prefer to stay with arrays) construct a separate 3D array of sizes, and pass it along with the <code>mySt</code> array.</li>\n</ul>\n"}], "owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 31842140, "answer_count": 1, "score": 3, "last_activity_date": 1438808552, "creation_date": 1438805901, "question_id": 31842076, "link": "https://stackoverflow.com/questions/31842076/how-to-get-the-length-of-multidimensional-struct-arrays", "title": "How to get the length of multidimensional struct arrays?", "body": "<p>I've got a class that gets a 3-dimensional struct array in the constructor. For further calculations it also needs the length of each dimension.</p>\n\n<p>a short example:</p>\n\n<pre><code>MyStruct*** mySt;\nmySt = new MyStruct**[5]\nmySt[0] = new MyStruct*[4]\nmySt[0][0] = new MyStruct[3]\n</code></pre>\n\n<p>How can I get those values (5, 4, 3) back to save them in the new class without explicitely sending them to the constructor?</p>\n"}, {"tags": ["c++", "file", "whitespace", "getline"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1438806111, "post_id": 31842067, "comment_id": 51605660, "body": "It might be time to learn how to use a debugger, and how to step through the code line by line while observing variables and their values."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1438806309, "post_id": 31842067, "comment_id": 51605760, "body": "There are a few points that I find suspect though, and those all is about why you use dynamic memory allocation? Not once, but <i>twice</i>. Why not simply use <code>std::string</code> as well, and there are may example on how to <i>trim</i> (that&#39;s the term) leading whitespace, for example <a href=\"http://stackoverflow.com/questions/216823/whats-the-best-way-to-trim-stdstring/217605#217605\">this old answer here</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438806445, "post_id": 31842067, "comment_id": 51605830, "body": "As for the reason behind your troubles, I&#39;m guessing you&#39;re on a 32-bit system where pointers are 32 bits (<i>four bytes</i>). You really need to learn more about the <a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\"><code>sizeof</code> operator</a>."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1438810237, "last_edit_date": 1438810237, "creation_date": 1438809931, "answer_id": 31843115, "question_id": 31842067, "link": "https://stackoverflow.com/questions/31842067/remove-tabs-with-more-than-5-in-a-line/31843115#31843115", "title": "Remove tabs with more than 5 in a line", "body": "<p><code>sizeof(separator)</code> should be <code>strlen(separator)</code></p>\n\n<p>sizeof is the size of the <code>separator</code> variable, not the length of the string. Since <code>separator</code> is a <code>char*</code> this is four bytes. Now do you see why your code doesn't work when you have more than five tabs?</p>\n\n<p>And as others have pointed out there really is no reason to copy the string to the separator array. Why not just examine the characters where they are? <code>isspace(buf[j])</code> works just as well as <code>isspace(separator[j])</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5195401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f06d0f0cf4f2a9e4a9dcce1febc910?s=128&d=identicon&r=PG&f=1", "display_name": "popcorn416", "link": "https://stackoverflow.com/users/5195401/popcorn416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438847755, "creation_date": 1438805876, "last_edit_date": 1438847755, "question_id": 31842067, "link": "https://stackoverflow.com/questions/31842067/remove-tabs-with-more-than-5-in-a-line", "title": "Remove tabs with more than 5 in a line", "body": "<p>I am trying to extract a snippet out of a sourcecode from a website and now I want to delete all the spaces and tabs before the tags in each line. So I copied the string to a char and now I am checking each character with isspace (also tried '\\t' and ' ') each line till there are some other chars like '&lt;' doesn't matter which one while counting how much spaces and tabs there are. Subsequently I create another char and write the separator(line) to it but there I just skip the spaces (with [chars+i]). This method works pretty good but the problem is if there are more than 5 tabs then it just don't work properly. I have absolutely no idea where the fault is.</p>\n\n<pre><code>for(int i = 0;i &lt; lines;i++){\n\n    getline(codefile, buf);\n\n    char *separator = new char[buf.size()+1];\n    separator[buf.size()] = 0;\n    memcpy(separator,buf.c_str(),buf.size());\n\n    int chars = 0;\n\n    for(int j = 0; j &lt;= sizeof(separator); j++){\n\n        if(isspace(separator[j])){\n            chars++;    \n        }\n        else{\n            break;\n        }\n    }\n\n    char *newbuf= new char[buf.size()-chars+1];\n    newbuf[buf.size()-chars] = 0;\n\n    for(int k = 0; k &lt;= buf.size()-chars+1; k++){\n        newbuf[k] = separator[chars+k];\n    }\n\n    if(i &gt; lcounter){\n        cout &lt;&lt; newbuf &lt;&lt; i &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n\n<p>Here is the snippet of the sourcecode from the website. You can see it at the image tag, at the closing figure tag and the p tag. They have more than 5 tabs (sorry I had to censor it).</p>\n\n<pre><code>&lt;div class=\"xxx\"&gt;\n\n   &lt;article class=\"xxx\" data-id=\"0\"&gt;\n    &lt;a href=\"link\" class=\"tile\" style=\"background-image:url('x.jpg');background-position:left center\"  data-more=\"&amp;lt;a href=x\" data-clicks=\"&amp;lt;i class=&amp;quot;fa fa-eye&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;\" data-teaserimg=\"x.jpg\"&gt;\n    &lt;time datetime=\"2015\"&gt;\n        &lt;span&gt;2015&lt;/span&gt;\n    &lt;/time&gt;\n    &lt;h1 class=\"title\"&gt;\n        &lt;span&gt;x&lt;/span&gt;\n    &lt;/h1&gt;\n    &lt;div class=\"x\"&gt;x&lt;/div&gt;\n    &lt;div class=\"x\"&gt;x&lt;/div&gt;      \n    &lt;div class=\"x\"&gt;\n        &lt;figure class=\"x\"&gt;\n            &lt;img src=\"x.jpg\" width=\"1\" height=\"1\" alt=\"\"&gt;\n        &lt;/figure&gt;\n        &lt;p&gt;\n            &lt;strong&gt;x&lt;/strong&gt;xxx\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>Sorry I can't post a picture and I hope it is understandable.</p>\n"}, {"tags": ["c++", "macos", "c++11", "g++", "c++14"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1438805606, "post_id": 31841907, "comment_id": 51605394, "body": "He probably wrote it in global scope (or didn&#39;t test it)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1438806089, "post_id": 31841907, "comment_id": 51605651, "body": "<code>stringify</code> doesn&#39;t have a way of getting the definition of <code>unit.</code> Changing the default capture method for <code>stringify</code> to reference, or just capturing <code>unit</code> by reference should let it compile, though that&#39;s no guarantee of proper behavior..."}, {"owner": {"reputation": 266, "user_id": 608731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/YTUjg.png?s=128&g=1", "display_name": "Mike Bell", "link": "https://stackoverflow.com/users/608731/mike-bell"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1438973318, "post_id": 31841907, "comment_id": 51686958, "body": "@jaggedSpire Thanks, that actually helps. I realize that the error isn&#39;t coming from a call to stringify but rather to another function. I will update the main post with new code and error(s)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1438991812, "post_id": 31841907, "comment_id": 51693983, "body": "@MikeBell I take it you&#39;re using clang? gcc compiles and links it, and clang outputs the same error message as you gave on <a href=\"http://coliru.stacked-crooked.com/a/ce1351b6ebb7be8f\" rel=\"nofollow noreferrer\">these</a> settings. Also: Have you moved the lambdas into the <code>main</code> function? Your pasted code isn&#39;t quit clear."}, {"owner": {"reputation": 266, "user_id": 608731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/YTUjg.png?s=128&g=1", "display_name": "Mike Bell", "link": "https://stackoverflow.com/users/608731/mike-bell"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1439041198, "post_id": 31841907, "comment_id": 51704004, "body": "@jaggedSpire Oh lol I didn&#39;t realize my g++ was pointing to clang. Thanks for the heads up. Yea, the lambdas are in the main function. I&#39;ll get back here once I&#39;ve tried compiling with the <i>real</i> g++."}], "answers": [{"comments": [{"owner": {"reputation": 266, "user_id": 608731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/YTUjg.png?s=128&g=1", "display_name": "Mike Bell", "link": "https://stackoverflow.com/users/608731/mike-bell"}, "edited": false, "score": 0, "creation_date": 1438973254, "post_id": 31851799, "comment_id": 51686930, "body": "Thanks. This definitely allows for stringify to be called now, and helped me realize where the real problem is. I will update the main post with new code and error message(s)."}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 2, "last_activity_date": 1438852938, "creation_date": 1438852938, "answer_id": 31851799, "question_id": 31841907, "link": "https://stackoverflow.com/questions/31841907/variable-cannot-be-implicitly-captured-in-a-lambda-with-no-capture-default-speci/31851799#31851799", "title": "Variable cannot be implicitly captured in a lambda with no capture-default specified", "body": "<p>There you go:</p>\n\n<pre><code>auto unit = [](auto x) {\n    return [=](){ return x; };\n};\nauto stringify = [unit](auto x) { // or '&amp;unit\n    stringstream ss;\n    ss &lt;&lt; x;\n    return unit(ss.str());\n};\n</code></pre>\n\n<p>Lambdas don't capture anything of outer-scope, you must specify it. </p>\n\n<p>EDIT: User 'T.C.' is right - both of the lambdas are global in that article. In that case <code>unit</code> gets accessed without specification. And with specification (which I gave), it fails in VC2015.</p>\n"}], "owner": {"reputation": 266, "user_id": 608731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/YTUjg.png?s=128&g=1", "display_name": "Mike Bell", "link": "https://stackoverflow.com/users/608731/mike-bell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13373, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1438973635, "creation_date": 1438805317, "last_edit_date": 1438973635, "question_id": 31841907, "link": "https://stackoverflow.com/questions/31841907/variable-cannot-be-implicitly-captured-in-a-lambda-with-no-capture-default-speci", "title": "Variable cannot be implicitly captured in a lambda with no capture-default specified", "body": "<p>I'm following this guy's blog post on C++ Lambdas <a href=\"http://cpptruths.blogspot.com/2014/03/fun-with-lambdas-c14-style-part-1.html\" rel=\"nofollow\">http://cpptruths.blogspot.com/2014/03/fun-with-lambdas-c14-style-part-1.html</a> and while compiling his code, I ran into a compiler error:</p>\n\n<pre><code>variable 'unit' cannot be implicitly captured in a lambda with no capture-default specified\"\n</code></pre>\n\n<p>The lines that it is referencing are below:</p>\n\n<pre><code>auto unit = [](auto x) {\n    return [=](){ return x; };\n};\nauto stringify = [](auto x) {\n    stringstream ss;\n    ss &lt;&lt; x;\n    return unit(ss.str());\n};\n</code></pre>\n\n<p>The guy seems like he knows about the new Lambda features in C++, which I certainly do not, which is why I am here now. Can someone shed some light on this problem? What do I need to do to get this code compiling correctly? </p>\n\n<p>Thanks in advance! :)</p>\n\n<hr/>\n\n<p>edit: Turns out the problem wasn't with unit or stringify. Let me paste the new code:</p>\n\n<pre><code>auto unit = [](auto x) {\n    return [=](){ return x; };\n};\n\nauto stringify = [unit](auto x) {\n    stringstream ss;\n    ss &lt;&lt; x;\n    return unit(ss.str());\n};\n\nauto bind = [](auto u) {\n    return [=](auto callback) {\n        return callback(u());\n    };\n};\n\ncout &lt;&lt; \"Left identity: \" &lt;&lt; stringify(15)() &lt;&lt; \"==\" &lt;&lt; bind(unit(15))(stringify)() &lt;&lt; endl;\ncout &lt;&lt; \"Right identity: \" &lt;&lt; stringify(5)() &lt;&lt; \"==\" &lt;&lt; bind(stringify(5))(unit)() &lt;&lt; endl;\n//cout &lt;&lt; \"Left identity: \" &lt;&lt; stringify(15)() &lt;&lt; endl;\n//cout &lt;&lt; \"Right identity: \" &lt;&lt; stringify(5)() &lt;&lt; endl;\n</code></pre>\n\n<p>Ok, so, the call to \"bind\" is what is causing the following error:</p>\n\n<pre><code>\"__ZZZ4mainENK4$_17clINSt3__112basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEEEEDaT_ENUlvE_C1ERKSA_\", referenced from:\n  std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; main::$_19::operator()&lt;auto main::$_17::operator()&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;) const::'lambda'()&gt;(auto main::$_17::operator()&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;) const::'lambda'()) const in funwithlambdas-0f8fc6.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [funwithlambdas] Error 1\n</code></pre>\n\n<p>I'll play around with it a bit more and if I fix it I will post here, but please post your solution or comment if you are able to. Thanks again!</p>\n"}, {"tags": ["c++", "performance", "boost", "time-measurement"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438805485, "post_id": 31841824, "comment_id": 51605345, "body": "Calculating <code>(x - mu) &#47; sigma</code> is wasteful. <code>1 &#47; 2</code> is <code>.5</code>. Are you measuring code compiled with optimization enabled? Timing is more reliable if you perform the calculation in a loop many times. Aim to run for a few seconds at least and divide the total time by the iteration count."}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438805700, "post_id": 31841824, "comment_id": 51605444, "body": "<code>(x - mu ) &#47; sigma</code> with those values was just the first test. But no, I don&#39;t know much about optimization in c++ (I&#39;m a Java-Developer)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438805867, "post_id": 31841824, "comment_id": 51605523, "body": "Sorry, I meant calculating <code>(x - mu ) &#47; sigma</code> twice was wasteful. You now need to find out whether you are compiling optimize code. Only you can know that. We can&#39;t see your compiler options."}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438806107, "post_id": 31841824, "comment_id": 51605657, "body": "How would you recommend me to write <code>(x - mu) &#47; sigma</code>?  I read a bit general stuff about optimisation and, now the result is: Boost faster: 48; than own implementation: 46248  (for better reading purposes I wrote the options in the question)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438806285, "post_id": 31841824, "comment_id": 51605744, "body": "I recommend calculating that value once not twice"}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438806572, "post_id": 31841824, "comment_id": 51605902, "body": "Sry, got it. Any way, there&#39;s not much difference now: <code>double musigma = (x - mu) &#47; sigma;     return (1 &#47; (sigma * (std::sqrt(boost::math::constants::pi&lt;double&gt;()*2))))*std::e&zwnj;&#8203;xp(-0.5)*(musigma*mu&zwnj;&#8203;sigma));</code>  Boost faster: 78; than own implementation: 46570"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438806812, "post_id": 31841824, "comment_id": 51606043, "body": "Is boost special casing this? Try using more general values of mu, sigma and x. It probably also does not call sqrt(2pi), having that value as a const."}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438807480, "post_id": 31841824, "comment_id": 51606463, "body": "You might be right about that. But the question was mostly why boost is directly three times faster than called within the class: <code>Mu : 0; Sigma: 1; x0 Result0.398942 Boost faster: 35; than own implementation: 37889 Mu : 122; Sigma: 50; x2.5 Result0.000458747 Boost faster: 35; than own implementation: 5290 Mu : 5520; Sigma: 599; x4529.5 Result0.000169717 Boost faster: 57; than own implementation: 717</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438807717, "post_id": 31841824, "comment_id": 51606596, "body": "Oh. I thought you wanted to know why your code was 100x slower. Never mind."}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438807828, "post_id": 31841824, "comment_id": 51606662, "body": "Nevermind, the outcome of your ideas was interesting to see. In the end My code became strangely 50 times faster while boost slowed down by two times"}], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1438808530, "post_id": 31842511, "comment_id": 51607038, "body": "For me as a Java-Person this is a huge surprise to see, much thanks for telling me it took much more time. Now we are 195:6437 and 112:171. With the headers I can&#39;t do much about it, I have to separate. Anyway, the new performance-differences are amazing"}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1438809662, "post_id": 31842511, "comment_id": 51607596, "body": "Have you tried to compile with -ffast-math and -flto ?"}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 1, "creation_date": 1438844518, "post_id": 31842511, "comment_id": 51618390, "body": "Both of them. And I&#39;m positively surprised by the results. Even though the performance-boost of almost 90% came from the removal of <code>new</code>. Many thanks I didn&#39;t know that"}], "tags": [], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "is_accepted": false, "score": 3, "last_activity_date": 1438807629, "creation_date": 1438807629, "answer_id": 31842511, "question_id": 31841824, "link": "https://stackoverflow.com/questions/31841824/huge-differences-in-implementations/31842511#31842511", "title": "Huge differences in implementations?", "body": "<p>Firs of all, you are allocating your object dynamically, with <code>new</code>:</p>\n\n<pre><code>NormalDistribution1D *n = new NormalDistribution1D(mu, sigma);\ndouble nres = n-&gt;prob(x);\n</code></pre>\n\n<p>If you did just like you have done with boost, that alone would be sufficient to have the same (or comparable) speed:</p>\n\n<pre><code>NormalDistribution1D n(mu, sigma);\ndouble nres = n.prob(x);\n</code></pre>\n\n<p>Now, I don't know if the way you spelled out your expression in <code>NormalDistribution1D::prob()</code> is significant, but I am skeptical that it would make any difference to write it in a more \"optimized\" way, because arithmetic expressions like that is the kind of thing compilers can optimize very well. Maybe it will get faster if you user the <code>--ffast-math</code> switch, that will give more optimization freedom to the compiler.</p>\n\n<p>Also, if the definition of <code>double NormalDistribution1D::prob(double x)</code> is in another compilation unit (another .cpp file), the compiler will be unable to inline it, and that will also make a noticeable overhead (maybe twice slower or less). In boost, almost everithing is implemented inside headers, so inlines will always happen when the compiler seems fit. You can overcome this problem if you compile and link with gcc's <code>-flto</code> switch.</p>\n"}, {"tags": [], "owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "is_accepted": false, "score": 2, "last_activity_date": 1438807716, "creation_date": 1438807716, "answer_id": 31842534, "question_id": 31841824, "link": "https://stackoverflow.com/questions/31841824/huge-differences-in-implementations/31842534#31842534", "title": "Huge differences in implementations?", "body": "<p>You didn't compile with the <code>-ffast-math</code> option. That means the compiler cannot (in fact, must not!) simplify <code>(-1 / 2)*(((x - mu) / sigma)*((x - mu) / sigma))</code> to a form similar to that used in <code>boost::math::pdf</code>,</p>\n\n<pre><code>expo = (x - mu) / sigma\nexpo *= -x\nexpo /= 2\nresult = std::exp(expo)\nresult /= sigma * std::sqrt(2 * boost::math::constants::pi&lt;double&gt;())\n</code></pre>\n\n<p>The above forces the compiler to do the fast (but potentially unsafe / inaccurate) calculation without resorting to using <code>-ffast_math</code>.</p>\n\n<p>Secondly, the time difference between the above and your code is minimal compared to the time needed to allocate from the heap (<code>new</code>) vs. the stack (local variable). You are timing the cost of allocating dynamic memory.</p>\n"}], "owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438807716, "creation_date": 1438804976, "last_edit_date": 1438806154, "question_id": 31841824, "link": "https://stackoverflow.com/questions/31841824/huge-differences-in-implementations", "title": "Huge differences in implementations?", "body": "<p>I am writing a few functionalities for distributions and used the normal-distribution to run the tests between my implementation and C++ Boost.</p>\n\n<p>Given the Probability Density Function (pdf: <a href=\"http://www.mathworks.com/help/stats/normpdf.html\" rel=\"nofollow\">http://www.mathworks.com/help/stats/normpdf.html</a>) </p>\n\n<p>Which I wrote like that:</p>\n\n<pre><code>double NormalDistribution1D::prob(double x) {\n    return (1 / (sigma * (std::sqrt(boost::math::constants::pi&lt;double&gt;()*2))))*std::exp((-1 / 2)*(((x - mu) / sigma)*((x - mu) / sigma)));\n}\n</code></pre>\n\n<p>To compare my results the way how it is done with C++ Boost:</p>\n\n<pre><code>    boost::math::normal_distribution &lt;&gt; d(mu, sigma);\n    return boost::math::pdf(d, x);\n</code></pre>\n\n<p>I'm not very positively surprised - my version took <strong>44278</strong> nano Seconds, boost\nonly <strong>326</strong>.</p>\n\n<p>So I played a bit around and wrote the method probboost in my NormalDistribution1D-Class and compared all three:</p>\n\n<pre><code>void MATTest::runNormalDistribution1DTest1() {\n    double mu = 0;\n    double sigma = 1;\n    double x = 0;\n\n    std::chrono::high_resolution_clock::time_point tn_start = std::chrono::high_resolution_clock::now();\n    NormalDistribution1D *n = new NormalDistribution1D(mu, sigma);\n    double nres = n-&gt;prob(x);\n    std::chrono::high_resolution_clock::time_point tn_end = std::chrono::high_resolution_clock::now();\n\n    std::chrono::high_resolution_clock::time_point tdn_start = std::chrono::high_resolution_clock::now();\n    NormalDistribution1D *n1 = new NormalDistribution1D(mu, sigma);\n    double nres1 = n1-&gt;probboost(x);\n    std::chrono::high_resolution_clock::time_point tdn_end = std::chrono::high_resolution_clock::now();\n\n    std::chrono::high_resolution_clock::time_point td_start = std::chrono::high_resolution_clock::now();\n    boost::math::normal_distribution &lt;&gt; d(mu, sigma);\n    double dres = boost::math::pdf(d, x);\n    std::chrono::high_resolution_clock::time_point td_end = std::chrono::high_resolution_clock::now();\n\n    std::cout &lt;&lt; \"Mu : \" &lt;&lt; mu &lt;&lt; \"; Sigma: \" &lt;&lt; sigma &lt;&lt; \"; x\" &lt;&lt; x &lt;&lt; std::endl;\n    if (nres == dres) {\n        std::cout &lt;&lt; \"Result\" &lt;&lt; nres &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"\\033[1;31mRes incorrect: \" &lt;&lt; nres &lt;&lt; \"; Correct: \" &lt;&lt; dres &lt;&lt; \"\\033[0m\" &lt;&lt; std::endl;\n    }\n\n\n    auto duration_n = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(tn_end - tn_start).count();\n    auto duration_d = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(td_end - td_start).count();\n    auto duration_dn = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(tdn_end - tdn_start).count();\n\n    std::cout &lt;&lt; \"own boost: \" &lt;&lt; duration_dn &lt;&lt; std::endl;\n    if (duration_n &lt; duration_d) {\n        std::cout &lt;&lt; \"Boost: \" &lt;&lt; (duration_d) &lt;&lt; \"; own implementation: \" &lt;&lt; duration_n &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"\\033[1;31mBoost faster: \" &lt;&lt; (duration_d) &lt;&lt; \"; than own implementation: \" &lt;&lt; duration_n &lt;&lt; \"\\033[0m\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The results are (Was compiling and running the checking-Method 3 times)</p>\n\n<blockquote>\n  <p>own boost: 1082 Boost faster: 326; than own implementation: 44278</p>\n  \n  <p>own boost: 774 Boost faster: 216; than own implementation: 34291</p>\n  \n  <p>own boost: 769 Boost faster: 230; than own implementation: 33456</p>\n</blockquote>\n\n<p>Now this puzzles me:\nHow is it possible the method from the class takes 3 times longer than the statements which were called directly?</p>\n\n<p>My compiling options:</p>\n\n<pre><code>g++ -O2   -c -g -std=c++11 -MMD -MP -MF \"build/Debug/GNU-Linux-x86/main.o.d\" -o build/Debug/GNU-Linux-x86/main.o main.cpp\n\ng++ -O2    -o ***Classes***\n</code></pre>\n"}, {"tags": ["c++", "windows-runtime", "buffer", "windows-10", "uwp"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1438805656, "post_id": 31841790, "comment_id": 51605423, "body": "Looks like you should use <code>Microsoft::WRL::ComPtr&lt;IMemoryBufferByteAccess&gt;</code> with <code>reference</code>, not <code>buffer</code>."}, {"owner": {"reputation": 1192, "user_id": 1742977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbddfe1d5ea7d5a71e0510273b87338?s=128&d=identicon&r=PG", "display_name": "Gregsparrow", "link": "https://stackoverflow.com/users/1742977/gregsparrow"}, "edited": false, "score": 0, "creation_date": 1449737361, "post_id": 31841790, "comment_id": 56140087, "body": "Hi. Did you manage to display image in HSV color space ? I&#39;ve got some artifacts ... In c# (UWP) i&#39;ve got SoftwareBitmap  pass to c++, there convert SoftwareBitmap to cv::Mat , change color cpase to HSV , convert Mat to SoftwareBitmap and pass back to c#.. And set Image.Source ...    And that what i&#39;ve got .. <a href=\"https://onedrive.live.com/redir?resid=357572637B8B8769!150460&amp;authkey=!ACmXOuwLkoOyxFY&amp;v=3&amp;ithint=photo%2cPNG\" rel=\"nofollow noreferrer\">onedrive.live.com/&hellip;</a>"}, {"owner": {"reputation": 1192, "user_id": 1742977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbddfe1d5ea7d5a71e0510273b87338?s=128&d=identicon&r=PG", "display_name": "Gregsparrow", "link": "https://stackoverflow.com/users/1742977/gregsparrow"}, "edited": false, "score": 0, "creation_date": 1449741110, "post_id": 31841790, "comment_id": 56142418, "body": "More in detail, here <a href=\"http://stackoverflow.com/questions/34198259/winrt-c-win10-opencv-hsv-color-space-image-display-artifacts\" title=\"winrt c win10 opencv hsv color space image display artifacts\">stackoverflow.com/questions/34198259/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5195429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7197973aa53eb589dca1abc6ff4c243a?s=128&d=identicon&r=PG&f=1", "display_name": "Steffen", "link": "https://stackoverflow.com/users/5195429/steffen"}, "edited": false, "score": 0, "creation_date": 1438854905, "post_id": 31850028, "comment_id": 51624943, "body": "Thanks! 3 days of research and it&#39;s so simple.... your code even solved my memory allocation problem"}, {"owner": {"reputation": 1192, "user_id": 1742977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbddfe1d5ea7d5a71e0510273b87338?s=128&d=identicon&r=PG", "display_name": "Gregsparrow", "link": "https://stackoverflow.com/users/1742977/gregsparrow"}, "edited": false, "score": 0, "creation_date": 1449743523, "post_id": 31850028, "comment_id": 56144014, "body": "Can you please look on my question? <a href=\"http://stackoverflow.com/questions/34198259/winrt-c-win10-opencv-hsv-color-space-image-display-artifacts\" title=\"winrt c win10 opencv hsv color space image display artifacts\">stackoverflow.com/questions/34198259/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4537, "user_id": 964222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FtScS.jpg?s=128&g=1", "display_name": "Jeffrey Chen", "link": "https://stackoverflow.com/users/964222/jeffrey-chen"}, "is_accepted": true, "score": 1, "last_activity_date": 1438847976, "creation_date": 1438847976, "answer_id": 31850028, "question_id": 31841790, "link": "https://stackoverflow.com/questions/31841790/winrt-c-win10-accessing-bytes-from-softwarebitmap-bitmapbuffer/31850028#31850028", "title": "WinRT C++ (Win10) Accessing bytes from SoftwareBitmap / BitmapBuffer", "body": "<p>You should use reference instead of buffer in reinterpret_cast.</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;wrl\\wrappers\\corewrappers.h&gt;\n#include &lt;wrl\\client.h&gt;\n\nMIDL_INTERFACE(\"5b0d3235-4dba-4d44-865e-8f1d0e4fd04d\") \nIMemoryBufferByteAccess : IUnknown\n{\n    virtual HRESULT STDMETHODCALLTYPE GetBuffer(\n        BYTE   **value,\n        UINT32 *capacity\n        );\n};\n\n        auto previewFrame = currentFrame-&gt;SoftwareBitmap;\n\n        auto buffer = previewFrame-&gt;LockBuffer(BitmapBufferAccessMode::ReadWrite);\n\n        auto reference = buffer-&gt;CreateReference();\n\n        ComPtr&lt;IMemoryBufferByteAccess&gt; bufferByteAccess;\n\n        HRESULT result = reinterpret_cast&lt;IInspectable*&gt;(reference)-&gt;QueryInterface(IID_PPV_ARGS(&amp;bufferByteAccess));\n\n        if (result == S_OK)\n        {\n            WriteLine(\"Get interface successfully\");\n\n            BYTE* data = nullptr;\n\n            UINT32 capacity = 0;\n\n            result = bufferByteAccess-&gt;GetBuffer(&amp;data, &amp;capacity);\n\n            if (result == S_OK)\n            {\n                WriteLine(\"get data access successfully, capacity: \" + capacity);\n            }\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 6019188, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aUi8nY53hyk/AAAAAAAAAAI/AAAAAAAAAAA/i4D2Co2L85E/photo.jpg?sz=128", "display_name": "Martin Vachovski", "link": "https://stackoverflow.com/users/6019188/martin-vachovski"}, "is_accepted": false, "score": 0, "last_activity_date": 1503073754, "creation_date": 1503073754, "answer_id": 45761163, "question_id": 31841790, "link": "https://stackoverflow.com/questions/31841790/winrt-c-win10-accessing-bytes-from-softwarebitmap-bitmapbuffer/45761163#45761163", "title": "WinRT C++ (Win10) Accessing bytes from SoftwareBitmap / BitmapBuffer", "body": "<p>I'm currently accessing the raw <code>unsigned char* data</code> from each frame I obtain on a <code>MediaFrameReader::FrameArrived</code>  event without using WRL and COM...</p>\n\n<p>Here it is how:</p>\n\n<pre><code>void MainPage::OnFrameArrived(MediaFrameReader ^reader, MediaFrameArrivedEventArgs ^args)\n{\n    MediaFrameReference ^mfr = reader-&gt;TryAcquireLatestFrame();\n    VideoMediaFrame ^vmf = mfr-&gt;VideoMediaFrame;\n    VideoFrame ^vf = vmf-&gt;GetVideoFrame();\n    SoftwareBitmap ^sb = vf-&gt;SoftwareBitmap; \n    Buffer ^buff = ref new Buffer(sb-&gt;PixelHeight * sb-&gt;PixelWidth * 2);\n    sb-&gt;CopyToBuffer(buff);\n    DataReader ^dataReader = DataReader::FromBuffer(buffer);\n    Platform::Array&lt;unsigned char, 1&gt; ^arr = ref new Platform::Array&lt;unsigned char, 1&gt;(buffer-&gt;Length);\n    dataReader-&gt;ReadBytes(arr);\n    // here arr-&gt;Data is a pointer to the raw pixel data\n}\n</code></pre>\n\n<p><strong>NOTE</strong>: The <code>MediaCapture</code> object needs to be configured with <code>MediaCaptureMemoryPreference::Cpu</code> in order to have a valid <code>SoftwareBitmap</code></p>\n\n<p>Hope the above helps someone</p>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 3697939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21da76d9d78a41f4e732d25ce7177ee8?s=128&d=identicon&r=PG", "display_name": "Youw", "link": "https://stackoverflow.com/users/3697939/youw"}, "is_accepted": false, "score": 0, "last_activity_date": 1588366930, "creation_date": 1588366930, "answer_id": 61550749, "question_id": 31841790, "link": "https://stackoverflow.com/questions/31841790/winrt-c-win10-accessing-bytes-from-softwarebitmap-bitmapbuffer/61550749#61550749", "title": "WinRT C++ (Win10) Accessing bytes from SoftwareBitmap / BitmapBuffer", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/31850028/3697939\">answer</a> from @jeffrey-chen and <a href=\"https://gist.github.com/kennykerr/f1d941c2d26227abbf762481bcbd84d3\" rel=\"nofollow noreferrer\">example</a> from @kennykerr, I've assembled a tiny bit cleaner solution:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;wrl/client.h&gt;\n// other includes, as required by your project\n\nMIDL_INTERFACE(\"5b0d3235-4dba-4d44-865e-8f1d0e4fd04d\")\nIMemoryBufferByteAccess : ::IUnknown\n{\n    virtual HRESULT __stdcall GetBuffer(BYTE **value, UINT32 *capacity) = 0;\n};\n\n// your code:\n    auto previewFrame = currentFrame-&gt;SoftwareBitmap;\n\n    auto buffer = previewFrame-&gt;LockBuffer(BitmapBufferAccessMode::ReadWrite);\n\n    auto bufferByteAccess= buffer-&gt;CreateReference().as&lt;IMemoryBufferByteAccess&gt;();\n    WriteLine(\"Get interface successfully\"); // otherwise - exception is thrown\n\n    BYTE* data = nullptr;\n    UINT32 capacity = 0;\n\n    winrt::check_hresult(bufferByteAccess-&gt;GetBuffer(&amp;data, &amp;capacity));\n    WriteLine(\"get data access successfully, capacity: \" + capacity);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5195429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7197973aa53eb589dca1abc6ff4c243a?s=128&d=identicon&r=PG&f=1", "display_name": "Steffen", "link": "https://stackoverflow.com/users/5195429/steffen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2139, "favorite_count": 0, "accepted_answer_id": 31850028, "answer_count": 3, "score": 1, "last_activity_date": 1588366930, "creation_date": 1438804887, "last_edit_date": 1495540342, "question_id": 31841790, "link": "https://stackoverflow.com/questions/31841790/winrt-c-win10-accessing-bytes-from-softwarebitmap-bitmapbuffer", "title": "WinRT C++ (Win10) Accessing bytes from SoftwareBitmap / BitmapBuffer", "body": "<p>To process my previewFrames of my camera in OpenCV, I need access to the raw Pixel data / bytes. So, there is the new SoftwareBitmap, which should exactly provide this.</p>\n\n<p>There is an <a href=\"https://stackoverflow.com/questions/25481840/how-to-change-mediacapture-to-byte\">example</a> for c#, but in visual c++ I can't get the <a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.imemorybufferreference.aspx\" rel=\"nofollow noreferrer\">IMemoryBufferByteAccess</a> (see remarks) Interface working.</p>\n\n<p>Code with Exceptions:</p>\n\n<pre><code>// Capture the preview frame\nreturn create_task(_mediaCapture-&gt;GetPreviewFrameAsync(videoFrame))\n    .then([this](VideoFrame^ currentFrame)\n{\n    // Collect the resulting frame\n    auto previewFrame = currentFrame-&gt;SoftwareBitmap;\n\n    auto buffer = previewFrame-&gt;LockBuffer(Windows::Graphics::Imaging::BitmapBufferAccessMode::ReadWrite);\n    auto reference = buffer-&gt;CreateReference();\n\n    // Get a pointer to the pixel buffer\n    byte* pData = nullptr;\n    UINT capacity = 0;\n\n    // Obtain ByteAccess\n    ComPtr&lt;IUnknown&gt; inspectable = reinterpret_cast&lt;IUnknown*&gt;(buffer);\n    // Query the IBufferByteAccess interface.\n    Microsoft::WRL::ComPtr&lt;IMemoryBufferByteAccess&gt; bufferByteAccess;\n    ThrowIfFailed(inspectable.As(&amp;bufferByteAccess));     // ERROR ---&gt; Throws HRESULT = E_NOINTERFACE\n\n    // Retrieve the buffer data.\n    ThrowIfFailed(bufferByteAccess-&gt;GetBuffer(_Out_ &amp;pData, _Out_ &amp;capacity));      // ERROR ---&gt; Throws HRESULT = E_NOINTERFACE, because bufferByteAccess is null\n</code></pre>\n\n<p>I tried this too:</p>\n\n<pre><code>    HRESULT hr = ((IMemoryBufferByteAccess*)reference)-&gt;GetBuffer(&amp;pData, &amp;capacity);\n</code></pre>\n\n<p>HRESULT is ok, but I can't access pData -> Access Violation reading Memory.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c++", "oop", "templates"], "comments": [{"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1438805289, "post_id": 31841574, "comment_id": 51605235, "body": "If I say <code>e.get_field&lt;JSONArray&gt;(json, &quot;numbers&quot;);</code> this is error. Because it can&#39;t return bool. So I need to write conversion function? How to write it. Like from json_array_to_string?"}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1438806568, "post_id": 31841574, "comment_id": 51605899, "body": "Yes, but point is that I want to create generic function, so that it can return practicly anyone of this types. Is this possible?"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1438807360, "post_id": 31841574, "comment_id": 51606375, "body": "Not like this.  You are attempting to mix a compile time <code>template</code> return type with a type that you don&#39;t know until runtime (<code>object[ws]</code>)."}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1438808154, "post_id": 31841574, "comment_id": 51606844, "body": "And how is possible to create such generic function?"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1438810705, "post_id": 31841574, "comment_id": 51608075, "body": "Have a look at boost variant:  <a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/variant.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_58_0/doc/html/variant.html</a>"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1438812220, "post_id": 31841574, "comment_id": 51608681, "body": "Better rethink your design. You&#39;re going to do different things depending on what type of json data you get, aren&#39;t you? Then why have all those different data types run through one code path..."}], "owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438804870, "creation_date": 1438804156, "question_id": 31841574, "link": "https://stackoverflow.com/questions/31841574/template-returning-value-error", "title": "Template returning value error", "body": "<p>I have this method in class Entity</p>\n\n<pre><code>template &lt;class T&gt;\nT get_field(const std::string &amp;content, const std::string &amp;field_name)\n{\n    JSONValue *value = JSON::Parse(content.c_str());\n    if (value == NULL)\n    {\n        LOG(ERROR) &lt;&lt; \"JSONValue is NULL\";\n        return NULL;\n    }\n    if (value-&gt;IsObject())\n    {\n        JSONObject object = value-&gt;AsObject();\n        std::wstring ws;\n        for (int i = 0; i&lt;field_name.length(); i++)\n            ws += wchar_t(field_name[i]);\n        if (object.find(ws) != object.end())\n        {\n            if (object[ws]-&gt;IsArray())\n            {\n                return object[ws]-&gt;AsArray();\n            }\n            else if (object[ws]-&gt;IsBool())\n            {\n                return object[ws]-&gt;AsBool();\n            }\n            else if (object[ws]-&gt;IsNull())\n            {\n                return NULL;\n            }\n            else if (object[ws]-&gt;IsNumber())\n            {\n                return object[ws]-&gt;AsNumber();\n            }\n            else if (object[ws]-&gt;IsObject())\n            {\n                return object[ws]-&gt;AsObject();\n            }\n            else if (object[ws]-&gt;IsString())\n            {\n                return object[ws]-&gt;AsString();\n            }\n        }\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>and I am calling this method like this:</p>\n\n<pre><code>e.get_field&lt;std::string&gt;(json, \"Name\")\n</code></pre>\n\n<p>I know that method should return string in this case so I added <code>std::string</code> in <code>&lt; ... &gt;</code>. But I get this error: </p>\n\n<pre><code>No viable conversion from 'const JSONArray' (aka 'const vector&lt;JSONValue *&gt;') to 'std::__1::basic_string&lt;char&gt;'\n</code></pre>\n\n<p>I know, why am I getting this error. Because I can't return something that is not of type string in this case. If I would call that method like this</p>\n\n<pre><code>e.get_field&lt;JSONArray&gt;(json, \"numbers\");\n</code></pre>\n\n<p>then this will be also error because I can't return string as JSONArray. So, how to prevent this?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5183784, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/18542a0cf85af81643a709a0e5b7a251?s=128&d=identicon&r=PG&f=1", "display_name": "windman", "link": "https://stackoverflow.com/users/5183784/windman"}, "edited": false, "score": 0, "creation_date": 1438805732, "post_id": 31841566, "comment_id": 51605461, "body": "I&#39;ve got     error: no matching function for call to &#39;std::basic_fstream&lt;char&gt;::open(std::basic_string&lt;char&gt;, const openmode&amp;)&#39;|"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438806071, "post_id": 31841566, "comment_id": 51605641, "body": "Another alternative is to use a temporary <code>std::string</code> to build the filename, then use <code>std::string::c_str()</code> inside the <code>fstream</code> constructor (or <code>open</code> method)."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438806485, "post_id": 31841566, "comment_id": 51605857, "body": "@ThomasMatthews No need for <code>c_str</code>."}, {"owner": {"reputation": 19, "user_id": 5183784, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/18542a0cf85af81643a709a0e5b7a251?s=128&d=identicon&r=PG&f=1", "display_name": "windman", "link": "https://stackoverflow.com/users/5183784/windman"}, "edited": false, "score": 0, "creation_date": 1438806628, "post_id": 31841566, "comment_id": 51605936, "body": "Indeed path[0].c_str() and path[0] works aswell. Strange I would swear that i&#39;ve checked path[0] option(first thing i thought about), strange."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1438804372, "last_edit_date": 1438804372, "creation_date": 1438804143, "answer_id": 31841566, "question_id": 31841553, "link": "https://stackoverflow.com/questions/31841553/how-to-get-rid-of-in-open-files/31841566#31841566", "title": "How to get rid of &quot; &quot; in open files", "body": "<p>If you want to perform string concatenation, you can use the <code>+</code> operator</p>\n\n<pre><code>file.open(\"/sth/sth/sth/\" + tab[i] + \"/sth/sth.txt\", ios::in);\n</code></pre>\n\n<p>By the way, the <code>fstream</code> constructor can take these arguments so you don't need to make a separate <code>open</code> call</p>\n\n<pre><code>for(int i=0;i&lt;5;i++)\n{\n    fstream file{\"/sth/sth/sth/\" + tab[i] + \"/sth/sth.txt\", ios::in};\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5183784, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/18542a0cf85af81643a709a0e5b7a251?s=128&d=identicon&r=PG&f=1", "display_name": "windman", "link": "https://stackoverflow.com/users/5183784/windman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 31841566, "answer_count": 1, "score": 0, "last_activity_date": 1438804372, "creation_date": 1438804093, "question_id": 31841553, "link": "https://stackoverflow.com/questions/31841553/how-to-get-rid-of-in-open-files", "title": "How to get rid of &quot; &quot; in open files", "body": "<p>I've got something like this </p>\n\n<pre><code>/sth/sth/sth/SOMETHINGTHATISCHANGING/sth/sth.txt\n\n\nstring tab[5]={\"nicefolder\",\"betterfolder\",\"bestofall\",\"dog\",\"readingthis\"};\nfor(int i=0;i&lt;5;i++)\n{\nfstream file;\nfile.open(\"/sth/sth/sth/\"tab[i]\"/sth/sth.txt\", ios::in);\n//shit to do\n}\n</code></pre>\n\n<p>I know it do not work but just want to show you what I need to achieve.\nIs this even possible?</p>\n"}, {"tags": ["c++", "pointers", "recursion"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1438804032, "post_id": 31841507, "comment_id": 51604542, "body": "You need to pass the pointer by reference if you don&#39;t want to return it.,"}, {"owner": {"reputation": 361, "user_id": 1995537, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4200f45f830bff38cbe873c3851554fb?s=128&d=identicon&r=PG", "display_name": "doomguy", "link": "https://stackoverflow.com/users/1995537/doomguy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1438804234, "post_id": 31841507, "comment_id": 51604662, "body": "Sorry but why is that. Shouldnt the pointer get dynamically updated and persist?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438804245, "post_id": 31841507, "comment_id": 51604674, "body": "Providing a reference like <code>Node *&amp;head,</code>  should solve your problem. You&#39;re actually updating a copy that&#39;s not seen in the calling code."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1438804281, "post_id": 31841507, "comment_id": 51604702, "body": "&quot;I would expect that the statement <code>head = next</code> at each call of the function would update the head pointer.&quot;  It updates the <code>head</code> <b>parameter</b>, which is probably not the &quot;head pointer&quot; you are thinking of."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438804934, "post_id": 31841507, "comment_id": 51605044, "body": "You return a pointer, or use two stars, (or one star and a typedef).  One star on its own will not work."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438805141, "post_id": 31841507, "comment_id": 51605160, "body": "@doomguy In any case your function is wrong becaue in general case head can be equal to NULL."}, {"owner": {"reputation": 361, "user_id": 1995537, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4200f45f830bff38cbe873c3851554fb?s=128&d=identicon&r=PG", "display_name": "doomguy", "link": "https://stackoverflow.com/users/1995537/doomguy"}, "edited": false, "score": 0, "creation_date": 1438805308, "post_id": 31841507, "comment_id": 51605244, "body": "Sorry about missing that condition here"}, {"owner": {"reputation": 361, "user_id": 1995537, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4200f45f830bff38cbe873c3851554fb?s=128&d=identicon&r=PG", "display_name": "doomguy", "link": "https://stackoverflow.com/users/1995537/doomguy"}, "edited": false, "score": 0, "creation_date": 1438805353, "post_id": 31841507, "comment_id": 51605267, "body": "I was checking that in the calling function"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1995537, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4200f45f830bff38cbe873c3851554fb?s=128&d=identicon&r=PG", "display_name": "doomguy", "link": "https://stackoverflow.com/users/1995537/doomguy"}, "edited": false, "score": 0, "creation_date": 1438804948, "post_id": 31841734, "comment_id": 51605051, "body": "Thanks. I think this makes it clear. I was actually confused about this."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1438805144, "last_edit_date": 1438805144, "creation_date": 1438804686, "answer_id": 31841734, "question_id": 31841507, "link": "https://stackoverflow.com/questions/31841507/how-pointers-are-passed-across-void-and-non-void-recursive-functions-in-c/31841734#31841734", "title": "How pointers are passed across void and non void recursive functions in C++", "body": "<p>When you pass a pointer to a function like <code>void foo(type* bar)</code> the address that the pointer contains is passed by value.  If you need to change that address then you need to pass it by reference like <code>void foo(type *&amp;bar)</code>.  I think that you are confused by the fact that this works</p>\n\n<pre><code>void foo(int * bar) { *bar = 10; }\n\nint man() \n{\n    int x = 5;\n    foo(&amp;x);\n    // x is now 10 here\n}\n</code></pre>\n\n<p>Here we are not changing what the pointer points to but we are changing the value of the pointed to object.  We can see that changing the address of the pointer has no affect when not passed by reference with:</p>\n\n<pre><code>void foo(int * bar)\n{\n    int foobar = 10;\n    bar = &amp;foobar;\n}\n\nint main()\n{\n    int x = 5;\n    foo(&amp;x);\n    std::cout &lt;&lt; x;\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/a5548b608e16a869\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}], "owner": {"reputation": 361, "user_id": 1995537, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4200f45f830bff38cbe873c3851554fb?s=128&d=identicon&r=PG", "display_name": "doomguy", "link": "https://stackoverflow.com/users/1995537/doomguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 31841734, "answer_count": 1, "score": -3, "last_activity_date": 1438805144, "creation_date": 1438803938, "last_edit_date": 1438804087, "question_id": 31841507, "link": "https://stackoverflow.com/questions/31841507/how-pointers-are-passed-across-void-and-non-void-recursive-functions-in-c", "title": "How pointers are passed across void and non void recursive functions in C++", "body": "<p>I have the following function to reverse a linked list: </p>\n\n<pre><code>Node* reverseUtil(Node *head, Node *prev) {\n    if (head-&gt;next == NULL) {\n        head-&gt;next = prev;\n        return head;\n    }\n    Node *next = head-&gt;next;\n    head-&gt;next = prev;\n    prev = head;\n    head = next;\n    return reverseUtil(head, prev);\n}\n</code></pre>\n\n<p>When I call this with <code>Node* head = reverseUtil(head, NULL);</code> it works fine and ultimately returns the head of the reversed linked list. Example for 1->2->3, it returns head with 3->2->1. </p>\n\n<p>However, when I modify it to the following, the resultant head pointer only has the last node of the reversed linked list (originally the starting point of the list. Example: for original list 1->2->3, head at the end only has 1.</p>\n\n<pre><code>void reverseUtil(Node *head, Node *prev) {\n    if (head-&gt;next == NULL) {\n        head-&gt;next = prev;\n        return;\n    }\n    Node *next = head-&gt;next;\n    head-&gt;next = prev;\n    prev = head;\n    head = next; //head pointer should update here on forward path. This seems to be happening.\n    reverseUtil(head, prev);//after this step returns, head should stick to the last updated point and should return unchanged but this does not happen.\n}\n</code></pre>\n\n<p>I think I am missing something basic here. I would expect that the statement <code>head = next</code> at each call of the function would update the head pointer. It should ultimately point to the new beginning of the reversed linked list and should remain unchanged as the recursive calls return. However it seems to be continuously getting updated on the return path. </p>\n"}, {"tags": ["c++", "dictionary", "clone"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1438804552, "post_id": 31841237, "comment_id": 51604847, "body": "I&#39;m not up on my CLI, but odds are pretty good that because practically everything is a pointer, you&#39;re copying the pointers and your copy winds up pointing at the same places as the originals."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438805768, "post_id": 31841237, "comment_id": 51605479, "body": "It is just a one-liner: <code>auto DataListe = gcnew List&lt;TypeName&gt;(Dic-&gt;Values);</code>"}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438810420, "post_id": 31841237, "comment_id": 51607949, "body": "@Hans Passant I tried your suggestion but I am still copying the references. I used exactly what you wrote (and the code makes sense) but no difference."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438811346, "post_id": 31841237, "comment_id": 51608363, "body": "Erm, no way you can get the exact same compile error message."}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438811574, "post_id": 31841237, "comment_id": 51608446, "body": "@Hans Passant No its not the error message. The implementation works fine but I still got references and not copies. When I change something in DataList I am still changing the same object in <code>Dic-&gt;Values</code>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438811631, "post_id": 31841237, "comment_id": 51608459, "body": "Ask only one question."}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438811715, "post_id": 31841237, "comment_id": 51608501, "body": "@Hans Passant Sorry for the inconvenience. Still, do you have a solution to the reference-problem?"}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438880686, "post_id": 31841237, "comment_id": 51642904, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/85323/discussion-between-leon-b-and-hans-passant\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "edited": false, "score": 0, "creation_date": 1438810653, "post_id": 31841835, "comment_id": 51608048, "body": "I tried to do what you supposed like this:      array&lt;TypeName&gt;^ TempConv = gcnew array&lt;TypeName&gt;(Dic-&gt;Values-&gt;Count);      ((Generic::IDictionary&lt;String^, TypeName&gt;^)Dic)-&gt;CopyTo(TempConv,0);`  But it throws the same error as above:     System::Collections::Generic::ICollection&lt;System::Collection&zwnj;&#8203;s::Generic::KeyValue&zwnj;&#8203;Pair&lt;System::String ^,TypeName&gt;&gt;::CopyTo&#39;: the function template cannot convert parameter 1 from type &#39;cli::array&lt;TypeName,1&gt; ^&#39;`  What am I missing?"}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "edited": false, "score": 0, "creation_date": 1438811427, "post_id": 31841835, "comment_id": 51608392, "body": "Alright, got my Code fixed. As the KeyValuePair-Class is not a managed class I do not need the reference to an object after defining the class. My fault was here:      array&lt;KeyValuePair&lt;String^,TypeName&gt;^&gt;^ TempConv = gcnew array&lt;KeyValuePair&lt;String^, TypeName&gt;&gt;(Dic-&gt;Values-&gt;Count);                                           After removing the Reference-Symbol <code>^</code> , I can compile the file.  -&gt; <code>array&lt;KeyValuePair&lt;String^,TypeName&gt;&gt;^ TempConv = ....</code>"}, {"owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "edited": false, "score": 0, "creation_date": 1438814208, "post_id": 31841835, "comment_id": 51609408, "body": "Still, changing everything including the Objects in the Dictionary I do not want to change."}], "tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": false, "score": 0, "last_activity_date": 1438805001, "creation_date": 1438805001, "answer_id": 31841835, "question_id": 31841237, "link": "https://stackoverflow.com/questions/31841237/c-cli-copy-valuepairs-to-a-seperate-dictionary/31841835#31841835", "title": "C++/CLI Copy ValuePairs to a seperate Dictionary", "body": "<p>Dictionary.CopyTo copies values only, not key-value pairs - it seems to be your error. Use <code>array&lt;TypeName&gt;^</code> instead of <code>array&lt;KeyValuePair&lt;String^, TypeName&gt;^&gt;^</code>.</p>\n"}], "owner": {"reputation": 350, "user_id": 5192178, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9de2e4d52270369b000286103a6f334?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Bohmann", "link": "https://stackoverflow.com/users/5192178/leon-bohmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 588, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439232801, "creation_date": 1438802980, "last_edit_date": 1495542117, "question_id": 31841237, "link": "https://stackoverflow.com/questions/31841237/c-cli-copy-valuepairs-to-a-seperate-dictionary", "title": "C++/CLI Copy ValuePairs to a seperate Dictionary", "body": "<p>First off, I want to refer to my last question: <a href=\"https://stackoverflow.com/questions/31823483/c-cli-set-a-property-to-primarykey\">https://stackoverflow.com/questions/31823483/c-cli-set-a-property-to-primarykey</a></p>\n\n<p>So I got this fixed by the answer I did not find in the first place.</p>\n\n<p>Now the Code looks like this:</p>\n\n<pre><code>public: void SetData(Generic::Dictionary&lt;String^,TypeName&gt;^ Dic) {\n\n    array&lt;KeyValuePair&lt;String^,TypeName&gt;^&gt;^ TempConv = gcnew array&lt;KeyValuePair&lt;String^, TypeName&gt;^&gt;(Dic-&gt;Count);\n    ((Generic::Dictionary&lt;String^, TypeName&gt;^)Dic)-&gt;CopyTo(TempConv,0);\n    TempEntityDic = gcnew Dictionary&lt;String^, TypeName&gt;(Dic);\n    DataListe = gcnew List&lt;TypeName&gt;();\n\n    for each(KeyValuePair&lt;String^,TypeName&gt;^ t in TempConv){        \n        DataListe-&gt;Add(t-&gt;Value);\n    }\n\n    // Creating Bindable List\n    BindingDataListe = gcnew BindingList&lt;TypeName&gt;(DataListe);\n\n    BindingDataListe-&gt;AddingNew += gcnew System::ComponentModel::AddingNewEventHandler(this, &amp;mepla_iso::Visualisation::ListenAnsicht&lt;TypeName&gt;::OnAddingNew);\n\n    // Source festlegen\n    ListenAnsichtGrid-&gt;DataSource = BindingDataListe;\n\n    // Display the column Name first\n    ListenAnsichtGrid-&gt;Columns[\"Name\"]-&gt;DefaultCellStyle-&gt;Font = gcnew Drawing::Font(gcnew Drawing::Font(\"Consolas\", 12), Drawing::FontStyle::Bold);\n    ListenAnsichtGrid-&gt;Columns[\"Name\"]-&gt;DisplayIndex = 0;\n\n}\n</code></pre>\n\n<p>The Problem I am currently encountering is that my TempEntityDic (temporary Dictionary) is not a temporary Dictionary. The Code above won't even compile correctly. Error Message:</p>\n\n<p><code>System::Collections::Generic::ICollection&lt;System::Collections::Generic::KeyValuePair&lt;System::String ^,TypeName&gt;&gt;::CopyTo': \n    the function template cannot convert parameter 1 from type 'cli::array&lt;System::Collections::Generic::KeyValuePair&lt;System::String ^,TypeName&gt; ^,1&gt; ^</code></p>\n\n<p>Previously I tried:</p>\n\n<pre><code>public: void SetData(...){\n    TempEntityDic = gcnew Dictionary&lt;String^, TypeName&gt;(Dic);\n    DataListe = gcnew List&lt;TypeName&gt;();\n\n    for each(TypeName t in TempEntityDic){      \n        DataListe-&gt;Add(t);\n\n  [...............]\n}\n</code></pre>\n\n<p>But it was the same there. Whenever I change something in my <code>DataGridView</code>, I also got the change done to <code>Dic</code> (parameter in <code>SetData()</code>).</p>\n\n<p><strong>Question 1</strong> What is the best way to make a copy and not a reference of my parameter \"Dic\"?\n<strong>Question 2</strong> How do I get the <code>CopyTo()</code> working, so that I can afterwards add all the <code>KeyValuePairs</code> in <code>TempConv</code> into my <code>DataListe</code>?</p>\n\n<p>Thanks for your help. :)</p>\n\n<p><strong>EDIT</strong>\nTo make things clear: In the End I want to have two separate dictionaries. If needed, I want to override the first with the second. </p>\n\n<h2><strong>EDIT 2</strong></h2>\n\n<p>Hello again, here is my code again. I am still trying to get things working, but I just don't get a solution.</p>\n\n<pre><code>public: void SetData(Generic::Dictionary&lt;String^,TypeName&gt;^ Dic) {\n    //HACK: Kopie von Dic erstellen - Keine Reference\n    array&lt;KeyValuePair&lt;String^,TypeName&gt;&gt;^ TempConv = gcnew array&lt;KeyValuePair&lt;String^, TypeName&gt;&gt;(Dic-&gt;Values-&gt;Count);\n    ((Generic::IDictionary&lt;String^, TypeName&gt;^)Dic)-&gt;CopyTo(TempConv,0);\n\n\n    Dictionary&lt;String^, TypeName&gt;^ TempEntityDic = gcnew Dictionary&lt;String^, TypeName&gt;();\n\n    for each(KeyValuePair&lt;String^, TypeName&gt; t in Dic)\n        TempEntityDic-&gt;Add(t.Key,t.Value);\n\n    Dic = gcnew Dictionary&lt;String^, TypeName&gt;(TempEntityDic);\n\n    DataListe = gcnew List&lt;TypeName&gt;(Dic-&gt;Values);\n\n    // Creating Bindable List\n    BindingDataListe = gcnew BindingList&lt;TypeName&gt;(DataListe);\n\n\n    // Source festlegen\n    ListenAnsichtGrid-&gt;DataSource = BindingDataListe;\n    // Display the column Name \n    ListenAnsichtGrid-&gt;Columns[\"Name\"]-&gt;DefaultCellStyle-&gt;Font = gcnew Drawing::Font(gcnew Drawing::Font(\"Consolas\", 12), Drawing::FontStyle::Bold);\n    ListenAnsichtGrid-&gt;Columns[\"Name\"]-&gt;DisplayIndex = 0;\n\n}\n</code></pre>\n\n<p>I am also trying here, to create a new Instance of Dic in TempEntityDic and then copy it again the other way around, but that doesn't work at all.</p>\n\n<p>Could you please help me? I just cant get it to create a separate Dictionary without reference to the first one.</p>\n"}, {"tags": ["c++", "visual-c++", "wmi", "adapter"], "comments": [{"owner": {"reputation": 130798, "user_id": 91299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FmhRj.png?s=128&g=1", "display_name": "RRUZ", "link": "https://stackoverflow.com/users/91299/rruz"}, "edited": false, "score": 0, "creation_date": 1438806115, "post_id": 31841179, "comment_id": 51605661, "body": "Try passing the <code>WBEM_FLAG_UPDATE_ONLY</code> value in the <code>PutInstance</code> method and <code>NULL</code> on the last parameters like so <code>hRes = m_pSvc-&gt;PutInstance(pNewInstance, WBEM_FLAG_UPDATE_ONLY, NULL, NULL);</code>"}, {"owner": {"reputation": 1483, "user_id": 805318, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08739afe9dde31ee5f072cf2d599df91?s=128&d=identicon&r=PG", "display_name": "gtdevel", "link": "https://stackoverflow.com/users/805318/gtdevel"}, "reply_to_user": {"reputation": 130798, "user_id": 91299, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FmhRj.png?s=128&g=1", "display_name": "RRUZ", "link": "https://stackoverflow.com/users/91299/rruz"}, "edited": false, "score": 0, "creation_date": 1438861355, "post_id": 31841179, "comment_id": 51629058, "body": "Thanks, but after trying that, I am getting an HRESULT error 0x80041008 (WBEM_E_INVALID_PARAMETER). That error goes away when the &amp;pResult is included instead of NULL, but there is still no changes to the adapter names... No error comes up, but nothing is change. Any other idea what could be wrong??"}], "owner": {"reputation": 1483, "user_id": 805318, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08739afe9dde31ee5f072cf2d599df91?s=128&d=identicon&r=PG", "display_name": "gtdevel", "link": "https://stackoverflow.com/users/805318/gtdevel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438802825, "creation_date": 1438802825, "question_id": 31841179, "link": "https://stackoverflow.com/questions/31841179/changing-adapter-netconnectionid-using-iwbemservices-in-visual-c", "title": "Changing Adapter NetConnectionID using IWBemServices in Visual-C++", "body": "<p>I am trying to change the NetConnectionID value of a network adapter by creating an instance of the Win32_NetworkAdapter class using IWBemServices. I am locating the adapter by its DeviceId and then trying to put the new NetConnectionID into the instance.</p>\n\n<p>I am not getting any errors, but the NetConnectionID remains unchanged.</p>\n\n<p>This is what my function currently looks like:</p>\n\n<pre><code>int CIPConfigModule::setAdapterName(CString CAdapterName, unsigned int idAdapter)\n{\n\n    int bNoErrors = NO_ERROR;\n    IWbemClassObject *pNewInstance = NULL;\n    IWbemClassObject *pObjectClass = NULL;\n    IWbemContext *pCtx = NULL;\n    IWbemCallResult *pResult = NULL;\n\n    // Get the class definition.\n    string strIndex = std::to_string((long double)idAdapter);\n    string strIndexCommand = \"Win32_NetworkAdapter.DeviceID=\\\"\";\n    strIndexCommand.append(strIndex).append(\"\\\"\");\n    CString CSIndexCommand = strIndexCommand.c_str();\n    // BSTR PathToClass = SysAllocString(L\"Example\");\n\n    HRESULT hRes = m_pSvc-&gt;GetObject((bstr_t)CSIndexCommand, 0, pCtx, \n                 &amp;pObjectClass, &amp;pResult);\n\n    if (hRes != WBEM_S_NO_ERROR){\n        bNoErrors=ERROR_ATTEMPTING_TO_CHANGE_NAME;\n        return bNoErrors;\n    }\n\n    // Create a new instance.\n    pObjectClass-&gt;SpawnInstance(0, &amp;pNewInstance);\n    pObjectClass-&gt;Release();  // Don't need the class any more\n\n    VARIANT v;\n    VariantInit(&amp;v);\n\n    // Set the NetConnectioID property.\n    V_VT(&amp;v) = VT_BSTR;\n    V_BSTR(&amp;v) = CAdapterName.AllocSysString();\n    //V_BSTR(&amp;v) = SysAllocString(L\"Testing\");\n    BSTR KeyProp = SysAllocString(L\"NetConnectionID\");\n    pNewInstance-&gt;Put(KeyProp, 0, &amp;v, 0);\n    SysFreeString(KeyProp);\n    VariantClear(&amp;v);\n\n    // Other properties acquire the 'default' value specified\n    // in the class definition unless otherwise modified here.\n\n    // Write the instance to WMI. \n    hRes = m_pSvc-&gt;PutInstance(pNewInstance, 0, pCtx, &amp;pResult);\n    pNewInstance-&gt;Release();\n\n    if (hRes != WBEM_S_NO_ERROR){\n        bNoErrors=ERROR_ATTEMPTING_TO_CHANGE_NAME;\n        return bNoErrors;\n    }\n\n    return bNoErrors;\n}\n</code></pre>\n\n<p>Does anyone have an idea of what I could be missing? </p>\n"}, {"tags": ["c++", "templates", "default-arguments"], "comments": [{"owner": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 0, "creation_date": 1438802422, "post_id": 31840974, "comment_id": 51603630, "body": "Afaik this is only possible in Python for example (maybe also in other script languages). In C++ there is no way to do this I would be aware of."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438802619, "post_id": 31840974, "comment_id": 51603737, "body": "The are workarounds, e.g. <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/parameter/doc/html/index.html#class-template-parameter-support\" rel=\"nofollow noreferrer\">boost.parameter</a>, see also <a href=\"http://stackoverflow.com/q/4209326/\">stackoverflow.com/q/4209326</a>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438803084, "post_id": 31840974, "comment_id": 51603999, "body": "You can also use some builder pattern to achieve a syntax close to: <code>Foo_builder::Payload&lt;int&gt;::type</code>, or specifying both arguments <code>Foo_builder::ID&lt;double&gt;::Payload&lt;int&gt;::type</code> (in any order)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1438803337, "post_id": 31840974, "comment_id": 51604152, "body": "Are all the arguments types?  Would override by index be ok?"}], "answers": [{"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 2, "last_activity_date": 1438811548, "last_edit_date": 1438811548, "creation_date": 1438802382, "answer_id": 31841053, "question_id": 31840974, "link": "https://stackoverflow.com/questions/31840974/c-templates-override-some-but-not-all-default-arguments/31841053#31841053", "title": "C++ Templates: override some, but not all, default arguments?", "body": "<p>No.</p>\n\n<p>Template types are not supported like that. Types can be specified in place of the defaults in left to right order.</p>\n"}, {"comments": [{"owner": {"reputation": 1092, "user_id": 2127989, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/okDq7.jpg?s=128&g=1", "display_name": "Jacob Ritchie", "link": "https://stackoverflow.com/users/2127989/jacob-ritchie"}, "edited": false, "score": 1, "creation_date": 1438830094, "post_id": 31841112, "comment_id": 51613440, "body": "I know that it&#39;s the committee&#39;s opinion and not necessarily yours, but do you think you could elaborate on why this would be considered &#39;programming style that ought not to be encouraged&#39;?"}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "reply_to_user": {"reputation": 1092, "user_id": 2127989, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/okDq7.jpg?s=128&g=1", "display_name": "Jacob Ritchie", "link": "https://stackoverflow.com/users/2127989/jacob-ritchie"}, "edited": false, "score": 1, "creation_date": 1438845624, "post_id": 31841112, "comment_id": 51619008, "body": "Sure. In python it is not uncommon to see functions with 10 or more parameters, most of them with defaults, that were made usable by keyword arguments. Having so many inputs is a bad code smell because such functions are difficult to maintain and are less coherent. The proposed refactor to such functions is to extract related arguments into separate structs that provide easy ways to create them."}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "reply_to_user": {"reputation": 1092, "user_id": 2127989, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/okDq7.jpg?s=128&g=1", "display_name": "Jacob Ritchie", "link": "https://stackoverflow.com/users/2127989/jacob-ritchie"}, "edited": false, "score": 0, "creation_date": 1438845810, "post_id": 31841112, "comment_id": 51619120, "body": "It is important to try to stay on the high level of abstraction. <code>bool f(double, double, double, double, double, double, double)</code> does not tell you anything, <code>bool f(Point&amp;, Point&amp;, double)</code> starts to suggest what is happening :)"}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "reply_to_user": {"reputation": 1092, "user_id": 2127989, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/okDq7.jpg?s=128&g=1", "display_name": "Jacob Ritchie", "link": "https://stackoverflow.com/users/2127989/jacob-ritchie"}, "edited": false, "score": 0, "creation_date": 1438845988, "post_id": 31841112, "comment_id": 51619219, "body": "Apply the same reasoning for template parameters. You rarely ever need more than 3 -- if you do, your class might be doing too much. But if you had an easy way to templatise with 10 parameters, this would encourage people to do so"}], "tags": [], "owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "is_accepted": true, "score": 3, "last_activity_date": 1438802593, "creation_date": 1438802593, "answer_id": 31841112, "question_id": 31840974, "link": "https://stackoverflow.com/questions/31840974/c-templates-override-some-but-not-all-default-arguments/31841112#31841112", "title": "C++ Templates: override some, but not all, default arguments?", "body": "<p>In the Design and Evolution of C++, Bjarne Stroustrup mentioned that there were proposals for keyword arguments; however, they were rejected, since</p>\n\n<blockquote>\n  <p>the extensions group reached a consensus that the proposal was close to redundant, would cause compatibility problems with existing C++ code, and would encourage programming styles that ought not to be encouraged.</p>\n</blockquote>\n\n<p>I suppose keyword template parameters were not included for the same reason. If you want to simplify your life, either <code>typedef</code> the complexity away, or write adapter classes that reorder the template parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1438806657, "creation_date": 1438806657, "answer_id": 31842252, "question_id": 31840974, "link": "https://stackoverflow.com/questions/31840974/c-templates-override-some-but-not-all-default-arguments/31842252#31842252", "title": "C++ Templates: override some, but not all, default arguments?", "body": "<p>You can replace by index, if the template fakes nothing but types.</p>\n\n<p>Create the template with the first n args bound.  Then extract the arguments and replace the ones you want.</p>\n\n<p>This requires the first n arguments be valid without the positional ones.</p>\n\n<p>Sketch:</p>\n\n<pre><code> template&lt;class...&gt;struct types{using type=types;};\n template&lt;class types, class T, size_t index&gt;\n struct replace{\n   using type=/*types with index replaced with `T`*/;\n };\n template&lt;template&lt;class...&gt;class Z,class types&gt;\n struct apply;// applies content of types to Z\n template&lt;size_t n, class T&gt;struct rep{};\n template&lt;class Z, class...reps&gt;\n struct replacing;\n template&lt;template&lt;class...&gt;class Z, class...Ts,class...reps&gt;\n struct replacing&lt;Z&lt;Ts...&gt;,reps...&gt;:\n   apply&lt;Z,replacing_t&lt;types&lt;Ts...&gt;,reps...&gt;&gt;\n {};\n template&lt;class...Ts,class T0,class n,class...reps&gt;\n struct replacing&lt;types&lt;Ts...&gt;,rep&lt;n,T0&gt;,reps...&gt;:\n   replacing&lt;replace_t&lt;types&lt;Ts...&gt;,T0,n&gt;,reps...&gt;\n {};\n template&lt;class...Ts&gt;\n struct replacing&lt;types&lt;Ts...&gt;&gt;:\n   types&lt;Ts...&gt;\n {};\n</code></pre>\n\n<p>with <code>_t</code> using aliases and a number of ops left blank.</p>\n\n<p>Then you can:</p>\n\n<pre><code> replacing_t&lt;some_template&lt;&gt;,rep&lt;1,int&gt;&gt;\n</code></pre>\n\n<p>which uses the default args of <code>some_template</code>, but replaces arg1 with <code>int</code>.</p>\n"}], "owner": {"reputation": 1092, "user_id": 2127989, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/okDq7.jpg?s=128&g=1", "display_name": "Jacob Ritchie", "link": "https://stackoverflow.com/users/2127989/jacob-ritchie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 1, "accepted_answer_id": 31841112, "answer_count": 3, "score": 2, "last_activity_date": 1438842105, "creation_date": 1438802102, "last_edit_date": 1438842105, "question_id": 31840974, "link": "https://stackoverflow.com/questions/31840974/c-templates-override-some-but-not-all-default-arguments", "title": "C++ Templates: override some, but not all, default arguments?", "body": "<p>When I come across a template with several default arguments, e.g.</p>\n\n<pre><code>template&lt;typename ID = int, typename PAYLOAD = std::string&gt;\nclass Foo{};\n</code></pre>\n\n<p>Is there a way for me to override just a few of the default arguments, instead of all of them?</p>\n\n<p>I.e. instead of writing the following to create a class that uses an integer instead of a <code>std::string</code> for the <code>PAYLOAD</code> parameter,</p>\n\n<pre><code>typedef Foo&lt;int,int&gt; Bar;\n</code></pre>\n\n<p>Can I write something similar to:</p>\n\n<pre><code>typedef Foo&lt;PAYLOAD=int&gt; Bar;\n</code></pre>\n\n<p>I am dealing with another team's pre-defined templates with a lot of default arguments, and being able to use the second method seems like it would improve the clarity of my code.</p>\n\n<p>Looking at the documentation and other questions on StackOverflow, it does not seem to be possible, but I was wondering if someone could explain why this isn't a feature? </p>\n"}, {"tags": ["c++", "mongodb", "driver"], "answers": [{"tags": [], "owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "is_accepted": false, "score": 1, "last_activity_date": 1438897952, "creation_date": 1438897952, "answer_id": 31866438, "question_id": 31840949, "link": "https://stackoverflow.com/questions/31840949/how-to-get-all-collection-names-in-mongodb-using-c/31866438#31866438", "title": "How to get all collection names in MongoDb using C++", "body": "<p>This is the solution:</p>\n\n<pre><code>std::string uri = \"mongodb://127.0.0.1:27017/mydb\";\nstd::string errmsg;\nConnectionString cs = ConnectionString::parse(uri, errmsg);\nDBClientBase * conn(cs.connect(errmsg));\nstd::list&lt;std::string&gt; colls = conn-&gt;getCollectionNames(\"mydb\");\nfor(std::list&lt;std::string&gt;::iterator it = colls.begin();it != colls.end();++it){\n     do_something(*it);\n}\n</code></pre>\n"}], "owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1438897952, "creation_date": 1438802021, "last_edit_date": 1438897682, "question_id": 31840949, "link": "https://stackoverflow.com/questions/31840949/how-to-get-all-collection-names-in-mongodb-using-c", "title": "How to get all collection names in MongoDb using C++", "body": "<p>There is a great <a href=\"http://api.mongodb.org/cxx/legacy-1.0.0/annotated.html\" rel=\"nofollow\">MongoDb C++ Driver</a>. The only thing that makes it hard for newbies like me to use it - is the lack of teeny-weeny examples. For instance, I know there is a method called <code>getCollectionNames</code>, but I'm not sure how to use it. In <code>Python</code> I would do it like this:</p>\n\n<pre><code>db = MongoClient(host, port)[db_name]\ncolls = db.collection_names()\n</code></pre>\n\n<p>and I'm done. But I don't feel so comfortable with <code>C++</code> and can not figure out myself how to convert raw function declarations in documentation to some working code. </p>\n\n<p>So, this is what I've done by now and see that it works:</p>\n\n<pre><code>ConnectionString cs = ConnectionString::parse(uri, errmsg);\nDBClientBase * conn(cs.connect(errmsg));\n</code></pre>\n\n<p>Now I want to make one step further and get all collection names. Please, give some advice.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Well, I found a method somewhere in <code>dbclientinterface.h</code> called <code>getCollectionNames</code>. It is defined like so:</p>\n\n<pre><code>std::list&lt;std::string&gt; getCollectionNames( const std::string&amp; db,\n                                           const BSON&amp; filter = BSONObj())\n</code></pre>\n\n<p>But I find this sole declaration without any informative hints completely useless. It is just a sum of letters and no more. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I found a solution and I will post it below.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1438801248, "post_id": 31840651, "comment_id": 51602949, "body": "What&#39;s <i>&quot;not working&quot;</i> actually? That piece of code looks fine. Your error is probably elsewhere."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1438801428, "post_id": 31840651, "comment_id": 51603052, "body": "Maybe really obvious but you&#39;re deleting arr&#39;s values with delete. Otherwise the code is fine."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 1, "creation_date": 1438801498, "post_id": 31840651, "comment_id": 51603091, "body": "Use a debugger and explain what is not working please."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 2, "creation_date": 1438803015, "post_id": 31840651, "comment_id": 51603968, "body": "Please do not edit the corrected code into your question.  It&#39;s misleading for anybody who comes across this in future.  I have rolled back to the previous revision."}], "answers": [{"comments": [{"owner": {"reputation": 1365, "user_id": 995864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/18a5ef399efde6a125960f2112102233?s=128&d=identicon&r=PG", "display_name": "runners3431", "link": "https://stackoverflow.com/users/995864/runners3431"}, "edited": false, "score": 0, "creation_date": 1438801841, "post_id": 31840786, "comment_id": 51603299, "body": "So if i do this: int *p = arr;  delete p; that should work?"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1438801926, "post_id": 31840786, "comment_id": 51603347, "body": "no delete arr at the end. p is a working pointer."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438801949, "post_id": 31840786, "comment_id": 51603370, "body": "The <code>delete p</code> will not work.  The <code>delete</code> operator expects a pointer to the first (original) location."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1365, "user_id": 995864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/18a5ef399efde6a125960f2112102233?s=128&d=identicon&r=PG", "display_name": "runners3431", "link": "https://stackoverflow.com/users/995864/runners3431"}, "edited": false, "score": 0, "creation_date": 1438801981, "post_id": 31840786, "comment_id": 51603384, "body": "@runners3431  It will work if at the moment when the delete is used pointer p  has the same value as the original value of arr provided also that you will write correctly delete []p;"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 6, "last_activity_date": 1438801914, "last_edit_date": 1438801914, "creation_date": 1438801439, "answer_id": 31840786, "question_id": 31840651, "link": "https://stackoverflow.com/questions/31840651/whats-wrong-with-my-pointer-arithmetics/31840786#31840786", "title": "What&#39;s wrong with my pointer arithmetics?", "body": "<p>In this declaration</p>\n\n<pre><code>int *arr = new int[10];\n</code></pre>\n\n<p>pointer arr is initialized by the address of the first element of the dynamically allocated array.</p>\n\n<p>In the while loop</p>\n\n<pre><code>while (i &lt; 10){\n    *arr = i;  // assign the value of arr to i\n    arr++;     // increment the pointer by 1\n    i++;       // increment i\n}\n</code></pre>\n\n<p>the pointer is incremented. </p>\n\n<pre><code>arr++;\n</code></pre>\n\n<p>So after the loop it points beyond the allocated array and this statement</p>\n\n<pre><code>delete[] arr;\n</code></pre>\n\n<p>is wrong because pointer <code>arr</code> does not now store the original addres of the allocated array.</p>\n\n<p>I think you mean the following</p>\n\n<pre><code>const int N = 10;\nint *arr = new int[N];\n\nint i = 0;\nfor ( int *p = arr; p != arr + N; ++p ){\n    *p = i++;  // assign the value of i to *p\n}\n\nfor ( int *p = arr; p != arr + N; ++p ) std::cout &lt;&lt; *p &lt;&lt; ' ';\nstd::cout &lt;&lt; std::endl;\n\ndelete[] arr; \n</code></pre>\n"}], "owner": {"reputation": 1365, "user_id": 995864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/18a5ef399efde6a125960f2112102233?s=128&d=identicon&r=PG", "display_name": "runners3431", "link": "https://stackoverflow.com/users/995864/runners3431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "closed_date": 1438805671, "accepted_answer_id": 31840786, "answer_count": 1, "score": -5, "last_activity_date": 1438802845, "creation_date": 1438800988, "last_edit_date": 1438802845, "question_id": 31840651, "link": "https://stackoverflow.com/questions/31840651/whats-wrong-with-my-pointer-arithmetics", "closed_reason": "Not suitable for this site", "title": "What&#39;s wrong with my pointer arithmetics?", "body": "<p>I need help trying to figure out why my pointer array is not working. I am incrementing the pointer address and the I.  My console windows is just hanging.</p>\n\n<pre><code>int *arr = new int[10];\nint i = 0;\n\nwhile (i &lt; 10){\n    *arr = i;  // assign the value of arr to i\n    arr++;     // increment the pointer by 1\n    i++;       // increment i\n}\n\ndelete[] arr; \n</code></pre>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1438803001, "post_id": 31840515, "comment_id": 51603964, "body": "if you dont know how to answer this questiion ask to improve instead of downvoting"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1438803845, "post_id": 31840515, "comment_id": 51604425, "body": "Instead of saying that CMake tutorial is &quot;confusing, not complete and so on&quot;, just say what you was unable to understand from it. Many people(and me) found that tutorial good even for beginners."}, {"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1438816155, "post_id": 31840515, "comment_id": 51610024, "body": "Thats a good comment!"}], "answers": [{"tags": [], "owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "is_accepted": false, "score": 1, "last_activity_date": 1438801469, "last_edit_date": 1438801469, "creation_date": 1438801129, "answer_id": 31840701, "question_id": 31840515, "link": "https://stackoverflow.com/questions/31840515/cmake-official-tutorial-confusing-not-complete-and-not-showing-usage/31840701#31840701", "title": "Cmake Official Tutorial Confusing, not complete and not showing usage", "body": "<p><code>cmake</code> generates input files for chosen build system.</p>\n\n<blockquote>\n  <p>CMake is a cross-platform build system generator. Projects specify\n  their build process with platform-independent CMake listfiles included\n  in each directory of a source tree with the name CMakeLists.txt. Users\n  build a project by using CMake to generate a build system for a native\n  tool on their platform.</p>\n</blockquote>\n\n<p>(from <a href=\"http://www.cmake.org/cmake/help/v3.3/manual/cmake.1.html\" rel=\"nofollow\">cmake Documentation</a>).</p>\n\n<p>For example, it can generate Makefiles, Visual Studio projects, Xcode projects, Eclipse projects, etc. By default it generates Makefiles, you can override the generator with <code>-G</code> parameter. So to build (or install) you need to run <code>make</code> in the directory where you have <code>cmake</code> output.</p>\n"}], "owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "closed_date": 1438811341, "answer_count": 1, "score": -2, "last_activity_date": 1438801469, "creation_date": 1438800583, "question_id": 31840515, "link": "https://stackoverflow.com/questions/31840515/cmake-official-tutorial-confusing-not-complete-and-not-showing-usage", "closed_reason": "Needs details or clarity", "title": "Cmake Official Tutorial Confusing, not complete and not showing usage", "body": "<p><strong>I am new to Cmake and i am running down <a href=\"http://www.cmake.org/cmake-tutorial/#s3\" rel=\"nofollow\">this</a> Tutorial:</strong> </p>\n\n<p>I am at the beginning of step 3, where it says: \" At this point you should be able to build the tutorial\"</p>\n\n<p>Apart from the fact that he tutorial is only giving parts of the source in the tutorial, it is not really clear. However at least there is a link to the complete <a href=\"http://public.kitware.com/cgi-bin/viewcvs.cgi/CMake/Tests/Tutorial/\" rel=\"nofollow\">sources</a>: </p>\n\n<p>So how do i make and install a project? </p>\n\n<p><strong>I am executing:</strong></p>\n\n<pre><code>cmake CmakeFiles\n</code></pre>\n\n<p>is this configuring and building or is it also installing? I just get a directory with CMakeFiles when executing this command.</p>\n"}, {"tags": ["c++", "qt", "user-interface", "qdialog"], "answers": [{"tags": [], "owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "is_accepted": true, "score": 4, "last_activity_date": 1438811449, "creation_date": 1438811449, "answer_id": 31843457, "question_id": 31840502, "link": "https://stackoverflow.com/questions/31840502/qt-folder-browser-opening-more-than-once/31843457#31843457", "title": "Qt folder browser opening more than once", "body": "<p>The name <code>on_outputFolderBrowseBtn_pressed</code> means that <a href=\"http://doc.qt.io/qt-5/designer-using-a-ui-file.html#widgets-and-dialogs-with-auto-connect\" rel=\"nofollow\">this is a slot called when the button is pressed</a>. In it, you are connecting the <code>clicked</code> signal of that same button with your slot. A new connection is created each time you press the button, so you end up with as many calls to your <code>BrowseOutputFolder</code> slot as you pressed the button.</p>\n\n<p>Just call your slot instead of connecting it.</p>\n"}], "owner": {"reputation": 525, "user_id": 5037611, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aa80859af569f026c941898223e42cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Cody Pritchard", "link": "https://stackoverflow.com/users/5037611/cody-pritchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 31843457, "answer_count": 1, "score": 1, "last_activity_date": 1438811449, "creation_date": 1438800541, "last_edit_date": 1438808242, "question_id": 31840502, "link": "https://stackoverflow.com/questions/31840502/qt-folder-browser-opening-more-than-once", "title": "Qt folder browser opening more than once", "body": "<p>I have a Qt GUI app, and i have a button to browse for an output folder. \nBut there is a bug i cannot figure out. \nWhen you launch the app and click the browser button it works fine and you can close it, etc. \nThen if you click the button a second time, a browser window opens and you can select the folder, but this time when you close it, the window immediately reappears a second time. \nAnd if you repeat this, it will make you close it 3 times, 4 times, etc. </p>\n\n<p>I have been unable to see why this is happening with the code i have at the moment. </p>\n\n<pre><code>void Dialog::on_outputFolderBrowseBtn_pressed()\n{\n    QObject::connect(ui-&gt;outputFolderBrowseBtn, SIGNAL(clicked()), this, SLOT(BrowseOutputFolder()));\n}\n\nvoid Dialog::BrowseOutputFolder()\n{\n    QFileDialog dialog;\n    dialog.setFileMode(QFileDialog::Directory);\n    dialog.setOption(QFileDialog::ShowDirsOnly);\n\n    QString folderName = QFileDialog::getExistingDirectory(this, tr(\"Output folder\"), \"\", QFileDialog::ShowDirsOnly);\n    if(folderName.size() != 0)\n    {\n        QDir folder(folderName);\n        if(!folder.exists())\n        {\n            SecureLogger::Instance()-&gt;LogError(\"Folder does not exist \", __FILE__, __LINE__);\n        }\n        ui-&gt;OutputFolderPath-&gt;setText(folderName);\n    }\n}\n</code></pre>\n\n<p>I have ran it through the debugger and it keeps jumping back to this line:</p>\n\n<pre><code>QString folderName = QFileDialog::getExistingDirectory(this, tr(\"Output folder\"), \"\", QFileDialog::ShowDirsOnly);\n</code></pre>\n\n<p>Can anyone see why this is happening?</p>\n\n<p>EDIT: I have fixed the problem, but not necessarily solved the issue.\nFor now i simply added a bool flag for when the button is clicked. So the code now looks like this:</p>\n\n<pre><code>void Dialog::on_outputFolderBrowseBtn_pressed()\n{\n    m_clicked = true;\n    QObject::connect(ui-&gt;outputFolderBrowseBtn, SIGNAL(clicked()), this, SLOT(BrowseOutputFolder()));\n}\n\nvoid Dialog::BrowseOutputFolder()\n{\n    QString folderName;\n    if (m_clicked)\n    {\n        folderName = QFileDialog::getExistingDirectory(this, tr(\"Select Folder\"), \"\", QFileDialog::ShowDirsOnly | QFileDialog::DontResolveSymlinks);\n        m_clicked = false;\n    }\n    if(!folderName.isEmpty())\n    {\n        QDir folder(folderName);\n        if(!folder.exists())\n        {\n            SecureLogger::Instance()-&gt;LogError(\"Folder does not exist \", __FILE__, __LINE__);\n        }\n        ui-&gt;OutputFolderPath-&gt;setText(folderName);\n    }\n}\n</code></pre>\n\n<p>This is just hack work around and doesnt tell me what was wrong in the first place, so any insight on why that line was getting called over and over would be greatly appreciated. </p>\n"}, {"tags": ["c++", "templates", "overloading"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438800641, "post_id": 31840475, "comment_id": 51602586, "body": "May be some partial specialization."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438801687, "post_id": 31840475, "comment_id": 51603223, "body": "You mean use std::enable if, std::declval and such?  How to take care of all the argument types?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438801759, "post_id": 31840475, "comment_id": 51603255, "body": "Something like this, yes. SFINAE. <i>&quot;How to take care of all the argument types? &quot;</i> Forwarding as you already do probably. I&#39;m not aware of a ready made solution for your concerns now, but that&#39;s the directory I&#39;d try looking up."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1438804274, "post_id": 31840475, "comment_id": 51604695, "body": "You could split <code>A</code> into <code>A_bar</code> and <code>A_foo</code>, rename all <code>bar</code>s to <code>foo</code> and let <code>A_foo</code> inherit from <code>A_bar</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1438806334, "post_id": 31840475, "comment_id": 51605775, "body": "If you want to go that route, then add a <code>using A_foo::foo;</code> in <code>A_bar</code>, otherwise the declarations of <code>foo</code> in <code>A_foo</code> are hidden."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1438806420, "last_edit_date": 1438806420, "creation_date": 1438805997, "answer_id": 31842101, "question_id": 31840475, "link": "https://stackoverflow.com/questions/31840475/trick-for-overloads/31842101#31842101", "title": "Trick for overloads", "body": "<p>SFINAE on the well-formedness of <code>bar(std::forward&lt;Args&gt;(args)...)</code>.</p>\n\n<pre><code>class A {\nprivate:\n    void foo();\n    void foo(int);\n    void foo(int, char);\n    void foo(bool, int, double);\n    void bar(int);\n    void bar(bool, int, double);\n\n    template &lt;typename... Args&gt; \n    auto doIt_impl(int, Args&amp;&amp;... args) -&gt; decltype(bar(std::forward&lt;Args&gt;(args)...)){\n        bar(std::forward&lt;Args&gt;(args)...);\n    }\n    template &lt;typename... Args&gt; \n    auto doIt_impl(long, Args&amp;&amp;... args) -&gt; void {\n        foo(std::forward&lt;Args&gt;(args)...);\n    }\n\npublic:\n    template &lt;typename... Args&gt; void doIt(Args&amp;&amp;... args) {\n        doIt_impl(0, std::forward&lt;Args&gt;(args)...);\n    }\n};\n</code></pre>\n\n<p>The dummy first parameter ensures that the <code>bar</code>-calling overload of <code>doIt_impl</code> is preferred if viable. Also, it's important to note that trailing return types do not get class-scope lookup, so the declaration of <code>doIt_impl</code> must be after the declaration of the <code>bar</code>s.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3442d1d04c68dfd6\" rel=\"nofollow\">Demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1438812046, "post_id": 31842449, "comment_id": 51608615, "body": "You don&#39;t need the <code>virtual</code> - all your calls are non-virtual anyway."}], "tags": [], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "is_accepted": false, "score": 0, "last_activity_date": 1438808081, "last_edit_date": 1438808081, "creation_date": 1438807343, "answer_id": 31842449, "question_id": 31840475, "link": "https://stackoverflow.com/questions/31840475/trick-for-overloads/31842449#31842449", "title": "Trick for overloads", "body": "<p>Thanks to nwp's hint (though I'm not sure if this is what he meant), and T.C.'s debugging hint, I have this alternate solution.  But T.C.'s solution is way better.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A_Foo {\nprotected:\n    virtual void foo() {std::cout &lt;&lt; \"foo().\\n\";}\n    virtual void foo(int) {std::cout &lt;&lt; \"foo(int).\\n\";}\n    virtual void foo(int, char) {std::cout &lt;&lt; \"foo(int, char).\\n\";}\n    virtual void foo(bool, int, double) {std::cout &lt;&lt; \"foo(bool, int, double).\\n\";}\n};\n\nclass A_Bar : private A_Foo {\npublic:\n    using A_Foo::foo;  // This is needed.  Else all the declarations of foo in A_Foo are hidden.\n    virtual void foo(int) override {std::cout &lt;&lt; \"bar(int).\\n\";}\n    virtual void foo(bool, int, double) override {std::cout &lt;&lt; \"bar(bool, int, double).\\n\";}\n};\n\nclass A : private A_Bar {\npublic:\n    template &lt;typename... Args&gt; void execute(Args&amp;&amp;... args) {\n        A_Foo::foo(std::forward&lt;Args&gt;(args)...);\n    }\n    template &lt;typename... Args&gt; void doIt(Args&amp;&amp;... args) {\n        A_Bar::foo(std::forward&lt;Args&gt;(args)...);\n    }\n};\n\nint main() {\n    A a;\n    a.doIt();  // foo().\n    a.doIt(5);  // bar(int).\n    a.doIt(5,'t');  // foo(int, char).\n    a.doIt(true,5,1.8);  // bar(bool, int, double).\n}\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 31842101, "answer_count": 2, "score": 0, "last_activity_date": 1438808081, "creation_date": 1438800466, "last_edit_date": 1438807381, "question_id": 31840475, "link": "https://stackoverflow.com/questions/31840475/trick-for-overloads", "title": "Trick for overloads", "body": "<p>Consider this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\npublic:\n    template &lt;typename... Args&gt; void execute(Args&amp;&amp;... args) {foo(std::forward&lt;Args&gt;(args)...);}\n    template &lt;typename... Args&gt; void doIt(Args&amp;&amp;... args) {bar(std::forward&lt;Args&gt;(args)...);}\nprivate:\n    void foo() {}\n    void foo(int) {}\n    void foo(int, char) {}\n    void foo(bool, int, double) {}\n    void bar() {foo();}  // *** Added\n    void bar(int) {}\n    void bar(int num, char c) {foo(num, c);}  // *** Added\n    void bar(bool, int, double) {}\n};\n\nint main() {\n    A a;\n    a.doIt();\n    a.doIt(5,'t');\n}\n</code></pre>\n\n<p><code>A::doIt</code> is to have the same overloading types as <code>A::execute</code> and will use <code>bar</code>'s overloads for some of them (for which bar's overloads are unique) and use <code>foo</code>'s overloads for the others.  To get this done, I simply added <code>void bar() {foo();}</code> and <code>void bar(int num, char c) {foo(num, c);}</code>.  This is not that painful, but suppose there were many such forwarding to do.  And think of the maintenance issues when new overloads of <code>doIt</code> are needed, and new <code>foo</code> overloads defined for them (easy to forget the forwarding stuff).</p>\n\n<p>Is there a way to remove these extra <code>bar</code> overloads (that simply forward to <code>foo</code>), and instead modify the currently defined <code>doIt(Args&amp;&amp;... args)</code> function so that in case no such bar overload exists it will call up <code>foo</code>'s overloads instead?  So in other words, remove the two <code>bar</code> overloads that I added, and still have main() compile as intended due to <code>doIt</code>'s new definition.</p>\n"}, {"tags": ["javascript", "html", "c++", "google-chrome"], "comments": [{"owner": {"reputation": 30744, "user_id": 1768232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P6XgG.png?s=128&g=1", "display_name": "durron597", "link": "https://stackoverflow.com/users/1768232/durron597"}, "edited": false, "score": 0, "creation_date": 1441473634, "post_id": 31840400, "comment_id": 52698151, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19457786/npapi-support-in-firefox-and-chrome-actually-droped\">NPAPI support in Firefox and Chrome actually droped?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4564, "user_id": 1760670, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MXkMz.png?s=128&g=1", "display_name": "EasyBB", "link": "https://stackoverflow.com/users/1760670/easybb"}, "edited": false, "score": 0, "creation_date": 1438868891, "post_id": 31846165, "comment_id": 51634506, "body": "Ok so native messaging is what I have to use, does it install the special Json for permissions of nm within the chrome application or is that a separate install? Documentation is very vague"}], "tags": [], "owner": {"reputation": 16038, "user_id": 96811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7df875806d3b905216f51a89cd478d3?s=128&d=identicon&r=PG", "display_name": "smorgan", "link": "https://stackoverflow.com/users/96811/smorgan"}, "is_accepted": true, "score": 1, "last_activity_date": 1438830480, "creation_date": 1438830480, "answer_id": 31846165, "question_id": 31840400, "link": "https://stackoverflow.com/questions/31840400/executing-html-on-local-drive-with-chrome-javascript-application/31846165#31846165", "title": "Executing HTML on local drive with Chrome Javascript Application", "body": "<p>You missed an important link at the top of the NPAPI page you quoted from; it's <a href=\"http://blog.chromium.org/2014/11/the-final-countdown-for-npapi.html\" rel=\"nofollow\">no longer possible to publish extensions than use NPAPI</a>, and the next release will remove all NPAPI support. If you want to communicate with native applications, you'll need to use Native Messaging as a bridge (see other questions about launching applications from Chrome for details).</p>\n\n<p>As for NaCl, it does not allow you to call arbitrary Windows APIs.</p>\n"}], "owner": {"reputation": 4564, "user_id": 1760670, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MXkMz.png?s=128&g=1", "display_name": "EasyBB", "link": "https://stackoverflow.com/users/1760670/easybb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 31846165, "answer_count": 1, "score": 0, "last_activity_date": 1438830480, "creation_date": 1438800183, "question_id": 31840400, "link": "https://stackoverflow.com/questions/31840400/executing-html-on-local-drive-with-chrome-javascript-application", "title": "Executing HTML on local drive with Chrome Javascript Application", "body": "<p>I am creating a chrome application that needs to open a local file that the user specifies, and this file will need to be opened in which ever browser they so choose. Now with the chrome application I have already thought of the conditional for when they are on a chromebook, so that set aside.</p>\n\n<p>I have some possibilities of file locations for the <code>exe</code> of each browser. here are mine</p>\n\n<pre><code>Chrome Locations\n\n    C:\\Program Files (x86)\\Google\\Chrome\\Application\n\nFirefox Locations\n    C:\\Program Files (x86)\\Mozilla Firefox\n\nIE Locations\n    C:\\Program Files (x86)\\Internet Explorer\n\nEdge Locations\n    C:\\Windows\\SystemApps\\Microsoft.MicrosoftEdge_------- (not sure if the end is a key so removed)\n</code></pre>\n\n<p>So basically I was thinking maybe using a <code>PNaCl</code> or a <code>NaCl</code> for Google's Native Client to use C++ and using <code>ShellExecute</code> except I'm not sure how to combine the file location and the browser the user specifies. </p>\n\n<p>They want to open <code>Microsoft Edge</code> and run <code>index.html</code></p>\n\n<pre><code>void main()\n{  \n    ShellExecute(NULL, \"open\", \"C:\\Windows\\SystemApps\\Microsoft.MicrosoftEdge_-------\",\n                 NULL, NULL, SW_SHOWNORMAL);\n}\n</code></pre>\n\n<p>Seems as though Google allows it in the Manifest so here is the example</p>\n\n<pre><code>{\n    \"name\": \"My extension\",\n    ...\n    \"plugins\": [\n        { \"path\": \"extension_plugin.dll\" }\n    ],\n    ...\n}\n</code></pre>\n\n<p>So really how to write a clean <code>dll</code> file to execute file location and browser locations. And then again reading further I get this, </p>\n\n<pre><code>Marking your NPAPI plugin \"public\" increase the attack surface of your extension because the plugin is exposed directly to web content, making it easier for a malicious web site to manipulate your plugin. Instead, avoid making your NPAPI plugin public whenever possible.\n</code></pre>\n\n<p>Which I don't want anyone feeling disgruntled over something that could be malicious, I just need it to run a local browser, also maybe find the file locations easier than checking for every possible locations. Thanks in advanced.</p>\n\n<p>Question repeated in case you got lost.</p>\n\n<ol>\n<li>Running a NPAPI dll program </li>\n<li>How to use ShellExecute or a function to run the browser of choice and file determined by the user</li>\n<li>Understanding if NPAPI will hurt my users if it is just for them no one else. </li>\n</ol>\n"}, {"tags": ["c++", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2828362, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3663584f462564a300053f508b12e4a8?s=128&d=identicon&r=PG", "display_name": "Suzan Ayd\u0131n", "link": "https://stackoverflow.com/users/2828362/suzan-ayd%c4%b1n"}, "edited": false, "score": 0, "creation_date": 1438801071, "post_id": 31840312, "comment_id": 51602833, "body": "Thank you so much man. I need to check why the &quot;extern&quot; keyword needs to be used."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 3, "last_activity_date": 1438799939, "creation_date": 1438799939, "answer_id": 31840312, "question_id": 31840201, "link": "https://stackoverflow.com/questions/31840201/error-c2086-redefinition/31840312#31840312", "title": "Error C2086: redefinition", "body": "<p>Your header file contains a <em>definition</em> of an object <code>strHTMLTemplate</code> with external linkage. This is what leads to multiple definiton error.</p>\n\n<p>Change the definition of <code>strHTMLTemplate</code> in the header file into a <em>non-defining declaration</em> by adding keyword <code>extern</code></p>\n\n<pre><code>// TestConstantsHeader.h\n\nnamespace DataVerifier\n{\n    namespace Structure\n    {\n        extern const char *strHTMLTemplate;\n    }\n}\n</code></pre>\n\n<p>On top of that it probably makes sense to declare your pointer as <code>const char *const strHTMLTemplate</code>. It doesn't look like it is supposed to be modifiable.</p>\n"}], "owner": {"reputation": 329, "user_id": 2828362, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3663584f462564a300053f508b12e4a8?s=128&d=identicon&r=PG", "display_name": "Suzan Ayd\u0131n", "link": "https://stackoverflow.com/users/2828362/suzan-ayd%c4%b1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5747, "favorite_count": 0, "accepted_answer_id": 31840312, "answer_count": 1, "score": 0, "last_activity_date": 1438799939, "creation_date": 1438799565, "question_id": 31840201, "link": "https://stackoverflow.com/questions/31840201/error-c2086-redefinition", "title": "Error C2086: redefinition", "body": "<p>I'm having some issues with my C++ code. I'm trying to now split a header file which has definitions and declarations of some char pointers (previously strings but i've been having some CRT issues so changing them to a char pointer). Since I've changed them to a char pointer, i'm getting redefinition errors.</p>\n\n<p>Test.h</p>\n\n<pre><code>#pragma once\n#define DllExport   __declspec( dllexport )\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;stdexcept&gt;\n#include \"TestConstantsHeader.cpp\"\n\nnamespace DataVerifier\n{\n    class DllExport CDataVerifier\n    {\n    public:\n        CDataVerifier();\n        ~CDataVerifier();\n\n        //! @brief A function that processes the messages\n        void Process();\n    };\n}\n</code></pre>\n\n<p>Test.cpp</p>\n\n<pre><code>#include \"Test.h\"\n\nusing namespace DataVerifier;\n\nCDataVerifier::CDataVerifier()\n{\n}\n\nCDataVerifier::~CDataVerifier(){}\n\nvoid CDataVerifier::Process()\n{\n    const char* strTmp = Structure::strHTMLTemplate;\n    strTmp = \"hello\";\n    std::cout &lt;&lt; strTmp;\n}\n</code></pre>\n\n<p>TestConstantsHeader.h</p>\n\n<pre><code>#pragma once\n#define DllExport   __declspec( dllexport )\n\n#include &lt;iostream&gt;\n\nnamespace DataVerifier\n{\n    namespace Structure\n    {\n        const char *strHTMLTemplate;/* = \"&lt;doctype html&gt;\"\n            \"&lt;html lang=\\\"en\\\"&gt;\"\n            \"&lt;head&gt;\"\n            \"&lt;meta charset=\\\"utf-8\\\"/&gt;\"\n            \"&lt;title&gt;Data Verifier Test Results - {@testdesc}&lt;/title&gt;\"\n            \"&lt;style&gt;\"\n            \"body {\"\n            \"\\tbackground: none repeat scroll 0 0 #F3F3F4;\"\n            \"\\tcolor: #1E1E1F;\"\n            \"\\tfont-family: \\\"Segoe UI\\\",Tahoma,Geneva,Verdana,sans-serif;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 0;\"\n            \"}\"\n            \"h1 {\"\n            \"\\tbackground-color: #E2E2E2;\"\n            \"\\tborder-bottom: 1px solid #C1C1C2;\"\n            \"\\tcolor: #201F20;\"\n            \"\\tfont-size: 21pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 10px 0 10px 10px;\"\n            \"}\"\n            \"h2 {\"\n            \"\\tfont-size: 18pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 15px 0 5px;\"\n            \"}\"\n            \"h3 {\"\n            \"\\tbackground-color: rgba(0, 0, 0, 0);\"\n            \"\\tfont-size: 15pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 15px 0 5px;\"\n            \"}\"\n            \"a {\"\n            \"\\tcolor: #1382CE;\"\n            \"}\"\n            \"table {\"\n            \"\\tborder-collapse: collapse;\"\n            \"\\tborder-spacing: 0;\"\n            \"\\tfont-size: 10pt;\"\n            \"}\"\n            \"table th {\"\n            \"\\tbackground: none repeat scroll 0 0 #E7E7E8;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tpadding: 3px 6px;\"\n            \"\\ttext-align: left;\"\n            \"\\ttext-decoration: none;\"\n            \"}\"\n            \"table td {\"\n            \"\\tbackground: none repeat scroll 0 0 #F7F7F8;\"\n            \"\\tborder: 1px solid #E7E7E8;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 3px 6px 5px 5px;\"\n            \"\\tvertical-align: top;\"\n            \"}\"\n            \"\"\n            \".textCentered {\"\n            \"\\ttext-align: center;\"\n            \"}\"\n            \".messageCell {\"\n            \"\\twidth: 100;\"\n            \"}\"\n            \"#content {\"\n            \"\\tpadding: 0 12px 12px;\"\n            \"}\"\n            \"#overview table {\"\n            \"\\tmax-width: 75;\"\n            \"\\twidth: auto;\"\n            \"}\"\n            \"#messages table {\"\n            \"\\twidth: 97;\"\n            \"}\"\n            \"&lt;/style&gt;\"\n            \"&lt;/head&gt;\"\n            \"&lt;body&gt;\"\n            \"&lt;div id=\\\"big_wrapper\\\"&gt;\"\n            \"\\t&lt;h1&gt;Test Results - {@testdesc}&lt;/h1&gt;\"\n            \"\\t&lt;table&gt;\"\n            \"{@eeddata}\"\n            \"\\t&lt;/table&gt;\"\n            \"&lt;/body&gt;\"\n            \"&lt;/html&gt;\";*/\n    }\n}\n</code></pre>\n\n<p>TestConstantsHeader.cpp</p>\n\n<pre><code>#include \"TestConstantsHeader.h\"\n\nnamespace DataVerifier\n{\n    namespace Structure\n    {\n        const char *strHTMLTemplate = \"&lt;doctype html&gt;\"\n            \"&lt;html lang=\\\"en\\\"&gt;\"\n            \"&lt;head&gt;\"\n            \"&lt;meta charset=\\\"utf-8\\\"/&gt;\"\n            \"&lt;title&gt;Data Verifier Test Results - {@testdesc}&lt;/title&gt;\"\n            \"&lt;style&gt;\"\n            \"body {\"\n            \"\\tbackground: none repeat scroll 0 0 #F3F3F4;\"\n            \"\\tcolor: #1E1E1F;\"\n            \"\\tfont-family: \\\"Segoe UI\\\",Tahoma,Geneva,Verdana,sans-serif;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 0;\"\n            \"}\"\n            \"h1 {\"\n            \"\\tbackground-color: #E2E2E2;\"\n            \"\\tborder-bottom: 1px solid #C1C1C2;\"\n            \"\\tcolor: #201F20;\"\n            \"\\tfont-size: 21pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 10px 0 10px 10px;\"\n            \"}\"\n            \"h2 {\"\n            \"\\tfont-size: 18pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 15px 0 5px;\"\n            \"}\"\n            \"h3 {\"\n            \"\\tbackground-color: rgba(0, 0, 0, 0);\"\n            \"\\tfont-size: 15pt;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 15px 0 5px;\"\n            \"}\"\n            \"a {\"\n            \"\\tcolor: #1382CE;\"\n            \"}\"\n            \"table {\"\n            \"\\tborder-collapse: collapse;\"\n            \"\\tborder-spacing: 0;\"\n            \"\\tfont-size: 10pt;\"\n            \"}\"\n            \"table th {\"\n            \"\\tbackground: none repeat scroll 0 0 #E7E7E8;\"\n            \"\\tfont-weight: normal;\"\n            \"\\tpadding: 3px 6px;\"\n            \"\\ttext-align: left;\"\n            \"\\ttext-decoration: none;\"\n            \"}\"\n            \"table td {\"\n            \"\\tbackground: none repeat scroll 0 0 #F7F7F8;\"\n            \"\\tborder: 1px solid #E7E7E8;\"\n            \"\\tmargin: 0;\"\n            \"\\tpadding: 3px 6px 5px 5px;\"\n            \"\\tvertical-align: top;\"\n            \"}\"\n            \"\"\n            \".textCentered {\"\n            \"\\ttext-align: center;\"\n            \"}\"\n            \".messageCell {\"\n            \"\\twidth: 100;\"\n            \"}\"\n            \"#content {\"\n            \"\\tpadding: 0 12px 12px;\"\n            \"}\"\n            \"#overview table {\"\n            \"\\tmax-width: 75;\"\n            \"\\twidth: auto;\"\n            \"}\"\n            \"#messages table {\"\n            \"\\twidth: 97;\"\n            \"}\"\n            \"&lt;/style&gt;\"\n            \"&lt;/head&gt;\"\n            \"&lt;body&gt;\"\n            \"&lt;div id=\\\"big_wrapper\\\"&gt;\"\n            \"\\t&lt;h1&gt;Test Results - {@testdesc}&lt;/h1&gt;\"\n            \"\\t&lt;table&gt;\"\n            \"{@eeddata}\"\n            \"\\t&lt;/table&gt;\"\n            \"&lt;/body&gt;\"\n            \"&lt;/html&gt;\";\n    };\n};\n</code></pre>\n\n<p>Really don't know what I'm doing wrong here...</p>\n\n<p>This is the error i'm getting:</p>\n\n<p>Error   2   error C2086: 'const char *DataVerifier::Structure::strHTMLTemplate' : redefinition  c:\\users\\suzan\\documents\\visual studio 2013\\projects\\test1\\test1\\testconstantsheader.cpp    7   1   Test1\nError   3   error C2086: 'const char *DataVerifier::Structure::strHTMLTemplate' : redefinition  c:\\users\\suzan\\documents\\visual studio 2013\\projects\\test1\\test1\\testconstantsheader.cpp    7   1   Test1</p>\n"}, {"tags": ["c++", "arduino", "udp", "openframeworks"], "answers": [{"tags": [], "owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "is_accepted": false, "score": 1, "last_activity_date": 1438799440, "creation_date": 1438799440, "answer_id": 31840168, "question_id": 31840013, "link": "https://stackoverflow.com/questions/31840013/openframeworks-c-arduino-udp-sendall-fails-at-1473-chars/31840168#31840168", "title": "OpenFrameworks/C++/Arduino: UDP SendAll fails at 1473 chars", "body": "<p>What's the MTU size? 1473 sound close to the default.</p>\n\n<p>You may do some experiment by increase the MTU on both side.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2563044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438799440, "creation_date": 1438798873, "question_id": 31840013, "link": "https://stackoverflow.com/questions/31840013/openframeworks-c-arduino-udp-sendall-fails-at-1473-chars", "title": "OpenFrameworks/C++/Arduino: UDP SendAll fails at 1473 chars", "body": "<p>am sending char * from OF to a teensy board.</p>\n\n<p>Here is my OF code:</p>\n\n<pre><code>void ofApp::draw() {\n    string message = \"\";\n    int total = 1472;\n    for (int i = 0; i &lt; total; i++) {\n        message += (char)ofRandom(0,255);\n    }\n    udpConnection.SendAll(message.c_str(), message.length());\n}\n</code></pre>\n\n<p>Here is my teensy code:</p>\n\n<pre><code>void loop() {\n  int packetSize = Udp.parsePacket();\n  if (packetSize) {\n    Serial.println(\"Got it!\");\n    Udp.read((char*)packetBuffer, 648*3);\n    for (int i = 0; i &lt;  3*NUM_LEDS; i+=3) {\n      leds[i/3].setRGB(packetBuffer[i], packetBuffer[i+1], packetBuffer[i+2]);\n    }\n    FastLED.show();\n  }\n}\n</code></pre>\n\n<p>The teensy code responds when it receives a packet of any size, which works fine up to 1472 chars. In the OF code, as soon as the length of the char * length is increased to 1473, the teensy stops receiving anything, and I am not getting any run time errors OF-side. Does anyone know why this would happen/what the fix is? I need to scale this up to 1944 chars eventually</p>\n\n<p>Thanks,</p>\n\n<p>Collin</p>\n"}, {"tags": ["c++", "struct", "key", "stdmap"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438798826, "post_id": 31839913, "comment_id": 51601474, "body": "You are looking at all the wrong places. <code>map::operator[]</code> isn&#39;t <code>const</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1815, "user_id": 3991688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28a449026a2de59dcbea4da40d8dd4a1?s=128&d=identicon&r=PG", "display_name": "Rabadash8820", "link": "https://stackoverflow.com/users/3991688/rabadash8820"}, "edited": false, "score": 0, "creation_date": 1438799314, "post_id": 31840015, "comment_id": 51601772, "body": "Wow, never would&#39;ve thought of that.  So are you saying that, in this case, operator[] is returning a modifiable <code>std::set&lt;&gt;&amp;</code> object, and there is no conversion from that to <code>const std::set&lt;&gt;&amp;</code>?  I find that rather surprising.  Your code compiles just fine though, thanks :)  Also, why don&#39;t you recommend leading underscores?"}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "reply_to_user": {"reputation": 1815, "user_id": 3991688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28a449026a2de59dcbea4da40d8dd4a1?s=128&d=identicon&r=PG", "display_name": "Rabadash8820", "link": "https://stackoverflow.com/users/3991688/rabadash8820"}, "edited": false, "score": 0, "creation_date": 1438799886, "post_id": 31840015, "comment_id": 51602067, "body": "No, it is not to do with the value (the set in this case) being modifiable or non-modifiable.  As I said in my answer, std::map&#39;s operator[] is a <i>non-const</i> member.  It <i>could</i> modify the map (insert the key corresponding to the input if it is not found)."}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "reply_to_user": {"reputation": 1815, "user_id": 3991688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28a449026a2de59dcbea4da40d8dd4a1?s=128&d=identicon&r=PG", "display_name": "Rabadash8820", "link": "https://stackoverflow.com/users/3991688/rabadash8820"}, "edited": false, "score": 0, "creation_date": 1438799918, "post_id": 31840015, "comment_id": 51602083, "body": "Identifiers with leading underscores are reserved by the implementation (i.e., the compiler writer)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1439010717, "post_id": 31840015, "comment_id": 51697061, "body": "@HappyGreenKidNaps That&#39;s a simplification. <code>_Ugly</code> and <code>__ugly</code> are reserved everywhere. <code>_ugly</code> is reserved only in the global namespace"}], "tags": [], "owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "is_accepted": true, "score": 1, "last_activity_date": 1438798879, "creation_date": 1438798879, "answer_id": 31840015, "question_id": 31839913, "link": "https://stackoverflow.com/questions/31839913/custom-key-for-stdmap/31840015#31840015", "title": "Custom Key for std::map&lt;&gt;", "body": "<p>The index operator (the \"[]\") is a non-const member function of std::map.  Whereas, you have clearly indicated that <code>keysBoundTo</code> is a const member.</p>\n\n<p>Rewrite <code>keysBoundTo</code> as</p>\n\n<pre><code>std::set&lt;sf::Keyboard::Key&gt; InputManager::keysBoundTo(ActionId action) const\n{\n    auto it = keyBindigs_.find(action);\n    if ( it == keyBindings_.end() )\n        return std::set&lt;sf::Keyboard::Key&gt;();\n    else\n        return it-&gt;second;\n}\n</code></pre>\n\n<p>Notice that I renamed your member variable to have a trailing underscore.  Do not use identifiers with leading underscores.</p>\n"}], "owner": {"reputation": 1815, "user_id": 3991688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28a449026a2de59dcbea4da40d8dd4a1?s=128&d=identicon&r=PG", "display_name": "Rabadash8820", "link": "https://stackoverflow.com/users/3991688/rabadash8820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "closed_date": 1438798903, "accepted_answer_id": 31840015, "answer_count": 1, "score": 2, "last_activity_date": 1442503701, "creation_date": 1438798501, "last_edit_date": 1495542126, "question_id": 31839913, "link": "https://stackoverflow.com/questions/31839913/custom-key-for-stdmap", "closed_reason": "Duplicate", "title": "Custom Key for std::map&lt;&gt;", "body": "<p>I am trying to use the following <code>struct</code> as a custom key for <code>std::map</code>:</p>\n\n<pre><code>struct ActionId {\n        // ENCAPSULATED MEMBERS\n    private:\n        size_t _id;\n        static size_t _root;\n        static size_t incrementedRoot() {\n            return (_root += 1);\n        }\n\n        // INTERFACE\n    public:\n        ActionId() :\n            _id(incrementedRoot()) { }\n        ActionId(const ActionId&amp; that) :\n            _id(that._id) { }\n        ActionId&amp; operator=(const ActionId&amp; that) {\n            this-&gt;_id = that._id;\n            return *this;\n        }\n        bool operator==(const ActionId&amp; that) const {\n            return this-&gt;_id == that._id;\n        }\n        bool operator!=(const ActionId&amp; that) const {\n            return this-&gt;_id != that._id;\n        }\n        bool operator&lt;(const ActionId&amp; that) const {\n            return this-&gt;_id &lt; that._id;\n        } \n};\n</code></pre>\n\n<p>The following dictionary is a member of a separate <code>InputManager</code> class:</p>\n\n<pre><code>std::map&lt;ActionId, std::set&lt;sf::Keyboard::Key&gt;&gt; _keyBindings;\n</code></pre>\n\n<p>which is accessed in this member function:</p>\n\n<pre><code>std::set&lt;sf::Keyboard::Key&gt; InputManager::keysBoundTo(ActionId action) const {\n    return _keyBindings[action];\n}\n</code></pre>\n\n<p>Unfortunately, the function is throwing this compiler error: </p>\n\n<blockquote>\n  <p>error C2678: binary '[' : no operator found which takes a left-hand operand of type '<code>const std::map&lt;Game2D::ActionId,std::set&lt;sf::Keyboard::Key,std::less&lt;_Kty&gt;,std::allocator&lt;_Kty&gt;&gt;,std::less&lt;Game2D::ActionId&gt;,std::allocator&lt;std::pair&lt;const Game2D::ActionId,_Ty&gt;&gt;&gt;</code>' (or there is no acceptable conversion)</p>\n</blockquote>\n\n<p>According to <a href=\"https://stackoverflow.com/q/906244/3991688\">this article</a>, the <code>operator&lt;()</code> member of <code>ActionId</code> with <code>const</code> qualification should be sufficient to make it a custom map key, while <a href=\"https://stackoverflow.com/q/6573225/3991688\">this article</a> says that all I need is to make <code>ActionId</code> copiable and assignable.  Clearly, my struct meets both of these criteria, so why won't <code>InputManager::keysBoundTo()</code> compile?</p>\n"}, {"tags": ["c++", "c++11", "typecast-operator", "typecasting-operator"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 4105601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-SZl9y1xB-yE/AAAAAAAAAAI/AAAAAAAAAX4/b-bs3ts4ivw/photo.jpg?sz=128", "display_name": "H&#233;ctor C.", "link": "https://stackoverflow.com/users/4105601/h%c3%a9ctor-c"}, "edited": false, "score": 0, "creation_date": 1438799241, "post_id": 31839803, "comment_id": 51601729, "body": "Oh, yeah, I see, I added that inheritance that wasn&#180;t on the original code. I&#180;ve been scanning both codes for differences and always overlooked that :/"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1438798167, "creation_date": 1438798167, "answer_id": 31839803, "question_id": 31839730, "link": "https://stackoverflow.com/questions/31839730/type-casting-operator-is-not-being-called/31839803#31839803", "title": "Type casting operator is not being called", "body": "<p>Derived-to-base conversion never invokes a conversion function. [class.conv.fct]/p1:</p>\n\n<blockquote>\n  <p>A conversion function is never used to convert a (possibly\n  cv-qualified) object to the (possibly cv-qualified) same object type\n  (or a reference to it), to a (possibly cv-qualified) base class of\n  that type (or a reference to it), or to (possibly cv-qualified)\n  <code>void</code>.</p>\n</blockquote>\n\n<p>In your <code>foo = bar;</code>, the <code>bar</code> binds directly to the <code>const ParentClass&amp;</code> parameter of the implicitly-declared copy assignment operator of <code>ParentClass</code>.</p>\n"}], "owner": {"reputation": 351, "user_id": 4105601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-SZl9y1xB-yE/AAAAAAAAAAI/AAAAAAAAAX4/b-bs3ts4ivw/photo.jpg?sz=128", "display_name": "H&#233;ctor C.", "link": "https://stackoverflow.com/users/4105601/h%c3%a9ctor-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 31839803, "answer_count": 1, "score": 1, "last_activity_date": 1438798478, "creation_date": 1438797902, "question_id": 31839730, "link": "https://stackoverflow.com/questions/31839730/type-casting-operator-is-not-being-called", "title": "Type casting operator is not being called", "body": "<p>I was trying to do some example code for type conversions between objects, just following what is showed <a href=\"http://www.cplusplus.com/doc/tutorial/typecasting/\" rel=\"nofollow\">here</a>.</p>\n\n<p>This is the parent class</p>\n\n<pre><code>// ParentClass.h\nclass ParentClass {\npublic:\n    ParentClass();\n    virtual ~ParentClass();\n};\n</code></pre>\n\n<p>It\u00b4s just some concept proof, the only thing it does is print something</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"ParentClass.h\"\nParentClass::ParentClass()\n{\n    std::cout &lt;&lt; \"Parent\\tDefault constructor\\n\";\n}\nParentClass::~ParentClass()\n{\n    std::cout &lt;&lt; \"Parent\\tDestructor\\n\";\n}\n</code></pre>\n\n<p>And then, the derived class</p>\n\n<pre><code>// ChildClass.h\n#include \"ParentClass.h\"\n\nclass ChildClass: public ParentClass {\npublic:\n    ChildClass();\n    // conversion constructor\n    ChildClass( const ParentClass&amp; p );\n    // conversion from assignment\n    ChildClass&amp; operator= ( const ParentClass &amp; p );\n    // type-cast operator\n    operator ParentClass();\n    // destructor\n    virtual ~ChildClass();\n};\n</code></pre>\n\n<p>And then, the code, is also rather stupid</p>\n\n<pre><code>// ChildClass.cpp\n\n#include &lt;iostream&gt;\n#include \"ChildClass.h\"\n\nChildClass::ChildClass()\n{\n    std::cout &lt;&lt; \"Child\\tDefault constructor\\n\";\n}\nChildClass::~ChildClass()\n{\n    std::cout &lt;&lt; \"Child\\tDestructor\\n\";\n}\n// conversion constructor\nChildClass::ChildClass( const ParentClass&amp; p )\n{\n    std::cout &lt;&lt; \"Child\\tConversion constructor\\n\";\n}\n// assignment operator    \nChildClass&amp; ChildClass::operator= ( const ParentClass &amp; p )\n{\n    std::cout &lt;&lt; \"Child\\toperator= conversion\\n\";\n    return *this;\n}    \n// type-cast operator\nChildClass::operator ParentClass()\n{\n    std::cout &lt;&lt; \"Child\\toperatorParentClass()\\n\";\n    return ParentClass();\n}\n</code></pre>\n\n<p>Then, I do some conversions in my main function</p>\n\n<pre><code>    std::cout &lt;&lt; \"calls Parent default constructor\\n\";\n    ParentClass foo;\n    std::cout &lt;&lt; \"calls Parent to child constructor\\n\";\n    ChildClass bar = foo;\n    std::cout &lt;&lt; \"calls assignment operator from child\\n\";\n    bar = foo;\n    std::cout &lt;&lt; \"calls Child type-cast operator\\n\";\n    foo = bar;\n    std::cout &lt;&lt; \"Exit\\n\";\n</code></pre>\n\n<p>But when I run this the code is not entering the type cast operator from the derived class, it just prints this:</p>\n\n<pre><code>calls Parent default constructor\nParent  Default constructor\ncalls Parent to child constructor\nParent  Default constructor\nChild   Conversion constructor\ncalls assignment operator from child\nChild   operator= conversion\ncalls Child type-cast operator\nExit\nChild   Destructor\nParent  Destructor\nParent  Destructor\n</code></pre>\n\n<p>I am at a loss about this, as I tried the code in the link above and it worked just like it should.</p>\n"}, {"tags": ["c++", "memory-management"], "answers": [{"tags": [], "owner": {"reputation": 638, "user_id": 5162988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pBLUO.jpg?s=128&g=1", "display_name": "R2-Dequeue", "link": "https://stackoverflow.com/users/5162988/r2-dequeue"}, "is_accepted": true, "score": 0, "last_activity_date": 1438798258, "creation_date": 1438798258, "answer_id": 31839844, "question_id": 31839503, "link": "https://stackoverflow.com/questions/31839503/managing-memory-block-created-with-new-char-but-allocated-to-stdvector-elemen/31839844#31839844", "title": "Managing memory block created with new char* but allocated to std::vector elements with custom allocator", "body": "<blockquote>\n  <p>Each char* buffer is created by the memory management object with a new call.</p>\n</blockquote>\n\n<p>That should probably be a call to <code>operator new</code> (<a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow\">ref</a>) to get uninitialized memory (unless you know that's what you want).</p>\n\n<blockquote>\n  <p>Will everything else take care of itself?</p>\n</blockquote>\n\n<p>From what you've posted, yes. Just make sure your allocator is CopyConstructable (basically, <code>allocator a; allocator b(a);</code> works).</p>\n\n<blockquote>\n  <p>Even if it will, is that proper or are there tighter memory management steps I could take for this scenario?</p>\n</blockquote>\n\n<p>You could use <code>std::unque_ptr</code> for automatic deallocation if you stick to <code>new</code>, or you could use <code>std::unique_ptr</code> with a custom deleter if you use <code>operator new</code>.</p>\n"}], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 31839844, "answer_count": 1, "score": 0, "last_activity_date": 1438798258, "creation_date": 1438797172, "question_id": 31839503, "link": "https://stackoverflow.com/questions/31839503/managing-memory-block-created-with-new-char-but-allocated-to-stdvector-elemen", "title": "Managing memory block created with new char* but allocated to std::vector elements with custom allocator", "body": "<p>I have been working on a project to store vectors in a contiguous manner. My current setup has a <code>custom allocator</code> for <code>std::vector</code> that contains a reference to a <code>memory management object</code>. </p>\n\n<ul>\n<li>The <code>memory management object</code> contains a <code>char*</code> pointing to its current buffer and an <code>std::vector</code> where I push the <code>char *</code> for a buffer once that buffer is full.</li>\n<li>Each <code>char*</code> buffer is created by the <code>memory management object</code> with a <code>new</code> call.</li>\n<li>The <code>std::vectors</code> that use the custom allocator are wrapped in a <code>SmallVector</code> class.</li>\n<li>The <code>SmallVectors</code> are created through calls to their class constructors, which don't contain any <code>new</code> or <code>malloc</code> statements.</li>\n</ul>\n\n<p>I <code>delete</code> the <code>char*'s</code> I created with a <code>new</code> in the destructor of the <code>memory  management object</code> by looping through the vector containing the <code>char *s</code> and <code>delete-ing</code> each one. Will everything else take care of itself? Even if it will, is that proper or are there tighter memory  management steps I could take for this scenario?</p>\n"}, {"tags": ["c++", "vector", "set"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1438797429, "post_id": 31839485, "comment_id": 51600636, "body": "<code>set</code> allows only a <code>const</code> view of its elements, because allowing you to mutate the elements can break the invariant of the data structure. Your options are 1) not using a <code>set</code> or 2) erase the entire <code>vector</code> from the <code>set</code>, and re-insert."}, {"owner": {"reputation": 3141, "user_id": 4561047, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG", "display_name": "intcreator", "link": "https://stackoverflow.com/users/4561047/intcreator"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438797529, "post_id": 31839485, "comment_id": 51600694, "body": "If I need to absolutely modify every element in the set would it be efficient to copy the entire set to a vector, modify each element, then re-insert?  That was my previous solution but it seems messy."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1438798237, "post_id": 31839485, "comment_id": 51601121, "body": "@brandaemon then it would be efficient to keep elements in a vector and (re)sort it when necessary. And it is strange that you are asking on efficiency, when you copy vectors just to print their content."}, {"owner": {"reputation": 474, "user_id": 5186984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1d90374f425a6ce4074e590edea2cc?s=128&d=identicon&r=PG&f=1", "display_name": "A Hernandez", "link": "https://stackoverflow.com/users/5186984/a-hernandez"}, "edited": false, "score": 0, "creation_date": 1438798491, "post_id": 31839485, "comment_id": 51601269, "body": "Why not use a list instead of a set? A set orders its members, which is why you cannot modify them like you want."}, {"owner": {"reputation": 3141, "user_id": 4561047, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG", "display_name": "intcreator", "link": "https://stackoverflow.com/users/4561047/intcreator"}, "edited": false, "score": 0, "creation_date": 1438798551, "post_id": 31839485, "comment_id": 51601300, "body": "Unfortunately, the reason why I don&#39;t use more reasonable data types is what it usually is: project requirements."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438799048, "post_id": 31839485, "comment_id": 51601616, "body": "Then only option you have to re-insert, as @T.C. mentioned before"}], "answers": [{"comments": [{"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1438798526, "post_id": 31839733, "comment_id": 51601285, "body": "I admit, my definition of &quot;works&quot; is rather narrow, but how could sorting be preserved with the OP&#39;s code anyway?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1438798952, "post_id": 31839733, "comment_id": 51601552, "body": "it can be preserved by reinserting a vector after modification."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1438804884, "post_id": 31839733, "comment_id": 51605014, "body": "A set of pointers makes no sense.  As just a set of pointers, yeah the addresses are all different, so what?  But if you give it custom comparitors to dereference the vectors, you are just introducing a trick to allow yourself to introduce UB by having a set that is not correctly sorted.  And then if you drop this and go to the &quot;modify and reinsert&quot; approach, see my comment on that answer (possible false duplicates)."}], "tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438797905, "creation_date": 1438797905, "answer_id": 31839733, "question_id": 31839485, "link": "https://stackoverflow.com/questions/31839485/how-can-i-remove-elements-of-vectors-in-a-set-of-vectors/31839733#31839733", "title": "How can I remove elements of vectors in a set of vectors?", "body": "<p>Probably not the solution you're looking for, but you could have your set hold pointers to vectors instead.  This works for me:</p>\n\n<pre><code>int main() {\n\n    vector&lt;int&gt; myVec1 = {0, 1, 2, 3, 4, 5};\n    vector&lt;int&gt; myVec2 = {3, 5, 7, 2, 4, 1};\n    vector&lt;int&gt; myVec3 = {2, 5, 3, 8, 6, 9};\n\n    set&lt;vector&lt;int&gt;*&gt; mySet;\n    mySet.insert(&amp;myVec1);\n    mySet.insert(&amp;myVec2);\n    mySet.insert(&amp;myVec3);\n\n    for(vector&lt;int&gt;* item : mySet) item-&gt;erase(item-&gt;begin() + 2);\n\n    for(vector&lt;int&gt;* item : mySet)\n    {\n        for(auto element : *item) cout &lt;&lt; \" \" &lt;&lt; element;\n        cout &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1438799459, "post_id": 31840119, "comment_id": 51601849, "body": "A reasonable design, but perhaps too tempting for someone to modify the vectors in place and break <code>set</code>&#39;s invariant."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438800550, "post_id": 31840119, "comment_id": 51602521, "body": "I think it should be <code>std::unique_ptr</code> instead of <code>std::shared_ptr</code> at least. With shared ownership in addiotion to problem, mentioned by @T.C. vector can be easily modified outside of <code>std::set</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4590120"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438800567, "post_id": 31840119, "comment_id": 51602537, "body": "@T.C. I was assuming that this code is not part of an interface but some implementation. If this is not the case, you might want to hide the functionality, which is not supposed to be accessed."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1438804609, "post_id": 31840119, "comment_id": 51604874, "body": "If you modify and reinsert in place, you are comparing the modified vector to other unmodified vectors.  You will be sorting it relative to things you don&#39;t want to sort, and you may eliminate duplicates that should not be eliminated.  Better to go with the Jerry Coffin answer, put all the modified vectors in a new set, and then swap sets."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1438804993, "post_id": 31840119, "comment_id": 51605083, "body": "Another point which I&#39;m not sure about - how do you iterate over the set to do this?  Doesn&#39;t the re-insert invalidate the iterator?  I don&#39;t actually know, but I think it should."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4590120"}, "is_accepted": false, "score": 0, "last_activity_date": 1438799839, "last_edit_date": 1438799839, "creation_date": 1438799256, "answer_id": 31840119, "question_id": 31839485, "link": "https://stackoverflow.com/questions/31839485/how-can-i-remove-elements-of-vectors-in-a-set-of-vectors/31840119#31840119", "title": "How can I remove elements of vectors in a set of vectors?", "body": "<p>You would need to remove the vector from the set of vectors before manipulating it and after the manipulation reinsert the vector.</p>\n\n<p>Since this would involve a lot of creating/copying vectors, you could use pointers to vectors -- in which case you would need your own compare function object:</p>\n\n<pre><code>struct compare\n{        bool operator()(\n                 const std::shared_ptr&lt;std::vector&lt;int&gt; &gt; &amp;_r0,\n                 const std::shared_ptr&lt;std::vector&lt;int&gt; &gt; &amp;_r1) const\n         {        return *_r0 &lt; *_r1;\n         }\n};\nstd::set&lt;std::shared_ptr&lt;std::vector&lt;int&gt; &gt;, compare&gt; sSet;\n</code></pre>\n\n<p>in order to delete the second element in each vector, I would first create a copy of all pointers:</p>\n\n<pre><code>std::vector&lt;std::shared_ptr&lt;std::vector&lt;int&gt; &gt; &gt; sCopy(\n        sSet.begin(),\n        sSet.end());\nsSet.clear();\nfor (auto p = sCopy.begin(), pEnd = sCopy.end();\n        p != pEnd;\n        ++p)\n{        auto rVectorPtr = *p;\n         if (rVectorPtr-&gt;size() &gt; 1)\n                 rVectorPtr-&gt;erase(rVectorPtr-&gt;begin() + 1);\n         sSet.insert(rVectorPtr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1438806714, "last_edit_date": 1438806714, "creation_date": 1438800302, "answer_id": 31840435, "question_id": 31839485, "link": "https://stackoverflow.com/questions/31839485/how-can-i-remove-elements-of-vectors-in-a-set-of-vectors/31840435#31840435", "title": "How can I remove elements of vectors in a set of vectors?", "body": "<p>I would use <code>std::transform</code> to take the data from the existing set, modify as needed, and insert the results into a new set, then swap the old set with the new one:</p>\n\n<pre><code>std::set&lt;std::vector&lt;int&gt; &gt; mySet { \n    {0, 1, 2, 3, 4, 5},\n    {3, 5, 7, 2, 4, 1},\n    {2, 5, 3, 8, 6, 9}\n};\n\nstd::set&lt;std::vector&lt;int&gt;&gt; temp;\n\nstd::transform(mySet.begin(), mySet.end(), \n    std::inserter(temp, temp.end()), \n    [](std::vector&lt;int&gt; s) { s.erase(s.begin() + 1); return s; }\n);\n\nstd::swap(temp, mySet);\n</code></pre>\n\n<p>If you're dealing with a lot of data, you might be better off getting a vector from the input set, erasing it from the input set, erasing the element from that vector, and inserting the result into the output.</p>\n"}], "owner": {"reputation": 3141, "user_id": 4561047, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG", "display_name": "intcreator", "link": "https://stackoverflow.com/users/4561047/intcreator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1438806714, "creation_date": 1438797131, "question_id": 31839485, "link": "https://stackoverflow.com/questions/31839485/how-can-i-remove-elements-of-vectors-in-a-set-of-vectors", "title": "How can I remove elements of vectors in a set of vectors?", "body": "<p>If I have a set of unique vectors, how can I (for example) delete the second element in each vector?  I have created the following simple example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;int&gt; myVec1 = {0, 1, 2, 3, 4, 5};\n    vector&lt;int&gt; myVec2 = {3, 5, 7, 2, 4, 1};\n    vector&lt;int&gt; myVec3 = {2, 5, 3, 8, 6, 9};\n\n    set&lt;vector&lt;int&gt;&gt; mySet;\n    mySet.insert(myVec1);\n    mySet.insert(myVec2);\n    mySet.insert(myVec3);\n\n    // right now this for loop deletes an element from a copy only\n    for(auto item : mySet) item.erase(item.begin() + 2);\n\n    for(auto item : mySet)\n    {\n        for(auto element : item) cout &lt;&lt; \" \" &lt;&lt; element;\n        cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>This example can be <a href=\"http://cpp.sh/64rz\" rel=\"nofollow\">compiled and run on cpp.sh</a>.</p>\n\n<p>Possible solutions I have considered:</p>\n\n<ul>\n<li>Using <code>for(auto&amp; item : mySet)</code>; however, this gives an error on compilation (no matching member function for call in const vector)</li>\n<li>Using an iterator (<a href=\"http://cpp.sh/9mjr\" rel=\"nofollow\">gives a similar error</a>)</li>\n</ul>\n"}, {"tags": ["java", "android", "c++", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1438797598, "post_id": 31839469, "comment_id": 51600741, "body": "One of your calls into Java before the the call that is generating the error has thrown a Java exception (on the Java side).  You need to allow this Java exception to be processed (or process it yourself) before making any more JNI method calls. See the Java Exceptions section in: <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/design.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1438798599, "post_id": 31839700, "comment_id": 51601335, "body": "Don&#39;t try to figure these things out for yourself. <code>javap -s</code> will tell you with 100% accuracy."}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1466429302, "post_id": 31839700, "comment_id": 63297941, "body": "@EJP What do you run <code>javap</code> on?  What directory?"}, {"owner": {"reputation": 462, "user_id": 2762451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9710248ab9441a885a41d44720260ef?s=128&d=identicon&r=PG&f=1", "display_name": "aasu", "link": "https://stackoverflow.com/users/2762451/aasu"}, "reply_to_user": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1473412452, "post_id": 31839700, "comment_id": 66140697, "body": "@IgorGanapolsky From its <i>man</i>, <code>javap [options] class ...</code> so <code>javap -s ClassContainingRelevantMethod.class</code>"}], "tags": [], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "is_accepted": true, "score": 3, "last_activity_date": 1438797806, "creation_date": 1438797806, "answer_id": 31839700, "question_id": 31839469, "link": "https://stackoverflow.com/questions/31839469/android-jni-error-call-function-with-boolean-argument-causes-a-crash/31839700#31839700", "title": "Android JNI error: Call function with boolean argument causes a crash", "body": "<p>Well after reading <a href=\"https://communities.ca.com/docs/DOC-99575135\" rel=\"nofollow\">this</a> document over and over, i found my problem, and this is how the <code>JNI</code> function should be:</p>\n\n<pre><code>jmethodID getPreferredLanguageMethod = env-&gt;GetMethodID(languageServiceClass, \"getPreferredLanguage\", \"(Z)Ljava/lang/String;\");\n</code></pre>\n"}], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1877, "favorite_count": 0, "accepted_answer_id": 31839700, "answer_count": 1, "score": 1, "last_activity_date": 1438797806, "creation_date": 1438797061, "question_id": 31839469, "link": "https://stackoverflow.com/questions/31839469/android-jni-error-call-function-with-boolean-argument-causes-a-crash", "title": "Android JNI error: Call function with boolean argument causes a crash", "body": "<p>I'm Trying to call this <code>JAVA</code> function:</p>\n\n<pre><code>public String getPreferredLanguage(boolean withRegion)\n</code></pre>\n\n<p>With <code>JNI</code> <code>GetMethodID</code>, But i always get a crash, i tried a lot of variations about the function signature in the <code>JNI</code> section, but none seemed to be helping.</p>\n\n<p>The <code>JNI</code> code:</p>\n\n<pre><code>methodID getPreferredLanguageMethod = env-&gt;GetMethodID(languageServiceClass, \"getPreferredLanguage\", \"(Ljava/lang/Boolean;Z)Ljava/lang/String;\");\n    if (!getPreferredLanguageMethod) {\n        TTLOGD(\"LanguageService::getPreferredLanguage: ERROR getPreferredLanguageMethod is null\\n\");\n    }\n</code></pre>\n\n<p>The crash message:</p>\n\n<pre><code>JNI DETECTED ERROR IN APPLICATION: JNI CallObjectMethodV called with pending exception java.lang.NoSuchMethodError: no non-static method \"Lcom/tabtale/mobile/acs/services/LanguageService;.getPreferredLanguage(Ljava/lang/Boolean;Z)Ljava/lang/String;\"\n</code></pre>\n\n<p>Any idea what i'm doing wrong?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438798035, "post_id": 31839444, "comment_id": 51601005, "body": "It&#39;s telling you that you are trying to instantiate <code>Encoder&lt;int&gt;</code>, because <code>Field&lt;int&gt;</code> is <code>Field&lt;int, Encoder&lt;int&gt;&gt;</code>, but <code>int</code> has no member <code>type</code> (obviously). I&#39;m not sure what&#39;s unclear about the error."}], "answers": [{"comments": [{"owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "edited": false, "score": 0, "creation_date": 1438799110, "post_id": 31839789, "comment_id": 51601655, "body": "I think you nailed it - I was confused about the types :-("}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1438798115, "creation_date": 1438798115, "answer_id": 31839789, "question_id": 31839444, "link": "https://stackoverflow.com/questions/31839444/using-template-dependent-type/31839789#31839789", "title": "Using template dependent type", "body": "<p>As part of your instantiation process, you make an <code>Encoder&lt;int&gt;</code>. But <code>Encoder&lt;T&gt;</code> has a member function:</p>\n\n<pre><code>typename T::type operator()(const typename T::type&amp; value);\n</code></pre>\n\n<p>And you cannot evaluate <code>int::type</code>. But based on <code>C::set()</code>:</p>\n\n<pre><code>template &lt;typename T&gt;                        // T = Field&lt;int&gt;\nvoid set(const typename T::type&amp; value) {    // value is int\n    typename T::encoder encode;              // encode is Encoder&lt;int&gt;\n    encode(value);        \n}\n</code></pre>\n\n<p>You're just passing in the value directly, so the <code>value</code> in question is just a <code>T</code>. That is, your <code>Encoder</code> should be:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Encoder {\n  T operator()(const T&amp; value) {\n    return value;\n  }\n};\n</code></pre>\n\n<p>Which also makes more semantic sense. An <code>Encoder</code> takes a <code>T</code> and returns some other <code>T</code>. With that change, your code compiles. </p>\n"}, {"comments": [{"owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "edited": false, "score": 0, "creation_date": 1438799107, "post_id": 31839797, "comment_id": 51601653, "body": "I think you nailed it - I was confused about the types :-("}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1438798156, "creation_date": 1438798156, "answer_id": 31839797, "question_id": 31839444, "link": "https://stackoverflow.com/questions/31839444/using-template-dependent-type/31839797#31839797", "title": "Using template dependent type", "body": "<blockquote>\n  <p>is it something I'm not doing correctly for dependent type names?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>The type used to instantiate <code>Encoder</code> is <code>int</code>, not <code>Field&lt;int&gt;</code>.</p>\n\n<p>Changing <code>Encoder</code> to:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Encoder {\n  T operator()(const T&amp; value) {\n    return value;\n  }\n};\n</code></pre>\n\n<p>works but I am not sure you didn't have something else in mind.</p>\n"}], "owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 31839789, "answer_count": 2, "score": 2, "last_activity_date": 1438798156, "creation_date": 1438796971, "last_edit_date": 1438797847, "question_id": 31839444, "link": "https://stackoverflow.com/questions/31839444/using-template-dependent-type", "title": "Using template dependent type", "body": "<p>I am trying to use templates to encode fields in a class - I'm working on a wire protocol - but those templates are giving me a hard time. Basically, I want to be able to specify \"Fields\" and how they should be encoded for the wire (among other things, I'm simplifying for this question), using templates. Here is my attempt, but I get a compile time error (see below) - is it something I'm not doing correctly for dependent type names?</p>\n\n<pre><code>// Encodes values, but identity for this example\ntemplate &lt;typename T&gt;\nstruct Encoder {\n  typename T::type operator()(const typename T::type&amp; value) {\n    return value;\n  }\n};\n\n// Declares the properties of Fields (such as Encoding...)\ntemplate &lt;typename T, typename E=Encoder&lt;T&gt;&gt;\nstruct Field {\n  typedef T type;\n  typedef E encoder;\n};\n\n// A root for all classes that need Encoded Fields\nstruct C {\n  template &lt;typename T&gt;\n  void set(const typename T::type&amp; value) {\n    typename T::encoder encode;\n    encode(value);\n  }\n};\n\n// A mock specific class with 1 Encoded Field\nstruct H : C {\n  typedef Field&lt;int&gt; my_field;\n};\n\nint main() {\n  H h;\n  h.set&lt;H::my_field&gt;(3);\n}\n</code></pre>\n\n<p>The compiler error is:</p>\n\n<pre><code> In instantiation of 'struct Encoder&lt;int&gt;': \n   required from 'void C::set(const typename T::type&amp;) [ with T = F&lt;int&gt;; typename T::type = int]'\n   required from here\n error: 'int' is not a class, struct or union type\n typename T::type operator()(const typename T::type&amp; value) {\n</code></pre>\n"}, {"tags": ["c++", "this", "delete-operator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1438797053, "post_id": 31839432, "comment_id": 51600400, "body": "See this on using a deleted pointer: <a href=\"http://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}, {"owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1438797494, "post_id": 31839432, "comment_id": 51600680, "body": "I get it clearly, that was one hell of an answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "edited": false, "score": 0, "creation_date": 1438797203, "post_id": 31839476, "comment_id": 51600508, "body": "but the thing is, I am still calling the print() via the same object I deleted earlier right. Then how print() is being executed."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "edited": false, "score": 0, "creation_date": 1438797268, "post_id": 31839476, "comment_id": 51600539, "body": "@Uchiha_itachi undefined means undefined. It might work once and crash the next 5 times, or it may work 5 times. Either way, what you are doing you should not be doing."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1438797325, "post_id": 31839476, "comment_id": 51600574, "body": "<code>obj</code> still has a non-null value to it, even after you delete the object that it pointed to.  The data from that object is still in memory (in this case), and <code>obj</code> still points to it.  So, voila, you can still access the members of that object.  This will likely work until that memory is finally overwritten by some other data, but you definitely shouldn&#39;t rely on this behavior.  This is one of my most-hated bugs, since the code might work for a long while, then suddenly stop working because you changed some other, unrelated part of your code.  This is what <code>std::unique_ptr</code> is for."}], "tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 3, "last_activity_date": 1438797088, "creation_date": 1438797088, "answer_id": 31839476, "question_id": 31839432, "link": "https://stackoverflow.com/questions/31839432/object-working-after-delete-this/31839476#31839476", "title": "object working after delete this", "body": "<p>This is undefined behavior.  The memory previously allocated to <code>x</code> and <code>y</code> just hasn't been overwritten yet when you call <code>print()</code>.  A good practice is to set <code>obj = nullptr;</code> immediately after you delete it.</p>\n"}, {"tags": [], "owner": {"reputation": 8290, "user_id": 688912, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8ea50ac182886b2a5c9980fdc474345f?s=128&d=identicon&r=PG", "display_name": "shengy", "link": "https://stackoverflow.com/users/688912/shengy"}, "is_accepted": false, "score": 0, "last_activity_date": 1438798650, "last_edit_date": 1438798650, "creation_date": 1438797497, "answer_id": 31839604, "question_id": 31839432, "link": "https://stackoverflow.com/questions/31839432/object-working-after-delete-this/31839604#31839604", "title": "object working after delete this", "body": "<p>As Carlton says, the memory was not overwritten, you can try the following code:</p>\n\n<pre><code>int main()\n{\n    Test *obj;\n    obj = new Test;\n    obj-&gt;destroy();\n    Test *another_obj = new Test(7, 8);\n    obj-&gt;print();\n    return 0;\n}\n</code></pre>\n\n<p>This printed <code>x = 7 y = 8</code> on my machine, you can play around with the code. It probably will give you different results when you try allocating memory between <code>obj-&gt;destroy()</code> and <code>obj-&gt;print()</code></p>\n\n<p>The main point is this is <em>undefined behavior</em></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I debugged the code to illustrate it more clear. you can see at first <code>obj</code>'s address is <code>0x100104aa0</code>, then when <code>delete this</code> was executed, the memory was not changed, <em>but</em>, not changing doesn't mean anything, to your program, this means memory <code>0x100104aa0</code> is <strong>free</strong> to use(there's a point here, if the program is going to write to(allocate) some memory, then it makes no difference if the memory is initialized/cleared or not, so for efficiency, free to use memory are not cleared)</p>\n\n<p>Then when I initialized <code>sss</code>, it was allocated at the same address, with new <code>x</code> and <code>y</code> values, note that after the initialization of <code>sss</code>, <code>obj</code> is still pointing to <code>0x100104aa0</code>, which happens to be the same address as <code>sss</code>, which is the reason calling <code>obj()</code> gives you <code>x = 7 y = 8</code>.</p>\n\n<pre><code>* thread #1: tid = 0x1386d, 0x0000000100000e08 a.out`main + 72 at t.cpp:19, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\n    frame #0: 0x0000000100000e08 a.out`main + 72 at t.cpp:19\n   16   {\n   17       Test *obj;\n   18       obj = new Test(1, 2);\n-&gt; 19       obj-&gt;destroy();\n   20       Test *sss = new Test(7, 8);\n   21       obj-&gt;print();\n   22       return 0;\n(lldb) p obj\n(Test *) $5 = 0x0000000100104aa0\n(lldb) x $5\n0x100104aa0: 01 00 00 00 02 00 00 00 00 00 00 00 00 00 00 00  ................\n0x100104ab0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n(lldb) n\nProcess 5010 stopped\n* thread #1: tid = 0x1386d, 0x0000000100000e17 a.out`main + 87 at t.cpp:20, queue = 'com.apple.main-thread', stop reason = step over\n    frame #0: 0x0000000100000e17 a.out`main + 87 at t.cpp:20\n   17       Test *obj;\n   18       obj = new Test(1, 2);\n   19       obj-&gt;destroy();\n-&gt; 20       Test *sss = new Test(7, 8);\n   21       obj-&gt;print();\n   22       return 0;\n   23   }\n(lldb) p obj\n(Test *) $6 = 0x0000000100104aa0\n(lldb) x $6\n0x100104aa0: 01 00 00 00 02 00 00 00 00 00 00 00 00 00 00 00  ................\n0x100104ab0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n(lldb) n\nProcess 5010 stopped\n* thread #1: tid = 0x1386d, 0x0000000100000e4b a.out`main + 139 at t.cpp:21, queue = 'com.apple.main-thread', stop reason = step over\n    frame #0: 0x0000000100000e4b a.out`main + 139 at t.cpp:21\n   18       obj = new Test(1, 2);\n   19       obj-&gt;destroy();\n   20       Test *sss = new Test(7, 8);\n-&gt; 21       obj-&gt;print();\n   22       return 0;\n   23   }\n(lldb) x $6\n0x100104aa0: 07 00 00 00 08 00 00 00 00 00 00 00 00 00 00 00  ................\n0x100104ab0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n(lldb) p sss\n(Test *) $7 = 0x0000000100104aa0\n(lldb) p obj\n(Test *) $8 = 0x0000000100104aa0\n(lldb)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438798650, "creation_date": 1438796913, "question_id": 31839432, "link": "https://stackoverflow.com/questions/31839432/object-working-after-delete-this", "title": "object working after delete this", "body": "<p>I am going through the tutorial from <a href=\"http://www.geeksforgeeks.org/delete-this-in-c/\" rel=\"nofollow\">this</a> link. It clearly says in it's second point is that after deleting the object via this, then any member of the deleted object should not be accessed after deletion. But still after deleting the object output is \"x = 0 y = 0\".\nHere is my code:</p>\n\n<pre><code> #include&lt;iostream&gt;\nusing namespace std;\nclass Test\n{\nprivate:\nint x;\nint y;\npublic:\nTest(int x = 0, int y = 0) { this-&gt;x = x; this-&gt;y = y; }\nvoid setX(int a) { x = a; }\nvoid setY(int b) { y = b; }\nvoid destroy() { delete this; }\nvoid print() { cout &lt;&lt; \"x = \" &lt;&lt; x &lt;&lt; \" y = \" &lt;&lt; y &lt;&lt; endl; }\n};\nint main()\n{\nTest *obj;\nobj = new Test;\nobj-&gt;destroy();\nobj-&gt;print();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl", "matrix"], "comments": [{"owner": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "edited": false, "score": 5, "creation_date": 1438795904, "post_id": 31839119, "comment_id": 51599787, "body": "Strange results? Could you care to elaborate please?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1438796616, "post_id": 31839119, "comment_id": 51600147, "body": "Out of the blue, I would guess the issue is the memory layout. Classic GL uses the expects matrices in column major layout, while your provide them as row major."}], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 1306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/970ed70c0bdb1e1241262c8ead344db1?s=128&d=identicon&r=PG", "display_name": "Sung", "link": "https://stackoverflow.com/users/1306355/sung"}, "is_accepted": true, "score": 1, "last_activity_date": 1438796460, "creation_date": 1438796460, "answer_id": 31839296, "question_id": 31839119, "link": "https://stackoverflow.com/questions/31839119/projection-and-orthographic-matrices-for-opengl/31839296#31839296", "title": "projection and orthographic matrices for opengl", "body": "<p>Compare with mine. It is a standard code and works well but one thing you should know is this is based on Row Vector.</p>\n\n<pre><code>void Matrix_OrthoProjection( Matrix&amp; out_M, const __VERTEX__TYPE__ width, const __VERTEX__TYPE__ height, const __VERTEX__TYPE__ nZ, const __VERTEX__TYPE__ fZ)\n{\n    // asumed r-l = width , t-b = height\n    out_M.s[_0x0_] = 2./width; out_M.s[_0x1_] = 0;              out_M.s[_0x2_] = 0;                    out_M.s[_0x3_] = 0;\n    out_M.s[_1x0_] = 0;        out_M.s[_1x1_] = 2./height;      out_M.s[_1x2_] = 0;                    out_M.s[_1x3_] = 0;\n    out_M.s[_2x0_] = 0;        out_M.s[_2x1_] = 0;              out_M.s[_2x2_] = -2./(fZ-nZ);          out_M.s[_2x3_] = 0;\n    out_M.s[_3x0_] = 0;        out_M.s[_3x1_] = 0;              out_M.s[_3x2_] = -(fZ+nZ)/(fZ-nZ);     out_M.s[_3x3_] = 1.;\n}\n\nvoid Matrix_PerspectiveProjection\n(Matrix&amp; out_M,\n const __VERTEX__TYPE__ FOV,\n const __VERTEX__TYPE__ ASPECT,\n const __VERTEX__TYPE__ NEAR,\n const __VERTEX__TYPE__ FAR)\n{\n\n    float fov = 1.0f / (float)tan(FOV * 0.5f); \n    float nf = 1.0f / (NEAR - FAR);\n\n    out_M.s[_0x0_] = fov/ASPECT;\n    out_M.s[_1x0_] = 0;\n    out_M.s[_2x0_] = 0;\n    out_M.s[_3x0_] = 0;\n\n    out_M.s[_0x1_] = 0.0;\n    out_M.s[_1x1_] = fov;\n    out_M.s[_2x1_] = 0.0;\n    out_M.s[_3x1_] = 0.0;\n\n    out_M.s[_0x2_] = 0.0;\n    out_M.s[_1x2_] = 0.0;\n    out_M.s[_2x2_] = (NEAR+FAR) * nf;\n    out_M.s[_3x2_] = (2.f*NEAR*FAR) * nf;\n\n    out_M.s[_0x3_] = 0.0;\n    out_M.s[_1x3_] = 0.0;\n    out_M.s[_2x3_] = -1.0;\n    out_M.s[_3x3_] = 0.0;\n\n}\n</code></pre>\n\n<p>Refer this image too. </p>\n\n<p><strong>Orthogonal</strong>\n<a href=\"https://i.stack.imgur.com/LK7dt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LK7dt.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Perspective</strong>\n<a href=\"https://i.stack.imgur.com/1lXkq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1lXkq.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2070, "favorite_count": 0, "accepted_answer_id": 31839296, "answer_count": 1, "score": -1, "last_activity_date": 1438796460, "creation_date": 1438795796, "question_id": 31839119, "link": "https://stackoverflow.com/questions/31839119/projection-and-orthographic-matrices-for-opengl", "title": "projection and orthographic matrices for opengl", "body": "<p>I am writing this code to setup opengl projection matrices but I am getting strange results and wanted to get some help.</p>\n\n<pre><code>void mat4Projection(mat4* out, double r, double l, double t, double b, double n, double f);\nvoid mat4OrthoProjection(mat4* out, double r, double l, double t, double b, double n, double f);\n\nvoid mat4Projection(mat4* out, double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2*n)/(r-l),  0,           (r+l)/(r-l),        0,\n                       0,          (2*n)/(t-b),  (t+b)/(t-b),        0,\n                       0,           0,           (-(f+n))/(f-n),     (-2*(f*n))/(f-n),\n                       0,           0,           -1,                 1                };\n    copyMatrix(out, data);\n}\n\nvoid mat4OrthoProjection(mat4* out, double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2)/(r-l),  0,          0,           -((r+l)/(r-l)),\n                       0,         (2)/(t-b),  0,           -((t+b)/(t-b)),\n                       0,         0,          (-2)/(f-n),  -((f+n)/(f-n)),\n                       0,         0,          0,           1              };\n    copyMatrix(out, data);\n}\n</code></pre>\n\n<p>I got this code from this link <a href=\"http://www.songho.ca/opengl/gl_projectionmatrix.html\" rel=\"nofollow\">http://www.songho.ca/opengl/gl_projectionmatrix.html</a></p>\n"}, {"tags": ["c++", "polymorphism", "ostream"], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438796316, "post_id": 31839092, "comment_id": 51599993, "body": "A more usual name than <code>display()</code> is <code>put()</code>."}], "tags": [], "owner": {"reputation": 775, "user_id": 1669250, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc0ec71517329808b28a1226a3cd00b7?s=128&d=identicon&r=PG", "display_name": "benf", "link": "https://stackoverflow.com/users/1669250/benf"}, "is_accepted": false, "score": 2, "last_activity_date": 1438795722, "last_edit_date": 1495535201, "creation_date": 1438795722, "answer_id": 31839092, "question_id": 31839091, "link": "https://stackoverflow.com/questions/31839091/how-can-i-use-the-insertion-operator-with-polymophism/31839092#31839092", "title": "How can I use the insertion operator with polymophism", "body": "<p>Ok, after searching a lot more, I found <a href=\"https://stackoverflow.com/a/28466862/1669250\">this</a> answer. After smacking my head and saying 'of course',  I summarize:</p>\n\n<p>Don't overload the insertion operator since you can't make it virtual (it's not a member function), instead declare a virtual function in the base class that is overridden in the child classes. The insertion operator uses this function:</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Base {\n    ...\n    friend inline ostream&amp; operator&lt;&lt;(ostream&amp; os, shared_ptr&lt;Base&gt; value) { return value-&gt;display(os, value); }\n    virtual ostream&amp; display(ostream&amp; os) { os &lt;&lt; \"i: \" &lt;&lt; i &lt;&lt; endl; }\n};\n\nclass Derived : public Base {\n    ...\n    ostream&amp; display(ostream&amp; os) { os &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; endl; }\n};\n</code></pre>\n\n<p><a href=\"http://cpp.sh/7v6z\" rel=\"nofollow noreferrer\">live code</a></p>\n"}], "owner": {"reputation": 775, "user_id": 1669250, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc0ec71517329808b28a1226a3cd00b7?s=128&d=identicon&r=PG", "display_name": "benf", "link": "https://stackoverflow.com/users/1669250/benf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1440016700, "answer_count": 1, "score": 0, "last_activity_date": 1438795722, "creation_date": 1438795722, "question_id": 31839091, "link": "https://stackoverflow.com/questions/31839091/how-can-i-use-the-insertion-operator-with-polymophism", "closed_reason": "Duplicate", "title": "How can I use the insertion operator with polymophism", "body": "<p>I want to implement a composite pattern where I can print the contents using std::cout</p>\n\n<p>When I print, the base class insertion operator (operator&lt;&lt;) is used instead of the most derived type. How can I cause the most derived type operator to be used?</p>\n\n<p>Example:\n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nclass Base {\n    int i;\npublic:\n    Base(int _i) : i(_i) {}\n    virtual ~Base() {}\n\n    friend inline ostream&amp; operator&lt;&lt;(ostream&amp; os, Base&amp; value) { return os &lt;&lt; \"i: \" &lt;&lt;  value.i; }\n    friend inline ostream&amp; operator&lt;&lt;(ostream&amp; os, shared_ptr&lt;Base&gt; value) { return os &lt;&lt; \"i: \" &lt;&lt;  value-&gt;i; }\n};\n\nclass Derived : public Base {\n    int x;\npublic:\n    Derived(int _x) : Base(2*_x), x(_x) {}\n\n    friend inline ostream&amp; operator&lt;&lt;(ostream&amp; os, Derived&amp; value) { return os &lt;&lt; \"x: \" &lt;&lt; value.x; }\n    friend inline ostream&amp; operator&lt;&lt;(ostream&amp; os, shared_ptr&lt;Derived&gt; value) { return os &lt;&lt; \"x: \" &lt;&lt; value-&gt;x; }\n};\n\nint main () {\n    Base* a = new Base(1);\n    Derived* d = new Derived(6);\n    Base* b = new Derived(7);\n\n    shared_ptr&lt;Base&gt; ba = make_shared&lt;Base&gt;(3);\n    shared_ptr&lt;Derived&gt; de = make_shared&lt;Derived&gt;(4);\n    shared_ptr&lt;Base&gt; bd = make_shared&lt;Derived&gt;(5);\n\n    cout &lt;&lt; \"a is: \" &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; \"*a is: \" &lt;&lt; *a &lt;&lt; endl;\n    cout &lt;&lt; \"d is: \" &lt;&lt; d &lt;&lt; endl;\n    cout &lt;&lt; \"*d is: \" &lt;&lt; *d &lt;&lt; endl;\n    cout &lt;&lt; \"b is: \" &lt;&lt; b &lt;&lt; endl;\n    cout &lt;&lt; \"*b is: \" &lt;&lt; *b &lt;&lt; endl &lt;&lt; endl;\n\n    cout &lt;&lt; \"ba is: \" &lt;&lt; ba &lt;&lt; endl;\n    cout &lt;&lt; \"*ba is: \" &lt;&lt; *ba &lt;&lt; endl;\n    cout &lt;&lt; \"de is: \" &lt;&lt; de &lt;&lt; endl;\n    cout &lt;&lt; \"*de is: \" &lt;&lt; *de &lt;&lt; endl;\n    cout &lt;&lt; \"bd is: \" &lt;&lt; bd &lt;&lt; endl;\n    cout &lt;&lt; \"*bd is: \" &lt;&lt; *bd &lt;&lt; endl;\n\n    delete a;\n    delete d;\n    delete b;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/6lxw\" rel=\"nofollow\">live code</a></p>\n\n<p>This spits out </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>a is: 0x1fe2bb0\n*a is: i: 1\nd is: 0x1fe2bd0\n*d is: x: 6\nb is: 0x1fe2bf0\n*b is: i: 14\n\nba is: i: 3\n*ba is: i: 3\nde is: x: 4\n*de is: x: 4\nbd is: i: 10\n*bd is: i: 10\n</code></pre>\n\n<p>But I would like to see *b print 7 and bd print 5 (ie. use the Derived class' insertion operator)</p>\n"}, {"tags": ["c++", "c++11", "constants", "code-duplication"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1438795731, "post_id": 31839035, "comment_id": 51599706, "body": "You could use a friend function template with perfect forwarding."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438796028, "post_id": 31839035, "comment_id": 51599849, "body": "Would you mind clarifying the difference between your question and the one you&#39;ve cited? I can see that you&#39;re using a (member) function template whereas the other question uses an &quot;ordinary&quot; (member) function; but there are approaches which work for both."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438796255, "post_id": 31839035, "comment_id": 51599963, "body": "@dyp: Ahh <a href=\"https://ideone.com/i4AVT4\" rel=\"nofollow noreferrer\">like so</a>? Basically the top two answers there wouldn&#39;t work in this case (because the callback in the non-const version would still be passed const member variables) so I wondered if there was a nicer way to do it than my solution. I like the friend function template approach - I don&#39;t think that answer features there. (Actually seems even nicer if I make it a static private function.)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1438796514, "post_id": 31839035, "comment_id": 51600093, "body": "@dyp Sounds like an answer to me..."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1438796525, "post_id": 31839035, "comment_id": 51600097, "body": "@Barry On my way, slowly :)"}], "answers": [{"tags": [], "owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "is_accepted": true, "score": 3, "last_activity_date": 1438799702, "last_edit_date": 1438799702, "creation_date": 1438799382, "answer_id": 31840159, "question_id": 31839035, "link": "https://stackoverflow.com/questions/31839035/how-to-avoid-code-duplication-between-similar-const-and-non-const-member-functio/31840159#31840159", "title": "How to avoid code duplication between similar const and non-const member functions which pass class members to callbacks?", "body": "<p>You can use a static member function template to forward <code>*this</code> to a generic function parameter:</p>\n\n<pre><code>template&lt;typename Self, typename F&gt;\nstatic void for_each_hurg(Self&amp; s, F&amp;&amp; f) {\n    for (auto&amp; h : s.hurgs) {\n        f(h);\n    }\n}\n\ntemplate&lt;typename F&gt;\nvoid for_each_hurg(F&amp;&amp; f) { for_each_hurg(*this, forward&lt;F&gt;(f))); }\n\ntemplate&lt;typename F&gt;\nvoid for_each_hurg(F&amp;&amp; f) const { for_each_hurg(*this, forward&lt;F&gt;(f))); }\n</code></pre>\n\n<p>Since the advent of reference qualifiers for member functions, the general solution is to <em>perfectly</em> forward <code>*this</code>. This doesn't always matter, since you often don't want member functions to be called on rvalues anyway. I'll add this here since I think it is part of a more general solution.</p>\n\n<p>Unfortunately, <code>*this</code> is always an lvalue, so you need additional manual care in the member function wrappers:</p>\n\n<pre><code>template&lt;typename Self, typename F&gt;\nstatic void for_each_hurg(Self&amp;&amp; s, F&amp;&amp; f) {\n    /* ... */\n}\n\ntemplate&lt;typename F&gt;\nvoid for_each_hurg(F&amp;&amp; f) &amp;&amp; { for_each_hurg(move(*this), forward&lt;F&gt;(f))); }\n\ntemplate&lt;typename F&gt;\nvoid for_each_hurg(F&amp;&amp; f) &amp; { for_each_hurg(*this, forward&lt;F&gt;(f))); }\n</code></pre>\n\n<p>Which is unfortunately not symmetric :(</p>\n\n<hr>\n\n<p>It is also possible to implement the above via a friend function template. This can have two benefits:</p>\n\n<ul>\n<li>You can move the friend function template to namespace scope, which in the case of <code>furg</code> being a class template reduces the amount of function templates the compiler has to deal with (one per class template, instead of one per instantiation). This typically requires some boilerplate code and forward-declarations, though.</li>\n<li>You can call the function with the same name either as a free function or as a member function, e.g. <code>furg f; for_each_hurg(furg, [](hurg){}); furg.for_each_hurg([](hurg){});</code> (When unqualified lookup finds a member function, it doesn't perform / ignores the results of ADL. Therefore, you'd have to put the friend function in namespace scope, in order to be able to refer to it via a qualified-id from within the non-static member function wrappers.)</li>\n</ul>\n\n<p>Additionally, you'd have to protect that function template from being to greedy; either by putting it into some <code>namespace detail</code> or adding an enable-if clause. It's probably not worth the effort.</p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 31840159, "answer_count": 1, "score": 1, "last_activity_date": 1438799702, "creation_date": 1438795540, "last_edit_date": 1495540678, "question_id": 31839035, "link": "https://stackoverflow.com/questions/31839035/how-to-avoid-code-duplication-between-similar-const-and-non-const-member-functio", "title": "How to avoid code duplication between similar const and non-const member functions which pass class members to callbacks?", "body": "<p>This is a specific case of <a href=\"https://stackoverflow.com/questions/123758/how-do-i-remove-code-duplication-between-similar-const-and-non-const-member-func\">this question</a> where <a href=\"https://stackoverflow.com/a/123995/15055\">that answer</a> doesn't directly work.</p>\n\n<p><a href=\"https://ideone.com/PXjkBA\" rel=\"nofollow noreferrer\">Consider</a>:</p>\n\n<pre><code>struct hurg {};\n\nclass furg {\npublic:\n    template &lt;class F&gt;\n    void for_each_hurg(F&amp;&amp; f) const {\n        for (auto&amp; h : hurgs) {\n            f(h);\n        }\n    }\n\n    template &lt;class F&gt;\n    void for_each_hurg(F&amp;&amp; f) {\n        for (auto&amp; h : hurgs) {\n            f(h);\n        }\n    }\nprivate:\n    std::vector&lt;hurg&gt; hurgs;\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>furg f;\nconst auto&amp; cf = f;\n\nf.for_each_hurg([](hurg&amp; h) { });\ncf.for_each_hurg([](const hurg&amp; h) { });\n</code></pre>\n\n<p>The code for the <code>const</code> and non-<code>const</code> versions is identical, but only because <code>auto&amp; h</code> infers <code>const hurg&amp;</code> in the first case and <code>hurg&amp;</code> in the second case. </p>\n\n<p>In the spirit of the previously-linked-to <a href=\"https://stackoverflow.com/a/123995/15055\">Scott Meyers' solution</a>, I came up with the following:</p>\n\n<pre><code>template &lt;class F&gt;\nvoid for_each_hurg(F&amp;&amp; f) {\n    const_cast&lt;const furg&amp;&gt;(*this).for_each_hurg([&amp;f](const hurg&amp; h) {\n        f(const_cast&lt;hurg&amp;&gt;(h));\n    });\n}    \n</code></pre>\n\n<p>However, this seems like it could be more trouble than it's worth, especially if the types are long and if I can't use C++14's generic lambdas.</p>\n"}, {"tags": ["c++", "object", "constructor", "assignment-operator"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1438795580, "post_id": 31839026, "comment_id": 51599625, "body": "Well, you implemented an assignment operator, and you get exactly the behaviour you implemented. You have nobody to blame but yourself."}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 1, "creation_date": 1438795615, "post_id": 31839026, "comment_id": 51599653, "body": "See <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 1, "last_activity_date": 1438796682, "creation_date": 1438796682, "answer_id": 31839358, "question_id": 31839026, "link": "https://stackoverflow.com/questions/31839026/c-assignment-operator-how-can-you-set-one-object-to-be-equal-to-an-instance-o/31839358#31839358", "title": "c++ assignment operator, how can you set one object to be equal to an instance of a new object?", "body": "<p>Your assignment operator doesn't really do any assigning.  What you probably want to do is this:</p>\n\n<pre><code>Object&amp; operator = (const Object&amp; b){\n    cout &lt;&lt; \"assignemnt constructor called\" &lt;&lt; endl;\n    num = b.num;\n    return *this;\n}\n</code></pre>\n\n<p>Also, the text \"Assignment constructor called\" is incorrect.  This is the <em>assignment operator</em>, not the <em>copy constructor</em>.  When you do:</p>\n\n<pre><code>b3 = Object(2);\n</code></pre>\n\n<p>you invoke the assignment operator.  Conversely, when you do:</p>\n\n<pre><code>Object b3 = Object(2)\n</code></pre>\n\n<p>you invoke the copy constructor.  A subtle but important difference.</p>\n"}], "owner": {"reputation": 869, "user_id": 4525819, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GL2QX.jpg?s=128&g=1", "display_name": "conterio", "link": "https://stackoverflow.com/users/4525819/conterio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1438796682, "creation_date": 1438795505, "question_id": 31839026, "link": "https://stackoverflow.com/questions/31839026/c-assignment-operator-how-can-you-set-one-object-to-be-equal-to-an-instance-o", "title": "c++ assignment operator, how can you set one object to be equal to an instance of a new object?", "body": "<pre><code>struct Object{\n    size_t num;\n\n    Object(size_t s){\n        num = s;\n    }\n\n    Object(string str){\n        num = 1;\n    }\n\n    Object&amp; operator = (const Object&amp; b){\n        cout &lt;&lt; \"assignemnt constructor called\" &lt;&lt; endl;\n        return *this;\n    }\n};\n\n\nint main ()\n{\n    Object b2{ 5 };\n    Object b3(\"str\");\n    b2 = b3;\n    b3 = Object(2);   //&lt;-------------how can you set b3 to be Object(2)?\n}\n</code></pre>\n\n<p>I'm trying to set an object to be equal to a new object. but b3 doesn't change in this example. Can anyhelp help me understand how I can get b3 to be a new object(2).  Thanks</p>\n"}, {"tags": ["c++", "performance", "usrp", "software-defined-radio", "uhd"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1438794614, "post_id": 31838749, "comment_id": 51599108, "body": "This is about a USRP, isn&#39;t it`"}, {"owner": {"reputation": 1691, "user_id": 4422908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/48YJT.png?s=128&g=1", "display_name": "A. Abramov", "link": "https://stackoverflow.com/users/4422908/a-abramov"}, "edited": false, "score": 0, "creation_date": 1438794647, "post_id": 31838749, "comment_id": 51599124, "body": "Intresting.... pure C pointer-like direction might do you better. If you know the structure of your operating system, you might be able to access the memory faster."}, {"owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "edited": false, "score": 0, "creation_date": 1438794661, "post_id": 31838749, "comment_id": 51599131, "body": "Yep...I&#39;m using a USRP N210."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 1, "creation_date": 1438794728, "post_id": 31838749, "comment_id": 51599177, "body": "Does std::copy copy element wise? This is a common mistake when doing IO. Super slow."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1438795063, "post_id": 31838749, "comment_id": 51599344, "body": "added the USRP and the software-defined-radio tags, since they apply here. Not getting the overall system performance needed for real-time processing is a very common problem."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 1691, "user_id": 4422908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/48YJT.png?s=128&g=1", "display_name": "A. Abramov", "link": "https://stackoverflow.com/users/4422908/a-abramov"}, "edited": false, "score": 0, "creation_date": 1438795440, "post_id": 31838749, "comment_id": 51599552, "body": "@A.Abramov UHD, the device interface Mlagma uses, is C++ (it has a brand new C wrapper, but that&#39;s not as practical as the original/underlying C++, and also not faster)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1438795851, "post_id": 31838749, "comment_id": 51599768, "body": "Writing to disk is slow. Don&#39;t expect to be able to write more than 50 MB/s. There is not much you can do to improve this situation; consider saving the data to a RAM disk (e.g. a <code>tmpfs</code>) or buying a faster mass storage device (e.g. an SSD)."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1438796446, "post_id": 31838749, "comment_id": 51600055, "body": "@FUZxxl yes, but please also be aware that not every SSD is up to these write rates -- you see, you need the write rate the USRP enforces as an absolute minimum rate for short term averages, not as an &quot;over the whole disk&quot; average. So often, not even SSDs are up to the task. There&#39;s actually been a lot of discussion about how to make things work for &gt; 100MS/s ."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1520947339, "post_id": 31838749, "comment_id": 85517618, "body": "you probably will want to compress the data a bit so you are moving less bytes overall."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1438795154, "post_id": 31838832, "comment_id": 51599405, "body": "Agreed, adding more:  write the incoming data to one or more huge buffers (depending on lag time between receiving data and writing to file).  Create a thread that reads from this buffer and writes to the file (in <b>huge blocks</b>).  Also, use as much hardware assistance as possible, such as DMA."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438795367, "post_id": 31838832, "comment_id": 51599509, "body": "@ThomasMatthews Agreeing in general, larger chunks of data = better performance, but this also has downsides, namely, if the chunks don&#39;t get too large, the OS might not be busy for overly long processing these, and on systems where CPU cores are sparse, the time that an OS is busy with file I/O might get critical if it can&#39;t keep up with getting data through the network simultaneously. Linux scales pretty well on multiple cores, so this is really just a problem on single-core CPUs."}, {"owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438796474, "post_id": 31838832, "comment_id": 51600073, "body": "@ThomasMatthews I switched to <code>write</code> like you suggested, and it&#39;s a tremendous improvement - it has yet to overflow. I&#39;ve also increased the size of my buffer."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "edited": false, "score": 0, "creation_date": 1438796529, "post_id": 31838832, "comment_id": 51600101, "body": "@Mlagma good to hear that! As soon as your application does more than just writing to a file (which you could also just do with the mentioned example program), I still recommend going multi-threaded."}, {"owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438796678, "post_id": 31838832, "comment_id": 51600190, "body": "@ThomasMatthews I&#39;m currently working on a multi-threaded application. In practice, I wouldn&#39;t write the file in this function. For the time being, it&#39;s just for proof of concept. I recently just finished a multi-threaded buffer for passing the samples along to different portions of the program, such as demodulation and what not."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1438808736, "post_id": 31838832, "comment_id": 51607142, "body": "The two thread thing is not necessary because both input and output are buffered by the OS. One thread is enough to drive both devices to the max (until bottlenecked)."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439028022, "post_id": 31838832, "comment_id": 51700543, "body": "@usr: in a perfect world, that <i>might</i> be true, but having a pool of buffers exchanging data between receiving and writing hardware is absolutely necessary here, as many examples of USRP usage showed."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439029503, "post_id": 31838832, "comment_id": 51700841, "body": "@usr: to explain a little better: If buffering was arbitrarily flexible and throughput would be the only measure important here, your comment would be true. However, the problem here is that neither assumption is true: latency matters, because after a while of buffering away packets coming in over gigabit ethernet (or USB3, or 10GigE, or PCIe, to name the interfaces of the current non-embedded USRPs), the buffers are just full, and the OS and hardware are forced to drop data. That&#39;s a catastrophe! So, no, you cannot rely on your OS to &quot;guess&quot; what architecture your application needs."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439029834, "post_id": 31838832, "comment_id": 51700908, "body": "@MarcusM&#252;ller\ua57a\ua57a if we assume that the streaming destination can handle all data then even a small amount of buffering should be enough. Just enough so that reading and writing is overlapped. That being said if this is UDP (which it does not look like; looks like TCP) then custom buffering can make sense to increase the probability that it will work. On the other hand simply increasing socket buffer size also should be enough."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439035870, "post_id": 31838832, "comment_id": 51702532, "body": "@usr: real world experience show that this assumption is wrong, even with striping raids of SSDs for high rates. Don&#39;t get me wrong, if you&#39;re doing data processing in general, your assumptions are fine, but this is the real time world, where PCs just don&#39;t work with &quot;average rates&quot;, but with short term-latencies that can easily get too large. Btw, UHD is UDP (TCP doesn&#39;t make sense, a packet a few ms too late is simply not useful anymore). OP already increased buffer sizes. Really, your assumptions do not meet reality, here."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 13, "last_activity_date": 1438794834, "creation_date": 1438794834, "answer_id": 31838832, "question_id": 31838749, "link": "https://stackoverflow.com/questions/31838749/improving-optimizing-file-write-speed-in-c/31838832#31838832", "title": "Improving/optimizing file write speed in C++", "body": "<p>So the main problem here is that you try to write in the same thread as you receive, which means that your recv() can only be called again after copy is complete. A few observations:</p>\n\n<ul>\n<li>Move the writing to a different thread. This is about a USRP, so GNU Radio might really be the tool of your choice -- it's inherently multithreaded.</li>\n<li>Your output iterator is probably not the most performant solution. Simply \"write()\" to a file descriptor might be better, but that's performance measurements that are up to you</li>\n<li>If your hard drive/file system/OS/CPU aren't up to the rates coming in from the USRP, even if decoupling receiving from writing thread-wise, then there's nothing you can do -- get a faster system.</li>\n<li>Try writing to a RAM disk instead</li>\n</ul>\n\n<p>In fact, I don't know how you came up with the <code>std::copy</code> approach. The <a href=\"https://github.com/EttusResearch/uhd/blob/master/host/examples/rx_samples_to_file.cpp\">rx_samples_to_file example that comes with UHD</a> does this with a simple write, and you should definitely favor that over copying; file I/O can, on good OSes, often be done with one copy less, and iterating over all elements is probably very slow.</p>\n"}, {"comments": [{"owner": {"reputation": 683, "user_id": 2181146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fACs0.jpg?s=128&g=1", "display_name": "Eliot Gillum", "link": "https://stackoverflow.com/users/2181146/eliot-gillum"}, "edited": false, "score": 0, "creation_date": 1520928603, "post_id": 31839619, "comment_id": 85505527, "body": "Don&#39;t bypass buffering. Do your IO asynchronously or at least on a separate thread.  Wasting CPU is bad, but whatever you do, keep the OS buffer populated so it can keep the drive efficient."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 683, "user_id": 2181146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fACs0.jpg?s=128&g=1", "display_name": "Eliot Gillum", "link": "https://stackoverflow.com/users/2181146/eliot-gillum"}, "edited": false, "score": 0, "creation_date": 1520947007, "post_id": 31839619, "comment_id": 85517354, "body": "@EliotGillum: it&#39;s comments like this that convince SO&#39;s best contributors that they might as well quit and raise flowers instead of trying to help others. You have a lot of company, but you are personally responsible for making the world a worse place. Reread the last paragraph of the answer. Continue rereading it as often as necessary to realize that your comment is thoroughly and utterly wrong."}, {"owner": {"reputation": 683, "user_id": 2181146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fACs0.jpg?s=128&g=1", "display_name": "Eliot Gillum", "link": "https://stackoverflow.com/users/2181146/eliot-gillum"}, "edited": false, "score": 0, "creation_date": 1520971634, "post_id": 31839619, "comment_id": 85533357, "body": "cruelty never makes a community better, no matter how much rep you have"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 683, "user_id": 2181146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fACs0.jpg?s=128&g=1", "display_name": "Eliot Gillum", "link": "https://stackoverflow.com/users/2181146/eliot-gillum"}, "edited": false, "score": 0, "creation_date": 1521000179, "post_id": 31839619, "comment_id": 85542290, "body": "I don&#39;t think it&#39;s cruelty. I think it&#39;s an observation of fact. &quot;...my goal is to capture a stream of data coming in over gigabit Ethernet and simply save it to a file.&quot; That shows <i>no</i> indication that he will benefit from polluting the cache with the content of the file he&#39;s receiving."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 5, "last_activity_date": 1438797886, "last_edit_date": 1438797886, "creation_date": 1438797551, "answer_id": 31839619, "question_id": 31838749, "link": "https://stackoverflow.com/questions/31838749/improving-optimizing-file-write-speed-in-c/31839619#31839619", "title": "Improving/optimizing file write speed in C++", "body": "<p>Let's do a bit of math.</p>\n\n<p>Your samples are (apparently) of type <code>std::complex&lt;std::float&gt;</code>. Given a (typical) 32-bit float, that means each sample is 64 bits. At 10 MS/s, that means the raw data is around 80 megabytes per second--that's within what you can expect to write to a desktop (7200 RPM) hard drive, but getting fairly close to the limit (which is typically around 100-100 megabytes per second or so).</p>\n\n<p>Unfortunately, despite the <code>std::ios::binary</code>, you're actually writing the data in text format (because <code>std::ostream_iterator</code> basically does <code>stream &lt;&lt; data;</code>).</p>\n\n<p>This not only loses some precision, but increases the size of the data, at least as a rule. The exact amount of increase depends on the data--a small integer value can actually decrease the quantity of data, but for arbitrary input, a size increase close to 2:1 is fairly common. With a 2:1 increase, your outgoing data is now around 160 megabytes/second--which is faster than most hard drives can handle.</p>\n\n<p>The obvious starting point for an improvement would be to write the data in binary format instead:</p>\n\n<pre><code>uint32_t nItems = std::end(rxBuffer)-std::begin(rxBuffer);\noutFile.write((char *)&amp;nItems, sizeof(nItems));\noutFile.write((char *)&amp;rxBuffer[0], sizeof(rxBuffer));\n</code></pre>\n\n<p>For the moment I've used <code>sizeof(rxBuffer)</code> on the assumption that it's a real array. If it's actually a pointer or vector, you'll have to compute the correct size (what you want is the total number of bytes to be written).</p>\n\n<p>I'd also note that as it stands right now, your code has an even more serious problem: since it hasn't specified a separator between elements when it writes the data, the data will be written without anything to separate one item from the next. That means if you wrote two values of (for example) <code>1</code> and <code>0.2</code>, what you'd read back in would not be <code>1</code> and <code>0.2</code>, but a single value of <code>10.2</code>. Adding separators to your text output will add yet more overhead (figure around 15% more data) to a process that's already failing because it generates too much data.</p>\n\n<p>Writing in binary format means each float will consume precisely 4 bytes, so delimiters are not necessary to read the data back in correctly.</p>\n\n<p>The next step after that would be to descend to a lower-level file I/O routine. Depending on the situation, this might or might not make much difference. On Windows, you can specify <code>FILE_FLAG_NO_BUFFERING</code> when you open a file with <code>CreateFile</code>. This means that reads and writes to that file will basically bypass the cache and go directly to the disk.</p>\n\n<p>In your case, that's probably a win--at 10 MS/s, you're probably going to use up the cache space quite a while before you reread the same data. In such a case, letting the data go into the cache gains you virtually nothing, but costs you some data to copy data to the cache, then somewhat later copy it out to the disk. Worse, it's likely to pollute the cache with all this data, so it's no longer storing other data that's a lot more likely to benefit from caching.</p>\n"}], "owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5612, "favorite_count": 2, "accepted_answer_id": 31838832, "answer_count": 2, "score": 11, "last_activity_date": 1453224774, "creation_date": 1438794530, "last_edit_date": 1453224774, "question_id": 31838749, "link": "https://stackoverflow.com/questions/31838749/improving-optimizing-file-write-speed-in-c", "title": "Improving/optimizing file write speed in C++", "body": "<p>I've been running into some issues with writing to a file - namely, not being able to write fast enough. </p>\n\n<p>To explain, my goal is to capture a stream of data coming in over gigabit Ethernet and simply save it to a file. </p>\n\n<p>The raw data is coming in at a rate of 10MS/s, and it's then saved to a buffer and subsequently written to a file. </p>\n\n<p>Below is the relevant section of code:</p>\n\n<pre><code>    std::string path = \"Stream/raw.dat\";\n    ofstream outFile(path, ios::out | ios::app| ios::binary);\n\n    if(outFile.is_open())\n        cout &lt;&lt; \"Yes\" &lt;&lt; endl;\n\n    while(1)\n    {\n         rxSamples = rxStream-&gt;recv(&amp;rxBuffer[0], rxBuffer.size(), metaData);\n         switch(metaData.error_code)\n         {\n\n             //Irrelevant error checking...\n\n             //Write data to a file\n                std::copy(begin(rxBuffer), end(rxBuffer), std::ostream_iterator&lt;complex&lt;float&gt;&gt;(outFile));\n         }\n    } \n</code></pre>\n\n<p>The issue I'm encountering is that it's taking too long to write the samples to a file. After a second or so, the device sending the samples reports its buffer has overflowed. After some quick profiling of the code, nearly all of the execution time is spent on <code>std::copy(...)</code> (99.96% of the time to be exact). If I remove this line, I can run the program for hours without encountering any overflow. </p>\n\n<p>That said, I'm rather stumped as to how I can improve the write speed. I've looked through several posts on this site, and it seems like the most common suggestion (in regard to speed) is to implement file writes as I've already done - through the use of <code>std::copy</code>. </p>\n\n<p>If it's helpful, I'm running this program on Ubuntu x86_64. Any suggestions would be appreciated.</p>\n"}, {"tags": ["c++", "copy-constructor", "move-semantics", "copy-assignment"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1438795123, "post_id": 31838748, "comment_id": 51599384, "body": "Backward compatibility is the reason. Worth noting that implicitly generating a copy operation when a copy operation (or the destructor) is user-declared is deprecated."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1438795323, "post_id": 31838748, "comment_id": 51599489, "body": "Yes, that&#39;s how it should&#39;ve been. A user declared copy constructor should prevent implicit declaration of a copy assignment operator and vice versa. Similarly, a user declared destructor should prevent implicit declaration of both copy special members, and C++11 deprecates these cases. But doing away with them completely would break a lot of existing code."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1438956601, "post_id": 31838748, "comment_id": 51677191, "body": "Answered here: <a href=\"http://stackoverflow.com/a/11255258/576911\">stackoverflow.com/a/11255258/576911</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 1, "creation_date": 1438893496, "post_id": 31839069, "comment_id": 51649833, "body": "Why weren&#39;t it part of the first C++ standard ?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1438795645, "last_edit_date": 1495541213, "creation_date": 1438795645, "answer_id": 31839069, "question_id": 31838748, "link": "https://stackoverflow.com/questions/31838748/generated-copy-and-move-operators/31839069#31839069", "title": "Generated copy and move operators?", "body": "<blockquote>\n  <p>I think the rationale part could be applied to the copy constructor and copy assignment operator pair also, couldn't it ? </p>\n</blockquote>\n\n<p>Absolutely. The standard agrees with you. In [class.copy]:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare <strong>a copy constructor</strong>, a non-explicit one is declared implicitly.\n  If the class definition declares a move constructor or move assignment operator, the implicitly declared copy\n  constructor is defined as deleted; otherwise, it is defined as defaulted (8.4). <strong>The latter case is deprecated if\n  the class has a user-declared copy assignment operator or a user-declared destructor.</strong></p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare <strong>a copy assignment operator</strong>, one is declared implicitly. If\n  the class definition declares a move constructor or move assignment operator, the implicitly declared copy\n  assignment operator is defined as deleted; otherwise, it is defined as defaulted (8.4). <strong>The latter case is\n  deprecated if the class has a user-declared copy constructor or a user-declared destructor.</strong></p>\n</blockquote>\n\n<p>Of course there's probably a lot of existing code that would break if the \"latter cases\" in question were done away with immediately, which is why the Standard moved first to deprecation and will only remove them at some arbitrarily distant point in the future. </p>\n\n<p>Then again, even long-deprecated-and-since-removed features have a way of hanging around long past their welcome. Like <a href=\"https://stackoverflow.com/q/31816473/2069064\"><code>char * s = \"MyString\";</code></a></p>\n"}], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 31839069, "answer_count": 1, "score": 2, "last_activity_date": 1438795645, "creation_date": 1438794525, "question_id": 31838748, "link": "https://stackoverflow.com/questions/31838748/generated-copy-and-move-operators", "title": "Generated copy and move operators?", "body": "<p>Currently I read the book <b>Effective Modern C++</b> from <b>Scott Meyers</b>, and now I'm at: <i>Item 17: Understand special member function generation.</i></p>\n\n<p>My misunderstanding comes from the following part (rationale):</p>\n\n<p><i>The two copy operations are independent: declaring one doesn\u2019t prevent compilers from generating the other. So if you declare a copy constructor, but no copy assignment operator, then write code that requires copy assignment, compilers will generate the copy assignment operator for you. Similarly, if you declare a copy assignment operator, but no copy constructor, yet your code requires copy construction, compilers will generate the copy constructor for you. That was true in C++98, and it\u2019s still true in C++11.</p>\n\n<p>The two move operations are not independent. If you declare either, that prevents compilers from generating the other. The <b>rationale</b> is that if you declare, say, a move constructor for your class, you\u2019re indicating that there\u2019s something about how move construction should be implemented that\u2019s different from the default memberwise move that compilers would generate. And if there\u2019s something wrong with memberwise move construction, there\u2019d probably be something wrong with memberwise move assignment, too. So declaring a move constructor prevents a move assignment operator from being generated, and declaring a move assignment operator prevents compilers from generating a move constructor.</i></p>\n\n<p>I think the rationale part could be applied to the <i>copy constructor</i> and <i>copy assignment operator</i> pair also, couldn't it ? So if I declare a copy constructor I indicate with it that the default memberwise copy is not adequate for me. And if I say this than probably the copy assignment operator should be user defined also.</p>\n\n<p>I think it's a great book, but at this point this rationale is not clear for me. Please help and explain this for me. Thanks.</p>\n"}, {"tags": ["c++", "functor", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1438821148, "last_edit_date": 1438821148, "creation_date": 1438794390, "answer_id": 31838711, "question_id": 31838611, "link": "https://stackoverflow.com/questions/31838611/why-use-invoke-helper-rather-than-just-call-functor/31838711#31838711", "title": "why use invoke helper rather than just call functor?", "body": "<p>A pointer to member is <code>Callable</code>, and <code>invoke</code> (or <code>INVOKE</code>, as that <a href=\"http://cplusplus.github.io/LWG/lwg-active.html#2219\" rel=\"nofollow\">soon-to-be-seven-bullet-point construct</a> is known in the Standard)'s magic handles this case (well, four and soon to be six cases actually), while the function call syntax doesn't. </p>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 4, "last_activity_date": 1483958084, "last_edit_date": 1495541360, "creation_date": 1483958084, "answer_id": 41546012, "question_id": 31838611, "link": "https://stackoverflow.com/questions/31838611/why-use-invoke-helper-rather-than-just-call-functor/41546012#41546012", "title": "why use invoke helper rather than just call functor?", "body": "<p>I want to complement <a href=\"https://stackoverflow.com/a/31838711/2805305\">T.C.'s answer</a> with a syntactic example:</p>\n\n<pre><code>struct X {\n  int x;\n  int foo(int a) const { return a + x; }\n};\n</code></pre>\n\n<p>and you have an <code>X</code> object and a pointer to a member function, e.g.:</p>\n\n<pre><code>X obj = X{1000};\nauto fn = &amp;X::foo;\n</code></pre>\n\n<p>and need to call <code>func</code>.</p>\n\n<ul>\n<li><p>With the call syntax, this won't work:</p>\n\n<pre><code>func_call(fn, obj, 24); // compiler error\n</code></pre>\n\n<blockquote>\n  <p>error: must use '.<em>' or '-></em>' to call pointer-to-member function in [...]</p>\n</blockquote>\n\n<p>Instead you have to work around it:</p>\n\n<pre><code>func_call([obj, fn](int a) { return (obj.*fn)(a); }, 24);\n</code></pre></li>\n<li><p>If you had the invoke method, you could just have written:</p>\n\n<pre><code>func_invoke(fn, obj, 24);\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 31838711, "answer_count": 2, "score": 11, "last_activity_date": 1483958084, "creation_date": 1438793994, "last_edit_date": 1438795383, "question_id": 31838611, "link": "https://stackoverflow.com/questions/31838611/why-use-invoke-helper-rather-than-just-call-functor", "title": "why use invoke helper rather than just call functor?", "body": "<p>As shown in the 'possible implementation' of <a href=\"http://en.cppreference.com/w/cpp/experimental/apply\"><code>std::apply</code></a> we see that the standard library function <a href=\"http://en.cppreference.com/w/cpp/utility/functional/invoke\"><code>std::invoke</code></a> is used to invoke the callable object <code>F</code>.</p>\n\n<p>Is it needed in this situation? if so, for what reason?</p>\n\n<p>What are the benefits of writing:</p>\n\n<pre><code>template&lt;typename F, typename ... Args&gt;\ndecltype(auto) func(F &amp;&amp;f, Args &amp;&amp;... args){\n    return std::invoke(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>over:</p>\n\n<pre><code>template&lt;typename F, typename ... Args&gt;\ndecltype(auto) func(F &amp;&amp;f, Args &amp;&amp;... args){\n    return std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "createprocess"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1438799641, "post_id": 31838469, "comment_id": 51601930, "body": "What aspect of this problem are you finding hard?"}, {"owner": {"reputation": 968, "user_id": 990666, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8d529bafee19e75a60b00f035a7a58ae?s=128&d=identicon&r=PG", "display_name": "Molossus Spondee", "link": "https://stackoverflow.com/users/990666/molossus-spondee"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438803332, "post_id": 31838469, "comment_id": 51604146, "body": "I want to be certain my solution is correct and not missing some corner case.  I am hoping in the best case that someone knows of a function in a Windows standard library to do this."}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1438803496, "post_id": 31838469, "comment_id": 51604219, "body": "@DavidHeffernan I hope you&#39;re joking. Code Review does not tolerate this."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1438803600, "post_id": 31838469, "comment_id": 51604279, "body": "@Mast Not this question as is. A question with the working code that asker has."}, {"owner": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1438803694, "post_id": 31838469, "comment_id": 51604338, "body": "@DavidHeffernan: Then first ask the OP to post working code, also to make sure some actually exists.  Don&#39;t recommend alternate sites until the question is ready to go."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 1, "creation_date": 1438803770, "post_id": 31838469, "comment_id": 51604386, "body": "@Jamal It would clearly be a different question on a different site. I didn&#39;t say, &quot;ask this question there&quot;, I said &quot;ask there&quot;."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 0, "creation_date": 1438806028, "post_id": 31838469, "comment_id": 51605617, "body": "@Jamal It would be inappropriate to ask the poster to post his working code here, as code review questions are off-topic here. You shouldn&#39;t be recommending that people make their posts off-topic."}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1438806178, "post_id": 31838469, "comment_id": 51605693, "body": "@RossRidge Working code with the question &quot;now I need the inverse, what&#39;s that?&quot; would most probably be on-topic here and off-topic there (feature requests are off-topic on Code Review). Not all working code on SO is off-topic by default."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1438806637, "post_id": 31838469, "comment_id": 51605941, "body": "@Mast  He doesn&#39;t have any working code that he needs the inverse of. He has a solution to question he asked, but is unsure if it&#39;s correct."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "edited": false, "score": 0, "creation_date": 1511513768, "post_id": 31838469, "comment_id": 81893447, "body": "@ivaigult : I don&#39;t understand the reluctance to use <code>GetCommandLine</code>.  If you are using <code>CreateProcess</code>, you are already in non-portable land.  (Or is this about &quot;I have an array of character pointers that my linux-based code is expecting to pass to <code>exec</code>, and I want to call <code>CreateProcess</code>)"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1511516039, "post_id": 31838469, "comment_id": 81894844, "body": "@MartinBonner I have some code that manipulates with <code>argv</code> e.g. adds/removes some arguments depending on some condition. Then, I have a function <code>void spawn_process(int argc, char** argv)</code>, which should be cross platform. All the OS aware code works with the function."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511555278, "post_id": 31838469, "comment_id": 81914053, "body": "&quot;<code>argv[i]</code> might contain spaces&quot; - it can only contain spaces if the argument supplied is quoted: <code>my_app.exe &quot;another_app.exe arg1 arg2 arg3&quot;</code>"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511858278, "post_id": 31838469, "comment_id": 82010317, "body": "People who down-vote this, please, consider adding a comment, what&#39;s wrong with this post. As for me, it was useful to know that I should perform quotation on my own and there are pitfalls like @MartinBonner noted."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511861853, "post_id": 31838469, "comment_id": 82012634, "body": "@WeatherVane: It is true that to supply an argument that contains spaces you have to quote it, but so what?  The value of <code>argv[i]</code> won&#39;t contain those quotes - you need to put them back."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 5, "last_activity_date": 1438807108, "creation_date": 1438807108, "answer_id": 31842377, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/31842377#31842377", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>There is no Win32 API that does the reverse of <code>CommandLineToArgvW()</code>.  You have to format the command line string yourself.  This is nothing more than basic string concatenation.</p>\n\n<p>Microsoft documents the format for command-line arguments (or at least the format expected by VC++-written apps, anyway):</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/17w5ykft.aspx\" rel=\"noreferrer\">Parsing C++ Command-Line Arguments</a></p>\n\n<blockquote>\n  <p>Microsoft C/C++ startup code uses the following rules when\n  interpreting arguments given on the operating system command line: </p>\n  \n  <ul>\n  <li><p>Arguments are delimited by white space, which is either a space or a\n  tab.</p></li>\n  <li><p>The caret character (^) is not recognized as an escape character or\n  delimiter. The character is handled completely by the command-line\n  parser in the operating system before being passed to the argv array\n  in the program.</p></li>\n  <li><p>A string surrounded by double quotation marks (\"string\") is\n  interpreted as a single argument, regardless of white space contained\n  within. A quoted string can be embedded in an argument.</p></li>\n  <li><p>A double quotation mark preceded by a backslash (\\\") is interpreted\n  as a literal double quotation mark character (\").</p></li>\n  <li><p>Backslashes are interpreted literally, unless they immediately\n  precede a double quotation mark.</p></li>\n  <li><p>If an even number of backslashes is followed by a double quotation\n  mark, one backslash is placed in the argv array for every pair of\n  backslashes, and the double quotation mark is interpreted as a string\n  delimiter.</p></li>\n  <li><p>If an odd number of backslashes is followed by a double quotation\n  mark, one backslash is placed in the argv array for every pair of\n  backslashes, and the double quotation mark is \"escaped\" by the\n  remaining backslash, causing a literal double quotation mark (\") to be\n  placed in argv.</p></li>\n  </ul>\n</blockquote>\n\n<p>It should not be hard for you to write a function that takes an array of strings and concatenates them together, applying the reverse of the above rules to each string in the array.</p>\n"}, {"comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511410164, "post_id": 47428026, "comment_id": 81850031, "body": "Well, you&#39;ll also have to escape any <code>&quot;</code>,<code>\\ </code>, and <code>^</code> characters present.  Could also make the quoting optional, if <code>strchr(argv[i], &#39; &#39;)</code> or <code>strchr(argv[i], &#39;\\t&#39;)</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511516162, "post_id": 47428026, "comment_id": 81894911, "body": "@lockcmpxchg8b : The question asks about &quot;CreateProcess&quot;.  You don&#39;t need to quote &#39;^&#39; unless you are going via Cmd.exe."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511518984, "post_id": 47428026, "comment_id": 81896679, "body": "You are correct. I figured that out doing my implementation."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 2, "last_activity_date": 1511331520, "creation_date": 1511331520, "answer_id": 47428026, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47428026#47428026", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>You need to recreate the command line, taking care of having all program name and arguments enclosed in <code>\"</code>. This is done by concatenating a <code>\\\"</code> to these strings, one at the beginning, one at the end.</p>\n\n<p>Assuming the program name to be created is <code>argv[1]</code>, the first argument <code>argv[2]</code> etc...</p>\n\n<pre><code>char command[1024]; // size to be adjusted\nint i;\nfor (*command=0, i=1 ; i&lt;argc ; i++) {\n   if (i &gt; 1) strcat(command, \" \");\n   strcat(command, \"\\\"\");\n   strcat(command, argv[i]);\n   strcat(command, \"\\\"\");\n}\n</code></pre>\n\n<p>Use the 2<sup>nd</sup> argument of CreateProcess</p>\n\n<pre><code>CreateProcess(NULL, command, ...);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1540897158, "last_edit_date": 1540897158, "creation_date": 1511514564, "answer_id": 47469792, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47469792#47469792", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>The definitive answer on how to quote arguments is on Daniel Colascione's blog: </p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/</a></p>\n\n<p>I am reluctant to quote the code here because I don't know the license.  The basic idea is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>for each single argument:\n    if it does not contain  \\t\\n\\v\\\", \n        just use as is\n    else\n        output \"\n        for each character\n            backslashes = 0\n            if character is backslash\n                count how many successive backslashes there are\n            fi\n            if eow\n                output the backslashs doubled\n                break\n            else if char is \"\n                output the backslashs doubled\n                output \\\"\n            else\n                output the backslashes (*not* doubled)\n                output character\n            fi\n        rof\n        output \"\n    fi // needs quoting\nrof // each argument\n</code></pre>\n\n<p>If you need to pass the command line to cmd.exe, see the article (it's different).</p>\n\n<p>I think it is crazy that the Microsoft C runtime library doesn't have a function to do this.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8584714"}, "is_accepted": false, "score": 0, "last_activity_date": 1511869124, "creation_date": 1511869124, "answer_id": 47530646, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47530646#47530646", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>You can check out the below code if it suits your need, the txt array sz can be used as a string pointer. I have added code support for both Unicode and MBCS, </p>\n\n<pre><code>            #include &lt;string&gt;\n            #include &lt;vector&gt;\n\n            #ifdef _UNICODE\n                #define String std::wstring\n            #else\n                #define String std::string\n            #endif \n\n            int _tmain(int argc, _TCHAR* argv[])\n            {\n                TCHAR sz[1024] = {0};\n                std::vector&lt;String&gt; allArgs(argv, argv + argc);\n\n                for(unsigned i=1; i &lt; allArgs.size(); i++)\n                {\n                    TCHAR* ptr = (TCHAR*)allArgs[i].c_str();\n                    _stprintf_s(sz, sizeof(sz), _T(\"%s %s\"), sz, ptr);\n                }\n\n                return 0;\n            }\n</code></pre>\n"}], "owner": {"reputation": 968, "user_id": 990666, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8d529bafee19e75a60b00f035a7a58ae?s=128&d=identicon&r=PG", "display_name": "Molossus Spondee", "link": "https://stackoverflow.com/users/990666/molossus-spondee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1540897158, "creation_date": 1438793541, "last_edit_date": 1511280639, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>Let I want to write an application, that launches another application. Like this:</p>\n\n<pre><code># This will launch another_app.exe\nmy_app.exe another_app.exe \n# This will launch another_app.exe with arg1, arg and arg3 arguments\nmy_app.exe another_app.exe arg1 arg2 arg3\n</code></pre>\n\n<p>The problem here is that I'm getting <code>char* argv[]</code> in my <code>main</code> function, but I need to merge it to <code>LPTSTR</code> in order to pass it to <code>CreateProcess</code>.</p>\n\n<p>There is a <code>GetCommandLine</code> function, but I cannot use it because I'm porting code from Linux and tied to <code>argc/argv</code> (otherwise, it's a very ugly hack for me).</p>\n\n<p>I cannot easily merge arguments by hand, because <code>argv[i]</code> might contain spaces.</p>\n\n<p>Basically, I want the reverse of <code>CommandLineToArgvW</code>. Is there a <em>standard</em> way to do this?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1438806667, "post_id": 31838467, "comment_id": 51605957, "body": "Correct syntax wouldn&#39;t hurt!"}], "answers": [{"comments": [{"owner": {"reputation": 615, "user_id": 5051002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X3MMg.jpg?s=128&g=1", "display_name": "Jean Pierre Dudey", "link": "https://stackoverflow.com/users/5051002/jean-pierre-dudey"}, "edited": false, "score": 0, "creation_date": 1438807584, "post_id": 31838600, "comment_id": 51606530, "body": "I think that is doesn&#39;t work if Demo hasn&#39;t a copy constructor, correct me if i&#39;m wrong."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 615, "user_id": 5051002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X3MMg.jpg?s=128&g=1", "display_name": "Jean Pierre Dudey", "link": "https://stackoverflow.com/users/5051002/jean-pierre-dudey"}, "edited": false, "score": 1, "creation_date": 1438808585, "post_id": 31838600, "comment_id": 51607065, "body": "@JeanPierreDudey: It works as long as <code>Demo</code> has a move constructor. Otherwise, say <code>return {};</code> to direct-initialize the return value."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 5, "last_activity_date": 1438793950, "creation_date": 1438793950, "answer_id": 31838600, "question_id": 31838467, "link": "https://stackoverflow.com/questions/31838467/c-rvalue-and-move/31838600#31838600", "title": "C++ Rvalue and move", "body": "<p>It is undefined behaviour to return a reference to a local variable, so no, this code is not OK.</p>\n\n<p>A correct way to return an object is to return a prvalue:</p>\n\n<pre><code>Demo fu(n) {\n  Demo d;\n  return d;   // \"move(d)\" is implied\n}\n\nDemo &amp;&amp; d = fun();  // OK, reference binds to temporary and extends its lifetime\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 3501669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af54e3de72dd49cf087173434c09d8d?s=128&d=identicon&r=PG&f=1", "display_name": "edflanders", "link": "https://stackoverflow.com/users/3501669/edflanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1438806358, "creation_date": 1438806358, "answer_id": 31842184, "question_id": 31838467, "link": "https://stackoverflow.com/questions/31838467/c-rvalue-and-move/31842184#31842184", "title": "C++ Rvalue and move", "body": "<p>Usually, returning the object by value gives you the simplest code and optimal performance:</p>\n\n<pre><code>Demo fun() {\n    Demo d;\n    return d;\n}\nint main() {\n    Demo d = fun();\n}\n</code></pre>\n\n<p>If Demo were an expensive-to-copy, cheap-to-move type such as <code>std::vector</code>, move semantics would kick in automatically to avoid the copy---no <code>&amp;&amp;</code> required.</p>\n"}], "owner": {"reputation": 305, "user_id": 5178497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f59c809fdba5fd4a031bb8102a7a7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jagan Arikuti", "link": "https://stackoverflow.com/users/5178497/jagan-arikuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438806358, "creation_date": 1438793527, "last_edit_date": 1438794041, "question_id": 31838467, "link": "https://stackoverflow.com/questions/31838467/c-rvalue-and-move", "title": "C++ Rvalue and move", "body": "<p>Please help to understand on below</p>\n\n<pre><code>class Demo {};\n    Demo &amp;&amp; fun() {\n        Demo d;\n        cout &lt;&lt; \"Addres of d in fun \" &lt;&lt; &amp;d &lt;&lt; endl;\n        return move(d);\n    }\nint main()\n{\n    Demo &amp;&amp; d = fun() \n}\n</code></pre>\n\n<p>Is this the correct way to return object ?? </p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 6, "creation_date": 1438792957, "post_id": 31838243, "comment_id": 51598089, "body": "<a href=\"https://stackoverflow.com/questions/553682/when-can-i-use-a-forward-declaration\">When can I use a forward declaration?</a>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438793343, "post_id": 31838243, "comment_id": 51598338, "body": "<code>vector&lt;class Drawing*&gt; drawings;</code> will fix it. The compiler only needs to know that <code>Drawing</code> is a class when you first use it."}], "owner": {"reputation": 89, "user_id": 4941786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e4064b7998c7324d7273f4ba4c9cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "green_meep", "link": "https://stackoverflow.com/users/4941786/green-meep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1438793334, "answer_count": 0, "score": 0, "last_activity_date": 1438810233, "creation_date": 1438792804, "last_edit_date": 1438810233, "question_id": 31838243, "link": "https://stackoverflow.com/questions/31838243/need-help-in-avoiding-a-circular-dependency", "closed_reason": "Duplicate", "title": "Need help in avoiding a circular dependency", "body": "<p>I'm making a game. I have a Level class, which has a collection of Drawing objects and keeps track of where the player is in the level.</p>\n\n<p>The main character (who takes the form of a Drawing object) needs to be able to to stop level movement when the main character collides with another object.</p>\n\n<pre><code>class Level {\n    ...\n    Position offset;\n    vector&lt;Drawing*&gt; drawings;\n    ...\n}\n\nclass MainCharacter : public Drawing {\n    ...\n    void onCollide(Drawing* other, Level&amp; level) {\n        level.stopMovement(); // prevent level from moving any further in that direction\n    }\n}\n</code></pre>\n\n<p>As you can see, my intended implementation causes a circular dependency: Level has a collection of Drawings, which require a reference to the Level in order to stop it.</p>\n\n<p>Is there a design pattern that can help me with this? I've looked into the Observer and Model View Controller patterns already, but I'm not sure how much good those can do here.</p>\n\n<p>I'm currently just passing the position by reference to the onCollide function.</p>\n\n<p>EDIT: I realized that I have an object factory which is compounding the circular dependency because it includes the Drawing .h so that it can create Drawing objects.</p>\n\n<p>So, Level includes both Factory and Drawing, Factory includes Drawing. Drawing would like to forward declare Level, but it needs access to its members, so it can't forward declare.</p>\n"}, {"tags": ["c++", "lapack"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1438792809, "post_id": 31838218, "comment_id": 51597992, "body": "If you have &quot;why is .... slow&quot; questions, just profile your code, the profiler will point you right to the slow spots"}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1438792961, "post_id": 31838218, "comment_id": 51598094, "body": "@CoryKramer Could you add something more? I don&#39;t Even know what a profiler is. Is it something like valgrind?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1438793107, "post_id": 31838218, "comment_id": 51598184, "body": "Similar to valgrind, but valgrind looks for memory leaks (among other things). A performance profiler looks at CPU usage and how long different operations take, for example see some screenshots for the <a href=\"http://www.codersnotes.com/sleepy/\" rel=\"nofollow noreferrer\">Very Sleepy</a> program"}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1438793201, "post_id": 31838218, "comment_id": 51598234, "body": "@CoryKramer Thank you! I will check immediately. But I was hoping a LAPACK user may point me to something obvious. There are some here :)"}, {"owner": {"reputation": 13144, "user_id": 341291, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/341291/axel"}, "edited": false, "score": 0, "creation_date": 1438793336, "post_id": 31838218, "comment_id": 51598329, "body": "Have you commented out the omp pragmas? That code runs on a single processor while I&#39;d expected the omp version to use all available cores."}, {"owner": {"reputation": 1974, "user_id": 581903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88553655e36a2f15070d3e2a61f56390?s=128&d=identicon&r=PG", "display_name": "TAS", "link": "https://stackoverflow.com/users/581903/tas"}, "edited": false, "score": 3, "creation_date": 1438793591, "post_id": 31838218, "comment_id": 51598505, "body": "Are you compiling the code with or without optimizations? What about debug information?"}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 13144, "user_id": 341291, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/341291/axel"}, "edited": false, "score": 0, "creation_date": 1438794561, "post_id": 31838218, "comment_id": 51599079, "body": "@Axel Thank you! I removed those parallelisations, as they don&#39;t have anything to do with the real problem: the lapack performance. They were just for speeding up the creation of the matrix tested. I am curious to know wether my references use any parallelisation I overlooked. But I guess something special is needed to use parallel lapack. not just an omp pragma..."}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 1974, "user_id": 581903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88553655e36a2f15070d3e2a61f56390?s=128&d=identicon&r=PG", "display_name": "TAS", "link": "https://stackoverflow.com/users/581903/tas"}, "edited": false, "score": 0, "creation_date": 1438794641, "post_id": 31838218, "comment_id": 51599121, "body": "@TAS Sorry, I am not very skilled. What optimisations do you have in mind?"}, {"owner": {"reputation": 144, "user_id": 4901291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b47fbbefe03550bb8e6209c8d06cdf5?s=128&d=identicon&r=PG", "display_name": "anonymous coward", "link": "https://stackoverflow.com/users/4901291/anonymous-coward"}, "edited": false, "score": 1, "creation_date": 1438799105, "post_id": 31838218, "comment_id": 51601650, "body": "Do you get the expected performance out of LAPACK&#39;s test programs? Also bear in mind that LAPACK is written in fortran so any calls from C/C++ will need to have their inputs transposed, which will cause a performance hit."}, {"owner": {"reputation": 1974, "user_id": 581903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88553655e36a2f15070d3e2a61f56390?s=128&d=identicon&r=PG", "display_name": "TAS", "link": "https://stackoverflow.com/users/581903/tas"}, "edited": false, "score": 1, "creation_date": 1438801638, "post_id": 31838218, "comment_id": 51603194, "body": "@Ludi it depends on your compiler, for <code>g++</code> you can try using <code>-O2</code> or <code>-O3</code>."}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 144, "user_id": 4901291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b47fbbefe03550bb8e6209c8d06cdf5?s=128&d=identicon&r=PG", "display_name": "anonymous coward", "link": "https://stackoverflow.com/users/4901291/anonymous-coward"}, "edited": false, "score": 0, "creation_date": 1438869393, "post_id": 31838218, "comment_id": 51634876, "body": "@anonymouscoward Many thanks. The programme posted is basically my attempt to use the official example here: <a href=\"https://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/dsyev_ex.c.htm\" rel=\"nofollow noreferrer\">software.intel.com/sites/products/documentation/doclib/mkl_s&zwnj;&#8203;a/&hellip;</a> with a meaningfully large matrix. And to do this many times, just to be sure I am not studying peculiar matrices."}, {"owner": {"reputation": 144, "user_id": 4901291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b47fbbefe03550bb8e6209c8d06cdf5?s=128&d=identicon&r=PG", "display_name": "anonymous coward", "link": "https://stackoverflow.com/users/4901291/anonymous-coward"}, "edited": false, "score": 0, "creation_date": 1438870783, "post_id": 31838218, "comment_id": 51635872, "body": "Hm. We&#39;re kind of comparing apples and oranges here, you&#39;ve just got different overhead. Run <code>lapack_testing.py</code>, it should come in your LAPACK distribution and it&#39;s fairly comprehensive. Also look <a href=\"http://www.netlib.org/lapack/lawn41/node27.html\" rel=\"nofollow noreferrer\">here</a>. I&#39;m having a hard time finding times for you to compare to but if you can get your hands on another rig (hell, you could spend 10 cents and rent an EC2 instance) you should be able to see if something is egregiously wrong with your setup vs your program&#39;s overhead."}, {"owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "reply_to_user": {"reputation": 144, "user_id": 4901291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b47fbbefe03550bb8e6209c8d06cdf5?s=128&d=identicon&r=PG", "display_name": "anonymous coward", "link": "https://stackoverflow.com/users/4901291/anonymous-coward"}, "edited": false, "score": 0, "creation_date": 1438872212, "post_id": 31838218, "comment_id": 51637063, "body": "@anonymouscoward Sorry, I am very newbie. What do you mean by overhead? I think I am only measuring the time spent in the part of the programme that diagonalises. Right? All the creation of the matrix etc is not measured. So I hoped to get the same times as the publication."}], "owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1438870262, "creation_date": 1438792721, "last_edit_date": 1495539843, "question_id": 31838218, "link": "https://stackoverflow.com/questions/31838218/is-lapack-slow-on-my-system-and-if-so-why", "title": "Is LAPACK slow on my system? And if so why?", "body": "<p>I am a newbie and I apologize, should I write something stupid.</p>\n\n<p>I use LAPACK on a 2.7GHz CPU. </p>\n\n<p>My expectations on the running times are based on Figure 4.1 in the publication\n<a href=\"http://www.netlib.org/lapack/lawnspdf/lawn183.pdf\" rel=\"nofollow noreferrer\">Performance and Accuracy of The Lapack...</a>, as well as on Fanfan's answer to this <a href=\"https://stackoverflow.com/questions/713878/how-expensive-is-it-to-compute-the-eigenvalues-of-a-matrix\">Stackoverflow Post</a>. </p>\n\n<p>Both computers mentioned (and especially the 2.2 GHz Opteron) should be quite a bit slower than my CPU. Yet, the Opteron seems to need less than a second for a typical random 1000X1000 symmetric matrix. My CPU needs about 2.2 seconds on average, with very small variations.</p>\n\n<p><strong>Have I overlooked some feature my implementation should have, in order to reach the Opteron?</strong></p>\n\n<p>The way I compile is:  </p>\n\n<blockquote>\n  <p>g++ -Ddsyev=dsyev_ -o combo.x combo.cc -L/usr/local/lib -lgsl -llapack -lblas &amp;&amp; ./combo.x</p>\n</blockquote>\n\n<p>I have tried the options -O2 and -O3, which did not change anything.</p>\n\n<p>The C++ code I use to measure the times is the one below. It is my attempt to use the <a href=\"https://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/dsyev_ex.c.htm\" rel=\"nofollow noreferrer\">official example here</a> with a meaningfully large matrix. And to do this many times, just to be sure I am not getting any peculiar random matrices by chance.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;gsl/gsl_randist.h&gt;\n#include &lt;gsl/gsl_matrix.h&gt;\n/* Parameters */\n#define N 1000\n#define REPS 100\n#define LDA N\n#define TOWERSIZE N\n\nstruct TOWER \n{\n    gsl_matrix *matrix_random_covariance;\n\n};\n\n\nint COMPUTE_RANDOM_COVARIANCE(struct TOWER *tower);\nint WRITE_RANDOM_COVARIANCE(struct TOWER *tower);\n\nint read_covariance (std::vector&lt;double&gt; &amp; data)\n  {\n    double tmp;\n\n    std::ifstream fin(\"random_covariance.data\");\n\n    while(fin &gt;&gt; tmp)\n    {\n        data.push_back(tmp);\n    }\n\n    return 0;\n}\n\n/* DSYEV prototype */\nextern \"C\"{\nvoid dsyev( char* jobz, char* uplo, int* n, double* a, int* lda,\n                double* w, double* work, int* lwork, int* info );\n}\n/* Auxiliary routines prototypes */\nextern \"C\"{ \nvoid print_matrix( char* desc, int m, int n, double* a, int lda );\n}\n\n/* Main program */\nint main() {\n        std::vector&lt;double&gt; time_series;\n    double time_series_sum =0.0;\n    double time_series_average =0.0;\n\n        struct TOWER *tower;\n        tower = (struct TOWER *)calloc(1,sizeof(struct TOWER));\n            double* work;\n    for (uint repj = 0; repj &lt; REPS; repj++)\n        {\n        COMPUTE_RANDOM_COVARIANCE(tower);\n        WRITE_RANDOM_COVARIANCE(tower);\n        printf( \"-----------------------------------------------&gt; Entry main.\\n\" );\n        /* Locals */\n        std::vector&lt;double&gt; data;\n        int n = N, lda = LDA, info, lwork;\n        double wkopt;\n        /* Local arrays */\n    double w[N];\n    static double a[LDA*N];\n        printf( \"-----------------------------------------------&gt; Point 0.\\n\" );\n    read_covariance(data);\n        printf( \"-----------------------------------------------&gt; Point 1.\\n\" );\n        std::copy(data.begin(), data.end(), a);\n        printf( \"-----------------------------------------------&gt; Point 2.\\n\" );\n\n    struct timeval tval_before, tval_after, tval_result;\\\n    gettimeofday(&amp;tval_before, NULL);\n\n    /* Executable statements */\n        printf( \" DSYEV Example Program Results\\n\" );\n        /* Query and allocate the optimal workspace */\n        lwork = -1;\n        dsyev( \"Vectors\", \"Upper\", &amp;n, a, &amp;lda, w, &amp;wkopt, &amp;lwork, &amp;info );\n        printf( \"-----------------------------------------------&gt; Point 4.\\n\" );\n        lwork = (int)wkopt;\n        work = (double*)malloc( lwork*sizeof(double) );\n        /* Solve eigenproblem */\n        dsyev( \"Vectors\", \"Upper\", &amp;n, a, &amp;lda, w, work, &amp;lwork, &amp;info );\n        /* Check for convergence */\n        if( info &gt; 0 ) {\n                printf( \"The algorithm failed to compute eigenvalues.\\n\" );\n                exit( 1 );\n        }\n            gettimeofday(&amp;tval_after, NULL);\n            timersub(&amp;tval_after, &amp;tval_before, &amp;tval_result);\n            printf(\"Time one diag / secs: %ld.%06ld\\n\", (long int)tval_result.tv_sec, (long int)tval_result.tv_usec);\n                time_series.push_back(tval_result.tv_sec);\n        time_series_sum = time_series_sum + tval_result.tv_sec + 0.000001*tval_result.tv_usec;\n        }\n\n        time_series_average = time_series_sum/REPS;\n        printf(\"Time Series Average = %e\\n\", time_series_average);\n        printf(\"Time Series Length = %u\\n\", REPS);\n        /* Print eigenvalues */\n        //print_matrix( \"Eigenvalues\", 1, n, w, 1 ); //nocheat!!\n        /* Print eigenvectors */\n        //print_matrix( \"Eigenvectors (stored columnwise)\", n, n, a, lda ); //nocheat!!\n        /* Free workspace */\n        free( (void*)work );\n    free(tower);\n        exit( 0 );\n} /* End of DSYEV Example */\n\n/* Auxiliary routine: printing a matrix */\nvoid print_matrix( char* desc, int m, int n, double* a, int lda ) {\n        int i, j;\n        printf( \"\\n %.2f\\n\", desc );\n        for( i = 0; i &lt; m; i++ ) {\n                for( j = 0; j &lt; n; j++ ) printf( \" %.2f\", a[i+j*lda] );\n                printf( \"\\n\" );\n        }\n}\n/* ---  --- */\nint COMPUTE_RANDOM_COVARIANCE(struct TOWER *tower) //relying on spline !!\n{\n    int a,b;\n    double aux, correl;\n    const gsl_rng_type * T;\n    gsl_rng * r;\n\n    T = gsl_rng_default;\n    r = gsl_rng_alloc (T);\n\n    struct timeval tv;\n\n\n    srand((time(0)));                // srand &amp; time are built-in\n    unsigned long int s = random();  // gsl_rng_uniform will eventually\n                                     // want a non-negative \"long\" integer\n    gsl_rng_env_setup();\n    gsl_rng_set(r,s); // seed the random number generator;\n\n\n\n    printf(\"extreme_kappa: building random covariance matrix....\\n\");\n//#pragma omp parallel\n//{     \n    tower-&gt;matrix_random_covariance = gsl_matrix_calloc(TOWERSIZE,TOWERSIZE);\n\n    for(a=0;a&lt;TOWERSIZE;a++)  \n    {           \n\n//#pragma omp for       \n        for(b=a;b&lt;TOWERSIZE;b++)\n        {\n\n\n\n            correl = gsl_ran_flat(r,0.0,1.0);\n            gsl_matrix_set(tower-&gt;matrix_random_covariance,a,b,correl);\n            gsl_matrix_set(tower-&gt;matrix_random_covariance,b,a,correl);\n        }\n    }\n//} //PARALLEL LOOP!!\n    gsl_rng_free(r);\n    return(0);\n}\n/* ---  --- */\n/* --- --- */\nint WRITE_RANDOM_COVARIANCE(struct TOWER *tower)\n{\n    int a,b;\n    FILE *file;\n    char fname[256];\n    double aux;\n\n    printf(\"extreme_kappa: writing random covariances....\\n\");\n\n    sprintf(fname,\"./random_covariance.data\");\n    file = fopen(fname,\"w+\");\n    if(file == NULL)\n    {\n        printf(\"extreme_kappa: error opening file %s\\n\",fname);\n        exit(2);\n    }\n\n    for(a=0;a&lt;TOWERSIZE;a++)\n    {\n        for(b=0;b&lt;TOWERSIZE;b++)\n        {\n            aux = gsl_matrix_get(tower-&gt;matrix_random_covariance,a,b);\n            fprintf(file,\"%e \",aux);\n        }\n        fprintf(file,\"\\n\");\n    }\n\n    fclose(file);\n    return(0);\n}\n/* --- --- */\n</code></pre>\n\n<p>I shall be grateful for any hints!</p>\n"}, {"tags": ["c++", "iterator", "set"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1438793294, "post_id": 31838197, "comment_id": 51598300, "body": "What exactly are you trying to do.  Your question is unclear."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1438798616, "post_id": 31838197, "comment_id": 51601349, "body": "An aside: insert returns a pair containing first= iterator to element inserted and second= bool true if the element was inserted and false if already present. So <code>if (test.insert(cpstot).second){cout &lt;&lt; &quot;i: &quot; &lt;&lt; i &lt;&lt; endl;}</code> will replace the <code>test.find</code> and <code>it != test.end()</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1438798872, "post_id": 31838197, "comment_id": 51601500, "body": "Question: do you want the line number of the original or the line number of the found duplicate?"}, {"owner": {"reputation": 81, "user_id": 3593353, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000499295099/picture?type=large", "display_name": "Michael Thumm", "link": "https://stackoverflow.com/users/3593353/michael-thumm"}, "edited": false, "score": 0, "creation_date": 1438812436, "post_id": 31838197, "comment_id": 51608749, "body": "I want the line number of the original, already existing element in the set (here it would be line 0, since line 0 is &quot;1 2 3&quot;, line 1 is &quot;4 5 6&quot; and then line 3 again &quot;1 2 3&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1438826448, "creation_date": 1438826448, "answer_id": 31845633, "question_id": 31838197, "link": "https://stackoverflow.com/questions/31838197/c-usage-of-set-iterator-find-line-where-duplicate-was-found/31845633#31845633", "title": "C++ Usage of set, iterator, find line where duplicate was found", "body": "<p>\"Line number\" is not very meaningful to a <code>std::set&lt;string&gt;</code>,\nbecause as you add more strings to the set you may change the \norder in which the existing strings are iterated through\n(which is about as much of a \"line number\" as the <code>set::set</code> template\nitself will give you).</p>\n\n<p>Here's an alternative that may work better:\n<code>std::map&lt;std::string, int&gt; test</code>.\nThe way you use this is you keep a \"line counter\" <code>n</code> somewhere.\nEach time you need to put a new string <code>cpstot</code> in your set,\nyou have code like this:</p>\n\n<pre><code>  std::map&lt;std::string&gt;::iterator it = test.find(cpstot);\n  if (it == test.end())\n  {\n    test[cpstot] = n;\n    // alternatively, test.insert(std::pair&lt;std::string, int&gt;(cpstot, n))\n    ++n;\n  }\n  else\n  {\n    // this prints out the integer that was associated with cpstot in the map\n    std::cout &lt;&lt; \"i: \" &lt;&lt; it-&gt;second;\n\n    // Notice that we don't try to insert cpstot into the map in this case.\n    // It's already there, and we don't want to change its \"line number\",\n    // so there is nothing good we can accomplish by an insertion.\n    // It's a waste of effort to even try.\n  }\n</code></pre>\n\n<p>If you set <code>n = 0</code> before you started putting any strings in <code>test</code> then\n(and don't mess with the value of <code>n</code> in any other way)\nthen you will end up with strings at \"line numbers\" 0, 1, 2, etc.\nin <code>test</code> and <code>n</code> will be the number of strings stored in <code>test</code>.</p>\n\n<p>By the way, neither <code>std::map&lt;std::string, int&gt;::iterator</code> nor \n<code>std::set&lt;std::string&gt;::iterator</code> is guaranteed to iterate through\nthe strings in the sequence in which they were first inserted.\nInstead, what you'll get is the strings in whatever order the\ntemplate's comparison object puts the string values.\n(I think by default you get them back in lexicographic order,\nthat is, \"alphabetized\".)\nBut when you store the original \"line number\" of each string in\n<code>std::map&lt;std::string, int&gt; test</code>, when you are ready to\nprint out the list of strings you can copy the string-integer pairs\nfrom <code>test</code> to a new object, <code>std::map&lt;int, std::string&gt; output_sequence</code>,\nand now (assuming you do not override the default comparison object)\nwhen you iterate through <code>output_sequence</code> you will get its\ncontents sorted by line number.\n(You will then probably want to get the string \nfrom the <code>second</code> field of the iterator.)</p>\n"}], "owner": {"reputation": 81, "user_id": 3593353, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000499295099/picture?type=large", "display_name": "Michael Thumm", "link": "https://stackoverflow.com/users/3593353/michael-thumm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 31845633, "answer_count": 1, "score": -1, "last_activity_date": 1438826448, "creation_date": 1438792664, "last_edit_date": 1438812517, "question_id": 31838197, "link": "https://stackoverflow.com/questions/31838197/c-usage-of-set-iterator-find-line-where-duplicate-was-found", "title": "C++ Usage of set, iterator, find line where duplicate was found", "body": "<p>The program adds different strings to a set. The iterator checks the set for a certain string, what i want to achieve is to get the line where the iterator finds this certain string. Is it possible to get this with a set or do i have to create a vector? The reason i use sets is because i also want not to have duplicates in the end. It is a bit confusing i know, i hope you'll understand.</p>\n\n<p>Edit: i want to get the line number of the original element already existing in the set, if a duplicate is found</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;atlstr.h&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;  \n\nint _tmain(int argc, _TCHAR* argv[])\n{\nset&lt;string&gt; test;\nset&lt;string&gt;::iterator it;\nvector&lt;int&gt; crossproduct(9, 0);\n\nfor (int i = 0; i &lt; 6; i++)\n{\n    crossproduct[i] = i+1;\n}\n\ncrossproduct[6] = 1;\ncrossproduct[7] = 2;\ncrossproduct[8] = 3;\n\n\nfor (int i = 0; i &lt; 3; i++)\n{\n    ostringstream cp; cp.precision(1); cp &lt;&lt; fixed;\n    ostringstream cp1; cp1.precision(1); cp1 &lt;&lt; fixed;\n    ostringstream cp2; cp2.precision(1); cp2 &lt;&lt; fixed;\n\n    cp &lt;&lt; crossproduct[i*3];\n    cp1 &lt;&lt; crossproduct[i*3+1];\n    cp2 &lt;&lt; crossproduct[i*3+2];\n\n    string cps(cp.str());\n    string cps1(cp1.str());\n    string cps2(cp2.str());\n\n    string cpstot = cps + \" \" + cps1 + \" \" + cps2;\n\n    cout &lt;&lt; \"cpstot: \" &lt;&lt; cpstot &lt;&lt; endl;\n\n    it = test.find(cpstot);     \n\n    if (it != test.end())\n        {\n            //Display here the line where \"1 2 3\" was found\n            cout &lt;&lt; \"i: \" &lt;&lt; i &lt;&lt; endl;\n        }\n\n\n    test.insert(cpstot);\n}\n\nset&lt;string&gt;::iterator it2;\n\nfor (it2 = test.begin(); it2 != test.end(); ++it2)\n{\n    cout &lt;&lt; *it2 &lt;&lt; endl;\n}\n\ncin.get();\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3002649, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4ae7eebd2aafd7c51995bbb4cb59fb98?s=128&d=identicon&r=PG&f=1", "display_name": "user3002649", "link": "https://stackoverflow.com/users/3002649/user3002649"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803269, "creation_date": 1438803269, "answer_id": 31841330, "question_id": 31837744, "link": "https://stackoverflow.com/questions/31837744/how-to-change-draw-order-of-mfc-graph-elements/31841330#31841330", "title": "How to change draw order of MFC graph elements", "body": "<p>Found the answer. Changing SRCPAINT to SRCAND works. </p>\n\n<p>It seems SRCPAINT works when trying to overlay a <strong>light</strong> color on top of a <strong>dark</strong> color and SRCAND works when trying to overlay a <strong>dark</strong> color on top of a <strong>light</strong> color.</p>\n"}], "owner": {"reputation": 1, "user_id": 3002649, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4ae7eebd2aafd7c51995bbb4cb59fb98?s=128&d=identicon&r=PG&f=1", "display_name": "user3002649", "link": "https://stackoverflow.com/users/3002649/user3002649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438803269, "creation_date": 1438791305, "question_id": 31837744, "link": "https://stackoverflow.com/questions/31837744/how-to-change-draw-order-of-mfc-graph-elements", "title": "How to change draw order of MFC graph elements", "body": "<p>I am trying to modify the look of the graph displayed to have a white background with black axes.\nHowever, simply modifying the RGB values of   </p>\n\n<pre><code>  m_OScopeCtrl.SetBackgroundColor(RGB(0, 64, 0)) ;\n  m_OScopeCtrl.SetGridColor(RGB(192, 255, 192)) ;\n  m_OScopeCtrl.SetPlotColor(RGB(255, 255, 255)) ; \n</code></pre>\n\n<p>in \u201cTestOScopeDlg.cpp\u201d doesn\u2019t seem to do the trick, the entire graph just turns white and the plots disappear (presumably being hidden by the white background).</p>\n\n<p>Link to source code on codeproject.</p>\n\n<p><a href=\"http://www.codeproject.com/Articles/241/Oscilloscope-StripChart-Control\" rel=\"nofollow\">http://www.codeproject.com/Articles/241/Oscilloscope-StripChart-Control</a></p>\n\n<p>How can I make the graph appear with a white background and black axes?</p>\n"}, {"tags": ["c++", "c", "signed", "unsigned-integer", "size-t"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1438791169, "post_id": 31837603, "comment_id": 51596947, "body": "POSIX has <code>ssize_t</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438791850, "post_id": 31837603, "comment_id": 51597362, "body": "Note: C does <i>not</i> define &quot;size_t is always typedef-ed to the largest unsigned integer type in the system&quot;.  <code>uintmax_t</code> is a better candidate &quot;an unsigned integer type capable of representing any value of any unsigned integer type&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438792177, "post_id": 31837603, "comment_id": 51597563, "body": "<code>std::make_signed_t&lt;std::size_t&gt;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438792469, "post_id": 31837603, "comment_id": 51597759, "body": "Scott Meyer article, concerning array sizes, conveniently incorrectly fails valid huge array sizes.  Although this is certainly less  a common issue than incorrect negative sizes, it simply trades one error detection for another.  If the parameter is whole numbers in [INTMAX_MIN...INTMAX_MAX], use <code>intmax_t</code>, else if in range [0...UINTMAX_MAX], use <code>uintmax_t</code>, if FP, use <code>long double</code>, if boolean, use <code>bool</code>, etc."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1438841342, "post_id": 31837603, "comment_id": 51616756, "body": "the signed counterpart of <code>size_t</code> is probably <a href=\"http://en.cppreference.com/w/cpp/types/ptrdiff_t\" rel=\"nofollow noreferrer\"><code>ptrdiff_t</code></a>, but it&#39;s still not the largest integer type"}], "answers": [{"comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1438791506, "post_id": 31837693, "comment_id": 51597150, "body": "std::numeric_limits&lt;ssize_t&gt;::max(), std::numeric_limits&lt;ssize_t&gt;::is_signed, etc"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1616233766, "post_id": 31837693, "comment_id": 117941733, "body": "<code>size_t</code> is not even the largest integer type. It may have only 16 bits in 16-bit systems or 32 bits in 32-bit systems"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 5, "last_activity_date": 1438791155, "creation_date": 1438791155, "answer_id": 31837693, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31837693#31837693", "title": "Get the largest signed integer type in C++", "body": "<p>The signed equivalent of <code>size_t</code> is simply <code>ssize_t</code> but this type is not defined in C99 standard even if it is known to many compilers.</p>\n\n<p>For the C99 standard  the largest signed integer type is defined as <code>intmax_t</code>.</p>\n\n<p>Reference : 7. Library / 7.18 Integer types  / 7.18.1.5 Greatest-width integer types</p>\n"}, {"tags": [], "owner": {"reputation": 1974, "user_id": 581903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88553655e36a2f15070d3e2a61f56390?s=128&d=identicon&r=PG", "display_name": "TAS", "link": "https://stackoverflow.com/users/581903/tas"}, "is_accepted": false, "score": 4, "last_activity_date": 1438792258, "creation_date": 1438792258, "answer_id": 31838083, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31838083#31838083", "title": "Get the largest signed integer type in C++", "body": "<p>The standard type to use is <code>std::intmax_t</code> which is defined in <code>&lt;cstdint&gt;</code>. To get the maximum value you can use <code>std::numeric_limits&lt;intmax_t&gt;::max()</code>.</p>\n\n<p>Sample code:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"max size = \" &lt;&lt; std::numeric_limits&lt;intmax_t&gt;::max() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 2, "last_activity_date": 1616233688, "last_edit_date": 1616233688, "creation_date": 1438794093, "answer_id": 31838646, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31838646#31838646", "title": "Get the largest signed integer type in C++", "body": "<p>The largest signed integer type in recent C and C++ standards is <code>long long</code>. Until there is a type wider than <code>long long</code> you can always use it. If you want to be more future proof, use <code>intmax_t</code>.</p>\n<hr />\n<blockquote>\n<p><code>size_t</code> is always typedef-ed to the largest unsigned integer type in the system</p>\n</blockquote>\n<h1>That's completely incorrect!!! \u274c</h1>\n<p><code>size_t</code> in 32-bit systems is typically also a 32-bit type, which obviously <strong>not</strong> the widest type possible. It's only guaranteed to be big enough to represent the size of the biggest object on the system. <code>long long</code> is obviously much wider in that cases. In many 16-bit systems it has only 16 bits, not even the same range as `long.</p>\n<hr />\n<p>In case <code>size_t</code> is needed, <code>ptrdiff_t</code> can be used as a signed counterpart. But it's not the biggest type either.</p>\n<blockquote>\n<p>For <code>char</code> arrays shorter than <code>PTRDIFF_MAX</code>, <code>std::ptrdiff_t</code> acts as the signed counterpart of <code>std::size_t</code>: it can store the size of the array of any type and is, on most platforms, synonymous with <code>std::intptr_t</code></p>\n<p><a href=\"http://en.cppreference.com/w/cpp/types/ptrdiff_t\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/types/ptrdiff_t</a></p>\n</blockquote>\n<p>In C++20 <a href=\"https://en.cppreference.com/w/cpp/iterator/size\" rel=\"nofollow noreferrer\"><code>std::ssize</code></a> was introduced and guess what, <strong>it also uses <code>ptrdiff_t</code> as the signed counterpart of <code>size_t</code></strong></p>\n"}, {"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530687555, "post_id": 31856601, "comment_id": 89318201, "body": "<code>ssize_t</code> is not the largest signed integer type in 32-bit Linux or 64-bit x32 ABI Linux either"}], "tags": [], "owner": {"reputation": 315, "user_id": 3941935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c538ac627f3e153ee89f59122a644728?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Sodzawiczny", "link": "https://stackoverflow.com/users/3941935/tomasz-sodzawiczny"}, "is_accepted": true, "score": 1, "last_activity_date": 1438866264, "creation_date": 1438866264, "answer_id": 31856601, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31856601#31856601", "title": "Get the largest signed integer type in C++", "body": "<blockquote>\n  <p>But how can I get the largest signed integer type in the system? </p>\n</blockquote>\n\n<p>In C++11's <code>&lt;cstdint&gt;</code> you can find type <code>intmax_t</code>, which is defined after the C standard (7.20.1.5):</p>\n\n<blockquote>\n  <p>The following type designates a signed integer type capable of\n  representing any value of any signed integer type</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Is there any typedef similar to size_t which is signed? </p>\n</blockquote>\n\n<p>No, not in the C++ standard. POSIX defines <code>ssize_t</code>, <strong>but</strong>:</p>\n\n<ul>\n<li>it is not meant to replace <code>size_t</code> (which itself is also more restricted by POSIX)</li>\n<li>is not meant to store/pass negative values, but to indicate error:\n\n<blockquote>\n  <p><code>ssize_t</code> shall be capable of storing values at least in the range [-1, {SSIZE_MAX}].</p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>So, I should pass in signed integer type to the API. (...) Or should I\n  just use size_t instead?</p>\n</blockquote>\n\n<p>If your interface is meant to deal with C++ arrays, <code>size_t</code> is the only type that is assured by the standard to be able to hold any of the possible array indexes. Using any other type you might (in theory) loose ability to address all of the array (which is even noted in the article you linked).</p>\n\n<p>Using <code>size_t</code> for indexing purposes is therefore common and customary - and used by many libraries (including STL).</p>\n"}], "owner": {"reputation": 2858, "user_id": 439888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da051abac41879aed4060d544d37fd6f?s=128&d=identicon&r=PG", "display_name": "SkypeMeSM", "link": "https://stackoverflow.com/users/439888/skypemesm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 0, "accepted_answer_id": 31856601, "answer_count": 4, "score": 1, "last_activity_date": 1616233688, "creation_date": 1438790949, "last_edit_date": 1561947168, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c", "title": "Get the largest signed integer type in C++", "body": "<p>Let's say I have to accept a size as an argument to an interface which deals with arrays. For e.x.</p>\n\n<pre><code>void doSomethingRelatedToArrays(const size_t length)\n</code></pre>\n\n<p>Here, I used <code>size_t</code> with the following in mind:</p>\n\n<ul>\n<li>length must always be positive</li>\n<li><code>size_t</code> is always typedef-ed to the largest unsigned integer type in the system. <code>std::size_t</code> can store the maximum size of a theoretically possible object of any type.</li>\n</ul>\n\n<p>However, I should not use unsigned types in my interfaces because the client can pass in a negative number, which is implicitly converted to an unsigned number and I do not have any way of validating it in my method. Refer to Scott Meyer's article on this subject <a href=\"http://www.aristeia.com/Papers/C++ReportColumns/sep95.pdf\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So, I should pass in signed integer type to the API. But how can I get the largest signed integer type in the system? Is there any typedef similar to <code>size_t</code> which is signed? Or should I just use <code>size_t</code> instead?</p>\n"}, {"tags": ["c++", "wavefront"], "comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1438795801, "post_id": 31837529, "comment_id": 51599738, "body": "Get Boost::Spirit and implement the full blown parser maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1438792747, "post_id": 31837782, "comment_id": 51597945, "body": "For the second example, <code>break</code> will take you out of the while loop and straight to <code>file.close()</code> is this intended?"}], "tags": [], "owner": {"reputation": 66, "user_id": 5095281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b774aee32742e833397f0b297e5362?s=128&d=identicon&r=PG&f=1", "display_name": "NeverAgain", "link": "https://stackoverflow.com/users/5095281/neveragain"}, "is_accepted": false, "score": 2, "last_activity_date": 1438801771, "last_edit_date": 1438801771, "creation_date": 1438791416, "answer_id": 31837782, "question_id": 31837529, "link": "https://stackoverflow.com/questions/31837529/how-do-i-ignore-a-character-with-stringstream-in-c/31837782#31837782", "title": "How do I ignore a character with stringstream in C++", "body": "<p>You could try checking for the characters you don't want directly.  In the <code>if</code> statement you could put <code>continue</code> or <code>break</code> or nothing depending on what you want to do. </p>\n\n<pre><code>if (line == \"/\" || line == \"//\") {\n\n    continue; //if you want to move on to the next loop iteration\n\n    break;    //if you want to leave the loop\n\n    //Do nothing if you want to continue in the current loop iteration\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791863, "last_edit_date": 1495542176, "creation_date": 1438791863, "answer_id": 31837951, "question_id": 31837529, "link": "https://stackoverflow.com/questions/31837529/how-do-i-ignore-a-character-with-stringstream-in-c/31837951#31837951", "title": "How do I ignore a character with stringstream in C++", "body": "<p>With your approach you may use a specific locale to determine the delimiters for the <code>&gt;&gt;</code> operator - which is pretty nasty as described <a href=\"https://stackoverflow.com/a/10376445/3426025\">here</a>.</p>\n\n<p>In my parser I try to read the first tripplet (\"V\" or \"V/VT\" or \"V//VN\" or \"V/VT/VN\") parsing character by character, then split the rest of the string expecting the same number of <code>/</code> per vertex - which I found to be quite robust.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2700193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1438801771, "creation_date": 1438790731, "last_edit_date": 1438792216, "question_id": 31837529, "link": "https://stackoverflow.com/questions/31837529/how-do-i-ignore-a-character-with-stringstream-in-c", "title": "How do I ignore a character with stringstream in C++", "body": "<p>So I'm writing a Wavefront OBJ loader. I was able to get the vertex, normals, and texture coordinates, but I'm having problems with the faces. I'm trying to figure how to ignore certain characters, like \"//\" and \"/\" in C++ using std::stringstream. Is there anyway to do this? Thanks.</p>\n\n<p>Here's my load function:</p>\n\n<pre><code>bool Model::load(std::string file_name) {\n   std::string line; \n   std::ifstream file(file_name.c_str());\n   if(file.is_open()) \n   {\n      while(std::getline(file, line))\n      {  \n        std::stringstream stream(line);\n        stream &gt;&gt; line;\n\n        if(line == \"#\") \n        {\n            // ignore.\n        }\n        if(line == \"v\") // vertices\n        { \n            double x, y, z;\n            stream &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n            v.push_back(x);\n            v.push_back(y);\n            v.push_back(z);\n            #ifdef DEBUG\n            std::cout &lt;&lt; \"v \" &lt;&lt; x &lt;&lt; \" \"&lt;&lt; y &lt;&lt; \" \" &lt;&lt; z &lt;&lt; \"\\n\";\n            #endif\n        }\n        if(line == \"vt\") // texture coordinates\n        {\n            double u, v;\n            stream &gt;&gt; u &gt;&gt; v;\n            vt.push_back(u);\n            vt.push_back(v);\n            #ifdef DEBUG\n            std::cout &lt;&lt; \"vt \" &lt;&lt; u &lt;&lt; \" \"&lt;&lt; v &lt;&lt; \"\\n\";\n            #endif\n        }\n        if(line == \"vn\") // normals\n        {\n            double x, y, z;\n            stream &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n            vn.push_back(x);\n            vn.push_back(y);\n            vn.push_back(z);\n            #ifdef DEBUG\n            std::cout &lt;&lt; \"vn \" &lt;&lt; x &lt;&lt; \" \"&lt;&lt; y &lt;&lt; \" \" &lt;&lt; z &lt;&lt; \"\\n\";\n            #endif\n        }\n        if(line == \"f\")\n        {\n           short a, b, c;\n           stream &gt;&gt; a; stream &gt;&gt; b; stream &gt;&gt; c;\n           a--; b--; c--;\n\n           f.push_back(a);\n           f.push_back(b);\n           f.push_back(c);\n\n           std::cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \"\\n\";              \n        }\n\n    }\n    file.close();\n    return true;    \n  } return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "dll", "dllexport"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1438791321, "post_id": 31837477, "comment_id": 51597046, "body": "While redesigning something, try to actually come up with a sensible design. A bunch of public data members, either bare or decorated with getters/setters, isn&#39;t. If you are trying to work around the supposed MSVC inability to export strings, <a href=\"http://stackoverflow.com/questions/13864510/exporting-stl-class-from-dll-why-is-there-no-warning-from-the-return-type\">which isn&#39;t really that bad</a>, call it a workaround, not a redesign, which it isn&#39;t. Anyway, if you believe you should not be exporting string data members, then by the same token you should not be able to export a string getter."}], "answers": [{"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791518, "creation_date": 1438791518, "answer_id": 31837825, "question_id": 31837477, "link": "https://stackoverflow.com/questions/31837477/how-to-redesign-c-classes/31837825#31837825", "title": "How to redesign c++ classes?", "body": "<p>A DLL just provides references to global variables and functions, since you class uses neither, you cannot export anything from your class from the DLL. Typically you would put your class into a header file and share the header file between both your DLL and the harness executable just like you will do with a C++ project having multiple source files.</p>\n"}, {"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438846694, "post_id": 31838525, "comment_id": 51619640, "body": "&quot;Having STL classes at the DLL interface is a very fragile design&quot;. Only in Microsoft-world it seems."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1438794101, "last_edit_date": 1438794101, "creation_date": 1438793721, "answer_id": 31838525, "question_id": 31837477, "link": "https://stackoverflow.com/questions/31837477/how-to-redesign-c-classes/31838525#31838525", "title": "How to redesign c++ classes?", "body": "<p>Having STL classes at the DLL interface is a very fragile design: if you do so, all the clients of the DLL must be built using the <strong>same version of the Visual C++ compiler</strong>, and the <strong>same settings</strong> (e.g. same <code>_ITERATOR_DEBUG_LEVEL</code>, etc.), and the <strong>same flavor of the CRT</strong>.<br>\nThis is <em>highly constraining</em>.</p>\n\n<p>You may want to follow different paths. For example, you could build a <strong>pure-C interface</strong> API layer wrapping your C++ classes, and export that from the DLL. DLL with a pure C interface are just fine (for example, think of the Win32 APIs).<br>\nThen you can distribute an header file in which this pure-C interface is wrapped in C++ classes, ready to be used by clients (for example, think of ATL/WTL, which are convenient C++ wrappers around pure-C Win32 APIs).</p>\n\n<p>Or you could follow a <em>COM-ish</em> approach, exporting C++ interfaces.<br>\nYou can find more details about that in this article:</p>\n\n<blockquote>\n  <p><a href=\"http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL\" rel=\"nofollow\">HowTo: Export C++ classes from a DLL</a></p>\n</blockquote>\n"}], "owner": {"reputation": 568, "user_id": 1695372, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ubH0S.jpg?s=128&g=1", "display_name": "Michael Hagar", "link": "https://stackoverflow.com/users/1695372/michael-hagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438794101, "creation_date": 1438790568, "question_id": 31837477, "link": "https://stackoverflow.com/questions/31837477/how-to-redesign-c-classes", "title": "How to redesign c++ classes?", "body": "<p>I have a bunch of classes like this:</p>\n\n<pre><code>class A \n{\npublic:\n   std::string s;\n   std::vector&lt;int&gt; v;\n   int a;\n}\n</code></pre>\n\n<p>That I'm trying to export to be used in a dll. I want clients to be able to use the class like this:</p>\n\n<pre><code>A a;\na.s = \"abc\";\nb.v.push_back(4);\n</code></pre>\n\n<p>But because vector and string cannot be exported, this isn't possible. Besides providing getters and setters for each member and using an abstract interface that has those getters and setters, is there any way around this?</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 1795570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3014d3262922b2caf890e3ad73a686e?s=128&d=identicon&r=PG", "display_name": "Joe Jankowiak", "link": "https://stackoverflow.com/users/1795570/joe-jankowiak"}, "edited": false, "score": 0, "creation_date": 1438791381, "post_id": 31837643, "comment_id": 51597080, "body": "I figured that it might be doing this and had tried moving the INSTANTIATE_TEST_CASE_P into main but it complained."}, {"owner": {"reputation": 1385, "user_id": 471384, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b95b1ed8ce8fe7a78b46101c989db07c?s=128&d=identicon&r=PG", "display_name": "bicepjai", "link": "https://stackoverflow.com/users/471384/bicepjai"}, "edited": false, "score": 0, "creation_date": 1444697994, "post_id": 31837643, "comment_id": 54000951, "body": "when you said &quot;before main&quot; , were you trying to mention &quot;test fixture setup virtual function&quot;"}], "tags": [], "owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "is_accepted": false, "score": 0, "last_activity_date": 1438791038, "creation_date": 1438791038, "answer_id": 31837643, "question_id": 31837284, "link": "https://stackoverflow.com/questions/31837284/google-tests-valuesin-with-a-global-vector/31837643#31837643", "title": "Google Tests ValuesIn with a global vector", "body": "<p>I'm not an expert in manually instantiating Google Tests, but the way you did it can't possibly work: you call <code>INSTANTIATE_TEST_CASE_P</code> in the static context, so it is being evaluated before <code>main</code> is ever called.</p>\n\n<p>You could try moving instantiation just before <code>RUN_ALL_TESTS</code>; however, I don't know what that macro does and this might be illegal. In that case, I think that you can't create your tests with <code>INSTANTIATE_TEST_CASE_P</code> in the dynamic way that you want.</p>\n"}, {"tags": [], "owner": {"reputation": 684, "user_id": 1795570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3014d3262922b2caf890e3ad73a686e?s=128&d=identicon&r=PG", "display_name": "Joe Jankowiak", "link": "https://stackoverflow.com/users/1795570/joe-jankowiak"}, "is_accepted": true, "score": 2, "last_activity_date": 1438791862, "creation_date": 1438791862, "answer_id": 31837950, "question_id": 31837284, "link": "https://stackoverflow.com/questions/31837284/google-tests-valuesin-with-a-global-vector/31837950#31837950", "title": "Google Tests ValuesIn with a global vector", "body": "<p>I've spent the last hour trying to figure this out and then as soon as I post I come up with the solution. I'll leave this here because it may help someone in the future:</p>\n\n<p>Instead of trying to create the list of files in main, pass the ValuesIn a function which loads the files and returns a vector.</p>\n\n<pre><code>std::vector&lt;TestParam&gt; GetFilesInDir() \n{\n    std::vector&lt;TestParam&gt; values;\n    QString dir = \"/home/mitydsp/trunk/System/logicExecutionEngine/unittest/expressions/bad/\";\n    QDirIterator it(dir, QStringList() &lt;&lt; \"*.txt\", QDir::Files, QDirIterator::Subdirectories);\n\n    while (it.hasNext()) {\n        QString path = it.next();\n        QStringList nameParts = it.fileName().split(\"_\");\n        int exitCode = nameParts[0].toInt();\n        values.push_back(TestParam(path, exitCode));\n    }\n\n    return values;\n}\n\nINSTANTIATE_TEST_CASE_P(TestBadExpressions, LogicBuilderTest,\n                        ::testing::ValuesIn(GetFilesInDir()));\n</code></pre>\n\n<p>Thanks to Maksim Solovjov for reminding me that INSTANTIATE_TEST_CASE_P macro was being executed before main.</p>\n"}, {"tags": [], "owner": {"reputation": 1385, "user_id": 471384, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b95b1ed8ce8fe7a78b46101c989db07c?s=128&d=identicon&r=PG", "display_name": "bicepjai", "link": "https://stackoverflow.com/users/471384/bicepjai"}, "is_accepted": false, "score": 1, "last_activity_date": 1444697824, "creation_date": 1444697824, "answer_id": 33092508, "question_id": 31837284, "link": "https://stackoverflow.com/questions/31837284/google-tests-valuesin-with-a-global-vector/33092508#33092508", "title": "Google Tests ValuesIn with a global vector", "body": "<p>we spent some hours on this issue and thought this snippet will be helpful.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n#include \"gtest/gtest.h\"\n\nGTEST_API_ main( int argc, char* argv[] ) {\n   testing::InitGoogleTest( &amp;argc, argv );\n   return RUN_ALL_TESTS();\n}\n\nstruct test_parms_s {\n   string         name;             // Simple name of this test\n   string         description;      // Description of this test\n   void*          function_parms;   // Pointer to test function specific data\n};\n\nstd::vector&lt;test_parms_s*&gt; BuildTestData() {\n   test_parms_s* pTestDataA = new test_parms_s(); \n   test_parms_s* pTestDataB = new test_parms_s(); \n   test_parms_s* pTestDataC = new test_parms_s();\n\n   pTestDataA-&gt;name.assign(\"testA\");\n   pTestDataA-&gt;description.assign(\"testA_desc\");\n   pTestDataA-&gt;function_parms = NULL;\n\n   pTestDataB-&gt;name.assign(\"testB\");\n   pTestDataB-&gt;description.assign(\"testB_desc\");\n   pTestDataB-&gt;function_parms = NULL;\n\n   pTestDataC-&gt;name.assign(\"testC\");\n   pTestDataC-&gt;description.assign(\"testC_desc\");\n   pTestDataC-&gt;function_parms = NULL;\n\n   std::vector&lt;test_parms_s*&gt; values;\n   values.push_back(pTestDataA);\n   values.push_back(pTestDataB);\n   values.push_back(pTestDataC);\n   cout &lt;&lt; \"BuildTestData\" &lt;&lt; endl;\n\n   return values;\n}\n//------------------------------------------------------------------------\nclass Testy {\n  private:\n     string       testname_;\n  public:\n     Testy( string testname );\n     ~Testy();\n     string   GetTestName();\n     void     SetTestName( string testname );\n};\nTesty::Testy( string testname ) {\n   testname_.assign(testname);\n}\nTesty::~Testy() {}\nstring Testy::GetTestName() { return testname_; }\nvoid Testy::SetTestName( string testname ) { testname_ = testname; }\n//------------------------------------------------\nclass TestFixture : public ::testing::TestWithParam&lt;test_parms_s*&gt; {\n   protected:\n     Testy* testy;      \n     virtual void SetUp() {\n        testy = new Testy( \"Test\");\n     }\n     virtual void TearDown() {\n        delete( testy );\n     }\n};\n//------------------------------------------------\nTEST_P( TestFixture, ParamTest ) {\n   test_parms_s* pTestParms = GetParam();\n   cout &lt;&lt; pTestParms-&gt;name &lt;&lt; endl;\n} \n//------------------------------------------------\nINSTANTIATE_TEST_CASE_P( TestFixture_instance, TestFixture,                     \n                         ::testing::ValuesIn(BuildTestData()));\n//========================================================================\n</code></pre>\n\n<p>the output will be</p>\n\n<pre><code>BuildTestData\n[==========] Running 3 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 3 tests from TestFixture_instance/TestFixture\n[ RUN      ] TestFixture_instance/TestFixture.ParamTest/0\ntestA\n[       OK ] TestFixture_instance/TestFixture.ParamTest/0 (0 ms)\n[ RUN      ] TestFixture_instance/TestFixture.ParamTest/1\ntestB\n[       OK ] TestFixture_instance/TestFixture.ParamTest/1 (0 ms)\n[ RUN      ] TestFixture_instance/TestFixture.ParamTest/2\ntestC\n[       OK ] TestFixture_instance/TestFixture.ParamTest/2 (0 ms)\n[----------] 3 tests from TestFixture_instance/TestFixture (0 ms total)\n\n[----------] Global test environment tear-down\n[==========] 3 tests from 1 test case ran. (0 ms total)\n[  PASSED  ] 3 tests.\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 1795570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3014d3262922b2caf890e3ad73a686e?s=128&d=identicon&r=PG", "display_name": "Joe Jankowiak", "link": "https://stackoverflow.com/users/1795570/joe-jankowiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2916, "favorite_count": 0, "accepted_answer_id": 31837950, "answer_count": 3, "score": 1, "last_activity_date": 1444697824, "creation_date": 1438790007, "question_id": 31837284, "link": "https://stackoverflow.com/questions/31837284/google-tests-valuesin-with-a-global-vector", "title": "Google Tests ValuesIn with a global vector", "body": "<p>I'm trying to run a bunch of google tests based off configuration files in a directory. This way I can just add a new file and run the tests without having to add it to my parametrized test and recompile. Here is my code:</p>\n\n<pre><code>typedef std::pair&lt;QString, int&gt; TestParam;\n\nQString generatedLogic;\n\nstd::vector&lt;TestParam&gt; badExpressionTests;\n\nclass LogicBuilderTest : public ::testing::TestWithParam&lt;TestParam&gt; {};\n\nGTEST_API_ int main(int argc, char **argv) {\n    testing::InitGoogleTest(&amp;argc, argv);\n\n    ::generatedLogic = \"/home/mitydsp/trunk/System/logicExecutionEngine/engine/include/GeneratedLogic.h\";\n\n    QString dir = \"/home/mitydsp/trunk/System/logicExecutionEngine/unittest/expressions/bad/\";\n    QDirIterator it(dir, QStringList() &lt;&lt; \"*.txt\", QDir::Files, QDirIterator::Subdirectories);\n\n    while (it.hasNext()) {\n        QString path = it.next();\n        QStringList nameParts = it.fileName().split(\"_\");\n        int exitCode = nameParts[0].toInt();\n        ::badExpressionTests.push_back(TestParam(path, exitCode));\n    }\n\n    std::cout &lt;&lt; \"Size of vector: \" &lt;&lt; badExpressionTests.size() &lt;&lt; std::endl;\n\n    return RUN_ALL_TESTS();\n}\n\n/**\n * Run parameterized test\n */\nTEST_P(LogicBuilderTest, TestExitWithCode)\n{    \n    ::testing::FLAGS_gtest_death_test_style = \"threadsafe\";\n\n    // Simulate fake main()\n    char  arg0[] = \"logicTest\";\n    char* argv[] = { &amp;arg0[0], NULL };\n    int argc = (int)(sizeof(argv) / sizeof(argv[0])) - 1;\n\n    EXPECT_EXIT({\n        // Need to run Qt Application because logic builder uses async QTimer::singleShot()\n        QCoreApplication app(argc, argv);\n\n        // Create a logic builder instance\n        LogicBuilder logicBuilder(\n            (int) ParameterStoreInterface::DEFAULT_PARAM_STORE_VALUES_KEY,\n            (int) ParameterStoreInterface::DEFAULT_PARAM_STORE_NAMES_KEY,\n            (int) ParameterStoreInterface::DEFAULT_PARAM_STORE_LOCK_KEY,\n            QString(GetParam().first),\n            QStringList(\"\"),\n            QStringList(generatedLogic),\n            QString(LogicBuilder::DEFAULT_INTERMEDIATE_DIR),\n            QString(LogicBuilder::DEFAULT_OUTPUT_SRC),\n            QString(LogicBuilder::DEFAULT_OUTPUT_LIB),\n            true );\n\n        app.exec();\n    }, ::testing::ExitedWithCode(GetParam().second), \"\");\n} \n\nINSTANTIATE_TEST_CASE_P(TestBadExpressions, LogicBuilderTest,\n                        ::testing::ValuesIn(::badExpressionTests));\n</code></pre>\n\n<p>When I run this, it shows that 0 tests are being ran even though the vector says its size is two. How come these parametrized tests are not being ran?</p>\n\n<pre><code>Size of vector: 2\n[==========] Running 0 tests from 0 test cases.\n[==========] 0 tests from 0 test cases ran. (0 ms total)\n[  PASSED  ] 0 tests.\n</code></pre>\n\n<p>Originally I was running the tests by manually defining the configuration files but I don't like this:</p>\n\n<pre><code>    INSTANTIATE_TEST_CASE_P(TestBadExpressions, LogicBuilderTest,\n                        ::testing::Values(\n                            TestParam(\"unittest/expressions/bad/17_no_lhs.txt\", LogicBuilder::LB_VARIABLE_NO_LHS),\n                            TestParam(\"unittest/expressions/bad/25_incomplete_rhs.txt\", LogicBuilder::LB_PARSE_ERROR)\n                        ));\n</code></pre>\n"}, {"tags": ["c++", "median", "nearest-neighbor", "kdtree"], "comments": [{"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1438790469, "post_id": 31837200, "comment_id": 51596486, "body": "Do you need the median point as in the point that is closest to the mean? Because in a 2D system median point of x and y coordinates are different."}, {"owner": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "reply_to_user": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1438792319, "post_id": 31837200, "comment_id": 51597658, "body": "I meant with it the point that separates all my point into two different partitions, with equal points (more or less). Yes, it depends every time on if we&#39;re using x or y."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "edited": false, "score": 0, "creation_date": 1438790860, "post_id": 31837349, "comment_id": 51596741, "body": "The point is I don&#39;t see any good way to use nth_element with coordinates."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "edited": false, "score": 0, "creation_date": 1438791000, "post_id": 31837349, "comment_id": 51596840, "body": "That&#39;s up to your implementation. You asked which is the way to go, the way is <code>nth_element</code>. Hope this helps and good coding! :) @TahaBenabdallah"}, {"owner": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "edited": false, "score": 0, "creation_date": 1438791919, "post_id": 31837349, "comment_id": 51597408, "body": "Thank you, I&#39;ll try to figure it out :)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "edited": false, "score": 0, "creation_date": 1438791975, "post_id": 31837349, "comment_id": 51597446, "body": "@TahaBenabdallah that&#39;s the spirit. I upvoted you, so that you can have more reputation, if you need to post another question with your attempt that might have problems! Good luck!"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 0, "last_activity_date": 1485671258, "last_edit_date": 1495541807, "creation_date": 1438790205, "answer_id": 31837349, "question_id": 31837200, "link": "https://stackoverflow.com/questions/31837200/find-median-of-coordinates-to-build-kd-tree-2d-c/31837349#31837349", "title": "Find median of coordinates to build kd tree (2D) - C++", "body": "<blockquote>\n  <p>How to compute median? Is there a more efficient way to proceed?</p>\n</blockquote>\n\n<p>I will give one answer for both questions: You can use <a href=\"http://www.cplusplus.com/reference/algorithm/nth_element/\" rel=\"nofollow noreferrer\">std::nth_element</a>, like this:</p>\n\n<pre><code>std::vector&lt;float&gt; v;                                   // data vector (global)\nbool myfunction (int i,int j) { return (v[i]&lt;v[j]); } \n\nint find_median(std::vector&lt;int&gt; &amp;v_i)\n{\n    size_t n = v_i.size() / 2;\n    nth_element(v_i.begin(), v_i.begin()+n, v_i.end(), myfunction);\n    return v_i[n];\n}\n</code></pre>\n\n<p>You can also check my <a href=\"https://stackoverflow.com/questions/23471045/use-n-th-element-in-a-container-but-with-another-key\">question</a> for more.</p>\n\n<hr>\n\n<blockquote>\n  <p>how to define the left and right partitions in the same time?</p>\n</blockquote>\n\n<p>Every value less from the median, would belong in the left partition, while every value greater than the median, would belong in the right partition.</p>\n\n<p>It's up to you to decide where the equal value to the median would go. Just pick left or right and remember your decision.</p>\n"}], "owner": {"reputation": 19, "user_id": 4859357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qezdp.jpg?s=128&g=1", "display_name": "berserker", "link": "https://stackoverflow.com/users/4859357/berserker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 31837349, "answer_count": 1, "score": 1, "last_activity_date": 1485671258, "creation_date": 1438789783, "last_edit_date": 1438790281, "question_id": 31837200, "link": "https://stackoverflow.com/questions/31837200/find-median-of-coordinates-to-build-kd-tree-2d-c", "title": "Find median of coordinates to build kd tree (2D) - C++", "body": "<p>I have a nearest neighbor problem in a 2D problem and I found out that kd-trees were the best solution.\nI couldn't find a ready implementation for the structure I am working with, so I decided to create my own.</p>\n\n<p>The structure I work with is:</p>\n\n<pre><code>struct Point{\n  int id;\n  double x;\n  double y;\n};\n</code></pre>\n\n<p>I have nearly 100000 points, my question is: How to proceed to find the median point each time I want to partition my points, and how to define the left and right partitions in the same time? </p>\n\n<p>Another question would be: Is there a more efficient way to proceed ? (The less time consuming possible).</p>\n"}, {"tags": ["c++", "eigen3", "submatrix"], "comments": [{"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1438790765, "post_id": 31837176, "comment_id": 51596682, "body": "Template arguments are required to be compile time constant - invariably. Neither <code>P</code> nor <code>cols_of_P</code> is a compile time coinstant expression."}], "answers": [{"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": true, "score": 2, "last_activity_date": 1438791107, "last_edit_date": 1438791107, "creation_date": 1438790484, "answer_id": 31837440, "question_id": 31837176, "link": "https://stackoverflow.com/questions/31837176/eigen3-extract-a-submatrix-with-a-non-constant-number-of-columns/31837440#31837440", "title": "Eigen3: extract a submatrix with a non constant number of columns", "body": "<p>Look at the documentation for Using Block Operations. </p>\n\n<p>There are two versions, whose syntax is as follows:</p>\n\n<p><strong>Block operation</strong> with\nblock of size <code>(p,q)</code>, starting at <code>(i,j)</code></p>\n\n<p>Version constructing a dynamic-size block expression</p>\n\n<pre><code>matrix.block(i,j,p,q);\n</code></pre>\n\n<p>Version constructing a \n fixed-size block expression</p>\n\n<pre><code>matrix.block&lt;p,q&gt;(i,j);\n</code></pre>\n\n<p>For your case use: </p>\n\n<pre><code>tempMatrix.block(0, 0, 2, 2)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 1860467, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87e65a555c81b35c1b0be19a2f0e5a41?s=128&d=identicon&r=PG", "display_name": "ubisum", "link": "https://stackoverflow.com/users/1860467/ubisum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 31837440, "answer_count": 1, "score": 2, "last_activity_date": 1438791107, "creation_date": 1438789719, "question_id": 31837176, "link": "https://stackoverflow.com/questions/31837176/eigen3-extract-a-submatrix-with-a-non-constant-number-of-columns", "title": "Eigen3: extract a submatrix with a non constant number of columns", "body": "<p>I wrote the following function in C++, using Eigen3:</p>\n\n<pre><code>MatrixXf transformPoints(MatrixXf X, MatrixXf P)\n{\n    // create a new matrix to host points\n    MatrixXf tempMatrix = MatrixXf::Zero(4, P.cols());\n\n    // extract rotational and traslational parts from X\n    MatrixXf rotmat = tempMatrix.block&lt;2,2&gt;(0,0);\n    Vector2f traMat = tempMatrix.block&lt;2,1&gt;(0,2);\n\n    // separate points from normals\n    // int cols_of_P = P.cols();\n    MatrixXf points = tempMatrix.block&lt;2,P.cols()&gt;(0,0);\n    MatrixXf normals = tempMatrix.block&lt;2,P.cols()&gt;(2,0);\n}\n</code></pre>\n\n<p>In my idea, on last two rows, I should be able to extract a submatrix from p, whose number of column is not known a priori, but it depends on P's size.\nI get the following error:</p>\n\n<pre><code>home/ubisum/fuerte_workspace/thesis_pack/src/least_squares_utilities.h: In function \u2018Eigen::MatrixXf least_squares::transformPoints(Eigen::MatrixXf, Eigen::MatrixXf)\u2019:\n/home/ubisum/fuerte_workspace/thesis_pack/src/least_squares_utilities.h:18:47: error: \u2018P\u2019 cannot appear in a constant-expression\n/home/ubisum/fuerte_workspace/thesis_pack/src/least_squares_utilities.h:18:49: error: \u2018.\u2019 cannot appear in a constant-expression\n/home/ubisum/fuerte_workspace/thesis_pack/src/least_squares_utilities.h:18:54: error: a function call cannot appear in a constant-expression\n/home/ubisum/fuerte_workspace/thesis_pack/src/least_squares_utilities.h:18:60: error: no matching function for call to \u2018Eigen::Matrix&lt;float, -0x00000000000000001, -0x00000000000000001&gt;::block(int, int)\u2019\n</code></pre>\n\n<p>I even tried the following modification:</p>\n\n<pre><code>int cols_of_P = P.cols();\nMatrixXf points = tempMatrix.block&lt;2,cols_of_P&gt;(0,0);\nMatrixXf normals = tempMatrix.block&lt;2,cols_of_P&gt;(2,0);\n</code></pre>\n\n<p>but nothing changed.\nCan you help me?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1438789881, "post_id": 31837131, "comment_id": 51596072, "body": "You can&#39;t return a C++ <code>std::string</code>, instead you need to marshal the data to .Net types (<code>System::String^</code>)."}, {"owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1438789961, "post_id": 31837131, "comment_id": 51596118, "body": "@crashmstr do you have a tutorial on that?"}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 0, "creation_date": 1438790120, "post_id": 31837131, "comment_id": 51596238, "body": "Or probably use C string as middle ground."}, {"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1438790426, "post_id": 31837131, "comment_id": 51596454, "body": "Maybe this will help:  <a href=\"https://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>"}, {"owner": {"reputation": 388, "user_id": 3430628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPnrd.png?s=128&g=1", "display_name": "whoisj", "link": "https://stackoverflow.com/users/3430628/whoisj"}, "edited": false, "score": 0, "creation_date": 1438790878, "post_id": 31837131, "comment_id": 51596752, "body": "CLR managed memory is in its own heap. You will need to manually marshal bits back and forth between the heaps if you want to interop. This is not cheap."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1438791937, "post_id": 31837131, "comment_id": 51597419, "body": "@MathieuL <a href=\"https://msdn.microsoft.com/en-us/library/bb384865.aspx\" rel=\"nofollow noreferrer\">Overview of Marshaling in C++</a> and <a href=\"https://msdn.microsoft.com/en-us/library/bb384859.aspx\" rel=\"nofollow noreferrer\">marshal_as</a> as well as <a href=\"http://stackoverflow.com/questions/13718188/convert-from-stdstring-to-string\">convert from std::string to String^</a>. I&#39;m sure you can also find other related questions here."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1438801849, "post_id": 31837131, "comment_id": 51603305, "body": "The &quot;file not found&quot; error could be because the C++ dll is not in the probing path of the C# application. First test should be to copy all the binaries and assemblies into same folder and try run it from there. Following on that, there are a few .Net runtime hooks that you can add handlers to that can assist in finding what file is missing."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1438801871, "post_id": 31837131, "comment_id": 51603318, "body": "Re: your latest update - .Net is <i>horrible</i> about this as it obscures any useful message, but it probably can&#39;t find your C++ dll. Make sure you copy it to the output folder!"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438804546, "post_id": 31837131, "comment_id": 51604841, "body": "You really need just one DLL. The mixed mode C++/CLI assembly."}, {"owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1438875006, "post_id": 31837131, "comment_id": 51639234, "body": "@crashmstr I got my wrapper dll into the debug file of my final test project"}, {"owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438875031, "post_id": 31837131, "comment_id": 51639256, "body": "@DavidHeffernan Yeah, I reference my wrapper dll only but Visual Studio seem to not be able to find the file"}, {"owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "reply_to_user": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1438875067, "post_id": 31837131, "comment_id": 51639294, "body": "@yms Well I build the native and wrapper dll but in the c# project I only reference to the wrapper dll"}, {"owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "reply_to_user": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1438876651, "post_id": 31837131, "comment_id": 51640429, "body": "@yms I build my cpp file into win32 and the C# is build into x86. Can it cause any problem"}], "owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438801226, "creation_date": 1438789615, "last_edit_date": 1495535209, "question_id": 31837131, "link": "https://stackoverflow.com/questions/31837131/c-to-c-where-is-my-error", "title": "C++ to C# - Where is my error?", "body": "<p>on a previous post, I requested about conversion from C++ to C#:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31705171/calling-c-from-c-sharp\">Calling C from C#</a></p>\n\n<p>Than I searched a lot and found a lot of similar tutorial and I implement the following code.</p>\n\n<p>In my first C++ project, it is the place that I will eventually implement all my usb methode but for now I got the following code:</p>\n\n<p>in my header file (hpp) , I got the following code:</p>\n\n<pre><code>#pragma once\n#define DLLEXP   __declspec( dllexport )\n#include &lt;string&gt;\nnamespace test{\nDLLEXP std::string helloworld(void);\n};\n</code></pre>\n\n<p>The implementation in the cpp is the following:</p>\n\n<pre><code>#include \"test.hpp\"\n\nstd::string test::helloworld(void){\nreturn \"Hello WORLD from DLL\";\n }\n</code></pre>\n\n<p>So it is just a simple hello world to test if the code is correctly import into the c#.</p>\n\n<p>Than I made what is called a \"wrapper\" from a library v C++ project, I don;t know all the detail about that (from my previous post I am an hardware guy) but I get the following code in my header:</p>\n\n<pre><code>// wrapper.h\n\n  #pragma once\n  #include \"Stdafx.h\"\n\n  using namespace System;\n</code></pre>\n\n<p>namespace wrapper {</p>\n\n<pre><code>public ref class wrapperclass\n{\n    public:\n        wrapperclass(){ husb = 0; };\n        std::string printhello(void);\n    private:\n        int husb;\n};\n}\n</code></pre>\n\n<p>I include my test.hpp in the stdafx.h</p>\n\n<pre><code>#pragma once\n#include \"test.hpp\"\n</code></pre>\n\n<p>Finaly, this is my implementation into the Cpp file:</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include \"wrapper.h\"\n\nusing namespace test;\n\nnamespace wrapper{\nstd::string wrapperclass::printhello(void){\n    std::string message = test::helloworld();\n    return message;\n};\n};\n</code></pre>\n\n<p>Everything compile just fine and I am able to import the wrapper dll into a c# project. Here my code that I got in C#</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\nusing wrapper;\nnamespace testfinal\n{\nclass Program\n{\n    static void Main(string[] args)\n    {\n        wrapperclass wc = new wrapperclass();\n        wc.printhello();\n    }\n}\n}\n</code></pre>\n\n<p>Than I get 2 thing from the compiler:</p>\n\n<ol>\n<li><p>[error] I cannot use printhello because the compiler say that it is not supported by the language </p></li>\n<li><p>[warning] \"There was a mismatch between the processor architecture of the project being built \"MSIL\" abd the processor architecture of the reference \"Wrapper\" ( imported DLL). This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of you project through the configuration manager so as to align the processor architectures between your project and references or a take a dependency on referenes with  a processor architecture that matches the targeted processor architecture of your project.</p></li>\n</ol>\n\n<p>So my question, Why can`t i call the printhello method from the wrapper class? I am pretty sure it is linked to the warning message but I am not what his meaning is. Is it reliate to language architecture</p>\n\n<p>[EDIT]</p>\n\n<p>I resolve the architecture problem with the following post:\n<a href=\"https://stackoverflow.com/questions/10113532/how-do-i-fix-the-visual-studio-compile-error-mismatch-between-processor-archit\">How do I fix the Visual Studio compile error, &quot;mismatch between processor architecture&quot;?</a></p>\n\n<p>[EDIT-#2]</p>\n\n<p>I achieve to advance a little more. Now my wrapper header is</p>\n\n<pre><code>#pragma once\n#include \"Stdafx.h\"\n#include \"msclr\\marshal_cppstd.h\"\n\n using namespace System;\n using namespace msclr::interop;\n\n\nnamespace wrapper {\n\npublic ref class wrapperclass\n{\n    public:\n        wrapperclass(){ husb = 0; };\n        String^ printhello(void);\n    private:\n        int husb;\n};\n}\n</code></pre>\n\n<p>and my cpp is :</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include \"wrapper.h\"\n\n using namespace test;\n\n namespace wrapper{\nString^ wrapperclass::printhello(void){\n    String^ message = marshal_as&lt;String^&gt;( test::helloworld());\n    return message;\n};\n};\n</code></pre>\n\n<p>The c# code is compiling now, but when I try to run the code, Visual studio tell me</p>\n\n<p>\"An unhandled exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll\"</p>\n"}, {"tags": ["c++", "parsing", "code-generation", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1439194752, "post_id": 31837122, "comment_id": 51742443, "body": "Did you try googling for &quot;C++ parser&quot;?"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1439194877, "post_id": 31837122, "comment_id": 51742519, "body": "You might take your request to <a href=\"http://softwarerecs.stackexchange.com/\">softwarerecs.stackexchange.com</a>"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1463146545, "post_id": 31837122, "comment_id": 61954055, "body": "See <a href=\"http://stackoverflow.com/questions/17388771/get-human-readable-ast-from-c-code/17393852#17393852\" title=\"get human readable ast from c code\">stackoverflow.com/questions/17388771/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21282, "user_id": 140367, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/686b6807a5e05236c44c9472e99e146a?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s Szelei", "link": "https://stackoverflow.com/users/140367/tam%c3%a1s-szelei"}, "is_accepted": true, "score": 1, "last_activity_date": 1438789754, "creation_date": 1438789754, "answer_id": 31837189, "question_id": 31837122, "link": "https://stackoverflow.com/questions/31837122/library-for-c-abstract-syntax-trees-composition-and-code-generation/31837189#31837189", "title": "Library for C++ abstract syntax trees composition and code generation", "body": "<p>clang and libtooling is what you are looking for. It is able to do everything you want, but the downside is that it's not very well documented (to my knowledge). Here is a blog post with useful examples: <a href=\"http://eli.thegreenplace.net/2014/05/01/modern-source-to-source-transformation-with-clang-and-libtooling\" rel=\"nofollow\">http://eli.thegreenplace.net/2014/05/01/modern-source-to-source-transformation-with-clang-and-libtooling</a></p>\n"}], "owner": {"reputation": 1529, "user_id": 324204, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/90885aa3719a9848d72c7a8f198b7672?s=128&d=identicon&r=PG", "display_name": "Sogartar", "link": "https://stackoverflow.com/users/324204/sogartar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 0, "closed_date": 1438791227, "accepted_answer_id": 31837189, "answer_count": 1, "score": 0, "last_activity_date": 1462085988, "creation_date": 1438789586, "last_edit_date": 1462085988, "question_id": 31837122, "link": "https://stackoverflow.com/questions/31837122/library-for-c-abstract-syntax-trees-composition-and-code-generation", "closed_reason": "Not suitable for this site", "title": "Library for C++ abstract syntax trees composition and code generation", "body": "<p>I am looking for a C/C++ library. It should be able to parse C++ source code and generate abstract syntax tree. I would also like to explore/edit the AST from my program, for example to add a function call. This means, the syntax tree should not be in some text format, but as a collection of C++ objects, based on the object model of the library itself.</p>\n\n<p>It should also be able to generate C++ code from an AST.</p>\n\n<p>It is clear that any compiler does this and probably has some API. I have heard that GCC exposes some functionality, but it is quite overwhelming under the hood.</p>\n\n<p>I am aware of <a href=\"http://scottmcpeak.com/elkhound/sources/elsa/\" rel=\"nofollow\">Elsa</a>, but the project seems to be inactive for quite some time.</p>\n\n<p>I was wondering if there are other options. Anything that is cross-platform is a plus.</p>\n"}, {"tags": ["c++", "macos", "algorithm", "exc-bad-access", "bag"], "comments": [{"owner": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 0, "creation_date": 1438792436, "post_id": 31837082, "comment_id": 51597736, "body": "It&#39;s strange, since I copied your whole code (from the git link), but couldn&#39;t reproduce the error. It gave correct results, ie. Length Frquency, Letter Frequency and Uniqueness percentage."}, {"owner": {"reputation": 749, "user_id": 3946096, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AvgEV.png?s=128&g=1", "display_name": "Alexander N.", "link": "https://stackoverflow.com/users/3946096/alexander-n"}, "reply_to_user": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 0, "creation_date": 1438794388, "post_id": 31837082, "comment_id": 51598970, "body": "I got it on the second run and then would consistently get the error.  I am getting it on two different MacBook Pros."}, {"owner": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 0, "creation_date": 1438798635, "post_id": 31837082, "comment_id": 51601361, "body": "Can you try it on some online IDE like <a href=\"http://ideone.com/\" rel=\"nofollow noreferrer\">this?</a>"}, {"owner": {"reputation": 749, "user_id": 3946096, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AvgEV.png?s=128&g=1", "display_name": "Alexander N.", "link": "https://stackoverflow.com/users/3946096/alexander-n"}, "reply_to_user": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 0, "creation_date": 1438805855, "post_id": 31837082, "comment_id": 51605519, "body": "I am reading a local file so I don&#39;t know if that would work...  I recently introduced dynamic memory allocation to the original code and it seems to be working for now so I am not sure if we should keep troubleshooting or what."}], "owner": {"reputation": 749, "user_id": 3946096, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AvgEV.png?s=128&g=1", "display_name": "Alexander N.", "link": "https://stackoverflow.com/users/3946096/alexander-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438792795, "creation_date": 1438789495, "last_edit_date": 1438792795, "question_id": 31837082, "link": "https://stackoverflow.com/questions/31837082/getting-an-exc-bad-access-error-when-trying-to-sort-a-bag", "title": "Getting an EXC_BAD_ACCESS error when trying to sort a bag", "body": "<p>So I am trying to get the count of words in a file and insert that into a bag.  To improve processing times, I created a replace command that takes a reference to that object and switch it with the one before it so more common words are quicker to be incremented in the bag.  I am continually getting EXC_BAD_ACCESS Code 2 errors but am unaware of how these are created.  Below are the code blocks in question.</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid replace(T&amp; item, T&amp; item2)\n{\n    T value = item;\n    T value2 = item2;\n    item = value2;\n    item2 = value;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template&lt;typename T, int N&gt;\nvoid Bag&lt;T,N&gt;::add(T item)\n{\n    for (int i = 0; i &lt; m_size; i++)\n    {\n        if (m_items[i] == item)\n        {\n            m_counts[i]++;\n            while (i != 0 &amp;&amp; m_counts[i] &gt; m_counts[i-1]) {\n                replace(m_items[i], m_items[i-1]);\n                replace(m_counts[i], m_counts[i-1]);\n                i--;\n            }\n            return;\n        }\n    }\n    m_items [m_size] = item;\n    m_counts[m_size] = 1;\n\n    m_size++;\n}\n</code></pre>\n\n<p>I read that it might be an infinite loop causing this but the while loop created should not be creating an infinite loop.  Any help is appreciated.  If the entire code needs to be posted, it can be found at:</p>\n\n<p>Github Gist of code\n<a href=\"https://gist.github.com/nohe427/ff1ce9bbeec78983aec3\" rel=\"nofollow\">https://gist.github.com/nohe427/ff1ce9bbeec78983aec3</a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 3, "creation_date": 1438789677, "post_id": 31836971, "comment_id": 51595944, "body": "why don&#39;t you try it? <a href=\"http://melpon.org/wandbox/permlink/b9tqEV2qJOyMKZeE\" rel=\"nofollow noreferrer\">yes it works</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438790266, "post_id": 31836971, "comment_id": 51596345, "body": "What are possible problems with that?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438792623, "post_id": 31836971, "comment_id": 51597844, "body": "You tagged this C++11, so no. <i>init-capture</i> is C++14."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438796595, "post_id": 31836971, "comment_id": 51600137, "body": "@T.C. Well, could just do <code>a = [a](int x){ return a(x) + 1; };</code> and accomplish the same thing, if somewhat more confusingly."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1438796643, "post_id": 31836971, "comment_id": 51600170, "body": "@Barry Sure, my point is that the code, as written, won&#39;t compile in a C++11 compiler."}], "answers": [{"tags": [], "owner": {"reputation": 2748, "user_id": 946684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-q2v9zGAF5X4/AAAAAAAAAAI/AAAAAAAAAoE/GqTvVZJIIJE/photo.jpg?sz=128", "display_name": "blockchaindev", "link": "https://stackoverflow.com/users/946684/blockchaindev"}, "is_accepted": true, "score": 2, "last_activity_date": 1438805591, "creation_date": 1438805591, "answer_id": 31841983, "question_id": 31836971, "link": "https://stackoverflow.com/questions/31836971/can-i-modify-function-wrapper-so-that-it-uses-its-old-value/31841983#31841983", "title": "Can I modify function wrapper so that it uses its old value?", "body": "<p>This won't work primarily because initializer expressions were introduced in C++14.</p>\n\n<p>However this is valid syntax in C++14. Here is some evidence: <a href=\"http://coliru.stacked-crooked.com/a/5fe0a53953b0421b\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/5fe0a53953b0421b</a></p>\n"}], "owner": {"reputation": 325, "user_id": 3557152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f1d70160f708a93a89b22ee92eb08af?s=128&d=identicon&r=PG&f=1", "display_name": "elflyao", "link": "https://stackoverflow.com/users/3557152/elflyao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31841983, "answer_count": 1, "score": 1, "last_activity_date": 1438805591, "creation_date": 1438789211, "question_id": 31836971, "link": "https://stackoverflow.com/questions/31836971/can-i-modify-function-wrapper-so-that-it-uses-its-old-value", "title": "Can I modify function wrapper so that it uses its old value?", "body": "<p>Can I modify function wrapper like this</p>\n\n<pre><code>std::function&lt;int(int)&gt; a=[](int x){return 2*x;};\na=[f=a](int x){return f(x)+1;};\n</code></pre>\n\n<p>so I can dynamically build more and more complex functions?</p>\n"}, {"tags": ["c++", "c", "cmake", "clion"], "answers": [{"comments": [{"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438795793, "post_id": 31838850, "comment_id": 51599733, "body": "one ore question, since I know which files I am accessing in my source code. Is there a way to make a list of files and pass those out to cmake which can then be used? for example in my c code I make reference to filea.txt, can I have this be passed back to cmake? Then instead of globbing the files I just have the build automatically read a list of files and update accordingly?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438803313, "post_id": 31838850, "comment_id": 51604134, "body": "You may create file which looks like <code>set(files_list ...)</code> and <code>include</code> it from CMakeLists.txt. Whenever this file will be changed (e.g. while building project), next <code>make</code> call will trigger reconfigure step. If you need more detailed info, please, ask new question."}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438803520, "post_id": 31838850, "comment_id": 51604229, "body": "thanks, i&#39;ll ask a new question if I cannot get it sorted out."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1438794900, "creation_date": 1438794900, "answer_id": 31838850, "question_id": 31836935, "link": "https://stackoverflow.com/questions/31836935/clion-run-cmake-on-each-build/31838850#31838850", "title": "clion run cmake on each build", "body": "<p>If you want CMake to make some action whenever some file is changed, you should create a rule using <code>add_custom_command</code> and pass file via <code>DEPENDS</code> argument. Note, that only file-level dependencies are supported by CMake, for make dependency on directory you need to list all files in it.</p>\n\n<pre><code># Collect list of files within directory.\nFILES(GLOB files_list RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/resources/\n    \"${CMAKE_CURRENT_SOURCE_DIR}/resources/*\") \n# This will contain full paths to files in binary directory. \nset(binary_files_list)\nforeach(file ${files_list})\n    set(source_file ${CMAKE_CURRENT_SOURCE_DIR}/resources/${file})\n    set(binary_file ${CMAKE_CURRENT_BINARY_DIR}/bin/resources/${file})\n    add_custom_command(OUTPUT ${binary_file}\n        COMMAND cmake -E ${source_file} ${binary_file}\n        DEPENDS ${source_file})\n    list(APPEND binary_files_list ${binary_file})\nendforeach()\nadd_custom_target(resources DEPENDS ${binary_files_list})\n</code></pre>\n\n<p>Note, that in case of adding/removing files you should to run <code>cmake</code> explicitely. That's why hardcoded files list is preferred to <code>GLOB</code>ing.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 0, "accepted_answer_id": 31838850, "answer_count": 1, "score": 0, "last_activity_date": 1438794900, "creation_date": 1438789121, "question_id": 31836935, "link": "https://stackoverflow.com/questions/31836935/clion-run-cmake-on-each-build", "title": "clion run cmake on each build", "body": "<p>I am not sure if its possible to do this with clion, I was testing out the program and enjoy using it to write c code because the ctags and etags support is really nice.</p>\n\n<p>I am copying some files over from the cmake source tree to the bin location on each build. While using clion if I update some of the files that I am copying the results aren't updated within clion.</p>\n\n<p>If I instead go back to the terminal and just run the typical cmake steps</p>\n\n<pre><code>cmake ../ &amp;&amp; make &amp;&amp; bin/./program\n</code></pre>\n\n<p>that copies the updated files and I am able to see my results.</p>\n\n<p>This is the CMake command that I am using in my build.</p>\n\n<pre><code>FILE(COPY ${CMAKE_CURRENT_SOURCE_DIR}/resources/ DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/bin/resources/)\n</code></pre>\n\n<p>I might be able to restructure the cmake command to make it copy every time or it might just be a clion issue. I am unsure and would like to be able to take care of this all from within clion, instead of going back to the terminal to run the cmake command for updates to take effect.</p>\n"}, {"tags": ["c++", "downsampling"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438788704, "post_id": 31836598, "comment_id": 51595309, "body": "Why not just use standard interpolation techniques?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1438797853, "post_id": 31836598, "comment_id": 51600902, "body": "I&#39;m voting to close this question as off-topic because it isn&#39;t about programming."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4394525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d11da361b077ac52fbb8c8b3c870785?s=128&d=identicon&r=PG&f=1", "display_name": "cdevelop", "link": "https://stackoverflow.com/users/4394525/cdevelop"}, "edited": false, "score": 0, "creation_date": 1438789817, "post_id": 31836792, "comment_id": 51596032, "body": "Thanks lollercoaster, very clear explanation. Fortunatly for me my problem is only 1D values so I can skip over the RGB elements.  3-&gt;2 seems very intuitive, but 100 -&gt; 77 does not. How can I work to make this mental leap?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1438797726, "post_id": 31836792, "comment_id": 51600814, "body": "With a pen and paper? Trying more cases and developing an intuition about how the numbers work? It&#39;s not a programming question, it&#39;s just a sitting down and thinking about it question."}, {"owner": {"reputation": 13181, "user_id": 712997, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c5ad6f27f1e7160f6fdb9618e333caa9?s=128&d=identicon&r=PG", "display_name": "lollercoaster", "link": "https://stackoverflow.com/users/712997/lollercoaster"}, "edited": false, "score": 0, "creation_date": 1438807682, "post_id": 31836792, "comment_id": 51606578, "body": "You are going to need a function that translates <code>n</code> original numbers to <code>m</code> new slots by assigning each <code>m</code>th sample a normalized weighting of each of the <code>n</code> original numbers. in practice, it won&#39;t be very many original bins that contribute, but you&#39;ll need a function that steps through and assigns the subsample array one by one. as you take steps of 1.0/100, when you cross each multiple of 1.0/77, you&#39;ll need to assign the last subsample cell to the last set of original cells in weighted fashion. If this approach answers your question, please mark it as such!"}], "tags": [], "owner": {"reputation": 13181, "user_id": 712997, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c5ad6f27f1e7160f6fdb9618e333caa9?s=128&d=identicon&r=PG", "display_name": "lollercoaster", "link": "https://stackoverflow.com/users/712997/lollercoaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1438789039, "last_edit_date": 1438789039, "creation_date": 1438788736, "answer_id": 31836792, "question_id": 31836598, "link": "https://stackoverflow.com/questions/31836598/subsampling-an-array-of-numbers/31836792#31836792", "title": "Subsampling an array of numbers", "body": "<p>Create 77 new pixels based on the weighted average of their positions. </p>\n\n<p>As a toy example, think about the 3 pixel case which you want to subsample to 2. </p>\n\n<p>Original (denote as multidimensional array <code>original</code> with RGB as [0, 1, 2]):</p>\n\n<pre><code>|----|----|----|\n</code></pre>\n\n<p>Subsample (denote as multidimensional array <code>subsample</code> with RGB as [0, 1, 2]):</p>\n\n<pre><code>|------|------|\n</code></pre>\n\n<p>Here, it is intuitive to see that the first subsample seems like 2/3 of the first original pixel and 1/3 of the next. </p>\n\n<p>For the first subsample pixel, <code>subsample[0]</code>, you make it the RGB average of the <code>m</code> original pixels that overlap, in this case <code>original[0] and original[1]</code>. But we do so in weighted fashion. </p>\n\n<pre><code>subsample[0][0] = original[0][0] * 2/3 + original[1][0] * 1/3  # for red\nsubsample[0][1] = original[0][1] * 2/3 + original[1][1] * 1/3  # for green\nsubsample[0][2] = original[0][2] * 2/3 + original[1][2] * 1/3  # for blue\n</code></pre>\n\n<p>In this example <code>original[1][2]</code> is the green component of the second original pixel. </p>\n\n<p>Keep in mind for different subsampling you'll have to determine the set of original cells that contribute to the subsample, and then normalize to find the relative weights of each. </p>\n\n<p>There are much more complex graphics techniques, but this one is simple and works. </p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1438798479, "last_edit_date": 1438798479, "creation_date": 1438797530, "answer_id": 31839612, "question_id": 31836598, "link": "https://stackoverflow.com/questions/31836598/subsampling-an-array-of-numbers/31839612#31839612", "title": "Subsampling an array of numbers", "body": "<p>There are different ways of interpolation (see <a href=\"https://en.wikipedia.org/wiki/Interpolation\" rel=\"nofollow\">wikipedia</a>)</p>\n\n<p>The linear one would be something like:</p>\n\n<pre><code>std::array&lt;int, 77&gt; sampling(const std::array&lt;int, 100&gt;&amp; a)\n{\n     std::array&lt;int, 77&gt; res;\n\n     for (int i = 0; i != 76; ++i) {\n         int index = i * 99 / 76;\n         int p = i * 99 % 76;\n\n         res[i] = ((p * a[index + 1]) + ((76 - p) * a[index])) / 76;\n    }\n    res[76] = a[99]; // done outside of loop to avoid out of bound access (0 * a[100])\n    return res;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/w40sIg\" rel=\"nofollow\">Live example</a></p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1438799009, "creation_date": 1438799009, "answer_id": 31840048, "question_id": 31836598, "link": "https://stackoverflow.com/questions/31836598/subsampling-an-array-of-numbers/31840048#31840048", "title": "Subsampling an array of numbers", "body": "<p>Everything depends on what you wish to do with the data - how do you want to visualize it.</p>\n\n<p>A very simple approach would be to render to a 100-wide image, and then smooth scale the image down to a narrower size. Whatever graphics/development framework you're using will surely support such an operation.</p>\n\n<p>Say, though, that your goal might be to retain certain qualities of the data, such as minima and maxima. In such a case, for each bin, you're drawing a line of darker color up to the minimum value, and then continue with a lighter color up to the maximum. Or, you could, instead of just putting a pixel at the average value, you draw a line from the minimum to the maximum.</p>\n\n<p>Finally, you might wish to render as if you had 77 values only - then the goal is to somehow transform the 100 values down to 77. This will imply some kind of an interpolation. Linear or quadratic interpolation is easy, but adds distortions to the signal. Ideally, you'd probably want to throw a sinc interpolator at the problem. A good list of them can be found <a href=\"https://ccrma.stanford.edu/~jos/resample/Free_Resampling_Software.html\" rel=\"nofollow\">here</a>. For theoretical background, look <a href=\"https://ccrma.stanford.edu/~jos/resample/\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5032, "user_id": 1201614, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/L9g12.jpg?s=128&g=1", "display_name": "luca", "link": "https://stackoverflow.com/users/1201614/luca"}, "edited": false, "score": 0, "creation_date": 1617190043, "post_id": 31878492, "comment_id": 118233479, "body": "Really thank you for the detailed explanation, very useful"}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 4, "last_activity_date": 1438958007, "last_edit_date": 1438958007, "creation_date": 1438952748, "answer_id": 31878492, "question_id": 31836598, "link": "https://stackoverflow.com/questions/31836598/subsampling-an-array-of-numbers/31878492#31878492", "title": "Subsampling an array of numbers", "body": "<p>Either if you downsample or you oversample, you are trying to reconstruct a signal over nonsampled points in time... so you have to make some assumptions.</p>\n\n<p>The sampling theorem tells you that if you sample a signal knowing that it has no frequency components over half the sampling frequency, you can continously and completely recover the signal over the whole timing period.  There's a way to reconstruct the signal using <code>sinc()</code> functions (this is <code>sin(x)/x</code>)</p>\n\n<p><code>sinc()</code> (indeed <code>sin(M_PI/Sampling_period*x)/M_PI/x</code>) is a function that has the following properties:</p>\n\n<ol>\n<li>Its value is 1 for <code>x == 0.0</code> and 0 for <code>x == k*Sampling_period</code> with <code>k == 0, +-1, +-2, ...</code></li>\n<li>It has no frequency component over half of the sampling_frequency derived from <code>Sampling_period</code>.</li>\n</ol>\n\n<p>So if you consider the sum of the functions <code>F_x(x) = Y[k]*sinc(x/Sampling_period - k)</code> to be the sinc function that equals the sampling value at position <code>k</code> and 0 at other sampling value and sum over all k in your sample, you'll get the best continous function that has the properties of not having components on frequencies over half the sampling frequency and have the same values as your samples set.</p>\n\n<p>Said this, you can resample this function at whatever position you like, getting the best way to resample your data.</p>\n\n<p>This is by far, a complicated way of resampling data, (it has also the problem of not being causal, so it cannot be implemented in real time) and you have several methods used in the past to simplify the interpolation.  you have to constructo all the sinc functions for each sample point and add them together.  Then you have to resample the resultant function to the new sampling points and give that as a result.</p>\n\n<p>Next is an example of the interpolation method just described. It accepts some input data (<code>in_sz</code> samples) and output interpolated data with the method described before (I supposed the extremums coincide, which makes <code>N+1</code> samples equal <code>N+1</code> samples, and this makes the somewhat intrincate calculations of <code>(in_sz - 1)/(out_sz - 1)</code> in the code (change to <code>in_sz/out_sz</code> if you want to make plain <code>N samples -&gt; M samples</code> conversion:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* normalized sinc function */\ndouble sinc(double x)\n{\n    x *= M_PI;\n    if (x == 0.0) return 1.0;\n    return sin(x)/x;\n} /* sinc */\n\n/* interpolate a function made of in samples at point x */\ndouble sinc_approx(double in[], size_t in_sz, double x)\n{\n    int i;\n    double res = 0.0;\n    for (i = 0; i &lt; in_sz; i++)\n            res += in[i] * sinc(x - i);\n    return res;\n} /* sinc_approx */\n\n/* do the actual resampling.  Change (in_sz - 1)/(out_sz - 1) if you\n * don't want the initial and final samples coincide, as is done here.\n */\nvoid resample_sinc(\n    double in[],\n    size_t in_sz,\n    double out[],\n    size_t out_sz)\n{\n    int i;\n    double dx = (double) (in_sz-1) / (out_sz-1);\n    for (i = 0; i &lt; out_sz; i++)\n            out[i] = sinc_approx(in, in_sz, i*dx);\n}\n\n/* test case */\nint main()\n{\n    double in[] = {\n            0.0, 1.0, 0.5, 0.2, 0.1, 0.0,\n    };\n\n    const size_t in_sz = sizeof in / sizeof in[0];\n    const size_t out_sz = 5;\n    double out[out_sz];\n    int i;\n\n    for (i = 0; i &lt; in_sz; i++)\n            printf(\"in[%d] = %.6f\\n\", i, in[i]);\n    resample_sinc(in, in_sz, out, out_sz);\n    for (i = 0; i &lt; out_sz; i++)\n            printf(\"out[%.6f] = %.6f\\n\", (double) i * (in_sz-1)/(out_sz-1), out[i]);\n\n    return EXIT_SUCCESS;\n} /* main */\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4394525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d11da361b077ac52fbb8c8b3c870785?s=128&d=identicon&r=PG&f=1", "display_name": "cdevelop", "link": "https://stackoverflow.com/users/4394525/cdevelop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3167, "favorite_count": 3, "accepted_answer_id": 31839612, "answer_count": 4, "score": 3, "last_activity_date": 1438958007, "creation_date": 1438788208, "question_id": 31836598, "link": "https://stackoverflow.com/questions/31836598/subsampling-an-array-of-numbers", "title": "Subsampling an array of numbers", "body": "<p>I have a series of 100 integer values which I need to reduce/subsample to 77 values for the purpose of fitting into a predefined space on screen. This gives a fraction of 77/100 values-per-pixel - not very neat.</p>\n\n<p>Assuming the 77 is fixed and cannot be changed, what are some typical techniques for subsampling 100 numbers down to 77. I get a sense that it will be a jagged mapping, by which I mean the first new value is the average of [0, 1] then the next value is [3], then average [4, 5] etc. But how do I approach getting the pattern for this mapping?</p>\n\n<p>I am working in C++, although I'm more interested in the technique than implementation.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "visual-c++", "precompiled-headers", "stdafx.h"], "answers": [{"comments": [{"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1438788715, "post_id": 31836511, "comment_id": 51595317, "body": "My confusion is that clearly I don&#39;t <code>#include &quot;stdafx.h&quot;</code> for the library file&#39;s header in the application. But Library headers that get included in the application <i>can</i> see those vars."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1438789053, "post_id": 31836511, "comment_id": 51595545, "body": "Does &quot;can see those vars&quot; mean it compiles and links correctly if you use them in the application? Or is it just that intellisense is seeing them?"}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 3, "last_activity_date": 1438787963, "creation_date": 1438787963, "answer_id": 31836511, "question_id": 31836434, "link": "https://stackoverflow.com/questions/31836434/are-variables-and-functions-defined-in-a-library-projects-pre-compiled-header-a/31836511#31836511", "title": "Are variables and functions defined in a library project&#39;s Pre-compiled header available to applications using the library?", "body": "<p>Yes and no, they need to be exported just as anything else. Precompiled headers are there to speed up compilation, they do not affect the produced executable/library.</p>\n"}, {"tags": [], "owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": false, "score": 1, "last_activity_date": 1438788737, "creation_date": 1438788737, "answer_id": 31836794, "question_id": 31836434, "link": "https://stackoverflow.com/questions/31836434/are-variables-and-functions-defined-in-a-library-projects-pre-compiled-header-a/31836794#31836794", "title": "Are variables and functions defined in a library project&#39;s Pre-compiled header available to applications using the library?", "body": "<p>No, it is an implementation detail for the library project only.  And in general it does not contain declarations that are exposed by the library, they are exposed by a .h file that was meant to be #included in your own project's source files.  The library's stdafx.h <em>may</em> include that .h file as well, it isn't very common. </p>\n\n<p>You use your own precompiled header, if you want to #include the library's .h file(s) then that's up to you. Useful only if you use the library declarations in multiple source files of your own project and the library is stable.</p>\n"}], "owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438788737, "creation_date": 1438787718, "question_id": 31836434, "link": "https://stackoverflow.com/questions/31836434/are-variables-and-functions-defined-in-a-library-projects-pre-compiled-header-a", "title": "Are variables and functions defined in a library project&#39;s Pre-compiled header available to applications using the library?", "body": "<p>If a library project defines some variables and utility functions in its stdafx.h/cpp, will these be visible throughout application projects built on top of the library? </p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 6, "creation_date": 1438787537, "post_id": 31836359, "comment_id": 51594484, "body": "Declare your classes and your functions before using them! (in this case, before the <code>main</code>)"}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1438787673, "post_id": 31836359, "comment_id": 51594597, "body": "Quickest fix would be to move the definitions for your class and function on top of main()"}], "answers": [{"tags": [], "owner": {"reputation": 2649, "user_id": 2531910, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dfbd56a0740e577f28bbc048cd77df2?s=128&d=identicon&r=PG", "display_name": "alifirat", "link": "https://stackoverflow.com/users/2531910/alifirat"}, "is_accepted": false, "score": 2, "last_activity_date": 1438787718, "creation_date": 1438787718, "answer_id": 31836435, "question_id": 31836359, "link": "https://stackoverflow.com/questions/31836359/i-bulit-a-small-oop-program-and-i-dont-know-why-it-wont-compile/31836435#31836435", "title": "I bulit a small oop program and I don&#39;t know why it won&#39;t compile", "body": "<p>You are using a class which are defined after the main. Define your class before the main and it's solve the error at the compilation. </p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n using namespace std;\n\n\nclass Oseba{\npublic:\n    string Ime;\n\n    Oseba(){}\n\n    Oseba(string _Ime){\n        Ime=_Ime;\n    }\n\n    void printing(){\n        cout &lt;&lt; Ime &lt;&lt; endl;\n    }\n};\n\nint main(){\n    Oseba akk(\"kreso\");\n    akk.printing();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 5053120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4ae650c46a5a33c36009346245c038c?s=128&d=identicon&r=PG&f=1", "display_name": "SANTOSH PARIDA", "link": "https://stackoverflow.com/users/5053120/santosh-parida"}, "is_accepted": false, "score": 2, "last_activity_date": 1438787850, "creation_date": 1438787850, "answer_id": 31836472, "question_id": 31836359, "link": "https://stackoverflow.com/questions/31836359/i-bulit-a-small-oop-program-and-i-dont-know-why-it-wont-compile/31836472#31836472", "title": "I bulit a small oop program and I don&#39;t know why it won&#39;t compile", "body": "<p>You find those errors because the functions have been declared before your <code>main</code> function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nclass Oseba{\npublic:\n    string Ime;\n\n    Oseba(){}\n\n    Oseba(string _Ime){\n        Ime=_Ime;\n    }\n\n    void printing(){\n        cout &lt;&lt; Ime &lt;&lt; endl;\n    }\n};\n\nint main(){\n    Oseba akk(\"kreso\");\n    akk.printing();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4997493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb1ad91b58b68205746333571bbe21e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike McKean", "link": "https://stackoverflow.com/users/4997493/mike-mckean"}, "is_accepted": false, "score": 0, "last_activity_date": 1438794037, "creation_date": 1438794037, "answer_id": 31838629, "question_id": 31836359, "link": "https://stackoverflow.com/questions/31836359/i-bulit-a-small-oop-program-and-i-dont-know-why-it-wont-compile/31838629#31838629", "title": "I bulit a small oop program and I don&#39;t know why it won&#39;t compile", "body": "<p>The compiler doesn't know what <code>Oseba akk(\"kreso\");</code> is. The reason for this is because the source file is interpreted top to bottom.</p>\n\n<p>You need to either declare the class before <code>int main()</code>, or put the class into another file and then include that file.</p>\n"}], "owner": {"reputation": 25, "user_id": 4533841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1003130479701425/picture?type=large", "display_name": "Kreso", "link": "https://stackoverflow.com/users/4533841/kreso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1438794037, "creation_date": 1438787492, "last_edit_date": 1438788995, "question_id": 31836359, "link": "https://stackoverflow.com/questions/31836359/i-bulit-a-small-oop-program-and-i-dont-know-why-it-wont-compile", "title": "I bulit a small oop program and I don&#39;t know why it won&#39;t compile", "body": "<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(){\n  Oseba akk(\"kreso\");\n  akk.printing();\n}\n\nclass Oseba{\npublic:\n  string Ime;\n\n  Oseba(){}\n\n  Oseba(string _Ime){\n    Ime=_Ime;\n  }\n\n  void printing(){\n    cout &lt;&lt; Ime &lt;&lt; endl;\n  }\n};\n</code></pre>\n\n<p>These are the errors:</p>\n\n<pre>\nerror C2065: 'Oseba' : undeclared identifier\nerror C2146: syntax error : missing ';' before identifier 'akk'\nerror C3861: 'akk': identifier not found\nerror C2065: 'akk' : undeclared identifier\nerror C2228: left of '.Izpis' must have class/struct/union\n</pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 4928207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122e2222eb8cace8c9d2e67ea65d8c47?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Jansen", "link": "https://stackoverflow.com/users/4928207/mark-jansen"}, "is_accepted": false, "score": -1, "last_activity_date": 1438788927, "creation_date": 1438788927, "answer_id": 31836863, "question_id": 31836333, "link": "https://stackoverflow.com/questions/31836333/reading-alpha-channels-from-each-pixel-in-qt/31836863#31836863", "title": "Reading Alpha Channels from each Pixel in Qt", "body": "<p>Assuming an initialized <code>QImage mImage</code></p>\n\n<pre><code>for( int y = 0; y &lt; height; y++ ) {\n    QRgb *lineOut = (QRgb *)mImage.scanLine(y);\n    for( int x = 0; x &lt; width; x++ ) {\n        int r = 255, g = 0, b = 255;\n        lineOut[x] = qRgb(r, g, b);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 2394602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Id1e2.png?s=128&g=1", "display_name": "One Man Monkey Squad", "link": "https://stackoverflow.com/users/2394602/one-man-monkey-squad"}, "is_accepted": true, "score": 1, "last_activity_date": 1439906446, "last_edit_date": 1439906446, "creation_date": 1438789122, "answer_id": 31836938, "question_id": 31836333, "link": "https://stackoverflow.com/questions/31836333/reading-alpha-channels-from-each-pixel-in-qt/31836938#31836938", "title": "Reading Alpha Channels from each Pixel in Qt", "body": "<p>In Qt5 there is a <strong><code>QImage::pixel(int x, int y)</code></strong> method. You can access the RGBA values of the return value via the <code>qBlue</code>, <code>qRed</code>, <code>qGreen</code> and <code>qAlpha</code> functions.</p>\n"}, {"tags": [], "owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1438791768, "last_edit_date": 1438791768, "creation_date": 1438791395, "answer_id": 31837766, "question_id": 31836333, "link": "https://stackoverflow.com/questions/31836333/reading-alpha-channels-from-each-pixel-in-qt/31837766#31837766", "title": "Reading Alpha Channels from each Pixel in Qt", "body": "<p>You can convert to format RGBA <a href=\"http://doc.qt.io/qt-4.8/qimage.html#convertToFormat\" rel=\"nofollow\">using <code>convertToFormat</code></a> as below:</p>\n\n<pre><code>    QImage myImage( \":/Images/images.jpg\" );\n    myImage = myImage.convertToFormat(QImage::Format_RGBA8888);\n</code></pre>\n\n<p>Now you can get R,G,B,A values in sequence with proper data alignment as below:</p>\n\n<pre><code>    uchar *bits = myImage.bits();    \n    for (int i = 0; i &lt; (myImage.width() * myImage.height() * 4); i++)\n    {\n        qDebug() &lt;&lt; (int) bits[i];    // Here printing the RGBA values in sequence\n    }\n</code></pre>\n\n<p>This will give you R,G,B,A of every pixel after every 4th cycle.</p>\n"}], "owner": {"reputation": 187, "user_id": 4988063, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5cef2625a5a28ded0e304d01f312000?s=128&d=identicon&r=PG&f=1", "display_name": "SDE", "link": "https://stackoverflow.com/users/4988063/sde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 31836938, "answer_count": 3, "score": -1, "last_activity_date": 1439906446, "creation_date": 1438787424, "question_id": 31836333, "link": "https://stackoverflow.com/questions/31836333/reading-alpha-channels-from-each-pixel-in-qt", "title": "Reading Alpha Channels from each Pixel in Qt", "body": "<p>how can I read from an image the RGBA values in QT?</p>\n\n<p>I hope that somebody can help me.</p>\n"}, {"tags": ["c++", "visual-c++", "stdafx.h"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1438787702, "post_id": 31836245, "comment_id": 51594622, "body": "Can you not use <code>extern</code> to share the variable?  <a href=\"http://stackoverflow.com/questions/10422034/when-to-use-extern-in-c\" title=\"when to use extern in c\">stackoverflow.com/questions/10422034/when-to-use-extern-in-c</a>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1438787717, "post_id": 31836245, "comment_id": 51594636, "body": "it&#39;s <code>static</code> so you can&#39;t access it fro outside of the translation unit it&#39;s defined in."}, {"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1438787857, "post_id": 31836245, "comment_id": 51594734, "body": "Sorry, it is defined as extern, question updated. I know it gets shared within the project, but I want to pre-declare the var in the library - so the symbol can be used - without actually defining it."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1438791693, "post_id": 31836245, "comment_id": 51597258, "body": "May I suggest that having a library reach into the app for a global variable is very bad coupling? If the app needs to set the value, you should have a &quot;set&quot; function in the library that is called by the app and store the value in the library itself."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 4, "last_activity_date": 1438789153, "creation_date": 1438789153, "answer_id": 31836949, "question_id": 31836245, "link": "https://stackoverflow.com/questions/31836245/reference-a-variable-in-a-library-thats-declared-in-a-dependent-application/31836949#31836949", "title": "Reference a variable in a library that&#39;s declared in a dependent application", "body": "<p>The rules are : an <code>extern</code> variable can be <em>declared</em> (no <code>=...</code>) in as many compilation units as you need (and even more than once in any of them). It shall be <em>defined</em> (with <code>=...</code>) exactly once in the whole program.</p>\n\n<p>So if you want to write a library that uses this variable, you can safely <em>declare</em> it in any compilation unit of the library that needs it : you will be able to compile the library objects and generate the library itself with no error. There will be an unresolved symbol in the library, that will be resolved at link time when building the excutable at at load time if it is a shared library.</p>\n\n<p>You can either write <code>extern const char *LOGFILE;</code> (NO <code>= ...</code> part) in all the sources, or put in in a .h and include it.</p>\n"}], "owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 31836949, "answer_count": 1, "score": 0, "last_activity_date": 1438789153, "creation_date": 1438787189, "last_edit_date": 1438787784, "question_id": 31836245, "link": "https://stackoverflow.com/questions/31836245/reference-a-variable-in-a-library-thats-declared-in-a-dependent-application", "title": "Reference a variable in a library that&#39;s declared in a dependent application", "body": "<p>I can't remember what the rules are here, in my application project I currently declare a global variable in stdafx.h/cpp:</p>\n\n<pre><code>extern const char *LOGFILE = \"test.log\"\n</code></pre>\n\n<p>I've found that a library needs to know the value of this variable. Can I forward declare it in the library since it's not linked until the application is built, without getting errors about multiply-defined symbols?</p>\n"}, {"tags": ["c++", "qt", "qt4"], "comments": [{"owner": {"reputation": 16779, "user_id": 3902472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9802d0f02fd24032c2ede03427627e07?s=128&d=identicon&r=PG&f=1", "display_name": "Kosovan", "link": "https://stackoverflow.com/users/3902472/kosovan"}, "edited": false, "score": 0, "creation_date": 1438791331, "post_id": 31836199, "comment_id": 51597054, "body": "You need only first way with old syntax, just add &quot;1&quot; to every slot&#39;s name."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 16779, "user_id": 3902472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9802d0f02fd24032c2ede03427627e07?s=128&d=identicon&r=PG&f=1", "display_name": "Kosovan", "link": "https://stackoverflow.com/users/3902472/kosovan"}, "edited": false, "score": 0, "creation_date": 1438792908, "post_id": 31836199, "comment_id": 51598057, "body": "@Chernobyl Actually its easier to just do <code>connect(aQObject, SLOT(aSlotOfThatQObject));</code>"}, {"owner": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "edited": false, "score": 0, "creation_date": 1438793984, "post_id": 31836199, "comment_id": 51598741, "body": "I have Qt5, but I think I found a solution. However, it assumes your slots have the signature <code>void mySlot();</code>; is it an issue?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "edited": false, "score": 0, "creation_date": 1438795992, "post_id": 31836199, "comment_id": 51599827, "body": "@Armaghast You can assume that the signatures are the same, or compatible."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438816263, "post_id": 31844156, "comment_id": 51610066, "body": "Your first solution is more complicated than my string based method, but it demonstrates how to obtain the <code>QMetaMethod</code> representation of the slot, which is better than string for <code>QMetaMethod</code> strongly typed. Also the string based method can not detect error until connection happens, <code>QMetaMethod</code> method can detect errors when the slot is looked up."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438816400, "post_id": 31844156, "comment_id": 51610109, "body": "I&#39;m not very familiar with template. Can you explain more on your <code>PointerToMemberHelper</code>?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438817067, "post_id": 31844156, "comment_id": 51610283, "body": "I think I found the answer here <a href=\"http://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11\" title=\"what is the difference between typedef and using in c11\">stackoverflow.com/questions/10747810/&hellip;</a> . <code>using</code> in this case is similar to <code>typedef</code>."}, {"owner": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438850861, "post_id": 31844156, "comment_id": 51622176, "body": "Indeed, making the <code>QMetaMethod</code> earlier is safer, although the string-based one allows you to store slots without a <code>MyClass</code> instance, and allow some more powerful (and dangerous) bindings, like constructing the slot name <code>dynamicConnection( [...], QString(&quot;slot%1()&quot;).arg(an_int))</code>. I&#39;ll edit my answer to reflect that."}], "tags": [], "owner": {"reputation": 743, "user_id": 3221328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bcc220a6bf5aa19788c3c8061600f8?s=128&d=identicon&r=PG&f=1", "display_name": "Armaghast", "link": "https://stackoverflow.com/users/3221328/armaghast"}, "is_accepted": true, "score": 2, "last_activity_date": 1438851209, "last_edit_date": 1438851209, "creation_date": 1438815317, "answer_id": 31844156, "question_id": 31836199, "link": "https://stackoverflow.com/questions/31836199/how-to-store-qt-signal-slot-names-to-a-data-structure/31844156#31844156", "title": "How to store Qt signal/slot names to a data structure?", "body": "<p>2 solutions, I'll be looking for a 3rd.</p>\n\n<p>Simple class used for the examples:</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n\nclass MyClass : public QObject\n{\n    Q_OBJECT\npublic:\n    MyClass() : QObject() { }\n\n    void fireSignals()\n    {\n        qDebug() &lt;&lt; \"signal1 :\" ;\n        emit signal1();\n        qDebug() &lt;&lt; \"signal2 :\" ;\n        emit signal2();\n        qDebug() &lt;&lt; \"signal3 :\" ;\n        emit signal3(3);\n    }\n\npublic slots:\n    void slot1() { qDebug() &lt;&lt; \"slot1\"; }\n    void slot2() { qDebug() &lt;&lt; \"slot2\"; }\n    void slot3() { qDebug() &lt;&lt; \"slot3\"; }\n    void slot4(int i) { qDebug() &lt;&lt; \"slot4\" &lt;&lt; i; }\nsignals:\n    void signal1();\n    void signal2();\n    void signal3(int);\n};\n</code></pre>\n\n<p><strong>Qt4/C++98:</strong></p>\n\n<p>I do not have Qt4, please tell me if this solution works.</p>\n\n<p>Tested with Qt 5.5, mingw 4.9.2, -std=c++98</p>\n\n<p>It relies on transforming a signal or slot name into its index, and then into the associated QMetaMethod.</p>\n\n<p>Note: it is possible to store <code>QMetaMethod</code> objects instead. This method is safer, as the check for the slot existence happens earlier on, but having a <code>MyClass</code>instance is needed before the creation of the <code>QMap</code>, while storing slot names is more flexible.</p>\n\n<pre><code>// Get the index of a method, using obj's metaobject\nQMetaMethod fetchIndexOfMethod(QObject* obj, const char* name)\n{\n    const QMetaObject* meta_object = obj-&gt;metaObject();\n    QByteArray normalized_name = QMetaObject::normalizedSignature(name);\n    int index = meta_object-&gt;indexOfMethod(normalized_name.constData());\n    Q_ASSERT(index != -1);\n    return meta_object-&gt;method(index);\n}\n\n// A QObject::connect wrapper\nQMetaObject::Connection dynamicConnection(QObject* source,\n                                          const char* signal_name,\n                                          QObject* dest,\n                                          const char* slot_name)\n{\n   return QObject::connect(source, fetchIndexOfMethod(source, signal_name),\n                           dest, fetchIndexOfMethod(dest, slot_name));\n}\n\nvoid first_way()\n{\n    qDebug() &lt;&lt; \"\\nFirst way:\";\n    QMap&lt;QString, const char*&gt; my_slots;\n    my_slots[\"id_slot1\"] = \"slot1()\";\n    my_slots[\"id_slot2\"] = \"slot2()\";\n    my_slots[\"id_slot3\"] = \"slot3()\";\n    my_slots[\"id_slot4\"] = \"slot4(int)\"; // slots with different signatures in the same container\n\n    MyClass object;\n    dynamicConnection(&amp;object, \"signal1()\", &amp;object, my_slots.value(\"id_slot1\"));\n    dynamicConnection(&amp;object, \"signal1()\", &amp;object, my_slots.value(\"id_slot2\"));\n    dynamicConnection(&amp;object, \"signal2()\", &amp;object, my_slots.value(\"id_slot3\"));\n    dynamicConnection(&amp;object, \"signal3(int)\", &amp;object, my_slots.value(\"id_slot4\"));\n\n    object.fireSignals();\n}\n</code></pre>\n\n<p><strong>Qt5/C++14:</strong></p>\n\n<p>Tested with Qt 5.5, mingw 4.9.2, -std=c++14</p>\n\n<p>This one is using pointer to members function.\nIt is type-safe, thus you can't have slots with different signatures in the same container.</p>\n\n<pre><code>template &lt;typename T, typename R, typename ...Args&gt;\nstruct PointerToMemberHelper\n{\n    using type = R (T::*)(Args...);\n};\n\nvoid second_way()\n{\n    qDebug() &lt;&lt; \"\\nSecond way:\";\n\n    using MPTR_void = PointerToMemberHelper&lt;MyClass, void&gt;::type;\n    using MPTR_int = PointerToMemberHelper&lt;MyClass, void, int&gt;::type;\n\n    QMap&lt;QString, MPTR_void&gt; my_slots({{\"id_slot1\", MyClass::slot1},\n                                       {\"id_slot2\", MyClass::slot2},\n                                       {\"id_slot3\", MyClass::slot3}});\n\n    MyClass object;\n    QObject::connect(&amp;object, MyClass::signal1, &amp;object, my_slots.value(\"id_slot1\"));\n    QObject::connect(&amp;object, MyClass::signal1, &amp;object, my_slots.value(\"id_slot2\"));\n    QObject::connect(&amp;object, MyClass::signal2, &amp;object, my_slots.value(\"id_slot3\"));\n\n    MPTR_int my_int_slot = MyClass::slot4; // or auto my_int_slot = ...\n    QObject::connect(&amp;object, MyClass::signal3, &amp;object, my_int_slot);\n\n    object.fireSignals();\n}\n</code></pre>\n\n<p>Currently trying to get a 3rd solution to work, based on lambdas and <code>QMetaObject::invokeMethod</code> - but it won't do more than the 2nd solution.</p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1971, "favorite_count": 1, "accepted_answer_id": 31844156, "answer_count": 1, "score": 0, "last_activity_date": 1438851209, "creation_date": 1438787074, "last_edit_date": 1495540705, "question_id": 31836199, "link": "https://stackoverflow.com/questions/31836199/how-to-store-qt-signal-slot-names-to-a-data-structure", "title": "How to store Qt signal/slot names to a data structure?", "body": "<p>I want to store the name of a signal or slot to a container so that I can retrieve it and make connections to it.</p>\n\n<p>One way to do it is to <a href=\"https://stackoverflow.com/questions/5880763/qt-signal-slot-macro-declaration\">hack the SIGNAL/SLOT macro</a> and store the signal/slot's name as strings, and then use the the <a href=\"http://doc.qt.io/qt-4.8/qobject.html#connect\" rel=\"nofollow noreferrer\">old connect syntax</a> to make the connection like this</p>\n\n<pre><code>void connect(QObject *dst, QString slot)\n{\n    connect(this, SIGNAL(foo(void)), dst, slot.toLocal8Bit().data());\n    // void foo(void) is a member signal of \"this\" and is known \n    // at compile time\n    // but \"dst\" and \"slot\" are not known until runtime.\n}\n</code></pre>\n\n<p>However this seems a little too hacky to me.</p>\n\n<p>I know there is <a href=\"http://doc.qt.io/qt-4.8/qobject.html#connect-2\" rel=\"nofollow noreferrer\">another syntax for connect</a> and there is also <a href=\"http://doc.qt.io/qt-4.8/qmetamethod.html\" rel=\"nofollow noreferrer\">an object type for signal/slots</a>, which implies a different and (potentially) less hacky solution. (note that this is not the <a href=\"http://doc.qt.io/qt-5/qobject.html#connect-4\" rel=\"nofollow noreferrer\">new signal/slot syntax in Qt5</a>)</p>\n\n<p>But the problem is, <code>QMetaMethod</code> does not have a documented constructor, not does it seems to be copy-constructable.</p>\n\n<p>A further question, how do you make connections when the names of signal/slots are dynamic?</p>\n\n<p>For my coding environment is Qt4 and gcc 4.3.3 with <code>gnu++98</code>, so solutions that require Qt5 and C++11 although are welcome, are less useful to me.</p>\n"}, {"tags": ["c++", "linker-errors", "eclipse-cdt"], "comments": [{"owner": {"reputation": 1536, "user_id": 283561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91bcdcd7ac6867149e0da7fee38f4050?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/283561/simon"}, "edited": false, "score": 1, "creation_date": 1438786734, "post_id": 31836021, "comment_id": 51593928, "body": "Template functions must be header-only"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438786865, "post_id": 31836021, "comment_id": 51594029, "body": "Come on, this is at least the fourth question about templates in cpp files today..."}, {"owner": {"reputation": 5791, "user_id": 1838726, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb374970183328c9e75f15d7d793f9ed?s=128&d=identicon&r=PG", "display_name": "Daniel S.", "link": "https://stackoverflow.com/users/1838726/daniel-s"}, "edited": false, "score": 0, "creation_date": 1438786884, "post_id": 31836021, "comment_id": 51594044, "body": "uhhh...i&#39;ve wasted hours. THANKS!"}, {"owner": {"reputation": 5791, "user_id": 1838726, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb374970183328c9e75f15d7d793f9ed?s=128&d=identicon&r=PG", "display_name": "Daniel S.", "link": "https://stackoverflow.com/users/1838726/daniel-s"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438787110, "post_id": 31836021, "comment_id": 51594197, "body": "@Quentin sure yes, the solution is super simple, but if you don&#39;t know its name, then it&#39;s hidden in google behind all the questions where people lack to link with the object file or where they are missing const, etc. in the function definition."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438787442, "post_id": 31836021, "comment_id": 51594404, "body": "@DanielS. true, and this is why duplicate questions are not deleted but kept as &quot;search landing pads&quot;. But what surprises me is that a comparatively big number of people seem to use learning resources that half-teach what they&#39;re about. I mean, how have you come to know how to write a template, but haven&#39;t been told that it <i>must</i> be header-only ?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1438787602, "post_id": 31836021, "comment_id": 51594533, "body": "There is <i>no</i> requirement that templates must be implemented in the header. That is simply the most convenient (usually) solution.  (But I guess I&#39;m being pedantic - for beginners it&#39;s simplest to just use the header always)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1438787932, "post_id": 31836021, "comment_id": 51594796, "body": "@AaronMcDaid defined in such a way that the full definition is accessible at the point of instantiation ? Yep, I&#39;ll stick to &quot;header-only&quot; -- those for whom this rule does not fit will seek and find the complete one anyway :p"}, {"owner": {"reputation": 5791, "user_id": 1838726, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb374970183328c9e75f15d7d793f9ed?s=128&d=identicon&r=PG", "display_name": "Daniel S.", "link": "https://stackoverflow.com/users/1838726/daniel-s"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438788145, "post_id": 31836021, "comment_id": 51594948, "body": "@Quentin true. I&#39;ve learned it by looking at code and not reading about theory. It didn&#39;t reach my awareness that the template implementations I was looking at were only in headers."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1438788553, "post_id": 31836021, "comment_id": 51595215, "body": "It is possible for a template implementation to be available in only one translation unit and for another translation unit to call the implementation in the former translation unit. This works if the former translation unit explicitly instantiates each of the required templates. This also requires that the developer know in advance the full set of allowed template parameters - but in some contexts (not the context of this question, probably) this &#39;limitation&#39; is a feature not a bug"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1438788592, "post_id": 31836021, "comment_id": 51595238, "body": "@DanielS. Oh, alright ! A word of advice then : C++ has its good share of constructs that only <i>appear</i> to work, or have weird reasons not to, so always cross-check what you learn. Best of luck with this wonderful language :)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1438788687, "post_id": 31836021, "comment_id": 51595296, "body": "@AaronMcDaid I know, but this feature just moves the point of instantiation around, and full access to the definition is still needed there."}], "owner": {"reputation": 5791, "user_id": 1838726, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb374970183328c9e75f15d7d793f9ed?s=128&d=identicon&r=PG", "display_name": "Daniel S.", "link": "https://stackoverflow.com/users/1838726/daniel-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1438786860, "answer_count": 0, "score": 0, "last_activity_date": 1438786628, "creation_date": 1438786628, "question_id": 31836021, "link": "https://stackoverflow.com/questions/31836021/linker-error-for-no-obvious-reason-undefined-reference", "closed_reason": "Duplicate", "title": "linker error for no obvious reason: undefined reference", "body": "<p>I try to write a simple function <code>my_to_string()</code> in C++ that takes two iterators, <code>first</code> and <code>last</code>. I want the function to have a typical behavior: It shall iterate over <code>[first,last)</code> and do something with the objects' data with only read access to them. I have the declaration for this function in one file <code>stringformat.h</code>, its definition in the <code>stringformat.cpp</code>, and I try to call it from another <code>.cpp</code> file.</p>\n\n<p>All files compile fine.</p>\n\n<p>I use Eclipse CDT to build my project.</p>\n\n<p>Now my problem is that I get the following linker error (straight copy-paste from Eclipse console, only home dir renamed for privacy reasons):</p>\n\n<pre><code>Invoking: Cross G++ Linker\ng++  -o \"agos2\"  ./agos/pairingfunctions/CantorPairingFunction.o ./agos/pairingfunctions/CantorTupleIncrementer.o ./agos/pairingfunctions/PairingFunction.o  ./agos/machine/Instruction.o ./agos/machine/Machine.o ./agos/machine/MachineFactory.o ./agos/machine/Operation.o ./agos/machine/Program.o  ./agos/goedelnumbering/multiplier/InstructionGoedel.o ./agos/goedelnumbering/multiplier/InstructionIncrementer.o ./agos/goedelnumbering/multiplier/MachineIncrementer.o ./agos/goedelnumbering/multiplier/OperationIncrementer.o ./agos/goedelnumbering/multiplier/ProgramIncrementer.o  ./agos/BigIntegerLibrary/BigInteger.o ./agos/BigIntegerLibrary/BigIntegerAlgorithms.o ./agos/BigIntegerLibrary/BigIntegerUtils.o ./agos/BigIntegerLibrary/BigUnsigned.o ./agos/BigIntegerLibrary/BigUnsignedInABase.o  ./agos/Agos.o ./agos/Int64ToInt64Function.o ./agos/stringformat.o  ./agos.o   \n./agos/machine/Machine.o: In function `agos::Machine::toStringWithState() const':\n/home/username/workspace-cpp/agos2/Debug/../agos/machine/Machine.cpp:280: undefined reference to `std::string agos::my_to_string&lt;__gnu_cxx::__normal_iterator&lt;long const*, std::vector&lt;long, std::allocator&lt;long&gt; &gt; &gt; &gt;(__gnu_cxx::__normal_iterator&lt;long const*, std::vector&lt;long, std::allocator&lt;long&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;long const*, std::vector&lt;long, std::allocator&lt;long&gt; &gt; &gt;)'\ncollect2: error: ld returned 1 exit status\nmake: *** [agos2] Error 1\n</code></pre>\n\n<p>Code here:</p>\n\n<p>stringformat.h</p>\n\n<pre><code>//...\ntemplate&lt;class InputIterator&gt;\nstd::string my_to_string(InputIterator first, InputIterator last);\n//...\n</code></pre>\n\n<p>stringformat.cpp</p>\n\n<pre><code>//...\ntemplate&lt;class InputIterator&gt;\nstring my_to_string(InputIterator first, InputIterator last) {\n    ostringstream oss;\n\n    if (last - first &gt; 0) {\n        for (; first + 1 != last; ++first) {\n            oss &lt;&lt; *first &lt;&lt; ' ';\n        }\n\n        oss &lt;&lt; *first;\n    }\n\n    return oss.str();\n}\n//...\n</code></pre>\n\n<p>code using the function:</p>\n\n<pre><code>#include \"../stringformat.h\"\n//...\n\nvoid my_use_case() {\n    vector&lt;int64_t&gt; const&amp; v = ...;\n    string s;\n    s = my_to_string(v.begin(), v.end()); // Linker complains here; this is line 280\n    //...\n}\n</code></pre>\n\n<p>In the linker command, the stringformat.o is included, so I think the function should get found. I've also positively checked that a stringformat.o file exists in my project folder.</p>\n\n<p>I've also tried copy-pasting the function definition right before <code>my_use_case()</code>. Then it compiles fine. No errors whatsoever. But this is not a nice solution.</p>\n"}, {"tags": ["c++", "opengl", "freeglut"], "comments": [{"owner": {"reputation": 1536, "user_id": 283561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91bcdcd7ac6867149e0da7fee38f4050?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/283561/simon"}, "edited": false, "score": 0, "creation_date": 1438786115, "post_id": 31835790, "comment_id": 51593510, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3933027/how-to-get-the-gl-library-headers\">How to get the GL library/headers?</a>"}, {"owner": {"reputation": 667, "user_id": 3327862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6ca5d957c9da07167d31ad9e22c06ca7?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasS", "link": "https://stackoverflow.com/users/3327862/thomass"}, "reply_to_user": {"reputation": 1536, "user_id": 283561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91bcdcd7ac6867149e0da7fee38f4050?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/283561/simon"}, "edited": false, "score": 0, "creation_date": 1438788260, "post_id": 31835790, "comment_id": 51595027, "body": "The answer in that question only says I should download the Windows SDK (which I have). There is nothing on the &#39;getting started&#39; guides I have read that talk about getting the gl.h separately somewhere. Downvoting a question because it might have been answered somewhere else, in a question that does not show up if you google my error is a bit rash imo. It&#39;s not like I didn&#39;t search before i asked..."}, {"owner": {"reputation": 1536, "user_id": 283561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91bcdcd7ac6867149e0da7fee38f4050?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/283561/simon"}, "edited": false, "score": 0, "creation_date": 1438842101, "post_id": 31835790, "comment_id": 51617094, "body": "Didn&#39;t downvote you, just pointed to an answer, which could answer your question."}], "answers": [{"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1438803132, "creation_date": 1438803132, "answer_id": 31841290, "question_id": 31835790, "link": "https://stackoverflow.com/questions/31835790/fatal-error-gl-gl-h-no-such-file-or-directory/31841290#31841290", "title": "fatal error: GL/gl.h: no such file or directory", "body": "<p>Normally there's no need to download <code>GL/gl.h</code>; OpenGL is part of the Windows ABI contract, which means that every compiler toolchain that targets the Windows API must provision for compiling the OpenGL version that's specified for the Windows ABI. That would be OpenGL-1.1</p>\n\n<p>If your MinGW installation lacks the <code>GL/gl.h</code> header, something is broken in your particular installation. Note that in some Linux distributions you may have to install the development support files separately. But with MinGW the OpenGL headers should be part of the standard installation.</p>\n"}], "owner": {"reputation": 667, "user_id": 3327862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6ca5d957c9da07167d31ad9e22c06ca7?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasS", "link": "https://stackoverflow.com/users/3327862/thomass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3561, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1438803132, "creation_date": 1438785944, "last_edit_date": 1438798442, "question_id": 31835790, "link": "https://stackoverflow.com/questions/31835790/fatal-error-gl-gl-h-no-such-file-or-directory", "title": "fatal error: GL/gl.h: no such file or directory", "body": "<p>So I am trying to get my first c++ app to run but i keep getting this error. The error originates from the <code>freeglut_std.h</code> file.</p>\n\n<p>I have downloaded the freeglut 3.0.0 MinGW Package and placed the files inside their respective directories in my MinGW installation folder but there is no file called gl.h.\nI have added the libraries to my project properties</p>\n\n<p>I have checked the question that this should be a duplicate of but the solution given there, install Windows SDK, did not fix my problem.</p>\n"}, {"tags": ["c++", "winapi", "visual-studio-2013", "webbrowser-control"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 2369067, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/98ada3ce70e29d3ab0f744d684ae126d?s=128&d=identicon&r=PG", "display_name": "Arpit", "link": "https://stackoverflow.com/users/2369067/arpit"}, "edited": false, "score": 0, "creation_date": 1439189630, "post_id": 31880173, "comment_id": 51739705, "body": "Sorry I didn&#39;t close this question as I already solved it. Yes it was IE7 problem. I did saw this post <a href=\"http://stackoverflow.com/questions/4612255/regarding-ie9-webbrowser-control\" title=\"regarding ie9 webbrowser control\">stackoverflow.com/questions/4612255/&hellip;</a> and when I check the response headers then there was <code>content IE tag</code>, so I thought it must be working on IE11(the version installed on my system) but it was not. And I also changed the registry but did a slight mistake. My app is 32bit and system is 64bit, so I was suppose to change it in WOW6432NODE key, which I did not. Stupid me. Wasted 4 days on this silly problem."}], "tags": [], "owner": {"reputation": 1438, "user_id": 215701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8890c66e237fe6746ea6485357b69882?s=128&d=identicon&r=PG", "display_name": "CoreyStup", "link": "https://stackoverflow.com/users/215701/coreystup"}, "is_accepted": true, "score": 0, "last_activity_date": 1438957666, "creation_date": 1438957666, "answer_id": 31880173, "question_id": 31835721, "link": "https://stackoverflow.com/questions/31835721/unable-to-login-with-webbrowser-control/31880173#31880173", "title": "unable to login with WebBrowser Control", "body": "<p>Could it be that the website doesn't work with IE7?   The browser control is forced into IE7 compatibility <a href=\"http://blogs.msdn.com/b/patricka/archive/2015/01/12/controlling-webbrowser-control-compatibility.aspx\" rel=\"nofollow\">mode by default</a>. </p>\n\n<p>Try accessing the site with regular IE in compatibility mode.  If it fails the same way, you have your answer.</p>\n"}], "owner": {"reputation": 727, "user_id": 2369067, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/98ada3ce70e29d3ab0f744d684ae126d?s=128&d=identicon&r=PG", "display_name": "Arpit", "link": "https://stackoverflow.com/users/2369067/arpit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31880173, "answer_count": 1, "score": 0, "last_activity_date": 1438957666, "creation_date": 1438785769, "question_id": 31835721, "link": "https://stackoverflow.com/questions/31835721/unable-to-login-with-webbrowser-control", "title": "unable to login with WebBrowser Control", "body": "<p>I have developed an Embedded WebBrowser using IE webbrowser control in C++. Now, there is a strange problem. I am not able to login to one particular website. I am able to login the same website using IE or chrome or mozilla. But with Embedded Browser I am not. It seems like it is waiting for the response. But I am able to login to my gmail account with my WebBrowser. With the packet tracer I observed that there was very few request/response generated from Embedded WebBrowser as compared to any other normal browser. I can only see the cgi scripts request being called by my WebBrowser unlike other browser which also issued CSS and JS request.</p>\n\n<p>Anyone have any idea that why this strange behaviour? Am I missing something?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "is_accepted": true, "score": 1, "last_activity_date": 1438789526, "last_edit_date": 1438789526, "creation_date": 1438787314, "answer_id": 31836285, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31836285#31836285", "title": "cmake and 2 libraries", "body": "<p>Essentially the answer depends on the toolchain available. For example the older SJLJ MinGW gcc versions are multi-target and compiling 32-bit with them can be done by adding a command line option <code>-m32</code> - this can easily be done by CMake.</p>\n\n<p>However, in a single target gcc toolchain (which the majority are these days) you can only target one architecture. That means you have to get CMake to use two toolchains, one for each target architecture you're trying to support.</p>\n\n<p>You're best off configuring and building for both 32-bit and 64-bit targets.</p>\n\n<h2>Example</h2>\n\n<p>A quick example if you do want to use a multi-target toolchain with CMake. This example uses the <a href=\"http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.8.2/threads-win32/sjlj/\" rel=\"nofollow\">MinGW SJLJ toolchain</a></p>\n\n<h3>CMakeLists.txt</h3>\n\n<pre><code>cmake_minimum_required( VERSION 2.8 )\n\nproject( mylib )\n\nadd_library( mylib_32 mylib.c mylib.h )\nset_target_properties( mylib_32 PROPERTIES COMPILE_FLAGS \"${CMAKE_C_FLAGS} -m32\" )\nset_target_properties( mylib_32 PROPERTIES LINK_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -m32\" )\n\nadd_executable( test_32 test.c )\ntarget_link_libraries( test_32 mylib_32 )\nset_target_properties( test_32 PROPERTIES COMPILE_FLAGS \"${CMAKE_C_FLAGS} -m32\" )\nset_target_properties( test_32 PROPERTIES LINK_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -m32\" )\n\nadd_library( mylib_64 mylib.c mylib.h )\nadd_executable( test_64 test.c )\ntarget_link_libraries( test_64 mylib_64 )\n</code></pre>\n\n<h3>mylib.c</h3>\n\n<pre><code>int PointerSize( void )\n{\n    return sizeof( void* );\n}\n</code></pre>\n\n<h3>mylib.h</h3>\n\n<pre><code>#ifndef MYLIB_H\n#define MYLIB_H\n\nextern int PointerSize( void );\n\n#endif\n</code></pre>\n\n<h3>test.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"mylib.h\"\n\nint main( int argc, char* argv[] )\n{\n    printf( \"Pointer Size: %d\\n\", PointerSize() );\n    return 0;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<p>Running the two resulting programs gives a 32-bit and 64-bit result for the library function <code>PointerSize()</code></p>\n\n<pre><code>C:\\&gt;test_32.exe\nPointer Size: 4\n\nC:\\&gt;test_64.exe\nPointer Size: 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1438790277, "creation_date": 1438790277, "answer_id": 31837377, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31837377#31837377", "title": "cmake and 2 libraries", "body": "<p>My simple answer is <strong>NO</strong>. 64 and 32-bit builds should be considered separate platforms; nothing about the generated artifacts are compatible. (This is not a commentary on cmake but rather how the operating systems, at least linux and windows, are implemented.) From a single cmake build, you cannot build for multiple platforms. There are generators that support multiple configurations (i.e., Debug and Release), but none that support multiple platforms.</p>\n\n<p>With that being said, using out-of-source cmake builds you can generate builds for multiple platforms using something like:</p>\n\n<pre><code>mkdir build-x64\nmkdir build-x86\n\ncd build-x64\ncmake -G\"Visual Studio 10 2010 Win64\" ..\ncmake --build .\n\ncd ../build-x86\ncmake -G\"Visual Studio 10 2010\" ..\ncmake --build .\n</code></pre>\n\n<p>This may not be quite as simple as you were hoping, but I do not think it is that bad. It is certainly a way I have been able to use cmake and support both 32-bit and 64-bit builds.</p>\n"}, {"comments": [{"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 0, "creation_date": 1438898511, "post_id": 31851519, "comment_id": 51652296, "body": "Yes, Brian&#39;s example is a good one, but I think goes against what I have seen to be conventional cmake practice. I am, however, glad it works for you."}], "tags": [], "owner": {"reputation": 41, "user_id": 5061860, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/163d7ea7128615d773d962d551e487d1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5061860/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438852242, "creation_date": 1438852242, "answer_id": 31851519, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31851519#31851519", "title": "cmake and 2 libraries", "body": "<p>thank you for your attention.\nAs Brian said, it depends on the toolchain. His example is a good one! I had the same idea and it seems to work.\nI used add_library() and for each library I defined a target properties. Implementing it in this way, my cmake + make generates my library in 32 and 64 bits and I do not need to run to times the cmake + make. \nIn the context of my project I need to create only one executable file in 32 bits but some libraries are required in 64 bit for other usage (common libraries between projects:) ).</p>\n\n<p>Anton</p>\n"}], "owner": {"reputation": 41, "user_id": 5061860, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/163d7ea7128615d773d962d551e487d1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5061860/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 31836285, "answer_count": 3, "score": 1, "last_activity_date": 1438852242, "creation_date": 1438785624, "last_edit_date": 1438785687, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries", "title": "cmake and 2 libraries", "body": "<p>I have a library in my project that I would like to compile once in 32 bits and than on 64 bits (at the same time, e.g. at the end of my compilation I would like to have the 2 versions).\nIs that possible or I have to call 2 times cmake + make but with different parameters?</p>\n"}, {"tags": ["python", "c++", "binding", "ctypes"], "answers": [{"tags": [], "owner": {"reputation": 4384, "user_id": 853462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gYrq3.jpg?s=128&g=1", "display_name": "Herbert", "link": "https://stackoverflow.com/users/853462/herbert"}, "is_accepted": true, "score": 6, "last_activity_date": 1450638124, "creation_date": 1450638124, "answer_id": 34384663, "question_id": 31835398, "link": "https://stackoverflow.com/questions/31835398/c-python-binding-with-ctypes-return-multiple-values-in-function/34384663#34384663", "title": "C++ - Python Binding with ctypes - Return multiple values in function", "body": "<p>I don't think <code>ctypes</code> allows one to translate <code>std::pair</code> to a python tuple without much boilerplate code. Especially since <code>std::pair</code> is a feature of the <code>c++11</code> standard, and <code>ctypes</code> only works with <code>c</code>-style functions [citation / verification needed].</p>\n\n<p>I suggest would using <em>output parameters</em>, the <code>c</code> way to return multiple values. The idea is simple, the <code>c</code>-function returns it's values by pointer, <code>example.c</code>:</p>\n\n<pre><code>void divide_modulo(int a, int b, int *div, int *rest)\n{\n    *div  = a / b;\n    *rest = a % b;\n}\n</code></pre>\n\n<p>Then compile it to a shared library:</p>\n\n<pre><code>gcc -o libexample.so -shared example.c\n</code></pre>\n\n<p>The <code>libexample.so</code> now allows you to write to python integers via a pointer in <code>c</code> which are passes as parameters like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import ctypes\nlib = ctypes.cdll.LoadLibrary('./libexample.so')\n\ndef divide_modulo(a, b):\n  div = ctypes.c_int(0)\n  rest = ctypes.c_int(0)\n  lib.divide_modulo(a, b, ctypes.byref(div), ctypes.byref(rest))\n  return (div.value, rest.value)\n\nprint(divide_modulo(11, 4))\n</code></pre>\n\n<p>The <code>ctypes.byref</code> wrapper when calling <code>lib.divide_modulo</code> with <code>div</code> and <code>rest</code> converts an <code>int</code> to a pointer to an <code>int</code>.</p>\n"}], "owner": {"reputation": 137, "user_id": 5093428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2821371ccd3534f67e089ec0c8d9e484?s=128&d=identicon&r=PG&f=1", "display_name": "T_W", "link": "https://stackoverflow.com/users/5093428/t-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1725, "favorite_count": 0, "accepted_answer_id": 34384663, "answer_count": 1, "score": 2, "last_activity_date": 1450638124, "creation_date": 1438784968, "last_edit_date": 1495540766, "question_id": 31835398, "link": "https://stackoverflow.com/questions/31835398/c-python-binding-with-ctypes-return-multiple-values-in-function", "title": "C++ - Python Binding with ctypes - Return multiple values in function", "body": "<p>I found this example of C++ Python binding: \n<a href=\"https://stackoverflow.com/questions/145270/calling-c-c-from-python\">Calling C/C++ from python?</a>\nAccording to the answer there, I created some testfiles:</p>\n\n<p>foo.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\n\nint bar_2(int a, int b){\n    return a*b;\n}\n\nstd::pair&lt;int, int&gt; divide(int dividend, int divisor)\n{\n   return std::make_pair(dividend / divisor, dividend % divisor);\n}\n\nextern \"C\" {\n    int bar_2_py(int a, int b){ return bar_2(a,b); }\n    std::pair&lt;int, int&gt; divide_py(int d, int div){return divide(d,div);}\n}\n</code></pre>\n\n<p>fooWrapper.py:</p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom ctypes import cdll\nlib = cdll.LoadLibrary('./libfoo.so')\n\ndef bar_2(a, b):\n    res = lib.bar_2_py( a,b )\n    return res\n\ndef divide(d,div):\n    res = lib.divide_py(d,div)\n    return res\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>g++ -c -fPIC foo.cpp -o foo.o\ng++ -shared -Wl,-soname,libfoo.so -o libfoo.so  foo.o\n</code></pre>\n\n<p>creates libfoo.so</p>\n\n<p>If I import it and run the functions in iPython I get the right value for function \"bar_2\" but a (partly) wrong answer for \"divide\":</p>\n\n<pre><code>from fooWrapper import bar_2, divide\nbar_2(10,2) # returns 20, which is right\ndivide(10,3) # returns 3\n</code></pre>\n\n<p>Obviously, the return-value is right for the first value of the pair (as 10/3 int division is 3). But the second value was getting lost. </p>\n\n<p>So, what would be best practice to obtain multiple values (in this case 2 integer values)? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "concurrency", "threadpool"], "comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1438785556, "post_id": 31835009, "comment_id": 51593027, "body": "where is your function actually being called in run(), all I see is only work queue pop."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1438785654, "post_id": 31835009, "comment_id": 51593115, "body": "It seems the actual execution of the callback is done in <code>WorkQueue::pop</code> (there doesn&#39;t seem to be any other suitable place). If so, note that this happens while <code>g_lockqueue</code> mutex is held."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1438785727, "post_id": 31835009, "comment_id": 51593168, "body": "You&#39;re not actually doing any work. I assume when you pop you should run the function. Make sure you run the function NOT under the lock. Also your use of <code>g_notified</code> is unnecessary and probably a pessimisation. You should just check for <code>m_workQueue.empty()</code>. Also I&#39;m not sure what you&#39;re trying to do with the <code>bIsReady</code>."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1438916934, "post_id": 31835009, "comment_id": 51656894, "body": "The member variables in class ThreadPool are public. Is that object-oriented?"}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1438786913, "last_edit_date": 1438786913, "creation_date": 1438785809, "answer_id": 31835738, "question_id": 31835009, "link": "https://stackoverflow.com/questions/31835009/c-threadpool-is-not-running-parallel/31835738#31835738", "title": "C++ ThreadPool is not running parallel", "body": "<blockquote>\n  <ol>\n  <li>How can I fix this?</li>\n  </ol>\n</blockquote>\n\n<p>You don't show any work actually being done, only <code>pop</code> being called. Assuming that really executes the function, you should note that your <code>std::unique_lock</code> is still in scope when you do this, so it's synchronized. You need to have <em>released</em> the lock for the calls to be concurrent, which means that locker must be out of scope.</p>\n\n<p>For example,</p>\n\n<pre><code>    { // begin locker scope\n        std::unique_lock&lt;std::mutex&gt; locker(g_lockqueue);\n        if (m_workQueue.empty())\n        {\n\n            while (!g_notified) // used to avoid spurious wakeups \n            {\n                g_queuecheck.wait(locker);\n            }\n            if(!bIsReady)\n                g_notified.store(false);\n        }\n    } // end locker scope\n    m_workQueue.pop();\n</code></pre>\n\n<p>Note that now, your pop method will run the functions in parallel, but it will also be mutating the queue in parallel. This is  a problem. You'll need to do something like: move the function into a local variable, and then pop, while holding the mutex; then call the function outside the locker scope.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is something else wrong with my ThreadPool?</li>\n  </ol>\n</blockquote>\n\n<p>You're using globals, which is ugly, and your variables are poorly named: it isn't at all clear what <code>g_notified</code> and <code>bIsReady</code> are intended to mean.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Is the waiting best-practice?</li>\n  </ol>\n</blockquote>\n\n<p>No. Even apart from the actual bug, its intent is obscure. </p>\n"}, {"comments": [{"owner": {"reputation": 1334, "user_id": 969968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5821e6e6e5740184c507fa045e963f0?s=128&d=identicon&r=PG&f=1", "display_name": "DannyK", "link": "https://stackoverflow.com/users/969968/dannyk"}, "edited": false, "score": 0, "creation_date": 1439237050, "post_id": 31835802, "comment_id": 51768456, "body": "I&#39;ve used this code (pattern) to thread functions including class methods that require parameters."}], "tags": [], "owner": {"reputation": 1334, "user_id": 969968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5821e6e6e5740184c507fa045e963f0?s=128&d=identicon&r=PG&f=1", "display_name": "DannyK", "link": "https://stackoverflow.com/users/969968/dannyk"}, "is_accepted": true, "score": 7, "last_activity_date": 1568302807, "last_edit_date": 1568302807, "creation_date": 1438785974, "answer_id": 31835802, "question_id": 31835009, "link": "https://stackoverflow.com/questions/31835009/c-threadpool-is-not-running-parallel/31835802#31835802", "title": "C++ ThreadPool is not running parallel", "body": "<p>I use boost::asio to implement a thread pool.  Hope this helps.  This implementation was gleaned from the <a href=\"http://think-async.com/Asio/Recipes\" rel=\"nofollow noreferrer\">Asio Thread Pool</a>.  The key for me to get the example to work is scoping the asio::io_service::work and have the join_all outside that scope.</p>\n\n<pre><code>#include &lt;boost/chrono.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/scoped_ptr.hpp&gt;\n#include &lt;iostream&gt;\n\n\nboost::mutex output_mutex;\nvoid call(size_t job_number)\n{\n    {\n       boost::mutex::scoped_lock print_lock(output_mutex);\n       std::cout &lt;&lt; \"Hi i'm job &lt;&lt; \" &lt;&lt; job_number &lt;&lt;\" and thread: \" &lt;&lt; boost::this_thread::get_id() &lt;&lt; std::endl;\n    }\n\n    boost::this_thread::sleep_for(boost::chrono::seconds(2));\n    {\n       boost::mutex::scoped_lock print_lock(output_mutex);\n       std::cout &lt;&lt; \"job \" &lt;&lt; job_number &lt;&lt; \" finished. thread \" &lt;&lt; boost::this_thread::get_id() &lt;&lt; \" ready.\" &lt;&lt; std::endl;\n    }\n};\n\nint main(int argc, char **argv)\n{\n    size_t number_of_threads = boost::thread::hardware_concurrency();\n\n    // the number of jobs does not have to equal the number of\n    // threads.  they will be processed in turn.\n    size_t number_of_jobs = 3 * number_of_threads;\n\n    boost::asio::io_service io_service;\n    boost::thread_group threads;\n    {\n        boost::scoped_ptr&lt; boost::asio::io_service::work &gt; work( new boost::asio::io_service::work(io_service) );\n        for(size_t t = 0; t &lt; number_of_threads; t++)\n        {\n            threads.create_thread(boost::bind(&amp;boost::asio::io_service::run, &amp;io_service));\n        }\n\n        // post the jobs for work\n        // notice that the thread id is reused\n        for( size_t t = 0; t &lt; number_of_jobs; t++ )\n        {\n            io_service.post(boost::bind(call,t) );\n        }\n    }\n    threads.join_all();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 0, "last_activity_date": 1438786713, "creation_date": 1438786713, "answer_id": 31836059, "question_id": 31835009, "link": "https://stackoverflow.com/questions/31835009/c-threadpool-is-not-running-parallel/31836059#31836059", "title": "C++ ThreadPool is not running parallel", "body": "<p>The problem is in the <code>run</code> function: The <code>g_lockqueue</code> is locked for too long. It is locked as long as <code>locker</code> is in scope, so <code>g_lockqueue</code> is locked when <code>pop</code> is called.<br>\nBut, because <code>pop</code> and <code>empty</code> must not be executed concurrently, you need to return the \"Work\" while locked, then release the lock, and finally execute the work.</p>\n\n<p><code>run</code> could look like this:</p>\n\n<pre><code>void run()\n{\n    while (!bIsReady || !m_workQueue.empty())\n    {\n        Work work;\n        {\n            std::unique_lock&lt;std::mutex&gt; locker(g_lockqueue);\n            if (m_workQueue.empty())\n            {\n\n                while (!g_notified) // used to avoid spurious wakeups \n                {\n                    g_queuecheck.wait(locker);\n                }\n                if(!bIsReady)\n                    g_notified.store(false);\n            }\n            work = m_workQueue.pop();  // get the work to be done while locked\n        } // g_lockqueue released here\n        work.do();  // do the work\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 2760, "user_id": 1235183, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/59caaeef5801c8d3c82eb76080994599?s=128&d=identicon&r=PG", "display_name": "user1235183", "link": "https://stackoverflow.com/users/1235183/user1235183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 31835802, "answer_count": 3, "score": 2, "last_activity_date": 1568302807, "creation_date": 1438783967, "last_edit_date": 1438916641, "question_id": 31835009, "link": "https://stackoverflow.com/questions/31835009/c-threadpool-is-not-running-parallel", "title": "C++ ThreadPool is not running parallel", "body": "<p>I've tried to implement a ThreadPool, but unfortunately I'm running into some problems.</p>\n\n<p>This is what I have already.</p>\n\n<pre><code>//includes ...\n\nvoid call()\n{\n    std::cout &lt;&lt; \"Hi i'm thread no \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n    std::this_thread::sleep_for(std::chrono::seconds(2));\n    std::cout &lt;&lt; \"ready \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n};\n\n//Implementation is not shown here to reduce code\nclass WorkQueue {\n    public:\n        bool push(std::function&lt;void()&gt; const&amp; value);\n        void pop();\n        bool empty();\n};\n\nstd::condition_variable g_queuecheck;\nstd::mutex              g_lockqueue;\nstd::atomic&lt;bool&gt;       g_notified;\n\nclass ThreadPool\n{\n    public:\n        ThreadPool(int iNoThread) :\n            m_noThread(iNoThread)\n        {\n            g_notified.store(false);\n            m_threads.resize(iNoThread);\n            bIsReady.store(false);\n            for (int i = 0; i &lt; iNoThread; ++i)\n                m_threads[i] = std::thread(&amp;ThreadPool::run, this);\n        }\n\n        void run()\n        {\n            while (!bIsReady || !m_workQueue.empty())\n            {\n                std::unique_lock&lt;std::mutex&gt; locker(g_lockqueue);\n                if (m_workQueue.empty())\n                {\n                    while (!g_notified) // Used to avoid spurious wakeups\n                    {\n                        g_queuecheck.wait(locker);\n                    }\n                    if(!bIsReady)\n                        g_notified.store(false);\n                }\n\n                m_workQueue.pop();\n            }\n        };\n\n        void addWork(std::function&lt;void()&gt; func)\n        {\n            m_workQueue.push(func);\n            g_notified.store(true);\n            g_queuecheck.notify_one();\n        }\n\n        void join()\n        {\n            bIsReady.store(true);\n            g_notified.store(true);\n            g_queuecheck.notify_all();\n\n            for (int i = 0; i &lt; m_noThread; ++i)\n                m_threads[i].join();\n        }\n\n        ~ThreadPool()\n        {}\n\n\n        WorkQueue m_workQueue;\n        int m_noThread;\n        std::vector&lt;std::thread&gt; m_threads;\n        std::atomic&lt;bool&gt; bIsReady;\n};\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    {\n        ThreadPool pool(4);\n\n        for (int i = 0; i &lt; 8; ++i)\n            pool.addWork(call); //This work is done sequentially\n\n        pool.join();\n    }\n\n    std::cin.ignore();\n    return 0;\n}\n</code></pre>\n\n<p>My problem is that the work is done sequentially.</p>\n\n<ol>\n<li>How can I fix this?</li>\n<li>Is something else wrong with my ThreadPool?</li>\n<li>Is the waiting best-practice?</li>\n</ol>\n"}, {"tags": ["c++", "visual-studio", "unit-testing"], "comments": [{"owner": {"reputation": 329, "user_id": 3125112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/335a60b3460e73ba9940c4580f3bba27?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3125112/mark"}, "edited": false, "score": 0, "creation_date": 1438783513, "post_id": 31834695, "comment_id": 51591500, "body": "If it is anything like Visual Studio 2013, then you can add a reference to the project under test by going to &quot;Project Properties &gt; Configuration Properties &gt; C/C++ &gt; General &gt; Additional Include Directories&quot;. You can add the path to the folder containing the code you wish to test there."}, {"owner": {"reputation": 1171, "user_id": 3015723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qki0h.jpg?s=128&g=1", "display_name": "Snappawapa", "link": "https://stackoverflow.com/users/3015723/snappawapa"}, "edited": false, "score": 0, "creation_date": 1438784346, "post_id": 31834695, "comment_id": 51592101, "body": "Which visual studio?"}, {"owner": {"reputation": 19, "user_id": 5181048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3e2a2177909a7e3b0682f7b29633ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Barb", "link": "https://stackoverflow.com/users/5181048/barb"}, "edited": false, "score": 0, "creation_date": 1438785383, "post_id": 31834695, "comment_id": 51592911, "body": "I included the project containing my source code in the project properties - now I can include my files."}], "owner": {"reputation": 19, "user_id": 5181048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3e2a2177909a7e3b0682f7b29633ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Barb", "link": "https://stackoverflow.com/users/5181048/barb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1438783193, "creation_date": 1438783193, "question_id": 31834695, "link": "https://stackoverflow.com/questions/31834695/visual-studio-community-unit-testing-c", "title": "Visual Studio Community unit testing (c++)", "body": "<p>I wanted to add unit tests to a software-project in Visual Studio Community. </p>\n\n<p>I right-clicked on my project folder and created a new test project. Then I right clicked on my new Test Project and added a reference to my c++ project. How can I reference my source code in my test project?</p>\n\n<p>The problem is, that I can't include anything from my c++ project (and therefore can't test anything from my code). </p>\n\n<p>As I am new to C++: \nAre there any other plugins/extensions for unit testing you can recommend?</p>\n\n<p>Many thanks in advance, </p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1438786758, "post_id": 31834574, "comment_id": 51593952, "body": "can you add sample images/videos?"}, {"owner": {"reputation": 21, "user_id": 5194256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73dfeaab125ee59082126b312fe33c8e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/5194256/george"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439378028, "post_id": 31834574, "comment_id": 51834362, "body": "Hi Micka as it stands now i have no data set to use but based on the scenario I gave earlier we can use that to imagine the kind of data set to use."}, {"owner": {"reputation": 21, "user_id": 5194256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73dfeaab125ee59082126b312fe33c8e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/5194256/george"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439378067, "post_id": 31834574, "comment_id": 51834386, "body": "Please guys I really need help on this project thanks"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439379467, "post_id": 31834574, "comment_id": 51835318, "body": "what about perspective? side view vs top view etc?"}, {"owner": {"reputation": 21, "user_id": 5194256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73dfeaab125ee59082126b312fe33c8e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/5194256/george"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439596014, "post_id": 31834574, "comment_id": 51942525, "body": "Side views yes but no top views."}], "owner": {"reputation": 21, "user_id": 5194256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73dfeaab125ee59082126b312fe33c8e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/5194256/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438782903, "creation_date": 1438782903, "question_id": 31834574, "link": "https://stackoverflow.com/questions/31834574/vehicle-detection-extracting-3d-features", "title": "Vehicle detection extracting 3d features", "body": "<p>Hi guys I am working on a project which is stated and described below.Since I am a beginner in Image processing I am having a hard time collating all the papers I read on the topic.I will be grateful if someone helps me out with a suggestion on how to build such a system with the necessary approaches I need to use.</p>\n\n<p>\"Develop a system for detecting the kind of vehicle even if you don't have not a full view of the vehicle itself</p>\n\n<p>I try to clarify the topic:</p>\n\n<p>1)      You have a video of passing vehicles;</p>\n\n<p>2)      You cannot see the whole vehicle in the scene, but only a sub-part of it (imagine a camera looking at a Long Truck from a nearby location; you will see only a sub-part of it</p>\n\n<p>3)      as the vehicle moves you eventually see the whole vehicle (for example you can stick the various images and finally obtain the whole vehicle, possibly you can also recover some 3D data)</p>\n\n<p>4)      you should extract features (2D and/or 3D) and try to distinguish the vehicle type (car, van, small truck, heavy truck, bus, long vehicle, for example)\"</p>\n"}, {"tags": ["c++", "c", "cmake"], "comments": [{"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438783994, "post_id": 31834554, "comment_id": 51591830, "body": "<a href=\"http://www.cmake.org/cmake/help/v3.2/command/include_directories.html\" rel=\"nofollow noreferrer\">RTFM</a> and <a href=\"http://www.cmake.org/cmake/help/v3.2/command/target_include_directories.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438784238, "post_id": 31834554, "comment_id": 51592023, "body": "@JanHudec I dont know why but target_include_directories is not available for me: CMake Error at CMakeLists.txt:6 (target_include_directories):   Unknown CMake command &quot;target_include_directories&quot;"}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438786900, "post_id": 31834554, "comment_id": 51594058, "body": "<code>target_include_directories</code> is relatively new command. Upgrade your CMake or resort to the simple <code>include_directories</code>."}, {"owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438840682, "post_id": 31834554, "comment_id": 51616444, "body": "@JanHudec I had tried include_directories before and it hadn&#39;t work. But now, I don&#39;t know what mistake I did before, but yes it worked. Don&#39;t you think to write this so that I can accept? Thanks."}], "owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438782833, "creation_date": 1438782833, "last_edit_date": 1592644375, "question_id": 31834554, "link": "https://stackoverflow.com/questions/31834554/how-can-source-files-see-other-files-without-path-in-a-cmake-project", "title": "how can source files see other files without path in a cmake project?", "body": "<p>In a CMAKE project I have created 2 folders, a and b, each of which has <code>include</code> and src directories:</p>\n<blockquote>\n<p>-- MyProject</p>\n<p>CMakeLists.txt</p>\n<p>---- a</p>\n<p>------ include</p>\n<p>-------- a.h</p>\n<p>---- b</p>\n<p>------ include</p>\n<p>-------- b.h</p>\n</blockquote>\n<p>...</p>\n<p><code>a.h</code> includes <code>b.h</code>. But only if the path is specified, ie, <code>#include &quot;../../b/include/b.h&quot;</code>.</p>\n<p>How can I configure <strong>cmake</strong> so that all project files can see each other without specifying the path? eg: <code>#include &quot;b.h&quot;</code></p>\n"}, {"tags": ["c++", "algorithm", "vector", "grouping"], "comments": [{"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1438782446, "post_id": 31834306, "comment_id": 51590656, "body": "What is your concern? How to determine the groups, how to determine similarity? Or how to transfer data efficiently from inputData to outputData?"}, {"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "reply_to_user": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1438782500, "post_id": 31834306, "comment_id": 51590701, "body": "Currently I keep a buffer where I keep the already added IDs and I end up doing a LOT of searches every iteration, I need an efficient way to do it"}, {"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1438782572, "post_id": 31834306, "comment_id": 51590753, "body": "OK, How is similarity defined? Exploiting properties of your similarity definition has big potential for optimizations."}, {"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "reply_to_user": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1438782775, "post_id": 31834306, "comment_id": 51590893, "body": "@peterchen I edited the question, by similarity I meant same ID"}], "answers": [{"comments": [{"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 1, "creation_date": 1438782804, "post_id": 31834483, "comment_id": 51590918, "body": "Yeah, that might work, just sort them and them copy each &quot;same ID&quot; segment to a new vector."}], "tags": [], "owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "is_accepted": false, "score": 0, "last_activity_date": 1438782603, "creation_date": 1438782603, "answer_id": 31834483, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31834483#31834483", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p>You're a little vague but I imagine you could use <code>std::sort</code> or friends (<code>std::stable_sort</code>, <code>std::partition</code>, <code>std::stable_partition</code>). Then you use <code>std::copy</code> from one vector's iterators to another vector.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1438783442, "post_id": 31834672, "comment_id": 51591451, "body": "Note that point3&amp;4 is done automatically with <code>std::unordered_map&lt;int, std:::vector&lt;MyData&gt;&gt;::operator[]</code> :-) so only <code>map[data.ID].push_back(data)</code> is required."}, {"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1438783518, "post_id": 31834672, "comment_id": 51591507, "body": "@Jarod42 I&#39;m not a C++ programmer.  Thanks for the observation."}], "tags": [], "owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "is_accepted": false, "score": 0, "last_activity_date": 1438783124, "creation_date": 1438783124, "answer_id": 31834672, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31834672#31834672", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p>If you used a hash table, you could do something like:</p>\n\n<pre><code>Create a hash table that maps from ID to vector&lt;MyData&gt;\nIterate through the input data:\n    If the hash table doesn't contain a vector for that ID:\n        Create a vector&lt;MyData&gt; and add it to the hash table\n    Push the input item into that vector&lt;MyData&gt;\nIterate through the entry set for the hash table:\n    Put the vector&lt;MyData&gt; into the vector&lt;vector&lt;MyData&gt;&gt;\nReturn the vector&lt;vector&lt;MyData&gt;&gt;\n</code></pre>\n\n<p>This should be something like <code>O(n)</code> average case.  Worst case would be something like <code>O(n^2)</code>, I would think, if the hash function is bad.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1438783651, "post_id": 31834800, "comment_id": 51591592, "body": "<code>if(Item.ID in IDMap)</code> is not required with map: <code>IDMap[Item.ID].push_back(Item);</code> is enough."}, {"owner": {"reputation": 281, "user_id": 1600650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06da94590f4d9cfef0257ceb3c2c63de?s=128&d=identicon&r=PG", "display_name": "SashaM", "link": "https://stackoverflow.com/users/1600650/sasham"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1438784041, "post_id": 31834800, "comment_id": 51591864, "body": "That&#39;s true, I just wrote it more simply so that the complexity is clear"}], "tags": [], "owner": {"reputation": 281, "user_id": 1600650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06da94590f4d9cfef0257ceb3c2c63de?s=128&d=identicon&r=PG", "display_name": "SashaM", "link": "https://stackoverflow.com/users/1600650/sasham"}, "is_accepted": false, "score": 0, "last_activity_date": 1438783443, "creation_date": 1438783443, "answer_id": 31834800, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31834800#31834800", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p>You can hold a <strong>map</strong> of IDs, which map between ID and vector containing items with the ID. Then iterate over input, for each element check the map for it's ID, and if it's a new one create a new vector. Your complexity would be O(NlogM), where N is input size and M number of possible IDs.</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>    for(Item in inputData)\n            if(Item.ID in IDMap)\n                    IDVec = IDMap[Item.ID]\n                    IDVec.push(Item)\n            else\n                    IDVec = new Vector\n                    IDMap.push(IDVec, Item.ID)\n                    OutputVec.push(IDVec)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "is_accepted": false, "score": 0, "last_activity_date": 1438783468, "creation_date": 1438783468, "answer_id": 31834817, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31834817#31834817", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p><em>Option 1:</em><br>\nSort input by ID, then iterate over the sorted input, accumulating and coyping sequences of data with the same ID and copying them to the target using vector's <code>vector(iter, iter)</code> CTor.</p>\n\n<p>sort requires a comparator:</p>\n\n<pre><code>bool less_than_by_ID(MyData const &amp; a, MyData const &amp; b) \n{ return a.ID &lt; b.ID; }\n</code></pre>\n\n<p><em>Option 2:</em><br>\nKeep the items in a multiset or multimap keyed by ID, use <code>lower_bound</code> and <code>upper_bound</code> of the respective container to get the ranges of the individual keys.  (Algorithmically, it's the same)</p>\n\n<p><em>Option 3:</em><br>\nchange your output data structure to </p>\n\n<pre><code>std::map&lt;int, std::vector&lt;MyData&gt; &gt; outputData;\n</code></pre>\n\n<p>and just throw the data at the container:</p>\n\n<pre><code>for(auto data : inputData)\n  outuptData[data.ID].push_back(data);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 1, "last_activity_date": 1438798333, "last_edit_date": 1438798333, "creation_date": 1438786691, "answer_id": 31836047, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31836047#31836047", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p>You can do this by sorting your elements according to <code>ID</code> and then use <a href=\"http://en.cppreference.com/w/cpp/algorithm/upper_bound\" rel=\"nofollow\">std::upper_bound</a> to find the end position of each group:</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nstruct MyData\n{\n    int id;\n    std::string info;\n\n    MyData(int id, const std::string&amp; info): id(id), info(info) {}\n\n    // for sorting by id\n    bool operator&lt;(const MyData&amp; d) const { return id &lt; d.id; }\n};\n\n// function requires sorted data as input\nstd::vector&lt;std::vector&lt;MyData&gt; &gt; GroupByIDs(const std::vector&lt;MyData&gt;&amp; data)\n{\n    std::vector&lt;std::vector&lt;MyData&gt; &gt; groups;\n\n    decltype(data.end()) upper;\n\n    for(auto lower = data.begin(); lower != data.end(); lower = upper)\n    {\n        // get the upper position of all elements with the same ID\n        upper = std::upper_bound(data.begin(), data.end(), *lower);\n\n        // add those elements as a group to the output vector\n        groups.emplace_back(lower, upper);\n    }\n\n    return groups;\n}\n\nint main()\n{\n    std::vector&lt;MyData&gt; data {{2, \"A\"}, {4, \"B\"}, {3, \"C\"}, {4, \"D\"}, {9, \"E\"}, {3, \"F\"}};\n\n    // function requires sorted data\n    std::sort(data.begin(), data.end());\n    std::vector&lt;std::vector&lt;MyData&gt; &gt; groups = GroupByIDs(data);\n\n    for(auto const&amp; group: groups)\n    {\n        if(!group.empty())\n            std::cout &lt;&lt; \"group: \" &lt;&lt; group.front().id &lt;&lt; '\\n';\n\n        for(auto const&amp; d: group)\n            std::cout &lt;&lt; \"     : \" &lt;&lt; d.info &lt;&lt; '\\n';\n\n        std::cout &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>group: 2\n     : A\n\ngroup: 3\n     : C\n     : F\n\ngroup: 4\n     : B\n     : D\n\ngroup: 9\n     : E\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": false, "score": 0, "last_activity_date": 1438847466, "creation_date": 1438847466, "answer_id": 31849872, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id/31849872#31849872", "title": "Best algorithm to group data by similarity (same ID)", "body": "<blockquote>\n  <p>I edited the question, by similarity I meant same ID</p>\n</blockquote>\n\n<p>Implementation:</p>\n\n<pre><code>auto MapByIDs(std::vector&lt;MyData&gt; inputData)\n{\n    std::map&lt;std::vector&lt;MyData&gt;&gt; result;\n    for(auto &amp;x: inputData)\n        result[x.ID].emplace_back(std::move(x));\n    return result;\n}\n\nauto GroupByIDs(std::vector&lt;MyData&gt; inputData)\n{\n    auto map = MapByIDs(std::move(inputData));\n    std::vector&lt;std::vector&lt;MyData&gt;&gt; result;\n    for(auto &amp;x: map)\n        result.emplace_back(std::move(x.second));\n    return result;\n}\n\nauto outputData = GroupByIDs(std::move(inputData));\n</code></pre>\n"}], "owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2674, "favorite_count": 0, "accepted_answer_id": 31836047, "answer_count": 6, "score": 1, "last_activity_date": 1438847466, "creation_date": 1438782132, "last_edit_date": 1438782761, "question_id": 31834306, "link": "https://stackoverflow.com/questions/31834306/best-algorithm-to-group-data-by-similarity-same-id", "title": "Best algorithm to group data by similarity (same ID)", "body": "<p>here is reference code:</p>\n\n<pre><code>struct MyData\n{\nint ID;\n\n// other members\n};\n\nstd::vector&lt;MyData&gt; inputData;\n\nstd::vector&lt;std::vector&lt;MyData&gt; &gt; outputData = GroupByIDs(inputData);\n</code></pre>\n\n<p>Basically what I want to do is iterate the input data and group the objects by ID into a new mini vector which I would push in the output vector. So in the end I would have a vector of sub-vectors where every sub-vector contains objects with identical <code>ID</code>.</p>\n\n<p>Is there a <em>cookie-cutter most efficient</em> algorithm designed to do this? Because I can only  think of algorithms with a high complexity.</p>\n"}, {"tags": ["c++", "bit-manipulation", "bitwise-operators", "bit-shift"], "comments": [{"owner": {"reputation": 1434, "user_id": 4928207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122e2222eb8cace8c9d2e67ea65d8c47?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Jansen", "link": "https://stackoverflow.com/users/4928207/mark-jansen"}, "edited": false, "score": 0, "creation_date": 1438783546, "post_id": 31834235, "comment_id": 51591528, "body": "For reference: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#ReverseParallel\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#ReverseParallel</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3284462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d8cef9aafa07ce02252687be35ca02e8?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer_Rox", "link": "https://stackoverflow.com/users/3284462/programmer-rox"}, "edited": false, "score": 0, "creation_date": 1438788541, "post_id": 31835189, "comment_id": 51595205, "body": "Thank you for your detailed answer, so basically the following comment which i found reading the code above is clearly wrong: &quot;Read the bit  #1 of FirstReg and put value into bit #1 of returned value,  read the bit  #2 of FirstReg and put value into bit #2   of returned value&quot;.... &quot;Read the bit  #1 of SecondReg and put value into bit #16   of returned value&quot;"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1438784426, "creation_date": 1438784426, "answer_id": 31835189, "question_id": 31834235, "link": "https://stackoverflow.com/questions/31834235/bit-reversal-not-clear-what-the-output-is/31835189#31835189", "title": "Bit Reversal - not clear what the output is", "body": "<p>First, even if the algorythm works with 32 bits integers, only the 16 least significant bits are used because they are <em>anded</em> with 16 bits only values.</p>\n\n<p>So after the first part (before the last shift) <code>FirstReg</code> and <code>SecondReg</code> contains the 16 least significant bits of the original values reversed.</p>\n\n<p>Then <code>FirstReg</code> is shifted left 8 bits and <code>SecondReg</code> is shifted right 8 bits and both are <em>ored</em>. The result is a 32 bits values composed with (most significant byte to least): O, high order byte of <code>FirstReg</code>, low order byte of <code>FirstReg</code>, high order byte of <code>SecondReg</code></p>\n"}], "owner": {"reputation": 35, "user_id": 3284462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d8cef9aafa07ce02252687be35ca02e8?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer_Rox", "link": "https://stackoverflow.com/users/3284462/programmer-rox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 31835189, "answer_count": 1, "score": 0, "last_activity_date": 1438784426, "creation_date": 1438781983, "last_edit_date": 1438783173, "question_id": 31834235, "link": "https://stackoverflow.com/questions/31834235/bit-reversal-not-clear-what-the-output-is", "title": "Bit Reversal - not clear what the output is", "body": "<p>I am reading the following example :</p>\n\n<pre><code>  Var1(REG1, 0U, 16U);\n  Var2(REG2, 0U, 8U);\n\n   UINT32 FirstReg = Getaddress1(Var1); //the dimension is 16 bit\n\n   FirstReg = ((FirstReg &gt;&gt; 1) &amp; 0x5555) | ((FirstReg &lt;&lt; 1) &amp; 0xaaaa);\n   FirstReg = ((FirstReg &gt;&gt; 2) &amp; 0x3333) | ((FirstReg &lt;&lt; 2) &amp; 0xcccc);\n   FirstReg = ((FirstReg &gt;&gt; 4) &amp; 0x0f0f) | ((FirstReg &lt;&lt; 4) &amp; 0xf0f0);\n   FirstReg = ((FirstReg &gt;&gt; 8) &amp; 0x00ff) | ((FirstReg &lt;&lt; 8) &amp; 0xff00);\n   FirstReg = (FirstReg &lt;&lt; 8);\n\n   UINT32 SecondReg = Getaddress2(Var2);//the dimension is 8 bit\n   SecondReg = ((SecondReg &gt;&gt; 1) &amp; 0x5555) | ((SecondReg &lt;&lt; 1) &amp; 0xaaaa);\n   SecondReg = ((SecondReg &gt;&gt; 2) &amp; 0x3333) | ((SecondReg &lt;&lt; 2) &amp; 0xcccc);\n   SecondReg = ((SecondReg &gt;&gt; 4) &amp; 0x0f0f) | ((SecondReg &lt;&lt; 4) &amp; 0xf0f0);\n   SecondReg = ((SecondReg &gt;&gt; 8) &amp; 0x00ff) | ((SecondReg &lt;&lt; 8) &amp; 0xff00);\n   SecondReg = (SecondReg &gt;&gt; 8);\n\n   return (FirstReg | SecondReg);\n</code></pre>\n\n<p>Basically as far as i undestand the intention is to reverse the bits read in the 2 UINT32 Reg(s) variables and collect in only 1 variable of UINT32 type. </p>\n\n<p>I don't get if the first bit (for example) of SecondReg will become the 17th bit of the returned variable or the first one.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1438781967, "post_id": 31834117, "comment_id": 51590275, "body": "You can&#39;t pass a <code>va_list</code> to a function expecting <code>...</code>, the function must take a <code>va_list</code> parameter."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1438782482, "post_id": 31834117, "comment_id": 51590678, "body": "variadic template (from C++11) may help also: <code>template &lt;typename ... Ts&gt; int scan(const char* format, const Ts&amp;... args) { return ::fscanf(_ptr, format, args...);}</code>"}], "owner": {"reputation": 324, "user_id": 4247554, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cde1606b412a7f2391872487741c1bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Aykut Burak SAFAK", "link": "https://stackoverflow.com/users/4247554/aykut-burak-safak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1438781892, "answer_count": 0, "score": 0, "last_activity_date": 1438781687, "creation_date": 1438781687, "question_id": 31834117, "link": "https://stackoverflow.com/questions/31834117/how-do-i-take-a-pointer-in-a-va-list-from-outside-the-function", "closed_reason": "Duplicate", "title": "How do I take a pointer in a va_list from outside the function?", "body": "<p>I want to implement my own fscanf function in my application. But I couldn't manage to take my char pointer in my va_list. The code I'm trying to use is this:</p>\n\n<pre><code>scan(const char * _Format, ... )\n{\n    va_list args;\n    va_start(args, _Format);\n    int result = ::fscanf(_ptr, _Format, args);\n    //va_end(args);\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "ios", "c", "sockets", "raw-sockets"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1438782068, "post_id": 31834030, "comment_id": 51590352, "body": "And <code>res == 0</code> after every call?"}, {"owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1438786917, "post_id": 31834030, "comment_id": 51594073, "body": "Yep, res is always 0"}], "answers": [{"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1438784945, "post_id": 31835137, "comment_id": 51592594, "body": "The Mach source is on github, so you could provide a link?"}, {"owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "edited": false, "score": 0, "creation_date": 1438786973, "post_id": 31835137, "comment_id": 51594122, "body": "Interesting!  Great thanks for your comment. I can sleep now :)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 3, "last_activity_date": 1438784274, "creation_date": 1438784274, "answer_id": 31835137, "question_id": 31834030, "link": "https://stackoverflow.com/questions/31834030/reading-tcp-nodelay-using-getsockopt-returning-a-weird-value/31835137#31835137", "title": "Reading TCP_NODELAY using getsockopt returning a weird value", "body": "<p>This is ok. The only thing relevant is that the flag is zero or non-zero. I'm pretty sure <code>ios</code> (that you tagged the question with) will behave more or less like the old Darwin code and from reading that I can see that when setting the option, the kernel only cares if it's zero or not, but when reading it the actual internal flag value is used.</p>\n\n<p>If you have kernel include files you can find the relevant flag in netinet/tcp_var.h (this is kernel include file, so don't include it yourself) and it's called <code>TF_NODELAY</code> and happens to have the value 4.</p>\n"}], "owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 1, "accepted_answer_id": 31835137, "answer_count": 1, "score": 2, "last_activity_date": 1438784436, "creation_date": 1438781481, "question_id": 31834030, "link": "https://stackoverflow.com/questions/31834030/reading-tcp-nodelay-using-getsockopt-returning-a-weird-value", "title": "Reading TCP_NODELAY using getsockopt returning a weird value", "body": "<p>I am trying to verifying that my setting of TCP_NODELAY is working by reading it back after I set it.</p>\n\n<p>Im setting the value to '1', but when I read it back, its set to '4'. Im afraid im doing something wrong.</p>\n\n<p>Heres my code:</p>\n\n<pre><code>    int tcpBefore;\n    socklen_t tcpBeforeLen = sizeof(tcpBefore);\n    int res = getsockopt(socket, IPPROTO_TCP, TCP_NODELAY, &amp;tcpBefore, &amp;tcpBeforeLen);\n\n    // Turn on TCP no delay\n    int tcpNoDelay = 1;\n    res = setsockopt(socket, IPPROTO_TCP, TCP_NODELAY, (void *)&amp;tcpNoDelay, sizeof(tcpNoDelay));\n\n    int tcpAfter;\n    socklen_t tcpAfterLen = sizeof(tcpAfter);\n    res = getsockopt(socket, IPPROTO_TCP, TCP_NODELAY, &amp;tcpAfter, &amp;tcpAfterLen);\n</code></pre>\n\n<p>The value I get for 'tcpBefore' is '0'. The value I get after I set it is '4'. This seems odd. </p>\n\n<p>Is there something I am doing wrong?</p>\n"}, {"tags": ["c++", "optimization", "sse", "variance"], "comments": [{"owner": {"reputation": 897, "user_id": 1044533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/169630f634a264b46fb6761510679931?s=128&d=identicon&r=PG", "display_name": "MKII", "link": "https://stackoverflow.com/users/1044533/mkii"}, "edited": false, "score": 4, "creation_date": 1438781911, "post_id": 31833965, "comment_id": 51590223, "body": "You could still collapse the first loop into the second, since you are not changing <code>histVec</code> afterwards, no? Also, probably not significant, but why create a temp variable f? Just use histVec[i] (the compiler should optimize that though)."}, {"owner": {"reputation": 333, "user_id": 2863527, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fe9dc5d0e50b50eab8b54a1e0334852b?s=128&d=identicon&r=PG&f=1", "display_name": "trexgris", "link": "https://stackoverflow.com/users/2863527/trexgris"}, "reply_to_user": {"reputation": 897, "user_id": 1044533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/169630f634a264b46fb6761510679931?s=128&d=identicon&r=PG", "display_name": "MKII", "link": "https://stackoverflow.com/users/1044533/mkii"}, "edited": false, "score": 1, "creation_date": 1438782141, "post_id": 31833965, "comment_id": 51590410, "body": "Yes that is a good point, but as you said I also think that the compiler would optimize that"}, {"owner": {"reputation": 897, "user_id": 1044533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/169630f634a264b46fb6761510679931?s=128&d=identicon&r=PG", "display_name": "MKII", "link": "https://stackoverflow.com/users/1044533/mkii"}, "edited": false, "score": 2, "creation_date": 1438782289, "post_id": 31833965, "comment_id": 51590520, "body": "What about <code>hwk::sqr(diff)</code> performance? Maybe you could use a different implementation to get some speed up?"}, {"owner": {"reputation": 333, "user_id": 2863527, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fe9dc5d0e50b50eab8b54a1e0334852b?s=128&d=identicon&r=PG&f=1", "display_name": "trexgris", "link": "https://stackoverflow.com/users/2863527/trexgris"}, "reply_to_user": {"reputation": 897, "user_id": 1044533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/169630f634a264b46fb6761510679931?s=128&d=identicon&r=PG", "display_name": "MKII", "link": "https://stackoverflow.com/users/1044533/mkii"}, "edited": false, "score": 1, "creation_date": 1438782784, "post_id": 31833965, "comment_id": 51590902, "body": "hwk::sqr is basically a template for val * val, I could check the time of computation if i directly type diff * diff but again the compiler will probably consider hwk::sqr as val * val"}, {"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 1, "creation_date": 1438783743, "post_id": 31833965, "comment_id": 51591644, "body": "The operations are pretty trivial for current desktop processors. Most promising would be any kind of parallelization. <i>If</i> the array is large, reducing the number of loops would help. --- FWIW, there&#39;s little point in using float, I&#39;d default to <code>double</code>. -- suggestion: post the SSE code to a new question and let&#39;s work on that."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 4, "creation_date": 1438783795, "post_id": 31833965, "comment_id": 51591681, "body": "Normally you <i>can</i> compute both mean and variance in single loop by using the fact that \u2211(x - x\u0305)&#178; = \u2211x&#178; - x\u0305&#178;, but I am not quickly sure how to adjust it for the weighted case you have."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 3, "creation_date": 1438784265, "post_id": 31833965, "comment_id": 51592038, "body": "You probably want to use an online version of your algorithm, to eliminate the need for two passes.  I think <a href=\"https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Weighted_incremental_algorithm\" rel=\"nofollow noreferrer\">this</a> is what @JanHudec is referring to."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1438786728, "post_id": 31833965, "comment_id": 51593917, "body": "@Jason, yes, that is. I only remembered the basic variant off the top of my head."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1438790779, "post_id": 31833965, "comment_id": 51596687, "body": "Does your platform have a floating point processor or native floating point instructions?  If your code is calling a software library for floating point, you could improve performance by using Fixed Point arithmetic.  Search the internet for &quot;c++ fixed point arithmetic&quot;."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1438816337, "post_id": 31833965, "comment_id": 51610090, "body": "What does your profiler say?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1438820766, "post_id": 31833965, "comment_id": 51611207, "body": "@ThomasMatthews: He&#39;s on x86 with SSE.  He has very good hardware floating point.  BTW, I updated my answer with more suggestions for optimizing the common 10-bin case."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1438930497, "post_id": 31833965, "comment_id": 51661050, "body": "&quot;I don&#39;t think there is a possible better way&quot;: there are many possible simplifications, leading to a probable threefold or fourfold improvement."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1438943237, "post_id": 31833965, "comment_id": 51668640, "body": "If there are just 10 bins, is it really worth to optimize that part of the code ? It will cost like 100 floating operations, to be compared to the computation of the image histogram, probably over 100000 integer operations."}], "answers": [{"comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1438951322, "post_id": 31835278, "comment_id": 51673552, "body": "&quot;If it&#39;s rather large (say, over 1000000), parallelization will help&quot;: SIMD parallelization with SSE will give a immediate return, even for n=10, possibly better than whatever you can achieve with a quad- or octocore."}, {"owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1438962737, "post_id": 31835278, "comment_id": 51681295, "body": "I agree; I wasn&#39;t really considering SIMD as parallelization. I should have mentioned it in my answer, since the SIMD instructions greatly improve performance without the overhead of spinning up multiple threads. I guess the point I was really trying to drive home is &quot;you should try profiling your application.&quot;"}], "tags": [], "owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "is_accepted": false, "score": 3, "last_activity_date": 1438784659, "creation_date": 1438784659, "answer_id": 31835278, "question_id": 31833965, "link": "https://stackoverflow.com/questions/31833965/fast-weighted-mean-variance-of-10-bins/31835278#31835278", "title": "Fast weighted mean &amp; variance of 10 bins", "body": "<p>As peterchen mentioned, these operations are very trivial for current desktop processors. The function is linear, i.e. O(n). What's the typical size of <code>numBins</code>? If it's rather large (say, over 1000000), parallelization will help. This could be simple using a library like OpenMP. If <code>numBins</code> starts approaching <code>MAXINT</code>, you may consider GPGPU as an option (CUDA/OpenCL).</p>\n\n<p>All that considered, you should try profiling your application. Chances are good that, if there is a performance constraint, it's not in this method. Michael Abrash's definition of \"high-performance code\" has helped me greatly in determining if/when to optimize:</p>\n\n<blockquote>\n  <p>Before we can create high-performance code, we must understand what high performance is. The objective (not always attained) in creating high-performance software is to make the software able to carry out its appointed tasks so rapidly that it responds instantaneously, as far as the user is concerned. In other words, high-performance code should ideally run so fast that any further improvement in the code would be pointless. Notice that the above definition most emphatically does not say anything about making the software as fast as possible.</p>\n</blockquote>\n\n<p>Reference:\n<a href=\"http://www.drdobbs.com/parallel/graphics-programming-black-book/184404919\" rel=\"nofollow\">The Graphics Programming Black Book</a></p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 5, "last_activity_date": 1475300370, "last_edit_date": 1475300370, "creation_date": 1438810520, "answer_id": 31843256, "question_id": 31833965, "link": "https://stackoverflow.com/questions/31833965/fast-weighted-mean-variance-of-10-bins/31843256#31843256", "title": "Fast weighted mean &amp; variance of 10 bins", "body": "<p>I only just realized that your data array starts out as an array of int, since you didn't have declarations in your code.  I can see in the SSE version that you start with integers, and only store a float version of it later.</p>\n\n<p>Keeping everything integer will let us do the loop-counter-vector with a simple <code>ivec = _mm_add_epi32(ivec, _mm_set1_epi32(4));</code>  Aki Suihkonen's answer has some transformations that should let it optimize a lot better.  Especially, the auto-vectorizer should be able to do more even without <code>-ffast-math</code>.  In fact, it does quite well.  You could do better with intrinsics, esp. saving some vector 32bit multiplies and shortening the dependency chain.</p>\n\n<hr>\n\n<p><strong>My old answer, based on just trying to optimize your code as written, assuming FP input</strong>:</p>\n\n<p>You may be able to combine all 3 loops into one, using <a href=\"https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Weighted_incremental_algorithm\" rel=\"nofollow\">the algorithm @Jason linked to</a>.  It might not be profitable, though, since it involves a division.  For small numbers of bins, probably just loop multiple times.</p>\n\n<p>Start by reading the guides at <a href=\"http://agner.org/optimize/\" rel=\"nofollow\">http://agner.org/optimize/</a>.  A couple of the techniques in his Optimising Assembly guide will speed up your SSE attempt (which I edited into this question for you).</p>\n\n<ul>\n<li><p>combine your loops where possible, so you do more with the data for each time it's loaded / stored.</p></li>\n<li><p>multiple accumulators to hide the latency of loop-carried dependency chains.  (Even FP add takes 3 cycles on recent Intel CPUs.)  This won't apply for really short arrays like your case.</p></li>\n<li>instead of int->float conversion on every iteration, use a float loop counter as well as the int loop counter.  (add a vector of <code>_mm_set1_ps(4.0f)</code> every iteration.)  <code>_mm_set...</code> with variable args is something to avoid in loops, when possible.  It takes several instructions (esp. when each arg to <code>setr</code> has to be calculated separately.)</li>\n</ul>\n\n<p>gcc <code>-O3</code> manages to auto-vectorize the first loop, but not the others.  With <code>-O3 -ffast-math</code>, it auto-vectorizes more.  <code>-ffast-math</code> allows it to do FP operations in a different order than the code specifies.  e.g. adding up the array in 4 elements of a vector, and only combining the 4 accumulators at the end.</p>\n\n<p>Telling gcc that the input pointer is aligned by 16 lets gcc auto-vectorize with a lot less overhead (no scalar loops for unaligned portions).</p>\n\n<pre><code>// return mean\nfloat fpstats(float histVec[], float sum, float binSize, float binOffset, long numBins, float *variance_p)\n{\n    numBins += 3;\n    numBins &amp;= ~3;  // round up to multiple of 4.  This is just a quick hack to make the code fast and simple.\n    histVec = (float*)__builtin_assume_aligned(histVec, 16);\n\n    float invSum = 1.0f / float(sum);\n    float var = 0, fmean = 0;\n\n    for (int i = 0; i &lt; numBins; ++i)\n    {\n        histVec[i] *= invSum;\n        float midPoint = (float)i*binSize + binOffset;\n        float f = histVec[i];\n        fmean += f * midPoint;\n    }\n\n    for (int i = 0; i &lt; numBins; ++i)\n    {\n        float midPoint = (float)i*binSize + binOffset;\n        float f = histVec[i];\n        float diff = midPoint - fmean;\n//        var += f * hwk::sqr(diff);\n        var += f * (diff * diff);\n    }\n    *variance_p = var;\n    return fmean;\n}\n</code></pre>\n\n<p>gcc generates some weird code for the 2nd loop.</p>\n\n<pre><code>        # broadcasting fmean after the 1st loop\n        subss   %xmm0, %xmm2    # fmean, D.2466\n        shufps  $0, %xmm2, %xmm2        # vect_cst_.16\n.L5: ## top of 2nd loop \n        movdqa  %xmm3, %xmm5    # vect_vec_iv_.8, vect_vec_iv_.8\n        cvtdq2ps        %xmm3, %xmm3    # vect_vec_iv_.8, vect__32.9\n        movq    %rcx, %rsi      # D.2465, D.2467\n        addq    $1, %rcx        #, D.2465\n        mulps   %xmm1, %xmm3    # vect_cst_.11, vect__33.10\n        salq    $4, %rsi        #, D.2467\n        paddd   %xmm7, %xmm5    # vect_cst_.7, vect_vec_iv_.8\n        addps   %xmm2, %xmm3    # vect_cst_.16, vect_diff_39.15\n        mulps   %xmm3, %xmm3    # vect_diff_39.15, vect_powmult_53.17\n        mulps   (%rdi,%rsi), %xmm3      # MEM[base: histVec_10, index: _107, offset: 0B], vect__41.18\n        addps   %xmm3, %xmm4    # vect__41.18, vect_var_42.19\n        cmpq    %rcx, %rax      # D.2465, bnd.26\n        ja      .L8     #,   ### &lt;--- This is insane.\n        haddps  %xmm4, %xmm4    # vect_var_42.19, tmp160\n        haddps  %xmm4, %xmm4    # tmp160, vect_var_42.21\n.L2:\n        movss   %xmm4, (%rdx)   # var, *variance_p_44(D)\n        ret\n        .p2align 4,,10\n        .p2align 3\n.L8:\n        movdqa  %xmm5, %xmm3    # vect_vec_iv_.8, vect_vec_iv_.8\n        jmp     .L5     #\n</code></pre>\n\n<p>So instead of just jumping back to the top every iteration, gcc decides to jump ahead to copy a register, and then unconditionally <code>jmp</code> back to the top of the loop.  The uop loop buffer may remove the front-end overhead of this sillyness, but gcc should have structured the loop so it didn't copy xmm5->xmm3 and then xmm3->xmm5 every iteration, because that's silly.  It should have the conditional jump just go to the top of the loop.</p>\n\n<p>Also note the technique gcc used to get a float version of the loop counter: start with an integer vector of <code>1 2 3 4</code>, and add <code>set1_epi32(4)</code>.  Use that as an input for packed int->float <code>cvtdq2ps</code>.   On Intel HW, that instruction runs on the FP-add port, and has 3 cycle latency, same as packed FP add.  gcc prob. would have done better to just add a vector of <code>set1_ps(4.0)</code>, even though this creates a 3-cycle loop-carried dependency chain, instead of 1 cycle vector int add, with a 3 cycle convert forking off on every iteration.</p>\n\n<h2>small iteration count</h2>\n\n<p>You say this will often be used on exactly 10 bins?  A specialized version for just 10 bins could give a big speedup, by avoiding all the loop overhead and keeping everything in registers.</p>\n\n<p>With that small a problem size, you can have the FP weights just sitting there in memory, instead of re-computing them with integer->float conversion every time.</p>\n\n<p>Also, 10 bins is going to mean a lot of horizontal operations relative to the amount of vertical operations, since you only have 2 and a half vectors worth of data.</p>\n\n<p>If exactly 10 is really common, specialize a version for that.  If under-16 is common, specialize a version for that.  (They can and should share the <code>const float weights[] = { 0.0f, 1.0f, 2.0f, ...};</code> array.)</p>\n\n<p>You probably will want to use intrinsics for the specialized small-problem versions, rather than auto-vectorization.</p>\n\n<p>Having zero-padding after the end of the useful data in your array might still be a good idea in your specialized version(s).  However, you can load the last 2 floats and clear the upper 64b of a vector register with a <code>movq</code> instruction.  (<code>__m128i _mm_cvtsi64_si128 (__int64 a)</code>).  Cast this to <code>__m128</code> and you're good to go.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1438908448, "post_id": 31848976, "comment_id": 51655028, "body": "I think you meant to use <code>var2</code> as the accumulator in your loop."}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1438923481, "post_id": 31848976, "comment_id": 51658460, "body": "I meant to use <code>var</code>; anyway, arithmetic is now fixed. One shouldn&#39;t try to get rid of <code>fmean</code> calculation -- if done while updating the histogram, the cost is higher (assuming the histogram is updated much more frequently than 10 times). Same goes even for sum accumulating (assuming it&#39;s increased one per entry -- we haven&#39;t actually seen the definition or source code for that)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1438926345, "post_id": 31848976, "comment_id": 51659380, "body": "@trexgris should see some nice improvement in how well this vectorizes.  I hadn&#39;t realized the data started out as integer!  That makes adding the loop counter a ton easier.  For your first version, start with <code>setr_epi32(0-mid, 1-mid, 2-mid, 3-mid)</code>, and add <code>set1_epi32(sum)</code> every time.  Hopefully the auto-vectorizer sees that, and can vectorize without <code>-ffast-math</code> since it&#39;s all integers."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1438928113, "post_id": 31848976, "comment_id": 51660017, "body": "<code>gcc -O3 -msse4.2 -mtune=sandybridge</code> does great stuff with your version.  It unrolls the first loop completely, and optimizes away all the multiplies.  (using <code>leal  (%r9,%r9,2), %ecx</code> to multiply by 3, for example.)  It vectorizes the 2nd loop, using slow-ish-on-haswell-and-later 6x<code>pmulld</code> and vector add/subtract.  I think it could have done a better job, and IDK why there are so many conditional branches, <code>pmulld</code>s, and <code>imul</code>s.  Still should be pretty speedy.  It doesn&#39;t spot the trick I mentioned in my last comment, of adding <code>set1_epi32(sum)</code> to get <code>i*sum</code>."}], "tags": [], "owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1438926765, "last_edit_date": 1438926765, "creation_date": 1438844847, "answer_id": 31848976, "question_id": 31833965, "link": "https://stackoverflow.com/questions/31833965/fast-weighted-mean-variance-of-10-bins/31848976#31848976", "title": "Fast weighted mean &amp; variance of 10 bins", "body": "<p>The overall function to be calculated is</p>\n\n<pre><code>std = sqrt(SUM_i { hist[i]/sum * (midpoint_i - mean_midpoint)^2 })\n</code></pre>\n\n<p>Using the identity</p>\n\n<pre><code>Var (aX + b) = Var (X) * a^2\n</code></pre>\n\n<p>one can reduce the complexity of the overall operation considerably</p>\n\n<p>1) midpoint of a bin doesn't need offset b<br>\n2) no need to prescale by bin array elements with bin width</p>\n\n<p>and</p>\n\n<p>3) no need to normalize histogram entries with reciprocal of sum</p>\n\n<p>The optimized calculation goes as follows</p>\n\n<pre><code>float calcVariance(int histBin[], float binWidth)\n{\n     int i;\n     int sum = 0;\n     int mid = 0;\n     int var = 0;\n     for (i = 0; i &lt; 10; i++)\n     {\n          sum += histBin[i];\n          mid += i*histBin[i];\n     }\n\n     float inv_sum = 1.0f / (float)sum;\n     float mid_sum = mid * inv_sum;\n\n     for (i = 0; i &lt; 10; i++)\n     {\n         int diff = i * sum - mid;  // because mid is prescaled by sum\n         var += histBin[i] * diff * diff;\n     }\n\n     return sqrt(float(var) / (float)(sum * sum * sum)) * binWidth;\n}\n</code></pre>\n\n<p>Minor changes are required if it's <code>float histBin[]</code>; </p>\n\n<p>Also I second padding histBin size to a multiple of 4 for better vectorization.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Another way to calculate this with floats in the inner loop:</p>\n\n<pre><code> float inv_sum = 1.0f / (float)sum;\n float mid_sum = mid * inv_sum;\n float var = 0.0f;\n\n for (i = 0; i &lt; 10; i++)\n {\n      float diff = (float)i - mid_sum;\n      var += (float)histBin[i] * diff * diff;\n }\n return sqrt(var * inv_sum) * binWidth;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 0, "creation_date": 1438932370, "post_id": 31871223, "comment_id": 51661928, "body": "+1 I think OP needs to calculate standard deviation (instead of variance), but this is definitely the best approach so far."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 0, "creation_date": 1438951469, "post_id": 31871223, "comment_id": 51673624, "body": "@AkiSuihkonen: Thanks. The SSE code will be a little more complex if 32 bits arithmetic is required, but the basic principles remain. [Need to add the final horizontal accumulation as well.]"}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1438951581, "last_edit_date": 1438951581, "creation_date": 1438929579, "answer_id": 31871223, "question_id": 31833965, "link": "https://stackoverflow.com/questions/31833965/fast-weighted-mean-variance-of-10-bins/31871223#31871223", "title": "Fast weighted mean &amp; variance of 10 bins", "body": "<p>Perform the scaling on the global results only and keep integers as long as possible.</p>\n\n<p>Group all computation in a single loop, using <code>\u03a3(X-m)\u00b2/N = \u03a3X\u00b2/N - m\u00b2</code>.</p>\n\n<pre><code>// Accumulate the histogram\nint mean= 0, var= 0;\nfor (int i = 0; i &lt; numBins; ++i)\n{\n    mean+= i * histVec[i];\n    var+= i * i * histVec[i];\n}\n\n// Compute the reduced mean and variance\nfloat fmean= (float(mean) / sum);\nfloat fvar= float(var) / sum - fmean * fmean;\n\n// Rescale\nfmean= fmean * binSize + binOffset;\nfvar= fvar * binSize * binSize;\n</code></pre>\n\n<p>The required integer type will depend on the maximum value in the bins. The SSE optimization of the loop can exploit the <code>_mm_madd_epi16</code> instruction.</p>\n\n<p>If the number of bins is a small as 10, consider fully unrolling the loop. Precompute the <code>i</code> and <code>i\u00b2</code> vectors in a table.</p>\n\n<p>In the lucky case that the data fits in 16 bits and the sums in 32 bits, the accumulation is done with something like</p>\n\n<pre><code>    static short I[16]= { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0, 0, 0 };\n    static short I2[16]= { 0, 1, 4, 9, 16, 25, 36, 49, 64, 81, 0, 0, 0, 0, 0, 0 };\n\n    // First group\n    __m128i i= _mm_load_si128((__m128i*)&amp;I[0]);\n    __m128i i2= _mm_load_si128((__m128i*)&amp;I2[0]);\n    __m128i h= _mm_load_si128((__m128i*)&amp;inHist[0]);\n\n    __m128i mean= _mm_madd_epi16(i, h);\n    __m128i var= _mm_madd_epi16(i2, h);\n\n    // Second group\n    i= _mm_load_si128((__m128i*)&amp;I[8]);\n    i2= _mm_load_si128((__m128i*)&amp;I2[8]);\n    h= _mm_load_si128((__m128i*)&amp;inHist[8]);\n\n    mean= _mm_add_epi32(mean, _mm_madd_epi16(i, h));\n    var= _mm_add_epi32(var, _mm_madd_epi16(i2, h));\n</code></pre>\n\n<p>CAUTION: unchecked</p>\n"}], "owner": {"reputation": 333, "user_id": 2863527, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fe9dc5d0e50b50eab8b54a1e0334852b?s=128&d=identicon&r=PG&f=1", "display_name": "trexgris", "link": "https://stackoverflow.com/users/2863527/trexgris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1475300370, "creation_date": 1438781335, "last_edit_date": 1495541707, "question_id": 31833965, "link": "https://stackoverflow.com/questions/31833965/fast-weighted-mean-variance-of-10-bins", "title": "Fast weighted mean &amp; variance of 10 bins", "body": "<p>I would like to speed up a part of my code but I don't think there is a possible better way to do the following calculation:</p>\n\n<pre><code>float invSum = 1.0f / float(sum);\n\nfor (int i = 0; i &lt; numBins; ++i)\n{\n    histVec[i] *= invSum;\n}\n\nfor (int i = 0; i &lt; numBins; ++i)\n{\n    float midPoint = (float)i*binSize + binOffset;\n    float f = histVec[i];\n    fmean += f * midPoint;\n}\n\nfor (int i = 0; i &lt; numBins; ++i)\n{\n    float midPoint = (float)i*binSize + binOffset;\n    float f = histVec[i];\n    float diff = midPoint - fmean;\n    var += f * hwk::sqr(diff);\n}\n</code></pre>\n\n<p><code>numBins</code> in the for-loops is typically 10 but this bit of code is called very often (frequency of 80 frames per seconds, called at least 8 times per frame)</p>\n\n<p>I tried to use some SSE methods but it is only slightly speeding up this code.  I think I could avoid calculating twice midPoint but I am not sure how.  Is there a better way to compute fmean and var?</p>\n\n<p>Here is the SSE code:</p>\n\n<pre><code>// make hist contain a multiple of 4 valid values\n    for (int i = numBins; i &lt; ((numBins + 3) &amp; ~3); i++) \n        hist[i] = 0;\n\n// find sum of bins in inHist\n    __m128i iSum4 = _mm_set1_epi32(0);\n    for (int i = 0; i &lt; numBins; i += 4) \n    {\n        __m128i a = *((__m128i *) &amp;inHist[i]);\n        iSum4 = _mm_add_epi32(iSum4, a);\n    }\n\n    int iSum = iSum4.m128i_i32[0] + iSum4.m128i_i32[1] + iSum4.m128i_i32[2] + iSum4.m128i_i32[3];\n\n    //float stdevB, meanB;\n\n    if (iSum == 0.0f)\n    {\n        stdev = 0.0;\n        mean = 0.0;\n    }\n    else\n    {   \n        // Set histVec to normalised values in inHist\n        __m128 invSum = _mm_set1_ps(1.0f / float(iSum));\n        for (int i = 0; i &lt; numBins; i += 4) \n        {\n            __m128i a = *((__m128i *) &amp;inHist[i]);\n            __m128  b = _mm_cvtepi32_ps(a);\n            __m128  c = _mm_mul_ps(b, invSum);\n            _mm_store_ps(&amp;histVec[i], c);\n        }\n\n        float binSize = 256.0f / (float)numBins;\n        float halfBinSize = binSize * 0.5f;\n        float binOffset = halfBinSize;\n\n        __m128 binSizeMask = _mm_set1_ps(binSize);\n        __m128 binOffsetMask = _mm_set1_ps(binOffset);\n        __m128 fmean4 = _mm_set1_ps(0.0f);\n        for (int i = 0; i &lt; numBins; i += 4)\n        {\n            __m128i idx4 = _mm_set_epi32(i + 3, i + 2, i + 1, i);\n            __m128  idx_m128 = _mm_cvtepi32_ps(idx4);\n            __m128  histVec4 = _mm_load_ps(&amp;histVec[i]);\n            __m128  midPoint4 = _mm_add_ps(_mm_mul_ps(idx_m128, binSizeMask), binOffsetMask);\n            fmean4 = _mm_add_ps(fmean4, _mm_mul_ps(histVec4, midPoint4));\n        }\n        fmean4 = _mm_hadd_ps(fmean4, fmean4); // 01 23 01 23\n        fmean4 = _mm_hadd_ps(fmean4, fmean4); // 0123 0123 0123 0123\n\n        float fmean = fmean4.m128_f32[0]; \n\n        //fmean4 = _mm_set1_ps(fmean);\n        __m128 var4 = _mm_set1_ps(0.0f);\n        for (int i = 0; i &lt; numBins; i+=4)\n        {\n            __m128i idx4 = _mm_set_epi32(i + 3, i + 2, i + 1, i);\n            __m128  idx_m128 = _mm_cvtepi32_ps(idx4);\n            __m128  histVec4 = _mm_load_ps(&amp;histVec[i]);\n            __m128  midPoint4 = _mm_add_ps(_mm_mul_ps(idx_m128, binSizeMask), binOffsetMask);\n            __m128  diff4 = _mm_sub_ps(midPoint4, fmean4);\n            var4 = _mm_add_ps(var4, _mm_mul_ps(histVec4, _mm_mul_ps(diff4, diff4)));\n        }\n\n        var4 = _mm_hadd_ps(var4, var4); // 01 23 01 23\n        var4 = _mm_hadd_ps(var4, var4); // 0123 0123 0123 0123\n        float var = var4.m128_f32[0]; \n\n        stdev = sqrt(var);\n        mean = fmean;\n    }\n</code></pre>\n\n<p>I might be doing something wrong since I dont have a lot of improvement as I was expecting. \nIs there something in the SSE code that might possibly slow down the process?</p>\n\n<p>(editor's note: the SSE part of this question was originally asked as <a href=\"https://stackoverflow.com/questions/31837817/foor-loop-optimisation-sse-comparison\">https://stackoverflow.com/questions/31837817/foor-loop-optimisation-sse-comparison</a>, which was closed as a duplicate.)</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 9, "creation_date": 1438781218, "post_id": 31833894, "comment_id": 51589644, "body": "Uh... <code>vec[i][j]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1438781378, "post_id": 31833917, "comment_id": 51589806, "body": "To be safer, you could also use <code>std::cout&lt;&lt;vec.at(0).at(3);</code> which will work in a try/catch block"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 7, "last_activity_date": 1438781551, "last_edit_date": 1438781551, "creation_date": 1438781230, "answer_id": 31833917, "question_id": 31833894, "link": "https://stackoverflow.com/questions/31833894/how-to-refer-to-specific-character-of-a-string-in-a-string-vector/31833917#31833917", "title": "How to refer to specific character of a string in a string vector?", "body": "<p>the vector <code>[] operator</code> will return <code>std::string&amp;</code>, then you use <code>[] operator</code> of <code>std::string</code> to get the character (as <code>char&amp;</code>). </p>\n\n<pre><code>std::vector&lt;std::string&gt; vec{\"hello\",\"world\"};\nstd::cout&lt;&lt;vec[0][3];\n</code></pre>\n\n<p>as @RyanP commented, the method <code>std::vector::at</code> and <code>std::string::at</code> will preform <em>boundry check</em> and will throw an exception if you try to dereference an index which is bigger than the vector/string size. </p>\n\n<pre><code>try{\n   std::cout&lt;&lt;vec.at(0).at(3); \n}\ncatch (std::exception&amp; e){\n  //handle\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1438781444, "creation_date": 1438781444, "answer_id": 31834014, "question_id": 31833894, "link": "https://stackoverflow.com/questions/31833894/how-to-refer-to-specific-character-of-a-string-in-a-string-vector/31834014#31834014", "title": "How to refer to specific character of a string in a string vector?", "body": "<p>As you need to iterate over string in a vector, ie use it multiple times, create a (const) reference:</p>\n\n<pre><code>std::vector&lt;std::string&gt; vec { \"abc\", \"efg\" };\nfor( size_t i = 0; i &lt; vec.size(); ++i ) {\n    const auto &amp;str = vec[i];\n    for( size_t j = 0; j &lt; str.length(); ++j )\n        std::cout &lt;&lt; str[j];\n}\n</code></pre>\n\n<p>Otherwise you would have to write <code>vec[i][j]</code> multiple times, which is too verbose</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1438785785, "last_edit_date": 1438785785, "creation_date": 1438782239, "answer_id": 31834341, "question_id": 31833894, "link": "https://stackoverflow.com/questions/31833894/how-to-refer-to-specific-character-of-a-string-in-a-string-vector/31834341#31834341", "title": "How to refer to specific character of a string in a string vector?", "body": "<p>Here are shown different approaches</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::vector&lt;std::string&gt; v = { \"Hello\", \"World\" };\n\n    for ( const auto &amp;s : v )\n    {\n        for ( auto c : s ) std::cout &lt;&lt; c;\n        std::cout &lt;&lt; ' ';\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    for ( auto i = v.size(); i != 0; )\n    {\n        for ( auto j = v[--i].size(); j != 0; ) std::cout &lt;&lt; v[i][--j];\n        std::cout &lt;&lt; ' ';\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    for ( auto it1 = v.begin(); it1 != v.end(); ++it1 )\n    {\n        for ( auto it2 = it1-&gt;rbegin(); it2 != it1-&gt;rend(); ++it2 ) std::cout &lt;&lt; *it2;\n        std::cout &lt;&lt; ' ';\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Hello World \ndlroW olleH \nolleH dlroW \n</code></pre>\n\n<p>You can combine these approaches in various ways. </p>\n\n<p>If you want to change a character in a string using the range-based for statement then you have to write the loops the following way</p>\n\n<pre><code>    for ( auto &amp;s : v )\n    {\n        for ( auto &amp;c : s ) /* assign something to c */;\n    }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5016724, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/18878d8914df8cf946f98ab211575596?s=128&d=identicon&r=PG&f=1", "display_name": "aj1204", "link": "https://stackoverflow.com/users/5016724/aj1204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1438915569, "creation_date": 1438781160, "last_edit_date": 1438915569, "question_id": 31833894, "link": "https://stackoverflow.com/questions/31833894/how-to-refer-to-specific-character-of-a-string-in-a-string-vector", "title": "How to refer to specific character of a string in a string vector?", "body": "<p>I need to double-loop through the characters of each string in a vector array and am getting stuck on how what the syntax would be to call each character of each element.</p>\n"}, {"tags": ["c++", "assert", "c++03", "static-assert", "iterator-traits"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1438782056, "post_id": 31833617, "comment_id": 51590341, "body": "@Barry If I am forced to I will use Boost, but I&#39;d prefer to avoid it."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1438782548, "post_id": 31833617, "comment_id": 51590731, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/15200516/compare-typedef-is-same-type\">Compare typedef is same type</a>"}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1438782192, "post_id": 31834226, "comment_id": 51590448, "body": "As I mentioned in the question, I&#39;m OK with just using an <code>assert</code>. I&#39;m not trying to rewrite <code>static_assert</code> I&#39;m trying to rewrite <code>is_same</code> and <code>iterator_traits</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1438782503, "post_id": 31834226, "comment_id": 51590702, "body": "@JonathanMee <code>iterator_traits</code> already existed in C++03, and <code>is_same</code> is trivial. But updated to provide full solution."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1438782941, "post_id": 31834226, "comment_id": 51591029, "body": "Ugh, I was scared I&#39;d have to write a struct for validation."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1438783074, "post_id": 31834226, "comment_id": 51591150, "body": "@JonathanMee If the biggest problem in your code base is writing a 5-line metafunction, then you&#39;re doing pretty well."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1438783910, "post_id": 31834226, "comment_id": 51591761, "body": "Actually I think that my biggest problem is that I&#39;m using C++03."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1438782476, "last_edit_date": 1438782476, "creation_date": 1438781966, "answer_id": 31834226, "question_id": 31833617, "link": "https://stackoverflow.com/questions/31833617/validation-of-iterator/31834226#31834226", "title": "Validation of Iterator", "body": "<p>C++03 doesn't come with a <code>static_assert</code>-type thing, that's a C++11 feature. However, there's <a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/boost_staticassert.html\" rel=\"nofollow\"><code>BOOST_STATIC_ASSERT</code></a>. If Boost is not available to you, then this is actually a fairly straightforward thing to write:</p>\n\n<pre><code>namespace detail {\n    template &lt;bool &gt; struct my_static_assert;\n    template &lt;&gt; struct my_static_assert&lt;true&gt; { };\n\n    template &lt;size_t &gt; struct my_tester { };\n}\n\n#define MY_STATIC_ASSERT(B) \\\n    typedef ::detail::my_tester&lt; sizeof(::detail::my_static_assert&lt; ((B) == 0 ? false : true) &gt;)&gt; \\\n        my_static_assert_typedef_ ## __COUNTER__ __attribute__((unused))\n</code></pre>\n\n<p>The idea is that, we take our expression <code>B</code>, convert it to a <code>bool</code>, and use that in a context where if it's <code>true</code>, we'll have a complete type, and if it's <code>false</code>, we won't. You cannot take <code>sizeof()</code> an incomplete type, so that'll be a compile error. </p>\n\n<p>So if I did:</p>\n\n<pre><code>MY_STATIC_ASSERT(sizeof(int) &gt;= 5);\n</code></pre>\n\n<p>gcc gives me:</p>\n\n<pre><code>main.cpp: In function 'int main()':\nmain.cpp:9:92: error: invalid application of 'sizeof' to incomplete type 'detail::my_static_assert&lt;false&gt;'\n     typedef detail::my_tester&lt; sizeof(detail::my_static_assert&lt; ((B) == 0 ? false : true) &gt;)&gt; \\\n                                                                                            ^\nmain.cpp:15:5: note: in expansion of macro 'MY_STATIC_ASSERT'\n     MY_STATIC_ASSERT(sizeof(int) &gt;= 5); \n     ^\n</code></pre>\n\n<p>It's not quite as nice as:</p>\n\n<pre><code>main.cpp:15:5: error: static assertion failed: \n     static_assert(sizeof(int) &gt;= 5, \"\"); \n     ^\n</code></pre>\n\n<p>but then, that's what happens when you don't have a language feature.</p>\n\n<hr />\n\n<p>With that, we can convert:</p>\n\n<pre><code>static_assert(std::is_same&lt;std::iterator_traits&lt;InputIterator&gt;::value_type, int&gt;(),\n              \"Not an int iterator\");\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>namespace details {\n    template &lt;typename T, typename U&gt;\n    struct is_same { static const bool value = false; };\n\n    template &lt;typename T&gt;\n    struct is_same&lt;T, T&gt; { static const bool value = true; };\n}\n\nMY_STATIC_ASSERT(details::is_same&lt;\n    std::iterator_traits&lt;InputIterator&gt;::value_type, int\n    &gt;::value); // Not an int iterator\n</code></pre>\n\n<p><code>iterator_traits</code> already existed in C++03, and adding a comment will let the message show up in the compile error.</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1438783549, "creation_date": 1438783549, "answer_id": 31834851, "question_id": 31833617, "link": "https://stackoverflow.com/questions/31833617/validation-of-iterator/31834851#31834851", "title": "Validation of Iterator", "body": "<p>Since the parameters of the question are:</p>\n\n<blockquote>\n  <p>A way to do this beyond writing my own struct for validation</p>\n</blockquote>\n\n<p>And it is assumed:</p>\n\n<blockquote>\n  <p>I'll have to use an <code>assert</code> and that's fine if it's a runtime only debug check</p>\n</blockquote>\n\n<p>You can use <a href=\"http://en.cppreference.com/w/cpp/language/typeid\" rel=\"nofollow\"><code>typeid</code></a> in C++03:</p>\n\n<pre><code>assert(typeid(iterator_traits&lt;InputIterator&gt;::value_type) == typeid(int));\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 31834851, "answer_count": 2, "score": 2, "last_activity_date": 1438783582, "creation_date": 1438780430, "last_edit_date": 1438783582, "question_id": 31833617, "link": "https://stackoverflow.com/questions/31833617/validation-of-iterator", "title": "Validation of Iterator", "body": "<p>I am working in a C++03 project. And I'm taking an iterator into a template. I need to assert that this iterator references a specific type. <strong>Does C++ provide me a way to do this beyond writing my own struct for validation?</strong></p>\n\n<p>What I want is the equivalent of this C++14 functionality:</p>\n\n<pre><code>static_assert(is_same&lt;iterator_traits&lt;InputIterator&gt;::value_type, int&gt;(), \"Not an int iterator\");\n</code></pre>\n\n<p>Since it's C++03 I assume that I'll have to use an <code>assert</code> and that's fine if it's a runtime only debug check I just need the check to be there.</p>\n"}, {"tags": ["c++", "regex", "qt", "qstring"], "comments": [{"owner": {"reputation": 987, "user_id": 2029960, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de66cac08607f4a8f77e2ae6bbc5e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Mosi", "link": "https://stackoverflow.com/users/2029960/mosi"}, "edited": false, "score": 0, "creation_date": 1438780335, "post_id": 31833518, "comment_id": 51588951, "body": "Note that I cant use QString::replace since the string in which is aimed to replace with $x$ is not constant."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1438781018, "post_id": 31833518, "comment_id": 51589478, "body": "You can split the string using <code>QStringList list = str.split(QRegExp(&quot;\\\\$[^$]+\\\\$&quot;));</code>  and then loop through the items and join them with incrementing numbers."}, {"owner": {"reputation": 3133, "user_id": 1741118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af1b28a58919ecf6420f71fa188b509d?s=128&d=identicon&r=PG", "display_name": "Shf", "link": "https://stackoverflow.com/users/1741118/shf"}, "edited": false, "score": 0, "creation_date": 1438786999, "post_id": 31833518, "comment_id": 51594141, "body": "You can also use <code>QString::section()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1234, "user_id": 4780422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9596b4921462c9b3cde54012e8c15826?s=128&d=identicon&r=PG&f=1", "display_name": "t3ft3l--i", "link": "https://stackoverflow.com/users/4780422/t3ft3l-i"}, "is_accepted": false, "score": 0, "last_activity_date": 1438788606, "creation_date": 1438788606, "answer_id": 31836745, "question_id": 31833518, "link": "https://stackoverflow.com/questions/31833518/qstring-parse-and-replace-some-specific-sections/31836745#31836745", "title": "QString, Parse and replace some specific sections", "body": "<p>I realy can't understand why you don't want to use loops. I think it is very effective way in your case. </p>\n\n<p>I write some example, but do not claim authorship the best solution:</p>\n\n<pre><code>QString str = \"23+34-343+$T$-3+$OPC$\";\n\nint pos = 0, nextPos = 0, iterationNumber = 0;\nwhile ((pos = str.indexOf(\"$\")) &gt; 0 &amp;&amp; (nextPos = str.indexOf(\"$\", pos + 1)) &gt; 0)\n    str.replace(pos, nextPos - pos + 1, \"%\" + QString::number(iterationNumber++));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 4902964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qDwLr.jpg?s=128&g=1", "display_name": "Musa", "link": "https://stackoverflow.com/users/4902964/musa"}, "is_accepted": true, "score": 0, "last_activity_date": 1438849704, "creation_date": 1438849704, "answer_id": 31850602, "question_id": 31833518, "link": "https://stackoverflow.com/questions/31833518/qstring-parse-and-replace-some-specific-sections/31850602#31850602", "title": "QString, Parse and replace some specific sections", "body": "<p>How is this:</p>\n\n<pre><code>QString str = \"23+34-343+$T$-3+$OPC$\";\n\nQRegExp rx;\nrx.setMinimal(true);\nrx.setPattern(\"\\\\$.+\\\\$\");\nstr.replace(rx, \"X\");           //First replace every pattern with something like 'X'\n\nfor(int i=0 ;str.indexOf(\"X\")!=-1; i++)\n    str.replace(str.indexOf(\"X\"), 1,\"%\"+QString::number(i));\n</code></pre>\n"}], "owner": {"reputation": 987, "user_id": 2029960, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de66cac08607f4a8f77e2ae6bbc5e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Mosi", "link": "https://stackoverflow.com/users/2029960/mosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 1, "accepted_answer_id": 31850602, "answer_count": 2, "score": 1, "last_activity_date": 1438849704, "creation_date": 1438780167, "question_id": 31833518, "link": "https://stackoverflow.com/questions/31833518/qstring-parse-and-replace-some-specific-sections", "title": "QString, Parse and replace some specific sections", "body": "<p>Suppose I have a string like this:</p>\n\n<pre><code>QString str = \"23+34-343+$T$-3+$OPC$\";\n</code></pre>\n\n<p>I want to replace every sections which are enclosed by two $ will be replaced with %0, %1 and so on. \nSo the above example would be : \"23+34-343+%0-3+%1\"</p>\n\n<p>I can detect the sections by using QRegularExpression and with this pattern: \"\\$.+?\\$\"</p>\n\n<p>What is the best and most optimized way (not to use loops and indices) to replace those sections with %0, %1, %2  and so on.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest", "googlemock"], "answers": [{"tags": [], "owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "is_accepted": true, "score": 6, "last_activity_date": 1438907344, "creation_date": 1438907344, "answer_id": 31867863, "question_id": 31833494, "link": "https://stackoverflow.com/questions/31833494/accessing-test-info-in-google-test-parameterized-test-case-test-p/31867863#31867863", "title": "Accessing test info in Google Test parameterized test case (`TEST_P`)", "body": "<p>There's actually a getter for the <code>TestInfo</code> instance.  From <a href=\"https://code.google.com/p/googletest/wiki/AdvancedGuide#Getting_the_Current_Test%27s_Name\" rel=\"noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>To obtain a <code>TestInfo</code> object for the currently running test, call \n   <code>current_test_info()</code> on the <code>UnitTest</code> singleton object:</p>\n\n<pre><code>// Gets information about the currently running test.\n// Do NOT delete the returned object - it's managed by the UnitTest class.\nconst ::testing::TestInfo* const test_info =\n  ::testing::UnitTest::GetInstance()-&gt;current_test_info();\nprintf(\"We are in test %s of test case %s.\\n\",\n       test_info-&gt;name(), test_info-&gt;test_case_name());\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3631, "favorite_count": 0, "accepted_answer_id": 31867863, "answer_count": 1, "score": 1, "last_activity_date": 1438907344, "creation_date": 1438780123, "question_id": 31833494, "link": "https://stackoverflow.com/questions/31833494/accessing-test-info-in-google-test-parameterized-test-case-test-p", "title": "Accessing test info in Google Test parameterized test case (`TEST_P`)", "body": "<p>When I create a regular <code>TEST</code> (or <code>TEST_F</code>), I can access to the test case information stored in <code>test_info_</code>, like: </p>\n\n<pre><code>TEST_F(MyTestSuite, TestCaseOne) \n{\n  // ... \n  test_info_-&gt;name(); // will return \"TestCaseOne\"\n}\n</code></pre>\n\n<p>I would like to access this kind of information when I use the parameterized (<code>TEST_P</code>) variant, which allows me to define fixture-based tests. </p>\n\n<p>Looking under the hood, I can see that <code>TEST_P</code> works quite differently than her cousins <code>TEST</code>and <code>TEST_F</code>, as it <em>registers</em> the new test case by calling <code>::testing::UnitTest::GetInstance()-&gt;parameterized_test_registry().GetTestCasePatternHolder&lt;test_case_name&gt;(#test_case_name, __FILE__, __LINE__)-&gt;AddTestPattern(...)</code> method. I understand that the class inheriting from <code>TestWithParam</code> will then run all the registered <code>TEST_P</code>s test cases. </p>\n\n<p>Is there a way to access (either runtime or compile time) to the name (string) of a <code>TEST_P</code>?</p>\n"}]