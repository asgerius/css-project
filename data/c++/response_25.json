[{"tags": ["javascript", "c++", "json", "parameter-passing", "v8"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1435794098, "post_id": 31173364, "comment_id": 50354459, "body": "An easy way to do this would be for your C++ program to act as an http server, and then the script can just request data from it using XMLHttpRequest."}, {"owner": {"reputation": 1501, "user_id": 1502810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2785f67e7be660cffe1c9d321e0bad69?s=128&d=identicon&r=PG", "display_name": "celticminstrel", "link": "https://stackoverflow.com/users/1502810/celticminstrel"}, "edited": false, "score": 0, "creation_date": 1435794494, "post_id": 31173364, "comment_id": 50354554, "body": "Nice idea, but making an HTTP server in C++ is not especially easy."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1435794885, "post_id": 31173364, "comment_id": 50354666, "body": "@SkyHigh Yeah, you&#39;re gonna want to actually send the data, not just rewrite a file that needs to be loaded later. You might want to look into Node.js + C++ or Boost.Asio"}, {"owner": {"reputation": 944, "user_id": 236885, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab8e32ecf90457cfb9ca8f1a73d593f1?s=128&d=identicon&r=PG", "display_name": "bialpio", "link": "https://stackoverflow.com/users/236885/bialpio"}, "edited": false, "score": 0, "creation_date": 1435798814, "post_id": 31173364, "comment_id": 50355563, "body": "Maybe you can use some C++ REST framework to expose an API to which your website can periodically send queries?"}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 1259323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83caf50b4989fdaf286d63c84165001a?s=128&d=identicon&r=PG", "display_name": "TheZapper", "link": "https://stackoverflow.com/users/1259323/thezapper"}, "is_accepted": true, "score": 1, "last_activity_date": 1435928951, "creation_date": 1435928951, "answer_id": 31207661, "question_id": 31173364, "link": "https://stackoverflow.com/questions/31173364/passing-value-from-c-to-javascript/31207661#31207661", "title": "Passing Value from C++ to Javascript", "body": "<p>You could compile your C++ code into a Node.js plugin, you can then register a JavaScript function with your plugin which the C++ calls when it updates the value.  That way you can pass values directly from C++ into Javascript in a managed and controlled way.  </p>\n\n<p>Node.js has the added benefit of being able to host your webpage and do all the Websocket and HTTP stuff that can be a pain in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1496812945, "post_id": 31207755, "comment_id": 75807367, "body": "This link is dead. You should add it to the answer."}], "tags": [], "owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "is_accepted": false, "score": 0, "last_activity_date": 1435929276, "creation_date": 1435929276, "answer_id": 31207755, "question_id": 31173364, "link": "https://stackoverflow.com/questions/31173364/passing-value-from-c-to-javascript/31207755#31207755", "title": "Passing Value from C++ to Javascript", "body": "<p>You do not have to refresh if your script is smart about how to access the data file! In case you do have a webserver at hand: Take care that your data file is accessible by your webserver and then let your script request the file via ajax (<a href=\"http://www.w3schools.com/ajax/ajax_examples.asp\" rel=\"nofollow\">link to w3schools</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 3865173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809b75b236d9f670b374b6ccc223bab?s=128&d=identicon&r=PG&f=1", "display_name": "mbbackus", "link": "https://stackoverflow.com/users/3865173/mbbackus"}, "is_accepted": false, "score": 0, "last_activity_date": 1451696502, "creation_date": 1451696502, "answer_id": 34561588, "question_id": 31173364, "link": "https://stackoverflow.com/questions/31173364/passing-value-from-c-to-javascript/34561588#34561588", "title": "Passing Value from C++ to Javascript", "body": "<p>I'm doing something similar on a BeagleBone Black. With websocketd you can turn pretty much any program into a websocket endpoint and then send data via stdin and stdout commands. This would be a particularly good solution for you since websockets are designed to handle information that's constantly changing.</p>\n"}], "owner": {"reputation": 69, "user_id": 4905361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/483817efd9e15e2493b6f92c263a31c8?s=128&d=identicon&r=PG&f=1", "display_name": "SkyHigh", "link": "https://stackoverflow.com/users/4905361/skyhigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3059, "favorite_count": 0, "accepted_answer_id": 31207661, "answer_count": 3, "score": 0, "last_activity_date": 1451696502, "creation_date": 1435793732, "last_edit_date": 1435926068, "question_id": 31173364, "link": "https://stackoverflow.com/questions/31173364/passing-value-from-c-to-javascript", "title": "Passing Value from C++ to Javascript", "body": "<p>i have a c++ file which reads values from a sensor and I want to display those values on a website dynamically. So Im looking for a way to pass these values(integers) from my cpp file to an javascript which displays them on the site.</p>\n\n<p>My first, simple try was to write the values into a js file as variables every second from my cpp script. The Js then uses this file as a source and displays its variables on the site:</p>\n\n<p>cpp:</p>\n\n<pre><code>fprintf(file, \"var mx=%d, my=%d, mz=%d, ax=%d, ay=%d, az=%d, gx=%d, gy=%d, gz=%d;\\n\",\n    imu.raw_m[0], imu.raw_m[1], imu.raw_m[2],       // M = Magnetometer\n    imu.raw_a[0], imu.raw_a[1], imu.raw_a[2],       // A = Accelerometer\n    imu.raw_g[0], imu.raw_g[1], imu.raw_g[2]        // G = Gyroscope\n);\n</code></pre>\n\n<p>html/js:</p>\n\n<pre><code>&lt;script src=\"./imu.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>The Problem now is of course, that I need to refresh the page all the time, because the imu.js file is cached by the website.</p>\n\n<p>I'd rather have a way to directly pass to integers from the cpp file to the js script. I read something about json or Googles V8 script. But I'd like to hear your suggestions first.</p>\n\n<p>By the way, Im running this on a raspi, if this is important.</p>\n\n<p>Thanks for your help</p>\n\n<p>EDIT:</p>\n\n<p>I'm goning to try it with a mysql database, in which my cpp file writes the data from the sensor with Connector/c++ from <a href=\"http://dev.mysql.com/doc/connector-cpp/en/\" rel=\"nofollow\">http://dev.mysql.com/doc/connector-cpp/en/</a> and my website reads them.</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435793514, "post_id": 31173299, "comment_id": 50354318, "body": "Use <code>std::make_unique</code>, which forwards its arguments to the constructor."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435793623, "post_id": 31173299, "comment_id": 50354338, "body": "I tried, but I can&#180;t make it compile... seens that std::make_unique is not supported on C++11...."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435793716, "post_id": 31173299, "comment_id": 50354361, "body": "Can you show the code that didn&#39;t work?"}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435793903, "post_id": 31173299, "comment_id": 50354410, "body": "&#39;std::unique_ptr&lt;MyClass&gt; temp = std::make_unique&lt;MyClass&gt;(data); \t\ttheClassPtr = std::move(temp);&#39;"}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435794058, "post_id": 31173299, "comment_id": 50354451, "body": "Check the error here <a href=\"http://coliru.stacked-crooked.com/a/fb3148d5886ba29e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/fb3148d5886ba29e</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435794655, "post_id": 31173299, "comment_id": 50354600, "body": "Wow, I&#39;m so used to working on projects that have this fixed I forgot that a workaround was needed!"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1435806905, "post_id": 31173299, "comment_id": 50357281, "body": "Something that I noticed with your code that would help but doesn&#39;t address your current question. In your first class&#39;s constructor it is only taking 1 argument - I would use the explicit keyword before the Constructor&#39;s name in its declaration. Also in both of your classes there is no need to have your destructors as virtual since you are not using inheritance. If you only need the default destructors then you can omit them altogether."}], "answers": [{"tags": [], "owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "is_accepted": false, "score": 1, "last_activity_date": 1435793845, "creation_date": 1435793845, "answer_id": 31173381, "question_id": 31173299, "link": "https://stackoverflow.com/questions/31173299/c-how-to-create-a-stdunique-ptr-from-a-class-that-takes-parameters-on-constr/31173381#31173381", "title": "C++ How to create a std::unique_ptr from a class that takes parameters on constructor", "body": "<pre><code>#include &lt;memory&gt;\n...\n\nint main()\n{\n    std::string testString{ \"Testing 1...2....3\" };\n    auto test = std::make_unique&lt;MyClass&gt;( testString );\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435795599, "post_id": 31173499, "comment_id": 50354880, "body": "Or, you could simply eliminate the <code>test</code> variable and just use <code>theClassPtr.reset(new MyClass(data));</code> instead."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435796220, "post_id": 31173499, "comment_id": 50355016, "body": "@RemyLebeau Thank you, I lost sight of the original problem, thanks for pointing that out. Now fixed."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 9, "last_activity_date": 1435796180, "last_edit_date": 1435796180, "creation_date": 1435794624, "answer_id": 31173499, "question_id": 31173299, "link": "https://stackoverflow.com/questions/31173299/c-how-to-create-a-stdunique-ptr-from-a-class-that-takes-parameters-on-constr/31173499#31173499", "title": "C++ How to create a std::unique_ptr from a class that takes parameters on constructor", "body": "<p><strong>You can do:</strong></p>\n\n<pre><code>std::unique_ptr&lt;MyClass&gt; test(new MyClass(data));\n</code></pre>\n\n<p><strong>Or if you have <code>C++14</code></strong></p>\n\n<pre><code>auto test = std::make_unique&lt;MyClass&gt;(data);\n</code></pre>\n\n<p><strong>But:</strong></p>\n\n<p>In the provided example there is no need to create a temporary variable, you can just use the <code>reset</code> method of the class member:</p>\n\n<pre><code>theClassPtr.reset(new MyClass(data));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435795281, "post_id": 31173515, "comment_id": 50354784, "body": "Adding functions to std is illegal.  Put it in <code>notstd</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435795446, "post_id": 31173515, "comment_id": 50354834, "body": "If it&#39;s illegal, then every C++ standard is illegal."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435795919, "post_id": 31173515, "comment_id": 50354955, "body": "@DavidSchwartz: perhaps you meant &quot;every C++ standard <i>library implementation</i> is illegal&quot;?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435796659, "post_id": 31173515, "comment_id": 50355116, "body": "How the functions get in <code>std</code> is undefined.  Bit it is clearly illegal for a C++ program to add functions to the <code>std</code> namespace (other than via those <code>#include</code> directives).  Yes, it is likely to work, but so was accessing 3 ints in a row on the stack by pointer arithmetic at one point.  Don&#39;t ignore the standard and venture into ill formed programs when there isn&#39;t a good reason."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435845127, "post_id": 31173515, "comment_id": 50378270, "body": "@Yakk There is a good reason -- to be able to write programs today that are ready for C++14. This is way better than having to fix the code everywhere, a lesson painfully learned by not doing this for C++11."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435859369, "post_id": 31173515, "comment_id": 50387619, "body": "@david odr, standard changes, bugs in your implementation or your std library, incoming modules are all possible issues.  Plus your code is explicitly banned in the standard as making your program ill formed.  The cost of using <code>notstd</code> or similar is deleting 3 characters, or if that is too much work adding <code>using std::make_unique</code> to <code>notstd</code>.  Your reason is meh, not good: on the other hand, &quot;fastest possible delegates&quot; is an example of a good reason to write an ill formed program."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1435794690, "creation_date": 1435794690, "answer_id": 31173515, "question_id": 31173299, "link": "https://stackoverflow.com/questions/31173299/c-how-to-create-a-stdunique-ptr-from-a-class-that-takes-parameters-on-constr/31173515#31173515", "title": "C++ How to create a std::unique_ptr from a class that takes parameters on constructor", "body": "<p>It's basically an oversight. You need this:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nnamespace std\n{\n\n    template &lt;class T, class... Args&gt;\n    std::unique_ptr &lt;T&gt; make_unique (Args&amp;&amp;... args)\n    {\n        return std::unique_ptr &lt;T&gt; (new T (std::forward &lt;Args&gt; (args)...));\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1435799807, "creation_date": 1435799807, "answer_id": 31174190, "question_id": 31173299, "link": "https://stackoverflow.com/questions/31173299/c-how-to-create-a-stdunique-ptr-from-a-class-that-takes-parameters-on-constr/31174190#31174190", "title": "C++ How to create a std::unique_ptr from a class that takes parameters on constructor", "body": "<p>C++14 comes with <code>std::make_unique</code>.  It was omitted from C++11.</p>\n\n<p>Writing it yourself is easy:</p>\n\n<pre><code>namespace notstd{\n  template&lt;class T,class...Args&gt;\n  std::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;...args){\n    return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n  }\n}\n</code></pre>\n\n<p>now use it like this:</p>\n\n<pre><code>auto foo = notstd::make_unique&lt;MyClass&gt;(string);\n</code></pre>\n\n<p>will make your unique ptr for you.</p>\n\n<p>This pattern has a few advantages.  First, it removes a <code>new</code> that is not paired with a <code>delete</code> from \"user code\", which makes me happy.</p>\n\n<p>Second, if you call a function that takes 2 unque ptrs, ths above can avoid leaks in case of exceptions being thrown.</p>\n\n<p>We put this in <code>notstd</code> as injecting new functions into <code>std</code> is illegal inder the standard (no diagnostic required).</p>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4249, "favorite_count": 1, "accepted_answer_id": 31173499, "answer_count": 4, "score": 8, "last_activity_date": 1435799807, "creation_date": 1435793420, "question_id": 31173299, "link": "https://stackoverflow.com/questions/31173299/c-how-to-create-a-stdunique-ptr-from-a-class-that-takes-parameters-on-constr", "title": "C++ How to create a std::unique_ptr from a class that takes parameters on constructor", "body": "<p>I need to create a <code>std::unique_ptr</code> from a class that has a constructor that takes one parameter. I can\u00b4t find references on how to do it. Here is the code example that cannot compile:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;memory&gt;\n\nclass MyClass {\n\n    public:\n        MyClass(std::string name);\n        virtual ~MyClass();\n\n    private: \n        std::string myName;\n};\n\nMyClass::MyClass(std::string name) : myName(name) {}\nMyClass::~MyClass() {}\n\nclass OtherClass {\n\n    public:\n        OtherClass();\n        virtual ~OtherClass();\n\n        void MyFunction(std::string data);\n\n        std::unique_ptr&lt;MyClass&gt; theClassPtr;\n};\n\nOtherClass::OtherClass() {}\nOtherClass::~OtherClass() {}\n\nvoid OtherClass::MyFunction(std::string data)\n{\n    std::unique_ptr&lt;MyClass&gt; test(data); &lt;---------- PROBLEM HERE!\n    theClassPtr = std::move(test);\n}\n\nint main()\n{\n    OtherClass test;\n    test.MyFunction(\"This is a test\");\n}\n</code></pre>\n\n<p>The errors are related to the way I\u00b4m initializing the <code>std::unique_ptr</code>, pointed out in my code.</p>\n\n<p>The original code and the errors can be found <a href=\"http://coliru.stacked-crooked.com/a/8b426bc31bbe8ad3\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Thanks for helping me to solve that.</p>\n"}, {"tags": ["c++", "iostream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1435793631, "post_id": 31173298, "comment_id": 50354340, "body": "That code is such flawed, I don&#39;t know where to start for corrections :-( ..."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1435793940, "post_id": 31173298, "comment_id": 50354418, "body": "Just my opinion, but if you don&#39;t feel comfortable with it then maybe try writing your own; something you will understand. It doesn&#39;t look like a very self-explainable bit of code (<code>!(cin &gt;&gt; ar[i])</code>). There are a number of ways to handle input errors, just take the concept and give it a try! ;)"}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 4621600, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-TEMAEQdW2Is/AAAAAAAAAAI/AAAAAAAACSI/K0hm9r-kWcE/photo.jpg?sz=128", "display_name": "Nicholas Greene", "link": "https://stackoverflow.com/users/4621600/nicholas-greene"}, "is_accepted": false, "score": 3, "last_activity_date": 1435798806, "creation_date": 1435798806, "answer_id": 31174041, "question_id": 31173298, "link": "https://stackoverflow.com/questions/31173298/how-whilecin-x-works-to-re-prompt-for-input/31174041#31174041", "title": "How while(!(cin &gt;&gt; x)) works to re-prompt for input", "body": "<p>The goal of this entire code is to keep printing errors and requesting input until the user enters a valid number before continue further into the program.</p>\n\n<p>The loop that the entire code is enclosed in...</p>\n\n<pre><code>while(!(cin &gt;&gt; ar[i]))\n</code></pre>\n\n<p>says to loop if the input in the <em>cin</em> stream is invalid. Since <em>ar</em> is an array of integers, the input would be invalid if it is not a number. </p>\n\n<pre><code>cin.clear(); // clears bad input\n</code></pre>\n\n<p>When the <em>cin</em> stream encounters invalid input, the program begins executing the loop and continues to this line of code. Since the stream encountered invalid input, it has a flag that says there is an error. This requires that you, as the comment puts it, \"clear bad input.\" Basically what this does is get rid of this flag. If this is not done, the flag will remain in the stream and the program will encounter another error next time the <em>cin</em> stream is used, regardless of whether or not the user input is valid.</p>\n\n<pre><code> while(cin.get() != '\\n')\n        continue;\n</code></pre>\n\n<p>When the program took the input from the user, it took the string, char, whatever was the invalid input, but left the '\\n' in the <em>cin</em> stream. To prevent errors the next time the <em>cin</em> stream is used, the program must get rid of that '\\n', along with anything else that was lefty behind. cin.get() reads only one char from the <em>cin</em> input stream and returns it. Since the return value of this function is not being assigned to anything, all this does is discard the char that was read. In the case that more than the '\\n' was left behind in the stream, this loop checks the value of the read char before disposing of it. This way, the loop keeps executing while the char that is read is NOT '\\n'. Or in other words, it loops until the char that is read IS '\\n'. The only thing that <em>continue</em> does, is tell the program to skip the rest of the current iteration of the loop and start the next iteration. In this situation, this is equivalent to giving the loop an empty body. You could very well replace <em>continue;</em> with <em>{}</em> and the program would do the exact same thing.</p>\n\n<pre><code>cout &lt;&lt; \"Invalid input, please enter valid scores\";\n</code></pre>\n\n<p>The program has cleared the flag in <em>cin</em> and has also cleared any data from <em>cin</em> that may have been left behind. Now that all the errors from the invalid input have been handled, there is only one more thing to do. It's time to notify he user that the input was invalid and request new input. If the user enters more invalid input, the loop repeats. If the user enters valid input, the program continues on to the next line of code. </p>\n"}, {"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": true, "score": 4, "last_activity_date": 1435997300, "last_edit_date": 1435997300, "creation_date": 1435798953, "answer_id": 31174071, "question_id": 31173298, "link": "https://stackoverflow.com/questions/31173298/how-whilecin-x-works-to-re-prompt-for-input/31174071#31174071", "title": "How while(!(cin &gt;&gt; x)) works to re-prompt for input", "body": "<pre><code>while(!(cin &gt;&gt; ar[i]))\n</code></pre>\n\n<p>This tries to parse a value from <code>cin</code> and store it in <code>ar[i]</code>.  By default, <code>&gt;&gt;</code> skips whitespace first, then sees if the characters in <code>cin</code> describe a legal value for whatever the type of <code>ar[i]</code> is.  If a legal value is found, then <code>cin</code> stream state remains <code>good</code>, and its <code>operator bool() const</code> will kick in given the boolean <code>not</code>/<code>!</code> operation, such that the <code>while</code> loop will break.</p>\n\n<p>If parsing fails though, the stream state will be set to one or more of:</p>\n\n<ul>\n<li><p><code>bad</code> (if there's some unrecoverable stream error, like stdin supplied over a network connection that gets disconnected),</p></li>\n<li><p><code>fail</code> (if the characters just didn't form a legal value for the type), or</p></li>\n<li><p><code>eof</code> (end of file, for a \"proper\" shutdown/close of the input, as supplied by ^D in UNIX/Linux, ^Z in Windows, and the end of input when a program's invoked as in <code>echo input | program</code>).</p></li>\n</ul>\n\n<p>All the above modalities are described under \"State Functions\" <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream\" rel=\"nofollow\">here</a>.</p>\n\n<p>If the loop is entered due to any of the error conditions above...</p>\n\n<pre><code>{\n    cin.clear(); // clears bad input\n</code></pre>\n\n<p>...this does NOT clear any input data from the stream, but does clear the <code>bad</code>, <code>eof</code> and <code>fail</code> state flags, after which further input attempts can be made, though a stream that was in <code>bad</code> or <code>eof</code> state is likely to immediately reenter that state when further input is attempted (but not always - some OS may allow successful input after an <code>eof</code> conditions for <code>std::cin</code> if the user types/generates an EOF code then types actual text again...</p>\n\n<pre><code>    while(cin.get() != '\\n')\n        continue;\n</code></pre>\n\n<p>This tries to read characters from the terminal until a newline <code>\\n</code> is encountered.  The idea's clearly to clear out the rest of the presumed unparse-able input that might have led to a <code>fail</code> condition earlier.  Sadly, if the problem was, or becomes, a <code>bad</code> or <code>eof</code> condition then this loop will hang the program, spinning burning CPU to no avail.</p>\n\n<pre><code>    cout &lt;&lt; \"Invalid input, please enter valid scores\";\n}\n</code></pre>\n\n<p>If the problem was simply a mistyped value and no <code>bad</code> or <code>eof</code> condition, then the <code>cout</code> will prompt for further input.</p>\n\n<hr>\n\n<blockquote>\n  <p>Now if I just press enter nothing happens, but isnt enter the newline char?</p>\n</blockquote>\n\n<p>Whenever the outer loop is executing <code>cin &gt;&gt; ar[i]</code> it will skip whitespace, including any extra newlines you type, until it sees some input (which may need to be a full newline-terminated line to get flushed by the terminal or program feeding it to the program), or a <code>bad</code> or <code>eof</code> condition.  The inner while-loop is not there to get rid of empty lines - it's trying to discard the line with presumed non-numeric text in it.</p>\n\n<hr>\n\n<p>Corrected code:</p>\n\n<pre><code>while (!(std::cin &gt;&gt; ar[i]))\n{\n    if (std::cin.bad() || std::cin.eof())\n    {\n        std::cerr &lt;&lt; \"Fatal error on cin while reading numbers\\n\";\n        exit(EXIT_FAILURE);\n    }\n    std::cin.clear();\n    std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    std::cout &lt;&lt; \"Invalid input, please enter valid scores\\n: \";\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4388084"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 1, "accepted_answer_id": 31174071, "answer_count": 2, "score": 3, "last_activity_date": 1435997300, "creation_date": 1435793412, "last_edit_date": 1435858896, "question_id": 31173298, "link": "https://stackoverflow.com/questions/31173298/how-whilecin-x-works-to-re-prompt-for-input", "title": "How while(!(cin &gt;&gt; x)) works to re-prompt for input", "body": "<pre><code>while(!(cin &gt;&gt; ar[i]))\n    {\n        cin.clear(); // clears bad input\n        while(cin.get() != '\\n')\n            continue;\n        cout &lt;&lt; \"Invalid input, please enter valid scores\";\n    }\n</code></pre>\n\n<p>The above code is from a much larger file. I copied this bit of a code from one of my textbooks and I don't really feel comfortable using it as I do not understand how this works. </p>\n\n<p>I am using it as a measure to handle input errors. </p>\n\n<p>So <code>ar</code> is an empty array of integers, if I decide to enter 'k', then</p>\n\n<pre><code>!(cin &gt;&gt; ar[i]) \n</code></pre>\n\n<p>is true.</p>\n\n<p>From here I clear the input buffer (I think that is correct, I'd like someone to confirm or dispute this please). The terminal then prints \"Invalid input...\" \nNow if I just press <kbd>Enter</kbd> nothing happens, but isn't <kbd>Enter</kbd> the newline char? So shouldn't the code read</p>\n\n<pre><code>while(cin.get() == '\\n'\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 741, "user_id": 1269828, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34a1ce75a36adaecb7a324faad534004?s=128&d=identicon&r=PG", "display_name": "laishiekai", "link": "https://stackoverflow.com/users/1269828/laishiekai"}, "edited": false, "score": 0, "creation_date": 1435792869, "post_id": 31173204, "comment_id": 50354163, "body": "Branch your codes and keep two versions?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1435792918, "post_id": 31173204, "comment_id": 50354180, "body": "Sure about <code>#ifdef RTSPServer::RTSPClientSession</code>? That&#39;s neither a valid preprocessor symbol, nor seen from the preprocessor at all."}, {"owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "edited": false, "score": 0, "creation_date": 1435793040, "post_id": 31173204, "comment_id": 50354206, "body": "I agree with \u03c0\u03ac\u03bd\u03c4\u03b1, I&#39;ve very surprised that gcc is doing what you think it is.  You might see if an include or build file is defining that symbol, in which case you can replicate the behavior in msc."}, {"owner": {"reputation": 181, "user_id": 2678087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004078764575/picture?type=large", "display_name": "Dmitry  Bakhtiyarov", "link": "https://stackoverflow.com/users/2678087/dmitry-bakhtiyarov"}, "edited": false, "score": 0, "creation_date": 1435793376, "post_id": 31173204, "comment_id": 50354286, "body": "Yes, I check code with #ifdef at old version of library and it&#39;s don&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 2678087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004078764575/picture?type=large", "display_name": "Dmitry  Bakhtiyarov", "link": "https://stackoverflow.com/users/2678087/dmitry-bakhtiyarov"}, "edited": false, "score": 0, "creation_date": 1435793614, "post_id": 31173290, "comment_id": 50354336, "body": "Good variant, if developer of library can say in which version of library they are making this changes."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 181, "user_id": 2678087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004078764575/picture?type=large", "display_name": "Dmitry  Bakhtiyarov", "link": "https://stackoverflow.com/users/2678087/dmitry-bakhtiyarov"}, "edited": false, "score": 0, "creation_date": 1435793883, "post_id": 31173290, "comment_id": 50354405, "body": "@DmitryBakhtiyarov <i>&quot;if developer of library can say in which version of library they are making this changes.&quot;</i> As mentioned, if they were honestly good developers, they should have left such <code>#define</code> you can use to bind with it. Otherwise, just kick them in the ass and require such. You still can manage yourself, binding explicitly."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1435793368, "creation_date": 1435793368, "answer_id": 31173290, "question_id": 31173204, "link": "https://stackoverflow.com/questions/31173204/how-to-detect-declaration-of-class-at-compile-time/31173290#31173290", "title": "How to detect declaration of class at compile-time?", "body": "<blockquote>\n  <p><em>\"How I can detect which declaration I should use?\"</em></p>\n</blockquote>\n\n<p>You need to introduce some discriminator for the library version you're using with your current build configuration:</p>\n\n<pre><code>#ifdef OLD_LIBRARY_VERSION // Maybe the binding headers have some information like this.\n                           // If not you have to select this manually, and provide the \n                           // setting with your project configuration.\n   using ClientSessionClass = RTSPServer::RTSPClientSession;\n#else\n   using ClientSessionClass = GenericMediaServer::ClientSession;\n#endif\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 2678087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004078764575/picture?type=large", "display_name": "Dmitry  Bakhtiyarov", "link": "https://stackoverflow.com/users/2678087/dmitry-bakhtiyarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467745862, "creation_date": 1435792678, "last_edit_date": 1467745862, "question_id": 31173204, "link": "https://stackoverflow.com/questions/31173204/how-to-detect-declaration-of-class-at-compile-time", "title": "How to detect declaration of class at compile-time?", "body": "<p>I'm use some 3-rd party library at my project. After updating to new version of library I'm faced with errors.</p>\n\n<p>One my class have method </p>\n\n<pre><code>virtual RTSPServer::RTSPClientSession* createNewClientSession(u_int32_t sessionId)override;\n</code></pre>\n\n<p>but in new version of library declaration of RTSPClientSession was moved into another class and renamed. Now correct name is </p>\n\n<pre><code>GenericMediaServer::ClientSession\n</code></pre>\n\n<p>I need a code which will be correctly compiles with all versions of library. </p>\n\n<p>At gcc I use following code:</p>\n\n<pre><code>#ifdef RTSPServer::RTSPClientSession\n    using ClientSessionClass = RTSPServer::RTSPClientSession;\n#else\n    using ClientSessionClass = GenericMediaServer::ClientSession;\n#endif\n\nclass A\n{\n    .........\n    virtual ClientSessionClass* createNewClientSession(u_int32_t sessionId)override;\n};\n</code></pre>\n\n<p>but this not work in MSVC 2010.\nHow I can detect which declaration I should use?</p>\n\n<p>UPD: code for gcc also don't work for old version of library :(</p>\n"}, {"tags": ["compilation", "c++"], "comments": [{"owner": {"reputation": 22448, "user_id": 1870481, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/478e3c60bf48e069b2f79bddd202d600?s=128&d=identicon&r=PG", "display_name": "michas", "link": "https://stackoverflow.com/users/1870481/michas"}, "edited": false, "score": 0, "creation_date": 1435794560, "post_id": 31174020, "comment_id": 50355540, "body": "What exactly is your question? Please try to make a minimal version of your code demonstrating your problem."}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 4440445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079efb3c08fc853cb3ef1ee9d906c18f?s=128&d=identicon&r=PG", "display_name": "steeldriver", "link": "https://stackoverflow.com/users/4440445/steeldriver"}, "edited": false, "score": 2, "creation_date": 1435795688, "post_id": 31174021, "comment_id": 50355541, "body": "You should wrap arithmetic expressions in parentheses I think (<b>not</b> braces, as the OP had) e.g. <code>#define SUPER (UNLEADED + 0.10)</code> to ensure associativity of expressions such as <code>SUPER * x</code>"}, {"owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "reply_to_user": {"reputation": 299, "user_id": 4440445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079efb3c08fc853cb3ef1ee9d906c18f?s=128&d=identicon&r=PG", "display_name": "steeldriver", "link": "https://stackoverflow.com/users/4440445/steeldriver"}, "edited": false, "score": 0, "creation_date": 1435796132, "post_id": 31174021, "comment_id": 50355542, "body": "@steeldriver Yes, that was more of a mathematical slip. Shame on me."}, {"owner": {"reputation": 299, "user_id": 4440445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079efb3c08fc853cb3ef1ee9d906c18f?s=128&d=identicon&r=PG", "display_name": "steeldriver", "link": "https://stackoverflow.com/users/4440445/steeldriver"}, "edited": false, "score": 1, "creation_date": 1435796705, "post_id": 31174021, "comment_id": 50355543, "body": "My math is rusty too - I probably should have said <i>distributivity</i> rather than <i>associativity</i> ;)"}, {"owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "reply_to_user": {"reputation": 299, "user_id": 4440445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079efb3c08fc853cb3ef1ee9d906c18f?s=128&d=identicon&r=PG", "display_name": "steeldriver", "link": "https://stackoverflow.com/users/4440445/steeldriver"}, "edited": false, "score": 1, "creation_date": 1435796705, "post_id": 31174021, "comment_id": 50355544, "body": "Also @ZachStow consider moving the <code>if</code> conditional right after having stored the user input in <code>gasType</code>: as it stands now is definetly <i>not</i> user-friendly, you always have to type a dummy value at the second input prompt even if you typed &quot;finish&quot; already"}], "tags": [], "owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "is_accepted": true, "score": 3, "last_activity_date": 1435796051, "creation_date": 1435795203, "answer_id": 31174021, "question_id": 31174020, "link": "https://stackoverflow.com/questions/31174020/indirection-requires-pointer-operand-and-expected-expression-errors/31174021#31174021", "title": "indirection requires pointer operand and expected expression errors", "body": "<p>Not a <code>c++</code> expert, but I'm sure that to define a constant you just need to use the <code>#define</code> directive followed by the symbol and by the value you want to assign to it (even if the value itself is an expression, even if such expression is referencing another constant), the braces and the trailing semicolon are excessive:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// [...]\n\n#define UNLEADED 3.45\n#define SUPER (UNLEADED + 0.10)\n#define PREMIUM (SUPER + 0.10)\n\n//[...]\n</code></pre>\n\n<p>It compiled at the first attempt with such corrections.</p>\n"}, {"tags": [], "owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1435797112, "creation_date": 1435797112, "answer_id": 31174022, "question_id": 31174020, "link": "https://stackoverflow.com/questions/31174020/indirection-requires-pointer-operand-and-expected-expression-errors/31174022#31174022", "title": "indirection requires pointer operand and expected expression errors", "body": "<p>The cause of the error is the semi colon at the end of the #define directive.</p>\n\n<p>You have also used the incorrect type of brackets, try this instead:</p>\n\n<p><code>#define UNLEADED 3.45\n</code>\n<code>#define SUPER (UNLEADED + 0.10)\n</code>\n<code>#define PREMIUM (SUPER + 0.10)\n</code></p>\n\n<p>Note that when you use the #define directive whatever follows #define is substituted into your code. In this case after the preprocessor ran your code looked like this:</p>\n\n<p><code>else if(gasType == \"UNLEADED\")\n{\n    cost = UNLEADED 3.45; * gallons;\n}\nelse if(gasType == \"SUPER\")\n{\n    cost = {UNLEADED + 0.10}; * gallons;\n}<br>\nelse if(gasType == \"PREMIUM\")\n{\n    cost = PREMIUM {SUPER + 0.10}; * gallons;\n}</code></p>\n\n<p>The reason you were getting the <code>indirection requires pointer operand</code> error was the compiler trying to interpret this statement:</p>\n\n<p><code>* gallons;</code></p>\n\n<p>Because the <code>*</code> operator only has a single argument it is interpreted as a pointer dereference, luckily for you the <code>gallons</code> variable is not a pointer type. If gallons had been declared as a pointer type i.e. <code>double cost, *gallons;</code> and the <code>cin</code> wasn't there the code would compile but not do what you expect, probably throwing a segfault. </p>\n\n<p>Macros defined with #define can be very powerful and very dangerous. There is usually a better way to achieve things in c++. In this case <code>UNLEADED</code>, <code>SUPER_UNLEADED</code> and <code>PREMIUM</code> could be declared as <code>const double</code> type i.e.</p>\n\n<p><code>const double unleaded = 3.45;\nconst double super = unleaded + 0.10;\nconst double premium = super + 0.10;</code></p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1435798702, "question_id": 213419}, "owner": {"reputation": 157, "user_id": 5121696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/958969344121287/picture?type=large", "display_name": "Zach Stow", "link": "https://stackoverflow.com/users/5121696/zach-stow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "accepted_answer_id": 31174021, "answer_count": 2, "score": 0, "last_activity_date": 1435798702, "creation_date": 1435792397, "question_id": 31174020, "link": "https://stackoverflow.com/questions/31174020/indirection-requires-pointer-operand-and-expected-expression-errors", "title": "indirection requires pointer operand and expected expression errors", "body": "<p>I keep getting errors similar to these:</p>\n\n<pre><code>pitstop.cpp:36:23: error: indirection requires pointer operand\n\n        ('double' invalid)\n\n         cost = UNLEADED * gallons;\n\n                          ^ ~~~~~~~\n\npitstop.cpp:40:14: error: expected expression\n\n                    cost = SUPER * gallons;                               ^\n</code></pre>\n\n<p><br></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n#define UNLEADED 3.45;\n#define SUPER {UNLEADED + 0.10};\n#define PREMIUM {SUPER + 0.10};\n\n/* \n    Author: Zach Stow\n    Date: \n    Homework \n    Objective:\n*/\n\ndouble cost, gallons;\nstring gasType, finish, stop;\n\nint main()\n{\n    for(;;)\n\n    {\n\n        cout &lt;&lt;\"Hi, welcome to Pitstop.\\n\"; \n        cout &lt;&lt;\"Enter the type of gas you need:\";\n        cin &gt;&gt; gasType; \n        cout &lt;&lt; endl;\n\n        cout &lt;&lt;\"Enter the amount of gallons you need:\";\n        cin &gt;&gt; gallons;\n        cout &lt;&lt; endl;\n\n        if(gasType == \"finish\" || gasType == \"stop\")break;\n\n        else if(gasType == \"UNLEADED\")\n        {\n            cost = UNLEADED * gallons;\n        }\n        else if(gasType == \"SUPER\")\n        {\n            cost = SUPER * gallons;\n        }   \n        else if(gasType == \"PREMIUM\")\n        {\n            cost = PREMIUM * gallons;\n        }\n\n    }   \n    cout &lt;&lt;\"You need to pay:$\" &lt;&lt; cost &lt;&lt; endl;\n\n    return(0);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "overriding"], "comments": [{"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435791754, "post_id": 31173066, "comment_id": 50353824, "body": "I&#39;m having trouble understanding. What exactly is your current situation, and why do you need to change it?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435791830, "post_id": 31173066, "comment_id": 50353846, "body": "@RedRoboHood: I&#39;d interpret it as a desire to migrate already-working code to modern best-practice (to help prevent errors going forward)."}, {"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435791990, "post_id": 31173066, "comment_id": 50353889, "body": "@OliverCharlesworth Yes, I understand that; I was asking for more details about his specific problem. I think I get it now, though (I was mixing up <code>override</code> with <code>operator</code> for a minute)."}, {"owner": {"reputation": 461, "user_id": 3724151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24791c2abeeabe83d76046e6a2264b32?s=128&d=identicon&r=PG&f=1", "display_name": "Sophit", "link": "https://stackoverflow.com/users/3724151/sophit"}, "reply_to_user": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 2, "creation_date": 1435792223, "post_id": 31173066, "comment_id": 50353970, "body": "@RedRoboHood I&#39;ve found several instances where function signatures don&#39;t match between base class virtual declaration and the eventual derived class. I&#39;m sure there are more instances and I&#39;d like to tackle this class of problem in my codebase. The override keyword would mostly solve my problem, if I can find an affordable way to add the keyword. Does that make sense?"}, {"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435792306, "post_id": 31173066, "comment_id": 50353992, "body": "@Sophit Yes, thank you for clarifying."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435792458, "post_id": 31173066, "comment_id": 50354049, "body": "Use <a href=\"http://research.google.com/pubs/pub41342.html\" rel=\"nofollow noreferrer\">Clang-MR</a>? (Though I think the authors would disagree about the meaning of the word &#39;large&#39;.)"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1435792882, "post_id": 31173066, "comment_id": 50354169, "body": "@Sophit You should roll that clarification into your question.  It may be that there are other solutions to your actual problem that you haven&#39;t considered (Me saying that without a solid grasp of your issues)"}, {"owner": {"reputation": 461, "user_id": 3724151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24791c2abeeabe83d76046e6a2264b32?s=128&d=identicon&r=PG&f=1", "display_name": "Sophit", "link": "https://stackoverflow.com/users/3724151/sophit"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435794100, "post_id": 31173066, "comment_id": 50354460, "body": "@KerrekSB do you have a link to binaries and instructions?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435796425, "post_id": 31173066, "comment_id": 50355055, "body": "@Sophit: No, I think you need to develop that yourself. It&#39;s just a resarch idea."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1435807329, "post_id": 31173066, "comment_id": 50357366, "body": "As far as I know, I do not think there is any easy or quick way to do this other then going into each header file and changing each class&#39;s declarations directly. It is tedious, long and boring! I would try starting out with all classes that are at the lowest priority of being a base class and work up the hierarchy one level at a time."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1481491272, "post_id": 31173066, "comment_id": 69387325, "body": "You could automate this in VS using the EnvDTE API to traverse your codebase and insert the keyword where appropriate."}, {"owner": {"reputation": 3473, "user_id": 104370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ddd5ae94987b6998b10d94418deb65a0?s=128&d=identicon&r=PG", "display_name": "Clare Macrae", "link": "https://stackoverflow.com/users/104370/clare-macrae"}, "edited": false, "score": 0, "creation_date": 1618606191, "post_id": 31173066, "comment_id": 118662354, "body": "See also multiple useful answers in <a href=\"https://stackoverflow.com/questions/7293715/is-there-a-tool-to-add-the-override-identifier-to-existing-c-code\" title=\"is there a tool to add the override identifier to existing c code\">stackoverflow.com/questions/7293715/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "is_accepted": false, "score": 2, "last_activity_date": 1547763214, "creation_date": 1547763214, "answer_id": 54245028, "question_id": 31173066, "link": "https://stackoverflow.com/questions/31173066/how-can-i-add-the-override-keyword-to-a-large-c-codebase/54245028#54245028", "title": "How can I add the override keyword to a large C++ codebase?", "body": "<p>It seems that clang-modernize has moved into <a href=\"http://clang.llvm.org/extra/clang-tidy/index.html\" rel=\"nofollow noreferrer\">clang-tidy</a> which supports this.</p>\n\n<p>Example code (test.cpp):</p>\n\n<pre><code>struct Base {\n    virtual void reimplementMe(int a) {}\n};\nstruct Derived : public Base  {\n    virtual void reimplementMe(int a) {}\n};\n</code></pre>\n\n<p>clang-tidy invocation (dry run):</p>\n\n<pre><code>clang-tidy-6.0 -checks='modernize-use-override' test.cpp -- -std=c++11\n</code></pre>\n\n<p>To actually fix your code (be sure to have a working backup):</p>\n\n<pre><code>clang-tidy-6.0 -checks='modernize-use-override' -fix test.cpp -- -std=c++11\n</code></pre>\n\n<p>Giving:</p>\n\n<pre><code>struct Base {\n    virtual void reimplementMe(int a) {}\n};\nstruct Derived : public Base  {\n    void reimplementMe(int a) override {}\n};\n</code></pre>\n\n<hr>\n\n<p>Note: Example from <a href=\"https://www.kdab.com/clang-tidy-part-1-modernize-source-code-using-c11c14/\" rel=\"nofollow noreferrer\">this great article</a> was used -- have a look for a detailed explanation and check it's <a href=\"https://www.kdab.com/clang-tidy-part-2-integrate-qmake-and-other-build-systems-using-bear/\" rel=\"nofollow noreferrer\">next part</a> which describes how to convert a larger project.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 461, "user_id": 3724151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24791c2abeeabe83d76046e6a2264b32?s=128&d=identicon&r=PG&f=1", "display_name": "Sophit", "link": "https://stackoverflow.com/users/3724151/sophit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1547763214, "creation_date": 1435791704, "last_edit_date": 1481490948, "question_id": 31173066, "link": "https://stackoverflow.com/questions/31173066/how-can-i-add-the-override-keyword-to-a-large-c-codebase", "title": "How can I add the override keyword to a large C++ codebase?", "body": "<p>I have a large C++ codebase with thousands of source files. I want to add the <code>override</code> keyword wherever it's appropriate. Some of my apparently-overridden functions do not actually override any function from the base class, and I'd like to catch these or at least make them stand out.</p>\n\n<p>I tried doing it manually, but the codebase is too large. I tried using clang-modernize, but it doesn't come with useful instructions. I'm also concerned that it won't be able to comprehend the codebase written for Visual Studio.</p>\n\n<p>How can I add the override keyword to my codebase without spending man-weeks or more on the task?</p>\n"}, {"tags": ["c++", "rvalue-reference", "rvalue"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435791518, "post_id": 31172992, "comment_id": 50353762, "body": "I feel like we just had that question... <a href=\"https://stackoverflow.com/posts/31172992/edit\">edit</a> Here it is: <a href=\"http://stackoverflow.com/q/31125447\">stackoverflow.com/q/31125447</a>"}, {"owner": {"reputation": 8616, "user_id": 1762344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfac7b9f09d74535f472fe1a052666e?s=128&d=identicon&r=PG", "display_name": "Evgeny Panasyuk", "link": "https://stackoverflow.com/users/1762344/evgeny-panasyuk"}, "edited": false, "score": 0, "creation_date": 1435791767, "post_id": 31172992, "comment_id": 50353829, "body": "You can check types with following trick <code>template&lt;typename&gt; void type_is();</code>  <a href=\"http://coliru.stacked-crooked.com/a/77c1704901003313\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1435792456, "post_id": 31172992, "comment_id": 50354047, "body": "<code>univ</code> is of type <code>int(&amp;)(int, int)</code> in that instance."}], "answers": [{"tags": [], "owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1435811156, "creation_date": 1435811156, "answer_id": 31175583, "question_id": 31172992, "link": "https://stackoverflow.com/questions/31172992/universal-references-with-functions/31175583#31175583", "title": "Universal references with functions", "body": "<p>I don't really know how to put this into more words...</p>\n\n<p>The type is reference to function taking two <code>int</code>s and returning and <code>int</code></p>\n\n<p>or, as a comment says: <code>int(&amp;)(int, int)</code></p>\n"}], "owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435811156, "creation_date": 1435791192, "question_id": 31172992, "link": "https://stackoverflow.com/questions/31172992/universal-references-with-functions", "title": "Universal references with functions", "body": "<p>What is the type of \"univ\" in the code below?</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid func(T&amp;&amp; univ) {\n    // ??\n}\n\nint sum(int a, int b) {\n return a+b;   \n}\n\nint main() {\n\n    func(sum);\n\n}\n</code></pre>\n\n<p>I didn't know that universal references also worked with functions. Is <code>func(sum);</code> equivalent to <code>func(&amp;sum);</code> or is the rvalue reference binding itself to something else than a simple pointer?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "matlab-cvst"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "edited": false, "score": 0, "creation_date": 1435791373, "post_id": 31172995, "comment_id": 50353710, "body": "I just edited my question, because I&#39;m really interested in selecting exactly N samples from my ROI, and this is my real problem, any idea of how to do it?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "edited": false, "score": 1, "creation_date": 1435811725, "post_id": 31172995, "comment_id": 50358386, "body": "@AlexanderDeLeonVI - You can also create a <code>std::vector</code> of points that contain the interior of the shape (perhaps with using <code>cv::drawContours</code>), then randomly sample from that vector instead."}, {"owner": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1435862171, "post_id": 31172995, "comment_id": 50389201, "body": "@rayryeng - That could be a solution, also I tried to attached that in my code, but I&#39;m not getting a well uniform distributed extraction. I still looking for another thing no matter how sophisticated it could be, thanks anyway."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "edited": false, "score": 1, "creation_date": 1435862816, "post_id": 31172995, "comment_id": 50389557, "body": "@AlexanderDeLeonVI - Another suggestion I can make is to perhaps use the distance transform where the already sampled points from the interior contour act as seed pixels and the rest of the values are the distance to the nearest sampled point.  The larger the distance, the more farther away one point is away from a sampled point.  You could perhaps use the distances as some form of weights and sample from the interior shape points using weighted sampling based on these distances.  Either way, what you are asking for isn&#39;t easy."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "edited": false, "score": 0, "creation_date": 1435875647, "post_id": 31172995, "comment_id": 50395673, "body": "@AlexanderDeLeonVI: This is a simple solution; if you can&#39;t get it to work, more sophisticated approaches are not likely to succeed. Can you generate points with a uniform distribution over the rectangle? Can you distinguish between points inside the ROI and points outside?"}, {"owner": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "edited": false, "score": 0, "creation_date": 1435936592, "post_id": 31172995, "comment_id": 50421664, "body": "@Beta : I tested your idea, but it isn&#39;t what I need, because in most of the cases the points tend to appear in a non uniform distribution and that is not desirable because I need to use the points in a posterior stage, and your option doesn&#39;t fit my needing. Thanks for your support."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435963825, "post_id": 31172995, "comment_id": 50431139, "body": "My comment about anti-clustering was tongue-in-cheek, but perhaps I should spell it out. <i>How do you know the points you got were in a non-uniform distribution?</i> Uniformly distributed points look clustered to the human eye, and the points in your example, which may look uniformly distributed to you, are actually anti-clustered. It is possible -- actually highly likely -- that what you are asking for is not what you have in mind."}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 4, "last_activity_date": 1435791199, "creation_date": 1435791199, "answer_id": 31172995, "question_id": 31172954, "link": "https://stackoverflow.com/questions/31172954/how-to-select-random-uniform-samples-inside-a-non-regular-region-of-interest/31172995#31172995", "title": "How to select random uniform samples inside a non-regular region of interest?", "body": "<p>Create a random uniform distribution over the bounding rectangle, draw from that, and reject any points that land outside the region of interest.</p>\n\n<p>(The results won't be anti-clustered like the points in your example, but one thing at a time.)</p>\n"}], "owner": {"reputation": 449, "user_id": 4760987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/978717328812566/picture?type=large", "display_name": "Alexander Leon VI", "link": "https://stackoverflow.com/users/4760987/alexander-leon-vi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1435791199, "creation_date": 1435790926, "question_id": 31172954, "link": "https://stackoverflow.com/questions/31172954/how-to-select-random-uniform-samples-inside-a-non-regular-region-of-interest", "title": "How to select random uniform samples inside a non-regular region of interest?", "body": "<p>I am trying to extract N samples from a non-regular region from an image, delimited by a contour, I do have the positions of the contour pixels. The extracted samples must to follow a random uniform distribution. This is what I have:</p>\n\n<p><img src=\"https://i.stack.imgur.com/oXJVG.png\" alt=\"enter image description here\"></p>\n\n<p>And this is what I wish:</p>\n\n<p><img src=\"https://i.stack.imgur.com/4bdbm.png\" alt=\"enter image description here\"></p>\n\n<p>Any idea of how to do it?\ncheers!</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4979964, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab883cd26cfafef9989a82b61c137532?s=128&d=identicon&r=PG&f=1", "display_name": "mora", "link": "https://stackoverflow.com/users/4979964/mora"}, "edited": false, "score": 0, "creation_date": 1435791512, "post_id": 31172970, "comment_id": 50353759, "body": "Thank you very much, Kerrek SB. I would like to specify elements of the std::vector&lt;&gt;  consisting of std::shared_ptr&lt;&gt; explicitly. Could I do it?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 141, "user_id": 4979964, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab883cd26cfafef9989a82b61c137532?s=128&d=identicon&r=PG&f=1", "display_name": "mora", "link": "https://stackoverflow.com/users/4979964/mora"}, "edited": false, "score": 0, "creation_date": 1435791542, "post_id": 31172970, "comment_id": 50353771, "body": "@mora: Yes you could!"}, {"owner": {"reputation": 141, "user_id": 4979964, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab883cd26cfafef9989a82b61c137532?s=128&d=identicon&r=PG&f=1", "display_name": "mora", "link": "https://stackoverflow.com/users/4979964/mora"}, "edited": false, "score": 0, "creation_date": 1435792288, "post_id": 31172970, "comment_id": 50353988, "body": "Thank you, Kerrek SB. I will learn your example and I will try to correct my test code above. But it sounds I am doing something weird. So I may change the code later. Thank very much again."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 1, "last_activity_date": 1435791404, "last_edit_date": 1435791404, "creation_date": 1435791036, "answer_id": 31172970, "question_id": 31172928, "link": "https://stackoverflow.com/questions/31172928/please-teach-me-how-to-make-the-template-parameters-of-a-following-function/31172970#31172970", "title": "Please teach me how to make the template parameters of a following function", "body": "<p>Maybe you want this?</p>\n\n<pre><code>template &lt;template &lt;typename ...&gt; class C, typename ...Args&gt;\nbool CompareVector(C&lt;Args...&gt; const * lhs, C&lt;Args...&gt; const * rhs)\n{\n    // ...\n}\n</code></pre>\n\n<p>If you only want it to work for vectors:</p>\n\n<pre><code>template &lt;typename T, typename A&gt;\nbool CompareVector(std::vector&lt;T, A&gt; const * lhs, std::vector&lt;T, A&gt; const * rhs);\n</code></pre>\n\n<p>If you want it to work for arbitrary template classes whose first template argument is a template class with one argument (but <em>why</em>):</p>\n\n<pre><code>template &lt;template &lt;typename ...&gt; class C,\n          template &lt;typename&gt; class SP,\n          typename T,\n          typename Args...&gt;\nbool CompareBizzare(C&lt;SP&lt;T&gt;, Args...&gt; const * lhs, /* ... */);\n</code></pre>\n\n<p>Note that none of your desired function arguments are specializations of a template that has template template parameters. The standard library does not contain any templates that take template template parameters (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4502.pdf\" rel=\"nofollow\">for now</a>).</p>\n"}], "owner": {"reputation": 141, "user_id": 4979964, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ab883cd26cfafef9989a82b61c137532?s=128&d=identicon&r=PG&f=1", "display_name": "mora", "link": "https://stackoverflow.com/users/4979964/mora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 31172970, "answer_count": 1, "score": -5, "last_activity_date": 1435791404, "creation_date": 1435790765, "question_id": 31172928, "link": "https://stackoverflow.com/questions/31172928/please-teach-me-how-to-make-the-template-parameters-of-a-following-function", "title": "Please teach me how to make the template parameters of a following function", "body": "<p>I am a beginner of template. I want to make a function with template template parameters. For me, it is complicated template template parameter. And I cannot make it. Someone, please let me know how I can make it. Thank you very much. </p>\n\n<pre><code>class Vertex {\n};\n\nmain() {\n    std::vector&lt;std::shared_ptr&lt;Vertex&gt;*&gt; vertexes_a, vertexes_b;\n    CompareVector(&amp;vertexes_a, &amp;vertexes_b);\n}\n\n/* I made the following template parameters. But compiler cannot compile it.\n * They said template parameters invalid... It must have my stupid understanding.\n * So please ignore my template parameters and\n * please teach me how to make the template parameters. */    \ntemplate &lt;typename Elm, template&lt;template&lt;Elm&gt; class SharedPtr, typename Allocator=std::allocator&lt;template&lt;Elm&gt; class SharedPtr&gt; &gt; class STL&gt;\nbool CompareVector(STL&lt;std::shared_ptr&lt;Elm&gt;&gt;* org, STL&lt;std::shared_ptr&lt;Elm&gt;&gt;* cmp) {\n}\n</code></pre>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1435791136, "post_id": 31172927, "comment_id": 50353632, "body": "You posted code that defines SortedLL in a header, you include the header, and then in your CPP file, you define it again.  Don&#39;t know how much simpler to explain your error."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1435796113, "post_id": 31172927, "comment_id": 50354996, "body": "@user1068636: That&#39;s exactly what you have. Your <code>.cpp</code> contains a redefinition of the class <code>SortedLL</code> right there in plain view."}], "answers": [{"tags": [], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "is_accepted": true, "score": 3, "last_activity_date": 1435795934, "creation_date": 1435795934, "answer_id": 31173669, "question_id": 31172927, "link": "https://stackoverflow.com/questions/31172927/why-am-i-getting-a-redefinition-of-a-c-class-error/31173669#31173669", "title": "Why am I getting a Redefinition of a C++ class error?", "body": "<p>As @ PaulMcKenzie points out, you've defined the class SortedLL in both your header and your .cpp file. What you want in the .cpp is just the method definitions. Something like:</p>\n\n<pre><code>int SortedLL ::findLinear(int data, struct Node ** pPrev, struct Node ** pCurr) {\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1607, "user_id": 1068636, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/af6bfcf5de860549e5fe6bf1193e5c38?s=128&d=identicon&r=PG", "display_name": "user1068636", "link": "https://stackoverflow.com/users/1068636/user1068636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 31173669, "answer_count": 1, "score": 0, "last_activity_date": 1435795934, "creation_date": 1435790760, "question_id": 31172927, "link": "https://stackoverflow.com/questions/31172927/why-am-i-getting-a-redefinition-of-a-c-class-error", "title": "Why am I getting a Redefinition of a C++ class error?", "body": "<p>Using the following code below I am getting a \"Redefinition of SortedLL\" error. \nSo I removed \"class SortedLL\" from the header file below.  But when I remove SortedLL from the header file then I can't declare a SortedLL in the main.cpp file. </p>\n\n<p>So I am stuck. What am I missing?</p>\n\n<p>Sorted Linked List header file</p>\n\n<pre><code>#ifndef SortedLinkedList_SortedLL_h\n#define SortedLinkedList_SortedLL_h\n\nstruct Node {\n    int data;\n    struct Node * next;\n};\n\nclass SortedLL {\npublic:\n    int find(int data);\n    bool remove(int data);\n    int size();\n    bool removeOdd();\n    bool add(int data);\n\nprivate:\n    struct Node * pHead;\n    int length;\n};\n\n#endif\n</code></pre>\n\n<p>Sorted Linked List CPP file</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"SortedLL.h\"\n\nclass SortedLL {\nprivate:\n\n\n    // searches the linked list linearly\n    int findLinear(int data, struct Node ** pPrev, struct Node ** pCurr){\n        // start at head of list\n        *pCurr = pHead;\n        *pPrev = NULL;\n        int index = 0;\n        while (*pCurr != NULL){\n            if ((*pCurr)-&gt;data == data){\n                // found\n                return index;\n            }\n            else {\n                *pPrev = *pCurr;\n                *pCurr = (*pCurr)-&gt;next;\n                index++;\n            }\n        }\n\n        return -1;\n    }\n\n     bool findInsertPointLinear(struct Node ** pPrev, struct Node ** pCurr, int data){ \n        while (*pCurr != NULL){\n\n            // if current data is less then new data\n            if ((*pCurr)-&gt;data &lt; data){\n                // store previous node\n                *pPrev = *pCurr;\n\n                // advance to next position\n                *pCurr = (*pCurr)-&gt;next;\n            }\n\n            // current value is &gt;= new val\n            else {\n                // we found insertion point\n                break;\n            }\n        }\n\n        return true;\n\n    }\n\n    // returns the value at the index or NULL if no value exists\n     bool get(int index, int * val) {\n\n        // check if out of bounds\n        if (index &lt; 0 || index &gt; (length-1)) {\n            // out of bounds\n            return false;\n        }\n\n            struct Node * pCurr = pHead;\n\n            for (int i=0;i&lt;=index;i++){\n                pCurr = pCurr-&gt;next;\n            }\n\n            if (val != NULL) {\n                *val = pCurr-&gt;data;\n            }\n\n            return true;\n            }\npublic:\n    bool add (int data) {\n        struct Node * pCurr = pHead;\n        struct Node * pPrev = NULL;\n        bool returnVal = true;      \n\n        // if the list is empty\n        if (pHead == NULL){\n            // add the new node\n            pHead = (struct Node *)malloc(sizeof(struct Node));\n            pHead-&gt;data = data;\n            pHead-&gt;next = NULL;\n\n            // return success\n            length++;\n            return returnVal;\n        }\n\n        // the list is not empty, so find insertion point\n        if (findInsertPointLinear(&amp;pPrev, &amp;pCurr, data)){\n\n            // if inserting at the begininng of list\n            if (pPrev == NULL){\n                pPrev = (struct Node *)malloc(sizeof(struct Node));\n                if (pPrev != NULL) {\n                    pPrev-&gt;data = data;\n                    pPrev-&gt;next = pCurr;\n\n                    // keep track of head pointer\n                    pHead = pPrev;\n                }\n                else {\n                    // failed to allocate memory\n                    returnVal = false;\n                }\n            }\n\n            // if inserting at end of list\n            else if (pCurr == NULL &amp;&amp; pPrev !=NULL) {\n                pCurr = (struct Node *)malloc(sizeof(struct Node));\n                if (pCurr != NULL){\n                    pCurr-&gt;data = data;\n                    pPrev-&gt;next = pCurr;\n                    pCurr-&gt;next = NULL;\n                }\n                else {\n                    // failure to allocate memory\n                    returnVal = false;\n                }\n            }\n\n            // if inserting in the middle of list\n            else {\n                pPrev-&gt;next = (struct Node *) malloc (sizeof(struct Node));\n                if (pPrev-&gt;next != NULL){\n                    pPrev-&gt;next-&gt;data = data;\n                    pPrev-&gt;next-&gt;next = pCurr;\n                }\n                else {\n                    // failure to allocate memory\n                    returnVal = false;\n                }\n            }\n        }\n\n        // increment size of list by 1\n        if (returnVal == true)\n            length++;\n\n        return returnVal;\n    }\n\n    // returns index of first occurrence of data or -1 if not found\n     int find(int data){\n        struct Node * pPrev = NULL;\n        struct Node * pCurr = NULL;\n        return findLinear(data, &amp;pPrev, &amp;pCurr);\n    }\n\n\n\n\n\n\n\n\n             bool remove(int data) {\n                // try to find data\n                struct Node * pPrev = NULL;\n                struct Node * pCurr = NULL;\n                int removeIndex = findLinear(data, &amp;pPrev, &amp;pCurr);\n                 bool returnVal = false;\n                // if found\n                if (removeIndex != -1){\n                    // remove node\n                    return false;\n                }\n\n                // if removing at the head\n                if (removeIndex == 0){\n                    if (pCurr != NULL){\n                        pHead = pCurr-&gt;next;\n                        free(pCurr);\n                        pCurr = NULL;\n                        returnVal = true;\n                    }\n                    else {\n                        printf(\"trying to remove an element that does not exist\\n\");\n                    }\n                }\n\n                // if removing at the end\n                else if (removeIndex == (length-1)){\n                    if (pCurr != NULL) {\n                        free(pCurr);\n                        pCurr = NULL;\n\n                        if (pPrev != NULL){\n                            pPrev-&gt;next = NULL;\n                        }\n                        returnVal = true;\n\n                    }\n                    else {\n                        printf(\"trying to remove an element that does not exist\\n\");\n\n                    }\n\n                }\n\n                // removing somewhere in the middle\n                else {\n                    if (pPrev != NULL &amp;&amp; pCurr != NULL){\n                        struct Node * temp = pCurr-&gt;next;\n                        free(pCurr);\n                        pCurr = NULL;\n                        pPrev-&gt;next = temp;\n                        returnVal = true;\n                    }\n\n                    // something is wrong\n                    else {\n                        printf(\"attempting to remove an element from middle but either previous or curr element is NULL\\n\");\n                    }\n                }\n\n                return returnVal;\n            }\n\n\n             int size(){\n                return length;\n            }\n\n             bool removeOdd(){\n                struct Node * pCurr = pHead;\n                struct Node * pPrev = NULL;\n\n\n                // iterate over list\n                while (pCurr != NULL){\n\n                    // if current data element is odd\n                    if (pCurr-&gt;data %2 != 0){\n                        // remove it\n\n                        // removing at head\n                        if (pCurr == pHead){\n                            pHead = pHead-&gt;next;\n                            free(pCurr);\n                            pCurr = pHead;\n\n                        }\n\n                        // if removing at the end\n                        else if (pCurr-&gt;next == NULL){\n                            free(pCurr);\n                            pCurr = NULL;\n                            pPrev-&gt;next = NULL;\n                        }\n\n                        // removing somewhere in the middle\n                        else {\n                            struct Node * temp = pCurr-&gt;next;\n                            free(pCurr);\n                            pPrev-&gt;next = temp;\n\n                            // advance pCurr to next node\n                            pCurr = temp;\n                        }\n                    }\n\n                    // if current data element even\n                    else {\n                        pPrev = pCurr;\n                        pCurr = pCurr-&gt;next;\n                    }\n                }\n\n                 return true;\n             }\n}SortedLL;\n</code></pre>\n"}, {"tags": ["c++", "overloading", "c++14", "std-function", "stdbind"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435801070, "post_id": 31172921, "comment_id": 50356082, "body": "Related: <a href=\"http://stackoverflow.com/questions/30227097/c11-lambda-can-be-assigned-to-stdfunction-with-incorrect-signature\" title=\"c11 lambda can be assigned to stdfunction with incorrect signature\">stackoverflow.com/questions/30227097/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/22146749/overload-resolution-with-stdfunction/22147471#22147471\" title=\"overload resolution with stdfunction\">stackoverflow.com/questions/22146749/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435797464, "post_id": 31173681, "comment_id": 50355290, "body": "Where in the standard does it say that excess arguments are discarded? I can&#39;t seem to find it."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435798162, "post_id": 31173681, "comment_id": 50355436, "body": "@0x499602D2 I don&#39;t know I stopped on cppreference on this one.  I&#39;m looking now too"}, {"owner": {"reputation": 35010, "user_id": 703016, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6daa32d7171f74efb1b663c6edc32e3b?s=128&d=identicon&r=PG&f=1", "display_name": "user703016", "link": "https://stackoverflow.com/users/703016/user703016"}, "edited": false, "score": 0, "creation_date": 1435802244, "post_id": 31173681, "comment_id": 50356332, "body": "I think I found it although it might seem a little far-fetched: N4431 20.9.2/4.  <code>A forwarding call wrapper is a call wrapper that can be called with an arbitrary argument list and delivers the arguments to the wrapped callable object as references</code>. The note even uses variadics."}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 4, "last_activity_date": 1555701979, "last_edit_date": 1555701979, "creation_date": 1435796042, "answer_id": 31173681, "question_id": 31172921, "link": "https://stackoverflow.com/questions/31172921/different-overloads-with-stdfunction-parameters-is-ambiguous-with-bind-someti/31173681#31173681", "title": "Different overloads with std::function parameters is ambiguous with bind (sometimes)", "body": "<p>The problem exists in how bind is allowed to be called.  As <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">cppreference states</a></p>\n\n<blockquote>\n  <p>If some of the arguments that are supplied in the call to g() are not matched by any placeholders stored in g, the unused arguments are evaluated and discarded.</p>\n</blockquote>\n\n<p>In other words, you need to pass <em>at least</em> as many arguments as the underlying callable expects.</p>\n\n<p>This means that the following is valid</p>\n\n<pre><code>int f();\nauto b = std::bind(f);\nb(1, 2, 3); // arguments aren't used\n</code></pre>\n\n<p>So saying</p>\n\n<pre><code>auto b = std::bind(ret_int)\nb(1);\n</code></pre>\n\n<p>Works, with the <code>1</code> discarded, therefore the following is valid, and overload selection becomes ambiguous</p>\n\n<pre><code>std::function&lt;void(int)&gt; f = std::bind(ret_int);\n</code></pre>\n\n<p>The inverse is not true, however</p>\n\n<pre><code>std::function&lt;int()&gt; f = std::bind(take_int);\n</code></pre>\n\n<p>because <code>take_int</code> cannot be called with no arguments.</p>\n\n<p>Takeaway: lambda > bind</p>\n"}], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1555701979, "creation_date": 1435790750, "last_edit_date": 1435802190, "question_id": 31172921, "link": "https://stackoverflow.com/questions/31172921/different-overloads-with-stdfunction-parameters-is-ambiguous-with-bind-someti", "title": "Different overloads with std::function parameters is ambiguous with bind (sometimes)", "body": "<p>I have two overloads of a function <code>foo</code> which take different <code>std::function</code>s which results in an ambiguity issue for the latter when used with the result of a <code>std::bind</code>.  I don't understand why <em>only</em> this is ambiguous.</p>\n\n<pre><code>void foo(std::function&lt;void(int)&gt;) {}\nvoid foo(std::function&lt;int()&gt;) {}\n\nvoid take_int(int) { }\nint ret_int() { return 0; }\n</code></pre>\n\n<p>When using <code>int()</code> with a <code>bind</code> function I get an ambiguity error</p>\n\n<pre><code>foo(std::bind(ret_int)); // ERROR\n</code></pre>\n\n<p>With the gcc-5.1 error (and similar with clang)</p>\n\n<pre><code>error: call to 'foo' is ambiguous\n  foo(std::bind(ret_int));\n  ^~~\nnote: candidate function\nvoid foo(std::function&lt;void(int)&gt;) {}\n     ^\nnote: candidate function\nvoid foo(std::function&lt;int()&gt;) {}\n</code></pre>\n\n<p>However all of the following work</p>\n\n<pre><code>foo(std::bind(take_int, _1));\nfoo(take_int);\n\nfoo(ret_int);\nfoo([](){ return ret_int(); });\n\nstruct TakeInt {\n  void operator()(int) const { }\n};\n\nstruct RetInt {\n  int operator()() const { return 0; }\n};\n\nfoo(TakeInt{});\nfoo(RetInt{});\n</code></pre>\n\n<p>Looking at the <code>std::function</code> constructor</p>\n\n<pre><code>template&lt; class F &gt; \nfunction( F f );\n</code></pre>\n\n<p>it would make sense to me that any function with multiple overloads on different <code>std::function</code> types should have ambiguities, but it's only an issue with the call to bind.  I then thought \"maybe there's some magic happening to handle function types and lambdas and it doesn't deal with actual classes,\" but it handles those too.</p>\n\n<p>There's a note on en.cppreference that says [since c++14]</p>\n\n<blockquote>\n  <p>This constructor does not participate in overload resolution unless f is Callable for argument types Args... and return type R</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "arguments", "instantiation"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435790501, "post_id": 31172835, "comment_id": 50353418, "body": "<code>enable_if</code> is for <i>deduced</i> template parameters."}], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "edited": false, "score": 0, "creation_date": 1435830785, "post_id": 31172878, "comment_id": 50368381, "body": "Can it depend on <code>Temp</code>? That parameter is itself, I think it needs another parameter, like the last example (and, in the same example I whink it should be `&lt;typaname T=void, ...&gt;"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 2, "last_activity_date": 1435792282, "last_edit_date": 1435792282, "creation_date": 1435790517, "answer_id": 31172878, "question_id": 31172835, "link": "https://stackoverflow.com/questions/31172835/c-why-does-the-compiler-instantiate-a-template-when-it-is-not-used/31172878#31172878", "title": "C++: Why does the compiler instantiate a template when it is not used", "body": "<p>The compiler does not \"instantiate\" your template, as you seem to incorrectly believe. The compiler is simply trying to parse and analyze your template declaration, which is a part of your class definition. If the class is instantiated, then all member <em>declarations</em> have to be valid. Your member template declaration is not valid. Hence the error.</p>\n\n<p>If some template is \"not used\", it means that it does not get specialized and instantiated. But the <em>declaration</em> of that template still has to be valid. And the validity of those parts of that declaration that <em>do not depend on template parameters</em> is checked immediately. In other words, what you wrote in your code is no different from</p>\n\n<pre><code>template &lt;typename T = jksgdcaufgdug&gt; void foo() {}\n\nint main() {}\n</code></pre>\n\n<p>or, closer to your situation</p>\n\n<pre><code>template &lt;typename T = std::enable_if&lt;false&gt;::type&gt; void foo() {}\n\nint main() {}\n</code></pre>\n\n<p>Even though these programs do not \"use\" (do not instantiate) function template <code>foo</code>, it still does not mean that the declaration of <code>foo</code> can contain random garbage like <code>jksgdcaufgdug</code> or explicitly refer to non-existent entities like <code>std::enable_if&lt;false&gt;::type</code>. The above examples will not compile for that reason.</p>\n\n<p>You can use \"random garbage\" in <em>dependent</em> contexts, like</p>\n\n<pre><code>template &lt;typename T&gt; void foo(typename T::kjhdfjskhf x) \n{ \n  typename T::jksgdcaufgdug i; \n}\n</code></pre>\n\n<p>and you can use <code>std::enable_if</code> in dependent contexts like</p>\n\n<pre><code>template &lt;typename T, \n          typename U = typename enable_if&lt;is_void&lt;T&gt;::value&gt;::type&gt;\nvoid bar()\n{ \n}\n</code></pre>\n\n<p>and it will not produce \"early\" errors, but in your case <code>enable_if&lt;c&gt;</code> does not depend on <code>Temp</code>, so it is not in dependent context. Which means that the correctness of <code>typename enable_if&lt;c&gt;::type</code> is checked immediately when you instantiate <code>A&lt;false&gt;</code>.</p>\n"}], "owner": {"reputation": 862, "user_id": 1417883, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/56fe3a87ac4d39ab9b7a15f92b5fd7dc?s=128&d=identicon&r=PG", "display_name": "barsan-md", "link": "https://stackoverflow.com/users/1417883/barsan-md"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31172878, "answer_count": 1, "score": 0, "last_activity_date": 1435792282, "creation_date": 1435790228, "question_id": 31172835, "link": "https://stackoverflow.com/questions/31172835/c-why-does-the-compiler-instantiate-a-template-when-it-is-not-used", "title": "C++: Why does the compiler instantiate a template when it is not used", "body": "<p>Let's consider this code:</p>\n\n<pre><code>template &lt;bool c&gt;\nclass A {\npublic:\n    A() = default;\n    // I want to enable f(int) only if c == true\n    template&lt;typename Temp = typename enable_if&lt;c&gt;::type&gt;\n    void f(int val) {\n        cout &lt;&lt; val &lt;&lt; endl;\n    };\n};\n\nint main() {\n    A&lt;false&gt; a;\n    A&lt;true&gt; b;\n    b.f(543);\n}\n</code></pre>\n\n<p>When I try to compile this I get the following error:</p>\n\n<pre><code>error: no type named 'type' in 'struct std::enable_if&lt;false, void&gt;'\n</code></pre>\n\n<p>But I don't use the template method <code>f(int)</code> when the argument <code>&lt;bool c&gt;</code> is <code>false</code> then it shouldn't exist.</p>\n"}, {"tags": ["c++", "qt", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1435790562, "post_id": 31172832, "comment_id": 50353443, "body": "<i>Is there another way to explicitly ignore errors from Qt headers when running <code>clang-check</code>?</i> So you have reasons to think potential memory leaks from <code>QObject</code> should be ignored? Can you share these?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1435790726, "post_id": 31172832, "comment_id": 50353500, "body": "@Fr&#233;d&#233;ricHamidi I would expect <i>all</i> potential problems from system <code>#include</code>s to be ignored, because in general such <code>#include</code>s are from third-party code that can&#39;t be modified, and therefore those warnings are a distraction from any issues that the <code>clang-check</code> user <i>can</i> address."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 1, "creation_date": 1435790796, "post_id": 31172832, "comment_id": 50353526, "body": "@Fr&#233;d&#233;ricHamidi If there&#39;s a problem with <i>how <code>QObject</code> is used in <b>my</b> code</i>, then there should be some indication of that in the <code>clang-check</code> output, but the above output is the <i>only</i> output I get from <code>clang-check</code>."}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1435791022, "post_id": 31172832, "comment_id": 50353599, "body": "Okay, fair enough. Still wish I had more time to steer you back from this practice, though ;)"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1435791115, "post_id": 31172832, "comment_id": 50353628, "body": "@Fr&#233;d&#233;ricHamidi Er, if I <i>can&#39;t change</i> the code, what&#39;s the purpose of a warning for it?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 1, "creation_date": 1435791177, "post_id": 31172832, "comment_id": 50353644, "body": "@Fr&#233;d&#233;ricHamidi I mean, if I were a Qt developer, obviously I&#39;d want to see that warning, but in that case I&#39;d be using <code>-I</code> instead of <code>-isystem</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1435793364, "post_id": 31172832, "comment_id": 50354277, "body": "You&#39;re doing everything right, the warning is bogus, obviously clang-check does something wrong."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7285614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4677a3588fb14a68e51f9f2c4a57275b?s=128&d=identicon&r=PG&f=1", "display_name": "Jerbal", "link": "https://stackoverflow.com/users/7285614/jerbal"}, "is_accepted": false, "score": 2, "last_activity_date": 1481554708, "creation_date": 1481554708, "answer_id": 41103635, "question_id": 31172832, "link": "https://stackoverflow.com/questions/31172832/is-clang-check-failing-to-honor-isystem/41103635#41103635", "title": "Is `clang-check` failing to honor `-isystem`?", "body": "<p>This is because you also have to include the \"QtCore\" directory via-\"isystem\", in addition to just the base Qt include directory.  This is because Clang finds a more specific include (QT -Is the modules as well) and uses that.  See the <a href=\"http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-in-system-headers\" rel=\"nofollow noreferrer\">Clang Manual</a> for -isystem information on how the includes work.</p>\n\n<p>Effectively you want to do the following:</p>\n\n<pre><code>contains(QT,\"core\") {\nQMAKE_CXXFLAGS *= $$join(QMAKE_INCDIR_QT, \" -isystem\", \"-isystem\", \"/QtCore\")\n}\n</code></pre>\n\n<p>And repeat this for all standard Qt modules (Designer, Gui, Help, Network, etc).</p>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1548347441, "post_id": 54349250, "comment_id": 95517941, "body": "This seems specific to whatever tool you&#39;re using to <i>invoke</i> clang-check; what is <code>MyTool</code>?"}, {"owner": {"reputation": 407, "user_id": 1511477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1c0941e3ce8d078dc359004c76899b?s=128&d=identicon&r=PG", "display_name": "Marcus O Platts", "link": "https://stackoverflow.com/users/1511477/marcus-o-platts"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1553339558, "post_id": 54349250, "comment_id": 97353313, "body": "No, the extra-arg handlers are processed by <code>clang::tooling::CommonOptionsParser</code> that your tool will use to setup llvm - it&#39;s common to all clang::tooling implementations."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1553364017, "post_id": 54349250, "comment_id": 97360460, "body": "Ah, so that includes running <code>clang-check</code> directly, since it&#39;s a Clang tool? My understanding when I wrote the question was that <code>clang-check</code> accepts all the same arguments as <code>clang</code> directly."}], "tags": [], "owner": {"reputation": 407, "user_id": 1511477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1c0941e3ce8d078dc359004c76899b?s=128&d=identicon&r=PG", "display_name": "Marcus O Platts", "link": "https://stackoverflow.com/users/1511477/marcus-o-platts"}, "is_accepted": false, "score": 0, "last_activity_date": 1548341091, "creation_date": 1548341091, "answer_id": 54349250, "question_id": 31172832, "link": "https://stackoverflow.com/questions/31172832/is-clang-check-failing-to-honor-isystem/54349250#54349250", "title": "Is `clang-check` failing to honor `-isystem`?", "body": "<p>I had this problem and arrived at this question via search engine.  So for anybody else like me; the answer is to use the -extra-arg twice!</p>\n\n<p>For example</p>\n\n<p><code>./MyTool -extra-arg=\"-isystem\" -extra-arg=\"my/system/include/path\" myfile.cpp</code></p>\n\n<p>And you don't get all those warnings.</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1548341091, "creation_date": 1435790217, "question_id": 31172832, "link": "https://stackoverflow.com/questions/31172832/is-clang-check-failing-to-honor-isystem", "title": "Is `clang-check` failing to honor `-isystem`?", "body": "<p>For both Clang and GCC, the <code>-isystem</code> flag adds a \"system\" include path, which causes the compiler <em>not</em> to emit warnings related to code found in those headers.</p>\n\n<p>However, running <code>clang-check</code> on my code, I see the following warning:</p>\n\n<pre><code>In file included from &lt;myfile&gt;.cpp:1:\nIn file included from &lt;Qt-path&gt;/gcc_64/include/QtCore/QCoreApplication:1:\nIn file included from &lt;Qt-path&gt;/gcc_64/include/QtCore/qcoreapplication.h:40:\n&lt;Qt-path&gt;/gcc_64/include/QtCore/qobject.h:235:16: warning: Potential memory leak\n        return connectImpl(sender, reinterpret_cast&lt;void **&gt;(&amp;signal),\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n1 warning generated.\n</code></pre>\n\n<p>...so it would appear that <code>clang-check</code> does not treat <code>-isystem</code> include paths differently from <code>-I</code> include paths. Am I misusing the tool or misinterpreting the output (i.e., is this actually a potential error in my code)? Is there another way to explicitly ignore errors from Qt headers when running <code>clang-check</code>?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1435789397, "post_id": 31172620, "comment_id": 50353090, "body": "Are you using a <code>QListView</code> or a <code>QTableView</code>?"}, {"owner": {"reputation": 3289, "user_id": 861970, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1db4c5873a1d0571a7299e3b899e8aad?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/861970/stefan"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1435789516, "post_id": 31172620, "comment_id": 50353126, "body": "<i>sigh</i> - sorry was distracted by my children as I was typing!  It is a QTableView, have edited the question.  Thanks!"}, {"owner": {"reputation": 3289, "user_id": 861970, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1db4c5873a1d0571a7299e3b899e8aad?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/861970/stefan"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1435790194, "post_id": 31172620, "comment_id": 50353322, "body": "You might be right, I tried various phrases but not &quot;index number&quot;."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1435790272, "post_id": 31172620, "comment_id": 50353350, "body": "Well, at least you have a solution :D"}], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 4, "last_activity_date": 1435789610, "creation_date": 1435789610, "answer_id": 31172726, "question_id": 31172620, "link": "https://stackoverflow.com/questions/31172620/how-do-you-remove-row-numbers-for-a-qtableview-in-qt/31172726#31172726", "title": "How do you remove row numbers for a QTableView in Qt", "body": "<p>Try:</p>\n\n<pre><code>yourtable-&gt;verticalHeader()-&gt;setVisible(false);\n</code></pre>\n\n<p>to hide the row numbers.</p>\n"}], "owner": {"reputation": 3289, "user_id": 861970, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1db4c5873a1d0571a7299e3b899e8aad?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/861970/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 0, "closed_date": 1435790223, "accepted_answer_id": 31172726, "answer_count": 1, "score": 0, "last_activity_date": 1435789610, "creation_date": 1435788978, "last_edit_date": 1435789537, "question_id": 31172620, "link": "https://stackoverflow.com/questions/31172620/how-do-you-remove-row-numbers-for-a-qtableview-in-qt", "closed_reason": "Duplicate", "title": "How do you remove row numbers for a QTableView in Qt", "body": "<p>I am using a QTableView to display instructions for a low level emulator.</p>\n\n<p>However, the rows index from 1 whereas the instructions index from 0.\nI either need to remove the row numbers and add an extra column which I can fill with the 0 indexed instruction number of change the row numbers so they index from 0.</p>\n\n<p>I cannot see how to do either, am I just being blind? </p>\n"}, {"tags": ["c++", "qt", "mouseevent", "qt5"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1435793552, "post_id": 31172532, "comment_id": 50354327, "body": "Looks like a bug. For your testcase, you really should have the widget as a top-level window instead of putting it in the mainwindow - perhaps that&#39;s where the bugs originate from (unlikely but still - minimization is essential)."}], "answers": [{"tags": [], "owner": {"reputation": 1505, "user_id": 4118460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31e169d81e1a37c7837dbd8e48b1ea46?s=128&d=identicon&r=PG&f=1", "display_name": "vicrucann", "link": "https://stackoverflow.com/users/4118460/vicrucann"}, "is_accepted": true, "score": 4, "last_activity_date": 1446650252, "creation_date": 1446650252, "answer_id": 33525420, "question_id": 31172532, "link": "https://stackoverflow.com/questions/31172532/mousepressevent-of-qwidget-gets-called-even-though-qtabletevent-was-accepted/33525420#33525420", "title": "mousePressEvent of QWidget gets called even though QTabletEvent was accepted", "body": "<p>Indeed, according to Qt documentation, the Qt should not be sending mouse events when the tablet is in use. But it seems to do it anyway (I'm using version 5.5). </p>\n\n<p>One way to get around it is to reimplement <code>event()</code> method of <code>QApplication</code> - that's where <code>TabletEnterProximity</code> and <code>TabletLeaveProximity</code> are sent; those functions are not sent to the <code>QWidget</code>'s <code>event()</code>. </p>\n\n<p>So, whenever the application catches either <code>TabletEnterProximity</code> or <code>TabletLeaveProximity</code> events, you may send a signal to your <code>TabletWidget</code> to change a private bool variable <code>_deviceActive</code>. Then, inside the <code>TabletWidget</code> you add a check for each <code>MousePressEvent</code> (and <code>MouseReleaseEvent</code>) to see if the <code>_deviceActive</code> is true or not; and implement the event only if the flag is false.  </p>\n\n<p>To illustrate, the inherited <code>TabletApplication</code> would look like this:  </p>\n\n<pre><code>class TabletApplication : public QApplication {\n    Q_OBJECT\npublic:\n    TabletApplication(int&amp; argv, char** argc): QApplication(argv,argc){}\n    bool event(QEvent* event){\n        if (event-&gt;type() == QEvent::TabletEnterProximity || event-&gt;type() == QEvent::TabletLeaveProximity) {\n            bool active = event-&gt;type() == QEvent::TabletEnterProximity? 1:0;\n            emit sendTabletDevice(active);\n            return true; \n        }\n        return QApplication::event(event);\n}\nsignals:\n    void sendTabletActive(bool active);\n};\n</code></pre>\n\n<p>And the additional parts inside <code>tabletwidget.h</code>:</p>\n\n<pre><code>class TabletWidget : public QWidget {\n// ...\npublic slots:\n     void setTabletDeviceActive(bool active){\n          _deviceActive = active;\n     }\n// ...\nprivate:\n     bool _deviceActive;\n};\n</code></pre>\n\n<p>Then you check inside the mouse events if the device is active:</p>\n\n<pre><code>void TabletWidget::mousePressEvent(QMouseEvent *event)\n{\n     if (!_deviceActive) \n         qDebug() &lt;&lt; \"mousePressEvent\";\n}\n</code></pre>\n\n<p>Of course, don't forget to connect the corresponding signal with the slot. Hope it helps.</p>\n\n<p>Reference: <a href=\"http://doc.qt.io/qt-5/qtwidgets-widgets-tablet-example.html#tabletapplication-class-definition\" rel=\"nofollow\">TabletApplication from Qt tablet example</a></p>\n"}], "owner": {"reputation": 413, "user_id": 1580081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb143d35d433b10e6eb23535aba5f02?s=128&d=identicon&r=PG", "display_name": "Thomas Leitz", "link": "https://stackoverflow.com/users/1580081/thomas-leitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 1, "accepted_answer_id": 33525420, "answer_count": 1, "score": 4, "last_activity_date": 1446650252, "creation_date": 1435788511, "last_edit_date": 1435793480, "question_id": 31172532, "link": "https://stackoverflow.com/questions/31172532/mousepressevent-of-qwidget-gets-called-even-though-qtabletevent-was-accepted", "title": "mousePressEvent of QWidget gets called even though QTabletEvent was accepted", "body": "<p>In a QWidget derived class object with implemented tabletEvent(QTabletEvent *event) and mousePressEvent(QMouseEvent *event), the mousePressEvent gets called every time tabletEvent gets called with type TabletEvent::TabletPress. According to the <a href=\"http://doc.qt.io/qt-5/qtabletevent.html\" rel=\"nofollow\">Qt documentation</a>, this should not happen:</p>\n\n<blockquote>\n  <p>The event handler QWidget::tabletEvent() receives TabletPress, TabletRelease and TabletMove events. Qt will first send a tablet event, then <strong>if it is not accepted by any widget, it will send a mouse event</strong>. </p>\n</blockquote>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"tabletwidget.h\"\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)\n{\n    TabletWidget* tw = new TabletWidget(this);\n    setCentralWidget(tw);\n}\n</code></pre>\n\n<p>tabletwidget.h</p>\n\n<pre><code>#ifndef TABLETWIDGET_H\n#define TABLETWIDGET_H\n\n#include &lt;QWidget&gt;\n\nclass TabletWidget : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit TabletWidget(QWidget *parent = 0);\n\nprotected:\n    void tabletEvent(QTabletEvent *event) Q_DECL_OVERRIDE;\n    void mousePressEvent(QMouseEvent *event) Q_DECL_OVERRIDE;\n\nsignals:\n\npublic slots:\n};\n\n#endif // TABLETWIDGET_H\n</code></pre>\n\n<p>tabletwidget.cpp</p>\n\n<pre><code>#include \"tabletwidget.h\"\n#include &lt;QDebug&gt;\n#include &lt;QTabletEvent&gt;\n\nTabletWidget::TabletWidget(QWidget *parent) : QWidget(parent)\n{\n\n}\n\nvoid TabletWidget::tabletEvent(QTabletEvent *event)\n{\n    event-&gt;accept();\n    qDebug() &lt;&lt; \"tabletEvent: \" &lt;&lt; event-&gt;type();\n}\n\nvoid TabletWidget::mousePressEvent(QMouseEvent *event)\n{\n    qDebug() &lt;&lt; \"mousePressEvent\";\n}\n</code></pre>\n\n<p>The output generated if I use the tip of the pen or press any button of the Wacom Intuos CTH-680S-DEIT is:</p>\n\n<pre><code>tabletEvent:  92\nmousePressEvent\ntabletEvent:  87\ntabletEvent:  87\ntabletEvent:  87\ntabletEvent:  87\ntabletEvent:  93\n</code></pre>\n\n<p>So first the tabletEvent gets called, and even though I accept the event, mousePressEvent gets called anyway. Every following tabletEvent is of type QTabletEvent::TabletMove and the last one is QTabletEvent::TabletRelease. From the <a href=\"http://doc.qt.io/qt-5/qevent.html#Type-enum\" rel=\"nofollow\">Qt documentation</a>:</p>\n\n<pre><code>QEvent::TabletMove 87\nQEvent::TabletPress 92\nQEvent::TabletRelease 93\n</code></pre>\n\n<p>I have tested this on Mac OS 10.10.3 and Windows 7 with the same result. Is this a bug or am I doing it wrong?</p>\n\n<p>This is tested on Qt 5.4.2.</p>\n"}, {"tags": ["c++", "qt", "cmake", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435790319, "post_id": 31172828, "comment_id": 50353362, "body": "That still seems to require separating out each name from the variable containing the list of modules I&#39;d like to use and appending <code>Qt5::</code> to each one. Is there any particular reason why this is preferable to simply using <code>qt5_use_modules</code>?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435790369, "post_id": 31172828, "comment_id": 50353376, "body": "That <i>is</i> interesting, though, that you can get <code>target_link_libraries</code> to add include paths, etc."}, {"owner": {"reputation": 1449, "user_id": 984986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2113da6f02cd6428b92291c26ba11727?s=128&d=identicon&r=PG", "display_name": "Zrax", "link": "https://stackoverflow.com/users/984986/zrax"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435790753, "post_id": 31172828, "comment_id": 50353512, "body": "Depending on the format of the list, you may be able to do some regex on it, or iterate through the list to build a new variable in the right format..."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435790841, "post_id": 31172828, "comment_id": 50353537, "body": "Right, and I feel confident that I <i>could</i> do that, but what advantage does that have versus using <code>qt5_use_modules</code>, which already does that for me?"}, {"owner": {"reputation": 2587, "user_id": 1293689, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0069662f3eeae7aa943ef4318eda91b7?s=128&d=identicon&r=PG", "display_name": "TimZaman", "link": "https://stackoverflow.com/users/1293689/timzaman"}, "edited": false, "score": 0, "creation_date": 1437731112, "post_id": 31172828, "comment_id": 51164564, "body": "Using Qt5:: is just newer and is the Cmake 2.8.11+ way to do it."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 2587, "user_id": 1293689, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0069662f3eeae7aa943ef4318eda91b7?s=128&d=identicon&r=PG", "display_name": "TimZaman", "link": "https://stackoverflow.com/users/1293689/timzaman"}, "edited": false, "score": 2, "creation_date": 1472502200, "post_id": 31172828, "comment_id": 65767896, "body": "@TimZaman .....so CMake deprecates things just because they&#39;re not shiny and new, regardless of whether the &quot;new way&quot; is better or not?"}, {"owner": {"reputation": 1449, "user_id": 984986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2113da6f02cd6428b92291c26ba11727?s=128&d=identicon&r=PG", "display_name": "Zrax", "link": "https://stackoverflow.com/users/984986/zrax"}, "edited": false, "score": 0, "creation_date": 1472769951, "post_id": 31172828, "comment_id": 65898298, "body": "In this case it&#39;s actually Qt5 that decided to deprecate it -- see lib/cmake/Qt5Core/Qt5CoreMacros.cmake for reference"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1515100693, "post_id": 31172828, "comment_id": 83182886, "body": "@Zrax Interesting-- thank you. I don&#39;t see a comment in that file about <i>why</i> it&#39;s deprecated, though; any idea why that is or where I could find such an explanation?"}, {"owner": {"reputation": 1449, "user_id": 984986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2113da6f02cd6428b92291c26ba11727?s=128&d=identicon&r=PG", "display_name": "Zrax", "link": "https://stackoverflow.com/users/984986/zrax"}, "edited": false, "score": 0, "creation_date": 1515104219, "post_id": 31172828, "comment_id": 83184387, "body": "Interesting indeed -- it turns out that it was marked deprecated in qtbase.git because <code>qt4_use_modules</code> was marked deprecated by CMake after all.  It appears they (cmake) introduced <code>qt4_use_modules</code> for 2.8.10 and then deprecated it less than a year later for 2.8.12.  I can&#39;t tell why they deprecated it from just looking at git history, but I suspect they chose to only support their preferred interface going forward rather than maintaining two very different ones."}, {"owner": {"reputation": 763, "user_id": 200794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a1d7aeb5a21edb0fcce12df464ff13b?s=128&d=identicon&r=PG", "display_name": "FeRD", "link": "https://stackoverflow.com/users/200794/ferd"}, "edited": false, "score": 1, "creation_date": 1564050529, "post_id": 31172828, "comment_id": 100907621, "body": "<code>qtN_use_modules()</code> had a lot of problems, not the least of which is that it was &quot;global&quot;. Using <code>target_link_libraries()</code> with the IMPORTED Qt:: targets, you could link each of your targets with a <i>different</i> set of Qt modules. Additionally, <code>qtN_use_modules()</code> <a href=\"https://github.com/qtwebkit/qtwebkit/wiki/Using-QtWebKit-in-your-project#cmake\" rel=\"nofollow noreferrer\">only picked up modules in the Qt install dir</a>, which was a problem for external modules like QtWebKit which could be installed at a different path."}], "tags": [], "owner": {"reputation": 1449, "user_id": 984986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2113da6f02cd6428b92291c26ba11727?s=128&d=identicon&r=PG", "display_name": "Zrax", "link": "https://stackoverflow.com/users/984986/zrax"}, "is_accepted": false, "score": 15, "last_activity_date": 1435790187, "creation_date": 1435790187, "answer_id": 31172828, "question_id": 31172156, "link": "https://stackoverflow.com/questions/31172156/what-to-use-instead-of-qt5-use-modules/31172828#31172828", "title": "What to use instead of `qt5_use_modules`?", "body": "<p>The message about using IMPORTED targets actually refers to the generated targets that Qt5's CMake modules provide for you, not that you should be setting the IMPORTED property on the <code>target_link_libraries</code> macro.  For example, something like:</p>\n\n<pre><code>target_link_libraries(${myProjectName} Qt5::Core Qt5::Widgets)\n</code></pre>\n\n<p>will take care of adding all the necessary include paths, link paths, and libraries for using the <code>Qt5Core</code> and <code>Qt5Widgets</code> modules.</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6517, "favorite_count": 1, "answer_count": 1, "score": 13, "last_activity_date": 1435790187, "creation_date": 1435786735, "question_id": 31172156, "link": "https://stackoverflow.com/questions/31172156/what-to-use-instead-of-qt5-use-modules", "title": "What to use instead of `qt5_use_modules`?", "body": "<p>The <a href=\"http://doc.qt.io/qt-5/cmake-manual.html\" rel=\"noreferrer\">Qt 5 CMake manual</a> states that the <code>qt5_use_modules</code> macro is deprecated:</p>\n\n<blockquote>\n  <p>This macro is obsolete. Use target_link_libraries with IMPORTED targets instead.</p>\n</blockquote>\n\n<p>... But <code>qt5_use_modules</code> does more than simply specify link libraries: it specifies include directories, necessary compile flags, and more (see the full description in the linked documentation above).</p>\n\n<p>Assuming, then, that the variable <code>QTMODULES</code> contains some list of Qt modules that should be used for a project, what is the \"recommended\" way to replace the following \"deprecated\" CMake line?</p>\n\n<pre><code>qt5_use_modules(${myProjectName} ${QTMODULES})\n</code></pre>\n\n<p>The following does NOT work, primarily because it does not add any Qt include paths:</p>\n\n<pre><code>    target_link_libraries(${myProjectName} IMPORTED ${QTMODULES})\n</code></pre>\n\n<p>Does the <code>QTMODULES</code> variable need to be manually iterated over, so that <code>include_directories</code> can be called for each individual module name? This seems like a major step backward from <code>qt5_use_modules</code>, which is simple and \"just works.\" Am I missing something?</p>\n"}, {"tags": ["c++", "finance", "ta-lib"], "comments": [{"owner": {"reputation": 2053, "user_id": 841424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad3d6458e6133a1d3d305b4962af3110?s=128&d=identicon&r=PG", "display_name": "truf", "link": "https://stackoverflow.com/users/841424/truf"}, "edited": false, "score": 0, "creation_date": 1437851854, "post_id": 31172149, "comment_id": 51207633, "body": "Mine builds fine after <code>configure &amp;&amp; make</code>. System is <code>Linux laptop 3.19.8 #1 SMP Thu May 28 20:44:58 SAMT 2015 x86_64 x86_64 x86_64 GNU&#47;Linux</code>"}], "owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435786701, "creation_date": 1435786701, "question_id": 31172149, "link": "https://stackoverflow.com/questions/31172149/building-the-ta-lib-library-fails-with-undefined-references-from-libm-so", "title": "building the ta-lib library fails with undefined references from libm.so", "body": "<p>Trying to <code>make</code> the ta-lib library (ta-lib-0.4.0-src.tar.gz) I get the following error:</p>\n\n<pre><code>/home/me/ta-lib/src/.libs/libta_lib.so: undefined reference to `sinh'\n/home/me/ta-lib/src/.libs/libta_lib.so: undefined reference to `sincos'\n/home/me/ta-lib/src/.libs/libta_lib.so: undefined reference to `ceil'\n...\n</code></pre>\n\n<p>for a large number of maths functions.</p>\n\n<p>The failing command looks like this:</p>\n\n<pre><code>gcc -g -O2 -o .libs/ta_regtest (... .o files) -L/home/me/ta-lib/src \\\n    /home/me/ta-lib/src/.libs/libta_lib.so -lm -lpthread -ldl\n</code></pre>\n\n<p>The offending library (ta_lib) looks like this:</p>\n\n<pre><code>objdump -TC libta_lib.so | grep \"    D  \\*UND\\*\"\n0000000000000000      D  *UND*  0000000000000000              sinh\n0000000000000000      D  *UND*  0000000000000000              sincos\n0000000000000000      D  *UND*  0000000000000000              ceil\n...\n</code></pre>\n\n<p>For the same maths functions (the grep excludes defined functions and those that have a \"w\" (presumably weak) flag)</p>\n\n<p>A map lists the libraries included, among them:</p>\n\n<pre><code>LOAD /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/libm.so\n</code></pre>\n\n<p>and a list of the symbols (objdump -TC) defined in libm.so includes:</p>\n\n<pre><code>000000000001a320  w  iD  .text  0000000000000020  GLIBC_2.2.5 ceil\n</code></pre>\n\n<p>which was one of the undefined references (they are all there). I cannot determine the meaning of GLIBC_2.2.5.</p>\n\n<p>Why is the loader not finding these functions?</p>\n\n<p>My system looks like this:</p>\n\n<pre><code>$ uname -a\nLinux mynode 3.5.0-17-generic #28-Ubuntu SMP Tue Oct 9 19:31:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "c++14", "generic-lambda"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435833665, "post_id": 31171979, "comment_id": 50370261, "body": "I would recommend installing MinGW-w64.  It is an active fork of the original MinGW which has now fallen into disrepair. The link given in the current top answer is one guy&#39;s particular build of MinGW-w64; however if you get it from <a href=\"http://mingw-w64.org\" rel=\"nofollow noreferrer\">the official site</a> you can use the online installer and just <a href=\"http://stackoverflow.com/questions/29947302/meaning-of-options-in-mingw-w64-installer\">pick the options you want</a>."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1435789675, "post_id": 31171980, "comment_id": 50353176, "body": "I have absolutely no intention of doing this on any machine I manage, and yet I&#39;m compelled to uptick this. This answer is <i>Stellar</i> with a capital-S."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437965416, "post_id": 31171980, "comment_id": 51235094, "body": "Another thing to do is to right-click in the &quot;Settings &gt; Compiler&quot; page, and add <code>-std=c++14</code> to the list of flags excluded from C builds.  Otherwise, building a <code>.c</code> file will get that flag, causing a warning.  Then, you set your project to have both <code>-std=c++14 -std=c11</code>."}, {"owner": {"reputation": 1523, "user_id": 4015990, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/486e4bc336b1014ea0a13f4d8484428e?s=128&d=identicon&r=PG&f=1", "display_name": "user4015990", "link": "https://stackoverflow.com/users/4015990/user4015990"}, "edited": false, "score": 0, "creation_date": 1479062914, "post_id": 31171980, "comment_id": 68390521, "body": "I followed the procedure, the testing code compiles with no problem. But the following code still causes error <code>char *m_data = new char[14]{ &quot;Hello, World!&quot; };</code> this line of code compiles on VS 2015 though."}, {"owner": {"reputation": 305, "user_id": 4501434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc0b722241f7be09ec8e8bb8a2f5e69?s=128&d=identicon&r=PG&f=1", "display_name": "PRAFUL ANAND", "link": "https://stackoverflow.com/users/4501434/praful-anand"}, "edited": false, "score": 0, "creation_date": 1504198328, "post_id": 31171980, "comment_id": 78933050, "body": "Hi Andreas,  I have one program in which &quot;codecvt&quot;(#include &lt;codecvt&gt;) directory is included. After following above steps still i am getting error message like &quot;fatal error: codecvt: No such file or directory&quot;. Please give me a solution to resolve issue. while same code is working fine on online c++14 editor or compiler (like.Ideone,codechef etc)"}], "tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": true, "score": 40, "last_activity_date": 1512511163, "last_edit_date": 1512511163, "creation_date": 1435785981, "answer_id": 31171980, "question_id": 31171979, "link": "https://stackoverflow.com/questions/31171979/enabling-std-c14-flag-in-codeblocks/31171980#31171980", "title": "Enabling `-std=c++14` flag in Code::Blocks", "body": "<p>To compile your source code using C++14 in Code::Blocks, you, first of all, need to download and install a compiler that supports C++14 features.</p>\n\n<p>Here\u2019s how you can do it on Windows:</p>\n\n<ol>\n<li>Download MinGW from <a href=\"http://nuwen.net/mingw.html\" rel=\"noreferrer\">here</a> (particular build) or <a href=\"http://mingw-w64.org/\" rel=\"noreferrer\">from official site</a> to <a href=\"https://stackoverflow.com/questions/29947302/meaning-of-options-in-mingw-w64-installer\">choose options</a></li>\n<li>Extract it to for example: C:\\ (result will be C:\\MinGW)</li>\n<li>Open Code::Blocks</li>\n<li>Go to Settings => Compiler.</li>\n<li>Go to \u201cToolchain Executables\u201d.</li>\n<li>In the top field \u201cCompiler\u2019s installation directory\u201d, change the directory to the one where you extracted the compiler. E.g C:\\MinGW.</li>\n<li>Change all the necessary files under \u201cProgram Files\u201d to match the files under C:\\MinGW\\bin:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/jAhe3.png\" alt=\"enter image description here\"></p>\n\n<ol start=\"8\">\n<li>Before you hit \u201cOK\u201d, go to the leftmost tab \u201cCompiler settings\u201d.</li>\n<li>Select \u201cCompiler Flags\u201d.</li>\n<li>For simplicity, right-click in the list somewhere and select \u201cNew Flag\u201d:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/xY6Cf.png\" alt=\"enter image description here\"></p>\n\n<ol start=\"11\">\n<li>Type in the following and click \"OK\", and tick the box of the flag you just created:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/pe1Iz.png\" alt=\"enter image description here\"></p>\n\n<ol start=\"12\">\n<li>Lastly, you need to specify the debugger path. Go to \"Settings\" => \"Debugger\", click \"Default\" on the left-hand side and enter the new full path of the executable:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/wq4Yo.png\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p>Now, try to compile a program with C++14 features:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nauto main() -&gt; int\n{\n    auto add_two([](auto x, auto y){ return x + y; });\n\n    cout &lt;&lt; add_two(\"I\"s, \"t\"s) &lt;&lt; \" works!\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5701022, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5be0f8f50de10f05648e52b714387b33?s=128&d=identicon&r=PG&f=1", "display_name": "newmanadam", "link": "https://stackoverflow.com/users/5701022/newmanadam"}, "is_accepted": false, "score": -1, "last_activity_date": 1450896693, "creation_date": 1450896693, "answer_id": 34441957, "question_id": 31171979, "link": "https://stackoverflow.com/questions/31171979/enabling-std-c14-flag-in-codeblocks/34441957#34441957", "title": "Enabling `-std=c++14` flag in Code::Blocks", "body": "<p>May a humble newbie make one small suggestion? A small modification to test C++14 code, to allow resulting .exe file to be run independently of the IDE it was created in, slightly modified test program follows:</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n\n using namespace std;\n\n auto main() -&gt; int\n {\n     auto add_two([](auto x, auto y){ return x + y; });\n\n     cout &lt;&lt; add_two(\"I\"s, \"t\"s) &lt;&lt; \" works!\" &lt;&lt; endl;\n\n     cout &lt;&lt; \"press enter to continue...\" &lt;&lt; endl;\n     cin.ignore(10, '\\n');\n     cin.get();\n }\n</code></pre>\n\n<p>Thank you all, peace to all fellow coders, especially Igor Tandetnik.</p>\n"}], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18576, "favorite_count": 8, "accepted_answer_id": 31171980, "answer_count": 2, "score": 11, "last_activity_date": 1512511163, "creation_date": 1435785981, "last_edit_date": 1435826513, "question_id": 31171979, "link": "https://stackoverflow.com/questions/31171979/enabling-std-c14-flag-in-codeblocks", "title": "Enabling `-std=c++14` flag in Code::Blocks", "body": "<p>I have installed Code::Blocks for Windows and want to compile C++14 code like generic lambdas but the binary version of Code::Blocks that I've installed from <a href=\"http://www.codeblocks.org/downloads/26\" rel=\"noreferrer\">codeblocks.org</a> doesn't support the flag <br><code>-std=c++14</code>.</p>\n\n<p>How do I update the compiler and enable <code>-std=c++14</code> flag for Code::Blocks?</p>\n"}, {"tags": ["c++", "qt", "templates"], "answers": [{"comments": [{"owner": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "edited": false, "score": 0, "creation_date": 1435787810, "post_id": 31172287, "comment_id": 50352513, "body": "Perfect! That&#39;s an arcane <code>using</code> statement; I wish C++ had something like Rust&#39;s <code>where</code> clause.  Oh well.  Is there a canonical <code>function_traits</code> or is it just something that people have written because it&#39;s useful?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1435788567, "post_id": 31172287, "comment_id": 50352825, "body": "@Barry function_traits is a nice utility. I thought you might be interested to know that it fails for std::bind(f, std::placeholders::_1)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1435789227, "post_id": 31172287, "comment_id": 50353038, "body": "@RichardHodges You can&#39;t deduce the argument type of a function template, right? You&#39;d have to provide it."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1435790186, "post_id": 31172287, "comment_id": 50353316, "body": "@Barry I think it could be done, decltype(bind(F, Args&amp;&amp;...)) gives the type of the bind object and the type/class of the function object. Then there&#39;d have to be some mpl logic to find the nth placeholder using std::is_placeholder&lt;&gt; and map those back to the arguments of F. Not something I fancy doing right now, it&#39;s half past midnight here, but food for thought?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1435787301, "last_edit_date": 1495541164, "creation_date": 1435787301, "answer_id": 31172287, "question_id": 31171975, "link": "https://stackoverflow.com/questions/31171975/deducing-template-parameter-from-functor-argument-type/31172287#31172287", "title": "Deducing template parameter from functor argument type", "body": "<p>Basically what you want is: given a functor, <code>F</code>, identify the decayed type of its first argument.</p>\n\n<p>To that end, we need <a href=\"https://stackoverflow.com/a/7943765/2069064\"><code>function_traits</code></a>, with which we can do:</p>\n\n<pre><code>template &lt;typename F&gt;\nusing first_arg = std::decay_t&lt;typename function_traits&lt;F&gt;::template arg&lt;0&gt;::type&gt;;\n</code></pre>\n\n<p>Which we use:</p>\n\n<pre><code>template&lt;typename Functor&gt;\ninline QVariant map(const QVariant&amp; v, Functor f)\n{\n    using T = first_arg&lt;Functor&gt;;\n\n    return v.isValid()\n            ? QVariant{f(qvariant_cast&lt;T&gt;(v))}\n            : v;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "edited": false, "score": 0, "creation_date": 1435788872, "post_id": 31172567, "comment_id": 50352919, "body": "Gotcha.  I had stumbled upon this earlier and forgot about it.  Lambda type deduction is very cool.  And finally, I must return QVariant, because I&#39;m implementing a Qt proxy model."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1435788742, "creation_date": 1435788742, "answer_id": 31172567, "question_id": 31171975, "link": "https://stackoverflow.com/questions/31171975/deducing-template-parameter-from-functor-argument-type/31172567#31172567", "title": "Deducing template parameter from functor argument type", "body": "<pre><code>map&lt;QByteArray&gt;(someFuncReturningQVariant(), [](auto&amp;&amp; array){\n  return array.toString();\n});\n</code></pre>\n\n<p>is the C++14 way to do that: don't specify the type in the lambda, but rather as (only) a template parameter.</p>\n\n<p>Also note <code>-&gt;QString</code> is redundant in C++11 or 14.</p>\n\n<p>Alternatively, know that <code>QVariant</code> is not a type ameniable to mapping.  Do the cast explicitly external to your map function.</p>\n\n<p>Map the <code>QVariant</code> to a <code>optional&lt;T&amp;&gt;</code> externally (or a <code>T*</code>), and return an <code>optional&lt;std::result_of_t&lt;F(T&amp;)&gt;&gt;</code> (or a <code>QVariant</code> if you like throwing away information).</p>\n"}], "owner": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 1, "closed_date": 1435796768, "accepted_answer_id": 31172287, "answer_count": 2, "score": 3, "last_activity_date": 1435788742, "creation_date": 1435785954, "last_edit_date": 1435787318, "question_id": 31171975, "link": "https://stackoverflow.com/questions/31171975/deducing-template-parameter-from-functor-argument-type", "closed_reason": "Duplicate", "title": "Deducing template parameter from functor argument type", "body": "<p>I have the following code that is meant to accept a Qt QVariant and apply a functor if the variant contains a value:</p>\n\n<pre><code>template&lt;typename T, typename Functor&gt;\ninline QVariant map(const QVariant&amp; v, Functor f)\n{\n    return v.isValid()\n            ? QVariant{f(qvariant_cast&lt;T&gt;(v))}\n            : v;\n}\n</code></pre>\n\n<p>My problem is that the compiler cannot deduce the type of T when I invoke this function as</p>\n\n<pre><code>map(someFuncReturningQVariant(), [](const QByteArray&amp; array) -&gt; QString {\n    return array.toString();\n});\n</code></pre>\n\n<p>The compiler complains (cleaned up from the original error, which has longer type names):</p>\n\n<pre><code>error: no matching function for call to `map(QVariant, &lt;lambda(const QByteArray&amp;)&gt;)`\nnote: candidate is:\n    template&lt;class T, class Functor&gt; QVariant map(const QVariant&amp;, Functor).\nnote: template argument deduction/substitution failed:\n      couldn't deduce template parameter 'T'\n</code></pre>\n\n<p>This is because QVariant erases the type of the object it contains at runtime.  (It still knows it internally, much like <code>boost::any</code>, and <code>qvariant_cast&lt;T&gt;()</code> gets the original object back).</p>\n\n<p><strong>How can I capture the type of the variable passed to the <code>Functor</code></strong> and use it elsewhere?  Alternatively, how can I specify that <code>Functor</code> takes a parameter of type <code>T</code>?  (I suspect these are actually the same question, or that they at least have the same answer.)</p>\n\n<p>Note that my approach works fine with <code>std::optional</code>, because the types are not erased:</p>\n\n<pre><code>using std::experimental::optional;\n\ntemplate&lt;typename T, typename Functor&gt;\ninline auto map(const optional&lt;T&gt;&amp; v, Functor f) -&gt; optional&lt;decltype(f(*v))&gt;\n{\n    return v ? optional&lt;decltype(f(*v))&gt;{f(*v)}\n             : v;\n}\n</code></pre>\n\n<p>Also note that the QVariant code works fine if I manually specify the type:</p>\n\n<pre><code>map&lt;QByteArray&gt;(someFuncReturningQVariant(), [](const QByteArray&amp; array) -&gt; QString {\n    return array.toString();\n});\n</code></pre>\n\n<p>But of course, this is much uglier.</p>\n"}, {"tags": ["c++", "annotations"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435785925, "post_id": 31171925, "comment_id": 50351684, "body": "I&#39;m not sure what you&#39;re meaning with the term <i>runtime annotation</i> :-P ... Could you elaborate this please, ideally showing a code sample for what you&#39;re trying to achieve?"}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435786064, "post_id": 31171925, "comment_id": 50351733, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 ya. there is nothing like runtime annotations, but I want to implement something that works similar to an event handler that works on runtime. I&#39;m sorry if confused you by using the word annotation."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435786432, "post_id": 31171925, "comment_id": 50351902, "body": "What is meant with this term actually?? There&#39;s plenty of techniques available to implement event handlers though (synchronously or even asynchronously). The starting point should be to provide some event-source/sink interfaces, and declare what should be an event at all. For more sophisticated samples of such techniques have a look at e.g. my <a href=\"http://makulik.github.io/sttcl/\" rel=\"nofollow noreferrer\">STTCL</a> state pattern framework. Your question seems way to broad to be answered concisely here."}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435786553, "post_id": 31171925, "comment_id": 50351964, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you can refresh my question. I am looking for events like failed to enter while loop. successfully entered while loop, created object, deleted object, changed global variable etc."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435786682, "post_id": 31171925, "comment_id": 50352024, "body": "<i>&quot;... events like failed to enter while loop ...&quot;</i> That doesn&#39;t make any more sense, without seeing code what you&#39;re actually trying to do."}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435787423, "post_id": 31171925, "comment_id": 50352327, "body": "I don&#39;t have right way to explain my requirement, but I&#39;m sure it is something that really makes sense. If I say I want an asyncronous logger does it makes more sense! Logger have no dependency on what my code is actually doing."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "edited": false, "score": 0, "creation_date": 1435787509, "post_id": 31171925, "comment_id": 50352370, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/82137/discussion-between---and-ikis\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1435787355, "creation_date": 1435787355, "answer_id": 31172303, "question_id": 31171925, "link": "https://stackoverflow.com/questions/31171925/runtime-event-handler-in-cpp/31172303#31172303", "title": "Runtime event handler in cpp?", "body": "<p>The simplest form of event handler is a registered callback function pointer:</p>\n\n<pre><code>enum Events {\n    FailedEnteringWhileLoop ,\n    SuccessfullyEnteredWhileLoop ,\n};\n\ntypedef void(EventHandler*)(Events);\n</code></pre>\n\n<hr>\n\n<pre><code> void MyEventHandler(Events ev) {\n    switch(ev) {\n    case FailedEnteringWhileLoop:\n        // Do something\n        break;\n    case SuccessfullyEnteredWhileLoop:\n        // Do something\n        break;\n    }\n }\n</code></pre>\n\n<hr>\n\n<pre><code>EventHandler evh = MyEventHandler;\nbool whileLoopEntered = false;\nwhile(condition) {\n    if(!whileLoopEntered) {\n        whileLoopEntered = true;\n        (*evh)(SuccessfullyEnteredWhileLoop);\n    }\n}\n\nif(!whileLoopEntered) {\n    (*evh)(FailedEnteringWhileLoop);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1435787994, "creation_date": 1435787994, "answer_id": 31172436, "question_id": 31171925, "link": "https://stackoverflow.com/questions/31171925/runtime-event-handler-in-cpp/31172436#31172436", "title": "Runtime event handler in cpp?", "body": "<blockquote>\n  <p>I am looking for events like failed to enter while loop. successfully\n  entered while loop, created object, deleted object, changed global\n  variable etc.</p>\n</blockquote>\n\n<p>The C++ language itself does not track these kinds of things as \"events\". Generally speaking it doesn't provide hooks into any of the various fundamental activities that happen across code.</p>\n\n<p>So to do what you're asking for requires building an infrastructure yourself and working it into your code in various ways. (Or finding someone else who has done the same sort of work already and made it available. Although you still would have to integrate it into your code.)</p>\n\n<p>To give some idea of what might have to be done:</p>\n\n<p>For creating and deleting objects you can override the <code>new</code> and <code>delete</code> operators. But that doesn't cover stack/local/etc objects. Otherwise you could wedge something the constructors and destructors of every class you want to track, or even have all of them derive from a common base class which encapsulates the tracking.</p>\n\n<p>For changes to a variable, you would have to wrap that variable in a container which only exposes the ability to change it through member functions. Then those could be coded to raise events.</p>\n\n<p>For entering loops... You're out of luck because a loop isn't an entity that can be extended or hooked. You literally have to put some kind of call at every loop you want to track.</p>\n\n<p>As for the rest of the infrastructure, you would probably end up doing something like having all of those various \"events\" call to some kind of global logging object. If you need different things catch different events over the course of a program, then you might also need to build a way of registering and de-registering listeners (the listeners themselves being based on an interface to derive from or std::function or whatever suits your use case).</p>\n\n<p>But in the end since there isn't an out-of-the-box way provided by the language, you might want to re-consider what you really want and what you hope to achieve with it. In fact you might be better off asking your question in terms how to accomplish the end goal you wanted this for rather than how to do this \"event\" system.</p>\n"}], "owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1435787994, "creation_date": 1435785706, "last_edit_date": 1435786217, "question_id": 31171925, "link": "https://stackoverflow.com/questions/31171925/runtime-event-handler-in-cpp", "title": "Runtime event handler in cpp?", "body": "<p>Working on a cpp project, where I need something like runtime event handler. My primary goal is to keep a track of various events that takes place in a sample program  and based on the events specific handlers are triggered. </p>\n\n<p>These event triggering handlers/functions are not contributing anything to the global objective of the sample program, but are just keeping track over various events in the cpp sample program.</p>\n\n<p>My question is it prossible to create soemthing like custom eventhandlers in cpp? \nIf yes, is there any tutorial for creating such custom eventhandler? </p>\n\n<p>eg:\nEvent are like failed to enter while loop. successfully entered while loop, created object, deleted object, changed global variable etc.</p>\n"}, {"tags": ["c++", "gemfire", "geode"], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 1041313, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4461f02989bb1d19a7de713bbffb8faa?s=128&d=identicon&r=PG", "display_name": "mojovski", "link": "https://stackoverflow.com/users/1041313/mojovski"}, "edited": false, "score": 0, "creation_date": 1436087042, "post_id": 31172763, "comment_id": 50456755, "body": "are there examples in c++?"}], "tags": [], "owner": {"reputation": 5847, "user_id": 3390417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeWZM.jpg?s=128&g=1", "display_name": "John Blum", "link": "https://stackoverflow.com/users/3390417/john-blum"}, "is_accepted": true, "score": 2, "last_activity_date": 1435789836, "creation_date": 1435789836, "answer_id": 31172763, "question_id": 31171923, "link": "https://stackoverflow.com/questions/31171923/minimal-test-with-apache-geode/31172763#31172763", "title": "minimal test with apache geode", "body": "<p>Checkout... <a href=\"https://cwiki.apache.org/confluence/display/GEODE/Index#Index-Geodein5minutes\" rel=\"nofollow\">https://cwiki.apache.org/confluence/display/GEODE/Index#Index-Geodein5minutes</a></p>\n\n<p>There is more information on the Geode Wiki as well that maybe of use to you.</p>\n\n<p><a href=\"https://cwiki.apache.org/confluence/display/GEODE/Application+Development\" rel=\"nofollow\">https://cwiki.apache.org/confluence/display/GEODE/Application+Development</a></p>\n\n<p>This maybe of particular interests to you...</p>\n\n<p><a href=\"https://cwiki.apache.org/confluence/display/GEODE/PDX+Serialization+Internals\" rel=\"nofollow\">https://cwiki.apache.org/confluence/display/GEODE/PDX+Serialization+Internals</a></p>\n\n<p>Hope this helps get you started.</p>\n\n<p>Cheers!</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 579979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OHhAG.jpg?s=128&g=1", "display_name": "William Markito", "link": "https://stackoverflow.com/users/579979/william-markito"}, "is_accepted": false, "score": 0, "last_activity_date": 1436309461, "creation_date": 1436309461, "answer_id": 31280732, "question_id": 31171923, "link": "https://stackoverflow.com/questions/31171923/minimal-test-with-apache-geode/31280732#31280732", "title": "minimal test with apache geode", "body": "<p>The C++ and C# clients are currently not part of Apache Geode, just Pivotal GemFire.</p>\n\n<p>You will find information about Geode and Docker <a href=\"https://cwiki.apache.org/confluence/display/GEODE/How+to+use+Geode+on+Docker\" rel=\"nofollow\">here</a>, <a href=\"https://registry.hub.docker.com/u/apachegeode/geode/\" rel=\"nofollow\">here</a> and <a href=\"https://github.com/markito/geode-docker\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 542536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lRyl.jpg?s=128&g=1", "display_name": "joshuad2", "link": "https://stackoverflow.com/users/542536/joshuad2"}, "is_accepted": false, "score": 0, "last_activity_date": 1436454615, "creation_date": 1436454615, "answer_id": 31321500, "question_id": 31171923, "link": "https://stackoverflow.com/questions/31171923/minimal-test-with-apache-geode/31321500#31321500", "title": "minimal test with apache geode", "body": "<p>There may not be actual documentation for C++, but you can use the REST client to communication with GemFire as well. Documentation is <a href=\"http://gemfire.docs.pivotal.io/latest/userguide/gemfire_rest/chapter_overview.html\" rel=\"nofollow\">here</a> and <a href=\"http://geode-docs.cfapps.io/docs/geode_rest/chapter_overview.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 470, "user_id": 1041313, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4461f02989bb1d19a7de713bbffb8faa?s=128&d=identicon&r=PG", "display_name": "mojovski", "link": "https://stackoverflow.com/users/1041313/mojovski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 31172763, "answer_count": 3, "score": 1, "last_activity_date": 1436454615, "creation_date": 1435785691, "question_id": 31171923, "link": "https://stackoverflow.com/questions/31171923/minimal-test-with-apache-geode", "title": "minimal test with apache geode", "body": "<p>I would like to extend geode with custom binary data (serialization). Is there any documentation about how to kickoff a minimal setup/system using geode? I saw a <a href=\"https://registry.hub.docker.com/u/apachegeode/geode/\" rel=\"nofollow\">docker image</a> but didn't find any docs on this.</p>\n\n<p>It would be more than enough for me to have a c++ client which can push and query the stored (~30 GB of) data by a key.</p>\n\n<p>Thank you very much for your help!</p>\n"}, {"tags": ["c++", "list", "memory-leaks", "stl", "valgrind"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1435786298, "post_id": 31171823, "comment_id": 50351849, "body": "There is a problem in code you are not showing. Create a small complete C++ program that reproduces this issue. For example, try to reproduce the problem with just the code you have shown above."}, {"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 1, "creation_date": 1435788219, "post_id": 31171823, "comment_id": 50352697, "body": "<code>list</code> is going to take care of its contents when it goes out of scope, regardless of calling <code>clear</code>. So as jxh said, your problem is elsewhere. Perhaps you aren&#39;t deallocating a <code>Detector</code> object, thus it&#39;s members are leaked? Or may that&#39;s inside of some other object that&#39;s leaked... etc."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1435790390, "post_id": 31171823, "comment_id": 50353386, "body": "does Method have a virtual destructor?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1435808125, "post_id": 31171823, "comment_id": 50357551, "body": "I have to agree with the others, because I do not see any memory being declared on the heap that you are showing. It is somewhere else that either new or malloc is being used. Also another thing I would do is to replace any raw heap pointers with either std::shared_ptr or std::unique_ptr. This way when they go out of scope their destructors will handle the clean up of any memory allocation."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1435808992, "post_id": 31171823, "comment_id": 50357732, "body": "I predict you have a global variable of type <code>Detector</code>. Valgrind report is being generated before that variable is destroyed. Alternatively, you allocate an instance of <code>Detector</code> on the heap, and leak it."}, {"owner": {"reputation": 51, "user_id": 2668300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbe1515741f139835fb3867ee2b4de1?s=128&d=identicon&r=PG", "display_name": "Mukyu", "link": "https://stackoverflow.com/users/2668300/mukyu"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1435826532, "post_id": 31171823, "comment_id": 50365302, "body": "@RichardHodges : Thanks for your intuition ! Finally, the problem had nothing related with std::list. It was that <code>Detector</code> is inheriting from <code>Method</code>, and my list is defined in <code>Detector</code>. Besides, I instanciate an object of class Method like this : <code>Method *m = new Detector()</code> and then, I call the destructor of <code>Method</code>. As the destructor of <code>Method</code> was not virtual, <code>~Detector()</code> and <code>centers.clear()</code> was never invoked. Hence the memory leaks. Thanks again, and thanks everyone !"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1435837603, "post_id": 31171823, "comment_id": 50372833, "body": "@Mukyu common enough mistakes for a beginner. (almost) Always make base class destructors virtual, never use new and delete. use make_unique and make_shared to make smart pointers. Happy coding! :)"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1435853418, "post_id": 31171823, "comment_id": 50384262, "body": "You have not yet explained how your <code>detectFeatures()</code> method bypassed the <code>clear()</code> call."}], "owner": {"reputation": 51, "user_id": 2668300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbe1515741f139835fb3867ee2b4de1?s=128&d=identicon&r=PG", "display_name": "Mukyu", "link": "https://stackoverflow.com/users/2668300/mukyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435827522, "creation_date": 1435785293, "last_edit_date": 1435827522, "question_id": 31171823, "link": "https://stackoverflow.com/questions/31171823/memory-leaks-in-a-stl-list", "title": "Memory leaks in a STL list", "body": "<p>I am writing a class which contains a member, more precisely the native container <code>std::list</code>, and a method. The method retrieves a set of points (<code>Point2i</code>, from OpenCV) and adds them to the list. My algorithm works properly, but it produces memory leaks according to Valgrind reports. Although I delete all the elements of the list using member functions such as <code>clear</code> after having processed my list (as well as in the destructor of the class), Valgrind tells me that all the elements of the list have not be freed, whereas I was assuming that it was the role of <code>clear</code>. Sorry if this question sounds stupid, but is it really normal ?</p>\n\n<p>Here are the relevant portions of my code, first the header :</p>\n\n<pre><code>class Detector : public Method\n{\npublic:\n    Detector();\n    ~Detector();\n\nprotected:\n    int detectFeatures();\n    list&lt;Point2i&gt; centers;\n};\n</code></pre>\n\n<p>Then the code, properly said :</p>\n\n<pre><code>int Detector::detectFeatures() {\n    for (int i = 0 ; i &lt; im.rows ; i++) {\n        for (int j = 0 ; j &lt; im.cols ; j++) {\n            bool undetected = true;\n            for (int y = max(0, i - radius) ; y &lt;= min(im.rows - 1, i + radius) &amp;&amp; undetected ; y++) {\n                for (int x = max(0, j - radius) ; x &lt;= min(im.cols - 1, j + radius) &amp;&amp; undetected ; x++) {\n                    if (im.at&lt;Vec4f&gt;(y, x)[3] &gt; 0.9) {\n                        centers.push_back(Point2i(j, i));\n                        undetected = false;\n                    }\n                }\n            }\n        }\n    }\n    // ...\n    centers.clear();\n}\n\nDetector::~Detector() {\n    centers.clear(); // I also tried this\n}\n</code></pre>\n\n<p>Finally, here is the Valgrind output of the program (the list contains 103 510 elements) :</p>\n\n<pre><code>==7182== HEAP SUMMARY:\n==7182==     in use at exit: 2,484,240 bytes in 103,510 blocks\n==7182==   total heap usage: 103,543 allocs, 33 frees, 41,812,122 bytes allocated\n==7182== \n==7182== 2,484,240 bytes in 103,510 blocks are still reachable in loss record 1 of 1\n==7182==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7182==    by 0x4054C8: __gnu_cxx::new_allocator&lt;std::_List_node&lt;cv::Point_&lt;int&gt; &gt; &gt;::allocate(unsigned long, void const*) (new_allocator.h:92)\n==7182==    by 0x4053E5: std::_List_base&lt;cv::Point_&lt;int&gt;, std::allocator&lt;cv::Point_&lt;int&gt; &gt; &gt;::_M_get_node() (stl_list.h:327)\n==7182==    by 0x4052AC: std::_List_node&lt;cv::Point_&lt;int&gt; &gt;* std::list&lt;cv::Point_&lt;int&gt;, std::allocator&lt;cv::Point_&lt;int&gt; &gt; &gt;::_M_create_node&lt;cv::Point_&lt;int&gt; &gt;(cv::Point_&lt;int&gt;&amp;&amp;) (stl_list.h:491)\n==7182==    by 0x40510D: void std::list&lt;cv::Point_&lt;int&gt;, std::allocator&lt;cv::Point_&lt;int&gt; &gt; &gt;::_M_insert&lt;cv::Point_&lt;int&gt; &gt;(std::_List_iterator&lt;cv::Point_&lt;int&gt; &gt;, cv::Point_&lt;int&gt;&amp;&amp;) (stl_list.h:1523)\n==7182==    by 0x404E5A: std::list&lt;cv::Point_&lt;int&gt;, std::allocator&lt;cv::Point_&lt;int&gt; &gt; &gt;::push_back(cv::Point_&lt;int&gt;&amp;&amp;) (stl_list.h:993)\n==7182==    by 0x403D58: Detector::detectFeatures() (detector.cpp:72)\n==7182==    by 0x401C0D: main (main.cpp:35)\n==7182== \n==7182== LEAK SUMMARY:\n==7182==    definitely lost: 0 bytes in 0 blocks\n==7182==    indirectly lost: 0 bytes in 0 blocks\n==7182==      possibly lost: 0 bytes in 0 blocks\n==7182==    still reachable: 2,484,240 bytes in 103,510 blocks\n==7182==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n\n<p>And this cannot be an OpenCV problem in my code : I tried <code>std::pair</code> instead of <code>Point2i</code> but I got the same problem. Whatever the type, the elements are not really deallocated when the program ends. The same if I use a <code>std::vector</code> instead of a <code>std::list</code>, where the data is this time \"definitely lost\". </p>\n\n<p>Should I do something more than calling <code>clear</code> or <code>erase</code> on each element of the list ? Thanks in advance for your comments and answers !</p>\n\n<p>__</p>\n\n<p><strong>EDIT</strong> : There were some elements I didn't precise above, and possibly the most important one : <code>Detector</code> inherits from <code>Method</code> and this is an object of class <code>Method</code> that I instanciate in my program.</p>\n\n<pre><code>class Method {\npublic:\n    Method();\n    ~Method();\n    virtual void detectFeatures() = 0;\n};\n</code></pre>\n\n<p>Instanciation :</p>\n\n<pre><code>Method* m = new Detector();\nm-&gt;detectFeatures();\n// ...\ndelete m;\n</code></pre>\n\n<p>As <code>centers</code> is a member of <code>Detector</code>, it won't be destroyed if the destructor of <code>Method</code> is not <code>virtual</code>, which was not the case in the code I showed you. Now that <code>~Method()</code> is actually virtual, there are no longer memory leaks. So the problem has nothing related with containers, it was rather an inheritance problem. Thank you so much !</p>\n"}, {"tags": ["c++", "performance", "if-statement", "switch-statement"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435785522, "post_id": 31171817, "comment_id": 50351479, "body": "Is that your real use case, or just a demonstration to explain your question?"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435785790, "post_id": 31171817, "comment_id": 50351624, "body": "Just a demo, though I used the same code for speed testing"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1435787934, "post_id": 31171817, "comment_id": 50352568, "body": "If you are so concerned about jumps, why use a switch, it often becomes a jump.  Use lookup tables."}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435788203, "post_id": 31171817, "comment_id": 50352690, "body": "As far as I know, if you have no default case, and all your cases form a continuous spectrum, there should only be one or two jumps which should be better once you reach three nested if statements"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435786087, "post_id": 31171969, "comment_id": 50351747, "body": "I&#39;ll quickly test and disassemble it and see how it gets handled"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435786546, "post_id": 31171969, "comment_id": 50351959, "body": "Interestingly, the jumps appear to have disappeared"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435787089, "post_id": 31171969, "comment_id": 50352190, "body": "Very interest, that actually removed the jumps, and managed to improve performance of my switch solution by an order of magnitude, though if statements still seem to be the way to go. I&#39;ll have to play around with this."}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435787149, "post_id": 31171969, "comment_id": 50352209, "body": "Thank you very much for this solution. Might I ask though how you knew that the jumps would be replaced?"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 1, "creation_date": 1435787321, "post_id": 31171969, "comment_id": 50352283, "body": "That&#39;s because your solution uses conditions in an if statement. This version uses &quot;conditions&quot; to set values. BTW, the best improvement to your code would be to reverse the order in your if version. If you want to return C if it&#39;s valid, test that first. Than B, and only Than A. You&#39;re working too hard since your tests are backwards"}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": true, "score": 2, "last_activity_date": 1435785918, "creation_date": 1435785918, "answer_id": 31171969, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles/31171969#31171969", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>Not sure it will be much better, but you could try playing with bitfields:</p>\n\n<pre><code>union SOMECONDTIONS {\n  unsigned char aggregate;\n  struct {\n    int c1:1;\n    int c2:1;\n    int c3:1;\n    int c4:1;\n    int c5:1;\n    int c6:1;\n    int c7:1;\n    int c8:1;\n  } conditions;\n}\n\nSOMECODITIONS c;\nc.aggregate = 0;\nc.conditions.c1 = A &gt; 0;\nc.conditions.c2 = B &gt; 0;\nc.conditions.c3 = C &gt; 0;\nswitch(c.aggregate) {\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435788879, "post_id": 31172513, "comment_id": 50352924, "body": "I have trouble believing it&#39;s the same code... Why the <code>if</code>/<code>else</code>/<code>if</code> madness ? :|"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435788889, "post_id": 31172513, "comment_id": 50352929, "body": "I am afraid that that the disassembly of that code appears to contain ten+ jumps, which is what i was trying to avoid"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435789071, "post_id": 31172513, "comment_id": 50352990, "body": "@user4578093 I count <a href=\"http://goo.gl/Z7nbJy\" rel=\"nofollow noreferrer\">two</a>. Which compiler are you using that generates a dozen jumps for such a simple function ?"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435791682, "post_id": 31172513, "comment_id": 50353803, "body": "g++, and fourteen specifically"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435791740, "post_id": 31172513, "comment_id": 50353820, "body": "I think it is because the compiler wanted a single return, so it transformed it into a nested version"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435796925, "post_id": 31172513, "comment_id": 50355193, "body": "Thank you for the answer, I&#39;ll need sometime to go through it"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435808358, "post_id": 31172513, "comment_id": 50357592, "body": "That was incredibly interesting to work through! I&#39;ll remember this technique. Thank you."}], "tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 3, "last_activity_date": 1435829304, "last_edit_date": 1435829304, "creation_date": 1435788429, "answer_id": 31172513, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles/31172513#31172513", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>Possibly this will do...?</p>\n\n<pre><code>int ifFunc(int A, int B, int C){\n  if( C &gt; 0 ) return C;\n  if( B &gt; 0 ) return B;\n  if( A &gt; 0 ) return A;\n  return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'm sorry, I must have misunderstood you\u2014I thought you just need to reduce the number of conditional branches, not to remove them completely. Here's the solution (unless I made some mistake...), based on the assumption your system works in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow\">Two's complement</a> code:</p>\n\n<pre><code>static const unsigned iMIN = ~(~0u &gt;&gt; 1);  // binary 1000...0\nstatic const int BITS_PER_BYTE = 8;\n\nstatic inline int partialmask( int x ) {\n    // returns positive (0....) for positive x,\n    // negative (1....) for negative or zero x\n    return x | (int)(iMIN - (unsigned)x);\n}\nstatic inline int fullmask( int x ) {\n    // extends the sign bit so that\n    // positive becomes binary 0000...0 for positive x\n    // negative becomes binary 1111...1 for negative or zero x\n    return partialmask( x ) &gt;&gt; (BITS_PER_BYTE * sizeof(int) - 1);\n}\n\nint noIfFunc(int A, int B, int C){\n  int res = 0, mask;\n\n  mask = fullmask( A );  // negative or zero A causes an all-ones mask\n  res &amp;= mask;           // to preserve the res value\n  res |= A &amp; ~mask;      // and keep it from overwriting with A\n\n  mask = fullmask( B );  // positive B causes\n  res &amp;= mask;           // res to be cleared with all-zeros mask\n  res |= B &amp; ~mask;      // then overwritten with B\n\n  mask = fullmask( C );\n  res &amp;= mask;\n  res |= C &amp; ~mask;\n\n  return res;  // finally res == most recent positive value (else zero)\n}\n</code></pre>\n\n<p>Probably that's not the shortest possible code. However, it should contain no branches, if properly reduced (with functions inlined).</p>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435809169, "post_id": 31174655, "comment_id": 50357777, "body": "It does! It also produces a very compact disassembly! I going to have to experiment, but I think your solution will be the basis for a proper solution to this issue. Thank you for your contribution!"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1435829844, "post_id": 31174655, "comment_id": 50367683, "body": "A simple and elegant code, but it has a little flaw: for a parameter with the smallest possible <code>int</code> value, binary <code>1000...0</code> (often available as <code>INT_MIN</code> constant) subtracting <code>1</code> yields a positive result, so the corresponding bit in <code>i</code> will be set to <code>0</code> instead of <code>1</code> \u2013 that specific negative parameter value will be handled like it was positive."}, {"owner": {"reputation": 41, "user_id": 4963245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549b9beb256847e2e7698efbc37ceeac?s=128&d=identicon&r=PG&f=1", "display_name": "MK.Lee", "link": "https://stackoverflow.com/users/4963245/mk-lee"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1435910045, "post_id": 31174655, "comment_id": 50405851, "body": "@CiaPan Nice point! Subtracting 1 is to remove 0 from the candidates because of the inequality in condition. However, negation can remove the flaw at the boundary case.   `     const int i = ((-c &gt;&gt; bits) * -4) -                   ((-b &gt;&gt; bits) *  2) -                    (-a &gt;&gt; bits); `"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1435911293, "post_id": 31174655, "comment_id": 50406539, "body": "@MK.Lee But you can&#39;t negate. For two&#39;s complement, if a parameter, say <code>A</code>, is binary <code>1000...0</code> (for 32-bits integer it is <code>-2147483648</code>), then <code>-A</code> is not representable, as <code>INT_MAX == 2147483647</code>."}], "tags": [], "owner": {"reputation": 41, "user_id": 4963245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549b9beb256847e2e7698efbc37ceeac?s=128&d=identicon&r=PG&f=1", "display_name": "MK.Lee", "link": "https://stackoverflow.com/users/4963245/mk-lee"}, "is_accepted": false, "score": 4, "last_activity_date": 1435910484, "last_edit_date": 1435910484, "creation_date": 1435803620, "answer_id": 31174655, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles/31174655#31174655", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>I hope this code will help you to remove jumps in assembly...</p>\n\n<pre><code>static const int index[8] = {0, 1, 2, 2, 3, 3, 3, 3};\n\nint ifFunc(int a, int b, int c)\n{\n    const int ret[4] = {0, a, b, c};\n    const int bits = sizeof(int) * 8 - 1;\n    //const int i = ((((c - 1) &gt;&gt; bits) + 1) * 4) +\n    //              ((((b - 1) &gt;&gt; bits) + 1) * 2) +\n    //               (((a - 1) &gt;&gt; bits) + 1);\n    const int i = ((-c &gt;&gt; bits) * -4) -\n                  ((-b &gt;&gt; bits) *  2) -\n                   (-a &gt;&gt; bits);\n\n    return ret[index[i]];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1435832316, "post_id": 31178715, "comment_id": 50369451, "body": "That compiles with branches/jumps, which OP wants to avoid."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1435832626, "post_id": 31178715, "comment_id": 50369635, "body": "Maybe, but this code is similar to short-circuit evaluation and should be even better than the nested-if solution. Some compilers should be able to turn the second construct into conditional assignments."}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435848963, "post_id": 31178715, "comment_id": 50381113, "body": "Interestingly, the second version generated a single conditional, and two jumps like this (I hope the formatting isn&#39;t too awful) int ret = (C &gt; 0 ? C : (B &gt; 0 ? B : (A &gt; 0 ? A : 0)));   cmpl   $0x0,0x10(%ebp)   jg     0x4016f2 &lt;myFunc2(int, int, int)+38&gt;   cmpl   $0x0,0xc(%ebp)   jg     0x4016ed &lt;myFunc2(int, int, int)+33&gt;   mov    $0x0,%eax   cmpl   $0x0,0x8(%ebp)   cmovns 0x8(%ebp),%eax   jmp    0x4016f5 &lt;myFunc2(int, int, int)+41&gt;   mov    0xc(%ebp),%eax   jmp    0x4016f5 &lt;myFunc2(int, int, int)+41&gt;   mov    0x10(%ebp),%eax   mov    %eax,-0x4(%ebp)"}, {"owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "edited": false, "score": 0, "creation_date": 1435849196, "post_id": 31178715, "comment_id": 50381269, "body": "And of course it was. Anyway, in the middle of that mess is CMOVNS which I believe is Move If SF==0. The third version didn&#39;t generate any conditionals for me, and neither did the first, would optimization level have anything to do with this? I compiled with g++ -std=c++11 -g"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1435849692, "post_id": 31178715, "comment_id": 50381625, "body": "Now only benchmarking can tell what is better (if there&#39;s any answer to this)."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1435835283, "last_edit_date": 1435835283, "creation_date": 1435823875, "answer_id": 31178715, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles/31178715#31178715", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>What about</p>\n\n<pre><code>if (C &gt; 0) return C;\nif (B &gt; 0) return B;\nif (A &gt; 0) return A;\nreturn 0;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>return C &gt; 0 ? C : (B &gt; 0 ? B : (A &gt; 0 ? A : 0)));\n</code></pre>\n\n<p>?</p>\n\n<p>Also, if the compiler implements conditional assignments,</p>\n\n<pre><code>R= 0;\nif (A &gt; 0) R= A;\nif (B &gt; 0) R= B;\nif (C &gt; 0) R= C;\n</code></pre>\n\n<hr>\n\n<p>In the last case, MSVC does use conditional assignments, but for the third one, as it prefers to return the zeroed register :(</p>\n\n<pre><code>; 7    :     int R= 0;\n; 8    :     if (A &gt; 0) R= A;\n\n    mov ecx, DWORD PTR _A$[esp-4]\n    xor eax, eax\n    test    ecx, ecx\n    cmovg   eax, ecx\n\n; 9    :     if (B &gt; 0) R= B;\n\n    mov ecx, DWORD PTR _B$[esp-4]\n    test    ecx, ecx\n    cmovg   eax, ecx\n\n; 10   :     if (C &gt; 0) R= C;\n\n    mov ecx, DWORD PTR _C$[esp-4]\n    test    ecx, ecx\n    jle SHORT $LN1@f1\n\n; 12   :    return R;\n\n    mov eax, ecx\n$LN1@f1:\n\n    ret 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "is_accepted": false, "score": 0, "last_activity_date": 1435859229, "creation_date": 1435859229, "answer_id": 31191287, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles/31191287#31191287", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>Here is a solution that nearly beats the compiler's version using inline assembly. My apologies if it's a little off, I only learned assembly last night</p>\n\n<pre><code> int swFunc(int A, int B, int C){\n   int ret; char code;\n   //code += (A &gt; 0) * 4, code += (B &gt; 0) * 2, code += (C &gt; 0) * 1\n   asm(\"movb $0, %[out];\"\n     \"cmpl $0, %[C];\"\n     \"setg %%al;\"\n     \"addb %%al, %[out];\"\n     \"cmpl $0, %[B];\"\n     \"setg %%al;\"\n     \"shlb $1, %%al;\"\n     \"addb %%al, %[out];\"\n     \"cmpl $0, %[A];\"\n     \"setg %%al;\"\n     \"shlb $2, %%al;\"\n     \"addb %%al, %[out];\"\n   : [out] \"+dl\" (code)\n   : [A] \"m\" (A), [B] \"m\" (B), [C] \"m\" (C)\n   : \"%eax\", \"%edx\");\n\n  switch(code){\n   ...\n    //same old switch statement\n   ...\n  }\n   return ret;\n }\n</code></pre>\n\n<p>interestingly (and quite vexingly) when I change the asm to;</p>\n\n<pre><code>   asm (\"cmpl $0, %[C];\"\n     \"setg %[out];\"\n     \"cmpl $0, %[B];\"\n     \"setg %%al;\"\n     \"shlb $1, %%al;\"\n     \"addb %%al, %[out];\"\n     \"cmpl $0, %[A];\"\n     \"setg %%al;\"\n     \"shlb $2, %%al;\"\n     \"addb %%al, %[out];\"\n   : [out] \"+dl\" (code)\n   : [A] \"m\" (A), [B] \"m\" (B), [C] \"m\" (C)\n   : \"%eax\", \"%edx\");\n</code></pre>\n\n<p>Which should do the same thing but in a shorter, sweeter way, the performance is the same because the compiler decides to introduce the %cl register like this;</p>\n\n<pre><code> movzbl -0x5(%ebp),%eax // load 'code' into the register (not needed!)\n mov    %eax,%ecx   // load 'code' into ecx?\n cmpl   $0x0,0x10(%ebp) // compare 'C' and 0\n setg   %cl         // set byte for code imediately, skips zeroing 'code'\n cmpl   $0x0,0xc(%ebp)  // compare 'B' and 0\n setg   %al\n shl    %al         // set %al, then make it equal to two if not equal to zero\n add    %al,%cl     // add it to code\n cmpl   $0x0,0x8(%ebp)  // compare 'A' and 0\n setg   %al\n shl    $0x2,%al    // set %al, then make it equal to four if not equal to zero\n add    %al,%cl     // add it to code\n mov    %cl,-0x5(%ebp)  // move the final value back onto the stack\n</code></pre>\n\n<p>It should be noted that the compiler will use %dl if I ask it to use %cl, and vice versa. Obstinate machine does not seem to want it's record shattered.</p>\n\n<p>Directly enforcing conditionals seems to be a good way to go, as this method is quite close to beating the compiler</p>\n"}], "owner": {"reputation": 221, "user_id": 4578093, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-4YywI8bGyPM/AAAAAAAAAAI/AAAAAAAAAD8/xsQhCcRqow8/photo.jpg?sz=128", "display_name": "user4578093", "link": "https://stackoverflow.com/users/4578093/user4578093"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 31171969, "answer_count": 5, "score": 3, "last_activity_date": 1435910484, "creation_date": 1435785278, "question_id": 31171817, "link": "https://stackoverflow.com/questions/31171817/if-conditional-tree-to-switch-statement-efficiency-troubles", "title": "If conditional tree to switch statement efficiency troubles", "body": "<p>I've been trying to optimize functions with long series of if statements. I'd though I'd found a solution using switch statements as a replacement, but upon testing and disassembly, I found out that they just complicated the matter.\nHeres some code to demonstrate;</p>\n\n<pre><code> int ifFunc(int A, int B, int C){\n   int ret;\n   if (A &gt; 0){\n     if (B &gt; 0){\n       if (C &gt; 0){\n         ret = C;\n       }\n       else{\n         ret = B;\n       }\n     }\n     else{\n       if(C &gt; 0){\n         ret = C;\n       }\n       else{\n         ret = A;\n       }\n     }\n   }\n   else{\n     if (B &gt; 0){\n       if (C &gt; 0){\n         ret = C;\n       }\n       else{\n         ret = B;\n       }\n     }\n     else{\n       if (C &gt; 0){\n         ret = C;\n       }\n       else{\n         ret = 0;\n       }\n     }\n   }\n   return ret;\n }\n\n int swFunc(int A, int B, int C){\n   int ret; int code = 0;\n   code += (A &gt; 0) * 4, code += (B &gt; 0) * 2, code += (C &gt; 0) * 1;\n   switch(code){\n   case 0: // 000\n     ret = 0;\n     break;\n   case 1: // 001\n     ret = C;\n     break;\n   case 2: // 010\n     ret = B;\n     break;\n   case 3: // 011\n     ret = C;\n     break;\n   case 4: // 100\n     ret = A;\n     break;\n   case 5: // 101\n     ret = C;\n     break;\n   case 6: // 110\n     ret = B;\n     break;\n   case 7: // 111\n     ret = C;\n     break;\n   }\n   return ret;\n }\n // All these functions do is select a number that is positive,\n // Giving preference to C, then B, then A\n</code></pre>\n\n<p>I may have made a few mistakes, so they might not be doing exactly the same thing, but that's beside the point. What I was trying to do with the switch statement was create a version of ifFunc with only a single jump, by converting the result of each if statement into a numerical code that would align with a bit, so that each possible end point would have a unique numerical code.</p>\n\n<p>This falls flat however, as the comparison functions (B > 0) etc. internally utilize jumps. It ends up with the switch version of the function being an order of magnitude slower then the if version.</p>\n\n<p>I'd like to know if there is anyway to do a comparison statement, and have it output a zero for false and a one for true, without using (internally or otherwise) an if statement or a jump.</p>\n"}, {"tags": ["c++", "arrays", "boost", "stdvector"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1435785412, "post_id": 31171797, "comment_id": 50351426, "body": "You might be looking for the proposed <code>std::array_view</code>, or <code>string_view</code> since this is of <code>char</code>."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1435786291, "post_id": 31171905, "comment_id": 50351845, "body": "As a courtesy, here&#39;s the <a href=\"https://www.livecoding.tv/video/string_ref-and-multi_array_ref-applied/\" rel=\"nofollow noreferrer\">live stream</a> of me answering this question (<a href=\"http://chat.stackoverflow.com/transcript/10?m=24182469#24182469\">experiment</a>)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1435829480, "post_id": 31171905, "comment_id": 50367441, "body": "@dyp I&#39;d argue that there&#39;s no real value in using std::vector there then (the type will already be distinct due the custom allocator). But technically, that&#39;s a third option (depending on how narrowly you define <code>std::vector&lt;T&gt;</code> :))"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1435830718, "post_id": 31171905, "comment_id": 50368335, "body": "@dyp Good luck passing that too <code>void api2::foo(std::vector&lt;char&gt; const&amp;);</code> - that&#39;s why I said &quot;I&#39;d argue that there&#39;s no real value in using std::vector there&quot;. I think this is kind of the scenario the OP is facing. In fact, he should ask the library devs to fix the API to be less intrusive :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1435831066, "post_id": 31171905, "comment_id": 50368588, "body": "@dyp I made this warning more explicit on your request."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 6, "last_activity_date": 1435831048, "last_edit_date": 1435831048, "creation_date": 1435785639, "answer_id": 31171905, "question_id": 31171797, "link": "https://stackoverflow.com/questions/31171797/how-to-construct-a-stdvector-or-a-boostarray-from-a-c-array-without-copying/31171905#31171905", "title": "How to construct a std::vector or a boost::array from a C array without copying?", "body": "<p>Because vectors own their own allocators and storage alike, there is no way (for non primitive elements construction from <code>move_iterator</code>s could help a bit).</p>\n\n<p>So assuming the goal is to get a true <code>std::vector&lt;char&gt;&amp;</code> for the existing storage, you'll never succeed, not even with custom allocators\u00b9.</p>\n\n<hr>\n\n<p>If you want a string, you can use <code>boost::string_ref</code> (in <code>utility/string_ref.hpp</code>).</p>\n\n<p>Otherwise, you could use a 1-dimensional <code>multi_array_ref</code> (from Boost Multi Array)</p>\n\n<h3>1. Using string_ref</h3>\n\n<p>This is definitely easiest:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/d10c1f7b9d0d6e31\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/utility/string_ref.hpp&gt;\n#include &lt;iostream&gt;\n\nusing boost::string_ref;\n\nint main() {\n    char some_arr[] = \"hello world\";\n\n    string_ref no_copy(some_arr);\n\n    std::cout &lt;&lt; no_copy;\n}\n</code></pre>\n\n<h3>2. <code>multi_array_ref</code></h3>\n\n<p>This is more versatile, and works \"better\" if you are not geared towards a string interface.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/abca89f5dba918bb\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/multi_array/multi_array_ref.hpp&gt;\n#include &lt;iostream&gt;\n\nusing ref = boost::multi_array_ref&lt;char, 1&gt;;\nusing boost::extents;\n\nint main() {\n    char some_arr[] = \"hello world\";\n\n    ref no_copy(some_arr, extents[sizeof(some_arr)]);\n\n    std::cout.write(no_copy.data(), no_copy.num_elements());\n}\n</code></pre>\n\n<p>Both examples  print</p>\n\n<pre><code>hello world\n</code></pre>\n\n<hr>\n\n<p>\u00b9 specializing <code>std::allocator&lt;char&gt;</code> is too evil to consider and probably outright prohibited by the standard</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 2, "creation_date": 1435830063, "post_id": 31180425, "comment_id": 50367833, "body": "This is nice. It&#39;s important to realize that effectively you work on  a vector of <code>char*</code> now (from a memory viewpoint) and this could impact performance <i>very badly</i>. This is reason for me not to upvote it here, because I think the context is all about maximizing performance, by eliminating allocation/copying."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1435831933, "post_id": 31180425, "comment_id": 50369205, "body": "@sehe It sounds right. Just thought this was worth noting, at least for objects."}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 1, "last_activity_date": 1435829715, "last_edit_date": 1435829715, "creation_date": 1435828518, "answer_id": 31180425, "question_id": 31171797, "link": "https://stackoverflow.com/questions/31171797/how-to-construct-a-stdvector-or-a-boostarray-from-a-c-array-without-copying/31180425#31180425", "title": "How to construct a std::vector or a boost::array from a C array without copying?", "body": "<p>An alternative without using boost would be <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow\">std::reference_wrapper</a></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nstruct S\n{\n    S() : val(0) {}\n    S(int val_) : val(val_) {}\n    S(const S&amp; other) : val(other.val) {\n        cout &lt;&lt; \"copy\" &lt;&lt; endl;\n    }\n\n    int val;\n};\n\n\nint main()\n{\n    char a[] = \"Hello\";\n    vector&lt;reference_wrapper&lt;char&gt;&gt; v(a, a+5);\n\n    S vS[] = {S(1), S(2), S(3)};\n\n    vector&lt;S&gt; v_copy(vS, vS + 3);\n    vector&lt;reference_wrapper&lt;S&gt;&gt; v_nocopy(vS, vS+3);\n}\n</code></pre>\n\n<p>Using struct <code>S</code>you can see that objects are not copied to the vector. So this should work well also for <code>char</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 5071311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c863ae81d3cdb40fe46201173f27db68?s=128&d=identicon&r=PG&f=1", "display_name": "Lucidus", "link": "https://stackoverflow.com/users/5071311/lucidus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1435831048, "creation_date": 1435785215, "question_id": 31171797, "link": "https://stackoverflow.com/questions/31171797/how-to-construct-a-stdvector-or-a-boostarray-from-a-c-array-without-copying", "title": "How to construct a std::vector or a boost::array from a C array without copying?", "body": "<p>Given a pointer to an array of char, is it possible to construct a std::vector or boost::array from it, and avoiding memory copying?  </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1435786247, "post_id": 31171775, "comment_id": 50351822, "body": "<code>unordered_map</code>s are not sorted, you want to use <code>map</code> instead."}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1435786318, "post_id": 31171775, "comment_id": 50351861, "body": "Even with a custom comparator, they cannot be sorted?"}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1435786471, "post_id": 31171775, "comment_id": 50351921, "body": "Also, I changed the <code>unordered_map</code> to <code>map</code> but it still shows the same error."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1435787109, "post_id": 31171775, "comment_id": 50352196, "body": "For God&#39;s sake use typedefs, aren&#39;t you bored to type <code>pair&lt;int,int&gt;</code> everywhere?"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1435787502, "post_id": 31171868, "comment_id": 50352366, "body": "Do you really need to create a custom comparator to compare 2 ints?"}, {"owner": {"reputation": 2281, "user_id": 1141118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0b8d585e1d99173a8bfb15eafd79098f?s=128&d=identicon&r=PG&f=1", "display_name": "nils", "link": "https://stackoverflow.com/users/1141118/nils"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1435787898, "post_id": 31171868, "comment_id": 50352551, "body": "@Slava Thaha, so eager to write an answer that I didn&#39;t notice the obvious. Thanks for the gentle hint."}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1435788015, "post_id": 31171868, "comment_id": 50352599, "body": "Can you please elaborate on how exactly does your comparator work? I have a very trivial doubt here, sometimes we enclose the bool operator inside a struct (as I did in my code) and sometimes, we write the direct bool operator as you did, what&#39;s the difference between the two and what to use when? Secondly, why do you pass <code>1</code> in the <code>cmp</code>?"}, {"owner": {"reputation": 2281, "user_id": 1141118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0b8d585e1d99173a8bfb15eafd79098f?s=128&d=identicon&r=PG&f=1", "display_name": "nils", "link": "https://stackoverflow.com/users/1141118/nils"}, "edited": false, "score": 0, "creation_date": 1435905022, "post_id": 31171868, "comment_id": 50403177, "body": "You used what&#39;s called a Functor, my example uses a function pointer. For details, this <a href=\"http://stackoverflow.com/questions/6451866/why-use-functors-over-functions\">SO question</a> could be start. The &lt;1&gt; is a template parameter; I added a comment to the example above.  If you like the answer feel free to mark it as accepted."}], "tags": [], "owner": {"reputation": 2281, "user_id": 1141118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0b8d585e1d99173a8bfb15eafd79098f?s=128&d=identicon&r=PG&f=1", "display_name": "nils", "link": "https://stackoverflow.com/users/1141118/nils"}, "is_accepted": false, "score": 1, "last_activity_date": 1435788192, "last_edit_date": 1435788192, "creation_date": 1435785496, "answer_id": 31171868, "question_id": 31171775, "link": "https://stackoverflow.com/questions/31171775/how-can-i-sort-the-following-map-containing-an-integer-and-a-pair/31171868#31171868", "title": "How can I sort the following map containing an integer and a pair?", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow\">cppreference.com</a>, <code>std::unordered_map</code> is defined as</p>\n\n<pre><code>template&lt;\n\n    class Key,\n    class T,\n    class Hash = std::hash&lt;Key&gt;,\n    class KeyEqual = std::equal_to&lt;Key&gt;,\n    class Allocator = std::allocator&lt; std::pair&lt;const Key, T&gt; &gt;\n&gt; class unordered_map;\n</code></pre>\n\n<p>As this container is unordered, it doesn't need comparator to sort elements. </p>\n\n<p>So, define your (unordered) map as</p>\n\n<pre><code>    unordered_map &lt;int, pair&lt;int,int&gt; &gt; mymap;\n</code></pre>\n\n<p>i.e. without the <code>cmp</code>.</p>\n\n<p>Also, don't forget toincrement the iterator in your last <code>while</code>-loop, i.e. add a <code>++it</code>, or else \n...</p>\n\n<p>Your example should compile now:</p>\n\n<pre><code>$ ./mwe \n4\n3\n2\n1\n5\n5   1   3\n1   1   2\n2   1   1\n3   1   0\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>With reference to your comment, if you change the type of <code>mymap</code> from <code>std::unordered_map</code> to \n<code>std::map</code>, bare in mind that elements will be sorted by their keys. And that shouldn't be changed. \nIf you want to sort the elements by values, consider this alternative:</p>\n\n<p>Use a <code>std::vector</code>, add a struct that includes both, the above key and value, and update your <code>cmp</code> accordingly, e.g.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;tuple&gt;\n\ntypedef std::tuple&lt; int /* key */, int /* pair::first */, int /* pair::second */ &gt; Element;\ntypedef std::vector&lt; Element &gt; ElementList;\n\ntemplate &lt;int N&gt;\nbool cmp( const Element &amp; a, const Element &amp; b )\n{\n    return std::get&lt; N &gt;( a ) &lt; std::get&lt; N &gt;( b );\n}\n\nint main()\n{\n    ElementList list;\n\n    // Just dummy data, but you get the idea.\n    list.push_back( std::make_tuple( 1, 2, 3 ) );\n    list.push_back( std::make_tuple( 2, 3, 4 ) );\n    list.push_back( std::make_tuple( 3, 4, 5 ) );\n\n    // Sort by \"pair::first\", which is at element index 1 of \n    // the tuple, cf. cmp&lt;1&gt; below. Change this template parameter \n    // to the index value of the tuple element that should be used to \n    // sort your data.\n    std::sort( list.begin(), list.end(), cmp&lt;1&gt; );\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1435788071, "post_id": 31172148, "comment_id": 50352623, "body": "A set won&#39;t really solve my problem, hence I might have to use a struct instead."}], "tags": [], "owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "is_accepted": false, "score": 0, "last_activity_date": 1435786698, "creation_date": 1435786698, "answer_id": 31172148, "question_id": 31171775, "link": "https://stackoverflow.com/questions/31171775/how-can-i-sort-the-following-map-containing-an-integer-and-a-pair/31172148#31172148", "title": "How can I sort the following map containing an integer and a pair?", "body": "<p><code>map</code>s are sorted by their keys, not their values. Consider using a <code>set</code> instead.</p>\n"}], "owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435788192, "creation_date": 1435785160, "last_edit_date": 1435786489, "question_id": 31171775, "link": "https://stackoverflow.com/questions/31171775/how-can-i-sort-the-following-map-containing-an-integer-and-a-pair", "title": "How can I sort the following map containing an integer and a pair?", "body": "<p>So, I have the following code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;utility&gt;\n#include &lt;map&gt;\nusing namespace std;\n\nstruct cmp \n{\n    bool operator() (const pair&lt;int,int&gt;&amp;a, const pair&lt;int,int&gt;&amp;b)\n    {\n        if (a.first == b.first)\n            return a.second&lt;b.second;\n        else\n            return a.first &gt; b.first;\n    }\n};\nint main (void)\n{\n    int i=0,n,foo;\n    cin&gt;&gt;n;\n    map &lt;int, pair&lt;int,int&gt;, cmp &gt; mymap;\n    while (i != n)\n    {\n        //auto it = mymap.begin();\n        cin&gt;&gt;foo;\n        if (mymap.find(foo) == mymap.end())\n        {\n            mymap[foo].make_pair(1,i);\n        }\n        else\n        {\n            mymap[foo].first++; \n        }\n        i++;\n    }\n    auto it = mymap.begin();\n    while (it != mymap.end())\n    {\n        cout&lt;&lt;it-&gt;first&lt;&lt;\"\\t\"&lt;&lt;it-&gt;second.first&lt;&lt;\"\\t\"&lt;&lt;it-&gt;second.second;\n        cout&lt;&lt;\"\\n\";\n    }\n    return 0;\n\n}\n</code></pre>\n\n<p>What this code does is basically takes input elements and sorts them by frequency (in decreasing order). And if frequency of two elements are same, then it outputs that which appeared first in the input list. </p>\n\n<pre><code>For ex: I/P: 2 5 2 8 5 6 8 8 \nO/P: 8 8 8 2 2 5 5 6\n</code></pre>\n\n<p>I have doubts in two places. Firstly, in the comparator function which I wrote, it seems to be correct but it gives an error on compilation which is, </p>\n\n<pre><code>no matching function for call to object of type 'const cmp'\n        {return static_cast&lt;const _Hash&amp;&gt;(*this)(__x);}\n</code></pre>\n\n<p>Also, the loop that I am using for printing the output, is that correct, especially, <code>it-&gt;second.first</code>?</p>\n"}, {"tags": ["c++", "stack", "heap"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1435785190, "post_id": 31171756, "comment_id": 50351307, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/161053/which-is-faster-stack-allocation-or-heap-allocation\">Which is faster: Stack allocation or Heap allocation</a>"}, {"owner": {"reputation": 186, "user_id": 4885184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152979704813043/picture?type=large", "display_name": "yolgun", "link": "https://stackoverflow.com/users/4885184/yolgun"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1435785272, "post_id": 31171756, "comment_id": 50351353, "body": "I am not talking about allocation part. What happens after it, when accessing(reading or writing)  them."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 2, "creation_date": 1435785280, "post_id": 31171756, "comment_id": 50351358, "body": "You&#39;re aware there is a difference in allocation. Now run few tests (in your <b>specific CPU architecture</b>) to see if also performance on access are different. In general I would say &quot;no difference&quot; but in some architectures stack may be &quot;near&quot; and CPU may have faster/shorter instructions to load/store on near addresses (read near as &quot;same segment&quot;)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435785652, "post_id": 31171756, "comment_id": 50351546, "body": "@yolgun Are you worrying about cache misses or what? Clarify your question please!"}, {"owner": {"reputation": 842, "user_id": 1297822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b653adde0bcf1facfa276bc2d35c66c8?s=128&d=identicon&r=PG", "display_name": "DoubleTrouble", "link": "https://stackoverflow.com/users/1297822/doubletrouble"}, "edited": false, "score": 2, "creation_date": 1462135829, "post_id": 31171756, "comment_id": 61499142, "body": "I don&#39;t understand why this question is down voted."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 2, "last_activity_date": 1435789775, "last_edit_date": 1435789775, "creation_date": 1435789090, "answer_id": 31172635, "question_id": 31171756, "link": "https://stackoverflow.com/questions/31171756/c-performance-of-accessing-heap-vs-stack-objects/31172635#31172635", "title": "C++ performance of accessing heap vs. stack objects", "body": "<p>You probably won't notice any speed differences between stack and heap (dynamic memory), unless the physical memory is different.  </p>\n\n<p>The access for an array is direct, regardless of the memory location.  You can confirm this by looking at the assembly language generated by the compiler.</p>\n\n<p>There could be a difference if the OS decides to use virtual memory for your arrays.  This means that the OS could <em>page</em> chunks of your array to the hard drive and swap them out on demand.  </p>\n\n<p>In most applications, if there is a physical difference (in terms of speed) between memory types, it will be negligible, in order of nanoseconds.  For more computational intense applications (lots of data or need for speed), this could make a difference.  </p>\n\n<p>However, there are other issues that make memory access a non-issue such as:</p>\n\n<ul>\n<li>Disk I/O</li>\n<li>Waiting for User Input</li>\n<li>Memory paging</li>\n<li>Sharing of the CPU with other applications or threads  </li>\n</ul>\n\n<p>All of the above items have an overhead that is usually an order of magnitude more than an access to a memory device.  </p>\n\n<p>The main reason for using dynamic memory instead of stack based is size.  Stack memory is mainly used for passing arguments and storing return addresses.  Local variables that are not declared static will also be placed on the stack.  Most programming environments give the stack area a smaller size.  Larger items can be placed on the heap or declared as static (and placed in the same area as globals).  </p>\n\n<p>Worry more about correctness than memory performance.  Profile when in doubt.  </p>\n\n<p><strong>Edit 1: Cache misses</strong><br>\nA <em>Cache Miss</em> is when the processor looks in it's data cache and doesn't find the item; the processor must then fetch the item from external memory (a.k.a. reloading the cache).  </p>\n\n<p>For most applications, cache misses are negligible in performance, usually measured in small nanosecond values.  They are not noticeable unless your program is computationally intensive or processing a huge amount of data.  </p>\n\n<p>Branch instructions will take up more execution time than a cache miss.  Some conditional branch instructions may force the processor to reload the instruction pipeline and reload the Program Counter register. <em>(Note: some processors can haul in executable loop code into the instruction cache and reduce the penalty of the branch effects.)</em>  </p>\n\n<p>You can organize your data to reduce the amount of cache misses.  Search the web for \"data driven\" or \"data optimizations\".  Also try reducing the branches by applying algebra, Boolean Algebra, and factoring invariants out of loops.  </p>\n"}], "owner": {"reputation": 186, "user_id": 4885184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152979704813043/picture?type=large", "display_name": "yolgun", "link": "https://stackoverflow.com/users/4885184/yolgun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3578, "favorite_count": 3, "accepted_answer_id": 31172635, "answer_count": 1, "score": 2, "last_activity_date": 1435789775, "creation_date": 1435785063, "last_edit_date": 1435786496, "question_id": 31171756, "link": "https://stackoverflow.com/questions/31171756/c-performance-of-accessing-heap-vs-stack-objects", "title": "C++ performance of accessing heap vs. stack objects", "body": "<p>I know using heap objects are slower because of necessary memory management(allocation, deallocation). What about accessing them? Is there any performance difference while accessing an object on stack vs heap?</p>\n\n<p><strong>EDIT:</strong> My question is <code>not about allocation</code> but accessing them. This includes memory location of stack vs heap, cache misses or any other variable that I am not aware of. With a simple toy example:</p>\n\n<pre><code>int stack_array[100];\nint* heap_array = new int[100];\n...\n...\nstd::cout &lt;&lt; stack_array[51]; // Any difference between these two statements\nstd::cout &lt;&lt; heap_array[51]; // Any difference between these two statements\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "typetraits", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 2, "creation_date": 1435793532, "post_id": 31173086, "comment_id": 50354322, "body": "The use case raised in code that allows a perfect forwarding of xvalue of type <code>T</code> as xvalue of type <code>U</code> when <code>static_assert(std::is_convertible&lt; T, U &gt;{});</code>. I.e. some kind of unwrapping (say, for variant, optional, tuple etc.)."}, {"owner": {"reputation": 81, "user_id": 6470423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1P5HR.jpg?s=128&g=1", "display_name": "igel", "link": "https://stackoverflow.com/users/6470423/igel"}, "edited": false, "score": 1, "creation_date": 1587894758, "post_id": 31173086, "comment_id": 108683431, "body": "here&#39;s another use-case: say you&#39;re writing a C++20-view-like iterator factory templated by <code>class Container</code> (it returns special iterators that hide away some of the items in a <code>Container</code>). As you want to use it in range-based-for, it has to keep a reference to the <code>Container</code> and provide <code>begin()</code>/<code>end()</code>. What&#39;s the return type of <code>operator*</code> of the iterator returned by the factory? It ought to be <code>copy_cv_t&lt;Container, typename Container::value_type&gt;&amp;</code>..."}], "tags": [], "owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "is_accepted": false, "score": 6, "last_activity_date": 1435791791, "creation_date": 1435791791, "answer_id": 31173086, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers/31173086#31173086", "title": "Type trait for copying cv reference qualifiers", "body": "<p>I haven't encountered any use-case which required a type-trait like that and I am not aware of any proposal. I can therefore only offer an implementation which is more compact and IMHO more simple to understand:</p>\n\n<pre><code>template&lt;typename T,typename U&gt;\nstruct copy_cv_reference\n{\nprivate:\n    using R = std::remove_reference_t&lt;T&gt;;\n    using U1 = std::conditional_t&lt;std::is_const&lt;R&gt;::value, std::add_const_t&lt;U&gt;, U&gt;;\n    using U2 = std::conditional_t&lt;std::is_volatile&lt;R&gt;::value, std::add_volatile_t&lt;U1&gt;, U1&gt;;\n    using U3 = std::conditional_t&lt;std::is_lvalue_reference&lt;T&gt;::value, std::add_lvalue_reference_t&lt;U2&gt;, U2&gt;;\n    using U4 = std::conditional_t&lt;std::is_rvalue_reference&lt;T&gt;::value, std::add_rvalue_reference_t&lt;U3&gt;, U3&gt;;\npublic:\n    using type = U4;\n};\n\ntemplate&lt;typename T,typename U&gt;\nusing copy_cv_reference_t = typename copy_cv_reference&lt;T,U&gt;::type;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4cc9c7d4e9ec481b\" rel=\"noreferrer\"><strong>Live example</strong></a></p>\n\n<p>Whether you find it an improvement is subjective.</p>\n"}, {"tags": [], "owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "is_accepted": false, "score": 2, "last_activity_date": 1435805637, "creation_date": 1435805637, "answer_id": 31174880, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers/31174880#31174880", "title": "Type trait for copying cv reference qualifiers", "body": "<p>I advise you to decompose your trait/metafunction in two. First of all, it\u2019s good separation of concerns: the two tasks of propagating cv-qualifiers and propagating ref-qualifiers really are different. I sometimes use of the two in isolation, too. E.g. with pointers <code>qualifying_cv_of_t&lt;A, B&gt;*</code> comes up from time to time, in which case we absolutely don\u2019t want pointers to references as those are invalid. (My traits are named <code>qualifying_*_of_t&lt;A, B&gt;</code> which can be understood to mean 'the relevant properties of <code>A</code> are qualifying those of <code>B</code>'.)</p>\n\n<p>Second, the latter trait is <em>rather tricky</em> to get right. Maybe you want to mechanically copy the top-level reference (if present), in which case there isn\u2019t much to say about it. On the other hand, you say:</p>\n\n<blockquote>\n  <p>[\u2026] some kind of unwrapping (say, for variant, optional, tuple etc.) [\u2026]</p>\n</blockquote>\n\n<p>which is definitively one of the scenarios where I use it. One of the thing I\u2019ve decided is that it\u2019s not actually references that I care about, it\u2019s value category. That is to say, <code>qualifying_t&lt;X, Y&gt;</code> (the one that propagates everything) conceptually represents <code>decltype(expr.member)</code>\u2020 where <code>expr</code> has type</p>\n\n<pre><code>struct X { Y member; };\n</code></pre>\n\n<p>possibly cv-qualified. The trait makes it possible to write e.g.</p>\n\n<pre><code>template&lt;typename T&gt; qualifying_t&lt;T, U&gt; foo(T&amp;&amp; t)\n{ return std::forward&lt;T&gt;(t).u; }\n</code></pre>\n\n<p>correctly (assuming <code>u</code> does have type <code>U</code>), even if e.g. <code>U</code> is a reference type. So, how tricky is that? Well, even <a href=\"http://wg21.cmeerw.net/cwg/issue1651\" rel=\"nofollow\">the Standard Committee</a> has yet to figure out all the details for the C++14 \u2192 C++1z transition to fix a bug introduced in the C++11 \u2192 C++14 transition. I won\u2019t spell out a solution because I don\u2019t believe one size fits all: e.g. <code>std::tuple_element_t</code> and <code>std::get</code> form a very similar trait/function template pair that does something different than what I outlined above.</p>\n\n<p>The good thing is that you can write as many trait as you need, combine it with your <code>qualifying_cv_of</code> and you are good to go (and I fact I have two such traits myself!). So maybe the real answer is not to split the trait in two, but in however many you need.</p>\n\n<hr>\n\n<p>\u2020: the keen-eyed may have noticed something off here and would have instead assumed something like <code>decltype( (expr.member) )</code>. I do not have a satisfactory answer yet as to which is preferable, or why.</p>\n"}, {"comments": [{"owner": {"reputation": 772, "user_id": 14170429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d493dafcfebf27f2d276b895a0438798?s=128&d=identicon&r=PG&f=1", "display_name": "puio", "link": "https://stackoverflow.com/users/14170429/puio"}, "edited": false, "score": 0, "creation_date": 1610137891, "post_id": 31197222, "comment_id": 116047230, "body": "typo <code>constexpr qual_t&lt;lhs|rhs&gt; opetator|(qual_t&lt;lhs&gt;,qual_t&lt;rhs&gt;){return {};}</code> operator"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 772, "user_id": 14170429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d493dafcfebf27f2d276b895a0438798?s=128&d=identicon&r=PG&f=1", "display_name": "puio", "link": "https://stackoverflow.com/users/14170429/puio"}, "edited": false, "score": 0, "creation_date": 1610146995, "post_id": 31197222, "comment_id": 116050080, "body": "@puio Laugh, I&#39;m surprised that is the only typo then."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1610146900, "last_edit_date": 1610146900, "creation_date": 1435887699, "answer_id": 31197222, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers/31197222#31197222", "title": "Type trait for copying cv reference qualifiers", "body": "<p>Here is a <code>boost::hana</code> esque system for qualifiers, not references.</p>\n<pre><code>enum class qualifier:unsigned char {\n  none,\n  is_const = 1&lt;&lt;1,\n  is_volatile = 1&lt;&lt;2,\n};\nconstexpr inline qualifier operator|(qualifier lhs,qualifier rhs){\n  return qualifier( unsigned(lhs)|unsigned(rhs) );\n}\nconstexpr inline bool operator&amp;(qualifier lhs,qualifier rhs){\n  return unsigned(lhs)&amp;unsigned(rhs);\n}\n// not a simple alias to make operator overloading work right:\ntemplate&lt;qualifier q&gt;\nstruct qual_t:std::integral_constant&lt;qualifier,q&gt; {};\ntemplate&lt;qualifier lhs, qualifier rhs&gt;\nconstexpr qual_t&lt;lhs|rhs&gt; operator|(qual_t&lt;lhs&gt;,qual_t&lt;rhs&gt;){return {};}\n\n\ntemplate&lt;class T&gt;struct tag{using type=T;};\ntemplate&lt;class Tag&gt;using type_t=typename Tag::type;\n\ntemplate&lt;class T&gt;\nconstexpr qual_t&lt;\n  (std::is_const&lt;T&gt;{}?qualifier::is_const:qualifier::none)\n |(std::is_volatile&lt;T&gt;{}?qualifier::is_volatile:qualifier::none)\n&gt; qual(tag&lt;T&gt;={}){ return {}; }\n\ntemplate&lt;class B, qualifier q,\n  class Step1=std::conditional_t&lt;q&amp;qualifier::is_const,const B,B&gt;,\n  class R=std::conditional_t&lt;q&amp;qualifier::is_volatile,volatile Step1, Step1&gt;\n&gt;\nconstexpr tag&lt;R&gt; add_qual( tag&lt;B&gt;={}, qual_t&lt;q&gt;={} ){ return {}; }\n\ntemplate&lt;class T,qualifier Q&gt;\nauto operator+( tag&lt;T&gt; t, qual_t&lt;Q&gt; q ){\n  return add_qual(t,q);\n}\n\ntemplate&lt;class B, qualifier q&gt;\nusing add_qual_t=type_t&lt;decltype(tag&lt;B&gt;{}+qual_t&lt;q&gt;{})&gt;;\n</code></pre>\n<p>using the above you can work with <code>tag&lt;T&gt;</code> types or raw types.</p>\n<p>Divorcing reference work from qualifier makes sense to me.</p>\n<p>Want to see copy?</p>\n<pre><code>template&lt;class From, class To&gt;\nconstexpr auto copy_qual(tag&lt;From&gt; from={}, tag&lt;To&gt; to={}){\n  return to + qual(from);\n}\n</code></pre>\n<p>which can be converted to types:</p>\n<pre><code>template&lt;class From, class To&gt;\nusing copy_qual_t=type_t&lt;decltype(copy_qual&lt;From,To&gt;())&gt;;\n</code></pre>\n<p>with a bit more ugly.</p>\n<p>We can do the exact same thing with references</p>\n<pre><code>enum class ref_qualifier:unsigned char {\n  none,\n  rvalue,\n  lvalue\n};\n</code></pre>\n<p>including reference collapsing</p>\n<pre><code>constexpr inline ref_qualfier operator|(ref_qualifier lhs, ref_qualifier rhs){\n  return ((unsigned)lhs&gt;(unsigned)rhs)?lhs:rhs;\n}\nconstexpr inline ref_qualfier operator&amp;(ref_qualifier lhs, ref_qualifier rhs){\n  return ((unsigned)lhs&gt;(unsigned)rhs)?rhs:lhs;\n}\n</code></pre>\n<p>etc.  (both lvalue and rvalue qualifiers ends with lvalue)</p>\n<p>We can write <code>add_ref_qual</code> and <code>sub_ref_qual</code>, overload <code>+</code> and <code>-</code> with <code>tag</code>s.</p>\n<pre><code>template&lt;class From, class To&gt;\nconstexpr auto copy_ref_and_quals( tag&lt;From&gt; from, tag&lt;To&gt; to ) {\n  auto from_ref = ref_qual(from);\n  auto from_cv = qual(from-from_ref);\n  auto to_ref = ref_qual(to);\n  return (to-to_ref)+from_cv+to_ref+from_ref;\n}\n</code></pre>\n<p>where we strip the ref qualification off to, then add the cv qualification of from, then add back in the ref qualifiactions of both from and to.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1478470042, "creation_date": 1478470042, "answer_id": 40455086, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers/40455086#40455086", "title": "Type trait for copying cv reference qualifiers", "body": "<p>Here is a plug and play solution to your problem:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;cstddef&gt;\n\nstatic const std::size_t N = 42;\n\ntemplate&lt;std::size_t N&gt;\nstruct choice: choice&lt;N-1&gt; {};\n\ntemplate&lt;&gt;\nstruct choice&lt;0&gt; {};\n\ntemplate&lt;typename T, typename U&gt;\nstruct types {\n    using basic = T;\n    using decorated = U;\n};\n\ntemplate&lt;typename T, typename U&gt;\nauto f(choice&lt;0&gt;) { return types&lt;T, U&gt;{}; }\n\ntemplate&lt;typename T, typename U, typename = std::enable_if_t&lt;std::is_lvalue_reference&lt;T&gt;::value&gt;&gt;\nauto f(choice&lt;1&gt;) {\n    auto t = f&lt;std::remove_reference_t&lt;T&gt;, U&gt;(choice&lt;N&gt;{});\n    using B = typename decltype(t)::basic;\n    using D = typename decltype(t)::decorated;\n    return types&lt;B, std::add_lvalue_reference_t&lt;D&gt;&gt;{};\n}\n\ntemplate&lt;typename T, typename U, typename = std::enable_if_t&lt;std::is_rvalue_reference&lt;T&gt;::value&gt;&gt;\nauto f(choice&lt;2&gt;) {\n    auto t = f&lt;std::remove_reference_t&lt;T&gt;, U&gt;(choice&lt;N&gt;{});\n    using B = typename decltype(t)::basic;\n    using D = typename decltype(t)::decorated;\n    return types&lt;B, std::add_rvalue_reference_t&lt;D&gt;&gt;{};\n}\n\ntemplate&lt;typename T, typename U, typename = std::enable_if_t&lt;std::is_const&lt;T&gt;::value&gt;&gt;\nauto f(choice&lt;3&gt;) {\n    auto t = f&lt;std::remove_const_t&lt;T&gt;, U&gt;(choice&lt;N&gt;{});\n    using B = typename decltype(t)::basic;\n    using D = typename decltype(t)::decorated;\n    return types&lt;B, std::add_const_t&lt;D&gt;&gt;{};\n}\n\ntemplate&lt;typename T, typename U, typename = std::enable_if_t&lt;std::is_volatile&lt;T&gt;::value&gt;&gt;\nauto f(choice&lt;4&gt;) {\n    auto t = f&lt;std::remove_volatile_t&lt;T&gt;, U&gt;(choice&lt;N&gt;{});\n    using B = typename decltype(t)::basic;\n    using D = typename decltype(t)::decorated;\n    return types&lt;B, std::add_volatile_t&lt;D&gt;&gt;{};\n}\n\ntemplate&lt;typename T, typename U&gt;\nauto f() {\n    return f&lt;T, U&gt;(choice&lt;N&gt;{});\n}\n\ntemplate&lt;typename T, typename U = char&gt;\nusing copy_cv_reference_t = typename decltype(f&lt;T, U&gt;())::decorated;\n\nstruct A;\nstruct B;\n\nint main() {\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A         , B &gt;,          B          &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const   , B &gt;,          B const    &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A         , B &gt;, volatile B          &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const   , B &gt;, volatile B const    &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A        &amp;, B &gt;,          B        &amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const  &amp;, B &gt;,          B const  &amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A        &amp;, B &gt;, volatile B        &amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const  &amp;, B &gt;, volatile B const  &amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A       &amp;&amp;, B &gt;,          B       &amp;&amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const &amp;&amp;, B &gt;,          B const &amp;&amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A       &amp;&amp;, B &gt;, volatile B       &amp;&amp; &gt;{}, \"!\");\n    static_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const &amp;&amp;, B &gt;, volatile B const &amp;&amp; &gt;{}, \"!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563064525, "creation_date": 1563064525, "answer_id": 57023761, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers/57023761#57023761", "title": "Type trait for copying cv reference qualifiers", "body": "<p>A concise way to implement this is with a little helper utility that applies a metafunction based on some condition:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;template &lt;typename...&gt; class MFn, bool condition, typename T&gt;\nusing apply_if_t = std::conditional_t&lt;condition, MFn&lt;T&gt;, T&gt;;\n</code></pre>\n\n<p>This allows us to compose the different cvref qualifiers:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nusing remove_cvref_t = std::remove_cv_t&lt;std::remove_reference_t&lt;T&gt;&gt;;\n\ntemplate &lt;typename From, typename To&gt;\nusing copy_cv_t =\n    apply_if_t&lt;std::add_volatile_t, std::is_volatile_v&lt;From&gt;,\n        apply_if_t&lt;std::add_const_t, std::is_const_v&lt;From&gt;,\n            std::remove_cv_t&lt;To&gt;&gt;&gt;;\n\ntemplate &lt;typename From, typename To&gt;\nusing copy_ref_t =\n    apply_if_t&lt;std::add_rvalue_reference_t, std::is_rvalue_reference_t&lt;From&gt;,\n        apply_if_t&lt;std::add_lvalue_reference_t, std::is_lvalue_reference_t&lt;From&gt;,\n            std::remove_reference_t&lt;To&gt;&gt;&gt;;\n\ntemplate &lt;typename From, typename To&gt;\nusing copy_cvref_t = copy_ref_t&lt;From,\n    copy_cv_t&lt;std::remove_reference_t&lt;From&gt;, remove_cvref_t&lt;To&gt;&gt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1579, "favorite_count": 2, "answer_count": 5, "score": 7, "last_activity_date": 1610146900, "creation_date": 1435784774, "last_edit_date": 1435785664, "question_id": 31171682, "link": "https://stackoverflow.com/questions/31171682/type-trait-for-copying-cv-reference-qualifiers", "title": "Type trait for copying cv reference qualifiers", "body": "<p>Writing library-like code in <em>C++</em> I found there is particular need in <code>copy_cv_reference_t</code> type trait:</p>\n\n<pre><code>struct A;\nstruct B;\n\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A         , B &gt;,          B          &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const   , B &gt;,          B const    &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A         , B &gt;, volatile B          &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const   , B &gt;, volatile B const    &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A        &amp;, B &gt;,          B        &amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const  &amp;, B &gt;,          B const  &amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A        &amp;, B &gt;, volatile B        &amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const  &amp;, B &gt;, volatile B const  &amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A       &amp;&amp;, B &gt;,          B       &amp;&amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt;          A const &amp;&amp;, B &gt;,          B const &amp;&amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A       &amp;&amp;, B &gt;, volatile B       &amp;&amp; &gt;{});\nstatic_assert(std::is_same&lt; copy_cv_reference_t&lt; volatile A const &amp;&amp;, B &gt;, volatile B const &amp;&amp; &gt;{});\n</code></pre>\n\n<p>I invent it for myself using two approaches: via means of id of type qualifiers and via SFINAE only.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\n#if 1\nenum class type_qual_id\n{\n    value,\n    const_value,\n    lref,\n    const_lref,\n    rref,\n    const_rref,\n    volatile_value,\n    volatile_const_value,\n    volatile_lref,\n    volatile_const_lref,\n    volatile_rref,\n    volatile_const_rref,\n};\n\ntemplate&lt; type_qual_id tqid, typename type &gt; struct add_type_qualifier;\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::value               , to &gt; { using type =          to         ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::const_value         , to &gt; { using type =          to const   ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::lref                , to &gt; { using type =          to       &amp; ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::const_lref          , to &gt; { using type =          to const &amp; ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::rref                , to &gt; { using type =          to       &amp;&amp;; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::const_rref          , to &gt; { using type =          to const &amp;&amp;; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_value      , to &gt; { using type = volatile to         ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_const_value, to &gt; { using type = volatile to const   ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_lref       , to &gt; { using type = volatile to       &amp; ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_const_lref , to &gt; { using type = volatile to const &amp; ; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_rref       , to &gt; { using type = volatile to       &amp;&amp;; };\ntemplate&lt; typename to &gt; struct add_type_qualifier&lt; type_qual_id::volatile_const_rref , to &gt; { using type = volatile to const &amp;&amp;; };\n\ntemplate&lt; type_qual_id tqid, typename to &gt;\nusing add_qualifier_t = typename add_type_qualifier&lt; tqid, to &gt;::type;\n\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id                           = type_qual_id::value               ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt;          type const    &gt; = type_qual_id::const_value         ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt;          type       &amp;  &gt; = type_qual_id::lref                ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt;          type const &amp;  &gt; = type_qual_id::const_lref          ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt;          type       &amp;&amp; &gt; = type_qual_id::rref                ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt;          type const &amp;&amp; &gt; = type_qual_id::const_rref          ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type          &gt; = type_qual_id::volatile_value      ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type const    &gt; = type_qual_id::volatile_const_value;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type       &amp;  &gt; = type_qual_id::volatile_lref       ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type const &amp;  &gt; = type_qual_id::volatile_const_lref ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type       &amp;&amp; &gt; = type_qual_id::volatile_rref       ;\ntemplate&lt; typename type &gt; constexpr type_qual_id get_type_qualifier_id&lt; volatile type const &amp;&amp; &gt; = type_qual_id::volatile_const_rref ;\n\ntemplate&lt; typename from, typename to &gt;\nusing copy_cv_reference_t = add_qualifier_t&lt; get_type_qualifier_id&lt; from &gt;, to &gt;;\n\n#else\n#include &lt;type_traits&gt;\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_cv\n{\n\n    using type = to;\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_cv&lt; from const, to &gt;\n    : copy_cv&lt; from, to const &gt;\n{\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_cv&lt; volatile from, to &gt;\n    : copy_cv&lt; from, volatile to &gt;\n{\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_cv&lt; volatile from const, to &gt;\n    : copy_cv&lt; from, volatile to const &gt;\n{\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_reference \n{\n\n    using type = to;\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_reference&lt; from &amp;, to &gt;\n    : copy_reference&lt; from, to &amp; &gt;\n{\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nstruct copy_reference&lt; from &amp;&amp;, to &gt;\n    : copy_reference&lt; from, to &amp;&amp; &gt;\n{\n\n};\n\ntemplate&lt; typename from, typename to &gt;\nusing copy_cv_reference_t = typename copy_reference&lt; from, typename copy_cv&lt; std::remove_reference_t&lt; from &gt;, to &gt;::type &gt;::type;\n\n#endif\n</code></pre>\n\n<p>First approach looks slightly more artificial, but provides a \"type qualifiers id\" as additional side and latter can be useful in some situations. Second approach is inherently two-step one. It could has downsides. In addition, it involve <code>std::remove_reference_t</code> to reveal the cv-qualified type.</p>\n\n<p>On the one hand, I know standard allows for implementations to have an <a href=\"http://libcxx.llvm.org/type_traits_design.html\" rel=\"noreferrer\">\"intrinsic\" type traits</a>. On the other hand, there is no the type trait currently in contemporary <em>C++</em> standard.</p>\n\n<p>What is the best implementation of <code>copy_cv_reference_t</code> type trait? Not only between above two. Are there better approaches to implement it? Is there corresponding proposal?</p>\n\n<p>What about naming? What about order of ids?</p>\n"}, {"tags": ["c++", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4289777, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc9b8236a09d873d905251824000c7ef?s=128&d=identicon&r=PG&f=1", "display_name": "will smith", "link": "https://stackoverflow.com/users/4289777/will-smith"}, "edited": false, "score": 0, "creation_date": 1435785088, "post_id": 31171740, "comment_id": 50351244, "body": "Wow, sorry to waste your time on such a stupid mistake. Thank you very much for your answer!"}, {"owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "reply_to_user": {"reputation": 67, "user_id": 4289777, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc9b8236a09d873d905251824000c7ef?s=128&d=identicon&r=PG&f=1", "display_name": "will smith", "link": "https://stackoverflow.com/users/4289777/will-smith"}, "edited": false, "score": 0, "creation_date": 1435785398, "post_id": 31171740, "comment_id": 50351417, "body": "You&#39;re welcome. It might be tricky to detect these errors with large programs split across several files. Consider accepting the answer if you think it helped."}], "tags": [], "owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "is_accepted": true, "score": 2, "last_activity_date": 1435784984, "creation_date": 1435784984, "answer_id": 31171740, "question_id": 31171669, "link": "https://stackoverflow.com/questions/31171669/c-multiple-functions-not-recognized/31171740#31171740", "title": "C++ Multiple Functions Not Recognized", "body": "<p>The function declaration in the header is not correct. In login_page.h replace </p>\n\n<pre><code>int login_page();\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>int login_page(string username,string password);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4289777, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc9b8236a09d873d905251824000c7ef?s=128&d=identicon&r=PG&f=1", "display_name": "will smith", "link": "https://stackoverflow.com/users/4289777/will-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 31171740, "answer_count": 1, "score": 0, "last_activity_date": 1435784984, "creation_date": 1435784732, "question_id": 31171669, "link": "https://stackoverflow.com/questions/31171669/c-multiple-functions-not-recognized", "title": "C++ Multiple Functions Not Recognized", "body": "<p>This may be a very simple error, but I made a function called longin_page();</p>\n\n<pre><code>int login_page(string username,string password) {\n</code></pre>\n\n<p>Anyways, this is the function header, the function is very long. However, when I call the function in another file(to which the function is defined and referenced), it seems to not recognize the two arguments that I have defined.</p>\n\n<pre><code>else if (input1 == \"login\") {\n    get_user_info();\n    login_page(file_username, file_password);\n}\n</code></pre>\n\n<p>In visual Studio, I get an error saying that the function does not take two arguments. Just in case you wanted to check all my files, they are posted below.</p>\n\n<p>login_page.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include \"login_page.h\"\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include \"profile_main_menu.h\"using namespace std;\n\nstring file_username, file_password;\n\nint get_user_info() {\n\nifstream user_info;\nuser_info.open(\"user_info.txt\");\n\nif (user_info.is_open()) {\n    user_info &gt;&gt; file_username;\n    user_info &gt;&gt; file_password;\n    cout &lt;&lt; \"File open\" &lt;&lt; endl;\n    cout &lt;&lt; file_username &lt;&lt; endl;\n    cout &lt;&lt; file_password;\n}\nelse {\n    cout &lt;&lt; \"Could not get info fro user_info.txt\" &lt;&lt; endl;\n}\nreturn 0;\n}\n\nint login_page(string username,string password) {\n\nstring username_input_2;\nstring password_input_2;\n\nifstream user_info;\nuser_info.open(\"user_info.txt\");\nstring file_username, file_password;\nif (user_info.is_open()) {\n    get_user_info();\n}\nelse {\n    cout &lt;&lt; \"Error: No username and/or password found on user_info.txt\" &lt;&lt; endl;\n    login_page();\n}\n\ncout &lt;&lt; \"Please enter your username: \" &lt;&lt; endl;\ncin &gt;&gt; username_input_2;\n\nif (username == username_input_2) {\n    cout &lt;&lt; username_input_2 &lt;&lt; \" , please enter your password.\" &lt;&lt; endl;\n    cin &gt;&gt; password_input_2;\n\n    if (password == file_password) {\n        profile_main_menu();\n    }\n    else {\n        cout &lt;&lt; \"Passwords do not match. Please try again.\" &lt;&lt; endl;\n        login_page();\n    }\n}\nelse {\n    cout &lt;&lt; \"You do not have an account or you have misspeld your username. Please try again.\" &lt;&lt; endl;\n    cout &lt;&lt; username_input_2 &lt;&lt; endl;\n    cout &lt;&lt; username &lt;&lt; endl;\n    login_page();\n}\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>login_page.h:</p>\n\n<pre><code>#define LOGIN_PAGE_H\nint login_page();\nint get_user_info();\n</code></pre>\n\n<p>initial_page_funct.cpp: (This is where I get the error)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n#include \"login_page.h\"\n#include \"create_account.h\"\n\nusing namespace std;\n\nextern string file_username, file_password;\n\nint initial_login() {\nstring input1;\ncout &lt;&lt; \"Welcome to AgentOS V230.20043.\" &lt;&lt; endl;\nSleep(3000);\ncout &lt;&lt; \"If you do not have an account and wish to create one, enter \\\"create account\\\"\" &lt;&lt; endl;\nSleep(3000);\ncout &lt;&lt; \"If you do have an account, enter \\\"login\\\"\" &lt;&lt; endl;\ngetline(cin, input1);\n\nif (input1 == \"create account\") {\n    create_account();\n}\nelse if (input1 == \"login\") {\n    get_user_info();\n    login_page(file_username, file_password);\n}\nelse {\n    cout &lt;&lt; \"You have not entered a knowned command. Please try again.\" &lt;&lt; endl;\n    cout &lt;&lt; \"This is the command: \" &lt;&lt; input1 &lt;&lt; endl;\n    initial_login();\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "edited": false, "score": 0, "creation_date": 1560533826, "post_id": 31171614, "comment_id": 99781743, "body": "Interesting question. Part of the issue is that <code>SetterPointer</code> and <code>GetterPointer</code> are trying to be metafunctions, but you aren&#39;t &quot;calling&quot; them with two arguments. If I add this overload, which calls the metafunction, it works:      template &lt;typename TClass, typename T1, typename T2&gt;     void Assign(         TClass* object,         T1 setter,         T2 getter)     {          Assign&lt;TClass, decltype((object-&gt;*getter)())&gt;(object, setter, getter);     }  That&#39;s saying &quot;if I want to <code>Assign</code> with a class and two types, look up the result type of the getter and use that."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435785557, "post_id": 31171654, "comment_id": 50351500, "body": "very comprehensive answer, thank you. One thing I still don&#39;t understand: why it works correctly for setter? Please notice that I had to change only getter definition to make this code compile correctly."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435785813, "post_id": 31171654, "comment_id": 50351631, "body": "@majakthecoder: It didn&#39;t really &quot;work&quot; for setter. Again, what the compiler has to do is to deduce two template parameters of <code>Assign</code>: parameter <code>TClass</code> and parameter <code>TType</code>. The compiler inspect the first argument of <code>Assign</code> (<code>object</code>) and that immediately allows it to deduce that <code>TClass == Test</code>. So, <code>TClass</code> parameter is now taken care of. The compiler proceeds to the second argument of <code>Assign</code> - <code>setter</code> - and sees that it is useless, since the context is non-deducible. The compiler simply skips it."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435785875, "post_id": 31171654, "comment_id": 50351661, "body": "The compiler then proceeds to the third argument <code>TType(TClass::*getter)()</code> and deduces from it that <code>TClass == Test</code> (consistent with previous deduction) and that <code>TType == int</code>. All parameters are looked through now. All template arguments are deduced and deduced consistently. And thus the code compiles."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435786018, "post_id": 31171654, "comment_id": 50351723, "body": "So, non-deduced context is not an error. Arguments in non-deduced contexts are simply ignored by the deduction algorithm. If all of your template parameters will get deduced by other means (through other function arguments), then you are still good. But if you end up with a template parameter that cannot be deduced from <i>any</i> of the function arguments, the code will fail to compile."}, {"owner": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435786033, "post_id": 31171654, "comment_id": 50351727, "body": "So is there any possibility to define &quot;nice looking&quot; typedefs for that pointers? Or maybe I have obsession with code form."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 1, "creation_date": 1435786598, "post_id": 31171654, "comment_id": 50351984, "body": "@majakthecoder: You can use &quot;template typedef&quot; (aka alias template) feature of C++11. <code>template &lt;typename TClass, typename TType&gt; using SetterPointer = void (TClass::*)(const TType&amp;);</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "edited": false, "score": 0, "creation_date": 1435786782, "post_id": 31171654, "comment_id": 50352067, "body": "See here: <a href=\"https://ideone.com/ma7MPf\" rel=\"nofollow noreferrer\">ideone.com/ma7MPf</a> . It works for me in VS 2013 as well. See the extra example in my answer above."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 4, "last_activity_date": 1435786824, "last_edit_date": 1435786824, "creation_date": 1435784687, "answer_id": 31171654, "question_id": 31171614, "link": "https://stackoverflow.com/questions/31171614/could-not-deduce-template-argument-if-using-typedef/31171654#31171654", "title": "could not deduce template argument if using typedef", "body": "<p>C++ cannot deduce the enclosing type from its nested type. It is an example of <em>non-deduced context</em>.</p>\n\n<p>A simplest example would be something like</p>\n\n<pre><code>struct S { typedef int T; };\n\ntemplate &lt;typename C&gt; void foo(typename C::T i) {}\n\nint main()  {\n   int x = 0;\n   foo(x); // ERROR: non-deduced context\n}\n</code></pre>\n\n<p>or, closer to what you have in your code</p>\n\n<pre><code>template &lt;typename X&gt; struct S { typedef X T; };\n\ntemplate &lt;typename X&gt; void foo(typename S&lt;X&gt;::T i) {}\n\nint main()  {\n   int x = 0;\n   foo(x); // ERROR: non-deduced context\n}\n</code></pre>\n\n<p>The same thing happens in your case as well, in a slightly more convoluted form. For template method <code>Assign</code> it is not possible to deduce template parameters <code>TClass</code> and <code>TType</code> through a function parameter like <code>typename SetterPointer&lt;TClass, TType&gt;::Type setter</code>. In your case template parameter <code>TClass</code> is deducible from the first argument of <code>Assign</code>, but <code>TType</code> is not deducible from any argument. Hence the error.</p>\n\n<p>When you change declaration of the last parametr of <code>Assign</code> to <code>TType(TClass::*getter)()</code> you immediately make the context deducible, i.e. the compiler uses the getter argument as an opportunity to deduce <code>TType</code>.</p>\n\n<p>In C++11 you can use alias templates to achieve the same <code>typedef</code> effect and still keep the context deducible</p>\n\n<pre><code>class PropertyAccess\n{\npublic:\n    template &lt;typename TClass, typename TType&gt;\n    using SetterPointer = void (TClass::*)(const TType&amp;);\n\n    template &lt;typename TClass, typename TType&gt;\n    using GetterPointer = TType(TClass::*)();\n\n    template &lt;typename TClass, typename TType&gt;\n    void Assign(\n        TClass* object,\n        SetterPointer&lt;TClass, TType&gt; setter,\n        GetterPointer&lt;TClass, TType&gt; getter)\n    {\n       ... \n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 826291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/80e37f55bba50c36635ac8c09cec6ae0?s=128&d=identicon&r=PG", "display_name": "majakthecoder", "link": "https://stackoverflow.com/users/826291/majakthecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 31171654, "answer_count": 1, "score": 0, "last_activity_date": 1435786824, "creation_date": 1435784547, "question_id": 31171614, "link": "https://stackoverflow.com/questions/31171614/could-not-deduce-template-argument-if-using-typedef", "title": "could not deduce template argument if using typedef", "body": "<p>I have a problem with \"Could not deduce template argument for T\" error.</p>\n\n<p>here is my class:</p>\n\n<pre><code>class PropertyAccess\n{\npublic:\n    template &lt;typename TClass, typename TType&gt;\n    struct SetterPointer { typedef void (TClass::*Type)(const TType&amp;); };\n\n    template &lt;typename TClass, typename TType&gt;\n    struct GetterPointer { typedef TType(TClass::*Type)(); };\n\n    template &lt;typename TClass, typename TType&gt;\n    void Assign(\n        TClass* object,\n        typename SetterPointer&lt;TClass, TType&gt;::Type setter,\n        typename GetterPointer&lt;TClass, TType&gt;::Type getter)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>and here is how I use it:</p>\n\n<pre><code>class Test\n{\npublic:\n    int a;\n\n    void Set(const int&amp; v) { a = v; }\n    int Get() { return a; }\n};\n\nvoid main\n{\n    Test test;\n    PropertyAccess property;\n    property.Assign(&amp;test, &amp;Test::Set, &amp;Test::Get);  &lt;---here is compile error\n}\n</code></pre>\n\n<p>If i try to compile that code, I have error:</p>\n\n<pre><code>'void PropertyAccess::Assign(TClass *,PropertyAccess::SetterPointer&lt;TClass,TType&gt;::Type,PropertyAccess::GetterPointer&lt;TClass,TType&gt;::Type)' : could not deduce template argument for 'TType'\n</code></pre>\n\n<p>but if I change Assign method to:</p>\n\n<pre><code>void Assign(\n        TClass* object,\n        typename SetterPointer&lt;TClass, TType&gt;::Type setter,\n        TType(TClass::*getter)())\n    {\n        ...\n    }\n</code></pre>\n\n<p>then everything is alright. Why? I know that function type cannot be deduced if it has no args, but why it works in second case?</p>\n\n<p>I use Visual Studio 2013 C++ compiller.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "conditional", "specialization"], "comments": [{"owner": {"reputation": 8835, "user_id": 2054602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa714b545cf57418ee53dc5c6c9517b5?s=128&d=identicon&r=PG&f=1", "display_name": "Radu Di\u021b\u0103", "link": "https://stackoverflow.com/users/2054602/radu-di%c8%9b%c4%83"}, "edited": false, "score": 0, "creation_date": 1435785129, "post_id": 31171613, "comment_id": 50351269, "body": "I don&#39;t think the problem is in the code you posted. I&#39;ve just compiled, not linked, the code sample that you posted and everything worked as expected"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4802632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14f8aee30360370cfbcf5ccf8469a17?s=128&d=identicon&r=PG&f=1", "display_name": "Indranil Chowdhury", "link": "https://stackoverflow.com/users/4802632/indranil-chowdhury"}, "edited": false, "score": 0, "creation_date": 1435843630, "post_id": 31171858, "comment_id": 50377144, "body": "Thank you for the solution. I have another question - what if base1 and base2 have different number of  constructor arguments, for example:       base2(FT n1, FT n2){}  is the constructor. Can the derived class still invoke either the base1 or base2 constructor?"}, {"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "reply_to_user": {"reputation": 21, "user_id": 4802632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14f8aee30360370cfbcf5ccf8469a17?s=128&d=identicon&r=PG&f=1", "display_name": "Indranil Chowdhury", "link": "https://stackoverflow.com/users/4802632/indranil-chowdhury"}, "edited": false, "score": 0, "creation_date": 1435847959, "post_id": 31171858, "comment_id": 50380410, "body": "Obviously the template would not match either the one or the other base class. You see that you should use custom arguments for constructors with care! Often it is best to make constructor arguments optional. You could for example, replace the constructor with an init function and call that inside of the derived constructor function."}], "tags": [], "owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "is_accepted": false, "score": 0, "last_activity_date": 1435785444, "creation_date": 1435785444, "answer_id": 31171858, "question_id": 31171613, "link": "https://stackoverflow.com/questions/31171613/inheritance-from-either-of-two-base-classes-using-template-specialization-and-co/31171858#31171858", "title": "Inheritance from either of two base classes using template specialization and constructor", "body": "<pre><code>//Derived class which inherits either from base1 or base2\ntemplate&lt;int sType, typename FT&gt;\nclass derived : public baseT&lt;sType,FT&gt;::bType\n{\n  public:\n  derived(FT m) : baseT&lt;sType,FT&gt;::bType(m)\n  {}\n};\n</code></pre>\n\n<p>That's all you need to make it work. Initialize the base class.</p>\n"}], "owner": {"reputation": 21, "user_id": 4802632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14f8aee30360370cfbcf5ccf8469a17?s=128&d=identicon&r=PG&f=1", "display_name": "Indranil Chowdhury", "link": "https://stackoverflow.com/users/4802632/indranil-chowdhury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553553741, "creation_date": 1435784544, "last_edit_date": 1553553741, "question_id": 31171613, "link": "https://stackoverflow.com/questions/31171613/inheritance-from-either-of-two-base-classes-using-template-specialization-and-co", "title": "Inheritance from either of two base classes using template specialization and constructor", "body": "<p>I am trying to inherit a \"derived\" class from either base1 or base2. I want to use template specialization for this purpose. I have the following </p>\n\n<pre><code>//base1\ntemplate&lt;typename FT&gt;\nclass base1\n{\n public:\n base1(FT m)\n {}\n};\n\n//base2\ntemplate&lt;typename FT&gt;\nclass base2\n{\n  public:\n  base2(FT m)\n  {}\n};\n\n//define template specializations\ntemplate&lt;int sType, typename FT&gt;\nclass baseT {};\n\n//for base1\ntemplate&lt;typename FT&gt;\nclass baseT&lt;1,FT&gt;\n{\n  public:\n  typedef base1&lt;FT&gt; bType;\n};\n\n//for base2\ntemplate&lt;typename FT&gt;\nclass baseT&lt;2,FT&gt;\n{\n  public:\n  typedef base2&lt;FT&gt; bType;\n};\n\n//Derived class which inherits either from base1 or base2\ntemplate&lt;int sType, typename FT&gt;\nclass derived : public baseT&lt;sType,FT&gt;::bType\n{\n  public:\n  derived(FT m)\n  {}\n};\n\nint main( )\n{\n  derived&lt;1,float&gt; a1(1);\n\n  return 0;\n}\n</code></pre>\n\n<p>This code is not compiling (on Linux platform) because the base class expects one argument but I am not sure how to pass it to the constructor of derived to make this work. (I dont want to use conditional). Any advice will help    </p>\n"}, {"tags": ["c++", "windows", "winapi", "windows-shell", "windows-explorer"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1435786714, "post_id": 31171586, "comment_id": 50352038, "body": "It&#39;s like the consent decree never happened isn&#39;t it..."}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 2, "creation_date": 1435787882, "post_id": 31171586, "comment_id": 50352544, "body": "Didn&#39;t that come as part of a system update? They could have just forced the behavior with the update."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1435794369, "post_id": 31171586, "comment_id": 50354523, "body": "@Juhana: Yes, it was indeed part of a system update.  But IIRC, the default behavior for a newly discovered icon is to display it, and then the user can decide what to do with it."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435817608, "post_id": 31171586, "comment_id": 50360288, "body": "I guess they are allowed to break the rules......"}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1435827295, "post_id": 31171586, "comment_id": 50365831, "body": "Yeah, my point is that Microsoft isn&#39;t bound by the same rules as others because they can change whatever they want in an update."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 1, "creation_date": 1435850118, "post_id": 31171586, "comment_id": 50381916, "body": "@Juhana: Yes, this is an update but in this case they have to play by their own rules. Let me explain. The visibility settings for icons on the system tray reside internally in <code>explorer.exe</code>. It is obviously otherwise stored in Registry. So when <code>explorer.exe</code> starts up at a user logon, it reads those visibility settings from the Registry. It then saves them when it exits, at user logoff. It doesn&#39;t save those in the meantime. (You can check that by killing its process and see that all your changes to tray icons visibility will be lost.)"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1435850124, "post_id": 31171586, "comment_id": 50381923, "body": "Since this Windows 10 icon doesn&#39;t come from the <code>explorer.exe</code> itself (as a possible part of an update) but actually resides in its own user-mode process <code>gwx.exe</code>, by running as any other user process, it must be able to communicate with <code>explorer.exe</code> and have it show that icon after <code>explorer.exe</code> has loaded up. So, in other words, this is not a modification to <code>explorer.exe</code> itself that does this."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1435850133, "post_id": 31171586, "comment_id": 50381932, "body": "I tried looking into <code>gwx.exe</code> with Dependency Walker to see if it&#39;s calling any particular API that I was not aware of, but I couldn&#39;t find any. So my guess is that there must be some undocumented COM interface that they&#39;re using to change an icon&#39;s visibility. Since I don&#39;t have much experience with COM, I&#39;m curious if there&#39;s something like Dependency Walker for COM for a specific process?"}], "answers": [{"comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1483333851, "post_id": 41421521, "comment_id": 70048626, "body": "<i>I think I have an untested and unconfirmed idea of what might be happening, but I&#39;m not going to share it with anyone</i> is not an answer. (It wouldn&#39;t even make a useful comment to the original question.)"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1483333962, "post_id": 41421521, "comment_id": 70048652, "body": "Because I&#39;m not sure if it is a good idea to post the full details. What do think? Are you just curious or do you want your applications to do the same thing?"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1483334434, "post_id": 41421521, "comment_id": 70048774, "body": "@KenWhite I have done it myself, it is not an unconfirmed idea."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1483334613, "post_id": 41421521, "comment_id": 70048819, "body": "I don&#39;t need my applications to do any such thing. But posting a <i>I have the information but won&#39;t share it</i> answer isn&#39;t an answer. You&#39;re not new here; you know what answers should be and what they should not. If you have no answer to provide, then don&#39;t post an answer."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1483335324, "post_id": 41421521, "comment_id": 70049010, "body": "@KenWhite I have actually had answers downvoted and edited because I posted information on how to bypass some Group Policy thing. For most people it should be enough just to know that it is just a simple flag, there is no need to hunt for COM interfaces. You only need the value of the flag if you intent to actually use it in your own code..."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 0, "last_activity_date": 1483335419, "last_edit_date": 1483335419, "creation_date": 1483332894, "answer_id": 41421521, "question_id": 31171586, "link": "https://stackoverflow.com/questions/31171586/how-did-they-make-get-windows-10-icon-to-have-show-icon-and-notifications-vi/41421521#41421521", "title": "How did they make &quot;Get Windows 10&quot; icon to have &quot;Show icon and notifications&quot; visibility by default?", "body": "<p>They are calling Shell_NotifyIcon with a undocumented flag. I'm being vague on purpose because I don't want every application with a notify icon to start doing this.</p>\n\n<p>I believe it is possible to do this as far back as Win XP (when the hidden icons feature was added). </p>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1483335419, "creation_date": 1435784427, "question_id": 31171586, "link": "https://stackoverflow.com/questions/31171586/how-did-they-make-get-windows-10-icon-to-have-show-icon-and-notifications-vi", "title": "How did they make &quot;Get Windows 10&quot; icon to have &quot;Show icon and notifications&quot; visibility by default?", "body": "<p>I'm curious how did this thing:</p>\n\n<p><img src=\"https://i.stack.imgur.com/HtrQZ.png\" alt=\"enter image description here\"></p>\n\n<p>happen to become \"Show icon and notifications\" by default?</p>\n\n<p><img src=\"https://i.stack.imgur.com/4uq9Q.png\" alt=\"enter image description here\"></p>\n\n<p>My impression was that <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762159(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Shell_NotifyIcon</a> didn't allow to control that.</p>\n\n<p>So did anyone have a chance to reverse-engineer it to see how they did it?</p>\n"}, {"tags": ["c++", "ubuntu", "qt5", "qapplication", "qcoreapplication"], "answers": [{"comments": [{"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "edited": false, "score": 0, "creation_date": 1435945352, "post_id": 31209139, "comment_id": 50425541, "body": "This is what I ended up doing"}], "tags": [], "owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1435933646, "creation_date": 1435933646, "answer_id": 31209139, "question_id": 31171581, "link": "https://stackoverflow.com/questions/31171581/should-my-schizophrenic-console-gui-qt5-program-use-qapplication-or-qcoreapplica/31209139#31209139", "title": "Should my schizophrenic console/gui Qt5 program use QApplication or QCoreApplication?", "body": "<p>No, this is not possible.\nBut you can create QCoreApplication or QApplication in dependent from command line args.</p>\n"}], "owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 31209139, "answer_count": 1, "score": 0, "last_activity_date": 1435933646, "creation_date": 1435784411, "last_edit_date": 1435784562, "question_id": 31171581, "link": "https://stackoverflow.com/questions/31171581/should-my-schizophrenic-console-gui-qt5-program-use-qapplication-or-qcoreapplica", "title": "Should my schizophrenic console/gui Qt5 program use QApplication or QCoreApplication?", "body": "<p>My program will either open a GUI or not depending on some commandline parameters. Right now I am instantiating <code>QApplication</code> for my main event loop, but noticed that my program aborts when run from a headless machine (missing xorg/xcb) unless i specify some environment variables to trick it into believing there is an xorg running.</p>\n\n<p>When I instead instantiate <code>QCoreApplication</code> I don't have access to activeWindow(). The code requiring activeWindow() will never run in the cases when the program is run headless (that is the purose of the commandline parameters).</p>\n\n<p>So what I am asking is, would it be possible to make QApplication run without problems even on a headless machine, and simply not show any GUI?</p>\n\n<p>What are my other options? </p>\n"}, {"tags": ["c++", "qt", "text", "editing", "qgraphicstextitem"], "answers": [{"tags": [], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "is_accepted": true, "score": 0, "last_activity_date": 1435849725, "creation_date": 1435849725, "answer_id": 31188312, "question_id": 31171569, "link": "https://stackoverflow.com/questions/31171569/qgraphicstextitem-editing-requires-an-action-performed-twice/31188312#31188312", "title": "QGraphicsTextItem editing requires an action performed twice", "body": "<p>I expected a mouse action on a focusable item to give it focus automatically. I guess not...</p>\n\n<p>In the <code>mouseDoubleClickEvent</code>, I added a call to <code>setFocus()</code></p>\n\n<pre><code>virtual void mouseDoubleClickEvent(QGraphicsSceneMouseEvent * event)\n{\n    Q_UNUSED(event);\n    setTextInteractionFlags(Qt::TextEditorInteraction); \n    setFocus();\n}\n</code></pre>\n"}], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 1, "accepted_answer_id": 31188312, "answer_count": 1, "score": 1, "last_activity_date": 1436219840, "creation_date": 1435784368, "last_edit_date": 1436219840, "question_id": 31171569, "link": "https://stackoverflow.com/questions/31171569/qgraphicstextitem-editing-requires-an-action-performed-twice", "title": "QGraphicsTextItem editing requires an action performed twice", "body": "<p>I want to make a <code>QGraphicsTextItem</code> editable on double click, and make it movable when I click out.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QPainter&gt;\n#include &lt;QGraphicsItem&gt;\n#include &lt;QGraphicsView&gt;\n\nclass TextItem: public QGraphicsTextItem\n{\npublic:\n    TextItem()\n    {\n        setPlainText(\"hello world\");\n        QFont f;\n        f.setPointSize(50);\n        f.setBold(true);\n        f.setFamily(\"Helvetica\");\n        setFont(f);\n\n        setFlags(QGraphicsItem::ItemIsMovable    |\n                 QGraphicsItem::ItemIsFocusable  |\n                 QGraphicsItem::ItemIsSelectable);\n        setTextInteractionFlags(Qt::NoTextInteraction);\n    }\n    virtual void paint(QPainter* painter,\n                       const QStyleOptionGraphicsItem* option,\n                       QWidget* widget = NULL)\n    {\n        QGraphicsTextItem::paint(painter, option, widget);\n    }\n\nprotected:\n    virtual void focusOutEvent (QFocusEvent * event)\n    {\n        Q_UNUSED(event);\n        setTextInteractionFlags(Qt::NoTextInteraction);\n    }\n    virtual void mouseDoubleClickEvent(QGraphicsSceneMouseEvent * event)\n    {\n        Q_UNUSED(event);\n        setTextInteractionFlags(Qt::TextEditable); // TextEditorInteraction\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication  a(argc, argv);\n    TextItem* t = new TextItem();\n    QGraphicsView view(new QGraphicsScene(-200, -150, 400, 300) );\n    view.scene()-&gt;addItem(t);\n    view.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>It does what I want - except I have to double-click twice<br>\n- first time I double click, I see a cursor but am unable to edit text (with either option, <code>TextEditable</code> or <code>TextEditorInteraction</code> (I probably want the latter). Then I double-click again and I can type to add or delete text.</p>\n\n<p>It is a behavior that a user probably doesn't expect - and nothing I do seems to change it.</p>\n\n<p>Am I doing something wrong, or is there anything I need to add ?</p>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "owner": {"reputation": 11, "user_id": 5025267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bq88MUm6fC4/AAAAAAAAAAI/AAAAAAAACwg/q0diRYpxnx8/photo.jpg?sz=128", "display_name": "Arihant", "link": "https://stackoverflow.com/users/5025267/arihant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435784000, "creation_date": 1435784000, "question_id": 31171467, "link": "https://stackoverflow.com/questions/31171467/principle-range-of-object-orientation-using-image-moments", "title": "Principle range of object orientation using image moments", "body": "<p>I am trying to extract the angle of a shape in my image using moments in opencv/c++. I am able to extract the angle, but the issue is that the principal range of this angle is 180 degrees. This makes the orientation of the object ambiguous with respect to 180 degree rotations. The code I am using to extract the angle currently is,</p>\n\n<pre><code>findContours(frame, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);\n\nvector&lt;vector&lt;Point2i&gt; &gt; hull(contours.size());\n\nint maxArea = 0;\nint maxI = -1;\n\nint M20 = 0;\nint M02 = 0;\nint M11 = 0;\n\nfor (int i = 0; i &lt; contours.size(); i++)\n{\n    convexHull(contours[i], hull[i], false);\n    approxPolyDP(hull[i], contourVertices, arcLength(hull[i], true)*0.1, true);\n    shapeMoments = moments(hull[i], false);\n\n    if(shapeMoments.m00 &lt;= areaThreshold || shapeMoments.m00 &gt;= MAX_AREA)\n        continue;\n\n    if(contourVertices.size() &lt;= 3 || contourVertices.size() &gt;= 7)\n        continue;\n\n    if(shapeMoments.m00 &gt;= maxArea)\n    {\n        maxArea = shapeMoments.m00;\n        maxI = i;\n    }\n}\n\nif(maxI == -1)\n    return false;\n\nfabricContour = hull[maxI];\n\napproxPolyDP(hull[maxI], contourVertices, arcLength(hull[maxI], true)*0.02,true);\nshapeMoments = moments(hull[maxI], false);\ncenterOfMass = Point2f(shapeMoments.m10/shapeMoments.m00, shapeMoments.m01/shapeMoments.m00);\n\ndrawContours(contourFrame, hull, maxI, Scalar(24, 35, 140), CV_FILLED, CV_AA);\ndrawContours(originalFrame, hull, maxI, Scalar(255, 0, 0), 8, CV_AA);\ncircle(contourFrame, centerOfMass, 4, Scalar(0, 0, 0), 10, 8, 0);\n\nposX = centerOfMass.x;\nposY = centerOfMass.y;\nM11 = shapeMoments.mu11/shapeMoments.m00;\nM20 = shapeMoments.mu20/shapeMoments.m00;\nM02 = shapeMoments.mu02/shapeMoments.m00;\nnum = double(2)*M11;\nden = M20 - M02;\nangle = (int(-1*(180/(2*M_PI))*atan2(num, den)) + 45 + 180)%180;\n//angle = int(-1*(180/(2*M_PI))*atan2(num, den));\n\narea = shapeMoments.m00;\n</code></pre>\n\n<p>Is there any way I can remove the ambiguity from this extracted angle? I tries using the third order moments, but they do not seem to be very reliable.</p>\n"}, {"tags": ["c++", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1435783297, "post_id": 31171245, "comment_id": 50350245, "body": "This is bad. <code>cfg.word</code> will dangle after the function ends for the same reason as <a href=\"http://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435783521, "post_id": 31171245, "comment_id": 50350368, "body": "@chris Uh-oh! The thing here is, I didn&#39;t write <code>ConfigStruct</code>; it&#39;s an API feature. I definitely would have just used a <code>std::string</code> or similar. I&#39;ll take it under advisement; could just be that my library has memory leaks I can&#39;t fix."}, {"owner": {"reputation": 2673, "user_id": 1774001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cbe9d987a6c775b55574b9974cc868?s=128&d=identicon&r=PG", "display_name": "johan d", "link": "https://stackoverflow.com/users/1774001/johan-d"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435783588, "post_id": 31171245, "comment_id": 50350398, "body": "@chris Here the literal &quot;word&quot; has a constant address isn&#39;t it? (Is it on the data section?) I would say it&#39;s OK to pass this char*... I&#39;m not sure of me but, my cent..."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 2673, "user_id": 1774001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cbe9d987a6c775b55574b9974cc868?s=128&d=identicon&r=PG", "display_name": "johan d", "link": "https://stackoverflow.com/users/1774001/johan-d"}, "edited": false, "score": 3, "creation_date": 1435783789, "post_id": 31171245, "comment_id": 50350501, "body": "@johand., It&#39;s okay to set <code>cfg.word</code> to point to a literal, but it&#39;s being set to the address of the first element of the local array that has a copy of the literal."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435783874, "post_id": 31171245, "comment_id": 50350549, "body": "@Katana314, While unfortunate that the class doesn&#39;t use a <code>std::string</code>, you&#39;ll just have to make sure what you set <code>cfg.word</code> to point to outlives <code>cfg.word</code> (at least until it&#39;s reassigned to something else). In this example, the easiest thing would be to make it point to the literal. If it came down to it, a static variable would work, too."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1435783875, "post_id": 31171245, "comment_id": 50350550, "body": "Question title and code do not agree.  The array is not static."}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1435783944, "post_id": 31171245, "comment_id": 50350589, "body": "@paddy I thought that might be the case; I think the new title should be correct."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1435783978, "post_id": 31171245, "comment_id": 50350601, "body": "Making the array static is actually a solution."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1435784029, "post_id": 31171245, "comment_id": 50350625, "body": "In this case, it&#39;s not a problem with a memory leak, but with a dangling pointer--i.e., the memory itself has been cleaned up (hasn&#39;t leaked), but the pointer to it remains, even though the pointee is gone."}, {"owner": {"reputation": 2673, "user_id": 1774001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cbe9d987a6c775b55574b9974cc868?s=128&d=identicon&r=PG", "display_name": "johan d", "link": "https://stackoverflow.com/users/1774001/johan-d"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435784087, "post_id": 31171245, "comment_id": 50350661, "body": "@chris Oh! Yep you&#39;re right. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783477, "creation_date": 1435783477, "answer_id": 31171326, "question_id": 31171245, "link": "https://stackoverflow.com/questions/31171245/is-a-memory-leak-possible-with-a-stack-allocated-array/31171326#31171326", "title": "Is a memory leak possible with a stack-allocated array?", "body": "<p>You declared a local variable which will be allocated on the stack.  When the function <code>generateConfigStruct()</code> returns, it's call frame is popped from the stack.  The next method that is called will have a call frame then be pushed on the stack and can overwrite the data in that location.</p>\n\n<p>You do not want to return pointers to stack-allocated storage.</p>\n"}, {"comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1435784298, "post_id": 31171328, "comment_id": 50350794, "body": "Or just <code>const char *myWord = &quot;word&quot;;</code>"}], "tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 1, "last_activity_date": 1435783821, "last_edit_date": 1435783821, "creation_date": 1435783480, "answer_id": 31171328, "question_id": 31171245, "link": "https://stackoverflow.com/questions/31171245/is-a-memory-leak-possible-with-a-stack-allocated-array/31171328#31171328", "title": "Is a memory leak possible with a stack-allocated array?", "body": "<p><code>myWord</code> is indeed on the stack, so it's not statically allocated - it's automatic. It is destroyed when the function exits - which is a problem, since <code>cfg</code> still has a pointer to it.</p>\n\n<p>EDIT to address follow-up: it would be safer to just say</p>\n\n<pre><code>cfg.word = \"word\";\n</code></pre>\n\n<p>Then you have a pointer to a constant string, which lasts the entire duration of the program.</p>\n\n<p>Otherwise you're stuck - you could allocate memory and make <code>cfg.word</code> point to it, but then you have a leak.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1435784713, "creation_date": 1435784713, "answer_id": 31171664, "question_id": 31171245, "link": "https://stackoverflow.com/questions/31171245/is-a-memory-leak-possible-with-a-stack-allocated-array/31171664#31171664", "title": "Is a memory leak possible with a stack-allocated array?", "body": "<blockquote>\n  <p>But, I'm having a hard time working out where the memory responsibilities should be in this case. Is the low-level library the only thing that can release that string's memory?</p>\n</blockquote>\n\n<p>In your posted code, memory for the string literal <code>\"word\"</code> is managed by the run time library. The string literal lives in the read-only portion of the program. That memory is valid for the life time of the program. However, you also have a stack variable <code>myWord</code>. It holds a copy of <code>\"word\"</code>. Memory used by <code>myWord</code> is valid while the function is being executed and becomes invalid when the function returns. By using:</p>\n\n<pre><code>cfg.word = myWord;\nreturn cfg;\n</code></pre>\n\n<p>you are returning an object that holds on to a pointer that is not valid.</p>\n\n<blockquote>\n  <p>Will it get destructed with the ConfigStruct automatically? </p>\n</blockquote>\n\n<p>Whether the destructor of <code>ConfigStruct</code> tries to deallocate the memory for its member veriable <code>word</code> is up to the definition of <code>ConfigStruct</code>. If it does not have a user defined destructor, then the compiler generates one but the compiler generated destructor will not deallocate memory used by <code>word</code>.</p>\n\n<blockquote>\n  <p>Or, will that memory be inappropriately marked as \"free\" at the end of this function, and possibly cause the configuration object issues later?</p>\n</blockquote>\n\n<p>That is correct. If you use <code>word</code> member variable of the returned <code>ConfigStruct</code> object later, you will run into problems since that is a dangling pointer.</p>\n\n<p>If <code>ConfigStruct</code> does not have a user defined destructor, you can use:</p>\n\n<pre><code>ConfigStruct generateConfigStruct() {\n  static char myWord[] = \"word\";\n  ConfigStruct cfg;\n  cfg.word = myWord;\n  return cfg;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ConfigStruct generateConfigStruct() {\n  ConfigStruct cfg;\n  cfg.word = \"word\";\n  return cfg;\n}\n</code></pre>\n"}], "owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1435784713, "creation_date": 1435783192, "last_edit_date": 1435783927, "question_id": 31171245, "link": "https://stackoverflow.com/questions/31171245/is-a-memory-leak-possible-with-a-stack-allocated-array", "title": "Is a memory leak possible with a stack-allocated array?", "body": "<p>I'm still comparatively new to C++ but I'm mostly working off of C++11 features which generally save me from memory leaks. Still, working with other older libraries, there's unfortunately times I need to interface with older code.</p>\n\n<p>I've seen similar questions, but couldn't easily locate one where the array was allocated without <code>new</code>; eg, so it's on the stack rather than the heap, to my understanding.</p>\n\n<p>This situation happens to involve a string, but the mechanics are probably more to do with arrays.</p>\n\n<pre><code>ConfigStruct {\n  const char *word;\n}\n\nConfigStruct generateConfigStruct() {\n  const char myWord[] = \"word\"; // &lt;-- This\n  ConfigStruct cfg;\n  cfg.word = myWord;\n  return cfg;\n}\n</code></pre>\n\n<p>I believe this configuration object is going to be passed into a separate lower-level function. But, I'm having a hard time working out where the memory responsibilities should be in this case. Is the low-level library the only thing that can release that string's memory? Will it get destructed with the ConfigStruct automatically? Or, will that memory be inappropriately marked as \"free\" at the end of this function, and possibly cause the configuration object issues later?</p>\n\n<p>EDIT: One final follow-on question; if <code>ConfigStruct</code> cannot be changed, and my task is to write a <code>generateConfigStruct</code> that returns a <code>ConfigStruct</code>, is there any way to do it that won't cause later usage any issues, <em>and</em> can somehow guarantee memory safety despite the dangling pointer?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435782906, "post_id": 31171075, "comment_id": 50350041, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\" title=\"what is a smart pointer and when should i use one\">stackoverflow.com/questions/106508/&hellip;</a>"}, {"owner": {"reputation": 8038, "user_id": 304748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a40ced265d8fde3bd35d5689c4181?s=128&d=identicon&r=PG", "display_name": "Brian Walker", "link": "https://stackoverflow.com/users/304748/brian-walker"}, "edited": false, "score": 2, "creation_date": 1435783937, "post_id": 31171075, "comment_id": 50350583, "body": "See question 3 on <a href=\"http://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow noreferrer\">http://herbsutter.com/2013/06/05/gotw-91-solution-smart-poin&zwnj;&#8203;ter-parameters/</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1435784075, "post_id": 31171075, "comment_id": 50350655, "body": "@Jeff How would you get a <code>unique_ptr</code> from a <code>shared_ptr</code>?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1435785291, "post_id": 31171075, "comment_id": 50351368, "body": "@Jeff I agree. But you still can&#39;t pass a <code>shared_ptr</code> to a function expecting a <code>unique_ptr</code>, so it doesn&#39;t solve the problem of how to pass a <code>shared_ptr</code> to a function."}, {"owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1435786123, "post_id": 31171075, "comment_id": 50351763, "body": "@Jeff: I don&#39;t think smart pointers lose their purpose when extracting the bare pointer, since the object is still managed. Especially when a function does not care about ownership at all."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1435789915, "post_id": 31171075, "comment_id": 50353244, "body": "@Jeff: Sample use case for extracting the bare pointer: you are managing the lifetime of a char array, but you are passing the pointer into a function whose only purpose in life is to fill a char array with data."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1435790905, "post_id": 31171075, "comment_id": 50353559, "body": "@Jeff: It&#39;s an excellent candidate if its lifetime needs to be shared between multiple owners, just like anything else. And I&#39;m sure you can imagine other use cases of functions that do things without participating in ownership of objects, if you really wanted to. (although, as my answer indicates, you be passing the objects around when appropriate)"}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1435783418, "creation_date": 1435783418, "answer_id": 31171304, "question_id": 31171075, "link": "https://stackoverflow.com/questions/31171075/what-is-the-best-practice-when-passing-a-shared-pointer-to-a-non-owning-function/31171304#31171304", "title": "What is the best practice when passing a shared pointer to a non-owning function?", "body": "<p>The lifetime is guaranteed by the stack.  If you were to pass a <code>weak_ptr</code>, then the function would just have to acquire a <code>shared_ptr</code> anyway.</p>\n\n<p>You want to either pass the raw pointer by value, or the actual object by reference.</p>\n\n<p>The choice between these two options depends on the semantics of the function you are calling.  If <code>nullptr</code> is a valid argument to your function, then pass the raw pointer.  Otherwise, pass the object by reference.</p>\n"}, {"tags": [], "owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "is_accepted": true, "score": 6, "last_activity_date": 1435784951, "last_edit_date": 1435784951, "creation_date": 1435783879, "answer_id": 31171434, "question_id": 31171075, "link": "https://stackoverflow.com/questions/31171075/what-is-the-best-practice-when-passing-a-shared-pointer-to-a-non-owning-function/31171434#31171434", "title": "What is the best practice when passing a shared pointer to a non-owning function?", "body": "<p>I would suggest to pass them by <code>const std::shared_ptr&lt;T&gt;&amp;</code>.  This has two benefits:</p>\n\n<ol>\n<li>No overhead incurred with reference counts (the reference count is not increased by default)</li>\n<li>The function is free to take a copy of the shared pointer if necessary</li>\n</ol>\n\n<p>I use this a lot in situations where they may (or may not) be a thread handoff. For instance:</p>\n\n<pre><code>struct Foo { void bar() {} };\n\nclass BaseImpl\n{\npublic:\n   void CallBar(const std::shared_ptr&lt;Foo&gt;&amp; f);\n   {\n      do_call_bar(f);\n   }\n\nprivate:\n   virtual void do_call_bar(const std::shared_ptr&lt;Foo&gt;&amp; f) = 0;\n};\n\nclass DerivedDirectCall : public BaseImpl\n{\n   virtual void do_call_bar(const std::shared_ptr&lt;Foo&gt;&amp; f) override\n   {\n      f-&gt;bar();\n   }\n};\n\nclass DerivedAsyncCall : public BaseImpl\n{\n   virtual void do_call_bar(const std::shared_ptr&lt;Foo&gt;&amp; f) override\n   {\n      // assume invoke passes this off\n      // to be done asynchronously\n      invoke([f] () { f-&gt;bar(); });\n   }\n};\n</code></pre>\n\n<p>Depending on whether the implementation is <code>DerivedDirectCall</code> or <code>DerivedAsyncCall</code> the shared pointer will only be copied if necessary.</p>\n\n<p>Also, a comment above linked <a href=\"http://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow\">this article on smart pointers</a>.  I want to be clear in that my answer is specifically about passing the smart pointer itself.  If you know the lifetime won't necessarily be extended, it's better to pass the pointed to object by reference (or raw pointer, but only it's necessary to allow for <code>nullptr</code> parameters).</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 4, "last_activity_date": 1435785163, "creation_date": 1435785163, "answer_id": 31171777, "question_id": 31171075, "link": "https://stackoverflow.com/questions/31171075/what-is-the-best-practice-when-passing-a-shared-pointer-to-a-non-owning-function/31171777#31171777", "title": "What is the best practice when passing a shared pointer to a non-owning function?", "body": "<blockquote>\n  <p>Since using shared pointers, I frequently run in the situation that I want to pass them to functions which do not (have to) own the object. </p>\n</blockquote>\n\n<p>Your wording makes it sound like what your function <em>actually</em> cares about is the <em>object</em> being pointed to, not the <em>pointer</em>. Thus, you should pass the <em>object</em> (by reference):</p>\n\n<pre><code>void my_func(int &amp;x);\n\nint main()\n{\n    shared_ptr&lt;int&gt; demo_ptr = make_shared&lt;int&gt;(5);\n    my_func(*demo_ptr);\n}\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "closed_date": 1435833171, "accepted_answer_id": 31171434, "answer_count": 3, "score": 3, "last_activity_date": 1435785163, "creation_date": 1435782603, "question_id": 31171075, "link": "https://stackoverflow.com/questions/31171075/what-is-the-best-practice-when-passing-a-shared-pointer-to-a-non-owning-function", "closed_reason": "Opinion-based", "title": "What is the best practice when passing a shared pointer to a non-owning function?", "body": "<p>Since using shared pointers, I frequently run in the situation that I want to pass them to functions which do not (have to) own the object. Because I know that the object is valid during the function call I have four options of passing the pointer:</p>\n\n<ol>\n<li>by value </li>\n<li>by reference</li>\n<li>weak pointer </li>\n<li>raw pointer</li>\n</ol>\n\n<p>At first I started to use weak pointers a lot (because I already had them), but the overhead of locking  them all the time is annoying and hits performance. Now I think about either passing raw pointers or shared pointers by reference. Is there a best practice? </p>\n"}, {"tags": ["c++", "assert"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435782787, "post_id": 31171062, "comment_id": 50349967, "body": "If the argument passed to the construction is not <i>optional</i> consider using a reference instead of a pointer. Since null references do not exist in C++ you can eliminate the null pointer check in your other functions. If yuo want to continue using a pointer you should check for null in the constructor and throw an exception if it is null."}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435782993, "post_id": 31171062, "comment_id": 50350087, "body": "It sounds good. But is there any case when an assert should be used ?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435783064, "post_id": 31171062, "comment_id": 50350123, "body": "The common usage is for contracts (think preconditions and postconditions). However, C++ should be getting some actual contracts support before too long."}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1435783161, "post_id": 31171062, "comment_id": 50350170, "body": "For me it seems that the pointer in the example is a precondition, isn&#39;t it ?"}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1435787591, "post_id": 31171563, "comment_id": 50352408, "body": "All the problems you mentioned can be solved by using a custom assert (e.g.: <code>my_assert</code>). You can throw an exception, enable them in release builds and so on..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1435787691, "post_id": 31171563, "comment_id": 50352451, "body": "@KarolyHorvath While you&#39;re actually right, meh I don&#39;t like it. There&#39;s no need for <code>assert()</code>."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1435787752, "post_id": 31171563, "comment_id": 50352482, "body": "Personally I prefer asserts, they better convey the <i>intention</i> (and as I said, you can always change the actual <i>behaviour</i>). See @Quentin &#39;s answers for details."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1435787909, "post_id": 31171563, "comment_id": 50352557, "body": "@KarolyHorvath If <code>assert()</code> isn&#39;t used the right way, it will make (debugging) life harder, while exceptions always allow debugging smoothly to the actual point of failure."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435787958, "post_id": 31171563, "comment_id": 50352579, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 what do you mean, they may lead to UB ? An <code>assert</code> placed to protect against UB, and the UB-causing case never getting tested before relase ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435788048, "post_id": 31171563, "comment_id": 50352612, "body": "@Quentin I referred to the fact, that <code>assert()</code> actually deceases to NOP (and thus does&#39;t protect anything) in case of  <code>NDEBUG</code> is defined."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1435788067, "post_id": 31171563, "comment_id": 50352622, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Anything used the wrong way will make your life harder. And it&#39;s pointless to argue about the behaviour, when you can change it with a wrapper...."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435788288, "post_id": 31171563, "comment_id": 50352721, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 No quantity of debugging facilities can save you if you don&#39;t actually test the use case that would cause the bug. Though I admit the whole assert/exceptions system has been designed for a perfect world where all tests are comprehensive."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1435784673, "last_edit_date": 1435784673, "creation_date": 1435784339, "answer_id": 31171563, "question_id": 31171062, "link": "https://stackoverflow.com/questions/31171062/c-using-assert-for-class/31171563#31171563", "title": "C++ using assert for class?", "body": "<blockquote>\n  <ul>\n  <li>Is that correct ?</li>\n  </ul>\n</blockquote>\n\n<p>There's no finite (or standard defined) <em>correct</em> way of using <code>assert()</code></p>\n\n<blockquote>\n  <ul>\n  <li>Or is there any other cases when assert shall be used ?</li>\n  </ul>\n</blockquote>\n\n<p>IMHO it shouldn't really be used at all in preference of throwing an exception.<br>\nI personally hate <code>assert()</code> (vs. exceptions thrown).</p>\n\n<p>It's hard to debug, unless you install your own <code>abort()</code> handler and can place breakpoints there.</p>\n\n<p>Also <code>assert()</code> is only active with debug builds, and may lead to UB in production programs, where they've not been caught with test suites running on the debug version. </p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435787258, "creation_date": 1435787258, "answer_id": 31172279, "question_id": 31171062, "link": "https://stackoverflow.com/questions/31171062/c-using-assert-for-class/31172279#31172279", "title": "C++ using assert for class?", "body": "<p>TL;DR: Exceptions are for exceptional but recoverable errors from the outside, assertions are for bug-catching on the inside.</p>\n\n<p><code>assert()</code> is here to trap things that <strong>shouldn't</strong> happen, in any condition, if the program is correct. The goal is to halt the program for analysis as soon as it gets into an impossible state, before it goes haywire and crashes somewhere else, garbles the stack, or any other hard-to-debug failure.</p>\n\n<p>You should use assertions to check that functions are fed the correct parameters (to catch the user's errors), that algorithms work the way they're intended to (to catch your own errors), etc.</p>\n\n<p>Exceptions are here to trap thing that <em>may</em> (and will someday) happen, and that are not under any programmer's control, like network failure, memory shortage, file I/O problems, etc. They're an error handling facility, which provide an alternative code path for them.</p>\n\n<p>You should use them to communicate errors to somewhere you can handle them. For example, a memory exception thrown from the bottom of a client-handling procedure could fly back up and be caught by the main server procedure, which would then gracefully notify the client and close its connection and continue working normally.</p>\n"}], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 31172279, "answer_count": 2, "score": 1, "last_activity_date": 1435787598, "creation_date": 1435782564, "last_edit_date": 1435787598, "question_id": 31171062, "link": "https://stackoverflow.com/questions/31171062/c-using-assert-for-class", "title": "C++ using assert for class?", "body": "<p>I read some posts about <code>assert</code> and after all I can only imagine the following usage as legitime:</p>\n\n<pre><code>class Class\n{\npublic:\n    Class( Requirement* aRequirement )\n    : m_Requirement( aRequirement )\n    {\n    }\n\n    // ...\n\n    void doSomething()\n    {\n        // Theoretically it is always set, but it is\n        // possible that a messy user passed a null pointer.\n        assert( m_Requirement != nullptr );\n\n        // ...\n    }\n\n    // ...\n\nprivate:\n    Requirement* m_Requirement;\n};\n</code></pre>\n\n<p>So using an assert is legitime when theoretically a variable is valid, but it is possible that a messy user passes some inappropriate value.</p>\n\n<ul>\n<li>For example if we want to check a range then we should not use <code>assert</code> or <code>exception</code>, just use conditionals.</li>\n<li>If there can be exceptional cases then <code>exceptions</code> shall be used.</li>\n<li>And here is the question ... when everything shall be correct is that the exact time when the <code>assert</code> shall be used ?</li>\n<li>Is that correct ?</li>\n<li>Or is there any other cases when <code>assert</code> shall be used ?</li>\n</ul>\n"}, {"tags": ["c++", "boost", "circular-buffer"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435782306, "post_id": 31170895, "comment_id": 50349716, "body": "You mean like <code>cb[cb.size() - 5]</code>?"}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435782826, "post_id": 31170895, "comment_id": 50349993, "body": "@Barry Well, I hope that works.  It sounds logical if size is giving the current &#39;size&#39; modulo capacity and is not the same as capacity since the buffer may be full already - if that makes any sense?"}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435786100, "post_id": 31170895, "comment_id": 50351752, "body": "Size and Capacity are only different on the first cycle of the Circular Buffer, otherwise it would be that simple."}], "answers": [{"comments": [{"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "edited": false, "score": 1, "creation_date": 1435786260, "post_id": 31171240, "comment_id": 50351831, "body": "Your idea is a good one and was going to be my next course of action if I couldn&#39;t find an easier solution.  However, sehe pointed me to a solution using <code>boost::prior</code>.  Thanks"}], "tags": [], "owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783182, "creation_date": 1435783182, "answer_id": 31171240, "question_id": 31170895, "link": "https://stackoverflow.com/questions/31170895/how-to-tell-the-current-write-position-of-a-boost-circular-buffer-to-enable-ac/31171240#31171240", "title": "How to tell the current &#39;write position&#39; of a Boost Circular Buffer to enable accessing a previously stored value", "body": "<p>I think the only viable answer is for you to keep track of the index yourself. According to the Boost documentation, it appears that the container has a fixed allocation size and works similar to a stack.</p>\n\n<p>Like other containers, elements do not intrinsically keep track of their key. Therefore, it is up to you to externally keep track of any properties like position or key. It appears that you only have the usual <code>std::vector</code>-like functions available to you: <code>size()</code>, <code>capacity()</code>, <code>at()</code>, <code>operator[]</code>, and such, including the iterator functions. </p>\n\n<p>I suppose that the best thing you can do is to find out some way of keeping track of the \"keys\" or index numbers. Since the circular buffer simply loops around and rewrites over the first array on \"overflow,\" perhaps you could keep a count yourself with a modulo function.</p>\n"}, {"comments": [{"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "edited": false, "score": 0, "creation_date": 1435785100, "post_id": 31171252, "comment_id": 50351251, "body": "Thanks! This project uses C++ 98 so I can&#39;t do std::next but I in fact need something like <code>*std::prev(cb.end(), 4)</code>.  If I can get something like that working then I&#39;ll accept your answer"}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "edited": false, "score": 0, "creation_date": 1435785588, "post_id": 31171252, "comment_id": 50351516, "body": "<code>std::cout &lt;&lt; &quot;t0-5: &quot; &lt;&lt; *boost::prior(circularBuffer.end(), 4) &lt;&lt; &quot;\\n&quot;;</code> does the trick.  I&#39;ll accept your answer since you got me 95% of the way there... ;-)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1435783229, "creation_date": 1435783229, "answer_id": 31171252, "question_id": 31170895, "link": "https://stackoverflow.com/questions/31170895/how-to-tell-the-current-write-position-of-a-boost-circular-buffer-to-enable-ac/31171252#31171252", "title": "How to tell the current &#39;write position&#39; of a Boost Circular Buffer to enable accessing a previously stored value", "body": "<p>I'm not sure I understand correctly, but your worries about modulo indexing seem overly anxious to me. The whole purpose of a circular buffer <em>abstraction</em> is to hide the index arithmetics from the caller, if you ask me.</p>\n\n<p>I'd be thoroughly disappointed in the library design if Boost would let this implementation detail leak out\u00b9</p>\n\n<p>Here's a simple demo that seems to be what you want:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/380fc4f6e4bea81a\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/circular_buffer.hpp&gt;\n\nint main() {\n    boost::circular_buffer&lt;int&gt; cb(10); // [tag:cb-so-fixedsize] obviously\n\n    for (int msg : { 3, 5, 6, 9, 2, 8, 6, 7 }) {\n        cb.push_back(msg);\n    }\n\n    // should be 2\n    std::cout &lt;&lt; \"t0-5: \" &lt;&lt; cb[4] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"t0-5: \" &lt;&lt; *std::next(cb.begin(), 4) &lt;&lt; \"\\n\";\n\n    // should be 9\n    std::cout &lt;&lt; \"t0-5: \" &lt;&lt; cb[3] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"t0-5: \" &lt;&lt; *std::next(cb.begin(), 3) &lt;&lt; \"\\n\";\n\n    while (!cb.empty()) {\n        std::cout &lt;&lt; cb.front() &lt;&lt; \" \";\n        cb.pop_front();\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>t0-5: 2\nt0-5: 2\nt0-5: 9\nt0-5: 9\n3 5 6 9 2 8 6 7 \n</code></pre>\n\n<p>\u00b9 I'm well aware that the implementation detail is implied by the name \"circular\", but hey. Many data structures in the standard library and alike have slightly confusing names</p>\n\n\n"}], "owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 0, "accepted_answer_id": 31171252, "answer_count": 2, "score": 2, "last_activity_date": 1435783229, "creation_date": 1435782017, "question_id": 31170895, "link": "https://stackoverflow.com/questions/31170895/how-to-tell-the-current-write-position-of-a-boost-circular-buffer-to-enable-ac", "title": "How to tell the current &#39;write position&#39; of a Boost Circular Buffer to enable accessing a previously stored value", "body": "<p>I want to access a value in a <code>Boost Circular Buffer</code> that is, for example, 5 positions 'in the past'.  So, imagine I am now writing a value '7' to a previous stream of integers:</p>\n\n<p>3, 5, 6, 9, 2, 8, 6</p>\n\n<p>Therefore I have now:</p>\n\n<p>7, 3, 5, 6, 9, 2, 8, 6</p>\n\n<p>I want the '2' since that is 5 positions in the past.  How do I get that?</p>\n\n<p>In other words, what is the current 'write index'?  </p>\n\n<p>I think that I might need to use <code>boost::circular_buffer&lt;double&gt;::const_iterator</code> but I'm not sure.</p>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 2, "creation_date": 1435782218, "post_id": 31170883, "comment_id": 50349665, "body": "Can you focus this a bit and make it more a question?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1435786134, "post_id": 31170883, "comment_id": 50351766, "body": "As @GlennTeitelbaum said, that&#39;s not very clear. But in principle, why you just send from your thread a signal with the text, and catch it in your main thread to update te gui?"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1435860902, "last_edit_date": 1495535310, "creation_date": 1435794188, "answer_id": 31173426, "question_id": 31170883, "link": "https://stackoverflow.com/questions/31170883/how-in-qt-to-add-text-to-a-text-editor-using-a-thread/31173426#31173426", "title": "How in Qt to add text to a text editor using a thread", "body": "<p>Since <code>QTextEdit::append</code> is a slot, it's very easy to call it from other threads:</p>\n\n<pre><code>void tempTimeObject::DoWork() {\n  ...\n  QMetaObject::invokeMethod(ui-&gt;tempTimeNoHeatMode, \"append\", \n                            Qt::QueuedConnection, Q_ARG(QString, temp));\n  ...\n}\n</code></pre>\n\n<p>If you wished to execute arbitrary code, it boils down to \"how to execute a functor in a given thread\", with the thread being the main thread. The answers to <a href=\"https://stackoverflow.com/q/21646467/1329652\">this question</a> provide multiple ways of doing it.</p>\n\n<p>The simplest way on Qt 5 would be:   </p>\n\n<pre><code>void tempTimeObject::DoWork() {\n  ...\n  {\n    QObject signalSource;\n    QObject::connect(&amp;signalSource, &amp;QObject::destroyed, qApp, [=](QObject *){\n      ui-&gt;tempTimeNoHeatMode-&gt;append(text);\n      ... // other GUI manipulations\n    });\n  } // here signalSource emits the signal and posts the functor to the GUI thread\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4509924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43cd375be561dbbbd87c92209bce2597?s=128&d=identicon&r=PG&f=1", "display_name": "cdbean04", "link": "https://stackoverflow.com/users/4509924/cdbean04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1435860902, "creation_date": 1435781983, "last_edit_date": 1435783765, "question_id": 31170883, "link": "https://stackoverflow.com/questions/31170883/how-in-qt-to-add-text-to-a-text-editor-using-a-thread", "title": "How in Qt to add text to a text editor using a thread", "body": "<p>For the project I am working on in Qt I need to make several things happen at the same time. One of these events is to take a temperature reading and display that reading in a text edit box along with a time stamp. The temp and time stamp do not display until the while loop i wrote finishes. I know the while loop is blocking it so I am trying to write a thread to display the time and temp, but can not figure out how to write to the gui from the thread.</p>\n\n<p>Here is where I start the thread and the while loop</p>\n\n<pre><code>QThread cThread;\ntimeTempObject cObject;\n\ncObject.DoSetup(cThread);\ncObject.moveToThread(&amp;cThread);\ncThread.start();\n\nwhile(flowTime &gt; 0)\n{\n    // set zero pin to be high while flowtime is more than 0\n    digitalWrite(0,1);\n    displayCurrentTime();\n\n    // set second pin LED to flash according to dutyCycle\n    digitalWrite(2,1);\n    delay(onTime);\n    // displayCurrentTime();\n    ui-&gt;tempTimeNoHeatMode-&gt;append(temp);\n\n    digitalWrite(2,0);\n    delay(offTime);\n\n    flowTime--;\n}\n</code></pre>\n\n<p>noheatmode.h</p>\n\n<pre><code>namespace Ui {\nclass noheatmode;\n}\n\nclass noheatmode : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    explicit noheatmode(QWidget *parent = 0);\n    ~noheatmode();\n\nprivate slots:\n    void on_startButtonNoHeatMode_clicked();\n\n    void on_noHeatModeBack_clicked();\n\npublic slots:\n    void displayCurrentTime();\n\nprivate:\n    Ui::noheatmode *ui;\n};\n\n#endif // NOHEATMODE_H\n</code></pre>\n\n<p>timetempobject.h for the thread</p>\n\n<pre><code>class timeTempObject : public QObject\n{\n    Q_OBJECT\n\npublic:\n    explicit timeTempObject(QObject *parent = 0);\n    void DoSetup(QThread &amp;cThread);\n\npublic slots:\n    void DoWork();\n};\n\n#endif // TIMETEMPOBJECT_H\n</code></pre>\n\n<p>timetempobject.cpp</p>\n\n<pre><code>timeTempObject::timeTempObject(QObject *parent) :\nQObject(parent)\n{\n}\n\nvoid timeTempObject::DoSetup(QThread &amp;cThread)\n{\n    connect(&amp;cThread,SIGNAL(started()),this,SLOT(DoWork()));\n}\n\nvoid timeTempObject::DoWork()\n{\n    QTimer *timer = new QTimer(this);\n    connect(timer, SIGNAL(timeout()), this, SLOT(displayCurrentTime()));\n\n    // delay set to space out time readings, can be adjusted\n    timer-&gt;start(1500);\n\n    // Gets the time\n    QTime time = QTime::currentTime();\n\n    // Converts to string with chosen format\n    QString sTime = time.toString(\"hh:mm:ss:ms\");\n\n    // displays current time in text edit box\n    Ui::noheatmode* noheatmode::ui-&gt;tempTimeNoHeatMode-&gt;append(sTime);\n}\n</code></pre>\n\n<p>How do I alter my thread so it can write to the text editor in my gui?</p>\n"}, {"tags": ["c++", "loops", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435781889, "post_id": 31170785, "comment_id": 50349491, "body": "Well, given <code>x</code>, what do you end up with for <code>x*nr</code>?"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 2, "creation_date": 1435781996, "post_id": 31170785, "comment_id": 50349549, "body": "Step through the debugger?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435781999, "post_id": 31170785, "comment_id": 50349550, "body": "You know you can step through the code with your debugger and see what each step is doing.  It is a very useful tool."}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": true, "score": 1, "last_activity_date": 1435782410, "creation_date": 1435782410, "answer_id": 31171012, "question_id": 31170785, "link": "https://stackoverflow.com/questions/31170785/code-explanation-for-a-while-loop-within-a-for-loop/31171012#31171012", "title": "Code explanation for a While Loop within a For Loop", "body": "<p>Your while loop divides x by 10 every time. And since you're dealing with integers, that just shifts the decimal number one to the right: <code>7234 -&gt; 723</code>. \nIt does this untill it is smaller than 10, or in other words, there is one (the first) digit left: 7. Then it multiplies again by 10^(times divided by 10): 7000.<br>\nThis means the code whitin your for-loop makes all but the first digits zero in each x. so in the end you'll have: <code>200 + 2000 + 20 + 2 + 20000</code></p>\n"}], "owner": {"reputation": 13, "user_id": 5070965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dd877f961236a979b56cae5ddc68b4e?s=128&d=identicon&r=PG&f=1", "display_name": "Flav", "link": "https://stackoverflow.com/users/5070965/flav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 31171012, "answer_count": 1, "score": -1, "last_activity_date": 1435782410, "creation_date": 1435781608, "last_edit_date": 1435781796, "question_id": 31170785, "link": "https://stackoverflow.com/questions/31170785/code-explanation-for-a-while-loop-within-a-for-loop", "title": "Code explanation for a While Loop within a For Loop", "body": "<p>Can anyone explain to me why the output for the program below, if you input the values: 5, 222, 2043, 29, 2, 20035 is 22222? I'm trying to solve it on paper and I just can't get to this result.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint n=0;\nint x=0;\nint s=0;\nint i=1;\n\n\nint main() {\n    cin &gt;&gt; n;\n    for(i=1; i&lt;=n; i++) {\n        cin &gt;&gt; x;\n        int nr=1;\n        while(x&gt;9) {\n            nr=nr*10;\n            x=x/10;\n        }\n        s=s+x*nr;\n    }\n    cout &lt;&lt; s;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "stream", "overloading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435781079, "post_id": 31170560, "comment_id": 50349050, "body": "Actually, you have no question (make it so)"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 1, "creation_date": 1435781720, "post_id": 31170560, "comment_id": 50349393, "body": "Hmm, thought it was asked about guarentees and faster, albeit in the middle"}, {"owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "edited": false, "score": 0, "creation_date": 1435784511, "post_id": 31170560, "comment_id": 50350916, "body": "@DieterL&#252;cking, there is a question - &quot;am I relying on something that isn&#39;t guaranteed? Can it fail in some case?&quot; You may have lost it, because I added text below it explaining the motivation for asking."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1435785000, "post_id": 31170560, "comment_id": 50351203, "body": "Very nice observation, I will keep this mind for future use"}], "answers": [{"tags": [], "owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": false, "score": 4, "last_activity_date": 1435784682, "last_edit_date": 1435784682, "creation_date": 1435781184, "answer_id": 31170664, "question_id": 31170560, "link": "https://stackoverflow.com/questions/31170560/returning-the-result-of-from-operator/31170664#31170664", "title": "Returning the result of `&lt;&lt;` from `operator&lt;&lt;`", "body": "<p>Assuming the overload you're using is returning a reference, these</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp;os, const Foo &amp;x) { os&lt;&lt;\"foo\"; return os; }\nostream &amp; operator&lt;&lt;(ostream &amp;os, const Foo &amp;x) { return os&lt;&lt;\"foo\"; }\n</code></pre>\n\n<p>will have the same effect and allow for the usual chaining</p>\n\n<pre><code>cout &lt;&lt; Foo::A &lt;&lt; Foo::B;\n</code></pre>\n\n<p>If the first sentence were not to hold (e.g. calling some other custom-defined overload that does not return a reference to the stream object) then you would have to either explicitly return the stream reference or provide a different overload if you still wanted to chain those statements.</p>\n"}, {"comments": [{"owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "edited": false, "score": 0, "creation_date": 1435825661, "post_id": 31170737, "comment_id": 50364700, "body": "Knowing that it works whenever chaining works is good enough for me. Thanks."}], "tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": true, "score": 1, "last_activity_date": 1435784714, "last_edit_date": 1435784714, "creation_date": 1435781411, "answer_id": 31170737, "question_id": 31170560, "link": "https://stackoverflow.com/questions/31170560/returning-the-result-of-from-operator/31170737#31170737", "title": "Returning the result of `&lt;&lt;` from `operator&lt;&lt;`", "body": "<p>Since it is expected to be able to chain, your simplification should work, and will fail at compilation if the offending class definition does not follow convention</p>\n\n<p>Any place where</p>\n\n<pre><code>std::cout &lt;&lt; a &lt;&lt; b &lt;&lt; std::endl;\n</code></pre>\n\n<p>would work, so would your simplification, which should suffice without a true guarentee</p>\n\n<p>Specificly, the <code>operator &lt;&lt;</code> for string literals as in your question is guarenteed to return the correct <code>ostream</code></p>\n"}], "owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31170737, "answer_count": 2, "score": 2, "last_activity_date": 1435784714, "creation_date": 1435780764, "last_edit_date": 1435784429, "question_id": 31170560, "link": "https://stackoverflow.com/questions/31170560/returning-the-result-of-from-operator", "title": "Returning the result of `&lt;&lt;` from `operator&lt;&lt;`", "body": "<p>All guides about <code>operator&lt;&lt;</code> say that you should return the output stream:</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp;os, const Foo &amp;x) { os&lt;&lt;\"foo\"; return os; }\n</code></pre>\n\n<p>But can't it be just a bit simpler?</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp;os, const Foo &amp;x) { return os&lt;&lt;\"foo\"; }\n</code></pre>\n\n<p>If the called <code>&lt;&lt;</code> follows the guides and returns its first parameter, then it should be 100% the same. But am I relying on something that isn't guaranteed? Can it fail in some case?</p>\n\n<p>Why do I want it? Not just to save keystrokes (we're not in <a href=\"http://codegolf.stackexchange.com\">codegolf.SE</a>)\nThe actual usage is a bit more complicated:</p>\n\n<pre><code>enum class Foo { A, B, C };\nostream &amp; operator&lt;&lt;(ostream &amp;os, const Foo &amp;x) {\n    switch (x) {\n        case A: return os &lt;&lt; \"A\";\n        case B: return os &lt;&lt; \"B\";\n        case C: return os &lt;&lt; \"C\";\n    }\n    return os &lt;&lt; \"Bad Foo (\" &lt;&lt; (int)x &lt;&lt; \")\";\n}\n</code></pre>\n\n<p>The multiple returns make the code much more simple and readable (imagine 50 cases, not 3) compared to all alternatives I found. Note that the lack of <code>default</code> allows the compiler to warn about missing cases, so you won't forget to add one when adding an enum value.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"tags": [], "owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "is_accepted": true, "score": 2, "last_activity_date": 1435781712, "creation_date": 1435781712, "answer_id": 31170808, "question_id": 31170558, "link": "https://stackoverflow.com/questions/31170558/pointer-to-template-class-object/31170808#31170808", "title": "Pointer to template class object", "body": "<p><code>ListElement</code> is a template, so you want to use a specific instantiation for your pointers:</p>\n\n<pre><code>template&lt;class T&gt;\nclass List\n{\nprivate:\n    ListElement&lt;T&gt;* first;\n    ListElement&lt;T&gt;* last;\n    // note:   ^^^\n</code></pre>\n\n<p>likewise for other occurrences. Only within the template, the template name is usable for the current instantiation, i.e., <em>within</em> <code>List</code>, you can use <code>List</code> as a shortcut for <code>List&lt;T&gt;</code>.</p>\n"}], "owner": {"reputation": 455, "user_id": 4948898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hamtV.png?s=128&g=1", "display_name": "Colin Rauch", "link": "https://stackoverflow.com/users/4948898/colin-rauch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2761, "favorite_count": 0, "accepted_answer_id": 31170808, "answer_count": 1, "score": 0, "last_activity_date": 1435781907, "creation_date": 1435780760, "last_edit_date": 1435781848, "question_id": 31170558, "link": "https://stackoverflow.com/questions/31170558/pointer-to-template-class-object", "title": "Pointer to template class object", "body": "<p>I'm trying to create a individual List with a templated value, but unfortunately I can not link from my List to the ListElements with templates.</p>\n\n<p>In my main I call <code>List&lt;int&gt; list1;</code> to create a instance of the class List.\nA List contains multiple ListElements that contain the value, that should be templated.</p>\n\n<p>Compiler throws an error at </p>\n\n<pre><code>ListElement* first;\nListElement* last;\n</code></pre>\n\n<p>in List.h.\nIt says C2955 - 'ListElement' : use of class type requires type argument list</p>\n\n<p>List.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include \"ListElement.h\"\ntemplate&lt;class T&gt;\nclass List\n{\nprivate:\n    ListElement* first;\n    ListElement* last;\npublic:\n    List();\n    ~List();\n    void printList();\n    void pushBack(T value);\n    void pushFront(T value);\n};\n</code></pre>\n\n<p>List.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"List.h\"\n\ntemplate&lt;class T&gt;\nList&lt;T&gt;::List()\n{\n    first = NULL;\n    last = NULL;\n}\n\ntemplate&lt;class T&gt;\nList&lt;T&gt;::~List()\n{\n}\n\ntemplate&lt;class T&gt;\nvoid List&lt;T&gt;::pushBack(T value)\n{\n    if (last)\n    {\n        ListElement* tmp = last;\n        last = new ListElement(value);\n        last-&gt;setPrev(tmp);\n        tmp-&gt;setNext(last);\n    }\n    else\n    {\n        first = new ListElement(value);\n        last = first;\n    }\n}\n\ntemplate&lt;class T&gt;\nvoid List&lt;T&gt;::pushFront(T value)\n{\n    if (first)\n    {\n        ListElement* tmp = first;\n        first = new ListElement(value);\n        first-&gt;setNext(tmp);\n        tmp-&gt;setPrev(first);\n    }\n    else\n    {\n        last = new ListElement(value);\n        first = last;\n    }\n}\n\ntemplate&lt;class T&gt;\nvoid List&lt;T&gt;::printList()\n{\n    if (first)\n    {\n        ListElement* tmp = first;\n        while (tmp)\n        {\n            std::cout &lt;&lt; tmp-&gt;getValue() &lt;&lt; std::endl;\n            if (tmp != last)\n                tmp = tmp-&gt;getNext();\n            else\n                break;\n        } \n    }\n    else \n    {\n        std::cout &lt;&lt; \"List is empty!\" &lt;&lt; std::endl;\n    }\n}\n\ntemplate class List&lt;int&gt;;\ntemplate class List&lt;std::string&gt;;\n</code></pre>\n\n<p>ListElement.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\ntemplate&lt;class T&gt;\nclass ListElement\n{\nprivate:\n    ListElement* next;\n    ListElement* prev;\n    T value;\npublic:\n    ListElement(T val);\n    ~ListElement();\n    ListElement* getNext() { return next; }\n    ListElement* getPrev() { return prev; }\n    void setNext(ListElement* elem) { next = elem; }\n    void setPrev(ListElement* elem) { prev = elem; }\n    T getValue() { return value; }\n};\n</code></pre>\n\n<p>ListElement.cpp</p>\n\n<pre><code>#include \"ListElement.h\"\n\ntemplate&lt;class T&gt;\nListElement&lt;T&gt;::ListElement(T val)\n{\n    value = val;\n}\n\ntemplate&lt;class T&gt;\nListElement&lt;T&gt;::~ListElement()\n{\n}\n\ntemplate class ListElement&lt;int&gt;;\ntemplate class ListElement&lt;std::string&gt;;\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "mfc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1435780659, "post_id": 31170487, "comment_id": 50348784, "body": "VS 2015 is RC. File a defect report, and don&#39;t just blindly copy files over."}, {"owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1435780758, "post_id": 31170487, "comment_id": 50348852, "body": "I wasn&#39;t sure if it was a defect. Why is it bad to copy it over?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1435780838, "post_id": 31170487, "comment_id": 50348905, "body": "Because things change and the definitions in the older header files may no longer be valid or correct."}, {"owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "edited": false, "score": 0, "creation_date": 1435781763, "post_id": 31170487, "comment_id": 50349432, "body": "Better than not working at all"}], "answers": [{"tags": [], "owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "is_accepted": true, "score": 0, "last_activity_date": 1436276085, "creation_date": 1436276085, "answer_id": 31270072, "question_id": 31170487, "link": "https://stackoverflow.com/questions/31170487/afx-unsupported-in-windows-10-visual-studio-2015/31270072#31270072", "title": "Afx Unsupported in Windows 10/ Visual Studio 2015", "body": "<p>My mistake, MFC is an addon in VS, and I did not have all of it (only had ATL). I relaunched installer went to custom install and clicked MFC classes. I also installed the Multibyte MFC library from the Visual Studio Website. It is not available in the custom options.</p>\n"}], "owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 31270072, "answer_count": 1, "score": -1, "last_activity_date": 1436276085, "creation_date": 1435780495, "question_id": 31170487, "link": "https://stackoverflow.com/questions/31170487/afx-unsupported-in-windows-10-visual-studio-2015", "title": "Afx Unsupported in Windows 10/ Visual Studio 2015", "body": "<p>I retargeted an MFC solution from Visual Studio 2013 to Visual Studio 2015, but when I built it I received an error telling me the compiler could not find afxdisp.h normally found under VC->atlmfc->include . -- Of course I copied the file from the VS 2013 location, but I was wondering why it was missing? Does anyone know? </p>\n"}, {"tags": ["c++", "visual-studio", "virtual-memory"], "comments": [{"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 2, "creation_date": 1435781031, "post_id": 31170430, "comment_id": 50349024, "body": "What Add-Ons, Extensions or Plug Ins are you running.  I used to have the same problem until I uninstalled all Plug Ins.  Now it rarely causes trouble."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1435782139, "post_id": 31170430, "comment_id": 50349620, "body": "Do you really need all 167 projects to be loaded? If not, try the &quot;Funnel&quot; extension: <a href=\"https://visualstudiogallery.msdn.microsoft.com/5396fa4a-d638-471b-ac3d-671ccd2ea369\" rel=\"nofollow noreferrer\">visualstudiogallery.msdn.microsoft.com/&hellip;</a>"}, {"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1435791447, "post_id": 31170430, "comment_id": 50353736, "body": "VS can certainly use a lot a VM, especially with your large number of projects.  Try removing all extensions.  Also, make sure your machine has 8GB of RAM, so VS is not fighting with the OS for RAM.  And an SSD might help with restarting.  Your screenshots show that you&#39;re using Win7, good that it&#39;s not XP.  You should use perfmon and windows&#39; performance counters instead."}, {"owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "reply_to_user": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1435864125, "post_id": 31170430, "comment_id": 50390278, "body": "@ChrisO I already removed all extensions, I have 32 GB of RAM and a SSD.  What relevant information would perfmon and performance-counters provide that VMMap doesn&#39;t provide?"}, {"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 1, "creation_date": 1443544501, "post_id": 31170430, "comment_id": 53532359, "body": "@JDiMatteo, sorry just noticed your question.  The Committed amount shown in VMMap is the most important counter for a 32-bit process.  So my mistake, VMMap is already showing the relevant information (was thinking of Task Manager for some reason).  As you&#39;ve already determined, the app gets unstable the closer you get to 3.8GB total Committed.  Another option is to attach an empty instance of VS to your running app to be debugged.  That way the &quot;large&quot; solution won&#39;t be loaded, and you can still get the full debugging experience."}], "answers": [{"comments": [{"owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "edited": false, "score": 0, "creation_date": 1447260631, "post_id": 31394693, "comment_id": 55084401, "body": "I submitted a Microsoft Technical Support incident with case number 115101513270502.  Microsoft helped me come up with these strategies."}], "tags": [], "owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "is_accepted": true, "score": 6, "last_activity_date": 1449690505, "last_edit_date": 1449690505, "creation_date": 1436827132, "answer_id": 31394693, "question_id": 31170430, "link": "https://stackoverflow.com/questions/31170430/how-to-get-visual-studio-to-stay-within-4gb-virtual-address-space/31394693#31394693", "title": "How to Get Visual Studio To Stay Within 4GB Virtual Address Space", "body": "<p>It is possible to reliably get Visual Studio to stay within it's 4GB of virtual memory, but you might have to experiment with one or more of the following strategies while measuring devenv.exe memory usage with <a href=\"https://technet.microsoft.com/en-us/library/dd535533.aspx\" rel=\"nofollow\">VMMap</a>:</p>\n\n<ol>\n<li>remove plugins and extensions from Tools > Add-in Manager and Tools > Extensions (<a href=\"https://github.com/tsasioglu/Total-Uninstaller\" rel=\"nofollow\">https://github.com/tsasioglu/Total-Uninstaller</a> might be helpful) and/or run in <a href=\"http://blogs.msdn.com/b/zainnab/archive/2010/11/15/visual-studio-safe-mode-vstipenv0050.aspx\" rel=\"nofollow\">Safe Mode</a></li>\n<li>periodically (e.g. monthly) delete your .sdf and .suo files (while Visual Studio is closed) so they can be recreated (instead of deleting, consider just renaming in case you decide you want them back, as you may loose some configuration settings)</li>\n<li>If you are loading a lot of symbols (you can count \"Symbols loaded\" in the VS Output window), you can <a href=\"https://msdn.microsoft.com/library/x54fht41(v=vs.100).aspx\" rel=\"nofollow\">disable this</a> with Tools > Options > Debugging > Symbols: \"Only specified modules\", then click \"Specify modules\" and uncheck \"Always load symbols located next to modules\".  You can load additional symbols while debugging with Debug > Windows > Modules.</li>\n<li>Unload projects from large solutions with <a href=\"https://visualstudiogallery.msdn.microsoft.com/5396fa4a-d638-471b-ac3d-671ccd2ea369\" rel=\"nofollow\">Funnel</a> or <a href=\"https://msdn.microsoft.com/en-us/library/kz8aa2es(v=vs.100).aspx\" rel=\"nofollow\">Solution Folders</a></li>\n<li>If all else fails, run two different Visual Studio instances: the first has the large solution loaded but is not used to debug (e.g. Debug > Start without Debugging), and the second has no solution loaded but is attached to the running process for debugging.  (Thanks ChrisO for this suggestion.)</li>\n<li>If you really can't get Visual Studio to work, try <a href=\"https://msdn.microsoft.com/en-us/windows/hardware/dn913721.aspx\" rel=\"nofollow\">WinDbg</a> which is used by Microsoft developers and is 64-bit (unlike Visual Studio).</li>\n</ol>\n\n<p>I have observed disabling most symbol loading <strong>reducing devenv memory usage by 1.7 GB</strong> and deleting my .suo and .sdf file reducing memory usage by an additional 600 MB.  This reduction in memory usage made Visual Studio go from crashing multiple times a day to running stable with the same instance running for multiple days, sometimes weeks.</p>\n\n<p>In addition to reducing memory usage, these strategies will likely <strong>significantly speed up Visual Studio</strong>.</p>\n"}], "owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2344, "favorite_count": 2, "accepted_answer_id": 31394693, "answer_count": 1, "score": 9, "last_activity_date": 1580924676, "creation_date": 1435780282, "last_edit_date": 1435786910, "question_id": 31170430, "link": "https://stackoverflow.com/questions/31170430/how-to-get-visual-studio-to-stay-within-4gb-virtual-address-space", "title": "How to Get Visual Studio To Stay Within 4GB Virtual Address Space", "body": "<p>The Visual Studio devenv.exe process is 32-bit (<a href=\"http://blogs.msdn.com/b/ricom/archive/2009/06/10/visual-studio-why-is-there-no-64-bit-version.aspx\" rel=\"noreferrer\" title=\"even when run on a 64-bit OS\">even when run on a 64-bit OS</a>), so it can't use more than 4GB of virtual memory.</p>\n\n<p>Unfortunately, when I am debugging my C++ application with Visual Studio I frequently run out of memory due to this 4GB limit.  For example, using <a href=\"https://technet.microsoft.com/en-us/library/dd535533.aspx\" rel=\"noreferrer\" title=\"VMMap\">VMMap</a>, below shows progression of my typical Visual Studio usage over a few hours leading to a crash.</p>\n\n<p>How can I get Visual Studio to use less memory so I stop wasting time with it crashing?</p>\n\n<p><strong>Is it typical for Visual Studio to use more than 3.5 GB virtual address space?</strong></p>\n\n<p>I am using Visual Studio 2012, but I assume this problem spans different VS versions, since Visual Studio 2015 still doesn't have a 64-bit version.</p>\n\n<p>(Note that VMMap reports \u201cFree\u201d as the remaining memory in the address space, up to 4GB for 32 bit processes, and 8TB for 64 bit processes on Windows.)</p>\n\n<p><img src=\"https://i.stack.imgur.com/ABM08.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/eGogJ.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/XSvDP.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/x3s5q.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/0MqQh.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/ZiUGT.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/TSxjq.png\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p>Things I've already tried:</p>\n\n<ul>\n<li>starting in safe mode</li>\n<li>removing all plugins and extensions so that nothing shows in Tools > Add-in Manager nor Tools > Extensions (<a href=\"https://github.com/tsasioglu/Total-Uninstaller\" rel=\"noreferrer\">https://github.com/tsasioglu/Total-Uninstaller</a> is helpful for this)</li>\n<li>deleting my .suo/.sdf files</li>\n<li>deleting my AppData/*/Microsoft/VisualStudio folders</li>\n<li>using Funnel and filtering out all but 3 projects</li>\n<li>removed all my \"Symbol file (.pdb) locations\" selections and chose \"Automatically load symbols for: \" \"Only specified modules\"</li>\n<li>selected \"Enable Just My Code\" for debugging</li>\n<li>disabling Intellisense (Tools -> Options -> Text Editor -> C/C++ -> Advanced -> Disable IntelliSense)</li>\n</ul>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 4695394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75268cada6fa92af6fa9eb3f2da0d109?s=128&d=identicon&r=PG&f=1", "display_name": "kiviak", "link": "https://stackoverflow.com/users/4695394/kiviak"}, "is_accepted": false, "score": 1, "last_activity_date": 1435780439, "creation_date": 1435780439, "answer_id": 31170469, "question_id": 31170200, "link": "https://stackoverflow.com/questions/31170200/best-opencv-version-to-use-for-face-and-eye-detection/31170469#31170469", "title": "Best opencv version to use for face and eye detection", "body": "<p>you can use the new one,i find it has trained a lot of classifers,whice are in <code>opencv/data/haarcascades/</code>,so you can use it directly or train a new one by yourself</p>\n"}, {"tags": [], "owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "is_accepted": false, "score": 1, "last_activity_date": 1435780695, "creation_date": 1435780695, "answer_id": 31170541, "question_id": 31170200, "link": "https://stackoverflow.com/questions/31170200/best-opencv-version-to-use-for-face-and-eye-detection/31170541#31170541", "title": "Best opencv version to use for face and eye detection", "body": "<p>If you are a newbie I would recommend using <code>OpenCV 2.4.x</code> as there are quite a lot of resources on the internet using that version. <code>OpenCV 3</code> is new and you may not be able to find online help for it as easily as you can get for <code>2.4.x</code></p>\n"}], "owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1435780695, "creation_date": 1435779500, "question_id": 31170200, "link": "https://stackoverflow.com/questions/31170200/best-opencv-version-to-use-for-face-and-eye-detection", "title": "Best opencv version to use for face and eye detection", "body": "<p>i'm a newbie and i want to know what version of opencv should i use for face and eye detection .\ni have found that since opencv 3.0.0 it offers a new api in c++ so there is more speed especially in multiple cores and more non faces can be detected but i want to use it also in detection of eye direction\nthanks a lot </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 677, "user_id": 1007890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9cbb4999927a443e5dda6e34a742311?s=128&d=identicon&r=PG", "display_name": "AdrianEddy", "link": "https://stackoverflow.com/users/1007890/adrianeddy"}, "edited": false, "score": 1, "creation_date": 1435781179, "post_id": 31170185, "comment_id": 50349108, "body": "Do you have <code>sqldrivers</code> directory with appropriate .dll for PostgreSQL? It can be found in <code>plugins</code> directory of your Qt installation. You can also try <a href=\"https://technet.microsoft.com/en-us/library/bb896647.aspx\" rel=\"nofollow noreferrer\">DebugView</a> to see what&#39;s wrong."}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 677, "user_id": 1007890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9cbb4999927a443e5dda6e34a742311?s=128&d=identicon&r=PG", "display_name": "AdrianEddy", "link": "https://stackoverflow.com/users/1007890/adrianeddy"}, "edited": false, "score": 0, "creation_date": 1435781737, "post_id": 31170185, "comment_id": 50349408, "body": "Thanks. I already added the sqldrivers. But I&#180;ll try DebugView out :)"}, {"owner": {"reputation": 677, "user_id": 1007890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9cbb4999927a443e5dda6e34a742311?s=128&d=identicon&r=PG", "display_name": "AdrianEddy", "link": "https://stackoverflow.com/users/1007890/adrianeddy"}, "edited": false, "score": 0, "creation_date": 1435799380, "post_id": 31170185, "comment_id": 50355689, "body": "You could also set environment variable <code>QT_DEBUG_PLUGINS=1</code> and check output in DebugView"}], "answers": [{"tags": [], "owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "is_accepted": true, "score": 1, "last_activity_date": 1435891488, "creation_date": 1435891488, "answer_id": 31197647, "question_id": 31170185, "link": "https://stackoverflow.com/questions/31170185/qt%c2%b4s-generated-exe-cannot-connect-to-postrgresql-database/31197647#31197647", "title": "QT&#180;s generated exe cannot connect to PostrgreSQL Database", "body": "<p>I got it working. Just in case anyone comes across the same problem. I solved it by adding all the contents of the bin folder in the PostgreSQL installation Directory to my release folder of the QT project.</p>\n"}], "owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 31197647, "answer_count": 1, "score": -1, "last_activity_date": 1435891488, "creation_date": 1435779452, "last_edit_date": 1435782196, "question_id": 31170185, "link": "https://stackoverflow.com/questions/31170185/qt%c2%b4s-generated-exe-cannot-connect-to-postrgresql-database", "title": "QT&#180;s generated exe cannot connect to PostrgreSQL Database", "body": "<p>I\u00b4m developing an application in QT 5.4 that connects to a Postrgre DB. When Running the application in release mode inside QT Creator the connection works fine. However, when I add the dependencies of the .exe and open it I always get a connection error. I added the QT5Sql.dll to the release directory and all the other needed dependencies according to dependency walker.</p>\n\n<p>Can anyone tell me what I\u00b4m doing wrong?</p>\n\n<pre><code>ui-&gt;setupUi(this);\nfinishedGame = false;\nui-&gt;detener-&gt;setVisible(false);\nui-&gt;labelEnCurso-&gt;setVisible(false);\ndb = QSqlDatabase::addDatabase(\"QPSQL\");\ndb.setHostName(\"localhost\");\ndb.setDatabaseName(\"MYDB\");\ndb.setUserName(\"USER\");\ndb.setPassword(\"PASS\");\nbool ok = db.open();\nif(!ok){\n\n    QMessageBox msgBox;\n    msgBox.setText(\"Connection ERROR\");\n    msgBox.exec();\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I checked the .exe with DebugView and this is the error I get:</p>\n\n<pre><code>[10876] QSqlDatabase: QPSQL driver not loaded\n[10876] QSqlDatabase: available drivers: QSQLITE QMYSQL QMYSQL3 QODBC QODBC3 QPSQL QPSQL7\n</code></pre>\n\n<p>I have both the libpq.dll and the qsqlpsql.dll on my release folder, however for some reason the app cannot load the appropriate drivers although it is saying it\u00b4s available.</p>\n"}, {"tags": ["c++", "multithreading", "class", "c++11", "abstraction"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 8, "creation_date": 1435779381, "post_id": 31170127, "comment_id": 50348076, "body": "How about <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\"><code>std::thread</code></a>?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1435779564, "post_id": 31170127, "comment_id": 50348177, "body": "Not sure what you were searching for.  When I googled &quot;c++11 thread&quot;, the first hit was <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread</a>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1435779577, "post_id": 31170127, "comment_id": 50348186, "body": "@CaptainObvlious, Can&#39;t stop it (at least without going through the handle). That&#39;s not to say it&#39;s a great idea to stop a thread without it finishing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435779675, "post_id": 31170127, "comment_id": 50348237, "body": "You may simplify a thread as a special invocation of a function - in other words, I would not make a &#39;thread class&#39;. However you might have a mutex protected data structure."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1435780223, "post_id": 31170127, "comment_id": 50348536, "body": "@chris Well you can&#39;t <i>force</i> stop it but you can certainly add mechanisms to handle termination just like you would on any other platform that doesn&#39;t support force stopping threads"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435781326, "post_id": 31170127, "comment_id": 50349196, "body": "@CaptainObvlious, Yep, that&#39;s preferable in most cases."}, {"owner": {"reputation": 1280, "user_id": 4130356, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qG0gk.jpg?s=128&g=1", "display_name": "mbed_dev", "link": "https://stackoverflow.com/users/4130356/mbed-dev"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435781896, "post_id": 31170127, "comment_id": 50349493, "body": "@CaptainObvlious I am already aware of <code>std::thread</code> :) I&#39;ve added some C++-pseudo-code for explaining my question in a better way. My intention is to abstract the calls using <code>std::thread</code> to not deal with them, by simply starting a thread with <code>threadobject.Start(); ...</code>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1435782395, "post_id": 31170127, "comment_id": 50349752, "body": "Not a good idea really. You&#39;ll either expose all the functionality supported by <code>std::thread</code> or hide enough details that not all useful functionality provided by <code>std::thread</code> will be available. There are far more benefits to directly using something in the <i>Standard</i> library than forcing developers to deal with yet another thread class that is artificially limited."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435782959, "post_id": 31170127, "comment_id": 50350065, "body": "About <i>for Windows the return value is WINAPI</i>, the return type is <code>DWORD</code>. <code>WINAPI</code> is simply the required calling convention of the callback."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1435783215, "post_id": 31170127, "comment_id": 50350201, "body": "Why when std::thread provides that cross platform library. And underneath the hood almost certainly uses the platform specific threading libraries. With Lambdas converting old functions to std::thread should be trivial."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1435788341, "post_id": 31170127, "comment_id": 50352741, "body": "If don&#39;t want to deal with threads use something like TBB (<a href=\"https://www.threadingbuildingblocks.org\" rel=\"nofollow noreferrer\">threadingbuildingblocks.org</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 3, "last_activity_date": 1435779614, "creation_date": 1435779614, "answer_id": 31170239, "question_id": 31170127, "link": "https://stackoverflow.com/questions/31170127/thread-base-class-using-c11/31170239#31170239", "title": "Thread base class using C++11", "body": "<p>Look at <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow\">std::thread</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nvoid function()\n{\n    std::cout &lt;&lt; \"In Thread\\n\";\n}\n\nint main()\n{\n    std::thread x(function);\n    // You can not let the object x be destroyed\n    // until the thread of execution has finished.\n    // So best to join the thread here.\n    x.join();\n}\n</code></pre>\n\n<p>All the threading support you need can be found <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1280, "user_id": 4130356, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qG0gk.jpg?s=128&g=1", "display_name": "mbed_dev", "link": "https://stackoverflow.com/users/4130356/mbed-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 0, "accepted_answer_id": 31170239, "answer_count": 1, "score": 2, "last_activity_date": 1435781712, "creation_date": 1435779274, "last_edit_date": 1435781712, "question_id": 31170127, "link": "https://stackoverflow.com/questions/31170127/thread-base-class-using-c11", "title": "Thread base class using C++11", "body": "<p>Since I am new to C++11 I am looking for a proper implemtnation of a thread base class using the C++11 multithreaded features with passing arguments to the class, starting and stoping the thread... .\nSo something like this one:\n<a href=\"http://www.codeproject.com/Articles/21114/Creating-a-C-Thread-Class\" rel=\"nofollow\">http://www.codeproject.com/Articles/21114/Creating-a-C-Thread-Class</a>\nbut with C++11 to gain OS-independence.</p>\n\n<p>I've googled for it but haven't found anything useful.\nPerhaps someone is familiar with a good open-source implementation?</p>\n\n<p><strong>EDIT</strong>\nTo explain my question precisely:\nI am already aware of <code>std::thread</code>, but my intention respectively goal is to use a wrapper-class for <code>std::thread</code> to not deal with it heavily. I'm currently using the class-structure below (since 1-year). But I'm stucked respectively bounded to the Windows-APIs which is not what I want.</p>\n\n<pre><code>class ThreadBase {\npublic:\n    ThreadBase();\n    virtual ~ThreadBase();\n\n    // this is the thread run function, the \"concrete\" threads implement this method\n    virtual int Run() = 0;\n\n    // controlling thread behaviour, Stop(), Resume()  is not that necessary (I implemented it, beacuse the API gives me the opportunity)\n    virtual void Start() const;\n    virtual void Stop() const;\n\n    // returns a duplicated handle of the thread\n    virtual GetDuplicateHdl() const; //does std::thread give me something similar to that?\n\nprotected:\n        // return the internal thread handle for derived classes only\n    virtual GetThreadHdl() const;\n    //...block copy constructor and assignment operator\n\nprivate:\n        // the thread function\n    void ThreadFunc(void * Param); //for Windows the return value is WINAPI\n    //THandleType? ThreadHdl;\n    unsigned long ThreadId;\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv", "ubuntu"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5070903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/29ab1e319e03481356a70e994762e2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jarl Zarl", "link": "https://stackoverflow.com/users/5070903/jarl-zarl"}, "edited": false, "score": 0, "creation_date": 1435841152, "post_id": 31180352, "comment_id": 50375285, "body": "Commenting out the cout line still results in the Illegal Instruction, also based on my experience in c++ wouldn&#39;t I have gotten a more indepth error message explaining the type error and where it occurred?"}, {"owner": {"reputation": 46, "user_id": 4972914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q-Gr4Ptrib8/AAAAAAAAAAI/AAAAAAAAARk/m3COf1e3eV0/photo.jpg?sz=128", "display_name": "Yasin Yildirim", "link": "https://stackoverflow.com/users/4972914/yasin-yildirim"}, "reply_to_user": {"reputation": 45, "user_id": 5070903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/29ab1e319e03481356a70e994762e2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jarl Zarl", "link": "https://stackoverflow.com/users/5070903/jarl-zarl"}, "edited": false, "score": 0, "creation_date": 1435843788, "post_id": 31180352, "comment_id": 50377259, "body": "It compiles safely on my PC when commenting cout line. Also your code gives a compile error when i tried:   test.cpp:12:22: error: no match for \u2018operator&lt;&lt;\u2019 in \u2018std::cout &lt;&lt; cv::Mat::MSize::operator()() const()\u2019"}, {"owner": {"reputation": 46, "user_id": 4972914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q-Gr4Ptrib8/AAAAAAAAAAI/AAAAAAAAARk/m3COf1e3eV0/photo.jpg?sz=128", "display_name": "Yasin Yildirim", "link": "https://stackoverflow.com/users/4972914/yasin-yildirim"}, "reply_to_user": {"reputation": 45, "user_id": 5070903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/29ab1e319e03481356a70e994762e2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jarl Zarl", "link": "https://stackoverflow.com/users/5070903/jarl-zarl"}, "edited": false, "score": 0, "creation_date": 1435846449, "post_id": 31180352, "comment_id": 50379286, "body": "If you get error at runtime, it might be related to input &#39;ppm&#39; image format. Did you try it with more common formats like jpeg or png?"}], "tags": [], "owner": {"reputation": 46, "user_id": 4972914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q-Gr4Ptrib8/AAAAAAAAAAI/AAAAAAAAARk/m3COf1e3eV0/photo.jpg?sz=128", "display_name": "Yasin Yildirim", "link": "https://stackoverflow.com/users/4972914/yasin-yildirim"}, "is_accepted": false, "score": 1, "last_activity_date": 1435828352, "last_edit_date": 1495541301, "creation_date": 1435828352, "answer_id": 31180352, "question_id": 31170060, "link": "https://stackoverflow.com/questions/31170060/ubuntu-illegal-instruction-opencv/31180352#31180352", "title": "Ubuntu Illegal Instruction opencv", "body": "<p>You can't cout cv::Size directly without overloading '&lt;&lt;' operator for cv::Size. Instead you can get rows and columns from cv::Size and multiply them in order to get total size of the image:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n    cv::Mat img;\n    img = cv::imread(\"RO.ppm\");\n    cv::Size img_size = img.size();\n\n    int cols =  img_size.width;\n    int rows =  img_size.height;\n    cout &lt;&lt; \"image size: \" &lt;&lt; rows*cols &lt;&lt; endl;\n\n\n    return 0;\n }\n</code></pre>\n\n<p>See this similar <a href=\"https://stackoverflow.com/questions/14028193/size-of-matrix-opencv\">post</a> for usage of cv::Size.</p>\n"}], "owner": {"reputation": 45, "user_id": 5070903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/29ab1e319e03481356a70e994762e2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jarl Zarl", "link": "https://stackoverflow.com/users/5070903/jarl-zarl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473503126, "creation_date": 1435779016, "last_edit_date": 1473503126, "question_id": 31170060, "link": "https://stackoverflow.com/questions/31170060/ubuntu-illegal-instruction-opencv", "title": "Ubuntu Illegal Instruction opencv", "body": "<p>I recently installed opencv on Ubuntu 12.04.5 from the repository using this command.</p>\n\n<pre><code>sudo apt-get install libopencv-dev python-opencv\n</code></pre>\n\n<p>When I try to run the following code to confirm that it works properly I get an Illegal instruction (it compiled fine).</p>\n\n<pre><code>#include \"opencv2/core/core.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n    cv::Mat img;\n    img = cv::imread(\"RO.ppm\");\n    cout &lt;&lt; img.size() &lt;&lt; endl;\n    return 0;\n }\n</code></pre>\n\n<p>I compiled using this command (due to undefined reference errors).</p>\n\n<pre><code>g++ -o test test.cpp $(pkg-config opencv --cflags --libs)\n</code></pre>\n\n<p>Update: Commenting out the cout line does not change the result and I've triple checked that RO.ppm exists in this directory (even if it didn't imread doesn't throw an error with illegal or not found input in my experience). I guess my question is two-fold what causes illegal instruction errors and how do I fix it?</p>\n"}, {"tags": ["c++", "c++11", "compiler-errors", "g++", "instance-variables"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1435779109, "post_id": 31169974, "comment_id": 50347916, "body": "Not sure what you expect a vector of references to do"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1435779955, "post_id": 31169974, "comment_id": 50348393, "body": "By the way - if you&#39;re getting build spew that overruns your terminal&#39;s capability to scrollback, then create a build log.  This command will let you see the progress on the terminal as well as capture all messages to a log file: <code>command-used-to-build 2&gt;&amp;1 | tee build-console-output.log</code>.  Now you can open the log file in an editor and see everything that happened in the build."}], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "edited": false, "score": 0, "creation_date": 1435779188, "post_id": 31170023, "comment_id": 50347962, "body": "Thanks. I changed std::vector&lt;H&amp;&gt; to std::vector&lt;H&gt; and it all works just fine."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1435779933, "post_id": 31170023, "comment_id": 50348385, "body": "Or <code>std::reference_wrapper&lt;H&gt;</code> if you want something more &quot;referencey&quot; than pointers."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "edited": false, "score": 0, "creation_date": 1435780749, "post_id": 31170023, "comment_id": 50348841, "body": "@QuantumFool it is polite to select a correct, and especially a helpful answer."}, {"owner": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1435782779, "post_id": 31170023, "comment_id": 50349963, "body": "@GlennTeitelbaum What do you mean by &quot;select&quot;? I&#39;d be happy to do something to promote this answer - it was very helpful."}, {"owner": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435782928, "post_id": 31170023, "comment_id": 50350054, "body": "@Barry Thanks for the suggestion! I hadn&#39;t heard of those. I actually got the code to work in a way that I could ditch the references all together, but I&#39;ll remember that if I have this problem again in the future :)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "edited": false, "score": 0, "creation_date": 1435783398, "post_id": 31170023, "comment_id": 50350303, "body": "@QuantumFool See <a href=\"http://stackoverflow.com/tour\">the tour</a>, specifically the section on voting and accepting answers. Also, you even get a badge for reading it and badges are cool."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 5, "last_activity_date": 1435778888, "creation_date": 1435778888, "answer_id": 31170023, "question_id": 31169974, "link": "https://stackoverflow.com/questions/31169974/adding-this-instance-variable-to-the-header-of-a-c11-file-drives-the-compiler/31170023#31170023", "title": "Adding this instance variable to the header of a C++11 file drives the compiler up the wall. Why?", "body": "<p>It has a problem with you keeping a vector of non-const references</p>\n\n<pre><code>std::vector&lt;H&amp;&gt; hs;\n</code></pre>\n\n<p>I would suggest maintaining either a vector of values or pointers, depending on if you want to own these <code>H</code> instances or just reference them.</p>\n\n<pre><code>std::vector&lt;H&gt; hs;\nstd::vector&lt;H*&gt; hs;\n</code></pre>\n"}], "owner": {"reputation": 589, "user_id": 4163963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9617669977aaf426c10dcc6b6a0d7694?s=128&d=identicon&r=PG&f=1", "display_name": "QuantumFool", "link": "https://stackoverflow.com/users/4163963/quantumfool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 31170023, "answer_count": 1, "score": 2, "last_activity_date": 1435780220, "creation_date": 1435778742, "last_edit_date": 1435780220, "question_id": 31169974, "link": "https://stackoverflow.com/questions/31169974/adding-this-instance-variable-to-the-header-of-a-c11-file-drives-the-compiler", "title": "Adding this instance variable to the header of a C++11 file drives the compiler up the wall. Why?", "body": "<p>I've been trying to get my artificial intelligence program (written in C++11) to stop spewing out error messages larger than my Terminal will record. I've withered away methods one at a time until the message went away, and have hence found the precise line which makes the computer go bonkers. Here's the pertinent part of my code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;math.h&gt;\n\nclass H\n{\n    public:\n        H(int);\n        int get_val();\n    private:\n        int val;\n};\n\nclass Hvote\n{\n    public:\n        Hvote() : error(1.0) { }\n        std::vector&lt;H&amp;&gt; hs;\n        double error;\n};\n\nint main()\n{\n    Hvote hvote;\n    return 0;\n}\n</code></pre>\n\n<p>To me, it all looks reasonable. However, the compiler (g++) disagrees. The error messages are so long that my Terminal doesn't even bother saving the beginning, so I don't know their true length. However, they're pretty repetitive. The last page, for instance, reads:</p>\n\n<pre><code>/usr/include/c++/4.8/bits/stl_vector.h: In instantiation of \u2018class std::vector&lt;H&amp;&gt;\u2019:\nhvote.h:16:25:   required from here\n/usr/include/c++/4.8/bits/stl_vector.h:237:20: error: no members matching \u2018std::vector&lt;H&amp;&gt;::_Base {aka std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;}::_M_allocate\u2019 in \u2018std::vector&lt;H&amp;&gt;::_Base {aka struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;}\u2019\n   using _Base::_M_allocate;\n                ^\n/usr/include/c++/4.8/bits/stl_vector.h:238:20: error: no members matching \u2018std::vector&lt;H&amp;&gt;::_Base {aka std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;}::_M_deallocate\u2019 in \u2018std::vector&lt;H&amp;&gt;::_Base {aka struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;}\u2019\n   using _Base::_M_deallocate;\n                ^\n/usr/include/c++/4.8/bits/stl_vector.h:878:7: error: forming pointer to reference type \u2018H&amp;\u2019\n   data() _GLIBCXX_NOEXCEPT\n   ^\n/usr/include/c++/4.8/bits/stl_vector.h:886:7: error: forming pointer to reference type \u2018H&amp;\u2019\n   data() const _GLIBCXX_NOEXCEPT\n   ^\n/usr/include/c++/4.8/bits/stl_vector.h:919:7: error: \u2018void std::vector&lt;_Tp, _Alloc&gt;::push_back(std::vector&lt;_Tp, _Alloc&gt;::value_type&amp;&amp;) [with _Tp = H&amp;; _Alloc = std::allocator&lt;H&amp;&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = H&amp;]\u2019 cannot be overloaded\n   push_back(value_type&amp;&amp; __x)\n   ^\n/usr/include/c++/4.8/bits/stl_vector.h:901:7: error: with \u2018void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = H&amp;; _Alloc = std::allocator&lt;H&amp;&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = H&amp;]\u2019\n   push_back(const value_type&amp; __x)\n   ^\n/usr/include/c++/4.8/bits/stl_vector.h: In instantiation of \u2018std::vector&lt;_Tp, _Alloc&gt;::~vector() [with _Tp = H&amp;; _Alloc = std::allocator&lt;H&amp;&gt;]\u2019:\nhvote.h:10:7:   required from here\n/usr/include/c++/4.8/bits/stl_vector.h:416:30: error: \u2018struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;::_Vector_impl\u2019 has no member named \u2018_M_start\u2019\n     _M_get_Tp_allocator()); }\n                          ^\n/usr/include/c++/4.8/bits/stl_vector.h:416:30: error: \u2018struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;::_Vector_impl\u2019 has no member named \u2018_M_finish\u2019\n/usr/include/c++/4.8/bits/stl_vector.h: In instantiation of \u2018std::_Vector_base&lt;_Tp, _Alloc&gt;::~_Vector_base() [with _Tp = H&amp;; _Alloc = std::allocator&lt;H&amp;&gt;]\u2019:\n/usr/include/c++/4.8/bits/stl_vector.h:416:33:   required from \u2018std::vector&lt;_Tp, _Alloc&gt;::~vector() [with _Tp = H&amp;; _Alloc = std::allocator&lt;H&amp;&gt;]\u2019\nhvote.h:10:7:   required from here\n/usr/include/c++/4.8/bits/stl_vector.h:161:33: error: \u2018struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;::_Vector_impl\u2019 has no member named \u2018_M_start\u2019\n     - this-&gt;_M_impl._M_start); }\n                             ^\n/usr/include/c++/4.8/bits/stl_vector.h:161:9: error: \u2018struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;::_Vector_impl\u2019 has no member named \u2018_M_start\u2019\n     - this-&gt;_M_impl._M_start); }\n     ^\n/usr/include/c++/4.8/bits/stl_vector.h:161:9: error: \u2018struct std::_Vector_base&lt;H&amp;, std::allocator&lt;H&amp;&gt; &gt;::_Vector_impl\u2019 has no member named \u2018_M_end_of_storage\u2019\n/usr/include/c++/4.8/bits/stl_vector.h:161:33: error: \u2018_M_deallocate\u2019 was not declared in this scope\n     - this-&gt;_M_impl._M_start); }\n                             ^\n</code></pre>\n\n<p>However, there's only one little change I need to make so that this all goes away. In <code>hvote.h</code>, just delete the line, <code>std::vector&lt;H&amp;&gt; hs;</code>. Now everything works perfectly! What's the problem with that line? (In my not-reduced and much longer original program, <code>hs</code> is a variable I need, as opposed to here where I've paired away all the methods of <code>hvote</code> that use it)<br>\nThanks!</p>\n"}, {"tags": ["c++", "recursion"], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 5012832, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf924f199518175cd758cf711c07a56b?s=128&d=identicon&r=PG&f=1", "display_name": "trinityalps", "link": "https://stackoverflow.com/users/5012832/trinityalps"}, "is_accepted": false, "score": 0, "last_activity_date": 1435778884, "creation_date": 1435778884, "answer_id": 31170021, "question_id": 31169950, "link": "https://stackoverflow.com/questions/31169950/why-do-i-get-two-return-values-here/31170021#31170021", "title": "Why do I get two return values here?", "body": "<p>I think it is because without the else in the second one the return statement isn't part of the if statement. So that means it will do the if loop and then return c independent of the if loop. </p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1435778979, "creation_date": 1435778979, "answer_id": 31170051, "question_id": 31169950, "link": "https://stackoverflow.com/questions/31169950/why-do-i-get-two-return-values-here/31170051#31170051", "title": "Why do I get two return values here?", "body": "<p>The first function exhibits undefined behavior since you don't have <code>return</code> statements in all branches of execution.</p>\n\n<p>The function needs to be:</p>\n\n<pre><code>int recurse(int c){\n   if(c&lt;10){\n      return recurse(c+1); // Add return\n   }else{\n      return(c);\n   } \n}\n</code></pre>\n\n<p>The second function returns <code>c</code> no matter what happens in the <code>if</code> block.</p>\n\n<pre><code>int recurse(int c){\n   if(c&lt;10){\n      return recurse(c+1);  // Add return\n   }\n   return(c);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1435779342, "last_edit_date": 1435779342, "creation_date": 1435778985, "answer_id": 31170053, "question_id": 31169950, "link": "https://stackoverflow.com/questions/31169950/why-do-i-get-two-return-values-here/31170053#31170053", "title": "Why do I get two return values here?", "body": "<p>In fact this function</p>\n\n<pre><code>int recurse(int c){\n//printf(\"%d\", c);\nif(c&lt;10){\n   recurse(c+1);\n}else{\nreturn(c);\n} \n}\n</code></pre>\n\n<p>has undefined behaviour because it returns nothing in case when <code>c &lt; 10</code></p>\n\n<p>This function</p>\n\n<pre><code>int recurse(int c){\n//printf(\"%d\", c);\nif(c&lt;10){\n   recurse(c+1);\n}\nreturn(c);\n} \n</code></pre>\n\n<p>always returns the value of argument <code>c</code> independently of the value itself. The function has unconditional return statement and returns its argument. As it was called with argument equal to 0 then it returned it.:)</p>\n\n<p>A correct function will look the following way</p>\n\n<pre><code>int recurse( int c )\n{\n    return c &lt; 10 ? recurse( c + 1 ) : c;\n}\n</code></pre>\n\n<p>Of course it could be written simpler without the recursion :)</p>\n\n<pre><code>int recurse( int c )\n{\n    return c &lt; 10 ? 10 : c;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4171083, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000396080611/picture?type=large", "display_name": "Paranshu Singhal", "link": "https://stackoverflow.com/users/4171083/paranshu-singhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1435779342, "creation_date": 1435778655, "question_id": 31169950, "link": "https://stackoverflow.com/questions/31169950/why-do-i-get-two-return-values-here", "title": "Why do I get two return values here?", "body": "<pre><code>int main(){\n\nint recurse(int);\nint a=recurse(0);\nprintf(\" return %d\",a);\n}\n</code></pre>\n\n<p>First one:</p>\n\n<pre><code> int recurse(int c){\n//printf(\"%d\", c);\nif(c&lt;10){\n   recurse(c+1);\n}else{\nreturn(c);\n} \n}\n</code></pre>\n\n<p>second one:</p>\n\n<pre><code>int recurse(int c){\n//printf(\"%d\", c);\nif(c&lt;10){\n   recurse(c+1);\n}\nreturn(c);\n} \n</code></pre>\n\n<p>In the first one..I get return value of 10 while in the second one I get a return value of 0. Why do I get two different values and why 0??</p>\n"}, {"tags": ["c++", "r", "bayesian", "stan"], "answers": [{"comments": [{"owner": {"reputation": 6241, "user_id": 722869, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1c5c02f9165e188ab81a53efabc062e2?s=128&d=identicon&r=PG", "display_name": "daj", "link": "https://stackoverflow.com/users/722869/daj"}, "edited": false, "score": 0, "creation_date": 1435884301, "post_id": 31174184, "comment_id": 50397893, "body": "can you guys show a simple example? i think there are others out there that aren&#39;t super familiar with the codebase but would be interested in this as an end user for modeling purposes."}, {"owner": {"reputation": 6241, "user_id": 722869, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1c5c02f9165e188ab81a53efabc062e2?s=128&d=identicon&r=PG", "display_name": "daj", "link": "https://stackoverflow.com/users/722869/daj"}, "edited": false, "score": 0, "creation_date": 1435917699, "post_id": 31174184, "comment_id": 50410306, "body": "thanks for the example - is there a C++ example where the LL is defined in C++ code (ie doing arbitrary calculations outside of stan-defined functions)?"}, {"owner": {"reputation": 4520, "user_id": 1762912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea49706fe47d5c2e8f3dd183d63ec42?s=128&d=identicon&r=PG", "display_name": "Ben Goodrich", "link": "https://stackoverflow.com/users/1762912/ben-goodrich"}, "reply_to_user": {"reputation": 6241, "user_id": 722869, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1c5c02f9165e188ab81a53efabc062e2?s=128&d=identicon&r=PG", "display_name": "daj", "link": "https://stackoverflow.com/users/722869/daj"}, "edited": false, "score": 0, "creation_date": 1435929688, "post_id": 31174184, "comment_id": 50417447, "body": "I don&#39;t think the C++ API is considered stable yet, although it is useable. Assuming that you could get the C++ code to compile without first parsing the Stan code, then writing a C++ function to manipulate the <code>lp__</code> symbol would be easy. If you just save the above example to a .stan file to your hard disk and then go to the directory where you downloaded CmdStan and type <code>make &#47;path&#47;to&#47;Stanfile</code> without the .stan extension then you can look at the generated C++ code in the same directory as your .stan file."}], "tags": [], "owner": {"reputation": 4520, "user_id": 1762912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea49706fe47d5c2e8f3dd183d63ec42?s=128&d=identicon&r=PG", "display_name": "Ben Goodrich", "link": "https://stackoverflow.com/users/1762912/ben-goodrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1435901802, "last_edit_date": 1435901802, "creation_date": 1435799713, "answer_id": 31174184, "question_id": 31169927, "link": "https://stackoverflow.com/questions/31169927/is-it-possible-to-define-a-stan-model-in-terms-of-an-arbitrary-posterior-functio/31174184#31174184", "title": "Is it possible to define a Stan model in terms of an arbitrary posterior function?", "body": "<p>In a manner of speaking, defining an arbitrary posterior distribution is all you can do in the Stan language. But if you are referring specifically to a posterior distribution that is not a composition of distributions that are already defined in Stan, then you can use the <code>increment_log_prob</code> function to add terms to the log-posterior, whether they are part of the likelihood of the data or are priors on parameters. See the chapters of the user manual entitled \"Custom Probability Functions\" and \"User-Defined Functions\".</p>\n\n<p>There is an <a href=\"https://groups.google.com/d/msg/stan-users/4gv3fNCqSNk/4dwmJj1YwbsJ\" rel=\"nofollow\">example</a> under the FAQ at the stan-users Google group, although it utilizes the deprecated syntax of manipulating the <code>lp__</code> symbol directly instead of using the <code>increment_log_prob</code> function to do the same thing. Nowdays the .stan file would be</p>\n\n<pre><code>data {\n  int&lt;lower=1&gt; N;\n  real&lt;lower=0,upper=1&gt; x[N];\n}\ntransformed data {\n  real sum_log_x; // calculate this constant only once\n  sum_log_x &lt;- 0.0;\n  for (i in 1:N)\n    sum_log_x &lt;- sum_log_x + log(x[i]);\n}\nparameters {\n  real&lt;lower=0&gt; a;\n  real&lt;lower=0&gt; b;\n}\nmodel {\n  real summands[N];\n  // put priors on a and b here if you want\n\n  // log-likelihood\n  increment_log_prob(N * (log(a) + log(b)) + (a - 1) * sum_log_x);\n  for (i in 1:N) {\n    summands[i] &lt;- (b - 1) * log1m(pow(x[i],a)); // log1m(y) := log(1 - y)\n  }\n  increment_log_prob(summands);\n}\n</code></pre>\n"}], "owner": {"reputation": 6241, "user_id": 722869, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1c5c02f9165e188ab81a53efabc062e2?s=128&d=identicon&r=PG", "display_name": "daj", "link": "https://stackoverflow.com/users/722869/daj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 31174184, "answer_count": 1, "score": 1, "last_activity_date": 1435901802, "creation_date": 1435778560, "question_id": 31169927, "link": "https://stackoverflow.com/questions/31169927/is-it-possible-to-define-a-stan-model-in-terms-of-an-arbitrary-posterior-functio", "title": "Is it possible to define a Stan model in terms of an arbitrary posterior function?", "body": "<p>Is it possible to define a Stan model in terms of an arbitrary posterior function? </p>\n\n<p>I'm thinking something like MCMCPack's MCMCmetrop1R() functionality where the user defines an arbitrary posterior function. I would be fine with digging into the C++ API to do this if there's a good example of how to go about it.</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 59971, "user_id": 1835379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/i63aC.gif?s=128&g=1", "display_name": "Cerbrus", "link": "https://stackoverflow.com/users/1835379/cerbrus"}, "edited": false, "score": 0, "creation_date": 1435778673, "post_id": 31169924, "comment_id": 50347693, "body": "Waaaaaay too broad, mate. Even if you narrow it down to a single language, I&#39;m not sure if this question is suitable for SO."}, {"owner": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "reply_to_user": {"reputation": 59971, "user_id": 1835379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/i63aC.gif?s=128&g=1", "display_name": "Cerbrus", "link": "https://stackoverflow.com/users/1835379/cerbrus"}, "edited": false, "score": 0, "creation_date": 1435778787, "post_id": 31169924, "comment_id": 50347746, "body": "I&#39;m getting very tired of having every question I post on SO get downvoted, what has happened to this community? I think it&#39;s a very reasonable question, how do you create a 2-bit structure in C++? Other languages are simply bonus."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1435778825, "post_id": 31169924, "comment_id": 50347765, "body": "Std::bitset perhaps. Stores bits and might be a good starting point"}, {"owner": {"reputation": 59971, "user_id": 1835379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/i63aC.gif?s=128&g=1", "display_name": "Cerbrus", "link": "https://stackoverflow.com/users/1835379/cerbrus"}, "edited": false, "score": 0, "creation_date": 1435778839, "post_id": 31169924, "comment_id": 50347778, "body": "Other languages are completely irrelevant to your main question, then."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1435778894, "post_id": 31169924, "comment_id": 50347810, "body": "Perhaps stick to one language is a good idea"}, {"owner": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "edited": false, "score": 0, "creation_date": 1435778934, "post_id": 31169924, "comment_id": 50347829, "body": "Thank you Ed, I&#39;ll check it out.  Other languages are fairly relevant since when dealing with this type of problem I often would prefer to do it in a higher-level language than C++, so I&#39;m interested in knowing if that is possible."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1435783423, "post_id": 31169924, "comment_id": 50350318, "body": "Long answer short - a single char can store 4 sequences.  You can do the bit twiddling yourself in a char array (C Style), or use a bitset and hope that it does an efficient job of things.  Or, you could just compress the whole ACTG char array with a compressor of your choice if storage is the only concern.  Once you store this info, what do you plan to do with it?  There is a cost in packing bits this way that makes data manipulation later on a bit more expensive."}], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "edited": false, "score": 0, "creation_date": 1435779276, "post_id": 31170054, "comment_id": 50348022, "body": "Do you know how much processing/structure overhead would I accumulate trying to store two pairs in each vector?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "edited": false, "score": 0, "creation_date": 1435779370, "post_id": 31170054, "comment_id": 50348070, "body": "@Eckster You wouldn&#39;t be storing 2 pairs in each vector.  you would be storing 2 pairs in each bitset and then all of the bitsets would be stored in a single vector."}, {"owner": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "edited": false, "score": 0, "creation_date": 1435779633, "post_id": 31170054, "comment_id": 50348218, "body": "I admit that I&#39;m not very good at low-level C++(hence asking about other languages), pointers are about as complex as I typically deal with, is there any way you could show me an example of what this would look like in use, as in setting up an array of the  2-bit structures, filling it with data, and then reading it out?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "edited": false, "score": 0, "creation_date": 1435781452, "post_id": 31170054, "comment_id": 50349259, "body": "@Eckster There are different ways you could do it.  <a href=\"http://coliru.stacked-crooked.com/a/b5e46d63c8e726cc\" rel=\"nofollow noreferrer\">Here</a> is a very naive approach."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1435778991, "creation_date": 1435778991, "answer_id": 31170054, "question_id": 31169924, "link": "https://stackoverflow.com/questions/31169924/efficiently-storing-dna-base-pair-data-in-ram/31170054#31170054", "title": "Efficiently storing DNA base-pair data in RAM?", "body": "<p>I would suggest you encode the data in a <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow\"><code>std::bitset</code></a> and store the bitsets in a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a>.  You can just code a DNA pair in the bitset and waste four bits per element in the vector or you could code 2 DNA pairs in each bitset and then you have perfect storage.</p>\n"}], "owner": {"reputation": 1130, "user_id": 901398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c593e65a868ad49a257ac965bf8effac?s=128&d=identicon&r=PG", "display_name": "Ecksters", "link": "https://stackoverflow.com/users/901398/ecksters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "closed_date": 1435833187, "answer_count": 1, "score": 0, "last_activity_date": 1435779210, "creation_date": 1435778554, "last_edit_date": 1495535208, "question_id": 31169924, "link": "https://stackoverflow.com/questions/31169924/efficiently-storing-dna-base-pair-data-in-ram", "closed_reason": "Needs more focus", "title": "Efficiently storing DNA base-pair data in RAM?", "body": "<p>Very related to this question:\n<a href=\"https://stackoverflow.com/questions/6493889/most-efficient-way-to-store-a-big-dna-sequence\">Most efficient way to store a big DNA sequence?</a>\nand this one:\n<a href=\"https://stackoverflow.com/questions/24399610/declaring-a-new-data-type-for-dna\">Declaring a new data type for DNA</a></p>\n\n<p>I'd like to find a way to efficiently store long sets of the characters ACTG without wasting an entire byte for each value, when it should only require 2 bits.\nHowever, I don't see any descriptions in the responses regarding how to go about storing 2-bit data in C++, or Java or any language for that matter, although I figure C++ should be the ideal language for it.</p>\n\n<p>So my question is this, what is the syntax to properly create a conveniently usable 2-bit data type? I assume some sort of structure is going to need to be made to fill byte-sized(lol) chunks of data, but I'm not really certain.</p>\n\n<p>I'd be very interested in knowing if such a thing is possible in other languages as well, such as Javascript or Perl, but mostly how you go about it in C++.</p>\n\n<p>Example code would be very much appreciated, thank you.</p>\n"}, {"tags": ["c++", "visual-c++", "mfc", "gdi+"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1435778640, "post_id": 31169886, "comment_id": 50347677, "body": "Did you call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms534077(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GdiplusStartup</code></a> before calling any other GDI+ functions?"}, {"owner": {"reputation": 407, "user_id": 995123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5760ede6473346d12cda65db6e9cd749?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/995123/joe"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1435779503, "post_id": 31169886, "comment_id": 50348132, "body": "Yes you have rigth, it was that my problem, i have add GdiplusStartupInput and now it&#39;s work, thank you so much!!"}], "owner": {"reputation": 407, "user_id": 995123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5760ede6473346d12cda65db6e9cd749?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/995123/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435778422, "creation_date": 1435778422, "question_id": 31169886, "link": "https://stackoverflow.com/questions/31169886/cant-load-image-using-gdiplus-lib", "title": "Can&#39;t load image using gdiplus lib", "body": "<p>I am trying to loag a gif image with <code>MFC C++</code> <code>gdiplus</code> lib using the function : </p>\n\n<pre><code>void CGIFControl::Load(LPCWSTR sFileName)\n{\n  //PLEASE MAKE SURE FILEPATH RIGHT!\n  Image* m_pImage = Image::FromFile( sFileName );    \n  ......\n}\n</code></pre>\n\n<p>I have add this lines to my <code>StdAfx.h</code> file :</p>\n\n<pre><code>#include&lt;gdiplus.h&gt;\nusing namespace Gdiplus;\n#pragma comment(lib,\"gdiplus.lib\")\n</code></pre>\n\n<p>But the problem is my image <code>m_pImage</code> all the time returns null.</p>\n\n<p>Can you please tell me what i'm doing wrong ?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2013", "linker-errors", "video-capture"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 1, "creation_date": 1435778215, "post_id": 31169779, "comment_id": 50347435, "body": "somehow, you&#39;re failing to link opencv_videoio300(d).lib"}, {"owner": {"reputation": 171, "user_id": 5071016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_914jLBGnUY/AAAAAAAAAAI/AAAAAAAAHBY/V0oZXl4iPfM/photo.jpg?sz=128", "display_name": "Rhamy Belayachi", "link": "https://stackoverflow.com/users/5071016/rhamy-belayachi"}, "reply_to_user": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1435865941, "post_id": 31169779, "comment_id": 50391252, "body": "YES!! I linked all the libraries except for that one. Thank you! @berak"}], "answers": [{"comments": [{"owner": {"reputation": 2756, "user_id": 2487730, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/738346725144dd27b32670cc7316ee80?s=128&d=identicon&r=PG", "display_name": "zipzit", "link": "https://stackoverflow.com/users/2487730/zipzit"}, "edited": false, "score": 2, "creation_date": 1448677876, "post_id": 31389333, "comment_id": 55691690, "body": "Same error here. Many thanks.  But I do have to ask, how did you know that the VideoCapture function was tied to that library?  I see the class listed in highgui.hpp, but what is the connection from there to opencv_videoio300d.lib?"}, {"owner": {"reputation": 523, "user_id": 3269989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kNVqL.png?s=128&g=1", "display_name": "Ahmed_Faraz", "link": "https://stackoverflow.com/users/3269989/ahmed-faraz"}, "edited": false, "score": 0, "creation_date": 1516086078, "post_id": 31389333, "comment_id": 83534664, "body": "I have added opencv_videoio library but still getting the same error"}], "tags": [], "owner": {"reputation": 171, "user_id": 5071016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_914jLBGnUY/AAAAAAAAAAI/AAAAAAAAHBY/V0oZXl4iPfM/photo.jpg?sz=128", "display_name": "Rhamy Belayachi", "link": "https://stackoverflow.com/users/5071016/rhamy-belayachi"}, "is_accepted": true, "score": 9, "last_activity_date": 1436807129, "creation_date": 1436807129, "answer_id": 31389333, "question_id": 31169779, "link": "https://stackoverflow.com/questions/31169779/videocapture-error-opencv-3-0-0-in-visual-studio-2013-in-c/31389333#31389333", "title": "VideoCapture error OpenCV 3.0.0 in Visual Studio 2013 in C++", "body": "<p>link  opencv_videoio300(d).lib </p>\n"}], "owner": {"reputation": 171, "user_id": 5071016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_914jLBGnUY/AAAAAAAAAAI/AAAAAAAAHBY/V0oZXl4iPfM/photo.jpg?sz=128", "display_name": "Rhamy Belayachi", "link": "https://stackoverflow.com/users/5071016/rhamy-belayachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3675, "favorite_count": 0, "accepted_answer_id": 31389333, "answer_count": 1, "score": 4, "last_activity_date": 1443047425, "creation_date": 1435778059, "question_id": 31169779, "link": "https://stackoverflow.com/questions/31169779/videocapture-error-opencv-3-0-0-in-visual-studio-2013-in-c", "title": "VideoCapture error OpenCV 3.0.0 in Visual Studio 2013 in C++", "body": "<p>I am working on an OpenCV 3.0.0 32-bit Segmentation project and copy+pasted some <a href=\"http://docs.opencv.org/3.0-rc1/dd/d9d/segment_objects_8cpp-example.html\" rel=\"nofollow\">sample code</a> from OpenCV. Unfortunately, when I build it, all dependencies and libraries included, it gives me the following errors:</p>\n\n<pre><code>1&gt;Source.cpp\n1&gt;Source.obj : error LNK2019: unresolved external symbol \"public: __thiscall cv::VideoCapture::VideoCapture(void)\" (??0VideoCapture@cv@@QAE@XZ) referenced in function _main\n1&gt;Source.obj : error LNK2019: unresolved external symbol \"public: virtual __thiscall cv::VideoCapture::~VideoCapture(void)\" (??1VideoCapture@cv@@UAE@XZ) referenced in function _main\n1&gt;Source.obj : error LNK2019: unresolved external symbol \"public: virtual bool __thiscall cv::VideoCapture::open(class cv::String const &amp;)\" (?open@VideoCapture@cv@@UAE_NABVString@2@@Z) referenced in function _main\n1&gt;Source.obj : error LNK2019: unresolved external symbol \"public: virtual bool __thiscall cv::VideoCapture::isOpened(void)const \" (?isOpened@VideoCapture@cv@@UBE_NXZ) referenced in function _main\n</code></pre>\n"}, {"tags": ["c++", "gstreamer", "node-gyp"], "answers": [{"comments": [{"owner": {"reputation": 3439, "user_id": 640650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52033010f0d68daf062ecfe801d98693?s=128&d=identicon&r=PG", "display_name": "Yasushi Shoji", "link": "https://stackoverflow.com/users/640650/yasushi-shoji"}, "edited": false, "score": 0, "creation_date": 1493019802, "post_id": 31180452, "comment_id": 74213988, "body": "I had the same problem after I forgot the fact that I renamed my plugin.  grepping for &#39;adding plugin&#39; in the log (w/ GST_DEBUG=6) showed that old plugin was loaded.  Removed it and the error is gone. Thanks!"}], "tags": [], "owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "is_accepted": false, "score": 1, "last_activity_date": 1435828583, "creation_date": 1435828583, "answer_id": 31180452, "question_id": 31169778, "link": "https://stackoverflow.com/questions/31169778/how-to-fix-glib-gobject-warning-cannot-register-existing-type-gchar/31180452#31180452", "title": "How to fix GLib-GObject-WARNING **: cannot register existing type `gchar&#39;", "body": "<p>Getting this for 'gchar' is weird. One case where you get this error is if you have a stale copy of a plugin and hence you try to register the plugin GType twice.</p>\n\n<p>What I'd do to figure is to run it as:</p>\n\n<pre><code>G_DEBUG=\"fatal_warnings\" gdb --args ./your-app\n</code></pre>\n\n<p>and from gdb type 'run' and once it terminates 'bt' to get the backtrace. If this comes from plugin registration, you might want to look at the gst debug log (GST_DEBUG=\"*:6\" to see if any plugin is found twice. </p>\n"}, {"tags": [], "owner": {"reputation": 2476, "user_id": 981817, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yG1bU.png?s=128&g=1", "display_name": "major-mann", "link": "https://stackoverflow.com/users/981817/major-mann"}, "is_accepted": false, "score": 0, "last_activity_date": 1435914228, "creation_date": 1435914228, "answer_id": 31202759, "question_id": 31169778, "link": "https://stackoverflow.com/questions/31169778/how-to-fix-glib-gobject-warning-cannot-register-existing-type-gchar/31202759#31202759", "title": "How to fix GLib-GObject-WARNING **: cannot register existing type `gchar&#39;", "body": "<p>So, I found that I had gstreamer 0.10 installed, after updating to 1.0, fixing the minor code differences, and including the AppKit framework (I'm on OSX) I finally have been able to move past this issue.</p>\n"}], "owner": {"reputation": 2476, "user_id": 981817, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yG1bU.png?s=128&g=1", "display_name": "major-mann", "link": "https://stackoverflow.com/users/981817/major-mann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6917, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1435914228, "creation_date": 1435778058, "last_edit_date": 1495540015, "question_id": 31169778, "link": "https://stackoverflow.com/questions/31169778/how-to-fix-glib-gobject-warning-cannot-register-existing-type-gchar", "title": "How to fix GLib-GObject-WARNING **: cannot register existing type `gchar&#39;", "body": "<p>I am in the process of building a node.js wrapper for gstreamer. I am able to build, and extract a lot of information and objects (eg. version, plugins, features, caps, and element factories.)</p>\n\n<p>However, when I call gst_element_factory_make, or gst_element_factory_create I get the following output:</p>\n\n<pre><code>(&lt;unknown&gt;:27080): GLib-GObject-WARNING **: cannot register existing type `gchar'\n**\n GLib-GObject:ERROR:gvaluetypes.c:457:_g_value_types_init: assertion failed: (type == G_TYPE_CHAR)\nAbort trap: 6\n</code></pre>\n\n<p>The answer at <a href=\"https://stackoverflow.com/questions/23777031/gtk-window-with-quartz-starting-from-an-issue-with-gstreamer\">GTK window with Quartz [starting from an issue with GStreamer]</a> seems to indicate that there may be some sort of version conflict, however I am not experienced enough with C++ and make files to know if this is my problem. Below is the libraries section of my binding.gyp, which (by experimentation) is the least modules required to build, run and get a version.</p>\n\n<pre><code>\"/Library/Frameworks/Gstreamer.framework/Libraries/libgobject-2.0.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libgstreamer-0.10.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libffi.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libglib-2.0.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libgmodule-2.0.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libiconv.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libintl.a\",\n\"/Library/Frameworks/Gstreamer.framework/Libraries/libxml2.a\"\n</code></pre>\n\n<p>I have created a small test project to illustrate my problem. It is in a zip file at <a href=\"http://s000.tinyupload.com/?file_id=00675589235220460725\" rel=\"nofollow noreferrer\">http://s000.tinyupload.com/?file_id=00675589235220460725</a></p>\n"}, {"tags": ["c#", "c++", "c#-4.0", "visual-c++"], "comments": [{"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1435778135, "post_id": 31169776, "comment_id": 50347400, "body": "Are you talking about the file dialog window title?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435778618, "post_id": 31169776, "comment_id": 50347657, "body": "Perhaps a couple pictures with the default dialog resource and your custom one (using the C++ code you know about) would help us to understand what you want."}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1435778415, "post_id": 31169866, "comment_id": 50347539, "body": "If your link dies, this answer becomes useless. Please post the relevant portions of the link here. I also don&#39;t see how it answers the question. I&#39;m not what exactly the OP wants the dialog to look like, but I assume it&#39;s something that isn&#39;t a simple property of <code>OpenFileDialog</code>. The link just explains some of those simple properties."}], "tags": [], "owner": {"reputation": 71, "user_id": 637432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e32ec3fe8835d2276d8017f636e16?s=128&d=identicon&r=PG", "display_name": "chienvh", "link": "https://stackoverflow.com/users/637432/chienvh"}, "is_accepted": false, "score": 0, "last_activity_date": 1435778359, "creation_date": 1435778359, "answer_id": 31169866, "question_id": 31169776, "link": "https://stackoverflow.com/questions/31169776/openfiledialog-c-show-custom-text/31169866#31169866", "title": "OpenFileDialog C# show custom text", "body": "<p>You can refer to this link to know how to do: <a href=\"http://www.c-sharpcorner.com/uploadfile/mahesh/openfiledialog-in-C-Sharp/\" rel=\"nofollow\">Click Me</a></p>\n"}], "owner": {"reputation": 1109, "user_id": 841612, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7db064a093c3bcb2c8169ff6750146dc?s=128&d=identicon&r=PG", "display_name": "WPFKK", "link": "https://stackoverflow.com/users/841612/wpfkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435778359, "creation_date": 1435778054, "question_id": 31169776, "link": "https://stackoverflow.com/questions/31169776/openfiledialog-c-show-custom-text", "title": "OpenFileDialog C# show custom text", "body": "<p>Hi I am working on an Application using .net 4.5. What i need now is in an OpenFileDialog i need to show some custom text or hint message to the user.</p>\n\n<p>In C++ structure there is something called <code>\"lpTemplateName \"</code> on setting this to whatever text that text will be displayed in File dialog.</p>\n\n<p>How can we do this in C#? any pointers is greatly appreciated</p>\n"}, {"tags": ["c++", "distribution"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1435778692, "post_id": 31169695, "comment_id": 50347700, "body": "The <a href=\"http://en.cppreference.com/w/cpp/numeric/random/discrete_distribution\" rel=\"nofollow noreferrer\">constructor of <code>std::discrete_distribution</code></a> takes only one argument. You are giving it two arguments."}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1435779751, "post_id": 31169695, "comment_id": 50348280, "body": "Ok. So how would I input the weights vector? I also tried this: std::discrete_distribution&lt;int&amp;&gt; dist(weights);"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1435779855, "post_id": 31169695, "comment_id": 50348344, "body": "Unfortunately, I don&#39;t understands the intricacies of random number generators well enough to suggest a solution."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435789126, "post_id": 31171114, "comment_id": 50353007, "body": "I am new to programming. I know a bit about references. How do I use [InputInterator][2] references in the discrete_distribution?"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435811805, "post_id": 31171114, "comment_id": 50358404, "body": "does anyone else know this? I am desperate to figure this out."}], "tags": [], "owner": {"reputation": 3306, "user_id": 111598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ddd73fbbfca704f70f91ec4e8314be?s=128&d=identicon&r=PG", "display_name": "Pekka", "link": "https://stackoverflow.com/users/111598/pekka"}, "is_accepted": false, "score": 0, "last_activity_date": 1435818539, "last_edit_date": 1495535207, "creation_date": 1435782746, "answer_id": 31171114, "question_id": 31169695, "link": "https://stackoverflow.com/questions/31169695/creating-a-custom-interated-discrete-evolutionary-distribution/31171114#31171114", "title": "Creating a custom interated discrete evolutionary distribution", "body": "<p>The error is reported by the linker because a method (in this case the constructor) is called with a signature that does not match any of the specialisations in the class. </p>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/numeric/random/discrete_distribution/discrete_distribution\" rel=\"nofollow noreferrer\">std::discrete_distribution</a> documentation indicates that there are 4 specialised constructors available and these may cover the case that you require. </p>\n\n<p>The one that you appear closest to the one you attempted to call requires <code>[InputInterator][2]</code> references, not <code>integer</code> bounds.</p>\n\n<p>The <a href=\"https://stackoverflow.com/questions/21959404/initialising-stddiscrete-distribution-in-vs2013\">example</a> for Visual C++ indicates that this constructor is not available on the Microsoft platform but provides an equivalent solution with lower and upper bounds.</p>\n"}], "owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435818539, "creation_date": 1435777774, "last_edit_date": 1435781460, "question_id": 31169695, "link": "https://stackoverflow.com/questions/31169695/creating-a-custom-interated-discrete-evolutionary-distribution", "title": "Creating a custom interated discrete evolutionary distribution", "body": "<p>I have been tackling this issue for days now. I am running an evolutionary model which uses a distribution for interactions between species. I pasted the function here. I need to use the template: </p>\n\n<p><code>template &lt;class InputIt&gt;</code></p>\n\n<p>The function does not recognize the template if I paste it directly before the function declaration. If I paste it before main(), the template is recognized, but I get the single error:</p>\n\n<p>Error   2   error LNK1120: 1 unresolved externals   </p>\n\n<p>The code:</p>\n\n<pre><code>void evolution(TeamArray&amp; teamData)\n{\n\ndefault_random_engine randomGenerator((unsigned int)time(NULL));\nuniform_int_distribution&lt;int&gt; rand120(0, 120);\n\nint* RandA;\nint* RandB;\n\nRandA = new int[rounds];\nRandB = new int[rounds];\n// Time Period 1\n\nfor (int i = 0; i &lt; rounds / 10; ++i)\n{\n    RandA[i] = rand120(randomGenerator); // generates random numbers from 0 to 120 (121 elements)\n}\n\nfor (int i = 0; i &lt; rounds / 10; ++i)\n{\n    RandB[i] = rand120(randomGenerator); // generates random numbers from 0 to 120 (121 elements)\n}\n\nfor (int i = 0; i &lt; rounds / 10; i++)\n{\n    interact(teamData[RandA[i]], teamData[RandB[i]]);\n}\n\ndelete[] RandA;\ndelete[] RandB;\n\n    // Later time periods (ERA 2 through 10)\n\n// The inside of this loop does the rest of the interactions \nfor (int t = 1; t &lt; 10; ++t) // looping through the ERA's\n{\n    // Intializing distribution \n    std::vector&lt; int&gt; weights(121);\n    for (int i = 0; i &lt; 121; i++)\n    {\n        weights[i] = (teamData[i]).S();\n    }\n\n    std::discrete_distribution&lt;int&amp;&gt; dist(weights.begin(), weights.end());\n\n    for (int i = t* (rounds / 10); i &lt; (t+1) * (rounds / 10); ++i)\n    {\n        RandA[i] = dist(randomGenerator); \n    }\n\n    for (int i = t* (rounds / 10); i &lt; (t + 1) * (rounds / 10); ++i)\n    {\n        RandB[i] = dist(randomGenerator); \n    }\n\n    for (int i = t* (rounds / 10); i &lt; (t + 1) * (rounds / 10); ++i)\n    {\n        interact(teamData[RandA[i]], teamData[RandB[i]]);\n    }\n\n    delete[] RandA;\n    delete[] RandB;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435777995, "post_id": 31169667, "comment_id": 50347320, "body": "You have two distinct templates, one with one argument, the other with two (no <code>foo</code> overload)."}], "answers": [{"tags": [], "owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777980, "creation_date": 1435777980, "answer_id": 31169749, "question_id": 31169667, "link": "https://stackoverflow.com/questions/31169667/templated-functions-overload-return-type/31169749#31169749", "title": "Templated functions overload return type", "body": "<p>I won't call it overload , but compiler will generate two different functions based on template arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1435778219, "post_id": 31169750, "comment_id": 50347436, "body": "Uhm, then what about <a href=\"http://stackoverflow.com/questions/2174300/function-template-overloading\" title=\"function template overloading\">stackoverflow.com/questions/2174300/&hellip;</a> ? Why are 1 and 3 allowed?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1435778332, "post_id": 31169750, "comment_id": 50347487, "body": "@Albert 1 takes an <code>X</code> and an <code>int</code>, 3 takes an <code>X</code>, <code>Y</code>, and <code>Z</code>. There&#39;s no ambiguity."}, {"owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1435778849, "post_id": 31169750, "comment_id": 50347785, "body": "Uh, and even this falls in the same &quot;non-partial-specialization&quot; stuff? <a href=\"http://coliru.stacked-crooked.com/a/8ac30701c6ec6d0e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/8ac30701c6ec6d0e</a> (last question to clear everything up)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1435779151, "post_id": 31169750, "comment_id": 50347938, "body": "@Albert Nothing here has anything to do with specialization. In that example, one function takes a template template class with one type argument and the other function takes a template template class with two type arguments. They are not specializations of each other."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1435778277, "last_edit_date": 1435778277, "creation_date": 1435777981, "answer_id": 31169750, "question_id": 31169667, "link": "https://stackoverflow.com/questions/31169667/templated-functions-overload-return-type/31169750#31169750", "title": "Templated functions overload return type", "body": "<p>You have two overloads of <code>foo</code> (really two function templates named <code>foo</code>). One takes one template type argument:</p>\n\n<pre><code>template&lt;typename T&gt;\nT foo();\n</code></pre>\n\n<p>And one takes two template type arguments:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nstd::pair&lt;T,U&gt; foo();\n</code></pre>\n\n<p>You are allowed to overload on different template arguments. You could even add overloads that take non-type arguments:</p>\n\n<pre><code>template &lt;int I&gt;\nvoid foo() {\n    std::cout &lt;&lt; \"third\";\n}\n</code></pre>\n\n<p>This is a separate, valid overload too. What you can't do is then separately add:</p>\n\n<pre><code>template &lt;typename U&gt;\nU* foo();\n</code></pre>\n\n<p>Because now you have two different function templates named <code>foo</code> that take a single template argument and there's no way for the compiler to know which one you meant - so now you have a guaranteed ambiguous overload. </p>\n"}], "owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 31169750, "answer_count": 2, "score": 0, "last_activity_date": 1435778277, "creation_date": 1435777670, "question_id": 31169667, "link": "https://stackoverflow.com/questions/31169667/templated-functions-overload-return-type", "title": "Templated functions overload return type", "body": "<p>The following doesn't look like a partial specialization (that however cannot happen on a templated function). Plus functions don't overload by just return type. What's going on in the following code??</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nT foo() {\n std::cout &lt;&lt; \"first\";\n return T();   \n}\n\n\ntemplate&lt;typename T, typename U&gt;\nstd::pair&lt;T,U&gt; foo() {\n std::cout &lt;&lt; \"second\";\n return std::make_pair&lt;T,U&gt;(T(),U()); \n}\n\nint main()\n{\n    foo&lt;int&gt;();\n    foo&lt;int,char&gt;();\n}\n</code></pre>\n"}, {"tags": ["c++", "reference", "undefined"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1435777300, "post_id": 31169494, "comment_id": 50346916, "body": "Looks like you might be missing an include..."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1435777436, "post_id": 31169494, "comment_id": 50347002, "body": "@scohe001, An include shouldn&#39;t fix a linker error."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435777464, "post_id": 31169494, "comment_id": 50347023, "body": "<a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">See this question.</a> You likely want these two files to be in the same project."}, {"owner": {"reputation": 1, "user_id": 5070227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d89f5c2cdb25b2e6a4b14d9f8e4dd28?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5070227/jonas"}, "edited": false, "score": 0, "creation_date": 1435779397, "post_id": 31169494, "comment_id": 50348085, "body": "I added the proper include and now it works. Thank you very much for the help."}], "owner": {"reputation": 1, "user_id": 5070227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d89f5c2cdb25b2e6a4b14d9f8e4dd28?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5070227/jonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1435777498, "answer_count": 0, "score": 0, "last_activity_date": 1435777108, "creation_date": 1435777108, "question_id": 31169494, "link": "https://stackoverflow.com/questions/31169494/undefined-reference-to-using-a-guidebook", "closed_reason": "Duplicate", "title": "undefined reference to using a guidebook", "body": "<p>I am learning my first language C++ and doing so by using a guidebook. Recently i got stuck with a problem an error called \"undefined reference to BigDog(int)\". For information all code written here is copied examples taken from the book.</p>\n\n<p>I am using Code::blocks on ubuntu 14.04</p>\n\n<p>The code is in two files:</p>\n\n<p>main.cpp\n</p>\n\n<pre><code>#include&lt;iostream&gt;\n\n\nusing namespace std;\n\nvoid BigDog(int KibblesCount);\n\nint main()\n{\nBigDog(3);\nreturn 0;\n}\n</code></pre>\n\n<p>mystuff.cpp\n</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nvoid BigDog(int KibblesCount)\n{\n    cout &lt;&lt; \"I'm a lucky dog\" &lt;&lt; endl;\n    cout &lt;&lt; \"I have\" &lt;&lt; KibblesCount &lt;&lt; \" pieces of food\" &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>When i compile this in code::block i get the following error \"undefined reference to 'BigDog(int)'\"</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "unicode", "substring", "stdstring"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435776681, "post_id": 31169355, "comment_id": 50346535, "body": "As an aside, your two-line copy is almost equivalent to <code>std::wstring longWord(word.begin(), word.end());</code>"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435776745, "post_id": 31169355, "comment_id": 50346571, "body": "Oh, yup, you are right. :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435776746, "post_id": 31169355, "comment_id": 50346572, "body": "Have you tried the <code>std::wstring::find</code> method?"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435776788, "post_id": 31169355, "comment_id": 50346601, "body": "Calling <code>find</code> on a <code>std::wstring</code> will invoke that automatically, I presume?"}, {"owner": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1435776971, "post_id": 31169355, "comment_id": 50346701, "body": "@Cupidvogel <code>std::wstring::find</code> is invoked <i>exactly</i> by calling <code>find()</code> on a <code>std::wstring</code>"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435777127, "post_id": 31169355, "comment_id": 50346794, "body": "Yes, thought so. Then why the above comment by @ThomasMatthews?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435777543, "post_id": 31169355, "comment_id": 50347077, "body": "Are you sure that the contents of <code>fContentString</code> match what is in your question?  If I just copy your string and call <code>find()</code> it works <a href=\"http://coliru.stacked-crooked.com/a/c78c6703f2905fbb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1435777559, "post_id": 31169355, "comment_id": 50347086, "body": "Have you checked that <code>std::copy(word.begin(), word.end(), longWord.begin());</code> does what you think it does? Since <code>std::copy</code> is a general purpose algorithm, it seems unlikely that it will suddenly decide to invoke a multibyte-to-wide-character conversion."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435777632, "post_id": 31169355, "comment_id": 50347133, "body": "@Cupidvogel: Sorry, I was going by your question&#39;s title on <i>&quot;How to search...&quot;</i>.  Looks like your question is not about searching."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435777634, "post_id": 31169355, "comment_id": 50347135, "body": "@NathanOliver, yes I know it will work in a direct string. The problem is how to make it work from the stream."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1435777735, "post_id": 31169355, "comment_id": 50347195, "body": "@rici, I found this here: <a href=\"http://stackoverflow.com/a/6691597/1469954\">stackoverflow.com/a/6691597/1469954</a>"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1435777855, "post_id": 31169355, "comment_id": 50347254, "body": "Which compiler do you use? It is definitely wrong to convert string to wstring this way if the original string contains anything except ASCII (e.g. UTF8 characters)."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435777876, "post_id": 31169355, "comment_id": 50347265, "body": "We are using clang.."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1435778179, "post_id": 31169355, "comment_id": 50347414, "body": "@Cupidvogel: That code only widens characters. It does not do multibyte to wide character conversion."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435778224, "post_id": 31169355, "comment_id": 50347441, "body": "Oh, okay then. How do I do it then?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1435778420, "post_id": 31169355, "comment_id": 50347542, "body": "<a href=\"http://stackoverflow.com/q/19649192/1553090\">stackoverflow.com/q/19649192/1553090</a>"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1435781061, "post_id": 31169355, "comment_id": 50349043, "body": "By the way, why do you call <code>stream-&gt;next();</code> twice in the loop? Is it not a mistake?"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435781428, "post_id": 31169355, "comment_id": 50349245, "body": "No no, that is a typo here, it works fine in my actual code. Editing it.. :)"}], "answers": [{"comments": [{"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435778565, "post_id": 31169883, "comment_id": 50347621, "body": "I assume U16 and U8 refer to <code>std::wstring</code> and <code>std::string</code> respectively? What compiler options do I need to provide?"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435779282, "post_id": 31169883, "comment_id": 50348026, "body": "@Cupidvogel, I&#39;ve updated my answer with code example particular to your case. Please, try."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435779578, "post_id": 31169883, "comment_id": 50348187, "body": "So this will ensure that the <code>wstringstream</code> truly consists of long words. Will converting it to <code>std::wstring</code> through the <code>str()</code> method keep it safe?"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435779815, "post_id": 31169883, "comment_id": 50348321, "body": "What do you mean by &quot;keeping it safe&quot;? I expect that <code>str()</code> method of <code>wstringstream</code> returns a <code>wstring</code> containing what was in the <code>wstringstream</code>."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435779947, "post_id": 31169883, "comment_id": 50348389, "body": "Yep, yep, I mean that only. Gonna try it now."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435787126, "post_id": 31169883, "comment_id": 50352199, "body": "Works like a charm! Thanks! One more question, I haven&#39;t has the opportunity of testing it out in Windows yet, will this work on Windows as well for sure?"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435817193, "post_id": 31169883, "comment_id": 50360134, "body": "@Cupidvogel, on Windows I am getting e.g. std::range_error exception in case the <code>string</code> is not UTF-8, but in some ASCII code page e.g. Windows-1251 (Cyrillic)."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435818206, "post_id": 31169883, "comment_id": 50360579, "body": "In my case, the words obtained are guaranteed to be <code>std::string</code>. Will there be a problem, then?"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1435822434, "post_id": 31169883, "comment_id": 50362847, "body": "If the <code>std::string</code> contains UTF-8 characters, there should be no problem. But if the string is in ASCII code page, you can get <code>std::range_error</code> exception. I don&#39;t know for sure, thus you can ask another question if something is still not clear to you."}], "tags": [], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "is_accepted": true, "score": 1, "last_activity_date": 1435780906, "last_edit_date": 1495541164, "creation_date": 1435778421, "answer_id": 31169883, "question_id": 31169355, "link": "https://stackoverflow.com/questions/31169355/how-to-search-for-text-in-wide-string-obtained-from-wstringstream/31169883#31169883", "title": "How to search for text in wide string obtained from wstringstream", "body": "<p>Because the original <code>string</code> is not ASCII-only - it contains multibyte character '\u00a9', it is wrong to convert from <code>string</code> to <code>wstring</code> using character-by-character conversion. Therefore both </p>\n\n<pre><code>std::wstring longWord(word.length(), L' '); // Make room for characters\nstd::copy(word.begin(), word.end(), longWord.begin());\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::wstring longWord(word.begin(), word.end());\n</code></pre>\n\n<p>do not work for a <code>string</code> containing multi-byte characters.\nTo properly convert from multibyte-character <code>string</code> to <code>wstring</code> on Windows you could use mbstowcs(): <a href=\"http://www.cplusplus.com/reference/cstdlib/mbstowcs/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdlib/mbstowcs/</a></p>\n\n<p>In a platform-independent way, with C++11 (compile options to clang: <code>-std=c++1</code> ) you can do this: <a href=\"https://stackoverflow.com/a/14809553/1915854\">https://stackoverflow.com/a/14809553/1915854</a> , <a href=\"https://stackoverflow.com/a/18597384/1915854\">https://stackoverflow.com/a/18597384/1915854</a></p>\n\n<p>Example if you need characters beyond what a single wchar_t can store:</p>\n\n<pre><code>std::wstring_convert&lt;std::codecvt_utf8_utf16&lt;wchar_t&gt;&gt; converter;\nstd::wstring longWord = converter.from_bytes(word);\n</code></pre>\n\n<p>If you don't need characters beyond what a single wchar_t can store:</p>\n\n<pre><code>std::wstring_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;&gt; converter;\nstd::wstring longWord = converter.from_bytes(word);\n</code></pre>\n\n<p>Necessary includes:</p>\n\n<pre><code>#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n#include &lt;string&gt;\n</code></pre>\n\n<p>There seem used to be other options prior to C++11 in Boost.</p>\n"}], "owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 31169883, "answer_count": 1, "score": 0, "last_activity_date": 1435781449, "creation_date": 1435776606, "last_edit_date": 1435781449, "question_id": 31169355, "link": "https://stackoverflow.com/questions/31169355/how-to-search-for-text-in-wide-string-obtained-from-wstringstream", "title": "How to search for text in wide string obtained from wstringstream", "body": "<p>I have a stream of words that give me a word in each run of the loop as <code>std::string</code>. But ideally this should be <code>std::wstring</code>. So after I obtain the string I convert it to <code>std::wstring</code>. This I input into a <code>std:wstringstream</code>. Finally, after all words from the stream are processed,and then I convert the <code>std:wstringstream</code> into a <code>std::wstring</code>, and then search for the required term (originally a <code>std::wstring</code>) in it. This is my code:</p>\n\n<pre><code>while (stream)\n{\n    std::string word = stream-&gt;getWord();\n    boost::trim(word);    \n\n    std::wstring longWord(word.length(), L' '); // Make room for characters\n    std::copy(word.begin(), word.end(), longWord.begin());\n\n    fMyWideCharStream &lt;&lt; longWord;\n    stream-&gt;next();\n}\n\nstd::wstring fContentString = fMyWideCharStream.str();\n\nsize_t nPos = fContentString.find(fSearchString, 0); //fSearchString is std::wstring\n\nwhile(nPos != std::wstring::npos)\n    {\n        qDebug() &lt;&lt; \"Pos: \" &lt;&lt; nPos &lt;&lt; endl;\n        nPos = fContentString.find(fSearchString, nPos+1);\n    }\n</code></pre>\n\n<p>I have this string: <strong>Passive Aggressive Dealing With Passive Aggression, Lost Happiness &amp; Disconnection Copyright \u00a9 2014</strong>, where the <strong>\u00a9</strong> is a wide character. As <code>std::string</code> it takes up two positions. As <code>std::wstring</code> it takes 1, which is what I want. However, on trying <code>fSearchString</code> with a value of <code>L\"2014\"</code>, I am still getting a value of 96, whereas it should be 95 since this string is now <code>std::wstring</code>.</p>\n\n<p>Any idea what I should do to fix this?</p>\n"}, {"tags": ["c++", "c", "xcode", "macos", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "edited": false, "score": 0, "creation_date": 1435940965, "post_id": 31169347, "comment_id": 50423720, "body": "Thank you rici!  It works! It brought up my faded memory about compiler and linker. But I still can&#39;t remember, in Xcode, .c files and .c++ files are compiled with different compiler?   I&#39;m new to Xcode. I used to use MS Visual studio, which is amazingly convenient and helpful. But I since I like Macbook, I have moved all application softwares to mac os version. Xcode seems not as convenient as MS Visual studio. Could you recommend some IDE for C/C++ coding on mac os? Thanks!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "edited": false, "score": 0, "creation_date": 1435946249, "post_id": 31169347, "comment_id": 50425841, "body": "@user43964: It&#39;s the same compiler suite (clang) but name mangling is part of the ABI and that requires C and C++ names to be handled differently. I don&#39;t know much about windows but it would surprise me if it were different. Perhaps your Windows IDE didnt let you mix languages in a project. If you compile the C code with c++ it will usually work ok, and you have no naming issues. As far as mac os x goes, the only IDE I&#39;ve used is xcode."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 4, "last_activity_date": 1435777846, "last_edit_date": 1435777846, "creation_date": 1435776558, "answer_id": 31169347, "question_id": 31169277, "link": "https://stackoverflow.com/questions/31169277/xcode-c-c-linker-error-undefined-symbol/31169347#31169347", "title": "xcode c/c++ linker error: undefined symbol", "body": "<p>You need to tell the C++ compiler that the function should have \"C\" linkage by declaring it as such (in your C++ source file).</p>\n\n<pre><code>extern \"C\" {\n  void free_and_null (char **ptr);\n}\n</code></pre>\n\n<p>C++ compilers construct \"mangled\" names for functions so that two functions with the same name but different argument types end up having different mangled names; that's necessary because linkers expect all names to be unique. Consequently, the code generated by the C++ compiler in your example will produce a different name than the name produced by the C compiler. (On Intel platforms, C compilers also modify names slightly, by prefixing an underscore, which is why it complains that <code>_free_and_null</code> is unfound.)</p>\n\n<p>One common way of doing this is to make a header file which uses preprocessor macros to detect the language. It's not fully portable, but it should work in your case:</p>\n\n<pre><code>// File model.h\n// This will not work with all C++ compilers, but it works with clang and gcc\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid free_and_null (char **ptr);\n// Other function declarations here\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435777846, "creation_date": 1435776371, "last_edit_date": 1435777675, "question_id": 31169277, "link": "https://stackoverflow.com/questions/31169277/xcode-c-c-linker-error-undefined-symbol", "title": "xcode c/c++ linker error: undefined symbol", "body": "<p>I did some search but my problem seems to be trivial so that no one asked.<br>\nI have a mixed c and c++ code.</p>\n\n<p>In <code>model.h</code>, I have the following declaration:</p>\n\n<pre><code>void free_and_null (char **ptr);\n</code></pre>\n\n<p>In <code>model.cpp</code>, I have the function body:</p>\n\n<pre><code>void free_and_null (char **ptr)\n{\n    if ( *ptr != NULL ) {\n        free (*ptr);\n        *ptr = NULL;\n    }\n} /* END free_and_null */\n</code></pre>\n\n<p>In a <code>solve.c</code> file, I have the following :</p>\n\n<pre><code>#include \"sort.h\"\n.....\n    free_and_null ((char **) &amp;x);\n</code></pre>\n\n<p>When I compile the project, it has the following linker error: </p>\n\n<blockquote>\n  <p>wrap)\n  Undefined symbols for architecture x86_64:\n    \"_free_and_null\", referenced from:</p>\n</blockquote>\n\n<p>Why such a simple program can have error? I use Apple LLVM 6.0 as the compiler. Any input is highly appreciated. </p>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435776457, "post_id": 31169253, "comment_id": 50346402, "body": "FYI function names should not be in all uppercase."}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435776478, "post_id": 31169253, "comment_id": 50346411, "body": "Oh. Is that just convention?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1435776782, "post_id": 31169253, "comment_id": 50346595, "body": "AFAIK it is just a convention: <a href=\"http://stackoverflow.com/questions/3799478/c-ifndef-for-include-files-why-is-all-caps-used-for-the-header-file\" title=\"c ifndef for include files why is all caps used for the header file\">stackoverflow.com/questions/3799478/&hellip;</a>"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1435780927, "post_id": 31169253, "comment_id": 50348951, "body": "It is convention and everyone will hate you if you don&#39;t follow it. All uppercase is used for named constants. This is true across pretty much every programming language I&#39;ve used."}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1435784361, "post_id": 31169253, "comment_id": 50350822, "body": "@RobK Lol I will change.. in fact my professor had it that way, so when I created a different method, I just followed the same convention."}], "answers": [{"comments": [{"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435776835, "post_id": 31169324, "comment_id": 50346627, "body": "well I can&#39;t use an inorder traversal to find the successor, I&#39;m required to use a successor method."}, {"owner": {"reputation": 8835, "user_id": 2054602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa714b545cf57418ee53dc5c6c9517b5?s=128&d=identicon&r=PG&f=1", "display_name": "Radu Di\u021b\u0103", "link": "https://stackoverflow.com/users/2054602/radu-di%c8%9b%c4%83"}, "reply_to_user": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435776963, "post_id": 31169324, "comment_id": 50346695, "body": "I was under the impression you had to write a successor method. The successor method is actually what I described above."}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435777442, "post_id": 31169324, "comment_id": 50347006, "body": "Maybe I misunderstood... I was saying that I have to use the successor method in the way that I wrote it above, and that I cannot use in-order traversal to find the successor."}], "tags": [], "owner": {"reputation": 8835, "user_id": 2054602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa714b545cf57418ee53dc5c6c9517b5?s=128&d=identicon&r=PG&f=1", "display_name": "Radu Di\u021b\u0103", "link": "https://stackoverflow.com/users/2054602/radu-di%c8%9b%c4%83"}, "is_accepted": true, "score": 1, "last_activity_date": 1435776507, "creation_date": 1435776507, "answer_id": 31169324, "question_id": 31169253, "link": "https://stackoverflow.com/questions/31169253/how-to-find-a-certain-element-of-bst-given-key/31169324#31169324", "title": "How to find a certain element of BST, given key?", "body": "<p>Do an in-order <a href=\"https://en.wikipedia.org/wiki/Tree_traversal#In-order\" rel=\"nofollow\">traversal</a>.</p>\n\n<p>After finding the element continue the traversal, the next element is the one you need.</p>\n\n<p>You don't need any special case regarding if you're looking for the successor of the root, but you need to treat the case where the element is the last one in the traversal, i.e. the largest one one.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1435777373, "creation_date": 1435777373, "answer_id": 31169577, "question_id": 31169253, "link": "https://stackoverflow.com/questions/31169253/how-to-find-a-certain-element-of-bst-given-key/31169577#31169577", "title": "How to find a certain element of BST, given key?", "body": "<p>My first approach would be to search for examples on the internet <a href=\"https://www.google.com/search?q=binary+search+tree+successor&amp;ie=utf-8&amp;oe=utf-8\" rel=\"nofollow\">\"binary search tree successor\"</a>.</p>\n\n<p>But if I have a big enough ego, I may want to develop my own algorithm.  I would <strong>draw a binary search tree</strong>.  Next I would pick a node an figure out the steps to get to the successor.  After I have the steps, I would go through the steps using different nodes on the tree and adjust the algorithm (steps) as necessary.  </p>\n\n<p>After I had the algorithm, I would code it up.</p>\n\n<p>But you're not me, so you would want to search the internet for \"c++ binary search tree successor function\".</p>\n"}], "owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 31169324, "answer_count": 2, "score": 0, "last_activity_date": 1435784388, "creation_date": 1435776265, "last_edit_date": 1435784388, "question_id": 31169253, "link": "https://stackoverflow.com/questions/31169253/how-to-find-a-certain-element-of-bst-given-key", "title": "How to find a certain element of BST, given key?", "body": "<p>So I'm trying to implement a TREE_SUCCESSOR(X) function for BST where X is the key of the node that I'm trying to find the successor of. So far I have this: </p>\n\n<pre><code>int BinarySearchTree::TREE_SUCCESSOR(node* x)\n{\n//i dont need a new node, I just need a pointer/reference to x. \nnode* y = NULL;\n//node* parent = NULL;\nif (x-&gt;right != NULL)\n{\n    return FIND_MIN(x-&gt;right);\n}\nelse\n{\n    y = x-&gt;parent; \n    while (y != NULL &amp;&amp; x == y-&gt;right)\n    {\n        x = y;\n        y = y-&gt;parent;\n    }\n    return y-&gt;key; \n}\n} \n</code></pre>\n\n<p>My problem is in the main function: </p>\n\n<pre><code>int main()\n{\nBinarySearchTree bst;\nint num = 0; \ncout &lt;&lt; \"Enter number you want to find the successor of: \" &lt;&lt;endl; \ncin &gt;&gt; num; \n\nif(BST.root-&gt;key == num)             //if i'm trying to find the successor of the root\n   { TREE_SUCCESSOR(BST.root); } \nelse\n{ \n    while(BST.root-&gt;key != num)      //if the user input does not equal the root key value \n    { \n        ???? \n    }\n} \n</code></pre>\n\n<p>I want to find out how to traverse the BST to the node of the BST till the <code>key = num</code>. For example, if the tree had nodes <code>3,4,5</code> then <code>TREE_SUCCESSOR(4)</code>, should return <code>5</code>. How would I do this?? </p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>So I decided used a <code>TREE_SEARCH(key)</code> that would find the node with a certain key and return it... and then pass that node into <code>TREE_SUCCESSOR(X)</code>.  </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435776768, "post_id": 31169147, "comment_id": 50346589, "body": "What is <code>A</code> in <code>weak_ptr&lt;A&gt;</code>?"}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1435777167, "post_id": 31169147, "comment_id": 50346823, "body": "I believe what you&#39;re trying is overly verbose and probably overkill for a simpler operation. Anyway your problem is of course caused by the fact containers have different parameters: <a href=\"http://coliru.stacked-crooked.com/a/bd9e6cc703c5e1ae\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/bd9e6cc703c5e1ae</a> . I wouldn&#39;t write code like this (take it as an example)"}, {"owner": {"reputation": 237, "user_id": 5005049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f856781bbd27d7b6b66b2beb2de3c7f4?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Rosler", "link": "https://stackoverflow.com/users/5005049/omer-rosler"}, "reply_to_user": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1435777416, "post_id": 31169147, "comment_id": 50346988, "body": "@MarcoA. When I wrap both the map and the set in some class they all fit the same template: template&lt;class T, class Allocator = ***Unknown default type***&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1435776647, "post_id": 31169326, "comment_id": 50346517, "body": "What is <code>A</code> in <code>std::weak_ptr&lt;A&gt;</code>?"}, {"owner": {"reputation": 452, "user_id": 3791773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f162dc499276e3cd7b7f7e29edd500?s=128&d=identicon&r=PG&f=1", "display_name": "p2rkw", "link": "https://stackoverflow.com/users/3791773/p2rkw"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1435776767, "post_id": 31169326, "comment_id": 50346588, "body": "This type was used by OP in his question."}, {"owner": {"reputation": 237, "user_id": 5005049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f856781bbd27d7b6b66b2beb2de3c7f4?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Rosler", "link": "https://stackoverflow.com/users/5005049/omer-rosler"}, "edited": false, "score": 0, "creation_date": 1435777004, "post_id": 31169326, "comment_id": 50346720, "body": "I just added I cannot use C++11, I wish I could :)"}], "tags": [], "owner": {"reputation": 452, "user_id": 3791773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f162dc499276e3cd7b7f7e29edd500?s=128&d=identicon&r=PG&f=1", "display_name": "p2rkw", "link": "https://stackoverflow.com/users/3791773/p2rkw"}, "is_accepted": false, "score": 1, "last_activity_date": 1435776512, "creation_date": 1435776512, "answer_id": 31169326, "question_id": 31169147, "link": "https://stackoverflow.com/questions/31169147/template-template-parameter-with-default-values-unknown/31169326#31169326", "title": "Template template parameter with default values unknown", "body": "<p>In c++11 you can take any template as template argument:</p>\n\n<pre><code>template&lt;template &lt;class ...&gt; class Container&gt;\nContainer&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1435777085, "post_id": 31169377, "comment_id": 50346765, "body": "The OP has to deal with a more fundamental problem to his approach. The template parameters for <code>vector</code>, <code>list</code>, <code>set</code>, and <code>map</code> are such that you can&#39;t use them in <code>Foo</code>. <code>Allocator</code> is the second template argument for <code>vector</code> and <code>list</code>. It is the third argument for <code>set</code>. It is the fourth argument for <code>map</code>."}, {"owner": {"reputation": 237, "user_id": 5005049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f856781bbd27d7b6b66b2beb2de3c7f4?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Rosler", "link": "https://stackoverflow.com/users/5005049/omer-rosler"}, "edited": false, "score": 0, "creation_date": 1435777219, "post_id": 31169377, "comment_id": 50346853, "body": "A is just some class; I defined a specific type that inherits from std::map with only 2 template parameters and with this type it has the problem; Because I use the default parameter in the definition of Foo I must have a default value for it (otherwise the compiler screams), the question is whether I can do it without specifying what this default type is."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777658, "last_edit_date": 1435777658, "creation_date": 1435776680, "answer_id": 31169377, "question_id": 31169147, "link": "https://stackoverflow.com/questions/31169147/template-template-parameter-with-default-values-unknown/31169377#31169377", "title": "Template template parameter with default values unknown", "body": "<p>There's a misunderstanding here of how template template parameters operate. This declaration:</p>\n\n<pre><code>template&lt;template&lt;class T, class Allocator = std::allocator&lt;T&gt;&gt; class Container&gt; \nContainer&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n\n<p>Is just an overly verbose version of this declaration:</p>\n\n<pre><code>template &lt; template &lt;class, class&gt; class Container&gt; \nContainer&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n\n<p>(What is <code>A</code> btw?)</p>\n\n<p>It doesn't matter what the names or defaults of the types are that <code>Container</code> takes - <code>Foo</code> is simply templated on some class template that takes two template type arguments. That works with <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>vector</code></a> because it is a class template that takes two template type arguments:</p>\n\n<pre><code>template&lt;\n    class T,\n    class Allocator = std::allocator&lt;T&gt;\n&gt; class vector;\n</code></pre>\n\n<p>It does not work with <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow\"><code>map</code></a> because that one takes four template type arguments:</p>\n\n<pre><code>template&lt;\n    class Key,\n    class T,\n    class Compare = std::less&lt;Key&gt;,\n    class Allocator = std::allocator&lt;std::pair&lt;const Key, T&gt; &gt;\n&gt; class map;\n</code></pre>\n\n<p>In C++11, you can generalize your function to have a template template argument take an arbitrary number of template type arguments:</p>\n\n<pre><code>template &lt; template &lt;class...&gt; class Container&gt; \nContainer&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n\n<p>Though, however, this is never going to work as some container types can't be constructed with only a single template argument (e.g. <code>map</code>). </p>\n"}, {"tags": [], "owner": {"reputation": 237, "user_id": 5005049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f856781bbd27d7b6b66b2beb2de3c7f4?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Rosler", "link": "https://stackoverflow.com/users/5005049/omer-rosler"}, "is_accepted": false, "score": 0, "last_activity_date": 1435779285, "creation_date": 1435779285, "answer_id": 31170130, "question_id": 31169147, "link": "https://stackoverflow.com/questions/31169147/template-template-parameter-with-default-values-unknown/31170130#31170130", "title": "Template template parameter with default values unknown", "body": "<p>I found a solution, it isn't elegant but it works:\nSending to <code>Foo</code> another template argument that would be the way to deafault the Allocator:</p>\n\n<pre><code>template&lt;template&lt;typename&gt; class DefaultAllocator, template&lt;typename T, \ntypename Allocator = DefaultAllocator&lt;T&gt;&gt; class Container&gt;\nContainer&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n\n<p>This way I send <code>Foo&lt;std::allocator,std::vector&gt;</code> all the same.\nAlso by creating some wrapper <code>template&lt;class T&gt; class MapAllocatorWrapper : std::allocator&lt;std::pair&lt;T,std::string&gt;&gt;</code>, I can send <code>Foo&lt;MapAllocatorWrapper, MapToType&lt;std::string&gt;::FromKey</code> after slight adjustments.</p>\n"}], "owner": {"reputation": 237, "user_id": 5005049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f856781bbd27d7b6b66b2beb2de3c7f4?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Rosler", "link": "https://stackoverflow.com/users/5005049/omer-rosler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1435779285, "creation_date": 1435775945, "last_edit_date": 1435777613, "question_id": 31169147, "link": "https://stackoverflow.com/questions/31169147/template-template-parameter-with-default-values-unknown", "title": "Template template parameter with default values unknown", "body": "<p>I have a template function that takes a container as a parameter\n(I use this function for both vector, set, map so trying to avoid it would cost a lot of code copying)\nso naturally I declared it as:</p>\n\n<pre><code>template&lt;template&lt;class T, class Allocator = std::allocator&lt;T&gt;&gt; class \nContainer&gt; Container&lt;std::weak_ptr&lt;A&gt;&gt;* Foo() {...}\n</code></pre>\n\n<p>Note that the return value of <code>Foo</code> uses the default parameter of the container.</p>\n\n<p>When I use the function with vector, list or set it works just fine;\nthe problem I have is when I try to use this template with a map container with the comparator and value type fixed (which is defined as <code>MapToValue&lt;ValueType&gt;::FromKey</code> with <code>A</code> and <code>Comparator&lt;Key&gt;</code> already defined):</p>\n\n<pre><code>template&lt;class Value&gt; class MapToValue {\n     template&lt;class Key, class Allocator = std::allocator&lt;std::pair&lt;const \n     Key, Value&gt;&gt;&gt; FromKey : public std::map&lt;Key, Value, Comparator&lt;Key&gt;, \n     Allocator&gt; {...}\n</code></pre>\n\n<p>In this case the default value of the allocator is diffrent then the one in the definition of <code>Foo</code> - <code>std::allocator&lt;std::pair&lt;_Ty, std::string&gt;&gt;</code> vs. <code>std::allocator&lt;_Ty&gt;</code>.</p>\n\n<p>Long story short, I need that to send to <code>Foo</code> a container with a second parameter that can be defaulted WITHOUT knowing what this default type would be (so this function template can be used for both map, vector or basically any other container). Is this possible?</p>\n\n<p>EDIT: I cannot use C++11 in any way, the compiler is gcc 4.1.2 (out of my control)</p>\n"}, {"tags": ["c++", "winapi", "combobox"], "comments": [{"owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 1, "creation_date": 1435779003, "post_id": 31169104, "comment_id": 50347864, "body": "From the picture it looks like the drop list is trying to open but is too small. Out of curiosity, did you try to resize the drop list. If you have the dialog in a resource file you can click on the arrow of the combobox and resize it there"}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 0, "creation_date": 1435779172, "post_id": 31169104, "comment_id": 50347950, "body": "Thanks, this was the problem! It&#39;s my first combo box / &quot;select box&quot;."}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 0, "creation_date": 1435779355, "post_id": 31169104, "comment_id": 50348059, "body": "BTW: Is it possible to use the name of the constant in the similar way like: <code>LCombo_Fill(dialog, IDC_T_UCLASS + index, esdata.unitgroups.head(), L&quot;All&quot;);</code>? So I could use loop to genarate controls."}, {"owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 0, "creation_date": 1435779587, "post_id": 31169104, "comment_id": 50348192, "body": "I am not really sure without trying it first"}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 0, "creation_date": 1435779733, "post_id": 31169104, "comment_id": 50348263, "body": "I meant to genarate items into multiple combo boxes."}, {"owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "edited": false, "score": 0, "creation_date": 1435780386, "post_id": 31169104, "comment_id": 50348631, "body": "Oh, then yes. We use loops to put items in a config file in multiple combo boxes. in your loop you could just name the actual Combobox and addstring in each step."}], "answers": [{"tags": [], "owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1435779504, "creation_date": 1435779504, "answer_id": 31170204, "question_id": 31169104, "link": "https://stackoverflow.com/questions/31169104/why-cannot-add-strings-to-combo-box-vs-c/31170204#31170204", "title": "Why cannot add strings to combo box? VS C++", "body": "<p>Resize the Combobox in order to see other addition. If you have the dialog in a resource file you can click on the arrow of the combobox and resize it there.</p>\n"}], "owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 31170204, "answer_count": 1, "score": 0, "last_activity_date": 1435790785, "creation_date": 1435775799, "last_edit_date": 1435790785, "question_id": 31169104, "link": "https://stackoverflow.com/questions/31169104/why-cannot-add-strings-to-combo-box-vs-c", "title": "Why cannot add strings to combo box? VS C++", "body": "<p>When I start my app and click on Triggers tab, there are few select boxes which should load list of items. There is build-in function which works (you can check it if you open scenario file testscen.scx from a menu and then click on Units tab, so the function  <code>ret = Units_HandleInit(dialog);</code> calls <code>Combo_Fill(dialog, IDC_U_TYPE, esdata.unitgroups.head(), L\"All\");</code> which loads data to type selectbox (view/editunits.cpp).</p>\n\n<p>When file is not loaded, so I want to do similar thing in module view/edittriggers2.cpp - there is function <code>BOOL Handle_WM_INITDIALOG2(HWND dialog)</code></p>\n\n<pre><code>BOOL Handle_WM_INITDIALOG2(HWND dialog)\n{\n    LCombo_Fill(dialog, IDC_T_UCLASS1, esdata.unitgroups.head(), L\"All\");\n    LCombo_Fill(dialog, IDC_T_UCLASS2, esdata.unitgroups.head(), L\"All\");\n    LCombo_Fill(dialog, IDC_T_UCLASS3, esdata.unitgroups.head(), L\"All\");\n    return TRUE;\n}\n</code></pre>\n\n<p>which calls <code>LCombo_Fill(dialog, IDC_T_UCLASS1, esdata.unitgroups.head(), L\"All\");</code> but unfortunately the only item is added the \"All\". I cannot understand this why, the first is added, and the rest items are not added? I can debug it and go through loop in the function to check that there are messages send to add the string.</p>\n\n<pre><code>esdata.unitgroups.head() returns link.\nWhen I debug the LCombo_Fill so it first jumps to [code]\ntemplate &lt;class T&gt; T * LinkList&lt;T&gt;::head()\n{\n    return _head;\n}\n</code></pre>\n\n<p>then to</p>\n\n<pre><code>inline LRESULT LCombo_Fill(HWND dialog, int id, const Link * list,\n        const wchar_t * nosel = NULL)\n{\n    return LinkComboBox_Fill(GetDlgItem(dialog, id), list, NULL, nosel);\n}\n</code></pre>\n\n<p>list is perfectly valid list of Unit types. I checked the addresses and values with Units and this is correct.\nnosel is \"All\"</p>\n\n<p>Then to:</p>\n\n<pre><code>LRESULT Combo_AddW(HWND combobox, LPCWSTR string, const void * data)\n{\n    LRESULT index = Combo_AddStringW(combobox, string);\n    Combo_SetItemData(combobox, index, data);\n\n    return index;\n}\n</code></pre>\n\n<p>Then to:</p>\n\n<pre><code>int LinkComboBox_Fill(HWND combobox, const Link *list, const Link *select,\n        const wchar_t * nosel)\n{\n    int ret = -1;\n\n    SendMessage(combobox, CB_RESETCONTENT, 0, 0);\n\n    if (nosel)\n        Combo_AddW(combobox, nosel, NULL);\n\n    for (; list; list = list-&gt;next())\n    {\n        LRESULT index = Combo_AddW(combobox, list-&gt;name(), list);\n\n        if (list == select)\n        {\n            SendMessage(combobox, CB_SETCURSEL, index, 0);\n            ret = index;\n        }\n    }\n\n    if (ret == -1 &amp;&amp; nosel)\n    {\n        SendMessage(combobox, CB_SETCURSEL, 0, 0);\n        ret = 0;\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p>Then to:</p>\n\n<pre><code>LRESULT Combo_AddW(HWND combobox, LPCWSTR string, const void * data)\n{\n    LRESULT index = Combo_AddStringW(combobox, string);\n    Combo_SetItemData(combobox, index, data);\n\n    return index;\n}\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>inline LRESULT Combo_SetItemData(HWND control, WPARAM index, const void * ptr)\n{\n    // LPARAM is defined as a LONG_PTR by the documentation. Hopefully that\n    // won't change.\n    return SendMessageW(control, CB_SETITEMDATA, index,\n        reinterpret_cast&lt;LPARAM&gt;(ptr));\n}\n// (the comments above are not of me)\n</code></pre>\n\n<p>ptr is 0x00000000</p>\n\n<p>Then in the loop the same functions are called:</p>\n\n<pre><code>LRESULT index = Combo_AddStringW(combobox, string);\nCombo_SetItemData(combobox, index, data);\n</code></pre>\n\n<p>So I need help to find the reason why the combo box is not filled with the values which are passed through loop.</p>\n\n<p>Note:\nDebug in the loop:\n<code>res = SendMessageW(control, CB_ADDSTRING, 0, (LPARAM)string);</code>\nres is 1</p>\n\n<p><code>LRESULT index = Combo_AddStringW(combobox, string);</code>\nresult is 1 (looks like index, this is increased while looping)</p>\n\n<p>in Combo_SetItemData:\n<code>LRESULT res = SendMessageW(control, CB_SETITEMDATA, index,\n        reinterpret_cast&lt;LPARAM&gt;(ptr));</code>\nres is 1</p>\n\n<p>I did not wrote the program and the source code is complex. I cannot to simplify it, but does someone have idea why the items are not added except the first item? None of the items which should be added to combo box is added.</p>\n\n<p>Project link:\n<a href=\"http://sourceforge.net/projects/autots/files/AOKTS%20update/aokts-1.0.1%20r72%20update_test.zip/download\" rel=\"nofollow\">http://sourceforge.net/projects/autots/files/AOKTS%20update/aokts-1.0.1%20r72%20update_test.zip/download</a>\nProject file name: aokts.sln</p>\n"}, {"tags": ["c++", "c", "function", "recursion"], "comments": [{"owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 3, "creation_date": 1435775739, "post_id": 31168949, "comment_id": 50345988, "body": "What are you entering for n? And what compiler are you using?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 3, "creation_date": 1435777230, "post_id": 31168949, "comment_id": 50346869, "body": "If you won&#39;t / can&#39;t run the debugger, try adding a &#39;cout&lt;&lt;c&lt;&lt;&quot; &quot;&#39;  at the begining of f().. to observe the behavior."}, {"owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "reply_to_user": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 0, "creation_date": 1435818550, "post_id": 31168949, "comment_id": 50360749, "body": "@stazima take value of n=3......"}, {"owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435818620, "post_id": 31168949, "comment_id": 50360786, "body": "@ DOUGLAS O. MOEN.....yes sir i noticed the behavior but i could&#39;nt understand the reason.....can explain it??"}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "reply_to_user": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435818637, "post_id": 31169572, "comment_id": 50360792, "body": "That depends on value of n being passed in function n. If you will keep on adding anything to c, ultimately it will overflow and could become 0."}, {"owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "reply_to_user": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435819065, "post_id": 31169572, "comment_id": 50361027, "body": "Then it will loop forever because n will never be 6 , so it will keep on calling f(n-2); recursively , increasing value of c."}], "tags": [], "owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777357, "creation_date": 1435777357, "answer_id": 31169572, "question_id": 31168949, "link": "https://stackoverflow.com/questions/31168949/why-is-the-value-of-c-changing-in-the-following-code/31169572#31169572", "title": "Why is the value of &quot;C&quot; changing in the following code?", "body": "<p>Because value of c is being changed in below code :</p>\n\n<pre><code>else{       \n        c=c+1;    \n        f(n-2);    \n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1435818745, "creation_date": 1435775286, "last_edit_date": 1435818745, "question_id": 31168949, "link": "https://stackoverflow.com/questions/31168949/why-is-the-value-of-c-changing-in-the-following-code", "title": "Why is the value of &quot;C&quot; changing in the following code?", "body": "<blockquote>\n  <p>the output I'm getting for the given code is \"0\" even though I\n  initialized the value of c as \"1\"...can somebody explain it...\n  Why is the value of \"C\" changing in the following code??</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint c=1; // global initialized 'c' as 1..\n\nlong long f(long long n){\n\n    if(n==6){\n\n        return 2;\n    }\n\n    else{   \n\n        c=c+1;\n\n        f(n-2);\n\n    }\n\n}\nint main()\n{\n    long long n,ans,p;\n    cin&gt;&gt;n;\n\n    ans=f((2*n)-2);\n\n    cout&lt;&lt;c; //printing out the value of 'c'\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c#", "c++", "oop"], "comments": [{"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 3, "creation_date": 1435774925, "post_id": 31168784, "comment_id": 50345449, "body": "The code that you&#39;ve shown isn&#39;t valid in any of the languages that you&#39;ve tagged the question with.  So, which is better, neither, as neither compiles."}, {"owner": {"reputation": 8323, "user_id": 2316200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc15723047a4717a5c77b3c55bb112?s=128&d=identicon&r=PG", "display_name": "Pierre-Luc Pineault", "link": "https://stackoverflow.com/users/2316200/pierre-luc-pineault"}, "edited": false, "score": 1, "creation_date": 1435774932, "post_id": 31168784, "comment_id": 50345453, "body": "None of your examples will compile in C#."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1435774961, "post_id": 31168784, "comment_id": 50345481, "body": "This <i>isn&#39;t</i> a language-agnostic question - and the environment affects a good bit if it&#39;s &#39;proper&#39; to do."}, {"owner": {"reputation": 135, "user_id": 3256369, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/254c70898249487a70396e090aad1540?s=128&d=identicon&r=PG&f=1", "display_name": "user3256369", "link": "https://stackoverflow.com/users/3256369/user3256369"}, "edited": false, "score": 0, "creation_date": 1435775074, "post_id": 31168784, "comment_id": 50345565, "body": "This is a logic question that pertains to the listed languages, more than a code specific question."}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1435775141, "post_id": 31168784, "comment_id": 50345621, "body": "You provided some code as if there was some &quot;main&quot; code executing in the body of the class. That is not the case. Running this &quot;main&quot; code in a method would defeat the purpose of the question I believe, as it would be run in a void method itself, calling in turn another method. Please clarify what you want by provided compiling code."}], "answers": [{"comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1435795781, "post_id": 31168839, "comment_id": 50354932, "body": "What makes you think it <i>&quot;should [always] be performed on the class variable&quot;</i>?"}], "tags": [], "owner": {"reputation": 155, "user_id": 2469724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec9305805121dafd6c7bdf6151793be?s=128&d=identicon&r=PG", "display_name": "Pherion", "link": "https://stackoverflow.com/users/2469724/pherion"}, "is_accepted": true, "score": 0, "last_activity_date": 1435774915, "creation_date": 1435774915, "answer_id": 31168839, "question_id": 31168784, "link": "https://stackoverflow.com/questions/31168784/void-method-type-vs-method-that-returns-for-altering-a-private-global-variable/31168839#31168839", "title": "(void method type vs method that returns) for altering a private global variable", "body": "<p>As long as your code remains private to the class, I see no reason there would be security issues.  I personally would chose the void version of the method, since anyone calling the changeX() method also has access to x directly (there all in the same class).  Returning int opens up the possibility of a local variable having operations performed on it that should be performed on the class variable.</p>\n"}, {"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435777022, "post_id": 31169004, "comment_id": 50346728, "body": "But it&#39;s <i>not</i> a &quot;functional&quot; version due to a side-effect; doesn&#39;t matter what it is named. Some languages (and ecosystems around such) are a strict modify/read split while others encourage a modify+return .."}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435782152, "post_id": 31169004, "comment_id": 50349630, "body": "@user2864740 There is no side-effect in the method, it simply calculates and returns a value. The caller then assigns that value to the field or not, but that&#39;s up to the caller, it is not a side effect of calling the method. Maybe I wasn&#39;t clear in my sentence, I guess I clarified now."}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435782541, "post_id": 31169004, "comment_id": 50349833, "body": "@user2864740 Regarding the second part of your comment, I think it depends more on the precise use case and calculations than on the language/ecosystem. I could be Java or C, I would still find that decoupling the calculation from what you do with it is best (I have to precise here that we are talking about a <b>private</b> method, this could not be generalized to public methods)."}], "tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1435783265, "last_edit_date": 1435783265, "creation_date": 1435775428, "answer_id": 31169004, "question_id": 31168784, "link": "https://stackoverflow.com/questions/31168784/void-method-type-vs-method-that-returns-for-altering-a-private-global-variable/31169004#31169004", "title": "(void method type vs method that returns) for altering a private global variable", "body": "<p>If we clearly are talking about private stuff here (private method and private field), then I almost always prefer the functional version of the method: returning the value.</p>\n\n<p>If you can encapsulate all calculations in the body of this method, then I see no reason to force it to update the private field as well. The methods should do one thing, and do it well. Just calculate and return the value, and let the calling code somewhere else in your class do whatever it likes with it, because that code will know the general picture. </p>\n\n<p>However, you would obviously change the name of method to something like <code>calculateY()</code>, where Y would <em>not</em> refer the name of your field, but rather the data that it holds (the field X would be named describing how it is useful to the class, while Y would describe how it is calculated, which may or may not be 2 different things depending on the use case).</p>\n"}], "owner": {"reputation": 135, "user_id": 3256369, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/254c70898249487a70396e090aad1540?s=128&d=identicon&r=PG&f=1", "display_name": "user3256369", "link": "https://stackoverflow.com/users/3256369/user3256369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 1, "closed_date": 1435775708, "accepted_answer_id": 31168839, "answer_count": 2, "score": -4, "last_activity_date": 1435783265, "creation_date": 1435774690, "question_id": 31168784, "link": "https://stackoverflow.com/questions/31168784/void-method-type-vs-method-that-returns-for-altering-a-private-global-variable", "closed_reason": "Opinion-based", "title": "(void method type vs method that returns) for altering a private global variable", "body": "<p>Let's say we have a global variable called x, as shown below:</p>\n\n<pre><code>public class test\n{\n    private int x = 0;\n    //lots of code here...\n}\n</code></pre>\n\n<p>Now lets say we want, at some arbitrary point, to alter the value of x within the  class test (not from outside the class).</p>\n\n<p>There are two ways to do  this:</p>\n\n<p><strong>Using a void method:</strong></p>\n\n<pre><code>public class test\n{\n     private int x = 0;\n     //lots of code here...\n     changeX();\n\n     private void changeX()\n     {\n         // calculate stuff\n         this.x = newXValue;\n     }\n}\n</code></pre>\n\n<p><strong>Using a int type method:</strong></p>\n\n<pre><code>public class test\n{\n     private int x = 0;\n     //lots of code here...\n     x = changeX();\n\n     private int changeX()\n     {\n         // calculate stuff\n         return = newXValue;\n     }\n}\n</code></pre>\n\n<p>Is there any reason as to why I should choose one over the other? Security reasons? readability?</p>\n\n<p>I have this happening throughout my program and am having trouble deciding on which convention to use.</p>\n"}, {"tags": ["c++", "regex", "c++11", "recursion"], "comments": [{"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1435774808, "post_id": 31168744, "comment_id": 50345380, "body": "i m more ineteresed in the recursion part why it is not returning 0 but some random number."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 6, "creation_date": 1435774893, "post_id": 31168744, "comment_id": 50345430, "body": "Your <code>regex_search</code> true branch has no <code>return</code> statement. Presumably it should return 1?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435775075, "post_id": 31168744, "comment_id": 50345566, "body": "What compiler are you using?  this could be related: <a href=\"http://stackoverflow.com/questions/12530406/is-gcc-4-7-and-gcc-4-8-buggy-about-regular-expressions\" title=\"is gcc 4 7 and gcc 4 8 buggy about regular expressions\">stackoverflow.com/questions/12530406/&hellip;</a>"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 1, "creation_date": 1435775239, "post_id": 31168744, "comment_id": 50345680, "body": "Proper indenting makes it easier to see, but @ooga&#39;s statement is why you&#39;re getting an unexpected return. I&#39;ve voted to close this question as a typo that is unlikely to help future visitors."}, {"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435775270, "post_id": 31168744, "comment_id": 50345705, "body": "i don&#39;t get any warnings"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1435775301, "post_id": 31168744, "comment_id": 50345719, "body": "Then your warning levels aren&#39;t high or pedantic enough."}], "answers": [{"tags": [], "owner": {"reputation": 8835, "user_id": 2054602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa714b545cf57418ee53dc5c6c9517b5?s=128&d=identicon&r=PG&f=1", "display_name": "Radu Di\u021b\u0103", "link": "https://stackoverflow.com/users/2054602/radu-di%c8%9b%c4%83"}, "is_accepted": false, "score": 0, "last_activity_date": 1435775625, "creation_date": 1435775625, "answer_id": 31169059, "question_id": 31168744, "link": "https://stackoverflow.com/questions/31168744/inconsistent-return-value-of-recursive-function-in-a-regex-program/31169059#31169059", "title": "Inconsistent return value of recursive function in a regex program", "body": "<p>You need to:</p>\n\n<pre><code>return find_tag(m.suffix(),cont);\n</code></pre>\n\n<p>Because you don't do that even though the recursion finishes you don't catch it.</p>\n\n<p>The large number you're seeing is whatever the compiler finds on the stack after the recursion finishes. This depends on the compiler but most likely is a combination of the address of <code>find_tag</code> and some from <code>data</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435776525, "post_id": 31169183, "comment_id": 50346433, "body": "since i m modifying the same container it will work both the soltuions."}, {"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435777940, "post_id": 31169183, "comment_id": 50347296, "body": "and i guess i was using the wrong approach after all thank you for such an elegant solution."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435778063, "post_id": 31169183, "comment_id": 50347358, "body": "@rahultyagi, I am glad I was able to help."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1435776051, "last_edit_date": 1495540715, "creation_date": 1435776051, "answer_id": 31169183, "question_id": 31168744, "link": "https://stackoverflow.com/questions/31168744/inconsistent-return-value-of-recursive-function-in-a-regex-program/31169183#31169183", "title": "Inconsistent return value of recursive function in a regex program", "body": "<p><a href=\"https://stackoverflow.com/a/31169059/434551\">The answer by @hades2510</a> should resolve your problem.</p>\n\n<p>Suggestions for improvement.</p>\n\n<ol>\n<li><p>Change the name of the function to <code>find_tags</code> since you are expecting to find many tags in a recursive manner.</p></li>\n<li><p>You don't need the return type to be <code>int</code>. It doesn't seem useful at all. If you have any tags, they will be returned via the output argument.</p></li>\n<li><p>If you go by that, the function can be simplified to:</p>\n\n<pre><code>void find_tags(const string&amp; s,vector&lt;string&gt; &amp; cont )\n{\n   smatch m;\n   if(regex_search(s,m,regex(\"&lt;(.*)&gt;(.*)&lt;/\\\\1&gt;\")))\n   {\n      cont.push_back(m[1]);\n      find_tags(m[2],cont);\n      find_tags(m.suffix(),cont);\n   }\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "closed_date": 1435848772, "accepted_answer_id": 31169183, "answer_count": 2, "score": -1, "last_activity_date": 1435776051, "creation_date": 1435774522, "last_edit_date": 1435775765, "question_id": 31168744, "link": "https://stackoverflow.com/questions/31168744/inconsistent-return-value-of-recursive-function-in-a-regex-program", "closed_reason": "Not suitable for this site", "title": "Inconsistent return value of recursive function in a regex program", "body": "<p>I'm using this recursive function to find the tags in a HTML, the output is okay as of now but I'm more interested in the return value of this function <code>find_tag</code> which comes out to be :</p>\n\n<pre><code> -somelargenumber\n  html\n  head\n  body\n</code></pre>\n\n<p>where the <code>-somelargenumber</code> is the returned value of function which is  different every time I run the compiled program.</p>\n\n<p>But according to I made the function it must return 0 at some point in time and not any other value. Can anybody explain this?</p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;regex&gt;\n#include&lt;iostream&gt;\n#include&lt;iomanip&gt;\nusing namespace std;\nint find_tag(const string&amp; s,vector&lt;string&gt; &amp; cont )\n{\n    smatch m;\n    if(s.size()&gt;0)\n    {\n        if(regex_search(s,m,regex(\"&lt;(.*)&gt;(.*)&lt;/\\\\1&gt;\")))\n        {\n            cont.push_back(m[1]);\n            find_tag(m[2],cont);\n            find_tag(m.suffix(),cont);\n        }\n        else\n        {\n            return 0;\n        }\n    }\n    else\n    {\n        return 0;\n    }\n}\nint main()\n{\n    cmatch m;\n    vector&lt;string&gt; cont;\n    string data {\"&lt;html&gt;&lt;head&gt;head data&lt;/head&gt;&lt;body&gt;body data&lt;/body&gt;&lt;/html&gt;\"};\n    cout&lt;&lt;find_tag(data,cont);\n    if(!(cont.empty()))\n    {\n        for(auto &amp;a:cont)\n        {\n            cout&lt;&lt;a&lt;&lt;endl;\n        }\n    }\n    else\n    {\n        cout&lt;&lt;\"\\n not found\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>PS: I am not trying to parse any HTML here. I am just interested in the returned value of the function.</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp", "codeblocks", "reduction"], "comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1435841174, "post_id": 31168613, "comment_id": 50375298, "body": "Perhaps the stack overflow is real? What is NPartsTot-Nboun? You are allocating 408*sizeof(double)*(NPartsTot-Nboun) on the stack of each thread..."}, {"owner": {"reputation": 15, "user_id": 5041283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b863db701779be37bde424313c3b10?s=128&d=identicon&r=PG&f=1", "display_name": "deba123", "link": "https://stackoverflow.com/users/5041283/deba123"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1435845961, "post_id": 31168613, "comment_id": 50378921, "body": "Npartstot and Nboun are two constants fed to the program using another function which reads these values from a file...Their values remain same throughout the entire program..."}, {"owner": {"reputation": 15, "user_id": 5041283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b863db701779be37bde424313c3b10?s=128&d=identicon&r=PG&f=1", "display_name": "deba123", "link": "https://stackoverflow.com/users/5041283/deba123"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1435846050, "post_id": 31168613, "comment_id": 50378990, "body": "By the way, I tried running it on linux and I get a segmentation fault (core dumped) error...not sure what is going on here..."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1436171975, "post_id": 31168613, "comment_id": 50480220, "body": "So, how big are those constants? How much space are you allocating on each stack? (Consider that if NPartsTot-Nboun == 10000, you need ~31MiB ; a thread stack is often smaller than that...). The SEGV on Linux could also be a stack overflow."}, {"owner": {"reputation": 15, "user_id": 5041283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b863db701779be37bde424313c3b10?s=128&d=identicon&r=PG&f=1", "display_name": "deba123", "link": "https://stackoverflow.com/users/5041283/deba123"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1436438702, "post_id": 31168613, "comment_id": 50617919, "body": "So you are telling me the space that is allocated into each stack in a single thread is smaller than that is allocated when the code runs serially? (Sorry for the late reply, I was busy with other courses)."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1436532221, "post_id": 31168613, "comment_id": 50666165, "body": "The permissible size of the initial thread (or serial code) is controlled by the operating system and may be &quot;unlimited&quot;. The size of thread stacks in OpenMP can be controlled by using the OMP_STACKSIZE environment variable and will not be &quot;unlimited&quot;."}], "owner": {"reputation": 15, "user_id": 5041283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b863db701779be37bde424313c3b10?s=128&d=identicon&r=PG&f=1", "display_name": "deba123", "link": "https://stackoverflow.com/users/5041283/deba123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435774728, "creation_date": 1435774041, "last_edit_date": 1435774728, "question_id": 31168613, "link": "https://stackoverflow.com/questions/31168613/openmp-code-stops-working-in-codeblocks", "title": "OpenMp Code stops working in Code::Blocks", "body": "<p>I have to parallize big chunk of code in code::blocks using OpenMp. But for some reason it stops working the moment I run it. The code compiles correctly though. I ran it in Microsoft Visual Studio 12 debugger and it gives stack overflow exception. Please help. Here's the code..</p>\n\n<pre><code>#pragma omp parallel\n{\nint dxij_priv[] = {0,0,0,0};\nint vt_priv[] = {0,0,0,0};\ndouble sp_priv[Npartstot-Nboun][100][4],torquep_priv[Npartstot-Nboun][4],fmp_priv[Npartstot-Nboun][4];\nfor(i=Nboun+1;i&lt;=Npartstot;++i){\n    for(int n=1;n&lt;=Nneb[i];++n){\n        for(int p=1;p&lt;=3;++p){\n            sp_priv[i][n][p]=0;}}}\n    for(i=Nboun+1;i&lt;=Npartstot;++i){\n        for(int p=1;p&lt;=3;++p){\n            torquep_priv[i][p]=0;\n            fmp_priv[i][p]=0;\n    }}\n#pragma omp for nowait reduction(+:dal) reduction(+:st) reduction(+:vtang) reduction(+:sdotr)\nfor (i=Nboun+1;i&lt;=Npartstot;++i){\n\n    for (int n=1;n&lt;=Nneb[i];++n){\n\n        if(dxij_priv[1]&gt;L-rng*(R[i]+R[j]))\n          dxij_priv[1]=dxij_priv[1]-L;   //Same for other indices...\n\n            else if (dxij_priv[1]&lt;-L+rng*(R[i]+R[j])) //Same for other indices...\n                  dxij_priv[1]=dxij_priv[1]+L;                \n\n        for (int p=1;p&lt;=3;++p){\n          dal=dal+mij[p]*(vp[i][p]-vp[j][p]);\n        }\n        vt_priv[1]=vt_priv[1]-dxij_priv[i]; //Same for other indices\n                sdotr=0;\n        for (int p=1;p&lt;=3;++p)\n                    sp_priv[i][n][p] += vt_priv[p]*dt;\n        for (int p=1;p&lt;=3;++p)\n                    sdotr += sp_priv[i][n][p]*dxij_priv[p];\n        for (int p=1;p&lt;=3;++p)\n                    sp_priv[i][n][p] -= sdotr*dxij_priv[p]/d/d;\n        for (int p=1;p&lt;=3;++p)\n                    st += sp_priv[i][n][p]*sp_priv[i][n][p];\n        st=sqrt(st);\n        for (int p=1;p&lt;=3;++p)\n                    vtang += vt_priv[p]*vt_priv[p];\n                    vtang=sqrt(vtang);\n        for (int p=1;p&lt;3;++p) sp[i][n][p] *=st/st_prev;\n        for (int p=1;p&lt;=3;++p) tij[p]=vt_priv[p]/vtang;\n        for (int p=1;p&lt;=3;p++){\n                  fmp_priv[i][p]=fmp_priv[i][p]+mij[p]*NForce+tij[p]*TForce;\n                  torquep_priv[i][1]=torquep_priv[i][1]-R[i]/d*TForce*(dxij_priv[2]*tij[3]-dxij_priv[3]*tij[2]);  //Same for other indices...\n                }\n        } //end of n loop\n        dxij[1] += dxij_priv[1];dxij[2] += dxij_priv[2];dxij[3] += dxij_priv[3];vt[1] += vt_priv[1];vt[2] += vt_priv[2];vt[3] += vt_priv[3];\n    for(int z=Nboun+1;z&lt;=Npartstot;++z)\n        for(int n=1;n&lt;=Nneb[i];++n)\n            for(int p=1;p&lt;=3;++p)\n                sp[z][n][p] += sp_priv[z][n][p];\n    for(int z=Nboun+1;z&lt;=Npartstot;++z)\n        for(int p=1;p&lt;=3;++p){\n            torquep[z][p] += torquep_priv[z][p];\n            fmp[z][p] += fmp_priv[z][p];\n    } //end of p\n   }//end of i\n  } //end of #pragma\n</code></pre>\n\n<p>I had to edit out some parts of the code(the actual code is much bigger than this) and I am showing only those lines that involve reductions. When I run the program on Code::Blocks I get an error prompt: Parallized.exe has stopped working.</p>\n\n<p>The command for compiling is : g++ -fopenmp Parallized.cpp -lm.</p>\n\n<p>I have a two core four CPU computer.</p>\n\n<p>In my opinion I think I am messing up on the reduction of the array variables somewhere.</p>\n"}, {"tags": ["c++", "lua", "compiler-errors", "codeblocks", "mingw32"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1435774321, "post_id": 31168590, "comment_id": 50345087, "body": "<code>lua.h</code> isn&#39;t a linker issue. It is a compiler issue. You need the appropriate <code>-I</code> flag pointing to the correct directory."}, {"owner": {"reputation": 155, "user_id": 1475180, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eQhgw.png?s=128&g=1", "display_name": "Luft", "link": "https://stackoverflow.com/users/1475180/luft"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435774760, "post_id": 31168590, "comment_id": 50345348, "body": "Thank you, do you know where I would go to see about fixing that? (somewhat inexperienced with Codeblocks troubleshooting)"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1435774859, "post_id": 31168590, "comment_id": 50345414, "body": "There should be an &quot;Additional Compilation Options&quot; or similar option I would expect. (Or something talking about CFLAGS/etc.)"}, {"owner": {"reputation": 155, "user_id": 1475180, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eQhgw.png?s=128&g=1", "display_name": "Luft", "link": "https://stackoverflow.com/users/1475180/luft"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435776304, "post_id": 31168590, "comment_id": 50346313, "body": "My bad - It appears that I actually made a mistake in placement of my header files and upon correction it finally works. Many thanks"}], "owner": {"reputation": 155, "user_id": 1475180, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eQhgw.png?s=128&g=1", "display_name": "Luft", "link": "https://stackoverflow.com/users/1475180/luft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 914, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435773973, "creation_date": 1435773973, "question_id": 31168590, "link": "https://stackoverflow.com/questions/31168590/how-to-correctly-link-lua-5-3-with-codeblocksc", "title": "How to correctly Link lua 5.3 with CodeBlocks(C++)", "body": "<p>I am creating a project using SDL2 and Lua, however I am having linking issues with the compiler.  I've merged the lua libary, include, and dlls with that of SDL to create a common link, but the compiler refuses to recognize \"lua.h\"</p>\n\n<p>Additional Linker Options: -lmingw32 -lSDL2main -lSDL2 -lSDL2_image -llua53</p>\n\n<p>Code I am using to test:</p>\n\n<pre><code>extern \"C\" {\n#include \"lua.h\"\n}\n\nint main()\n{\n  lua_State *L = lua_open();\n  lua_close(L);\n  return 0;\n}\n</code></pre>\n\n<p>If I am doing something incorrect or if I am missing anything crucial please let me know.</p>\n"}, {"tags": ["c++", "xml", "qt", "parsing"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1435774383, "post_id": 31168534, "comment_id": 50345127, "body": "What you&#39;re parsing is not XML, thus you can&#39;t expect <code>QXmlStreamReader</code> to cope with it. It should be a simple matter to patch the reader to accept such malformed XML, though. It&#39;ll be less work than any other solution, most likely we&#39;re talking about a 2-3 line patch :)"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1435776006, "post_id": 31168534, "comment_id": 50346130, "body": "Most of the time QXmlStreamReader will keep chugging along in after an error.  What exactly do you mean by &quot;it breaks&quot;?"}, {"owner": {"reputation": 657, "user_id": 2061816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7635ab7cff215b369cd16e8c08c437cb?s=128&d=identicon&r=PG", "display_name": "lagoru", "link": "https://stackoverflow.com/users/2061816/lagoru"}, "edited": false, "score": 0, "creation_date": 1435776630, "post_id": 31168534, "comment_id": 50346499, "body": "It sets QXmlStreamReader into error state, which cannot be removed. (there is clear method - but it also resets offset of characters processed)."}, {"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1435776794, "post_id": 31168534, "comment_id": 50346604, "body": "Not really a solution. But if this is the only error and always the same error, the easiest way would probably be to simply preprocess the file and change those lines. Should be pretty straightforward."}, {"owner": {"reputation": 657, "user_id": 2061816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7635ab7cff215b369cd16e8c08c437cb?s=128&d=identicon&r=PG", "display_name": "lagoru", "link": "https://stackoverflow.com/users/2061816/lagoru"}, "edited": false, "score": 0, "creation_date": 1435777214, "post_id": 31168534, "comment_id": 50346849, "body": "Already thought about this but I would rather not change this since there are many more places just as this one with different names. If nothing possible I will use QRegExp and parse it myself."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1435779292, "post_id": 31168534, "comment_id": 50348032, "body": "It&#39;s a little bit hacky, but one solution for parsing HTML with an XML parser is to run it through <a href=\"http://tidy.sourceforge.net/\" rel=\"nofollow noreferrer\">TidyLib</a> to convert it to XHTML."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 1, "creation_date": 1435782079, "post_id": 31168534, "comment_id": 50349584, "body": "@Bowdzone Wait a minute, are we seriously arguing that a 2-3 line patch to Qt, that you already have sources for and should be compiling yourself anyway, is more work than having to patch up the XML in some other way? Why not leverage the parser that already exists in the reader and make it do your bidding? <code>QRegExp</code> cannot parse XML due to fundamental theoretical reasons, so let&#39;s not even start about that. You got the source to Qt, <b>use it</b>."}, {"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1435816010, "post_id": 31168534, "comment_id": 50359705, "body": "@KubaOber I&#39;m not arguing.  I never looked at the sources of <code>QXmlReader</code> so I can&#39;t judge how complex such a change would be. I just said that if that <i>is the only error</i> it would maybe be easier. A patch would definitely a better way as I stated that my suggestion is <i>not really a solution</i>."}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 2061816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7635ab7cff215b369cd16e8c08c437cb?s=128&d=identicon&r=PG", "display_name": "lagoru", "link": "https://stackoverflow.com/users/2061816/lagoru"}, "is_accepted": false, "score": 0, "last_activity_date": 1435861303, "creation_date": 1435861303, "answer_id": 31191901, "question_id": 31168534, "link": "https://stackoverflow.com/questions/31168534/is-there-a-way-to-get-qxmlstreamreader-to-cope-with-malformed-xml/31191901#31191901", "title": "Is there a way to get QXmlStreamReader to cope with malformed XML?", "body": "<p>The easiest way I found is usage of HTMLTidy (thanks for advice to @MrEricSir) It repairs broken XML. One downgrade is fact that it adds unnecessary tags like /body/ etc.</p>\n"}], "owner": {"reputation": 657, "user_id": 2061816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7635ab7cff215b369cd16e8c08c437cb?s=128&d=identicon&r=PG", "display_name": "lagoru", "link": "https://stackoverflow.com/users/2061816/lagoru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1435861303, "creation_date": 1435773782, "last_edit_date": 1435774432, "question_id": 31168534, "link": "https://stackoverflow.com/questions/31168534/is-there-a-way-to-get-qxmlstreamreader-to-cope-with-malformed-xml", "title": "Is there a way to get QXmlStreamReader to cope with malformed XML?", "body": "<p>I am trying to parse some values from website. To accomplish this I am using <code>QXmlStreamReader</code>. After I start parsing I receive XML Error: \"Expected '=', but got '>'.\". It breaks on this malformed element:</p>\n\n<pre><code>&lt;tbody pageStartAt &gt;\n</code></pre>\n\n<p>I suppose that reason of this is because standard stands that everything after main name of the tag should have some values attached to it like this:</p>\n\n<pre><code>&lt;tbody pageStartAt=\"2\" &gt; - this is working.\n</code></pre>\n\n<p>My question is - is there any way to prevent this ? I just want to ignore subtags that do not have values. I would rather avoid using QWebKit - I think this is overkill.</p>\n"}, {"tags": ["c++", "binary-search-tree", "lvalue"], "answers": [{"comments": [{"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435773891, "post_id": 31168558, "comment_id": 50344871, "body": "Oh... well.. thats a really stupid error. Thank you!"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 6, "last_activity_date": 1435774272, "last_edit_date": 1435774272, "creation_date": 1435773855, "answer_id": 31168558, "question_id": 31168511, "link": "https://stackoverflow.com/questions/31168511/c-expression-must-be-a-modifiable-lvalue/31168558#31168558", "title": "C++ - expression must be a modifiable lvalue?", "body": "<p>It seems that you mean the following</p>\n\n<pre><code>while (y != NULL &amp;&amp; x == y-&gt;right)\n                     ^^^\n</code></pre>\n\n<p>As for the meaning of the error message then when you use the assignment operator then its priority is less than the priorities of equality and logical operators and you have in fact </p>\n\n<pre><code>while ( ( y != NULL &amp;&amp; x ) = y-&gt;right)\n</code></pre>\n\n<p>Take into account that it is much better to place the declaration of <code>y</code> in the code block of the else statement because it is used only in this scope</p>\n\n<pre><code>//...\nelse\n{\n    node* y = x-&gt;parent; \n</code></pre>\n"}], "owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 31168558, "answer_count": 1, "score": 1, "last_activity_date": 1435774272, "creation_date": 1435773714, "question_id": 31168511, "link": "https://stackoverflow.com/questions/31168511/c-expression-must-be-a-modifiable-lvalue", "title": "C++ - expression must be a modifiable lvalue?", "body": "<p>So I'm implementing a BST right now and I'm trying to write a successor function. This is what I have right now: </p>\n\n<pre><code>int BinarySearchTree::TREE_SUCCESSOR(node* x)\n{\n\nnode* y = NULL;\n\nif (x-&gt;right != NULL)\n{\n    return FIND_MIN(x-&gt;right);\n}\nelse\n{\n    y = x-&gt;parent; \n    while (y != NULL &amp;&amp; x = y-&gt;right)\n    {\n        x = y;\n        y = y-&gt;parent;\n    }\n    return y-&gt;key; \n}\n} \n</code></pre>\n\n<p>however on this line: </p>\n\n<pre><code>while (y != NULL &amp;&amp; x = y-&gt;right)\n</code></pre>\n\n<p>I get this error on <code>y</code>: </p>\n\n<blockquote>\n  <p>Expression must be a modifiable lvalue </p>\n</blockquote>\n\n<p>Why am I getting this error? </p>\n\n<p>Any help would be greatly appreciated, thanks!! </p>\n"}, {"tags": ["c++", "crtp", "icc"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435773664, "post_id": 31168442, "comment_id": 50344739, "body": "You mean <code>C(int i) : B&lt;C&gt;(i) {}</code>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435773723, "post_id": 31168442, "comment_id": 50344776, "body": "@Jarod42: That would probably solve the problem, but the language does not require it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435773860, "post_id": 31168442, "comment_id": 50344850, "body": "both <a href=\"http://coliru.stacked-crooked.com/a/cc676b7593dd8ee8\" rel=\"nofollow noreferrer\">g++</a> and <a href=\"http://coliru.stacked-crooked.com/a/08b15e65010e25c6\" rel=\"nofollow noreferrer\">clang++</a> will compile as is."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1435773945, "post_id": 31168442, "comment_id": 50344893, "body": "<code>Class A</code> could be removed, right?"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1435773945, "post_id": 31168442, "comment_id": 50344894, "body": "Seems to be a compiler bug: <a href=\"http://stackoverflow.com/questions/8887864/template-base-constructor-call-in-member-initialization-list-error\" title=\"template base constructor call in member initialization list error\">stackoverflow.com/questions/8887864/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1435774040, "creation_date": 1435774040, "answer_id": 31168610, "question_id": 31168442, "link": "https://stackoverflow.com/questions/31168442/crtc-without-default-constructor/31168610#31168610", "title": "CRTC without default constructor", "body": "<p>The code is correct.</p>\n\n<p>A possible workaround for <em>icpc</em> is to fully specify the base class:</p>\n\n<pre><code>C(int i) : B&lt;C&gt;(i) {}\n</code></pre>\n"}], "owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1435774509, "accepted_answer_id": 31168610, "answer_count": 1, "score": 2, "last_activity_date": 1435774040, "creation_date": 1435773435, "last_edit_date": 1435773865, "question_id": 31168442, "link": "https://stackoverflow.com/questions/31168442/crtc-without-default-constructor", "closed_reason": "Duplicate", "title": "CRTC without default constructor", "body": "<p>I'm having some trouble figuring out if this is a problem with my compiler:</p>\n\n<pre><code>class A\n{\npublic:\n    A(int i) {}\n};\n\ntemplate &lt;typename T&gt;\nclass B : public A\n{\npublic:\n    B(int i) : A(i) {}\n    T test() {return T(10);}\n};\n\nclass C : public B&lt;C&gt;\n{\npublic:\n    C(int i) : B(i) {}\n};\n\nint main()\n{\n    C c(5);\n}\n</code></pre>\n\n<blockquote>\n  <p>error: argument list for class template \"B\" is missing</p>\n</blockquote>\n\n<p>This code seems to compile correctly in Visual Studio 2012, but it isn't working on icpc 9.1 (which I have to use for this project).</p>\n"}, {"tags": ["c++", "c++11", "compiler-errors", "jgrasp"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1435774604, "post_id": 31168383, "comment_id": 50345247, "body": "From your comment, it sounds like the file you&#39;re modifying has no effect on your build commands"}, {"owner": {"reputation": 324, "user_id": 1869039, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/999fa5104eb27aed84674af398b1e060?s=128&d=identicon&r=PG", "display_name": "David Lerner", "link": "https://stackoverflow.com/users/1869039/david-lerner"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1436999110, "post_id": 31168383, "comment_id": 50853608, "body": "Solution was to switch to codeblocks."}, {"owner": {"reputation": 1, "user_id": 12756209, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/032bb74462eb91a8bfdb6c014483c166?s=128&d=identicon&r=PG", "display_name": "user12756209", "link": "https://stackoverflow.com/users/12756209/user12756209"}, "edited": false, "score": 0, "creation_date": 1579627630, "post_id": 31168383, "comment_id": 105827391, "body": "I have the same issue with jGrasp. If you don&#39;t have access to Microsoft Visual Studios (Windows version only, Mac version can&#39;t use C++11), you can use an online compiler such as repl.it"}], "owner": {"reputation": 324, "user_id": 1869039, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/999fa5104eb27aed84674af398b1e060?s=128&d=identicon&r=PG", "display_name": "David Lerner", "link": "https://stackoverflow.com/users/1869039/david-lerner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1579627630, "creation_date": 1435773260, "last_edit_date": 1435775841, "question_id": 31168383, "link": "https://stackoverflow.com/questions/31168383/compile-to-c11-in-jgrasp", "title": "Compile to c++11 in Jgrasp", "body": "<p>I have Jgrasp set up and running fine with c++. I want to use c++11. I get the following compile error:</p>\n\n<pre><code>gift1.cpp:52:24: warning: range-based 'for' loops only available with -std=c++11 or -std=gnu++11\n</code></pre>\n\n<p>Which I attempt to solve by clicking Settings, compiler settings, workspace. I copied my environment settings \"g++ - generic\" and renamed it \"user: g++ - generic.\" I then clicked edit. I changed the original compile code:</p>\n\n<p><code>g++  %&lt;CY&gt; %&lt;D&gt; -g %&lt;D&gt; -c  -o %&lt;RELE_DEF_BIN_DIR&gt;%&lt;base&gt;.o %&lt;&gt; %&lt;REL_FILE&gt;</code></p>\n\n<p>to</p>\n\n<pre><code>g++  %&lt;CY&gt; %&lt;D&gt; -g %&lt;D&gt; -c  -o -std=c++11 %&lt;RELE_DEF_BIN_DIR&gt;%&lt;base&gt;.o %&lt;&gt; %&lt;REL_FILE&gt;\n</code></pre>\n\n<p>But it still gives the same error. (I added \"-std=c++11\".)</p>\n\n<p>Edit: I have changed the string to </p>\n\n<pre><code>  g++  -std=c++11 %&lt;CY&gt; %&lt;D&gt; -g %&lt;D&gt; -c  -o %&lt;RELE_DEF_BIN_DIR&gt;%&lt;base&gt;.o %&lt;&gt; %&lt;REL_FILE&gt;\n</code></pre>\n\n<p>but have the same problem. I agree with the comment that this just doesn't appear to be modifying my build commands at all. When I compile, it outputs:</p>\n\n<pre><code>jGRASP exec: g++ -g -o gift1.exe gift1.cpp\n</code></pre>\n"}, {"tags": ["c++", "animation", "mesh", "3dsmax", "maxscript"], "answers": [{"tags": [], "owner": {"reputation": 1781, "user_id": 784771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d65019133740d757afc5c186ce1630?s=128&d=identicon&r=PG", "display_name": "Swordslayer", "link": "https://stackoverflow.com/users/784771/swordslayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1435853600, "creation_date": 1435853600, "answer_id": 31189648, "question_id": 31168336, "link": "https://stackoverflow.com/questions/31168336/maxscript-animation-changing-vertex-position-in-mesh/31189648#31189648", "title": "Maxscript - Animation changing vertex position in mesh", "body": "<p>Use <code>meshOp.setVert</code> method to set the positions of the object's vertices. The changes will appear in the viewport if you use <code>update</code> when you're done:</p>\n\n<pre><code>N = convertToMesh (Box length:10 width:10 height:10)\nwith animate on at time 100 (meshOp.setVert N 1 [5,5,10])\nupdate N\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3545895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688a2e7183d53cb6ae6a4f67215f2268?s=128&d=identicon&r=PG&f=1", "display_name": "user3545895", "link": "https://stackoverflow.com/users/3545895/user3545895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435853600, "creation_date": 1435773038, "question_id": 31168336, "link": "https://stackoverflow.com/questions/31168336/maxscript-animation-changing-vertex-position-in-mesh", "title": "Maxscript - Animation changing vertex position in mesh", "body": "<p>i have different sets of 2000 points which define the positions of the vertex of a mesh. In example, one set makes the mesh be of X form, another on Y form, etc.</p>\n\n<p>I want to do an animation with this changing mesh, but Autokey fails to even place a keyframe.</p>\n\n<p>My procedure is the following:</p>\n\n<p>I import the mesh using the following MAXScript, which appears in 3dsmax as Object001:</p>\n\n<pre><code>vert_array = #()\nface_array = #()\nin_name = ((GetDir #export)+\"/meshdata.dat\")\nin_file = openFile in_name\nif in_file != undefined then\n(\n num_verts = readValue in_file\n num_faces = readValue in_file\n vert_array.count = num_verts\n face_array.count = num_faces\n for v = 1 to num_verts do\n (\n  vert = readValue in_file\n  vert_array[v] = vert\n )\n for f = 1 to num_faces do\n (\n  face = readValue in_file\n  face_array[f] = face\n )\n close in_file\n new_mesh = mesh vertices:vert_array faces:face_array\n)\n</code></pre>\n\n<p>next, I click on autokey and advance to frame 100 (for example) and execute the following MAXScript:</p>\n\n<pre><code>N=$Object001\nanimate on\n(\n    at time 0 (N.pos=[0,0,0] )\n    at time 100 (\nvert_array = #()\nface_array = #()\nin_name = ((GetDir #export)+\"/meshdata2.dat\")\nin_file = openFile in_name\nif in_file != undefined then\n(\n num_verts = readValue in_file\n num_faces = readValue in_file\n vert_array.count = num_verts\n face_array.count = num_faces\n for v = 1 to num_verts do\n (\n  vert = readValue in_file\n  vert_array[v] = vert\n )\n for f = 1 to num_faces do\n (\n  face = readValue in_file\n  face_array[f] = face\n )\n close in_file\nfor v=1 to num_verts do\n(\n    N.verts[v].pos=vert_array[v]\n)\n)\n)\n)\n</code></pre>\n\n<p>The object manages to change its form to the desired one (although its shape doesn't change in the viewport, only when rendered).\nHOWEVER, the autokey does NOT work, it does not place a keyframe on 100 nor anywhere.\nIt does work when changing manually the position of the vertex. But i have 2000 vertex, i need to use MAXScript.\nAny clue why does this happen and how to fix it? Thank you very much indeed!</p>\n\n<p>(I have tried in the Listener changin just one or two vertex, and again it doesn't work... but manually the autokey works! :'( )</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 2, "creation_date": 1435775233, "post_id": 31168228, "comment_id": 50345677, "body": "&quot;stlparser output should be correct&quot;.  Is it?"}, {"owner": {"reputation": 191, "user_id": 4313550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840d70062d48dd04df28fff3d07ef6d3?s=128&d=identicon&r=PG&f=1", "display_name": "TheBender", "link": "https://stackoverflow.com/users/4313550/thebender"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1435777550, "post_id": 31168228, "comment_id": 50347082, "body": "@Robinson yep i tested it before even trying to render the data. thanks though!"}], "answers": [{"tags": [], "owner": {"reputation": 8616, "user_id": 1762344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfac7b9f09d74535f472fe1a052666e?s=128&d=identicon&r=PG", "display_name": "Evgeny Panasyuk", "link": "https://stackoverflow.com/users/1762344/evgeny-panasyuk"}, "is_accepted": true, "score": 7, "last_activity_date": 1435775309, "creation_date": 1435775309, "answer_id": 31168958, "question_id": 31168228, "link": "https://stackoverflow.com/questions/31168228/missing-faces-when-displaying-stl-data/31168958#31168958", "title": "Missing faces when displaying STL data", "body": "<p>You should change</p>\n\n<pre><code>glDrawArrays(GL_TRIANGLES, 0, vdata.size());\n</code></pre>\n\n<p>to</p>\n\n<pre><code>glDrawArrays(GL_TRIANGLES, 0, 3 * vdata.size());\n</code></pre>\n\n<p>I.e. <code>count</code> should be vertex count, but not triangle count.</p>\n"}], "owner": {"reputation": 191, "user_id": 4313550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840d70062d48dd04df28fff3d07ef6d3?s=128&d=identicon&r=PG&f=1", "display_name": "TheBender", "link": "https://stackoverflow.com/users/4313550/thebender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 31168958, "answer_count": 1, "score": 4, "last_activity_date": 1435775309, "creation_date": 1435772725, "last_edit_date": 1435773007, "question_id": 31168228, "link": "https://stackoverflow.com/questions/31168228/missing-faces-when-displaying-stl-data", "title": "Missing faces when displaying STL data", "body": "<p>I wrote a simple parser for the ASCII STL format. When I try to render the triangles with the supplied normals, the resulting object is missing many faces:</p>\n\n<p><img src=\"https://i.imgur.com/4bbNgdh.gif\" /></p>\n\n<p>This is how it should look like: </p>\n\n<p><img src=\"https://i.imgur.com/Xkt27DF.png\" /></p>\n\n<p>What I already tried:</p>\n\n<ul>\n<li>explicitly disabled backface culling (though it shouldn't have been active before)</li>\n<li>ensured that the depth buffer is enabled</li>\n</ul>\n\n<p>Here is a minimal sample program which reproduces the error:</p>\n\n<pre><code> #include &lt;SDL2/SDL.h&gt;\n #include &lt;SDL2/SDL_main.h&gt;\n #include &lt;SDL2/SDL_render.h&gt;\n #include &lt;SDL2/SDL_opengl.h&gt;\n\nint main(int argc, char **argv) {\n    SDL_Init(SDL_INIT_VIDEO);\n    int screen_w=1280,screen_h=720;\n    SDL_Window * win = SDL_CreateWindow(\"test\", 20, 20, screen_w, screen_h,\n            SDL_WINDOW_OPENGL);\n    SDL_GLContext glcontext = SDL_GL_CreateContext(win);\n\n\n    STLParser stlparser;\n    std::ifstream file(\".\\\\logo.stl\");\n    stlparser.parseAscii(file);\n    const auto&amp; ndata = stlparser.getNData();\n    const auto&amp; vdata = stlparser.getVData();\n    std::cout &lt;&lt; \"number of facets: \" &lt;&lt; ndata.size() &lt;&lt; std::endl;\n\n    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n\n    glMatrixMode(GL_PROJECTION | GL_MODELVIEW);\n    glLoadIdentity();\n    glScalef(1.f, -1.f, 1.f);\n    glOrtho(0, screen_w, 0, screen_h, -screen_w, screen_w);\n\n    glClearDepth(1.0f);\n    glDepthFunc(GL_LEQUAL);\n    glEnable(GL_DEPTH_TEST);\n\n    glDisable(GL_CULL_FACE);\n\n    glEnableClientState(GL_NORMAL_ARRAY);\n    glEnableClientState(GL_VERTEX_ARRAY);\n\n    glNormalPointer(GL_FLOAT, 0, ndata.data());\n    glVertexPointer(3, GL_FLOAT, 0, vdata.data());\n\n    SDL_Event event;\n    bool quit = false;\n\n    while (!quit) {\n        while (SDL_PollEvent(&amp;event))\n            switch(event.type) {\n            case SDL_QUIT: quit = true; break;\n            }\n            ;\n        // Drawing\n        glClearColor(255,255,255,255);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n        glTranslatef(screen_w/2,0,0);\n        glRotatef(0.5,0,1,0);\n        glTranslatef(-screen_w/2,0,0);\n\n\n        glPushMatrix();\n        glTranslatef(screen_w/2,screen_h/2,0);\n\n\n        glColor3f(0.5,0.5,0);\n        glDrawArrays(GL_TRIANGLES, 0, vdata.size());\n\n        glPopMatrix();\n\n\n        SDL_GL_SwapWindow(win);\n\n        SDL_Delay(10);\n    }\n    SDL_DestroyWindow(win);\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>The STLParser methods <code>getNData()</code> and <code>getVData()</code> have the following signatures:</p>\n\n<pre><code>const std::vector&lt;std::array&lt;float,3&gt;&gt;&amp; getNData() const;\nconst std::vector&lt;std::array&lt;std::array&lt;float,3&gt;,3&gt;&gt;&amp; getVData() const;\n</code></pre>\n\n<p>STLParser output should be correct, but I can provide the sources as well if needed.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "visual-studio-2012", "visual-c++", "fstream"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435772708, "post_id": 31168136, "comment_id": 50344191, "body": "a) A program to remove comments in C++ can&#180;t be that easy =&gt; You&#180;re doing it wrong. String literals, preprocessor commands, etc.etc. ...?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1435772780, "post_id": 31168136, "comment_id": 50344225, "body": "this is basic, just removing the &quot;//&quot; and &quot;/*&quot; style comments"}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1435772892, "post_id": 31168136, "comment_id": 50344293, "body": "Can you tell us why its not working, ie. specific issues?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435772893, "post_id": 31168136, "comment_id": 50344294, "body": "@Naan Yes, I understood that. There are no other kinds of comments in the first place."}, {"owner": {"reputation": 1949, "user_id": 2534273, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uHFvg.jpg?s=128&g=1", "display_name": "Matja\u017e Mav", "link": "https://stackoverflow.com/users/2534273/matja%c5%be-mav"}, "edited": false, "score": 0, "creation_date": 1435772917, "post_id": 31168136, "comment_id": 50344308, "body": "Just use regex, its about 10 lines whole program"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 1949, "user_id": 2534273, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uHFvg.jpg?s=128&g=1", "display_name": "Matja\u017e Mav", "link": "https://stackoverflow.com/users/2534273/matja%c5%be-mav"}, "edited": false, "score": 0, "creation_date": 1435773039, "post_id": 31168136, "comment_id": 50344383, "body": "@Matja\u017eMav That&#180;s even worse. Much worse."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "edited": false, "score": 0, "creation_date": 1435773087, "post_id": 31168136, "comment_id": 50344412, "body": "so basically, when i run the program the file temp.txt is supposed to have a version of the inputed file but without comments, however it has nothing in it"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435773090, "post_id": 31168136, "comment_id": 50344414, "body": "You use <code>while (getline(...))</code> in one place and incorrectly use <code>while (!Source.eof())</code> in another (you never ensure the input was successful before using <code>line</code>, and <code>eof()</code> returning <code>false</code> does not imply that there&#39;s more data to be read)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "edited": false, "score": 0, "creation_date": 1435773224, "post_id": 31168136, "comment_id": 50344502, "body": "soooo... what should i change"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435773478, "post_id": 31168136, "comment_id": 50344627, "body": "Please consistently indent the code.  Suggest 4 spaces after every &#39;{&#39; and un-indent before every &#39;}&#39;.   Do not use tabs for indentation was each editor/wordprocessor, etc has the tab stops/tab width set differently.   Suggesting 4 spaces because 1) several levels of indentation does not result in lines beyond the right end of the screen  2) 4 spaces is wide enough to show, even when using a variable width font."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435773571, "post_id": 31168136, "comment_id": 50344690, "body": "When OP has a runtime problem, please post code that cleanly compiles, so we do not have to create some compilable file (and hope that it is the same as the OPs file)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "edited": false, "score": 0, "creation_date": 1435773657, "post_id": 31168136, "comment_id": 50344734, "body": "uhh what is a OP? sorry im new at this"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435773710, "post_id": 31168136, "comment_id": 50344770, "body": "@Naan, Original Poster, A.K.A. you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "edited": false, "score": 0, "creation_date": 1435773814, "post_id": 31168136, "comment_id": 50344820, "body": "oh ok thanks for letting me know"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1435774002, "post_id": 31168136, "comment_id": 50344923, "body": "Why are you doing this? Comments in code is a good idea"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1435774422, "post_id": 31168136, "comment_id": 50345142, "body": "Dare I say that this sounds like a job for a different language?"}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1435773503, "post_id": 31168385, "comment_id": 50344650, "body": "While you should use the second, the first will still work due to <code>npos</code> being -1, which is congruent to the maximum value of the unsigned <code>size_type</code>, meaning that it will be greater than or equal to the length."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "edited": false, "score": 0, "creation_date": 1435773621, "post_id": 31168385, "comment_id": 50344716, "body": "the program worked when i read directly form the source file and printed its contents. When i try to remove the comments, put it in temp/temp.txt and then print the contents of temp/temp.txt, it shows as if nothing is there in that file."}], "tags": [], "owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1435773261, "creation_date": 1435773261, "answer_id": 31168385, "question_id": 31168136, "link": "https://stackoverflow.com/questions/31168136/program-for-removing-comments-in-c-not-working/31168385#31168385", "title": "Program for removing comments in C++ not working", "body": "<p>find method of string returns std::string::npos on unsuccessful search , so you should write this line </p>\n\n<pre><code>if(line.find(\"/*\") &lt; line.length())\n</code></pre>\n\n<p>as below:</p>\n\n<pre><code>if(line.find(\"/*\") != std::string::npos)\n</code></pre>\n\n<p>Make similar changes and try.</p>\n"}, {"tags": [], "owner": {"reputation": 7786, "user_id": 999884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuL5q.jpg?s=128&g=1", "display_name": "Software_Designer", "link": "https://stackoverflow.com/users/999884/software-designer"}, "is_accepted": true, "score": 0, "last_activity_date": 1436452497, "last_edit_date": 1436452497, "creation_date": 1436451931, "answer_id": 31320400, "question_id": 31168136, "link": "https://stackoverflow.com/questions/31168136/program-for-removing-comments-in-c-not-working/31320400#31320400", "title": "Program for removing comments in C++ not working", "body": "<p>Here is another solution.\nIt opens <code>file.txt</code> and loads the entire file into a <code>string</code>. Then it removes the\ncomments and writes the new data in <code>string</code> back into <code>file.txt</code>. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(void) {\n\n        string source;\n        ifstream readFile(\"file.txt\");\n        getline(readFile, source, '\\0');    \n        readFile.close();\n\n        cout&lt;&lt;\"\\n---b e f o r e -----------------------------------\\n\\n\";\n         cout &lt;&lt; source;\n\n        while(source.find(\"/*\") != string::npos) {\n            size_t Beg = source.find(\"/*\");\n            source.erase(Beg, (source.find(\"*/\", Beg) - Beg)+2);\n        }\n\n        while(source.find(\"//\") != string::npos) {\n            size_t Beg = source.find(\"//\");\n            source.erase(Beg, source.find(\"\\n\", Beg) - Beg);\n        }   \n\n       ofstream writefile(\"file.txt\");\n       writefile &lt;&lt;source;\n       writefile.close();\n\n\n\n       cout&lt;&lt;\"\\n\\n-- a f t e r -------------------------------------------\\n\\n\";\n\n\n        cout &lt;&lt; source;\n        cout&lt;&lt;\"\\n---------------------------------------------\\n\\n\";\n        cout&lt;&lt;\"\\n\\n\";\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 31320400, "answer_count": 2, "score": 1, "last_activity_date": 1436452497, "creation_date": 1435772448, "last_edit_date": 1435773655, "question_id": 31168136, "link": "https://stackoverflow.com/questions/31168136/program-for-removing-comments-in-c-not-working", "title": "Program for removing comments in C++ not working", "body": "<p>I have created a program in c++ to remove the commments of a c/c++ file and put a comment-removed version in another file. However after hours of debugging it is still not working. Help please!</p>\n\n<p>\"input\" is a string that has the folder location of the c/c++ files.\n\"files\" is a vector with all the file names in the folder but not their locations.\nI use \"input\" and \"files\" to get the file name and location. </p>\n\n<pre><code>for (unsigned int i = 0; i &lt; files.size();i++ ){//for loop start\n\niteratora++;\nstring filename1 = input;\nfilename1.append(\"\\\\\");\nfilename1.append(files[iteratora + 2]);\n\n    cout &lt;&lt; \"\\n\" &lt;&lt; filename1 &lt;&lt; \".\\n\";\n    cout &lt;&lt; \"Iterator: \" &lt;&lt; iteratora &lt;&lt; \".\\n\";\n\nprogramFile.clear();\nifstream afile (filename1);//(filename1);\nfstream temp (\"temp/temp.txt\",std::ofstream::out | std::ofstream::trunc);\n\nstring line;//variable for holding the characters in one line\n\nremove_comments(afile,temp);\n\n\nif (temp.is_open())\n{\n    while ( getline (temp,line) )\n    {\n        //cout &lt;&lt; line &lt;&lt; '\\n';\n        if (line != \"\"){\n            cout &lt;&lt; line;\n        programFile.push_back(line);\n        line = \"\";\n        }\n\n    }\n    temp.close();\n}\n\ntemp.clear();\n\n\n\n if (showVerbose == true){\n       print_vector(programFile);//used to know what is in the file\n   }\n\n\n}\n</code></pre>\n\n<p>remove comments function</p>\n\n<pre><code>void remove_comments ( ifstream&amp; Source , fstream&amp; Target)\n{\nstring line;\nbool flag = false;\n\n\nwhile ( ! Source.eof() ) // This loop is to get assure that the whole input file is read.\n{\n\n\ngetline(Source, line); // To read line by line.\n\nif ( flag )\n{   if ( line.find(\"*/\") &lt; line.length() )\nflag = false;\nline.erase(0,line.find(\"*/\") + 2);\n}\n\n\nif ( line.find(\"/*\") &lt; line.length() ) // searching for \" /* \" to eliminat it and all its content.\nflag = true;\nif ( ! flag )\n{\nfor (int i = 0; i &lt; line.length(); i++ )\n{\n\nif(i&lt;line.length())\nif ( ( line.at(i) == '/' ) &amp;&amp; ( line.at(i + 1 ) == '/' ) ) // searching for \" // \" to eliminate all its content.\nbreak;\nelse\nTarget &lt;&lt; line[i]; // To copy lines in the output file.\n\n}\n\nTarget&lt;&lt;endl;\n\n\n}\n\n\n\n}\n\nSource.close(); // to close the opened files.\nTarget.close(); \n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "stdarray"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 9, "creation_date": 1435772942, "post_id": 31168135, "comment_id": 50344315, "body": "What do you think this line is doing? <code>x = x;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 7, "creation_date": 1435772826, "post_id": 31168241, "comment_id": 50344254, "body": "When <code>: cp(CP)</code> is used, <code>cp = CP</code> in the body is redundant"}, {"owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "edited": false, "score": 0, "creation_date": 1435773726, "post_id": 31168241, "comment_id": 50344779, "body": "Thanks a lot to both of you. :)"}], "tags": [], "owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "is_accepted": true, "score": 24, "last_activity_date": 1435775574, "last_edit_date": 1435775574, "creation_date": 1435772766, "answer_id": 31168241, "question_id": 31168135, "link": "https://stackoverflow.com/questions/31168135/call-to-implicitly-deleted-default-constructor/31168241#31168241", "title": "Call to implicitly-deleted default constructor", "body": "<p>Two things. Class members are initialized <em>before</em> the body of the constructor, and a default constructor is a constructor with no arguments.</p>\n\n<p>Because you didn't tell the compiler how to initialize cp, it tries to call the default constructor for <code>std::array&lt;Point3D, 16&gt;</code>, and there is none, because there is no default constructor for <code>Point3D</code>.</p>\n\n<pre><code>CubicPatch::CubicPatch(std::array&lt;Point3D, 16&gt; CP)\n    // cp is attempted to be initialized here!\n{\n    cp = CP;\n}\n</code></pre>\n\n<p>You can get around this by simply providing an initializer list with your Constructor definition.</p>\n\n<pre><code>CubicPatch::CubicPatch(std::array&lt;Point3D, 16&gt; CP)\n    : cp(CP)\n{}\n</code></pre>\n\n<p>Also, you might want to have a look at this code.</p>\n\n<pre><code>Point3D::Point3D(float x, float y, float z){\n    x = x;\n    y = y;\n    z = z;\n}\n</code></pre>\n\n<p><code>x = x</code>, <code>y = y</code>, <code>z = z</code> doesn't make sense. You're assigning a variable to itself. <code>this-&gt;x = x</code> is one option to fix that, but a more c++ style option is to use initializer lists as with <code>cp</code>. They allow you to use the same name for a parameter and a member without the use of <code>this-&gt;x = x</code></p>\n\n<pre><code>Point3D::Point3D(float x, float y, float z)\n    : x(x)\n    , y(y)\n    , z(z)\n{}\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34130, "favorite_count": 1, "accepted_answer_id": 31168241, "answer_count": 1, "score": 16, "last_activity_date": 1435775574, "creation_date": 1435772448, "question_id": 31168135, "link": "https://stackoverflow.com/questions/31168135/call-to-implicitly-deleted-default-constructor", "title": "Call to implicitly-deleted default constructor", "body": "<p>I get the error message <em>Call to implicitly-deleted default constructor of 'std::array'</em> when I try to compile my C++ project.</p>\n\n<p>Header file cubic_patch.hpp</p>\n\n<pre><code>#include &lt;array&gt;\nclass Point3D{\npublic:\n    Point3D(float, float, float);\nprivate:\n    float x,y,z;\n};\n\nclass CubicPatch{\npublic:\n    CubicPatch(std::array&lt;Point3D, 16&gt;);\n    std::array&lt;CubicPatch*, 2&gt; LeftRightSplit(float, float);\n    std::array&lt;Point3D, 16&gt; cp;\n    CubicPatch *up, *right, *down, *left;\n};\n</code></pre>\n\n<p>Source file cubic_patch.cpp</p>\n\n<pre><code>#include \"cubic_patch.hpp\"\nPoint3D::Point3D(float x, float y, float z){\n    x = x;\n    y = y;\n    z = z;\n}\n\nCubicPatch::CubicPatch(std::array&lt;Point3D, 16&gt; CP){// **Call to implicitly-deleted default constructor of 'std::arraw&lt;Point3D, 16&gt;'**\n    cp = CP;\n}\n\nstd::array&lt;CubicPatch*, 2&gt; CubicPatch::LeftRightSplit(float tLeft, float tRight){\n    std::array&lt;CubicPatch*, 2&gt; newpatch;\n    /* No code for now. */\n    return newpatch;\n}\n</code></pre>\n\n<p>Could someone tell me what is the problem here, please ? I found similar topics but not really the same and I didn't understand the explanations given.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "debugging", "tcmalloc", "google-perftools"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435772556, "post_id": 31168003, "comment_id": 50344115, "body": "That is C++ code. Is there any reason you added the C tag?"}, {"owner": {"reputation": 161, "user_id": 1818004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4a2940fce5cbccd42470a16019b80c0c?s=128&d=identicon&r=PG", "display_name": "Dima00782", "link": "https://stackoverflow.com/users/1818004/dima00782"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435775442, "post_id": 31168003, "comment_id": 50345789, "body": "@Olaf What is C tag?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 161, "user_id": 1818004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4a2940fce5cbccd42470a16019b80c0c?s=128&d=identicon&r=PG", "display_name": "Dima00782", "link": "https://stackoverflow.com/users/1818004/dima00782"}, "edited": false, "score": 0, "creation_date": 1435775542, "post_id": 31168003, "comment_id": 50345855, "body": "@Dima00782: You should have taken the <a href=\"http://stackoverflow.com/tour\">tour</a>"}, {"owner": {"reputation": 161, "user_id": 1818004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4a2940fce5cbccd42470a16019b80c0c?s=128&d=identicon&r=PG", "display_name": "Dima00782", "link": "https://stackoverflow.com/users/1818004/dima00782"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435775909, "post_id": 31168003, "comment_id": 50346078, "body": "@Olaf thx, now I understood."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 1818004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4a2940fce5cbccd42470a16019b80c0c?s=128&d=identicon&r=PG", "display_name": "Dima00782", "link": "https://stackoverflow.com/users/1818004/dima00782"}, "is_accepted": true, "score": 1, "last_activity_date": 1435826463, "creation_date": 1435826463, "answer_id": 31179605, "question_id": 31168003, "link": "https://stackoverflow.com/questions/31168003/why-does-tcmalloc-fail-when-i-compile-and-run-this-program-with-a-shared-library/31179605#31179605", "title": "Why does tcmalloc fail when I compile and run this program with a shared library?", "body": "<p>It looks like your code that\ndoesn't call malloc/new from main.cpp is causing linked not to link\nlibtcmalloc.so to ./a.out. I.e. you can see it by doing ldd ./a.out.\nIt is not how it's supposed to work.</p>\n\n<p>As a result of this tcmalloc is loaded together with your shared\nobject which is too late and not supported.</p>\n\n<p>You can work around this \"initiative\" (which is as usual, clearly,\nresult of good intentions) by adding -Wl,--no-as-needed before\n-ltcmalloc when you build your main executable.</p>\n"}], "owner": {"reputation": 27, "user_id": 5070354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36df5ef26800d742f715a1b5029c9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny Smith", "link": "https://stackoverflow.com/users/5070354/jonny-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 31179605, "answer_count": 1, "score": 0, "last_activity_date": 1435826463, "creation_date": 1435771929, "last_edit_date": 1495541644, "question_id": 31168003, "link": "https://stackoverflow.com/questions/31168003/why-does-tcmalloc-fail-when-i-compile-and-run-this-program-with-a-shared-library", "title": "Why does tcmalloc fail when I compile and run this program with a shared library?", "body": "<p>Code simular to code here:\n<a href=\"https://stackoverflow.com/questions/31166005/why-tcmalloc-dont-print-function-name-which-provided-via-dlopen\">Why tcmalloc don&#39;t print function name, which provided via dlopen</a></p>\n\n<p>makefile:</p>\n\n<ul>\n<li>all:</li>\n<li>g++ -fPIC -g -c shared.cpp -ltcmalloc</li>\n<li>g++ -shared -o shared_libs/libshared.so -g shared.o -ltcmalloc</li>\n<li>g++ -L shared_libs/ -g main.cpp -ldl -ltcmalloc</li>\n</ul>\n\n<p>When I execute my program:</p>\n\n<pre><code>$ HEAPCHECK=normal ./a.out\nNo live heap object at 0x2582aa0 to ignore\nCheck failed: heap_profile-&gt;FindAlloc(test_str, &amp;size): our own new/delete not linked?\nAborted (core dumped)\n</code></pre>\n\n<p>gdb with core file says:</p>\n\n<pre><code>Core was generated by `./a.out'.\nProgram terminated with signal SIGABRT, Aborted.\n#0  0x00007f51bfef6cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n56 ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\nTraceback (most recent call last):\n  File \"/usr/share/gdb/auto-load/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.19-gdb.py\", line 63, in &lt;module&gt;\n    from libstdcxx.v6.printers import register_libstdcxx_printers\nImportError: No module named 'libstdcxx'\n</code></pre>\n"}, {"tags": ["c++", "boost", "intersection", "boost-geometry"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1435777462, "post_id": 31167768, "comment_id": 50347022, "body": "So, should it be empty, or what? I&#39;ll try it, but the question isn&#39;t very clear."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1435778947, "post_id": 31167768, "comment_id": 50347839, "body": "Your code doesn&#39;t compile. Please post an SSCCE."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1435783641, "post_id": 31170259, "comment_id": 50350421, "body": "In case you&#39;re interested, here&#39;s a live-stream of me answering this question <a href=\"https://www.livecoding.tv/video/boost-property-tree-and-geometry-intersection/\" rel=\"nofollow noreferrer\">here, around the 20:45 mark</a>. You can see how I share your frustration with some aspects of Boost here and there :) (<a href=\"http://chat.stackoverflow.com/transcript/10?m=24182469#24182469\">experiment</a>))"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1435779668, "creation_date": 1435779668, "answer_id": 31170259, "question_id": 31167768, "link": "https://stackoverflow.com/questions/31167768/geometry-intersection/31170259#31170259", "title": "Geometry, intersection", "body": "<p>There were 2 main issues.</p>\n\n<p>The output is undefined because the input is invalid.</p>\n\n<ol>\n<li><p>The input WKT specifies a lot of invalid inner rings (consisting of single points), instead of what you expected, a single outer ring of 5 points (excl. closing point). Fix it:</p>\n\n<pre><code>bg::read_wkt(\"POLYGON(( 1.504477611940313 3.761194029850755, 1.504477611940305 3.573134328358203, 1.316417910447765 3.573134328358206, 1.316417910447769 3.761194029850752))\", first);\nbg::read_wkt(\"POLYGON(( 1.504477611940313 3.761194029850755, 1.504477611940305 3.573134328358203, 1.316417910447765 3.573134328358206, 1.316417910447751 3.761194029850769))\", second); \n</code></pre></li>\n<li><p>Boost Geometry assumes throughout that you never make errors against the documented preconditions. If you read in the polygon concept page and preconditions for <code>intersection</code> you'll see thew full list\u00b9.</p>\n\n<p>If you don't, you get no friendly errors, just silent failure, corruption or just wrong answers. Yeah. That's bad.</p>\n\n<p>What's worse, BGeo didn't even have a <code>is_valid</code> facility to test the bulk of requirements until Boost 1_57 (IIRC). The good news is, if you upgrade to this version or later your life will be much simpler.</p></li>\n</ol>\n\n<p>In this case you would have learned that the polygons weren't properly closed:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/99a089782c642374\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;boost/geometry/geometries/polygon.hpp&gt;\n#include &lt;boost/geometry/geometries/multi_polygon.hpp&gt;\n#include &lt;boost/geometry/io/io.hpp&gt;\n#include &lt;boost/geometry/algorithms/intersection.hpp&gt;\n#include &lt;boost/geometry/algorithms/correct.hpp&gt;\n#include &lt;boost/geometry/algorithms/is_valid.hpp&gt;\n\nnamespace bg = boost::geometry;\n\nint main(){\n    typedef bg::model::d2::point_xy&lt;double&gt; TPoint;\n    typedef bg::model::polygon&lt;TPoint&gt;      TPoly;\n    TPoly first, second;\n\n    bg::read_wkt(\"POLYGON(( 1.504477611940313 3.761194029850755, 1.504477611940305 3.573134328358203, 1.316417910447765 3.573134328358206, 1.316417910447769 3.761194029850752))\", first);\n    bg::read_wkt(\"POLYGON(( 1.504477611940313 3.761194029850755, 1.504477611940305 3.573134328358203, 1.316417910447765 3.573134328358206, 1.316417910447751 3.761194029850769))\", second); \n\n    std::string reason;\n    // polys not closed!\n    if (!bg::is_valid(first, reason))  std::cout &lt;&lt; \"First polygon not valid: \"  &lt;&lt; reason &lt;&lt; \"\\n\";\n    if (!bg::is_valid(second, reason)) std::cout &lt;&lt; \"Second polygon not valid: \" &lt;&lt; reason &lt;&lt; \"\\n\";\n\n    bg::correct(first);\n    bg::correct(second);\n\n    // no more output!\n    if (!bg::is_valid(first, reason))  std::cout &lt;&lt; \"First polygon not valid: \"  &lt;&lt; reason &lt;&lt; \"\\n\";\n    if (!bg::is_valid(second, reason)) std::cout &lt;&lt; \"Second polygon not valid: \" &lt;&lt; reason &lt;&lt; \"\\n\";\n\n    std::vector&lt;TPoly&gt; out;\n    bg::intersection(first, second, out);\n\n    for (auto&amp; g : out)\n        std::cout &lt;&lt; \"\\nresult: \" &lt;&lt; bg::wkt(g) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>First polygon not valid: Geometry is defined as closed but is open\nSecond polygon not valid: Geometry is defined as closed but is open\n</code></pre>\n\n<p>Oops. The geos weren't closed! <code>correct(poly)</code> fixes this for us on auto-pilot:</p>\n\n<pre><code>result: POLYGON((1.50448 3.57313,1.31642 3.57313,1.31642 3.76119,1.50448 3.76119,1.50448 3.57313))\n</code></pre>\n\n<hr>\n\n<p>\u00b9 outer ring must be counter clockwise, inner cw, polys must be closed... stuff like that.</p>\n"}], "owner": {"reputation": 21, "user_id": 5070625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987e59c9ac04113f7a3991d450a830e9?s=128&d=identicon&r=PG&f=1", "display_name": "Yury Panyukov", "link": "https://stackoverflow.com/users/5070625/yury-panyukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556216789, "creation_date": 1435771029, "last_edit_date": 1556216789, "question_id": 31167768, "link": "https://stackoverflow.com/questions/31167768/geometry-intersection", "title": "Geometry, intersection", "body": "<p>I have a problem. I would like to intersect a quad with a quad.     </p>\n\n<pre><code>int main(){\n  typedef boost::geometry::model::point_xy&lt;double&gt; TBoostPoint;\n  typedef boost::geometry::model::polygon&lt;TBoostPoint&gt; TBoostPoly;\n  TBoostPoint point;\n  TBoostPoly firstPoly, secondPoly;\n  boost::geometry::read_wkt(\"POLYGON(\n                (1.504477611940313, 3.761194029850755), \n                (1.504477611940305, 3.573134328358203),\n                (1.316417910447765, 3.573134328358206),\n                (1.316417910447769, 3.761194029850752))\", firstPoly);\n  boost::geometry::read_wkt(\"POLYGON(\n                (1.504477611940313, 3.761194029850755), \n                (1.504477611940305, 3.573134328358203),\n                (1.316417910447765, 3.573134328358206),\n                (1.316417910447751, 3.761194029850769))\", secondPoly);\n std::vector&lt;TBoostPoly&gt; outPoly;\n boost::geometry::intersection(firstPoly,secondPoly,outPoly);\n}\n</code></pre>\n\n<p>outPoly - is empty, but it not so.</p>\n"}, {"tags": ["android", "c++"], "answers": [{"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435771871, "post_id": 31167975, "comment_id": 50343779, "body": "This will crash (or worse)."}, {"owner": {"reputation": 939, "user_id": 4987662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce13879abfd99e45f7ab44188ae1a353?s=128&d=identicon&r=PG&f=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/4987662/acorn"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435772071, "post_id": 31167975, "comment_id": 50343869, "body": "Is it because I am appending a c string to a string literal and just now catching it, or am I missing something?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435772258, "post_id": 31167975, "comment_id": 50343965, "body": "Adding <code>const char *</code>&#39;s together is never a good idea.  See my duplicate link in the comments to the question to see how it should be done."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435772370, "post_id": 31167975, "comment_id": 50344014, "body": "Basically, if you add some <code>( )</code> it will be correct."}, {"owner": {"reputation": 939, "user_id": 4987662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce13879abfd99e45f7ab44188ae1a353?s=128&d=identicon&r=PG&f=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/4987662/acorn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435772586, "post_id": 31167975, "comment_id": 50344129, "body": "Figured that was it. I fixed my answer to match @NathanOliver"}], "tags": [], "owner": {"reputation": 939, "user_id": 4987662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce13879abfd99e45f7ab44188ae1a353?s=128&d=identicon&r=PG&f=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/4987662/acorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1435772435, "last_edit_date": 1435772435, "creation_date": 1435771824, "answer_id": 31167975, "question_id": 31167681, "link": "https://stackoverflow.com/questions/31167681/c-remove-and-rename-commands/31167975#31167975", "title": "c++ remove and rename commands", "body": "<blockquote>\n  <p>NDK:cannot convert 'std::basic_string' to 'char const*' for argument '1' to 'int remove(char const*)'</p>\n</blockquote>\n\n<p>You're function is expecting an array of characters, but you're passing it a string object. You need to call <code>.c_str()</code> on your string object.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow\">std::basic_string::c_str()</a></p>\n\n<p>So the <code>\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\"</code> needs to be an array of characters itself. </p>\n\n<p>One way to achieve this would be to store it as a string, then pass the <code>c_str()</code> into the function.</p>\n\n<pre><code>std::string loc{\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\"};\n\nremove(loc.c_str());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5062635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081071831920425/picture?type=large", "display_name": "Jason Lickliter", "link": "https://stackoverflow.com/users/5062635/jason-lickliter"}, "is_accepted": false, "score": 0, "last_activity_date": 1436258249, "last_edit_date": 1436258249, "creation_date": 1435774043, "answer_id": 31168614, "question_id": 31167681, "link": "https://stackoverflow.com/questions/31167681/c-remove-and-rename-commands/31168614#31168614", "title": "c++ remove and rename commands", "body": "<p>Ok, here's what worked with no errors.</p>\n\n<pre><code>std::string loc (\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\");\nremove(loc.c_str());\nstd::string loc1(\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/temp.txt\");\nstd::string loc2(\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\");\nrename(loc1.c_str() , loc2.c_str());\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5062635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081071831920425/picture?type=large", "display_name": "Jason Lickliter", "link": "https://stackoverflow.com/users/5062635/jason-lickliter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "closed_date": 1435935433, "answer_count": 2, "score": -2, "last_activity_date": 1436258249, "creation_date": 1435770771, "last_edit_date": 1435772131, "question_id": 31167681, "link": "https://stackoverflow.com/questions/31167681/c-remove-and-rename-commands", "closed_reason": "Duplicate", "title": "c++ remove and rename commands", "body": "<p>I am using aide and cppdroid for android to code in c++. I'm having some trouble with the file rename and remove commands. My guess is you can't do this. I have user input and don't know what they will type in so I need a variable or string to input for the path name of the file.</p>\n\n<pre><code>remove(\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\");             \n\nrename(\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/temp.txt\",\"/storage/emulated/0/MyGame/MyHackGame/jni/gameFiles/\" + output2 + \".txt\");\n</code></pre>\n\n<p>Is the code I used and it has an error. Is there some other way I can write this so I can add the output2 to locate the file?</p>\n\n<p>Error is: </p>\n\n<blockquote>\n  <p>NDK:cannot convert 'std::basic_string' to 'char const*' for argument '1' to 'int remove(char const*)'</p>\n</blockquote>\n"}, {"tags": ["c++", "object", "declaration", "new-operator"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1435770699, "post_id": 31167612, "comment_id": 50343100, "body": "<code>NULL</code> means it doesn&#39;t point to any location, and I think <code>root</code> is just another node that is created with <code>node* root = new node();</code>"}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435770780, "post_id": 31167612, "comment_id": 50343148, "body": "well I guess my question is, is there a difference in declaring a node like this: <code>node* q = new node();</code> and <code>node* q;</code>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1435770831, "post_id": 31167612, "comment_id": 50343169, "body": "Sure, one initializes <code>q</code> with a value, the other doesn&#39;t and results in a <a href=\"http://stackoverflow.com/questions/2583656/what-is-the-meaning-of-wild-pointer-in-c\"><i>wild pointer</i></a>"}, {"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 1, "creation_date": 1435770979, "post_id": 31167612, "comment_id": 50343277, "body": "<code>node *q;</code> doesn&#39;t have a valid reference to an object <code>node</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435771108, "post_id": 31167612, "comment_id": 50343369, "body": "BTW if you are using C++11 or newer please use <code>nullptr</code> and not <code>NULL</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435771178, "post_id": 31167612, "comment_id": 50343412, "body": "And to expand on the comment by @NathanOliver, if you&#39;re using an earlier version of C++, then it&#39;s recommended to use <code>0</code> instead of <code>NULL</code>."}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435771214, "post_id": 31167612, "comment_id": 50343434, "body": "@NathanOliver Thanks I&#39;ll keep that in mind, but whats the reason for that?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435771269, "post_id": 31167612, "comment_id": 50343471, "body": "@ocean800 The reason is <code>int a = NULL;</code> will compile while <code>int a = nullptr;</code> will not.  See this: <a href=\"http://stackoverflow.com/questions/13816385/what-are-the-advantages-of-using-nullptr\" title=\"what are the advantages of using nullptr\">stackoverflow.com/questions/13816385/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 4029226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7c659ff83c6d21bcc703662b901228e?s=128&d=identicon&r=PG&f=1", "display_name": "AverageWorker", "link": "https://stackoverflow.com/users/4029226/averageworker"}, "is_accepted": false, "score": 1, "last_activity_date": 1435770927, "creation_date": 1435770927, "answer_id": 31167731, "question_id": 31167612, "link": "https://stackoverflow.com/questions/31167612/c-object-declaration-confusion/31167731#31167731", "title": "C++ object declaration confusion?", "body": "<p>I'm pretty sure (Someone correct me if i'm wrong), using the new operator allocates dynamic memory for that variable. The variables will most likely already have some garbage value assigned to them that gets overridden when you assign a new value to them. Whereas assigning it NULL just assigns it whatever the NULL value is (probably 0000000). </p>\n"}, {"comments": [{"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435771184, "post_id": 31167765, "comment_id": 50343414, "body": "Ah.. I see. So unless I use <code>new node()</code>, a new node isn&#39;t actually being created. Only a reference to a node will be created."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 2, "creation_date": 1435771245, "post_id": 31167765, "comment_id": 50343451, "body": "@ocean800 That&#39;s correct, almost... The correct phrase is a <i>pointer</i> to a node. A <i>reference</i> in C++ is something else, similar to a pointer, but still different."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1435771271, "post_id": 31167765, "comment_id": 50343475, "body": "If i have <code>node* q</code> and then <code>q-&gt;key=2</code>.Is that valid?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 2, "creation_date": 1435771307, "post_id": 31167765, "comment_id": 50343499, "body": "@gauravsehgal Not unless you initialize <code>q</code> in between, i.e. make it point to a valid<code>node</code> object."}, {"owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "edited": false, "score": 0, "creation_date": 1435771371, "post_id": 31167765, "comment_id": 50343537, "body": "@JoachimPileborg Thanks for the help that makes a lot more sense!! :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 2, "creation_date": 1435771687, "post_id": 31167765, "comment_id": 50343692, "body": "@gauravsehgal Because using a uninitialized pointer is <b>UNDEFINED BEHAVIOR</b>.  That means it could work, it could not work, it could give you a million dollars, anything.  See Joachim&#39;s link at then end of his answer."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1435771742, "post_id": 31167765, "comment_id": 50343705, "body": "Thanks.that made sense."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1435778359, "last_edit_date": 1435778359, "creation_date": 1435771017, "answer_id": 31167765, "question_id": 31167612, "link": "https://stackoverflow.com/questions/31167612/c-object-declaration-confusion/31167765#31167765", "title": "C++ object declaration confusion?", "body": "<p>To answer the question in the comment, yes there is a difference.</p>\n\n<p>When you do <code>node* q = new node()</code> you declare a pointer to a <code>node</code> object, and then at runtime dynamically allocate memory enough for one <code>node</code> object, and calls the default constructor (alternatively, value initializes the object, it depends on the class/struct), and finally you assign the pointer to the newly allocated object to <code>q</code>.</p>\n\n<p>When you do <code>node* q;</code> you just declare a pointer to a <code>node</code> object, and that's it. What the pointer will be pointing to depends on <em>where</em> you declare the pointer: If you declare it as a global variable, it is initialized to zero, and becomes a null pointer; If you declare it as a local variable its value is indeterminate, and will in reality seem to be random. Neither is a valid pointer, and dereferencing it will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a>. There is also a third alternative, and that's where you declare <code>node* q;</code> as a member variable in a <code>class</code> or <code>struct</code>, then the initial value depend on how the class/structure is created and initialized (for example if the structure is value initialized, if there's a constructor that initializes it, etc.).</p>\n"}], "owner": {"reputation": 2745, "user_id": 4573703, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1692103db4bb79442bb0dd5f3bd1b104?s=128&d=identicon&r=PG&f=1", "display_name": "ocean800", "link": "https://stackoverflow.com/users/4573703/ocean800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 31167765, "answer_count": 2, "score": 0, "last_activity_date": 1435778359, "creation_date": 1435770547, "last_edit_date": 1435770944, "question_id": 31167612, "link": "https://stackoverflow.com/questions/31167612/c-object-declaration-confusion", "title": "C++ object declaration confusion?", "body": "<p>I'm trying to implement a BST in C++, and I came across these two ways of creating a node: </p>\n\n<pre><code>node* z = new node();\nz-&gt;key = d;\nz-&gt;left = NULL;\nz-&gt;right = NULL;\n</code></pre>\n\n<p>and then this: </p>\n\n<pre><code>node* y = NULL;\nnode* x = root;\nnode* parent = NULL;\n</code></pre>\n\n<p>What is the difference in calling the new operator or not? </p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>so for example, whats the difference between: </p>\n\n<pre><code>node* q = new node(); \n</code></pre>\n\n<p>and </p>\n\n<pre><code>node* q;\n</code></pre>\n\n<p>and why would you choose one way or the other? Is there an advantage for one way or the other? </p>\n"}, {"tags": ["c++", "qt", "sockets"], "comments": [{"owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "edited": false, "score": 0, "creation_date": 1435772997, "post_id": 31167605, "comment_id": 50344351, "body": "<code>QAbstractSocket</code> documentation states that calling <code>waitForReadyRead</code> is necessary for reading and calling <code>waitForBytesWritten</code> is necessary for flushing written changes in synchronous mode. <code>QTcpSocket</code> and <code>QUdpSocket</code> don&#39;t seem to have differences."}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "reply_to_user": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "edited": false, "score": 0, "creation_date": 1435773193, "post_id": 31167605, "comment_id": 50344483, "body": "But some one said that QUDPSocket is actually unbuffered, so there is no need to wait, since the application is talking to OS&#39;s buffere directly?"}, {"owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "edited": false, "score": 1, "creation_date": 1435773451, "post_id": 31167605, "comment_id": 50344614, "body": "That may be true, but the documentation doesn&#39;t say that, so it&#39;s risky. You can read <code>QUdpSocket</code> source to verify that."}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1435774672, "post_id": 31167605, "comment_id": 50345291, "body": "Yeah, I am just curious how they can be used in sync mode"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1534302200, "post_id": 31167605, "comment_id": 90657399, "body": "I cannot see any advantage in omitting the call to <code>waitForReadyRead()</code>.  You&#39;ll make your program very CPU-inefficient, and won&#39;t gain any compensating benefit by doing so."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1534301876, "last_edit_date": 1534301876, "creation_date": 1435782283, "answer_id": 31170982, "question_id": 31167605, "link": "https://stackoverflow.com/questions/31167605/qt-is-waitforreadyread-waitforbyteswritten-necessary-in-a-synchronous-udp-socke/31170982#31170982", "title": "Qt: Is waitForReadyRead/waitForBytesWritten necessary in a synchronous UDP socket?", "body": "<p>Yes. The sockets internally use non-interrupting platform notfications, and these only fire when the event loop <em>or</em> a <code>waitFor...</code> method has control of the thread. Your choices are:</p>\n\n<ol>\n<li><p>Write asynchronous code using C++11 lambdas/closures to keep the code concise without need for explicit helper objects. Or write Qt 4-style async code with explicit <code>QObject</code>s that provide handler slots.</p></li>\n<li><p>Write pseudosynchronous code using <code>waitFor...</code> methods, with the caveat that some methods of <code>QObject</code>s running on the same thread may need to be reentrant.</p></li>\n<li><p>Use native networking APIs.</p></li>\n</ol>\n"}], "owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534301876, "creation_date": 1435770524, "question_id": 31167605, "link": "https://stackoverflow.com/questions/31167605/qt-is-waitforreadyread-waitforbyteswritten-necessary-in-a-synchronous-udp-socke", "title": "Qt: Is waitForReadyRead/waitForBytesWritten necessary in a synchronous UDP socket?", "body": "<p>The QUDPSocket can be used without a event loop in a sync mode.\nAnd I found the example below:</p>\n\n<pre><code>#include &lt;QUdpSocket&gt;\n#include &lt;QTextStream&gt;\n\nint main()\n{\n    QTextStream qout(stdout);\n\n    QUdpSocket *udpSocket = new QUdpSocket(0);\n    udpSocket-&gt;bind(3838, QUdpSocket::ShareAddress);\n\n    while (udpSocket-&gt;waitForReadyRead(-1)) {\n        while(udpSocket-&gt;hasPendingDatagrams()) {\n            QByteArray datagram;\n            datagram.resize(udpSocket-&gt;pendingDatagramSize());\n            QHostAddress sender;\n            quint16 senderPort;\n\n            udpSocket-&gt;readDatagram(datagram.data(), datagram.size(),\n                                    &amp;sender, &amp;senderPort);\n            qout &lt;&lt; \"datagram received from \" &lt;&lt; sender.toString() &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>My question is: Is waitForReadyRead necessary here? Can I use a while(1) instead if I am not worrying about the CPU consumption?\nIf I need to write, is it necessary to add a waitForBytesWritten?</p>\n\n<p>I used to work with TCP sockets in sync mode under Qt, it does not work at all without the waitForReadyRead call.</p>\n"}, {"tags": ["c++", "stdset"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1435770433, "post_id": 31167529, "comment_id": 50342935, "body": "The question I have is why are you deriving from <code>std::vector</code>?"}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1435770561, "post_id": 31167529, "comment_id": 50343011, "body": "Bad idea to derive from <code>std::vector</code> or any standard library class"}, {"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435770567, "post_id": 31167529, "comment_id": 50343016, "body": "I want  to add some things to the std::vector. Someone told me composition is better but this should not be forbidden?"}, {"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 1, "creation_date": 1435770590, "post_id": 31167529, "comment_id": 50343031, "body": "Umm..yes, it is forbidden (in terms of guidelines). Scott Meyers discusses this in Effective C++"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1435770653, "post_id": 31167529, "comment_id": 50343072, "body": "@myelf Instead of listening to this &quot;someone&quot;, research the reasons why deriving from <code>std::vector</code> is not a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435771019, "post_id": 31167639, "comment_id": 50343311, "body": "to be clear this are 2 options? I don&#39;t understand the first one I guess there is a const in there but other than that nothing has changed."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435771138, "post_id": 31167639, "comment_id": 50343389, "body": "@myelf, Yes. These are two options. In your posted code, you had not only missed the <code>const</code> but the argument type is <code>ImpreciseVector</code>."}, {"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435771331, "post_id": 31167639, "comment_id": 50343513, "body": "Oh, that ImperciseVector was an artifact from bad editing. Thank you."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1435770637, "creation_date": 1435770637, "answer_id": 31167639, "question_id": 31167529, "link": "https://stackoverflow.com/questions/31167529/how-to-use-stdfind-with-an-operator-that-is-not-stdless/31167639#31167639", "title": "how to use std::find with an &lt; operator that is not std::less", "body": "<p>Ignoring for the time being that deriving from <code>std::vector</code> is a bad idea, I can think of the following ways to address the issue:</p>\n\n<ol>\n<li><p>Define <code>operator&lt;</code> for objects of <code>newVector</code>.</p>\n\n<pre><code>class newVector: public std::vector&lt;T&gt; {\n    public:\n        bool operator&lt; (const newVector&amp; v) const { \n            //..\n        }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::set&lt;newVector&gt; a;\na.find(...);\n</code></pre></li>\n<li><p>Define a functor that has appropriate <code>operator()</code> function and use it to create the <code>std::set</code>.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct NewVectorLess\n{\n   bool operator()(newVector&lt;T&gt; const&amp; lhs, newVector&lt;T&gt; const&amp; rhs)\n   {\n     // ...\n   }\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::set&lt;newVector&lt;int&gt;, NewVectorLess&lt;int&gt;&gt; a;\na.find(...);\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": false, "score": 1, "last_activity_date": 1435771590, "last_edit_date": 1435771590, "creation_date": 1435771220, "answer_id": 31167817, "question_id": 31167529, "link": "https://stackoverflow.com/questions/31167529/how-to-use-stdfind-with-an-operator-that-is-not-stdless/31167817#31167817", "title": "how to use std::find with an &lt; operator that is not std::less", "body": "<p>You don't need to overload the vector, or to change std::less, but to define separately your own <a href=\"http://en.cppreference.com/w/cpp/utility/functional/less\" rel=\"nofollow\">std::less compatible function object</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;set&gt;\nusing namespace std;\n\n    struct OppositeVectorComp\n    {\n        template&lt; class T, class Alloc &gt;\n        bool operator()( const std::vector&lt;T,Alloc&gt;&amp; lhs,const std::vector&lt;T,Alloc&gt;&amp; rhs )\n        {           \n           return   !(lhs &lt; rhs);\n        }\n    };\n\nint main() {\n    std::vector&lt;int&gt; a , b;\n\n    std::set&lt;std::vector&lt;int&gt;&gt; defaultset;\n    std::set&lt;std::vector&lt;int&gt;, OppositeVectorComp&gt; myset;\n\n    a.push_back(1);\n    b.push_back(2);\n\n    myset.insert(a);\n    myset.insert(b);\n\n    defaultset.insert(a);\n    defaultset.insert(b);\n\n    std::cout &lt;&lt; (*myset.begin())[0] &lt;&lt; std::endl; // output 2\n    std::cout &lt;&lt; (*defaultset.begin())[0] &lt;&lt; std::endl; // output 1\n\n    return 0;\n}\n</code></pre>\n\n<p>Here <code>OppositeVectorComp</code> define a new order on vectors where </p>\n\n<pre><code>OppositeVectorComp(a,b) true iff a &lt;b is false\n</code></pre>\n\n<p>By using the type <code>std::set&lt;std::vector&lt;int&gt;, OppositeVectorComp&gt;</code> we define a set which use the custom std::less. </p>\n"}], "owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 31167639, "answer_count": 2, "score": 0, "last_activity_date": 1435771590, "creation_date": 1435770192, "last_edit_date": 1435771256, "question_id": 31167529, "link": "https://stackoverflow.com/questions/31167529/how-to-use-stdfind-with-an-operator-that-is-not-stdless", "title": "how to use std::find with an &lt; operator that is not std::less", "body": "<p>say I have</p>\n\n<pre><code>class newVector: public std::vector&lt;T&gt; {\n    public:\n        bool operator&lt; (const newVector&amp; v) { \n            //..\n        }\n};\n</code></pre>\n\n<p>And </p>\n\n<pre><code>a std::set&lt;newVector&gt;; \n</code></pre>\n\n<p>I can't manage to use a.find(...) properly, I am not sure what to put into the (...) in order to use newVector::operator&lt;. When I just put a.find(element) it uses std::less. Should I change std::less somehow?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 5, "last_activity_date": 1435770597, "creation_date": 1435770597, "answer_id": 31167625, "question_id": 31167490, "link": "https://stackoverflow.com/questions/31167490/is-there-a-way-to-have-both-grayscale-and-rgb-pixels-on-the-same-image-opencv-c/31167625#31167625", "title": "Is there a way to have both grayscale and rgb pixels on the same image opencv C++?", "body": "<p>NO.</p>\n\n<p>I see two solutions to this:</p>\n\n<ol>\n<li>Have both a gray (<code>Mat1b</code>) and a rgb (<code>Mat3b</code>) image, and work on the image you need.</li>\n<li>Have a single rgb (<code>Mat3b</code>) image, and set r,g,b channels to the same gray value where you need. In this way you can mimic to have a mixed gray/rgb image.</li>\n</ol>\n"}], "owner": {"reputation": 537, "user_id": 2359084, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b68b1bfa26d36387049c9debbf77e4cf?s=128&d=identicon&r=PG", "display_name": "David Safrastyan", "link": "https://stackoverflow.com/users/2359084/david-safrastyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 31167625, "answer_count": 1, "score": 1, "last_activity_date": 1435770597, "creation_date": 1435770078, "question_id": 31167490, "link": "https://stackoverflow.com/questions/31167490/is-there-a-way-to-have-both-grayscale-and-rgb-pixels-on-the-same-image-opencv-c", "title": "Is there a way to have both grayscale and rgb pixels on the same image opencv C++?", "body": "<p>I need to be able to work with images where some regions are grayscale while others are kept on the RGB format. I don't want to convert an image into a grayscale since it will lose the channels and will become simply one channeled, is there a way to keep the RGB channels of some pixels on the picture and turn the others into a grayscale? </p>\n"}, {"tags": ["c++", "winapi", "filesystems", "symlink", "hardlink"], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1435772026, "post_id": 31167543, "comment_id": 50343854, "body": "On Windows, a symlink is implemented by a reparse point, which can be detected by <code>GetFileAttributes()</code> and <code>FindFirstFile()</code>/<code>FindNextFile()</code> via the <code>FILE_ATTRIBUTE_REPARSE_POINT</code> attribute. Hard links must also be detectable as well (I&#39;m not sure how) because the command-line <code>fsutil</code> tool has a <a href=\"https://technet.microsoft.com/en-us/library/cc788097.aspx\" rel=\"nofollow noreferrer\"><code>hardlink list</code></a> parameter that can find hard links to a given file (at least on Win7/2008+) and SysInternals also has a <a href=\"https://technet.microsoft.com/en-us/sysinternals/hh290814\" rel=\"nofollow noreferrer\"><code>FindLinks</code></a> tool for finding hard links."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435772218, "post_id": 31167543, "comment_id": 50343945, "body": "@RemyLebeau I forgot <code>FILE_ATTRIBUTE_REPARSE_POINT</code> (facepalm) . But still, it&#180;s not that easy to check if it is a symlink or another kind of RP. And yes, hard links are detectable like described in the answer, but only on certain file systems (NTFS yes, ReFS not in all versions...)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1435774714, "post_id": 31167543, "comment_id": 50345320, "body": "Actually, when the <code>FILE_ATTRIBUTE_REPARSE_POINT</code> attribute is present on a file/folder, the <code>WIN32_FIND_DATA</code> struct from <code>FindFirstFile()</code>/<code>FindNextFile()</code> specifies the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365511.aspx\" rel=\"nofollow noreferrer\">Reparse Point Tag</a> in the <code>dwReserved0</code> field. One of the available tags is <code>IO_REPARSE_TAG_SYMLINK</code>. This is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363940.aspx\" rel=\"nofollow noreferrer\">documented</a>: &quot;<i>you can determine if a reparse point is a symbolic link by testing whether the tag value is IO_REPARSE_TAG_SYMLINK</i>.&quot;"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1435784818, "post_id": 31167543, "comment_id": 50351102, "body": "FindFirstFileNameW/FindNextFileNameW should work on all standard, local file systems that have support for hard links.  That&#39;s probably all you need so far as hard links go."}], "tags": [], "owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1435771102, "last_edit_date": 1495541690, "creation_date": 1435770259, "answer_id": 31167543, "question_id": 31167363, "link": "https://stackoverflow.com/questions/31167363/how-to-find-all-the-hard-and-symbolic-links-to-a-file-folder-windows-and-unix/31167543#31167543", "title": "How to find all the hard and symbolic links to a file/folder (Windows and UNIX)?", "body": "<p><strong>Symlinks:</strong>  </p>\n\n<p>You\u00b4ll have to search all files on all hard disks etc.etc. and check each of them individually. Otherwise it\u00b4s not possible to get a list of symlinks for a specific file.  </p>\n\n<p>For Linux, <a href=\"https://stackoverflow.com/questions/2635923/how-do-you-determine-using-stat-whether-a-file-is-a-symbolic-link\">How do you determine using stat() whether a file is a symbolic link?</a> may help.  </p>\n\n<p>For Windows ... well, Reparse points are not explainable in one line.<br>\nIt\u00b4s not trivial to check if a file is a symlink from C++.</p>\n\n<p><strong>Hard links:</strong>  </p>\n\n<p>Linux: Again (usually) not possible without searching all files and checking the inode number.  </p>\n\n<p>Windows: Depending on the used file system, <code>FindFirstFileName</code> and <code>FindNextFileName</code><br>\ncould be useful, but as said, they won\u00b4t always work (ReFS...)</p>\n"}], "owner": {"reputation": 281, "user_id": 5070569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLGPP.jpg?s=128&g=1", "display_name": "Artyom Ionash", "link": "https://stackoverflow.com/users/5070569/artyom-ionash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2937, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1573733930, "creation_date": 1435769694, "last_edit_date": 1573733930, "question_id": 31167363, "link": "https://stackoverflow.com/questions/31167363/how-to-find-all-the-hard-and-symbolic-links-to-a-file-folder-windows-and-unix", "title": "How to find all the hard and symbolic links to a file/folder (Windows and UNIX)?", "body": "<p>How to find all the hard and symbolic links to a file/folder in Windows (using standard OS functions)?</p>\n\n<p>What is opposed to UNIX?</p>\n"}, {"tags": ["c++", "distribution"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770172, "post_id": 31167345, "comment_id": 50342790, "body": "That&#39;s an intellisense error, does it actually compile? Isn&#39;t intellisense just the auto-complete in VS?"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770324, "post_id": 31167345, "comment_id": 50342873, "body": "I just added the error I get when I compile"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770337, "post_id": 31167345, "comment_id": 50342881, "body": "Looks like it is getting caught up when you declare dist. The default type for discrete_distribution is &lt;int&gt; but you are trying to initialize it with iterators to an int vector. I think that would only work if you were passing it a set of integers instead of two arguments that don&#39;t represent integers."}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770586, "post_id": 31167345, "comment_id": 50343025, "body": "@RyanP Thanks, but I am not sure how to pass a set of integers into the distribution."}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770693, "post_id": 31167345, "comment_id": 50343094, "body": "If you google my error message, there is one link and it just says to update VS 2013, and I did that, and still get same error."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1435770754, "post_id": 31167345, "comment_id": 50343131, "body": "try the code in my answer. i think you are missing an <code>int&amp;</code> but i haven&#39;t used that function before and i don&#39;t have any test setup to compile it currently... but I think it&#39;ll work"}, {"owner": {"reputation": 375, "user_id": 4397868, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/jE0oK.jpg?s=128&g=1", "display_name": "olivia", "link": "https://stackoverflow.com/users/4397868/olivia"}, "edited": false, "score": 0, "creation_date": 1482829005, "post_id": 31167345, "comment_id": 69886082, "body": "@Pii hi, how did you solve your problem? I am in the same situation."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435772048, "post_id": 31167615, "comment_id": 50343857, "body": "It says that &quot;dist&quot; is undefined when I try to use it !"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435773140, "post_id": 31167615, "comment_id": 50344443, "body": "Thanks. I was missing the class template! you fixed my issue!"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435773502, "post_id": 31167615, "comment_id": 50344649, "body": "Awesome to hear! Make sure to mark this as your accepted answer, working on my reputation  :)"}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435775521, "post_id": 31167615, "comment_id": 50345843, "body": "hi sorry, I am getting &quot;unresolved external error&quot; from template&lt; class InputIt &gt;. Where should I paste this code?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435776116, "post_id": 31167615, "comment_id": 50346198, "body": "If it is a new issue, I&#39;d make a new question. If it is directly related to this, I&#39;d update your original question."}, {"owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "edited": false, "score": 0, "creation_date": 1435781332, "post_id": 31167615, "comment_id": 50349202, "body": "Thanks ok. I made a new question here: <a href=\"http://stackoverflow.com/questions/31169695/creating-a-custom-interated-discrete-evolutionary-distribution\" title=\"creating a custom interated discrete evolutionary distribution\">stackoverflow.com/questions/31169695/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 0, "last_activity_date": 1435770555, "creation_date": 1435770555, "answer_id": 31167615, "question_id": 31167345, "link": "https://stackoverflow.com/questions/31167345/creating-a-discrete-distribution-in-visual-studio/31167615#31167615", "title": "Creating a discrete distribution in Visual Studio", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/numeric/random/discrete_distribution/discrete_distribution\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/random/discrete_distribution/discrete_distribution</a></p>\n\n<p>You are initializing it with iterators so you need to use this constructor</p>\n\n<pre><code>template&lt; class InputIt &gt;\ndiscrete_distribution( InputIt first, InputIt last );\n</code></pre>\n\n<p>So I'm guessing it should be <code>std::discrete_distribution&lt;int&amp;&gt; dist(weights.begin(), weights.end());</code></p>\n\n<p>But I haven't used discrete_distribution before.</p>\n"}], "owner": {"reputation": 541, "user_id": 4996007, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10153989617959816/picture?type=large", "display_name": "Ryan J. Shrott", "link": "https://stackoverflow.com/users/4996007/ryan-j-shrott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 31167615, "answer_count": 1, "score": 0, "last_activity_date": 1435770555, "creation_date": 1435769624, "last_edit_date": 1435770300, "question_id": 31167345, "link": "https://stackoverflow.com/questions/31167345/creating-a-discrete-distribution-in-visual-studio", "title": "Creating a discrete distribution in Visual Studio", "body": "<p>I want to create my own discrete distribution in Visual Studio with 121 integers. Here is the code I am trying:</p>\n\n<pre><code>std::vector&lt; int&gt; weights(121);\nfor (int i = 0; i &lt; 121; i++)\n{\n    weights[i] = (teamData[i]).S(); // some numbers from my program data \n}\nstd::discrete_distribution&lt;&gt; dist(weights.begin(), weights.end());\n</code></pre>\n\n<p>I get the intellisence error:</p>\n\n<pre><code>1   IntelliSense: no instance of constructor \"std::discrete_distribution&lt;_Ty&gt;::discrete_distribution [with _Ty=int]\" matches the argument list\n        argument types are: (std::_Vector_iterator&lt;std::_Vector_val&lt;std::_Simple_types&lt;int&gt;&gt;&gt;, std::_Vector_iterator&lt;std::_Vector_val&lt;std::_Simple_types&lt;int&gt;&gt;&gt;)    \n</code></pre>\n\n<p>and when I compile I get:</p>\n\n<p>Error   1   error C2661: 'std::discrete_distribution::discrete_distribution' : no overloaded function takes 2 arguments<br>\nDoes anyone know to fix this? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 7, "creation_date": 1435768594, "post_id": 31167008, "comment_id": 50341953, "body": "Make your base class a CRTP template class."}, {"owner": {"reputation": 9481, "user_id": 1244013, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mJu1P.jpg?s=128&g=1", "display_name": "Kevin Le - Khnle", "link": "https://stackoverflow.com/users/1244013/kevin-le-khnle"}, "edited": false, "score": 0, "creation_date": 1435769320, "post_id": 31167008, "comment_id": 50342335, "body": "Can you explain in different words the problem if you make A::g() virtual?"}, {"owner": {"reputation": 14905, "user_id": 931303, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1798bf4504775c89be6686fa6fc74e3?s=128&d=identicon&r=PG", "display_name": "Jorge Leitao", "link": "https://stackoverflow.com/users/931303/jorge-leitao"}, "reply_to_user": {"reputation": 9481, "user_id": 1244013, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mJu1P.jpg?s=128&g=1", "display_name": "Kevin Le - Khnle", "link": "https://stackoverflow.com/users/1244013/kevin-le-khnle"}, "edited": false, "score": 0, "creation_date": 1435770929, "post_id": 31167008, "comment_id": 50343235, "body": "@Khnle-Kevin: why should I make A::g() virtual? For me, polymorphism or not is part of the interface I&#39;m producing. Since I don&#39;t see how polymorphism helps <i>in my specific use case</i>, I don&#39;t have a compelling reason to add it. I wanted to know if I <i>really</i> needed to add it because of the language I&#39;m using."}], "answers": [{"comments": [{"owner": {"reputation": 14905, "user_id": 931303, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1798bf4504775c89be6686fa6fc74e3?s=128&d=identicon&r=PG", "display_name": "Jorge Leitao", "link": "https://stackoverflow.com/users/931303/jorge-leitao"}, "edited": false, "score": 2, "creation_date": 1435771246, "post_id": 31167188, "comment_id": 50343452, "body": "Beautiful pattern. Thank you so much!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 14905, "user_id": 931303, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1798bf4504775c89be6686fa6fc74e3?s=128&d=identicon&r=PG", "display_name": "Jorge Leitao", "link": "https://stackoverflow.com/users/931303/jorge-leitao"}, "edited": false, "score": 0, "creation_date": 1435783537, "post_id": 31167188, "comment_id": 50350375, "body": "@J.C.Leit&#227;o Yes, it&#39;s useful for a number of use cases (mixin interfaces, policy based desgns, etc.). Especially useful for embedded designs, where you want to avoid additional overhead introduced with vtables, and well know you won&#39;t need runtime configurations (but merely configure your actually available hardware components at compile time)."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 11, "last_activity_date": 1435769103, "creation_date": 1435769103, "answer_id": 31167188, "question_id": 31167008, "link": "https://stackoverflow.com/questions/31167008/call-child-method-from-base-method-without-virtual-or-references/31167188#31167188", "title": "Call child method from base method without virtual or references", "body": "<p>You can simply make your base class a <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\">CRTP</a> (as you've mentioned it's already a templated class anyway):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class Derived&gt;\nclass A {\npublic:\n    void g() {std::cout &lt;&lt; \"Call from A\" &lt;&lt; std::endl;}\n    void f() { static_cast&lt;Derived*&gt;(this)-&gt;g();}\n            // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Call g() from Derived\n};\n\nclass B : public A&lt;B&gt; {\npublic:\n    void g() {std::cout &lt;&lt; \"Call from B\" &lt;&lt; std::endl;}\n};\n\nint main() {\n    B b;\n    b.f(); // \"Call from B\" \n}\n</code></pre>\n"}], "owner": {"reputation": 14905, "user_id": 931303, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1798bf4504775c89be6686fa6fc74e3?s=128&d=identicon&r=PG", "display_name": "Jorge Leitao", "link": "https://stackoverflow.com/users/931303/jorge-leitao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 2, "accepted_answer_id": 31167188, "answer_count": 1, "score": 8, "last_activity_date": 1435769103, "creation_date": 1435768461, "question_id": 31167008, "link": "https://stackoverflow.com/questions/31167008/call-child-method-from-base-method-without-virtual-or-references", "title": "Call child method from base method without virtual or references", "body": "<p>Consider the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\npublic:\n    void g() {std::cout &lt;&lt; \"Call from A\" &lt;&lt; std::endl;}\n    void f() {g();}\n};\n\nclass B : public A {\npublic:\n    void g() {std::cout &lt;&lt; \"Call from B\" &lt;&lt; std::endl;}\n};\n\nint main() {\n    B b;\n    b.f(); // \"Call from A\" \n}\n</code></pre>\n\n<p>If I make <code>A::g()</code> virtual, it outputs \"Call from B\".</p>\n\n<p>I always understood \"virtual\" useful when we want an <em>interface</em> to allow polymorphism, say <code>A *a = new B(); a-&gt;f()</code>, but this example indicates that <code>virtual</code> is also required in this situation. My understanding of this example is that the call <code>g()</code> on <code>A::f</code> is formally equivalent to <code>this-&gt;g()</code>, and this is a pointer.</p>\n\n<p>However, this is not what I really wanted: in my real example, I have a general template class A with a general method <code>A::simulate</code> (say <code>A::f</code>), that uses different methods (say <code>A::g()</code>), some of which are overwritten by subclass (say <code>B</code>). What I wanted was to have the method <code>A::simulate</code> in such a way that the code would be compiled in the subclasses of A as if it has been defined on the subclasses so I don't have the same logic coded multiple-times. How can I do this?</p>\n\n<p>This is because my interface will not require polymorphism because the user will always need to compile the code (i.e. it is header only).</p>\n"}, {"tags": ["c++", "reverse-engineering", "ollydbg"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1435768682, "post_id": 31167004, "comment_id": 50341998, "body": "Shouldn&#39;t you disassemble the app first?"}, {"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1435768741, "post_id": 31167004, "comment_id": 50342029, "body": "@ForceBru actually i followed some tutorials .they just open the exe file from olly"}], "answers": [{"comments": [{"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435845295, "post_id": 31186468, "comment_id": 50378420, "body": "very nice answer.i&#39;m using visual studio 2013."}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435845457, "post_id": 31186468, "comment_id": 50378547, "body": "Then your compiler is Microsoft&#39;s <code>cl.exe</code>, it is a very common compiler and it is very unlikely that the problem comes from here. Again, did you do the search from the good module?"}, {"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435845839, "post_id": 31186468, "comment_id": 50378838, "body": "here i took a snapshot <a href=\"http://i.imgur.com/9GsvD32.png\" rel=\"nofollow noreferrer\">i.imgur.com/9GsvD32.png</a>. actually it shows something like <code>ntdll</code> .i think i&#39;m doing something wrong .could you explain little about ntdll"}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435846469, "post_id": 31186468, "comment_id": 50379301, "body": "That&#39;s it. <code>Ntdll</code> is a system layer, it&#39;s from here that your program&#39;s entry point will be called. You have to find that entry point by executing your program step by step (<code>Step Over</code>). When you find it, just <code>Step into</code> and then do your search.  <a href=\"http://i.imgur.com/N1IUVt7.png\" rel=\"nofollow noreferrer\">i.imgur.com/N1IUVt7.png</a>"}, {"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435846626, "post_id": 31186468, "comment_id": 50379411, "body": "so how i find entry point? by lookng at text &lt;module entry point&gt; ?"}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 1, "creation_date": 1435846715, "post_id": 31186468, "comment_id": 50379474, "body": "Yes by executing step by step, and to the left of <code>&lt;module entry point&gt;</code> you&#39;ll find your exe name."}, {"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435847114, "post_id": 31186468, "comment_id": 50379777, "body": "eventually i can see &quot;password &quot; texts .tnx"}, {"owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "reply_to_user": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1435847126, "post_id": 31186468, "comment_id": 50379791, "body": "At this line, you have to <code>Step into</code>. Then, do your search."}, {"owner": {"reputation": 1266, "user_id": 5050750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dbc25753665eb4c15f0a690dc4a4162?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/5050750/amir"}, "edited": false, "score": 0, "creation_date": 1457976181, "post_id": 31186468, "comment_id": 59640600, "body": "don&#39;t need press f7 or f8 to go to your code. Just press Alt+e and then double click on your code and after search"}], "tags": [], "owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1435845030, "creation_date": 1435845030, "answer_id": 31186468, "question_id": 31167004, "link": "https://stackoverflow.com/questions/31167004/olly-debugger-cannot-find-referenced-text/31186468#31186468", "title": "olly debugger cannot find referenced text", "body": "<p>Well, I tried and it worked for me:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Eq5ck.png\" alt=\"enter image description here\"></p>\n\n<p>I compiled the code with onlinecompiler.net, which use <code>mingw</code> as far as I know. Here is the <a href=\"http://www.onlinecompiler.net/upload/tmp/wB5joSlS.exe\" rel=\"nofollow noreferrer\">link to the executable</a>.</p>\n\n<p>It may be a problem with your compiler, but neither <code>gcc</code>/<code>mingw</code> nor <code>cl.exe</code> are modifying hardcoded strings at compile time.</p>\n\n<p>Also, are you sure that you are doing the search in your program module? (not in the ntdll one for instance)</p>\n"}], "owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "accepted_answer_id": 31186468, "answer_count": 1, "score": 0, "last_activity_date": 1435845030, "creation_date": 1435768450, "last_edit_date": 1435822800, "question_id": 31167004, "link": "https://stackoverflow.com/questions/31167004/olly-debugger-cannot-find-referenced-text", "title": "olly debugger cannot find referenced text", "body": "<p>I created a very simple c++ console application which compare user entered password with hard-corded one and print corresponding output.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n  string password;\n  cout &lt;&lt; \"Enter the password\"&lt;&lt;endl;\n  getline (cin, password);\n\n if(password==\"123\"){\n\n      cout &lt;&lt; \"correct password\" &lt;&lt;endl;\n }else  {\n      cout &lt;&lt; \"incorrect password\" &lt;&lt;endl;\n }\n  return 0;\n\n}\n</code></pre>\n\n<p>I want to debug and skip a specific line. For that I want to search the <code>correct password / incorrect password</code> line. So I tried using \"search for all referenced text \" option but the problem is there is no such text.</p>\n\n<p>I followed some tutorials where they search for referenced text and find that kind of hard coded lines.</p>\n"}, {"tags": ["c++", "c++11", "iterator"], "comments": [{"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1435768563, "post_id": 31167003, "comment_id": 50341928, "body": "They can be indices. Or in some kind of esoteric hash-table implementation, a hash."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1435768629, "post_id": 31167003, "comment_id": 50341969, "body": "They don&#39;t have to be pointers; they can just to <i>act</i> like them. Ex: user-defined objects with internal state data and appropriate public operator overloads for the <a href=\"http://en.cppreference.com/w/cpp/iterator\" rel=\"nofollow noreferrer\"><b>iterator category</b></a> they&#39;re claiming to provide will suffice."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1435768637, "post_id": 31167003, "comment_id": 50341975, "body": "@MicroVirus No, indices wouldn&#39;t be iterators. Rahul, they can, for example, be user defined types that implement some of the iterator concepts (see <a href=\"http://en.cppreference.com/w/cpp/iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator</a>)"}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435768715, "post_id": 31167003, "comment_id": 50342016, "body": "@juanchopanza Holding a reference to the object which is iterated over and the index of the current element in that object isn&#39;t an iterator? (Could be, I&#39;ve never really bothered to look at C++ iterators in depth)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1435768759, "post_id": 31167003, "comment_id": 50342043, "body": "@MicroVirus That doesn&#39;t mean an index could be an iterator."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1435768876, "post_id": 31167003, "comment_id": 50342101, "body": "An integer index isn&#39;t a C++ iterator, but a class wrapping an integer index could very well be."}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435768880, "post_id": 31167003, "comment_id": 50342105, "body": "@juanchopanza I think I misunderstood the question, then: I thought by &quot;be normal pointers&quot; it meant a special iterator class that internally holds a pointer to perform the iteration; not: the iterator object itself is a pointer."}, {"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435768987, "post_id": 31167003, "comment_id": 50342160, "body": "I m waiting for a formal answer maybe with an example of this &#39;different&#39; iterator"}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1435769164, "post_id": 31167003, "comment_id": 50342245, "body": "Subscribing to the &quot;the iterator <b>is</b> a pointer&quot;, I&#39;d reverse the statement: &quot;Iterators in some cases are pointers, but typically are different&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435770163, "post_id": 31167003, "comment_id": 50342785, "body": "SGI created a good document on <a href=\"https://www.sgi.com/tech/stl/Iterators.html\" rel=\"nofollow noreferrer\">Standard Library Iterators</a>.  It&#39;s a good read telling about the different types and properties of iterators."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1435769907, "creation_date": 1435769907, "answer_id": 31167434, "question_id": 31167003, "link": "https://stackoverflow.com/questions/31167003/iterators-in-c-underlying-working/31167434#31167434", "title": "Iterators in c++ underlying working", "body": "<p>A pointer is one way of implementing an iterator.  The standard allows this, but it also allows other implementations, such as objects holding references.  The only thing that matters is presenting the correct public interface for their declared iterator category.</p>\n\n<p>As pointers have <code>operator++</code>, <code>operator*</code> and the rest, they can act as iterators for contiguous collections such as <code>std::vector</code> and <code>std::array</code>.</p>\n\n<p>However, they cannot act as iterators for, say, a linked list, because <code>operator++</code> does not have the correct semantics.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1435771110, "creation_date": 1435771110, "answer_id": 31167793, "question_id": 31167003, "link": "https://stackoverflow.com/questions/31167003/iterators-in-c-underlying-working/31167793#31167793", "title": "Iterators in c++ underlying working", "body": "<p>There are different categories (classifications) of iterators:</p>\n\n<ul>\n<li>Input Iterator</li>\n<li>Output Iterator</li>\n<li>Forward Iterator</li>\n<li>Bidirectional Iterator</li>\n<li>Random Access Iterator</li>\n</ul>\n\n<p>A normal pointer is under the Random Access classification.  This means that it has attributes for random access.</p>\n\n<p>A pointer can be incremented and decremented.  The primary difference is the definition of increment and decrement.  The memory location equation for incrementing is:  </p>\n\n<pre><code>Next_Location = Previous_Location + sizeof(Target_Data_Type);\n</code></pre>\n\n<p>The memory location depends on the data type that the pointer is pointing to.</p>\n\n<p>Iterators derived from <em>Forward_Iterator</em> will point to the <em>next item</em>; not necessarily to the next memory location.  An example is the linked list.  The <em>next</em> item in a linked list may be anywhere in memory; not necessarily the next memory location.</p>\n\n<p>So one important difference is that <strong>incrementing an interator makes it point to the next item</strong> and <strong>incrementing a pointer makes it point to the next memory location (adjusting for size of data type)</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 0, "creation_date": 1435773023, "post_id": 31168159, "comment_id": 50344375, "body": "using a class would have been clearer because i have not read such code for struct but never the less its an nice example i get it now"}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "reply_to_user": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "edited": false, "score": 1, "creation_date": 1435779403, "post_id": 31168159, "comment_id": 50348090, "body": "@rahultyagi Classes and structures are the same in C++, except for the default access level, which is <code>public</code> for <code>struct</code> and <code>private</code> for class; see, e.g. <a href=\"http://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c\">this SO question</a>"}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 1, "last_activity_date": 1435774447, "last_edit_date": 1435774447, "creation_date": 1435772507, "answer_id": 31168159, "question_id": 31167003, "link": "https://stackoverflow.com/questions/31167003/iterators-in-c-underlying-working/31168159#31168159", "title": "Iterators in c++ underlying working", "body": "<p>The author means iterators can be implemented as custom (and in some cases significantly complex) objects. They don't have to be pointers. Rather, they ascribe to <em>behave</em> like them (at least to some extent).</p>\n\n<p>The following is a <strong>very</strong> rudimentary example of an iterator that doesn't really do a hell of a lot. It is an <a href=\"http://en.cppreference.com/w/cpp/iterator\" rel=\"nofollow\">input-iterator-category</a> implementation that simply iterates over a range of numbers. The point is it is clearly an iterator implementation, but clearly has <em>nothing</em> to do with pointers.</p>\n\n<p>I've taken the liberty to load this with debug output so you can see what is going on. It provides both traditional and range-based iteration examples. The difference in output of the two being... interesting:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nstruct Range\n{\n    Range(int low, int high)\n        : low(std::min(low,high))\n        , high(std::max(low,high))\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n\n    // custom iterator for our Range type\n    struct iterator : public std::iterator&lt;std::input_iterator_tag, int, std::ptrdiff_t, int*, int&gt;\n    {\n        friend struct Range;\n\n        iterator&amp; operator ++()\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n            ++myvalue;\n            return *this;\n        }\n\n        iterator operator ++(int)\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n            return iterator(range, myvalue++);\n        }\n\n        int operator*() const\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n            return myvalue;\n        }\n\n        bool operator ==(const iterator&amp; it) const\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n            return myvalue == it.myvalue;\n        }\n\n        bool operator !=(const iterator&amp; it) const\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n            return myvalue != it.myvalue;\n        }\n\n    private:\n        iterator(Range&amp; range, int value)\n            : range(range)\n            , myvalue(value)\n        {\n            std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n        }\n\n        Range&amp; range;\n        int myvalue;\n    };\n\n    iterator begin()\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n        return iterator(*this, low);\n    }\n\n    iterator end()\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n        return iterator(*this, high+1);\n    }\n\nprivate:\n    int low, high;\n};\n\n\nint main()\n{\n    Range range(1,5);\n\n    // traditional iteration\n    for (Range::iterator it = range.begin(); it != range.end(); ++it)\n        std::cout &lt;&lt; *it &lt;&lt; '\\n';\n    std::cout &lt;&lt; '\\n';\n\n    // C++11 range-based iterator\n    for (auto n : range)\n        std::cout &lt;&lt; n &lt;&lt; '\\n';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Range::Range(int, int)\nRange::iterator Range::begin()\nRange::iterator::iterator(Range &amp;, int)\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n1\nRange::iterator &amp;Range::iterator::operator++()\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n2\nRange::iterator &amp;Range::iterator::operator++()\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n3\nRange::iterator &amp;Range::iterator::operator++()\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n4\nRange::iterator &amp;Range::iterator::operator++()\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n5\nRange::iterator &amp;Range::iterator::operator++()\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\n\nRange::iterator Range::begin()\nRange::iterator::iterator(Range &amp;, int)\nRange::iterator Range::end()\nRange::iterator::iterator(Range &amp;, int)\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n1\nRange::iterator &amp;Range::iterator::operator++()\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n2\nRange::iterator &amp;Range::iterator::operator++()\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n3\nRange::iterator &amp;Range::iterator::operator++()\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n4\nRange::iterator &amp;Range::iterator::operator++()\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\nint Range::iterator::operator*() const\n5\nRange::iterator &amp;Range::iterator::operator++()\nbool Range::iterator::operator!=(const Range::iterator &amp;) const\n</code></pre>\n\n<p>I know it's trivial, but the point is to demonstrate how iterators don't have to be pointers, or even <em>use</em> pointers. How they iterate whatever they're iterating will ultimately be up to the iterator implementation itself, so long as it is compliant with the requirements of the iterator category it claims to support.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 613, "user_id": 4156508, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfd273db25303bc45f885713b90207dd?s=128&d=identicon&r=PG&f=1", "display_name": "rahul tyagi", "link": "https://stackoverflow.com/users/4156508/rahul-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 31168159, "answer_count": 3, "score": 2, "last_activity_date": 1435774447, "creation_date": 1435768449, "last_edit_date": 1435769451, "question_id": 31167003, "link": "https://stackoverflow.com/questions/31167003/iterators-in-c-underlying-working", "title": "Iterators in c++ underlying working", "body": "<p>I am studying iterators in C++. The author mentions that iterators can be normal pointers, but in some cases they may be different.  </p>\n\n<p>What exactly does the author mean by different? Smart pointer?</p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1435767751, "post_id": 31166751, "comment_id": 50341459, "body": "1st version should work. Why don&#39;t you simply try out?"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1435767957, "post_id": 31166751, "comment_id": 50341574, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/map/operator_at\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/map/operator_at</a>: <i>&quot;Returns a reference to the value that is mapped to a key equivalent to key, <b>performing an insertion if such key does not already exist</b>. &quot;</i>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1435767965, "post_id": 31166751, "comment_id": 50341578, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: It is not because it seems to works that it is ok. There are a lot of UB which seems to works with simple try."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435768120, "post_id": 31166751, "comment_id": 50341667, "body": "@Jarod42 Along with reading the reference documentation, it&#39;s clear it must work."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1435768194, "post_id": 31166751, "comment_id": 50341709, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 if people read documentation 95% of questions here would disappear"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1435767950, "creation_date": 1435767950, "answer_id": 31166844, "question_id": 31166751, "link": "https://stackoverflow.com/questions/31166751/vector-as-map-value-insert-new-key-and-push-back-immediately-c/31166844#31166844", "title": "Vector as map value, insert new key and push back immediately c++", "body": "<pre><code>map&lt;string, vector&lt;int&gt;&gt; mymap;\nmymap[\"bob\"].push_back(1);\n</code></pre>\n\n<p>should work. <code>map::operator[]</code> inserts an item for the given key if one doesn't already exist.</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/container/map/operator_at\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/map/operator_at</a></p>\n\n<blockquote>\n  <p>Returns a reference to the value that is mapped to a key equivalent to key, performing an insertion if such key does not already exist.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 3, "last_activity_date": 1435768202, "creation_date": 1435768202, "answer_id": 31166925, "question_id": 31166751, "link": "https://stackoverflow.com/questions/31166751/vector-as-map-value-insert-new-key-and-push-back-immediately-c/31166925#31166925", "title": "Vector as map value, insert new key and push back immediately c++", "body": "<p>Short answer: your code is fine.</p>\n\n<blockquote>\n  <h3>std::map::operator[]</h3>\n\n<pre><code>mapped_type&amp; operator[] (const key_type&amp; k);\n</code></pre>\n  \n  <p>If <code>k</code> matches the key of an element in the container, the function\n  returns a reference to its mapped value.</p>\n  \n  <p><strong>If <code>k</code> does not match the key of any element in the container, the function inserts a new element with that key and returns a reference\n  to its mapped value.</strong> Notice that this always increases the container\n  size by one, even if no mapped value is assigned to the element (the\n  element is constructed using its default constructor).</p>\n  \n  <p>A similar member function, <code>map::at</code>, has the same behavior when an\n  element with the key exists, but throws an exception when it does not.</p>\n</blockquote>\n\n<p><em>source: <a href=\"http://www.cplusplus.com/reference/map/map/operator%5B%5D/\" rel=\"nofollow\">C++ Reference</a></em></p>\n\n<p>Considering your second line, for example:</p>\n\n<pre><code>mymap[\"bob\"].push_back(1);\n</code></pre>\n\n<p><code>mymap</code> doesn't have a key <code>\"bob\"</code>, so it creates one and returns a reference to a <em>default-constructed</em> (i.e. empty) <code>vector&lt;int&gt;</code> associated with that key.</p>\n\n<p>You then <code>push_back(1)</code> to that vector.  You could access <code>mymap[\"bob\"]</code> again, and you'll get a reference to that vector, containing the single element <code>1</code>.</p>\n"}], "owner": {"reputation": 48, "user_id": 4914680, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153322893584749/picture?type=large", "display_name": "Zachary Scott Lohner", "link": "https://stackoverflow.com/users/4914680/zachary-scott-lohner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3898, "favorite_count": 2, "accepted_answer_id": 31166925, "answer_count": 2, "score": 2, "last_activity_date": 1435768202, "creation_date": 1435767634, "question_id": 31166751, "link": "https://stackoverflow.com/questions/31166751/vector-as-map-value-insert-new-key-and-push-back-immediately-c", "title": "Vector as map value, insert new key and push back immediately c++", "body": "<p>Does this work?</p>\n\n<pre><code>map&lt;string, vector&lt;int&gt;&gt; mymap;\nmymap[\"bob\"].push_back(1);\nmymap[\"joe\"].push_back(3);\nmymap[\"joe\"].push_back(12);\n</code></pre>\n\n<p>Or do I have to do this?</p>\n\n<pre><code>map&lt;string, vector&lt;int&gt;&gt; mymap;\nif (mymap.find(\"bob\") == mymap.end()) {\n    vector&lt;int&gt; vec;\n    mymap[\"bob\"] = vec;\n    mymap[\"bob\"].push_back(1);\n}\nelse {\n    mymap[\"bob\"].push_back(1);\n}\n...\n</code></pre>\n\n<p>Basically the question is whether or not mymap[\"bob\"] creates the vector as its mapped value, or if I have to create a vector myself and add it into the map for new keys.</p>\n"}, {"tags": ["java", "android", "c++", "bitmap", "java-native-interface"], "comments": [{"owner": {"reputation": 2357, "user_id": 4787944, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SyK9P2bYgDE/AAAAAAAAAAI/AAAAAAAAAP0/5GbyzS97oDk/photo.jpg?sz=128", "display_name": "Saritha G", "link": "https://stackoverflow.com/users/4787944/saritha-g"}, "edited": false, "score": 0, "creation_date": 1435816289, "post_id": 31166551, "comment_id": 50359780, "body": "May be you are getting empty data. Once check it out."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "edited": false, "score": 1, "creation_date": 1435825048, "post_id": 31174791, "comment_id": 50364337, "body": "Thanks for the answer, this solves 80% of my problems. You are right, I have an array of uncompressed RGB data. I followed your suggestions (code here <a href=\"http://pastebin.com/SespEigv\" rel=\"nofollow noreferrer\">pastebin.com/SespEigv</a> ) but now I have two problems: 1 each time I run this code it takes me ~1s for a 320x240 image. Is there a way to fasten up this process? I would like to be as close to, let&#39;s say, 30fps, as possible 2 the image is there, but its colors are messed up. I am pretty sure that the jni byte array is coded in RGB; so, why my colors are so strange?"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "edited": false, "score": 0, "creation_date": 1435825605, "post_id": 31174791, "comment_id": 50364666, "body": "If the colors are messed up it could be due to the RGB order. I don&#39;t know what order your data is in but try intArray[i] = 0xff000000 |     ((int)data[i*3+2] &lt;&lt; 16) | ((int)data[i*3+1] &lt;&lt; 8) | (int)data[i*3]; As for the speed issue, I don&#39;t think that the color conversion would take 1 second for a 320x240 image, are you doing some other processing on the JNI side beforehand that could account for that?"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "edited": false, "score": 0, "creation_date": 1435825747, "post_id": 31174791, "comment_id": 50364761, "body": "It could be that allocating the byte array each time is slowing it down. You can try allocating it on the Java side once and passing it to the JNI which fills it up, reusing it each time. Likewise don&#39;t create the bitmap each time, create it once and reuse."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "edited": false, "score": 0, "creation_date": 1435826137, "post_id": 31174791, "comment_id": 50365006, "body": "One more thing, try masking the bytes with &amp; 255 (see revised answer). Java bytes are signed"}, {"owner": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "edited": false, "score": 0, "creation_date": 1435913475, "post_id": 31174791, "comment_id": 50407657, "body": "Your last modification (i.e. masking the bytes) was the proper way to go. I even managed to optimize my code a bit, and it is much faster (even though I would like to improve it - still have to try with the allocation of the bitmap once in the Java side). Thanks for your help!"}], "tags": [], "owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "is_accepted": true, "score": 4, "last_activity_date": 1435826080, "last_edit_date": 1435826080, "creation_date": 1435804848, "answer_id": 31174791, "question_id": 31166551, "link": "https://stackoverflow.com/questions/31166551/jni-bitmap-from-unsigned-char-always-null/31174791#31174791", "title": "JNI: Bitmap from unsigned char* always null", "body": "<p><a href=\"http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray(byte[],%20int,%20int,%20android.graphics.BitmapFactory.Options)\" rel=\"nofollow\">BitmapFactor.decodeByteArray</a> is for decoding <em>compressed</em> image data, for example the contents of a PNG file.</p>\n\n<p>If your byte array contains uncompressed RGB data, then you can <a href=\"http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap(int,%20int,%20android.graphics.Bitmap.Config)\" rel=\"nofollow\">create a mutable Bitmap</a> of the correct width and height and then set the pixels using <a href=\"http://developer.android.com/reference/android/graphics/Bitmap.html#setPixels(int[],%20int,%20int,%20int,%20int,%20int,%20int)\" rel=\"nofollow\">Bitmap.setPixels</a>. However, setPixels takes an array of ints with 32-bit ARGB values, and from your log it looks like your byte array contains 3-bytes-per-pixel RGB data.</p>\n\n<p>So you'll need to create an int array, then process your byte array and write one int value to the int array for every byte triple, e.g:</p>\n\n<pre><code>intArray[i] = 0xff000000 |\n    (((int)data[i*3] &amp; 255) &lt;&lt; 16) | (((int)data[i*3+1] &amp; 255) &lt;&lt; 8) | ((int)data[i*3+2] &amp; 255);\n</code></pre>\n\n<p>Then pass it to setPixels. Or you could do it on the JNI side and return a jintArray.</p>\n"}], "owner": {"reputation": 167, "user_id": 3333040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6c6b69c37f7ce911d4b8b4eec80a739?s=128&d=identicon&r=PG", "display_name": "alecive", "link": "https://stackoverflow.com/users/3333040/alecive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 31174791, "answer_count": 1, "score": 3, "last_activity_date": 1435826080, "creation_date": 1435767055, "question_id": 31166551, "link": "https://stackoverflow.com/questions/31166551/jni-bitmap-from-unsigned-char-always-null", "title": "JNI: Bitmap from unsigned char* always null", "body": "<p>I would like to pass an image (via jni) from C++ to an android application. I am starting from an <code>unsigned char*</code> array. This array is not corrupted whatsoever; I am even able to save it into a <code>ppm</code> file and display it properly on my laptop.</p>\n\n<p>Then, I convert it to a <code>jByteArray</code> by using this function:</p>\n\n<pre><code>jbyteArray imgByte=as_byte_array(env,imgRaw,img.getRawImageSize());\n...\njbyteArray as_byte_array(JNIEnv *env, unsigned char* buf, int len) {\n    jbyteArray array = env-&gt;NewByteArray (len);\n    env-&gt;SetByteArrayRegion (array, 0, len, reinterpret_cast&lt;jbyte*&gt;(buf));\n    return array;\n}\n</code></pre>\n\n<p>Afterward, I send this <code>jByteArray</code> to the java side. This variable has been properly populated, as I can see by printing its hex values on LogCat:</p>\n\n<pre><code>07-01 18:02:45.941    7017-8238/com.myapp.myapp W/C++ side\ufe55  798a95798b9677889371838d6b7d8664757e5d6e7860717b5e...\n07-01 18:02:46.941    7017-8238/com.myapp.myapp W/Java side\ufe55 798a95798b9677889371838d6b7d8664757e5d6e7860717b5e...\n</code></pre>\n\n<p>The final step would be to show it on an ImageView. To this end, I do the following code (taken from another question on SO):</p>\n\n<pre><code>public void setImageViewWithByteArray(final ImageView view, byte[] data) {\n    final Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);\n\n    getActivity().runOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            if (bitmap==null) {\n                Log.e(TAG,\"Bitmap is NULL!\");\n                view.setImageResource(R.drawable.abc_btn_radio_material);\n            }\n            else {\n                view.setImageBitmap(bitmap);\n            }\n        }\n    });\n}\n</code></pre>\n\n<p>but the <code>bitmap</code> variable is always <code>null</code>. What am I doing wrong? Is there a way to debug <code>decodeByteArray</code>?</p>\n"}, {"tags": ["c++", "multithreading", "data-structures"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 2, "creation_date": 1435767030, "post_id": 31166465, "comment_id": 50341023, "body": "You won&#39;t get a speed up if you do it like that.  What you want to do is have two copies of your graph.  Copying things is fast if you organise your structure well.  At the end once you&#39;ve finished writing, you make a copy and give that to your threads to process (read), whilst your writer/editor thread starts processing a new copy/frame.   This will avoid the constant lock contention a reader/writer solution entails."}, {"owner": {"reputation": 9391, "user_id": 717481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0292aeefc5c774d3acd0ca14914c5db2?s=128&d=identicon&r=PG", "display_name": "sparc_spread", "link": "https://stackoverflow.com/users/717481/sparc-spread"}, "edited": false, "score": 1, "creation_date": 1435767680, "post_id": 31166465, "comment_id": 50341411, "body": "Have a look <a href=\"http://stackoverflow.com/questions/16118889/c-11-equivalent-of-java-util-concurrenthashmap\">at this SO post</a>."}, {"owner": {"reputation": 359, "user_id": 1888550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45d0497f19426a8289f35232d47a0249?s=128&d=identicon&r=PG", "display_name": "pt3dNyc", "link": "https://stackoverflow.com/users/1888550/pt3dnyc"}, "edited": false, "score": 0, "creation_date": 1435767982, "post_id": 31166465, "comment_id": 50341596, "body": "Thanks Robinson - I&#39;m not sure I understand the model you describe. Can you elaborate? When the writer finishes, does it overwrite a persistent copy that is then accessed by the readers (this would require a lock, right)? Or does the writer distribute a fresh copy to each reader? If I&#39;m understanding correctly, this seems like it would only work with a single writer, correct?"}, {"owner": {"reputation": 359, "user_id": 1888550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45d0497f19426a8289f35232d47a0249?s=128&d=identicon&r=PG", "display_name": "pt3dNyc", "link": "https://stackoverflow.com/users/1888550/pt3dnyc"}, "edited": false, "score": 0, "creation_date": 1435768118, "post_id": 31166465, "comment_id": 50341664, "body": "Thanks sparc_spread - I&#39;d come across that post (and should have included TBB in my list above). Would this approach be suitable for frequent read/write operations from multiple threads as would be needed to draw a scenegraph?"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1435768492, "post_id": 31166465, "comment_id": 50341885, "body": "It depends on the specifics of your simulation.  If it&#39;s OK for the writer to carry on making copies as time goes on, it can queue them up if it&#39;s faster than the readers (to some limit, at which point it blocks).  If you only ever want it to be 1 frame behind, your max queue length is 1 and the writer waits for all readers to finish before posting its new copy.  The point is to avoid having to lock every time you access a node."}, {"owner": {"reputation": 359, "user_id": 1888550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45d0497f19426a8289f35232d47a0249?s=128&d=identicon&r=PG", "display_name": "pt3dNyc", "link": "https://stackoverflow.com/users/1888550/pt3dnyc"}, "edited": false, "score": 0, "creation_date": 1435769322, "post_id": 31166465, "comment_id": 50342339, "body": "Gotcha, thanks for the clarification. I can see how this is preferable to a lock-based approach in many ways, but would this efficiency hold if the data-structure were quite large (and therefore required lots of copying)?"}], "owner": {"reputation": 359, "user_id": 1888550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45d0497f19426a8289f35232d47a0249?s=128&d=identicon&r=PG", "display_name": "pt3dNyc", "link": "https://stackoverflow.com/users/1888550/pt3dnyc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435766803, "creation_date": 1435766803, "question_id": 31166465, "link": "https://stackoverflow.com/questions/31166465/c-hierarchical-data-structure-for-multi-threaded-application", "title": "C++ Hierarchical Data Structure for Multi-Threaded Application", "body": "<p>I am looking for a hierarchical data-structure for use in a C++ application that is well-suited to frequent read/write operations from multiple threads. </p>\n\n<p>I intend to use this data-structure for multiple purposes, but perhaps the most indicative use-case would be a scenegraph implementation in which nodes can contain terminal properties as well as child nodes. In this usage, a function on the main thread would repeatedly traverse the node tree and render the scene to an OpenGL context while another another thread performs periodic changes to the scene's properties.</p>\n\n<p>Ignoring the multi-threaded read/write access for a moment, I can think of numerous custom and out-of-the-box ways of achieving this functionality (some more efficient than others).</p>\n\n<p>JSON is one solution. Though, in a C++ context, I would prefer to circumvent the large number of lexical casts that come with storing terminal properties as strings. In my case, using a boost::variant for my generic property type would be preferable.</p>\n\n<p>But of course my main concern is the multi-threading issue.</p>\n\n<p>A few possible solutions that come to mind are:</p>\n\n<ul>\n<li><p><a href=\"http://docs.mongodb.org/getting-started/cpp/\" rel=\"nofollow\">MongoDB</a></p></li>\n<li><p><a href=\"http://www.boost.org/doc/libs/1_58_0/libs/graph/doc/index.html\" rel=\"nofollow\">Boost Graph Library</a> / <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/graph_parallel/doc/html/index.html\" rel=\"nofollow\">Parallel Boost Graph Library</a></p></li>\n<li><p>A custom implementation using locking mechanisms for each node in the hierarchy</p></li>\n</ul>\n\n<p>Does anyone have any thoughts on an efficient solution? \nWould a database solution such as MongoDB be fast enough for use in a scenegraph (60 fps refresh, etc)? Would the (Parallel) Boost Graph Library be of any use here? Are there other tools I'm not aware of that might be useful here? I know OpenScenegraph offers some sort of multi-threaded support, but I'm hoping to find a more generalized solution (and one that doesn't come with all the other overhead of that library).</p>\n"}, {"tags": ["c++", "dictionary", "vector", "iterator"], "comments": [{"owner": {"reputation": 838, "user_id": 1441097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z4Yw5.png?s=128&g=1", "display_name": "RN_", "link": "https://stackoverflow.com/users/1441097/rn"}, "edited": false, "score": 0, "creation_date": 1435767585, "post_id": 31166452, "comment_id": 50341350, "body": "possibly related : <a href=\"http://stackoverflow.com/questions/1380585/map-of-vectors-in-stl\">stackoverflow.com/questions/1380585/map-of-vectors-in-stl</a>"}, {"owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "edited": false, "score": 0, "creation_date": 1435767710, "post_id": 31166452, "comment_id": 50341436, "body": "<code>dacs[key][index]</code> should work, can you give more details on why it is not working? Iterating over map: <a href=\"http://stackoverflow.com/questions/4844886/how-to-loop-through-a-c-map\" title=\"how to loop through a c map\">stackoverflow.com/questions/4844886/how-to-loop-through-a-c-&zwnj;&#8203;map</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5070064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1529359493bef397a2bfbcbc5876e649?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/5070064/justin"}, "edited": false, "score": 0, "creation_date": 1435772046, "post_id": 31167117, "comment_id": 50343856, "body": "I implemented your suggestion but now I am getting the following error: &gt;src/common/PixelFECInterface.cc:2674: error: expected initializer before \u2018:\u2019 token"}], "tags": [], "owner": {"reputation": 95, "user_id": 5061896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bfe3fd8a17f8043525ff54dce9020d?s=128&d=identicon&r=PG&f=1", "display_name": "rondoisthebest", "link": "https://stackoverflow.com/users/5061896/rondoisthebest"}, "is_accepted": false, "score": 0, "last_activity_date": 1435768885, "creation_date": 1435768885, "answer_id": 31167117, "question_id": 31166452, "link": "https://stackoverflow.com/questions/31166452/constructing-a-map-with-vectors-as-values/31167117#31167117", "title": "Constructing a Map With Vectors as Values", "body": "<p>If you are using c++11 you can iterate with</p>\n\n<pre><code>for (auto&amp; keyvaluepair : dacs) {\n     //keyvaluepair.first is your string\n     //keyvaluepair.second is your vector\n}\n</code></pre>\n\n<p>also dacs[key][index] is the correct way to access the indexth element in the vector mapped to by key.</p>\n"}], "owner": {"reputation": 1, "user_id": 5070064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1529359493bef397a2bfbcbc5876e649?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/5070064/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1435769714, "creation_date": 1435766761, "last_edit_date": 1435769714, "question_id": 31166452, "link": "https://stackoverflow.com/questions/31166452/constructing-a-map-with-vectors-as-values", "title": "Constructing a Map With Vectors as Values", "body": "<p>I am trying to construct a map that maps a string to a vector of unsigned integers. The way that I construct this map is as follows:</p>\n\n<pre><code>void PixelP1ROCDACSettings::getDACs(map&lt;string,vector&lt;unsigned int&gt;&gt;&amp; dacs) const\n{\n    dacs.clear();\n    dacs.insert(pair&lt;string, vector&lt;unsigned int&gt; &gt; (k_DACName_Vdd, make_vector(Vdd_, k_DACAddress_Vdd)));\n    dacs.insert(pair&lt;string, vector&lt;unsigned int&gt; &gt; (k_DACName_Vana,make_vector(Vana_, k_DACAddress_Vana)));\n    ...\n}\n</code></pre>\n\n<p>Where make_vector is defined as follows:</p>\n\n<pre><code>   std::vector&lt;unsigned int&gt; make_vector(unsigned int DACValue, \n                                         unsigned int DACAddress) const ;\n</code></pre>\n\n<p>My questions are:\n1) I would like to get access each individual value in my vector, I've tried to do, \n<code>dacs[key][index]</code> but that didn't seem to work.  Is there a special syntax to do this?</p>\n\n<p>2) Additionally, I would like to iterate across my map, How would I do that?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1435774644, "post_id": 31166347, "comment_id": 50345276, "body": "As an aside: you can simply have <code>QProcess process</code> as a class member, no need to use explicit memory management here. You&#39;ll save one heap allocation that way, and have one less potential bug to worry about. Think of: <code>class MainWindow { Q_OBJECT QProcess m_process; ... };</code>"}], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 2, "last_activity_date": 1435766601, "creation_date": 1435766601, "answer_id": 31166388, "question_id": 31166347, "link": "https://stackoverflow.com/questions/31166347/what-happens-if-i-call-qprocessstart-again/31166388#31166388", "title": "What happens if I call QProcess::start() again?", "body": "<p>From Qt docs:</p>\n\n<blockquote>\n  <p>If the QProcess object is already running a process, a warning may be printed at the console, and the existing process will continue running unaffected.</p>\n</blockquote>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435767752, "creation_date": 1435766496, "last_edit_date": 1435767752, "question_id": 31166347, "link": "https://stackoverflow.com/questions/31166347/what-happens-if-i-call-qprocessstart-again", "title": "What happens if I call QProcess::start() again?", "body": "<p>I have <code>QProcess * process</code> declared as class member and I allocated in constructor with `process = new QProcess'. Now when user press a button, I start the process.</p>\n\n<pre><code>void MainWindow::rsync()\n{\n    process-&gt;start(\"rsync c:\\\\test\\\\sync1 root@10.0.0.1:/Test\");\n\n    // additionally what will happen if I do this\n    // process-&gt;start(\"ping root@10.0.0.1\");\n}\n</code></pre>\n\n<p>Now the sync can take upto 30 seconds, what happens if I press the button again within this time? What happens if I press the button again after the first sync is complete? Can I call <code>start()</code>method again on QProcess object I allocated once or do I have delete it and reallocate it?</p>\n\n<p>Part of the reason I am asking is the first <code>start</code>command does't quite work (rsync seems to be blocked or doesn't display any messages) but the 2nd <code>start()</code> with <code>ping</code>command works and I can see output in my application.</p>\n"}, {"tags": ["c++", "linux", "string", "hash", "md5"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1435766486, "post_id": 31166313, "comment_id": 50340645, "body": "Is there a carriage return in the file?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1435766524, "post_id": 31166313, "comment_id": 50340680, "body": "@Slava There&#39;s no file. The &quot;Hello&quot; is merely a string. Could you please clarify what you mean?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435766690, "post_id": 31166313, "comment_id": 50340796, "body": "8b1a9953c4611296a827abf8c47804d7 is correct for the string Hello"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1435766714, "post_id": 31166313, "comment_id": 50340818, "body": "sorry missed part where you pass the string as standard input. Why don&#39;t you print src.data() and src.size() and compare?"}, {"owner": {"reputation": 792, "user_id": 5467686, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/963001537100522/picture?type=large", "display_name": "PascalS", "link": "https://stackoverflow.com/users/5467686/pascals"}, "edited": false, "score": 0, "creation_date": 1494237449, "post_id": 31166313, "comment_id": 74725179, "body": "where did you get the include file?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 792, "user_id": 5467686, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/963001537100522/picture?type=large", "display_name": "PascalS", "link": "https://stackoverflow.com/users/5467686/pascals"}, "edited": false, "score": 0, "creation_date": 1494237667, "post_id": 31166313, "comment_id": 74725337, "body": "@Passe it&#39;s part of OpenSSL. On Debian/Ubuntu, simply install libssl package, but on Windows, you need to install it or compile it yourself."}, {"owner": {"reputation": 792, "user_id": 5467686, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/963001537100522/picture?type=large", "display_name": "PascalS", "link": "https://stackoverflow.com/users/5467686/pascals"}, "edited": false, "score": 0, "creation_date": 1494238820, "post_id": 31166313, "comment_id": 74726075, "body": "I need to use it in an embedded environement... Is there an ARM compatible version too?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 792, "user_id": 5467686, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/963001537100522/picture?type=large", "display_name": "PascalS", "link": "https://stackoverflow.com/users/5467686/pascals"}, "edited": false, "score": 0, "creation_date": 1494254034, "post_id": 31166313, "comment_id": 74736552, "body": "@Passe You have to compile OpenSSL yourself then. There&#39;s a precompiled version probably for Raspberry Pi in Raspbian, which uses Arm Cortex 7 processor."}, {"owner": {"reputation": 792, "user_id": 5467686, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/963001537100522/picture?type=large", "display_name": "PascalS", "link": "https://stackoverflow.com/users/5467686/pascals"}, "edited": false, "score": 0, "creation_date": 1494319004, "post_id": 31166313, "comment_id": 74765103, "body": "@TheQuantumPhysicist thanks for your support. I have found a fully c compliant version with just one header and one c file. It works like a charm!"}, {"owner": {"reputation": 768, "user_id": 1356874, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c8bac5749f60487fa6d983f89985f016?s=128&d=identicon&r=PG", "display_name": "http8086", "link": "https://stackoverflow.com/users/1356874/http8086"}, "edited": false, "score": 0, "creation_date": 1597330959, "post_id": 31166313, "comment_id": 112103542, "body": "$ echo -n Hello | md5sum"}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 17, "last_activity_date": 1491314862, "last_edit_date": 1491314862, "creation_date": 1435766660, "answer_id": 31166413, "question_id": 31166313, "link": "https://stackoverflow.com/questions/31166313/calculate-md5-of-a-string-in-c/31166413#31166413", "title": "Calculate MD5 of a string in C++", "body": "<p>You are passing a final newline to the <code>md5sum</code> program, but not to your code.</p>\n\n<p>You can see that the bash <code>&lt;&lt;&lt;</code> operator adds a newline:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ od -ta &lt;&lt;&lt;Hello\n0000000   H   e   l   l   o  nl\n0000006\n</code></pre>\n\n<p>To avoid this, use <code>printf</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf '%s' Hello | od -ta\n0000000   H   e   l   l   o\n0000005\n$ printf '%s' Hello | md5sum\n8b1a9953c4611296a827abf8c47804d7  -\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you could include a newline in your program version:</p>\n\n<pre><code>std::string str(\"Hello\\n\");\n</code></pre>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18861, "favorite_count": 2, "accepted_answer_id": 31166413, "answer_count": 1, "score": 19, "last_activity_date": 1495126727, "creation_date": 1435766413, "last_edit_date": 1472926565, "question_id": 31166313, "link": "https://stackoverflow.com/questions/31166313/calculate-md5-of-a-string-in-c", "title": "Calculate MD5 of a string in C++", "body": "<p>I have a nice example of memory mapped files that calculates the MD5 hash of a file. That works fine with no problems.</p>\n\n<p>I would like to change it to calculate the MD5 hash of a string.</p>\n\n<p>So the example is:</p>\n\n<p>(include <code>#include &lt;openssl/md5.h&gt;</code> to run this code, and also boost stuff if you want to run the one with the file)</p>\n\n<pre><code>unsigned char result[MD5_DIGEST_LENGTH];\nboost::iostreams::mapped_file_source src(path);\nMD5((unsigned char*)src.data(), src.size(), result);\n\nstd::ostringstream sout;\nsout&lt;&lt;std::hex&lt;&lt;std::setfill('0');\nfor(long long c: result)\n{\n    sout&lt;&lt;std::setw(2)&lt;&lt;(long long)c;\n}\nreturn sout.str();\n</code></pre>\n\n<p>The change I made is:</p>\n\n<pre><code>std::string str(\"Hello\");\nunsigned char result[MD5_DIGEST_LENGTH];\nMD5((unsigned char*)str.c_str(), str.size(), result);\n\nstd::ostringstream sout;\nsout&lt;&lt;std::hex&lt;&lt;std::setfill('0');\nfor(long long c: result)\n{\n    sout&lt;&lt;std::setw(2)&lt;&lt;(long long)c;\n}\nreturn sout.str();\n</code></pre>\n\n<p>But this produces the result:</p>\n\n<pre><code>8b1a9953c4611296a827abf8c47804d7\n</code></pre>\n\n<p>While the command <code>$ md5sum &lt;&lt;&lt; Hello</code> gives the result:</p>\n\n<pre><code>09f7e02f1290be211da707a266f153b3\n</code></pre>\n\n<p>Why don't the results agree? Which one is wrong?</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>So I got the right answer which is ticked down there. The correct way to call <code>md5sum</code> from terminal is:</p>\n\n<pre><code>$ printf '%s' \"Hello\" | md5sum\n</code></pre>\n\n<p>To avoid the new line being included.</p>\n"}, {"tags": ["c++", "hdf5"], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "is_accepted": true, "score": 1, "last_activity_date": 1439031625, "creation_date": 1439031625, "answer_id": 31892390, "question_id": 31166241, "link": "https://stackoverflow.com/questions/31166241/how-to-store-simulation-data-in-hdf5/31892390#31892390", "title": "how to store simulation data in hdf5?", "body": "<p>HDF5 is self-describing data format, which means that the best way how to add information to each group is add attribute.</p>\n\n<pre><code>HDF5 \"result.h5\" {\nGROUP \"/\" {\n   GROUP \"Timestep_0\" {\n      ATTRIBUTE \"Time\" {\n         DATATYPE  H5T_IEEE_F64LE\n         DATASPACE  SCALAR\n         DATA {\n         (0): 0\n         }\n      }\n      DATASET \"Temperature\" {\n         DATATYPE  H5T_IEEE_F32LE\n         DATASPACE  SIMPLE { ( 128, 128 ) / ( 128, 128 ) }\n         DATA {\n         (0,0): ...\n</code></pre>\n"}], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 31892390, "answer_count": 1, "score": 2, "last_activity_date": 1439031625, "creation_date": 1435766206, "question_id": 31166241, "link": "https://stackoverflow.com/questions/31166241/how-to-store-simulation-data-in-hdf5", "title": "how to store simulation data in hdf5?", "body": "<p>I want to create an HDF5 file storing simulation data. The data consist of a stream of snapshots, which have identical (or very similar) format, but different simulation times. The idea is that upon reading the file one can search for snapshots in a given simulation-time interval.</p>\n\n<p>How can this be accomplished in HDF5?</p>\n\n<p>Clearly, one must use a <code>H5::Group</code> for each snapshot, which obviously must have distinct names (say 'snapshot1', 'snapshot2' etc). Can I add a <code>snapshot_name:time</code> table to the file for quick search?</p>\n"}, {"tags": ["c++", "graphics", "directx", "directx-9", "point-sprites"], "comments": [{"owner": {"reputation": 2821, "user_id": 1339365, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e9e542a5a5026a0f79840edd233de71?s=128&d=identicon&r=PG", "display_name": "Gnietschow", "link": "https://stackoverflow.com/users/1339365/gnietschow"}, "edited": false, "score": 0, "creation_date": 1435914460, "post_id": 31166206, "comment_id": 50408309, "body": "You&#39;ve set the stream source with a size of a vector, but actually your vertexbuffer is locked with <code>particleCount*sizeof(PARTICLE_VERTEX)</code>, a bit inconsistent, but shouldn&#39;t the problem here. How did you created the vertexbuffer, with a FVF or dynamic sized? Moreover you haven&#39;t set a FVF or vertex declaration for rendering or did you set it elsewhere?"}, {"owner": {"reputation": 2821, "user_id": 1339365, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e9e542a5a5026a0f79840edd233de71?s=128&d=identicon&r=PG", "display_name": "Gnietschow", "link": "https://stackoverflow.com/users/1339365/gnietschow"}, "edited": false, "score": 0, "creation_date": 1435915061, "post_id": 31166206, "comment_id": 50408700, "body": "One more problem that I&#39;ve seen is you float to dword cast. The official documentation suggests the following conversion <code>*((DWORD*)&amp;Variable</code> (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb172599%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>) to be put into <code>SetRenderState</code>. I&#39;m not very familiar with C++, but I would assume that this makes a difference, because your cast sets a real dword, but the API expects a float in the dwords memory space."}, {"owner": {"reputation": 1089, "user_id": 3079666, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e110519143671b84fc7a666a3377bf93?s=128&d=identicon&r=PG&f=1", "display_name": "user3079666", "link": "https://stackoverflow.com/users/3079666/user3079666"}, "reply_to_user": {"reputation": 2821, "user_id": 1339365, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e9e542a5a5026a0f79840edd233de71?s=128&d=identicon&r=PG", "display_name": "Gnietschow", "link": "https://stackoverflow.com/users/1339365/gnietschow"}, "edited": false, "score": 0, "creation_date": 1435917881, "post_id": 31166206, "comment_id": 50410423, "body": "@Gnietschow, I have set the FVF elsewhere, the buffer is fixed size and larger than will be used. You were right about the way I pass the float, that was the problem from the start, turns out the book I was following had it as a macro defined elsewhere and I didn&#39;t realize it&#39;s importance, thank you. You may post it as an answer so I can accept it and close this thread"}], "answers": [{"tags": [], "owner": {"reputation": 2821, "user_id": 1339365, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e9e542a5a5026a0f79840edd233de71?s=128&d=identicon&r=PG", "display_name": "Gnietschow", "link": "https://stackoverflow.com/users/1339365/gnietschow"}, "is_accepted": true, "score": 1, "last_activity_date": 1435929864, "creation_date": 1435929864, "answer_id": 31207909, "question_id": 31166206, "link": "https://stackoverflow.com/questions/31166206/directx-9-point-sprites-not-scaling/31207909#31207909", "title": "DirectX 9 point sprites not scaling", "body": "<p>Glad to help :) My comment as an answer:</p>\n\n<blockquote>\n  <p>One more problem that I've seen is you float to dword cast. The official documentation suggests the following conversion <code>*((DWORD*)&amp;Variable</code> (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb172599%28v=vs.85%29.aspx\" rel=\"nofollow\">doc</a>) to be put into SetRenderState. I'm not very familiar with C++, but I would assume that this makes a difference, because your cast sets a real dword, but the API expects a float in the dwords memory space.</p>\n</blockquote>\n"}], "owner": {"reputation": 1089, "user_id": 3079666, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e110519143671b84fc7a666a3377bf93?s=128&d=identicon&r=PG&f=1", "display_name": "user3079666", "link": "https://stackoverflow.com/users/3079666/user3079666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 31207909, "answer_count": 1, "score": 0, "last_activity_date": 1435929864, "creation_date": 1435766130, "last_edit_date": 1495540278, "question_id": 31166206, "link": "https://stackoverflow.com/questions/31166206/directx-9-point-sprites-not-scaling", "title": "DirectX 9 point sprites not scaling", "body": "<p>I got point sprites working almost immediately, but I'm only stuck on one thing, they are rendered as probably 2x2 pixel sprites, which is not really very easy to see, especially if there's other motion. Now, I've tried tweaking all the variables, here's the code that probably works best:</p>\n\n<pre><code>void renderParticles()\n{\n    for(int i = 0; i &lt; particleCount; i ++)\n    {\n        particlePoints[i] += particleSpeeds[i];\n    }\n\nvoid* data;\npParticleBuffer-&gt;Lock(0, particleCount*sizeof(PARTICLE_VERTEX), &amp;data, NULL);\nmemcpy(data, particlePoints, sizeof(particlePoints));\npParticleBuffer-&gt;Unlock();\n\npd3dDevice-&gt;SetRenderState(D3DRS_ALPHABLENDENABLE, TRUE);\npd3dDevice-&gt;SetRenderState(D3DRS_ZWRITEENABLE, TRUE);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSPRITEENABLE, TRUE);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSCALEENABLE, TRUE);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSIZE, (DWORD)1.0f);\n//pd3dDevice-&gt;SetRenderState(D3DRS_POINTSIZE_MAX, (DWORD)9999.0f);\n//pd3dDevice-&gt;SetRenderState(D3DRS_POINTSIZE_MIN, (DWORD)0.0f);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSCALE_A, (DWORD)0.0f);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSCALE_B, (DWORD)0.0f);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSCALE_C, (DWORD)1.0f);\n\npd3dDevice-&gt;SetStreamSource(0, pParticleBuffer, 0, sizeof(D3DXVECTOR3));\npd3dDevice-&gt;DrawPrimitive(D3DPT_POINTLIST, 0, particleCount);\n\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSPRITEENABLE, FALSE);\npd3dDevice-&gt;SetRenderState(D3DRS_POINTSCALEENABLE, FALSE);\n\n}\n</code></pre>\n\n<p>Ok, so when I change <code>POINTSCALE_A</code> and <code>POINTSCALE_B</code>, nothing really changes much, same for C. <code>POINTSIZE</code> also makes no difference. When I try to assign something to <code>POINTSIZE_MAX</code> and <code>_MIN</code>, no matter what I assign, it always stops the rendering of the sprites. I also tried setting <code>POINTSIZE</code> with <code>POINTSCALEENABLE</code> set to false, no luck there either.</p>\n\n<p>This looks like something not many people who looked around found an answer to. An explanation of the mechanism exists on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb147281%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">MSDN</a>, while, yes, I did check stackoverflow and found a <a href=\"https://stackoverflow.com/questions/8988130/scaling-of-the-point-sprites-direc3d-9\">similar question</a> with no answer. <a href=\"http://graphicdna.blogspot.gr/2009/09/properly-scaling-point-sprites-in.html\" rel=\"nofollow noreferrer\">Another source</a> only suggested seting the max and min variables, which as I said, are pretty much making my particles disappear.</p>\n\n<p><code>ParticlePoints</code> and <code>particleSpeeds</code> are D3DXVector3 arrays, and I get what I expect from them. A book I follow suggested I define a custom vertex with XYZ and diffuse but I see no reason for this to be honest, it just adds a lot more to a long list of declarations.</p>\n\n<p>Any help is welcome, thanks in advance.</p>\n\n<p><strong>Edit:</strong> Further tweaking showed than when any of the scale values are above 0.99999997f (at least between that and 0.99999998f I see the effect), I get the tiny version, if I put them there or lower I pretty much get the size of the texture - though that is still not really that good as it may be large, and it pretty much fails the task of being controllable.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1435766384, "post_id": 31166146, "comment_id": 50340585, "body": "what compiler are you using? because mine explodes when i try to assign <code>std::string str(&quot;&quot;)</code> <code>str[2] = &#39;a&#39;</code>"}, {"owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "edited": false, "score": 0, "creation_date": 1435767101, "post_id": 31166146, "comment_id": 50341065, "body": "It could return empty, but it could also format your hard drive."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1435767220, "post_id": 31166146, "comment_id": 50341133, "body": "All you&#39;re missing is that this is <i>Undefined Behaviour</i>, that C++ doesn&#39;t protect you from <i>Undefined Behaviour</i>, and that it&#39;s generally better to avoid UB instead of trying to guess which particular unpredictable failure mechanism a given compiler will select."}, {"owner": {"reputation": 797, "user_id": 4778233, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/26e389ee132edb1a6f6ae5369a5d82e6?s=128&d=identicon&r=PG&f=1", "display_name": "day", "link": "https://stackoverflow.com/users/4778233/day"}, "edited": false, "score": 0, "creation_date": 1435773536, "post_id": 31166146, "comment_id": 50344670, "body": "Thanks a lot. Very useful answers."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 4, "last_activity_date": 1435766885, "creation_date": 1435766885, "answer_id": 31166495, "question_id": 31166146, "link": "https://stackoverflow.com/questions/31166146/access-any-position-in-c-empty-string/31166495#31166495", "title": "Access any position in C++ empty string", "body": "<p>Accessing out-of-range subscript is undefined. For an empty <code>std::string</code>, using any subscript is illegal.</p>\n\n<p>However, it's not required for the library to check the value of the subscript. The job of making sure the subscript is legal is left to the programmer, i.e, you.</p>\n"}, {"comments": [{"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "edited": false, "score": 0, "creation_date": 1435767351, "post_id": 31166604, "comment_id": 50341212, "body": "And a very good chance that if it does blow up, it will do so somewhere completely unexpected and apparently not connected to the string at all."}], "tags": [], "owner": {"reputation": 1045, "user_id": 2305161, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a4956f14412244c2942ff6746b81fc04?s=128&d=identicon&r=PG", "display_name": "Andy Newman", "link": "https://stackoverflow.com/users/2305161/andy-newman"}, "is_accepted": false, "score": 3, "last_activity_date": 1435767226, "creation_date": 1435767226, "answer_id": 31166604, "question_id": 31166146, "link": "https://stackoverflow.com/questions/31166146/access-any-position-in-c-empty-string/31166604#31166604", "title": "Access any position in C++ empty string", "body": "<p>The string is (sort of) an array of characters you can stick stuff in.  When you make it \"\" it guarantees a length of <strong>at least</strong> 0 characters are available.  When you assign something to character [2] the behaviour is undefined and it is entitled to blow up, but there's a fair chance it will be large enough to absorb your mistake without noticing...</p>\n"}, {"tags": [], "owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "is_accepted": false, "score": 2, "last_activity_date": 1435767385, "creation_date": 1435767385, "answer_id": 31166650, "question_id": 31166146, "link": "https://stackoverflow.com/questions/31166146/access-any-position-in-c-empty-string/31166650#31166650", "title": "Access any position in C++ empty string", "body": "<p><code>std::string</code> elements can be accessed using the <code>[]</code> operator and using the <code>at()</code> function. The operator is required to perform no bounds checks, just like regular array access in C++, whereas the function throws <code>out_of_range</code> for invalid indices.</p>\n"}, {"tags": [], "owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "is_accepted": false, "score": 2, "last_activity_date": 1435767674, "creation_date": 1435767674, "answer_id": 31166767, "question_id": 31166146, "link": "https://stackoverflow.com/questions/31166146/access-any-position-in-c-empty-string/31166767#31166767", "title": "Access any position in C++ empty string", "body": "<p>In addition to the answers by Yu and Andy, which are correct of course, I'd like to point you to <code>string::at</code> which, unlike <code>string::operator[]</code> would do bounds checking and through an exception if you attempt out-of-bounds access:</p>\n\n<pre><code>#include &lt;string&gt;\nint main()\n{\n    std::string s(\"\");\n    return s.at(1);\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::out_of_range'\n  what():  basic_string::at\nAborted (core dumped)\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 4778233, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/26e389ee132edb1a6f6ae5369a5d82e6?s=128&d=identicon&r=PG&f=1", "display_name": "day", "link": "https://stackoverflow.com/users/4778233/day"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1435769358, "creation_date": 1435765923, "last_edit_date": 1435766966, "question_id": 31166146, "link": "https://stackoverflow.com/questions/31166146/access-any-position-in-c-empty-string", "title": "Access any position in C++ empty string", "body": "<p>Why C++ empty string can be accessed at any position without error?</p>\n\n<p>For example, </p>\n\n<pre><code>string str(\"\"); \n</code></pre>\n\n<p><code>str[1]</code>, <code>str[2]</code> will just return empty. </p>\n\n<p>Why doesn't the following statement throw error?</p>\n\n<pre><code>str[2] = 'a'\n</code></pre>\n\n<p>But, printing out <code>str</code> still show empty string.</p>\n\n<p>I am confused here and probably miss something.</p>\n"}, {"tags": ["c++", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1435765737, "post_id": 31166044, "comment_id": 50340151, "body": "What are you talking about here, the strings are local variables created on the stack, you have an <code>if</code> branch here so they are different code paths, there is no leak here"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1435765868, "post_id": 31166044, "comment_id": 50340248, "body": "If you&#39;re asking whether scope dictates both birth, and death of an automatic variable, the answer is yes."}, {"owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "edited": false, "score": 0, "creation_date": 1435766304, "post_id": 31166044, "comment_id": 50340540, "body": "where is memory leak?"}], "answers": [{"tags": [], "owner": {"reputation": 1362, "user_id": 2521287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Gej8E.jpg?s=128&g=1", "display_name": "DrZoo", "link": "https://stackoverflow.com/users/2521287/drzoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1435765899, "creation_date": 1435765899, "answer_id": 31166135, "question_id": 31166044, "link": "https://stackoverflow.com/questions/31166044/c-function-initialization-and-memory-leaks/31166135#31166135", "title": "C++ function initialization and memory leaks", "body": "<p>Once your program leaves the function <code>oddOrEven(int a)</code>, all of the local variables of that function are destroyed and returns your <code>string</code></p>\n"}, {"tags": [], "owner": {"reputation": 3784, "user_id": 1298874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/102a875e970f7e86f783f682f78e3b65?s=128&d=identicon&r=PG", "display_name": "A B", "link": "https://stackoverflow.com/users/1298874/a-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1435767168, "last_edit_date": 1495540278, "creation_date": 1435766188, "answer_id": 31166233, "question_id": 31166044, "link": "https://stackoverflow.com/questions/31166044/c-function-initialization-and-memory-leaks/31166233#31166233", "title": "C++ function initialization and memory leaks", "body": "<p>The string <code>even</code> is local to the else block and wouldn't be created if <code>a</code> had been odd.</p>\n\n<p>NOTE: Local variables, even those declared directly inside a function, are NOT auto-initialized; only global variables declared outside all functions are auto-initialized..</p>\n\n<p>REFERENCES: </p>\n\n<p><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_variable_scope.htm\" rel=\"nofollow noreferrer\">http://www.tutorialspoint.com/cplusplus/cpp_variable_scope.htm</a></p>\n\n<p>From the URL below: \"A local variable declared inside a conditional (block) will go out of scope at the end of the conditional.\"</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8543167/scope-of-variables-in-if-statements\">Scope of variables in if statements</a></p>\n"}, {"tags": [], "owner": {"reputation": 945, "user_id": 4695394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75268cada6fa92af6fa9eb3f2da0d109?s=128&d=identicon&r=PG&f=1", "display_name": "kiviak", "link": "https://stackoverflow.com/users/4695394/kiviak"}, "is_accepted": false, "score": 0, "last_activity_date": 1435766204, "creation_date": 1435766204, "answer_id": 31166239, "question_id": 31166044, "link": "https://stackoverflow.com/questions/31166044/c-function-initialization-and-memory-leaks/31166239#31166239", "title": "C++ function initialization and memory leaks", "body": "<p>If it were an odd number that was handed to the function,the string even{} never be created.</p>\n"}, {"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1435766404, "creation_date": 1435766404, "answer_id": 31166309, "question_id": 31166044, "link": "https://stackoverflow.com/questions/31166044/c-function-initialization-and-memory-leaks/31166309#31166309", "title": "C++ function initialization and memory leaks", "body": "<p>The point that the other answers are trying to address is that ALL local variables including either <code>odd</code> or <code>even</code> are destroyed on exit from the scope in which they are created.   </p>\n\n<p><code>odd</code> (or <code>even</code>) is NOT what is returned from the function.  What is returned is a temporary copy of <code>odd</code> or <code>even</code> and the caller knows to delete this copy.</p>\n\n<p>Note: this is ignoring Return Value Optimization (RVO) because that would only make the situation more confusing.</p>\n"}], "owner": {"reputation": 59, "user_id": 3254403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/24fcf95ceba488110166c37d2d636113?s=128&d=identicon&r=PG&f=1", "display_name": "Zamor", "link": "https://stackoverflow.com/users/3254403/zamor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 31166233, "answer_count": 4, "score": 1, "last_activity_date": 1435767168, "creation_date": 1435765651, "question_id": 31166044, "link": "https://stackoverflow.com/questions/31166044/c-function-initialization-and-memory-leaks", "title": "C++ function initialization and memory leaks", "body": "<p>Are all variables within a C++ function pre-initialized when the function is called, regardless of where they are declared? I ask this as I would like to know if exiting a function before the entire function has been executed would lead to memory leaks of variables declared after a return statement. For instance:</p>\n\n<pre><code>string oddOrEven(int a)\n{\n if ((a % 2) != 0)\n {\n    string odd{ \"the number is odd\" };\n    return odd;\n }\n else\n {\n    string even{ \"the number is even\" };\n    return even;\n }\n}\n</code></pre>\n\n<p><em>This piece of code is just for demonstration purposes.</em> </p>\n\n<p>If it were an odd number that was handed to the function, would the string even{} never be created? Because if it were to be created, wouldnt that mean that the string will become a memory leak when the function was exited in the first part of the if-else block?</p>\n"}, {"tags": ["c++", "memory-leaks", "ld-preload", "tcmalloc", "google-perftools"], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 1818004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4a2940fce5cbccd42470a16019b80c0c?s=128&d=identicon&r=PG", "display_name": "Dima00782", "link": "https://stackoverflow.com/users/1818004/dima00782"}, "is_accepted": true, "score": 0, "last_activity_date": 1435766382, "creation_date": 1435766382, "answer_id": 31166302, "question_id": 31166005, "link": "https://stackoverflow.com/questions/31166005/why-tcmalloc-dont-print-function-name-which-provided-via-dlopen/31166302#31166302", "title": "Why tcmalloc don&#39;t print function name, which provided via dlopen", "body": "<p>Try removing dlclose call.</p>\n\n<p>It's known issue that heap checker &amp; profilers can't handle unloaded \nshared objects.</p>\n"}], "owner": {"reputation": 27, "user_id": 5070354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36df5ef26800d742f715a1b5029c9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny Smith", "link": "https://stackoverflow.com/users/5070354/jonny-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 31166302, "answer_count": 1, "score": 1, "last_activity_date": 1435766382, "creation_date": 1435765571, "question_id": 31166005, "link": "https://stackoverflow.com/questions/31166005/why-tcmalloc-dont-print-function-name-which-provided-via-dlopen", "title": "Why tcmalloc don&#39;t print function name, which provided via dlopen", "body": "<p>I have next some project:\nmain.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n#include &lt;dlfcn.h&gt;\n\nint main()\n{\n    void* handle = dlopen(\"./shared_libs/libshared.so\", RTLD_LAZY);\n    if (NULL == handle)\n    {\n        std::cerr &lt;&lt; \"Cannot open library: \" &lt;&lt; dlerror() &lt;&lt; '\\n';\n        return -1;\n    }\n\n\n    typedef int (*foo_t)(const std::size_t);\n    foo_t foo = reinterpret_cast&lt;foo_t&gt;(dlsym(handle, \"foo\"));\n\n\n    const char* dlsym_error = dlerror();\n    if (dlsym_error)\n    {\n        std::cerr &lt;&lt; \"Cannot load symbol 'foo': \" &lt;&lt; dlsym_error &lt;&lt; '\\n';\n        dlclose(handle);\n        return -2;\n    }\n\n\n    std::cout &lt;&lt; \"call foo\" &lt;&lt; std::endl;\n    foo(10);\n\n\n    dlclose(handle);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>shared.cpp:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n\n\nextern \"C\"\n{\n    int foo(const std::size_t size)\n    {\n        int b = size / size;\n        int* a = new int[size];\n        std::cout &lt;&lt; \"leaky code here\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>and Makefile:</p>\n\n<pre><code>all:\n    g++ -fPIC -g -c shared.cpp\n    g++ -shared -o shared_libs/libshared.so -g shared.o\n    g++ -L shared_libs/ -g main.cpp -ldl\n</code></pre>\n\n<p>I use tcmalloc for debug this test program, which load dynamically libshared.so:foo and execute it.run command:\nLD_PRELOAD=/usr/local/lib/libtcmalloc.so HEAPCHECK=normal ./a.out</p>\n\n<p>The 1 largest leaks:</p>\n\n<ul>\n<li>Using local file ./a.out.</li>\n<li>Leak of 40 bytes in 1 objects allocated from:</li>\n<li>@ 7fe3460bd9ba 0x00007fe3460bd9ba</li>\n<li>@ 400b43 main</li>\n<li>@ 7fe346c33ec5 __libc_start_main</li>\n<li>@ 400999 _start</li>\n<li>@ 0 _init</li>\n</ul>\n\n<p>Why I get address 0x00007fe3460bd9ba instead of line in foo function?\nplease help</p>\n\n<p>P.s. I tried to use gdb with LD_PRELOAD=.../tcmalloc.so, but I get:\n\"Someone is ptrace()ing us; will turn itself off Turning perftools heap leak checking off\"</p>\n"}]