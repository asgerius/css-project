[{"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1502927515, "post_id": 45724611, "comment_id": 78406955, "body": "&quot;...best peaceful way...&quot; Is there a violent way?"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1502927574, "post_id": 45724611, "comment_id": 78406962, "body": "Please use <code>unique_ptr</code> instead of manual pointer tracking."}, {"owner": {"reputation": 11340, "user_id": 937222, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ej6Cg.jpg?s=128&g=1", "display_name": "Apollo SOFTWARE", "link": "https://stackoverflow.com/users/937222/apollo-software"}, "edited": false, "score": 1, "creation_date": 1502927588, "post_id": 45724611, "comment_id": 78406964, "body": "non-hostile kill is what I think the term he/she meant"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502928913, "post_id": 45724611, "comment_id": 78407239, "body": "<code>std::thread</code> does not have an interface for that. Either use the brutal methods or a flag."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1502929885, "post_id": 45724611, "comment_id": 78407426, "body": "No. The worker thread needs to know you want it to end. So a signal must be sent."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1502929920, "post_id": 45724611, "comment_id": 78407434, "body": "BTW you don&#39;t need to use a pointer for your thread, just use it as a value object."}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1502928224, "post_id": 45724697, "comment_id": 78407103, "body": "Would atomic_flag be better?"}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1502931192, "post_id": 45724697, "comment_id": 78407711, "body": "At least <code>atomic&lt;bool&gt;</code> is cheaper"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1502931405, "post_id": 45724697, "comment_id": 78407762, "body": "Atomic Flag sounds like a forgotten 50&#39;s super hero."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 1, "creation_date": 1502977996, "post_id": 45724697, "comment_id": 78431782, "body": "<code>atomic_flag</code> does not have  a test operation, only <code>test_and_set</code> and <code>clear</code>. Signalling another thread is unnecessarily difficult with these primitives. The only advantage is that it is defined by the standard to be lock-free rather than implementation-defined. But <code>atomic&lt;bool&gt;</code> is lock-free on all major implementations. (Didn&#39;t notice that Tas already discussed <code>atomic_flag</code>.)"}], "tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": true, "score": 2, "last_activity_date": 1502929713, "last_edit_date": 1502929713, "creation_date": 1502928067, "answer_id": 45724697, "question_id": 45724611, "link": "https://stackoverflow.com/questions/45724611/the-proper-way-of-terminating-the-worker-thread/45724697#45724697", "title": "The proper way of terminating the worker thread", "body": "<p>What you have is fine: if you have a <code>thread</code> that say starts when your program opens, and as your program closes you need to stop it, using an <code>atomic&lt;bool&gt;</code> is the right way to do this.</p>\n\n<p>It's possible to also use <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic_flag\" rel=\"nofollow noreferrer\"><code>std::atomic_flag</code></a> like so:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;atomic&gt;\n#include &lt;iostream&gt;\n\nstd::atomic_flag lock;\nint n = 0;\n\nvoid t()\n{\n    while (lock.test_and_set())\n    {\n        ++n;\n        std::this_thread::sleep_for(std::chrono::milliseconds(250));\n    }\n}\n\nint main()\n{\n    lock.test_and_set();\n    std::thread t(&amp;t);\n    std::this_thread::sleep_for(std::chrono::seconds(2));\n    lock.clear();\n    t.join();\n    std::cout &lt;&lt; n &lt;&lt; std::endl;\n    std::cin.get();\n}\n</code></pre>\n\n<p>You can read about <a href=\"https://stackoverflow.com/questions/39329311/difference-between-standards-atomic-bool-and-atomic-flag\">why you might wish to choose <code>atomic_flag</code> over <code>atomic&lt;bool&gt;</code></a>, but personally I prefer the use of <code>atomic&lt;bool&gt;</code> for things like this, as it's simply more readable:</p>\n\n<pre><code>std::atomic&lt;bool&gt; runThread;\nint n = 0;\n\nvoid t()\n{\n    while (runThread)\n    {\n        ++n;\n        std::this_thread::sleep_for(std::chrono::milliseconds(250));\n    }\n}\n\nint main()\n{\n    runThread = true;\n    std::thread t(&amp;t);\n    std::this_thread::sleep_for(std::chrono::seconds(2));\n    runThread = false;\n    t.join();\n    std::cout &lt;&lt; n &lt;&lt; std::endl;\n    std::cin.get();\n}\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 1296153, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/17767d80ccd8fa9177eb679ca97141cd?s=128&d=identicon&r=PG", "display_name": "user1296153", "link": "https://stackoverflow.com/users/1296153/user1296153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 45724697, "answer_count": 1, "score": 4, "last_activity_date": 1502929713, "creation_date": 1502927418, "last_edit_date": 1502927474, "question_id": 45724611, "link": "https://stackoverflow.com/questions/45724611/the-proper-way-of-terminating-the-worker-thread", "title": "The proper way of terminating the worker thread", "body": "<p>Hi I am trying to find out the best peaceful way of terminating a worker thread. I have the following code:</p>\n\n<pre><code>class test{\n  public:\ntest() {}\n~test() {}\n\nstd::atomic&lt;bool&gt; worker_done;\n\n\nint a;\nvoid pr() {\n    while (true) {\n        if (worker_done) {\n            break;\n        }\n        std::this_thread::sleep_for(std::chrono::milliseconds(500));\n        printf(\"%d \\n\", a++);\n    }\n}\n\nstd::thread* m_acqThread;\nvoid continuous() {\n    m_acqThread = new std::thread(&amp;test::pr, this);\n}\n\nvoid stopThread(){\n    if (m_acqThread) {\n        if (m_acqThread-&gt;joinable())\n            m_acqThread-&gt;join();\n        delete m_acqThread;\n        m_acqThread = nullptr;\n    }\n}\n\n\n};\n\n\nint main(){\n\ntest t;\nt.continuous();\n\nstd::this_thread::sleep_for(std::chrono::milliseconds(2000));\nt.worker_done = true;\n\nt.stopThread();\n\n\nstd::string str;\nstd::cin.clear();\ngetline(std::cin, str);\nreturn 0;\n</code></pre>\n\n<p>Is there a better way of notifying the worker's thread to be terminated other than setting \"worker_done\" to be true ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "winapi", "unicode", "visual-studio-2008", "dialog"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1502927774, "post_id": 45724504, "comment_id": 78407005, "body": "with <code>SetDlgItemText(hwndDlg, IDC_BUTTON1, L&quot;\\xD83D\\xDD0D&quot;);</code> this work"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1502928829, "post_id": 45724504, "comment_id": 78407223, "body": "or you need save your <code>rc</code> file as unicode. close it in VS, open say in notepad, and select <code>Save As</code> with <code>Unicode</code> encoding. after that you can insert in rc file symbol as is"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1502930890, "post_id": 45724504, "comment_id": 78407638, "body": "Are you using a different font for the button control?  Possibly that character isn&#39;t in the font you&#39;re using."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1502945560, "post_id": 45724504, "comment_id": 78410997, "body": "@RbMm: Oh, wow. I didn&#39;t know that VS will be so obtuse to save the <code>.rc</code> file with an 8-bit <code>ANSI</code> encoding. Wow! So that fixed that issue..."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1502945665, "post_id": 45724504, "comment_id": 78411032, "body": "@1201ProgramAlarm: although now when I compile and run the app it shows the &quot;\ud83d\udd0d&quot; symbol fine on Windows 10 or 8.1 but on my test Win7 the button is displayed as two hollow squares. So is there a way to know if a certain Unicode character is supported by the system font that&#39;s used to display dialog UI?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1502954099, "post_id": 45724504, "comment_id": 78415082, "body": "Your struggling too hard with this. Use a glyph."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1502954261, "post_id": 45724504, "comment_id": 78415196, "body": "@DavidHeffernan: A &quot;glyph&quot;. Can you explain?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1502954508, "post_id": 45724504, "comment_id": 78415352, "body": "An image. Use an image."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1502958598, "post_id": 45724504, "comment_id": 78417766, "body": "Am I missing something? Magnifier has <a href=\"http://www.fileformat.info/info/unicode/char/1f50d/index.htm\" rel=\"nofollow noreferrer\">U+1F50D</a> (left) or <a href=\"http://www.fileformat.info/info/unicode/char/1f50e/index.htm\" rel=\"nofollow noreferrer\">U+1F50E</a> (right). U+1F56C is <a href=\"http://www.fileformat.info/info/unicode/char/1f56c/index.htm\" rel=\"nofollow noreferrer\">&quot;Bullhorn With Sound Waves&quot;</a>. I must admit that I cannot see the images (due to security policy of my company)."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1502983270, "post_id": 45724504, "comment_id": 78435839, "body": "Possibly a duplicate of <a href=\"https://stackoverflow.com/q/21897512/1889329\">Is it possible to use unicode characters in a Win32 resource file?</a>."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1502990133, "post_id": 45724504, "comment_id": 78440115, "body": "@Scheff: Well, I guess C encoding for this UTF-32 character is <code>L&quot;\\xD83D\\xDD0D&quot;</code> as was shown above. The issue is that it is UTF-32, so in other words, it&#39;s encoded with two <code>wchar_t</code>s. I was able to save it in a .rc file, but now I can&#39;t seem to find a way to know if the system font supports it. For instance, I would&#39;ve thought <code>GetFontUnicodeRanges</code> API allows that, but I can&#39;t see how to use it with UTF-32 characters?"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1502990190, "post_id": 45724504, "comment_id": 78440149, "body": "@IInspectable: It&#39;s not just about saving Unicode symbols in a resource file. I need to be able to display it in my dialog window (see my comment above this one.)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1503044485, "post_id": 45724504, "comment_id": 78460795, "body": "You appear to be confusing the terms <i>code unit</i>, <i>code point</i>, and <i>encoding</i>. <code>L&quot;\\xD83D\\xDD0D&quot;</code> is the UTF-16 <i>encoding</i> for the <i>code point</i> U+1F50D. Being outside the base multilingual plane (BMP) it requires two <i>code units</i> to encode. The proposed duplicate answers one of your two questions. This is not strictly a duplicate, because you have mangled two (or three) questions into one."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1503082401, "post_id": 45724504, "comment_id": 78484646, "body": "@IInspectable: than I suggest moving it into a linguistics forum."}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1011, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1502926639, "creation_date": 1502926639, "question_id": 45724504, "link": "https://stackoverflow.com/questions/45724504/how-to-display-the-unicode-search-character-u1f56c-or-in-a-win32-button", "title": "How to display the Unicode search character (U+1F56C or &quot;&#128269;&quot;) in a Win32 button?", "body": "<p>I'm trying to make a \"search\" button in my Win32-based application (written in C++/MFC.) I don't have much space in the window itself, so the button must be small. So I added this Unicode \"search\" character <a href=\"http://www.fileformat.info/info/unicode/char/1f50d/index.htm\" rel=\"nofollow noreferrer\">U+1F56C</a> or \"\ud83d\udd0d\" as a \"caption\" to the button:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FBaXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FBaXH.png\" alt=\"enter image description here\"></a></p>\n\n<p>It looks OK in the resource editor in VS 2008:</p>\n\n<p><a href=\"https://i.stack.imgur.com/T1elS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T1elS.png\" alt=\"enter image description here\"></a></p>\n\n<p>but when I compile and run the app, the button looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dHhVO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dHhVO.png\" alt=\"enter image description here\"></a></p>\n\n<p>PS1: Note that the project is compiled to use \"Unicode character set.\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/VvLOs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VvLOs.png\" alt=\"enter image description here\"></a></p>\n\n<p>PS2: The reason I'm trying to add it as text is so that the button can scale well in case of a higher DPI setting.</p>\n"}, {"tags": ["c++", "qt", "opencv", "mat", "qpixmap"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502926884, "post_id": 45724457, "comment_id": 78406801, "body": "You could upload the image, and how many channels you have"}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1502996935, "post_id": 45724457, "comment_id": 78443761, "body": "You probably have some issues with channels (RGB/Grayscale/RGBA, etc) Check that"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1502927824, "creation_date": 1502927824, "answer_id": 45724662, "question_id": 45724457, "link": "https://stackoverflow.com/questions/45724457/c-opencv-mat-to-qpixmap-errors/45724662#45724662", "title": "C++ opencv Mat to QPixmap errors", "body": "<p>The following is what I normally use to convert <code>cv::Mat</code> to <code>QPixmap</code> or <code>QImage</code>:</p>\n\n<pre><code>void MainWindow::updateCanvasLabel(Mat mat){\n\n    QPixmap pixmap;\n    if(mat.type()==CV_8UC1)\n    {\n        // Set the color table (used to translate colour indexes to qRgb values)\n        QVector&lt;QRgb&gt; colorTable;\n        for (int i=0; i&lt;256; i++)\n            colorTable.push_back(qRgb(i,i,i));\n        // Copy input Mat\n        const uchar *qImageBuffer = (const uchar*)mat.data;\n        // Create QImage with same dimensions as input Mat\n        QImage img(qImageBuffer, mat.cols, mat.rows, mat.step, QImage::Format_Indexed8);\n        img.setColorTable(colorTable);\n        pixmap = QPixmap::fromImage(img);\n    }\n    // 8-bits unsigned, NO. OF CHANNELS=3\n    if(mat.type()==CV_8UC3)\n    {\n        // Copy input Mat\n        const uchar *qImageBuffer = (const uchar*)mat.data;\n        // Create QImage with same dimensions as input Mat\n        QImage img(qImageBuffer, mat.cols, mat.rows, mat.step, QImage::Format_RGB888);\n        pixmap = QPixmap::fromImage(img.rgbSwapped());\n    }\n    else\n    {\n        qDebug() &lt;&lt; \"ERROR: Mat could not be converted to QImage or QPixmap.\";\n        return;\n    }\n\n    ui-&gt;canvasLabel-&gt;setPixmap(pixmap);\n    ui-&gt;canvasLabel-&gt;setScaledContents(true);\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 7644020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/92c10cbb8baf1eb57cd6ccb52c89c678?s=128&d=identicon&r=PG&f=1", "display_name": "poppy", "link": "https://stackoverflow.com/users/7644020/poppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 2, "accepted_answer_id": 45724662, "answer_count": 1, "score": 3, "last_activity_date": 1502927824, "creation_date": 1502926328, "last_edit_date": 1502926843, "question_id": 45724457, "link": "https://stackoverflow.com/questions/45724457/c-opencv-mat-to-qpixmap-errors", "title": "C++ opencv Mat to QPixmap errors", "body": "<p>I am attempting to write a function which puts a greyscale OpenCv Mat into a Qt QPixmap, then into a QLabel. </p>\n\n<p>A third of the time it works.</p>\n\n<p>A third of the time, it skews the image...</p>\n\n<p><a href=\"https://i.stack.imgur.com/XAJaS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XAJaS.png\" alt=\"enter image description here\"></a></p>\n\n<p>becomes </p>\n\n<p><a href=\"https://i.stack.imgur.com/AKk0H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AKk0H.png\" alt=\"enter image description here\"></a></p>\n\n<p>The rest of the time, the program crashes, specifically on the fromImage() line.</p>\n\n<p>I know that the incoming Mat objects are greyscale and non-null in each case. Here is the code in question...</p>\n\n<pre><code>void MainWindow::updateCanvasLabel(Mat mat){\n\n    imwrite(\"c:/pics/last-opened.jpg\", mat); //to verify that Mat is\n                                             // what I think it is\n\n    QPixmap pixmap = QPixmap::fromImage(QImage((unsigned char*) mat.data,\n                               mat.cols,\n                               mat.rows,\n                               QImage::Format_Grayscale8)); \n\n    ui-&gt;canvasLabel-&gt;setPixmap(pixmap);\n    ui-&gt;canvasLabel-&gt;setScaledContents(true);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "feature-detection", "sift", "surf"], "comments": [{"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 1, "creation_date": 1502927576, "post_id": 45724245, "comment_id": 78406963, "body": "Something like this? <a href=\"https://stackoverflow.com/questions/13299409/how-to-get-the-image-pixel-at-real-locations-in-opencv\" title=\"how to get the image pixel at real locations in opencv\">stackoverflow.com/questions/13299409/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 8474926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80837a759d65715340ff15e4616ae83b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/8474926/sam"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1503083853, "post_id": 45724245, "comment_id": 78485424, "body": "Thank you! I didn&#39;t see that thread while searching. That solves my question."}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1503084108, "post_id": 45724245, "comment_id": 78485567, "body": "Cool, I wasn&#39;t sure that was exactly what you were looking for. I&#39;ll go ahead and suggest it as a duplicate."}], "owner": {"reputation": 11, "user_id": 8474926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80837a759d65715340ff15e4616ae83b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/8474926/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 1, "closed_date": 1503147073, "answer_count": 0, "score": 1, "last_activity_date": 1502924772, "creation_date": 1502924772, "question_id": 45724245, "link": "https://stackoverflow.com/questions/45724245/opencv-c-feature-detection-keypoint-color-from-image-pixel", "closed_reason": "Duplicate", "title": "OpenCV C++ feature detection keypoint color from image pixel", "body": "<p>I've looked into the Keypoint class but there are no attributes relative to the color of the keypoint.\nIs there a way to store the color of each keypoint that has been detected with SURF or SIFT? \nI understand that Keypoint coordinates are float but is there a ways to get an approximate color for that Keypoint maybe based on the color of the pixel it's inside or the neighboring ones?</p>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1502924530, "post_id": 45724136, "comment_id": 78406249, "body": "@Jarod42 that still fails both assertions :/"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1502924994, "post_id": 45724136, "comment_id": 78406376, "body": "What is the actual problem you&#39;re trying to solve? Why do you think you need this alias?"}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1502925104, "post_id": 45724136, "comment_id": 78406404, "body": "@Barry I want to eliminate the need to repeat the definition in the 3 places that I need it. I would rather make the definition once and use the alias everywhere else"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1502925236, "post_id": 45724136, "comment_id": 78406440, "body": "@Howard The definition of what? For what? In order to do what? What is the <i>actual problem</i>? It&#39;s easy to answer why your asserts fail, but I don&#39;t even know why they&#39;re there and what you&#39;re trying to test so I can&#39;t really answer how to fix it."}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1502925413, "post_id": 45724136, "comment_id": 78406485, "body": "I&#39;m not asking for another solution to the problem. I am only asking what is wrong with the way it is written. Why is that not what I expect it to be? It is surprising to me that it does not work as written, and i would like to know why."}, {"owner": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "edited": false, "score": 0, "creation_date": 1502925553, "post_id": 45724136, "comment_id": 78406514, "body": "That&#39;s not an alias.  It&#39;s a default template type argument.   When you pass in at least one argument to this function,  the default is ignored and it uses the type deduction rules.  Also, your use of conditional is not necessary here.  Finally, what are your assertions attempting to acomplish?"}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "reply_to_user": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "edited": false, "score": 0, "creation_date": 1502926622, "post_id": 45724136, "comment_id": 78406749, "body": "@DaveS the use of conditional allows me to pass lambdas directly as r-values without explicitly converting to <code>std::function</code> first. And you are right, I misspoke since alias defines an explicit thing, I intended it to mean simply a name which refers to the type. The assertions in the example were only there to show what my expected behavior was."}], "answers": [{"comments": [{"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1502926190, "post_id": 45724370, "comment_id": 78406660, "body": "ahh, that makes sense now. I didn&#39;t know that it would attempt to deduce a default template parameter. I was under the incorrect assumption it was only not the default when it was specified. The asserts are only in that code to show that it did not do what I intended it to do, and to shed some light on what I expected it to be. Can the code above be rewritten to alias the <code>std::function&lt;&gt;</code> type to a name?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1502926581, "post_id": 45724370, "comment_id": 78406741, "body": "@Howard You mean like <code>using T = int;</code>?"}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1502926834, "post_id": 45724370, "comment_id": 78406793, "body": "precisely like the <code>using</code> statement. I don&#39;t entirely understand from the documentation if I could use it such that the created alias is only scoped to the function and can still be used to name the parameter type"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1502925671, "creation_date": 1502925671, "answer_id": 45724370, "question_id": 45724136, "link": "https://stackoverflow.com/questions/45724136/template-type-deduced-type/45724370#45724370", "title": "Template Type != Deduced type", "body": "<blockquote>\n  <p>Why is the first declaration (using the <code>typename Functor = ...</code>) incorrect?</p>\n</blockquote>\n\n<p>You're providing a default type for the template parameter <code>Functor</code>. But the default type is only used if the type is not otherwise specified or deduced. In this case, template deduction will deduce <code>Functor</code> in both cases to be whatever the unique type of the lambda is that it is invoked with (while <code>Args...</code> deduces as an empty pack).</p>\n\n<p>This is similar to default function arguments not being used when they are provided.</p>\n\n<p>I'm not sure what your <code>assert()</code>s are supposed to accomplish, but if you're checking types you should use <code>static_assert</code>. </p>\n"}], "owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 45724370, "answer_count": 1, "score": 0, "last_activity_date": 1502925671, "creation_date": 1502923970, "question_id": 45724136, "link": "https://stackoverflow.com/questions/45724136/template-type-deduced-type", "title": "Template Type != Deduced type", "body": "<p>I'm attempting to give a friendly name to a type as a template typename because I need to use the name in a few places within the function. The type is being deduced based on the number of other template arguments in the parameter pack, as shown below:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;functional&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt; typename ... TArgs, typename Functor = std::function&lt; std::conditional_t&lt; sizeof...(TArgs) == 0, int (), int (TArgs...) &gt; &gt; &gt;\nvoid DoStuff(const Functor &amp; func, TArgs ... args) {\n    if constexpr (sizeof...(TArgs) == 0)\n        assert(typeid(Functor).hash_code() == typeid(std::function&lt;int ()&gt;).hash_code());\n    else\n        assert(typeid(Functor).hash_code() == typeid(std::function&lt;int (TArgs...)&gt;).hash_code());\n}\n\nint main(int argc, char * argv[]) {\n    DoStuff([] () { return 5; });\n    DoStuff([] (int a) { return a; });\n\n    return 0;\n}\n</code></pre>\n\n<p>This compiles just fine, but both assertions fail because the alias <code>Functor</code> is not actually a <code>std::function&lt;&gt;</code>. On the other hand, if I change the code to repeat the definition of <code>Functor</code> in the <code>typeid</code> calls it works perfectly, like below:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;functional&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt; typename ... TArgs, typename Functor = std::function&lt; std::conditional_t&lt; sizeof...(TArgs) == 0, int (), int (TArgs...) &gt; &gt; &gt;\nvoid DoStuff(const Functor &amp; func, TArgs ... args) {\n    if constexpr (sizeof...(TArgs) == 0)\n        assert(typeid(std::function&lt; std::conditional_t&lt; sizeof...(TArgs) == 0, int (), int (TArgs...) &gt; &gt;).hash_code() == typeid(std::function&lt;int ()&gt;).hash_code());\n    else\n        assert(typeid(std::function&lt; std::conditional_t&lt; sizeof...(TArgs) == 0, int (), int (TArgs...) &gt; &gt;).hash_code() == typeid(std::function&lt;int (TArgs...)&gt;).hash_code());\n}\n\nint main(int argc, char * argv[]) {\n    DoStuff([] () { return 5; });\n    DoStuff([] (int a) { return a; });\n\n    return 0;\n}\n</code></pre>\n\n<p>Why is the first declaration (using the <code>typname Functor = ...</code>) incorrect? Is there a different way to make that alias? Note that in answering the second question, it is OK if the solution is a const expression, the examples are only not <code>constexpr</code> because of the use of <code>typeid</code>.</p>\n"}, {"tags": ["c++", "c++11", "runge-kutta"], "comments": [{"owner": {"reputation": 3338, "user_id": 653473, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59aa7fd394ec0af8e6133f6fdf556d4e?s=128&d=identicon&r=PG", "display_name": "dialer", "link": "https://stackoverflow.com/users/653473/dialer"}, "edited": false, "score": 2, "creation_date": 1502923864, "post_id": 45724065, "comment_id": 78406084, "body": "You cannot assign a value to a function&#39;s identifier (<code>f</code>) and <code>2k2</code> and <code>2k3</code> are invalid syntax."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502924018, "post_id": 45724065, "comment_id": 78406119, "body": "<b><i>for (int i {0}; i&lt;n; ++i;) {</i></b> You have an extra ;"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1502924041, "post_id": 45724065, "comment_id": 78406124, "body": "<code>return k1, k2, k3, k4;</code> will only return <code>k4</code>."}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 2, "creation_date": 1502924046, "post_id": 45724065, "comment_id": 78406129, "body": "There are lot of bug in your code , related to declaration , return type ..please fix that"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502924139, "post_id": 45724065, "comment_id": 78406159, "body": "You don&#39;t use the 1 returned double from rk4funct."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502924281, "post_id": 45724065, "comment_id": 78406195, "body": "<code>k1+2k2+2k3+k4</code> None of these exist in <code>main()</code>. Also 2k2 and 2k3 are invalid."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1502924763, "post_id": 45724065, "comment_id": 78406310, "body": "Also, you have to resize those vectors after reading the number of steps, before entering the last loop and trying to modify <code>yvector[i+1]</code> and <code>tvector[i+1]</code>."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1502962749, "post_id": 45724065, "comment_id": 78420696, "body": "do not use shapshots and pictures on exteenal sources to provide error log or source code"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1502962756, "post_id": 45724065, "comment_id": 78420703, "body": "do not use shapshots and pictures on exteenal sources to provide error log or source code"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1503033347, "post_id": 45724065, "comment_id": 78455126, "body": "Why do you separate the two parts of the RK4 step? At least the assembling of <code>dy=(d&#47;6)*(k1+2k2+2k3+k4)</code> should take place in <code>rk4funct</code>, so that 4 return variables are reduced to one. Return either <code>dy</code> or <code>y+dy</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1502928348, "post_id": 45724300, "comment_id": 78407127, "body": "Why not just <code>std::tie(k1, k2, k3, k4) = rk4funct(tvector[i], yvector[i], d);</code>?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1502956961, "post_id": 45724300, "comment_id": 78416823, "body": "How big is <code>yvector</code> (and <code>tvector</code>) inside the loop where <code>yvector[i]</code> and <code>yvector[i+1]</code> are used?"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1503033724, "post_id": 45724300, "comment_id": 78455261, "body": "This provides a solution to a problem resulting from a very bad design decision. There is no reason to cut the usual RK4 step at exactly this point. In the cases where <code>k1,..,k4</code> are re-used for interpolation or to avoid repeated vector allocation, the general design of interfaces and data structures would look rather different."}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1503033872, "post_id": 45724300, "comment_id": 78455298, "body": "definitely there may be problem is in logic ranga kutta above post just solves OP error message"}, {"owner": {"reputation": 166, "user_id": 1941205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb32efb0792208a5b6b413e90376020?s=128&d=identicon&r=PG", "display_name": "Mark A. Ropper", "link": "https://stackoverflow.com/users/1941205/mark-a-ropper"}, "edited": false, "score": 0, "creation_date": 1553100424, "post_id": 45724300, "comment_id": 97263455, "body": "With C++17 you can now also use <code>auto[k1, k2, k3, k4] = rkfunct(...)</code>"}], "tags": [], "owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1502926750, "last_edit_date": 1502926750, "creation_date": 1502925120, "answer_id": 45724300, "question_id": 45724065, "link": "https://stackoverflow.com/questions/45724065/runge-kutta-method-on-c/45724300#45724300", "title": "Runge-Kutta method on c++", "body": "<p>If you want to use multiple return you can use std::tuple</p>\n\n<pre><code>std::tuple&lt;double,double,double,double&gt; rk4funct (double t,double y,double d){\n    double k1, k2, k3, k4;\n    k1 = d * f(t, y);\n    k2 = d * f(t+0.5*d, y+0.5*k1);\n    k3 = d * f(t+0.5*d, y+0.5*k2);\n    k4 = d * f(t+d, y+k3);\n     return std::make_tuple(k1, k2, k3, k4);\n}\n</code></pre>\n\n<p>And returned value can be captured</p>\n\n<pre><code>for (int i {0}; i&lt;n; ++i) {\n    double k1, k2, k3, k4;\n    auto ret = rk4funct (tvector[i], yvector[i], d);\n    k1 = std::get&lt;0&gt;(ret);\n    k2 = std::get&lt;1&gt;(ret);\n    k3 = std::get&lt;2&gt;(ret);\n    k4 = std::get&lt;3&gt;(ret);\n\n    yvector[i+1] = yvector[i] + (d/6)*(k1+2*k2+2*k3+k4);\n    tvector[i+1] = tvector[i] + d; //same here.\n}\n</code></pre>\n\n<p>Error fixed code </p>\n\n<pre><code>//Runge Kutta\n#include &lt;iostream&gt;\n#include&lt;vector&gt;\n#include &lt;tuple&gt;\nusing namespace std;\n\ndouble f (double t,double y){\n    double f = t + y;\n    return f;\n}\n\n\nstd::tuple&lt;double,double,double,double&gt; rk4funct (double t,double y,double d){\n    double k1, k2, k3, k4;\n    k1 = d * f(t, y);\n    k2 = d * f(t+0.5*d, y+0.5*k1);\n    k3 = d * f(t+0.5*d, y+0.5*k2);\n    k4 = d * f(t+d, y+k3);\n     return std::make_tuple(k1, k2, k3, k4);\n}\n\nint main (){\n\n    vector&lt;double&gt; yvector;\n    vector&lt;double&gt; tvector;\n    double y0 {0}; //initial y value\n    double t0 {0}; //initial time value\n    double d {0}; //step size\n    int n {0}; //number of iterations\n\n    cout &lt;&lt; \"Please input variables according to the following order: step size, y0, t0, n(# of iterations)\\n\";\n    cin &gt;&gt; d &gt;&gt; y0 &gt;&gt; t0 &gt;&gt; n;\n    yvector.push_back(y0);\n    tvector.push_back(t0);\n\n\n\n    for (int i {0}; i&lt;n; ++i) {\n\n        double k1, k2, k3, k4;\n        auto ret = rk4funct (tvector[i], yvector[i], d);\n        k1 = std::get&lt;0&gt;(ret);\n        k2 = std::get&lt;1&gt;(ret);\n        k3 = std::get&lt;2&gt;(ret);\n        k4 = std::get&lt;3&gt;(ret);\n\n        yvector[i+1] = yvector[i] + (d/6)*(k1+2*k2+2*k3+k4);\n        tvector[i+1] = tvector[i] + d; //same here.\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6087648, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10204252337668164/picture?type=large", "display_name": "Erez Sabran", "link": "https://stackoverflow.com/users/6087648/erez-sabran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4887, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1502926750, "creation_date": 1502923407, "last_edit_date": 1502923654, "question_id": 45724065, "link": "https://stackoverflow.com/questions/45724065/runge-kutta-method-on-c", "title": "Runge-Kutta method on c++", "body": "<p>i'm trying to code a simple runge-kutta method </p>\n\n<p>The function to be approximated and the runge-kutta method are separate definitions, which are called within the loop in the main function.</p>\n\n<p>approximate solutions for y and t are pushed into a separate vectors.</p>\n\n<p>I'm receiving the following errors and struggling to figure out why:\n<a href=\"https://i.stack.imgur.com/0dx5H.png\" rel=\"nofollow noreferrer\">Error message snapshot</a></p>\n\n<p>The code:</p>\n\n<pre><code>//Runge Kutta\n#include \"C:\\Users\\Erez\\Documents\\Dev C++ Projects\\std_lib_facilities.h\"\n\ndouble f (double t,double y){ \n   f = t + y;\nreturn f;\n}\n\ndouble rk4funct (double t,double y,double d){\n  double k1, k2, k3, k4;\n  k1 = d * f(t, y);\n  k2 = d * f(t+0.5*d, y+0.5*k1);\n  k3 = d * f(t+0.5*d, y+0.5*k2);\n  k4 = d * f(t+d, y+k3);\nreturn k1, k2, k3, k4;\n}\n\nint main (){\n\n  vector&lt;double&gt; yvector;\n  vector&lt;double&gt; tvector;\n  double y0 {0}; //initial y value\n  double t0 {0}; //initial time value\n  double d {0}; //step size\n  int n {0}; //number of iterations\n\n  cout &lt;&lt; \"Please input variables according to the following order: step size, y0, t0, n(# of iterations)\\n\";\n  cin &gt;&gt; d &gt;&gt; y0 &gt;&gt; t0 &gt;&gt; n;\n  yvector.push_back(y0);\n  tvector.push_back(t0);\n\n\n    for (int i {0}; i&lt;n; ++i;) {\n      rk4funct (tvector[i], yvector[i], d); \n      yvector[i+1] = yvector[i] + (d/6)*(k1+2k2+2k3+k4); \n      tvector[i+1] = tvector[i] + d; //same here.\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-point"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502923424, "post_id": 45723944, "comment_id": 78405943, "body": "Are you trying to left (right) trim the long-double literal, round it or get the numeric limits based on the template type?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1502923533, "post_id": 45723944, "comment_id": 78405980, "body": "@Ron The question is basically: &quot;Given the size of my storage (in bytes), how do I print a <code>double</code> to the maximum precision possible that fits in that length&quot;"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502923654, "post_id": 45723944, "comment_id": 78406028, "body": "Meta question: How much precision do you actually need for your application? How much (relative/absolute) error is  acceptable? Are you sure computation error does not dominate that anyways?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502923871, "post_id": 45723944, "comment_id": 78406086, "body": "Also, keep in mind that converting the <code>double</code> to base10 creates new rounding error anyways, so <i>&quot;full precision in decimal&quot;</i> is somewhat dodgy to begin with."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1502929180, "post_id": 45723944, "comment_id": 78407288, "body": "Do you have to pre-compute it? You could measure the actual length and retry with a lower limit if it didn&#39;t fit."}, {"owner": {"reputation": 1661, "user_id": 1464861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/utp7P.jpg?s=128&g=1", "display_name": "Jake Cobb", "link": "https://stackoverflow.com/users/1464861/jake-cobb"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502941061, "post_id": 45723944, "comment_id": 78409890, "body": "@BaummitAugen True, but if we have <code>std::numeric_limits&lt;double&gt;::max_digits10</code> precision in text form then we can round-trip the exact <code>double</code> value.  Digits beyond this don&#39;t matter for text storage because they all collapse to the same <code>double</code> value."}, {"owner": {"reputation": 1661, "user_id": 1464861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/utp7P.jpg?s=128&g=1", "display_name": "Jake Cobb", "link": "https://stackoverflow.com/users/1464861/jake-cobb"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1502941169, "post_id": 45723944, "comment_id": 78409912, "body": "@harold It can be run-time computed as in the negative/non-negative test in my original example, but I&#39;m hoping for something that doesn&#39;t involve fully formatting it and then retrying if the result is too long."}, {"owner": {"reputation": 4948, "user_id": 23504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pyGSX.jpg?s=128&g=1", "display_name": "bsruth", "link": "https://stackoverflow.com/users/23504/bsruth"}, "edited": false, "score": 1, "creation_date": 1502987685, "post_id": 45723944, "comment_id": 78438793, "body": "From the standard it looks like that the default ostream for floating point is <code>%g</code> ( <a href=\"http://en.cppreference.com/w/cpp/locale/num_put/put\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/locale/num_put/put</a> ), and it looks like <code>%g</code> formatting switches to scientific when the value has an exponent &lt; -4 ( <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/c/fprintf</a> )."}], "answers": [{"tags": [], "owner": {"reputation": 1661, "user_id": 1464861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/utp7P.jpg?s=128&g=1", "display_name": "Jake Cobb", "link": "https://stackoverflow.com/users/1464861/jake-cobb"}, "is_accepted": false, "score": 0, "last_activity_date": 1503585454, "last_edit_date": 1503585454, "creation_date": 1503582562, "answer_id": 45863381, "question_id": 45723944, "link": "https://stackoverflow.com/questions/45723944/guarantee-max-output-length-of-double-with-setprecision-for-default-output-forma/45863381#45863381", "title": "Guarantee max output length of double with setprecision for default output format", "body": "<p>As @bsruth noted, the default format is equivalent to <code>%g</code> for <code>fprintf</code>, and that is specified with this behavior:</p>\n\n<blockquote>\n  <p>Let P equal the precision if nonzero, 6 if the precision is not specified, or 1 if the precision is \u200b0\u200b.<br>\n  Then, if a conversion with style E would have an exponent of X:  </p>\n  \n  <blockquote>\n    <p>if P > X \u2265 \u22124, the conversion is with style f or F and precision P \u2212 1 \u2212 X.<br>\n      otherwise, the conversion is with style e or E and precision P \u2212 1.  </p>\n  </blockquote>\n</blockquote>\n\n<p>So, we calculate the base10 exponent as it would be in scientific notation and use that to adjust precision down if needed:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;limits&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\ndouble frexp10_scientific(double arg, int* exp)\n{\n   *exp = (arg == 0) ? 0 : static_cast&lt;int&gt;(std::log10(std::fabs(arg)));\n   double fraction = arg * pow(10 , -(*exp));\n   // adjust to scientific format decomposition\n   if (std::fabs(fraction) &lt; 1.0) {\n       *exp -= 1;\n       fraction *= 10;\n   }\n   return fraction;\n}\n\ntemplate &lt;typename T&gt;\nint precision_needed(T val)\n{\n  // initial guess on precision\n  int precision;\n  if (val &gt;= 0.0) {\n    if (val &gt;= 1e15 &amp;&amp; val &lt; 1e16)\n      precision = 16; // all integer digits used\n    else\n      precision = 15; // '.' present\n  } else {\n    if (val &gt; -1e15 &amp;&amp; val &lt;= -1e14)\n      precision = 15; // '-' present, all integer digits used\n    else\n      precision = 14; // '-' and '.' present\n  }\n\n  int exp;\n  frexp10_scientific(val, &amp;exp);\n\n  // adjust for scientific notation if needed\n  if (exp &lt; -99) {\n    precision -= 5; // \"e-123\"\n  } else if (exp &lt; -4) {\n    precision -= 4; // \"e-01\"\n  } else if (exp &gt;= precision) {\n    if (exp &gt; 99) {\n      precision -= 5; // \"e+123\"\n    } else {\n      precision -= 4; // \"e+12\"\n    }\n  }\n\n  return std::min(precision, std::numeric_limits&lt;T&gt;::max_digits10);\n}\n\ntemplate &lt;typename T&gt;\nstd::string format(T val) {\n  std::ostringstream oss;\n  oss.precision(precision_needed(val));\n  oss &lt;&lt; val;\n  return oss.str();\n}\n</code></pre>\n\n<p>Some <a href=\"http://cpp.sh/8fces\" rel=\"nofollow noreferrer\">test cases</a>, showing input, precision, length and output:</p>\n\n<pre><code>1.123e-4: [p=15,l=9] 0.0001123\n1.123e-5: [p=11,l=9] 1.123e-05\n1.123e-99: [p=11,l=9] 1.123e-99\n1.123e-100: [p=10,l=10] 1.123e-100\n7.105427357601002e-14: [p=11,l=16] 7.1054273576e-14\n7.105427357621342e-14: [p=11,l=16] 7.1054273576e-14\n-7.105427357601002e-14: [p=10,l=16] -7.105427358e-14\n-7.105427357621342e-14: [p=10,l=16] -7.105427358e-14\n7.105427357621342e14: [p=15,l=15] 710542735762134\n7.105427357621342e15: [p=16,l=16] 7105427357621342\n7.105427357621342e16: [p=11,l=16] 7.1054273576e+16\n-7.105427357621342e14: [p=15,l=16] -710542735762134\n-7.105427357621342e15: [p=10,l=16] -7.105427358e+15\n7.105427357621342e15: [p=16,l=16] 7105427357621342\n7.105427357621342e16: [p=11,l=16] 7.1054273576e+16\n-7.105427357621342e15: [p=10,l=16] -7.105427358e+15\n1.123e14: [p=15,l=15] 112300000000000\n1.123e15: [p=16,l=16] 1123000000000000\n1e15: [p=16,l=16] 1000000000000000\n1e16: [p=11,l=5] 1e+16\n-1e15: [p=10,l=6] -1e+15\n-1e14: [p=15,l=16] -100000000000000\n1.2345678901234567890e-14: [p=11,l=16] 1.2345678901e-14\n</code></pre>\n"}], "owner": {"reputation": 1661, "user_id": 1464861, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/utp7P.jpg?s=128&g=1", "display_name": "Jake Cobb", "link": "https://stackoverflow.com/users/1464861/jake-cobb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503585454, "creation_date": 1502922563, "question_id": 45723944, "link": "https://stackoverflow.com/questions/45723944/guarantee-max-output-length-of-double-with-setprecision-for-default-output-forma", "title": "Guarantee max output length of double with setprecision for default output format", "body": "<p>I have a <code>double</code> that I want to store in a string as losslessly as possible, but the storage format has a maximum string length of 16 that makes this impossible (because <code>std::numeric_limits&lt;double&gt;::max_digits10</code> indicates we need 17 precision for this).  So, accounting for the possibility of the characters <code>-</code> and <code>.</code>, we might clamp it to 14 or 15 as follows:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;limits&gt;\n#include &lt;iomanip&gt;\n\ntemplate &lt;typename T&gt;\nstd::string format(T val)\n{\n  int precision = std::min(std::numeric_limits&lt;T&gt;::max_digits10, \n    val &gt;= 0.0 ? 15 : 14);\n  std::ostringstream oss;\n  oss.precision(precision);\n  oss &lt;&lt; val;\n  return oss.str();\n}\n</code></pre>\n\n<p>However, with the default formatting the output could be in scientific notation and the result might still overrun the bounds.  For example, this input:</p>\n\n<p><code>7.105427357601002e-14</code></p>\n\n<p>Needs precision lowered to 12 before it gives a short enough output:</p>\n\n<p><code>7.1054273576e-14</code></p>\n\n<p>So, how can I compute the maximum precision that will keep the output within my length constraint without a brute force approach like retrying with lower precision if the result is too long?</p>\n"}, {"tags": ["c++", "c++20", "c++-faq", "cpp-core-guidelines", "std-span"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1516753741, "post_id": 45723819, "comment_id": 83815969, "body": "<code>std::span</code> was proposed in 2017. It applies to C++17 or C++20. Also see <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0122r5.pdf\" rel=\"nofollow noreferrer\">P0122R5, span: bounds-safe views for sequences  of objects</a>. Do you really want to target that language? It will be years before compilers catch up."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 6, "creation_date": 1516775963, "post_id": 45723819, "comment_id": 83822036, "body": "@jww: span&#39;s are quite usable with C++11... as <code>gsl::span</code> rather than <code>std::span</code>. See also my answer below."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1585077521, "post_id": 45723819, "comment_id": 107637892, "body": "Also documented on cppreference.com: <a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/span</a>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1585083775, "post_id": 45723819, "comment_id": 107640441, "body": "@KeithThompson: Not in 2017 it wasn&#39;t..."}, {"owner": {"reputation": 64879, "user_id": 107409, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lGv9q.png?s=128&g=1", "display_name": "Contango", "link": "https://stackoverflow.com/users/107409/contango"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1592639021, "post_id": 45723819, "comment_id": 110501356, "body": "@jww All compilers support std::span&lt;&gt; now in C++20 mode. And span is available from many 3rd party libs. You were right - it was years: 2 years to be precise."}], "answers": [{"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1502966642, "post_id": 45723820, "comment_id": 78423520, "body": "Wouldn&#39;t <code>read_into(int* from, int* to)</code> be way more in line with the usual (iterator based) approach of the standard library?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1502967818, "post_id": 45723820, "comment_id": 78424372, "body": "@DanielJour: I wanted a minimalistic example. Both your and my variant of the functions would probably not be something you would actually put in a library anyway. Also, note that with your variant, it&#39;s not possible to know how much you need to read, so maybe you mean <code>read_into(int* from, int* to, size_t n)</code>? That&#39;s mentioned in the Core Guidelines document as a &quot;bad example&quot; actually."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1502972758, "post_id": 45723820, "comment_id": 78427723, "body": "@einpoklum oh, no, that&#39;s not what I meant. Different take: <code>read_into(int* begin, int* end)</code>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1502973158, "post_id": 45723820, "comment_id": 78428008, "body": "@DanielJour: Ah well, the thing is, with a <code>span&lt;T&gt;</code>, you don&#39;t know/don&#39;t care whether internally it has <code>int* begin; size_t length</code> or <code>int* begin; int* end;</code> So I don&#39;t think it matters all that much."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1502974066, "post_id": 45723820, "comment_id": 78428704, "body": "It would make more sense to standardize a general range (supporting iterator+sentinel and iterator+length, maybe even iterator+sentinel+length) and make span a simple typedef. Because, you know, that&#39;s more generic."}, {"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 0, "creation_date": 1502974249, "post_id": 45723820, "comment_id": 78428858, "body": "Pity that they didn&#39;t standardize the representation, so it could be used for interop between different languages."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1502974321, "post_id": 45723820, "comment_id": 78428914, "body": "@Deduplicator: Ranges are coming to C++, but the current proposal (by Eric Niebler) requires support for Concepts. So not before C++20."}, {"owner": {"reputation": 127, "user_id": 5233906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lc-5enLAHpg/AAAAAAAAAAI/AAAAAAAAABY/tZdjPGEySF8/photo.jpg?sz=128", "display_name": "H\u1ea3i Ph\u1ea1m L&#234;", "link": "https://stackoverflow.com/users/5233906/h%e1%ba%a3i-ph%e1%ba%a1m-l%c3%aa"}, "edited": false, "score": 2, "creation_date": 1503408034, "post_id": 45723820, "comment_id": 78595086, "body": "Can you explain how span can know the size of an array while it is constructed just by the array pointer alone ? Is it due to span can read the bytes next to the pointer to get the size info (I guess these bytes are also allocated by <code>new</code> or <code>malloc</code>, so they can correctly <code>delete</code> it later)?  I can not find any article about this, and hint is appreciated. Thanks."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 127, "user_id": 5233906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lc-5enLAHpg/AAAAAAAAAAI/AAAAAAAAABY/tZdjPGEySF8/photo.jpg?sz=128", "display_name": "H\u1ea3i Ph\u1ea1m L&#234;", "link": "https://stackoverflow.com/users/5233906/h%e1%ba%a3i-ph%e1%ba%a1m-l%c3%aa"}, "edited": false, "score": 8, "creation_date": 1503475168, "post_id": 45723820, "comment_id": 78624917, "body": "@H\u1ea3iPh\u1ea1mL&#234;: Arrays don&#39;t immediately decay into pointers. try doing <code>std::cout &lt;&lt; sizeof(buffer) &lt;&lt; &#39;\\n&#39;</code> and you&#39;ll see you get 100 sizeof(int)&#39;s."}, {"owner": {"reputation": 127, "user_id": 5233906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lc-5enLAHpg/AAAAAAAAAAI/AAAAAAAAABY/tZdjPGEySF8/photo.jpg?sz=128", "display_name": "H\u1ea3i Ph\u1ea1m L&#234;", "link": "https://stackoverflow.com/users/5233906/h%e1%ba%a3i-ph%e1%ba%a1m-l%c3%aa"}, "edited": false, "score": 1, "creation_date": 1503479290, "post_id": 45723820, "comment_id": 78627702, "body": "@einpoklum : I see, yes, you&#39;re right. Is it true that compiler can tell the size of buffer since it&#39;s known at compile time ? <code>sizeof</code> is also compile time function. But, what about memory allocated dynamically by <code>new</code> or <code>malloc</code>? Can <code>span</code> work with them ?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 127, "user_id": 5233906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lc-5enLAHpg/AAAAAAAAAAI/AAAAAAAAABY/tZdjPGEySF8/photo.jpg?sz=128", "display_name": "H\u1ea3i Ph\u1ea1m L&#234;", "link": "https://stackoverflow.com/users/5233906/h%e1%ba%a3i-ph%e1%ba%a1m-l%c3%aa"}, "edited": false, "score": 1, "creation_date": 1503479592, "post_id": 45723820, "comment_id": 78627926, "body": "@H\u1ea3iPh\u1ea1mL&#234;: It can tell the size of the buffer because buffer is defined as a sized array. That has nothing to do with compile-time vs. run-time. Read the answers to <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">this question</a> here on SO."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "edited": false, "score": 1, "creation_date": 1528989456, "post_id": 45723820, "comment_id": 88724163, "body": "It&#39;s perfectly acceptable to self-answer questions."}, {"owner": {"reputation": 306, "user_id": 2716245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ALkzP.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/2716245/jim"}, "edited": false, "score": 0, "creation_date": 1541613337, "post_id": 45723820, "comment_id": 93278881, "body": "What are the advantages/disadvantages compared to <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a>?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 306, "user_id": 2716245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ALkzP.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/2716245/jim"}, "edited": false, "score": 5, "creation_date": 1543933099, "post_id": 45723820, "comment_id": 94090554, "body": "@Jim <code>std::array</code> is a container, it owns the values. <code>span</code> is non-owning"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 306, "user_id": 2716245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ALkzP.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/2716245/jim"}, "edited": false, "score": 3, "creation_date": 1543935370, "post_id": 45723820, "comment_id": 94091912, "body": "@Jim: <code>std::array</code> is a completely different beast. Its length is fixed at compile-time and it&#39;s a value-type rather than a reference-type, as Caleth explained."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1553683508, "post_id": 45723820, "comment_id": 97472570, "body": "Example around <code>read_into(buffer);</code> is the key issue I am having here.  Native array reference, very successfully kills the &#39;span&#39; idea in that scenario.  It is &quot;fundamental vocabulary type&quot; in the same way std::span might be. I &quot;need&quot; this clearly mentioned in &#39;span&#39; jubilation&#39;s."}, {"owner": {"reputation": 22495, "user_id": 3510483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qubeh.jpg?s=128&g=1", "display_name": "quantdev", "link": "https://stackoverflow.com/users/3510483/quantdev"}, "edited": false, "score": 0, "creation_date": 1555204602, "post_id": 45723820, "comment_id": 98028625, "body": "ards set example"}, {"owner": {"reputation": 303, "user_id": 5534993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e379037263741bc48cd7cd2d405f9?s=128&d=identicon&r=PG&f=1", "display_name": "user5534993", "link": "https://stackoverflow.com/users/5534993/user5534993"}, "edited": false, "score": 0, "creation_date": 1566132675, "post_id": 45723820, "comment_id": 101552768, "body": "Tristan Brindle&#39;s <a href=\"https://github.com/tcbrindle/span\" rel=\"nofollow noreferrer\">implementation of <code>span</code></a> has the benefit to be only a single header-file with few lines of code, supports <i>C++11 or later</i> and has no dependencies to other GSL facilities."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 303, "user_id": 5534993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e379037263741bc48cd7cd2d405f9?s=128&d=identicon&r=PG&f=1", "display_name": "user5534993", "link": "https://stackoverflow.com/users/5534993/user5534993"}, "edited": false, "score": 0, "creation_date": 1566133354, "post_id": 45723820, "comment_id": 101552947, "body": "@user5534993: How is this comment improving on what I&#39;ve already written?"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 306, "user_id": 2716245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ALkzP.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/2716245/jim"}, "edited": false, "score": 0, "creation_date": 1566151040, "post_id": 45723820, "comment_id": 101557319, "body": "The biggest advantage over an STL container that could serve as a quasi-<code>span</code> (like <code>array</code> or <code>vector</code>), @Jim, is that you don&#39;t need to awkwardly turn it into a reference type by storing a pile of pointers or <code>reference_wrapper</code>s to the data you&#39;d want to view."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1567203378, "post_id": 45723820, "comment_id": 101907332, "body": "So basically, <code>span</code> is like <code>string_view</code>, but works with any type, not only with <code>char</code>, right?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1567260861, "post_id": 45723820, "comment_id": 101916621, "body": "@Ruslan: There are similarities between them - but they are not the same. There are significant differences, at least in terms of their available methods."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1583257738, "post_id": 45723820, "comment_id": 107052680, "body": "&quot;<i>a bunch of convenience methods</i>&quot; is a rather disparaging term for <b>a standard collection interface</b>, don&#39;t you think?"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1586887721, "post_id": 45723820, "comment_id": 108292699, "body": "@einpoklum, please update the answer to explain in detail how <code>span</code> differs from <code>std::array</code>, and which one is better for what, why."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1586890280, "post_id": 45723820, "comment_id": 108293980, "body": "@GabrielStaples: I will not. There is no reason to focus on <code>std::array</code> here, as opposed to any other specific container. Also, if you know <code>std::array</code> at all, then the answer does explain how they differ. IMHO."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1586891525, "post_id": 45723820, "comment_id": 108294527, "body": "It&#39;s not clear enough in a single pass to someone who&#39;s never heard of a span before. This is sufficient: please replace your 2nd bullet with this: &quot;- Basically a <b>single</b> <code>struct { T * ptr; std::size_t length; }</code> with a bunch of convenience methods. (Notice this is distinctly different from <code>std::array&lt;&gt;</code> because a <code>span</code> enables convenience accessor methods comparable to <code>std::array</code> via a <i>pointer to type <code>T</code></i> and length of type <code>T</code>, whereas <code>std::array</code> is an actual container which holds one or more <i>values</i> of type <code>T</code>.) &quot;. Done. That&#39;s all I&#39;m asking for. This helps so much."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1586893428, "post_id": 45723820, "comment_id": 108295394, "body": "@GabrielStaples: There is no reason to focus on std::array rather than, say <code>std::vector</code>."}, {"owner": {"reputation": 366, "user_id": 4942129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8321bb2448594413dfd7e52f29ae9a46?s=128&d=identicon&r=PG&f=1", "display_name": "luizfls", "link": "https://stackoverflow.com/users/4942129/luizfls"}, "edited": false, "score": 0, "creation_date": 1587870914, "post_id": 45723820, "comment_id": 108677759, "body": "<i>&quot;reasonable alternative to passing const vector&lt;T&gt;&amp; to functions when you expect your data to be contiguous in memory&quot;</i>. Could somebody expand? Aren&#39;t vectors contiguous in memory?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 366, "user_id": 4942129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8321bb2448594413dfd7e52f29ae9a46?s=128&d=identicon&r=PG&f=1", "display_name": "luizfls", "link": "https://stackoverflow.com/users/4942129/luizfls"}, "edited": false, "score": 1, "creation_date": 1587881353, "post_id": 45723820, "comment_id": 108679704, "body": "@luizfls: They are. But if that&#39;s what your function needs - don&#39;t insist on the input being an <code>std::vector</code> - any contiguous sequence of memory will do, and the span is just the container to represent it."}, {"owner": {"reputation": 377, "user_id": 11157797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873cca52b3ac9045a24799ffea29346a?s=128&d=identicon&r=PG&f=1", "display_name": "Noone AtAll", "link": "https://stackoverflow.com/users/11157797/noone-atall"}, "edited": false, "score": 0, "creation_date": 1598546600, "post_id": 45723820, "comment_id": 112501380, "body": "first you say to not use it with <code>std::find_if</code> and then you use it yourself... I feel like a different wording is needed"}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1603311921, "post_id": 45723820, "comment_id": 114000910, "body": "Specifically about <code>cstring_span&lt;&gt;</code>, this specific span doesn&#39;t store any character data, correct? So hypothetically, if I had a <code>cstring_span&lt;&gt;</code> that was, e.g., allocated from <code>std::string::c_str()</code>, it would also have the same lifetime that the <code>char*</code> from <code>c_str</code> would have, correct? What value does a <code>cstring_span</code> add over just working with the <code>char*</code> or <code>std::string</code>?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1603312145, "post_id": 45723820, "comment_id": 114000997, "body": "@jrh: Thanks for noticing the typo. Anyway - I don&#39;t know about a <code>cstring_span</code>; that&#39;s not in the standard library and not in my answer. But generally - spans don&#39;t store any data. And, yes, its lifetime is the same as the pointer. &quot;What value does it add&quot; &lt;- It has the length, on the one hand, and it&#39;s a cheap simple structure which doesn&#39;t own any memory, on the other."}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1603312526, "post_id": 45723820, "comment_id": 114001141, "body": "@einpoklum ah, I see, I wasn&#39;t aware that it was non-standard. I noticed it was in an old version of GSL, I wasn&#39;t sure where it came from. Thanks!"}, {"owner": {"reputation": 7910, "user_id": 4510033, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/5n5GO.jpg?s=128&g=1", "display_name": "\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d \u0412\u0430\u043d", "link": "https://stackoverflow.com/users/4510033/%d0%9a%d0%be%d0%bd%d1%81%d1%82%d0%b0%d0%bd%d1%82%d0%b8%d0%bd-%d0%92%d0%b0%d0%bd"}, "edited": false, "score": 0, "creation_date": 1609455437, "post_id": 45723820, "comment_id": 115848757, "body": "\u201cDon\u2019t use it in code that could just take any pair of start &amp; end iterators\u201d \u2015 Why? Isn\u2019t <code>std::span</code> meant to get rid of pairs?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 7910, "user_id": 4510033, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/5n5GO.jpg?s=128&g=1", "display_name": "\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d \u0412\u0430\u043d", "link": "https://stackoverflow.com/users/4510033/%d0%9a%d0%be%d0%bd%d1%81%d1%82%d0%b0%d0%bd%d1%82%d0%b8%d0%bd-%d0%92%d0%b0%d0%bd"}, "edited": false, "score": 2, "creation_date": 1609456263, "post_id": 45723820, "comment_id": 115848870, "body": "@\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0412\u0430\u043d: No... pair-of-iterators is much more general. For example: <code>std::list</code>&#39;s beginning and end are two iterators, but the elements are not consecutive in memory, so it doesn&#39;t fit a span."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 339, "last_activity_date": 1606173496, "last_edit_date": 1606173496, "creation_date": 1502921705, "answer_id": 45723820, "question_id": 45723819, "link": "https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one/45723820#45723820", "title": "What is a &quot;span&quot; and when should I use one?", "body": "<h2>What is it?</h2>\n<p>A <code>span&lt;T&gt;</code> is:</p>\n<ul>\n<li>A very lightweight abstraction of a contiguous sequence of values of type <code>T</code> somewhere in memory.</li>\n<li>Basically a <code>struct { T * ptr; std::size_t length; }</code> with a bunch of convenience methods.</li>\n<li>A non-owning type (i.e. a <a href=\"https://stackoverflow.com/questions/24827592/what-is-definition-of-reference-type\">&quot;reference-type&quot;</a> rather than a &quot;value type&quot;): It never allocates nor deallocates anything and does not keep smart pointers alive.</li>\n</ul>\n<p>It was formerly known as an <a href=\"https://stackoverflow.com/q/34832090/1593077\"><code>array_view</code></a> and even earlier as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3334.html\" rel=\"noreferrer\"><code>array_ref</code></a>.</p>\n<h2>When should I use it?</h2>\n<p>First, when <em>not</em> to use it:</p>\n<ul>\n<li>Don't use it in code that could just take any pair of start &amp; end iterators, like <code>std::sort</code>, <code>std::find_if</code>, <code>std::copy</code> and all of those super-generic templated functions.</li>\n<li>Don't use it if you have a standard library container (or a Boost container etc.) which you know is the right fit for your code. It's not intended to supplant any of them.</li>\n</ul>\n<p>Now for when to actually use it:</p>\n<blockquote>\n<p>Use <code>span&lt;T&gt;</code> (respectively, <code>span&lt;const T&gt;</code>) instead of a free-standing <code>T*</code> (respectively <code>const T*</code>) when the allocated length or size also matter. So, replace functions like:</p>\n<pre><code>  void read_into(int* buffer, size_t buffer_size);\n</code></pre>\n<p>with:</p>\n<pre><code>  void read_into(span&lt;int&gt; buffer);\n</code></pre>\n</blockquote>\n<h2>Why should I use it? Why is it a good thing?</h2>\n<p>Oh, spans are awesome! Using a <code>span</code>...</p>\n<ul>\n<li><p>means that you can work with that pointer+length / start+end pointer combination like you would with a fancy, pimped-out standard library container, e.g.:</p>\n<ul>\n<li><code>for (auto&amp; x : my_span) { /* do stuff */ }</code></li>\n<li><code>std::find_if(my_span.cbegin(), my_span.cend(), some_predicate);</code></li>\n<li><code>std::ranges::find_if(my_span, some_predicate);</code> (in C++20)\n<br>\n<br></li>\n</ul>\n<p>... but with absolutely none of the overhead most container classes incur.</p>\n</li>\n<li><p>lets the compiler do more work for you sometimes. For example, this:</p>\n<pre><code>  int buffer[BUFFER_SIZE];\n  read_into(buffer, BUFFER_SIZE);\n</code></pre>\n<p>becomes this:</p>\n<pre><code>  int buffer[BUFFER_SIZE];\n  read_into(buffer);\n</code></pre>\n<p>... which will do what you would want it to do. See also <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#p5-prefer-compile-time-checking-to-run-time-checking\" rel=\"noreferrer\">Guideline P.5</a>.</p>\n</li>\n<li><p>is the reasonable alternative to passing <code>const vector&lt;T&gt;&amp;</code> to functions when you expect your data to be contiguous in memory. No more getting scolded by high-and-mighty C++ gurus!</p>\n</li>\n<li><p>facilitates static analysis, so the compiler might be able to help you catch silly bugs.</p>\n</li>\n<li><p>allows for debug-compilation instrumentation for runtime bounds-checking (i.e. <code>span</code>'s methods will have some bounds-checking code within <code>#ifndef NDEBUG</code> ... <code>#endif</code>)</p>\n</li>\n<li><p>indicates that your code (that's using the span) doesn't own the pointed-to memory.</p>\n</li>\n</ul>\n<p>There's even more motivation for using <code>span</code>s, which you could find in the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md\" rel=\"noreferrer\">C++ core guidelines</a> - but you catch the drift.</p>\n<h2>But is it in the standard library?</h2>\n<p><strong>edit:</strong> Yes, <a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"noreferrer\"><code>std::span</code></a> was added to C++ with the C++20 version of the language!</p>\n<p>Why only in C++20? Well, While the idea is not new - its current form was conceived in conjunction with the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md\" rel=\"noreferrer\">C++ core guidelines</a> project, which only started taking shape in 2015. So it took a while.</p>\n<h2>So how do I use it if I'm writing C++17 or earlier?</h2>\n<p>It's part of the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#p3-express-intent\" rel=\"noreferrer\">Core Guidelines</a>'s Support Library (GSL). Implementations:</p>\n<ul>\n<li>Microsoft / Neil Macintosh's <a href=\"https://github.com/Microsoft/GSL\" rel=\"noreferrer\">GSL</a> contains a standalone implementation: <a href=\"https://github.com/Microsoft/GSL/blob/master/include/gsl/span\" rel=\"noreferrer\"><code>gsl/span</code></a></li>\n<li><a href=\"https://github.com/martinmoene/gsl-lite\" rel=\"noreferrer\">GSL-Lite</a> is a single-header implementation of the whole GSL (it's not that big, don't worry), including <code>span&lt;T&gt;</code>.</li>\n</ul>\n<p>The GSL implementation does generally assume a platform that implements C++14 support [<a href=\"https://github.com/microsoft/GSL/blob/7d78b743e43ecba06ca47426d03d9d16076dec16/README.md#L9\" rel=\"noreferrer\">11</a>]. These alternative single-header implementations do not depend on GSL facilities:</p>\n<ul>\n<li><a href=\"https://github.com/martinmoene/span-lite\" rel=\"noreferrer\"><code>martinmoene/span-lite</code></a> requires C++98 or later</li>\n<li><a href=\"https://github.com/tcbrindle/span\" rel=\"noreferrer\"><code>tcbrindle/span</code></a> requires C++11 or later</li>\n</ul>\n<p>Note that these different span implementations have some differences in what methods/support functions they come with; and they may also differ somewhat from the version adopted into the standard library in C++20.</p>\n<hr />\n<p><strong>Further reading:</strong> You can find all the details and design considerations in the final official proposal before C++17, P0122R7: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0122r7.pdf\" rel=\"noreferrer\">span: bounds-safe views for sequences of objects</a> by Neal Macintosh and Stephan J. Lavavej. It's a bit long though. Also, in C++20, the span comparison semantics changed (following <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1085r2.md\" rel=\"noreferrer\">this short paper</a> by Tony van Eerd).</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1598609965, "post_id": 61216722, "comment_id": 112521553, "body": "I would really not recommend using all of abseil to get a span class."}], "tags": [], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "is_accepted": false, "score": 18, "last_activity_date": 1601951780, "last_edit_date": 1601951780, "creation_date": 1586896475, "answer_id": 61216722, "question_id": 45723819, "link": "https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one/61216722#61216722", "title": "What is a &quot;span&quot; and when should I use one?", "body": "<p>A <code>span&lt;T&gt;</code> is this:</p>\n<pre><code>template &lt;typename T&gt;\nstruct span\n{\n    T * ptr_to_array;   // pointer to a contiguous C-style array of data\n                        // (which memory is NOT allocated or deallocated \n                        // by the span)\n    std::size_t length; // number of elements in the array\n\n    // Plus a bunch of constructors and convenience accessor methods here\n}\n</code></pre>\n<p>It is a light-weight wrapper around a C-style array, preferred by C++ developers whenever they are using C libraries and want to wrap them with a C++-style data container for &quot;type safety&quot; and &quot;C++-ishness&quot; and &quot;feelgoodery&quot;. :)</p>\n<hr />\n<h2>Going further:</h2>\n<p>@einpoklum does a pretty good job of introducing what a <code>span</code> is <a href=\"https://stackoverflow.com/a/45723820/4561887\">in his answer here</a>. However, <em>even after reading his answer,</em> it is easy for someone new to spans to still have a sequence of stream-of-thought questions which aren't fully answered, such as the following:</p>\n<ol>\n<li>How is a <code>span</code> different from a C array? Why not just use one of those? It seems like it's just one of those with the size known as well...</li>\n<li>Wait, that sounds like a <code>std::array</code>, how is a <code>span</code> different from that?</li>\n<li>Oh, that reminds me, isn't a <code>std::vector</code> like a <code>std::array</code> too?</li>\n<li>I'm so confused. :( What's a <code>span</code>?</li>\n</ol>\n<p>So, here's some additional clarity on that:</p>\n<p>DIRECT QUOTE OF HIS ANSWER--WITH <strong><em>MY ADDITIONS</em> and parenthetical comments IN BOLD</strong> and <em>my emphasis in italics</em>:</p>\n<blockquote>\n<h2>What is it?</h2>\n</blockquote>\n<blockquote>\n<p>A <code>span&lt;T&gt;</code> is:</p>\n</blockquote>\n<blockquote>\n<ul>\n<li>A very lightweight abstraction of a <em>contiguous sequence of values</em> of type <code>T</code> somewhere in memory.</li>\n<li>Basically a <strong>single</strong> struct <code>{ T * ptr; std::size_t length; }</code> with a bunch of convenience methods. <strong>(Notice this is distinctly different from <code>std::array&lt;&gt;</code> because a <code>span</code> enables convenience accessor methods, comparable to <code>std::array</code>, via a <em>pointer to type <code>T</code></em> and length (number of elements) of type <code>T</code>, whereas <code>std::array</code> is an actual container which holds one or more <em>values</em> of type <code>T</code>.)</strong></li>\n<li>A <em>non-owning type</em> (i.e. a <a href=\"https://stackoverflow.com/questions/34832090/whats-the-difference-between-span-and-array-view-in-the-gsl-library\">&quot;reference-type&quot;</a> rather than a &quot;value type&quot;): It <em>never allocates nor deallocates anything</em> and does not keep smart pointers alive.</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>It was formerly known as an <a href=\"https://stackoverflow.com/questions/34832090/whats-the-difference-between-span-and-array-view-in-the-gsl-library\"><code>array_view</code></a> and even earlier as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3334.html\" rel=\"noreferrer\"><code>array_ref</code></a>.</p>\n</blockquote>\n<p>Those bold parts are <em>critical</em> to one's understanding, so don't miss them or misread them! A <code>span</code> is NOT a C-array of structs, nor is it a struct of a C-array of type <code>T</code> plus the length of the array (this would be essentially what the <code>std::array</code> <em>container</em> is), NOR is it a C-array of structs of pointers to type <code>T</code> plus the length, but rather it is a <strong>single</strong> struct containing one single <strong>pointer to type <code>T</code></strong>, and the <strong>length</strong>, which is the <strong>number of elements (of type <code>T</code>) in the contiguous memory block that the pointer to type <code>T</code> points to!</strong> In this way, the only overhead you've added by using a <code>span</code> are the variables to store the pointer and length, and any convenience accessor functions you use which the <code>span</code> provides.</p>\n<p>This is UNLIKE a <code>std::array&lt;&gt;</code> because the <code>std::array&lt;&gt;</code> actually allocates memory for the entire contiguous block, and it is UNLIKE <code>std::vector&lt;&gt;</code> because a <code>std::vector</code> is basically just a <code>std::array</code> that also does <em>dynamic growing</em> (usually doubling in size) each time it fills up and you try to add something else to it. A <code>std::array</code> is fixed in size, and <em>a <strong><code>span</code></strong> doesn't even manage the memory of the block it points to, it just points to the block of memory, knows how long the block of memory is, knows what data type is in a C-array in the memory, and provides convenience accessor functions to work with the elements in that contiguous memory</em>.</p>\n<h2>It <em>is</em> part of the C++ standard:</h2>\n<p><code>std::span</code> is part of the C++ standard as of C++20. You can read its documentation here: <a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/container/span</a>. To see how to use Google's <code>absl::Span&lt;T&gt;(array, length)</code> in C++11 or later <em>today</em>, see below.</p>\n<h2>Summary Descriptions, and Key References:</h2>\n<ol>\n<li><code>std::span&lt;T, Extent&gt;</code> (<code>Extent</code> = &quot;the number of elements in the sequence, or <code>std::dynamic_extent</code> if dynamic&quot;. A span just <em>points to</em> memory and makes it easy to access, but does NOT manage it!):</li>\n<li><a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/container/span</a></li>\n<li><code>std::array&lt;T, N&gt;</code> (notice it has a <em>fixed</em> size <code>N</code>!):</li>\n<li><a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/container/array</a></li>\n<li><a href=\"http://www.cplusplus.com/reference/array/array/\" rel=\"noreferrer\">http://www.cplusplus.com/reference/array/array/</a></li>\n<li><code>std::vector&lt;T&gt;</code> (automatically dynamically grows in size as necessary):</li>\n<li><a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/container/vector</a></li>\n<li><a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"noreferrer\">http://www.cplusplus.com/reference/vector/vector/</a></li>\n</ol>\n<h2>How Can I Use <code>span</code> in C++11 or later <em>today</em>?</h2>\n<p>Google has open-sourced their internal C++11 libraries in the form of their &quot;Abseil&quot; library. This library is intended to provide C++14 to C++20 and beyond features which work in C++11 and later, so that you can use tomorrow's features, today. They say:</p>\n<blockquote>\n<p><strong>Compatibility with the C++ Standard</strong></p>\n</blockquote>\n<blockquote>\n<p>Google has developed many abstractions that either match or closely match features incorporated into C++14, C++17, and beyond. Using the Abseil versions of these abstractions allows you to access these features now, even if your code is not yet ready for life in a post C++11 world.</p>\n</blockquote>\n<h2>Here are some key resources and links:</h2>\n<ol>\n<li>Main site: <a href=\"https://abseil.io/\" rel=\"noreferrer\">https://abseil.io/</a></li>\n<li><a href=\"https://abseil.io/docs/cpp/\" rel=\"noreferrer\">https://abseil.io/docs/cpp/</a></li>\n<li>GitHub repository: <a href=\"https://github.com/abseil/abseil-cpp\" rel=\"noreferrer\">https://github.com/abseil/abseil-cpp</a></li>\n<li><code>span.h</code> header, and <code>absl::Span&lt;T&gt;(array, length)</code> template class: <a href=\"https://github.com/abseil/abseil-cpp/blob/master/absl/types/span.h#L153\" rel=\"noreferrer\">https://github.com/abseil/abseil-cpp/blob/master/absl/types/span.h#L153</a></li>\n</ol>\n<h2>Other references:</h2>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/2448242/struct-with-template-variables-in-c/2448307#2448307\">Struct with template variables in C++</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/C%2B%2B_classes#:%7E:text=A%20structure%20is%20a%20class,reserved%20for%20data%20without%20functions.\" rel=\"noreferrer\">Wikipedia: C++ classes</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1247745/default-visibility-of-c-class-struct-members\">default visibility of C++ class/struct members</a></li>\n</ol>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76333, "favorite_count": 77, "accepted_answer_id": 45723820, "answer_count": 2, "score": 291, "last_activity_date": 1606173496, "creation_date": 1502921705, "last_edit_date": 1586434788, "question_id": 45723819, "link": "https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one", "title": "What is a &quot;span&quot; and when should I use one?", "body": "<p>Recently I've gotten suggestions to use <code>span&lt;T&gt;</code>'s in my code, or have seen some answers here on the site which use <code>span</code>'s - supposedly some kind of container. But - I can't find anything like that in the C++17 standard library. </p>\n\n<p>So what is this mysterious <code>span&lt;T&gt;</code>, and why (or when) is it a good idea to use it if it's non-standard?</p>\n"}, {"tags": ["c++", "pointers", "smart-pointers"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1502921292, "post_id": 45723676, "comment_id": 78405297, "body": "Calling it a &quot;smart pointer&quot; doesn&#39;t say much. What are objects of this class supposed to do?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502921476, "post_id": 45723676, "comment_id": 78405342, "body": "There&#39;s surely something in Boost that does what you need that doesn&#39;t involve doing whatever&#39;s going on here. Code like <code>(*(uses = obj.uses))++</code> is extremely concerning."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1502921497, "post_id": 45723676, "comment_id": 78405350, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>"}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502921498, "post_id": 45723676, "comment_id": 78405352, "body": "its supposed to count the references for the pointer it holds. And when the reference  count is 0 (/the pointer is not used anymore) it deletes the pointer it holds. So basically an own version of the std::shared_ptr but tailored to my needs"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1502921520, "post_id": 45723676, "comment_id": 78405358, "body": "What are your &quot;needs&quot; that the Standard Library version can&#39;t accommodate?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1502921628, "post_id": 45723676, "comment_id": 78405387, "body": "This is a problem: <code>this-&gt;~Var();</code>. After that line, <code>*this</code> is destroyed; to treat it as not destroyed is not valid"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1502921742, "post_id": 45723676, "comment_id": 78405418, "body": "<code>delete value</code> will not call <code>K</code>&#39;s destructor. Why not just use <code>std::shared_ptr</code> instead?  It is already a reference-counted smart pointer that does all of the hard work for you."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502921765, "post_id": 45723676, "comment_id": 78405424, "body": "there are never any errors thrown, I am just calling the destructor, not deleting <code>this</code>"}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502921770, "post_id": 45723676, "comment_id": 78405425, "body": "I do not want my class bound to a specific type. As in the shared_ptr you always would have to have it bound to the same type: <code>std::shared_ptr&lt;C&gt;</code>. Mine should be rather open"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1502921885, "post_id": 45723676, "comment_id": 78405455, "body": "@Sheldon And how are you going to figure out what kind of item is really stored inside of your pointer? How did you determine that something wasn&#39;t destroyed? The test code does not perform such checks."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502921953, "post_id": 45723676, "comment_id": 78405477, "body": "@Remy Lebeau I tested before and found out otherwise, since the class generally works"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1502921995, "post_id": 45723676, "comment_id": 78405495, "body": "I&#39;m not sure what <code>delete value</code> does. I&#39;ve never seen anyone even try to do that. I don&#39;t know if it&#39;s undefined behavior, but it is for certain wrong to expect proper behavior when deleting a <code>void*</code> pointing to non-trivially destructable type (which <code>std::string</code> is)."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502922018, "post_id": 45723676, "comment_id": 78405503, "body": "@VTT this is not the whole pointer class, but the only important part for the question. The whole code is a lot bigger. Lets just say the program never tries to read it wrong"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1502922472, "post_id": 45723676, "comment_id": 78405639, "body": "@Sheldon, Calling <code>delete</code> on <code>void*</code> is not right. See <a href=\"https://timsong-cpp.github.io/cppwp/n3337/expr.delete#1\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/n3337/expr.delete#1</a>."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502923414, "post_id": 45723676, "comment_id": 78405941, "body": "Yet the problem does not lie in the delete and since I for now have not found a better alternative I bruteforce this idea. The destructor of <code>C</code> get called twice. Meaning that concerns of calling <code>delete</code> on a void ptr, as unorthodox as it may be, deletes what it should delete and calls the destructor as it should. The destructor of the string does get called as well. No matter if <code>var2</code> is in or not."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1502923453, "post_id": 45723676, "comment_id": 78405957, "body": "Off topic: Not much point to <code>value = uses = nullptr;</code> at the end of a destructor. One more line and variables are toast."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502923480, "post_id": 45723676, "comment_id": 78405968, "body": "If the error would truly be in deleting the <code>void*</code> the reference counter would be deleted and I would only be left alone with the <code>value</code> but I am not. Which means that the reference count is off"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1502924094, "post_id": 45723676, "comment_id": 78406141, "body": "You probably have multiple bugs, but the thing with <code>void*</code> is a showstopper that derails the whole concept.  <a href=\"http://ideone.com/t02HsI\" rel=\"nofollow noreferrer\">ideone.com/t02HsI</a> Note that the destructor did not run for the <code>void*</code>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 4, "creation_date": 1502924126, "post_id": 45723676, "comment_id": 78406152, "body": "@Sheldon: If your code has undefined behavior, it doesn&#39;t matter if it appears to work. It&#39;s still wrong."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502926299, "post_id": 45724299, "comment_id": 78406685, "body": "@MooingDuck: thanks, I updated my answer and the demo"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502926498, "post_id": 45724299, "comment_id": 78406723, "body": "@MooingDuck: It is legal to override <code>std::swap</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502926574, "post_id": 45724299, "comment_id": 78406736, "body": "<a href=\"https://stackoverflow.com/questions/14402990/should-you-overload-swap-in-the-std-namespace\" title=\"should you overload swap in the std namespace\">stackoverflow.com/questions/14402990/&hellip;</a> &quot;The behavior of a C++ program is undefined if it adds declarations or definitions to namespace std or to a namespace within namespace std unless otherwise specified. &quot; (std::swap is not otherwise specified). You should use ADL instead, according to the C++ committee <a href=\"https://stackoverflow.com/questions/11562/how-to-overload-stdswap/2684544#2684544\" title=\"how to overload stdswap\">stackoverflow.com/questions/11562/how-to-overload-stdswap/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502928583, "post_id": 45724299, "comment_id": 78407169, "body": "@MooingDuck: &lt;sigh&gt; fine. I have updated my answer again. I can&#39;t edit the live demo anymore, the code is really taxing ideone&#39;s scripts to the point where they lock up the browser."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502957932, "post_id": 45724299, "comment_id": 78417413, "body": "Thank you very much. The code seems to work perfectly after a quick test. Please note: the destructors actually get called as they should without casting back to the original type and this is of course valid after calling <code>this-&gt;~Var();</code> since I am not deleting <code>this</code> rather than just calling a member function. <i>Yes</i>, calling the destructor is not a good thing to do as it will invoke the destructors of membervariables. But I have pointers so there is no other destructor called or variable deleted, so I wrote it that way in the compressed version of the code.Rest asured not in the actual"}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502969930, "post_id": 45724299, "comment_id": 78425807, "body": "using <code>dynamic_cast</code> led to an error when casting from a derived class to the base class. Its fixed when using a <code>static_cast</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 1, "creation_date": 1502977002, "post_id": 45724299, "comment_id": 78430979, "body": "@Sheldon: calling a destructor directly is undefined behavior if the pointer was not allocated with <code>placement-new</code>. This code is designed to avoid the casting issue when calling destructors. And please don&#39;t use <code>static_cast</code>, that will introduce new bugs if you cast to the wrong type that is not actually stored. The whole point of using <code>dynamic_cast</code> is to ensure a valid cast to the proper type. If you store an <code>X</code> value, you can only retrieve an <code>X</code> pointer. If you want a base class pointer, assign the retrieved pointer to a base class pointer after retrieving it."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502981379, "post_id": 45724299, "comment_id": 78434452, "body": "I do indeed store though what type to read from the Var instance. But, since I only store the base class directly, a <code>dynamic_cast</code> would have to be to the base class. I used a <code>static_cast</code> and it works perfectly well with the established code for I check if the base class fits before casting. How could I cast  <code>controlBlockImpl&lt;Derived&gt;</code> to <code>controlBlockImpl&lt;Base&gt;</code> using a dynamic cast? Since <code>Derived</code> would only be derrived from <code>Base</code> but not <code>controlBlockImpl&lt;Derived&gt;</code> from <code>controlBlockImpl&lt;Base&gt;</code> I would see an issue there."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 1, "creation_date": 1502982343, "post_id": 45724299, "comment_id": 78435200, "body": "@Sheldon: you can&#39;t cast between <code>controlBlockImpl&lt;Derived&gt;</code> and <code>controlBlockImpl&lt;Base&gt;</code>, they are unrelated types. If <code>K</code> is <code>Base</code> (why? You would <a href=\"https://stackoverflow.com/questions/274626/\">slice the stored object</a>!), you have to retrieve a <code>Base*</code> from <code>controlBlockImpl&lt;Base&gt;</code>, then cast the <code>Base*</code> to <code>Derived*</code> (which would be invalid due to slicing!). If you have a <code>Derived</code> source object, you have to store a <code>Derived</code> object via <code>controlBlockImpl&lt;Derived&gt;</code> to avoid slicing, then retrieve a <code>Derived*</code> from it, and assign the <code>Derived*</code> to a <code>Base*</code> without casting."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 1, "creation_date": 1502982484, "post_id": 45724299, "comment_id": 78435306, "body": "@Sheldon your requirement to store a <i>copy</i> of an object inside of <code>Var</code> goes against what a smart pointer is intended for. You could just use <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> or <a href=\"http://en.cppreference.com/w/cpp/utility/any\" rel=\"nofollow noreferrer\"><code>std::any</code></a> instead, wrapped in a <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>std::shared_ptr</code></a> for reference counting, to get the same effect that <code>Var</code> is trying to accomplish manually."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502982794, "post_id": 45724299, "comment_id": 78435509, "body": "What I am doing right now: 1. Get the value as base class (slicing is perfectly fine); 2. get ID from base class (membervariable of base class). 3. From the ID I know what the derived class is. 4. Retrieve the value again but as derived class.  It is not possible for me to find the derived class before getting as base. Unless I would try <code>dynamic_cast</code> it for any derived type till it is castable to find out the stored type."}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502982819, "post_id": 45724299, "comment_id": 78435527, "body": "Thank you, I will have a look into them"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 1, "creation_date": 1502987776, "post_id": 45724299, "comment_id": 78438842, "body": "@Sheldon: what you describe will not work. If you store a <i>copy</i> of an object, a <code>Derived</code> object MUST be stored as <code>Derived</code> in order to get back a valid <code>Derived</code>. If you store it as a <i>sliced</i> <code>Base</code>, you CANNOT get a valid <code>Derived</code> back! No amount of casting will make that right. Slicing DESTROYS the <code>Derived</code> data, leaving ONLY the <code>Base</code> data. If you want to store a <code>Derived</code> object as a <code>Base</code> so you can retrieve the <code>Derived</code> later, you CANNOT store a <i>copy</i> of the object, you MUST store <i>a <code>Base*</code> pointer to the original <code>Derived</code> object</i>. Which is what all standard smart pointers do"}, {"owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502997256, "post_id": 45724299, "comment_id": 78443928, "body": "it does work and that is because what you just described is not what I described. I am storing as the derived"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1502997590, "post_id": 45724299, "comment_id": 78444084, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/152193/discussion-between-remy-lebeau-and-sheldon\">continue this discussion in chat</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "edited": false, "score": 0, "creation_date": 1504628425, "post_id": 45724299, "comment_id": 79079166, "body": "@Sheldon: your test case does not even compile: &quot;<i>error: invalid initialization of non-const reference of type \u2018Var&amp;\u2019 from an rvalue of type \u2018Var\u2019</i>&quot; You are passing an rvalue to <code>get()</code>, which does not accept an rvalue as input. On a side note, there is a small typo in my answer. For the standalone 2-param <code>swap()</code>, the <code>v2</code> parameter needs to be a <code>Var&amp;</code> reference. I fixed that, but it doesn&#39;t apply to this example."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1504628100, "last_edit_date": 1504628100, "creation_date": 1502925105, "answer_id": 45724299, "question_id": 45723676, "link": "https://stackoverflow.com/questions/45723676/c-custom-smart-pointer/45724299#45724299", "title": "C++ Custom Smart Pointer", "body": "<p>Three big problems I see with your code are:</p>\n\n<ol>\n<li><p>you are storing the allocated object pointer as a <code>void*</code>, and then calling <code>delete</code> on it as-is.  That will not call the object's destructor.  You must type-cast the <code>void*</code> back to the original type before calling <code>delete</code>, but you can't do since you have lost the type info after the <code>Var</code> constructor exits.</p></li>\n<li><p>you have separated the object pointer and the reference counter from each other.  They should be kept together at all times.  Best way to do that is to store them in a <code>struct</code>, and then allocate and pass that around as needed.</p></li>\n<li><p>your <code>operator=</code> is calling <code>this-&gt;~Var()</code>, which is completely wrong.  Once you do that, the object pointed to by <code>this</code> is no longer valid!  You need to keep the instance alive, so simply decrement its current reference counter, freeing its stored object if needed, and then copy the pointers from the source <code>Var</code> and increment that reference counter.</p></li>\n</ol>\n\n<p>Try this alternate implementation instead (<a href=\"http://ideone.com/5oFWS6\" rel=\"nofollow noreferrer\">Live Demo</a>):</p>\n\n<pre><code>class Var\n{\nprivate:\n    struct controlBlockBase\n    {\n        unsigned short uses;    \n\n        controlBlockBase() : uses(1) { }\n        virtual ~controlBlockBase() { }\n    };\n\n    template &lt;class K&gt;\n    struct controlBlockImpl : controlBlockBase\n    {\n        K value;\n        controlBlockImpl(const K &amp;val) : controlBlockBase(), value(val) {}\n    };\n\n    controlBlockBase *cb;\n\npublic:\n    Var() : cb(nullptr) { }\n\n    template&lt;typename K&gt;\n    Var(const K &amp;value) : cb(new controlBlockImpl&lt;K&gt;(value)) { }\n\n    Var(const Var &amp;obj) : cb(obj.cb) {\n        if (cb) {\n            ++(cb-&gt;uses);\n        }\n    }\n\n    Var(Var &amp;&amp;obj) : cb(nullptr) {\n        obj.swap(*this);\n    }\n\n    ~Var() {\n        if ((cb) &amp;&amp; ((cb-&gt;uses -= 1) &lt;= 0)) {\n            delete cb;\n            cb = nullptr;\n        }\n    }\n\n    Var&amp; operator=(const Var&amp; obj) {\n        if (this != &amp;obj) {\n            Var(obj).swap(*this);\n        }\n        return *this;\n    }\n\n    Var&amp; operator=(Var &amp;&amp;obj) {\n        obj.swap(*this);\n        return *this;\n    }\n\n    /* or, the two above operator= codes can be\n    merged into a single implementation, where\n    the input parameter is passed by non-const\n    value and the compiler decides whether to use\n    copy or move semantics as needed:\n\n    Var&amp; operator=(Var obj) {\n        obj.swap(*this);\n        return *this;\n    }    \n    */\n\n    void swap(Var &amp;other)\n    {\n        std::swap(cb, other.cb);\n    }\n\n    unsigned short getUses() const {\n        return (cb) ? cb-&gt;uses : 0;\n    }\n\n    template&lt;class K&gt;\n    K* getAs() {\n        if (!cb) return nullptr;\n        return &amp;(dynamic_cast&lt;controlBlockImpl&lt;K&gt;&amp;&gt;(*cb).value);\n    }\n};\n\nvoid swap(Var &amp;v1, Var v2) {\n    v1.swap(v2);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong>: That being said, what <code>Var</code> is doing is basically the same effect as using a <a href=\"http://en.cppreference.com/w/cpp/utility/any\" rel=\"nofollow noreferrer\"><code>std::any</code></a> wrapped in a <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>std::shared_ptr</code></a>, so you may as well just use those instead (<code>std::any</code> is in C++17 and higher only, use <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/boost/any.html\" rel=\"nofollow noreferrer\"><code>boost::any</code></a> for earlier versions):</p>\n\n<pre><code>class Var\n{\nprivate:\n    std::shared_ptr&lt;std::any&gt; ptr;\n\npublic:\n    template&lt;typename K&gt;\n    Var(const K &amp;value) : ptr(std::make_shared&lt;std::any&gt;(value)) { }\n\n    void swap(Var &amp;other) {\n        std::swap(ptr, other.ptr);\n    }\n\n    long getUses() const {\n        return ptr.use_count();\n    }\n\n    template&lt;class K&gt;\n    K* getAs() {\n        return any_cast&lt;K&gt;(ptr.get());\n    }\n};\n\nvoid swap(Var &amp;v1, Var &amp;v2) {\n    v1.swap(v2);\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5330989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec83737ef99043fe6d27368e3e588cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/5330989/sheldon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 1, "accepted_answer_id": 45724299, "answer_count": 1, "score": 1, "last_activity_date": 1504628100, "creation_date": 1502920862, "last_edit_date": 1592644375, "question_id": 45723676, "link": "https://stackoverflow.com/questions/45723676/c-custom-smart-pointer", "title": "C++ Custom Smart Pointer", "body": "<p>Recently I tried to implement my own version of a smart pointer. The implementation looks a bit like the following:</p>\n<pre><code>class Var {\nprivate:\n    void* value;\n    unsigned short* uses;\npublic:\n    Var() : value(nullptr), uses(new unsigned short(1)) { }\n    template&lt;typename K&gt;\n    Var(K value) : value((void*)new K(value)), uses(new unsigned short(1)) { }\n    Var(const Var &amp;obj) {\n        value = obj.value;\n        (*(uses = obj.uses))++;\n    }\n    ~Var() {\n        if (value == nullptr &amp;&amp; uses == nullptr) return;\n        if (((*uses) -= 1) &lt;= 0) {\n            delete value;\n            delete uses;\n            value = uses = nullptr;\n        }\n    }\n    Var&amp; operator=(const Var&amp; obj) {\n        if (this != &amp;obj) {\n            this-&gt;~Var();\n            value = obj.value;\n            (*(uses = obj.uses))++;\n        }\n        return *this;\n    }\n};\n</code></pre>\n<p>The implementation should be straight forward, as <code>value</code> holds the pointer and <code>uses</code> counts the references.<br />\nPlease note the pointer is stored as a <code>void*</code> and the pointer class is not fixed to certain (generic) type.</p>\n<h2>The Problem</h2>\n<p>Most of the time the smart pointer does it's job... the exception being the following:</p>\n<pre><code>class C {\npublic:\n    Var var;\n    C(Var var) : var(var) {}\n};\nvoid test() {\n    std::string string = std::string(&quot;Heyo&quot;);\n    Var var1 = Var(string);\n    C c = C(var1);\n    Var var2 = Var(c);\n}\nvoid main() {\n    test();\n}\n</code></pre>\n<p>When running that code the very first instance, <code>var1</code>, does not get deleted after <code>test</code> has run.<br />\nYes, using a <code>void*</code> is not exactly the finest of methods. Yet lets not get off topic. The code compiles perfectly fine (if one might question my use of sub-assign operator). And if the error would be in the deletion of a <code>void*</code> the reference counter, <code>uses</code>, would be deleted but it is not.<br />\nI have checked with the destructors before and they all get called as they should.<br />\nDo also note that the programm runs without errors.</p>\n<p>Thank You all in advance,<br />\nSheldon</p>\n"}, {"tags": ["c++", "msbuild"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502920896, "post_id": 45723634, "comment_id": 78405178, "body": "Are you sure that your library has static (.lib) library that is not just an import library?"}, {"owner": {"reputation": 10770, "user_id": 852063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80fd1d68d0d2ae503cf5870e29fecae5?s=128&d=identicon&r=PG&f=1", "display_name": "Amani", "link": "https://stackoverflow.com/users/852063/amani"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502923041, "post_id": 45723634, "comment_id": 78405833, "body": "@VTT, the static library (.lib) is also built along the course the same build process."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502924128, "post_id": 45723634, "comment_id": 78406153, "body": "But you&#39;ve wrote &quot;The project uses a pre-compiled library with both dynamic (.dll) and static (.lib) libraries.&quot;"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502924314, "post_id": 45723634, "comment_id": 78406202, "body": "If a <i>single</i> project and configuration is creating a <code>.lib</code> and <code>.dll</code> at the same time, the <code>.lib</code> is almost certainly only an import library for the DLL, and not a standalone static library. Normally the static library is set to be built using a different configuration (E.g. a project might have a <code>Debug Static</code> and <code>Debug DLL</code> or similar configuration names). Linking to the &quot;static&quot; import library will always result in needing the DLL at run time, it doesn&#39;t actually contain the code."}, {"owner": {"reputation": 10770, "user_id": 852063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80fd1d68d0d2ae503cf5870e29fecae5?s=128&d=identicon&r=PG&f=1", "display_name": "Amani", "link": "https://stackoverflow.com/users/852063/amani"}, "edited": false, "score": 0, "creation_date": 1502924450, "post_id": 45723634, "comment_id": 78406230, "body": "Yes, by pre-compiled I meant the static libraries are built first before the executable. Infact these are two different projects with a single Python script that configure and build one after the other by calling CMake and MSBuild."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1502957052, "post_id": 45723634, "comment_id": 78416885, "body": "Don&#39;t you have to tell CMake to create a static library (i.e. <code>add_library(mylib STATIC ${MYSOURCES}</code>), instead of MSbuild?"}], "owner": {"reputation": 10770, "user_id": 852063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/80fd1d68d0d2ae503cf5870e29fecae5?s=128&d=identicon&r=PG&f=1", "display_name": "Amani", "link": "https://stackoverflow.com/users/852063/amani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1096, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1502920625, "creation_date": 1502920625, "question_id": 45723634, "link": "https://stackoverflow.com/questions/45723634/how-to-force-static-linking-with-msbuild", "title": "How to force static linking with MSBuild", "body": "<p>I have C++ project that is configured by using CMake for producing Visual Studio 2017 project files (.vcxproj) that are then used for building using <code>MSBuild</code> from the command line. The project uses a pre-compiled library with both dynamic (.dll) and static (.lib) libraries. My attempt to build has always produced a dynamically linked executable. How can I force <code>MSBuild</code> to use static libraries (.lib)? Are there any command line flags that need to be passed to <code>MSBuild</code> for this?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 4, "creation_date": 1502919968, "post_id": 45723498, "comment_id": 78404813, "body": "Why do you need to allocate 18446744073709551616 bytes? That&#39;s more than 18k petabytes..."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1502920611, "post_id": 45723498, "comment_id": 78405082, "body": "check the value of <code>Array</code> after the call to <code>malloc</code>; I suspect it to be <code>NULL</code> as I don&#39;t think that your system can allocate that amount of memory."}, {"owner": {"reputation": 17, "user_id": 7186543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5581a77bf2bb85a5e5b03ae0ac7dda2?s=128&d=identicon&r=PG&f=1", "display_name": "gonskabalbinka", "link": "https://stackoverflow.com/users/7186543/gonskabalbinka"}, "edited": false, "score": 0, "creation_date": 1502920621, "post_id": 45723498, "comment_id": 78405086, "body": "This is the max value of unsigned long long int"}, {"owner": {"reputation": 429, "user_id": 2916264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AsEPd.jpg?s=128&g=1", "display_name": "Tomas Dittmann", "link": "https://stackoverflow.com/users/2916264/tomas-dittmann"}, "edited": false, "score": 0, "creation_date": 1502920725, "post_id": 45723498, "comment_id": 78405122, "body": "The next error would be that you have to divide your allocated size by the size of an unsigned long long"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1502920867, "post_id": 45723498, "comment_id": 78405168, "body": "@gonskabalbinka, the theoretical maximum amount of memory that a desktop computer program can use these days is 140737488355328 bytes, which is more or less 100,000 smaller than the max value of unsigned long long int. Do you know how much RAM your computer has? I suspect that it&#39;s another 10,000 times smaller than the theoretical maximum..."}, {"owner": {"reputation": 17, "user_id": 7186543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5581a77bf2bb85a5e5b03ae0ac7dda2?s=128&d=identicon&r=PG&f=1", "display_name": "gonskabalbinka", "link": "https://stackoverflow.com/users/7186543/gonskabalbinka"}, "edited": false, "score": 0, "creation_date": 1502920896, "post_id": 45723498, "comment_id": 78405176, "body": "It&#39;s fine system can not allocate the memory"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502921644, "post_id": 45723498, "comment_id": 78405395, "body": "Why is Borland C++ involved at all in this in any capacity? What&#39;s the motivation behind using that historical relic? This code is just plain strange. How many eternities are you prepared to wait for that loop to finish? At a billion writes per second that will take <b>five hundred and eighty for years</b> to finish even if you did have that much memory, which you don&#39;t and never will."}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 7078289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lho5G.png?s=128&g=1", "display_name": "Siech0", "link": "https://stackoverflow.com/users/7078289/siech0"}, "is_accepted": false, "score": 1, "last_activity_date": 1502945061, "last_edit_date": 1502945061, "creation_date": 1502943109, "answer_id": 45726457, "question_id": 45723498, "link": "https://stackoverflow.com/questions/45723498/long-long-int-array-pointers-arithmetics-of-this-array/45726457#45726457", "title": "long long int array pointers arithmetics of this array", "body": "<p>The issue you're facing is due to the fact that malloc cannot possibly return a valid pointer to a block of memory that's is of the requested size due to memory constraints your system is faced with, thus malloc does what it normally does when it cannot allocate the desired memory -- it returns nullptr. (<a href=\"http://www.cplusplus.com/reference/cstdlib/malloc/\" rel=\"nofollow noreferrer\">malloc reference here</a>)</p>\n\n<p>The most relevant portion of the web-page linked is the following:</p>\n\n<blockquote>\n  <p>Return Value:\n  On success, a pointer to the memory block allocated by the function.\n  The type of this pointer is always void*, which can be cast to the desired type of data pointer in order to be dereferenceable.\n  <strong>If the function failed to allocate the requested block of memory, a null pointer is returned.</strong></p>\n</blockquote>\n\n<p>The reason why you are getting an access violation error is due to the fact that you are trying to deference a pointer that is pointing to a null (hence invalid) location in memory.</p>\n\n<p>In the future, I recommend you try to allocate more reasonably sized blocks of memory (For instance, 1kb, 1mb etc). If you wish to use an unsigned long long int you should perhaps look into creating something pertaining to math instead of memory manipulation.</p>\n\n<p><strong>Addendum:</strong>\nIf you want to get the max value for the type you should have done something like the following:\n<code>std::numeric_limits&lt;unsigned long long int&gt;::max();</code> as noted by iBug, the number you input undergoes unsigned integer overflow. Integer overflow for unsigned integers is a defined behavior so the actual value of the magic value 18446744073709551616 is 0; you are malloc'ing 0 bytes.</p>\n\n<p>The behavior for malloc'ing 0 bytes is the following (As per the c standard):</p>\n\n<blockquote>\n  <p>If the size of the space requested is zero, the behavior is implementation defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that <strong>the returned pointer shall not be used to access an object</strong>.</p>\n</blockquote>\n\n<p><strong>You still cannot deference the pointer returned or use it as an object.</strong></p>\n\n<p><strong>As an aside:</strong> <code>*(Array + i) = i;</code> is equivalent to <code>Array[i] = i;</code> or even <code>i[Array] = i;</code> :)</p>\n"}, {"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 0, "last_activity_date": 1502943344, "creation_date": 1502943344, "answer_id": 45726484, "question_id": 45723498, "link": "https://stackoverflow.com/questions/45723498/long-long-int-array-pointers-arithmetics-of-this-array/45726484#45726484", "title": "long long int array pointers arithmetics of this array", "body": "<p><code>unsigned long long</code> is <strong>non-negative 64-bit</strong> integer, its highest possible value is 2<sup>64</sup>-1 = 1844674407370955161<strong>5</strong>. the compiler may not have known what you meant by 1844674407370955161<strong>6</strong> (value overflowed).</p>\n\n<p>Also, 2<sup>64</sup> equals to 16 EB, or 16,777,216 TB. I don't know where such a huge storage is available, even if it's not RAM.</p>\n\n<p>All <code>malloc</code> can do is finding that the requested size is <em>too huge</em> to allocate and return you a null pointer. Then when you're trying to access a null pointer, you get an \"Access Violation\" error.</p>\n"}], "owner": {"reputation": 17, "user_id": 7186543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5581a77bf2bb85a5e5b03ae0ac7dda2?s=128&d=identicon&r=PG&f=1", "display_name": "gonskabalbinka", "link": "https://stackoverflow.com/users/7186543/gonskabalbinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502945061, "creation_date": 1502919881, "last_edit_date": 1502920373, "question_id": 45723498, "link": "https://stackoverflow.com/questions/45723498/long-long-int-array-pointers-arithmetics-of-this-array", "title": "long long int array pointers arithmetics of this array", "body": "<p>I have a problem with below code:</p>\n\n<pre><code>#include &lt;iostream.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n        unsigned long long int i,j;\n        unsigned long long int *Array;\n\n        i=j=0;\n        Array=(unsigned long long int*)malloc(18446744073709551616);\n\n        for(i=0ULL;i&lt;18446744073709551616;i++)\n                *(Array+i)=i;\n        std::cin&gt;&gt;j;\n        std::cout&lt;&lt;*(Array+j);\n        return 0;\n}\n</code></pre>\n\n<p>My compiler (Borland C++ builder 6.0) gives me an Access Violation Error. There are also warnings on the stage of compiling the program. I have never used <code>unsigned long long int</code>, so I have no idea where is the problem in this case.</p>\n"}, {"tags": ["c++", "dynamic-cast"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502920817, "post_id": 45723469, "comment_id": 78405148, "body": "As a side note, if you do not want a &quot;Is-a&quot; relationship, use composition instead of inheritance."}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502920080, "post_id": 45723509, "comment_id": 78404875, "body": "(Also, as always, because the standard says so, but I guessed that was not the point of the question.)"}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502920981, "post_id": 45723509, "comment_id": 78405201, "body": "Thanks for your answer, but I still cannot understand why it displays Derived 3. I understood that every Derived 3 is a derived 2, a derived and a base, but I don&#39;t understand why the b pointer which is not a derived 2 calls the display method from derived 3 class."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502921690, "post_id": 45723509, "comment_id": 78405406, "body": "@TheDarkKnight Edited in some extra example and explanation, does that help?"}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502922096, "post_id": 45723509, "comment_id": 78405529, "body": "It&#39;s getting really late here and I was really on this problem for so so long I can&#39;t really concentrate anymore... I understand what you wrote in the example, but based on that principle, my code shoudn&#39;t display anything on the screen, I explained it the the second code I posted. There it works as it should be. I guess it&#39;s something related to that virtual inheritance which fixed the diamond issue but messes with dynamic_cast..."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502922571, "post_id": 45723509, "comment_id": 78405674, "body": "@TheDarkKnight In your second piece of code, <code>Derived3</code> does not inherit from <code>Derived2</code>, so the cast fails as it should. <code>Derived3</code> no longer is a <code>Derived2</code> after the change."}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502923049, "post_id": 45723509, "comment_id": 78405835, "body": "So basically the dynamic_cast does not convert anything? It just tells you if b is or not a derived 2 and the aux still points to derived 3 afterall?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502923214, "post_id": 45723509, "comment_id": 78405880, "body": "@TheDarkKnight Yes; as I wrote in my last comment, the <code>dynamic_cast</code> just changes the type of the pointer, not of the type object it points to. (It does that after checking if this is a valid cast, it&#39;s mostly useful for downcasting like <code>dynamic_cast&lt;Derived*&gt;(somePointerToBase)</code>; which, in turn, is a hint your design is broken.)"}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502924718, "post_id": 45723509, "comment_id": 78406298, "body": "so what I understood is that dynamic_cast works like this. If there is no relationship between the Base pointer, let&#39;s say from my example &quot;b&quot; and the derived one it won&#39;t display anything(like I did with my second code). If there is a relationship between the Base pointer and  and the derived one like it was in my first code the pointer will still point to the derived 3 and not convert to derived 2.  And the only way it works to tell you exactly whether the b is a derived type or not is actually to have a pointer initialized and pointing to the exact derived class you&#39;re checking in &lt;&gt;"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502925293, "post_id": 45723509, "comment_id": 78406458, "body": "@TheDarkKnight It&#39;s not flawless wording, but I think you got that cast part mostly right. Do you want an example on how to get <code>&quot;Derived 2&quot;</code> as the output from a <code>Base*</code>?"}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502925656, "post_id": 45723509, "comment_id": 78406540, "body": "Thanks, yes, I would want and example. A modification to my first code so that it will show derived 2 will be ideal.  Thanks for your help, I really appreciate!"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502925858, "post_id": 45723509, "comment_id": 78406583, "body": "@TheDarkKnight You can just slice away the <code>Derived3</code>-part of the object by making a new, actual <code>Derived2</code> object and call the method on that. See <a href=\"https://wandbox.org/permlink/OH6sRaUZI0cb6TV6\" rel=\"nofollow noreferrer\">wandbox.org/permlink/OH6sRaUZI0cb6TV6</a> And you are welcome, that&#39;s why we are here. :)"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 3, "last_activity_date": 1502921440, "last_edit_date": 1502921440, "creation_date": 1502919935, "answer_id": 45723509, "question_id": 45723469, "link": "https://stackoverflow.com/questions/45723469/dynamic-cast-not-showing-the-right-object-type/45723509#45723509", "title": "Dynamic_cast not showing the right object type", "body": "<p>Inheritance is a <em>\"Is-a\"</em> relationship.</p>\n\n<p>Every <code>Derived</code> is both a <code>Derived</code> and a <code>Base</code>. By that pattern, every <code>Derived3</code> is a <code>Derived3</code>, a <code>Derived2</code>, a <code>Derived</code> and a <code>Base</code> at the same time.</p>\n\n<p>It would thus not make sense for that cast to fail.</p>\n\n<p>The output is then finally the result of a normal virtual function call on a <code>Derived2*</code>. This is no different than in the most trivial example of inheritance, like in this snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct A {\n    virtual void fun() const {\n        std::cout &lt;&lt; 'A';\n    }\n};\n\nstruct B : A {\n    void fun() const {\n        std::cout &lt;&lt; 'B';\n    }\n};\n\nint main () {\n    const A &amp;a = B();\n    a.fun();            // prints 'B'\n}\n</code></pre>\n\n<p>If you have a pointer or reference to some base class, a virtual function call will resolve to the actual type of the object it is called on. In your case, that's a <code>Derived2*</code> pointing to a child-class of type <code>Derived3</code>, so the function is looked up in the latter.</p>\n\n<p>Keep in mind that the <code>dynamic_cast</code> only changes the type of the pointer, not the type of the object it points to!</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502921299, "post_id": 45723544, "comment_id": 78405301, "body": "@R Sahu And yeah, since display() is a virtual method, shouldn&#39;t be normal for the program to call the one pointed by the *b pointer, why seems to be Derived2? Why is the object still considered as Derived 3 if I&#39;m asking if it is Derived 2?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502921481, "post_id": 45723544, "comment_id": 78405343, "body": "@TheDarkKnight, it is a <code>Derived2</code> also by virtue of it being a <code>Derived3</code>. The underlying object continues to be <code>Derived3</code> object. Using <code>dynamic_cast</code> to get a <code>Derived2*</code> to the object does not change that."}, {"owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502922705, "post_id": 45723544, "comment_id": 78405719, "body": "@R Sahu So you&#39;re saying that based on the design of the inheritance, even if they were 5,6,7 Derived classes from every one like this : Derived 1 from Base, Derived 2 from Derived 1, Derived 3 from Derived 2 etc. the underlying object will always be the last one in this case Derived 7? I mean, dynamic_cast works as I want only if I have multiple classes derived from the same base like : Derived  from Base, Derived 1 from Base etc. Because that&#39;s when the display function prints out the answer as it should be."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1502922903, "post_id": 45723544, "comment_id": 78405796, "body": "@TheDarkKnight, the underlying object will always be of the type you construct. If you use <code>Base* b = new Derived6;</code>, the underlying object will be <code>Derived6</code>. Just because <code>Derived7</code> is derived from <code>Derived6</code>, does not mean that the constructed object will always be of type <code>Derived7</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1502920125, "creation_date": 1502920125, "answer_id": 45723544, "question_id": 45723469, "link": "https://stackoverflow.com/questions/45723469/dynamic-cast-not-showing-the-right-object-type/45723544#45723544", "title": "Dynamic_cast not showing the right object type", "body": "<blockquote>\n  <p>However, it passed the condition and when it should print out the display() function from Derived2 class, it strangely displayes the one from the Derived3 class.</p>\n</blockquote>\n\n<p>That's because of dynamic dispatch. Remember that <code>display()</code> is declared to be a <code>virtual</code> member function. It continues to be a <code>virtual</code> member function for all the derived classes.</p>\n\n<p>Even though you cast the pointer from <code>Base*</code> to <code>Derived*</code>, the underlying object is still a <code>Derived3</code>. Hence, the dynamic dispatch mechanism calls <code>Derived3::display()</code>.</p>\n\n<p><code>Derived3::display()</code> will also be called if you use:</p>\n\n<pre><code>Base *b = new Derived3();\nb-&gt;display();\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8474859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34K5V.jpg?s=128&g=1", "display_name": "The Dark Knight", "link": "https://stackoverflow.com/users/8474859/the-dark-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45723509, "answer_count": 2, "score": 0, "last_activity_date": 1502921440, "creation_date": 1502919763, "last_edit_date": 1502920627, "question_id": 45723469, "link": "https://stackoverflow.com/questions/45723469/dynamic-cast-not-showing-the-right-object-type", "title": "Dynamic_cast not showing the right object type", "body": "<p>I spent a lot of time trying to figure out why my code displays \"Derived3\" after I run it and I cannot understand it at all. From what I have read here on many posts, dynamic_cast should somehow say whether a pointer (in this case b) is (in this case) Derived2 or not. However, it passed the condition and when it should print out the display() function from Derived2 class, it strangely displayes the one from the Derived3 class. I am just wondering why the program displays \"Derived 3\" instead of not showing anything, since b pointer is clearly not pointing to a Derived2 object.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Base\n{\n    int b;\n    public:\n    virtual void display()\n    {\n        cout&lt;&lt;\"Base\"&lt;&lt;endl;\n    }\n};\n\nclass Derived: virtual public Base{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived\"&lt;&lt;endl;\n    }\n};\n\nclass Derived2: virtual public Base{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived 2\"&lt;&lt;endl;\n    }\n};\n\nclass Derived3:public Derived,public Derived2{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived 3\"&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    Base *b = new Derived3();\n    Derived2 *aux = dynamic_cast&lt;Derived2*&gt;(b);\n    if(aux)\n    {\n        aux-&gt;display();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>However, after editing the code a little bit, it works as it should be.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Base\n{\n    int b;\n    public:\n    virtual void display()\n    {\n        cout&lt;&lt;\"Base\"&lt;&lt;endl;\n    }\n};\n\nclass Derived: public Base{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived\"&lt;&lt;endl;\n    }\n};\n\nclass Derived2: public Base{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived 2\"&lt;&lt;endl;\n    }\n};\n\nclass Derived3:public Base{\npublic:\n    void display()\n    {\n        cout&lt;&lt;\"Derived 3\"&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    Base *b = new Derived3();\n    Derived2 *aux = dynamic_cast&lt;Derived2*&gt;(b);\n    if(aux)\n    {\n        aux-&gt;display();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "opencv", "cmake"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1502920651, "post_id": 45723202, "comment_id": 78405097, "body": "Without your environment that is a guess game but from OpenCV side what means to be integrated with Qt is WITH_QT=ON, like: <a href=\"http://answers.opencv.org/question/22816/how-to-set-the-path-to-qt5-in-cmake/\" rel=\"nofollow noreferrer\">answers.opencv.org/question/22816/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6356989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dec5db4d442b0b50a037f74eafe5350?s=128&d=identicon&r=PG&f=1", "display_name": "PatrickAllenCooper", "link": "https://stackoverflow.com/users/6356989/patrickallencooper"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1502921445, "post_id": 45723202, "comment_id": 78405337, "body": "Thanks for the response, yes the WITH_QT=ON is required and so is the WITH_OPENGL=ON according to Qt&#39;s documentation. It also recommends disabling precompiled headers for some linking problems, though no variation on these seems to work."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1502922383, "post_id": 45723202, "comment_id": 78405616, "body": "Try with MS C++ compiler (free now) I guess, not even sure if that was ever tested with mingw. I built that on Mac and Linux with no problem."}, {"owner": {"reputation": 11, "user_id": 6356989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dec5db4d442b0b50a037f74eafe5350?s=128&d=identicon&r=PG&f=1", "display_name": "PatrickAllenCooper", "link": "https://stackoverflow.com/users/6356989/patrickallencooper"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1502982620, "post_id": 45723202, "comment_id": 78435396, "body": "Thanks, for whatever reason I was able get a clean compile using VS 14 2015 without the precompiled headers. Appreciate the recommendation!"}], "owner": {"reputation": 11, "user_id": 6356989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dec5db4d442b0b50a037f74eafe5350?s=128&d=identicon&r=PG&f=1", "display_name": "PatrickAllenCooper", "link": "https://stackoverflow.com/users/6356989/patrickallencooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502918488, "creation_date": 1502918488, "question_id": 45723202, "link": "https://stackoverflow.com/questions/45723202/cant-make-opencv-for-qt", "title": "Can&#39;t Make Opencv for Qt", "body": "<p>I've been following the guide posted here <a href=\"https://wiki.qt.io/How_to_setup_Qt_and_openCV_on_Windows\" rel=\"nofollow noreferrer\">https://wiki.qt.io/How_to_setup_Qt_and_openCV_on_Windows</a> for setting up opencv for Qt.\nEverything works as it should until the mingw32-make command where the compile fails with the same error:</p>\n\n<p>Scanning dependencies of target opencv_core_pch_dephelp\n[ 31%] Building CXX object modules/core/CMakeFiles/opencv_core_pch_dephelp.dir/opencv_core_pch_dephelp.cxx.obj\n[ 31%] Linking CXX static library ....\\lib\\libopencv_core_pch_dephelp.a\n[ 31%] Built target opencv_core_pch_dephelp\nScanning dependencies of target pch_Generate_opencv_core\nmingw32-make[2]: <strong>* No rule to make target 'lib/libopencv_core_pch_dephelp.a', needed by 'modules/core/precomp.hpp.gch/opencv_core_Release.gch'.  Stop.\nCMakeFiles\\Makefile2:1688: recipe for target 'modules/core/CMakeFiles/pch_Generate_opencv_core.dir/all' failed\nmingw32-make[1]: *</strong> [modules/core/CMakeFiles/pch_Generate_opencv_core.dir/all] Error 2\nMakefile:161: recipe for target 'all' failed\nmingw32-make: *** [all] Error 2</p>\n\n<p>This issue has been logged before here <a href=\"https://stackoverflow.com/questions/16111479/error-while-compiling-opencv-for-qt\">error while compiling opencv for QT</a>\nand here\n<a href=\"https://stackoverflow.com/questions/30171280/error-when-compiling-opencv-for-qt\">Error when compiling OpenCV for Qt</a>\nbut so far no definitive solution has been reported.\nMy OS is Windows 10 pro and I've been using the MinGW Makefiles generator with gcc and g++. Qt version is 5.9.1 and I've had the same issues with both opencv 3.3.0 and 3.2.0.</p>\n\n<p>Appreciate any help you can offer this newbie.</p>\n"}, {"tags": ["c++", "debugging", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502918629, "post_id": 45723179, "comment_id": 78404287, "body": "It should show the correct x depending on the scope you are currently inside. If it does not you should report a bug to microsoft. That is if someone can duplicate the behavior."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1502918775, "post_id": 45723179, "comment_id": 78404343, "body": "Can you please post <i>all</i> the code."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502918912, "post_id": 45723179, "comment_id": 78404399, "body": "That&#39;s what&#39;s happens when you <i>hide</i> variables using the same name for different variables in different scopes. However, using the VS2015 (and later, and earlier) I think you could just switch files, then using the cursor (pointer) you could select the variable from<code>Linkertest.cpp</code> and add a watch of it. Then it should reference the correct variable."}, {"owner": {"reputation": 100, "user_id": 7863842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aecfd9f39d1563ed855f39219101856?s=128&d=identicon&r=PG&f=1", "display_name": "MEHM-", "link": "https://stackoverflow.com/users/7863842/mehm"}, "edited": false, "score": 0, "creation_date": 1502920244, "post_id": 45723179, "comment_id": 78404941, "body": "This is all of the code, except for the Foobar.h file which contains only an extern for the ChangeX function."}, {"owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "edited": false, "score": 0, "creation_date": 1503903816, "post_id": 45723179, "comment_id": 78785280, "body": "@MEHM, I edit my answer, if possible, you could add your comment and vote the feedback I submitted for you, of course, use the VS2017 would be a workaround."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 7863842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aecfd9f39d1563ed855f39219101856?s=128&d=identicon&r=PG&f=1", "display_name": "MEHM-", "link": "https://stackoverflow.com/users/7863842/mehm"}, "edited": false, "score": 0, "creation_date": 1505317047, "post_id": 45793707, "comment_id": 79366049, "body": "Thanks, we will be switching to VS 2017 soon. Good to hear that issue is fixed!"}], "tags": [], "owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "is_accepted": true, "score": 1, "last_activity_date": 1503307857, "creation_date": 1503307857, "answer_id": 45793707, "question_id": 45723179, "link": "https://stackoverflow.com/questions/45723179/viewing-duplicate-named-global-variables-in-the-debugger/45793707#45793707", "title": "Viewing duplicate named global variables in the debugger?", "body": "<p>I test it using VS2015 and VS2017.</p>\n\n<p>The VS2015 really has this issue:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7lrzl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7lrzl.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it works well in VS2017 now:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wgW1L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wgW1L.png\" alt=\"enter image description here\"></a></p>\n\n<p>So for this issue, if possible, I suggest you use the VS2017 version.</p>\n\n<p>Of course, if you just have to use the VS2015, you could also report this feedback here:</p>\n\n<p><a href=\"https://connect.microsoft.com/VisualStudio/feedback/CreateFeedback.aspx\" rel=\"nofollow noreferrer\">https://connect.microsoft.com/VisualStudio/feedback/CreateFeedback.aspx</a></p>\n"}], "owner": {"reputation": 100, "user_id": 7863842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aecfd9f39d1563ed855f39219101856?s=128&d=identicon&r=PG&f=1", "display_name": "MEHM-", "link": "https://stackoverflow.com/users/7863842/mehm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 45793707, "answer_count": 1, "score": 1, "last_activity_date": 1503307857, "creation_date": 1502918406, "last_edit_date": 1503001249, "question_id": 45723179, "link": "https://stackoverflow.com/questions/45723179/viewing-duplicate-named-global-variables-in-the-debugger", "title": "Viewing duplicate named global variables in the debugger?", "body": "<p>I have 2 files with the following simple code.</p>\n\n<p>Linkertest.cpp </p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Foobar.h\"\n\nchar x = 5;\nchar y = 5;\n\nint main()\n{\n    ChangeX();\n    x = 'a';\n    return 0;\n}\n</code></pre>\n\n<p>and Foobar.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n\nint x;\n\nvoid ChangeX()\n{\n    x = -1;\n}\n</code></pre>\n\n<p>Foobar.h</p>\n\n<pre><code>#pragma once\n\nextern void ChangeX();\n</code></pre>\n\n<p>When stepping this code in the Visual Studio 2015 debugger, the debugger windows choose to display the value of <strong>int x</strong>; (Ignoring <strong>char x</strong>). (I understand this is not a good thing to do). Having a look at the disassembly (and map file) I can see that the linker correctly gave int x and char x separate memory allocations, and writes to them correctly. Does anyone know a way to get the debugger to display the value of char x ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "struct", "header-files", "typedef"], "comments": [{"owner": {"reputation": 895, "user_id": 6437863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23ecdeaad04ff4630f0efca39cee789?s=128&d=identicon&r=PG&f=1", "display_name": "vafylec", "link": "https://stackoverflow.com/users/6437863/vafylec"}, "edited": false, "score": 0, "creation_date": 1502918696, "post_id": 45723095, "comment_id": 78404307, "body": "The problem is that if any struct name applied to sizeof is invalid or undefined, the exe will not compile. Therefore to do sizeof for multiple structs in one exe, all the structs must be defined. [Response to a deleted comment.]"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1502920354, "post_id": 45723095, "comment_id": 78404989, "body": "Doesn&#39;t it also depend on the packing and how you declare the structs?  If a struct is a double, bool, double, bool, it will return a different size from a double, double, bool, bool depending on the packing."}, {"owner": {"reputation": 895, "user_id": 6437863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23ecdeaad04ff4630f0efca39cee789?s=128&d=identicon&r=PG&f=1", "display_name": "vafylec", "link": "https://stackoverflow.com/users/6437863/vafylec"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1502921139, "post_id": 45723095, "comment_id": 78405253, "body": "AFAIK x64 and x32, in Windows, have the same packing rules, the difference is that a Ptr/UPtr will be size 8 in x64 and size 4 in x32. So structs lacking a Ptr/UPtr should be the same in x64/x32, other structs will have different offsets/padding/sizes in x64/x32. -- Another complicating factor for structs that I&#39;ve just thought of is if conditions based on the Windows version number."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1502981561, "post_id": 45723095, "comment_id": 78434597, "body": "Maybe (big maybe) the following will help to find out which structures are defined: <a href=\"https://stackoverflow.com/questions/10711952/how-to-detect-existence-of-a-class-using-sfinae\" title=\"how to detect existence of a class using sfinae\">stackoverflow.com/questions/10711952/&hellip;</a> then you can create a program to check sizes only for defined structs."}, {"owner": {"reputation": 895, "user_id": 6437863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23ecdeaad04ff4630f0efca39cee789?s=128&d=identicon&r=PG&f=1", "display_name": "vafylec", "link": "https://stackoverflow.com/users/6437863/vafylec"}, "edited": false, "score": 0, "creation_date": 1503461872, "post_id": 45723095, "comment_id": 78618544, "body": "I tried the script, I could get it to work with some entities, but I couldn&#39;t get it to work with structs, although I don&#39;t have that much C++ experience. Much appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 895, "user_id": 6437863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23ecdeaad04ff4630f0efca39cee789?s=128&d=identicon&r=PG&f=1", "display_name": "vafylec", "link": "https://stackoverflow.com/users/6437863/vafylec"}, "is_accepted": true, "score": 0, "last_activity_date": 1555280772, "creation_date": 1555280772, "answer_id": 55680571, "question_id": 45723095, "link": "https://stackoverflow.com/questions/45723095/retrieve-a-list-of-structs-defined-in-a-header-file/55680571#55680571", "title": "retrieve a list of structs defined in a header file", "body": "<p>Here is some provisional code to list the structs in a header file (.h file) via AHK, and to then retrieve their sizes via C++. The list generated is not guaranteed to be 100% complete, but the script has proven quite effective at retrieving struct names. Tested on CommCtrl.h and WinUser.h.</p>\n\n<pre><code>;AHK v2 script\n\n#Warn\nListLines(\"Off\")\n\n;q:: ;list structs in a header file (.h file) (provisional script)\nvPath := \"C:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\um\\CommCtrl.h\"\n;vPath := \"C:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\um\\WinUser.h\"\nif !FileExist(vPath)\n{\n    MsgBox(\"error: file not found:`r`n\" vPath)\n    return\n}\nvText := FileRead(vPath)\nvDoGetNext := 0\nvTemp2 := \"\"\nvIndent := \"\"\nVarSetCapacity(vOutput, 1000000*2)\nVarSetCapacity(vListDefine, 1000000*2)\noDict := ComObjCreate(\"Scripting.Dictionary\")\n\n;get struct names from 'typedef struct' definitions\n;and store potential struct names from '#define' directives\nLoop Parse vText, \"`n\", \"`r\"\n{\n    vTemp := LTrim(A_LoopField) ;remove leading spaces/tabs\n    vTemp := RegExReplace(vTemp, \"[ `t]+\", \" \")\n    vTemp := RegExReplace(vTemp, \" //.*\")\n    if (SubStr(vTemp, 1, 7) = \"#define\")\n    {\n        ;ignore numeric definitions etc\n        if !RegExMatch(vTemp, \"[(\\\\\\-:\" Chr(34) \"]| \\d\")\n            vListDefine .= vTemp \"`r`n\"\n        continue\n    }\n\n    vTemp := A_LoopField\n    ;if (vPos := RegExMatch(vTemp, \"typedef\"))\n    if (vPos := RegExMatch(vTemp, \"typedef struct\"))\n    {\n        vTemp2 := vTemp\n        vIndent := SubStr(vTemp, 1, vPos-1)\n        vDoGetNext := 1\n    }\n    else if vDoGetNext\n    &amp;&amp; (SubStr(vTemp, 1, StrLen(vIndent)+1) = vIndent \"}\")\n    {\n        vTemp := RegExReplace(vTemp, \"^[} ]+|[,;].*\")\n        if !(vTemp = \"\")\n        &amp;&amp; !oDict.Exists(\"\" vTemp)\n        &amp;&amp; !(vTemp = \"DUMMYUNIONNAME\")\n        {\n            oDict.Item[\"\" vTemp] := 1\n            vOutput .= vTemp \"`r`n\"\n            ;vOutput .= vTemp2 \"`t\" vTemp \"`r`n\"\n        }\n        vDoGetNext := 0\n    }\n}\n\n;get struct names from stored '#define' directives\n;lines of the form '#define newname oldname'\nvOutput .= \"`r`n\"\nLoop Parse vListDefine, \"`n\", \"`r\"\n{\n    oTemp := StrSplit(A_LoopField, \" \")\n    if (oTemp.Length() = 3)\n    &amp;&amp; !oDict.Exists(\"\" oTemp.2) ;new name not seen before\n    &amp;&amp; oDict.Exists(\"\" oTemp.3) ;old name seen before\n    {\n        oDict.Item[\"\" oTemp.2] := 1\n        vOutput .= oTemp.2 \"`r`n\"\n    }\n}\n\n;get raw list of structs:\n;Clipboard := RTrim(vOutput, \"`r`n\") \"`r`n\"\n;MsgBox(vOutput)\n\nvList := vOutput\nVarSetCapacity(vOutput, StrLen(vList)*10*2)\nLoop Parse vList, \"`n\", \"`r\"\n{\n    vTemp := A_LoopField\n    if (vTemp = \"\")\n    {\n        vOutput .= \"`r`n\"\n        continue\n    }\n    vOutput .= \"std::cout &lt;&lt; \" Chr(34) vTemp \"=\" Chr(34) \" &lt;&lt; sizeof(\" vTemp \") &lt;&lt; std::endl;`r`n\"\n}\n\nClipboard := RTrim(vOutput, \"`r`n\") \"`r`n\"\noDict := \"\"\nMsgBox(\"done\")\nreturn\n</code></pre>\n\n<p>Example C++ code using code generated by the AHK script.</p>\n\n<pre><code>//structs get sizes\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Windows.h\"\n#include \"CommCtrl.h\"\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    std::cout &lt;&lt; \"TVITEMA=\" &lt;&lt; sizeof(TVITEMA) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"TVITEMW=\" &lt;&lt; sizeof(TVITEMW) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"TVITEM=\" &lt;&lt; sizeof(TVITEM) &lt;&lt; std::endl;\n    std::getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Note: another approach would be to retrieve unique strings from the header file, paste them into Visual Studio, wait for Visual Studio to colour the appropriate words, copy the list to WordPad, save as an rtf file, and parse the raw rtf for coloured words.</p>\n\n<p>Posted here also:<br>\n<a href=\"https://autohotkey.com/boards/viewtopic.php?f=75&amp;t=63624\" rel=\"nofollow noreferrer\">C++: list structs in a header file - AutoHotkey Community</a></p>\n"}], "owner": {"reputation": 895, "user_id": 6437863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23ecdeaad04ff4630f0efca39cee789?s=128&d=identicon&r=PG&f=1", "display_name": "vafylec", "link": "https://stackoverflow.com/users/6437863/vafylec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 55680571, "answer_count": 1, "score": 1, "last_activity_date": 1555280772, "creation_date": 1502918045, "last_edit_date": 1503461707, "question_id": 45723095, "link": "https://stackoverflow.com/questions/45723095/retrieve-a-list-of-structs-defined-in-a-header-file", "title": "retrieve a list of structs defined in a header file", "body": "<p>I would like to retrieve a list of all the structs in a header file, e.g. a selection of structs in CommCtrl.h:</p>\n\n<pre><code>LVCOLUMNW,LVITEMW,REBARINFO,TVITEMW\n</code></pre>\n\n<p>This is related to the wider goal of starting with a list of structs, and retrieving their sizeof values:</p>\n\n<pre><code>[STRUCT=sizeof64:sizeof32]\nLVCOLUMNW=56:44\nLVITEMW=88:60\nREBARINFO=16:12\nTVITEMW=56:40\n</code></pre>\n\n<p>Currently I compile cpp files as x64/x32 exes to determine whether a header file contains a struct (blanks are returned on failure), and to determine a struct's sizeof value:</p>\n\n<pre><code>#define UNICODE 1\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nint main()\n{\n    std::cout &lt;&lt; sizeof(BITMAPINFOHEADER) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>If I could refer to struct names dynamically, or ignore invalid struct names, then I could do this far more efficiently.</p>\n\n<p>Ultimately I would like to apply the code above to this list of 19486 'Win words':\n<a href=\"http://katahiromz.web.fc2.com/win32/winwords.txt\" rel=\"nofollow noreferrer\">http://katahiromz.web.fc2.com/win32/winwords.txt</a></p>\n\n<p>Another idea would be to retrieve a list of all of the currently defined struct names in a Visual Studio project, if this is possible.</p>\n"}, {"tags": ["c++", "mingw32"], "comments": [{"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1502918102, "post_id": 45723084, "comment_id": 78404080, "body": "what is your gcc version? gcc --version to get it. Usually that error happens because of old gcc versions."}, {"owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "reply_to_user": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1502918205, "post_id": 45723084, "comment_id": 78404122, "body": "gcc (MinGW.org GCC-6.3.0-1) 6.3.0"}, {"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1502918289, "post_id": 45723084, "comment_id": 78404159, "body": "Can you check this and see if it&#39;s the case: <a href=\"https://stackoverflow.com/a/38786190/7735711\">stackoverflow.com/a/38786190/7735711</a>"}, {"owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "reply_to_user": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1502918435, "post_id": 45723084, "comment_id": 78404223, "body": "still getting same error"}, {"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1502918607, "post_id": 45723084, "comment_id": 78404278, "body": "My last hope is this: <a href=\"https://stackoverflow.com/a/25995788/7735711\">stackoverflow.com/a/25995788/7735711</a> apparently messed up $PATH can achieve this error too. If not, I don&#39;t know anymore."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8998471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0f96f085e1e648aa4f362137ee9257?s=128&d=identicon&r=PG&f=1", "display_name": "Cube.Lord", "link": "https://stackoverflow.com/users/8998471/cube-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1520272369, "creation_date": 1520272369, "answer_id": 49116601, "question_id": 45723084, "link": "https://stackoverflow.com/questions/45723084/cmake-the-c-compiler-unable-to-compile-simple-test-program/49116601#49116601", "title": "CMake, the c compiler unable to compile simple test program", "body": "<p>Sometimes there are problems if the directory has any spaces in it's name, like yours has in \"Program files\". Try to copy the sdk to another location without spaces and see what happens</p>\n"}], "owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4082, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520272369, "creation_date": 1502917996, "question_id": 45723084, "link": "https://stackoverflow.com/questions/45723084/cmake-the-c-compiler-unable-to-compile-simple-test-program", "title": "CMake, the c compiler unable to compile simple test program", "body": "<p>I'm trying to compile my project using cmake with mingw but getting error:</p>\n\n<pre><code>     cmake -G \"MinGW Makefiles\" ../\n-- The C compiler identification is GNU 6.3.0\n-- The CXX compiler identification is GNU 6.3.0\n-- Check for working C compiler: D:/mingw/bin/gcc.exe\n-- Check for working C compiler: D:/mingw/bin/gcc.exe -- broken\nCMake Error at C:/Program Files/CMake/share/cmake-3.9/Modules/CMakeTestCCompiler.cmake:51 (message):\n  The C compiler \"D:/mingw/bin/gcc.exe\" is not able to compile a simple test\n  program.\n</code></pre>\n\n<p>Where is the problem?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 6, "creation_date": 1502917638, "post_id": 45722977, "comment_id": 78403888, "body": "If you are to pursue a career that of a C++ developer then you are well advised to walk away from all those bogus online <i>programming competition</i> sites. They spread toxic knowledge and you will not learn anything from them. Read C++ books instead. Here is a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">nice list</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1502917769, "post_id": 45722977, "comment_id": 78403952, "body": "Search your favorite C++ reference for <a href=\"http://en.cppreference.com/w/cpp/algorithm/rotate\" rel=\"nofollow noreferrer\"><code>std::rotate</code></a>."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 4, "creation_date": 1502917863, "post_id": 45722977, "comment_id": 78403991, "body": "<code>long a[1000000];</code> exhausts your stack most probably."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502917896, "post_id": 45722977, "comment_id": 78404002, "body": "@user0042: Why would that only apply to large inputs?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1502917997, "post_id": 45722977, "comment_id": 78404035, "body": "@Scott Because OP was trying to adapt the array sizes accordingly?"}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1502918008, "post_id": 45722977, "comment_id": 78404040, "body": "Take as input <code>1 1000000 1</code>. Think about how many steps your program will take to complete, and how you can improve that. Then do this for increasing values of <code>n</code>."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1502918060, "post_id": 45722977, "comment_id": 78404060, "body": "Variable names like <code>long i,j,n,k,l,m,x</code>, though being syntactically correct, make a program very hard to read. I&#39;d suggest to name variables after the role they play in your program, e.g. something like <code>nrOfRows</code>, <code>row</code>, ..."}, {"owner": {"reputation": 3, "user_id": 4958890, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206607809099641/picture?type=large", "display_name": "Upmanyu Tyagi", "link": "https://stackoverflow.com/users/4958890/upmanyu-tyagi"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502918068, "post_id": 45722977, "comment_id": 78404062, "body": "@user0042 I replaced that with dynamic allocation but that still does not help."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502918171, "post_id": 45722977, "comment_id": 78404108, "body": "@UpmanyuTyagi Use a <code>std::vector</code> instead. Though regarding the runtime you may have some other issues."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1502918176, "post_id": 45722977, "comment_id": 78404112, "body": "If the problem being <code>exhausting stack</code> as @G.Sliepen said then you can allocate the array on the <code>heap</code> using <code>new</code>."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1502918231, "post_id": 45722977, "comment_id": 78404130, "body": "@Raindrop7 :.-( Please no."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502918291, "post_id": 45722977, "comment_id": 78404162, "body": "@user0042: What you mean? You mean using vectors instead?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1502918425, "post_id": 45722977, "comment_id": 78404217, "body": "@Raindrop7 Sure. I&#39;d never recommend anyone to use <code>new</code> unless that&#39;s absolutely necessary to apply for a solution (e.g. your own allocator implementations or such)."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502918736, "post_id": 45722977, "comment_id": 78404325, "body": "@user0042: Yes that is it. but for some reasons for example for educational reason we can do that on our own. But since there are many facilities that C++ offers us we needn&#39;t to re-invent the wheel."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4958890, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206607809099641/picture?type=large", "display_name": "Upmanyu Tyagi", "link": "https://stackoverflow.com/users/4958890/upmanyu-tyagi"}, "edited": false, "score": 0, "creation_date": 1503385134, "post_id": 45725545, "comment_id": 78579091, "body": "Thanks a lot mate!"}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1502935625, "creation_date": 1502935625, "answer_id": 45725545, "question_id": 45722977, "link": "https://stackoverflow.com/questions/45722977/rotation-of-integers-stored-in-an-array/45725545#45725545", "title": "Rotation of integers stored in an array", "body": "<p>Some notes that can be used to speed things up:</p>\n\n<ol>\n<li>Rotating by K, when K>N, is equivalent to rotating by K%N (as each rotation of N is an expensive no-op).</li>\n<li>You don't actually need to generate the rotated array; you just need to print the values as they would appear in the rotated array.</li>\n<li>In fact, you don't (necessarily) need to store all of the input in an array, but just the part that can't be printed until the last value in the array is read.  (This would get the input and output intermingled if both were through the console, but not if at least one were a file.)</li>\n</ol>\n\n<p>These can be used to turn your O(N^2) solution into an O(N) one.</p>\n"}], "owner": {"reputation": 3, "user_id": 4958890, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206607809099641/picture?type=large", "display_name": "Upmanyu Tyagi", "link": "https://stackoverflow.com/users/4958890/upmanyu-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 45725545, "answer_count": 1, "score": -4, "last_activity_date": 1502935625, "creation_date": 1502917462, "question_id": 45722977, "link": "https://stackoverflow.com/questions/45722977/rotation-of-integers-stored-in-an-array", "title": "Rotation of integers stored in an array", "body": "<p>I have made a simple program of rotation of integers in a given array.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n int t;\n cin&gt;&gt;t;\n long i,j,n,k,l,m,x;\n long a[1000000];\n for(i=0;i&lt;t;i++){\n    cin&gt;&gt;n;\n    cin&gt;&gt;k;\n    for(j=0;j&lt;n;j++){\n        cin&gt;&gt;a[j];\n    }\n    for(m=0;m&lt;k;m++){\n        x=a[0];\n        for(j=1;j&lt;n;j++){\n            x=a[j]+x;\n            a[j]=x-a[j];\n            x=x-a[j];\n        }\n        a[0]=x;\n    }\n    for(j=0;j&lt;n;j++){\n        cout&lt;&lt;a[j]&lt;&lt;\" \";\n    }\n    cout&lt;&lt;endl;\n }\n return 0;\n}\n</code></pre>\n\n<p>The question can be found <a href=\"https://www.hackerearth.com/practice/data-structures/arrays/1-d/practice-problems/algorithm/monk-and-rotation-3/\" rel=\"nofollow noreferrer\">here</a>. My code processes the small inputs easily, but when the input reaches to the order of thousands it takes well over a second and it fails due to that. Any suggestions on how to solve this problem? </p>\n"}, {"tags": ["c++", "boost", "memory-mapped-files", "boost-interprocess", "boost-circularbuffer"], "comments": [{"owner": {"reputation": 21, "user_id": 8474732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c70c4a2dbd318f778b666d820dceb86?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Zhao", "link": "https://stackoverflow.com/users/8474732/carl-zhao"}, "edited": false, "score": 0, "creation_date": 1503001565, "post_id": 45722805, "comment_id": 78446104, "body": "I&#39;ve edited the question to include the desired behavior, as well as a snippet function to reproduce the behavior I was getting. Also stated the intended behavior."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 21, "user_id": 8474732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c70c4a2dbd318f778b666d820dceb86?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Zhao", "link": "https://stackoverflow.com/users/8474732/carl-zhao"}, "edited": false, "score": 0, "creation_date": 1503174629, "post_id": 45765644, "comment_id": 78509903, "body": "@CarlZhao welcome to StackOverflow. Please also look at <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1503094246, "creation_date": 1503094246, "answer_id": 45765644, "question_id": 45722805, "link": "https://stackoverflow.com/questions/45722805/using-a-circular-buffer-on-disk/45765644#45765644", "title": "Using a circular buffer on disk", "body": "<p>The linked post was a mimimal example that ONLY showed that the stateful allocator required for Boost Interprocess memory segments are supported in <code>circular_buffer</code>.</p>\n\n<p>To retrieve the circular buffer itself from the segment you need to construct the object itself in the shared memory segment (in addition to passing the shared-mem-allocator).</p>\n\n<h2>DEMO</h2>\n\n<p>No attention was payed to efficiency, this is just a dumb demo:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/5fce83394e914762\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/circular_buffer.hpp&gt;\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n#include &lt;boost/interprocess/managed_mapped_file.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace bip = boost::interprocess;\n\nstruct message {\n    int data[32];\n};\n\nvoid writeFunction() {\n    bip::managed_mapped_file mmf(bip::open_or_create, \"./circ_buffer.bin\", 4ul &lt;&lt; 10);\n    typedef bip::allocator&lt;message, bip::managed_mapped_file::segment_manager&gt; allocator;\n    typedef boost::circular_buffer&lt;message, allocator&gt; circ_buf;\n\n    auto&amp; instance = *mmf.find_or_construct&lt;circ_buf&gt;(\"named_buffer\")(10, mmf.get_segment_manager());\n\n    struct message test;\n    instance.push_back( test );\n    std::cout &lt;&lt; \"pushed a message (\" &lt;&lt; instance.size() &lt;&lt; \")\\n\";\n}\n\nvoid readFunction() {\n    bip::managed_mapped_file mmf(bip::open_or_create, \"./circ_buffer.bin\", 4ul &lt;&lt; 10);\n    typedef bip::allocator&lt;message, bip::managed_mapped_file::segment_manager&gt; allocator;\n    typedef boost::circular_buffer&lt;message, allocator&gt; circ_buf;\n\n    auto&amp; instance = *mmf.find_or_construct&lt;circ_buf&gt;(\"named_buffer\")(10, mmf.get_segment_manager());\n\n    struct message test;\n    while (!instance.empty()) {\n        test = instance.front();\n        instance.pop_front();\n        std::cout &lt;&lt; \"popped a message (\" &lt;&lt; instance.size() &lt;&lt; \")\\n\";\n    }\n}\n\nint main() {\n    writeFunction();\n    writeFunction();\n    writeFunction();\n\n    readFunction();\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>{\"a\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"]}\n4\n4\nNo such node (b)\nelement_at_checked\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8474732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c70c4a2dbd318f778b666d820dceb86?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Zhao", "link": "https://stackoverflow.com/users/8474732/carl-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 1, "accepted_answer_id": 45765644, "answer_count": 1, "score": 1, "last_activity_date": 1525130182, "creation_date": 1502916744, "last_edit_date": 1503094280, "question_id": 45722805, "link": "https://stackoverflow.com/questions/45722805/using-a-circular-buffer-on-disk", "title": "Using a circular buffer on disk", "body": "<p>I was trying to create a memory-mapped circular buffer on disk using Boost, and I read this answer: <a href=\"https://stackoverflow.com/a/29265629/8474732\">https://stackoverflow.com/a/29265629/8474732</a></p>\n\n<p>However, I have a hard time reading the circular buffer that was written. I tried to do a push_back on the \"instance\" variable, now the instance has size 1. Great. But how would I read the contents back? Or push_back additional elements at a later time? Creating another instance from the same allocator and mmf shows that the instance has size 0. I would want a function that can open a file on disk and push_back a value in the circular buffer, then return. I would want to call this function multiple times. An example of what I'm trying to do (derived from the linked answer):</p>\n\n<pre><code>#include &lt;boost/circular_buffer.hpp&gt;\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n#include &lt;boost/interprocess/managed_mapped_file.hpp&gt;\n\nnamespace bip = boost::interprocess;\n\nstruct message {\n    int data[32];\n};\n\nvoid writeFunction() {\n    bip::managed_mapped_file mmf(bip::open_or_create, \"./circ_buffer.bin\", 4ul &lt;&lt; 10);\n    typedef bip::allocator&lt;message, bip::managed_mapped_file::segment_manager&gt; allocator;\n\n    boost::circular_buffer&lt;message, allocator&gt; instance(10, mmf.get_segment_manager());\n\n    struct message test;\n    instance.push_back( test );\n}\n</code></pre>\n\n<p>I would like to call this function when I want to write to the circular buffer on disk, and also be able to read it with another function (something like this):</p>\n\n<pre><code>void readFunction() {\n    bip::managed_mapped_file mmf(bip::open_or_create, \"./circ_buffer.bin\", 4ul &lt;&lt; 10);\n    typedef bip::allocator&lt;message, bip::managed_mapped_file::segment_manager&gt; allocator;\n\n    boost::circular_buffer&lt;message, allocator&gt; instance(10, mmf.get_segment_manager());\n\n    for(struct message msg : instance) {\n        cout &lt;&lt; msg.string;\n    }\n}\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 0, "creation_date": 1562927424, "post_id": 45722747, "comment_id": 100543137, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7781898/get-an-istream-from-a-char\">Get an istream from a char*</a>"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1502919538, "post_id": 45722872, "comment_id": 78404634, "body": "Since <code>std::istreamstream</code> derives from <code>std::istream</code>, you can pass <code>iss</code> directly to <code>processData()</code> without declaring an intermediate variable: <code>processData(iss);</code>  Also, this solution has the downside of having to copy the <code>std::vector</code> data to a <code>std::string</code> first, as <code>processData()</code> cannot read from the <code>std::vector</code> directly."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502920415, "post_id": 45722872, "comment_id": 78405011, "body": "@Remy I did design my example like that for reasons of clarity."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502921252, "post_id": 45722872, "comment_id": 78405285, "body": "it may be for clarity, but it is certainly not for efficiency/performance, especially for large data."}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 0, "creation_date": 1562926067, "post_id": 45722872, "comment_id": 100542361, "body": "Yeah this copies the data into the <code>string</code>. Unlikely to be what you want."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1562927002, "post_id": 45722872, "comment_id": 100542889, "body": "Two copies here."}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": -1, "last_activity_date": 1502917026, "creation_date": 1502917026, "answer_id": 45722872, "question_id": 45722747, "link": "https://stackoverflow.com/questions/45722747/how-can-i-create-a-istream-from-a-uint8-t-vector/45722872#45722872", "title": "How can i create a istream from a uint8_t vector?", "body": "<p>You can do this via assigning the data to a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> and use a <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> bound to that (leaving aside the <code>unsigned char</code> to <code>signed char</code> conversion issues):</p>\n\n<pre><code>std::string s((char*)networkMessage.data(),networkMessage.size());\nstd::istringstream iss(s);\n\nstd::istream&amp; stream = iss;\n         // ^ Note the reference here.\n\nprocessData(stream);\nstream.close();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1502920191, "last_edit_date": 1502920191, "creation_date": 1502919821, "answer_id": 45723485, "question_id": 45722747, "link": "https://stackoverflow.com/questions/45722747/how-can-i-create-a-istream-from-a-uint8-t-vector/45723485#45723485", "title": "How can i create a istream from a uint8_t vector?", "body": "<p><code>std::basic_istream</code> gets its data from an associated <code>std::basic_streambuf</code> derived class.  The STL provides such classes for file I/O and string I/O, but not for memory I/O or network I/O.</p>\n\n<p>You could easily write (or find a 3rd party) memory-based <code>streambuf</code> class that uses the <code>std::vector</code> as its underlying buffer, and then you can construct an <code>std::istream</code> that uses that memory <code>streambuf</code>. For example (using the <code>imemstream</code> class from \n<a href=\"https://stackoverflow.com/a/13059195/65863\">this answer</a>):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;uint8_t&gt; &amp;data = networkMessage.data;\nimemstream stream(reinterpret_cast&lt;const char*&gt;(data.data()), data.size());\nprocessData(stream);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1502922203, "post_id": 45723736, "comment_id": 78405563, "body": "If using boost, you can directly use <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/iostreams/doc/classes/array.html#array_source\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_64_0/libs/iostreams/doc/classes/&hellip;</a>"}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1562927170, "post_id": 45723736, "comment_id": 100542996, "body": "This is horribly inefficient because of all the copying involved."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": -2, "last_activity_date": 1502922695, "last_edit_date": 1502922695, "creation_date": 1502921188, "answer_id": 45723736, "question_id": 45722747, "link": "https://stackoverflow.com/questions/45722747/how-can-i-create-a-istream-from-a-uint8-t-vector/45723736#45723736", "title": "How can i create a istream from a uint8_t vector?", "body": "<p>This will work with vector of any type, not just <code>uint8_t</code>:</p>\n\n<h3>std</h3>\n\n<pre><code>template &lt;class T&gt;\nauto make_istringstream_std_1(const std::vector&lt;T&gt;&amp; v) -&gt; std::istringstream\n{\n    using namespace std::string_literals;\n    std::string str;\n\n    for (auto&amp; e : v)\n    {\n        str += std::to_string(e) + \" \"s;\n    }\n    // the trailing space is not an issue\n\n    return std::istringstream{str};\n}\n</code></pre>\n\n<h3>std algorithm</h3>\n\n<pre><code>template &lt;class T&gt;\nauto make_istringstream_std_2(const std::vector&lt;T&gt;&amp; v) -&gt; std::istringstream\n{\n    std::stringstream ss;\n    std::copy(v.begin(), v.end(), std::ostream_iterator&lt;int&gt;(ss, \" \"));\n    // the trailing space is not an issue\n\n    return std::istringstream{ss.str()};\n}\n</code></pre>\n\n<h3>boost</h3>\n\n<pre><code>template &lt;class T&gt;\nauto make_istringstream_boost(const std::vector&lt;T&gt;&amp; v) -&gt; std::istringstream\n{\n    using boost::adaptors::transformed;\n    using boost::algorithm::join;\n\n    return std::istringstream{\n        join(v | transformed([](int a) { return std::to_string(a); }), \" \")};\n}\n</code></pre>\n\n<hr>\n\n<p>attribution:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2518979/how-to-transform-a-vectorint-into-a-string\">How to transform a vector&lt;int&gt; into a string?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1833447/a-good-example-for-boostalgorithmjoin\">A good example for boost::algorithm::join</a></p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1562927102, "post_id": 57005012, "comment_id": 100542947, "body": "That&#39;s the badger (though the deprecation scares me and personally I use the solution Remy linked to)"}], "tags": [], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "is_accepted": false, "score": 1, "last_activity_date": 1562926836, "creation_date": 1562926836, "answer_id": 57005012, "question_id": 45722747, "link": "https://stackoverflow.com/questions/45722747/how-can-i-create-a-istream-from-a-uint8-t-vector/57005012#57005012", "title": "How can i create a istream from a uint8_t vector?", "body": "<p>Well C++ does actually have a class for this - <a href=\"https://en.cppreference.com/w/cpp/io/istrstream/istrstream\" rel=\"nofollow noreferrer\"><code>istrstream</code></a>, and you could use it like this:</p>\n\n<pre><code>    vector&lt;uint8_t&gt; data = ...;\n\n    // need some way to create istream from data\n    std::istrstream stream(reinterpret_cast&lt;const char*&gt;(data.data()), data.size());\n\n    processData(stream);\n</code></pre>\n\n<p>As far as I can tell this doesn't copy the data, unlike the other answers. However it was also deprecated in C++98 <a href=\"https://stackoverflow.com/a/2820289/265521\">because it's hard to know who is responsible for freeing the buffer</a>, so you may want to write your own equivalent.</p>\n"}], "owner": {"reputation": 157, "user_id": 8474633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5df329ed667ca7ef32b2bda4a790ee6c?s=128&d=identicon&r=PG&f=1", "display_name": "S. Casey", "link": "https://stackoverflow.com/users/8474633/s-casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3684, "favorite_count": 0, "accepted_answer_id": 45722872, "answer_count": 4, "score": 10, "last_activity_date": 1562926836, "creation_date": 1502916471, "question_id": 45722747, "link": "https://stackoverflow.com/questions/45722747/how-can-i-create-a-istream-from-a-uint8-t-vector", "title": "How can i create a istream from a uint8_t vector?", "body": "<p>I am in the process of adding the ability to get data over the network to code that used to only read local files. The network library I am using sends and receives data in the form of a <code>vector&lt;uint8_t&gt;</code>. I'd like to be able to reuse the code that processes the data after reading the file, but that code expects a std::istream, is there a way to have an istream read the vector data? It's the same data so I feel like there should be a way, but i haven't been able to find or figure out code for how to do it.</p>\n\n<p>current code:</p>\n\n<pre><code>    std::ifstream stream(\"data.img\", std::ios::in | std::ios::binary | std::ios::ate);\n\n    if (!stream.is_open())\n    {\n        throw std::invalid_argument(\"Could not open file.\");\n    }\n    // the arg for processData is std::istream\n    processData(stream);\n</code></pre>\n\n<p>network framework:</p>\n\n<pre><code>    vector&lt;uint8_t&gt; data = networkMessage.data;\n\n    // need some way to create istream from data\n    std::istream stream = ?\n\n    processData(stream);\n    stream.close();\n</code></pre>\n\n<p>Is there a way to do this, or am I barking up the wrong tree?</p>\n"}, {"tags": ["c++", "initialization"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502916563, "post_id": 45722686, "comment_id": 78403454, "body": "Well, nice you&#39;re clarifying that. Though <i>copy elision</i> already ruled for the majority of decent compilers before."}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502916934, "post_id": 45722686, "comment_id": 78403623, "body": "I point out that before 17, optimizing out the temporary still required the copy constructor to logically be available.  With the new standard-specified copy elision that is no longer the case."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1502917086, "post_id": 45722686, "comment_id": 78403682, "body": "May be you misunderstood my compliment."}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "is_accepted": false, "score": 3, "last_activity_date": 1525472634, "last_edit_date": 1525472634, "creation_date": 1502916220, "answer_id": 45722687, "question_id": 45722686, "link": "https://stackoverflow.com/questions/45722686/copy-initialization-vs-direct-initialization-has-changed/45722687#45722687", "title": "Copy-initialization vs direct-initialization has changed?", "body": "<p>I examined the C++17 standard (n4659) and could not find any special mention of <code>auto</code> in the section on initialization, nor anything about initialization in the section on <code>auto</code>.  So, I went back to basics and read the rules for initialization in detail.  And boy, has <strong>it changed!</strong>  In C++17, the meaning of copy-initialization is not what you learned earlier.  The many answers here on SO, and tutorials that explain how the copy constructor is needed but then optimized out are all obsolete, and now wrong.</p>\n\n<p>C++17 has changed the way temporaries are handled, in order to support more copy elision and to enable a way to explain <em>mandatory</em> copy elision.  In a nutshell, prvalues are not temporaries that may be optimized away but are still logically copied (or moved) to their final home.  Instead, prvalues are sort of in limbo, with no address and no real existence.  If a temporary is actually needed, one is \u201cmaterialized\u201d.  But the idea here is that the prvalue can be collapsed out and the code that creates a value (such as the <code>return</code> statement) can be matched up with the final target, avoiding the creation of a temporary.</p>\n\n<p>You can see that this directly affects the meaning of initialization, and by itself cuts out the old rule about a temporary in copy initialization.</p>\n\n<p>So here\u2019s the deal:</p>\n\n<h1>the new initialization rules</h1>\n\n<h2>direct-initialization vs copy-initialization</h2>\n\n<p>This description covers the case where an <strong>object of class type</strong> is being defined.  That is, not a reference, not a primitive type, etc.  To keep the description simple, I\u2019m not mentioning move constructors every place that copy constructor is mentioned.</p>\n\n<pre><code>C c1 ( exp() );  //exp returns a value, not a reference.\nC c2 (v);\nC c3 = exp();\nC c4 = v;\n</code></pre>\n\n<p>We have direct initialization (<code>c1</code> and <code>c2</code>) and copy initialization (<code>c3</code> and <code>c4</code>).  The list forms will be covered separately.</p>\n\n<p>The following cases are covered in order of priority.  Each rule is described assuming that earlier rules did not match already.</p>\n\n<h3>prvalue</h3>\n\n<p>If the source is a prvalue (pure rvalue) and already the right type, we get the match-up between the place that created the value and the final destination.  That is, in <code>c1</code> and <code>c3</code>, the value created by the <code>return</code> statement in <code>exp</code> will be created directly in the variable.  In underlying machine language, the caller determines where the return value will go and passes this to <code>exp</code> as another parameter or a dedicated register or whatnot.  Here, the address where <code>c1</code> (or <code>c3</code>) will go is passed for this purpose.  It always did that (in optimized code); but <em>logically</em> the caller set up a temporary and then copied the temporary to <code>c3</code>, but was allowed to optimize out the copy.  Now, there is no temporary.  The direct pipeline from value creation inside the function to the declared variable in the caller is part of the specification.</p>\n\n<p>Note that this new reality affects prvalues in general.  A prvalue (pure rvalue) is what you have when a function returns an object by value.  The passage that explains this case (<a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#17.6.1\" rel=\"nofollow noreferrer\">\u00a711.6 \u00b617.6.1</a>) <strong>doesn\u2019t even mention copy vs direct forms!</strong></p>\n\n<p>This means that the copy constructor is not involved.  Assuming the function had some way to create the object (a different constructor or private access), you can create a variable when you don\u2019t have an accessible copy constructor at all.  This can be handy for factories, where you want to control how objects are created and the type is not copyable and not movable.</p>\n\n<h3>direct, and sometimes copy</h3>\n\n<p>In direct-initialization (<code>c2</code>), the parameters are used to call a constructor.  Being direct, explicit constructors are considered.  This should be familiar enough.</p>\n\n<p>In copy-initialization, if the value is the same class as the destination or even a derived class, the value is used as a parameter to a constructor.  That is <code>c4</code> where <code>v</code> is also of class <code>C</code>, or class <code>D</code> derived from <code>C</code> so it <em>is-a</em> <code>C</code>.  We suppose that would be the copy constructor that\u2019s chosen, but you can have special constructors for derived types.  Being copy-initialization, explicit constructors are ignored.  The copy constructor can\u2019t be explicit anyway.  But you could have <code>C::C(const D&amp;)</code> that\u2019s explicit!</p>\n\n<h3>copy</h3>\n\n<p>In remaining cases of copy initialization, some conversion is found.  For <code>c4</code> suppose <code>v</code> is of type <code>E</code>.  The conversion functions are conversion operators defined in E (e.g. <code>E::operator C()</code>) and non-explicit constructors in C (e.g. <code>C::C(const E&amp;)</code>).  The result of the conversion is then used with direct-initialization.  That sounds familiar\u2026 but here is the tricky part: the conversion function might produce a prvalue!  A normal conversion operator will return by value, so the return value from that operator is constructed directly in <code>c4</code>.  It\u2019s possible to write a conversion operator that returns a reference, and is thus an lvalue.  But converting constructors are always prvalues.  So, it <em>appears</em> that if a constructor is used then copy-initialization is just as direct as direct-initialization.  But now it\u2019s a phantom prvalue, not a temporary, that goes away.</p>\n\n<h2>list initialization</h2>\n\n<pre><code>C c5 { v1,foo(),7 };\nC c6 = { v1,foo(),7 };\nC c7 = {exp()};\n</code></pre>\n\n<p>First of all, if <code>C</code> has a special constructor for initialization lists, then that is used.  None of the regular stuff applies.</p>\n\n<p>Otherwise, it\u2019s pretty much the same as before.  There are a few differences (<a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init.list#3.6\" rel=\"nofollow noreferrer\">\u00a711.6.4 \u00b63.6</a>): </p>\n\n<p>Because of the new syntax, it\u2019s possible to specify multiple arguments for a constructor in the copy-initialization form.  For example, <code>c5</code> and <code>c6</code> both specify the same constructor arguments.  In copy-initialization the explicit constructors are disallowed.  Note that I wrote <em>disallowed</em> not <em>ignored</em>: In regular copy-initialization, explicit constructors are <em>ignored</em> and overload resolution uses only the non-explicit forms.  But in copy-list-initialization, all constructors are used for overload resolution, but then if an explicit constructor is chosen you get an error (<a href=\"https://timsong-cpp.github.io/cppwp/n4659/over.match.list\" rel=\"nofollow noreferrer\">\u00a716.3.1.7</a>).</p>\n\n<p>Another difference is that when using the list syntax, narrowing conversions (<a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#list-7\" rel=\"nofollow noreferrer\">\u00a711.6.4 \u00b67</a>) are flagged as errors if they would be used in implicit conversions.</p>\n\n<p>Now for a big surprise:  the temporary is back!  in case <code>c7</code>, even though <code>exp()</code> is a prvalue, the rule is to match that to constructor arguments.  So, the expression produced a value of type <code>C</code>, but <em>then</em> the value is used to pick a constructor (which will be the copy constructor).  Since the copy constructor cannot be explicit, there is no difference between the direct and copy syntax.</p>\n\n<h1>What does a normal programmer need to know?</h1>\n\n<p>This is all rather complex, but a normal day-to-day coder only needs to understand a few simple rules.</p>\n\n<ul>\n<li>prvalues are piped directly to the new home.  So the details happened in the function return, and there really isn\u2019t anything happening <em>here</em>.  So, there is no meaningful distinction between copy and direct syntax.</li>\n<li>copy-initialization vs direct-initialization affects <code>explicit</code> constructors.</li>\n<li>direct-initialization specifically asks for a constructor; copy-initialization can use any way of converting.</li>\n</ul>\n\n<p>for lists:</p>\n\n<ul>\n<li>list-initialization can use a special list constructor (e.g. <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>).</li>\n<li>list-initialization gives constructor arguments, but doesn\u2019t allow <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#list-7\" rel=\"nofollow noreferrer\">narrowing conversions</a>.</li>\n</ul>\n\n<p>So, there\u2019s the new part about lists.  But really, it\u2019s something you need to <strong>unlearn</strong>: forget about the convert-then-(pretend to)copy business.</p>\n"}], "owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "closed_date": 1502917615, "answer_count": 1, "score": 1, "last_activity_date": 1525472634, "creation_date": 1502916220, "question_id": 45722686, "link": "https://stackoverflow.com/questions/45722686/copy-initialization-vs-direct-initialization-has-changed", "closed_reason": "Duplicate", "title": "Copy-initialization vs direct-initialization has changed?", "body": "<p>I learned, long ago, that copy initialization creates a temporary which is then used to initialize the destination, though the latter copy constructor is optimized out; but the compiler still pretends to use it, checking for existence and allowed access.</p>\n\n<p>I noticed Herb Sutter mention, in <a href=\"https://herbsutter.com/gotw/\" rel=\"nofollow noreferrer\">updated GOTW posts</a>, that this is no longer true when <code>auto</code> is used.</p>\n\n<p>Specifically, Herb (writing in 2013) still states the familiar rules in general:</p>\n\n<blockquote>\n  <p>If <code>x</code> is of some other type, conceptually the compiler first implicitly converts x to a temporary widget object\u2026 Note that I said \u201cconceptually\u201d a few times above. That\u2019s because practically compilers are allowed to, and routinely do, optimize away the temporary  \u2014 from <a href=\"https://herbsutter.com/2013/05/09/gotw-1-solution/\" rel=\"nofollow noreferrer\">GOTW #1</a></p>\n</blockquote>\n\n<p>He later notes that when <code>auto</code> is used (in <code>auto w = x;</code>) that only a single copy constructor is called because there is no way that <code>x</code> needs to be converted first.</p>\n\n<p>In the case of a function returning an iterator (so it\u2019s an rvalue):</p>\n\n<blockquote>\n  <p>After all, as we saw in GotW #1, usually that extra <code>=</code> means the two-step \u201cconvert to a temporary then copy/move\u201d of copy-initialization\u2014but recall <strong>that doesn\u2019t apply when using <code>auto</code> like this</strong>. \u2026 presto! there cannot be any need for a conversion and we directly construct <code>i</code>.  \u2014<a href=\"https://herbsutter.com/2013/05/13/gotw-2-solution-temporary-objects/\" rel=\"nofollow noreferrer\">GOTW #2</a> (emphasis mine)</p>\n</blockquote>\n\n<p>If the type returned from the function was exactly the same type as the variable being initialized with copy initialization, the rule would be that the temporary gets optimized out but it still checks access on the copy constructor.  Herb is saying that this is not the case with <code>auto</code>, but direct initialization is used.</p>\n\n<p>There are other examples where he seems to be saying (though not with rigorous precision) that when using <code>auto</code> you no longer have the compiler pretend to use the copy constructor.</p>\n\n<p>What\u2019s going on?  Has the rule changed?  Is this some additional feature of <code>auto</code> that all the presentations have missed mentioning?</p>\n"}, {"tags": ["c++", "copy-constructor"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 7, "creation_date": 1502915119, "post_id": 45722384, "comment_id": 78402841, "body": "re-link vs re-compile everything"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1502915169, "post_id": 45722384, "comment_id": 78402865, "body": "Sounds like complete nonsense to me. What the hell is &#39;binary compatibilty between releases of your header files&#39;?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1502915356, "post_id": 45722384, "comment_id": 78402938, "body": "Could you give us a link to that <i>&quot;FAQ&quot;</i> please? Is that commonly considered to be a <i>reliable</i> resource?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502915390, "post_id": 45722384, "comment_id": 78402953, "body": "@user0042 It&#39;s a book from 1998."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502915448, "post_id": 45722384, "comment_id": 78402979, "body": "@molbdnilo Seems even that time there already were <b><i>better</i></b> books :-P ..."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1502915472, "post_id": 45722384, "comment_id": 78402991, "body": "To OP: if @molbdnilo is correct, and you are talking about book from 1998, just throw it away and forget everything you&#39;ve read there. Than read something less than 20 years old. Btw, I think it is a first time in my life I am upvoting the question and voting to close it at the same time."}, {"owner": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1502916092, "post_id": 45722384, "comment_id": 78403235, "body": "@SergeyA : It is. But I must tell you, thats the only sentence in 250 pages so far, I could not understand. the book builds excellent fundamentals of C++. I guess only an old horse can think why such a sentence appeared in the book that time."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502916106, "post_id": 45722384, "comment_id": 78403249, "body": "I don&#39;t get it. If you want that level of binary compatibility, you can&#39;t add or remove member variables or virtual functions either. A customer&#39;s build system should handle this."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1502916217, "post_id": 45722384, "comment_id": 78403305, "body": "@infoclogged, the fact that you could understand it is by no means indicative of book quality or applicability nowadays. If you try to read medieval medical books you might as well understand very clearly how to treat small pox with rat&#39;s blood, but it doesn&#39;t mean it is a good idea."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502916516, "post_id": 45722384, "comment_id": 78403431, "body": "Here is a list of some <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">fine C++ books</a>."}, {"owner": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502963767, "post_id": 45722384, "comment_id": 78421461, "body": "@Ron its funny. some of you tell me not to read this book and then you give a link to a site, which shows this book as a list of fine books. funny."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1502977324, "post_id": 45722384, "comment_id": 78431230, "body": "@infoclogged Please let us know which book is it so that the list can be updated accordingly."}, {"owner": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502983867, "post_id": 45722384, "comment_id": 78436254, "body": "@Ron its already there. Look for Marshall Cline in your link."}], "answers": [{"comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502916618, "post_id": 45722744, "comment_id": 78403476, "body": "Modern compilers can always inline across objects if they like and depending on settings, so and dll have more restrictions."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502917339, "post_id": 45722744, "comment_id": 78403787, "body": "@FireLancer Yes, they can, however if constructors are inlined then <code>user_project.cpp</code> and other files using  <code>t_Something</code> must be recompiled, while if constructors are defined explicitly and implemented in <code>lib.cpp</code> then there is no need to do so."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502917583, "post_id": 45722744, "comment_id": 78403871, "body": "&quot;recompiled&quot; vs &quot;relinked&quot; is not all that clear cut though, the &quot;intermediate&quot; object files are not containing fully compiled machine code, and the compiler can take your function out of <code>lib.cpp</code> and fully inline it into <code>main()</code> from <code>user_project.cpp</code>."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502918938, "post_id": 45722744, "comment_id": 78404405, "body": "@FireLancer You are correct, however relinking should be done anyway. And since constructors code could be inlined anyway given a proper compilation there might be no benefit of declaring constructor inlined at all. Only increased compilation time. And potential risk of screwing up build if some of the object files contain older local copy of constructor code. Library should be either completely header-only or not."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502922219, "post_id": 45722744, "comment_id": 78405567, "body": "Relinking is very much often not desirable for libraries. You don&#39;t want to have to relink half the software on the system to security patch or even get minor features for core/common libraries."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502922295, "post_id": 45722744, "comment_id": 78405588, "body": "@FireLancer Relinking can not be avoided if we are dealing with static library."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1502922382, "post_id": 45722744, "comment_id": 78405615, "body": "I mean dynamic library. With static/objects like I said re-linking vs recompiling almost doesn&#39;t matter (with production/full optimisation settings, and a IDE/makefile that knows the dependencies), so if I put something in a header or not isnt even a concern I have normally with static libs."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1502916457, "creation_date": 1502916457, "answer_id": 45722744, "question_id": 45722384, "link": "https://stackoverflow.com/questions/45722384/why-should-copy-constructors-be-sometimes-declared-explicitly-non-inlined/45722744#45722744", "title": "Why should copy constructors be sometimes declared explicitly non-inlined?", "body": "<p>Consider the following code compiled into static library:</p>\n\n<pre><code>// lib.hpp\nclass\nt_Something\n{\n     private: ::std::string foo;\n\n     public: void\n     Do_SomethingUseful(void);\n};\n\n// lib.cpp\nvoid t_Something::\nDo_SomethingUseful(void)\n{\n    ....\n}\n\n// user_project.cpp\n\nint\nmain()\n{\n   t_Something something;\n   something.Do_SomethingUseful();\n   t_Something something_else = something;\n}\n</code></pre>\n\n<p>Now when <code>t_Something</code> class fields changes somehow, for example a new one is added we get in a situation where all the user code have to be recompiled. Basically constructors implicitly generated by compiler \"leaked\" from our static library to user code.</p>\n"}, {"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502916901, "post_id": 45722761, "comment_id": 78403593, "body": "Build systems in 98 were well smart enough, even on personal computers. We even had IDEs! And internets! (<code>make</code> was born in 1976.)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502917155, "post_id": 45722761, "comment_id": 78403709, "body": "@molbdnilo I do not remember 98 very well, but I would not be surprised if header file dependencies generated by compilers were not a thing."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502917876, "post_id": 45722761, "comment_id": 78403998, "body": "I would be very surprised if they weren&#39;t a thing, since I used them. Tooling hasn&#39;t really changed much for the last decades."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502918085, "post_id": 45722761, "comment_id": 78404072, "body": "@molbdnilo, cool. I know we didn&#39;t use them 2004, but I can&#39;t remember if it is because SunCC couldn&#39;t do it, or our build system was not able to correctly use it."}, {"owner": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "edited": false, "score": 0, "creation_date": 1502985911, "post_id": 45722761, "comment_id": 78437642, "body": "if you have understood it, then why dont you just take back your vote to close this question. Not endorsing a view does not make it eligible to close the question. See the legitmate answers below to the question. By the way, I didnt downvote ( yet ). So, there are others who find some mistakes in your answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "edited": false, "score": 0, "creation_date": 1502990980, "post_id": 45722761, "comment_id": 78440556, "body": "@infoclogged fair enough. VTCing and answering at the same time is inconsistent."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1502916548, "creation_date": 1502916548, "answer_id": 45722761, "question_id": 45722384, "link": "https://stackoverflow.com/questions/45722384/why-should-copy-constructors-be-sometimes-declared-explicitly-non-inlined/45722761#45722761", "title": "Why should copy constructors be sometimes declared explicitly non-inlined?", "body": "<p>I think I understand what this passage means. By no means I am endorsing this, though.</p>\n\n<p>I believe, they describe the scenario when you are developing a library and provide it to your customers in a form of header files and pre-compiled binary library part. After customer has done initial build, they are expected to be able to substitute a binary part with a newer one without recompiling their application - only relink would be required. The only way to achieve that would be to guarantee that header files are immutable, i.e. not changed between versions.</p>\n\n<p>I guess, the notion of this would come from the fact that in 98 build systems were not smart enough and would not be able to detect change in header file and trigger recompilation of affected source file.</p>\n\n<p>Any and all of that is completely moot nowadays, and in fact, goes again the grain - as significant number of libraries actually try hard to be header-only libraries, for multiple reasons.</p>\n"}, {"tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": true, "score": 2, "last_activity_date": 1502918120, "creation_date": 1502918120, "answer_id": 45723111, "question_id": 45722384, "link": "https://stackoverflow.com/questions/45722384/why-should-copy-constructors-be-sometimes-declared-explicitly-non-inlined/45723111#45723111", "title": "Why should copy constructors be sometimes declared explicitly non-inlined?", "body": "<p>Binary compatibility for dynamic libraries (<code>.dll</code>, <code>.so</code>) is often an important thing.</p>\n\n<p>e.g. you don't want to have to recompile half the software on the OS because you updated some low level library everything uses in an incompatible way (and consider how frequent security updates can be). Often you may not even have all the source code required to do so even if you wanted.</p>\n\n<p>For updates to your dynamic library to be compatible, and actually have an effect, you essentially can not change anything in a public header file, because everything there was compiled into those other binaries directly (even in C code, this can often include struct sizes and member layouts, and obviously you cant remove or change any function declarations either).</p>\n\n<p>In addition to the C issues, C++ introduces many more (order of virtual functions, how inheritance works, etc.) so it is conceivable that you might do something that changes the auto generated C++ constructor, copy, destructor etc. while otherwise maintaining compatibility. If they are defined \"inline\" along with the class/struct, rather than explicitly in your source, then they will have been included directly by other applications/libraries that linked your dynamic library and used those auto generated functions, and they wont get your changed version (which you maybe didn't even realise has changed!).</p>\n"}, {"tags": [], "owner": {"reputation": 1518, "user_id": 188610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3bd5ae4b40656fc40bf8b38266276ec?s=128&d=identicon&r=PG", "display_name": "kalaxy", "link": "https://stackoverflow.com/users/188610/kalaxy"}, "is_accepted": false, "score": 1, "last_activity_date": 1502921570, "creation_date": 1502921570, "answer_id": 45723801, "question_id": 45722384, "link": "https://stackoverflow.com/questions/45722384/why-should-copy-constructors-be-sometimes-declared-explicitly-non-inlined/45723801#45723801", "title": "Why should copy constructors be sometimes declared explicitly non-inlined?", "body": "<p>It is referring to problems that can occur between binary releases of a library and header changes in that library.  There are certain changes which are binary compatible and certain changes which are not.  Changes to inline functions, such as an inlined copy-constructor, are not binary compatible and require that the consumer code be recompiled.</p>\n\n<p>You see this within a single project all the time.  If you change <code>a.cpp</code>  then you don't have to recompile all of the files which include <code>a.hpp</code>.  But if you change the interface in the header, then any consumer of that header typically needs to be recompiled.  This is similar to the case when using shared libraries.</p>\n\n<p>Maintaining binary compatibility is useful for when one wants to change the implementation of a binary library without changing its interface.  This is useful for things like bug fixes.  </p>\n\n<p>For example say a program uses <code>liba</code> as a shared library.  If <code>liba</code> contains a bug in a method for a class it exposes, then it can change the internal implementation and recompile the shared library and the program can use the new binary release of that <code>liba</code> without itself being recompiled.  If, however, <code>liba</code> changes the public contract such as the implementation of an inlined method, or moving an inlined method to being externally declared, then it breaks the application binary interface (ABI) and the consume program must be recompiled to use the new binary version of the <code>liba</code>.</p>\n"}], "owner": {"reputation": 2599, "user_id": 1534898, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e96aa9237f776b2fdf6ca1b805ba48f8?s=128&d=identicon&r=PG", "display_name": "infoclogged", "link": "https://stackoverflow.com/users/1534898/infoclogged"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 45723111, "answer_count": 4, "score": 7, "last_activity_date": 1502921570, "creation_date": 1502915017, "last_edit_date": 1502915193, "question_id": 45722384, "link": "https://stackoverflow.com/questions/45722384/why-should-copy-constructors-be-sometimes-declared-explicitly-non-inlined", "title": "Why should copy constructors be sometimes declared explicitly non-inlined?", "body": "<p>I have trouble understanding the sentence with respect to inline and customers binary compatibility. Can someone please explain?</p>\n\n<p>C++ FAQ Cline, Lomow:</p>\n\n<blockquote>\n  <p>When the compiler synthesizes the copy constructor, it makes them inline. If your classes are exposed to your customers ( for example, if your customers #include your header files rather than merely using an executable, built from your classes ), your inline code is copied into your customers executables. If your customers want to maintain binary compatibilty between releases of your header files, you must not change an inline functions that are visible to the customers. Because of this, you will want an explicit, non inline version of the copy constructor, that will be used directly by the customer.</p>\n</blockquote>\n"}, {"tags": ["c++", "multithreading", "while-loop"], "comments": [{"owner": {"reputation": 426, "user_id": 8430461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7432679f8bb55e1cc858e76fd88b1d?s=128&d=identicon&r=PG&f=1", "display_name": "ihpar", "link": "https://stackoverflow.com/users/8430461/ihpar"}, "edited": false, "score": 0, "creation_date": 1502914465, "post_id": 45722205, "comment_id": 78402527, "body": "The thread will never join since its execution never ends. The problem is there imo."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1502914513, "post_id": 45722205, "comment_id": 78402551, "body": "Do you know what <code>join</code> call, on the thread does (e.g. in <code>t.join();</code>)? It suspends blocks thread, and waits for the <code>join</code>ed thread (<code>t</code>) to terminate. And, as written, it never does. Such functionality would have been obvious, if you read the documentation for <a href=\"http://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow noreferrer\"><code>std::thread::join</code></a>, or stepped through your code in a debugger."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 5, "creation_date": 1502914633, "post_id": 45722205, "comment_id": 78402620, "body": "what do you expect from a loop <code>while(1){ std::cout &lt;&lt; i; }</code> other than hanging, or what is the output you expect?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1502915060, "post_id": 45722205, "comment_id": 78402812, "body": "As @Stephan said: That&#39;s cruelty to CPU&#39;s! You should be fined for that."}, {"owner": {"reputation": 1, "user_id": 8474599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53648b95684d51b95529be47f247dbc2?s=128&d=identicon&r=PG&f=1", "display_name": "Test", "link": "https://stackoverflow.com/users/8474599/test"}, "edited": false, "score": 0, "creation_date": 1502915225, "post_id": 45722205, "comment_id": 78402888, "body": "Right, so the code doesn&#39;t get executed since the thread doesn&#39;t get terminated. Is there any way that it creates a new thread and join that in the for- loop?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1502916314, "post_id": 45722205, "comment_id": 78403354, "body": "@Test Once again, do you understand what <code>join</code> does, and can you explain, why do you need it?"}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1502917733, "last_edit_date": 1502917733, "creation_date": 1502916147, "answer_id": 45722665, "question_id": 45722205, "link": "https://stackoverflow.com/questions/45722205/threads-in-for-loop-not-working-correctly/45722665#45722665", "title": "Threads in for loop not working correctly", "body": "<p>The <code>for</code> loop in question currently creates one <code>thread</code> object and one thread. Period. <code>join</code>ing hides this problem in a way by forcing the main thread to wait for the thread to run to completion. That the thread can't is another issue.</p>\n\n<p>Creating a thread and immediately <code>join</code>ing forces your program to run sequentially and defeats the point of using threads. Not joining the <code>thread</code> will result in Bad because the <code>thread</code> object will be destroyed at the end of the loop and the <code>thread</code> has not been detached. <a href=\"http://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow noreferrer\">Destroying an undetached thread is bad.</a> <code>std::terminate</code> does pretty much what it sounds like it does: It hunts down and kills Sarah Connor. Just kidding. It ends your program with all the subtlety of a headsman's axe.</p>\n\n<p>You could detach the threads manually by calling <code>detach</code>, but that's a really, really Bad Idea because you lose control of the thread and your program will exit while the threads are still running.</p>\n\n<p>You need to store these threads and <code>join</code> them later, after the loop that spawns them.</p>\n\n<p>Here's a simple approach to do that:</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\nfor(i = 0; i &lt; numfields; i++)\n{\n    std::cout &lt;&lt; row[i];\n    threads.push_back(std::thread(foo, row[i]));\n}\nfor (std::thread &amp; t: threads)\n{\n    t.join();\n}\n</code></pre>\n\n<p>Now you will have <code>numfields</code> threads running forever, and I'm sure you can take care of that problem on your own.</p>\n"}, {"tags": [], "owner": {"reputation": 3321, "user_id": 2229099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e38c3d513304b29e79cb8a6d903c18e?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/2229099/gabriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1502918099, "creation_date": 1502918099, "answer_id": 45723108, "question_id": 45722205, "link": "https://stackoverflow.com/questions/45722205/threads-in-for-loop-not-working-correctly/45723108#45723108", "title": "Threads in for loop not working correctly", "body": "<p><code>t.join();</code>\nMeans the program waits here for the thread t to finish.\nSince:</p>\n\n<ul>\n<li>t executes foo</li>\n<li>foo never ends, due to while true</li>\n</ul>\n\n<p>Then: you never execute the instructions after the join</p>\n\n<p>So you have the uninterrupted 111111</p>\n"}], "owner": {"reputation": 1, "user_id": 8474599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53648b95684d51b95529be47f247dbc2?s=128&d=identicon&r=PG&f=1", "display_name": "Test", "link": "https://stackoverflow.com/users/8474599/test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1502918099, "creation_date": 1502914264, "question_id": 45722205, "link": "https://stackoverflow.com/questions/45722205/threads-in-for-loop-not-working-correctly", "title": "Threads in for loop not working correctly", "body": "<p>I want to make a program that gets the ids from a database and create a thread with the same function for each id. It works, but when I add a while loop to the function it only hangs there and doesn't get the next id's.</p>\n\n<p>My code is:</p>\n\n<pre><code>void foo(char* i) {\n    while(1){\n        std::cout &lt;&lt; i;\n    }\n}\n\nvoid makeThreads()\n{\n    int i;\n\n    MYSQL *sqlhnd = mysql_init(NULL);\n    mysql_real_connect(sqlhnd, \"127.0.0.1\", \"root\", \"h0flcepqE\", \"Blazor\", 3306, NULL, 0);\n\n    mysql_query(sqlhnd, \"SELECT id FROM `notifications`\");\n    MYSQL_RES *confres = mysql_store_result(sqlhnd);\n    int totalrows = mysql_num_rows(confres);\n    int numfields = mysql_num_fields(confres);\n    MYSQL_FIELD *mfield;\n    MYSQL_ROW row;\n\n    while((row = mysql_fetch_row(confres)))\n    {\n        for(i = 0; i &lt; numfields; i++)\n        {\n\n            printf(\"%s\", row[i]);\n\n            std::thread t(foo, row[i]);\n\n\n            t.join();\n\n\n        }\n    }\n\n}\n\nint main()\n{\n    makeThreads();\n    return 0;\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<p>1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "pointers", "memory-leaks"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 13, "creation_date": 1502914109, "post_id": 45722145, "comment_id": 78402356, "body": "If you didn&#39;t <code>new</code> it, don&#39;t <code>delete</code> it."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1502914294, "post_id": 45722145, "comment_id": 78402452, "body": "I downvoted because this question only shows that you have not studied enough how pointers work in C++. So, take it as a stimulus to study more."}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1502914352, "post_id": 45722145, "comment_id": 78402471, "body": "If you don&#39;t allocate any memory in heap you don&#39;t have to worry"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 6, "creation_date": 1502914359, "post_id": 45722145, "comment_id": 78402473, "body": "does it even compile?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502914689, "post_id": 45722145, "comment_id": 78402653, "body": "In the embedded systems world, we assign addresses of hardware devices to pointers, in order to access the devices.  In these cases, there is no memory allocated, so <code>new</code> or <code>delete</code> are not used."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502914479, "post_id": 45722220, "comment_id": 78402536, "body": "These days the language encourages you to avoid using new."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 0, "last_activity_date": 1502914345, "creation_date": 1502914345, "answer_id": 45722220, "question_id": 45722145, "link": "https://stackoverflow.com/questions/45722145/c-pointer-deletion-inside-function/45722220#45722220", "title": "c++ pointer deletion inside function", "body": "<p>Every call to <code>new</code> needs a matching call to <code>delete</code>. If you have more <code>new</code>'s than <code>delete</code>'s, you get memory leaks. If the opposite, you get <a href=\"https://stackoverflow.com/questions/9169774/what-happens-in-a-double-delete\">double deletes</a>. In your case, if you never called <code>new</code>, then there's no need for delete!</p>\n\n<p>There are tools out there to help match your new's and deletes. My personal favorite is <a href=\"http://cppcheck.sourceforge.net/\" rel=\"nofollow noreferrer\">cppcheck</a>. It's super quick and easy to use, and it runs on the c++ source code! It generally does a good job at catching unmatched new and delete calls.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502915173, "post_id": 45722224, "comment_id": 78402867, "body": "Addendum: On a modern system with virtual memory, every process has it&#39;s own virtual address space. A pointer will be in the scope of the program, even if no actual storage has been assigned to the address. You don&#39;t have to worry about taking out the kernel. If you don&#39;t have virtual memory support for one reason or another... Cry havoc and let loose the frobweeszleqrrrtxzzt"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502915693, "post_id": 45722224, "comment_id": 78403078, "body": "Thank you for pointing out! Iam familiarized with logical to physical address conversion and paging, i dont know where I came to it :/ thank you. Fixed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502917244, "post_id": 45722224, "comment_id": 78403750, "body": "Sorry, but I have miscommunicated my point. Your initial wording was good. It just needed some expansion to cover the virtual memory case. What you described still happens with a great many systems."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502917397, "post_id": 45722224, "comment_id": 78403809, "body": "No problem. I think ill leave it as it is, its described enough. Just its a really bad idea to assign integral to pointer."}], "tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 2, "last_activity_date": 1502915708, "last_edit_date": 1502915708, "creation_date": 1502914366, "answer_id": 45722224, "question_id": 45722145, "link": "https://stackoverflow.com/questions/45722145/c-pointer-deletion-inside-function/45722224#45722224", "title": "c++ pointer deletion inside function", "body": "<p>Assigning <code>int</code> value to pointer</p>\n\n<pre><code>int* j = 5;\n</code></pre>\n\n<p>is illegal because you are storing <code>int</code> to <code>int*</code>. Anyway you can cast it</p>\n\n<pre><code>int* j = reinterpret_cast&lt;int*&gt;( 5 );\n</code></pre>\n\n<p><strong>but</strong> dereferencing this pointer would lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>, since you dont know where does that pointer point.</p>\n\n<hr>\n\n<p>You should init pointers like that</p>\n\n<pre><code>int* j = nullptr;\n</code></pre>\n\n<p>Since <code>c++11</code> you cant create instance of <code>nullptr_t</code> and assign it.</p>\n\n<pre><code>nullptr_t initPointer;\nint* j = initPointer;\n</code></pre>\n\n<hr>\n\n<p>If you dont use <code>new</code> operator to assign memory to pointer, you can't <code>delete</code> this pointer, it would lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. Otherwise if you use <code>new</code> you need matching <code>delete</code> or you would get <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leak</a>. If you want to check your program have memory leaks, check this <a href=\"https://stackoverflow.com/questions/25730/what-is-the-best-free-memory-leak-detector-for-a-c-c-program-and-its-plug-in-d\">thread</a> and choose one tool. I can recommend <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>.</p>\n"}], "owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "closed_date": 1502956859, "answer_count": 2, "score": -10, "last_activity_date": 1502922343, "creation_date": 1502914013, "last_edit_date": 1502922343, "question_id": 45722145, "link": "https://stackoverflow.com/questions/45722145/c-pointer-deletion-inside-function", "closed_reason": "Needs details or clarity", "title": "c++ pointer deletion inside function", "body": "<p>I know if I create a pointer in the header file, I should always delete it when the destructor is being called, but what about if I create a pointer inside of a function. I know basic variables get destroyed at the end of the block, is it the same for pointers?</p>\n\n<p>For example:</p>\n\n<pre><code>Class::Function()\n{\n    int i = 3; // This gets destroyed after the function ends\n    int* j = 5; // What about this? Do I have to delete it somewhere to keep from a leak?\n}\n</code></pre>\n\n<p>If I initialize <code>j</code> inside of the constructor, I would say <code>delete j;</code> to prevent leaks, etc. Is there something I should do in this case?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 8, "creation_date": 1502912470, "post_id": 45721688, "comment_id": 78401567, "body": "I think this belongs on <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1502912535, "post_id": 45721688, "comment_id": 78401597, "body": "I would probably use a <code>std::map&lt;char,unsigned&gt;</code> to count the occurences to avoid that huge number of oddly named variables"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502913776, "post_id": 45721688, "comment_id": 78402165, "body": "Though not wrong I recommend adding <code>{ }</code> to your <code>while</code> loop. It is valid since it is one statement but it could lead to confusion down the road because of how many lines long the <code>for</code> loop is inside of it."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1502912538, "creation_date": 1502912538, "answer_id": 45721747, "question_id": 45721688, "link": "https://stackoverflow.com/questions/45721688/counting-two-character-sequence/45721747#45721747", "title": "Counting two character sequence", "body": "<p><code>*it = tolower(*it);</code> is modifying the string in place. I do not think this is what you want to do, as usually counting assumes unmodified incoming sequence. I suggest you use <code>const_iterator</code> to prevent yourself from those issues.</p>\n"}, {"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": true, "score": 0, "last_activity_date": 1502913835, "creation_date": 1502913835, "answer_id": 45722098, "question_id": 45721688, "link": "https://stackoverflow.com/questions/45721688/counting-two-character-sequence/45722098#45722098", "title": "Counting two character sequence", "body": "<p>You should use the normal <code>for</code> loop or one of its cousins if you need to modify the container as you go along, access an element more than once, or otherwise iterate in a non-linear fashion through the container.</p>\n\n<p>Range-based <code>for</code> is for when you need to access each element of a container once. While you are accessing some elements multiple times which may lead to problems.</p>\n\n<p>You should use <code>const_iterator</code> as @SergeyA mentioned.\nAnd insted of modifying <code>*it</code> do</p>\n\n<pre><code>switch (tolower(*it))\n</code></pre>\n\n<p>Or store it to <code>temp</code> variable.</p>\n\n<hr>\n\n<p>Also good practice is to use <code>map</code> instad of counter for every <code>char</code> or <code>string</code> or whatever.</p>\n\n<pre><code>std::map&lt;char,unsigned&gt; charCounter;\ncharCounter['a']++;\n</code></pre>\n\n<p>And instead of <code>10</code> <code>printf()</code>'s</p>\n\n<pre><code>for(auto const &amp; c : charCounter)\n{\n    for(auto const &amp; i : charCounter.second)\n    {\n        cout &lt;&lt; \"The number of \" &lt;&lt; c &lt;&lt; \" vowels is: \\t\" &lt;&lt; i &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8474437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c454f913fb685729d698f16f74ca7f?s=128&d=identicon&r=PG&f=1", "display_name": "MattE93", "link": "https://stackoverflow.com/users/8474437/matte93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 45722098, "answer_count": 2, "score": -2, "last_activity_date": 1502913835, "creation_date": 1502912293, "last_edit_date": 1502913790, "question_id": 45721688, "link": "https://stackoverflow.com/questions/45721688/counting-two-character-sequence", "title": "Counting two character sequence", "body": "<p>I am new too C++ but have experience in other languages.</p>\n\n<p>I am working through:</p>\n\n<p><strong>Book:</strong> C++ Primer 5th Ed.<br>\n<strong>Exercise:</strong> 5.12</p>\n\n<p>Amongst counting vowels, spaces, and tabs using a switch structure the exercise also asks to keep track of how many times the two character sequences <code>ff</code>, <code>fl</code>, and <code>fi</code> appear in some inputted text. I have seen other solutions to this problem, most using Boolean flag type structures, but I opted to use string iterators to keep track. However being new to C++ I am not sure if there is anything inherently dangerous about my code (ie. iterator pointing to a non valid object). Does this code look okay?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing std::string;\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nint main()\n{\n    string text;\n    unsigned aCnt = 0, eCnt = 0, iCnt = 0, oCnt = 0, uCnt = 0, spaceCnt = 0, nlCnt = 0, tabCnt = 0, ffCnt = 0, flCnt = 0, fiCnt = 0;\n    bool flag = false;\n\n    while (getline(cin, text))\n        for (auto it = text.begin(); it != text.end(); ++it) {\n\n            *it = tolower(*it);\n            switch (*it) {\n\n            case 'a' :\n                ++aCnt;\n                break;\n            case 'e' :\n                ++eCnt;\n                break;\n            case 'i': \n                if (it != text.begin())\n                    if (*(it - 1) == 'f')\n                        ++fiCnt;\n                    else\n                        ++iCnt;\n                break;\n            case 'o' : \n                ++oCnt;\n                break;\n            case 'u' : \n                ++uCnt;\n                break;\n            case ' ':\n                ++spaceCnt;\n                break;\n            case '\\n':\n                ++nlCnt;\n                break;\n            case '\\t':\n                ++tabCnt;\n                break;\n            case 'f' :\n                //Control strucutre that checks if the character pointed to previously was an f.\n                if (it != text.begin())\n                    if (*(it - 1) == 'f')\n                        ++ffCnt;\n                break;\n            case 'l':\n                if (it != text.begin())\n                    if (*(it - 1) == 'f')\n                        ++flCnt;\n                break;\n            }\n\n        }\n\n    cout &lt;&lt; \"The number of 'a' vowels is: \\t\" &lt;&lt; aCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'e' vowels is: \\t\" &lt;&lt; eCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'i' vowels is: \\t\" &lt;&lt; iCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'o' vowels is: \\t\" &lt;&lt; oCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'u' vowels is: \\t\" &lt;&lt; uCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of tabs read is: \\t\" &lt;&lt; tabCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of newlines is: \\t\" &lt;&lt; nlCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of spaces read is: \\t\" &lt;&lt; spaceCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'ff' read is: \\t\" &lt;&lt; ffCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'fl' read is: \\t\" &lt;&lt; flCnt &lt;&lt; endl;\n    cout &lt;&lt; \"The number of 'fi' read is: \\t\" &lt;&lt; fiCnt &lt;&lt; endl;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 43, "user_id": 6544352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kqe018uG08I/AAAAAAAAAAI/AAAAAAAAGPY/7cV1DJhFqKs/photo.jpg?sz=128", "display_name": "Nitin Agarwal", "link": "https://stackoverflow.com/users/6544352/nitin-agarwal"}, "edited": false, "score": 0, "creation_date": 1502912177, "post_id": 45721584, "comment_id": 78401432, "body": "I am trying to understand the behaviour of default constructor. Can anyone tell whether or not default constructor initializes member values to their default values?"}], "owner": {"reputation": 43, "user_id": 6544352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kqe018uG08I/AAAAAAAAAAI/AAAAAAAAGPY/7cV1DJhFqKs/photo.jpg?sz=128", "display_name": "Nitin Agarwal", "link": "https://stackoverflow.com/users/6544352/nitin-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "closed_date": 1502912499, "answer_count": 0, "score": 3, "last_activity_date": 1502912940, "creation_date": 1502911843, "last_edit_date": 1502911872, "question_id": 45721584, "link": "https://stackoverflow.com/questions/45721584/constructor-behaviour-c", "closed_reason": "Duplicate", "title": "Constructor behaviour c++", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A\n{\n\n    public:\n        int x;\n};\n\nint main()\n\n{\n\n    A a = A();\n    cout&lt;&lt;a.x&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>For this code I am getting the output as 0 but when i create the object as A a; and then print a.x, I get garbage value. Why is this so?</p>\n"}, {"tags": ["c++", "opengl", "shader"], "comments": [{"owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "edited": false, "score": 0, "creation_date": 1502913190, "post_id": 45721506, "comment_id": 78401885, "body": "It would be helpful to see your render method, but from the looks of it you never bind vertex data."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502913426, "post_id": 45721506, "comment_id": 78402006, "body": "Do you know about <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glDrawElements.xml\" rel=\"nofollow noreferrer\"><code>glDrawElements</code></a> function that makes it possible to perform indexed draw like you are doing in your shader? Also your code has no error handling, you should call <code>glGetError</code> after every other gl call and inspect the value returned."}, {"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502913616, "post_id": 45721506, "comment_id": 78402092, "body": "#version 150 support in out variables?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 2, "creation_date": 1502914372, "post_id": 45721506, "comment_id": 78402483, "body": "Integer attributes cannot be set up with <code>glVertexAttribPointer</code>. Have a look at <a href=\"https://stackoverflow.com/questions/28014864/why-different-variations-of-glvertexattribpointer-do-exist\">this question</a> or <a href=\"https://stackoverflow.com/a/18926905/2327517\">this answer</a>. However, it is kind of moot for your use case, since <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/gl_VertexID.xhtml\" rel=\"nofollow noreferrer\"><code>gl_VertexID</code></a> does exist."}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 2402189, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W4tcr.png?s=128&g=1", "display_name": "bitQUAKE", "link": "https://stackoverflow.com/users/2402189/bitquake"}, "is_accepted": false, "score": 0, "last_activity_date": 1502963783, "creation_date": 1502963783, "answer_id": 45731979, "question_id": 45721506, "link": "https://stackoverflow.com/questions/45721506/opengl-why-doesnt-this-shader-work/45731979#45731979", "title": "Opengl why doesn&#39;t this Shader Work?", "body": "<p>I would prefer removing these <code>_vertID</code> indices.\nTo me it looks like you are trying to save memory by using a single vec4 to render 4 vertices instead of 4x vec2 (or vec3, if required). <code>vertID</code>, <code>uvs</code> and <code>posSh</code> are all attributes, this means they have to have the same element count. For example:</p>\n\n<pre><code>position: 1[x, y, z], 2[x, y, z], 3[x, y, z]\nuvCoords: 1[x, y]   , 2[x, y]   , 3[x, y]\n</code></pre>\n\n<p>If I am right, this is not the case for <code>posSh</code>.\nThis is what I see in you setup &amp; shader code:</p>\n\n<pre><code>vertID: 1[n]          , 2[n]      , 3[n]    , 4[n]\nuvs:    1[x, y]       , 2[x, y]   , 3[x, y] , 4[x, y]\nposSh:  1[x, y, z, w] , ???       , ???     , ???\n</code></pre>\n\n<p>So, If this is the case, we gonna fix that now.</p>\n\n<ul>\n<li>Change <code>vbo[0]</code> from <code>GL_ARRAY_BUFFER</code> to <code>GL_ELEMENT_ARRAY_BUFFER</code>. An element array buffer contains the indices of each element (look into the code sections above, the numbers are indices which you can specify) of the array buffer you bind. (Keep in mind, that <code>vbo[0]</code> will stay bound, until another GL_ELEMENT_ARRAY_BUFFER was bound)</li>\n<li>Remove glVertexAttribPointer and glEnableVertexAttribArray from the GL_ELEMENT_ARRAY_BUFFER, because it just has to be bound and it already is.</li>\n<li>Create a 3rd vbo in your <code>vbo[]</code> array which will contain all the positions of your quad. This will replace <code>posSh</code>. You have to set it up like the array buffer for <code>_uvs</code> (This will be a vec2 position)</li>\n<li>Use glVertexAttribPointer and glEnableVertexAttribArray on the 3rd vbo.</li>\n</ul>\n\n<p>Thats how you do it. \nTry this code (i have not tested it yet):</p>\n\n<pre><code>void Square::initVertex(){\n    GLint _vertID[4] = {0,1,2,3};\n    GLfloat _uvs[8] = {0,0,1,0,1,1,0,1};\n    GLfloat _pos[8] = {0.5f, 0.5f, -0.5f, 0.5f, -0.5f, -0.5f, 0.5f, -0.5f };\n    glGenVertexArrays(1, vao); \n    glBindVertexArray(vao[0]);\n\n    glGenBuffers(3, vbo); // the first index is an Element Array Buffer!\n\n    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, vbo[0]);\n    glBufferData( GL_ELEMENT_ARRAY_BUFFER, 4 * sizeof(GLint), _vertID, GL_STATIC_DRAW);\n\n    glBindBuffer( GL_ARRAY_BUFFER, vbo[1]);\n    glBufferData( GL_ARRAY_BUFFER, 8 * sizeof(GLfloat), _pos, GL_STATIC_DRAW);\n    glVertexAttribPointer(0, 2, GL_FLOAT, false, 0, 0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer( GL_ARRAY_BUFFER, vbo[2]);\n    glBufferData( GL_ARRAY_BUFFER, 8 * sizeof(GLfloat), _pos, GL_STATIC_DRAW);\n    glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 0);\n    glEnableVertexAttribArray(1);\n}\n</code></pre>\n\n<p>Shader code:</p>\n\n<pre><code>#version 150\nin vec2 uvs;\nin vec2 pos;\nout vec2 ex_uvs;\n\nvoid main(void){\n    gl_Position = vec4(pos.x, pos.y, 1,1);\n    ex_uvs = uvs;\n}\n</code></pre>\n\n<p>Your drawing code:</p>\n\n<pre><code> glDrawElements(\n     GL_QUADS,      // mode\n     4,    // count\n     GL_UNSIGNED_INT,   // type\n     (void*)0           // element array buffer offset\n );\n</code></pre>\n\n<p>I hope it helps you a little bit. Try the code, I dont know if there are any typos, I wrote it in notepad++.</p>\n\n<p>Here is an advances tutorial of how you render VBO`s correctly: <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/\" rel=\"nofollow noreferrer\">Tutorial 9 : VBO Indexing</a></p>\n"}], "owner": {"reputation": 65, "user_id": 8376572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4df8d9d00098be55fe73bdd0cfc1a617?s=128&d=identicon&r=PG&f=1", "display_name": "Popo Heche", "link": "https://stackoverflow.com/users/8376572/popo-heche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502963783, "creation_date": 1502911572, "last_edit_date": 1502913629, "question_id": 45721506, "link": "https://stackoverflow.com/questions/45721506/opengl-why-doesnt-this-shader-work", "title": "Opengl why doesn&#39;t this Shader Work?", "body": "<p>I was trying to make a class to draw a square, this class would be instantiated one time, and every time I wanna to draw a square I would just... Square::draw(float posx, float posy ,float sizex, float sizey).\nthe way I did it was by having a unifor vec4 on the shader where I would transmit the pos and size.\nAnd on the vbo: GLint _vertID[4] = {0,1,2,3} an indentification, so that I would know which vertex the shader was working on so I could put the right position</p>\n\n<p>The problem is that it does not draw a square instead it draws randomly, some triangles.(something is wrong).\nI would like to know if is my logic that is wrong, or is implementation is wrong.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>void Square::initVertex(){\n    GLint _vertID[4] = {0,1,2,3};\n    GLfloat _uvs[8] = {0,0,1,0,1,1,0,1};\n    glGenVertexArrays(1, vao);\n    glBindVertexArray(vao[0]);\n\n    glGenBuffers(2, vbo);\n\n    glBindBuffer( GL_ARRAY_BUFFER, vbo[0]);\n    glBufferData( GL_ARRAY_BUFFER, 4 * sizeof(GLint), _vertID, GL_STATIC_DRAW);\n    glVertexAttribPointer(0, 1, GL_INT, false, 0, 0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer( GL_ARRAY_BUFFER, vbo[1]);\n    glBufferData( GL_ARRAY_BUFFER, 8 * sizeof(GLfloat), _uvs, GL_STATIC_DRAW);\n    glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 0);\n    glEnableVertexAttribArray(1);\n}\n</code></pre>\n\n<p>and the VertexShader:\nposSh is the vec4 where I pass the position every time I wanna draw a square, and vertID is the vbo that makes me know which vert is being handled</p>\n\n<pre><code>#version 150\nin int vertID;\nin vec2 uvs;\nin vec4 posSh;\nout vec2 ex_uvs;\n\nvoid main(void){\n    vec2 pos;\n\n    if(vertID == 0){\n        pos = vec2(posSh.x, posSh.y);\n    }else if(vertID == 1){\n        pos = vec2(posSh.x + posSh.z, posSh.y);\n    }else if(vertID == 2){\n        pos = vec2(posSh.x + posSh.z, posSh.y + posSh.w);\n    }else if(vertID == 3){\n        pos = vec2(posSh.x, posSh.y + posSh.w);\n    }\n\n    gl_Position = vec4(pos.x, pos.y, 1,1);\n    ex_uvs = uvs;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "opengl", "memory"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1502914413, "post_id": 45721446, "comment_id": 78402505, "body": "GPU memory is not included in all four measurements."}, {"owner": {"reputation": 56, "user_id": 1700369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882bfb79d2352976d096328b05cfaa2d?s=128&d=identicon&r=PG", "display_name": "boiler", "link": "https://stackoverflow.com/users/1700369/boiler"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1502962771, "post_id": 45721446, "comment_id": 78420722, "body": "I think so too but if i upload a texture via glTexImage2D width<i>height</i>bitDepth memory is allocated &quot;by my&quot; application which is not true."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1502962994, "post_id": 45721446, "comment_id": 78420879, "body": "If you upload data to the GPU, then this might be done asynchronous. In this case, the driver will have to copy the data from the pointer you passed to some temporary memory. Maybe this is what you seeing."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1502979260, "post_id": 45721446, "comment_id": 78432720, "body": "There&#39;s a good article here about how to measure memory usage.  As you&#39;ve discovered, it&#39;s harder than you think.  <a href=\"http://blogs.microsoft.co.il/sasha/2016/01/05/windows-process-memory-usage-demystified/\" rel=\"nofollow noreferrer\">blogs.microsoft.co.il/sasha/2016/01/05/&hellip;</a>"}], "owner": {"reputation": 56, "user_id": 1700369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882bfb79d2352976d096328b05cfaa2d?s=128&d=identicon&r=PG", "display_name": "boiler", "link": "https://stackoverflow.com/users/1700369/boiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502913572, "creation_date": 1502911398, "last_edit_date": 1502913572, "question_id": 45721446, "link": "https://stackoverflow.com/questions/45721446/memory-consumption-of-a-c-opengl-program", "title": "Memory Consumption of a C++/OpenGL program", "body": "<p>I've an application running on Windows using OpenGL and i'm focusing on memory usage. Currently i've 4 different values during runtime and i'm asking myself what is really going on in application/windows.</p>\n\n<ol>\n<li>In Visual Studio 2015 diagnostic tool 62MB</li>\n<li>Taskmanager 52MB</li>\n<li>Visual Studio Memory profiler Heap Memory 17MB</li>\n<li>GetProcessMemoryInfo.WorkingSetSize 78MB</li>\n</ol>\n\n<p>Under Linux i've got in top RES 36MB....</p>\n\n<p>It's quite confusing! Which memory is included 1, 2 and 4? Is GPU memory included?\nIs there any way to divide memory consumption in application simple new/delete, GPU memory, Windows (window itself and other handles), OpenGL etc.?</p>\n"}, {"tags": ["c++", "templates", "copy-constructor", "private-members", "coercion"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1502910639, "post_id": 45721223, "comment_id": 78400695, "body": "Can you use <code>friend</code> relationships?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502910657, "post_id": 45721223, "comment_id": 78400709, "body": "&quot;some reason using a different template type suddenly&quot; I guess you meant template parameter. Note that <code>Foo&lt;T&gt;</code> and <code>Foo&lt;S&gt;</code> are completely unrelated types that cannot access their private parts"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1502910779, "post_id": 45721223, "comment_id": 78400769, "body": "@Dai, I&#39;m not sure how a <code>friend</code> relationship could be defined in this situation."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502910925, "post_id": 45721223, "comment_id": 78400840, "body": "see here <a href=\"https://stackoverflow.com/questions/3292795/template-friend\">stackoverflow.com/questions/3292795/template-friend</a>"}, {"owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 0, "creation_date": 1502910991, "post_id": 45721223, "comment_id": 78400876, "body": "What about making it a protected member?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502911006, "post_id": 45721223, "comment_id": 78400878, "body": "@tobi303 That&#39;s it! Thank you! Right before you sent that link I discovered the same thing by reading through the boost source code :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502911084, "post_id": 45721223, "comment_id": 78400906, "body": "its not really a perfect dupe, but the answer fits 100%"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "edited": false, "score": 0, "creation_date": 1502911157, "post_id": 45721223, "comment_id": 78400939, "body": "@ssh22 that would not help <code>Container&lt;A&gt;</code> and <code>Container&lt;B&gt;</code> dont inherit from each other"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502911205, "post_id": 45721223, "comment_id": 78400958, "body": "@tobi303 I think the one I found does a good job explaining it."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502911282, "post_id": 45721223, "comment_id": 78400977, "body": "@NathanOliver yeah the answer is same, but question fits much better"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "closed_date": 1502911162, "answer_count": 0, "score": 4, "last_activity_date": 1502910500, "creation_date": 1502910500, "question_id": 45721223, "link": "https://stackoverflow.com/questions/45721223/c-coercion-constructor-cannot-access-private-members", "closed_reason": "Duplicate", "title": "C++ &quot;coercion constructor&quot; cannot access private members", "body": "<p>I'm trying to write some code that uses the \"<a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Coercion_by_Member_Template\" rel=\"nofollow noreferrer\">Coercion by Member Template</a>\" pattern in order to create a container that can hold pointers to multiple types and treat them polymorphically.</p>\n\n<p>I've run into an issue trying to write a \"coercion constructor?\" (I'm not sure what you would really call it), but my code fails to compile stating that I can't access a private member of the class.</p>\n\n<p>The regular copy constructor works fine and does have access, but for some reason using a different template type suddenly causes it to lose access.</p>\n\n<pre><code>#include &lt;boost/shared_ptr.hpp&gt;\n\ntemplate &lt;typename T&gt;\nclass Container {\npublic:\n    Container&lt;T&gt;(T* contents) : m_contents(contents) {}\n\n    // Copy constructor\n    Container&lt;T&gt;(const Container&lt;T&gt;&amp; other) : m_contents(other.m_contents) {}\n\n    // Coercion constructor?\n    template &lt;typename U&gt;\n    Container&lt;T&gt;(const Container&lt;U&gt;&amp; other) : m_contents(other.m_contents) {}\n\n    T* get_contents() {\n        return m_contents;\n    }\n\nprivate:\n    T* m_contents;\n};\n\n// Things for the container to hold\nstruct A {};\nstruct B : public A {};\n\nint main() {\n    B* object1 = new B;\n    Container&lt;B&gt; container1(object1);\n\n    // Works fine\n    Container&lt;B&gt; container2(container1);\n\n    // Fails to compile because m_contents is private....\n    Container&lt;A&gt; container3(container1);\n}\n</code></pre>\n\n<p><strong>How can I get access to the member variable in the \"coercion constructor\" without making it public? Making it public would break encapsulation and defeat the whole purpose of the container.</strong></p>\n\n<p><em>Also adding a \"get_contents()\" method and using it in the \"coercion constructor\" is not an option because I don't want the contents to be accessible from the outside.</em></p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 3, "last_activity_date": 1502910314, "creation_date": 1502910314, "answer_id": 45721175, "question_id": 45721128, "link": "https://stackoverflow.com/questions/45721128/set-copy-constructor-as-default-does-not-work-when-inherited-from-qobject/45721175#45721175", "title": "Set copy constructor as default does not work when inherited from QObject", "body": "<p><a href=\"http://doc.qt.io/qt-5/qobject.html#no-copy-constructor-or-assignment-operator\" rel=\"nofollow noreferrer\">QObject Class</a> description page says following:</p>\n\n<blockquote>\n  <p>QObject has neither a copy constructor nor an assignment operator.\n  This is by design. Actually, they are declared, but in a private\n  section with the macro Q_DISABLE_COPY(). In fact, all Qt classes\n  derived from QObject (direct or indirect) use this macro to declare\n  their copy constructor and assignment operator to be private. The\n  reasoning is found in the discussion on Identity vs Value on the Qt\n  Object Model page. That means you are not supposed to copy QT objects,\n  since QObject is non-copyable by design.</p>\n</blockquote>\n\n<p>Which means <code>QObject</code> can't be copied and all its descendants can't be copied also.</p>\n\n<p><strong>But</strong></p>\n\n<p>You may convert your class to <code>QVariant</code> which uses a copy ctor</p>\n\n<pre><code>void *ptr = QMetaType::construct(x-&gt;type, copy);\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5824851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/mjRGO.png?s=128&g=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/5824851/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502910314, "creation_date": 1502910169, "question_id": 45721128, "link": "https://stackoverflow.com/questions/45721128/set-copy-constructor-as-default-does-not-work-when-inherited-from-qobject", "title": "Set copy constructor as default does not work when inherited from QObject", "body": "<p>I tried to set copy constructor as default, but compiler alert with \"... attempting to reference a deleted function\". What's wrong with my code?</p>\n\n<pre><code>class A : public QObject\n{\n    Q_OBJECT\npublic:\n    const QString s1;\n    ...\n    const QString sn;\n    const QDateTime t1;\n    ...\n    const QDateTime tn;\n\n\n    A() = delete;\n    A(const QString &amp;s1, ...);\n    A(const A&amp;) = default;\n    ~A() = default;\n\n    float fun1();\n    ...\n    float funn();\n\nprivate:\n    QString m_s1;\n    ...\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 6, "creation_date": 1502909593, "post_id": 45720893, "comment_id": 78400213, "body": "Arrays and/or vectors play very nicely with loops."}, {"owner": {"reputation": 10385, "user_id": 4032703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8imMA.png?s=128&g=1", "display_name": "EJoshuaS - Reinstate Monica", "link": "https://stackoverflow.com/users/4032703/ejoshuas-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1502911804, "post_id": 45720893, "comment_id": 78401241, "body": "Please see: <a href=\"https://meta.stackoverflow.com/questions/354427/how-do-i-avoid-misusing-tags\">How do I avoid misusing tags?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502914188, "post_id": 45721168, "comment_id": 78402405, "body": "@tobi303 Well, there is an overload, for <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B\" rel=\"nofollow noreferrer\"><code>std::string::operator+</code></a> which takes in a <code>char</code> as an <code>rhs</code> (overload #5 in the above documentation). So, the compiler might just call that, while issuing warning about narrowing conversion. It doesn&#39;t do what OP would expect, tho (because, it would result in, most likely, unprintable character being appended to the <code>std::string</code>)."}, {"owner": {"reputation": 461, "user_id": 8217771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d029e9daf3054a5e838148663ee1836?s=128&d=identicon&r=PG&f=1", "display_name": "Mepix", "link": "https://stackoverflow.com/users/8217771/mepix"}, "edited": false, "score": 0, "creation_date": 1502915176, "post_id": 45721168, "comment_id": 78402868, "body": "Since C++11, it is possible to add an int to a string with std::to_string (<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/to_string</a>).  I fixed the omission in my example code.  I added the std::to_string to the int as one possible way to do the conversion, and was the method used by the OP in their attempt."}, {"owner": {"reputation": 895, "user_id": 7690982, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3391858e255d5aa7f209ecfb3029526c?s=128&d=identicon&r=PG&f=1", "display_name": "danieltakeshi", "link": "https://stackoverflow.com/users/7690982/danieltakeshi"}, "edited": false, "score": 0, "creation_date": 1502916967, "post_id": 45721168, "comment_id": 78403641, "body": "@Mepix Thanks, it worked! Just had to add a change to the function showManyImages from <code>void ShowManyImages(string title, int nArgs, ...)</code> to <code>int showManyImages(const String winName, const std::vector&lt;cv::Mat&gt; images)</code>."}], "tags": [], "owner": {"reputation": 461, "user_id": 8217771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d029e9daf3054a5e838148663ee1836?s=128&d=identicon&r=PG&f=1", "display_name": "Mepix", "link": "https://stackoverflow.com/users/8217771/mepix"}, "is_accepted": true, "score": 4, "last_activity_date": 1502914896, "last_edit_date": 1502914896, "creation_date": 1502910296, "answer_id": 45721168, "question_id": 45720893, "link": "https://stackoverflow.com/questions/45720893/using-a-loop-to-declare-a-mat-class/45721168#45721168", "title": "Using a loop to declare a Mat class", "body": "<p>Try using a vector of Mats.  There are a few ways to load them and in show them.</p>\n\n<pre><code>std::vector&lt;cv::Mat&gt; myMatArray;\nfor(int i = 0; i &lt; numberOfPicturesToLoad; i++){\n   std::string imgToLoad = img_path + img_name + std::to_string(i) + img_format;\n   cv::Mat temp = imread(imageToLoad);\n   myMatArray.push_back(temp);\n}\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 7690982, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3391858e255d5aa7f209ecfb3029526c?s=128&d=identicon&r=PG&f=1", "display_name": "danieltakeshi", "link": "https://stackoverflow.com/users/7690982/danieltakeshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 45721168, "answer_count": 1, "score": 0, "last_activity_date": 1502914896, "creation_date": 1502909253, "last_edit_date": 1502911813, "question_id": 45720893, "link": "https://stackoverflow.com/questions/45720893/using-a-loop-to-declare-a-mat-class", "title": "Using a loop to declare a Mat class", "body": "<p>The camera stores images to a FTP server with the filename pattern as \"folder\"+\"program_name\"+ index +\"format\", where index is a number from one to almost ten billion (0000000001 to 9999999999). The path and filename are needed to display the images. It is required to show 10 images on OpenCV, so I tried to make the following testcode using the function <a href=\"https://github.com/opencv/opencv/wiki/DisplayManyImages\" rel=\"nofollow noreferrer\">ShowManyImages</a>.</p>\n\n<pre><code>int main() {\nint img_ini = 1;\nstd::string img_path = \"../data/\";\nstd::string img_name = \"img\";\nstd::string img_format = \".bmp\";\nstd::string var;\nvar = img_path + img_name + std::to_string(img_ini) + img_format;\n\nMat img1 = imread(var);\nMat img2 = imread(\"../data/img2.bmp\");\nMat img3 = imread(\"../data/img3.bmp\");\nMat img4 = imread(\"../data/img4.bmp\");\nMat img5 = imread(\"../data/img5.bmp\");\nMat img6 = imread(\"../data/img6.bmp\");\nMat img7 = imread(\"../data/img6.bmp\");\nMat img8 = imread(\"../data/img6.bmp\");\nMat img9 = imread(\"../data/img6.bmp\");\nMat img10 = imread(\"../data/img6.bmp\");\nShowManyImages(\"Image\", 10, img1, img2, img3, img4, img5, img6, img7, img8, img9, img10);\n\nreturn 0;\n}\n</code></pre>\n\n<p>To this point i could show the image 1 creating the <code>var</code> variable. However, this code is a mess and i didn't want to create <code>img1,img2, ..., img10</code>.</p>\n\n<p>So i tried to make something similar to what was done with <code>var</code> to the <a href=\"http://docs.opencv.org/master/d3/d63/classcv_1_1Mat.html\" rel=\"nofollow noreferrer\">Mat</a> img, creating a loop like For i=1 To 10  <code>Mat img + i = imread(img_path + img_name + std::to_string(img_ini + i) + img_format;)</code>. But wasn't able, because Mat () isn't as imread ().</p>\n\n<ul>\n<li>Is there a way to make something like the for loop described?</li>\n<li><p>Or is it better to create a void function like:</p>\n\n<pre><code>Mat img1 = imread(var(1));\nMat img2 = imread(var(2));\nMat img3 = imread(var(3));\nMat img4 = imread(var(4));\nMat img5 = imread(var(5));\nMat img6 = imread(var(6));\nMat img7 = imread(var(7));\nMat img8 = imread(var(8));\nMat img9 = imread(var(9));\nMat img10 = imread(var(10));\n</code></pre></li>\n<li><p>Or is there another/better way?</p></li>\n</ul>\n"}, {"tags": ["c++", "qt", "ffmpeg", "undefined-reference"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502908634, "post_id": 45720712, "comment_id": 78399777, "body": "Have you tried moving <code>using namespace std;</code> inside of <code>main</code>?"}, {"owner": {"reputation": 1, "user_id": 8472158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdf159651e391008d3290d8bfc6d424?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik R&#233;vai", "link": "https://stackoverflow.com/users/8472158/dominik-r%c3%a9vai"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502908973, "post_id": 45720712, "comment_id": 78399933, "body": "Yes i tried it and it gives the same errors doesnt matter where is using namespace std, i even tried deleting it but no change"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 2, "creation_date": 1502909276, "post_id": 45720712, "comment_id": 78400093, "body": "That is likely about FFMpeg library expecting MingW C (it was built that way?) runtime from being linked with executable but the executable does not have that (different compiler adds different runtime)."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502910350, "post_id": 45720712, "comment_id": 78400555, "body": "It is strange that you are getting error from <code>\\libavutil\\error.c</code>"}], "owner": {"reputation": 1, "user_id": 8472158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdf159651e391008d3290d8bfc6d424?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik R&#233;vai", "link": "https://stackoverflow.com/users/8472158/dominik-r%c3%a9vai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502919025, "creation_date": 1502908448, "last_edit_date": 1592644375, "question_id": 45720712, "link": "https://stackoverflow.com/questions/45720712/im-trying-to-use-ffmpeg-with-qt-but-i-get-undefined-references-errors", "title": "I&#39;m trying to use ffmpeg with qt but I get undefined references errors", "body": "<p>I tried to solve this problem myself but I couldn't. I installed FFmpeg with msys 3 step method:</p>\n<pre><code>configure \nmake \nmake install \n</code></pre>\n<p>and tried to link every library in the .pro. At first, I got errors like an undefined reference to <code>avcodec_register_all()</code>; but after linking all the libraries they stopped and instead of them I got 6 others:</p>\n<blockquote>\n<p>c:\\ffmpeg-3.3.3\\libavutil\\error.c:120: error: undefined reference to `strerror_r'</p>\n<p>c:\\mingw\\include\\time.h:422: error: undefined reference to `__mingw_sleep'</p>\n<p>c:\\mingw\\include\\stdlib.h:810: error: undefined reference to `__mingw_mkstemp'</p>\n<p>c:\\mingw\\include\\stdlib.h:810: error: undefined reference to `__mingw_mkstemp'</p>\n<p>localcharset.c:-1: error: undefined reference to `_imp__GetACP@0'</p>\n<p>collect2.exe:-1: error: error: ld returned 1 exit status</p>\n</blockquote>\n<p>this is main.cpp:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n#define __STDC_CONSTANT_MACROS\n\nextern &quot;C&quot; {\n    #include &lt;libavutil/frame.h&gt;\n    #include &lt;libavutil/mem.h&gt;\n    #include &lt;libavcodec/avcodec.h&gt;\n}\n\nint main(int argc, char *argv[])\n{\n    cout &lt;&lt; &quot;Enter input file name.&quot; &lt;&lt; endl;\n    string inName, outName;\n    cin&gt;&gt;inName;\n    cout&lt;&lt;&quot;Enter output file name.&quot;&lt;&lt;endl;\n    cin&gt;&gt;outName;\n    avcodec_register_all();\n    return 0;\n}\n</code></pre>\n<p>and my .pro</p>\n<pre><code>TEMPLATE = app\nCONFIG += console c++11\nCONFIG -= app_bundle\nCONFIG -= qt\n\nSOURCES += main.cpp\n\n\nLIBS += -LC:\\ffmpeg-3.3.3\\ffmpeg\\lib\nLIBS += -lpthread\nLIBS += -lavdevice\nLIBS += -lavfilter\nLIBS += -lavformat\nLIBS += -lavcodec\nLIBS += -lz\nLIBS += -lswresample\nLIBS += -lswscale\nLIBS += -lavutil\nLIBS += -lm\nINCLUDEPATH += C:/ffmpeg-3.3.3/ffmpeg/include\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1502908123, "post_id": 45720607, "comment_id": 78399543, "body": "By including <code>pi_dfa.h</code> in <code>pi_utilities.cpp</code>?"}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1502908261, "post_id": 45720607, "comment_id": 78399604, "body": "@AlgirdasPreid\u017eius It seems works. Now I see in the release version of the code."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1502908733, "post_id": 45720607, "comment_id": 78399817, "body": "The pointed out discussion not seems a duplicated of mine that is more specific. Anyway  I resolved. Thanks to @AlgirdasPreid\u017eius"}], "owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1502908238, "answer_count": 0, "score": 0, "last_activity_date": 1502908016, "creation_date": 1502908016, "question_id": 45720607, "link": "https://stackoverflow.com/questions/45720607/what-to-do-when-forward-declaration-isnt-able-to-resolve-circular-dependency", "closed_reason": "Duplicate", "title": "What to do when forward declaration isn&#39;t able to resolve circular dependency?", "body": "<p>I have these files:</p>\n\n<p><strong>pi_utilities.h</strong></p>\n\n<pre><code>    #ifndef UTILITIES_H_\n#define UTILITIES_H_\n\n#include &lt;set&gt;\n#include &lt;vector&gt;\n\ntypedef unsigned short int MYTYPE2;\n\nnamespace pi\n{\n   class dfa;\n}\n\nusing namespace std;\n\nstruct ir_statistical_measures\n{\n    // True positive, and so on.\n    int tp = 0;\n    int tn = 0;\n    int fp = 0;\n    int fn = 0;\n\n    int dim_positive=0; \n    int dim_negative=0; \n\n    double accuracy  = 0; //(number in [0 1])\n    double precision = 0;\n    double recall = 0;\n    double f_measure = 0;\n    double matthews = 0;\n    double specificity = 0; //this is recall- or true negative rate\n    double bcr = 0;\n};\n\n\nvoid compute_ir_stats(const pi::dfa* dfa1 ,const pi::dfa* target,const set&lt;vector&lt;MYTYPE2&gt;&gt; &amp;test_set,ir_statistical_measures &amp;stats);\n#endif\n</code></pre>\n\n<p><strong>pi_utilities.cpp</strong></p>\n\n<pre><code> #include \"pi_utilities.h\"\n\nvoid compute_ir_stats(const pi::dfa* dfa1 ,const pi::dfa* target,const set&lt;vector&lt;MYTYPE2&gt;&gt; &amp;test_set,ir_statistical_measures &amp;stats)\n{\n   bool result;\n   result = dfa1-&gt;mq(true);\n   result = target-&gt;mq(false);\n}\n</code></pre>\n\n<p><strong>pi_dfa.h</strong></p>\n\n<pre><code>    #ifndef DFA_H_\n#define DFA_H_\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;set&gt;\n\n#include \"pi_utilities.h\"\n\ntypedef unsigned short int MYTYPE;\n\nusing namespace std;\n\nextern struct ir_statistical_measures &amp;stats; //I say to compiler that definition isn't here\n\nnamespace pi\n{\n   class dfa\n   {\n        public:\n        bool compare_dfa(const dfa *dfa_to_compare,string method,ir_statistical_measures &amp;stats1,ir_statistical_measures &amp;stats2) const;\n\n        bool m_q(bool flag) const;\n\n    };\n}\n#endif\n</code></pre>\n\n<p><strong>pi_dfa.cpp</strong></p>\n\n<pre><code>#include \"pi_dfa.h\"\n\n\n\nbool pi::dfa::compare_dfa(const dfa *dfa_to_compare , string method , ir_statistical_measures &amp;stats1 , ir_statistical_measures &amp;stats2) const\n{\n   set&lt;vector&lt;MYTYPE&gt;&gt; test_set;\n   compute_ir_stats(dfa_to_compare,this,test_set,stats1); \n\n   return true;\n}\n\nbool pi::dfa::m_q(bool flag) const\n{\n   return flag;\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"pi_dfa.h\"\n#include \"pi_utilities.h\"\n\nint main()\n{\n   pi::dfa* L_dfa=NULL;  \n   L_dfa = new pi::dfa();\n   pi::dfa* O_dfa=new pi::dfa();\n\n   bool value_return;\n   struct ir_statistical_measures test_set_ir_statistical_measures; //struct defined in pi_utilities.h\n   struct ir_statistical_measures test_set_ir_statistical_measures2;\n   value_return = L_dfa-&gt;compare_dfa(O_dfa,\"method\",test_set_ir_statistical_measures,test_set_ir_statistical_measures2);\n}\n</code></pre>\n\n<p>There is a circular dependency problem. To resolve I used forward declaration, but with the pointer of the class dfa I have to call a function of the class too, thus the definition there isn't and the compiler goes into trouble,\nI get these compile errors:</p>\n\n<pre><code>    pi_utilities.cpp: In function \u2018void compute_ir_stats(const pi::dfa*, const pi::dfa*, const std::set&lt;std::vector&lt;short unsigned int&gt; &gt;&amp;, ir_statistical_measures&amp;)\u2019:\npi_utilities.cpp:6:17: error: invalid use of incomplete type \u2018const class pi::dfa\u2019\n    result = dfa1-&gt;mq(true);\n                 ^\nIn file included from pi_utilities.cpp:1:0:\npi_utilities.h:11:10: error: forward declaration of \u2018const class pi::dfa\u2019\n    class dfa;\n          ^\npi_utilities.cpp:7:19: error: invalid use of incomplete type \u2018const class pi::dfa\u2019\n    result = target-&gt;mq(false);\n                   ^\nIn file included from pi_utilities.cpp:1:0:\npi_utilities.h:11:10: error: forward declaration of \u2018const class pi::dfa\u2019\n    class dfa;\n</code></pre>\n\n<p>Thus forward declaration isn't enough.<br>\nHow could I fix it?</p>\n\n<p>I'm using C++11\n(The code here is rearranged to a minimal executable version)</p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1502907971, "post_id": 45720465, "comment_id": 78399480, "body": "maybe this can be a starting point: <a href=\"https://www.google.com/search?q=create+class+diagram\" rel=\"nofollow noreferrer\">google.com/search?q=create+class+diagram</a>"}, {"owner": {"reputation": 1, "user_id": 8474151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d6d9591ec6589f090c580d506f6a20?s=128&d=identicon&r=PG&f=1", "display_name": "JLamb", "link": "https://stackoverflow.com/users/8474151/jlamb"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1502909889, "post_id": 45720465, "comment_id": 78400351, "body": "going through the search results yields that the best way would be to go through another program. is it safe to assume that doxygen is unable to do this? I was hoping to stay with doxygen, as it is the primary source for the project."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1502909945, "post_id": 45720465, "comment_id": 78400377, "body": "I have little experience with Doxygen. I was just offering some options."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502916780, "post_id": 45720465, "comment_id": 78403543, "body": "The closest Doxygen comes to class diagrams, are rectangles with the class name in them.  You may want to tools that <i>draw UML diagrams from C++ code</i>."}], "owner": {"reputation": 1, "user_id": 8474151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d6d9591ec6589f090c580d506f6a20?s=128&d=identicon&r=PG&f=1", "display_name": "JLamb", "link": "https://stackoverflow.com/users/8474151/jlamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502907420, "creation_date": 1502907420, "question_id": 45720465, "link": "https://stackoverflow.com/questions/45720465/class-diagrams-with-doxygen", "title": "Class diagrams with Doxygen", "body": "<p>The situation that I'm in currently is that I'm trying to create a series of class diagrams to use for a c++ project. And while for the most part I'm able to do this automatically for the classes that inherit from another class or ones that have an instance of another class inside their code, I'm unable to create a diagram for the classes that don't do either of these. So I'm wondering if there is a way to create a class diagram in this case. Any help at all would be greatly appreciated.</p>\n"}, {"tags": ["c++", "clr"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1502906461, "post_id": 45720187, "comment_id": 78398717, "body": "Not going to work. Treat /CLR as essentially a deprecated option. You should not be developing new WinForms applications in C++."}, {"owner": {"reputation": 1611, "user_id": 3995346, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/9KaXW.jpg?s=128&g=1", "display_name": "Maciej Wojcik", "link": "https://stackoverflow.com/users/3995346/maciej-wojcik"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1502906529, "post_id": 45720187, "comment_id": 78398756, "body": "@CodyGray unfortunately i must"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1502906599, "post_id": 45720187, "comment_id": 78398781, "body": "Hard to imagine how you would ever get yourself into a situation where you &quot;must&quot;. There are lots of other ways to implement a UI in C++. Either way, if you must, then you&#39;ll need to use something other than the concurrency runtime to implement threads."}, {"owner": {"reputation": 1611, "user_id": 3995346, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/9KaXW.jpg?s=128&g=1", "display_name": "Maciej Wojcik", "link": "https://stackoverflow.com/users/3995346/maciej-wojcik"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1502907384, "post_id": 45720187, "comment_id": 78399183, "body": "@CodyGray I tried implement UI in C++ in other way&#39;s, but none worked fine. One way is probably using dialogs in WIN32, but the dialog&#39;s are really old, and they don&#39;t have component&#39;s that I want to use in my project. I tried with clr but this fails. Do You have some good advice for me? How should i add UI to this?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1502907535, "post_id": 45720187, "comment_id": 78399260, "body": "There isn&#39;t enough information in that comment for me to make suggestions. I use Win32 to develop apps all the time. The dialogs aren&#39;t &quot;old&quot;. You can do anything in Win32 that you can do using the .NET Framework. Maybe if you gave a specific example of a control that you needed? Beware, though, that SO does not really do &quot;recommendation&quot; questions. Another popular C++ UI library for those who feel that Win32 is too low-level is Qt. There are tons of others; use Google to find them. The error message already tells you what the problem is: the concurrency runtime isn&#39;t supported with CLR."}], "owner": {"reputation": 1611, "user_id": 3995346, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/9KaXW.jpg?s=128&g=1", "display_name": "Maciej Wojcik", "link": "https://stackoverflow.com/users/3995346/maciej-wojcik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502906329, "creation_date": 1502906329, "question_id": 45720187, "link": "https://stackoverflow.com/questions/45720187/win32-console-app-clr-problems-with-threads", "title": "WIN32 Console App -&gt; CLR problems with threads", "body": "<p>I have change my win32 console application c++ project into project that could handled windows form, so i switched into CLR.</p>\n\n<p>I have problems with threads, specially with concurrent queue.</p>\n\n<p>In my .h class i have:</p>\n\n<pre><code>#include &lt;concurrent_queue.h&gt;\n...\nconcurrent_queue&lt;unsigned char*&gt; queue;\\\n</code></pre>\n\n<p>In .cpp for example:</p>\n\n<pre><code>queue.try_pop(record)\n</code></pre>\n\n<p>There I have errors:</p>\n\n<pre><code>ERROR: Concurrency Runtime is not supported when compiling /clr.\n</code></pre>\n\n<p>I know that I must change my current queue with something else, but i don't know into what, and how.</p>\n\n<p>Can You please help me? I searched on stack, but I don't know how to change this queue.</p>\n"}, {"tags": ["c++", "linux", "performance", "sqlite"], "comments": [{"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 1, "creation_date": 1502906361, "post_id": 45720131, "comment_id": 78398659, "body": "C++ code, table structure"}, {"owner": {"reputation": 1447, "user_id": 671827, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fdd49c2310be1ef3a4f7c1a61f579498?s=128&d=identicon&r=PG", "display_name": "While-E", "link": "https://stackoverflow.com/users/671827/while-e"}, "reply_to_user": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1502907631, "post_id": 45720131, "comment_id": 78399315, "body": "Code is irrelevant, as it happens in terminal... will add table structure though"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1502907811, "post_id": 45720131, "comment_id": 78399409, "body": "I would try to rule out the current system. Copy the database to a pc and try the same query."}, {"owner": {"reputation": 1447, "user_id": 671827, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fdd49c2310be1ef3a4f7c1a61f579498?s=128&d=identicon&r=PG", "display_name": "While-E", "link": "https://stackoverflow.com/users/671827/while-e"}, "edited": false, "score": 0, "creation_date": 1502908048, "post_id": 45720131, "comment_id": 78399516, "body": "Wow, great idea, can&#39;t begin to understand why my brain didn&#39;t go there. It is indeed &lt;1s on my actual PC. So there&#39;s something off about the target system that&#39;s slowing it down."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502909860, "post_id": 45720131, "comment_id": 78400340, "body": "Either @drescherjm or OP, in my opinion either of you could make a nice answer, to create a decent Q/A pair."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502910927, "post_id": 45720131, "comment_id": 78400843, "body": "I am not sure my comment solves the issue just gets the OP to look elsewhere."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1502959621, "post_id": 45720131, "comment_id": 78418442, "body": "Show the table structure, any indexes you have, and the output of <a href=\"http://www.sqlite.org/eqp.html\" rel=\"nofollow noreferrer\">EXPLAIN QUERY PLAN</a>."}], "owner": {"reputation": 1447, "user_id": 671827, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fdd49c2310be1ef3a4f7c1a61f579498?s=128&d=identicon&r=PG", "display_name": "While-E", "link": "https://stackoverflow.com/users/671827/while-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502908125, "creation_date": 1502906101, "last_edit_date": 1502908125, "question_id": 45720131, "link": "https://stackoverflow.com/questions/45720131/sqlite3-performance-issues-with-single-row-update", "title": "Sqlite3 performance issues with single row UPDATE", "body": "<p><strong>Background:</strong></p>\n\n<p>So as the title suggests, I am having performance issues with sqlite3 doing a simple update on a single row, and I can't track it down.</p>\n\n<p>I've already disabled synchronous and journal_mode, as suggested in every other performance thread I've read through.</p>\n\n<hr>\n\n<p><strong>Details:</strong></p>\n\n<p>Kernel: Linux beaglebone 4.4.30-ti-r64</p>\n\n<p>FileSystem: Linux beaglebone 4.4.30-ti-r64</p>\n\n<p>SQLite: 3.8.7.1 2014-10-29 13:59:56</p>\n\n<p>Row Count: 163</p>\n\n<p>Query: (UPDATE tableX SET value='15' WHERE parm='parmY')</p>\n\n<p>Time To Execute: 2730 ms</p>\n\n<p>Schema: TABLE tableX (rowId INTEGER PRIMARY KEY AUTOINCREMENT, parm varchar(32), value varchar(32));</p>\n\n<hr>\n\n<p>I make the assumption that I'm only updating one row, and there's only 163 to parse through to find the proper one, so where am I going wrong to cause this type of performance hit on such a simply query?</p>\n\n<p>I initially thought it was my code causing the issue somehow, but when I tried it directly through the terminal, the time was very similar.</p>\n\n<hr>\n\n<p><strong>Edit 1:</strong> Copied DB to host PC, and it is performing as expected with very quick return from this query. Now to figure out exactly what's going on with the target system that could be causing this.</p>\n"}, {"tags": ["c++", "multithreading", "c++14"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1502910841, "post_id": 45719784, "comment_id": 78400802, "body": "Seems like a clear bug to me. Did you submit a bugreport? If you did, can you please share the link?"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1503074391, "post_id": 45719784, "comment_id": 78480667, "body": "gcc  (HEAD) 8...  is affected by this too"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1503128866, "post_id": 45719784, "comment_id": 78496263, "body": "I don&#39;t think it&#39;s a bug.  Why would your app waste time initializing data for every thread you create even if it will not use it? Thread-local storage is handled by the OS, and not by the compiler."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1503471053, "post_id": 45719784, "comment_id": 78622260, "body": "@Micha&#235;l Roy it is value initialized (<code>A::m{};</code> line).  The problem here is how gcc handles instantiation of template variable that is a static member, it happens without value initialization."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1503498884, "post_id": 45719784, "comment_id": 78643051, "body": "gcc handles &#39;regular&#39; instantiation of template static variables just fine.  But <i>any</i> thread-local variable needs thread-local initialization, since the OS requires the actual thread that uses the variable to allocate a slot for it,"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1512055758, "post_id": 45719784, "comment_id": 82110901, "body": "You should add a link to your bug report as an answer and select it as your answer so this drops off the &#39;unanswered question&#39; list."}], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 2635357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b371653dc9cd779146b536836d387f7?s=128&d=identicon&r=PG", "display_name": "maiphi", "link": "https://stackoverflow.com/users/2635357/maiphi"}, "is_accepted": true, "score": 4, "last_activity_date": 1513516777, "last_edit_date": 1513516777, "creation_date": 1513516405, "answer_id": 47855476, "question_id": 45719784, "link": "https://stackoverflow.com/questions/45719784/thread-local-static-member-template-definition-initialisation-fails-with-gcc/47855476#47855476", "title": "thread_local static member template definition: initialisation fails with gcc", "body": "<p>Once again, to close the question: I submitted a bug report, see <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81880\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81880</a></p>\n"}], "owner": {"reputation": 461, "user_id": 2635357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b371653dc9cd779146b536836d387f7?s=128&d=identicon&r=PG", "display_name": "maiphi", "link": "https://stackoverflow.com/users/2635357/maiphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1269, "favorite_count": 4, "accepted_answer_id": 47855476, "answer_count": 1, "score": 32, "last_activity_date": 1513516777, "creation_date": 1502904817, "last_edit_date": 1502974198, "question_id": 45719784, "link": "https://stackoverflow.com/questions/45719784/thread-local-static-member-template-definition-initialisation-fails-with-gcc", "title": "thread_local static member template definition: initialisation fails with gcc", "body": "<p>When a static member in a C++ class is both <code>thread_local</code> and a member template, it doesn't get initialised.</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n\nclass A {\npublic:\n  template&lt;typename T&gt;\n  thread_local static std::unordered_map&lt;int,T&gt; m;\n};\n\ntemplate&lt;typename T&gt;\nthread_local std::unordered_map&lt;int,T&gt; A::m{};\n\nint main() {\n  // A::m&lt;int&gt; = std::unordered_map&lt;int,int&gt;{}; // solves the problem\n  std::cout &lt;&lt; A::m&lt;int&gt;.bucket_count() &lt;&lt; std::endl; // returns zero.\n  A::m&lt;int&gt;.insert({1,2}); // causes SIGPFE (hash modulo bucket_count)\n}\n</code></pre>\n\n<p>The unordered_map is not initialised and has a bucket count of zero. This leads to a zero division when the hash is taken modulo the bucket count. Without the <code>thread_local</code> or without the <code>template</code> it works fine. Initialising the member manually in every thread which uses it (commented line) solves the problem.</p>\n\n<p>Is this undefined behaviour according to the C++ standard or could this be a compiler bug? I tried with gcc 7.1.1 and with 5.2.0 which both produce the error. clang 3.8 seems to work.</p>\n\n<p>Edit: I confirmed this behaviour with gcc 8.0.0 20170817 from SVN and submitted a bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81880\" rel=\"noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81880</a></p>\n"}, {"tags": ["c++", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8327256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1af3bd7f961f2be66843fde6faafdc4?s=128&d=identicon&r=PG&f=1", "display_name": "nc_", "link": "https://stackoverflow.com/users/8327256/nc"}, "edited": false, "score": 0, "creation_date": 1502998307, "post_id": 45731208, "comment_id": 78444451, "body": "Thanks! The reason I ask this is because I need a way to shut down the program once it stops receiving data. Is using a timeout a &quot;graceful&quot; option?"}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "reply_to_user": {"reputation": 13, "user_id": 8327256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1af3bd7f961f2be66843fde6faafdc4?s=128&d=identicon&r=PG&f=1", "display_name": "nc_", "link": "https://stackoverflow.com/users/8327256/nc"}, "edited": false, "score": 0, "creation_date": 1503004100, "post_id": 45731208, "comment_id": 78447362, "body": "@nc_ I haven&#39;t really used the option myself, but that at least sound reasonable to me, as long as your timeout is long enough to make sure that you don&#39;t stop on a delay or in the middle of an evaluation. But you may also research about possible caveats of using that option."}], "tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": true, "score": 1, "last_activity_date": 1502962032, "last_edit_date": 1502962032, "creation_date": 1502961686, "answer_id": 45731208, "question_id": 45719598, "link": "https://stackoverflow.com/questions/45719598/passing-runoptions-in-tensorflow-c/45731208#45731208", "title": "Passing RunOptions in TensorFlow C++", "body": "<p>If you look at the headers of the current version (v1.3.0, although it seems to have been the same ever since <code>RunOptions</code> was created for v0.8.0) of <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.0/tensorflow/core/public/session.h\" rel=\"nofollow noreferrer\"><code>tensorflow::Session</code></a> and <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.0/tensorflow/cc/client/client_session.h\" rel=\"nofollow noreferrer\"><code>tensorflow::ClientSession</code></a>, there are function signatures marked as \"experimental\" that allow you to pass a <code>RunOptions</code> object. A pointer <code>RunMetadata</code> argument seems also to be required if you call <code>Run</code> this way, and looking at <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.3.0/tensorflow/core/common_runtime/direct_session.cc\" rel=\"nofollow noreferrer\">the implementation</a> it doesn't seem like you can pass <code>nullptr</code>. So you could do something like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;tensorflow/core/public/session.h&gt;\n\nint main(int argc, char *argv[])\n{\n    const int64_t TIMEOUT_MS = ...;  // Timeout in milliseconds\n    tensorflow::GraphDef graph = ...;  // Load you graph definition\n    tensorflow::Session *newSession;\n    auto status = tensorflow::NewSession(tensorflow::SessionOptions(), &amp;newSession);\n    if (!status.ok()) { /* Handle error. */ }\n    status = session-&gt;Create(graph);\n    if (!status.ok()) { /* Handle error. */ }\n    tensorflow::RunOptions run_options;\n    run_options.set_timeout_in_ms(TIMEOUT_MS);\n    tensorflow::RunMetadata run_metadata;\n    // Run parameters\n    std::vector&lt;std::pair&lt;string, Tensor&gt; &gt; inputs = ...;\n    std::vector&lt;string&gt; output_tensor_names = ...;\n    std::vector&lt;string&gt; target_node_names = ...;\n    std::vector&lt;Tensor&gt; outputs;\n    // Run\n    status = sess.Run(run_options, inputs, output_tensor_names,\n                      target_node_names, &amp;outputs, &amp;run_metadata);\n    if (!status.ok()) { /* Handle error. */ }\n    // Use output\n    // ...\n    return 0;\n}\n</code></pre>\n\n<p>Looks like the interface has been there for a long time, but since it is marked as experimental it is possible that it displays some bugs or it just changes in an upcoming version.</p>\n"}], "owner": {"reputation": 13, "user_id": 8327256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1af3bd7f961f2be66843fde6faafdc4?s=128&d=identicon&r=PG&f=1", "display_name": "nc_", "link": "https://stackoverflow.com/users/8327256/nc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "accepted_answer_id": 45731208, "answer_count": 1, "score": 1, "last_activity_date": 1502962499, "creation_date": 1502904120, "last_edit_date": 1502962499, "question_id": 45719598, "link": "https://stackoverflow.com/questions/45719598/passing-runoptions-in-tensorflow-c", "title": "Passing RunOptions in TensorFlow C++", "body": "<p>I currently have a TensorFlow graph that I created in Python and exported (as a protobuf) into C++. I am running enqueue/dequeue ops (<code>FIFOQueue</code>) via a <code>session-&gt;Run(...)</code> call, and need the call to timeout after not being able to run the operation for some time. I am able to do this in Python by feeding <code>RunOptions</code> into <code>sess.run(...)</code>. Is there a similar way to do this in C++?</p>\n"}, {"tags": ["c++", "visual-studio", "log4cxx"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502903730, "post_id": 45719461, "comment_id": 78397190, "body": "Is that file placed in your process working directory? Did you try a full pathname?"}, {"owner": {"reputation": 41, "user_id": 8473659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0173c6cbc5ca34785e1ae1df95541be6?s=128&d=identicon&r=PG&f=1", "display_name": "Doug ", "link": "https://stackoverflow.com/users/8473659/doug"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502903873, "post_id": 45719461, "comment_id": 78397268, "body": "I have tried a full pathname, it results in the same error."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1502904112, "post_id": 45719461, "comment_id": 78397416, "body": "Did you escape the path separators correctly with the full pathname? Your example isn&#39;t sufficient. What&#39;s fact for sure is, that your process won&#39;t run by default in the same directory (working directory) where your sources are placed. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question please."}, {"owner": {"reputation": 41, "user_id": 8473659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0173c6cbc5ca34785e1ae1df95541be6?s=128&d=identicon&r=PG&f=1", "display_name": "Doug ", "link": "https://stackoverflow.com/users/8473659/doug"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1502904149, "post_id": 45719461, "comment_id": 78397442, "body": "You were correct. I did not have the file in my working directory! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 1, "last_activity_date": 1502909714, "creation_date": 1502909714, "answer_id": 45721013, "question_id": 45719461, "link": "https://stackoverflow.com/questions/45719461/could-not-open-file-testxml-xml/45721013#45721013", "title": "Could not open file [TESTXML.xml]", "body": "<blockquote>\n  <p>Perhaps there is a setting in MSVS2015 I am forgetting to configure?</p>\n</blockquote>\n\n<p>No, it doesn't have to do with the configuration of that file (which should be excluded from the build BTW).</p>\n\n<p>With the information given in your question, the most probable reason that opening the configuration XML file fails is that it's not located in the same directory where your process is started.</p>\n\n<p>Visual Studio will run the executable in the same directory as it was created by default (i.e. <code>$(ProjectDir)/&lt;target&gt;/Debug</code> or <code>$(ProjectDir)/&lt;target&gt;/Release</code>).</p>\n\n<p>You can modify the process working directory in the project properties debug settings, or open a cmd window, change to the desired working directory and start your executable manually.</p>\n\n<p>Another option is to set the full path filename for the configuration file (e.g. <code>\"c:\\user\\xyz\\MySolution\\MyProject\\TESTXML.xml\"</code>). Remember that for C++ string literals, you need to escape the backslash characters (<code>\\</code> ==> <code>\\\\</code>), unless you are using a raw string literal.</p>\n"}], "owner": {"reputation": 41, "user_id": 8473659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0173c6cbc5ca34785e1ae1df95541be6?s=128&d=identicon&r=PG&f=1", "display_name": "Doug ", "link": "https://stackoverflow.com/users/8473659/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 45721013, "answer_count": 1, "score": 3, "last_activity_date": 1502909714, "creation_date": 1502903573, "last_edit_date": 1502903908, "question_id": 45719461, "link": "https://stackoverflow.com/questions/45719461/could-not-open-file-testxml-xml", "title": "Could not open file [TESTXML.xml]", "body": "<p>I am using Visual Studio 2015.</p>\n\n<p>Currently I am working on a wrapper for log4cxx so that any other logging library can be used later down the line.</p>\n\n<p>I am using DOMConfigurator to parse an XML configuration file. Basically my function wraps <code>DOMConfigurator::configure()</code>.</p>\n\n<p>I pass it a literal string, which is the name of my configuration file, in this case, \"TESTXML.xml\", however, I receive the message on my console that:</p>\n\n<blockquote>\n  <p>log4cxx: Could not open file [TESTXML.xml].</p>\n</blockquote>\n\n<p>I have also tried passing it a string variable, to no avail.</p>\n\n<p>Why can't I open the file? I have added my file under \"Source Files\" and modified the properties: </p>\n\n<ul>\n<li>Content: Yes</li>\n<li>Excluded From Build: No</li>\n</ul>\n\n<p>Perhaps there is a setting in MSVS2015 I am forgetting to configure?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502903539, "post_id": 45719407, "comment_id": 78397057, "body": "Works here: <a href=\"http://ideone.com/xzky2g\" rel=\"nofollow noreferrer\">ideone.com/xzky2g</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502903597, "post_id": 45719407, "comment_id": 78397096, "body": "@drescherjm I tried on ideone as well, and I <a href=\"http://ideone.com/ADWQrp\" rel=\"nofollow noreferrer\">could reproduce</a> the problem (I used C++14 to compile it, though..)."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1502903625, "post_id": 45719407, "comment_id": 78397118, "body": "References to static constant integral members are often elided by the compiler (which knows the value at compile time, so it just uses it directly). I forget where in the C++ spec this is allowed/expected to happen, though."}, {"owner": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "edited": false, "score": 0, "creation_date": 1502903641, "post_id": 45719407, "comment_id": 78397130, "body": "I try this code with some different compilers here <a href=\"https://wandbox.org/permlink/ULLcTpSdd4IbUnNH\" rel=\"nofollow noreferrer\">wandbox.org/permlink/ULLcTpSdd4IbUnNH</a> and <a href=\"http://rextester.com/VCPDT93931\" rel=\"nofollow noreferrer\">rextester.com/VCPDT93931</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502903726, "post_id": 45719407, "comment_id": 78397187, "body": "Hmm. Not sure what compiler I choose in ideone. Edit: looks like whatever they are using for c++14."}], "answers": [{"comments": [{"owner": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "edited": false, "score": 0, "creation_date": 1502903873, "post_id": 45719501, "comment_id": 78397270, "body": "Could you explaim more what is ODR? And what could I do if I need this code as part of header-only library?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1502903877, "post_id": 45719501, "comment_id": 78397274, "body": "It&#39;s actually worse than that.... in older versions of MSVC, defining a static const member variable in one translation unit and using it from another translation unit led to a multiple definition linker error. See <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/933699/lnk2005-when-defining-static-const-member\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/933699/&hellip;</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "edited": false, "score": 0, "creation_date": 1502904186, "post_id": 45719501, "comment_id": 78397462, "body": "@Jeka, ODR stands for One Definition Rule. Here is a reference: <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/definition</a>"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1502904290, "last_edit_date": 1502904290, "creation_date": 1502903723, "answer_id": 45719501, "question_id": 45719407, "link": "https://stackoverflow.com/questions/45719407/undefined-reference-to-static-const-integral-type/45719501#45719501", "title": "Undefined reference to static const integral type", "body": "<p>As a rule, all static const names should be defined in .cpp file if they are <a href=\"https://stackoverflow.com/questions/23491781/when-is-a-variable-odr-used-in-c14\">ODR used</a>. Taking a reference to the argument is <code>ODR using</code> them. However, having violated this rule is undefined behavior, and MSVC not reporting an error is just one of the ways undefined behavior can be manifested.</p>\n\n<p>As a practical consideration, you are likely to have the error when function is not inlined, and probably won't see it for the inlined functions. My guess is that inlining works differently with the level of optimization you are using for those compilers.</p>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1502904717, "creation_date": 1502904717, "answer_id": 45719751, "question_id": 45719407, "link": "https://stackoverflow.com/questions/45719407/undefined-reference-to-static-const-integral-type/45719751#45719751", "title": "Undefined reference to static const integral type", "body": "<blockquote>\n  <p>\u00a7 9.4.2 Static data members [class.static.data]</p>\n  \n  <ol start=\"3\">\n  <li><p>If a non-volatile const static data member is of integral or enumeration type, its declaration in the class definition can specify\n  a brace-or-equal-initializer [...] The\n  member <strong>shall still be defined in a namespace scope if it is odr-used</strong>\n  (3.2) in the program and the namespace scope definition shall not\n  contain an initializer.</p></li>\n  <li><p>[ Note: There shall be <strong>exactly one definition</strong> of a static data member that is odr-used (3.2) in a program; <strong>no diagnostic is required.</strong>\n  \u2014end note ]</p></li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 45719501, "answer_count": 2, "score": 4, "last_activity_date": 1502904717, "creation_date": 1502903455, "last_edit_date": 1502904392, "question_id": 45719407, "link": "https://stackoverflow.com/questions/45719407/undefined-reference-to-static-const-integral-type", "title": "Undefined reference to static const integral type", "body": "<p>I have a weird behaviour with static integal constants:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;inttypes.h&gt;\n\nclass Test{\npublic:\n static const uint32_t Magic = 0x1123;\n};\n\nclass DataStream{\npublic:\n    template&lt;typename T&gt;\n    DataStream&amp; operator &lt;&lt;( const T&amp; value )\n    {\n        std::cout &lt;&lt; value &lt;&lt; std::endl;\n        return *this;\n    }\n};\n\nint main()\n{\n    DataStream s;\n\n    uint32_t a = Test::Magic;  // ok\n    bool compare = ( a == Test::Magic ); // ok\n    s &lt;&lt; compare;\n    s &lt;&lt; a;\n    s &lt;&lt; Test::Magic;  // fail\n\n    return 0;\n}\n</code></pre>\n\n<p>I know that such constants should be defined outside of class in .cpp as</p>\n\n<pre><code>const uint32_t Test::Magic;\n</code></pre>\n\n<p>But strange things is that code above work fine with out line <code>s &lt;&lt; Test::Magic;</code> and produce error only if <code>Magic</code> used with template <code>operator &lt;&lt;</code> directly.</p>\n\n<p>Even more error <code>undefined reference to 'Test::Magic'</code> appear with <code>GCC</code>, but not with <code>MSVC</code>.</p>\n\n<p>The question is why I should define <code>Test::Magic</code> outside of class (even without value!!!), and why my code work fine in some conditions even without such definition?</p>\n"}, {"tags": ["c++", "multithreading", "visual-studio", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502902860, "post_id": 45719191, "comment_id": 78396649, "body": "Is the <code>MyProgramDlg::RequestDownload</code> function a <i>static</i> member function? Because it needs to be. A non-static member function has a hidden argument that becomes the <code>this</code> variable. Such problems are usually solved by using <code>static</code> wrapper functions which as arguments takes a structure containing (a pointer to) the object, and then call the real function using that object."}, {"owner": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502903341, "post_id": 45719191, "comment_id": 78396934, "body": "Yeah, it is a static member function"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1502903355, "post_id": 45719191, "comment_id": 78396942, "body": "So is this function is being run by more than one thread?  If so it sounds like you are context switching between threads in the debugger with each step instruction.  Visual Studio will do that if you have a breakpoint in such a function.  Bring up the thread window.  Start debugging.  Check to see if you are in a different thread when it jumps.  Workaround for this case is to right click on the thread you do NOT want to debug and choose &quot;Suspend&quot; (might be &quot;Freeze&quot;, I forget) and then resume debugging.  Be sure to unfreeze it when you are done"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502903373, "post_id": 45719191, "comment_id": 78396960, "body": "Isn&#39;t <a href=\"https://en.wikipedia.org/wiki/Internet_Relay_Chat\" rel=\"nofollow noreferrer\">IRC</a> an instant messaging protocol? Downloading from IRC is something new to me."}, {"owner": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "reply_to_user": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1502913053, "post_id": 45719191, "comment_id": 78401815, "body": "@Joe Thanks! Looks like that&#39;s actually the case. I added a delay at the start of the function.          Sleep(DownloadIndex * 100);  Which prevents two threads running at the same time. If someone has a better solution to this, please let me know.   VTT IRC comes with a protocol called XDCC. It&#39;s very old but still powerful. Check the download search engine and program that I&#39;m working on at xweasel.org"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1502913858, "post_id": 45719191, "comment_id": 78402203, "body": "Glad it helped (how about some upvote love?) I should say that unless you&#39;ve got dozens of these threads running, I think that suspending the threads manually from the thread window might work better.  Once that delay expires, the debugger will start jumping back again.   Regardless I hope that&#39;s debug-only code!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "edited": false, "score": 0, "creation_date": 1503358936, "post_id": 45724424, "comment_id": 78571582, "body": "I don&#39;t really know what a critical section or a mutex is. Can you give me further information about. Maybe even a code sample?"}, {"owner": {"reputation": 21, "user_id": 1282710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ac1dd05eacf2e373e44512b5ec5755?s=128&d=identicon&r=PG", "display_name": "Srivatsa", "link": "https://stackoverflow.com/users/1282710/srivatsa"}, "reply_to_user": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "edited": false, "score": 0, "creation_date": 1503376606, "post_id": 45724424, "comment_id": 78575543, "body": "See this link for a simple Critical Section implementation: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686908(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 1282710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ac1dd05eacf2e373e44512b5ec5755?s=128&d=identicon&r=PG", "display_name": "Srivatsa", "link": "https://stackoverflow.com/users/1282710/srivatsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1502926091, "creation_date": 1502926091, "answer_id": 45724424, "question_id": 45719191, "link": "https://stackoverflow.com/questions/45719191/weird-behaviour-of-thread-function-when-inserting-an-item-to-a-ctreectrl/45724424#45724424", "title": "Weird behaviour of thread function when inserting an item to a CTreeCtrl", "body": "<p>Adding just a Sleep might not work! Try adding a thread synchronization method like a critical section or a Mutex.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "edited": false, "score": 0, "creation_date": 1503352755, "post_id": 45779691, "comment_id": 78570139, "body": "Thanks for your help! Can you please give me an code example of how to do that?"}], "tags": [], "owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "is_accepted": false, "score": 0, "last_activity_date": 1503214922, "creation_date": 1503214922, "answer_id": 45779691, "question_id": 45719191, "link": "https://stackoverflow.com/questions/45719191/weird-behaviour-of-thread-function-when-inserting-an-item-to-a-ctreectrl/45779691#45779691", "title": "Weird behaviour of thread function when inserting an item to a CTreeCtrl", "body": "<p>It is illegal for a worker thread to make <strong>direct</strong> calls to the UI, which explains the weird behavior. Pass a handle to the thread, then use sendMessage / postMessage.</p>\n"}], "owner": {"reputation": 13, "user_id": 8099351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8337c45af44c2729e26e36a15bc943d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Lee", "link": "https://stackoverflow.com/users/8099351/c-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503214922, "creation_date": 1502902697, "last_edit_date": 1503041397, "question_id": 45719191, "link": "https://stackoverflow.com/questions/45719191/weird-behaviour-of-thread-function-when-inserting-an-item-to-a-ctreectrl", "title": "Weird behaviour of thread function when inserting an item to a CTreeCtrl", "body": "<p>I'm working on a IRC download client and downloads can be added by clicking a link, containing server address, port and all other information required to download a file from the irc. I'm saving this information into a file, to reload the download list when the user has quit and restarted the download client. When loading the download list, I'm running a <code>CWinThread</code> function for each download. The function creates a list (vector) of all server connections. If a connection to the appropriate server does not exist it adds a new one accordingly. Everything works as expected, but if I add an item to a <code>CTreeCtrl</code>, the program cycle seems to be way different.</p>\n\n<pre><code>//For each download I'm calling this in a loop\nAfxBeginThread(RequestDownload, (LPVOID)&amp;m_RequestStruct);\n\n//In this function I'm comparing the available server \n//connections with the required server connection\n//for the download and set a BOOL if it exists\n\nUINT MyProgramDlg::RequestDownload(LPVOID pParam)\n{\n    //...\n    if (ConnectionExists)\n    {\n        //Use the connection and \n        //don't add a new one to the list\n    }\n\n    if (!ConnectionExists)\n    {\n        //Add a new connection\n        ConnectionStruct Connection;\n        Connection.Status = STAT_DISCONNECTED;\n        Connection.Connecting = FALSE;\n        Connection.Connected = FALSE;\n        Connection.LoggingOn = FALSE;\n        Connection.LoggedOn = FALSE;\n        Connection.Listening = FALSE;\n        Connection.NetworkName = pRS-&gt;pm_Downloads-&gt;at(DownloadIndex).NetworkName;\n        Connection.NetworkAddress = pRS-&gt;pm_Downloads-&gt;at(DownloadIndex).NetworkAddress;\n\n        // Insert the tree item and save its handle\n        // The following line is the EVIL LINE that makes my program misbehave\n        Connection.hTreeItem = pRS-&gt;pm_TreeCtrl-&gt;InsertItem(_T(\"Test\"), 0, 0, NULL, NULL);\n\n        // Add the new connection\n        pRS-&gt;pm_Connections-&gt;push_back(Connection);\n        // (BREAK POINT 1)\n\n        // Get the index of the added connection\n        ConnectionIndex = (int) pRS-&gt;pm_Connections-&gt;size() - 1;\n        // (BREAK POINT 2)\n        //...\n    }\n    //...\n}\n</code></pre>\n\n<p>If I load two downloads from the same server address without(!) the \"Evil Line\", the debugger jumps from break point 1 to break point 2 and then again from break point 1 to break point 2. But with the evil line being enabled it jumps from break point 1 to break point 1 and then from break point 2 to break point 2.</p>\n\n<p>I desperately need to fix this.\nAny help is appreciated!</p>\n"}, {"tags": ["c++", ".net", "dll", "regsvr32"], "answers": [{"comments": [{"owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "edited": false, "score": 0, "creation_date": 1502932803, "post_id": 45719636, "comment_id": 78408044, "body": "I tried what you said but I didn&#39;t resolve the issue. There&#39;s nothing wrong in DLLMain I think."}], "tags": [], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1502904264, "creation_date": 1502904264, "answer_id": 45719636, "question_id": 45719111, "link": "https://stackoverflow.com/questions/45719111/having-problems-registering-and-using-a-64-bit-c-written-atl-dynamic-library/45719636#45719636", "title": "Having problems registering and using a 64-bit C++ written ATL dynamic library", "body": "<ol>\n<li>Go into the project properties of the DLL you're trying to register</li>\n<li>Go to Configuration Properties >> Debugging</li>\n<li>Under \"Command\", click on the little down arrow and choose \"regsvr32.exe\"</li>\n<li>Under \"Command Arguments\" type \"$(TargetName)\"</li>\n<li>Put a breakpoint somewhere in your DLLMain</li>\n<li>Now Debug the DLL (Right click on the dll project in solution explorer and choose \"Debug\")</li>\n</ol>\n\n<p>If you get to your DLL main, you can debug from there until it fails.  If you do not, you should take a look at the output window to see any relevant messages.  You might need to change your output window filters too.  Right Click on the output window and check all categories of messages to be sure it gives you everything and then debug again.</p>\n\n<p>That should at least tell you where you are failing.  Look for module load failures and the like</p>\n\n<p>Edited to add - you might try just changing the build step by removing the \"/S\".  That is \"Silent\" mode and in this case you want to see the messages.</p>\n"}, {"tags": [], "owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "is_accepted": true, "score": 0, "last_activity_date": 1502976734, "creation_date": 1502976734, "answer_id": 45736548, "question_id": 45719111, "link": "https://stackoverflow.com/questions/45719111/having-problems-registering-and-using-a-64-bit-c-written-atl-dynamic-library/45736548#45736548", "title": "Having problems registering and using a 64-bit C++ written ATL dynamic library", "body": "<p>I finally solved the problem by removing <code>mincore.lib</code> from linked <code>.lib</code> files in both x86 and x64 versions of project, which I recently linked to use <code>GetFileVersionInfoSize</code> API function.</p>\n"}], "owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 1, "accepted_answer_id": 45736548, "answer_count": 2, "score": 2, "last_activity_date": 1502976734, "creation_date": 1502902344, "last_edit_date": 1502932895, "question_id": 45719111, "link": "https://stackoverflow.com/questions/45719111/having-problems-registering-and-using-a-64-bit-c-written-atl-dynamic-library", "title": "Having problems registering and using a 64-bit C++ written ATL dynamic library", "body": "<p>I am having issues registering and using a dynamic library under Windows 7 x64, the 64-bit version of dll compiles but the compiler log outputs:</p>\n\n<blockquote>\n  <p><strong><code>Error   MSB3073:    The command \"RegSvr32 /S \"...\\x64\\Debug\\xxxxx.dll\" exited with code 3.</code></strong></p>\n</blockquote>\n\n<p>But, when I build 32-bit version of the dll, compiler log outputs the RegSvr32 command was successful.</p>\n\n<p>I already set the <code>Linker &gt;&gt; General &gt;&gt; Register Output</code> to <code>No</code> in both x86 and x64 build configurations.</p>\n\n<p>I tried running 64-bit and 32-bit version of RegSvr32 (without silent mode) with 64-bit dll, but it responds with the following error:</p>\n\n<blockquote>\n  <p><strong><code>The module \"xxxxx.dll\" failed to load. Make sure the binary is stored at the specified path or debug it to check for problems with the binary or dependent .DLL files. The specified module could not be found.</code></strong></p>\n</blockquote>\n\n<p>I checked it using dependency walker and it reported more than 100 dlls are missing so, I cannot show them here. Some of them are:</p>\n\n<pre><code>API-MS-WIN-CORE-COM-L1-1-1.DLL\nAPI-MS-WIN-CORE-DATETIME-L1-1-1.DLL\nAPI-MS-WIN-CORE-DEBUG-L1-1-1.DLL\nAPI-MS-WIN-CORE-ERRORHANDLING-L1-1-1.DLL\nAPI-MS-WIN-CORE-FILE-L1-2-1.DLL\n...\nWLANUTIL.DLL\nWLDAP32.DLL\nWTSAPI32.DLL\nXMLLITE.DLL\n</code></pre>\n\n<p>Dependency Walker with opened dll:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BL8Os.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BL8Os.jpg\" alt=\"Dependency Walker with opened dll\"></a></p>\n\n<p>I am wondering what the reason for only 64-bit version of dll cannot register using RegSvr32.</p>\n\n<p>Any help is greatly appreciated to resolve this issue.</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>Trying to running the application with this dynamic library results in the following error (both 32-bit and 64-bit versions) :</p>\n\n<blockquote>\n  <p><strong><code>The program can't start because api-ms-win-core-errorhandling-l1-1-1.dll is missing from your computer. Try reinstalling the program to fix this problem.</code></strong></p>\n</blockquote>\n\n<p>All redistributable packages currently I have installed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rhmTL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rhmTL.jpg\" alt=\"Redistributables those already installed\"></a></p>\n\n<p>Is there any visual c++ redistributables I have to install to solve this?</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>I found More information on <code>api-ms-win-core-errorhandling-l1-1-1.dll</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/mt186421(v=vs.85).aspx\" rel=\"nofollow noreferrer\">here</a> and tried linking <code>WindowsApp.lib</code> with this dynamic library, but it even didn't resolve the issue.</p>\n\n<p><strong>UPDATE 3</strong></p>\n\n<p>I ran system file checker and it gave me following output as I thought it should:</p>\n\n<blockquote>\n  <p><strong><code>Windows Resource Protection did not find any integrity violations.</code></strong></p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1502902081, "post_id": 45718998, "comment_id": 78396234, "body": "SO is not a code writing service.  What have you tried so far?  Also please re-read: <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1502902139, "post_id": 45718998, "comment_id": 78396260, "body": "You declare <code>_health</code> as <code>private</code>, so why expect to be able to use that outside of member functions or <code>friend</code> classes?"}, {"owner": {"reputation": 23, "user_id": 8245596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MO7ai.jpg?s=128&g=1", "display_name": "Krowe3", "link": "https://stackoverflow.com/users/8245596/krowe3"}, "edited": false, "score": 0, "creation_date": 1502902188, "post_id": 45718998, "comment_id": 78396287, "body": "I have tried to cout the players house in my player move function but it tells me class player type name is not allowed even though I included player.h"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1502902203, "post_id": 45718998, "comment_id": 78396297, "body": "Also of note: if you get a compiler error, make sure you specify the <i>exact</i> error message and the line it pertains to."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1502902315, "post_id": 45718998, "comment_id": 78396350, "body": "Please study the concept of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502902526, "post_id": 45718998, "comment_id": 78396461, "body": "<b><i>class player type name is not allowed even though I included player.h</i></b> My guess is you have a circular include path. With that said please post the exact text of your errors instead of paraphrasing. Get that from the Output tab of Visual Studio."}, {"owner": {"reputation": 1678, "user_id": 1109847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b3e3fea46d3703692d26915260d2503?s=128&d=identicon&r=PG", "display_name": "Lefsler", "link": "https://stackoverflow.com/users/1109847/lefsler"}, "edited": false, "score": 1, "creation_date": 1502902657, "post_id": 45718998, "comment_id": 78396537, "body": "Just a tip: If you are using &quot;using namespace std;&quot; stop now. It can, in the future lead to weird behaviur because of name clash. And using namespace * is not a good practice to import all the namespace."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502916960, "post_id": 45718998, "comment_id": 78403637, "body": "See also <a href=\"https://stackoverflow.com/questions/45703037/c-how-to-make-text-health-bar\">How to make text health bar</a>."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1502904778, "post_id": 45719157, "comment_id": 78397785, "body": "nitpick:  accessor methods like this should be tagged const, e.g. int getHealth() const {...}"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502917037, "post_id": 45719157, "comment_id": 78403666, "body": "nitpick:  The <code>this-&gt;</code> syntax is not needed in this case.  It is only needed when parameters or variables have the same name as class members (use renaming to avoid the <code>this-&gt;</code> syntax)."}, {"owner": {"reputation": 1678, "user_id": 1109847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b3e3fea46d3703692d26915260d2503?s=128&d=identicon&r=PG", "display_name": "Lefsler", "link": "https://stackoverflow.com/users/1109847/lefsler"}, "edited": false, "score": 0, "creation_date": 1502975660, "post_id": 45719157, "comment_id": 78429988, "body": "I agree on both. I didn&#39;t mentioned const on get because it seems that the user is having problems with the idea of public/private, so to avoid confusion. The this-&gt; is just because I am used to use this, even if there is no another variable with the same name. There will be no issue for the compiler because of the this-&gt;. And about causing confusion, this only depends on the standard that people are using."}], "tags": [], "owner": {"reputation": 1678, "user_id": 1109847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b3e3fea46d3703692d26915260d2503?s=128&d=identicon&r=PG", "display_name": "Lefsler", "link": "https://stackoverflow.com/users/1109847/lefsler"}, "is_accepted": true, "score": 0, "last_activity_date": 1502902569, "creation_date": 1502902569, "answer_id": 45719157, "question_id": 45718998, "link": "https://stackoverflow.com/questions/45718998/i-made-a-rougelike-game-in-visual-studio-and-i-want-to-display-the-players-healt/45719157#45719157", "title": "I made a rougelike game in visual studio and i want to display the players health", "body": "<p>You probably understands the concept of private/public. If not, you should understand that private means that, everything on that scope cannot be accessed from outside. For your problem you should create a public method, like your getPosition that returns the health, like </p>\n\n<pre><code>int getHealth(){ return this-&gt;_health; }\n</code></pre>\n\n<p>Study private and public. C++ is a complex language, even if, for now, it does not seems like that hard it will get hard, specially if you are trying to write a game.</p>\n"}], "owner": {"reputation": 23, "user_id": 8245596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MO7ai.jpg?s=128&g=1", "display_name": "Krowe3", "link": "https://stackoverflow.com/users/8245596/krowe3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 45719157, "answer_count": 1, "score": -1, "last_activity_date": 1502902569, "creation_date": 1502901922, "question_id": 45718998, "link": "https://stackoverflow.com/questions/45718998/i-made-a-rougelike-game-in-visual-studio-and-i-want-to-display-the-players-healt", "title": "I made a rougelike game in visual studio and i want to display the players health", "body": "<p>I made a player class which holds everything related to the player. Can I call player.h in my GameSystem.h and do cout your health and go player._health. Am I doing something wrong cause it says class player type name is now aloud.</p>\n\n<pre><code>class Player\n{\npublic:\nPlayer();\nvoid init(int level, int health, int attack, int defense, int experience);\n\nint attack();\nint takeDamage(int attack);\n\n\n\n// Set Player funtion\nvoid setPosition(int x, int y);\n\nvoid addExperience(int experience);\n\nvoid setHP(int hp);\n\nvoid setMaxHP(int hp);\n\n// Get player position\nvoid getPosition(int &amp;x, int &amp;y);\n\n\nprivate:\n// Player porperties\nint _level;\nint _health;\nint _maxHp;\nint _attack;\nint _defense;\nint _experience;\n\n// Player Position\nint _x;\nint _y;\n\n\n};\n</code></pre>\n\n<p>I want to call the players health in my GameSystem.cpp how would I go about doing that.</p>\n\n<pre><code>#include \"GameSystem.h\"\n#include \"Player.h\"\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n\n\n// Constructor which sets up the game\nGameSystem::GameSystem(string levelFilename)\n{\n_player.init(1, 100, 10, 10, 0);\n\n_level.load(levelFilename, _player);\n\nsystem(\"pause\");\n}\n\nvoid GameSystem::playGame() \n{\nbool isDone = false;\n\nwhile (isDone != true)\n{\n    _level.print();\n    playerMove();\n}\n}\n\nvoid GameSystem::playerMove()\n{\nchar input;\nprintf(\" Enter a move command (w/s/a/d: \");\ninput = _getch();\ncout &lt;&lt; \" Your Health:\" &lt;&lt; Player._health;\n\n_level.movePlayer(input, _player);\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "gpio", "pwm", "wiringpi"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1502902179, "post_id": 45718993, "comment_id": 78396280, "body": "A 2 second search finds <a href=\"http://wiringpi.com/reference/setup/\" rel=\"nofollow noreferrer\">this</a> <i>should one of the wiringPi setup functions fail, then it would be considered a fatal program fault and the program execution will be terminated at that point with an error message printed on the terminal.</i> What&#39;s the error message?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1505832497, "post_id": 45718993, "comment_id": 79569350, "body": "What version of WiringPi?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6918162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d6a2ae1d32fe898537c024de5345ed?s=128&d=identicon&r=PG&f=1", "display_name": "user341387", "link": "https://stackoverflow.com/users/6918162/user341387"}, "is_accepted": false, "score": 0, "last_activity_date": 1506232290, "last_edit_date": 1506232290, "creation_date": 1506193945, "answer_id": 46383339, "question_id": 45718993, "link": "https://stackoverflow.com/questions/45718993/c-wiringpi-crash/46383339#46383339", "title": "C++ wiringPi Crash", "body": "<p>Try using sudo to compile and run it as sudo. It made my code run when I was using ponMode(pin #, PWM_OUTPUT)</p>\n"}], "owner": {"reputation": 1, "user_id": 8473762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28244abcb99d0a8fae8887481e3f20f1?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Mentele", "link": "https://stackoverflow.com/users/8473762/josh-mentele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506232290, "creation_date": 1502901905, "question_id": 45718993, "link": "https://stackoverflow.com/questions/45718993/c-wiringpi-crash", "title": "C++ wiringPi Crash", "body": "<p>I am trying to create a program that controls a servo motor using wiringPi.\nHowever, as soon as I call </p>\n\n<pre><code>wiringPiSetupGPIO();\n</code></pre>\n\n<p>my Pi crashes. Any Idea why this might be happening?</p>\n\n<p>My code so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;wiringPi.h&gt;\n\nusing namespace std;\n\nint main () {\n    wiringPiSetupGpio();\n\n    pinMode(18, PWM_OUTPUT);\n    pwmSetMode(PWM_MODE_BAL);\n    pwmSetClock(192);\n    pwmSetRange(2000);\n    pwmWrite(18, 200);\n}\n</code></pre>\n"}, {"tags": ["c++", "autocomplete", "visual-studio-2017"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502901860, "post_id": 45718885, "comment_id": 78396114, "body": "Looks like the closing <code>)</code> is throwing off the auto parser.  You can turn off the Automatically format statement when I type a <code>;</code> but that probably isn&#39;t what you want to do.  As a work around you can use a ranged based for loop or a standard algorithm instead."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1502901922, "post_id": 45718885, "comment_id": 78396148, "body": "If you have a microsoft account, be sure to vote this issue up: <a href=\"https://developercommunity.visualstudio.com/content/problem/27757/auto-complete-adds-parentheses-at-the-wrong-place.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/27757/&hellip;</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1502902913, "post_id": 45718885, "comment_id": 78396675, "body": "Try range for loops"}], "answers": [{"comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502902931, "post_id": 45719008, "comment_id": 78396687, "body": "@NathanOliver You can also write you own snippets."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1502903178, "post_id": 45719008, "comment_id": 78396823, "body": "It&#39;s a good solution, but it&#39;s certainly not strange to type a for loop manually. It&#39;s not like this snippet would save a significant amount of time in an editor that wasn&#39;t adding spurious parentheses."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 2, "last_activity_date": 1502902557, "last_edit_date": 1502902557, "creation_date": 1502901958, "answer_id": 45719008, "question_id": 45718885, "link": "https://stackoverflow.com/questions/45718885/how-to-fix-visual-studio-autocomplete-when-typing-for-loops/45719008#45719008", "title": "How to fix visual studio autocomplete when typing for loops?", "body": "<p>It is strange that you are typing this manually. Have you tried using stock code snippets? Type <code>for</code> and you should get a popup with <code>for</code> snippet selected -> press Tab to insert body and autoselect index variable type -> type new type -> press Tab to select index variable name and so on; finally press Enter to jump into loop body.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XvHDa.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XvHDa.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1502902026, "creation_date": 1502902026, "answer_id": 45719026, "question_id": 45718885, "link": "https://stackoverflow.com/questions/45718885/how-to-fix-visual-studio-autocomplete-when-typing-for-loops/45719026#45719026", "title": "How to fix visual studio autocomplete when typing for loops?", "body": "<p>It's a bug that was introduced in VS2017. Make sure to bump the <a href=\"https://developercommunity.visualstudio.com/content/problem/27757/auto-complete-adds-parentheses-at-the-wrong-place.html\" rel=\"nofollow noreferrer\">thread dedicated to this issue</a>, and hopefully this will encourage the VS team to prioritize fixing this bug in a future release.</p>\n"}], "owner": {"reputation": 31, "user_id": 8422365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bljgx067EnI/AAAAAAAAAAI/AAAAAAAAACA/yTclMfiPTAw/photo.jpg?sz=128", "display_name": "Alexander Chen", "link": "https://stackoverflow.com/users/8422365/alexander-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1502902557, "creation_date": 1502901499, "question_id": 45718885, "link": "https://stackoverflow.com/questions/45718885/how-to-fix-visual-studio-autocomplete-when-typing-for-loops", "title": "How to fix visual studio autocomplete when typing for loops?", "body": "<p>This has been really bugging me ever since I switched from VS 2015 to VS 2017.</p>\n\n<p>Here's what's happening:\nWhen I type this</p>\n\n<pre><code>for(int i = 0; i&lt;v.size()\n</code></pre>\n\n<p>then add a semicolon, VS autocompletes the line to this:</p>\n\n<pre><code>for(int i = 0; i&lt;v.size());\n</code></pre>\n\n<p>This is clearly not what I want, since I still need to type the increment portion of the for loop.</p>\n\n<p>How do I prevent autocomplete for this specifically? </p>\n"}, {"tags": ["c++", "neon"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 2, "creation_date": 1502900993, "post_id": 45718703, "comment_id": 78395633, "body": "did you check the assembly output of the compiler? The compiler might have optimized &quot;Code A&quot; with neon instruction by itself."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1502901800, "post_id": 45718703, "comment_id": 78396080, "body": "Look at <a href=\"https://godbolt.org/g/xQ9gxa\" rel=\"nofollow noreferrer\">this example</a> both versions use NEON instructions. In addition the bottleneck in your software might also be other things than just the ALU, it could also be memory fetches or other factors."}], "owner": {"reputation": 21, "user_id": 6577596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11433057fcbba12b951d6abb6984252e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e84\u5609\u742a", "link": "https://stackoverflow.com/users/6577596/%e5%ba%84%e5%98%89%e7%90%aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502900838, "creation_date": 1502900838, "question_id": 45718703, "link": "https://stackoverflow.com/questions/45718703/how-to-use-128-bit-register-in-rk3399-by-neon", "title": "how to use 128-bit register in rk3399 by neon?", "body": "<p>I want to use neon to optimize my cpp code.\nAnd what I use is rk3399 (<a href=\"http://wiki.t-firefly.com/index.php/Firefly-RK3399/en\" rel=\"nofollow noreferrer\">http://wiki.t-firefly.com/index.php/Firefly-RK3399/en</a> ),it should have 32 128_bit registers.\nAnd I write single codes to compare the cost of time of whether I use neon</p>\n\n<pre><code>//sample code A\nfor (int i = 0; i &lt; vLen; i++)\n{   \n    ans[i] = f[i] + q[i];\n}   \n\n//sample code B    \nfor (int i = 0; i &lt; vLen; i += 4)\n{\n    int32x4_t p = vld1q_s32(f + i);\n    int32x4_t o = vld1q_s32(q + i);\n    int32x4_t tmp = vaddq_s32 (p, o);\n    vst1q_s32 ((int32_t*)&amp;ans[i], tmp);\n}\n</code></pre>\n\n<p>I thought the code B should cost 1/4 of code A.But actually, the cost of code A and B are almost same.\nI want to know why and how to use 128-bit register to optimize my code.</p>\n\n<p>By the way, when the data type is not int32_t but int8_t, the code B will cost only 1/4 time of code A. It seems that only 32-bit register have been used.</p>\n"}, {"tags": ["c++", "stdmap", "incomplete-type"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1502900536, "post_id": 45718599, "comment_id": 78395361, "body": "Because <code>Incomplete</code> becomes complete at that point as you&#39;ve placed <code>struct Incomplete {};</code> above constructor/destructor definitions."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1502900591, "post_id": 45718599, "comment_id": 78395393, "body": "<i>defining the con- &amp; destructor in the cpp</i> as opposed to what?"}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1502901621, "post_id": 45718599, "comment_id": 78395970, "body": "It looks like you &quot;discovered&quot; that if you name a method...even a destructor...in your interface file then it requires a definition in your implementation file.  The inline method in the interface doesn&#39;t need a definition in implementation.  Looks like proper design to me."}, {"owner": {"reputation": 429, "user_id": 2916264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AsEPd.jpg?s=128&g=1", "display_name": "Tomas Dittmann", "link": "https://stackoverflow.com/users/2916264/tomas-dittmann"}, "edited": false, "score": 0, "creation_date": 1502901654, "post_id": 45718599, "comment_id": 78395995, "body": "As opposed to using the compiler generated ones or defining them in the header"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1502901734, "post_id": 45718599, "comment_id": 78396042, "body": "@TomasDittmann If you declare something, you need to define it. By the way, show an example where your problem is arising, not your solution"}, {"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1502901974, "post_id": 45718599, "comment_id": 78396176, "body": "If you are going to store an incomplete type in an STL container, you are better off storing it by reference or (smart) pointer.  The size of the reference or pointer will be the same regardless of the size of the incomplete object."}, {"owner": {"reputation": 429, "user_id": 2916264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AsEPd.jpg?s=128&g=1", "display_name": "Tomas Dittmann", "link": "https://stackoverflow.com/users/2916264/tomas-dittmann"}, "edited": false, "score": 0, "creation_date": 1502907880, "post_id": 45718599, "comment_id": 78399436, "body": "I wouldnt want a smartpointer in the map if i can use pseudo-forward-declared types"}, {"owner": {"reputation": 429, "user_id": 2916264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AsEPd.jpg?s=128&g=1", "display_name": "Tomas Dittmann", "link": "https://stackoverflow.com/users/2916264/tomas-dittmann"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1502907997, "post_id": 45718599, "comment_id": 78399491, "body": "@Amadeus My question was why this works, not how I can get this to work."}], "answers": [{"comments": [{"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1608141375, "post_id": 45719342, "comment_id": 115494347, "body": "And part of the danger is that deleting an incomplete type is undefined behavior, with the compile most often not running the destructor."}], "tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 2, "last_activity_date": 1502903911, "last_edit_date": 1502903911, "creation_date": 1502903258, "answer_id": 45719342, "question_id": 45718599, "link": "https://stackoverflow.com/questions/45718599/incomplete-type-as-member-of-stdmap/45719342#45719342", "title": "incomplete type as member of std::map", "body": "<p>This is because declaring the class member does not require <code>Incomplete</code> to be complete, but <em>invoking the <code>std::map</code> destructor does</em>, because it necessarily needs to invoke the <code>Incomplete</code> destructor to destroy the map contents.  (Invoking the default <code>std::map</code> constructor <em>could</em> require the type to be complete, depending on the implementation.  I'm not sure if the spec puts any requirements on this.  I can think of at least one implementation that would not require complete types.)</p>\n\n<p>If you rely on the compiler to generate implicit ctors/dtors for you, that means that the type must be complete when the class definition is encountered, because that's when the compiler is going to implicitly generate the ctor and dtor.  It's as though you wrote <code>inline Test::Test() {} inline Test::~Test() {}</code> immediately following the class definition.  The dtor is implicitly going to destroy the map, which is going to destroy the map contents by calling <code>~Incomplete()</code> on any stored values, which we can't do without a definition for <code>Incomplete</code>.  And there, the whole thing falls apart and you get an error.</p>\n\n<p>However, if you tell the compiler (by way of the <code>Test</code> ctor/dtor declarations) that <em>you</em> will be implementing them later, then it won't generate them, therefore no <code>std::map</code> ctor/dtor invocation gets compiled at that point.</p>\n\n<p>Then you complete the <code>Incomplete</code> type prior to defining the ctor/dtor yourself, so the <code>Incomplete</code> ctor/dtor invocations <em>can</em> be successfully compiled.  If you remove the definition of <code>Incomplete</code> then you will run into the same error.</p>\n\n<hr>\n\n<p>Note that, as others have said, you can side-step this issue by storing pointers/references to the incomplete type in the map instead.  A pointer or reference to an incomplete type is actually itself a complete type.  However, this may not be desirable in all cases so I'm hesitant to push that solution without knowing more details about how the map will be used.</p>\n"}], "owner": {"reputation": 429, "user_id": 2916264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AsEPd.jpg?s=128&g=1", "display_name": "Tomas Dittmann", "link": "https://stackoverflow.com/users/2916264/tomas-dittmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 45719342, "answer_count": 1, "score": 1, "last_activity_date": 1502903911, "creation_date": 1502900436, "question_id": 45718599, "link": "https://stackoverflow.com/questions/45718599/incomplete-type-as-member-of-stdmap", "title": "incomplete type as member of std::map", "body": "<p>I came about the same issue as described here<br>\n<a href=\"https://stackoverflow.com/questions/23119722/cant-allocate-class-with-forward-declared-value-in-stdmap-member-variable\">Can&#39;t allocate class with forward declared value in std::map member variable</a><br>\nin our codebase.</p>\n\n<p>Hoever I also found other cases where our compiler (MSVC 2017) is able to compile this...<br>\nAfter fiddling around with the code I found that defining the con- &amp; destructor in the cpp allows the files to compile.</p>\n\n<p>In <code>test.h</code>:</p>\n\n<pre><code>#ifndef TEST_H\n#define TEST_H\n\n#include &lt;map&gt;\nstruct Incomplete;\n\nclass Test {\n    std::map&lt;int, Incomplete&gt; member;\npublic:\n    Test();\n    ~Test();\n    int foo() { return 0; }\n};\n\n#endif\n</code></pre>\n\n<p>In <code>test.cpp</code>:</p>\n\n<pre><code>#include \"test.h\"\nstruct Incomplete {};\nTest::Test() {}\nTest::~Test() {}\n</code></pre>\n\n<p>In <code>main.cpp</code>:</p>\n\n<pre><code>#include \"test.h\"\n\nint main() \n{\n    Test test;\n    return test.foo();\n}\n</code></pre>\n\n<h1>Why does defining the con- &amp; destructor in the cpp file allow member-std::map-variables to use incomplete types?</h1>\n"}, {"tags": ["c++", "opencv", "collision-detection", "tracking"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502901478, "post_id": 45718550, "comment_id": 78395894, "body": "You have to make the best guess (develop a heuristic), based on your knowledge of the physical constraints. e.g. If you can predict collisions, then you can predict the most likely place for the object to be in the next frame. | For some inspiration, look at part 3 of <a href=\"https://stackoverflow.com/questions/36254452/counting-cars-opencv-python-issue/36274515#36274515\">this answer</a>."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502903452, "post_id": 45718550, "comment_id": 78397009, "body": "&quot;if those 2 objects gonna have the same shape and size, the program will have a problem to correctly assign a new position to the same object because it can assign it to another object.&quot; Not exactly. If you know the previous position and the speed of say the center of the balls, you can estimate where the ball will end up in the next frame, and so when the ball shows up around that estimated position, you know which trajectory it is. Also @DanMa\u0161ek, incredible post."}], "owner": {"reputation": 31, "user_id": 8263400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d804a30f6abc7b0f1d9be3532fd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Leonek", "link": "https://stackoverflow.com/users/8263400/leonek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502900271, "creation_date": 1502900271, "question_id": 45718550, "link": "https://stackoverflow.com/questions/45718550/whats-the-best-method-for-tracking-identical-objects-opencv", "title": "What&#39;s the best method for tracking identical objects? (OpenCV)", "body": "<p>I'm sorry that my question is so wide, but I will try to explain in detail what is my problem.</p>\n\n<p>So, I just wrote a program, that checks whether two balls of different colors are on the collision track. I use RGB->HSV transform, have one yellow ball, one blue, I check their position on different frames, I calculate their speed, direction etc and after that, I predict if they may collide. So, after that I thought color-based detection is not the best solution, and I want to detect more than 2 objects, So I thought I should use edge filter, or MOG2 algorithm, or something like that I still think about that, but that's not what I wanted to ask (but if anyone could suggest me something, that's gonna be great :) )</p>\n\n<p>So when I will have a binary image with, for example, 2 object-two balls of the same size, and I'm gonna check their position, ok, so in the first frame one object is located has coordinates X1 and Y1 , second one X2 and Y2. Next I'm gonna analyze second frame, so there are gonna be still two the same objects, first has X3 and Y3 coordinates, and second one X4 and Y4, but how my program gonna now that the first object from 1 and 2 frame is the same object, if those 2 objects gonna have the same shape and size, the program will have a problem to correctly assign a new position to the same object because it can assign it to another object. In HSV it was quite easy because when the computer detected for example yellow object, it knew that its the same yellow object as in the previous frame (because it was only one yellow object). I know I described it a bit chaotic, but I hope you understand what I mean</p>\n\n<p>It seems to me that the only thing that will allow the assignment of detected objects from the previous frame is a slight change of their position, but when I started thinking about it, it's not so easy because, for example, checking the distance between newly found objects and those from the previous frame and link them on the basis of the smallest distance may turn out to be in many cases faulty.</p>\n\n<p>So I wonder if such a solution is possible at all and if there is any ready-made algorithm that will allow me to analyze the position in the previous steps of the object.</p>\n\n<p>Thanks for your time and have a nice day :)</p>\n"}, {"tags": ["c++", "string", "stdin", "getline", "eof"], "comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 5, "creation_date": 1502900066, "post_id": 45718472, "comment_id": 78395059, "body": "Enter key is still a valid string."}, {"owner": {"reputation": 329, "user_id": 7182492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f76021771b903623bd742b88ab804f7a?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/7182492/ssharma"}, "reply_to_user": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502900106, "post_id": 45718472, "comment_id": 78395084, "body": "then how to stop taking input if there is no other left?"}, {"owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 1, "creation_date": 1502900255, "post_id": 45718472, "comment_id": 78395175, "body": "Depends on OS. If memory serves, in Windows it&#39;s <code>Ctrl+Z</code>, in Unix it&#39;s <code>Ctrl+D</code>."}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "reply_to_user": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 0, "creation_date": 1502900282, "post_id": 45718472, "comment_id": 78395193, "body": "@Abstraction Some are <code>Ctrl C</code>  too."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502900416, "post_id": 45718472, "comment_id": 78395284, "body": "If you&#39;re reading data from a online judge it should put an end of stream in there for you."}, {"owner": {"reputation": 329, "user_id": 7182492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f76021771b903623bd742b88ab804f7a?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/7182492/ssharma"}, "edited": false, "score": 0, "creation_date": 1502900482, "post_id": 45718472, "comment_id": 78395323, "body": "So,the method in the question should work if the EOF is there?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502900609, "post_id": 45718472, "comment_id": 78395401, "body": "Yes.  As long as there there is a EOF in the stream they will work."}], "answers": [{"tags": [], "owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "is_accepted": true, "score": 2, "last_activity_date": 1601064272, "last_edit_date": 1601064272, "creation_date": 1502900197, "answer_id": 45718530, "question_id": 45718472, "link": "https://stackoverflow.com/questions/45718472/how-to-take-variable-input-from-stdin-in-c/45718530#45718530", "title": "How to take variable input from stdin in C++", "body": "<p>You can write</p>\n<pre><code>while (std::getline(std::cin, line) &amp;&amp; !line.empty()) {\n    // ...\n}\n</code></pre>\n<p>Only keep looping when the fetched string is nonempty.</p>\n"}], "owner": {"reputation": 329, "user_id": 7182492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f76021771b903623bd742b88ab804f7a?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/7182492/ssharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3652, "favorite_count": 0, "closed_date": 1502900182, "accepted_answer_id": 45718530, "answer_count": 1, "score": 0, "last_activity_date": 1601064272, "creation_date": 1502900009, "question_id": 45718472, "link": "https://stackoverflow.com/questions/45718472/how-to-take-variable-input-from-stdin-in-c", "closed_reason": "Duplicate", "title": "How to take variable input from stdin in C++", "body": "<p>I was trying to take input variable number of strings and numbers.Found this solution <a href=\"https://stackoverflow.com/questions/201992/how-to-read-until-eof-from-cin-in-c\">link</a>:</p>\n\n<p>I tried this for <strong>numbers</strong>:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main(){\n    int np;\n    while (cin&gt;&gt;np){\n        cout &lt;&lt; np&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>for <strong>strings:</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\nint main(){\n    string line;\n    while (getline(cin, line)){\n        cout &lt;&lt; line &lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But,when I run the code,even if I just press enter it doesn't come out of the loop.The loop should terminate if just an enter key is pressed,but that does not happen.</p>\n\n<p>Please provide suggestions how to achieve this functionality.  </p>\n"}, {"tags": ["c++", "command-line-arguments", "clang++", "pointer-arithmetic", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1502900088, "post_id": 45718389, "comment_id": 78395071, "body": "If you only need <code>argv[0]</code>, you can use <code>*argv</code>. But beyond that, nope."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502901245, "post_id": 45718389, "comment_id": 78395767, "body": "Try using <code>&amp;argv[0]</code>.  I believe <code>cout</code> wants a pointer to a single character."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1502901297, "post_id": 45718389, "comment_id": 78395796, "body": "Does it still complain if you make <code>argv</code> an array and not a pointer? <code>char * argv[]</code>?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1502901391, "post_id": 45718389, "comment_id": 78395847, "body": "@spectras <code>argv</code> is an argument of <code>main</code>. It is always a pointer."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1502901626, "post_id": 45718389, "comment_id": 78395972, "body": "@user2079303&gt; or always an array."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1502901656, "post_id": 45718389, "comment_id": 78395997, "body": "@spectras never an array. Function arguments cannot be arrays."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1502902114, "post_id": 45718389, "comment_id": 78396248, "body": "@user2079303&gt; are you just nitpicking on the meaning of the syntax? Or are you implying that <code>int main(int argc, char * argv[])</code> is not valid? Of course it&#39;s still a pointer, but declaring it with array syntax makes the intent explicit and might be enough to get a code analyzer to shut up."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1502902365, "post_id": 45718389, "comment_id": 78396375, "body": "@spectras it is valid syntax, but calling the argument an array is not correct. It is a pointer regardless of syntax used. Confusing this is a common beginner error, and even if you understand the difference, beginners who read your comment might not."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1502902464, "post_id": 45718389, "comment_id": 78396424, "body": "It&#39;s just implementation core guidelines ran amok. A better implementation should recognize the special case of <code>main</code> and stop bothering you about pointer arithmetic in this case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1502902889, "post_id": 45718389, "comment_id": 78396663, "body": "@SergeyA It seems pretty clear to me that the implementation matches the guideline. You&#39;re free to disagree with the guideline in this case, or even in general, but an implementation which claims to warn about violations of that guideline should actually warn about violations of that guideline. It&#39;s easy to suppress warnings you disagree with, even on a line-by-line basis."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1502903009, "post_id": 45718389, "comment_id": 78396730, "body": "@hvd Than guidelines should make an exception for <code>main</code>. It is a well-known interface which is <b>not</b> going to change, so why bother developers with this warning?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1502903244, "post_id": 45718389, "comment_id": 78396871, "body": "@SergeyA As I point out in my answer, it&#39;s possible to read the command-line arguments without changing the interface in a way that this guideline supports. But I do think it would be good if they at least address it. Whether that is by making an exception or by showing how to implement it without violating the guideline doesn&#39;t matter too much to me."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1502904039, "post_id": 45718389, "comment_id": 78397362, "body": "That code is just fine. Any tool that tells you to rewrite it is simply wrong."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1502902666, "post_id": 45718539, "comment_id": 78396542, "body": "The issue with <code>span</code>, however, is that it is bounds-checked. I hate bounds-checked containers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1502902952, "post_id": 45718539, "comment_id": 78396706, "body": "@SergeyA That sounds like you fundamentally disagree with the guideline. Which is perfectly fair, and in that case, don&#39;t turn on that warning."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1502903317, "post_id": 45718539, "comment_id": 78396919, "body": "I am in agreement with the majority of them, but this particular rule I find badly thought. A branch on every access is not what I ever want in my code."}, {"owner": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1608408171, "post_id": 45718539, "comment_id": 115577031, "body": "@SergeyA It&#39;s not a big deal, bounds check happens only when you use the [] operator. There is no bounds check when you use iterators and constructs that build upon them. Such as the ranged for loop or the functions from the &lt;algorithm&gt; and &lt;numeric&gt; headers. I would use those whenever possible, and I would rather have a slower program than an undiscovered zero-day buffer overflow exploit that would allow a hacker to run arbitrary code."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "edited": false, "score": 2, "creation_date": 1613126917, "post_id": 45718539, "comment_id": 116986050, "body": "There is no bounds checking for <code>std::span</code> in C++20."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1613127513, "post_id": 45718539, "comment_id": 116986317, "body": "&quot;<code>constexpr reference operator[](size_type idx) const;</code> Returns a reference to the <code>idx</code>-th element of the sequence. The behavior is undefined if <code>idx</code> is out of range&quot;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 14, "last_activity_date": 1613126883, "last_edit_date": 1613126883, "creation_date": 1502900228, "answer_id": 45718539, "question_id": 45718389, "link": "https://stackoverflow.com/questions/45718389/how-to-avoid-pointer-arithmetic-when-using-char-argv/45718539#45718539", "title": "How to avoid pointer arithmetic when using char** argv", "body": "<p>From <a href=\"https://clang.llvm.org/extra/clang-tidy/checks/cppcoreguidelines-pro-bounds-pointer-arithmetic.html\" rel=\"nofollow noreferrer\">clang-tidy - cppcoreguidelines-pro-bounds-pointer-arithmetic</a>:</p>\n<blockquote>\n<p>Pointers should only refer to single objects, and pointer arithmetic is fragile and easy to get wrong. <code>span&lt;T&gt;</code> is a bounds-checked, safe type for accessing arrays of data.</p>\n</blockquote>\n<p>So yes:</p>\n<blockquote>\n<p>Is there an alternative way to use the values of argv without using pointer arithmetic? Isn't accessing a char** by any sensible method going to have to use pointer arithmetic?</p>\n</blockquote>\n<p>You're entirely correct. However, the guideline is about hiding that pointer arithmetic, letting a helper class do bounds checks before performing the arithmetic. You can construct a <code>span&lt;char*&gt;</code> from <code>argv</code> and <code>argc</code>. E.g. in C++20 you would write:</p>\n<pre><code>auto args = std::span(argv, size_t(argc));\n</code></pre>\n<p>and then use <code>args</code> instead of <code>argv</code>.</p>\n"}], "owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4102, "favorite_count": 0, "accepted_answer_id": 45718539, "answer_count": 1, "score": 22, "last_activity_date": 1613126883, "creation_date": 1502899704, "last_edit_date": 1502903792, "question_id": 45718389, "link": "https://stackoverflow.com/questions/45718389/how-to-avoid-pointer-arithmetic-when-using-char-argv", "title": "How to avoid pointer arithmetic when using char** argv", "body": "<p>When trying to print the first command line argument:</p>\n\n<pre><code>std::cout &lt;&lt; argv[0] &lt;&lt; std::endl;\n</code></pre>\n\n<p>clang-tidy gives the warning:</p>\n\n<blockquote>\n  <p>warning: 'do not use pointer arithmetic'\n      from [cppcoreguidelines-pro-bounds-pointer-arithmetic]</p>\n</blockquote>\n\n<p>Is there an alternative way to use the values of <code>argv</code> without using pointer arithmetic? Isn't accessing a <code>char**</code> by any sensible method going to have to use pointer arithmetic?</p>\n\n<p>I appreciate there are some specialised functions to handle command line arguments, but they seem too heavyweight for simply printing one argument.</p>\n\n<p>I am writing in <code>c++</code>, using the <code>clang</code> compiler and building with <code>cmake</code>.</p>\n"}, {"tags": ["c++", "visual-studio-2013", "linker", "profiling"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502899604, "post_id": 45718339, "comment_id": 78394808, "body": "Which toolchain actually?"}, {"owner": {"reputation": 6525, "user_id": 635195, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73989f051527a89f75191908fd6a1e53?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/635195/derek"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502899904, "post_id": 45718339, "comment_id": 78394983, "body": "I&#39;m using Visual Studio 2017, but we are compiling with the 2013 toolchain."}, {"owner": {"reputation": 6525, "user_id": 635195, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73989f051527a89f75191908fd6a1e53?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/635195/derek"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502899955, "post_id": 45718339, "comment_id": 78395014, "body": "For this project, platform toolset = &quot;Visual Studio 2013 (v120)&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5174747, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10203353189828884/picture?type=large", "display_name": "Srikant Barik", "link": "https://stackoverflow.com/users/5174747/srikant-barik"}, "edited": false, "score": 0, "creation_date": 1537261489, "post_id": 45718996, "comment_id": 91709892, "body": "Do we get only stand alone Performance tools for VS2013 or do we need to install the enitre 2013 suite to get the performance tool?"}], "tags": [], "owner": {"reputation": 6525, "user_id": 635195, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73989f051527a89f75191908fd6a1e53?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/635195/derek"}, "is_accepted": false, "score": 0, "last_activity_date": 1502901911, "creation_date": 1502901911, "answer_id": 45718996, "question_id": 45718339, "link": "https://stackoverflow.com/questions/45718339/error-vsp1011-unable-to-obtain-debug-information-link-with-the-profile-linker/45718996#45718996", "title": "Error VSP1011: Unable to obtain debug information. Link with the /Profile linker switch", "body": "<p>I found this link:</p>\n\n<p><a href=\"https://developercommunity.visualstudio.com/content/problem/80750/analyze-c-performance-prf0002-instrumentation-fail.html\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/80750/analyze-c-performance-prf0002-instrumentation-fail.html</a></p>\n\n<p>This answer looks good.</p>\n\n<p><strong>Here is the answer below:</strong></p>\n\n<p>I had to use the 64 bit visual studio 2013 version of vsinstr.exe</p>\n\n<p>First, this is a bug in the VS2017 version of VSInstr.exe. The problem is that it cannot instrument binaries built with the VS2013 toolset. If I recall correctly, there was a change that occurred in the PDB reader components that make the newer reader not read PDBs produced by older tools. In this scenario the older toolset is being used to produce the binary and PDB, but the newer VSInstr.exe is being used to attempt the instrumentation. The newer VSInstr uses the newer PDB reader and it fails to read the PDB produced by the older tools. There's nothing you can do on your end to fix this problem, but I can suggest a workaround.</p>\n\n<p>To workaround this problem, you can revert to using the older VSInstr.exe from the command line. The older VSInstr.exe can read the PDB produced by the older toolset and instrumentation is successful. I tried this on my system and it works for me. Here are the 6 steps for you to try:</p>\n\n<p>Open a VS2013 developer command prompt as an administrator. (All subsequent operations occur in this admin cmd prompt.)\nInstrument the target application. In this case I navigated to the InstrumentationDemoApp\\Release folder, then typed \"vsinstr terrain.exe /excludesmallfuncs\". The instrumentation should indicate success.\nStart the profiler monitor with the following command: \"vsperfcmd /start:trace /out:test.vsp\". This will launch the background monitor which will collect the trace information as it is emitted by instrumented processes.\nRun the target application. In this case I ran terrain.exe.\nShutdown the profiler monitor with the following command: \"vsperfcmd /shutdown\". This command causes the background profiler monitor to shutdown and write out the \"test.vsp\" file.\nOpen the resultant \"test.vsp\" file in Visual Studio 2017. Even though the VSP file was created with the monitor from VS2013 with data from an app that was instrumented with the VSInstr.exe from VS2013, the VS2017 reader should be able to read the file just fine and display the profiling report.\nAn even easier workaround is to change the toolset to VS2015 or VS2017. In this case the toolsets produce the binaries and PDBs that the VS2017 version of VSInstr.exe can instrument. In your sample project, after I change the toolset, everything from the IDE works to do the instrumentation profiling. Of course, I believe you already know of this workaround, but the difficulty with this one is that the newer toolset may not be able to cleanly build the project and the resultant binary uses a different CRT so has potentially different behavior based on the version of the compiler and CRT or other related toolset libraries. To just get profiling to work, it may not be worth the extra work to make the newer toolset cleanly build and the risk involved in any newer libraries, etc.</p>\n\n<p>Please let me know if you could get the above workaround to work for you. If you can't, I'll be happy to dig in further.</p>\n\n<p>At the present time, we have no plans to make the VS2017 VSInstr.exe work to instrument apps that are built with the VS2013 toolset. We will keep this in mind in the future, however. If we make improvements to VSInstr.exe this is one of the improvements we will consider. Thank you for helping to make Visual Studio even better.</p>\n\n<p>Allen Denver</p>\n\n<p>Visual Studio</p>\n\n<p>ldrs  Allen Denver [MSFT] \u00b7 Jul 22 at 5:37 AM\nHi Allen,</p>\n\n<p>I tried the suggested workaround and have made one minor correction for step 3, since it wanted OUTPUT instead of OUT: vsperfcmd /start:trace /output:test.vsp</p>\n\n<p>After this, I am able to open the resulting vsp in a new VS version, so the workaroud works.</p>\n\n<p>Thank you very much for the investigation and workaround!</p>\n"}], "owner": {"reputation": 6525, "user_id": 635195, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73989f051527a89f75191908fd6a1e53?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/635195/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2491, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1502901911, "creation_date": 1502899515, "last_edit_date": 1502900524, "question_id": 45718339, "link": "https://stackoverflow.com/questions/45718339/error-vsp1011-unable-to-obtain-debug-information-link-with-the-profile-linker", "title": "Error VSP1011: Unable to obtain debug information. Link with the /Profile linker switch", "body": "<p>I am trying to profile a mixed mode program with instrumentation.</p>\n\n<p>For one of the dlls I get:</p>\n\n<pre><code>Error VSP1011: Unable to obtain debug information. Link with the /Profile linker switch.\nPRF0002: Instrumentation failed with these options: /u \"C:\\Utc\\bin\\x64\\Release\\oqpers.dll\"   /excludesmallfuncs.  Please check the output window for additional details.\n</code></pre>\n\n<p>When I look under Linker/Advanced for the project I do see:</p>\n\n<p>Yes (/PROFILE)</p>\n\n<p>Any other ideas?</p>\n"}, {"tags": ["java", "c++", "opencv", "contour"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1502899348, "post_id": 45718223, "comment_id": 78394662, "body": "what is the question?"}, {"owner": {"reputation": 307, "user_id": 8005252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3eq2j.jpg?s=128&g=1", "display_name": "ProgrammingCuber", "link": "https://stackoverflow.com/users/8005252/programmingcuber"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502899465, "post_id": 45718223, "comment_id": 78394736, "body": "I want to get the hierarchy parent the  it is done in C++. I check for  the <code>[i][4]</code> and see if it is equal to -1. It is a single value and not an array like in Java. How can I access the the last value in the hierarchy array in Java. @tobi303"}, {"owner": {"reputation": 307, "user_id": 8005252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3eq2j.jpg?s=128&g=1", "display_name": "ProgrammingCuber", "link": "https://stackoverflow.com/users/8005252/programmingcuber"}, "reply_to_user": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502899527, "post_id": 45718223, "comment_id": 78394769, "body": "updating the question. What I am looking for is the actually the reverse. C++ to Java. @Error-SyntacticalRemorse"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502899548, "post_id": 45718223, "comment_id": 78394783, "body": "just add a ? and add it to the question. Comments are overlooked easily and the question should be part of the question ;)"}, {"owner": {"reputation": 307, "user_id": 8005252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3eq2j.jpg?s=128&g=1", "display_name": "ProgrammingCuber", "link": "https://stackoverflow.com/users/8005252/programmingcuber"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502899798, "post_id": 45718223, "comment_id": 78394924, "body": "I have done most of the translation its just that I am not sure how I can access the the hierarchy parent index like I do in C++ in Java. I want to check the specific index @Error-SyntacticalRemorse"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1502900102, "post_id": 45718223, "comment_id": 78395078, "body": "If all you want is external contours, then don&#39;t bother with hierarchy and use <code>CV_RETR_EXTERNAL</code>. | If <code>hierarchy.get(i,4)</code> returns you an array with 4 elements, then just use indexing on that array to access the desired element and compare that with a single value... I&#39;m no Java wizard, but I&#39;d expect something like <code>hierarchy.get(i, 4)[3] == -1</code> to do the job."}, {"owner": {"reputation": 307, "user_id": 8005252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3eq2j.jpg?s=128&g=1", "display_name": "ProgrammingCuber", "link": "https://stackoverflow.com/users/8005252/programmingcuber"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502900340, "post_id": 45718223, "comment_id": 78395235, "body": "thanks that helped. I didn&#39;t know I could do that @DanMa\u0161ek"}], "owner": {"reputation": 307, "user_id": 8005252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3eq2j.jpg?s=128&g=1", "display_name": "ProgrammingCuber", "link": "https://stackoverflow.com/users/8005252/programmingcuber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502900213, "creation_date": 1502899167, "last_edit_date": 1502900213, "question_id": 45718223, "link": "https://stackoverflow.com/questions/45718223/using-hierarchy-to-remove-unwanted-contours", "title": "Using hierarchy to remove unwanted contours", "body": "<p>My question is how I can access the parent value like I do in C++ in Java. In C++ I get an index of the matrix. In my C++ I do <code>if(hierarchy[i][4] == -1)</code>  That checks the parent value. When I try to do so in Java <code>hierarchy[i][4]</code> is a double array. So like <code>[2.0,1.3, 3.1, 0.5]</code> how can I access the last index of the double array of the matrix in Java?</p>\n\n<p>In <strong>C++</strong> finding contours and checking hierarchy would be something like this</p>\n\n<pre><code>findContours( image, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_NONE );\n// loop through the contours/hierarchy\n    for ( int i=0; i&lt;contours.size(); i++ ) {\n        // look for hierarchy[i][3]!=-1, look at hierarchy index.\n        if ( hierarchy[i][4] == -1 ) {\n            //once this is true you can do whatever \n            Scalar colour( (rand()&amp;255), (rand()&amp;255), (rand()&amp;255) );\n            drawContours( outImage, contours, i, colour );\n        }\n    }\n}\n</code></pre>\n\n<p>Here is what I have my <strong>Java</strong> equivalent</p>\n\n<pre><code>//define hierarchy\nMat hierarchy = new Mat();\n//find contours\nImgproc.findContours(dilated, contours, hierarchy, Imgproc.RETR_TREE, Imgproc.CHAIN_APPROX_NONE);\ndouble[] whatParentShouldBe = {-1.0}; //This doesn't do what I want it to.\n\n//Remove iterate through contours \nfor(int i = 0; i &lt; contours.size(); i++){\n\n    double area = Imgproc.contourArea(contours.get(i)); \n    MatOfPoint2f contour2f = new MatOfPoint2f(contours.get(i).toArray());\n\n    double perimeter = Imgproc.arcLength(contour2f, true);\n    //Found squareness equation on wiki... \n    //https://en.wikipedia.org/wiki/Shape_factor_(image_analysis_and_microscopy)\n    double squareness = 4 * Math.PI * area / Math.pow(perimeter, 2);\n\n    System.out.println(\"4:\" + Arrays.toString(hierarchy.get(i, 4)));\n    //This prints out something like [3.0,2.1,1.9,-1]    \n    //I want to get the last index and of it see if it is -1 like the C++ example\n    //Instead what it turns out I am doing is 'if [3.0,2.1,1.9,-1] == [-1.0]\n\n    //add contour to new List if it has a square shape and no parent contours\n    if(squareness &gt;= 0.7 &amp;&amp; squareness &lt;= 0.9 &amp;&amp; area &gt;= 2000 &amp;&amp; hierarchy.get(i, 4) == whatParentShouldBe){\n       squareContours.add(contours.get(i));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "wavefront"], "comments": [{"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 1, "creation_date": 1502899423, "post_id": 45718185, "comment_id": 78394705, "body": "I don&#39;t understand.  If you want each vertex to have a unique normal, you&#39;ll have to make a unique vertex per face.  So you&#39;ll need to have nFaces * 3 vertexes each with a position and normal.  There&#39;s no way around it."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1502899578, "post_id": 45718185, "comment_id": 78394797, "body": "You will need to transform this file in a memory layout that is suitable to your application, duplicating informations where it is necessary"}, {"owner": {"reputation": 489, "user_id": 8138975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010caff8536ca6a7b4550c92046213b3?s=128&d=identicon&r=PG&f=1", "display_name": "florent teppe", "link": "https://stackoverflow.com/users/8138975/florent-teppe"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1502899790, "post_id": 45718185, "comment_id": 78394919, "body": "@Rabbid76 Okay that IS the part that I missed I though it was supposed to show the order of the vertices. So I guess I will duplicate vertices when their normal change from one use to the other. Thanks a lot."}], "answers": [{"tags": [], "owner": {"reputation": 489, "user_id": 8138975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010caff8536ca6a7b4550c92046213b3?s=128&d=identicon&r=PG&f=1", "display_name": "florent teppe", "link": "https://stackoverflow.com/users/8138975/florent-teppe"}, "is_accepted": true, "score": 0, "last_activity_date": 1502900669, "creation_date": 1502900669, "answer_id": 45718656, "question_id": 45718185, "link": "https://stackoverflow.com/questions/45718185/parse-obj-file-to-get-vertex-normals/45718656#45718656", "title": "Parse OBJ file to get vertex normals?", "body": "<p>Solved, I misunderstood the way a polygon was written Each couple, is a couple of vertex pos//vertex normal.</p>\n\n<p>To build my model, I need to make new vertices when the same vertex has different normals to be able to send it to openGL properly.</p>\n\n<p>Because in openGL one vertex has one normal, but not in a obj file. So it is up to me to adapt the OBJ file to my data model.</p>\n"}], "owner": {"reputation": 489, "user_id": 8138975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010caff8536ca6a7b4550c92046213b3?s=128&d=identicon&r=PG&f=1", "display_name": "florent teppe", "link": "https://stackoverflow.com/users/8138975/florent-teppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 45718656, "answer_count": 1, "score": 0, "last_activity_date": 1502900669, "creation_date": 1502899074, "last_edit_date": 1502899988, "question_id": 45718185, "link": "https://stackoverflow.com/questions/45718185/parse-obj-file-to-get-vertex-normals", "title": "Parse OBJ file to get vertex normals?", "body": "<p>I want to be able to load OBJ files, including the vertex normal.\nBut I quickly encountered a problem where Blender gives me 1 normal per face, and I don't understand how I can link that to my vertices.</p>\n\n<p>Here's the obj file:</p>\n\n<pre><code># Blender v2.78 (sub 0) OBJ File: ''\n# www.blender.org\no Cube\nv 1.000000 -1.000000 -0.555273\nv 1.000000 -1.000000 1.444727\nv -1.000000 -1.000000 1.444726\nv -1.000000 -1.000000 -0.555274\nv 1.000000 1.000000 -0.555273\nv 0.999999 1.000000 1.444727\nv -1.000000 1.000000 1.444726\nv -1.000000 1.000000 -0.555273\nvn 0.0000 -1.0000 0.0000\nvn 0.0000 1.0000 0.0000\nvn 1.0000 -0.0000 0.0000\nvn 0.0000 -0.0000 1.0000\nvn -1.0000 -0.0000 -0.0000\nvn 0.0000 0.0000 -1.0000\ns off\nf 1//1 3//1 4//1\nf 8//2 6//2 5//2\nf 5//3 2//3 1//3\nf 6//4 3//4 2//4\nf 3//5 8//5 4//5\nf 1//6 8//6 5//6\nf 1//1 2//1 3//1\nf 8//2 7//2 6//2\nf 5//3 6//3 2//3\nf 6//4 7//4 3//4\nf 3//5 7//5 8//5\nf 1//6 4//6 8//6\n</code></pre>\n\n<p>And the parameters\n<a href=\"https://i.stack.imgur.com/HK7n4.png\" rel=\"nofollow noreferrer\">The paramters to export to OBJ</a></p>\n\n<p>Si Have a cube with 6 faces, 8 vertices, and 12 triangles and 6 vertex normal.\nHow do I make the link between vertex and face. I thought it would be more straightforward with one VN per vertex. And in the examples I saw online it was.</p>\n\n<p>But here I need to figure out how to make the link between the two, so I guess I'll have to duplicate the vertices two since for each face the normal will be different.</p>\n\n<p>EDIT: Solved, I misunderstood the way a polygon was written Each couple, is a couple of vertex pos/vertex normal</p>\n"}, {"tags": ["c++", "qt", "plasma"], "comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502898774, "post_id": 45717983, "comment_id": 78394244, "body": "Just to clarify you want to remove the grey overlay when a button is hovered over?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502898777, "post_id": 45717983, "comment_id": 78394246, "body": "<b>it will become blue again</b>???"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 2, "creation_date": 1502898831, "post_id": 45717983, "comment_id": 78394297, "body": "Adding some pictures may help us solve your problem.  I think you are fixing up on, off, enable, disable, and hover over."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502898880, "post_id": 45717983, "comment_id": 78394337, "body": "Where have you established the blue?, please take the time to better describe your problem and/or improve your minimum code."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502904718, "post_id": 45717983, "comment_id": 78397757, "body": "In my case it does not happen to me is problem, in the following link you can see the image of what I get. <a href=\"http://imgur.com/a/UzlgB\" rel=\"nofollow noreferrer\">imgur.com/a/UzlgB</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502904794, "post_id": 45717983, "comment_id": 78397797, "body": "Please provide a complete example of your test, maybe you have implemented something different from yours."}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "edited": false, "score": 0, "creation_date": 1502909906, "post_id": 45717983, "comment_id": 78400357, "body": "I pasted complete example here <a href=\"https://pastebin.com/YuQRUnMN\" rel=\"nofollow noreferrer\">pastebin.com/YuQRUnMN</a>"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "edited": false, "score": 0, "creation_date": 1502914542, "post_id": 45717983, "comment_id": 78402573, "body": "I am just wondering if it could be caused by default system style. If I click a little other checked buttons looks alright except last one -&gt; <a href=\"http://i.imgur.com/weNK7lN.png\" rel=\"nofollow noreferrer\">i.imgur.com/weNK7lN.png</a>"}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "is_accepted": true, "score": 0, "last_activity_date": 1502959788, "creation_date": 1502959788, "answer_id": 45730554, "question_id": 45717983, "link": "https://stackoverflow.com/questions/45717983/add-style-for-qpushbutton-uncheck-state/45730554#45730554", "title": "Add style for QPushButton uncheck state", "body": "<p>This behaviour is caused by default application style of KDE5 which is Breeze. The only workaround that I found out is changing style to something else (in my case it is Oxygen). \nI also tried updating Plasma but without any success.</p>\n"}], "owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 45730554, "answer_count": 1, "score": -1, "last_activity_date": 1503144032, "creation_date": 1502898438, "last_edit_date": 1503144032, "question_id": 45717983, "link": "https://stackoverflow.com/questions/45717983/add-style-for-qpushbutton-uncheck-state", "title": "Add style for QPushButton uncheck state", "body": "<p>I started new empty project (QWidget Application). Below I put a code that I have inserted into mainwindow.cpp</p>\n\n<pre><code>for(int i = 0 ; i &lt; 10 ; i++){\n    QPushButton* b = new QPushButton();\n    b-&gt;setCheckable(true);\n    b-&gt;setChecked(false);\n    ui-&gt;centralWidget-&gt;layout()-&gt;addWidget(b);\n    b-&gt;setStyleSheet(\n        \"QPushButton          { background-color: red; }\\\n         QPushButton:checked  { background-color: black;}\");\n    connect(b, &amp;QPushButton::toggled, [b](){qDebug() &lt;&lt; \"State changed to\" &lt;&lt; b-&gt;isChecked();});\n</code></pre>\n\n<p>As you can see state is changing but after unchecking button remains blue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/cy9D6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cy9D6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "stl", "linked-list", "dynamic-memory-allocation", "abstract-data-type"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 12, "creation_date": 1502898533, "post_id": 45717938, "comment_id": 78394070, "body": "First try the standard list with a custom allocator."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 8, "creation_date": 1502898599, "post_id": 45717938, "comment_id": 78394109, "body": "<i>&quot;Lastly, iterators should be invalidated only when the corresponding element is deleted.&quot;</i> That one pretty much leaves you stranded with some nodebased structure. Those are always slow to iterate at least."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 8, "creation_date": 1502898602, "post_id": 45717938, "comment_id": 78394110, "body": "A linked list does constant insert &amp; delete only in a <i>predetermined location</i>. Otherwise it&#39;s linear in the distance to the location. (And it has terrible memory locality.)"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1502898646, "post_id": 45717938, "comment_id": 78394141, "body": "<i>completely ignored in the quoted paragraph</i>. Yes - it&#39;s the subject of the <i>next</i> paragraph, which you didn&#39;t quote. That doc seems very clear that you get efficient front/back access in exchange for the cost of a node-based container."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 9, "creation_date": 1502898800, "post_id": 45717938, "comment_id": 78394270, "body": "Watch this <i>&quot;Modern C++: What You Need to Know - Herb Sutter&quot;</i> from about 46 mins into the presentation <a href=\"https://channel9.msdn.com/Events/Build/2014/2-661\" rel=\"nofollow noreferrer\">channel9.msdn.com/Events/Build/2014/2-661</a>  where inserting random values into a <code>std::vector</code> so that they are sorted, outperforms all other contains up to 500,000 elelemts (it&#39;s more but that is where they stopped testing)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502898813, "post_id": 45717938, "comment_id": 78394282, "body": "For the iterator stability thing, <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.stable_vector\" rel=\"nofollow noreferrer\">boost.stable_vector</a> might be your friend. The linear insertion does not matter usually as finding the insertion point dominates anyways on all pure node based structures like <code>std::list</code>."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1502898850, "post_id": 45717938, "comment_id": 78394315, "body": "Either you store elements next to each other, or you don\u2019t. If you do, then you can\u2019t get the iterator stability you want; if you don\u2019t, then you get most of the performance problems of <code>std::list</code> due to poor memory locality and <i>a lot</i> of indirection.  A custom allocator might help, but it can\u2019t give you locality if you keep inserting in the middle."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 6, "creation_date": 1502899947, "post_id": 45717938, "comment_id": 78395008, "body": "Modern CPUs <i>really</i> like contiguous memory (<code>std::vector</code>) and access patterns that the prefetcher can predict easily. They <i>really</i> don&#39;t like chasing pointers all over memory (<code>std::list</code>). That&#39;s why <code>std::vector</code> usually outperforms <code>std::list</code> in real life, regardless of theoretical complexity."}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1502900235, "post_id": 45717938, "comment_id": 78395158, "body": "@Useless I noticed the following paragraph but it&#39;s not what I mean. I mean O(1) insert/delete, NOT front/back access."}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502900434, "post_id": 45717938, "comment_id": 78395298, "body": "@molbdnilo what you said seems a natural result of linear-time access. Am I missing something here?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1502900514, "post_id": 45717938, "comment_id": 78395348, "body": "Note that the referenced doc is talking about std::list in the LLVM code base, ie LLVM doesnt use it for the given reasons. It is certainly not true that std::list is rarely used, it is used <i>a lot</i>. Obviously the LLVM folks decided that for their highly specifc use case they didnt like it"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 20, "creation_date": 1502900607, "post_id": 45717938, "comment_id": 78395400, "body": "You shouldn&#39;t get all caught up on the <code>O(1)</code> insert, when sometimes <code>O(n)</code> might be faster. It&#39;s possible for <code>K * 1</code> to be larger than <code>k * n</code>. <code>std::vector</code> has a very small <code>k</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1502900880, "post_id": 45717938, "comment_id": 78395571, "body": "@user8385554 Yes, it follows that insertion/deletion at an arbitrary location is not O(1). I&#39;m not sure if you&#39;re missing anything."}, {"owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "edited": false, "score": 0, "creation_date": 1502916081, "post_id": 45717938, "comment_id": 78403230, "body": "How large is &quot;small-sized homogeneous elements&quot;?"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1502921203, "post_id": 45717938, "comment_id": 78405271, "body": "The source you quote isn&#39;t claiming that std::list isn&#39;t O(1); it says that the coefficient is high.  A pair of algorithms that do an operation in 2 cycles and $2^24$ cycles are both in O(1), but you only want to use the first one."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1502952094, "post_id": 45717938, "comment_id": 78413939, "body": "Do you need O(1) on every insertion/deletion, or is amortized O(1) ok?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1502954001, "post_id": 45717938, "comment_id": 78415017, "body": "@user8385554: Is O(1) really needed, or would amortized O(1) be okay? Or O(log N)?"}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1502957220, "post_id": 45717938, "comment_id": 78416977, "body": "@MatthieuM. It is a hypothetical question so I don&#39;t have any hard requirements:) feel free to relax the specification!"}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1502957249, "post_id": 45717938, "comment_id": 78417001, "body": "@hyde yes, it&#39;s just a hypothetical question"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1502898897, "post_id": 45718113, "comment_id": 78394350, "body": "That\u2019s approximately the same solution as using a custom allocator."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1502954143, "post_id": 45718113, "comment_id": 78415117, "body": "@DanielH: I am still hopeful that Mark meant to hide the &quot;free-list&quot; behind the allocator interface."}, {"owner": {"reputation": 856, "user_id": 4250150, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-KLzePzmbqTs/AAAAAAAAAAI/AAAAAAAAAD8/henWhVuLqE4/photo.jpg?sz=128", "display_name": "sudo rm -rf slash", "link": "https://stackoverflow.com/users/4250150/sudo-rm-rf-slash"}, "edited": false, "score": 0, "creation_date": 1502984247, "post_id": 45718113, "comment_id": 78436537, "body": "Does this fix cache locality/the cache misses from accessing the data?"}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 7, "last_activity_date": 1502898800, "creation_date": 1502898800, "answer_id": 45718113, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45718113#45718113", "title": "Efficient linked list in C++?", "body": "<p>Use two <code>std::list</code>s: One \"free-list\" that's preallocated with a large stash of nodes at startup, and the other \"active\" list into which you <code>splice</code> nodes from the free-list. This is constant time and doesn't require allocating a node.</p>\n"}, {"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 8, "creation_date": 1502899355, "post_id": 45718244, "comment_id": 78394668, "body": "Good advice, upvoted. Also, they should check if the allocation cost is the problem to begin with, instead of the indirection costs."}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1502900919, "post_id": 45718244, "comment_id": 78395587, "body": "Thanks. It is a hypothetical question - I am not really in need of such a data structure so I didn&#39;t have a more specific use case."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1502921899, "post_id": 45718244, "comment_id": 78405461, "body": "By the way, assuming the container owns the objects he puts in it, wouldn&#39;t using <code>emplace</code> offer a speed boost as well?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1502972392, "post_id": 45718244, "comment_id": 78427497, "body": "Possibly, depending on the contained type, whether it&#39;s moveable, etc. It doesn&#39;t affect the node-allocation overhead though, just the cost of initializing the node once you&#39;ve allocated it."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 89, "last_activity_date": 1502899861, "last_edit_date": 1502899861, "creation_date": 1502899247, "answer_id": 45718244, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45718244#45718244", "title": "Efficient linked list in C++?", "body": "<p>Your requirements are <em>exactly</em> those of <code>std::list</code>, except that you've decided you don't like the overhead of node-based allocation.</p>\n\n<p>The sane approach is to start at the top and only do as much as you really need:</p>\n\n<ol>\n<li><p>Just use <code>std::list</code>.</p>\n\n<p>Benchmark it: is the default allocator really too slow for your purposes?</p>\n\n<ul>\n<li><p>No: you're done.</p></li>\n<li><p>Yes: goto 2</p></li>\n</ul></li>\n<li><p>Use <code>std::list</code> with an existing custom allocator such as the Boost pool allocator</p>\n\n<p>Benchmark it: is the Boost pool allocator really too slow for your purposes?</p>\n\n<ul>\n<li><p>No: you're done.</p></li>\n<li><p>Yes: goto 3</p></li>\n</ul></li>\n<li><p>Use <code>std::list</code> with a hand-rolled custom allocator finely tuned to your unique needs, based on all the profiling you did in steps 1 and 2</p>\n\n<p>Benchmark as before etc. etc.</p></li>\n<li><p>Consider doing something more exotic as a last resort. </p>\n\n<p>If you get to this stage, you should have a <em>really</em> well-specified SO question, with lots of detail about exactly what you need (eg. \"I need to squeeze <em>n</em> nodes into a cacheline\" rather than \"this doc said this thing is slow and that sounds bad\").</p></li>\n</ol>\n\n<hr>\n\n<p>PS. The above makes two assumptions, but both are worth investigation:</p>\n\n<ol>\n<li>as Baum mit Augen  points out, it's not sufficient to do simple end-to-end timing, because you need to be sure where your time is going. It could be the allocator itself, or cache misses due to the memory layout, or something else. If something's slow, you still need to be sure <em>why</em> before you know what ought to change.</li>\n<li><p>your requirements are taken as a given, but finding ways to weaken requirements is often the easiest way to make something faster.</p>\n\n<ul>\n<li>do you really need constant-time insertion and deletion everywhere, or only at the front, or the back, or both but not in the middle?</li>\n<li>do you really need those iterator invalidation constraints, or can they be relaxed? </li>\n<li>are there access patterns you can exploit? If you're frequently removing an element from the front and then replacing it with a new one, could you just update it in-place?</li>\n</ul></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 2, "creation_date": 1502901722, "post_id": 45718641, "comment_id": 78396034, "body": "@user8385554 Nah, this approach is pretty much as old as C itself. Or how would you think that a sane C programmer would implement a hash table? So, novelty or not, +1 for providing an approach that can easily beat the <code>std::list&lt;&gt;</code> performance."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 9, "creation_date": 1502906657, "post_id": 45718641, "comment_id": 78398812, "body": "@YvesDaoust Old means not novel.  That doesn&#39;t mean it&#39;s bad.  In fact, breathing is quite good.  Very good in fact.  I wouldn&#39;t call it novel, though."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1502912596, "post_id": 45718641, "comment_id": 78401620, "body": "@YvesDaoust Exactly as Cort Ammon said: Old is neither good nor bad, but old is the opposite of novel. The technique that you outline is a good, old, proven technique that yields good performance, which is why I did upvote your answer :-)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1502982165, "post_id": 45718641, "comment_id": 78435082, "body": "@user8385554: Actually, this is a &quot;folklore&quot; solution."}, {"owner": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "edited": false, "score": 0, "creation_date": 1502984876, "post_id": 45718641, "comment_id": 78437000, "body": "This is how PHP implements its array type (it&#39;s a kind of ordered hashtable) efficiently."}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1503013488, "post_id": 45718641, "comment_id": 78450382, "body": "Does it solution have a name?"}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 18, "last_activity_date": 1502900603, "creation_date": 1502900603, "answer_id": 45718641, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45718641#45718641", "title": "Efficient linked list in C++?", "body": "<p>As an alternative, you can use a growable array and handle the links explicitly, as indexes into the array.</p>\n\n<p>Unused array elements are put in a linked list using one of the links. When an element is deleted, it is returned to the free list. When the free list is exhausted, grow the array and use the next element.</p>\n\n<p>For the new free elements, you have two options:</p>\n\n<ul>\n<li>append them to the free list at once,</li>\n<li>append them on demand, based on the number of elements in the free list vs. the array size.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1502927824, "post_id": 45724622, "comment_id": 78407020, "body": "Sorry but I don&#39;t understand why you brought up <code>std::forward_list</code>? It is still heap-allocated, right?"}, {"owner": {"reputation": 514, "user_id": 6655648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8572319f6de59c1d3e6d61e506ec4de?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo H", "link": "https://stackoverflow.com/users/6655648/pablo-h"}, "reply_to_user": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1502928610, "post_id": 45724622, "comment_id": 78407178, "body": "@user8385554  Yes, it is as much heap-allocated as <code>std::list</code> (in that you can use standard or custom allocators). But because it is simpler, everything is a bit faster. So it is worth considering, if it meets your requirements."}], "tags": [], "owner": {"reputation": 514, "user_id": 6655648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8572319f6de59c1d3e6d61e506ec4de?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo H", "link": "https://stackoverflow.com/users/6655648/pablo-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1502927489, "creation_date": 1502927489, "answer_id": 45724622, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45724622#45724622", "title": "Efficient linked list in C++?", "body": "<p>I second @Useless' answer, particularly PS item 2 about revising requirements. If you relax the iterator invalidation constraint, then using <code>std::vector&lt;&gt;</code> is <a href=\"https://www.youtube.com/watch?v=YQs6IC-vgmo\" rel=\"nofollow noreferrer\">Stroustrup's standard suggestion</a> for a small-number-of-items container (for reasons already mentioned in the comments). <a href=\"https://stackoverflow.com/questions/5056973/when-do-you-prefer-using-stdlistt-instead-of-stdvectort\">Related</a> <a href=\"https://stackoverflow.com/questions/13174339/vector-vs-list-according-to-stroustrup\">questions</a> on SO.</p>\n\n<p>Starting from C++11 there is also <code>std::forward_list</code>.</p>\n\n<p>Also, if standard heap allocation for elements added to the container is not good enough, then I would say you need to look <em>very carefully</em> at your <em>exact requirements</em> and fine tune for them.</p>\n"}, {"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 5, "last_activity_date": 1502947086, "creation_date": 1502947086, "answer_id": 45727093, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45727093#45727093", "title": "Efficient linked list in C++?", "body": "<p>The new <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0661r0.pdf\" rel=\"noreferrer\">slot_map</a> proposal claim O(1) for insert and delete.</p>\n\n<p>There is also a link to a <a href=\"https://www.youtube.com/watch?v=SHaAR7XPtNU&amp;t=2s\" rel=\"noreferrer\">video</a> with a proposed implementation and some previous work.</p>\n\n<p>If we knew more about the actual structure of the elements there might be some specialized associative containers that are much better.</p>\n"}, {"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1502978635, "post_id": 45729402, "comment_id": 78432227, "body": "Everything with an upper bound to the number of operations is automatically O(1) which makes your proposed limited allocator uninteresting. Also complexity theory <i>does</i> take the cost of iterating, fetching cache lines from memory and so on into account by saying that some constant worst case exists, which is even correct and factored into the complexity analysis."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1502979781, "post_id": 45729402, "comment_id": 78433167, "body": "@nwp: I am afraid I disagree; for the cost of insertion in a map, which is tagged O(log N), it&#39;s important to understand that O(log N) is the number of comparisons and nothing else. Using O(log N) without qualification <i>assumes</i> that comparisons are the dominating cost, this not necessarily true. On a magnetic tape (instead of RAM), seeking will dominate comparisons. If keys are sets of elements distributed across a network of computers, the dominating cost is fetching those elements, ... This is not to say algorithmic complexities are useless! Just that one needs be some things in mind."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1502980106, "post_id": 45729402, "comment_id": 78433409, "body": "It doesn&#39;t just incorrectly assume that comparisons dominate. On a magnetic tape comparisons cost basically nothing and seeking will cost basically all the time. Still the complexity is O(log N) because seeking takes a finite time (so 1 seek costs O(1)) and you will be seeking O(log N) times, making the algorithm be O(log N) regardless of whether you use a magnetic tape or RAM."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1502980872, "post_id": 45729402, "comment_id": 78434038, "body": "@nwp: I find the O(1) for seeking on a magnetic tape rather disingenuous. By that reasoning, <code>memset()</code> would be O(1) because the size of RAM is finite anyway. Instead, it is more interesting to consider the case that the length of the magnetic tape increases as the number of elements in the map increases, because it models reality more closely."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1502981182, "post_id": 45729402, "comment_id": 78434285, "body": "That has nothing to do with magnetic tapes though. That applies to all memory, including RAM. It is just not possible to increase memory size while keeping access time the same due to memory having a size and the speed of light being limited. That is a criticism of complexity theory I agree with."}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 16, "last_activity_date": 1502956201, "creation_date": 1502956201, "answer_id": 45729402, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45729402#45729402", "title": "Efficient linked list in C++?", "body": "<blockquote>\n  <p><code>std::list</code> is a doubly linked list, so despite its inefficiency in element construction, it supports <strong>insert/delete in O(1) time complexity</strong>, but this feature is completely ignored in this quoted paragraph.</p>\n</blockquote>\n\n<p>It's ignored <strong>because it's a lie</strong>.</p>\n\n<p>The problem of algorithmic complexity is that it generally measures <em>one thing</em>. For example, when we say that insertion in a <code>std::map</code> is O(log N), we mean that it performs O(log N) <em>comparisons</em>. The costs of <em>iterating</em>, <em>fetching cache lines from memory</em>, etc... are not taken into account.</p>\n\n<p>This greatly simplifies analysis, of course, but unfortunately does not necessarily map cleanly to real-world implementation complexities. In particular, one egregious assumption is <em>that memory allocation is constant-time</em>. And that, is a bold-faced lie.</p>\n\n<p>General purpose memory allocators (malloc and co), do not have any guarantee on the worst-case complexity of memory allocations. The worst-case is generally OS-dependent, and in the case of Linux it may involve the OOM killer (sift through the ongoing processes and kill one to reclaim its memory).</p>\n\n<p>Special purpose memory allocators could potentially be made constant time... within a particular range of number of allocations (or maximum allocation size). Since Big-O notation is about the limit at infinity, it cannot be called O(1).</p>\n\n<p>And thus, <em>where the rubber meets the road</em>, the implementation of <code>std::list</code> does NOT in general feature O(1) insertion/deletion, because the implementation relies on a real memory allocator, not an ideal one.</p>\n\n<hr>\n\n<p>This is pretty depressing, however you need not lose all hopes.</p>\n\n<p>Most notably, if you can figure out an upper-bound to the number of elements and can allocate that much memory up-front, then you <em>can</em> craft a memory allocator which will perform constant-time memory allocation, giving you the illusion of O(1).</p>\n"}, {"tags": [], "owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "is_accepted": false, "score": 4, "last_activity_date": 1502960897, "creation_date": 1502960897, "answer_id": 45730919, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45730919#45730919", "title": "Efficient linked list in C++?", "body": "<p>I would suggest doing exactly what @Yves Daoust says, except instead of using a linked list for the free list, use a vector. Push and pop the free indices on the back of the vector. This is amortized O(1) insert, lookup, and delete, and doesn't involve any pointer chasing. It also doesn't require any annoying allocator business.</p>\n"}, {"comments": [{"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1502983060, "post_id": 45733816, "comment_id": 78435695, "body": "In your first paragraph, why is the requirement of iterator invalidation much different from std::list? I thought std::lost only invalidates the iterator of the node being deleted.."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 1, "creation_date": 1503044139, "post_id": 45733816, "comment_id": 78460597, "body": "You only need one allocation per mutation if you keep the object by value in the nodes. This will also half the number of indirections to follow. You can also keep a free list to cache recently deleted nodes and use a pool allocation scheme on top of that. Won&#39;t help the access pattern much though."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1503045753, "post_id": 45733816, "comment_id": 78461530, "body": "@ratchetfreak: True, that will basically be an intrusive list through the backdoor, then."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1503045871, "post_id": 45733816, "comment_id": 78461610, "body": "@user8385554: It&#39;s not much different, it&#39;s exactly what std::list provides. So if you absolutely need this, there&#39;s hardly a way around list, because, unluckily, it&#39;s exactly <i>not</i> what most other (contiguous) containers that are more efficient provide. They may easily invalidate an iterator that is not the currently deleted object, or they may even invalidate an iterator only because something is inserted (and realloc happens). This can be a problem, but usually you can isolate these cases well enough so you don&#39;t get to see the problem."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1503045985, "post_id": 45733816, "comment_id": 78461678, "body": "@Damon but it&#39;s <i>exactly</i> what std::list does."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1503048131, "post_id": 45733816, "comment_id": 78463105, "body": "@ratchetfreak: I haven&#39;t looked what actual implementations do, will take your word (it sounds at least plausible that they may do something like that). Edited accordingly."}, {"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1503079899, "post_id": 45733816, "comment_id": 78483456, "body": "I have put some thought into the sentence &quot;use <code>reserve()</code> appropriately&quot; in your answer - it seems that it has to be the user who call <code>reserve()</code> in advance, as the container cannot automatically expand its capacity on-the-fly without risking reallocation."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1503085110, "post_id": 45733816, "comment_id": 78486061, "body": "Yes it has to be the user who calls it. Allocations (and possibly reallocations) must happen in some way when you are adding items. There is no way around that. However, reallocations invaildate iterators. Thus, during the time when you want the guarantee that these stay valid, no reallocations must happen. Having enough capacity (by means of having called <code>reserve</code>) prevents that. At different times when it doesn&#39;t matter at all that iterators are invalidated, it&#39;s safe to call <code>reserve()</code> again. So, it&#39;s really just about organizing."}], "tags": [], "owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "is_accepted": false, "score": 18, "last_activity_date": 1503048035, "last_edit_date": 1503048035, "creation_date": 1502969019, "answer_id": 45733816, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45733816#45733816", "title": "Efficient linked list in C++?", "body": "<p>The requirement of not invalidating iterators except the one on a node being deleted is forbidding to every container that doesn't allocate individual nodes and is much different from e.g. <code>list</code> or <code>map</code>.<br>\nHowever, I've found that in almost every case when I <strong>thought</strong> that this was necessary, it turned out with a little discipline I could just as well do without. You might want to verify if you can, you would benefit greatly.</p>\n\n<p>While <code>std::list</code> is indeed the \"correct\" thing if you need something like a list (for CS class, mostly), the statement that it is almost always the wrong choice is, unluckily, exactly right. While the O(1) claim is entirely true, it's nevertheless abysmal in relation to how actual computer hardware works, which gives it a huge constant factor. Note that not only are the objects that you iterate randomly placed, but the nodes that you maintain are, too (yes, you can somehow work around that with an allocator, but that is not the point). On the average, you have <strike>two</strike> one guaranteed cache misses for anything you do, plus <strike>up to two</strike> one dynamic allocations for mutating operations (one for the object, and another one for the node).</p>\n\n<p><strong>Edit:</strong> As pointed out by @ratchetfreak below, implementations of <code>std::list</code> commonly collapse the object and node allocation into one memory block as an optimization (akin to what e.g. <code>make_shared</code> does), which makes the average case somewhat less catastrophic (<em>one</em> allocation per mutation and one guaranteed cache miss instead of two).<br>\nA new, different consideration in this case might be that doing so may not be entirely trouble-free either. Postfixing the object with two pointers means reversing the direction while dereference which may interfere with auto prefetch.<br>\nPrefixing the object with the pointers, on the other hand, means you push the object back by two pointers' size, which will mean as much as 16 bytes on a 64-bit system (that might split a mid-sized object over cache line boundaries every time). Also, there's to consider that <code>std::list</code> cannot afford to break e.g. SSE code solely because it adds a clandestine offset as special surprise (so for example the xor-trick would likely not be applicable for reducing the two-pointer footprint). There would likely have to be some amount of \"safe\" padding to make sure objects added to a list still work the way they should.<br>\nI am unable to tell whether these are actual performance problems or merely distrust and fear from my side, but I believe it's fair to say that there may be more snakes hiding in the grass than one expects.</p>\n\n<p>It's not for no reason that high-profile C++ experts (Stroustrup, notably) recommend using <code>std::vector</code> unless you have a really good reason not to.</p>\n\n<p>Like many people before, I've tried to be smart about using (or inventing) something better than <code>std::vector</code> for one or the other particular, specialized problem where it seems you can do better, but it turns out that simply using <code>std::vector</code> is still almost always the best, or second best option (if <code>std::vector</code> happens to be not-the-best, <code>std::deque</code> is usually what you need instead).<br>\nYou have way fewer allocations than with any other approach, way less memory fragmentation, way fewer indirections, and a much more favorable memory access pattern. And guess what, it's readily available and just works.<br>\nThe fact that every now and then inserts require a copy of all elements is (usually) a total non-issue. You <em>think</em> it is, but it's not. It happens rarely and it is a copy of a linear block of memory, which is exactly what processors are good at (as opposed to many double-indirections and random jumps over memory).</p>\n\n<p>If the requirement not to invalidate iterators is really an absolute must, you could for example pair a <code>std::vector</code> of objects with a dynamic bitset or, for lack of something better, a <code>std::vector&lt;bool&gt;</code>. Then use <code>reserve()</code> appropriately so reallocations do not happen. When deleting an element, do not remove it but only mark it as deleted in the bitmap (call the destructor by hand). At appropriate times, when you know that it's OK to invalidate iterators, call a \"vacuum cleaner\" function that compacts both the bit vector and the object vector. There, all unforeseeable iterator invalidations gone.</p>\n\n<p>Yes, that requires maintaining one extra \"element was deleted\" bit, which is annoying. But a <code>std::list</code> must maintain two pointers as well, in additon to the actual object, and it must do allocations. With the vector (or two vectors), access is still very efficient, as it happens in a cache-friendly way. Iterating, even when checking for deleted nodes, still means you move linearly or almost-linearly over memory.</p>\n"}, {"tags": [], "owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "is_accepted": false, "score": 1, "last_activity_date": 1503078622, "last_edit_date": 1503078622, "creation_date": 1503075980, "answer_id": 45761683, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45761683#45761683", "title": "Efficient linked list in C++?", "body": "<p>Thanks for all the answers.\nThis is a simple - though not rigorous - benchmark.</p>\n\n<pre><code>// list.cc\n#include &lt;list&gt;\nusing namespace std;\n\nint main() {\n    for (size_t k = 0; k &lt; 1e5; k++) {\n        list&lt;size_t&gt; ln;\n        for (size_t i = 0; i &lt; 200; i++) {\n            ln.insert(ln.begin(), i);\n            if (i != 0 &amp;&amp; i % 20 == 0) {\n                ln.erase(++++++++++ln.begin());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// vector.cc\n#include &lt;vector&gt;\nusing namespace std;\n\nint main() {\n    for (size_t k = 0; k &lt; 1e5; k++) {\n        vector&lt;size_t&gt; vn;\n        for (size_t i = 0; i &lt; 200; i++) {\n            vn.insert(vn.begin(), i);\n            if (i != 0 &amp;&amp; i % 20 == 0) {\n                vn.erase(++++++++++vn.begin());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This test aims to test what <code>std::list</code> claims to excel at - <em>O</em>(1) inserting and erasing. And, because of the positions I ask to insert/delete, this race is heavily skewed against <code>std::vector</code>, because it has to shift all the following elements (hence <em>O</em>(n)), while <code>std::list</code> doesn't need to do that.</p>\n\n<p>Now I compile them.</p>\n\n<pre><code>clang++ list.cc -o list\nclang++ vector.cc -o vector\n</code></pre>\n\n<p>And test the runtime. The result is:</p>\n\n<pre><code>  time ./list\n  ./list  4.01s user 0.05s system 91% cpu 4.455 total\n  time ./vector\n  ./vector  1.93s user 0.04s system 78% cpu 2.506 total\n</code></pre>\n\n<p><code>std::vector</code> has won.</p>\n\n<p>Compiled with optimization <code>O3</code>, <code>std::vector</code> still wins.</p>\n\n<pre><code>  time ./list\n  ./list  2.36s user 0.01s system 91% cpu 2.598 total\n  time ./vector\n  ./vector  0.58s user 0.00s system 50% cpu 1.168 total\n</code></pre>\n\n<p><code>std::list</code> has to call heap allocation for <strong>each</strong> element, while <code>std::vector</code> can allocate heap memory in batch (though it might be implementation-dependent), hence <code>std::list</code>'s insert/delete has a higher constant factor, though it is <em>O</em>(1).</p>\n\n<p>No wonder <a href=\"http://llvm.org/docs/ProgrammersManual.html#vector\" rel=\"nofollow noreferrer\">this</a> document says</p>\n\n<blockquote>\n  <p><code>std::vector</code> is well loved and respected.</p>\n</blockquote>\n\n<p><em>EDIT</em>: <code>std::deque</code> does even better in some cases, <strong>at least for this task</strong>.</p>\n\n<pre><code>// deque.cc\n#include &lt;deque&gt;\nusing namespace std;\n\nint main() {\n    for (size_t k = 0; k &lt; 1e5; k++) {\n        deque&lt;size_t&gt; dn;\n        for (size_t i = 0; i &lt; 200; i++) {\n            dn.insert(dn.begin(), i);\n            if (i != 0 &amp;&amp; i % 20 == 0) {\n                dn.erase(++++++++++dn.begin());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Without optimization:</p>\n\n<pre><code>./deque  2.13s user 0.01s system 86% cpu 2.470 total\n</code></pre>\n\n<p>Optimized with <code>O3</code>:</p>\n\n<pre><code>./deque  0.27s user 0.00s system 50% cpu 0.551 total\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "edited": false, "score": 0, "creation_date": 1503078772, "post_id": 45762339, "comment_id": 78482814, "body": "Wow I wonder why I didn&#39;t come up with this trick.. upvote! Swapping is a very good trick in many cases, though it won&#39;t keep the elements in order."}], "tags": [], "owner": {"reputation": 31, "user_id": 8485097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3df3d40b570e303e8dff79146e9f5915?s=128&d=identicon&r=PG&f=1", "display_name": "ViperG", "link": "https://stackoverflow.com/users/8485097/viperg"}, "is_accepted": false, "score": 2, "last_activity_date": 1503079403, "last_edit_date": 1503079403, "creation_date": 1503078548, "answer_id": 45762339, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/45762339#45762339", "title": "Efficient linked list in C++?", "body": "<p>I just wanted to make a small comment about your choice. I'm a huge fan of vector because of it's read speeds, and you can direct access any element, and do sorting if need be. (vector of class/struct for example).</p>\n\n<p>But anyways I digress, there's two nifty tips I wanted to disclose. \nWith vector inserts can be expensive, so a neat trick, don't insert if you can get away with not doing it. do a normal push_back (put at the end) then swap the element with one you want. </p>\n\n<p>Same with deletes. They are expensive. So swap it with the last element, delete it.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": true, "score": 2, "last_activity_date": 1514684622, "last_edit_date": 1514684622, "creation_date": 1514573962, "answer_id": 48027163, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c/48027163#48027163", "title": "Efficient linked list in C++?", "body": "<p>The simplest way I see to fulfill all your requirements:</p>\n\n<ol>\n<li>Constant-time insertion/removal (hope amortized constant-time is okay for insertion).</li>\n<li>No heap allocation/deallocation per element.</li>\n<li>No iterator invalidation on removal.</li>\n</ol>\n\n<p>... would be something like this, just making use of <code>std::vector</code>:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct Node\n{\n    // Stores the memory for an instance of 'T'.\n    // Use placement new to construct the object and\n    // manually invoke its dtor as necessary.\n    typename std::aligned_storage&lt;sizeof(T), alignof(T)&gt;::type element;\n\n    // Points to the next element or the next free\n    // element if this node has been removed.\n    int next;\n\n    // Points to the previous element.\n    int prev;\n};\n\ntemplate &lt;class T&gt;\nclass NodeIterator\n{\npublic:\n    ...\nprivate:\n    std::vector&lt;Node&lt;T&gt;&gt;* nodes;\n    int index;\n};\n\ntemplate &lt;class T&gt;\nclass Nodes\n{\npublic:\n    ...\nprivate:\n    // Stores all the nodes.\n    std::vector&lt;Node&gt; nodes;\n\n    // Points to the first free node or -1 if the free list\n    // is empty. Initially this starts out as -1.\n    int free_head;\n};\n</code></pre>\n\n<p>... and hopefully with a better name than <code>Nodes</code> (I'm slightly tipsy and not so good at coming up with names at the moment). I'll leave the implementation up to you but that's the general idea. When you remove an element, just do a doubly-linked list removal using the indices and push it to the free head. The iterator doesn't invalidate since it stores an index to a vector. When you insert, check if the free head is -1. If not, overwrite the node at that position and pop. Otherwise <code>push_back</code> to the vector.</p>\n\n<p><strong>Illustration</strong></p>\n\n<p>Diagram (nodes are stored contiguously inside <code>std::vector</code>, we simply use index links to allow skipping over elements in a branchless way along with constant-time removals and insertions anywhere):</p>\n\n<p><a href=\"https://i.stack.imgur.com/7lh4R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7lh4R.png\" alt=\"enter image description here\"></a></p>\n\n<p>Let's say we want to remove a node. This is your standard doubly-linked list removal, except we use indices instead of pointers and you also push the node to the free list (which just involves manipulating integers):</p>\n\n<p><strong>Removal adjustment of links:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/OYPQR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OYPQR.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Pushing removed node to free list:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/2WLlN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2WLlN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now let's say you insert to this list. In that case, you pop off the free head and overwrite the node at that position.</p>\n\n<p><strong>After insertion:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Y3ggs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y3ggs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Insertion to the middle in constant-time should likewise be easy to figure out. Basically you just insert to the free head or <code>push_back</code> to the vector if the free stack is empty. Then you do your standard double-linked list insertion. Logic for the free list (though I made this diagram for someone else and it involves an SLL, but you should get the idea):</p>\n\n<p><a href=\"https://i.stack.imgur.com/qIwXN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qIwXN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Make sure you properly construct and destroy the elements using placement new and manual calls to the dtor on insertion/removal. If you really want to generalize it, you'll also need to think about exception-safety and we also need a read-only const iterator.</p>\n\n<p><strong>Pros and Cons</strong></p>\n\n<p>The benefit of such a structure is that it does allow very rapid insertions/removals from anywhere in the list (even for a gigantic list), insertion order is preserved for traversal, and it never invalidates the iterators to element which aren't directly removed (though it will invalidate pointers to them; use <code>deque</code> if you don't want pointers to be invalidated). Personally I'd find more use for it than <code>std::list</code> (which I practically never use).</p>\n\n<p>For large enough lists (say, larger than your entire L3 cache as a case where you should definitely expect a huge edge), this should vastly outperform <code>std::vector</code> for removals and insertions to/from the middle and front. Removing elements from vector can be quite fast for small ones, but try removing a million elements from a vector starting from the front and working towards the back. There things will start to crawl while this one will finish in the blink of an eye. <code>std::vector</code> is ever-so-slightly overhyped IMO when people start using its <code>erase</code> method to remove elements from the middle of a vector spanning 10k elements or more, though I suppose this is still preferable over people naively using linked lists everywhere in a way where each node is individually allocated against a general-purpose allocator while causing cache misses galore.</p>\n\n<p>The downside is that it only supports sequential access, requires the overhead of two integers per element, and as you can see in the above diagram, its spatial locality degrades if you constantly remove things sporadically.</p>\n\n<p><strong>Spatial Locality Degradation</strong></p>\n\n<p>The loss of spatial locality as you start removing and inserting a lot from/to the middle will lead to zig-zagging memory access patterns, potentially evicting data from a cache line only to go back and reload it during a single sequential \nloop. This is generally inevitable with any data structure that allows removals from the middle in constant-time while likewise allowing that space to be reclaimed while preserving the order of insertion. However, you can restore spatial locality by offering some method or you can copy/swap the list. The copy constructor can copy the list in a way that iterates through the source list and inserts all the elements which gives you back a perfectly contiguous, cache-friendly vector with no holes (though doing this will invalidate iterators).</p>\n\n<p><strong>Alternative: Free List Allocator</strong></p>\n\n<p>An alternative that meets your requirements is implement a free list conforming to <code>std::allocator</code> and use it with <code>std::list</code>. I never liked reaching around data structures and messing around with custom allocators though and that one would double the memory use of the links on 64-bit by using pointers instead of 32-bit indices, so I'd prefer the above solution personally using <code>std::vector</code> as basically your analogical memory allocator and indices instead of pointers (which both reduce size and become a requirement if we use <code>std::vector</code> since pointers would be invalidated when vector reserves a new capacity).</p>\n\n<p><strong>Indexed Linked Lists</strong></p>\n\n<p>I call this kind of thing an \"indexed linked list\" as the linked list isn't really a container so much as a way of linking together things already stored in an array. And I find these indexed linked lists exponentially more useful since you don't have to get knee-deep in memory pools to avoid heap allocations/deallocations per node and can still maintain reasonable locality of reference (great LOR if you can afford to post-process things here and there to restore spatial locality).</p>\n\n<p>You can also make this singly-linked if you add one more integer to the node iterator to store the previous node index (comes free of memory charge on 64-bit assuming 32-bit alignment requirements for <code>int</code> and 64-bit for pointers). However, you then lose the ability to add a reverse iterator and make all iterators bidirectional.</p>\n\n<p><strong>Benchmark</strong></p>\n\n<p>I whipped up a quick version of the above since you seem interested in 'em: release build, MSVC 2012, no checked iterators or anything like that:</p>\n\n<pre><code>--------------------------------------------\n- test_vector_linked\n--------------------------------------------\nInserting 200000 elements...\ntime passed for 'inserting': {0.000015 secs}\n\nErasing half the list...\ntime passed for 'erasing': {0.000021 secs}\ntime passed for 'iterating': {0.000002 secs}\ntime passed for 'copying': {0.000003 secs}\n\nResults (up to 10 elements displayed):\n[ 11 13 15 17 19 21 23 25 27 29 ]\n\nfinished test_vector_linked: {0.062000 secs}\n--------------------------------------------\n- test_vector\n--------------------------------------------\nInserting 200000 elements...\ntime passed for 'inserting': {0.000012 secs}\n\nErasing half the vector...\ntime passed for 'erasing': {5.320000 secs}\ntime passed for 'iterating': {0.000000 secs}   \ntime passed for 'copying': {0.000000 secs}\n\nResults (up to 10 elements displayed):\n[ 11 13 15 17 19 21 23 25 27 29 ]\n\nfinished test_vector: {5.320000 secs}\n</code></pre>\n\n<p>Was too lazy to use a high-precision timer but hopefully that gives an idea of why one shouldn't use <code>vector's</code> linear-time <code>erase</code> method in critical paths for non-trivial input sizes with <code>vector</code> above there taking ~86 times longer (and exponentially worse the larger the input size -- I tried with 2 million elements originally but gave up after waiting almost 10 minutes) and why I think <code>vector</code> is ever-so-slightly-overhyped for this kind of use. That said, we can turn removal from the middle into a very fast constant-time operation without shuffling the order of the elements, without invalidating indices and iterators storing them, and while still using <code>vector</code>... All we have to do is simply make it store a linked node with <code>prev/next</code> indices to allow skipping over removed elements.</p>\n\n<p>For removal I used a randomly shuffled source vector of even-numbered indices to determine what elements to remove and in what order. That somewhat mimics a real world use case where you're removing from the middle of these containers through indices/iterators you formerly obtained, like removing the elements the user formerly selected with a marquee tool after he his the delete button (and again, you really shouldn't use scalar <code>vector::erase</code> for this with non-trivial sizes; it'd even be better to build a set of indices to remove and use <code>remove_if</code> -- still better than <code>vector::erase</code> called for one iterator at a time).</p>\n\n<p>Note that iteration does become slightly slower with the linked nodes, and that doesn't have to do with iteration logic so much as the fact that each entry in the vector is larger with the links added (more memory to sequentially process equates to more cache misses and page faults). Nevertheless, if you're doing things like removing elements from very large inputs, the performance skew is so epic for large containers between linear-time and constant-time removal that this tends to be a worthwhile exchange.</p>\n"}], "owner": {"reputation": 3048, "user_id": 8385554, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16ab4fec9e219838c24af269960afac8?s=128&d=identicon&r=PG", "display_name": "Leedehai", "link": "https://stackoverflow.com/users/8385554/leedehai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8792, "favorite_count": 8, "accepted_answer_id": 48027163, "answer_count": 11, "score": 42, "last_activity_date": 1514684622, "creation_date": 1502898286, "last_edit_date": 1502982415, "question_id": 45717938, "link": "https://stackoverflow.com/questions/45717938/efficient-linked-list-in-c", "title": "Efficient linked list in C++?", "body": "<p>This <a href=\"http://llvm.org/docs/ProgrammersManual.html#list\" rel=\"noreferrer\">document</a> says <code>std::list</code> is inefficient:</p>\n\n<blockquote>\n  <p>std::list is an extremely inefficient class that is rarely useful. It performs a heap allocation for every element inserted into it, thus having an extremely high constant factor, particularly for small data types.</p>\n</blockquote>\n\n<p>Comment: that is to my surprise. <code>std::list</code> is a doubly linked list, so despite its inefficiency in element construction, it supports insert/delete in O(1) time complexity, but this feature is completely ignored in this quoted paragraph.</p>\n\n<p><strong>My question:</strong> Say I need a <strong>sequential</strong> container for small-sized homogeneous elements, and this container should support element <strong>insert/delete in O(1)</strong> complexity and does <strong>not</strong> need random access (though supporting random access is nice, it is not a must here). I also don't want the high constant factor introduced by heap allocation for <strong>each element's construction</strong>, at least when the number of element is small. Lastly, <strong>iterators</strong> should be invalidated only when the <strong>corresponding element</strong> is deleted. Apparently I need a custom container class, which might (or might not) be a variant of doubly linked list. How should I design this container?</p>\n\n<p>If the aforementioned specification cannot be achieved, then perhaps I should have a custom memory allocator, say, bump pointer allocator? I know <code>std::list</code> takes an allocator as its second template argument.</p>\n\n<p>Edit: I know I shouldn't be too concerned with this issue, from an engineering standpoint - fast enough is good enough. It is just a <strong>hypothetical question</strong> so I don't have a more detailed use case. Feel free to relax some of the requirements!</p>\n\n<p>Edit2: I understand two algorithms of <em>O</em>(1) complexity can have entirely different performance due to the difference in their constant factors.</p>\n"}, {"tags": ["c++", "mergesort"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1502898269, "post_id": 45717901, "comment_id": 78393893, "body": "Time to step through your code with a debugger. Looks like you&#39;re indexing outside an array."}, {"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1502898322, "post_id": 45717901, "comment_id": 78393930, "body": "How can an index go out of bounds randomly at runtime?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1502898814, "post_id": 45717901, "comment_id": 78394283, "body": "You pass <code>size</code> into the mergesort function as <code>rightEnd</code>. <code>rightEnd</code> is never changed and is eventually passed into <code>mergeHalves</code> as <code>rightEnd</code> (remember, it still has the value of <code>size</code>). You then loop <code>while(...right &lt;= rightEnd)</code>, so at some point you&#39;ll end up dereferencing <code>(array+right)</code> when <code>right</code> is <code>size</code>, which is out of bounds. Note: this is just what I noticed from skimming through, there are probably other issues. I&#39;d highly suggest a debugger (see <a href=\"http://web.eecs.umich.edu/~sugih/pointers/summary.html\" rel=\"nofollow noreferrer\">gdb</a>). Furthermore, you would&#39;ve caught this if you were using vectors!"}, {"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "edited": false, "score": 0, "creation_date": 1502898944, "post_id": 45717901, "comment_id": 78394379, "body": "I wanted to go &quot;the hard way&quot; without using vectors! :P By the way I noticed that passing <code>size</code> and not <code>size-1</code> was wrong. Still ordering does not work. I&#39;ll look into what you&#39;ve written right now"}, {"owner": {"reputation": 910, "user_id": 3332581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fa1d0b48d4ec4d535c0e7a48882c2eb3?s=128&d=identicon&r=PG", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/3332581/ashkan"}, "edited": false, "score": 0, "creation_date": 1502899269, "post_id": 45717901, "comment_id": 78394590, "body": "@magicleon your index does not go out of bounds randomly. What you see is the undefined behaviour. Whatever is in that index is returned. The value in there may or may not be what you expect."}], "answers": [{"comments": [{"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "edited": false, "score": 0, "creation_date": 1502901671, "post_id": 45718723, "comment_id": 78396002, "body": "First of all, thank you for the debugging. Well I was not thinking that <code>size</code> was the whole array size but just <code>rightEnt  leftStart + 1</code>... I confused and did not realize what I was copying in the last <code>memcpy</code> of <code>mergeHalves</code>... I&#39;m feeling very stupid right now lol. Thanks a lot, you&#39;re a life saver. Talking about the subscript operator, I did not notice that writing <code>*(temp+index)</code> was THAT awful, but after this &quot;hell reading&quot; well, I think that I&#39;ve learned that too. Thanks again!"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 2, "last_activity_date": 1502900909, "creation_date": 1502900909, "answer_id": 45718723, "question_id": 45717901, "link": "https://stackoverflow.com/questions/45717901/c-merge-sort-not-working-and-crashing/45718723#45718723", "title": "c++ merge sort not working and crashing", "body": "<p>After a LOT of debugging for you, I've found your issue. You have named multiple variables the same thing through your different functions. Some of these variables mean exactly the same thing (<code>leftStart</code>, <code>rightEnd</code>), while others, like <code>size</code> mean two completely different things.</p>\n\n<p>At the end of <code>mergHalves</code>, you do <code>memcpy(array, temp, size * sizeof(int));</code> probably because you were thinking <code>size</code> is the size of the whole array so you're copying everything back over. However, it's <strong>not</strong>.</p>\n\n<p>That line should be <code>memcpy(array+leftStart, temp+leftStart, size * sizeof(int));</code> since in this function you've declared size to be <code>int size = rightEnd - leftStart + 1;</code>. This is a good example of why making your variable names a little longer and more descriptive can save you a few hours of debugging (and having to post on StackOverflow).</p>\n\n<p>See the fix in action on <a href=\"http://ideone.com/YNWhmE\" rel=\"nofollow noreferrer\">ideone</a>.</p>\n\n<p>Lastly, as an aside, I understand that you want to try doing this \"the hard way,\" without vectors, but please please please don't ever do something like <code>*(temp+index)</code>. The <a href=\"https://msdn.microsoft.com/en-us/library/th52k9c8.aspx\" rel=\"nofollow noreferrer\">subscript operator</a> was made for that exact purpose and means the <em>exact same thing</em>, just a lot more readable. (ie, do <code>temp[index]</code> instead).</p>\n"}], "owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 45718723, "answer_count": 1, "score": 1, "last_activity_date": 1502900909, "creation_date": 1502898193, "last_edit_date": 1502898864, "question_id": 45717901, "link": "https://stackoverflow.com/questions/45717901/c-merge-sort-not-working-and-crashing", "title": "c++ merge sort not working and crashing", "body": "<p>I was trying to implement merge sort in c++ in the following way:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\nusing std::string;\nusing std::memcpy;\n\nvoid mergeSort(int *array, int *temp, int leftStart, int rightEnd);\nvoid mergeHalves(int *array, int *temp, int leftStart, int rightEnd);\n\nvoid printArray(int* array, int size,string message){\n    cout&lt;&lt;message&lt;&lt;endl;\n    for (int i = 0; i &lt; size; i++)\n        cout &lt;&lt; *(array+i) &lt;&lt; \"\\t\";\n    cout &lt;&lt; endl;\n}\nint main(){\n    const int size = 10;\n    int myInts[size] = {9, 8, 7, 6, 5, 4, 3, 2, 1, 0};\n    int temp[size] = {0};\n    printArray(myInts,size,\"Input\");\n    mergeSort(myInts, temp, 0, size-1);\n    printArray(myInts, size, \"Output:\");\n\n    return 0;\n}\n\nvoid mergeSort(int *array, int *temp, int leftStart, int rightEnd){\n    if (leftStart &gt;= rightEnd)\n        return;\n\n    int middle = (leftStart + rightEnd) / 2;\n\n    mergeSort(array, temp, leftStart, middle);\n    mergeSort(array, temp, middle + 1, rightEnd);\n    mergeHalves(array,temp,leftStart,rightEnd);\n    return;\n}\n\nvoid mergeHalves(int *array, int *temp, int leftStart, int rightEnd){\n    int leftEnd = (rightEnd + leftStart) / 2;\n    int rightStart = leftEnd + 1;\n    int size = rightEnd - leftStart + 1;\n\n    int left = leftStart;\n    int right = rightStart;\n    int index = leftStart;\n\n    while (left &lt;= leftEnd &amp;&amp; right &lt;= rightEnd){\n        if (*(array+left) &lt;= *(array+right)){\n            *(temp+index) = *(array+left);\n            left++;\n        }else{\n            *(temp+index) = *(array+right);\n            right++;\n        }\n        index++;\n    }\n\n    memcpy(temp + index, array + left, (leftEnd - left + 1) * sizeof(int));\n    memcpy(temp + index, array + right, (rightEnd - right + 1) * sizeof(int));\n    memcpy(array, temp, size * sizeof(int));\n}\n</code></pre>\n\n<p>I have checked the code more and more times and I cannot manage to understand what I am missing.<br>\nThe algorithm was not working properly with an initial value of</p>\n\n<pre><code>myInts[size] = {3, 6, 4, 2, 7, 8, 9, 1, 0, 5}\n</code></pre>\n\n<p>as it sorted only the first half of the array.<br>\nThen I tried to change the input with the one shown in the code, and I got the following output:</p>\n\n<pre><code>Input\n9   8   7   6   5   4   3   2   1   0   \nOutput:\n3   2   1   0   -161742639  6   5   4   7   8   \nAbort trap: 6\n</code></pre>\n\n<p>After a while I recompiled and ran THE SAME CODE and got this output instead:</p>\n\n<pre><code>Input\n9   8   7   6   5   4   3   2   1   0   \nOutput:\n3   2   1   0   6   5   4   7   8   9\n</code></pre>\n\n<p>It seems to me that some assignment operation or copy operation went wrong and at random too, but everything seems right to me..<br><br>\nI've tried with step by step debugging and the flow of the program seems ok.<br>\n<br> I'm running on MacOS X Sierra 10.12.6, I'm compiling with g++. \n<br><br>What am I missing? I'm getting crazy.. Thanks in advance!\n<br><br> EDIT: I seem to have solved the <code>Abort Trap</code> problem, I edited the code passing <code>size-1</code> instead of <code>size</code> in the <code>main</code> function. Still ordering does not work though</p>\n"}, {"tags": ["c++", "data-structures", "time-complexity"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1502897137, "post_id": 45717483, "comment_id": 78393057, "body": "More context is needed."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 5, "last_activity_date": 1502897515, "creation_date": 1502897515, "answer_id": 45717654, "question_id": 45717483, "link": "https://stackoverflow.com/questions/45717483/what-is-the-meaning-of-statement-xyz-while-learning-space-time-complexity/45717654#45717654", "title": "What is the meaning of statement XYZ while learning space-time complexity?", "body": "<p>The non-bold part is straight-forward: the code of an assignment is at a minimum the cost of computing what is to be assigned.  The bold part is simply saying that if, once you have finished that calculation, the amount of work to assign that value is not a constant (that is, it is a function of the problem size), then you have to take that into account as well.</p>\n\n<p>For example, how long it takes to assign a value to an integer variable would be a constant, while copying a string won't be if its length is determined by the size of the problem.</p>\n"}], "owner": {"reputation": 33, "user_id": 7032301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKUz1.jpg?s=128&g=1", "display_name": "Muhammad Ahmad Mujtaba", "link": "https://stackoverflow.com/users/7032301/muhammad-ahmad-mujtaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 45717654, "answer_count": 1, "score": 1, "last_activity_date": 1502897619, "creation_date": 1502897013, "question_id": 45717483, "link": "https://stackoverflow.com/questions/45717483/what-is-the-meaning-of-statement-xyz-while-learning-space-time-complexity", "title": "What is the meaning of statement XYZ while learning space-time complexity?", "body": "<p>I am reading data structures and I am following book \"Fundamentals of data structures in C++\" - E. Horowitz, S. Sahni &amp; D. Mehta. </p>\n\n<p>While reading rules for step counts in time complexity, I am stuck at the following statement. \nCan anyone please explain me the following paragraph especially bold literals. </p>\n\n<p><em>The assignment statement variable = expression has a step count equal to that expression unless <strong>the size of variable is a function of instance characteristics</strong>.</em></p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502896919, "post_id": 45717265, "comment_id": 78392910, "body": "moveToThread(this)? Are you sure it is correct? It should even not compile...  moveToThread is waiting for a QThread* and not a QObject..."}, {"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502896944, "post_id": 45717265, "comment_id": 78392926, "body": "Moreover, you are not using at all your QThread but in your destructor ^^"}, {"owner": {"reputation": 1099, "user_id": 6162120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeZSp.png?s=128&g=1", "display_name": "piarston", "link": "https://stackoverflow.com/users/6162120/piarston"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502897225, "post_id": 45717265, "comment_id": 78393118, "body": "@AntoineMorrier I guess the compiler makes an implicit construction of QThread from QObject"}, {"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502897382, "post_id": 45717265, "comment_id": 78393247, "body": "Yeah, but no. his slave class inherits a QObject class and not a QThread. So this must not compile. A QThread is a QObject, but a QObject is not a QThread.  Moreover, admit he wanted to inherits a QThread, move to thread(this) is WRONG and WRONG"}, {"owner": {"reputation": 1099, "user_id": 6162120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeZSp.png?s=128&g=1", "display_name": "piarston", "link": "https://stackoverflow.com/users/6162120/piarston"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502898097, "post_id": 45717265, "comment_id": 78393763, "body": "@AntoineMorrier I am not saying using moveToTread(this) makes sens. I was (wrongly) thinking that the compiler would perforn an <a href=\"https://stackoverflow.com/questions/12340257/default-vs-implicit-constructor-in-c\">implicit construction</a>. After reflexion, you&#39;re right this would not compile."}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502898739, "post_id": 45717265, "comment_id": 78394207, "body": "@AntoineMorrier sorry, typo"}, {"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502898934, "post_id": 45717265, "comment_id": 78394372, "body": "@InnocentBystander Yes, so it is a problem ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 6162120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeZSp.png?s=128&g=1", "display_name": "piarston", "link": "https://stackoverflow.com/users/6162120/piarston"}, "edited": false, "score": 1, "creation_date": 1502898284, "post_id": 45717671, "comment_id": 78393904, "body": "Regarding the multithreading alternatives, there is an excellent guide in the Qt documentation: <a href=\"https://doc.qt.io/qt-5/threads-technologies.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/threads-technologies.html</a>"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1502899123, "post_id": 45717671, "comment_id": 78394493, "body": "I know how to move object to another thread. I guess my question wasn&#39;t very clear -- I will update it."}], "tags": [], "owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "is_accepted": false, "score": 1, "last_activity_date": 1502897569, "creation_date": 1502897569, "answer_id": 45717671, "question_id": 45717265, "link": "https://stackoverflow.com/questions/45717265/correct-way-to-signal-qobject-on-another-thread/45717671#45717671", "title": "Correct way to signal QObject on another thread?", "body": "<p>I am not pretty sure I understood well the question.\nSo I will explain here how to manage thread in Qt (in summarized way).</p>\n\n<p>First, <code>QThread</code>class is not really meant to be inherited from.\nInstead, make something like this :</p>\n\n<pre><code>class Slave : public QObject {\n    Slave(QThread *thread) {moveToThread(thread);)\n};\n\nQThread thread;\nSlave slave(&amp;thread);\n</code></pre>\n\n<p>After, you normally can use signal and slots in the normal way.</p>\n\n<p>However, if your objective is only to \"run a function inside another thread\", maybe QConcurrent could be a better way?</p>\n"}, {"comments": [{"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1502915687, "post_id": 45719603, "comment_id": 78403073, "body": "In an effort to keep my question from becoming TL;DR, I think I&#39;ve oversimplified it. Basically your answer is good, but in my case the Controller has many Workers and each Worker has several signals. I need to be able to tell a specific Worker to do a specific thing. If the Controller has a unique signal for each slot in each Worker, they will start adding up. &lt;Sigh...&gt; Let me revise my question"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1502916168, "post_id": 45719603, "comment_id": 78403279, "body": "@InnocentBystander Please explain why our answers still don&#39;t provide the answer you&#39;re looking for. I.e., what exactly is the problem you&#39;re foreseeing."}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 1, "last_activity_date": 1502904143, "creation_date": 1502904143, "answer_id": 45719603, "question_id": 45717265, "link": "https://stackoverflow.com/questions/45717265/correct-way-to-signal-qobject-on-another-thread/45719603#45719603", "title": "Correct way to signal QObject on another thread?", "body": "<p>In fact, the <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">Qt documentation</a> provides a very nice example that probably answers your question on how to use QThread. It's the following:</p>\n\n<pre><code>class Worker : public QObject\n{\n    Q_OBJECT\n\npublic slots:\n    void doWork(const QString &amp;parameter) {\n        QString result;\n        /* ... here is the expensive or blocking operation ... */\n        emit resultReady(result);\n    }\n\nsignals:\n    void resultReady(const QString &amp;result);\n};\n\nclass Controller : public QObject\n{\n    Q_OBJECT\n    QThread workerThread;\npublic:\n    Controller() {\n        Worker *worker = new Worker;\n        worker-&gt;moveToThread(&amp;workerThread);\n        connect(&amp;workerThread, &amp;QThread::finished, worker, &amp;QObject::deleteLater);\n        connect(this, &amp;Controller::operate, worker, &amp;Worker::doWork);\n        connect(worker, &amp;Worker::resultReady, this, &amp;Controller::handleResults);\n        workerThread.start();\n    }\n    ~Controller() {\n        workerThread.quit();\n        workerThread.wait();\n    }\npublic slots:\n    void handleResults(const QString &amp;);\nsignals:\n    void operate(const QString &amp;);\n};\n</code></pre>\n\n<p>The idea here is simple. You have a worker, which is running in the thread. You also have the controller, which is basically your main thread that submits work to the other thread. The thread will (thread-safely) emit the <code>resultReady()</code> signal when it's finished. Signals and slots are thread-safe here, as long as they use <a href=\"http://doc.qt.io/qt-5/threads-qobject.html\" rel=\"nofollow noreferrer\"><code>Qt::QueuedConnection</code></a> to communicate.</p>\n"}, {"tags": [], "owner": {"reputation": 2251, "user_id": 6639082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44da46c9168a90de2479557760523d3d?s=128&d=identicon&r=PG&f=1", "display_name": "WindyFields", "link": "https://stackoverflow.com/users/6639082/windyfields"}, "is_accepted": true, "score": 2, "last_activity_date": 1503168878, "last_edit_date": 1503168878, "creation_date": 1503155948, "answer_id": 45773205, "question_id": 45717265, "link": "https://stackoverflow.com/questions/45717265/correct-way-to-signal-qobject-on-another-thread/45773205#45773205", "title": "Correct way to signal QObject on another thread?", "body": "<p>Well, I will not comment (1) and (2) but I must say that (3) is the one usually used. However, I understand your concern about too much boilerplate. After all, creating a separate signal, say <code>doActionA()</code>, connecting it via <code>QueuedConnection</code> to some real <code>actionA()</code> and at last emitting it... too much noise and useless moves. </p>\n\n<p>Indeed, the only benefit it gives you is a loose coupling (you can send a signal being not aware of existence of slots connected to it). But if I create a signal with a name <code>doActionA()</code> <strong>of course I am aware</strong> of <code>actionA()</code> existence. So then the question is starting to raise \"Why do I have to write all this stuff?\"</p>\n\n<p>Meanwhile, Qt kind of provides the solution to this problem giving you the ability to post your own events to any event loop (and as you know QThread has one). So, implement it once and you do not need to write a lot of <code>connect</code> <code>emit</code> stuff any more. Also, I suppose I is more efficient because all in all, every slot invokation via <code>QueuedConnection</code> just posts an event in an event loop.</p>\n\n<p>Here <code>InvokeAsync</code> posts the event for member function execution into the event loop of the thread where QObject lives:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QEvent&gt;\n#include &lt;QThread&gt;\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;functional&gt;\n\ntemplate&lt;typename T, typename R, typename ... Params, typename... Args&gt;\nvoid InvokeAsync(T* object, R (T::*function)(Params...), Args&amp;&amp;... args)\n{\n    struct Event : public QEvent\n    {\n        std::function&lt;R ()&gt; function;\n        Event(T* object, R (T::*function)(Params...),  Args&amp;&amp; ... args)\n            : QEvent{ QEvent::None },\n              function{ std::bind(function, object, std::forward&lt;Args&gt;(args)...) }\n        {\n        }\n        ~Event() { function(); }\n    };\n\n    QCoreApplication::postEvent(object, new Event{ object, function, std::forward&lt;Args&gt;(args)... });\n}\n\nstruct Worker : QObject\n{\n    void print(const std::string&amp; message, int milliseconds)\n    {\n        QThread::currentThread()-&gt;msleep(milliseconds);\n        std::cout &lt;&lt; message\n                  &lt;&lt; \" from thread \"\n                  &lt;&lt; QThread::currentThreadId() &lt;&lt; std::endl;\n    }\n};\n\nint main(int argc, char* argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    std::cout &lt;&lt; \"GUI thread \" &lt;&lt; QThread::currentThreadId() &lt;&lt; std::endl;\n\n    QThread thread;\n    thread.start();\n\n    Worker worker;\n    worker.moveToThread(&amp;thread);\n\n    InvokeAsync(&amp;worker, &amp;Worker::print, \"Job 1\", 800);\n    InvokeAsync(&amp;worker, &amp;Worker::print, \"Job 2\", 400);\n    InvokeAsync(&amp;worker, &amp;Worker::print, \"Job 3\", 200);\n\n    a.exec();\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>GUI thread 00000000000019C8\nJob 1 from thread 00000000000032B8\nJob 2 from thread 00000000000032B8\nJob 3 from thread 00000000000032B8\n</code></pre>\n\n<p>As you see all jobs where done in a different thread in order of their invocation. Qt guarantees that events with the same priority are processed in order as they were posted.</p>\n\n<p>Also it is OK, if <code>worker</code> lives in GUI thread. Events will be just posted in GUI event loop and processed later (that is why I called those <code>Async</code>). </p>\n\n<p>If you see any mistakes or have some remarks, please, write in comments and we will figure it out.</p>\n"}], "owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 2, "accepted_answer_id": 45773205, "answer_count": 3, "score": 4, "last_activity_date": 1503181006, "creation_date": 1502896311, "last_edit_date": 1503181006, "question_id": 45717265, "link": "https://stackoverflow.com/questions/45717265/correct-way-to-signal-qobject-on-another-thread", "title": "Correct way to signal QObject on another thread?", "body": "<p>Let's say I have a <code>slave</code> object that lives in another thread. I want to tell it to do A, B, C on that thread. I can think of 3 ways of doing it:</p>\n\n<p>(1) Using <code>QTimer::singleShot</code></p>\n\n<p>(2) Using <code>QMetaObject::invokeMethod</code></p>\n\n<p>(3) Creating another <code>master</code> object and connecting its signal to the <code>slave</code></p>\n\n<p>Following is an example:</p>\n\n<pre><code>class slave : public QObject\n{\n    QThread thread_;\n\n    friend class master;\n    void do_A(params);\n    void do_B(params);\n    void do_C(params);\n\npublic:\n    slave() { thread_.start(); moveToThread(&amp;thread_); }\n    ~slave() { thread_.quit(); thread_.wait(); }\n\n    void que_A(params) { QTimer::singleShot(0, [&amp;](){ do_A(params); }); } // (1)\n\n    void que_B(params) { QMetaObject::invokeMethod(this, \"do_B\", params); } // (2)\n}\n\nclass master : public QObject // (3)\n{\n    Q_OBJECT\n\npublic:\n    master(slave* s) { connect(this, &amp;master::que_C, s, &amp;slave::do_C); }\n\n    void do_C(params) { emit que_C(params); }\n\nsignals:\n    void que_C(params);\n}\n</code></pre>\n\n<p>My concerns are:</p>\n\n<p>(1) I am abusing <code>QTimer</code>.</p>\n\n<p>(2) Using strings for signals/slot is so qt4. Qt5 uses <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">new syntax</a>.</p>\n\n<p>(3) Too much boilerplate.</p>\n\n<p>Is any of the methods considered more correct compared to the others? Or can anybody think of a better way?</p>\n\n<p>Please include your reasoning (not just opinion) why one method should be chosen over others.</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>In my real-world application I have another class -- let's call it <code>owner</code> -- that owns several <code>slave</code>s. The <code>owner</code> needs to tell different <code>slave</code>s to do different things (A, B or C) depending on user input. The <code>slave</code>s are stateful objects, so I cannot see an easy way of using concurrency functions (eg, <code>std::async</code> or <code>QtConcurrency</code>).</p>\n"}, {"tags": ["c++", "simd", "avx"], "comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502896369, "post_id": 45717178, "comment_id": 78392509, "body": "&quot;it crashes&quot; is there an output or error report that tells you why it crashed?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1502896938, "post_id": 45717178, "comment_id": 78392923, "body": "Assigning to <code>a</code> that way assumes it is 32-aligned, but <code>new</code> does not guarantee that."}], "owner": {"reputation": 364, "user_id": 1564730, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81f8bd69726693149da7f75f0655e5b4?s=128&d=identicon&r=PG", "display_name": "Firman", "link": "https://stackoverflow.com/users/1564730/firman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1502912199, "answer_count": 0, "score": 0, "last_activity_date": 1502896035, "creation_date": 1502896035, "question_id": 45717178, "link": "https://stackoverflow.com/questions/45717178/error-in-initialising-object-with-simd-member-using-new-keyword", "closed_reason": "Duplicate", "title": "Error in initialising object with SIMD member using new keyword", "body": "<p>I was trying to initialise a C++ object with an SIMD member with a new keyword. Here is my code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;immintrin.h&gt;\n\nclass simd_obj {\nprotected:\n    // float a;\n    __m256 a;\npublic:\n    simd_obj(float f) {\n        // a = f;\n        a = _mm256_set1_ps(f);\n    }\n};\n\nint main() {\n    simd_obj* a = new simd_obj(1.3);\n    return 0;\n}\n</code></pre>\n\n<p>It can be compiled with g++ 5.3.0 with <code>-mavx</code> flag in windows 7 (via mingw). However, when it runs, it crashes.\nWhen I changed the type of <code>a</code> into float and using a simple assignment (see the commented lines), it runs well, as expected.\nAlso, when I change the initialisation to <code>simd_obj a(1.3)</code>, it works, even with <code>__m256</code> type of <code>a</code>.</p>\n\n<p>Do you have any idea why the code above does not work?</p>\n"}, {"tags": ["c++", "qt", "opencv", "dll"], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 3033051, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/059a0639536708636a8dbf1165207d7b?s=128&d=identicon&r=PG&f=1", "display_name": "brahmin", "link": "https://stackoverflow.com/users/3033051/brahmin"}, "is_accepted": true, "score": 0, "last_activity_date": 1503999532, "creation_date": 1503999532, "answer_id": 45935643, "question_id": 45716761, "link": "https://stackoverflow.com/questions/45716761/gui-expanded-in-c-opencv/45935643#45935643", "title": "GUI Expanded in C++ opencv", "body": "<p>Needed dlls had to be copied in the same directory as executable in release mode.</p>\n\n<p>Also see : <a href=\"https://stackoverflow.com/questions/42362250/cannot-run-qt-c-release-build-the-procedure-entry-point-could-not-be-located/42362464#42362464\">Cannot run Qt C++ release build. &#39;The procedure entry point could not be located&#39;</a></p>\n"}], "owner": {"reputation": 408, "user_id": 3033051, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/059a0639536708636a8dbf1165207d7b?s=128&d=identicon&r=PG&f=1", "display_name": "brahmin", "link": "https://stackoverflow.com/users/3033051/brahmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 45935643, "answer_count": 1, "score": 0, "last_activity_date": 1503999532, "creation_date": 1502894904, "last_edit_date": 1502903065, "question_id": 45716761, "link": "https://stackoverflow.com/questions/45716761/gui-expanded-in-c-opencv", "title": "GUI Expanded in C++ opencv", "body": "<p>I aim at using OpenCV3.3's imshow function such as image displays with status bar and tool bar, such as :</p>\n\n<p><a href=\"https://i.stack.imgur.com/gOBOY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gOBOY.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm using MSVC2017, so for that purpose I generated OpenCV's cmake with flags : WITH_QT and WITH_OPENGL and compiled the library.\nIt's working as expected with Qt5.9.1, but only in debug mode in my project.</p>\n\n<p>In release mode, I get \"Entry point was not found\" for 3 DLLs :</p>\n\n<ul>\n<li>opencv_highgui330.dll</li>\n<li>Qt5Test.dll</li>\n<li>Qt5TestOpenGL.dll</li>\n</ul>\n\n<p>I suspect some parts of the libraries are compiled differently, but I have no clue where the problem could come from. Specially since it's working in debug mode.</p>\n\n<p>Problem remains when using either msvc2015 or msvc2017 compilation of Qt. Also tried Qt5.4 as a desperate move. Unsuccessfull. Any hint will be much appreciated.</p>\n"}, {"tags": ["c++", "boost", "quaternions", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 6952756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUtSp.jpg?s=128&g=1", "display_name": "Iason Manolas", "link": "https://stackoverflow.com/users/6952756/iason-manolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1504604829, "last_edit_date": 1504604829, "creation_date": 1504525596, "answer_id": 46036357, "question_id": 45716415, "link": "https://stackoverflow.com/questions/45716415/is-it-logical-wanting-to-combine-cgal-with-quaternions/46036357#46036357", "title": "Is it logical wanting to combine CGAL with Quaternions", "body": "<h2>First Option: Use the Aff_transformation_3 class</h2>\n\n<p>CGAL does not provide a quaternion class, it does provide the <a href=\"https://doc.cgal.org/latest/Kernel_23/classCGAL_1_1Aff__transformation__3.html\" rel=\"nofollow noreferrer\">Aff_transformation_3 class</a> though. Which you could easily use like this:</p>\n\n<pre><code>CGAL::Surface_mesh&lt;Kernel&gt; P;\nstd::transform( P.points_begin(), P.points_end(), P.points_begin(), yourAffineTransformation);\n</code></pre>\n\n<p>for defining the transformation matrix see <a href=\"https://doc.cgal.org/latest/Kernel_23/classCGAL_1_1Aff__transformation__3.html\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<h2>Second Option: Use Quaternions</h2>\n\n<p>If you want to use quaternions you would need to construct one with an external library. For example you could use Eigen:</p>\n\n<pre><code>#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt; //or whichever kernel suits your needs\n#include &lt;CGAL/Surface_mesh.h&gt;\n#include &lt;Eigen/Geometry&gt;\n\nusing Kernel = CGAL::Exact_predicates_inexact_constructions_kernel;\nusing Polyhedron = CGAL::Surface_mesh&lt;Kernel&gt;;\nusing Point = CGAL::Point_3&lt;Kernel&gt;;\n\n// define the function that rotates your mesh\ntemplate &lt;typename Vect, typename Quaternion&gt;\nvoid rotateCGALPolyhedron(Polyhedron P, Vect to_rotation_center,\n                          Quaternion quat) {\n  for (auto vi : P.vertices()) {\n    Point p = P.point(vi);\n    // translate your point to the rotation center. In your case this would be\n    // the center of mass of the Polyhderon\n    Vect V(p[0] - to_rotation_center[0], p[1] - to_rotation_center[1],\n           p[2] - to_rotation_center[2]);\n    // construct the translation vector that moves your point to the rotated\n    // position\n    Vect v = quat * V; //the Vect operator*(Quaternion, Vect) must be implemented!! If you use Eigen::Quaternion you could use Eigen::Vector3d\n    // retranslate the point back to its initial position and translate it using\n    // the previously created translation vector\n    P.point(size_t(vi)) =\n        Point(to_rotation_center[0] + v[0], to_rotation_center[1] + v[1],\n              to_rotation_center[2] + v[2]);\n  }\n}\n\nint main() {\n\n  // define your rotation using eigen's quaternion class\n  Eigen::Quaternion&lt;double&gt; quad(..);\n  Eigen::Vector_3d centerOfMass; //find the center of mass of the mesh you want to rotate\n  rotateCGALPolyhedron(P.vertices.begin(), P.vertices.end(), centerOfMass,\n                       quad);\n\nreturn 0;\n}\n</code></pre>\n\n<p>As you can see since cgal does not have an implementation for quaternions if you want to use quaternions the code is lengthy compared to the Aff_transformation_3 case.</p>\n"}], "owner": {"reputation": 2089, "user_id": 7778713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QIG81.png?s=128&g=1", "display_name": "D.J. Klomp", "link": "https://stackoverflow.com/users/7778713/d-j-klomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 46036357, "answer_count": 1, "score": 0, "last_activity_date": 1504604829, "creation_date": 1502893966, "question_id": 45716415, "link": "https://stackoverflow.com/questions/45716415/is-it-logical-wanting-to-combine-cgal-with-quaternions", "title": "Is it logical wanting to combine CGAL with Quaternions", "body": "<p>I am creating a Discrete Element Method simulation program and I am using CGAL to describe the polyhedrons. From reading literature I was planning to do my differential equations for rotation with Quaternions due to the better numerical stability and lack of gimbal lock. However CGAL does not seem to support rotation based on quaternions. (Please tell me if I am incorrect here) I find it a bit surprising that this seems to be missing, certainly since CGAL likes to be absolute in its accuracy which seems to fit well with the numerical stability of quaternions.</p>\n\n<p><strong>Question:</strong> Can I somehow combine Boost Quaternions with CGAL or is there any easy way to implement this. And if so, would this be a logical idea to try?</p>\n\n<p>The other options I think I have are:</p>\n\n<ul>\n<li>writing my differential equations for the affine rotation used is CGAL and deal with the downsides there.</li>\n<li>store the orientation as an affine rotation matrix and convert it to Quaternions and use this in the diff. equations. Obviously I am worried about the needed conversion step here every timestep.</li>\n</ul>\n\n<p>Any suggestions or other options that I might think of are greatly appreciated.</p>\n"}, {"tags": ["c++", "utf-8", "sdl-2"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1502894146, "post_id": 45716356, "comment_id": 78390918, "body": "Hmmm, C-ish C++ code.  Suggest only 1 language tag to improve the post."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1502894345, "post_id": 45716356, "comment_id": 78391071, "body": "There are <i>millions</i> of Unicode glyphs, as compared to 256 extended ASCII characters.  You can&#39;t just blindly use the same approach.  Among other things, in Unicode there are &quot;combining characters&quot;, which can&#39;t be rendered separately from the characters the modify, you have to work on units of glyphs, not characters."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1502894393, "post_id": 45716356, "comment_id": 78391102, "body": "@BenVoigt You mean Latin-1 instead of ASCII?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1502894479, "post_id": 45716356, "comment_id": 78391161, "body": "@Deduplicator: I meant &quot;extended ASCII&quot;.  For any 8-bit character set, there are 256 possible values."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1502894585, "post_id": 45716356, "comment_id": 78391250, "body": "In addition, the naive layout algorithm (texture each glyph, add the width of character cell to X coordinate, texture the next one) doesn&#39;t work when multilingual support is required.  Some languages layout from right-to-left.  Some are even weirder."}, {"owner": {"reputation": 85, "user_id": 6204021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad91e0e7caa4cbc49edd4b5dfdc23709?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/6204021/max"}, "edited": false, "score": 0, "creation_date": 1502894593, "post_id": 45716356, "comment_id": 78391254, "body": "I just read that the first 2000 UTF-8 Chars are enough for every European language. And I would reconsider my approach, but I can&#39;t do that until I can at least print these Chars to the terminal."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1502943414, "post_id": 45716356, "comment_id": 78410424, "body": "@Max that&#39;s possible but SDL_ttf expects UTF8 (as the function name suggests). Unicode and UTF8 are not the same, you need to convert your numeric sequence to UTF8 - e.g. with <code>u8_wc_toutf8</code> from <a href=\"http://www.cprogramming.com/tutorial/unicode.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/unicode.html</a> . It might also be better to use uint32_t instead of wchar_t  as the latter is only 2 bytes on some platforms (e.g. windows)."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6204021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad91e0e7caa4cbc49edd4b5dfdc23709?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/6204021/max"}, "edited": false, "score": 0, "creation_date": 1503055442, "post_id": 45738733, "comment_id": 78468019, "body": "This does indeed do what I asked, Thank you. I have, however, decided to change my approach. I now only cache ASCII chars in this manner as that doesn&#39;t take much vram at all and is very fast to draw. For non ASCII text, I have created a LRU cache using a <code>std::list</code> and <code>std::unordered_map</code> which holds the last 100 string draws. Which when text doesn&#39;t change extremely fast is just as fast as the previous method, once the cache is created of course. I now only check if a string uses any non standard chars and use the appropriate function. It was indeed crazy to think I can cache all of UTF8."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1502982312, "creation_date": 1502982312, "answer_id": 45738733, "question_id": 45716356, "link": "https://stackoverflow.com/questions/45716356/utf-text-in-sdl2/45738733#45738733", "title": "UTF text in SDL2", "body": "<p>Addressing only this portion of the question:</p>\n\n<blockquote>\n  <p>all I need is a way to get every UTF8 Character in a C string</p>\n</blockquote>\n\n<p><a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">Wikipedia has a nice table</a> showing the various encoding rules, the range of codepoints that each covers, and the corresponding UTF-8 length and data bytes.</p>\n\n<p>For covering <a href=\"https://stackoverflow.com/questions/45716356/utf-text-in-sdl2/45738733#comment78391254_45716356\">the first 2000-odd characters</a>, just generate all the one- and two-byte patterns:</p>\n\n<pre><code>char s[3] = { 0 };\nfor(s[0] = 0x00; s[0] &lt; 0x80u; ++s[0]) { // can start at 0x20 to skip control characters\n    // one byte encodings\n}\nfor(s[0] = 0xC0u; s[0] &lt; 0xE0u; ++s[0]) {\n   for(s[1] = 0x80u; s[1] &lt; 0xC0u; ++s[1]) {\n      // two byte encodings\n   }\n}\n</code></pre>\n\n<p>It's no coincidence that the values <code>0x80u</code> and <code>0xC0u</code> appear more than once in the loop conditions -- the fact that there is no overlap between lead bytes and following bytes is what gives UTF-8 its self-synchronizing property.</p>\n\n<p>I guess you're relying on the following fact (quoted from Wikipedia):</p>\n\n<blockquote>\n  <p>The first 128 characters (US-ASCII) need one byte. The next 1,920 characters need two bytes to encode, which covers the remainder of almost all Latin-script alphabets, and also Greek, Cyrillic, Coptic, Armenian, Hebrew, Arabic, Syriac, Thaana and N'Ko alphabets, as well as Combining Diacritical Marks.</p>\n</blockquote>\n\n<p>Because this range contains combining marks, you will have quite a few entries that can't be rendered alone.  Whether you skip them or just handle the resulting confusion from the text layout engine is up to you.</p>\n"}], "owner": {"reputation": 85, "user_id": 6204021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad91e0e7caa4cbc49edd4b5dfdc23709?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/6204021/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 0, "accepted_answer_id": 45738733, "answer_count": 1, "score": 1, "last_activity_date": 1502982312, "creation_date": 1502893835, "last_edit_date": 1502894344, "question_id": 45716356, "link": "https://stackoverflow.com/questions/45716356/utf-text-in-sdl2", "title": "UTF text in SDL2", "body": "<p>I just finished creating a function to cache any loaded font in the small game engine I'm building in SDL2, the following function works flawlessly and rendering text is about 12 times faster than creating a new SDL_Surface each time I need text. However, as you can see, it caches only ANSI characters, this is fine for English, but not if I ever want to translate my game (German umlauts, or Cyrillic glyphs are not available in ANSI)</p>\n\n<pre><code>void cacheFonts(){\n    for(unsigned int i = 0; i &lt; GlobalFontAssets.size; i++){\n        SDL_Colour color_font = {255, 255, 255, 255};\n        std::vector&lt;SDL_Texture*&gt; tempVector;\n        for(int j = 32; j &lt; 128; j++){\n            char temp[2];\n            temp[0] = j;\n            temp[1] = 0;\n            SDL_Surface* glyph = TTF_RenderUTF8_Blended(GlobalFontAssets.fonts[i], temp, color_font);  \n            SDL_Texture* texture = \n            SDL_CreateTextureFromSurface(renderer, glyph);\n            tempVector.push_back(texture);  \n            SDL_FreeSurface(glyph);\n        }\n        GlobalFontAssets.cache.push_back(tempVector);\n    }\n    printf(\"Global Fonts Cached!\\n\");\n}\n</code></pre>\n\n<p>I have tried using <code>wchar_t</code>, and looping from 0 to 256^2, however I can not get any characters to print even using <code>printf</code>, <code>wprintf</code>, <code>cout</code> and <code>wcout</code>, However if I do:</p>\n\n<pre><code>std::string str = \"\u041f\u0440\u0438\u0432\u0435\u0442, \u00f6\u00e4\u00fc\"\nprintf(\"%s\\n\", str.c_str());\n</code></pre>\n\n<p>Then it prints the string on the terminal just fine. I should mention that  I am on Ubuntu 16.04, so a Windows only solution doesn't work for me, ideally I wish to do this in a portable manner. To those not familiar with SDL, all I need is a way to get every UTF8 Character in a C string. I hope that this is possible.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502893980, "post_id": 45716305, "comment_id": 78390791, "body": "You can do stuff between the start of the thread and the call to <code>join</code>, which will then be executed concurrently. <code>thread::join</code> makes sure the thread is done by the time that call returns, so you can, for example, safely use the result."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1502893995, "post_id": 45716305, "comment_id": 78390796, "body": "<code>join</code> and <code>detach</code> are mutually exclusive."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502895224, "post_id": 45716305, "comment_id": 78391730, "body": "@BaummitAugen what do you mean with start of the thread? The initialization?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502895335, "post_id": 45716305, "comment_id": 78391815, "body": "@RoQuOTriX Yes. Initialization with some function that is, a default constructed thread does nothing."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1502895405, "post_id": 45716305, "comment_id": 78391873, "body": "Classic use case: a program that uses multiple threads to do one large computation, and then it stops.  Main thread spawns workers, and maybe does a share of the work itself.  Then it join()s all of the workers, combines their results, prints the report, and exits.  But it&#39;s important not to try combining the results until the workers have all finished."}, {"owner": {"reputation": 1678, "user_id": 1109847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b3e3fea46d3703692d26915260d2503?s=128&d=identicon&r=PG", "display_name": "Lefsler", "link": "https://stackoverflow.com/users/1109847/lefsler"}, "edited": false, "score": 0, "creation_date": 1502902936, "post_id": 45716305, "comment_id": 78396693, "body": "Join basically means. Wait here until this thread ends. Threads will not BLOCK your code, this means, if you need the value from the thread somewhere the only way to ensure that the result of the thread is correct is waiting for the thread to end. That is why we have join, to ensure that the thread finished at that point."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 5, "last_activity_date": 1502895093, "last_edit_date": 1502895093, "creation_date": 1502894278, "answer_id": 45716529, "question_id": 45716305, "link": "https://stackoverflow.com/questions/45716305/threadjoin-vs-detach/45716529#45716529", "title": "Thread::Join vs detach", "body": "<p>Consider what happens here:</p>\n\n<pre><code>int value = 0;\nvoid myWorkerFunction(){value = 1;}\n\nint main()\n{\n   std::thread t(myWorkerFunction);\n   t.detach();\n   std::cout &lt;&lt; value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You now have a race condition. Your thread may or may not complete all the work it needs to do before <code>value</code> needs to get printed.<sup>*</sup></p>\n\n<p>Consider <code>join</code> to be a form of synchronization like a <code>mutex</code>; you must wait for the executing thread to release the mutex (finish) before you can continue.</p>\n\n<p>Sometimes it makes sense to detach a thread, if say, it can just \"work in the background\" performing tasks that may not be mission critical.</p>\n\n<blockquote>\n  <p>I thougt the purpose of multithreading is, that I start more threads paralelly [sic]</p>\n</blockquote>\n\n<p>You are not forced to <code>join</code> a thread immediately after it is created. You can create N threads, and then go off and do some other work. Only when you want to guarantee that a thread has finished do you need to <code>join</code>.</p>\n\n<hr>\n\n<p><sup>*</sup>This example is way oversimplified for the sake of explanation. Often thread creation happens in some other object or function outside of <code>main</code>. Whether to detach or not is usually pretty obvious from your design. (however we must always <code>detach</code> or <code>join</code> a <code>std::thread</code> before it goes out of scope)</p>\n"}], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1502895663, "creation_date": 1502893670, "last_edit_date": 1502894450, "question_id": 45716305, "link": "https://stackoverflow.com/questions/45716305/threadjoin-vs-detach", "title": "Thread::Join vs detach", "body": "<p>Why should I using <code>std::thread::join</code> and then wait until this thread has ended? I thougt the purpose of multithreading is, that I start more threads paralelly. \nInstead of <code>join()</code>, I also could call the function \"normally\", like <code>foo()</code>.\nSo why is their <code>join()</code>? Isn't the only thing I need <code>detach()</code>?  </p>\n"}, {"tags": ["c++", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 4, "creation_date": 1502892676, "post_id": 45715831, "comment_id": 78389740, "body": "What makes you think Eigen has anything for this?  What&#39;s wrong with using what&#39;s already in front of you and working?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502893132, "post_id": 45715831, "comment_id": 78390121, "body": "if it can be done with the standard library, then why would Eigen bother to implement its own way? &quot;Note that I specifically want to avoid writing my own function.&quot; ... not clear at all what you want to avoid, you already have a solution, no need to write your own"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1502893608, "post_id": 45715831, "comment_id": 78390530, "body": "@JohnZwinck It was more of a hope... I want(ed) this to give the best end-user experience by switching as few times as possible (or even never) between from Eigen-vectors and STL-vectors. Of course there is absolutely noting wrong with the proposed STL-solution! <i>(I&#39;m not at all pro-Eigen, but I want to make this code accessible for non-specialist and I feel that sticking to one thing may help)</i>"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1502893944, "post_id": 45715831, "comment_id": 78390763, "body": "@TomdeGeus: STL algorithms can be applied to non-STL data structures, including Eigen."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502894302, "post_id": 45715831, "comment_id": 78391043, "body": "algorithms work on iterators not containers, I dont know Eigen too much, but I would be surprised if their containers dont provide iterators"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1502894323, "post_id": 45715831, "comment_id": 78391057, "body": "The term &quot;vector&quot; has probably different meanings in std vs. Eigen. In std, vector is a dynamic array (for &quot;any&quot; element type). Eigen vectors are intended for vectors in a mathematical sense. Eigen vectors may or may not use std::vector for implementation."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502894693, "post_id": 45715831, "comment_id": 78391329, "body": "@JohnZwink @tobi303 Agreed on both (I&#39;ve used this also several times). However I am conceptually a bit lost for this example, <code>std::inserter</code> lets <code>C</code> grow. How would I accomplish the same with Eigen? Allocate <code>C</code> to the maximum length of <code>A</code> and <code>B</code> and let <code>std:: set_difference</code> work its magic? But how would I then know how long <code>C</code> is? By initializing it first?"}], "answers": [{"comments": [{"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895001, "post_id": 45716699, "comment_id": 78391550, "body": "Awesome, this helps a lot! Just for clarification, in the case of <code>Eigen::MatrixXd</code> in principle the same trick could be used right? But this might screw up the number of rows and columns, how could I fix that? <i>(I realize that <code>set_difference</code> might not be the most relevant application for matrices)</i>"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895170, "post_id": 45716699, "comment_id": 78391685, "body": "@TomdeGeus <code>MatrixXd::data()</code> will return a pointer to the first element. Eigen is using column-major order, so when incrementing the pointer the matrix will be traversed in column-major order, i.e. if <code>A &lt;&lt; 1,2,3,4</code>, the pointer will point to <code>1,3,2,4</code> respectively. And yes, matrix &quot;differences&quot; in set-theoretical terms don&#39;t make too much sense."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895358, "post_id": 45716699, "comment_id": 78391839, "body": "Clear. But may I change the number of entries? I guess the answer is yes, based on your answer. However, how do I decide how to change the number of rows and columns (and store this to the matrix variable)?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895419, "post_id": 45716699, "comment_id": 78391881, "body": "@TomdeGeus What do you mean? Are you talking about reshaping the matrix?"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895687, "post_id": 45716699, "comment_id": 78392050, "body": "Exactly. Suppose that I would have done the example on matrices, but then to match entire columns. Then <code>C</code> would still have an undefined number of rows and columns right? Or should <code>C</code> be a <code>Vector</code> first, which would than be mapped to a <code>Matrix</code> (using <a href=\"http://eigen.tuxfamily.org/dox/classEigen_1_1Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a>)."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1502895790, "post_id": 45716699, "comment_id": 78392129, "body": "@TomdeGeus I&#39;d definitely make the output (i.e. <code>C</code>) a vector, after all the result is a set and shouldn&#39;t have dimensions. The as you said can map it back to a matrix via <code>Eigen::Map</code> if you really want."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1502899988, "post_id": 45716699, "comment_id": 78395032, "body": "You should probably check the return value of <code>std::set_difference</code> and resize <code>c</code> afterwards (using <code>conservativeResize</code>). Also, <code>c</code> should be initialized to the size of <code>a</code>, in case there are no common elements."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 5, "last_activity_date": 1502904889, "last_edit_date": 1502904889, "creation_date": 1502894721, "answer_id": 45716699, "question_id": 45715831, "link": "https://stackoverflow.com/questions/45715831/find-difference-between-two-lists-using-eigen/45716699#45716699", "title": "Find difference between two lists using Eigen", "body": "<p>Here you go:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n\nint main()\n{\n    using namespace Eigen;\n\n    VectorXd a(3), b(1);\n    VectorXd c(a.size());\n\n    a &lt;&lt; 1,2,3;\n    b &lt;&lt; 1;\n\n    auto it = std::set_difference(a.data(), a.data() + a.size(), \n                                  b.data(), b.data() + b.size(), \n                                  c.data());\n    c.conservativeResize(std::distance(c.data(), it)); // resize the result\n    std::cout &lt;&lt; c;\n}\n</code></pre>\n\n<p>The key here is to use <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1PlainObjectBase.html#ad12a492bcadea9b65ccd9bc8404c01f1\" rel=\"nofollow noreferrer\"><code>Eigen::VectorXd::data()</code></a> member function, which returns a pointer to the underlying storage, which is itself an iterator that can be passed around to C++ standard library functions.</p>\n"}], "owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 45716699, "answer_count": 1, "score": 1, "last_activity_date": 1502904889, "creation_date": 1502892521, "last_edit_date": 1502894760, "question_id": 45715831, "link": "https://stackoverflow.com/questions/45715831/find-difference-between-two-lists-using-eigen", "title": "Find difference between two lists using Eigen", "body": "<p>I would like to find the difference between two lists. For example:</p>\n\n<pre><code>// two lists:\nA = [ 0, 1, 2, 3, 4, 5, 6 ];\nB = [ 1, 4, 5 ];\n\n// difference between the lists:\nC = [ 0, 2, 3, 6 ];\n</code></pre>\n\n<p>I have done this using the STL-library of C++ as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  std::vector&lt;size_t&gt; A = {0, 1, 2, 3, 4, 5, 6};\n  std::vector&lt;size_t&gt; B = {1, 4, 5};\n  std::vector&lt;size_t&gt; C;\n\n  std::set_difference(A.begin(),A.end(), B.begin(),B.end(), std::inserter(C,C.begin()));\n\n  return 0;\n}\n</code></pre>\n\n<p>However, because my application uses mostly Eigen, I now would like to do also this using Eigen. I couldn't find what I was looking for in the documentation nor online. </p>\n\n<p>Note that I specifically want to avoid writing my own function.</p>\n"}, {"tags": ["c++", "reference", "implicit-conversion", "reference-wrapper"], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 5, "last_activity_date": 1502892406, "creation_date": 1502892406, "answer_id": 45715788, "question_id": 45715567, "link": "https://stackoverflow.com/questions/45715567/incorrect-understanding-of-implicit-conversion-from-reference-to-stdreference/45715788#45715788", "title": "Incorrect understanding of implicit conversion from reference to std::reference_wrapper or compiler bug?", "body": "<p><code>std::make_pair</code> never<sup>(1)</sup> deduces a reference type as one of the types in the pair, it always produces value types. So the call to <code>emplace</code> receives a <em>temporary</em> <code>std::pair&lt;Object, int32_t&gt;</code> as argument. The reference wrapper is then initialised from this temporary, meaning that it will bind to the <code>first</code> member of this <em>temporary</em> pair.</p>\n\n<p>In the second case, the temporary is of type <code>std::pair&lt;std::reference_wrapper&lt;const Object&gt;, int32_t&gt;</code> (since you've explicitly requested that), which means that there's a reference wrapper in the temporary pair, bound directly to <code>obj</code>. The reference wrapper inside the map is then copied from this temporary reference wrapper and thus refers directly to <code>obj</code>.</p>\n\n<p><sup>(1)</sup> \"Never\" is not true here. There's one exception: when one of the arguments to <code>std::make_pair</code> is of type <code>std::reference_wrapper&lt;T&gt;</code>, the type in the pair will be decuced to <code>T&amp;</code>. Which actually provides the correct solution for you: wrap <code>obj</code> in <code>std::cref</code> inside the <code>make_pair</code> call:</p>\n\n<pre><code>myMap.emplace(std::make_pair(std::cref(obj), value));\n</code></pre>\n\n<p>This will then cause the temporary pair to contain a reference, and the <code>reference_wrapper</code> inside the map will bind to its referred object (<code>obj</code>), which is precisely what you want.</p>\n"}], "owner": {"reputation": 157, "user_id": 5920044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qo5p7.jpg?s=128&g=1", "display_name": "Alvaro Palma Aste", "link": "https://stackoverflow.com/users/5920044/alvaro-palma-aste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 45715788, "answer_count": 1, "score": 2, "last_activity_date": 1502892406, "creation_date": 1502891811, "last_edit_date": 1502891928, "question_id": 45715567, "link": "https://stackoverflow.com/questions/45715567/incorrect-understanding-of-implicit-conversion-from-reference-to-stdreference", "title": "Incorrect understanding of implicit conversion from reference to std::reference_wrapper or compiler bug?", "body": "<p>I'm confused about some code involving references and std::reference_wrapper and I'm not clear at all whether this is my fault since I'm misunderstanding how reference wrapper works or if I hit a compiler error.</p>\n\n<p>I have a simple map, pairing a reference to an object from a complex class to a value:</p>\n\n<pre><code>std::unordered_map&lt;Object const &amp;obj, int32_t value&gt; myMap;\n</code></pre>\n\n<p>(for simplicity, I explicitly left out the hash and equal functors required by the map to compile)</p>\n\n<p>Since I can't directly use the reference in the map, I use a reference wrapper to it:</p>\n\n<pre><code>std::unordered_map&lt;std::reference_wrapper&lt;const Object&gt; obj, int32_t value&gt; myMap;\n</code></pre>\n\n<p>Now, my map is populated in a function such as:</p>\n\n<pre><code>void myFunction(Object const &amp;obj, int32_t value)\n{\n    ...\n    myMap.emplace(std::make_pair(obj, value));\n}\n</code></pre>\n\n<p>but that code, although compiles, doesn't work. However, this one works as expected:</p>\n\n<pre><code>void myFunction(Object const &amp;obj, int32_t value)\n{\n    ...\n    myMap.emplace(std::pair&lt;std::reference_wrapper&lt;const Object&gt;, int32_t&gt;(obj, value));\n}\n</code></pre>\n\n<p>(notice in this second version I'm still not explicitly building a reference wrapper to obj)</p>\n\n<p>So, my doubt is:</p>\n\n<p>Am I misunderstanding something about the usage of reference wrapper? There's no implicit conversion from reference to reference_wrapper? If not, why does the code compile in the first place?</p>\n\n<p>Or is this a known issue/flaw in std::make_pair not being capable to correctly deduct the types passed to it?</p>\n"}, {"tags": ["c++", "windows", "winapi", "condition-variable"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 6, "creation_date": 1502891653, "post_id": 45715396, "comment_id": 78389000, "body": "You have to allocate the critical section object. change <code>LPCRITICAL_SECTION lock;</code> to <code>CRITICAL_SECTION lock;</code>  and pass <code>&amp;fb.lock</code> to <code>InitializeCriticalSection</code>"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1502891715, "post_id": 45715396, "comment_id": 78389044, "body": "<i>I&#39;m using Visual Studio 2017</i> and this is tagged c++. Have a look at std::vector&lt; std::string &gt; instead of LPSTR, and std::mutex, std::condition_variable, std::lock_guard and all the other goodies: <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1502894265, "post_id": 45715396, "comment_id": 78391008, "body": "System Hungarian to the rescue.  Type names that start with P are pointers.  Those pointers are not pointing to anything."}, {"owner": {"reputation": 93, "user_id": 7871512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439181b6648a2642f40f179127cd3403?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro D&#39;Armiento", "link": "https://stackoverflow.com/users/7871512/alessandro-darmiento"}, "edited": false, "score": 0, "creation_date": 1502970433, "post_id": 45715396, "comment_id": 78426154, "body": "Damn I knew it was something stupid.  Thanks guys"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502912414, "post_id": 45715598, "comment_id": 78401540, "body": "And don&#39;t forget to release the critical section when you are done using it: <code>DeleteCriticalSection(&amp;(fb.lock));</code>.   You don&#39;t need to release the condition variables (there is no API function to do it anyway). Look at MSDN&#39;s <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686903.aspx\" rel=\"nofollow noreferrer\">Using Condition Variables</a> example : &quot;<i>The following code implements a producer/consumer queue.</i>&quot;"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 4, "last_activity_date": 1502894720, "last_edit_date": 1502894720, "creation_date": 1502891886, "answer_id": 45715598, "question_id": 45715396, "link": "https://stackoverflow.com/questions/45715396/windows-h-condition-variable-causes-exception-c-c/45715598#45715598", "title": "Windows.h CONDITION_VARIABLE causes exception (C/C++)", "body": "<p>You are passing uninitialized pointers as parameters to <code>InitializeCriticalSection</code> and <code>InitializeConditionVariable</code>. You should allocate appropriate structures and pass a pointer to them instead:</p>\n\n<pre><code>CRITICAL_SECTION lock; //Synch stuff\nCONDITION_VARIABLE notEmpty;\nCONDITION_VARIABLE notFull;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>InitializeCriticalSection(&amp;(fb.lock));\nInitializeConditionVariable(&amp;(fb.notEmpty));\nInitializeConditionVariable(&amp;(fb.notFull));\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7871512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439181b6648a2642f40f179127cd3403?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro D&#39;Armiento", "link": "https://stackoverflow.com/users/7871512/alessandro-darmiento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502894720, "creation_date": 1502891332, "last_edit_date": 1502891419, "question_id": 45715396, "link": "https://stackoverflow.com/questions/45715396/windows-h-condition-variable-causes-exception-c-c", "title": "Windows.h CONDITION_VARIABLE causes exception (C/C++)", "body": "<p>I'm having trouble with very basic Windows programming, implementing a simple producer/consumer system. </p>\n\n<p>My struct: </p>\n\n<pre><code>typedef struct FILE_BUFFER { //Circular buffer of max size BUF_SIZE\n    INT count;            //buffer size \n    LPTSTR buf[BUF_SIZE]; //actual buffer of file names\n\n    BOOL stopRequested; //Exit flag\n\n    LPCRITICAL_SECTION lock; //Synch stuff\n    PCONDITION_VARIABLE notEmpty;\n    PCONDITION_VARIABLE notFull;\n}FILE_BUFFER;\n\nFILE_BUFFER fb;\n</code></pre>\n\n<p>my init function (ran in main thread)</p>\n\n<pre><code>VOID init() {\n    fb.stopRequested = FALSE;\n    fb.count = 0;\n    InitializeCriticalSection(fb.lock);\n    InitializeConditionVariable(fb.notEmpty);\n    InitializeConditionVariable(fb.notFull);\n}\n</code></pre>\n\n<p>The init function cause exception to be thrown on the InitializeConditionVariable instruction, of type Access Violation (ntdll.dll). </p>\n\n<p>I'm using Visual Studio 2017 and compiling for Windows x64</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "gio", "gdbus"], "comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1502891725, "post_id": 45715286, "comment_id": 78389055, "body": "Yes, C is a different language to C++. Do you want answers in C <i>or</i> C++?"}, {"owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1502891767, "post_id": 45715286, "comment_id": 78389086, "body": "@Toby I know they are different, but the answer should be the same for both C and C++."}], "answers": [{"comments": [{"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1502922923, "post_id": 45717281, "comment_id": 78405804, "body": "\u201cThis is nowhere to be found, and is not documented anywhere.\u201d It <i>is</i> documented: the GObject manual. This is a standard GObject type definition, and the assumption is that if you\u2019re using <code>gdbus-codegen</code>, you have read about how to use GObject. Here\u2019s the manual: <a href=\"https://developer.gnome.org/gobject/stable/index.html\" rel=\"nofollow noreferrer\">developer.gnome.org/gobject/stable/index.html</a>"}, {"owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "reply_to_user": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1502950411, "post_id": 45717281, "comment_id": 78412981, "body": "@PhilipWithnall Thanks. There is not even one example showing this. All are with &quot;g_signal_connect&quot;"}], "tags": [], "owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "is_accepted": false, "score": 0, "last_activity_date": 1502896380, "creation_date": 1502896380, "answer_id": 45717281, "question_id": 45715286, "link": "https://stackoverflow.com/questions/45715286/how-to-use-types-generated-by-gdbus-codegen/45717281#45717281", "title": "How to use types generated by gdbus-codegen?", "body": "<p>After playing with the example, finally I figured out the answers, and how to gain access to the interface structure, and how to set it. This is nowhere to be found, and is not documented anywhere.</p>\n\n<hr>\n\n<p>After looking into the generated source file, the function <code>GType min_min_bus_gdbus_get_type (void)</code> may be defined in a huge macro garble, but I am not sure of it's functionality, and how to use it.</p>\n\n<hr>\n\n<p>There is a way to access the <code>struct MinMinBusGDBUSIface</code> by use of the <code>MIN_MIN_BUS_GDBUS_GET_IFACE</code> macro (again in the generated header).</p>\n\n<p>To set the function callback, this line in the example:</p>\n\n<pre><code>g_signal_connect (interface, \n                  \"handle-hello-world\", \n                  G_CALLBACK (on_handle_hello_world), NULL);\n</code></pre>\n\n<p>can be replaced by:</p>\n\n<pre><code>MinMinBusGDBUSIface* iface = MIN_MIN_BUS_GDBUS_GET_IFACE(interface);\niface-&gt;handle_hello_world = &amp;on_handle_hello_world;\n</code></pre>\n\n<p>and the callback has to be modified to has the same signature as the function callback:</p>\n\n<pre><code>static gboolean\non_handle_hello_world (MinMinBusGDBUS *interface, \n                       GDBusMethodInvocation *invocation,\n                       const gchar *greeting)\n</code></pre>\n"}], "owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 834, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502896380, "creation_date": 1502891015, "question_id": 45715286, "link": "https://stackoverflow.com/questions/45715286/how-to-use-types-generated-by-gdbus-codegen", "title": "How to use types generated by gdbus-codegen?", "body": "<p>I am implementing a dbus server, and to simplify things, I decided to use <code>gdbus-codegen</code>.</p>\n\n<p><a href=\"https://fatminmin.com/blog/dbus-gdbus-hello-world.html\" rel=\"nofollow noreferrer\">This hello world example</a> and <a href=\"https://github.com/chiehmin/gdbus_test\" rel=\"nofollow noreferrer\">it's repository</a> are going to generate header and source files. Then it do this to connect the signal to the function:</p>\n\n<pre><code>g_signal_connect (interface, \n                  \"handle-hello-world\", \n                  G_CALLBACK (on_handle_hello_world), NULL);\n</code></pre>\n\n<p>My questions are next:</p>\n\n<ul>\n<li>what is the function <code>GType min_min_bus_gdbus_get_type (void)</code> supposed to do? It is declared, but not defined in generated files.</li>\n<li>instead of connecting signal to a callback function (as described above), can I somehow use the <code>struct MinMinBusGDBUSIface</code>, declared in the generated header?</li>\n</ul>\n\n<hr>\n\n<p>Any example that I found on the net, are having these two things (<code>*_get_type (void)</code> function declaration, and <code>struct *Iface</code> declared in the generated header. How to use them?</p>\n"}, {"tags": ["c++", "image-processing", "yuv"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8472765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c346764c339509e56bf74e4acde75e35?s=128&d=identicon&r=PG", "display_name": "glc12125", "link": "https://stackoverflow.com/users/8472765/glc12125"}, "is_accepted": true, "score": 1, "last_activity_date": 1503051586, "creation_date": 1503051586, "answer_id": 45754266, "question_id": 45715230, "link": "https://stackoverflow.com/questions/45715230/convert-v4l2-pix-fmt-yuyvyuv-422-to-v4l2-pix-fmt-yvu420yuv-420/45754266#45754266", "title": "Convert V4L2_PIX_FMT_YUYV(YUV 4:2:2) to V4L2_PIX_FMT_YVU420(YUV 4:2:0)", "body": "<p>After a few trials of debugging, it turned out to be a small issue: I should have incremented src pointer after assigning U V values. Here is the code:</p>\n\n<pre><code>uint8_t* pyFrame = dst;\nuint8_t* puFrame = pyFrame + width_*height_* sizeof(uint8_t); // Cb\nuint8_t* pvFrame = puFrame + width_*height_* sizeof(uint8_t)/4; // Cr\n\nint uvOffset = width_ * 2 * sizeof(uint8_t);\n\nint i,j;\n\nfor(i=0; i&lt;height_-1; i++)\n{\n    for(j=0; j&lt;width_; j+=2)\n    {\n        auto evenRow = ((i&amp;1) == 0);\n        *pyFrame++ = *src++;\n        if (evenRow)\n        {\n            uint16_t calc = *src;\n            calc += *(src + uvOffset);\n            calc /= 2;\n            *puFrame++ = *src;\n        }\n        ++src;\n        *pyFrame++ = *src++;\n        if (evenRow)\n        {\n            uint16_t calc = *src;\n            calc += *(src + uvOffset);\n            calc /= 2;\n            *pvFrame++ = (uint8_t) calc;\n        }\n        ++src;\n    }\n}\n</code></pre>\n\n<p>Now I can see the images are properly converted. Still not sure if averaging it is the best practise. If anyone has the \"best practise\", please let me know.</p>\n"}], "owner": {"reputation": 21, "user_id": 8472765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c346764c339509e56bf74e4acde75e35?s=128&d=identicon&r=PG", "display_name": "glc12125", "link": "https://stackoverflow.com/users/8472765/glc12125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "accepted_answer_id": 45754266, "answer_count": 1, "score": 1, "last_activity_date": 1503051586, "creation_date": 1502890863, "last_edit_date": 1502899641, "question_id": 45715230, "link": "https://stackoverflow.com/questions/45715230/convert-v4l2-pix-fmt-yuyvyuv-422-to-v4l2-pix-fmt-yvu420yuv-420", "title": "Convert V4L2_PIX_FMT_YUYV(YUV 4:2:2) to V4L2_PIX_FMT_YVU420(YUV 4:2:0)", "body": "<p>I have been trying to convert YUYV raw file to YUV420 raw file in C++. The format are documented as in <a href=\"https://www.linuxtv.org/downloads/v4l-dvb-apis-old/yuv-formats.html\" rel=\"nofollow noreferrer\" title=\"YUV formats\">YUV Formats Page</a>. My output file shows a greenish look after conversion. I adopted the source code from <a href=\"https://www.experts-exchange.com/questions/27638324/speed-up-yuv422-to-yuv420-software-conversion.html\" rel=\"nofollow noreferrer\">Experts Exchange</a>, to convert from YUYV instead of UYVY. Here is my source code:</p>\n\n<pre><code>void conv422to420(uint8_t* src, uint8_t* dst)\n{\n  uint8_t* pyFrame = dst;\n  uint8_t* puFrame = pyFrame + width_*height_; // Cb\n  uint8_t* pvFrame = puFrame + width_*height_/4; // Cr\n\n  int uvOffset = width_ * 2 * sizeof(uint8_t);\n\n  int i,j;\n\n  for(i=0; i&lt;height_-1; i++)\n  {\n    for(j=0; j&lt;width_; j+=2)\n    {\n        auto evenRow = ((i&amp;1) == 0);\n        *pyFrame++ = *src++;\n        ++src;\n        uint16_t calc;\n        if (evenRow)\n        {\n            calc = *src;\n            calc += *(src + uvOffset);\n            calc /= 2;\n            *pvFrame++ = (uint8_t) calc;\n        }\n        *pyFrame++ = *src++;\n        ++src;\n        if (evenRow)\n        {\n            calc = *src;\n            calc += *(src + uvOffset);\n            calc /= 2;\n            *puFrame++ = (uint8_t) calc;\n        }\n    }\n  }\n}\n</code></pre>\n\n<p>In general I took the average of the two U and two V values in two adjacent rows in YUYV to be the values in YUV420. I am just not sure if the \"averaging it\" is the right way to do this. Because I used </p>\n\n<blockquote>\n  <p>ffmpeg -y -r 25.0 -f rawvideo -s 1280x720 -pix_fmt yuyv422 -i yuyv422.yuv -pix_fmt yuv420p -f rawvideo -r 25.0 -s 1280x720 -v debug yuv420p.yuv</p>\n</blockquote>\n\n<p>to generate the YUV420 raw file successfully and the diff for my own output file is drastically different from the one ffmpeg generated in U and Y channels.</p>\n\n<p>So my question is, are there any open source solution for such conversion\uff1f And what is wrong with my solution?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1502891143, "post_id": 45715219, "comment_id": 78388658, "body": "It will be actual for you only if you will have same signatures. Because VALUE type of map should be same."}, {"owner": {"reputation": 253, "user_id": 6503744, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e1afb7d9d7e7a50a0539da24dcd7599?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf Hintersteininger", "link": "https://stackoverflow.com/users/6503744/ralf-hintersteininger"}, "reply_to_user": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1502891181, "post_id": 45715219, "comment_id": 78388678, "body": "Thank you. I knew I could do something with lambdas but I didn&#39;t knew value capture."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 1, "creation_date": 1502891208, "post_id": 45715219, "comment_id": 78388696, "body": "Then you may read a documentation. <code>&amp;foo</code> and <code>&amp;bar</code> are different types. First type is <code>(void *)(int, int)</code> and second is <code>(void *)(std::string, int, int)</code>. So you need to think different."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 3, "creation_date": 1502891305, "post_id": 45715219, "comment_id": 78388763, "body": "Btw, what is your original task?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1502891306, "post_id": 45715219, "comment_id": 78388764, "body": "@RalfHintersteininger But what are you planning to do with value capture?"}, {"owner": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 2, "creation_date": 1502891310, "post_id": 45715219, "comment_id": 78388767, "body": "What do expect to happen when you try to call <code>map[&quot;foo&quot;](&quot;Hello&quot;)</code>?"}, {"owner": {"reputation": 174, "user_id": 5635801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-jMLzUrl7Eo0/AAAAAAAAAAI/AAAAAAAAAEM/WfhwcEnQLIA/photo.jpg?sz=128", "display_name": "suraz negi", "link": "https://stackoverflow.com/users/5635801/suraz-negi"}, "edited": false, "score": 1, "creation_date": 1502891318, "post_id": 45715219, "comment_id": 78388771, "body": "Maybe you should take a look <a href=\"https://stackoverflow.com/questions/11040203/map-of-functions-c\">here</a>"}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "reply_to_user": {"reputation": 174, "user_id": 5635801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-jMLzUrl7Eo0/AAAAAAAAAAI/AAAAAAAAAEM/WfhwcEnQLIA/photo.jpg?sz=128", "display_name": "suraz negi", "link": "https://stackoverflow.com/users/5635801/suraz-negi"}, "edited": false, "score": 1, "creation_date": 1502891366, "post_id": 45715219, "comment_id": 78388792, "body": "@suraznegi it&#39;s very unsafe..."}, {"owner": {"reputation": 174, "user_id": 5635801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-jMLzUrl7Eo0/AAAAAAAAAAI/AAAAAAAAAEM/WfhwcEnQLIA/photo.jpg?sz=128", "display_name": "suraz negi", "link": "https://stackoverflow.com/users/5635801/suraz-negi"}, "edited": false, "score": 0, "creation_date": 1502891383, "post_id": 45715219, "comment_id": 78388811, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11040203/map-of-functions-c\">Map Of functions c++</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 174, "user_id": 5635801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-jMLzUrl7Eo0/AAAAAAAAAAI/AAAAAAAAAEM/WfhwcEnQLIA/photo.jpg?sz=128", "display_name": "suraz negi", "link": "https://stackoverflow.com/users/5635801/suraz-negi"}, "edited": false, "score": 1, "creation_date": 1502891424, "post_id": 45715219, "comment_id": 78388832, "body": "@suraznegi That&#39;s not a dupe. We have different signatures here."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1502891511, "post_id": 45715219, "comment_id": 78388901, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25928848/storing-generic-stdfunctions-in-a-stl-map\">Storing generic std::functions in a STL map?</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1502892752, "post_id": 45715219, "comment_id": 78389816, "body": "Use a switch statement instead."}, {"owner": {"reputation": 253, "user_id": 6503744, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e1afb7d9d7e7a50a0539da24dcd7599?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf Hintersteininger", "link": "https://stackoverflow.com/users/6503744/ralf-hintersteininger"}, "reply_to_user": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1502902332, "post_id": 45715219, "comment_id": 78396361, "body": "@DmitrySazonov I make an Audio Engine which gets commands + parameters via network. Based on that command I call a method with these parameters and they all have different signatures. E.g. I get &quot;play Sound &lt;Filepath&gt;&quot; and then I have to call the method <code>void playSound(std::string filepath);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "edited": false, "score": 0, "creation_date": 1502893194, "post_id": 45715647, "comment_id": 78390176, "body": "When saving a function pointer as <code>void*</code> you have to cast it back to the actual signature before it can be called, at least with my tests!? So I don&#39;t think it makes much sense to use a map to store function pointers with different signatures then. Better use classes with virtual functions or overloaded methods."}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "edited": false, "score": 0, "creation_date": 1502893525, "post_id": 45715647, "comment_id": 78390459, "body": "@xander yes you have to cast it back in order to use it. Using classes allows to obtain the same result, but you&#39;re not really storing functions. That is why it is not included in my answer. Good point though."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 2, "last_activity_date": 1502892006, "creation_date": 1502892006, "answer_id": 45715647, "question_id": 45715219, "link": "https://stackoverflow.com/questions/45715219/store-functions-with-different-signatures-in-a-map/45715647#45715647", "title": "Store functions with different signatures in a map", "body": "<p>You cannot store functions with different signatures in a container like <code>map</code>, no matter if you store them as a function pointer or <code>std ::function&lt;WHATEVER&gt;</code>. The information about the signature of the function is one and only one in both cases.</p>\n\n<p>The types for the <code>value</code> in <code>map</code> is one, meaning that the object stored in it are <strong>all of the same type</strong>.</p>\n\n<p>So if your functions have all the same signature, then it's easy, otherwise, you have to abandon type safety and start walking in a very dangerous realm.\nThe one in which you <strong>erase the type information</strong> about the functions stored inside the map.\nThis translates to something like <code>map&lt;string, void*&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502894785, "post_id": 45716315, "comment_id": 78391398, "body": "You could always make a std::any of std::functions... I wouldn&#39;t be surprised that this has the same potential UB problems, but at least gives the semblance of definedness by using standard library constructions"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 6, "last_activity_date": 1502893690, "creation_date": 1502893690, "answer_id": 45716315, "question_id": 45715219, "link": "https://stackoverflow.com/questions/45715219/store-functions-with-different-signatures-in-a-map/45716315#45716315", "title": "Store functions with different signatures in a map", "body": "<p>The most (I cannot say best here) you can do is to use a signature erasure. That mean to convert the pointer to functions to a common signature type, and then convert them back to the correct signature before using them.</p>\n\n<p>That can only be done in very special use cases (I cannot imagine a real world one) and will be highly unsecure: nothing prevent you to pass the wrong parameters to a function. In short: <strong>NEVER DO THIS IN REAL WORLD CODE</strong>.</p>\n\n<p>That being said, here is a working example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n\ntypedef void (*voidfunc)();\n\nvoid foo(int x, int y)\n{\n    std::cout &lt;&lt; \"foo \" &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; std::endl;\n}\n\nvoid bar(std::string x, int y, int z)\n{\n    std::cout &lt;&lt; \"bar \" &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; \" \" &lt;&lt; z &lt;&lt; std::endl;\n}\n\nint main()\n{\n    std::map&lt;std::string, voidfunc&gt; m;\n    m[\"foo\"] = (voidfunc) &amp;foo;\n    m[\"bar\"] = (voidfunc)&amp; bar;\n    ((void(*)(int, int)) m[\"foo\"])(1, 2);\n    ((void(*)(std::string, int, int)) m[\"bar\"])(\"baz\", 1, 2);\n    return 0;\n}\n</code></pre>\n\n<p>It gives as expected:</p>\n\n<pre><code>foo 1 2\nbar baz 1 2\n</code></pre>\n\n<p>I could not find in standard whether this invokes or not Undefined Behaviour because little is said about function pointer conversions, but I am pretty sure that all common compilers accept that, because it only involve <em>function pointers</em> casting.</p>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1414, "user_id": 2079612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/KNjaa.jpg?s=128&g=1", "display_name": "buttonsrtoys", "link": "https://stackoverflow.com/users/2079612/buttonsrtoys"}, "edited": false, "score": 1, "creation_date": 1527194336, "post_id": 45718187, "comment_id": 88048205, "body": "@buttonsrtoys iirc VS2017 is not fully compliant, it probably lacks the deduction guide for <code>std::function</code>"}, {"owner": {"reputation": 1552, "user_id": 1202808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/35b124689a6d9fc44a7904e51d4cb5fb?s=128&d=identicon&r=PG", "display_name": "RandomBits", "link": "https://stackoverflow.com/users/1202808/randombits"}, "edited": false, "score": 0, "creation_date": 1538088723, "post_id": 45718187, "comment_id": 92031962, "body": "Changing <code>map[&quot;foo&quot;](1, 2)</code> to <code>int n = 1; map[&quot;foo&quot;](n, 2);</code> fails at runtime with a <code>bad_any_cast</code>. The call is translating into <code>std::function&lt;void(int&amp;,int&amp;)&gt;</code> while the <code>any</code> has a <code>std::function&lt;void(int,int)&gt;</code>. This make the map very tricky to use -- any ideas how to mitigate this issue? (I am using c++2a mode on gcc-mp-8 (MacPorts gcc8 8.2.0_0) 8.2.0 -- not sure if that is a factor or not)."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1552, "user_id": 1202808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/35b124689a6d9fc44a7904e51d4cb5fb?s=128&d=identicon&r=PG", "display_name": "RandomBits", "link": "https://stackoverflow.com/users/1202808/randombits"}, "edited": false, "score": 0, "creation_date": 1538089228, "post_id": 45718187, "comment_id": 92032081, "body": "@RandomBits no, this technique is very fragile. You can mitigate it by explicitly naming the declaration type, e.g. <code>map[&quot;foo&quot;].operator()&lt;int, int&gt;(n, m);</code>, but that&#39;s ugly and still easy to get wrong"}, {"owner": {"reputation": 63, "user_id": 4249323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d1bec9c2b1a0dd74e112644559ec736?s=128&d=identicon&r=PG&f=1", "display_name": "Josefhu15", "link": "https://stackoverflow.com/users/4249323/josefhu15"}, "edited": false, "score": 0, "creation_date": 1580752720, "post_id": 45718187, "comment_id": 106192863, "body": "@Caleth this gives me an error on the line where <code>AnyCallable(std::function(fun)) {}</code> is. It says &quot;std::function&quot;: use of class template requires template argument list."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "edited": false, "score": 0, "creation_date": 1609160779, "post_id": 45718187, "comment_id": 115762340, "body": "@Caleth: What about generifying the return value as well instead of hardcoding it to <code>void</code>? Also when using variables only writing <code>int i = 1; map[&quot;foo&quot;].operator()&lt;int, int&gt;((int) i, 2);</code> seems to work. The last cast is necessary or it won&#39;t compile. This solution is still highly unsafe and does not behave like a &quot;normal&quot; function call would."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 23, "last_activity_date": 1538089404, "last_edit_date": 1538089404, "creation_date": 1502899079, "answer_id": 45718187, "question_id": 45715219, "link": "https://stackoverflow.com/questions/45715219/store-functions-with-different-signatures-in-a-map/45718187#45718187", "title": "Store functions with different signatures in a map", "body": "<p>You can type-erase the function types into a container, then provide a template <code>operator()</code>. This will throw <code>std::bad_any_cast</code> if you get it wrong.</p>\n\n<p>N.B. because of the type erasure, you will have to specify exactly matching arguments at the call site, as e.g. <code>std::function&lt;void(std::string)&gt;</code> is distinct from <code>std::function&lt;void(const char *)&gt;</code>, even though both can be called with a value like <code>\"Hello\"</code>.</p>\n\n<pre><code>#include &lt;any&gt;\n#include &lt;functional&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Ret&gt;\nstruct AnyCallable\n{\n    AnyCallable() {}\n    template&lt;typename F&gt;\n    AnyCallable(F&amp;&amp; fun) : AnyCallable(std::function(fun)) {}\n    template&lt;typename ... Args&gt;\n    AnyCallable(std::function&lt;Ret(Args...)&gt; fun) : m_any(fun) {}\n    template&lt;typename ... Args&gt;\n    Ret operator()(Args&amp;&amp; ... args) \n    { \n        return std::invoke(std::any_cast&lt;std::function&lt;Ret(Args...)&gt;&gt;(m_any), std::forward&lt;Args&gt;(args)...); \n    }\n    std::any m_any;\n};\n\ntemplate&lt;&gt;\nstruct AnyCallable&lt;void&gt;\n{\n    AnyCallable() {}\n    template&lt;typename F&gt;\n    AnyCallable(F&amp;&amp; fun) : AnyCallable(std::function(fun)) {}\n    template&lt;typename ... Args&gt;\n    AnyCallable(std::function&lt;void(Args...)&gt; fun) : m_any(fun) {}\n    template&lt;typename ... Args&gt;\n    void operator()(Args&amp;&amp; ... args) \n    { \n        std::invoke(std::any_cast&lt;std::function&lt;void(Args...)&gt;&gt;(m_any), std::forward&lt;Args&gt;(args)...); \n    }\n    std::any m_any;\n};\n\nvoid foo(int x, int y)\n{\n   std::cout &lt;&lt; \"foo\" &lt;&lt; x &lt;&lt; y &lt;&lt; std::endl;\n}\n\nvoid bar(std::string x, int y, int z)\n{\n   std::cout &lt;&lt; \"bar\" &lt;&lt; x &lt;&lt; y &lt;&lt; z &lt;&lt; std::endl;\n} \n\nusing namespace std::literals;\n\nint main()\n{\n   std::map&lt;std::string, AnyCallable&lt;void&gt;&gt; map;\n\n   map[\"foo\"] = &amp;foo;      //store the methods in the map\n   map[\"bar\"] = &amp;bar;\n\n   map[\"foo\"](1, 2);       //call them with parameters I get at runtime\n   map[\"bar\"](\"Hello, std::string literal\"s, 1, 2);\n   //map[\"bar\"](\"Hello, const char *literal\", 1, 2); // bad_any_cast\n   map[\"bar\"].operator()&lt;std::string, int, int&gt;(\"Hello, const char *literal\", 1, 2); // explicit template parameters\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 6503744, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e1afb7d9d7e7a50a0539da24dcd7599?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf Hintersteininger", "link": "https://stackoverflow.com/users/6503744/ralf-hintersteininger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4559, "favorite_count": 6, "accepted_answer_id": 45718187, "answer_count": 3, "score": 21, "last_activity_date": 1538089404, "creation_date": 1502890835, "last_edit_date": 1502892926, "question_id": 45715219, "link": "https://stackoverflow.com/questions/45715219/store-functions-with-different-signatures-in-a-map", "title": "Store functions with different signatures in a map", "body": "<p>I am trying to create a <code>map</code> with  <code>string</code> as key and a generic method as <code>value</code> in C++, but I do not know if that is even possible. I would like to do something like that:</p>\n\n<pre><code>void foo(int x, int y)\n{\n   //do something\n}\n\nvoid bar(std::string x, int y, int z)\n{\n   //do something\n} \n\nvoid main()\n{\n   std::map&lt;std::string, \"Any Method\"&gt; map;\n\n   map[\"foo\"] = &amp;foo;      //store the methods in the map\n   map[\"bar\"] = &amp;bar;\n\n   map[\"foo\"](1, 2);       //call them with parameters I get at runtime\n   map[\"bar\"](\"Hello\", 1, 2);\n}\n</code></pre>\n\n<p>Is that possible? If yes, how can I realise this?</p>\n"}, {"tags": ["c++", "windows-runtime", "gamepad", "xinput"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502890905, "post_id": 45715212, "comment_id": 78388482, "body": "You question might be better suited for Superuser, Gaming or some other Stackexchange site."}, {"owner": {"reputation": 2227, "user_id": 1289007, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c09a0c0e9587d8bc02473752e16e0490?s=128&d=identicon&r=PG", "display_name": "Sunius", "link": "https://stackoverflow.com/users/1289007/sunius"}, "edited": false, "score": 0, "creation_date": 1502939742, "post_id": 45715212, "comment_id": 78409569, "body": "Can you show some code that doesn&#39;t work?"}, {"owner": {"reputation": 640, "user_id": 3111723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f6cc5dfdc3fff2278517e8ae2eb40f?s=128&d=identicon&r=PG&f=1", "display_name": "TJ Bandrowsky", "link": "https://stackoverflow.com/users/3111723/tj-bandrowsky"}, "edited": false, "score": 0, "creation_date": 1503020896, "post_id": 45715212, "comment_id": 78451988, "body": "auto pads = Gamepad.Gamepads();  auto sz = pads.Size();"}, {"owner": {"reputation": 640, "user_id": 3111723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f6cc5dfdc3fff2278517e8ae2eb40f?s=128&d=identicon&r=PG&f=1", "display_name": "TJ Bandrowsky", "link": "https://stackoverflow.com/users/3111723/tj-bandrowsky"}, "edited": false, "score": 0, "creation_date": 1505851920, "post_id": 45715212, "comment_id": 79579949, "body": "I actually figured out the answer to this: Gamepad.Gamepads collection isn&#39;t necessarily populated instantly at application startup up. You must wire up handlers to the Gamepad added and removed events, and then, it will work."}], "owner": {"reputation": 640, "user_id": 3111723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f6cc5dfdc3fff2278517e8ae2eb40f?s=128&d=identicon&r=PG&f=1", "display_name": "TJ Bandrowsky", "link": "https://stackoverflow.com/users/3111723/tj-bandrowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502890821, "creation_date": 1502890821, "question_id": 45715212, "link": "https://stackoverflow.com/questions/45715212/windows-gaming-input-gamepads-doesnt-work", "title": "Windows.Gaming.Input.Gamepads doesn&#39;t work?", "body": "<p>I've got Windows 10 Creators Update and am writing a UWP C++ app.  I've tried with both C++/WinRT and C++/WRL and it seems that Windows.Gaming.Input.Gamepads just refuses to see my wired XBOX 360 controller and my Logitech XBOX 360 style gaming controller. Both are old, but they do show up in device manager as XBOX 360 controllers, and both work with other games.  I've XInput, but XInput could only see the Logitech, and not the Microsoft controller. I would have thought the newer API would have picked them up.  But here's the crazy part. Both controllers work fine in Microsoft.Minecraft, which is a Windows store application, so, by the store rules, I thought only XInput and Windows.Gaming.Input.Gamepads was supported.  So the question is, really, what API could they be using, that recognizes both joysticks, and why wouldn't Microsoft Windows.Gaming.Input work with a Microsoft joystick?</p>\n"}, {"tags": ["c++", "sockets", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 1, "creation_date": 1502901413, "post_id": 45715081, "comment_id": 78395858, "body": "The shared_ptr solution you linked probably is correct, because it captures the shared_ptr by value, in the lambda. So once the handler is called, it should deallocate itself. However your code with shared_ptr doesn&#39;t do that."}], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 2756123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x71E3.jpg?s=128&g=1", "display_name": "Tom Trebicky", "link": "https://stackoverflow.com/users/2756123/tom-trebicky"}, "is_accepted": true, "score": 2, "last_activity_date": 1502932270, "last_edit_date": 1502932270, "creation_date": 1502901791, "answer_id": 45718964, "question_id": 45715081, "link": "https://stackoverflow.com/questions/45715081/reserving-memory-for-asynchronous-send-buffers-boost-asio-sockets/45718964#45718964", "title": "Reserving memory for asynchronous send buffers (boost asio sockets)", "body": "<p>What I usually do is to wrap it in a class that inherits from std::enable_shared_from_this&lt;> something along the following lines:</p>\n\n<pre><code>class Sender : public std::enable_shared_from_this&lt;Sender&gt; {\n public:\n  using CompletionHandler =\n      std::function&lt;void(const boost::system::error_code&amp; ec,\n                         size_t bytes_transferred,\n                         std::shared_ptr&lt;Sender&gt; sender)&gt;;\n\n  ~Sender() = default;\n\n  template&lt;typename... Args&gt;\n  static std::shared_ptr&lt;Sender&gt; Create(Args&amp;&amp;... args) {\n    return std::shared_ptr&lt;Sender&gt;(new Sender(std::forward&lt;Args&gt;(args)...));\n  }\n\n  void AsyncSendTo(const char* buffer, size_t buffer_size,\n                   CompletionHandler completion_handler) {\n    data_.append(buffer, buffer_size);\n    socket.async_send_to(\n        boost::asio::buffer(data_), endpoint_,\n        [self = shared_from_this(),\n         completion_handler = std::move(completion_handler)]\n        (const boost::system::error_code&amp; ec,\n         size_t bytes_transferred) mutable {\n          completion_handler(ec, bytes_transferred, std::move(self));\n        });\n  }\n\n private:\n  Sender() = default;\n  Sender(const Sender&amp;) = delete;\n  Sender(Sender&amp;&amp;) = delete;\n  Sender&amp; operator=(const Sender&amp;) = delete;\n  Sender&amp; operator=(Sender&amp;&amp;) = delete;\n\n  SocketType socket_;\n  EndpointType endpoint_;\n  std::string data_;\n}\n</code></pre>\n\n<p>Obviously, you have to guarantee the <code>completion_handler</code>'s lifetime. But other than that, the completion handler is gonna come back with a valid <code>std::shared_ptr&lt;Sender&gt;</code> whenever it's done and you can do whatever you need with the data Sender carries.</p>\n\n<p>In the example you posted, <code>buf</code> would leave scope and get destroyed on <code>send_to</code> return, unless you first captured it in <code>bind</code>. </p>\n\n<p>Footnote1: Those <code>std::move()</code>s might need to be removed depending on whether your compiler is C++14 compatible when it comes to lambdas.</p>\n\n<p>Footnote2: Stay away from <code>bind</code> unless you absolutely need to exploit its dynamic nature.</p>\n"}], "owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 45718964, "answer_count": 1, "score": 1, "last_activity_date": 1503196468, "creation_date": 1502890512, "last_edit_date": 1503196468, "question_id": 45715081, "link": "https://stackoverflow.com/questions/45715081/reserving-memory-for-asynchronous-send-buffers-boost-asio-sockets", "title": "Reserving memory for asynchronous send buffers (boost asio sockets)", "body": "<p>I'm trying to change the implementation of a fire-and-forget UDP send-function from being synchronous to asynchronous. </p>\n\n<p>The current simplified synchronous function looks like this: </p>\n\n<pre><code>ssize_t UDPTransport::send_to(const char * buffer, size_t bufferSize) {\n    return mPSocket-&gt;send_to(boost::asio::buffer(buffer, bufferSize), mOutputEndpoint);\n}\n</code></pre>\n\n<p>I've got a <code>thread_group</code> set up and <code>io_service::run()</code> is set to use it. However, the problem is that I have no guarantee that <code>buffer</code> will exist after this call has completed.  I need to store the contents of the buffer and then know when it is free so that I can re-use it later or delete it.  The following is simple, but if I fire off two <code>send_to</code> calls, then I have no guarantee that the <code>handle_send</code> will be called in the same order and I might <code>pop</code> something that is still needed!</p>\n\n<pre><code>ssize_t UDPTransport::send_to(const char * buffer, size_t bufferSize) {\n\n    boost::asio::mutable_buffer b1 = boost::asio::buffer(buffer,bufferSize);\n    mMutex.lock();\n    mQueue.push(b1);\n\n    mPSocket-&gt;async_send_to(mQueue.back(), mOutputEndpoint,\n                            boost::bind(&amp;UDPTransport::handle_send, this,\n                                        boost::asio::placeholders::error,\n                                        boost::asio::placeholders::bytes_transferred));\n\n    mMutex.unlock();\n    return bufferSize;\n}\n\nvoid UDPTransport::handle_send(const boost::system::error_code&amp; error,\n                               std::size_t bytes_transferred)\n{\n    mMutex.lock();\n    mQueue.pop();\n    mMutex.unlock();\n}\n</code></pre>\n\n<p>What's a good way to store an asynchronous buffer, then clean it up once it's no longer needed?  </p>\n\n<p><a href=\"https://stackoverflow.com/a/32273702/1723954\">Reading online</a> an even simpler way may be below, but I don't know if I trust it.  Why would a shared pointer decide to not de-allocate itself until after the handler has been called?</p>\n\n<pre><code>ssize_t UDPTransport::send_to(const char * buffer, size_t bufferSize) \n{\n    auto buf = std::make_shared&lt;std::string&gt;(buffer, bufferSize);\n    mPSocket-&gt;async_send_to(boost::asio::buffer(*buf), mOutputEndpoint,\n                            boost::bind(&amp;UDPTransport::handle_send, this,\n                                        boost::asio::placeholders::error,\n                                        boost::asio::placeholders::bytes_transferred));\n    return bufferSize;\n}\n</code></pre>\n"}, {"tags": ["c++", "assembly", "arm"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1502905653, "post_id": 45714810, "comment_id": 78398264, "body": "The <code>swp</code> and <code>swpb</code> instructions were removed from the ARM architecture. Use <code>ldrex&#47;strex</code> for atomic swaps."}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 1, "creation_date": 1502925495, "post_id": 45714810, "comment_id": 78406503, "body": "Is this <code>__sync_val_compare_and_swap</code> (<a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Atomic-Builtins.html\" rel=\"nofollow noreferrer\">link</a>)?  Why not use the atomic, and let the compiler sort things out?"}, {"owner": {"reputation": 9, "user_id": 3127081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836488338454063ef6f945ecaebd7cfa?s=128&d=identicon&r=PG&f=1", "display_name": "Xsx", "link": "https://stackoverflow.com/users/3127081/xsx"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1502940071, "post_id": 45714810, "comment_id": 78409645, "body": "@EOF I tried <code>ldrex&#47;strex</code> and got similar error message. And, where can I find instructions my cpu supports?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1502971971, "post_id": 45714810, "comment_id": 78427206, "body": "@DavidWohlferd: gcc4.9 supports the <code>__atomic</code> built-ins, and recent version of gcc deprecate the <code>__sync</code> builtins.  The manual says new code should use <code>__atomic</code> builtins, instead of <code>__sync</code>.  Also, there&#39;s a plain <code>exchange</code> builtin, as well as CAS."}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1502971786, "creation_date": 1502971786, "answer_id": 45734748, "question_id": 45714810, "link": "https://stackoverflow.com/questions/45714810/selected-processor-does-not-support-swp-x1-x1-x0/45734748#45734748", "title": "selected processor does not support `swp x1,x1,[x0]&#39;", "body": "<p>You don't need (<a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">and shouldn't use</a>) inline assembly for this.</p>\n\n<p>Use a gcc builtin:  <a href=\"https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html#g_t_005f_005fatomic-Builtins\" rel=\"nofollow noreferrer\"><code>type __atomic_exchange_n (type *ptr, type val, int memorder)</code></a> or C++11 <code>std::atomic</code> for this, so the compiler can use the best instruction sequence for the target CPU, based on your <code>-mcpu=</code> command line option and whether you're building for 64-bit or 32-bit ARM (or x86), etc. etc.  Also, the compiler understands what you're doing and can optimize accordingly.</p>\n\n<pre><code>// static inline\nint xchg_gcc(int *p, int newval) {\n    int oldval = __atomic_exchange_n(p, newval, __ATOMIC_SEQ_CST);\n    //__atomic_signal_fence ( __ATOMIC_SEQ_CST);\n\n    return oldval;\n}\n</code></pre>\n\n<p>For ARM64 and ARM (32-bit with <code>-mcpu=cortex-a72</code>) with gcc5.4, this compiles to what you want (<a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;//+static+inline%0Aint+xchg_gcc(int+*p,+int+newval)+%7B%0A++++int+oldval+%3D+__atomic_exchange_n(p,+newval,+__ATOMIC_SEQ_CST)%3B%0A++++//__atomic_signal_fence+(+__ATOMIC_SEQ_CST)%3B%0A%0A++++return+oldval%3B%0A%7D%0A%0A%0A%23include+%3Catomic%3E%0A//+static+inline%0Aint+xchg_stdatomic(std::atomic%3Cint%3E+*p,+int+newval)+%7B%0A++++//atomic_signal_fence(std::memory_order_seq_cst)%3B++//+equivalent+of+asm(%22%22:::%22memory%22)%0A++++int+oldval+%3D+p-%3Eexchange(newval,+std::memory_order_relaxed)%3B%0A++++//atomic_signal_fence(std::memory_order_seq_cst)%3B++//+equivalent+of+asm(%22%22:::%22memory%22)%0A++++return+oldval%3B%0A%7D%0A%0Astd::atomic%3Cint%3E+xa%3B%0Aint+x%3B%0Aint+y,+z%3B%0A%0Avoid+reordering_test+()+%7B%0A++++y+%3D+1%3B++//+clang4.0+for+x86+optimizes+this+out+(by+moving+it+to+after+the+exchange),+with+mo_relaxed+and+no+fences.%0A++++//+seq_cst+on+the+exchange+stops+clang,+even+with+no+fences.%0A++++//+gcc+doesn!&#39;t+reoder+even+then.%0A%0A++++int+tmp+%3D+1%3B%0A++++tmp+%3D+xchg_gcc(%26x,+1)%3B%0A++++//tmp+%3D+xchg_stdatomic(%26xa,+1)%3B%0A++++y+%3D+2%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:32.24438942829932,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:aarchg54,filters:(___0:(),b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;,jquery:&#39;3.2.1&#39;,length:1,prevObject:(___0:(sizzle1502968292536:(undefined:(legend:!(5,0,&#39;1&#39;)))),length:1,prevObject:(___0:(jQuery3210093120048859145041:(display:&#39;&#39;),sizzle1502968292536:(undefined:(legend:!(5,0,&#39;1&#39;)))),length:1))),options:&#39;-std%3Dgnu%2B%2B11+-Wall+-O3&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;ARM64+gcc+5.4+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:33.12272790206467,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:arm541,filters:(___0:(),b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;,jquery:&#39;3.2.1&#39;,length:1,prevObject:(___0:(sizzle1502968292536:(undefined:(legend:!(75051,0,&#39;1&#39;)))),length:1,prevObject:(___0:(jQuery3210093120048859145041:(display:&#39;&#39;),sizzle1502968292536:(undefined:(legend:!(75051,0,&#39;1&#39;)))),length:1))),options:&#39;-std%3Dgnu%2B%2B11+-Wall+-O3+-mcpu%3Dcortex-a72&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;ARM+gcc+5.4.1+(Editor+%231,+Compiler+%233)&#39;,t:&#39;0&#39;)),k:34.632882669636004,l:&#39;4&#39;,m:71.25683060109289,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:clang400,filters:(___0:(),b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;,jquery:&#39;3.2.1&#39;,length:1,prevObject:(___0:(sizzle1502968292536:(undefined:(legend:!(10,0,&#39;1&#39;)))),length:1,prevObject:(___0:(jQuery3210093120048859145041:(display:&#39;&#39;),sizzle1502968292536:(undefined:(legend:!(10,0,&#39;1&#39;)))),length:1))),options:&#39;-std%3Dgnu%2B%2B11+-O3&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+4.0.0+(Editor+%231,+Compiler+%232)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:28.74316939890711,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:34.632882669636004,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Godbolt compiler explorer</a>):</p>\n\n<pre><code>.L2:   ## This is the ARM64 version.\n    ldaxr   w2, [x0]\n    stlxr   w3, w1, [x0]\n    cbnz    w3, .L2\n    mov     w0, w2      # This insn will optimize away after inlining, leaving just the retry loop\n    ret\n</code></pre>\n\n<p>Or if you just want atomicity but don't need ordering wrt other operations, then use <code>__ATOMIC_RELAXED</code> instead of <code>__ATOMIC_SEQ_CST</code>.  Then it compiles to <code>ldxr</code> / <code>stxr</code>, instead of the acquire/release version of the LL/SC instructions.</p>\n\n<p>For the 32-bit version, if you don't specify a <code>-mcpu</code> or <code>-march</code>, it calls library functions because it doesn't know what to use for exchange.</p>\n\n<p>I'm not sure if <code>SEQ_CST</code> for the <code>__atomic_exchange</code> builtin orders with respect to non-atomic things the way <code>asm volatile(\"\":::\"memory\")</code> does; if not you might need fences as described below for C++11 <code>atomic_signal_fence</code>.</p>\n\n<hr>\n\n<p>or use this portable C++11 version, which compiles to the same asm:</p>\n\n<pre><code>#include &lt;atomic&gt;\n// static inline\nint xchg_stdatomic(std::atomic&lt;int&gt; *p, int newval) {\n    atomic_signal_fence(std::memory_order_seq_cst);\n    int oldval = p-&gt;exchange(newval, std::memory_order_seq_cst);\n    atomic_signal_fence(std::memory_order_seq_cst);  // order WRT. non-atomic variables (on gcc/clang at least).\n    return oldval;\n}\n</code></pre>\n\n<p><code>atomic_signal_fence</code> is used as an equivalent of <code>asm(\"\":::\"memory\")</code>, to block compile-time reordering with non-<code>atomic</code> loads/stores (but without emitting any instructions).  This is how gcc implements it, but IDK if that's required by the standard of just an implementation detail in gcc.</p>\n\n<p>In gcc at least, <code>atomic_signal_fence</code> orders operations on \"normal\" variables, but <code>atomic_thread_fence</code> only orders operations on <code>atomic</code> variables.  (Shared access to non-<code>atomic</code> variables from multiple threads would be an undefined-behaviour data race, so gcc assumes it doesn't happen.  The question here is whether the standard requires <code>signal_fence</code> to order non-<code>atomic</code> operations along with <code>atomic</code> and <code>volatile</code> accesses, because the guarantees about what you can safely access in signal handlers are quite weak.)</p>\n\n<p>Anyway, since signal_fence compiles to no instruction, and is only blocking reordering that we want <code>exchange()</code> to block anyway, there's no harm.  (Unless you <em>don't</em> want <code>exchange()</code> to order your non-shared variables, in which case you shouldn't use signal_fence).</p>\n\n<hr>\n\n<p><strong><code>swp</code> is supported but deprecated in ARMv6 and ARMv7</strong>.  <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/CJHBGBBJ.html\" rel=\"nofollow noreferrer\">ARM's docs say</a> that it increases interrupt latency (because <code>swp</code> itself is not interruptible).  Also,</p>\n\n<blockquote>\n  <p>In a multi-core system, preventing access to main memory for all processors for the duration of a swap instruction can reduce overall system performance.</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 3127081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836488338454063ef6f945ecaebd7cfa?s=128&d=identicon&r=PG&f=1", "display_name": "Xsx", "link": "https://stackoverflow.com/users/3127081/xsx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502971786, "creation_date": 1502889782, "last_edit_date": 1502941328, "question_id": 45714810, "link": "https://stackoverflow.com/questions/45714810/selected-processor-does-not-support-swp-x1-x1-x0", "title": "selected processor does not support `swp x1,x1,[x0]&#39;", "body": "<p>I try to use swp instruction to implement atomic swap. </p>\n\n<pre><code>asm volatile (\"swp %[newval], %[newval], [%[oldval]]\"\n        : [newval] \"+r\" (newval), [oldval] \"+p\" (oldval)\n        :\n        : \"memory\");\n</code></pre>\n\n<p>when I compiling the code (using <code>g++ main.cpp -o main -march=armv8-a</code>). I got the following error message.</p>\n\n<pre><code>/tmp/cc0MHTHA.s: Assembler messages:\n/tmp/cc0MHTHA.s:20: Error: selected processor does not support `swp x1,x1,[x0]'\n</code></pre>\n\n<p>The ARM machine I use is with armv8, /proc/cpuinfo is like this (It's a SMP machine with 16 cores, information of others processors is the same besides the first line.)</p>\n\n<pre><code>processor   : 0\nmodel name  : phytium FT1500a\nflags   : fp asimd evtstrm aes pmull sha1 sha2 crc32\nCPU implementer : 0x70\nCPU architecture: 8\nCPU variant : 0x1\nCPU part    : 0x660\nbogomips    : 3590.55\nCPU revision    : 1\n</code></pre>\n\n<p><code>g++ --version</code> outputs </p>\n\n<pre><code>g++ (Ubuntu/Linaro 4.9.1-16kord6) 4.9.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>I'm getting the following errors when using ldrex/strex instructions</p>\n\n<pre><code>/tmp/ccXxJgQH.s: Assembler messages:\n/tmp/ccXxJgQH.s:19: Error: unknown mnemonic `ldrex' -- `ldrex x0,[x0]'\n</code></pre>\n\n<p>Can anyone explain me why and where this error comes and how to deal with this error? The machine does not support SWP or I should add some parameters(maybe -march) on compile command to indicate the CPU architecture? </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1502889238, "post_id": 45714552, "comment_id": 78387250, "body": "Time to learn vectors <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/vector/vector</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1502889264, "post_id": 45714552, "comment_id": 78387270, "body": "<code>c[i]</code> is a <code>std::vector</code>, as stated by the compiler there&#39;s no overload of <code>operator&lt;&lt;</code> that takes a <code>std::vector</code> as argument."}, {"owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 1, "creation_date": 1502889349, "post_id": 45714552, "comment_id": 78387326, "body": "Depending on how big <code>n</code> is, you would also invoke undefined behaviour. (If it would compile)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502889425, "post_id": 45714552, "comment_id": 78387384, "body": "As for how to solve your problem, if you had a plain <code>std::vector&lt;int&gt;</code> object (variable), do you know how to print the elements from that? Then why don&#39;t you use it <i>inside the loop you show?</i>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1502889443, "post_id": 45714552, "comment_id": 78387394, "body": "<code>vector&lt;int&gt; c[2];</code> -- You are declaring an array of <code>vector&lt;int&gt;</code>.  Is this really what you want?"}, {"owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1502889676, "post_id": 45714552, "comment_id": 78387599, "body": "Yeah @PaulMcKenzie"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1502890108, "post_id": 45714552, "comment_id": 78387891, "body": "What is <code>n</code>? What output do you expect? BTW <code>c</code> is not a vector, it&#39;s an array of 2 vectors."}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 7404875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80971b1d5ed24a338b33e8761cf394e?s=128&d=identicon&r=PG&f=1", "display_name": "pmaxim98", "link": "https://stackoverflow.com/users/7404875/pmaxim98"}, "is_accepted": false, "score": 1, "last_activity_date": 1502891333, "last_edit_date": 1502891333, "creation_date": 1502889489, "answer_id": 45714694, "question_id": 45714552, "link": "https://stackoverflow.com/questions/45714552/print-values-of-vector/45714694#45714694", "title": "Print values of vector", "body": "<pre><code>  for (const auto &amp; vec : c) {\n        for (const auto elem : vec)\n            std::cout &lt;&lt; elem &lt;&lt; ' ';\n        std::cout &lt;&lt; '\\n';\n    }\n</code></pre>\n\n<p>You need at least C++11.</p>\n\n<p>Also, you can also:</p>\n\n<pre><code>constexpr size_t vecLen = 2;\nstd::vector&lt;int&gt; c[vecLen];\nc[0].push_back(0);\nc[0].push_back(1);\nc[1].push_back(2);\nc[0].push_back(3);\n\nfor (size_t vecIndex = 0; vecIndex &lt; vecLen; ++vecIndex) {\n    for (size_t itemIndex = 0; itemIndex &lt; c[vecIndex].size(); ++itemIndex)\n        std::cout &lt;&lt; c[vecIndex][itemIndex] &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>But I wouldn't recommend it.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "edited": false, "score": 0, "creation_date": 1502889872, "post_id": 45714778, "comment_id": 78387732, "body": "It gave me this error:  error: request for member &#39;begin&#39; in &#39;c&#39;, which is of non-class type &#39;std::vector&lt;int&gt; [2]&#39;|"}, {"owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "reply_to_user": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "edited": false, "score": 0, "creation_date": 1502902879, "post_id": 45714778, "comment_id": 78396655, "body": "look at the post i made a edit and added a full example"}], "tags": [], "owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "is_accepted": false, "score": 0, "last_activity_date": 1502890675, "last_edit_date": 1502890675, "creation_date": 1502889709, "answer_id": 45714778, "question_id": 45714552, "link": "https://stackoverflow.com/questions/45714552/print-values-of-vector/45714778#45714778", "title": "Print values of vector", "body": "<p>whenever you see the following sign <code>&lt;&lt;</code> used to print stuff out, it works because its overloaded; however <code>vector&lt;&gt;</code> does not have an overload function to able you to do this. what you can do is the following:</p>\n\n<p>1- there is a <code>iterarot</code> class that allows you to iterate in containers such as vector:</p>\n\n<pre><code>vector&lt;int&gt;::iterator it;\n\ncout &lt;&lt; \"myvector contains:\";\nfor ( it=myvector.begin() ; it &lt; myvector.end(); it++ )\n    cout &lt;&lt; \" \" &lt;&lt; *it;\n\ncout &lt;&lt; endl;\n</code></pre>\n\n<p>2- if you are writing your class, write an overload function like so:</p>\n\n<p>to <code>iterate</code>:</p>\n\n<pre><code>std::vector&lt;int&gt;::const_iterator iter= vec.begin();\nfor(iter; iter != vec.end(); ++iter)\n  {\n     cout&lt;&lt;*iter; //This is what step 2 provides for\n  }\n</code></pre>\n\n<p>overload func:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;( ostream&amp; os, const vector&lt;int&gt;&amp;)\n  {\n\n  }\n</code></pre>\n\n<p>here is how to use vector and iterator:</p>\n\n<pre><code>    cout &lt;&lt; \"vector from initializer list: \" &lt;&lt; endl;\n    vector&lt;int&gt; vi1 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\n    cout &lt;&lt; \"size: \" &lt;&lt; vi1.size() &lt;&lt; endl;\n    cout &lt;&lt; \"front: \" &lt;&lt; vi1.front() &lt;&lt; endl;\n    cout &lt;&lt; \"back: \" &lt;&lt; vi1.back() &lt;&lt; endl;\n\n    // iterator\n    vector&lt;int&gt;::iterator itbegin = vi1.begin();\n    vector&lt;int&gt;::iterator itend = vi1.end();\n    for (auto it = itbegin; it &lt; itend; ++it) {\n        cout &lt;&lt; *it &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"element at 5: \" &lt;&lt; vi1[5] &lt;&lt; endl;\n    cout &lt;&lt; \"element at 5: \" &lt;&lt; vi1.at(5) &lt;&lt; endl;\n\n    cout &lt;&lt; \"range-based for loop:\" &lt;&lt; endl;\n    for (int &amp; i : vi1) {\n        cout &lt;&lt; i &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7266, "favorite_count": 0, "closed_date": 1502889796, "answer_count": 2, "score": 0, "last_activity_date": 1502891333, "creation_date": 1502889132, "question_id": 45714552, "link": "https://stackoverflow.com/questions/45714552/print-values-of-vector", "closed_reason": "Duplicate", "title": "Print values of vector", "body": "<p>I am inserting these elements using the push_back() function, I want to know </p>\n\n<p>How do I print the content of vector c?</p>\n\n<pre><code>vector&lt;int&gt; c[2];\nc[0].push_back(0);\nc[0].push_back(1);\nc[1].push_back(2);\nc[0].push_back(3);\n</code></pre>\n\n<p>I tried <code>for(int i = 0; i &lt; n; i++) cout &lt;&lt; c[i] &lt;&lt; endl;</code></p>\n\n<p>But it gave me this error </p>\n\n<pre><code>error: no match for 'operator&lt;&lt;' in 'std::cout &lt;&lt; c[i]'|\n</code></pre>\n"}, {"tags": ["python", "c++", "posix", "aio"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502891084, "post_id": 45714520, "comment_id": 78388624, "body": "I believe Python 3 took the Unicode plunge, so the first two <code>char</code>s are the first character, and the second <code>char</code> is zero."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 6185163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a362f02d8cd006d659a886b0e2cad1?s=128&d=identicon&r=PG&f=1", "display_name": "Palooon", "link": "https://stackoverflow.com/users/6185163/palooon"}, "is_accepted": true, "score": 0, "last_activity_date": 1502897262, "creation_date": 1502897262, "answer_id": 45717571, "question_id": 45714520, "link": "https://stackoverflow.com/questions/45714520/const-char-argument-gives-only-first-character-on-python3/45717571#45717571", "title": "Const char* argument gives only first character (on python3)", "body": "<p>You are right. It had to do with encoding and decoding strings in python 3.x. I googled it and this site helped me to figured it out: <a href=\"http://pythoncentral.io/encoding-and-decoding-strings-in-python-3-x/\" rel=\"nofollow noreferrer\">http://pythoncentral.io/encoding-and-decoding-strings-in-python-3-x/</a></p>\n\n<p>I converted string to bytes like that: </p>\n\n<pre><code>&gt;&gt;&gt; filename=bytes('aa.txt', 'utf-8') \n</code></pre>\n\n<p>and now my function works in python 3 as well. </p>\n\n<pre><code>&gt;&gt;&gt; m.awrite(filename, 40) \naa.txt \n0 \n</code></pre>\n\n<p>Thanks a lot @molbdnilo ! </p>\n"}], "owner": {"reputation": 13, "user_id": 6185163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a362f02d8cd006d659a886b0e2cad1?s=128&d=identicon&r=PG&f=1", "display_name": "Palooon", "link": "https://stackoverflow.com/users/6185163/palooon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 45717571, "answer_count": 1, "score": 1, "last_activity_date": 1502897262, "creation_date": 1502889056, "question_id": 45714520, "link": "https://stackoverflow.com/questions/45714520/const-char-argument-gives-only-first-character-on-python3", "title": "Const char* argument gives only first character (on python3)", "body": "<p>I have created a very simple function in c++ that uses aio_write. In the arguments I get path to create a file and its size. To create new file I use <code>int open(const char *pathname, int flags, mode_t mode)</code>.</p>\n\n<p>Then I compile it to shared object using: <code>g++ -Wall -g -Werror aio_calls.cpp -shared -o aio_calls.so -fPIC -lrt</code>.</p>\n\n<p>On python 2.7.5 everything works perfect, but on python 3.4 I only get the first character of the path. Any clue how to make it work, so it take the whole path?</p>\n\n<p>Here is function code:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;aio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include \"aio_calls.h\"\n#define DLLEXPORT extern \"C\"\n\nusing namespace std;\n\nDLLEXPORT int awrite(const char *path, int size)\n{\n    // create the file\n    cout &lt;&lt; path &lt;&lt; endl;\n    int file = open(path, O_WRONLY | O_CREAT, 0644);\n\n    if (file == -1)\n        return errno;\n\n    // create the buffer\n    char* buffer = new char[size];\n\n    // create the control block structure\n    aiocb cb;\n    memset(buffer, 'a', size);\n    memset(&amp;cb, 0, sizeof(aiocb));\n    cb.aio_nbytes = size;\n    cb.aio_fildes = file;\n    cb.aio_offset = 0;\n    cb.aio_buf = buffer;\n\n    // write!\n    if (aio_write(&amp;cb) == -1)\n    {\n        close(file);\n        return errno;\n    }\n\n    // wait until the request has finished\n    while(aio_error(&amp;cb) == EINPROGRESS);\n\n    // return final status for aio request\n    int ret = aio_return(&amp;cb);\n    if (ret == -1)\n        return errno;\n\n    // now clean up\n    delete[] buffer;\n    close(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>As you can see I wrote cout at the beginning of my function. This is what happens on python 2:</p>\n\n<pre><code>Python 2.7.5 (default, Nov  6 2016, 00:28:07) \n[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from ctypes import cdll\n&gt;&gt;&gt; m=cdll.LoadLibrary('/home/administrator/Documents/aio_calls.so')\n&gt;&gt;&gt; m.awrite('aa.txt', 40)\naa.txt\n0\n</code></pre>\n\n<p>And this is what happens on python 3:</p>\n\n<pre><code>Python 3.4.5 (default, May 29 2017, 15:17:55) \n[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from ctypes import cdll\n&gt;&gt;&gt; m=cdll.LoadLibrary('/home/administrator/Documents/aio_calls.so')\n&gt;&gt;&gt; m.awrite('aa.txt', 40)\na\n0\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1502888496, "post_id": 45714197, "comment_id": 78386641, "body": "<a href=\"https://stackoverflow.com/questions/25479373/how-memory-is-allocated-for-private-and-public-members-of-the-class\" title=\"how memory is allocated for private and public members of the class\">stackoverflow.com/questions/25479373/&hellip;</a>"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1502888499, "post_id": 45714197, "comment_id": 78386645, "body": "Possible byte padding (answer to second question)?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1502888841, "post_id": 45714197, "comment_id": 78386921, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25479373/how-memory-is-allocated-for-private-and-public-members-of-the-class\">How memory is allocated for private and public members of the class</a>"}, {"owner": {"reputation": 752, "user_id": 7654030, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/852379ca630c9bca3c121b1e54ad4a19?s=128&d=identicon&r=PG&f=1", "display_name": "Austin_Anderson", "link": "https://stackoverflow.com/users/7654030/austin-anderson"}, "edited": false, "score": 0, "creation_date": 1502890552, "post_id": 45714197, "comment_id": 78388202, "body": "with c++11 you <a href=\"http://en.cppreference.com/w/c/language/_Alignof\" rel=\"nofollow noreferrer\">could check the alignment yourself</a>"}], "owner": {"reputation": 11, "user_id": 8472596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2707838ec20a5c0929dcb228827dc6f7?s=128&d=identicon&r=PG&f=1", "display_name": "C.Jx", "link": "https://stackoverflow.com/users/8472596/c-jx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502889912, "creation_date": 1502888306, "last_edit_date": 1502889912, "question_id": 45714197, "link": "https://stackoverflow.com/questions/45714197/alignment-of-data-member-in-derived-class", "title": "Alignment of data member in derived class", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nclass A\n{\n    public:\n    int val;\n    char c1;\n};\nclass B: public A\n{\n    public:\n    char c2;\n};\nclass C: public B\n{\n    public:\n    char c3;\n};\n\nint main()\n{\n    cout &lt;&lt; sizeof(A) &lt;&lt; \", \" &lt;&lt; sizeof(B) &lt;&lt; \", \" &lt;&lt; sizeof(C) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output is 8, 12, 12.\nThe size of B is 12 because there are 3 bytes padding after A::c1. But why the size of C is 12 too? Aren't there bytes padding after B::c2? \n(The compiler I used is gcc 4.8)</p>\n"}, {"tags": ["python", "c++", "runtime", "wxpython"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1502888308, "post_id": 45714156, "comment_id": 78386501, "body": "Well, you call <code>self.returnsReport.Destroy()</code>, shouldn&#39;t it be destroyed after that?"}, {"owner": {"reputation": 5783, "user_id": 395984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4a16205f08542f455a3f1a15ab2ce?s=128&d=identicon&r=PG", "display_name": "RobinDunn", "link": "https://stackoverflow.com/users/395984/robindunn"}, "edited": false, "score": 2, "creation_date": 1502902404, "post_id": 45714156, "comment_id": 78396389, "body": "Also, it would be better to delay creating the file dialogs until you actually need to show them."}], "owner": {"reputation": 306, "user_id": 6272169, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10156870110820287/picture?type=large", "display_name": "mickNeill", "link": "https://stackoverflow.com/users/6272169/mickneill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502888183, "creation_date": 1502888183, "question_id": 45714156, "link": "https://stackoverflow.com/questions/45714156/runtime-error-when-changing-files-in-wx-filedialog-widget", "title": "RUNTIME Error when changing files in wx.FileDialog widget", "body": "<p>I have a GUI that asks a user to open 3 xlsx files from 3 wx.FileDialog windows.  The program works fine, however I get a <code>RuntimeError: wrapped C/C++ object of type FileDialog has been deleted</code> if I try to change the file.  For instance on the returnsReport fileDialog, if I open the wrong file and go to change it, that is the error I get.  A snip it of the code is below, any help with this error would be great.</p>\n\n<pre><code>class MainFrame(wx.Frame):\n    def __init__(self):\n        frame = wx.Frame.__init__(self, None, wx.ID_ANY, \"Returns\", size = (625,250))\n        self.Center()\n        panel = wx.Panel(self,wx.ID_ANY)\n\n        box = wx.BoxSizer(wx.HORIZONTAL)\n        menubar = wx.MenuBar()\n        helpMenu = wx.Menu()                    ######MENUBAR\n        fileMenu = wx.Menu()\n        helpItem = helpMenu.Append(wx.ID_ANY, 'Help',\"Help\")\n        fileItem = fileMenu.Append(wx.ID_EXIT, 'Quit', 'Quit application')\n\n        menubar.Append(fileMenu, '&amp;File')\n        menubar.Append(helpMenu, '&amp;Help')\n\n\n\n\n\n        self.returnsReport = wx.FileDialog(panel, 'Open Returns Report', \"\", \"\", \"Excel Files (*.xlsx)|*.xlsx\", wx.FD_OPEN | wx.FD_FILE_MUST_EXIST)\n        self.returnsButton = wx.Button(panel, pos = (430,25), id=wx.ID_ANY, label=\"Returns Report\")\n        self.returnsButton.myname = \"Returns\"\n        self.returnsButton.Bind(wx.EVT_BUTTON, self.findReturns)\n\n        self.ser02Report = wx.FileDialog(panel, 'Open SER02', \"\", \"\", \"Excel Files (*.xlsx)|*.xlsx\", wx.FD_OPEN | wx.FD_FILE_MUST_EXIST)\n        self.ser02Button = wx.Button(panel, pos = (430,75), id=wx.ID_ANY, label=\"SER02 Report\")\n        self.ser02Button.myname = \"SER02\"\n        self.ser02Button.Bind(wx.EVT_BUTTON, self.findReturns)\n\n        self.objkReport = wx.FileDialog(panel, 'Open OBJK', \"\", \"\", \"Excel Files (*.xlsx)|*.xlsx\", wx.FD_OPEN | wx.FD_FILE_MUST_EXIST)\n        self.objkButton = wx.Button(panel, pos = (430,125), id=wx.ID_ANY, label=\"OBJK Report\")\n        self.objkButton.myname = \"OBJK\"\n        self.objkButton.Bind(wx.EVT_BUTTON, self.findReturns)\n\n        self.runButton = wx.Button(panel, pos = (500,175), id=wx.ID_ANY, label=\"Run Report\")\n        self.runButton.myname = \"Run\"\n        self.runButton.Bind(wx.EVT_BUTTON, self.runReport)\n\n\n        buttons = [self.returnsButton, self.ser02Button, self.objkButton]\n        self.returnsFile = wx.TextCtrl(panel, pos = (60,25), size = (350,-1))\n        self.ser02File = wx.TextCtrl(panel, pos = (60,75), size = (350,-1))\n        self.objkFile = wx.TextCtrl(panel, pos = (60,125), size = (350,-1))\n\n        self.Bind(wx.EVT_CLOSE, self.OnQuit)\n\n\n\n        #box.Add(self.lst,0,wx.EXPAND)\n        panel.SetSizer(box) \n        panel.Fit()\n\n\n    def findReturns(self, event):\n\n\n        button = event.GetEventObject().myname\n        if button == 'Returns':\n            self.returnsReport.ShowModal()\n            self.returnsFile.SetValue(self.returnsReport.GetPath())\n\n            self.returnsReport.Destroy()\n        elif button == 'SER02':\n            self.ser02Report.ShowModal()\n            self.ser02File.SetValue(self.ser02Report.GetPath())\n            self.ser02Report.Destroy()\n        else:\n            self.objkReport.ShowModal()\n            self.objkFile.SetValue(self.objkReport.GetPath())\n            self.objkReport.Destroy()   \n</code></pre>\n"}, {"tags": ["c++", "qt", "opengl", "antialiasing", "msaa"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 3, "creation_date": 1502887295, "post_id": 45713717, "comment_id": 78385697, "body": "MSAA doesn&#39;t help when working with a textured quad. It only handles/smoothes edges of polygons, not edges in textures."}, {"owner": {"reputation": 51, "user_id": 8369034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2217c0f7782b5004c8370a5a269d8291?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/8369034/j-s"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1502890307, "post_id": 45713717, "comment_id": 78388035, "body": "Ok, it&#39;s a temp code. It&#39;s better to use a FBO/RBO to render to the screen&#39;s FBO with a blit"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8369034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2217c0f7782b5004c8370a5a269d8291?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/8369034/j-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1502888762, "creation_date": 1502888762, "answer_id": 45714396, "question_id": 45713717, "link": "https://stackoverflow.com/questions/45713717/opengl-glitch-black-pixels-in-a-white-line-after-anti-aliasing-msaa-8x/45714396#45714396", "title": "OpenGL glitch; Black pixels in a white line after Anti-Aliasing MSAA 8x", "body": "<p>The error is in Render::RenderImage(...)</p>\n\n<p>This code ...</p>\n\n<pre><code>gVertices[0] = VECTOR3F(x, y, 0);\ngVertices[1] = VECTOR3F(x + w - 1, y, 0);\ngVertices[2] = VECTOR3F(x + w - 1, y + h - 1, 0);\ngVertices[3] = VECTOR3F(x, y + h - 1, 0);\n</code></pre>\n\n<p>must be replaced by this code</p>\n\n<pre><code>gVertices[0] = VECTOR3F(x, y, 0);\ngVertices[1] = VECTOR3F(x + w, y, 0);\ngVertices[2] = VECTOR3F(x + w, y + h, 0);\ngVertices[3] = VECTOR3F(x, y + h, 0);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8369034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2217c0f7782b5004c8370a5a269d8291?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/8369034/j-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 45714396, "answer_count": 1, "score": 1, "last_activity_date": 1503144088, "creation_date": 1502886965, "last_edit_date": 1503144088, "question_id": 45713717, "link": "https://stackoverflow.com/questions/45713717/opengl-glitch-black-pixels-in-a-white-line-after-anti-aliasing-msaa-8x", "title": "OpenGL glitch; Black pixels in a white line after Anti-Aliasing MSAA 8x", "body": "<p>I have a glitch in my Qt/OpenGL application when I use the Anti-Aliasing MSAA 8x. This is the screenshot with the glitch: black pixels in white lines. It looks a bad strech of the texture but I don't know how to fix it</p>\n\n<p>This is the screenshot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/KX421.png\" alt=\"screenshot\"></p>\n\n<p>This is the code:</p>\n\n<p>BackgroundImage.h : </p>\n\n<pre><code>class BackgroundImage\n{\npublic:\n    explicit BackgroundImage(QOpenGLFunctions * GL);\n    virtual ~BackgroundImage();\n\n    void save(int w, int h);\n    void restoreToScreen();\n\nprivate:\n    // background consts\n    static const int BACKGROUND_SCREEN_WIDTH_MAX = 8 * 1024;\n    static const int BACKGROUND_SCREEN_HEIGHT_MAX = 8 * 1024;\n    static const int BACKGROUND_BUFFER_SIZE_MAX = sizeof(U16) * BACKGROUND_SCREEN_WIDTH_MAX * BACKGROUND_SCREEN_HEIGHT_MAX;\n\n    // OpenGL Functions\n    QOpenGLFunctions * m_gl;\n\n    // rgb members\n    int m_width;\n    int m_height;\n    U32 m_colorTextureId;\n\n    U16 m_depthBuffer[BACKGROUND_BUFFER_SIZE_MAX / sizeof(U16)];\n};\n</code></pre>\n\n<p>BackgroundImage.cpp : </p>\n\n<pre><code>#include \"BackgroundImage.h\"   \n#include \"render.h\" // glRasterPos   \n#include \"QDebug\"\n\nBackgroundImage::BackgroundImage(QOpenGLFunctions * gl):\n    m_gl(gl),\n    m_width(0),\n    m_height(0),\n    m_colorTextureId(0), \n    m_multiSampledFBO(nullptr),\n    m_downSampledFBO(nullptr)\n{}\n\nBackgroundImage::~BackgroundImage()\n{\n    m_gl-&gt;glDeleteTextures(1, &amp;m_colorTextureId);\n\n    if (m_multiSampledFBO)\n    {\n        delete m_multiSampledFBO;\n    }\n\n    if (m_downSampledFBO)\n    {\n        delete m_downSampledFBO;\n    }\n}\n\nvoid BackgroundImage::beginSave(int w, int h)\n{\n    if (w!=m_width || h!=m_height) \n    {\n        regenerateFBOs(w, h);\n        m_width = w;\n        m_height = h;    \n    }\n\n   m_multiSampledFBO-&gt;bind();\n\n   m_gl-&gt;glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);\n}\n\nvoid BackgroundImage::endSave()\n{\n    QOpenGLFramebufferObject::blitFramebuffer(m_downSampledFBO, m_multiSampledFBO, GL_COLOR_BUFFER_BIT, GL_LINEAR);\n\n    QOpenGLFramebufferObject::blitFramebuffer(m_downSampledFBO, m_multiSampledFBO, GL_DEPTH_BUFFER_BIT, GL_NEAREST);\n\n    m_downSampledFBO-&gt;bind();\n\n    m_gl-&gt;glPixelStorei(GL_PACK_ALIGNMENT, 1);\n\n    // Fill background Image + Generate a texture\n\n    m_colorTextureId = m_downSampledFBO-&gt;texture();\n\n    m_gl-&gt;glPixelStorei(GL_PACK_ALIGNMENT, 2);\n\n    // Read Depth Buffer\n\n    m_gl-&gt;glDepthMask(GL_TRUE); // used for enable the zbuffer writing (cf . https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glDepthMask.xml)\n\n    //glRasterPos4f(0, 0, 0, 1);\n\n    m_gl-&gt;glReadPixels(0,0, m_width, m_height, GL_DEPTH_COMPONENT, GL_UNSIGNED_SHORT, (void*)m_depthBuffer);\n\n    m_multiSampledFBO-&gt;bindDefault();\n}\n\nvoid BackgroundImage::restoreToScreen()\n{\n    m_gl-&gt;glEnable(GL_DEPTH_TEST);\n    m_gl-&gt;glDepthFunc(GL_LESS);\n    m_gl-&gt;glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);\n    m_gl-&gt;glDepthFunc(GL_ALWAYS);\n\n    // render background\n    m_gl-&gt;glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);\n\n    Render::RenderImage(m_colorTextureId, 0,0, m_width, m_height);\n\n    m_gl-&gt;glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);\n\n    m_gl-&gt;glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);\n\n    // Restore Depth Buffer\n    m_gl-&gt;glDepthMask(GL_TRUE); // used for enable the zbuffer writing (cf . https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glDepthMask.xml)\n\n    m_gl-&gt;glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);\n    m_gl-&gt;glDepthFunc(GL_ALWAYS);\n\n    m_gl-&gt;glPixelStorei(GL_PACK_ALIGNMENT, 2);\n\n    glDrawPixels(m_width, m_height, GL_DEPTH_COMPONENT, GL_UNSIGNED_SHORT, (GLvoid*) m_depthBuffer);\n\n    m_gl-&gt;glDepthFunc(GL_LESS);\n\n    m_gl-&gt;glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);\n}\n\nvoid BackgroundImage::regenerateFBOs(int w, int h)\n{\n    if (m_multiSampledFBO)\n    {\n        delete m_multiSampledFBO;\n    }\n\n    if (m_downSampledFBO)\n    {\n        delete m_downSampledFBO;\n    }\n\n    //MultiSampling set to 4 now\n\n    QOpenGLFramebufferObjectFormat muliSampleFormat;\n    muliSampleFormat.setAttachment(QOpenGLFramebufferObject::Depth);\n    muliSampleFormat.setMipmap(true);\n    muliSampleFormat.setSamples(8);\n    muliSampleFormat.setTextureTarget(GL_TEXTURE_2D);\n    muliSampleFormat.setInternalTextureFormat(GL_BGRA_EXT);\n    m_multiSampledFBO = new QOpenGLFramebufferObject(w,h, muliSampleFormat);\n\n    QOpenGLFramebufferObjectFormat downSampledFormat;\n    downSampledFormat.setAttachment(QOpenGLFramebufferObject::Depth);\n    downSampledFormat.setMipmap(true);\n    downSampledFormat.setTextureTarget(GL_TEXTURE_2D);\n    downSampledFormat.setInternalTextureFormat(GL_BGRA_EXT);\n    m_downSampledFBO = new QOpenGLFramebufferObject(w, h, downSampledFormat);\n}\n</code></pre>\n\n<p>Render.cpp :</p>\n\n<pre><code>void Render::RenderImage(U32 tex, int x, int y, int w, int h, float anchorX, float anchorY)\n{\n    glClear(GL_DEPTH_BUFFER_BIT);\n\n    GLboolean depth = glIsEnabled(GL_DEPTH_TEST);\n    if (depth)\n        glDisable(GL_DEPTH_TEST);\n\n    glMatrixMode(GL_PROJECTION);\n    glPushMatrix();\n    glLoadIdentity();\n    gluOrtho2D(0, s_width, s_height, 0);\n\n    glMatrixMode(GL_MODELVIEW);\n    glPushMatrix();\n    glLoadIdentity();\n\n    glColor3ub(255, 255, 255);\n\n    glEnable(GL_TEXTURE_2D);\n    glBindTexture(GL_TEXTURE_2D, tex);\n\n    glEnableClientState(GL_VERTEX_ARRAY);\n    glEnableClientState(GL_TEXTURE_COORD_ARRAY);\n    glDisableClientState(GL_COLOR_ARRAY);\n\n    x -= (int)(anchorX * w);\n    y -= (int)(anchorY * h);\n\n    gVertices[0] = VECTOR3F(x, y, 0);\n    gVertices[1] = VECTOR3F(x + w - 1, y, 0);\n    gVertices[2] = VECTOR3F(x + w - 1, y + h - 1, 0);\n    gVertices[3] = VECTOR3F(x, y + h - 1, 0);\n\n    gTexCoords[0] = VECTOR2F(0, 1);\n    gTexCoords[1] = VECTOR2F(1, 1);\n    gTexCoords[2] = VECTOR2F(1, 0);\n    gTexCoords[3] = VECTOR2F(0, 0);\n\n    gIndexes[0] = 2;\n    gIndexes[1] = 1;\n    gIndexes[2] = 0;\n\n    gIndexes[3] = 0;\n    gIndexes[4] = 3;\n    gIndexes[5] = 2;\n\n    glVertexPointer(3, GL_FLOAT, 0, gVertices);\n    glTexCoordPointer(2, GL_FLOAT, 0, gTexCoords);\n    glDrawElements(GL_TRIANGLES, 3 * 2, GL_UNSIGNED_SHORT, gIndexes);\n\n    glDisable(GL_TEXTURE_2D);\n\n    glPopMatrix();\n\n    glMatrixMode(GL_PROJECTION);\n    glPopMatrix();\n    glMatrixMode(GL_MODELVIEW);\n\n    if (depth)\n        glEnable(GL_DEPTH_TEST);\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-graph"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1502902818, "post_id": 45713682, "comment_id": 78396634, "body": "how do you define &quot;similar vertex&quot;. If you add a vertex, you get a new vertex by definition. If you want to keep indices by some other key, they&#39;re outside your graph."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1502902885, "post_id": 45713682, "comment_id": 78396659, "body": "You might be interested in the labeled graph adaptor, though <a href=\"https://stackoverflow.com/q/43114533/85371\">stackoverflow.com/q/43114533/85371</a>"}, {"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1502971649, "post_id": 45713682, "comment_id": 78427001, "body": "When two vertices have similar properties (internal, or bundled) they are the same vertex, and <code>add_vertex</code> instead of adding it with new index shouldn&#39;t just return the index to an existing one? I am aware of <code>labeled_graph</code>, and I&#39;ve already upvoted that question."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1502979711, "last_edit_date": 1502979711, "creation_date": 1502973481, "answer_id": 45735347, "question_id": 45713682, "link": "https://stackoverflow.com/questions/45713682/if-add-vertex-in-bgl-checks-for-the-existence-of-the-vertex/45735347#45735347", "title": "if add_vertex in BGL checks for the existence of the vertex", "body": "<blockquote>\n  <p>When two vertices have similar properties (internal, or bundled) they are the same vertex, and add_vertex instead of adding it with new index shouldn't just return the index to an existing one? \u2013 <a href=\"https://stackoverflow.com/questions/45713682/if-add-vertex-in-bgl-checks-for-the-existence-of-the-vertex?noredirect=1#comment78427001_45713682\">Bruce 11 mins ago</a></p>\n</blockquote>\n\n<p>If you have two vertices with \"similar properties\", <em>you</em> decide whether you want to add another vertex with those properties or not. </p>\n\n<blockquote>\n  <p>if we have a vertex with some bundled_properties, and then we add it to the graph, and then connect an edge to it, would be this vertex duplicated if there was a similar vertex?</p>\n</blockquote>\n\n<p>You add edges by referring to <code>vertex_descriptor</code>s. There is no way to \"connect an edge to vertex properties\". So, <code>add_edge</code> cannot accidentally create a new vertex using some property.</p>\n\n<blockquote>\n  <p><strong>Note</strong>: There might be confusion because using <code>vectorS</code>\u00b2 for vertex container selector lets you add edges by referring to potentially non-existing vertex descriptors. Really, that doesn't \"add vertices\" as much as it \"extends the valid domain for vertex ids/descriptors\". E.g.:</p>\n\n<pre><code>adjacency_list&lt;&gt; g;\nadd_edge(10, 11, g);\n</code></pre>\n  \n  <p>doesn't really add 12 vertices. It extends the vertex id domain to encompass the value <code>11</code>. <a href=\"http://coliru.stacked-crooked.com/a/964eaf54269c0070\" rel=\"nofollow noreferrer\">Live On Coliru</a></p>\n</blockquote>\n\n<h1>Let's look at <code>add_vertex</code>:</h1>\n\n<p>The call is <code>add_vertex</code> and it adds a vertex. In fact, you don't usually insert properties for them, that's merely a convenience.</p>\n\n<p>There is no fundamental difference between:</p>\n\n<pre><code>vertex_descriptor v = add_vertex(g);\n\ng[v] = vertexProperties;\n</code></pre>\n\n<p>And </p>\n\n<pre><code>vertex_descriptor v = add_vertex(vertexProperties, g);\n</code></pre>\n\n<p>In both cases you will <em>always</em> get a new, unique, vertex descriptor, and have its properties set to a specific value.</p>\n\n<h2>Why the difference with <code>add_edge</code> then?</h2>\n\n<p>Is <code>add_edge</code> really different? Like with <code>add_vertex</code> there is no difference between:</p>\n\n<pre><code>vertex_descriptor from {/*...*/}, to {/*...*/};\nedge_descriptor e = add_edge(from, to, g).first;\n\ng[e] = edgeProperties;\n</code></pre>\n\n<p>And </p>\n\n<pre><code>edge_descriptor e = add_edge(from, to, edgeProperties, g).first;\n</code></pre>\n\n<p>You will note that both (possibly) add an edge, returning its descriptor, and both set the properties to specific values.</p>\n\n<blockquote>\n  <p>The important point here is that <code>adjacency_list</code> does <strong><em>not</em></strong> know or care about the properties. They add information for you, or useful for certain algorithms, but they are <em>not</em> relevant to the graph concept modeled by <code>adjacency_list</code>.</p>\n</blockquote>\n\n<h2>Why does <code>add_edge</code> <em>conditionally</em> add?</h2>\n\n<p>That's because the <code>adjacency_list</code> uses strategies that imply invariants that need to be checked:</p>\n\n<ul>\n<li>if your edge-container selection happens to be e.g. <code>setS</code>, its insertion method may or may not insert a new edge; <code>adjacency_lists&lt;&gt;</code> just forwards the behaviour\u00b9 to <code>add_edge</code></li>\n<li>if your <code>adjacency_list</code> uses <code>undirected</code> or <code>bidirectional</code> as well, this puts extra contraints on edges (e.g. preventing addition of <code>(a-&gt;b)</code> as well as <code>(b-&gt;a)</code> in a bidirectional graph that uses <code>setS</code> as the edge container selector).</li>\n</ul>\n\n<p>Summarizing:</p>\n\n<blockquote>\n  <ul>\n  <li><p><code>add_vertex</code> does <strong><em>not</em></strong> take any identifying information, hence it doesn't need to check for constraints (in fact, it cannot).</p></li>\n  <li><p><code>add_edge</code> <em>does</em> take identifying information (the endpoint vertices) and it can check these against the constraints that arise from the strategies that you chose when instantiating the <code>adjacency_list</code>.</p></li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<p>\u00b9 e.g. to elegantly avoid doubled edges</p>\n\n<p>\u00b2 or possibly other Random Access vertex container selectors, that have integral vertex descriptors that act as <em>implicit</em> vertex id</p>\n"}], "owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 45735347, "answer_count": 1, "score": 1, "last_activity_date": 1502979711, "creation_date": 1502886845, "question_id": 45713682, "link": "https://stackoverflow.com/questions/45713682/if-add-vertex-in-bgl-checks-for-the-existence-of-the-vertex", "title": "if add_vertex in BGL checks for the existence of the vertex", "body": "<p>In BGL, <code>add_edge</code> checks if the edge already exists. Is there the same mechanism for <code>add_vertex</code>? \nFor example, if we have a vertex with some <code>bundled_properties</code>, and then we add it to the graph, and then connect an edge to it, would be this vertex <strong>duplicated</strong> if there was a similar vertex?</p>\n"}, {"tags": ["c++", "g++", "language-lawyer", "name-lookup"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502886940, "post_id": 45713667, "comment_id": 78385425, "body": "can you include the example from C++2003, p.30. 3.4.1, (6) ?"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1502886946, "post_id": 45713667, "comment_id": 78385431, "body": "Better post the example here itself."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1502886949, "post_id": 45713667, "comment_id": 78385433, "body": "If you want us to refer to some particular section of the language standard, it would be far more helpful if you&#39;d <i>quote</i> the relevant portion of the standard."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502888137, "post_id": 45713667, "comment_id": 78386351, "body": "I don&#39;t see the similarity between your code and the example."}, {"owner": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502888287, "post_id": 45713667, "comment_id": 78386479, "body": "@tobi303 appended example"}, {"owner": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502888301, "post_id": 45713667, "comment_id": 78386493, "body": "@molbdnilo Example in standart show the rules for search unqualified name (for variable i) and my example is about search of unqualified name (of memcpy function)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502890913, "post_id": 45713667, "comment_id": 78388487, "body": "@bruziuz Unqualified <i>function</i> lookup is section 3.4.2. (As indicated in 3.4.1, item 3.)"}, {"owner": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "edited": false, "score": 0, "creation_date": 1502895639, "post_id": 45713667, "comment_id": 78392025, "body": "Thanks, I actually understood that this two paragraphs should be considered together. p.s. I thought that ADL applied after(not with) general rules for search variable when I wrote a question."}], "answers": [{"comments": [{"owner": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "edited": false, "score": 0, "creation_date": 1502889056, "post_id": 45714099, "comment_id": 78387092, "body": "Thanks. Looks that you&#39;re absolutely right. When I read book of B.Stroustroup, The C++ Programming Language: Special Edition (3rd Edition) (Russian translate), p.221, 8.2.6 Search names - it have been said &quot;If the function is not found in the context of its use, an attempt is made to search the namespace of the arguments&quot;. Looks that Standrtized comittete changed rules a bit."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "edited": false, "score": 1, "creation_date": 1502889375, "post_id": 45714099, "comment_id": 78387349, "body": "@bruziuz It might be a description issue, I often encountered such problem when reading translated book; precisely it should be &quot;all the names found by ADL and usual unqualified name lookup will be added to the name set, then overload resolution will determine which one should be called&quot;."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 6, "last_activity_date": 1502889065, "last_edit_date": 1502889065, "creation_date": 1502888040, "answer_id": 45714099, "question_id": 45713667, "link": "https://stackoverflow.com/questions/45713667/unqualified-lookup-in-c/45714099#45714099", "title": "Unqualified lookup in C++", "body": "<p>The name to be looked up is function name; the special <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">argument-dependent lookup</a> rule takes effect here. (Note that ADL is a part of the <a href=\"http://en.cppreference.com/w/cpp/language/lookup\" rel=\"nofollow noreferrer\">unqualified name lookup</a> for function names.)</p>\n\n<blockquote>\n  <p>These function names are looked up in the namespaces of their arguments in addition to the scopes and namespaces considered by the usual unqualified name lookup.</p>\n</blockquote>\n\n<p>At first you include <code>string.h</code>, which introduces the name <code>memcpy</code> in global namespace.</p>\n\n<p>And <code>AA</code> is declared in global namespace; then when you call <code>memcpy(&amp;a, &amp;a, sizeof(a));</code>, the namespace where <code>AA</code> is declared (i.e. the global namespace) will be considerted too, and the <code>memcpy</code> declared in namespace <code>my</code> will be found by usual <a href=\"http://en.cppreference.com/w/cpp/language/unqualified_lookup\" rel=\"nofollow noreferrer\">unqualified name lookup</a>, so the calling is ambiguous.</p>\n\n<p>On the other hand, <code>BB</code> doesn't have such issue because it's not declared in global namespace (and then ADL won't take effect for it).</p>\n"}], "owner": {"reputation": 4097, "user_id": 1154447, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Dgc7K.jpg?s=128&g=1", "display_name": "bruziuz", "link": "https://stackoverflow.com/users/1154447/bruziuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 3, "answer_count": 1, "score": 5, "last_activity_date": 1502889065, "creation_date": 1502886800, "last_edit_date": 1502889058, "question_id": 45713667, "link": "https://stackoverflow.com/questions/45713667/unqualified-lookup-in-c", "title": "Unqualified lookup in C++", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstring&gt;\n\nnamespace /*namespace name generated by compiler*/\n{\n    struct BB{};\n}\n\nstruct AA{};\n\nnamespace my\n{\n    inline void * memcpy(void*, const void*, std::size_t)\n    {\n        puts(\"CUSTOM IMPLEMENTATION\");\n        return 0;\n    }\n}\n\nnamespace my\n{\n    void func()\n    {\n        AA a;\n        memcpy(&amp;a, &amp;a, sizeof(a)); // ambigious call for g++4.7 - g++6.2\n\n        BB b;\n        memcpy(&amp;b, &amp;b, sizeof(b)); // unambigious call\n\n    }\n}\n\nint main(int, char **)\n{\n    my::func();\n    return 0;\n}\n</code></pre>\n\n<p>Why <strong>memcpy</strong> is ambigious call here?</p>\n\n<p>Please take a look at example with variable \"i\" in ANSI ISO IEC 14882, C++2003, 3.4.1, (6) (page 30). It \"proves\" that there is no ambigioty in such construction.</p>\n\n<pre><code>namespace A {\n  namespace N {\n    void f();\n  }\n}\nvoid A::N::f() {\n    i = 5;\n// The following scopes are searched for a declaration of i:\n// 1) outermost block scope of A::N::f, before the use of i\n// 2) scope of namespace N\n// 3) scope of namespace A\n// 4) global scope, before the definition of A::N::f\n}\n</code></pre>\n\n<p>Is unqualified lookup rules was broken in GCC or I did not understand something?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 3, "creation_date": 1502885168, "post_id": 45713055, "comment_id": 78384059, "body": "I&#39;d use <code>std::getline()</code> which takes an optional <code>delim</code> argument."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1502885360, "post_id": 45713055, "comment_id": 78384187, "body": "can you please explain what is the output of your code and why it is wrong? <code>...</code> isnt something that I can compile to reproduce your results. See also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2066, "user_id": 2328287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93ea0b4b0286444eebf2502df274701?s=128&d=identicon&r=PG", "display_name": "moteus", "link": "https://stackoverflow.com/users/2328287/moteus"}, "edited": false, "score": 0, "creation_date": 1502885712, "post_id": 45713055, "comment_id": 78384447, "body": "<a href=\"https://github.com/moteus/lua-split#eachstr-sep-plain\" rel=\"nofollow noreferrer\">github.com/moteus/lua-split#eachstr-sep-plain</a>"}, {"owner": {"reputation": 51, "user_id": 5325448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e860d107ed9dfba466cc974761a8ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Xeozim", "link": "https://stackoverflow.com/users/5325448/xeozim"}, "edited": false, "score": 3, "creation_date": 1502885719, "post_id": 45713055, "comment_id": 78384454, "body": "Not sure this deserves a Lua tag, this could apply to any string"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1502885729, "post_id": 45713055, "comment_id": 78384462, "body": "Why are you casting <code>searchpath.length()</code> to <code>int</code>, and then comparing it to a <code>size_t</code>.  Just get rid of the cast"}, {"owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1502886424, "post_id": 45713055, "comment_id": 78384969, "body": "@YSC I already have got variable, isn&#39;t is too hard for this situation?"}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1502886545, "creation_date": 1502886545, "answer_id": 45713584, "question_id": 45713055, "link": "https://stackoverflow.com/questions/45713055/iterate-over-string-fragments/45713584#45713584", "title": "Iterate over string fragments", "body": "<p>The problem is:</p>\n\n<pre><code>    std::string prefix = searchpath.substr(begin, next);\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/substr\" rel=\"nofollow noreferrer\"><code>std::string::substr</code></a> takes offset + count arguments, not start + end arguments.</p>\n\n<p>You need: </p>\n\n<pre><code>    std::string prefix = searchpath.substr(begin, next-begin);\n</code></pre>\n\n<p>So in full:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string searchpath = \"a;b;c\";\n    size_t begin = 0;\n    size_t next = searchpath.find_first_of(\";\", 0);\n    do\n    {\n        if (next == std::string::npos)\n            next = searchpath.length();\n        std::string prefix = searchpath.substr(begin, next-begin);\n        std::cout &lt;&lt; \"Trying: \" &lt;&lt; prefix &lt;&lt; \"\\n\";\n        begin = next + 1;\n        next = searchpath.find_first_of(\";\", begin);\n    } while (begin &lt; (int)searchpath.length());\n}\n</code></pre>\n\n<p>(Note, that is what your question should have looked like.  A complete program.)</p>\n\n<p>I would actually write as:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string searchpath = \"a;b;c\";\n    for (size_t begin = 0, next; begin &lt; searchpath.length(); begin = next+1)\n    {\n        next = searchpath.find(';', begin);\n        if (next == std::string::npos)\n            next = searchpath.length();\n        std::string prefix = searchpath.substr(begin, next-begin);\n        std::cout &lt;&lt; \"Trying: \" &lt;&lt; prefix &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Which has less repetition, localizes begin and next to the loop, uses <code>find</code> not <code>find_first_of</code>, and doesn't have an unnecessary cast.</p>\n"}, {"comments": [{"owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "edited": false, "score": 0, "creation_date": 1502886965, "post_id": 45713678, "comment_id": 78385440, "body": "Thank you for this answer, but I souldn&#39;t modify <code>searchpath</code>."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "edited": false, "score": 0, "creation_date": 1502887030, "post_id": 45713678, "comment_id": 78385492, "body": "As i indicated, you can just create copy of it :-)"}], "tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 1, "last_activity_date": 1502886842, "creation_date": 1502886842, "answer_id": 45713678, "question_id": 45713055, "link": "https://stackoverflow.com/questions/45713055/iterate-over-string-fragments/45713678#45713678", "title": "Iterate over string fragments", "body": "<p>Just in addition to @Martin Bonner 's answer.</p>\n\n<p>Its could be done easier and more readable in my opinion, check it out.</p>\n\n<pre><code>char someInput[] = \"/home/user/?.lua;/home/test/?/init.lua;./lua\";\n\nstd::string searchpath(someInput);\nstd::string temp;\nstd::size_t pos = std::string::npos;\n\npos = searchpath.find(\";\");\nwhile (pos != std::string::npos)\n{\n    temp = searchpath.substr(0, pos);\n    searchpath = searchpath.substr(pos + 1);\n    pos = searchpath.find(\";\");\n\n    std::cout &lt;&lt; \"Trying: \" &lt;&lt; temp &lt;&lt; std::endl;\n}\nstd::cout &lt;&lt; searchpath &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Trying: /home/user/?.lua\nTrying: /home/test/?/init.lua\nTrying: ./lua\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1502888017, "creation_date": 1502888017, "answer_id": 45714087, "question_id": 45713055, "link": "https://stackoverflow.com/questions/45713055/iterate-over-string-fragments/45714087#45714087", "title": "Iterate over string fragments", "body": "<p>Here you go, the simple version using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">std::getline()</a>:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::istringstream input{\"/home/user/?.lua;/home/test/?/init.lua;./lua\"};\n    for (std::string prefix ; std::getline(input, prefix, ';') ; ) {\n        std::cout &lt;&lt; \"Trying: \" &lt;&lt; prefix &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/d1c6f64d46011b1a\" rel=\"nofollow noreferrer\">demo</a></kbd></p>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n  <p>Trying: /home/user/?.lua<br>\n  Trying: /home/test/?/init.lua<br>\n  Trying: ./lua</p>\n</blockquote>\n"}], "owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 45713584, "answer_count": 3, "score": -3, "last_activity_date": 1502888017, "creation_date": 1502884981, "last_edit_date": 1502885823, "question_id": 45713055, "link": "https://stackoverflow.com/questions/45713055/iterate-over-string-fragments", "title": "Iterate over string fragments", "body": "<p>I've got lua path, e.g.:</p>\n\n<pre><code>\"/home/user/?.lua;/home/test/?/init.lua;./lua\"\n</code></pre>\n\n<p>I want to iterate over every fragment (<code>/home/user/?.lua</code>, <code>/home/test/?/init.lua</code> and <code>./lua</code> in example). My attempt doesn't work correctly for some reasons:</p>\n\n<pre><code>size_t begin = 0;\nsize_t next = searchpath.find_first_of(\";\", 0);\ndo\n{\n    if (next == std::string::npos)\n        next = searchpath.length();\n    std::string prefix = searchpath.substr(begin, next);\n    std::cout &lt;&lt; \"Trying: \" &lt;&lt; prefix &lt;&lt; \"\\n\";\n    begin = next + 1;\n    next = searchpath.find_first_of(\";\", begin);\n} while (begin &lt; (int)searchpath.length());\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Trying: /home/v/.luarocks/share/lua/5.2/?.lua\nTrying: /home/v/.luarocks/share/lua/5.2/?/init.lua;/usr/share/lua/5.2/?.lua;/usr/share/l\nTrying: /usr/share/lua/5.2/?.lua;/usr/share/lua/5.2/?/init.lua;/usr/local/share/lua/5.2/?.lua;/usr/local/share/lu\nTrying: /usr/share/lua/5.2/?/init.lua;/usr/local/share/lua/5.2/?.lua;/usr/local/share/lua/5.2/?/init.lua;/usr/local/lib/lua/5.2/?.lua;/usr/loca\nTrying: /usr/local/share/lua/5.2/?.lua;/usr/local/share/lua/5.2/?/init.lua;/usr/local/lib/lua/5.2/?.lua;/usr/local/lib/lua/5.2/?/init.lua;./?.lua;/home/v/.lua/libs/?.lua;/hom\nTrying: /usr/local/share/lua/5.2/?/init.lua;/usr/local/lib/lua/5.2/?.lua;/usr/local/lib/lua/5.2/?/init.lua;./?.lua;/home/v/.lua/libs/?.lua;/home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: /usr/local/lib/lua/5.2/?.lua;/usr/local/lib/lua/5.2/?/init.lua;./?.lua;/home/v/.lua/libs/?.lua;/home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: /usr/local/lib/lua/5.2/?/init.lua;./?.lua;/home/v/.lua/libs/?.lua;/home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: ./?.lua;/home/v/.lua/libs/?.lua;/home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: /home/v/.lua/libs/?.lua;/home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: /home/v/.lua/libs/?.lua;./lib/?.lua;./lib/?/init.lua\nTrying: ./lib/?.lua;./lib/?/init.lua\n</code></pre>\n\n<p>Can you explain me, please, what is wrong with my code and what is correct way?</p>\n"}, {"tags": ["c++", "svg", "direct2d", "pathgeometry"], "comments": [{"owner": {"reputation": 101196, "user_id": 1038015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d912dac5c74b47bbaff7164f5f8bb8?s=128&d=identicon&r=PG", "display_name": "Robert Longson", "link": "https://stackoverflow.com/users/1038015/robert-longson"}, "edited": false, "score": 0, "creation_date": 1502885521, "post_id": 45713045, "comment_id": 78384301, "body": "Does this help? <a href=\"https://dxr.mozilla.org/mozilla-central/source/gfx/2d/PathD2D.cpp\" rel=\"nofollow noreferrer\">dxr.mozilla.org/mozilla-central/source/gfx/2d/PathD2D.cpp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1502885527, "creation_date": 1502885527, "answer_id": 45713245, "question_id": 45713045, "link": "https://stackoverflow.com/questions/45713045/draw-a-svg-path-with-direct2d-cant-draw-elliptical-arc/45713245#45713245", "title": "Draw a SVG path with Direct2D: Can&#39;t draw elliptical arc", "body": "<ol>\n<li>You should inspect the value returned by <code>pSink-&gt;Close();</code> to determine what went wrong.</li>\n<li><code>D2D1_ARC_SEGMENT::arcSize</code> that you don't initialize at all causing UB and potentially causing code to fail to add arc since flag value most likely turns to be invalid.</li>\n</ol>\n"}], "owner": {"reputation": 7221, "user_id": 1560697, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/411727338a09452ec333619185e5a81b?s=128&d=identicon&r=PG&f=1", "display_name": "Tuyen Pham", "link": "https://stackoverflow.com/users/1560697/tuyen-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 45713245, "answer_count": 1, "score": 0, "last_activity_date": 1502885530, "creation_date": 1502884953, "last_edit_date": 1592644375, "question_id": 45713045, "link": "https://stackoverflow.com/questions/45713045/draw-a-svg-path-with-direct2d-cant-draw-elliptical-arc", "title": "Draw a SVG path with Direct2D: Can&#39;t draw elliptical arc", "body": "<p>I have following SVG path:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;\n&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot;&gt;\n    &lt;path d=&quot;M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z&quot; /&gt;\n&lt;/svg&gt;\n</code></pre>\n<p>For easy of reading:</p>\n<pre><code>M 6, 2\nC 4.89, 2 4,2.89 4,4\nV 20\nA 2,2 0 0,0 6,22\nH 18\nA 2,2 0 0,0 20,20\nV 8L14,2\nH 6\nZ\n</code></pre>\n<p>I'm trying to convert this to a <strong><code>ID2D1PathGeometry</code></strong>. Here is the code:</p>\n<pre><code>ID2D1PathGeometry *geo = NULL;\nID2D1GeometrySink *pSink = NULL;\nd2DFactory-&gt;CreatePathGeometry(&amp;geo);\ngeo-&gt;Open(&amp;pSink);\npSink-&gt;SetFillMode(D2D1_FILL_MODE_WINDING);\n\npSink-&gt;BeginFigure({ 6.00f, 2.00f }, D2D1_FIGURE_BEGIN_FILLED);\npSink-&gt;AddBezier({ { 4.89f, 2.00f },{ 4.00f, 2.89f },{ 4.00f, 4.00f } });\npSink-&gt;AddLine({ 4.00f, 20.00f });\n{\n    D2D1_ARC_SEGMENT arc;\n    arc.point.x = 6.00f;\n    arc.point.y = 22.00f;\n    arc.size.width = 2.00f;\n    arc.size.height = 2.00f;\n    arc.rotationAngle = 0.00f;\n    arc.sweepDirection = D2D1_SWEEP_DIRECTION_CLOCKWISE;\n    pSink-&gt;AddArc(&amp;arc);\n}\npSink-&gt;AddLine({ 18.00f, 22.00f });\n{\n    D2D1_ARC_SEGMENT arc;\n    arc.point.x = 6.00f;\n    arc.point.y = 22.00f;\n    arc.size.width = 2.00f;\n    arc.size.height = 2.00f;\n    arc.rotationAngle = 0.00f;\n    arc.sweepDirection = D2D1_SWEEP_DIRECTION_CLOCKWISE;\n    pSink-&gt;AddArc(&amp;arc);\n}\npSink-&gt;AddLine({ 20.00f, 8.00f });\npSink-&gt;AddLine({ 14.00f, 2.00f });\npSink-&gt;AddLine({ 6.00f, 2.00f });\npSink-&gt;EndFigure(D2D1_FIGURE_END_CLOSED);\n\npSink-&gt;Close();\npSink-&gt;Release();\n\npRT-&gt;DrawGeometry(geo, brushBlack);\n</code></pre>\n<p>While I can convert lines and bezier successfully, I failed to convert Arcs.<br />\nFor example, the code above will not draw anything, but if I comments following lines:</p>\n<pre><code>// pSink-&gt;AddArc(&amp;arc);\n</code></pre>\n<p>It will draw a shape, but certainly will not exactly what is output by Chrome browser, because of lack some segments.</p>\n<h1>Question:</h1>\n<h1>1.</h1>\n<p>What is the error in my code that prevent me draw geometry with Arcs segment? How to fix it?</p>\n<h1>2.</h1>\n<p>In <a href=\"https://www.w3.org/TR/SVG/paths.html\" rel=\"nofollow noreferrer\">w3.org</a> document, an Arc segment have follwing value:</p>\n<pre><code>rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, x, y\n</code></pre>\n<p>While I can set <code>rx</code>, <code>ry</code>, <code>x_axis_rotation</code>, <code>sweep_flag</code>, <code>x</code>, <code>y</code>, I don't see the member <strong><code>large_arc_flag</code></strong> in <code>D2D1_ARC_SEGMENT</code> struct. How can I adapt it to my code?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1502884782, "post_id": 45712937, "comment_id": 78383780, "body": "From the top answer of the first question you linked: <i>&quot;Classes themselves use memory if they have methods that are not optimized away, if they have a vtable (caused by use of the virtual keywords), or similar.&quot;</i>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1502884813, "post_id": 45712937, "comment_id": 78383796, "body": "A class definition is only used by the compiler as a blueprint for objects of that class. Once the program is compiled the class definition itself doesn&#39;t exist in the final executable, only the objects created for the class."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1502885163, "post_id": 45712937, "comment_id": 78384052, "body": "Class methods do take space, exactly as free functions. Vtables and typeid info take space. For the rest, the structure of the class is implicit in the generated code, there&#39;s no separate class entity in the generated binary."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502885260, "post_id": 45712937, "comment_id": 78384122, "body": "@Someprogrammerdude and why aren&#39;t function definitions also used as blueprints for the point of the call?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502885498, "post_id": 45712937, "comment_id": 78384281, "body": "Because the code for the function must exist somewhere?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502887501, "post_id": 45712937, "comment_id": 78385846, "body": "@Someprogrammerdude but why must function definitions exist somewhere then?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1502887664, "post_id": 45712937, "comment_id": 78385979, "body": "Because a function definition is the <i>code that is being executed when the function is being called</i>. Are you perhaps mixing up function <i>declarations</i> with <i>definitions</i>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502887832, "post_id": 45712937, "comment_id": 78386089, "body": "@Someprogrammerdude Well okay, thanks. And no I am not :) But can&#39;t you say that class definition is what is being instantiated when an object of the class is constructed?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1502887980, "post_id": 45712937, "comment_id": 78386226, "body": "But it is. A class declaration is simply <code>class foo;</code>. A class definition is <code>class foo { &#47;* lots of member variables and functions, some as declarations and some as definitions *&#47; };</code> Without a definition of a class, you can&#39;t create an instance of the class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502888089, "post_id": 45712937, "comment_id": 78386306, "body": "@Someprogrammerdude Exactly, so why isn&#39;t it needed in the executable? Like couldn&#39;t function definitions also be used as blueprints? After an answer to this, I actually think that I get it :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "edited": false, "score": 0, "creation_date": 1502894582, "post_id": 45713085, "comment_id": 78391247, "body": "Thanks! But did that answer the question: &quot;How come class definitions do not occupy memory if functions do, or their code does. I mean, class definitions are also code, so shouldn&#39;t that occupy memory just like function code does?&quot;? If so, please point it out.. :)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1502895722, "post_id": 45713085, "comment_id": 78392079, "body": "@sdsadasdasd Class definition is a grouping construct for everything that goes into the class. In this way they are similar to namespaces. They exist only during the compilation. Once the compiler is done, things that are included in class definitions, such as member functions, static members, etc. go into memory, while class definitions themselves are discarded as not needed at run-time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "edited": false, "score": 0, "creation_date": 1502978503, "post_id": 45713085, "comment_id": 78432127, "body": "Thanks! It makes more sense now. But how would you explain the reason why functions do not work like class definitions? I mean couldn&#39;t the compiler just replace each function call with the instructions given by the function itself and thus being able to get rid of the function code before execution, just like class definitions? I really that you will answer because it would be sad otherwise ::))"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1502978886, "post_id": 45713085, "comment_id": 78432424, "body": "@sdsadasdasd The compiler will replace some functions with their instructions. This is called inlining; when this happens to functions with internal linkage, these functions do not occupy a separate space in memory. However, most functions are not inlined. The compiler replaces them with a sequence of instructions to jump to the place in memory where the function code is stored, rather than using the code of the function repeatedly."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1502885053, "creation_date": 1502885053, "answer_id": 45713085, "question_id": 45712937, "link": "https://stackoverflow.com/questions/45712937/how-can-class-definitions-not-occupy-memory/45713085#45713085", "title": "How can class definitions not occupy memory?", "body": "<p>It is not entirely correct to say that class definitions do not occupy memory: any class with member functions may place some code in memory, although the amount of code and its actual placement depends heavily on function inlining.</p>\n\n<p>The Q&amp;A at the first link talks about <code>sizeof</code>, which shows a per-instance memory requirement of the class, which excludes memory requirements for storing member functions, static members, inlined functions, dispatch tables, and so on. This is because all these elements are <em>shared</em> among all instances of the class.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "edited": false, "score": 0, "creation_date": 1502966908, "post_id": 45717226, "comment_id": 78423708, "body": "Thanks! But so regarding functions, the program need the instructions from a specific function in order to execute the functions (because it is running the instructions provided in the function), as opposed to class definitions that are simply blueprints for the compiler about how to instantiate objects... Am I right? Otherwise, please correct me :-)"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1502896189, "creation_date": 1502896189, "answer_id": 45717226, "question_id": 45712937, "link": "https://stackoverflow.com/questions/45712937/how-can-class-definitions-not-occupy-memory/45717226#45717226", "title": "How can class definitions not occupy memory?", "body": "<p>You don't need to keep the class definition anywhere, because the details of how to create an instance of a class are encoded in its constructors.<br>\n(In a sense, the class definition <em>is</em> code, it's just not represented explicitly.)</p>\n\n<p>All you need to know in order to create an object is</p>\n\n<ol>\n<li>How big it is, </li>\n<li>Which constructor to use for creating it, and</li>\n<li>Which its virtual functions are.</li>\n</ol>\n\n<p>To create an instance of class <code>A</code>:</p>\n\n<ol>\n<li>Reserve a piece of memory of size <code>sizeof(A)</code> (or be handed one),</li>\n<li>Associate that piece of memory with the virtual functions of <code>A</code>, if any (usually held in a table in a predetermined location), and</li>\n<li>Tell the relevant <code>A</code> constructor where the <code>A</code> should be created, and then let it do the actual work.</li>\n</ol>\n\n<p>You don't need to know a thing about the types of member variables or anything like that, the constructors know what to do once they know <em>where</em> the object is to be created.<br>\n(Every member variable can be found at an offset from the beginning of the object, so the constructor knows where things must be.)</p>\n\n<p>To create a <em>function</em>, on the other hand, you would need to store its definition in some form and then generate the code at runtime. (This is usually called \"Just-in-time\" compilation.)  </p>\n\n<p>This requires a compiler, which means that you need to either</p>\n\n<ol>\n<li>Include a compiler in every executable, or</li>\n<li>Provide (or require everyone to install) a shared compiler for all executables (Java VMs usually contain at least one).</li>\n</ol>\n\n<p>C++ compilers instead generate the functions in advance.<br>\nAbusing terminology a little, you could say that the functions are \"instantiated\" by the compilation process, with the source code as a blueprint.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8424470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 1, "accepted_answer_id": 45713085, "answer_count": 2, "score": 4, "last_activity_date": 1502896189, "creation_date": 1502884645, "question_id": 45712937, "link": "https://stackoverflow.com/questions/45712937/how-can-class-definitions-not-occupy-memory", "title": "How can class definitions not occupy memory?", "body": "<p>So I have read <a href=\"https://stackoverflow.com/questions/36665484/do-classes-take-memory\">this</a> about if class definitions occupy memory and <a href=\"https://stackoverflow.com/questions/21735407/do-functions-occupy-memory-space\">this</a> about if function occupy memory. This is what I do not get: How come class definitions do not occupy memory if functions do, or their code does. I mean, class definitions are also code, so shouldn't that occupy memory just like function code does?</p>\n"}, {"tags": ["c++", "arrays", "windows", "file"], "comments": [{"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1502884885, "post_id": 45712929, "comment_id": 78383837, "body": "Where is FindNextFile?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 5, "creation_date": 1502884998, "post_id": 45712929, "comment_id": 78383920, "body": "<code>Files[i] = buffer;</code> copies the address of a temporary. If you don&#39;t understand what it implies, don&#39;t use C-style char arrays and arrays of <code>char*</code>; use <code>std::string</code>."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 1, "creation_date": 1502885042, "post_id": 45712929, "comment_id": 78383958, "body": "partial code, impossible to help"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1502885145, "post_id": 45712929, "comment_id": 78384037, "body": "Better to <code>memcpy()</code> <code>buffer</code> into <code>Files[i]</code>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1502885165, "post_id": 45712929, "comment_id": 78384054, "body": "Just use <code>std::string</code>"}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 3, "creation_date": 1502885433, "post_id": 45712929, "comment_id": 78384229, "body": "<code>std::string</code> has method <code>c_str</code> which returns NULL-terminated <code>char*</code>"}, {"owner": {"reputation": 3, "user_id": 8472312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b947c22d00082072f0c799c568c11fa?s=128&d=identicon&r=PG&f=1", "display_name": "ILIkeStackOverFLowWhanIgetHelp", "link": "https://stackoverflow.com/users/8472312/ilikestackoverflowwhanigethelp"}, "edited": false, "score": 0, "creation_date": 1502885951, "post_id": 45712929, "comment_id": 78384623, "body": "The reason why I use char* instead of std::string is because i use Imgui and that doesent support std::string"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1502886017, "post_id": 45712929, "comment_id": 78384674, "body": "use std::vector or std::array avoid C style arrays the same as you avoid malloc/free and new/delete."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1502886098, "post_id": 45712929, "comment_id": 78384722, "body": "@ILIkeStackOverFLowWhanIgetHelp  Imgui not supporting std::string or std::wstring doesn&#39;t prevent your code from using them."}, {"owner": {"reputation": 3, "user_id": 8472312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b947c22d00082072f0c799c568c11fa?s=128&d=identicon&r=PG&f=1", "display_name": "ILIkeStackOverFLowWhanIgetHelp", "link": "https://stackoverflow.com/users/8472312/ilikestackoverflowwhanigethelp"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502886294, "post_id": 45712929, "comment_id": 78384873, "body": "@Micha&#235;lRoy Howe can i than print it?   Sins it is a const char* const* items."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502886438, "post_id": 45712929, "comment_id": 78384980, "body": "@ILIkeStackOverFLowWhanIgetHelp  Create a temporary list of string pointers for the call.  Or use the Imgui function that adds items one by one."}, {"owner": {"reputation": 3, "user_id": 8472312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b947c22d00082072f0c799c568c11fa?s=128&d=identicon&r=PG&f=1", "display_name": "ILIkeStackOverFLowWhanIgetHelp", "link": "https://stackoverflow.com/users/8472312/ilikestackoverflowwhanigethelp"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502886588, "post_id": 45712929, "comment_id": 78385105, "body": "@Micha&#235;lRoy ok, i think i understend it now :D"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8472312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b947c22d00082072f0c799c568c11fa?s=128&d=identicon&r=PG&f=1", "display_name": "ILIkeStackOverFLowWhanIgetHelp", "link": "https://stackoverflow.com/users/8472312/ilikestackoverflowwhanigethelp"}, "edited": false, "score": 1, "creation_date": 1502897677, "post_id": 45714619, "comment_id": 78393448, "body": "Thanks :D This solved my problem :D +shorted down the code"}], "tags": [], "owner": {"reputation": 231, "user_id": 7404875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80971b1d5ed24a338b33e8761cf394e?s=128&d=identicon&r=PG&f=1", "display_name": "pmaxim98", "link": "https://stackoverflow.com/users/7404875/pmaxim98"}, "is_accepted": true, "score": 0, "last_activity_date": 1502889265, "creation_date": 1502889265, "answer_id": 45714619, "question_id": 45712929, "link": "https://stackoverflow.com/questions/45712929/adding-filenames-from-a-directory-to-a-char-array-c/45714619#45714619", "title": "Adding filenames from a directory to a char* array. c++", "body": "<p>You could use C++ standard filesystem, but for that I guess you would need C++17 (or atleast VS15), not really sure.</p>\n\n<p>You would have to include:</p>\n\n<pre><code>#include &lt;experimental/filesystem&gt;\n#include &lt;filesystem&gt;\nusing namespace std::experimental::filesystem::v1;\n</code></pre>\n\n<p>Using it should be simple:</p>\n\n<pre><code>int i = 0;\nconst char * directoryToSearch = \"C:\\etc\\etc\";\nfor (const auto &amp; file : directory_iterator(directoryToSearch)) {\n    files[i] = new char[file.path().stem().string().length() + 1];\n    strcpy(files[i], file.path().stem().string().c_str());\n    ++i;\n}\n</code></pre>\n\n<p>Indeed, you should clean up the array after you're done using it. Don't forget, not many compilers support this at the moment.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1502890186, "creation_date": 1502890186, "answer_id": 45714968, "question_id": 45712929, "link": "https://stackoverflow.com/questions/45712929/adding-filenames-from-a-directory-to-a-char-array-c/45714968#45714968", "title": "Adding filenames from a directory to a char* array. c++", "body": "<p><em>When printing it only shows the last filename on all spots.</em> That is just normal: you store the filename on each iteration in the same buffer and just copy the address of the buffer into your array. Unrelated to the question, as <code>buffer</code> is an automatic variable declared inside a loop (block scoped), using it outside of the loop is Undefined Behaviour, so you end with an array of <em>dangling</em> pointers.</p>\n\n<p>The correct way would be to either use a 2D-array <code>char Files[MAX_PATH][20];</code> and store a file name in each slot, or use dynamic memory allocate by <code>new</code> (or malloc at a lower level). For the second option, you can do it <em>by hand</em>, allocating memory for each file name - and remember to free anything at the end, or you can let the standard library manage it for you by using:</p>\n\n<pre><code>std::vector&lt;std::string&gt; Files;\n...\nwhile(...) {\n    ...\n    File.push_back(search_data.cFileName);\n</code></pre>\n\n<p>Dear ImGui provides a <code>ListBox</code>ctor that allows to pass an opaque data storage along with an extractor, and it can be used here:</p>\n\n<pre><code>bool string_vector_items_getter(void* data, int idx, const char** out_text) {\n    std::vector&lt;std::string&gt; *v = reinterpret_cast&lt;std::vector&lt;std::string&gt; &gt;(data);\n    if (idx &lt; 0 || idx &gt;= v.size()) return false;\n    *out_text = v[idx].c_str();\n    return true;\n}\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>ImGui::ListBox(\"\", &amp;listbox_item_current, &amp;string_vector_items_getter, &amp;Files, i, 4);\n</code></pre>\n\n<p>(beware: untested code!)</p>\n"}], "owner": {"reputation": 3, "user_id": 8472312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b947c22d00082072f0c799c568c11fa?s=128&d=identicon&r=PG&f=1", "display_name": "ILIkeStackOverFLowWhanIgetHelp", "link": "https://stackoverflow.com/users/8472312/ilikestackoverflowwhanigethelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1627, "favorite_count": 0, "accepted_answer_id": 45714619, "answer_count": 2, "score": 0, "last_activity_date": 1502890186, "creation_date": 1502884624, "last_edit_date": 1502885324, "question_id": 45712929, "link": "https://stackoverflow.com/questions/45712929/adding-filenames-from-a-directory-to-a-char-array-c", "title": "Adding filenames from a directory to a char* array. c++", "body": "<p>I ame trying to get filenames from a directory and put it in a char* array for latter use. But this dont seem to work the way i want to. When printing it only showes the last filename on all spots.</p>\n\n<p>So my question howe can i add the file names in every spot inside the char*[]?</p>\n\n<pre><code>/*Placed outside*/\nint i = 0;\nchar* Files[20] = {};\n/*Placed outside*/\n\nwhile (handle != INVALID_HANDLE_VALUE)\n{\n    char buffer[4100];\n    sprintf_s(buffer, \"%ls\", search_data.cFileName);\n    Files[i] = buffer;\n    i++;\n    if (FindNextFile(handle, &amp;search_data) == FALSE)\n\n\n  /*Printing I use ImGui*/\n #define IM_ARRAYSIZE(_ARR)  ((int)(sizeof(_ARR)/sizeof(*_ARR)))\nstatic int listbox_item_current = 1;\nImGui::ListBox(\"\", &amp;listbox_item_current, Files, i, 4);\n</code></pre>\n"}, {"tags": ["c++", "templates", "compiler-errors", "template-specialization"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502884750, "post_id": 45712793, "comment_id": 78383760, "body": "This is the error you get with <code>#define DEFINEHEXANOTWORKING    1</code> or without it ?"}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1502885175, "post_id": 45712793, "comment_id": 78384067, "body": "I don&#39;t understand what you are doing/trying to do here! Templates are used for different types not for passing parameters"}, {"owner": {"reputation": 11, "user_id": 6341275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ci7MF.jpg?s=128&g=1", "display_name": "Charly", "link": "https://stackoverflow.com/users/6341275/charly"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502886367, "post_id": 45712793, "comment_id": 78384918, "body": "@tobi303 Yes I get the error with the <code>#define DEFINEHEXANOTWORKING 1</code>. With <code>#define DEFINEHEXANOTWORKING 0</code>, i.e. when defining constant using decimal, it compiles fine."}, {"owner": {"reputation": 11, "user_id": 6341275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ci7MF.jpg?s=128&g=1", "display_name": "Charly", "link": "https://stackoverflow.com/users/6341275/charly"}, "reply_to_user": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1502886650, "post_id": 45712793, "comment_id": 78385158, "body": "@o_weisman See <a href=\"https://stackoverflow.com/questions/499106/what-does-template-unsigned-int-n-mean\">link</a>"}, {"owner": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 0, "creation_date": 1502886688, "post_id": 45712793, "comment_id": 78385185, "body": "Hex constants are treated as unsigned. <a href=\"https://stackoverflow.com/questions/4737798/unsigned-hexadecimal-constant-in-c\" title=\"unsigned hexadecimal constant in c\">stackoverflow.com/questions/4737798/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1502886697, "post_id": 45712793, "comment_id": 78385195, "body": "I second @o_weisman, what you have there looks a bit overengineered as you already have macros you could simply do <code>printf(&quot;CODE1: %s\\n&quot;, CODE1);</code> and define <code>CODE1</code> as the message itself, instead of a parameter that you pass to a template to get the message"}, {"owner": {"reputation": 11, "user_id": 6341275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ci7MF.jpg?s=128&g=1", "display_name": "Charly", "link": "https://stackoverflow.com/users/6341275/charly"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502887354, "post_id": 45712793, "comment_id": 78385751, "body": "@tobi303 Thank you for the <i>overengineered</i>, it is a sample case. In the real code I need both int-bitfields codes values and messages. @Albjenow If so, why compiler is searching for <code>DefaultMsg&lt;-1&gt;(void)</code> ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502887946, "post_id": 45712793, "comment_id": 78386190, "body": "@Charly I was suspecting something like that and the &quot;overengineered&quot; was of course only with respect to not knowing what you actually want to achieve. However, if you need both bitfields values and messages, I would probably just use a <code>std::string bitF2message(bitfield);</code> ... not sure if it is worth the effort trying to push everything to compile time"}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1502889565, "post_id": 45712793, "comment_id": 78387498, "body": "Must admit I was unaware of this use for templates"}], "owner": {"reputation": 11, "user_id": 6341275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ci7MF.jpg?s=128&g=1", "display_name": "Charly", "link": "https://stackoverflow.com/users/6341275/charly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537687170, "creation_date": 1502884245, "last_edit_date": 1537687170, "question_id": 45712793, "link": "https://stackoverflow.com/questions/45712793/int-parameterized-template-with-hexadecimal-value-link-error-1-unresolved-ext", "title": "Int-parameterized template with hexadecimal value : link error &quot;1 unresolved externals&quot;", "body": "<p>When I specialize an int-templated function with a negative value defined in hexadecimal, Visual Studio 2010 give me a strange \"1 unresolve externals\" link error.</p>\n\n<p>Still it works fine if:</p>\n\n<ol>\n<li>I define the negative int value in decimal form.</li>\n<li>I define the template argument with \"unsigned int\" instead of \"int\".</li>\n<li>I use directly \"DefaultMsg\" templated-function. I.e. it only fails when I use \"NewMsg\" templated-function which calls \"DefaultMsg\" templated-function.</li>\n</ol>\n\n<p>Then I have some workaround here, but I still do not understand what is going wrong. Am I doing something bad ? Or is it a tricky compiler bug/limitation case ?</p>\n\n<p>Here is a sample code:</p>\n\n<pre><code>// Compile condition: define a code in hexa or decimal\n#define DEFINEHEXANOTWORKING    1\n\n// Code\n#define CODE1   1\n#define CODE2   0x2\n#if !DEFINEHEXANOTWORKING\n    // Here define a negative code in decimal mode\n    #define CODE3   -1\n#else\n    // Here define a negative code in hexadecimal mode\n    #define CODE3   0xFFFFFFFF\n#endif\n\n// Default message declaration\ntemplate&lt;int r&gt; __forceinline const char* DefaultMsg();\n\n// Default message specialization\ntemplate&lt;&gt; __forceinline const char* DefaultMsg&lt;CODE1&gt;()    { return \"Message 1.\"; }\ntemplate&lt;&gt; __forceinline const char* DefaultMsg&lt;CODE2&gt;()    { return \"Message 0x2.\"; }\ntemplate&lt;&gt; __forceinline const char* DefaultMsg&lt;CODE3&gt;()    { return \"Message -1/0xFFFFFFFF.\"; }\n\n// New template message\ntemplate&lt;int r&gt; __forceinline const char* NewMsg()          { return DefaultMsg&lt;r&gt;(); }\n\n// Main test\nint _tmain(int argc, _TCHAR* argv[])\n{\n    // Print default messages, all working in all cases\n    printf(\"Default messages:\\n\");\n    printf(\"CODE1: %s\\n\", DefaultMsg&lt;CODE1&gt;());\n    printf(\"CODE2: %s\\n\", DefaultMsg&lt;CODE2&gt;());\n    printf(\"CODE3: %s\\n\", DefaultMsg&lt;CODE3&gt;());\n\n    // Print new messages, not working if defined in hexa mode\n    printf(\"\\nNew messages:\\n\");\n    printf(\"CODE1: %s\\n\", NewMsg&lt;CODE1&gt;());\n    printf(\"CODE2: %s\\n\", NewMsg&lt;CODE2&gt;());\n    printf(\"CODE3: %s\\n\", NewMsg&lt;CODE3&gt;()); // Not compiling line in hexa mode\n\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>The compiler error:</p>\n\n<pre><code>error LNK2019: unresolved external symbol \"char const * __cdecl DefaultMsg&lt;-1&gt;(void)\" (??$DefaultMsg@$0?0@@YAPBDXZ) referenced in function \"char const * __cdecl NewMsg&lt;4294967295&gt;(void)\" (??$NewMsg@$0PPPPPPPP@@@YAPBDXZ)\n1&gt;D:\\\u00a7CELII\\Tests de programmation\\2017-08-16 - Test template\\Debug\\2017-08-16 - Test template.exe : fatal error LNK1120: 1 unresolved externals \n</code></pre>\n"}, {"tags": ["c++", "c++builder"], "comments": [{"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 9, "creation_date": 1502883682, "post_id": 45712452, "comment_id": 78383057, "body": "did you take a look at std::chrono ?"}, {"owner": {"reputation": 6371, "user_id": 1266688, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1KqkE.jpg?s=128&g=1", "display_name": "Elvis Dukaj", "link": "https://stackoverflow.com/users/1266688/elvis-dukaj"}, "edited": false, "score": 0, "creation_date": 1502886299, "post_id": 45712452, "comment_id": 78384877, "body": "give a look of my question here: <a href=\"https://stackoverflow.com/questions/16647819/timegm-cross-platform\" title=\"timegm cross platform\">stackoverflow.com/questions/16647819/timegm-cross-platform</a> or look for <code>gmtime</code>: <a href=\"http://www.cplusplus.com/reference/ctime/gmtime/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/ctime/gmtime</a> or for <code>mktime</code>: <a href=\"http://en.cppreference.com/w/cpp/chrono/c/mktime\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono/c/mktime</a>"}, {"owner": {"reputation": 73, "user_id": 5309977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pc5ic.jpg?s=128&g=1", "display_name": "Pratik Mota", "link": "https://stackoverflow.com/users/5309977/pratik-mota"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1502887280, "post_id": 45712452, "comment_id": 78385688, "body": "@AntoineMorrier: std:chrono is for c++ 11 compiler.. I am using Borland C++ in RAD XE Builder IDE."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 2, "creation_date": 1502888969, "post_id": 45712452, "comment_id": 78387026, "body": "What about C++Builder&#39;s <code>System::TDateTime</code> and <code>Dateutils::EncodeDateTime()</code>? Ok, the latter has an extra argument for milliseconds, but otherwise, it does the same as the C# <code>DateTime</code> constructor. <a href=\"http://docwiki.embarcadero.com/Libraries/Seattle/en/System.DateUtils.EncodeDateTime\" rel=\"nofollow noreferrer\">docwiki.embarcadero.com/Libraries/Seattle/en/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502911921, "post_id": 45712452, "comment_id": 78401310, "body": "In addition to Rudy&#39;s suggestion, also look at the <code>Sysutils::DateTimeToStr()</code> function and other related formatting functions."}, {"owner": {"reputation": 73, "user_id": 5309977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pc5ic.jpg?s=128&g=1", "display_name": "Pratik Mota", "link": "https://stackoverflow.com/users/5309977/pratik-mota"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1503060774, "post_id": 45712452, "comment_id": 78471546, "body": "@RudyVelthuis  &amp; ALL  :: Thank you all.. I tried and it is wokring now...         TDateTime dtTime = EncodeDateTime(nYear, nMonth, nDay, nHour, nMin, nSec, 0);   UnicodeString sLocalTime = dtTime.DateTimeString();"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 5309977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pc5ic.jpg?s=128&g=1", "display_name": "Pratik Mota", "link": "https://stackoverflow.com/users/5309977/pratik-mota"}, "is_accepted": true, "score": 0, "last_activity_date": 1503060958, "creation_date": 1503060958, "answer_id": 45757239, "question_id": 45712452, "link": "https://stackoverflow.com/questions/45712452/what-is-c-datetime-equivalent-for-c-code/45757239#45757239", "title": "What is C# DateTime equivalent for C++ Code?", "body": "<pre><code>#include &lt;dateutils.hpp&gt;\n\n TDateTime dtTime = EncodeDateTime(nYear, nMonth, nDay, nHour, nMin, nSec, 0);\n UnicodeString sLocalTime = dtTime.DateTimeString();\n AnsiString sTempString = sLocalTime.c_str();\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5309977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pc5ic.jpg?s=128&g=1", "display_name": "Pratik Mota", "link": "https://stackoverflow.com/users/5309977/pratik-mota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 45757239, "answer_count": 1, "score": 1, "last_activity_date": 1503060958, "creation_date": 1502883193, "last_edit_date": 1502911843, "question_id": 45712452, "link": "https://stackoverflow.com/questions/45712452/what-is-c-datetime-equivalent-for-c-code", "title": "What is C# DateTime equivalent for C++ Code?", "body": "<p>I have been given the following code in C#:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>  int Year, Month, Day, Hour, Min, Sec;\n  ....\n  //Assign Year, Month,..etc Value\n  ....\n  DateTime date = new DateTime(Year, Month, Day, Hour, Min, Sec);\n  return date.ToString();\n</code></pre>\n\n<p>Could someone please suggest the C++ equivalent (for C++Builder XE)?  The C# code converts a date and time according to the Local Region specified in the Windows OS.  I want the same functionality in my C++ code.  How can I achieve this?</p>\n\n<p>All year, month, etc values are available in my C++ code.</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1502883221, "post_id": 45712383, "comment_id": 78382766, "body": "I imagine that  cache receives some serious thrashing from sixteen threads pounding at different memory regions."}, {"owner": {"reputation": 35454, "user_id": 1366871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3ec9d9128a25ba6eae8a1d42c2eb04a?s=128&d=identicon&r=PG", "display_name": "dreamcrash", "link": "https://stackoverflow.com/users/1366871/dreamcrash"}, "edited": false, "score": 2, "creation_date": 1502883300, "post_id": 45712383, "comment_id": 78382800, "body": "I am guessing that you are having some lock contention on that critical region"}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1502883304, "post_id": 45712383, "comment_id": 78382803, "body": "that critical section?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1502912554, "post_id": 45712383, "comment_id": 78401603, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, your measurement methodology, your specific measurement results, and a more detailed system specification. And do format your code properly before submitting!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1502960880, "post_id": 45712383, "comment_id": 78419302, "body": "What compiler did you use and how did you time your code?"}, {"owner": {"reputation": 1, "user_id": 5675378, "user_type": "registered", "profile_image": "https://graph.facebook.com/926473034088289/picture?type=large", "display_name": "Junaid Akram", "link": "https://stackoverflow.com/users/5675378/junaid-akram"}, "edited": false, "score": 0, "creation_date": 1503580766, "post_id": 45712383, "comment_id": 78683625, "body": "I used gcc and timed my code with omp_get_wtime()"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5675378, "user_type": "registered", "profile_image": "https://graph.facebook.com/926473034088289/picture?type=large", "display_name": "Junaid Akram", "link": "https://stackoverflow.com/users/5675378/junaid-akram"}, "edited": false, "score": 0, "creation_date": 1503580821, "post_id": 45713106, "comment_id": 78683670, "body": "Can you suggest what options can I try to make it faster?"}], "tags": [], "owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "is_accepted": false, "score": 0, "last_activity_date": 1502885116, "creation_date": 1502885116, "answer_id": 45713106, "question_id": 45712383, "link": "https://stackoverflow.com/questions/45712383/openmp-100-times-slower-than-serial-code/45713106#45713106", "title": "openmp 100 times slower than serial code", "body": "<p>I am not sure why 100 times slower but it is slower due to reading/writing to the same memory regions, and multi thread requires this region to be locked else you will see race conditions. (If you were only reading no lock is required).</p>\n\n<p>You are using <code>res_vec[ctmc_um.to_index[i]]</code> so even if openmp has split the indices with stride, your access index to <code>res_vec</code> might be tangled (result of <code>[ctmc_um.to_index[i]]</code>. Thus every other thread might need to wait for a thread to finish its job, and there are 16 of them.</p>\n"}], "owner": {"reputation": 1, "user_id": 5675378, "user_type": "registered", "profile_image": "https://graph.facebook.com/926473034088289/picture?type=large", "display_name": "Junaid Akram", "link": "https://stackoverflow.com/users/5675378/junaid-akram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502885116, "creation_date": 1502883009, "question_id": 45712383, "link": "https://stackoverflow.com/questions/45712383/openmp-100-times-slower-than-serial-code", "title": "openmp 100 times slower than serial code", "body": "<p>I am using a node with 16 cores. But when I run the code is run in parallel it runs hundreds of times slower than the serial. I am unable to understand the reason. The parallel region is given below:</p>\n\n<pre><code>int Vector_mult_Matrix(vector&lt;double&gt; &amp; vec, CTMC_matrix &amp; ctmc_um)\n{\n\n\n     vector&lt;double&gt; res_vec(vec.size(),0);\n      omp_set_num_threads(16);\n    #pragma omp parallel num_threads(16)\n    {\n    #pragma omp for schedule(static) nowait \n    for(size_t i=0; i&lt;ctmc_um.trans_num; i++)\n    {\n    double temp = 0;\n        temp = res_vec[ctmc_um.to_index[i]]+vec[ctmc_um.from_index[i]]*ctmc_um.rate[i];\n\n    #pragma omp critical\n    res_vec[ctmc_um.to_index[i]] = temp;\n    }\n\n}\n\nvec.swap(res_vec);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "move"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1502882735, "post_id": 45712257, "comment_id": 78382462, "body": "If you just return an object by value, the compiler will most likely use <a href=\"http://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">return value optimizations like copy-elision</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1502882796, "post_id": 45712257, "comment_id": 78382510, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">copy elision</a> is a thing. The copies are not a problem."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1502884194, "post_id": 45712257, "comment_id": 78383394, "body": "Your fear of memory leaks has nothing to do with your problem. Memory managment is an implementation detail and is coverd by RAII."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1502884395, "post_id": 45712257, "comment_id": 78383530, "body": "if object is cheap to move, current code is ok, else you probably want to wrap it inside a smart pointer."}, {"owner": {"reputation": 117, "user_id": 7748951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4387428b3810012c791497e017cd99?s=128&d=identicon&r=PG&f=1", "display_name": "fateflame", "link": "https://stackoverflow.com/users/7748951/fateflame"}, "edited": false, "score": 0, "creation_date": 1502953337, "post_id": 45712257, "comment_id": 78414638, "body": "Well, if I create objects on heap and return their pointers, it means I must manually <code>delete</code> them in another function. It&#39;s not a safe implement when I cooperate with a group of people as they are much more like to forget it, I think.@knivil"}, {"owner": {"reputation": 117, "user_id": 7748951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4387428b3810012c791497e017cd99?s=128&d=identicon&r=PG&f=1", "display_name": "fateflame", "link": "https://stackoverflow.com/users/7748951/fateflame"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502955285, "post_id": 45712257, "comment_id": 78415820, "body": "@Some programmer dude. Thanks a lot! But as the answer in the question points out, how and when this elision happens are decided by the compiler. So is there some methods to <b>explicitly</b> make the elision. (Just like why c++11 give keywords <code>explicit</code> and <code>delete</code> in construction declaration.)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1502957689, "post_id": 45712257, "comment_id": 78417252, "body": "@fateflame find a c++17 compiler. That standard has made copy elision <i>mandatory</i> in a bunch of cases"}, {"owner": {"reputation": 117, "user_id": 7748951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4387428b3810012c791497e017cd99?s=128&d=identicon&r=PG&f=1", "display_name": "fateflame", "link": "https://stackoverflow.com/users/7748951/fateflame"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1502959986, "post_id": 45712257, "comment_id": 78418671, "body": "@Caleth Er.... well, thank you. I guess I can image one hhhhhhhhh"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1502960246, "post_id": 45712257, "comment_id": 78418835, "body": "To rephrase: the part of the standard that deals with (11 &amp; 14 allowed) (17 required) copy elision is based on what compilers were already doing. That&#39;s your description of when it occurs, and the &quot;it&#39;s becoming mandatory&quot; is explanation of why there isn&#39;t a keyword for &quot;elide this copy&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 849, "user_id": 1885002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db5b35211eb1c3987d9299ca4cbc5c?s=128&d=identicon&r=PG", "display_name": "King Thrushbeard", "link": "https://stackoverflow.com/users/1885002/king-thrushbeard"}, "is_accepted": true, "score": 4, "last_activity_date": 1502944340, "last_edit_date": 1502944340, "creation_date": 1502921459, "answer_id": 45723780, "question_id": 45712257, "link": "https://stackoverflow.com/questions/45712257/how-to-pass-the-ownership-of-an-object-to-the-outside-of-the-function/45723780#45723780", "title": "How to pass the ownership of an object to the outside of the function", "body": "<p>Typically, returning an object by value will <strong>not</strong> copy the object, as the compiler should do a (named) return value optimization and thereby elide the copy.</p>\n\n<p>With this optimization, the space for the returned object is allocated from the calling context (outer stack frame) and the object is constructed directly there.</p>\n\n<p>In your example, the compiler will allocate space for the object in the context where <code>createObject()</code> is called. As this context is an (unnamed) parameter to the <code>std::vector&lt;T&gt;.push_back()</code> member function, this works as an rvalue reference, so the <code>push_back()</code> by-value will consume this object by moving (instead of copying) it into the vector. This is possible since if the generated objects are movable. Otherwise, a copy will occur.</p>\n\n<p>In sum, each object will be created and then moved (if moveable) into the vector.</p>\n\n<p>Here is a sample code that shows this in more detail:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing Params = std::vector&lt;std::string&gt;;\n\nclass Object\n{\npublic:\n    Object() = default;\n    Object(const std::string&amp; s) : s_{s}\n    {\n        std::cout &lt;&lt; \"ctor: \" &lt;&lt; s_ &lt;&lt; std::endl;\n    }\n    ~Object()\n    {\n        std::cout &lt;&lt; \"dtor: \" &lt;&lt; s_ &lt;&lt; std::endl;\n    }\n\n    // Explicitly no copy constructor!\n    Object(const Object&amp; other) = delete;\n\n    Object(Object&amp;&amp; other)\n    {\n        std::swap(s_, other.s_);\n        std::cout &lt;&lt; \"move: traded '\" &lt;&lt; s_ &lt;&lt; \"' for '\" &lt;&lt; other.s_ &lt;&lt; \"'\" &lt;&lt; std::endl;\n    }\n\n    Object&amp; operator=(Object other)\n    {\n        std::swap(s_, other.s_);\n        std::cout &lt;&lt; \"assign: \" &lt;&lt; s_ &lt;&lt; std::endl;\n        return *this;\n    }\n\nprivate:\n    std::string s_;\n};\n\n\nusing Objects = std::vector&lt;Object&gt;;\n\nObject createObject(const std::string&amp; s)\n{\n    Object o{s};\n    return o;\n}\n\nint main ()\n{\n    Objects v;\n    v.reserve(4);  // avoid moves, if initial capacity is too small\n    std::cout &lt;&lt; \"capacity(v): \" &lt;&lt; v.capacity() &lt;&lt; std::endl;\n\n    Params ps = { \"a\", \"bb\", \"ccc\", \"dddd\" };\n\n    for (auto p : ps) {\n        v.push_back(createObject(p));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that the <code>class Object</code> explicitly forbids copying. But for this to work, the move constructur must be available.</p>\n\n<p>A detailed summary on when copy elision can (or will) happen is available <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 1, "last_activity_date": 1502954504, "creation_date": 1502954504, "answer_id": 45728904, "question_id": 45712257, "link": "https://stackoverflow.com/questions/45712257/how-to-pass-the-ownership-of-an-object-to-the-outside-of-the-function/45728904#45728904", "title": "How to pass the ownership of an object to the outside of the function", "body": "<p>Move semantics and copy elison of vectors should mean the elements of the local <code>std::vector</code> are in fact passed out of the object and into your local variable.</p>\n\n<p>Crudely you can expect the move constructor of <code>std::vector</code> to be something like:</p>\n\n<pre><code>//This is not real code...\nvector::vector(vector&amp;&amp; tomove){\n    elems=tomove.elems; //cheap transfer of elements - no copying of objects.\n    len=tomove.elems;\n    cap=tomove.cap;\n\n    tomove.elems=nullptr;\n    tomove.len=0;\n    tomove.cap=0;\n}\n</code></pre>\n\n<p>Execute this code and notice the minimum number of objects are constructed and destructed.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n\nclass Heavy{\n    public:\n     Heavy(){std::cout&lt;&lt; \"Heavy construction\\n\";}\n     Heavy(const Heavy&amp;){std::cout&lt;&lt; \"Heavy copy construction\\n\";}\n     Heavy(Heavy&amp;&amp;){std::cout&lt;&lt; \"Heavy move construction\\n\";}\n     ~Heavy(){std::cout&lt;&lt; \"Heavy destruction\\n\";}\n\n};\n\n\nstd::vector&lt;Heavy&gt; build(size_t size){\n\n    std::vector&lt;Heavy&gt; result;\n    result.reserve(size);\n    for(size_t i=0;i&lt;size;++i){\n        result.emplace_back();\n    }\n    return result;\n}\n\n\nint main() {\n\n    std::vector&lt;Heavy&gt; local=build(5);\n    std::cout&lt;&lt;local.size()&lt;&lt;std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Move semantics and copy elison tend to take care of this problem C++11 onwards.</p>\n\n<p>Expected output:</p>\n\n<pre><code>Heavy construction\nHeavy construction\nHeavy construction\nHeavy construction\nHeavy construction\n5\nHeavy destruction\nHeavy destruction\nHeavy destruction\nHeavy destruction\nHeavy destruction\n</code></pre>\n\n<p>Notice that I reserved capacity in the vector before filling it and used <code>emplace_back</code> to construct the objects straight into the vector.</p>\n\n<p>You don't have to get the value passed to <code>reserve</code> exactly right as the vector will grow to accommodate values but it that will eventually lead to a re-allocation and move of all the elements which may be costly depending on whether you or the compiler implemented an efficient move constructor.</p>\n"}], "owner": {"reputation": 117, "user_id": 7748951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4387428b3810012c791497e017cd99?s=128&d=identicon&r=PG&f=1", "display_name": "fateflame", "link": "https://stackoverflow.com/users/7748951/fateflame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 45723780, "answer_count": 2, "score": 3, "last_activity_date": 1502954504, "creation_date": 1502882661, "last_edit_date": 1502953169, "question_id": 45712257, "link": "https://stackoverflow.com/questions/45712257/how-to-pass-the-ownership-of-an-object-to-the-outside-of-the-function", "title": "How to pass the ownership of an object to the outside of the function", "body": "<p>Is there any method that can pass the ownership of an object created in the function <strong>on the stack memory</strong> to the outside of the function <strong>without using copy construction</strong>?</p>\n\n<p>Usually, compiler will automatically call destruction to the object on the stack of a function. Therefore, <strong>if we want to create an object of a class(maybe with some specific parameters), how can we avoid wasting lots of resources copying from temp objects?</strong> </p>\n\n<p>Here is one common case:</p>\n\n<pre><code>while(...){\n    vectors.push_back(createObject( parameter ));\n}\n</code></pre>\n\n<p>So when we want to create objects in a iteration with some parameters, and push them into a <code>vector</code>, normal <strong>value passed way</strong> will take a lot of time copying objects. <strong>I don't want to use pointer and <code>new</code> objects on the heap memory as user are likely to forget <code>delete</code> them and consequently cause memory leak</strong>. </p>\n\n<p>Well, smart pointer maybe a solution. But..less elegent, I think. hhhh</p>\n\n<p><strong>Is there any way of applying <code>rvalue reference</code> and <code>move</code> semantics to solve this problem?</strong></p>\n"}, {"tags": ["c++", "qt", "audio", "recording"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502887219, "post_id": 45712834, "comment_id": 78385634, "body": "thanks @trivelt, the source you provided is quite tough to start with. Can you suggest any beginner level resource."}, {"owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "reply_to_user": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502888941, "post_id": 45712834, "comment_id": 78387007, "body": "Hm, which operating system and Qt version do you use?"}, {"owner": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502889573, "post_id": 45712834, "comment_id": 78387503, "body": "I am using ubuntu 16.04 and QT version is 5.7.  @trivelt"}, {"owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "reply_to_user": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502891186, "post_id": 45712834, "comment_id": 78388679, "body": "Do you have gstreamer installed? If not try this: <code>sudo apt-get install libgstreamer1.0-0</code>"}, {"owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "reply_to_user": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502891279, "post_id": 45712834, "comment_id": 78388744, "body": "Also, as I remember, for some QtMultimedia features you also need to install other gstreamer plugins. If you type <code>sudo apt-get install gstreamer1.0</code> and double-click <code>tab</code> you can see available plugins and try to install some of them."}, {"owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "reply_to_user": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "edited": false, "score": 0, "creation_date": 1502954380, "post_id": 45712834, "comment_id": 78415272, "body": "Could you try install libgstreamer0.10-* and gstreamer0.10-* instead of 1.0?"}], "tags": [], "owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "is_accepted": false, "score": 0, "last_activity_date": 1502884356, "creation_date": 1502884356, "answer_id": 45712834, "question_id": 45712138, "link": "https://stackoverflow.com/questions/45712138/how-can-i-record-and-save-audio-in-qt-c/45712834#45712834", "title": "How can I record and save audio in QT C++?", "body": "<p>You should install some <a href=\"http://wiki.qt.io/Qt_Multimedia_Backends\" rel=\"nofollow noreferrer\">Qt Multimedia Backend</a> - check this list (proper for Qt version that you use) and select backend for your operating system. </p>\n"}], "owner": {"reputation": 53, "user_id": 5532457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmQ3G.jpg?s=128&g=1", "display_name": "Faruk Ahmad", "link": "https://stackoverflow.com/users/5532457/faruk-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502886973, "creation_date": 1502882304, "last_edit_date": 1502886973, "question_id": 45712138, "link": "https://stackoverflow.com/questions/45712138/how-can-i-record-and-save-audio-in-qt-c", "title": "How can I record and save audio in QT C++?", "body": "<p>I am trying to record and save audio file using <code>Qt</code> <code>c++</code> and here is my code for this purpose.</p>\n\n<pre><code>QAudioRecorder * audioRecorder = new QAudioRecorder();\n\nif(audioRecorder-&gt;state() == audioRecorder-&gt;StoppedState)\n{\n    // Set recording Settings\n    QAudioEncoderSettings settings;\n    settings.setCodec(\"audio/pcm\");     // Not sure what to put here\n    settings.setSampleRate(16000);\n    settings.setBitRate(32);\n    settings.setQuality(QMultimedia::HighQuality);\n    settings.setEncodingMode(QMultimedia::ConstantQualityEncoding);\n\n    audioRecorder-&gt;setEncodingSettings(settings);\n\n    //Set Audio Input\n    audioRecorder-&gt;setAudioInput(audioRecorder-&gt;defaultAudioInput());\n\n    // Sets Output location where to store the file\n    QUrl url(\"hello.wav\");\n    audioRecorder-&gt;setOutputLocation(QUrl::fromLocalFile(\"hello.wav\"));\n    audioRecorder-&gt;setContainerFormat(\"mp3\");\n\n    audioRecorder-&gt;record();\n\n    qDebug()&lt;&lt;audioRecorder-&gt;state();\n}\nelse\n{\n    qDebug()&lt;&lt;\"stopped\";\n}\n</code></pre>\n\n<p>But it does not save any file rather shows the message <code>no service found for - \"org.qt-project.qt.audiosource\"</code>.\nHow can I save the audio file?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1502881585, "post_id": 45711854, "comment_id": 78381736, "body": "The <code>Eigen</code> library might be doing just that. Also: what troubles are you having?"}, {"owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1502881697, "post_id": 45711854, "comment_id": 78381795, "body": "Yes, I used Eigen, but funny thing, this time gcc 4.6 is my limit... :( But good idea, I&#39;ll try to search how they have done it."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1502881700, "post_id": 45711854, "comment_id": 78381796, "body": "You don&#39;t need to overload assignment operator. You just have to make <code>()</code> return a reference."}, {"owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "edited": false, "score": 0, "creation_date": 1502881951, "post_id": 45711854, "comment_id": 78381937, "body": "I&#39;m confused how to get the syntax right, can you post some example?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1502881965, "post_id": 45711854, "comment_id": 78381948, "body": "What have you tried? How exactly do you have trouble implementing it?"}, {"owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "edited": false, "score": 0, "creation_date": 1502882158, "post_id": 45711854, "comment_id": 78382084, "body": "I have: \tT operator()(unsigned width, unsigned height) { \t\treturn my_data[width + height * data_width]; \t} for reading the data like: my_class(7, 8), now I want to write to it in a simmilar way"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1502882204, "post_id": 45711854, "comment_id": 78382113, "body": "Just return a reference... Look at <a href=\"https://stackoverflow.com/a/42628050/5470596\">that answer</a> I posted on a similar topic."}, {"owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "edited": false, "score": 0, "creation_date": 1502882325, "post_id": 45711854, "comment_id": 78382181, "body": "Aaa, yes of course :P , thank you"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1502882211, "creation_date": 1502882211, "answer_id": 45712103, "question_id": 45711854, "link": "https://stackoverflow.com/questions/45711854/overload-operator-for-multidimensional-data-access/45712103#45712103", "title": "overload () operator for multidimensional data access", "body": "<p>For example, it would be</p>\n\n<pre><code>template &lt;typename T, std::size_t S1, std::size_t S2, S3&gt;\nstruct Matrix3D\n{\n    // ...\n\n     const T&amp; operator()(std::size_t i, std::size_t j, std::size_t k) const {\n          return data[i][j][k];\n     }\n     T&amp; operator()(std::size_t i, std::size_t j, std::size_t k) {\n          return data[i][j][k];\n     }\nprivate:\n    T data[S1][S2][S3];\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1502882446, "creation_date": 1502882446, "answer_id": 45712184, "question_id": 45711854, "link": "https://stackoverflow.com/questions/45711854/overload-operator-for-multidimensional-data-access/45712184#45712184", "title": "overload () operator for multidimensional data access", "body": "<p>Thanks to your help I have a solution:</p>\n\n<pre><code>T&amp; operator()(unsigned width, unsigned height) {\n    return my_data[width + height * data_width];\n}\n</code></pre>\n\n<p>works both ways:</p>\n\n<pre><code>my_class(1,2) = value;\nvalue = my_class(1,2);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4562957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77b9025829e6a7be61286519bea3063f?s=128&d=identicon&r=PG&f=1", "display_name": "corwin", "link": "https://stackoverflow.com/users/4562957/corwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 45712103, "answer_count": 2, "score": 0, "last_activity_date": 1502884013, "creation_date": 1502881510, "question_id": 45711854, "link": "https://stackoverflow.com/questions/45711854/overload-operator-for-multidimensional-data-access", "title": "overload () operator for multidimensional data access", "body": "<p>I want to have access to multidimensional data inside a class, I found:</p>\n\n<blockquote>\n  <p>To provide multidimensional array access semantics, e.g. to implement a 3D array access a[i][j][k] = x;, operator[] has to return a reference to a 2D plane, which has to have its own operator[] which returns a reference to a 1D row, which has to have operator[] which returns a reference to the element. To avoid this complexity, some libraries opt for overloading operator() instead, so that 3D access expressions have the Fortran-like syntax a(i, j, k) = x;</p>\n</blockquote>\n\n<p>on <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/operators</a></p>\n\n<p>and I'd like to use suggested syntax, but I have trouble implementing that. How can I write overloaded assignment operator to work that way?</p>\n"}, {"tags": ["c++", "c", "assembly", "visual-studio-2017", "inline-assembly"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502881923, "post_id": 45711675, "comment_id": 78381920, "body": "Making function inline makes sense only if function body is rather small so there is a benefit of replacing it&#39;s call with it&#39;s body. I somehow doubt that you assembly functions are that small and simple."}, {"owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502882049, "post_id": 45711675, "comment_id": 78382008, "body": "@VTT It is meant to be used as an anti-debugging method, i have generated lot of condition with jumps etc, they differ each time, they do all kind of instructions with loops, restoring original register values, that&#39;s why i don&#39;t want the <code>call</code> for each of them. As it would be easy to see that it&#39;s junk call"}, {"owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502882315, "post_id": 45711675, "comment_id": 78382173, "body": "@VTT basically it changes the control flow graph, that&#39;s why its crucial to not make this calls, and iline all the generated blocks. In Mingw64 i had no problem doing that, but i&#39;m not very familiar with msvc compiler is it even possible to do?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1502883083, "post_id": 45711675, "comment_id": 78382682, "body": "@PastaWithGarlicOil check if their linker is capable to do so. It require linker to be capable of the link time optimisations. You need to check the documentation. did you check with the debugger or just the generated listing? If the latter it can be like this as information about potential link time inlining is in the object file and the function call is replaced by the function body during the link stage"}, {"owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1502883371, "post_id": 45711675, "comment_id": 78382841, "body": "@PeterJ i checked with the debugger"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1502883580, "post_id": 45711675, "comment_id": 78382979, "body": "@PeterJ - Link time code generation is not supported for .asm files, but would normally use compiler intrinsics for any &quot;interesting&quot; machine instructions. Inline functions as code obfuscation was apparently not considered by Microsoft.  :-)"}, {"owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1502883606, "post_id": 45711675, "comment_id": 78382995, "body": "@PeterJ thanks i will look trough all linker directives, maybe there are some link time optimisations"}, {"owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1502883819, "post_id": 45711675, "comment_id": 78383140, "body": "@BoPersson so sad, Do you know, is it possible to just insert machine codes inside the function body at compile time? something like <code>_asm _emit</code>?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1502969651, "post_id": 45711675, "comment_id": 78425628, "body": "@Pasta - No, there really isn&#39;t any use for that, except for your attempt to make the code harder to read. All &quot;real&quot; use of inline assembly can be replaced with compiler intrinsics for useful instructions that the compiler might not use itself. There are hundreds, if not thousands, such instructions built into the compiler. <a href=\"https://docs.microsoft.com/cpp/intrinsics/x64-amd64-intrinsics-list\" rel=\"nofollow noreferrer\">docs.microsoft.com/cpp/intrinsics/x64-amd64-intrinsics-list</a>"}], "owner": {"reputation": 11, "user_id": 8472000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bd54560d453f90da8274d47e98dacf?s=128&d=identicon&r=PG&f=1", "display_name": "PastaWithGarlicOil", "link": "https://stackoverflow.com/users/8472000/pastawithgarlicoil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "closed_date": 1502883026, "answer_count": 0, "score": 1, "last_activity_date": 1502881777, "creation_date": 1502880979, "last_edit_date": 1502881777, "question_id": 45711675, "link": "https://stackoverflow.com/questions/45711675/x64-assembly-in-visual-studio-as-inline-function", "closed_reason": "Duplicate", "title": "X64 Assembly in visual studio, as inline function", "body": "<p>I'm trying to embedd my x64 assembler code into c++, as i know x64 <code>__asm</code> is not allowed in x64, so what i tried, is i made an asm defintion like this in <code>func.asm</code>:</p>\n\n<pre><code>.code\nproc_testing PROC\n\npush rcx\npop rcx\n\nproc_testing ENDP\nEND\n</code></pre>\n\n<p>And in my C code, <code>main.c</code>:</p>\n\n<pre><code>#include \"stdafx.h\"\n\nextern\"C\" void inline proc_testing();\nint main()\n{\n    proc_testing();\n    return 0;\n}\n</code></pre>\n\n<p>I tought that <code>inline</code> keyword would make the compiler not to call <code>proc_testing()</code> but to place its code inside the main. Unfortunately it still make a <code>call proc_testing</code>. In masm you have a keyword <code>MACRO</code> also, but here i cannot use this, i get compilation error if use <code>MACRO</code> instead of <code>PROC</code>, i tried to do it like this:</p>\n\n<pre><code>.code\nproc_testing MACRO\npush rcx\npop rcx\n\nproc_testing ENDM\nEND\n</code></pre>\n\n<p>This way i get an error: <code>unmatched macro nesting</code>.</p>\n\n<p>So i have a two question actually:</p>\n\n<p>1) Can the masm assembly in x64 in visual studio be inline? So when i use <code>proc_testing();</code> it will not do the <code>call proc_testing</code> but actually place the code of <code>proc_testing</code> inside the <code>main</code>.</p>\n\n<p>2) Can you make masm <code>MACRO</code> to work outside the <code>.asm</code> file? If So how can i achieve that? </p>\n\n<p>So basically i need to get rid of the <code>call</code> and place the assembly code directly at link/compile time. The assembler code is generated dynamically using some engine, so i cannot use compiler intrinsics, i would need to rewrite the asm generator for that.</p>\n\n<p>And finally, if all the variants are not possible, can i do an analogy of <code>_asm _emit</code>, to just place the machine code in hex, in the <code>.text</code> inside the specific places?</p>\n"}, {"tags": ["c++", "cmake", "winsock2"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1502880925, "post_id": 45711642, "comment_id": 78381236, "body": "Is winsock2 headers properly included? Does your code compile without CMake?"}, {"owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1502881067, "post_id": 45711642, "comment_id": 78381349, "body": "Sure, when I have created Makefile by myself there were no errors."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1502881091, "post_id": 45711642, "comment_id": 78381372, "body": "Unless <code>cmake</code> injects <code>#include</code>s into the C code, then this in not a problem with <code>cmake</code>. There is something wrong with the C code, unless, it is picking up a different version of the header-file, because of include paths are different."}, {"owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "edited": false, "score": 0, "creation_date": 1502886941, "post_id": 45711642, "comment_id": 78385427, "body": "So what should I do?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502913368, "post_id": 45711642, "comment_id": 78401979, "body": "Make sure your C code has explicit <code>#include &lt;winsock.h&gt;</code> or <code>#include &lt;winsock2.h&gt;</code> statements in it."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1502914186, "post_id": 45711642, "comment_id": 78402402, "body": "<code>I think I&#39;m wrong in setting sources</code> - You can always check content of CMake variables you set via <code>message()</code> command. E.g. <code>message(&quot;SOURCES are: ${SOURCES}&quot;)</code>"}], "owner": {"reputation": 21, "user_id": 6708953, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qaRnN.jpg?s=128&g=1", "display_name": "Kacper Czy\u017c", "link": "https://stackoverflow.com/users/6708953/kacper-czy%c5%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502880845, "creation_date": 1502880845, "question_id": 45711642, "link": "https://stackoverflow.com/questions/45711642/cmake-doesnt-recognize-types-of-winsock2", "title": "CMake doesn&#39;t recognize types of winsock2", "body": "<p>I'm new in CMake and I'm trying to compile my winsock2 project using this, but still getting errors like:</p>\n\n<blockquote>\n  <p>In file included from /cygdrive/c/Users/Kacper/Desktop/aurea/aurea/includes/WebServer.h:14:0,\n                   from /cygdrive/c/Users/Kacper/Desktop/aurea/aurea/WebServer.cpp:1:\n  /cygdrive/c/Users/Kacper/Desktop/aurea/aurea/includes/HttpServer.h:48:13: error: 'SOCKET' does not name a type\n               SOCKET server_socket</p>\n</blockquote>\n\n<p>There is my CMakeLists file: </p>\n\n<pre><code>    cmake_minimum_required(VERSION 2.8.9)\n    project(aurea)\n    include_directories(${CMAKE_SOURCE_DIR}/aurea/includes)\n\n    find_library(WS2_32_LIBRARY ws2_32)\n\n    set(CMAKE_CXX_FLAGS \"-std=c++14 -Wall -Wextra\")\n\n    file(GLOB SOURCES aurea/*.cpp aurea/http/*.cpp aurea/router/*.cpp aurea/utils/*.cpp)\n    file(GLOB HEADERS aurea/includes/*.h)\n\n    add_executable(aurea ${SOURCES} ${HEADERS})\n\n    target_link_libraries(aurea ${WS2_32_LIBRARY})\n</code></pre>\n\n<p>Why compiler doesn't recognize types of winsock? :&lt; When I'm trying to compile simple one file project linking ws2_32 like this there is no error, I think I'm wrong in setting sources but can't find mistake by myself.</p>\n"}, {"tags": ["c++", "opencv", "feature-extraction", "feature-detection"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502886789, "post_id": 45712175, "comment_id": 78385282, "body": "I want to use string input as program argument to program. Edited question to clarify."}], "tags": [], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "is_accepted": false, "score": 0, "last_activity_date": 1502882423, "creation_date": 1502882423, "answer_id": 45712175, "question_id": 45711614, "link": "https://stackoverflow.com/questions/45711614/how-to-define-feature-type-through-program-argument-in-opencv/45712175#45712175", "title": "How to define feature type through program argument in opencv?", "body": "<p>What about a template?</p>\n\n<pre><code>template&lt;class T&gt; cv::Ptr&lt;T&gt; FeatureDetectorCreator()\n{\n    return T::create();\n};\n</code></pre>\n\n<p>then you can call it with:</p>\n\n<pre><code>cv::Ptr&lt;SURF&gt; detector = FeatureDetectorCreator&lt;SURF&gt;();\n</code></pre>\n\n<p>Alternative could be a MACRO.</p>\n\n<p>Will only work, if all those feature detectors share a common interface.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502886887, "post_id": 45712692, "comment_id": 78385372, "body": "I was looking at this as well. Could you detail how to use polymorphism for this. I haven&#39;t used it before. By the way, I&#39;m planning to use string input as program argument to choose feature type. Edited question for clarification."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 2, "creation_date": 1502887104, "post_id": 45712692, "comment_id": 78385560, "body": "This solution uses a string as input. Have a look at: <a href=\"http://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_feature_detectors.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/features2d/doc/&hellip;</a>"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "reply_to_user": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502887349, "post_id": 45712692, "comment_id": 78385743, "body": "@SK90 I added an example program showing how you can use this function. You don&#39;t have to do anything explicit regarding polymorphism here - just use interface function and let runtime figure out the correct implementation"}, {"owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502951540, "post_id": 45712692, "comment_id": 78413605, "body": "@slawekwin I used your code but <code>error: \u2018create\u2019 is not a member of \u2018cv::FeatureDetector {aka cv::Feature2D}\u2019</code>. There seems to be only &#39;create&#39; for already named features (e.g. Ptr&lt;SURF&gt; create (arguments)). If there is no way, I may go for if-else option."}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "reply_to_user": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502952084, "post_id": 45712692, "comment_id": 78413934, "body": "@SK90 what includes do you have? <code>FeatureDetector</code> is in <code>opencv2&#47;features2d&#47;features2d.hpp</code>. Generally for most required features it easiest to just <code>#include &quot;opencv2&#47;opencv.hpp&quot;</code>"}, {"owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502953890, "post_id": 45712692, "comment_id": 78414956, "body": "@slawekwin I have <code>features2d.hpp</code> and added <code>opencv.hpp</code>. Still the same error. The error looks to be consistent with library code (i.e. I installed opencv 3.2 and there is no direct implementation of <code>FeatureDetector::create</code> or <code>Feature2D::create</code> after searching through the whole system)."}, {"owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1502954758, "post_id": 45712692, "comment_id": 78415499, "body": "@Micka I searched for <code>Ptr&lt;FeatureDetector&gt; create</code> too based on your link but it is nowhere to be found in my computer"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "reply_to_user": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "edited": false, "score": 0, "creation_date": 1502955934, "post_id": 45712692, "comment_id": 78416191, "body": "@SK90 it seems this function was dropped in OpenCV 3. This answer only applies to version 2.4 at this time."}], "tags": [], "owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "is_accepted": false, "score": 1, "last_activity_date": 1502887252, "last_edit_date": 1502887252, "creation_date": 1502883910, "answer_id": 45712692, "question_id": 45711614, "link": "https://stackoverflow.com/questions/45711614/how-to-define-feature-type-through-program-argument-in-opencv/45712692#45712692", "title": "How to define feature type through program argument in opencv?", "body": "<p>It seems you would like the feature provided by the <a href=\"http://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_feature_detectors.html?highlight=featuredetector#featuredetector-create\" rel=\"nofollow noreferrer\"><code>Ptr&lt;FeatureDetector&gt; cv::FeatureDetector::create(const string&amp; detectorType)</code></a> function:</p>\n\n<pre><code>\"FAST\" \u2013 FastFeatureDetector \n\"STAR\" \u2013 StarFeatureDetector \n\"SIFT\" \u2013 SIFT (nonfree module) \n\"SURF\" \u2013 SURF (nonfree module) \n\"ORB\" \u2013 ORB\n\"BRISK\" \u2013 BRISK \n\"MSER\" \u2013 MSER \n\"GFTT\" \u2013 GoodFeaturesToTrackDetector\n\"HARRIS\" \u2013 GoodFeaturesToTrackDetector with Harris detector enabled\n\"Dense\" \u2013 DenseFeatureDetector \n\"SimpleBlob\" \u2013 SimpleBlobDetector\n\nAlso a combined format is supported: \n  feature detector adapter name ( \"Grid\" \u2013 GridAdaptedFeatureDetector, \"Pyramid\" \u2013 PyramidAdaptedFeatureDetector )\n   + feature detector name (see above), for example: \"GridFAST\", \"PyramidSTAR\"\n</code></pre>\n\n<p>It returns a pointer to the FeatureDetector base class, so you can use polymorphism to select specific implementation at runtime:</p>\n\n<pre><code>//assuming image path is the first command line parameter and detector type is the second parameter\nauto image = cv::imread(argv[1]);\nauto ptr = cv::FeatureDetector::create(argv[2]); //auto evaulates to cv::Ptr&lt;cv::FeatureDetector&gt; here\nstd::vector&lt;cv::KeyPoint&gt; keypoints;\nptr-&gt;detect(image, keypoints);\nfor (auto kp : keypoints)\n    cv::circle(image, kp.pt, 2, cv::Scalar(0, 255, 255), -1);\ncv::imwrite(argv[1], image);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "is_accepted": true, "score": 0, "last_activity_date": 1502961987, "creation_date": 1502961987, "answer_id": 45731310, "question_id": 45711614, "link": "https://stackoverflow.com/questions/45711614/how-to-define-feature-type-through-program-argument-in-opencv/45731310#45731310", "title": "How to define feature type through program argument in opencv?", "body": "<h1>OpenCV 3.x</h1>\n\n<p>There is no built-in function for this. Use <code>Ptr&lt;FeatureDetector&gt;</code> to define a detector (the descriptor equivalent is <code>Ptr&lt;DescriptorExtractor&gt;</code>). Sample code is as follows:</p>\n\n<pre><code>string det = argv[4]; //assuming detector definition is fourth argument\nPtr&lt;FeatureDetector&gt; detector;\nif (det == \"SURF\") {\n    detector = SURF::create();\n} else if (det == \"SIFT\") {\n    detector = SIFT::create();\n}\n</code></pre>\n\n<h1>OpenCV 2.4.x</h1>\n\n<p>Use the provided function <a href=\"http://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_feature_detectors.html?highlight=featuredetector#featuredetector-create\" rel=\"nofollow noreferrer\"><code>Ptr&lt;FeatureDetector&gt; cv::FeatureDetector::create(const string&amp; detectorType)</code></a>. For further details please refer to answer by slawekwin.</p>\n"}], "owner": {"reputation": 59, "user_id": 6070833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caa4404710209b91730775099e35c70c?s=128&d=identicon&r=PG&f=1", "display_name": "SK90", "link": "https://stackoverflow.com/users/6070833/sk90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 45731310, "answer_count": 3, "score": 0, "last_activity_date": 1502962113, "creation_date": 1502880765, "last_edit_date": 1502962113, "question_id": 45711614, "link": "https://stackoverflow.com/questions/45711614/how-to-define-feature-type-through-program-argument-in-opencv", "title": "How to define feature type through program argument in opencv?", "body": "<p>Currently changing feature type is done by changing the name manually in the code. For example, for SURF detector and descriptor, I have to change the word \"SURF\" to some other name in the following code sample:</p>\n\n<pre><code>Ptr&lt;SURF&gt; detector = SURF::create();\nPtr&lt;SURF&gt; descriptor = SURF::create();\n</code></pre>\n\n<p>Is there a way to change the feature type by changing the \"SURF\" part through program arguments?</p>\n\n<p>I want to be able to bulk evaluate multiple feature types rather than manually typing the feature type each time.</p>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "edited": false, "score": 1, "creation_date": 1502880509, "post_id": 45711468, "comment_id": 78380922, "body": "These annotations are for Java doc. You can use similar tool with c/c++. You have to use doxygen and it&#39;s syntax."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1502880526, "post_id": 45711468, "comment_id": 78380928, "body": "are you talking of VS?? then <a href=\"https://msdn.microsoft.com/en-us/library/ms177246.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms177246.aspx</a>"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 1, "creation_date": 1502880556, "post_id": 45711468, "comment_id": 78380950, "body": "C++ has no tightly integrated comment processor. Many people use Doxygex for such work,  very good program."}, {"owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "reply_to_user": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1502880667, "post_id": 45711468, "comment_id": 78381030, "body": "@\u03a6Xoc\u0119\uc6c3\u041fepe&#250;pa\u30c4 yes I am talking about VS, good observation !, I edited the title now"}, {"owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "edited": false, "score": 0, "creation_date": 1502881281, "post_id": 45711468, "comment_id": 78381517, "body": "Thank you everyone for the answers !"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 2, "creation_date": 1502880831, "post_id": 45711510, "comment_id": 78381166, "body": "@downvoter Please explain. It  doesn&#39;t exist? I wasn&#39;t using it 13 years ago? Baffling."}, {"owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "edited": false, "score": 0, "creation_date": 1502881258, "post_id": 45711510, "comment_id": 78381505, "body": "@EJP Thanks for this answer, I will check !"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1502880768, "last_edit_date": 1502880768, "creation_date": 1502880516, "answer_id": 45711510, "question_id": 45711468, "link": "https://stackoverflow.com/questions/45711468/does-c-visual-studio-have-java-style-comments/45711510#45711510", "title": "Does C++ (Visual Studio) have Java style comments?", "body": "<p>C++ doesn't come with a processor for those comments, but they do exist. I was using one 13 years ago. I think it was called ... <code>cppdoc</code>, but don't quote me.</p>\n"}, {"comments": [{"owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "edited": false, "score": 0, "creation_date": 1502881210, "post_id": 45711511, "comment_id": 78381465, "body": "Thank you for your answer !!"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 6, "last_activity_date": 1553599981, "last_edit_date": 1553599981, "creation_date": 1502880517, "answer_id": 45711511, "question_id": 45711468, "link": "https://stackoverflow.com/questions/45711468/does-c-visual-studio-have-java-style-comments/45711511#45711511", "title": "Does C++ (Visual Studio) have Java style comments?", "body": "<p>It has nothing to do with the language itself but there are documentation generating programs that do understand \"Javadoc\" style comments.</p>\n\n<p>For example <a href=\"http://www.doxygen.nl/\" rel=\"nofollow noreferrer\">Doxygen</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "edited": false, "score": 0, "creation_date": 1502881231, "post_id": 45711548, "comment_id": 78381485, "body": "Thank you for the answer !!"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 5, "last_activity_date": 1545760519, "last_edit_date": 1545760519, "creation_date": 1502880588, "answer_id": 45711548, "question_id": 45711468, "link": "https://stackoverflow.com/questions/45711468/does-c-visual-studio-have-java-style-comments/45711548#45711548", "title": "Does C++ (Visual Studio) have Java style comments?", "body": "<p>The C++ standard does not define any comment semantics like Java does with <a href=\"https://en.wikipedia.org/wiki/Javadoc\" rel=\"nofollow noreferrer\">Javadocs</a>.</p>\n\n<p>There are, however, extensions, like <a href=\"http://www.doxygen.nl/manual/docblocks.html\" rel=\"nofollow noreferrer\">doxygen</a>, <a href=\"http://jessevdk.github.io/cldoc/documenting.html\" rel=\"nofollow noreferrer\">cldoc</a> or <a href=\"http://docpp.sourceforge.net/\" rel=\"nofollow noreferrer\">DOC++</a>, which provide similar functionality.</p>\n\n<p>Check if your IDE/text editor supports doxygen syntax highlighting.</p>\n"}], "owner": {"reputation": 250, "user_id": 5563000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UaSRS.jpg?s=128&g=1", "display_name": "Linksx", "link": "https://stackoverflow.com/users/5563000/linksx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 45711548, "answer_count": 3, "score": 2, "last_activity_date": 1553599981, "creation_date": 1502880393, "last_edit_date": 1502880631, "question_id": 45711468, "link": "https://stackoverflow.com/questions/45711468/does-c-visual-studio-have-java-style-comments", "title": "Does C++ (Visual Studio) have Java style comments?", "body": "<p>When we use /** */ comment style in Java, it have those annotations @param,\n or @num1, which makes easier to read the comments, and removes the ambiguities who can appear. For example if you want to make a reference in your comment to <code>num1</code>, by writing <code>@num1</code> the color changes and you know that the comment refers at parameter <code>num1</code>, but if you say <code>num1</code>, the color of the parameter remains the same and it comes hard to read and may be confused with another variable with the same name. This was just an example.</p>\n\n<p>Java style:</p>\n\n<pre><code>/**\n * @param num1\n * @param num2\n*/\npublic void sum(int num1, int num2) {\n    ...\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1502880050, "post_id": 45711299, "comment_id": 78380607, "body": "<code>&amp;</code> is a <a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">bitwise AND operator</a>. The rest is array access."}, {"owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1502880254, "post_id": 45711299, "comment_id": 78380746, "body": "a[c[i][j]] [c[i][k]] is a single entity, like it has some specific value OR it has a set of values?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1502880308, "post_id": 45711299, "comment_id": 78380786, "body": "Yes, <code>a</code> is probably a two-dimensional array. You could also do <code>a[0][0]</code>"}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1502880352, "post_id": 45711299, "comment_id": 78380814, "body": "<code>rowIndex = c[i][j]; colIndex = c[i][k]; ok = ok &amp; a[rowIndex][colIndex];</code>"}, {"owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "edited": false, "score": 0, "creation_date": 1502880452, "post_id": 45711299, "comment_id": 78380883, "body": "Thanks that cleared it."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "edited": false, "score": 0, "creation_date": 1502880511, "post_id": 45711299, "comment_id": 78380924, "body": "@guest77312 without knowing the type of <code>a</code> one can only guess, but if <code>a</code> is two-dimensional array of <code>int</code>s, than <code>ok = ok &amp; a[row][col];</code> accumulates the least significant bits of <code>a</code> elements into <code>ok</code>"}, {"owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "edited": false, "score": 0, "creation_date": 1502881122, "post_id": 45711299, "comment_id": 78381401, "body": "a is vector of vectors of boolean type, vector&lt;vector&lt;bool&gt; &gt; a;"}], "owner": {"reputation": 1, "user_id": 8471985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dabfb350f8b16560008aa4eb11871c?s=128&d=identicon&r=PG&f=1", "display_name": "guest77312", "link": "https://stackoverflow.com/users/8471985/guest77312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502879977, "creation_date": 1502879841, "last_edit_date": 1502879977, "question_id": 45711299, "link": "https://stackoverflow.com/questions/45711299/using-operation-boolean", "title": "Using &amp; operation boolean", "body": "<p>I can't figure out this statement in a program...what does this statement mean in following code? How is the operation performed?</p>\n\n<pre><code>ok = ok &amp; a[c[i][j]] [c[i][k]];\n\n\n    bool ok = 1;\n    for(unsigned int i = 0; i &lt; 2; i++)\n        for(unsigned int j = 0; j &lt; c[i].size(); j++)\n            for(unsigned int k = j + 1; k &lt; c[i].size(); k++)\n                ok = ok &amp; a[c[i][j]] [c[i][k]];\n                //print yes if ok = 1\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "clang"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502879846, "post_id": 45711269, "comment_id": 78380462, "body": "You can&#39;t really mix object files created by different compilers. And a static library is nothing more than an archive of object files."}, {"owner": {"reputation": 474, "user_id": 3868435, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b991bfce5f73a9349b2f36412cd4108d?s=128&d=identicon&r=PG&f=1", "display_name": "peterSweter", "link": "https://stackoverflow.com/users/3868435/petersweter"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502880283, "post_id": 45711269, "comment_id": 78380769, "body": "At all ? I have error related with stack protector and setting -fno-stack-protector helped. Are there some tricks like that to fix that ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502880684, "post_id": 45711269, "comment_id": 78381044, "body": "Well, it <i>might</i> be possible if you link with the GCC runtime (e.g. <code>-lgcc</code> or similar). I would personally still try to avoid the mixing anyway."}], "owner": {"reputation": 474, "user_id": 3868435, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b991bfce5f73a9349b2f36412cd4108d?s=128&d=identicon&r=PG&f=1", "display_name": "peterSweter", "link": "https://stackoverflow.com/users/3868435/petersweter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 682, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502879749, "creation_date": 1502879749, "question_id": 45711269, "link": "https://stackoverflow.com/questions/45711269/clang-undefined-reference-to-fprintf-chk", "title": "clang undefined reference to `__fprintf_chk&#39;", "body": "<p>I am trying to link to my project some static libraries compiled with gcc-5.\nIn my project i use clang to build. I have following errors:</p>\n\n<pre><code>undefined reference to 'stderr'\nundefined reference to '__fprintf_chk'\nundefined reference to '__vfprintf_chk'\n</code></pre>\n"}, {"tags": ["c++", "configuration", "arduino", "esp8266"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502880141, "post_id": 45711251, "comment_id": 78380662, "body": "Have two radio-classes inheriting from a common abstract base class. One is the proper radio-handling class, the other is just a dummy with functions that does nothing. If radio is enabled use the real class, else use the dummy do-nothing class. <b><i>However</i></b> this might lead to other problems down the line. For example if a function is expected to return some data, then you have to add checks for non-empty data instead."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1502880244, "post_id": 45711251, "comment_id": 78380736, "body": "As for the example code you show, IMO it&#39;s okay. It&#39;s explicit, easy to read and understand, and therefore easy to maintain. Using a solution like in my comment above might seem nice, but sooner or later it&#39;s going to be turning into a maintenance nightmare."}, {"owner": {"reputation": 107, "user_id": 3614239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/eZNMt.jpg?s=128&g=1", "display_name": "ccostel", "link": "https://stackoverflow.com/users/3614239/ccostel"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502880381, "post_id": 45711251, "comment_id": 78380834, "body": "Thanks for the quick reply. The problem is that I have to check for the existence of the radio object in multiple places. This makes me think that it will become error prone very quickly."}, {"owner": {"reputation": 2251, "user_id": 6639082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44da46c9168a90de2479557760523d3d?s=128&d=identicon&r=PG&f=1", "display_name": "WindyFields", "link": "https://stackoverflow.com/users/6639082/windyfields"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502880805, "post_id": 45711251, "comment_id": 78381147, "body": "@Some programmer dude, I believe it is not about &quot;easy to read and understand&quot; but more about programming 80 MHz microcontroller where a last minute-decision making costs a lot. Or is it not an issue?"}, {"owner": {"reputation": 107, "user_id": 3614239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/eZNMt.jpg?s=128&g=1", "display_name": "ccostel", "link": "https://stackoverflow.com/users/3614239/ccostel"}, "reply_to_user": {"reputation": 2251, "user_id": 6639082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44da46c9168a90de2479557760523d3d?s=128&d=identicon&r=PG&f=1", "display_name": "WindyFields", "link": "https://stackoverflow.com/users/6639082/windyfields"}, "edited": false, "score": 0, "creation_date": 1502881037, "post_id": 45711251, "comment_id": 78381318, "body": "@WindyFields The eps8266 will crash if I try to access a pointer that is null :) but currently I want my app to be easily configurable at runtime."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2251, "user_id": 6639082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44da46c9168a90de2479557760523d3d?s=128&d=identicon&r=PG&f=1", "display_name": "WindyFields", "link": "https://stackoverflow.com/users/6639082/windyfields"}, "edited": false, "score": 0, "creation_date": 1502881038, "post_id": 45711251, "comment_id": 78381320, "body": "@WindyFields I didn&#39;t find such things to be a problem on a 7Mzh system with 0.5 MB of RAM back in the day."}, {"owner": {"reputation": 2251, "user_id": 6639082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44da46c9168a90de2479557760523d3d?s=128&d=identicon&r=PG&f=1", "display_name": "WindyFields", "link": "https://stackoverflow.com/users/6639082/windyfields"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502881085, "post_id": 45711251, "comment_id": 78381364, "body": "@Some programmer dude, ok, I believe you)"}], "owner": {"reputation": 107, "user_id": 3614239, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/eZNMt.jpg?s=128&g=1", "display_name": "ccostel", "link": "https://stackoverflow.com/users/3614239/ccostel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1502888436, "creation_date": 1502879703, "last_edit_date": 1502888436, "question_id": 45711251, "link": "https://stackoverflow.com/questions/45711251/how-to-implement-runtime-toggle-features-based-on-configuration", "title": "How to Implement Runtime Toggle Features based on configuration", "body": "<p>I am trying to implement what I think is called Feature Toggling with C++. </p>\n\n<p><strong>Context</strong></p>\n\n<p>This is for a Arduino/ESP8266 project developed with PlatformIO</p>\n\n<p><strong>Desired Scenario</strong></p>\n\n<p>User disables the Radio Communication in the configuration. The ESP8266 resets itself, reads the new config file and disables the Radio Communication Module. </p>\n\n<p><strong>Problem</strong></p>\n\n<p>It is easy not to instantiate the Radio class, but I don't want to have conditions deep in the app to check if the Radio class is instantiated. </p>\n\n<p><strong>Question</strong></p>\n\n<p>How to avoid feature toggle conditions deep in the application?</p>\n\n<p><strong>Code Example</strong></p>\n\n<pre><code>// FMV.cpp\nvoid FMV::setup() {\n    this-&gt;connectionManager = new ConnectionManager(configController);\n    this-&gt;connectionManager-&gt;setup();\n}\n\n// ConnectionManager.cpp\nvoid ConnectionManager::setup()\n{\n    if (config.enableRadio)\n    {\n        this-&gt;radio = new Radio();\n        this-&gt;radio-&gt;setup();\n        delay(100);\n    }\n}\n\n// FMV.cpp\nvoid FMV::loop()\n{\n    // code\n\n    // HOW TO AVOID THIS?\n    if (this-&gt;connectionManager-&gt;radio != nullptr)\n    {\n        this-&gt;connectionManager-&gt;readRadioMessages();\n    }\n\n    // code \n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pointers", "binary-search-tree"], "answers": [{"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": false, "score": 5, "last_activity_date": 1502879726, "creation_date": 1502879726, "answer_id": 45711257, "question_id": 45711163, "link": "https://stackoverflow.com/questions/45711163/bst-not-adding-elements/45711257#45711257", "title": "BST not adding elements", "body": "<p>You receive tempRoot by value, so changing it inside the function will not be reflected outside.And when you directly access the global <code>root</code>, you can indeed change its value inside the function.</p>\n\n<pre><code>void addElement(int key, nodePtr tempRoot){\n</code></pre>\n\n<p>You can use references here.</p>\n\n<pre><code>void addElement(int key, nodePtr &amp;tempRoot)\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 8177129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1354289754625520/picture?type=large", "display_name": "Shubham Anand", "link": "https://stackoverflow.com/users/8177129/shubham-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502971813, "creation_date": 1502879414, "last_edit_date": 1502971813, "question_id": 45711163, "link": "https://stackoverflow.com/questions/45711163/bst-not-adding-elements", "title": "BST not adding elements", "body": "<p>So I wrote this code to add elements to a Binary Tree.As shown in the following figure.</p>\n\n<pre><code>typedef struct node{\n    int key;\n    node *right;\n    node *left;\n}*nodePtr;\n\nnodePtr root = NULL // As global variable.\n\nvoid addElement(int key, nodePtr tempRoot){\n    if(tempRoot!=NULL){\n        if(tempRoot-&gt;key &gt; key){\n            if(tempRoot-&gt;left!=NULL)\n                addElement(key, tempRoot-&gt;left);\n            else\n                tempRoot-&gt;left = createLeaf(key);\n        }\n        else if(tempRoot-&gt;key &lt; key){\n            if(tempRoot-&gt;right!=NULL)\n                addElement(key, tempRoot-&gt;right);\n            else\n                tempRoot-&gt;right = createLeaf(key);\n        }\n    }else if(tempRoot==NULL)\n        tempRoot = createLeaf(key);\n}\n\nint main(){\n    int arr[] = {50,45,23,10,8,1,2,54,6,7,76,78,90,100,52,87,67,69,80,90};\n\n    for(int i=0; i&lt;20; i++){\n        addElement(arr[i], root);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The issue is this code doesnt add anything to the tree when I try to print the tree. However if I replace the last part of the code by this code instead;</p>\n\n<pre><code>    else if(root==NULL)\n        root = createLeaf(key);\n</code></pre>\n\n<p>Why is this happening ? </p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1502879957, "post_id": 45711144, "comment_id": 78380542, "body": "Why are you doing it multi-threaded?"}, {"owner": {"reputation": 585, "user_id": 3058478, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/868a02174f68e5912de35630a10b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/3058478/amir-rossert"}, "reply_to_user": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1502880071, "post_id": 45711144, "comment_id": 78380624, "body": "because I don&#39;t want to block the consuming from the queue while sending to the server"}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1502880447, "post_id": 45711144, "comment_id": 78380881, "body": "That is what I thought, see answer below."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1502880681, "post_id": 45711144, "comment_id": 78381041, "body": "questions 1 and 3 are unanswerable: see word \u201cthis\u201d in question 1. What is \u201cthis\u201d? Looks like you are trying to synchronise the two threads, is this correct. If so then it is not a good idea to use threads. Threads should be <b>mostly</b> independent, with little synchronisation. If they are spending a lot of time blocked/synchronising, then this is a sign that they should be a single thread."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1502884433, "post_id": 45711144, "comment_id": 78383554, "body": "Why do you use the library function from C instead of C++. What about <code>std::chrono::steady_clock::now()</code>?"}, {"owner": {"reputation": 585, "user_id": 3058478, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/868a02174f68e5912de35630a10b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/3058478/amir-rossert"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1502886345, "post_id": 45711144, "comment_id": 78384897, "body": "@knivil from a small benchmark that I did, <code>time(NULL)</code> was the fastest"}], "answers": [{"comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1502880669, "post_id": 45711479, "comment_id": 78381032, "body": "This is recommendation, and not the actual answer."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1502880867, "post_id": 45711479, "comment_id": 78381191, "body": "This is the answer to the underlying question, how do I get my program to do what I want. The question is an XY problem. I am trying to do Y, I think I should do that by doing X. I can&#39;t do X, so I ask how to do X. I answered how to do Y."}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1502881468, "post_id": 45711479, "comment_id": 78381651, "body": "Your thinking is based on assumptions. OP didn&#39;t provided enough information about architecture."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1502881827, "post_id": 45711479, "comment_id": 78381867, "body": "@AndrejsCainikovs that is true, I have assumed that they are using Unix (UNIX, BSD, MacOs, Gnu). They could be running some embedded system (though a lot of these allow event driven). Microsoft&#39;s Windows does not (as far as I know) allow this in C++ (but does allow it in C#). However Microsoft does not have a C++11 compiler."}], "tags": [], "owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "is_accepted": false, "score": 0, "last_activity_date": 1502880424, "creation_date": 1502880424, "answer_id": 45711479, "question_id": 45711144, "link": "https://stackoverflow.com/questions/45711144/multithreaded-one-read-one-write-time-t/45711479#45711479", "title": "multithreaded one read one write time_t", "body": "<p>Don't do it that way. You only need one thread. You can use select/poll/epoll. These can wait on your inputs, and at the same time for you output to finish. You will be doing event driven programming, and non-blocking output. It is something worth learning. It is a bit harder at first, but soon makes life easier i.e. not having the problem that you have now. Also the program will be faster.</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1502881074, "creation_date": 1502881074, "answer_id": 45711714, "question_id": 45711144, "link": "https://stackoverflow.com/questions/45711144/multithreaded-one-read-one-write-time-t/45711714#45711714", "title": "multithreaded one read one write time_t", "body": "<p>Supposing one thread executes:</p>\n\n<pre><code>last_data = time(NULL);\n</code></pre>\n\n<p>And the other uses <code>last_data</code> but there is no synchronization event between the two then there are no guarantees when or if the revised value of <code>last_data</code> will become visible to the reading thread.</p>\n\n<p>However the most serious possibility is that write of <code>time_t</code> (maybe <code>long</code>) isn't atomic and another thread could read a corrupt 'part written' value.\nThat could cause glitches in delay and time calculations that might foul downstream process.</p>\n\n<p>You might analyse your program and find that because the two interact there is a sufficient memory fence at some point that guarantees eventual update. </p>\n\n<p>NB: This is an odd situation where I'm suspecting you think something isn't synchronized but it is! The usual experience is the other way around...</p>\n\n<p>Basically there's not really enough information to understand what problem you're having.\nFor example, if the reader thread is the only process to read the time I'd expect to see code like:</p>\n\n<p>Thread 1:\n  If data received, lock L, update time, add to queue, unlock L.\nThread 2:\n  If items in queue L, read queue and update time, unlock L .. process item.</p>\n\n<p>In which case the time will be synchronized already.</p>\n\n<p>Please provide a minimum, complete, verifiable example... </p>\n"}], "owner": {"reputation": 585, "user_id": 3058478, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/868a02174f68e5912de35630a10b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/3058478/amir-rossert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502885554, "creation_date": 1502879354, "last_edit_date": 1502885554, "question_id": 45711144, "link": "https://stackoverflow.com/questions/45711144/multithreaded-one-read-one-write-time-t", "title": "multithreaded one read one write time_t", "body": "<p>I'm writing a multithreaded application that have 2 threads.\nOne of the threads receives data from a queue and aggregates it and the other one send the aggregated data to a server.</p>\n\n<p>I want to be able to know the last time that a data was received so I use:</p>\n\n<pre><code>time_t last_data = time(NULL)\n</code></pre>\n\n<p>to get the correct time on each event (I dont need it to be super accurate but I need it to be fast) and then the other send this value with the aggregated data.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Do I have to synchronize this even if this is not very important that I get the most recent update?</li>\n<li>I tested it with <code>std::atomic&lt;time_t&gt;</code> and it seems to have some performance issues, is there any other faster way?</li>\n<li>What would be the worst case that can happen if I will not synchronize the read/write?</li>\n<li>Is there a faster way to get the current time then <code>time(NULL)</code> (don't have to be super accurate)?</li>\n</ol>\n\n<hr>\n\n<p><em>UPDATE</em></p>\n\n<p>Here is an explanation of my application workflow.</p>\n\n<p>Application needs:\n 1. Consume data from external sources using IPC (currently <a href=\"http://nanomsg.org/\" rel=\"nofollow noreferrer\">nanomsg</a>).\n 2. Aggregate the data to bulks.\n 3. Send the aggregated data to remote server every given interval (1 second).</p>\n\n<p>Current implementation:</p>\n\n<ol>\n<li>Create 2 buffers to hold the aggregated data (one for receiving and one for sending).</li>\n<li>Create a consumer thread to consume data from IPC and fill the receiving buffer.</li>\n<li>Create a sending thread that will send the data to the server.</li>\n<li>Every iteration of the interval the sending thread will swap the buffers (swap pointers and locking using mutex) and send the data to the server.</li>\n</ol>\n\n<p>I don't want that the consumer will wait on network IO so I have created this flow.\nCan I use event driven here instead of this complex mechanism without all the locking (currently it is working fine but i'm sure it can be better)?</p>\n"}, {"tags": ["c++", "arrays", "elements"], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 8467683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8425f4a1382bdce750879cbce4c80269?s=128&d=identicon&r=PG&f=1", "display_name": "MrPako", "link": "https://stackoverflow.com/users/8467683/mrpako"}, "is_accepted": true, "score": 0, "last_activity_date": 1502880099, "creation_date": 1502880099, "answer_id": 45711365, "question_id": 45711143, "link": "https://stackoverflow.com/questions/45711143/c-pushing-array-elements-to-the-right/45711365#45711365", "title": "c++ pushing array elements to the right", "body": "<p>You can always read your array backwards for output if you want to show it that way.</p>\n\n<pre><code>for (int e = p_elements-1; e &gt;= 0; --e) {\n    cout &lt;&lt; array[e]&lt;&lt;\" \";\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4620230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e07f588c9b3f845b6842bc3426b02db5?s=128&d=identicon&r=PG&f=1", "display_name": "Arjay", "link": "https://stackoverflow.com/users/4620230/arjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "accepted_answer_id": 45711365, "answer_count": 1, "score": 1, "last_activity_date": 1502880099, "creation_date": 1502879353, "question_id": 45711143, "link": "https://stackoverflow.com/questions/45711143/c-pushing-array-elements-to-the-right", "title": "c++ pushing array elements to the right", "body": "<p>I am newbie into programming and have this c++ school quizzes.</p>\n\n<p>I wanted to push entered arrays elements to the right.</p>\n\n<p>here is my existing code</p>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<pre><code>    // automatac++.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;iterator&gt;\n#include &lt;conio.h&gt;\n#include &lt;cstring&gt;\n\n//using namespace std;\nusing std::cout;\nusing std::cin;\nusing std::endl;\nvoid menu_sel();\nvoid push_element();\n//void rem_element();\n\nint in;\nchar array[100];\n\nint p_elements;\n\nint main()\n{\n\n    menu_sel();\n\n    return 0;\n}\n\nvoid push_element() {\n    int p_elements;\n\n    for (int e = 0; e &lt; 10; e++) {\n\n\n    }\n\n    cout &lt;&lt; \"Enter number of elements:\";\n    cin &gt;&gt; p_elements;\n    cout &lt;&lt; \"Enter only  \" &lt;&lt; p_elements &lt;&lt; \" elements\"&lt;&lt;endl;\n\n    for (int e = 0; e &lt; p_elements; e++  ) {\n        cin &gt;&gt; array[e];\n    }\n    cout &lt;&lt; \"Pushed elements are :\";\n    for (int e = 0; e &lt; p_elements; ++e) {\n        cout &lt;&lt; array[e]&lt;&lt;\" \";\n\n    }\n\n    //getch();\n    menu_sel();\n\n}\n/*\nvoid rem_element() {\n    char remove;\n    int arr_position;\n\n    cout &lt;&lt; \"You have selected Pop.\\nRemove elements from arrays \\n\";\n    cout &lt;&lt; \"Enter data to remove\";\n    cin &gt;&gt;remove;\n\n    for (int ie -) {\n\n    }\n\n\n    system(\"pause\");\n\n\n\n}\n*/\n\n\nvoid menu_sel() {\n\n\n    int input;\n    cout &lt;&lt; \"\\n****Menu Selection Here****\";\n    cout &lt;&lt; \"\\n1. Push \\n2. Pop \\n3. Exit \\n\";\n    cout &lt;&lt; \"select options here :\";\n    cin &gt;&gt; input;\n\n    switch (input) {\n    case 1:\n        cout &lt;&lt; \"You have selected Push Stack\\n\";\n        push_element();\n        break;\n\n    case 2:\n        //cout &lt;&lt; \"You have selected Pop Stack\\n\";\n        //rem_element();\n        break;\n\n    default:\n        cout &lt;&lt; \"You have selected Invalid Options\";    \n        break;\n        system(\"cls\");\n        return;\n\n    }\n}\n</code></pre>\n\n<p>and here is the output</p>\n\n<p><a href=\"https://i.stack.imgur.com/Em6lh.jpg\" rel=\"nofollow noreferrer\">the output shows pushing elements to the left</a></p>\n\n<p>the output was 3 e r 4</p>\n\n<p>I wanted to shows output like this \"4 r e 3\"</p>\n\n<p>thanks and regards,</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1502879378, "post_id": 45711059, "comment_id": 78380135, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\">Reverse</a> the array first?"}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1502879481, "post_id": 45711059, "comment_id": 78380222, "body": "Array is a constant. I&#39;ll modify the question to reflect that."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1502879506, "post_id": 45711059, "comment_id": 78380248, "body": "Also, technically it&#39;s not going to be possible without any loops. There has to be a loop <i>somewhere</i> even if you do not have it yourself (for example in the <code>insert</code> function you call)."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1502879609, "post_id": 45711059, "comment_id": 78380325, "body": "Agreed. If you use an algorithm, it will most likely have a loop under the covers. The main (only) differences will be that it may look neater and will <i>probably</i> be more efficient than you can do yourself. The complexity will be the same though."}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "edited": false, "score": 0, "creation_date": 1502879671, "post_id": 45711059, "comment_id": 78380361, "body": "I know there&#39;s got to be a for loop <i>somewhere</i>. The point Scott Parent was making is to use the standard library to do many of the things for which we write for-loops."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1502912532, "post_id": 45711059, "comment_id": 78401595, "body": "There never <i>has</i> to be a loop. Any loop is implementable as a recursive function instead. Of course this is not terribly important, because who cares which one it is. But I think it&#39;s fair to be nitpicky in response to a point that starts with &quot;technically&quot;."}, {"owner": {"reputation": 3908, "user_id": 124797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Nm3vK.jpg?s=128&g=1", "display_name": "Jagannath", "link": "https://stackoverflow.com/users/124797/jagannath"}, "edited": false, "score": 0, "creation_date": 1502933771, "post_id": 45711059, "comment_id": 78408247, "body": "Waiting for some abuses from the community... :-) If you are stuck in C++98/03 then don&#39;t even bother to write such code. Don&#39;t even bother to learn/read C++. Just move to other programming languages. If you are getting upgraded to c++11 at least, then it&#39;s a different matter."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1502879502, "post_id": 45711125, "comment_id": 78380242, "body": "<code>make_reverse_iterator(end(x)), make_reverse_iterator(begin(x))</code>"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1502879553, "post_id": 45711125, "comment_id": 78380276, "body": "@Yakk <code>make_reverse_iterator</code> is also C++14, so doesn&#39;t help."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1502882590, "post_id": 45711125, "comment_id": 78382345, "body": "And <code>std::begin</code> is not C++03 either."}, {"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 4, "creation_date": 1502889022, "post_id": 45711125, "comment_id": 78387068, "body": "It&#39;s important to note that using single range insert is generally more efficient than <code>std::back_inserter</code> in selected answer."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502965271, "post_id": 45711125, "comment_id": 78422546, "body": "@T.C. So what&#39;s wrong with that? Perfectly valid to have <code>NUL</code>s in a <code>std::string</code>, and I just wanted a simple example that allowed me to easily create an array and print the result."}], "tags": [], "owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "is_accepted": false, "score": 17, "last_activity_date": 1503037648, "last_edit_date": 1503037648, "creation_date": 1502879300, "answer_id": 45711125, "question_id": 45711059, "link": "https://stackoverflow.com/questions/45711059/appending-a-c-array-to-a-vector-in-reverse-order-in-c98-03-without-a-for-loop/45711125#45711125", "title": "Appending a C-array to a vector in reverse order in C++98/03 without a for-loop", "body": "<pre><code>vec.insert(std::end(vec),\n           std::rbegin(array),\n           std::rend(array));\n</code></pre>\n\n<p>Note that this uses C++14, but reverse iterators have been around much longer, you would just need to create them manually if stuck with an older standard:</p>\n\n<pre><code>int const a1[] = {1, 2, 3, 4, 5};\nint a2[5];\nstd::copy(std::reverse_iterator&lt;int const*&gt;(std::end(a1)),\n          std::reverse_iterator&lt;int const*&gt;(std::begin(a1)),\n          std::begin(a2)); // copy in reverse\n\nstd::copy(std::begin(a2),\n          std::end(a2),\n          std::ostream_iterator&lt;int&gt;(std::cout, \" \")); // prints \"5 4 3 2 1 \"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 1, "creation_date": 1502890263, "post_id": 45711176, "comment_id": 78388001, "body": "Note that the other answer with <code>vector::insert</code> may lead to better code, since the container can judge the capacity that will be required by the full insertion more easily"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 3, "creation_date": 1502890392, "post_id": 45711176, "comment_id": 78388084, "body": "@KABoissonneault How about calling <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>vec.reserve()</code></a> before copying?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1502890478, "post_id": 45711176, "comment_id": 78388146, "body": "Then you&#39;d be making your answer less straightforward than the other one :P. But at the same time, with <code>vector::reserve</code> at least you&#39;d be <i>guaranteed</i> by the standard that there won&#39;t be pointless reallocations, while it&#39;s only <i>assumed</i> to be done on <code>vector::insert</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502960658, "post_id": 45711176, "comment_id": 78419157, "body": "<code>reserve</code> should only be used with great caution and should not be blindly recommended. If I make this into a function <code>f</code> and call it multiple times on the same vector, <code>reserve</code>ing inside <code>f</code> before each <code>reverse_copy</code> would be a significant pessimization by disabling the exponential growth."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502961280, "post_id": 45711176, "comment_id": 78419609, "body": "@T.C. I don&#39;t disagree with you. The only reason I put the reserve thing is because people were nagging about it. Now after I put it, you tell me about a special case for which it&#39;s a bad idea. Sorry to you all, but this is C++, not python or ruby. One has to know what they&#39;re doing. So unless I have to extend my answer to 3 paragraphs explaining when to or not to use reserve, let&#39;s just assume that the user is going to read the documentation in the link I provided to understand the purpose. And btw, because I agree with you I didn&#39;t put it in the code, but in a statement after the code ;)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502961773, "post_id": 45711176, "comment_id": 78419969, "body": "I see <code>reserve</code> as the special case (for when you know the final size of the vector and it will not grow beyond that), and in the general case you should simply let the usual exponential growth algorithm do its job (or use ranged insert). It&#39;s certainly not something to be recommended whenever &quot;you&#39;re concerned about performance&quot; - who using C++ doesn&#39;t?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502962047, "post_id": 45711176, "comment_id": 78420171, "body": "@T.C. For me, I sure know all these details. I can&#39;t, however, imagine how a beginner might think. Please suggest an edit that&#39;s a compromise between your advice and others&#39; performance concern."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1502962635, "post_id": 45711176, "comment_id": 78420612, "body": "The simple and correct resolution of the performance concern of &quot;others&quot; (I see only one person) is &quot;use range insert with reverse iterators&quot;. Constrained to use <code>reverse_copy</code>, the answer is &quot;that&#39;s the price you pay, but in some special cases it can be alleviated with appropriate uses of <code>reserve</code>&quot;. If targeting beginners, I would even end it before the &quot;but&quot; and not mention <code>reserve</code> at all."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502963540, "post_id": 45711176, "comment_id": 78421282, "body": "@T.C. No, it&#39;s not one person. Check the other answer&#39;s comments. Now I&#39;m starting to disagree with you. There&#39;s absolutely no difference between reserve + push_back vs insert, everyone should know that. You mentioning &quot;insert&quot; is absolutely pointless. Are you worried of shooting yourself in the foot? Then please don&#39;t use C++. At first you were concerned of beginners (?) misusing reserve, and now suddenly &quot;the solution&quot; is to use insert. This is a bit irritating. I&#39;m sorry but I&#39;m losing interest in this discussion. This has now become opinion based. Have a nice day!"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1502964076, "post_id": 45711176, "comment_id": 78421681, "body": "There is a mountain of difference between <code>reserve+push_back</code> and ranged-<code>insert</code>, and that is <code>insert</code> correctly grows the capacity exponentially."}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": true, "score": 22, "last_activity_date": 1502898932, "last_edit_date": 1502898932, "creation_date": 1502879445, "answer_id": 45711176, "question_id": 45711059, "link": "https://stackoverflow.com/questions/45711059/appending-a-c-array-to-a-vector-in-reverse-order-in-c98-03-without-a-for-loop/45711176#45711176", "title": "Appending a C-array to a vector in reverse order in C++98/03 without a for-loop", "body": "<p>There you go. Use <a href=\"http://www.cplusplus.com/reference/algorithm/reverse_copy/\" rel=\"nofollow noreferrer\"><code>std::reverse_copy</code></a> with <code>std::back_inserter</code> to add elements to the vector:</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\nint array[5] = { 1 , 2 , 3 , 4 , 5};\n\nstd::reverse_copy(array , array + 5, std::back_inserter(vec));\n</code></pre>\n\n<p>If you're concerned about performance, don't forget to <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>reserve()</code></a> before copying.</p>\n"}], "owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2141, "favorite_count": 2, "accepted_answer_id": 45711176, "answer_count": 2, "score": 19, "last_activity_date": 1503037648, "creation_date": 1502879160, "last_edit_date": 1502894990, "question_id": 45711059, "link": "https://stackoverflow.com/questions/45711059/appending-a-c-array-to-a-vector-in-reverse-order-in-c98-03-without-a-for-loop", "title": "Appending a C-array to a vector in reverse order in C++98/03 without a for-loop", "body": "<p>Its pretty straightforward to append a C-array to a vector (in C++ 98/03) like so:</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\nconst int array[5] = { 1 , 2 , 3 , 4 , 5};\n\nvec.insert( vec.end() , array , array + 5 );\n</code></pre>\n\n<p>Is there a way to append the array to a vector <em>in reverse order</em> in C++98/03 without writing a for-loop. (Here's looking at you Sean Parent.)</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1502878836, "post_id": 45710901, "comment_id": 78379786, "body": "Most likely that library has a #define somewhere to switch linking to static. This is common. Boost log has the same thing."}], "answers": [{"tags": [], "owner": {"reputation": 2126, "user_id": 1120405, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/41d7d1f44226c1bbf26ef0f235a8d7a2?s=128&d=identicon&r=PG", "display_name": "poordeveloper", "link": "https://stackoverflow.com/users/1120405/poordeveloper"}, "is_accepted": false, "score": 0, "last_activity_date": 1502941297, "creation_date": 1502941297, "answer_id": 45726232, "question_id": 45710901, "link": "https://stackoverflow.com/questions/45710901/visual-studio-c-link-with-different-symbol-pbdz-vs-pebdz/45726232#45726232", "title": "Visual Studio C++ link with different symbol \u201c@PBD@Z\u201d vs \u201c@PEBD@Z\u201d", "body": "<p>I got the reason. PEBD is x64 const char* symbol, PBD is win32 const char* symbol, my problem is I am linking x64 to win32 lib.</p>\n"}], "owner": {"reputation": 2126, "user_id": 1120405, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/41d7d1f44226c1bbf26ef0f235a8d7a2?s=128&d=identicon&r=PG", "display_name": "poordeveloper", "link": "https://stackoverflow.com/users/1120405/poordeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502941297, "creation_date": 1502878698, "question_id": 45710901, "link": "https://stackoverflow.com/questions/45710901/visual-studio-c-link-with-different-symbol-pbdz-vs-pebdz", "title": "Visual Studio C++ link with different symbol \u201c@PBD@Z\u201d vs \u201c@PEBD@Z\u201d", "body": "<p>I am link a third-party library. When I link it to an exe, it is ok, the symbol name ends with \"@PBD@Z\u201d. But If I link it in my static library, then link my static library to an exe, I got unresolved symbol which ends with \u201c@PEBD@Z\u201d. I grep the library, there is \"@PBD@Z\u201d symbol. I can not figure out how to solve this problem.</p>\n"}]