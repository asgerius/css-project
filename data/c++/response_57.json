[{"tags": ["c++", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455148792, "post_id": 35328364, "comment_id": 58365197, "body": "Good candidate for stepping through both versions with your IDE&#39;s debugger to see what the difference is."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455148895, "post_id": 35328364, "comment_id": 58365236, "body": "What does <code>void f(int x) {x = 5;}</code> <code>int main() {int i = 7; f(i); printf(&quot;%d\\n&quot;, i);}</code> print, and why?"}, {"owner": {"reputation": 46031, "user_id": 906773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100001846242483/picture?type=large", "display_name": "Jesse Good", "link": "https://stackoverflow.com/users/906773/jesse-good"}, "edited": false, "score": 0, "creation_date": 1455149034, "post_id": 35328364, "comment_id": 58365275, "body": "To elaborate <code>initWindow(SDL_Window *window, SDL_Surface *screen_surface)</code> you are passing <b>copies</b> of the pointers in this declaration."}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455149090, "post_id": 35328364, "comment_id": 58365298, "body": "@immibis <code>7</code>, because call-by-value, but this is call-by-reference, isn&#39;t it?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455149230, "post_id": 35328364, "comment_id": 58365344, "body": "@henrikgiesel No? C has no such thing as call-by-reference."}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455149364, "post_id": 35328364, "comment_id": 58365378, "body": "@immibis Then what&#39;s <code>void f(int *x);</code> compared to <code>void f2(int x);</code>?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455149497, "post_id": 35328364, "comment_id": 58365421, "body": "@henrikgiesel In the first <code>x</code> is an <code>int*</code>, and in the second it&#39;s an <code>int</code>?"}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "reply_to_user": {"reputation": 46031, "user_id": 906773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100001846242483/picture?type=large", "display_name": "Jesse Good", "link": "https://stackoverflow.com/users/906773/jesse-good"}, "edited": false, "score": 0, "creation_date": 1455149950, "post_id": 35328364, "comment_id": 58365571, "body": "@JesseGood I&#39;m passing copies, but they still point to the same spot in memory"}, {"owner": {"reputation": 46031, "user_id": 906773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100001846242483/picture?type=large", "display_name": "Jesse Good", "link": "https://stackoverflow.com/users/906773/jesse-good"}, "edited": false, "score": 2, "creation_date": 1455153285, "post_id": 35328364, "comment_id": 58366606, "body": "@henrikgiesel: Yes, they point to the same spot in memory before you call the <code>initWindow</code> function. However, inside the <code>initWindow</code> you <i>change</i> what the <i>copied</i> pointer points to. The problem is this does not affect the pointer declared in <code>main</code>, you are <b>only modifying the <i>copied</i> pointer</b> inside <code>initWindow</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13709, "user_id": 63791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/7XiDt.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/63791/alex"}, "edited": false, "score": 1, "creation_date": 1455152697, "post_id": 35328945, "comment_id": 58366441, "body": "The one thing I would do slightly differently is that instead of using <code>SDL_Window *&amp;window</code> as the argument, I would use <code>SDL_Window **window</code>. That forces you to use <code>&amp;window</code> at the call site, making it clear at a glance that the value could change. (but this is just a style issue, others might not agree.)"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "reply_to_user": {"reputation": 13709, "user_id": 63791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/7XiDt.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/63791/alex"}, "edited": false, "score": 0, "creation_date": 1455152735, "post_id": 35328945, "comment_id": 58366452, "body": "@Alex : sure. I thought having a <code>SDL_Window**</code> would be too C-ish. ;)"}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1455165299, "post_id": 35328945, "comment_id": 58369782, "body": "It works, but I wonder, why is the behavior like this? I know that <code>SDL_Window</code> is some kind of <code>struct</code> (SDL2 is actually a C library). When I declare a <code>struct</code> myself, make a pointer to that struct and pass that to a function just like I did, here, it works just as expected."}], "tags": [], "owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "is_accepted": true, "score": 3, "last_activity_date": 1455152803, "last_edit_date": 1455152803, "creation_date": 1455152125, "answer_id": 35328945, "question_id": 35328364, "link": "https://stackoverflow.com/questions/35328364/cant-use-sdl2-variables-in-block-scope/35328945#35328945", "title": "Can&#39;t use SDL2 variables in Block scope", "body": "<p>Disclaimer : I have never done any SDL programming, so this is just an answer based on common sense and what I could read from the comments.</p>\n\n<p>Say your <code>initWindow</code> function sets some value to the <code>window</code> variable. When that variable is declared in a global scope, modifications to it are also seen by all the other functions that use this variable.</p>\n\n<p>This changes drastically when you change that variable to be a function parameter. Basing on the code you provided :</p>\n\n<pre><code>auto initWindow(SDL_Window *window, SDL_Surface *screen_surface)\n{\n    window = SDL_GetWindow(); /* or something */\n}\n\nint main(void)\n{\n    SDL_Window  *window;\n    SDL_Surface *screen_surface;\n    initWindow(window, screen_surface);\n    /* some other code that uses 'window' */\n}\n</code></pre>\n\n<p><strong>Only</strong> the <code>window</code> in <code>initWindow</code> is actually set to the value of <code>SDL_GetWindow</code>. The <code>window</code> variable inside <code>main</code> is not changed : all the other functions that need to use it in <code>main</code> will be accessing an uninitialized variable, which is undefined behaviour. You also have a resource leak, since you're now never able to free what you got from <code>SDL_GetWindow</code>. <code>initWindow</code> actually receives a <strong>copy</strong> of <code>window</code>, a one that's totally unrelated to the <code>window</code> in <code>main</code>.</p>\n\n<p>Seeing how you're using C++, the best way around this is to have <code>initWindow</code> accept a reference to the <code>window</code> variable, like this :</p>\n\n<pre><code>auto initWindow(SDL_Window *&amp;window, SDL_Surface *&amp;screen_surface)\n{\n    window = SDL_GetWindow(); /* or something */\n}\n\nint main(void)\n{\n    SDL_Window  *window;\n    SDL_Surface *screen_surface;\n    initWindow(window, screen_surface);\n    /* some other code that uses 'window' */\n}\n</code></pre>\n\n<p>Now, the <code>window</code> variable inside <code>main</code> will be updated with what <code>initWindow</code> does with it, and later code that uses <code>window</code> in <code>main</code> will access the resource that was acquired via <code>SDL_GetWindow</code>.</p>\n\n<p>However, C++ allows you to manage resources in a more efficient way via the usage of constructors and destructors, a concept known as RAII (Resource Acquisition Is Initialization). Look for C++ wrappers around the SDL objects which will make your life much easier, and if you don't, spend a while to write your own, or make them work with <code>std::unique_ptr</code> (or <code>std::shared_ptr</code> if you know that you need it). You'll thank yourself for it later on.</p>\n"}], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 35328945, "answer_count": 1, "score": 0, "last_activity_date": 1455152803, "creation_date": 1455148655, "question_id": 35328364, "link": "https://stackoverflow.com/questions/35328364/cant-use-sdl2-variables-in-block-scope", "title": "Can&#39;t use SDL2 variables in Block scope", "body": "<p>I'm programming with SDL2, but I cannot grasp the reason behind the following. This works:</p>\n\n<pre><code>SDL_Window  *window;\nSDL_Surface *screen_surface;\nSDL_Surface *picture;\n\nauto initWindow(void)\n{\u2026}\nauto loadMedia(void)\n{\u2026}\nauto close(void)\n{\u2026}\n\nint main(void)\n{\n    initWindow();\n    loadMedia();\n    \u2026\n    close();\n}\n</code></pre>\n\n<p>However this does not:</p>\n\n<pre><code>auto initWindow(SDL_Window *window, SDL_Surface *screen_surface)\n{\u2026}\nauto loadMedia(SDL_Surface *picture, std::string resource)\n{\u2026}\nauto close(SDL_Window *window, SDL_Surface *picture)\n{\u2026}\n\nint main(void)\n{\n    SDL_Window  *window;\n    SDL_Surface *screen_surface;\n    SDL_Surface *picture;\n    initWindow(window, screen_surface);\n    loadMedia(picture, \"resource_file.bmp\");\n    \u2026\n    close(window, picture);\n}\n</code></pre>\n\n<p>The only difference is that I take <code>window</code>, <code>screen_surface</code> and <code>picture</code> out of <em>file scope</em> and put it into <em>block scope</em> (i.e. the main function), and instead of referencing global variables inside these functions, I use parameters.\nHowever when I try to run this, it displays a white screen, but doesn't display any errors. I don't understand what goes wrong here. </p>\n"}, {"tags": ["c++", "iostream", "ostream"], "comments": [{"owner": {"reputation": 15, "user_id": 5911114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T5FtYgYJrD8/AAAAAAAAAAI/AAAAAAAAKEw/PUFoSKuapoI/photo.jpg?sz=128", "display_name": "Bryan Gurney", "link": "https://stackoverflow.com/users/5911114/bryan-gurney"}, "edited": false, "score": 0, "creation_date": 1455149564, "post_id": 35328329, "comment_id": 58365441, "body": "Or would my best approach be to just to have class functions <code>ostream&amp; Employee::toXML()</code> <code>ostream&amp; Employee::toJSON()</code>  I like the stream manipulator part, because it looks a bit better to me, and also, the challenge seems cool."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5911114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T5FtYgYJrD8/AAAAAAAAAAI/AAAAAAAAKEw/PUFoSKuapoI/photo.jpg?sz=128", "display_name": "Bryan Gurney", "link": "https://stackoverflow.com/users/5911114/bryan-gurney"}, "edited": false, "score": 0, "creation_date": 1455150846, "post_id": 35328664, "comment_id": 58365873, "body": "I had thought of that, and it is a viable solution, to overload operator&lt;&lt; with a flag. It&#39;s not outputting to the same stream, rather, outputting to two different streams, the XML to file, and the JSON to the console, which is why i thought the stream manipulators would be the best solution.  However, it seems like the best solution would be just to return an ostream&amp; of the class data as a member function."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1455151276, "post_id": 35328664, "comment_id": 58365983, "body": "I didn&#39;t even knew about the possibility with the locale, thank you for pointing that out :)"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1455150398, "creation_date": 1455150398, "answer_id": 35328664, "question_id": 35328329, "link": "https://stackoverflow.com/questions/35328329/stream-manipulation-for-outputting-object-data-in-different-formats/35328664#35328664", "title": "Stream Manipulation for outputting object data in different formats", "body": "<p>First of all, unless you <em>really</em> need to implement this as a separate manipulator, consider other routes. Two obvious possibilities would be a custom locale, or just a function that does the formatting and returns the result as a string. The former would look something like:</p>\n\n<pre><code>std::locale myLoc(std::locale(), XML_formatter);\ncout.imbue(myLoc);\n\ncout &lt;&lt; employee;\n</code></pre>\n\n<p>This makes the formatting style persistent for the stream in general. If you really need to mix different styles in the same stream, the function version is a lot simpler:</p>\n\n<pre><code>std::string toXML(Employee const &amp;e) { \n    std::stringstream ret;\n\n    ret &lt;&lt; \"Employee&gt;\\n&lt;id&gt;\" &lt;&lt; id &lt;&lt; \"&lt;/id&gt;\"\n        &lt;&lt; // ...\n    return ret.str();\n}\n\n// ...\ncout &lt;&lt; toXML(employees[i]);\n</code></pre>\n\n<p>If you truly have no choice but to implement this as a separate manipulator, you'll need to store a flag to indicate the current format in the stream. Streams provide a memory management interface in the form of <code>xalloc</code>, <code>iword</code> and <code>pword</code>. Basically, <code>xalloc</code> allocates one word for you. <code>iword</code> gives  you access to that word as a reference to a long, and <code>pword</code> gives you access to it as a reference to pointer to void. In your case, you apparently only need one or two bits, so you probably want to use <code>iword</code> and define a couple of bits to specify the formatting for the type. Your <code>toXML</code> and <code>toJSON</code> manipulators will set the appropriate bits, and your <code>operator&lt;&lt;</code> will read them to control its behavior. It's clumsy and ugly, but it does work if you're willing to put a little effort into it.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5911114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T5FtYgYJrD8/AAAAAAAAAAI/AAAAAAAAKEw/PUFoSKuapoI/photo.jpg?sz=128", "display_name": "Bryan Gurney", "link": "https://stackoverflow.com/users/5911114/bryan-gurney"}, "edited": false, "score": 0, "creation_date": 1455151605, "post_id": 35328776, "comment_id": 58366094, "body": "That is a beautiful solution. Too bad stream manipulators were not conceived with this process in mind. You happened to answer a question i didn&#39;t ask as well, which was: How to associate a flag in a stream chain and associate it in the overloaded <code>operator&lt;&lt;</code>, so thanks for that."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1455151058, "creation_date": 1455151058, "answer_id": 35328776, "question_id": 35328329, "link": "https://stackoverflow.com/questions/35328329/stream-manipulation-for-outputting-object-data-in-different-formats/35328776#35328776", "title": "Stream Manipulation for outputting object data in different formats", "body": "<blockquote>\n  <p>How would I be able to do so with stream manipulators?</p>\n</blockquote>\n\n<p>I'll show you how, but keep in mind that this is not the way to go here. Dedicated (member) functions or some fancy OOP pattern is a better approach.</p>\n\n<p>That said you can attach arbitrary data to stream objects. For that, you first need an \"id\" for that data. You get that using <code>std::ios_base::xalloc</code>:</p>\n\n<pre><code>static int formatId = ios_base::xalloc();\n</code></pre>\n\n<p>With the number returned you can get (write) access to a <code>long</code> via the reference returned by <code>std::ios_base::iword</code>. (There's also <code>std::ios_base::pword</code> to get a <code>void *</code>.)</p>\n\n<p>Then, a stream manipulator is just something that's callable with a stream (reference), returning another stream reference:</p>\n\n<pre><code>ostream &amp; toFoo(ostream &amp; stream) {\n  stream.iword(formatId) = 1;\n  return stream;\n}\nostream &amp; toBar(ostream &amp; stream) {\n  stream.iword(formatId) = 2;\n  return stream;\n}\n</code></pre>\n\n<p>(<em>Attention: Evil magic numbers, replace with better design!</em>)</p>\n\n<p>Here I just set up a \"flag\" so that finally, in the output function (operator), I can check which manipulator (if any) was used last:</p>\n\n<pre><code>struct FooBar {};\n\nostream &amp; operator&lt;&lt;(ostream &amp; stream, FooBar const &amp;) {\n  switch (stream.iword(formatId)) {\n    case 1: stream &lt;&lt; \"foo\"; break;\n    case 2: stream &lt;&lt; \"bar\"; break;\n    default: stream &lt;&lt; \"wild foobar\";\n  }\n  return stream;\n}\n</code></pre>\n\n<p>Well, that's it. I tested with:</p>\n\n<pre><code>int main() {\n  FooBar f;\n  cout &lt;&lt; f &lt;&lt; toFoo &lt;&lt; \" \" &lt;&lt; f &lt;&lt; endl;\n  cout &lt;&lt; f &lt;&lt; toBar &lt;&lt; \" \" &lt;&lt; f &lt;&lt; endl;\n  cout &lt;&lt; f &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/BEynhV\" rel=\"nofollow\">(Live here)</a></p>\n"}], "owner": {"reputation": 15, "user_id": 5911114, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T5FtYgYJrD8/AAAAAAAAAAI/AAAAAAAAKEw/PUFoSKuapoI/photo.jpg?sz=128", "display_name": "Bryan Gurney", "link": "https://stackoverflow.com/users/5911114/bryan-gurney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 35328664, "answer_count": 2, "score": 1, "last_activity_date": 1455151058, "creation_date": 1455148461, "question_id": 35328329, "link": "https://stackoverflow.com/questions/35328329/stream-manipulation-for-outputting-object-data-in-different-formats", "title": "Stream Manipulation for outputting object data in different formats", "body": "<p>Say I have an employee object with the following data members:</p>\n\n<pre><code>class Employee {\n\nprivate:\n    int _id;\n    std::string _name;\n    std::string _address;\n    std::string _city;\n    std::string _state;\n    std::string _country;\n    std::string _phone;\n    double _salary;\n...\n}\n</code></pre>\n\n<p>I would like to output it two different ways:</p>\n\n<p>XML</p>\n\n<pre><code>&lt;Employee&gt;\n     &lt;id&gt;12345&lt;/id&gt;\n     &lt;name&gt;Jack Dough&lt;/name&gt;\n     &lt;address&gt;24437 Princeton&lt;/address&gt;\n     &lt;city&gt;Dearborn&lt;/city&gt;\n     &lt;state&gt;Michigan&lt;/state&gt;\n     &lt;country&gt;USA&lt;/country&gt;\n     &lt;phone&gt;303-427-0153&lt;/phone&gt;\n     &lt;salary&gt;140000&lt;/salary&gt;\n&lt;/Employee&gt;\n</code></pre>\n\n<p>and JSON-like:</p>\n\n<pre><code>id: 12345\nname: Jack Dough\naddress: 24437 Princeton\ncity: Dearborn\nstate: Michigan\ncountry: USA\nphone: 303-427-0153\nsalary: 140000\n</code></pre>\n\n<p>How would I be able to do so with stream manipulators?\nFor Example:</p>\n\n<pre><code>Employee* employee = new Employee(12345, \"Jack Dough\", \"24437 Princeton\", \"Dearborn\", \"Michigan\", \"USA\", \"303-427-0153\", 140000.00);\ncout &lt;&lt; toXML &lt;&lt; employee;\ncout &lt;&lt; toJSON &lt;&lt; employee;\n</code></pre>\n"}, {"tags": ["c++", "windows", "text-to-speech", "sapi"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4208326, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-FPoA79sZBbk/AAAAAAAAAAI/AAAAAAAAC-k/MYDZnBtWnG8/photo.jpg?sz=128", "display_name": "Sam Naughton B", "link": "https://stackoverflow.com/users/4208326/sam-naughton-b"}, "edited": false, "score": 0, "creation_date": 1455147927, "post_id": 35328123, "comment_id": 58364923, "body": "Thanks so much! That really helped! I got it with <code>std::getline(std::cin, text);</code>"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 3, "last_activity_date": 1455147811, "last_edit_date": 1455147811, "creation_date": 1455147449, "answer_id": 35328123, "question_id": 35328063, "link": "https://stackoverflow.com/questions/35328063/using-sapi-h-why-does-my-program-only-speak-the-first-word/35328123#35328123", "title": "Using SAPI.H - why does my program only speak the first word?", "body": "<p>The input is not being read correctly. </p>\n\n<pre><code>std::cin &gt;&gt; text; \n</code></pre>\n\n<p>stops after reading one whitespace-delimited token. If the input is \"I am the very model of a modern major-general.\" <code>std::cin &gt;&gt; text;</code> will stop reading at the first space and provide only \"I\" in <code>text</code>. The remainder of the line stays in the stream waiting to be read.</p>\n\n<pre><code>std::getline(cin, text); \n</code></pre>\n\n<p>is probably more along the line of what you want. <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\"><code>std::getline</code></a> will read everything up to the end of the input line using the default end of line delimiter. Other overloads of <code>std::getline</code> allow you to specify the delimiter, making it a good general purpose parsing tool.</p>\n"}], "owner": {"reputation": 69, "user_id": 4208326, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-FPoA79sZBbk/AAAAAAAAAAI/AAAAAAAAC-k/MYDZnBtWnG8/photo.jpg?sz=128", "display_name": "Sam Naughton B", "link": "https://stackoverflow.com/users/4208326/sam-naughton-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1551167196, "creation_date": 1455147066, "last_edit_date": 1551167196, "question_id": 35328063, "link": "https://stackoverflow.com/questions/35328063/using-sapi-h-why-does-my-program-only-speak-the-first-word", "title": "Using SAPI.H - why does my program only speak the first word?", "body": "<p>I want to be able to type in a string into a program and use MS-SAPI to get the computer to speak that string. I'm doing it in C++. Here is my code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;sapi.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::wstring str_to_ws(const std::string&amp; s)\n{\n    int len;\n    int slength = (int)s.length() + 1;\n    len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0);\n    wchar_t* buf = new wchar_t[len];\n    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);\n    std::wstring r(buf);\n    delete[] buf;\n    return r;\n}\n\nint main(int argc, char* argv[]) {\n    while(true) {\n        std::cout &lt;&lt; \"Enter some words: \" &lt;&lt; std::endl; std::cout &lt;&lt; \"&gt;&gt; \";\n        std::string text; std::cin &gt;&gt; text;\n        std::cout &lt;&lt; \"\" &lt;&lt; std::endl;\n        std::wstring stemp = str_to_ws(text);\n        LPCWSTR speech_text = stemp.c_str();\n        ISpVoice * pVoice = NULL;\n        if (FAILED(::CoInitialize(NULL))) {}\n        HRESULT hresult = CoCreateInstance(CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void **)&amp;pVoice);\n    if (SUCCEEDED(hresult)) {\n        hresult = pVoice-&gt;Speak(speech_text, 0, NULL); \n        pVoice-&gt;Release();\n        pVoice = NULL;\n    }\n    ::CoUninitialize(); \n    return TRUE;\n    }\n}\n</code></pre>\n\n<p>The problem is that the program only says the first word of the string and then quits...how do I fix this?</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1455149951, "post_id": 35328110, "comment_id": 58365572, "body": "Complete rewrite of answer, because I misread the question. Now with complete <a href=\"http://coliru.stacked-crooked.com/a/e9a8c8ba7a963682\" rel=\"nofollow noreferrer\">live demo</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1455364969, "last_edit_date": 1455364969, "creation_date": 1455147351, "answer_id": 35328110, "question_id": 35328060, "link": "https://stackoverflow.com/questions/35328060/why-doesnt-my-boostspirit-rule-compile-for-parsing-a-list-of-lists/35328110#35328110", "title": "Why doesn&#39;t my boost::spirit rule compile for parsing a list of lists?", "body": "<p><strong>EDIT</strong> I misread the question. Here's the rewrite:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/e9a8c8ba7a963682\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/45d0540503b52efc\" rel=\"nofollow\">Live On Coliru</a></kbd></strong> (with debug output)</p>\n\n<pre><code>struct V2 { float a, b;    } ;\nstruct V3 { float a, b, c; } ;\nstruct VertexProperty { \n    std::vector&lt;V3&gt; vertices, normals;\n    std::vector&lt;V2&gt; texCoords; \n};\n\nBOOST_FUSION_ADAPT_STRUCT(V2, a,b)\nBOOST_FUSION_ADAPT_STRUCT(V3, a,b,c)\nBOOST_FUSION_ADAPT_STRUCT(VertexProperty, vertices,normals,texCoords)\n\ntemplate &lt;typename Iterator&gt;\nstruct Parser : qi::grammar&lt;Iterator, VertexProperty()&gt; {\n    Parser() : Parser::base_type(start) {\n        v2 = qi::double_ &gt;&gt; qi::double_;\n        v3 = qi::double_ &gt;&gt; qi::double_ &gt;&gt; qi::double_;\n\n        vertexproperty = qi::lit(\"VertexProperty\")\n            &gt;&gt; '{'\n            &gt;&gt; \"vertex\"   &gt;&gt; '[' &gt;&gt; (v3 % ',') &gt;&gt; ']'\n            &gt;&gt; \"normal\"   &gt;&gt; '[' &gt;&gt; (v3 % ',') &gt;&gt; ']'\n            &gt;&gt; \"texCoord\" &gt;&gt; '[' &gt;&gt; (v2 % ',') &gt;&gt; ']'\n            &gt;&gt; '}';\n\n        start = qi::skip(qi::space) [vertexproperty];\n\n        BOOST_SPIRIT_DEBUG_NODES((v2)(v3)(vertexproperty))\n    }\n\n  private:\n    qi::rule&lt;Iterator, VertexProperty()&gt; start;\n    qi::rule&lt;Iterator, VertexProperty(), qi::space_type&gt; vertexproperty;\n    qi::rule&lt;Iterator, V2(),             qi::space_type&gt; v2;\n    qi::rule&lt;Iterator, V3(),             qi::space_type&gt; v3;\n};\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>use a typed element instead of 'just' a vector</li>\n<li>use a separate rule for the V3</li>\n<li>use literals (<code>qi::lit</code>) instead of <code>qi::char_</code> because you do not want to expose the matched interpunction</li>\n<li>use the list operator (<code>a % b</code> matches <code>a [b a]...</code> already)</li>\n</ul>\n\n<h2>UPDATE: Full Live Demo</h2>\n\n<pre><code>//#define BOOST_SPIRIT_DEBUG\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/fusion/adapted/struct.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\n\nstruct V2 { float a, b;    } ;\nstruct V3 { float a, b, c; } ;\nstruct VertexProperty { \n    std::vector&lt;V3&gt; vertices, normals;\n    std::vector&lt;V2&gt; texCoords; \n};\n\nBOOST_FUSION_ADAPT_STRUCT(V2, a,b)\nBOOST_FUSION_ADAPT_STRUCT(V3, a,b,c)\nBOOST_FUSION_ADAPT_STRUCT(VertexProperty, vertices,normals,texCoords)\n\ntemplate &lt;typename Iterator&gt;\nstruct Parser : qi::grammar&lt;Iterator, VertexProperty()&gt; {\n    Parser() : Parser::base_type(start) {\n        v2 = qi::double_ &gt;&gt; qi::double_;\n        v3 = qi::double_ &gt;&gt; qi::double_ &gt;&gt; qi::double_;\n\n        vertexproperty = qi::lit(\"VertexProperty\")\n            &gt;&gt; '{'\n            &gt;&gt; \"vertex\"   &gt;&gt; '[' &gt;&gt; (v3 % ',') &gt;&gt; ']'\n            &gt;&gt; \"normal\"   &gt;&gt; '[' &gt;&gt; (v3 % ',') &gt;&gt; ']'\n            &gt;&gt; \"texCoord\" &gt;&gt; '[' &gt;&gt; (v2 % ',') &gt;&gt; ']'\n            &gt;&gt; '}';\n\n        start = qi::skip(qi::space) [vertexproperty];\n\n        BOOST_SPIRIT_DEBUG_NODES((v2)(v3)(vertexproperty))\n    }\n\n  private:\n    qi::rule&lt;Iterator, VertexProperty()&gt; start;\n    qi::rule&lt;Iterator, VertexProperty(), qi::space_type&gt; vertexproperty;\n    qi::rule&lt;Iterator, V2(),             qi::space_type&gt; v2;\n    qi::rule&lt;Iterator, V3(),             qi::space_type&gt; v3;\n};\n\nint main() {\n    using Iterator = std::string::const_iterator;\n\n    std::string const sample = \"VertexProperty {\\n\"\n        \" vertex [ 0.0 0.0 1.0,\\n\"\n        \"     1.0 1.0 1.0,\\n\"\n        \"     1.0 0.0 1.0]\\n\"\n        \" normal [1.0 0.0 0.0,\\n\"\n        \"     0.0 1.0 0.0,\\n\"\n        \"     0.0 0.0 1.0]\\n\"\n        \" texCoord [0.0 0.0,\\n\"\n        \"     1.0 0.0,\\n\"\n        \"     1.0 1.0]\\n\"\n        \"}\";\n\n    auto f = sample.begin(), l = sample.end();\n    VertexProperty data;\n    bool ok = qi::parse(f, l, Parser&lt;Iterator&gt;(), data);\n\n    if (ok) {\n        std::cout &lt;&lt; \"Parsed: \" &lt;&lt; data.vertices.size() &lt;&lt; \", \" &lt;&lt; data.normals.size() &lt;&lt; \", \" &lt;&lt; data.texCoords.size() &lt;&lt; \"\\n\";\n    } else {\n        std::cout &lt;&lt; \"Parse failed\\n\";\n    }\n\n    if (f!=l)\n        std::cout &lt;&lt; \"Remaining input: '\" &lt;&lt; std::string(f,l) &lt;&lt; \"'\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Parsed: 3, 3, 3\n</code></pre>\n\n<p>With debug info</p>\n\n<pre><code>&lt;vertexproperty&gt;\n  &lt;try&gt;VertexProperty {\\n ve&lt;/try&gt;\n  &lt;v3&gt;\n    &lt;try&gt; 0.0 0.0 1.0,\\n     1&lt;/try&gt;\n    &lt;success&gt;,\\n     1.0 1.0 1.0,\\n&lt;/success&gt;\n    &lt;attributes&gt;[[0, 0, 1]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v3&gt;\n    &lt;try&gt;\\n     1.0 1.0 1.0,\\n &lt;/try&gt;\n    &lt;success&gt;,\\n     1.0 0.0 1.0]\\n&lt;/success&gt;\n    &lt;attributes&gt;[[1, 1, 1]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v3&gt;\n    &lt;try&gt;\\n     1.0 0.0 1.0]\\n &lt;/try&gt;\n    &lt;success&gt;]\\n normal [1.0 0.0 0&lt;/success&gt;\n    &lt;attributes&gt;[[1, 0, 1]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v3&gt;\n    &lt;try&gt;1.0 0.0 0.0,\\n     0.&lt;/try&gt;\n    &lt;success&gt;,\\n     0.0 1.0 0.0,\\n&lt;/success&gt;\n    &lt;attributes&gt;[[1, 0, 0]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v3&gt;\n    &lt;try&gt;\\n     0.0 1.0 0.0,\\n &lt;/try&gt;\n    &lt;success&gt;,\\n     0.0 0.0 1.0]\\n&lt;/success&gt;\n    &lt;attributes&gt;[[0, 1, 0]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v3&gt;\n    &lt;try&gt;\\n     0.0 0.0 1.0]\\n &lt;/try&gt;\n    &lt;success&gt;]\\n texCoord [0.0 0.0&lt;/success&gt;\n    &lt;attributes&gt;[[0, 0, 1]]&lt;/attributes&gt;\n  &lt;/v3&gt;\n  &lt;v2&gt;\n    &lt;try&gt;0.0 0.0,\\n     1.0 0.&lt;/try&gt;\n    &lt;success&gt;,\\n     1.0 0.0,\\n    &lt;/success&gt;\n    &lt;attributes&gt;[[0, 0]]&lt;/attributes&gt;\n  &lt;/v2&gt;\n  &lt;v2&gt;\n    &lt;try&gt;\\n     1.0 0.0,\\n     &lt;/try&gt;\n    &lt;success&gt;,\\n     1.0 1.0]\\n}&lt;/success&gt;\n    &lt;attributes&gt;[[1, 0]]&lt;/attributes&gt;\n  &lt;/v2&gt;\n  &lt;v2&gt;\n    &lt;try&gt;\\n     1.0 1.0]\\n}&lt;/try&gt;\n    &lt;success&gt;]\\n}&lt;/success&gt;\n    &lt;attributes&gt;[[1, 1]]&lt;/attributes&gt;\n  &lt;/v2&gt;\n  &lt;success&gt;&lt;/success&gt;\n  &lt;attributes&gt;[[[[0, 0, 1], [1, 1, 1], [1, 0, 1]], [[1, 0, 0], [0, 1, 0], [0, 0, 1]], [[0, 0], [1, 0], [1, 1]]]]&lt;/attributes&gt;\n&lt;/vertexproperty&gt;\n</code></pre>\n"}], "owner": {"reputation": 1088, "user_id": 2343779, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/029cf86907c4176eaaa833dda677a134?s=128&d=identicon&r=PG", "display_name": "stix", "link": "https://stackoverflow.com/users/2343779/stix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 35328110, "answer_count": 1, "score": 1, "last_activity_date": 1455364969, "creation_date": 1455147043, "last_edit_date": 1455147516, "question_id": 35328060, "link": "https://stackoverflow.com/questions/35328060/why-doesnt-my-boostspirit-rule-compile-for-parsing-a-list-of-lists", "title": "Why doesn&#39;t my boost::spirit rule compile for parsing a list of lists?", "body": "<p>I'm trying to write a parser for Open Inventor .iv files using boost::spirit. </p>\n\n<p>I have the following struct for VertexProperty nodes:</p>\n\n<pre><code>struct VertexProperty\n{\n   std::vector&lt;std::vector&lt;float&gt; &gt; vertices;\n   std::vector&lt;std::vector&lt;float&gt; &gt; normals;\n   std::vector&lt;std::vector&lt;float&gt; &gt; texCoords;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(\n   VertexProperty,\n   (std::vector&lt;std::vector&lt;float&gt; &gt;, vertices)\n   (std::vector&lt;std::vector&lt;float&gt; &gt;, normals)\n   (std::vector&lt;std::vector&lt;float&gt; &gt;, texCoords)\n   )\n</code></pre>\n\n<p>And the following rule for parsing it (which doesn't compile):</p>\n\n<pre><code>qi::rule&lt;Iterator, VertexProperty(), Skipper&gt; RULE_VertexProperty;\nRULE_VertexProperty = lit(\"VertexProperty\")\n   &gt;&gt; char_('{')\n   &gt;&gt; lit(\"vertex\") &gt;&gt; char_('[')\n   &gt;&gt; repeat(3)[qi::float_] &gt;&gt; *(char_(',') &gt;&gt; repeat(3)[qi::float_])\n   &gt;&gt; char_(']')\n   &gt;&gt; lit(\"normal\") &gt;&gt; char_('[')\n   &gt;&gt; repeat(3)[qi::float_] &gt;&gt; *(char_(',') &gt;&gt; repeat(3)[qi::float_])\n   &gt;&gt; char_(']')\n   &gt;&gt; lit(\"texCoord\") &gt;&gt; char_('[')\n   &gt;&gt; repeat(2)[qi::float] &gt;&gt; *(char_(',') &gt;&gt; repeat(2)[qi::float_])\n   &gt;&gt; char_(']') &gt;&gt; char_('}');\n</code></pre>\n\n<p>Based on this rule, the following should result in a valid VertexProperty parse:</p>\n\n<pre><code>VertexProperty {\n   vertex [ 0.0 0.0 1.0,\n            1.0 1.0 1.0,\n            1.0 0.0 1.0]\n   normal [1.0 0.0 0.0,\n           0.0 1.0 0.0,\n           0.0 0.0 1.0]\n   texCoord [0.0 0.0,\n             1.0 0.0,\n             1.0 1.0]\n}\n</code></pre>\n\n<p>My assumption is that the problem is coming from how I'm trying to parse the comma separated tuples into a vector of a vector. </p>\n\n<p>What is the correct way to parse a list of 3-tuples and or 2-tuples of the form:</p>\n\n<pre><code>[float float float, float float float, float float float]\n</code></pre>\n\n<p>using boost::spirit?</p>\n"}, {"tags": ["c++", "c++11", "return", "move-semantics", "const-correctness"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 12, "creation_date": 1455147125, "post_id": 35328029, "comment_id": 58364665, "body": "Surely another solution is to not make it const in the first place?"}, {"owner": {"reputation": 793, "user_id": 1306466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a6ac97a9f46ba8ee2be40d4d6a7fba1?s=128&d=identicon&r=PG", "display_name": "Florian Kaufmann", "link": "https://stackoverflow.com/users/1306466/florian-kaufmann"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1455147494, "post_id": 35328029, "comment_id": 58364784, "body": "But then I have to give up const correctness for, from my current point of view, no good reason."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455147945, "post_id": 35328029, "comment_id": 58364930, "body": "@FlorianKaufmann &quot;Const correctness&quot; to you means mutating a const object?"}, {"owner": {"reputation": 793, "user_id": 1306466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a6ac97a9f46ba8ee2be40d4d6a7fba1?s=128&d=identicon&r=PG", "display_name": "Florian Kaufmann", "link": "https://stackoverflow.com/users/1306466/florian-kaufmann"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455148465, "post_id": 35328029, "comment_id": 58365105, "body": "@immibis: I edited my question. It is about where constness ends. Already now the destructor of a const object can mutate it."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1455148617, "post_id": 35328029, "comment_id": 58365155, "body": "Const correctness usually applies to the function, not local variables."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1455148759, "post_id": 35328029, "comment_id": 58365188, "body": "If you want to modify the object by releasing it for the return value then it is not correct to make it const."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 1, "creation_date": 1455149072, "post_id": 35328029, "comment_id": 58365285, "body": "I think a standard change like you suggest would be a good idea. However I also think that the merit isn&#39;t enough to justify the effort. But if you want to write a proposal, nothing&#39;s stopping you :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1455149183, "post_id": 35328029, "comment_id": 58365330, "body": "Can you explain in more detail what the benefit of <code>const unique_ptr&lt;T&gt;</code> is?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1455149391, "post_id": 35328029, "comment_id": 58365389, "body": "@M.M The same benefit of marking any local variable const. Some people argue const should me the default (as in SML)."}, {"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455149477, "post_id": 35328029, "comment_id": 58365411, "body": "do you want the shared pointer or the pointee const. You could have also declared it as shared_ptr&lt;const T&gt; p"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455149528, "post_id": 35328029, "comment_id": 58365432, "body": "@immibis So, why does the std allow &quot;copy elision&quot; (aka object confusion) for const objects?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1455150183, "post_id": 35328029, "comment_id": 58365646, "body": "In C++ if you use <code>const_cast</code> to cast away <code>const</code> from an object that was originally declared <code>const</code>, undefined behavior results. In effect what you are asking is that the compiler should remove the <code>const</code> for you when you are returning the object from a function in which it is a local variable. I wonder what are the consequences of this for the compiler? If it must always be &quot;safe&quot; to make a local variable which was <code>const</code> into <code>non-const</code> potentially later on, does this inhibit any optimizations? IIUC <code>const</code> is rarely connected to optimizations, but it&#39;s a complex topic."}, {"owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "edited": false, "score": 0, "creation_date": 1455150668, "post_id": 35328029, "comment_id": 58365801, "body": "The local <code>const</code> could point to the internal data of an object with a lifespan greater than the function. Removing the <code>const</code>ness in this case would be a mistake."}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 1306466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a6ac97a9f46ba8ee2be40d4d6a7fba1?s=128&d=identicon&r=PG", "display_name": "Florian Kaufmann", "link": "https://stackoverflow.com/users/1306466/florian-kaufmann"}, "edited": false, "score": 0, "creation_date": 1455213192, "post_id": 35329334, "comment_id": 58400144, "body": "Agreed. Considering resource management classes, with const I really do want to express that the ownership shall not be modified for the lifetime of the object, i.e. up to the destructor call."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1455154890, "creation_date": 1455154890, "answer_id": 35329334, "question_id": 35328029, "link": "https://stackoverflow.com/questions/35328029/initialization-of-a-return-value-should-ignore-constness-of-automatic-object/35329334#35329334", "title": "Initialization of a return value should ignore constness of automatic object", "body": "<p>I think such a change would be a bad idea. I sort of see where you are coming from but your solution to your problem would simply create a new problem that is currently solved.</p>\n\n<p>I think we need to consider why we make objects <code>const</code> to begin with.</p>\n\n<p>Its about safety and making sure the wrong thing does not happen to a given variable. By making a <code>unique_ptr</code> <code>const</code> you are actually saying that you don't want any <em>ownership</em> manipulation to occur on the object. You still get to manipulate the object it manages:</p>\n\n<pre><code>std::unique_ptr&lt;T&gt; foo()\n{\n    // const object means no calling non-const member functions\n    // which means no changing the ownership of the managed pointer\n    const std::unique_ptr&lt;int&gt; p = std::make_unique&lt;int&gt;();\n\n    // but we still get to manipulate the thing being pointed to:\n    *p = 6;\n\n    return std::move(p); // compile error - changing ownership\n}\n</code></pre>\n\n<p>In this case you might want to make your <code>unique_ptr</code> <code>const</code> to prevent it accidentally being returned instead of another <code>unique_ptr</code> that you <strong>do</strong> want to return. Making the <code>unique_ptr</code> const actually prevents it from getting returned by mistake. So what we could do now is make all our <code>unique_ptr</code> objects <code>const</code> <em>except</em> the one whose <em>ownership</em> rights we want to return to the caller.</p>\n\n<p>Your change would make that protection null and void and there would be less point in making the object <code>const</code> to begin with.</p>\n"}, {"comments": [{"owner": {"reputation": 793, "user_id": 1306466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a6ac97a9f46ba8ee2be40d4d6a7fba1?s=128&d=identicon&r=PG", "display_name": "Florian Kaufmann", "link": "https://stackoverflow.com/users/1306466/florian-kaufmann"}, "edited": false, "score": 0, "creation_date": 1455212715, "post_id": 35330040, "comment_id": 58399843, "body": "I agree that what I actually want is the ability to express that the local object named <code>p</code> <i>is</i> the return value - there shall be only one object, not two. I.e. I don&#39;t want to be forced to use the model that I need to initialize the return value with another object, here <code>p</code>. Copy elision as in the current standard does not help, since even with it, <i>conceptually</i> there are still two objects, not one."}], "tags": [], "owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "is_accepted": false, "score": 4, "last_activity_date": 1455159645, "creation_date": 1455159645, "answer_id": 35330040, "question_id": 35328029, "link": "https://stackoverflow.com/questions/35328029/initialization-of-a-return-value-should-ignore-constness-of-automatic-object/35330040#35330040", "title": "Initialization of a return value should ignore constness of automatic object", "body": "<p>Since unique_ptr is a move-only type, returning by value will (hypothetically) call the move constructor for the returned value.\nBut since being moved from is a destructive operation, you can't really move from a const object.</p>\n\n<p>But I think C++17's \"guaranteed copy elision\" (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html</a>) would help with this.\nBasically, this would allow unmovable types to be returned by value from a function, such as your const unique_ptr.\nOnce again, I fear, you will have to wait for the new standard</p>\n"}], "owner": {"reputation": 793, "user_id": 1306466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a6ac97a9f46ba8ee2be40d4d6a7fba1?s=128&d=identicon&r=PG", "display_name": "Florian Kaufmann", "link": "https://stackoverflow.com/users/1306466/florian-kaufmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1455190620, "creation_date": 1455146868, "last_edit_date": 1455190620, "question_id": 35328029, "link": "https://stackoverflow.com/questions/35328029/initialization-of-a-return-value-should-ignore-constness-of-automatic-object", "title": "Initialization of a return value should ignore constness of automatic object", "body": "<p>Adhering to const correctness, you might want to make your local object of type <code>unique_ptr</code> const as in the following, whereas <code>T</code> is some here unimportant type:</p>\n\n<pre><code>unique_ptr&lt;T&gt; foo() {\n    const unique_ptr&lt;T&gt; p = make_unique&lt;T&gt;(...);\n    ... using p's pointee ...\n    return p;\n}\n</code></pre>\n\n<p>Unfortunately it doesn't compile because the return value cannot be initialized, since <code>unique_ptr</code> has no copy constructor and the move constructor is not viable since <code>p</code> is const. </p>\n\n<p>What about if the C++ standard would say that when the 'operand' of an return statement is an automatic object, then its potential constness is to be ignored? The automatic object cannot be referenced after the return value has been initialized, thus its constness is now irrelevant. In its destructor the const object can also be modified, so it's really just about defining where constness ends: just before the destructor or in this special case before the constructor of the return value.</p>\n\n<p>However 'cannot be referenced' is not the entire truth: destructors of other locals, which are sequenced after initializing the return value, might reference it. But I think it's impossible that they care that the const object was modified. They got to know the object via pointer or reference to const, i.e. from their perspective they only know that they are not allowed to modify it, they can't know if others are allowed to modify it.</p>\n\n<p>Do you think such a change to the C++ standard would be a good idea? Or do you see other solutions beside the one I gave below?</p>\n\n<p>Just for the record: Non-solutions and other solutions:</p>\n\n<ul>\n<li>You can't <code>return unique_ptr&lt;T&gt;(p.get())</code> since now you have two <code>unique_ptr</code>s, each thinking it is the unique owner.</li>\n<li>You can't <code>return unique_ptr&lt;T&gt;(p.release())</code> since <code>p</code> is const and <code>release()</code> is a non-const member method.</li>\n<li><code>return move(p)</code> is of no use since it does not remove constness and thus the move constructor still can't be called.</li>\n<li>Edit: As Chris Beck pointed out, also <code>return const_cast&lt;unique_ptr&lt;T&gt;&amp;&amp;&gt;(p)</code> is not a solution since modifying a const object is undefined behaviour (7.1.6.1 p4 in the standard N4140).</li>\n</ul>\n"}, {"tags": ["c++", "qt", "encryption"], "comments": [{"owner": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455148391, "post_id": 35328007, "comment_id": 58365078, "body": "Did you mean pow(ui-&gt;spinBox-&gt;value(), -1) is (a^-1) ? If yes, it&#39;s wrong you know"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455148431, "post_id": 35328007, "comment_id": 58365093, "body": "@AchmadJP What do you mean?"}, {"owner": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 1, "creation_date": 1455148597, "post_id": 35328007, "comment_id": 58365149, "body": "This is called inverse module in encryption algorithm. Exp : 3^(-1) mod 11  is 4. Not pow(3,-1) mod 11. Read it here <a href=\"https://en.wikipedia.org/wiki/Modular_multiplicative_inverse\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Modular_multiplicative_inverse</a>"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455148820, "post_id": 35328007, "comment_id": 58365206, "body": "@AchmadJP So I would replace &#39;pow(ui-&gt;spinBox-&gt;value(), -1)&#39; with &#39;ui-&gt;spinBox-&gt;value()^-1&#39;?"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1455197199, "post_id": 35328007, "comment_id": 58388303, "body": "@NicholasJohnson No, you replace it with the extended euclidean algorithm."}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455253530, "post_id": 35328007, "comment_id": 58417051, "body": "@AchmadJP How would I implement that into the code?"}, {"owner": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455270973, "post_id": 35328007, "comment_id": 58425123, "body": "have you ever taken Cryptography class? if not, i suggest you to use encryption library, because it&#39;s complicated and &#39;most&#39; people use library anyway for encryption process. But if you want to learn, then search for inverse module algorithm in google :)"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455291284, "post_id": 35328007, "comment_id": 58438708, "body": "@AchmadJP I that and I was reading and I couldn&#39;t find how to put it into code terms"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1455395327, "post_id": 35328007, "comment_id": 58474346, "body": "@AchmadJP do either of you know how to actually implement it? Honestly, I just don&#39;t understand the wiki and don&#39;t want to use a library"}], "owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455219754, "creation_date": 1455146745, "last_edit_date": 1455219754, "question_id": 35328007, "link": "https://stackoverflow.com/questions/35328007/qt-why-affine-cipher-doesnt-decode", "title": "QT - Why Affine Cipher Doesn&#39;t Decode?", "body": "<p>Basically my problem is that I have a QT c++ program that encodes and decodes custom inputs based upon the Affine Cipher. The encoding function is working flawlessly based on the function that I found from Wikipedia, but the decode doesn't. When I run, it says that the modulo 26 cannot be applied to a double, and I understand that when I <code>pow(a, -1);</code> it returns a double, but I do not understand why it would do this in mine, but not on any other decoders. Here is the decode function, and my code:\n<a href=\"https://i.stack.imgur.com/O9jY3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O9jY3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Relevant code:</p>\n\n<pre><code>QString MainWindow::affineDecode(QString string)\n{\n    QString done = \"\";\n    QString temp = \"\";\n    for (int x = 0; x &lt; string.length(); x++)\n    {\n        if (parseAlphaOnly(string.at(x)))\n        {\n            //Formula: a^-1(x-b)%26\n            if (string.at(x).isLower())\n            {\n                //Broken code start:\n                temp = alphabetLower.at((pow(ui-&gt;spinBox-&gt;value(), -1) * (getAlphaPos(string.at(x)) - ui-&gt;spinBox_2-&gt;value())));\n            }\n            else if (string.at(x).isUpper())\n            {\n                temp = alphabetUpper.at(pow(ui-&gt;spinBox-&gt;value(), -1) * (getAlphaPos(string.at(x)) - ui-&gt;spinBox_2-&gt;value())%26);\n            }\n            //Broken code end\n        }\n        else if (!parseAlphaOnly(string.at(x)))\n        {\n            temp = string.at(x);\n        }\n\n\n        done += temp;\n    }\n    return done;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "framebuffer", "vertex-shader"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455146011, "post_id": 35327764, "comment_id": 58364190, "body": "Because you&#39;re drawing 6 vertices, and each vertex has its own lightpos value (becuase it&#39;s a vertex attribute)?"}, {"owner": {"reputation": 2175, "user_id": 1009901, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/1009901/yeti"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455146137, "post_id": 35327764, "comment_id": 58364245, "body": "Interesting thought :) But the 6 vertices are emitted by my geometry shader using <code>GL_TRIANGLE_STRIP</code>, so I expect I only send one vertex in, right? (and how does that add up to 10?) Also, see my edit, maybe that&#39;s a clue."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1455146220, "post_id": 35327764, "comment_id": 58364281, "body": "<code>glDrawArrays(GL_POINTS, 0, 6);</code> This will submit 6 point primitives to the geometry shader, but you only have two light attributes. The number of primitives that your geometry shader actually emits is irrelevant to this call."}, {"owner": {"reputation": 2175, "user_id": 1009901, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/1009901/yeti"}, "edited": false, "score": 0, "creation_date": 1455146817, "post_id": 35327764, "comment_id": 58364542, "body": "Wow thanks! I only had to change <code>glDrawArrays(GL_POINTS, 0, 6)</code> to <code>glDrawArrays(GL_POINTS, 0, 1)</code>, and it works like it should. If you create an answer for it, I will accept it. Basically, my understanding of <code>glDrawArrays</code> was wrong, I thought the buffer requests the shader program to draw stuff, and <code>glDrawArrays</code> simply draws (part of) the result. But it is actually the other way around, the <code>glDrawArrays</code> requests the shader program to draw something. Thanks for that realisation!"}], "owner": {"reputation": 2175, "user_id": 1009901, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/1009901/yeti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455146272, "creation_date": 1455145588, "last_edit_date": 1455146272, "question_id": 35327764, "link": "https://stackoverflow.com/questions/35327764/passing-data-to-vertex-shader-does-not-work", "title": "Passing data to Vertex shader does not work?", "body": "<p>How OpenGL really works, is still a big mystery. Today I started with Framebuffers. In my framebuffer I want to pass data to my vertex shader. The following code is a part of it:</p>\n\n<p><strong>Initialization</strong></p>\n\n<pre><code>(...) // Compile and link shaderProgram\n(...) // Compile and link lightingShaderProgram\nglGenFramebuffers(1, &amp;frameBuffer);\n(...) // Setting up the map and objects VAO's\nif(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)\n{\n    return false;\n}\nglGenVertexArrays(1, &amp;VAORectLighting);\nglBindVertexArray(VAORectLighting);\n    glGenBuffers(1, &amp;VBOQuadLighting);\n    glBindBuffer(GL_ARRAY_BUFFER, VBOQuadLighting);\n        GLfloat test[] = {0.5f, 0.5f};\n        glBufferData(GL_ARRAY_BUFFER, sizeof(test), test, GL_DYNAMIC_DRAW);\n        // For the last two arguments, 2*sizeof(GLfloat), (GLvoid*)0 give the same result\n        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, nullptr);\n        glEnableVertexAttribArray(0);\n\nglUseProgram(lightingShaderProgram);\nglUniform1i(glGetUniformLocation(lightingShaderProgram, \"texFramebuffer\"), 0);\n\nglBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);\nglGenTextures(1, &amp;frameBufferTexture);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, frameBufferTexture);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, viewportWidth, viewportHeight, 0, GL_RGB, GL_UNSIGNED_BYTE, nullptr);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\nglFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, frameBufferTexture, 0);\n</code></pre>\n\n<p><strong>Render loop</strong></p>\n\n<pre><code>(...)\n\nglBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);\nglUseProgram(shaderProgram);\n    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n    (...) // Using subDataBuffer to update the scene\n    glBindVertexArray(m-&gt;VAOMap);\n        glDrawArrays(GL_POINTS, 0, m-&gt;mapDrawIndex);\n    glBindVertexArray(m-&gt;VAOObjects);\n        glDrawArrays(GL_POINTS, 0, m-&gt;objectsDrawIndex);\n    glBindVertexArray(0);\n\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\nglUseProgram(lightingShaderProgram);\nglClearColor(0.0f, 0.0f, 0.0f, 1.0f);\nglClear(GL_COLOR_BUFFER_BIT);\nglBindVertexArray(VAORectLighting);\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, frameBufferTexture);\n    glDrawArrays(GL_POINTS, 0, 6);\nglBindVertexArray(0);\n\nglfwSwapBuffers(window);\n\n(...)\n</code></pre>\n\n<p><strong>Vertex Shader source</strong></p>\n\n<pre><code>#version 330 core\nlayout (location = 0 in vec2 lightpos;\nout VSO\n{\n    vec4 vLight;\n} outputs;\nvoid main()\n{\n    outputs.vLight = vec4(lightpos.x, lightpos.y, 0.5, 0.5);\n}\n</code></pre>\n\n<p>The rest is not relevant. Everything works, if I fill in custom values for lightpos.x and lightpos.y in the source code of the Vertex shader, I see the correct result.</p>\n\n<p>However, what does <strong>not</strong> work is: Using <code>(lightpos.x == 0 ? 0.5 : -0.5)</code> I could debug the value of <code>lightpos</code>, and it turned out <strong>both values are zero</strong>. But lightpos should definitely be <code>0.5</code> and <code>0.5</code>!</p>\n\n<p>After extensive debugging (trial and error), I found something very peculiar. The following code returns two zeroes for <code>lightpos.xy</code>.</p>\n\n<pre><code>GLfloat test[] = {0.5f, 0.5f};\n</code></pre>\n\n<p>However, the following code returns <code>0.3</code>, <code>0.2</code> for <code>lightpos.xy</code>:</p>\n\n<pre><code>GLfloat test[] = {0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.3f, 0.2f};\n</code></pre>\n\n<p>And if I add more values to <code>test</code>:</p>\n\n<pre><code>GLfloat test[] = {0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.3f, 0.2f, 0.5f, 0.5f, 0.5f, 0.5f, ...};\n</code></pre>\n\n<p>The values received by the vertex shader will always be the 10th and 11th index of <code>test</code>, no matter what I do.</p>\n\n<p>My question now obviously is, why?! What am I missing?</p>\n\n<p>My suspicions are the following (but I have no idea what it means, and how to deal with this):</p>\n\n<blockquote>\n  <p>When a non-zero buffer object is bound to the GL_ARRAY_BUFFER target, the vertex array pointer parameter is interpreted as an offset within the buffer object measured in basic machine units. </p>\n</blockquote>\n\n<p>Source: <a href=\"https://www.opengl.org/sdk/docs/man/html/glBindBuffer.xhtml\" rel=\"nofollow\">OpenGL.org docs: glBindBuffer</a></p>\n\n<p>In addition, <code>VAORectLighting</code> has the value <code>3</code>, and <code>VBOQuadLighting</code> has the value <code>7</code>, this adds up to <code>10</code>. But I still don't see how this works.</p>\n"}, {"tags": ["c++", "thread-safety", "clang"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 2702305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1oLal.png?s=128&g=1", "display_name": "LebedevRI", "link": "https://stackoverflow.com/users/2702305/lebedevri"}, "is_accepted": false, "score": 0, "last_activity_date": 1494780183, "creation_date": 1494780183, "answer_id": 43966452, "question_id": 35327754, "link": "https://stackoverflow.com/questions/35327754/clang-thread-safety-analysis-and-thread-roles/43966452#43966452", "title": "Clang thread safety analysis and thread roles", "body": "<p>Relevant:\n<a href=\"https://insights.sei.cmu.edu/sei_blog/2014/10/thread-safety-analysis-in-c-and-c.html\" rel=\"nofollow noreferrer\">https://insights.sei.cmu.edu/sei_blog/2014/10/thread-safety-analysis-in-c-and-c.html</a>\n<code>\ntypedef int __attribute__((capability(\"role\"))) ThreadRole;\nThreadRole FlightControl, Logging;\nvoid acquire(ThreadRole R) __attribute__((acquire_capability(R))) __attribute__((no_thread_safety_analysis)) {}\nvoid release(ThreadRole R) __attribute__((release_capability(R))) __attribute__((no_thread_safety_analysis)) {}\n</code>\n...</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1494780183, "creation_date": 1455145547, "last_edit_date": 1455147164, "question_id": 35327754, "link": "https://stackoverflow.com/questions/35327754/clang-thread-safety-analysis-and-thread-roles", "title": "Clang thread safety analysis and thread roles", "body": "<p>The clang thread safety analysis <a href=\"http://clang.llvm.org/docs/ThreadSafetyAnalysis.html\" rel=\"nofollow\">docs</a> and <a href=\"http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/42958.pdf\" rel=\"nofollow\">paper</a> hint that it's possible to indicate that specific functions be only called by specific threads. From the paper:</p>\n\n<pre><code>#include \"ThreadRole.h\"\n\nThreadRole InputThread;\nThreadRole GUIThread;\n\nclass Widget {\npublic :\n    virtual void onClick() REQUIRES(InputThread);\n    virtual void draw() REQUIRES(GUIThread);\n};\n\nclass Button : public Widget {\npublic :\n    void onClick() override {\n        depressed = true;\n        draw() ; // WARNING!\n    }\n};\n</code></pre>\n\n<p>However, neither doc indicates how you actually annotate <code>ThreadRole</code> to make this happen. What does <code>ThreadRole</code> have to look like to make this work?</p>\n"}, {"tags": ["c++", "pointers", "constants"], "comments": [{"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455145689, "post_id": 35327723, "comment_id": 58364053, "body": "In reality this is not int* but a pointer to a memory-heavy class I do not want to dereference and copy, hence the question."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1455145801, "post_id": 35327723, "comment_id": 58364100, "body": "And what should happen for non-const <code>T</code>?"}, {"owner": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 1, "creation_date": 1455145966, "post_id": 35327723, "comment_id": 58364170, "body": "I would argue that if the constructor requires non-const data, then either the constructor is under your control, and you can modify it to accept const data, or it is not, and then assuming that const data would suffice is wrong, even if that happens to be true today. You could obviously const_cast to eliminate the constness, but that smells of hack."}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1455145976, "post_id": 35327723, "comment_id": 58364174, "body": "@LogicStuff I don&#39;t see any problem initializing non-const T object with non-const pointers; initializing non-const T object with const pointers is not required (and is indeed illogical)."}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "reply_to_user": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 0, "creation_date": 1455146078, "post_id": 35327723, "comment_id": 58364210, "body": "@enrico-granata The constructor is indeed under my control. I cannot modify it to accept const data because I need non-const objects of type T to have non-const <code>a</code> and <code>b</code>. Const-cast is an option, but a rather ugly option given that I don&#39;t really want to break const rules."}, {"owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1455147818, "post_id": 35327723, "comment_id": 58364898, "body": "Why not overload the constructor? Provide two versions, one with <code>const</code> and the other not"}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "reply_to_user": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1455148069, "post_id": 35327723, "comment_id": 58364971, "body": "@Milo Lu I am not sure how that will help me: non-const T will not be able to initialize member pointers using const pointers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455149118, "post_id": 35327723, "comment_id": 58365304, "body": "Can you clarify whether you want <code>obj.a[0] = 5;</code> to be allowed ?"}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455149184, "post_id": 35327723, "comment_id": 58365331, "body": "@M.M Only for non-const objects of type T."}, {"owner": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 0, "creation_date": 1455149743, "post_id": 35327723, "comment_id": 58365502, "body": "This sounds like you either need two classes entirely - ConstT and NotConstT - or you need a TFactory that can construct either a const T with const data or a non-const T with non-const data. I would go for the former approach: have a ConstT, a NonConstT class, each with appropriate constructors, and whatever interop among the two you need, just becomes method overloads in either class. You can probably generate most of the boilerplate with preprocessor magic."}, {"owner": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 0, "creation_date": 1455149779, "post_id": 35327723, "comment_id": 58365514, "body": "I can&#39;t help but agree with @vlad_tepesch that this entire design problem smells of fishy and hacky. XY problem maybe?"}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "reply_to_user": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 0, "creation_date": 1455150695, "post_id": 35327723, "comment_id": 58365815, "body": "@EnricoGranata Yes, having two classes is possible. I do wonder however whether the language has a facility for making a relatively straightforward disclosure to the compiler that &quot;for the const objects of type T the pointers will be const, and can be initialized accordingly from other const pointers&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 1, "creation_date": 1455146721, "post_id": 35327961, "comment_id": 58364508, "body": "Unfortunately this is a hack --- I need objects of type T interacting with each other in a non-trivial fashion (for instance, I need things like T::Op(const&amp; T rhs) for further use in templates), so this workaround will unravel pretty quickly. It would seem to me that const-cast is more elegant solution by comparison."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455146779, "post_id": 35327961, "comment_id": 58364524, "body": "@random Wait, this solution is a &quot;hack&quot; but <code>const_cast</code> is elegant? Also why will it unravel? You can make the <code>rhs</code> take a template argument itself. For example <code>template&lt;typename Type&gt; T::Op(T&lt;Type&gt; const&amp; rhs)</code>."}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455147302, "post_id": 35327961, "comment_id": 58364720, "body": "Yes, <code>const_cast</code> is a hack as well, but it&#39;s a simple straightforward hack, if I may put it so. Yes, I can template this to oblivion, and maybe even should, but when I say &quot;unravel&quot; I mean precisely that I will have to account for this templated alternatives at every turn, when I really just want a <code>strongly const T</code> object, with propagated const-qualifier. Don&#39;t get me wrong, I agree you can achieve technically working code using the code you suggest (as with <code>const_cast</code>)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455147445, "post_id": 35327961, "comment_id": 58364762, "body": "@random If I&#39;d use <i>a hack</i> at all, I&#39;d prefer the shorter one. It&#39;s beyond matters then already."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455147550, "post_id": 35327961, "comment_id": 58364810, "body": "@random The <code>const_cast</code> alternative would remove constness not add it. It would not result in a &quot;strongly constant <code>T</code>&quot; at all. While this alternative actually does. The resulting object from <code>const_cast</code>ing away the <code>const</code>-ness of the pointers passed would only result in an object where the pointers can&#39;t be modified but what the pointers point to can be modified."}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455148593, "post_id": 35327961, "comment_id": 58365148, "body": "@Shoe We are talking past each other. Yes, const_cast will break the constness, not propagate it (which is why it&#39;s a hack). You might disagree, but the way I view it from &quot;language user&quot; perspective, if I cannot achieve the desired effect (&quot;strong const&quot;) I will just live without const, rather than use workarounds which will (among other consequences) force me to keep my class in header files."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 1, "creation_date": 1455149365, "post_id": 35327961, "comment_id": 58365379, "body": "@random please add an example of your interaction to your question. May be we can aid in working out a good solution. I can&#39;t help but something on this design smells fishy to me. Casting const away may lead to hidden bugs because the compiler may rely on the constness and adding that the object is not changed in deeper levels"}], "tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1455146745, "last_edit_date": 1455146745, "creation_date": 1455146448, "answer_id": 35327961, "question_id": 35327723, "link": "https://stackoverflow.com/questions/35327723/creating-const-objects-of-user-class-from-const-pointers/35327961#35327961", "title": "Creating const objects of user class from const pointers", "body": "<p>It seems like what you want is for:</p>\n\n<pre><code>const T obj(aRef, bRef);\n</code></pre>\n\n<p>to result in an object where you can't modify the integer the pointers point to. Which means having the member pointers being either <code>int const* const</code> or <code>int const*</code>.</p>\n\n<p>The reality is that the <code>const</code>\u00a0there is simply propagating to the member making them both <code>int* const</code>, which simply means that once the pointers are set they cannot changed.</p>\n\n<p>You can achieve what you want via something like:</p>\n\n<pre><code>template&lt;typename Type&gt;\nstruct T {\n    T(Type* a, Type* b): \n        a(a), b(b) {}\n\n    Type* a;\n    Type* b;\n};\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>int a = 1, b = 2;\nint const* aRef = &amp;a;\nint const* bRef = &amp;b;\nT&lt;int const&gt; obj(aRef, bRef);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b48a9090e06db862\" rel=\"nofollow\"><kbd>Live demo</kbd></a></p>\n\n<p>If you also want the pointers themselves to be <code>const</code>, then you can use:</p>\n\n<pre><code>T&lt;int const&gt; const obj(aRef, bRef);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": false, "score": 1, "last_activity_date": 1455150027, "creation_date": 1455150027, "answer_id": 35328599, "question_id": 35327723, "link": "https://stackoverflow.com/questions/35327723/creating-const-objects-of-user-class-from-const-pointers/35328599#35328599", "title": "Creating const objects of user class from const pointers", "body": "<p>You could use inheritance, like so:</p>\n\n<pre><code>struct CT\n{\n    CT(int const * a, int const * b) :\n        a(a), b(b) {}\n\n    int const * ca;\n    int const * cb;\n};\n\nstruct T : CT\n{\n    T(int * a, int * b) :\n        CT(a, b) {}\n\n    int * a() const { return const_cast&lt;int *&gt;(ca); }\n    int * b() const { return const_cast&lt;int *&gt;(cb); }    \n};\n</code></pre>\n\n<p>Or you could make <code>CT</code> and <code>T</code> unrelated types and provide implicit conversion from <code>T</code> to <code>CT</code>.</p>\n\n<p>I really wouldn't want to do this via <code>const T</code> vs. <code>T</code>. It's non-intuitive. Also you would have to disable the default copy-ctor. Otherwise one could always create a non-const copy from a const-ref, and then use that non-const copy to modify <code>*a</code> or <code>*b</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455151310, "post_id": 35328732, "comment_id": 58365995, "body": "Luis, please see the example I&#39;ve just added. I am not sure I see how to modify your code to achieve the desired outcome."}, {"owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455152958, "post_id": 35328732, "comment_id": 58366517, "body": "@random, see the edit to my answer. I am assuming that you are supposed to modify the array they are passing you. If that is the case, why are they passing you <code>const int*</code>?"}, {"owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455154576, "post_id": 35328732, "comment_id": 58366928, "body": "Also, how do you know how big the array is?"}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455176039, "post_id": 35328732, "comment_id": 58374171, "body": "No, I am not modifying the arrays I receive (I receive several sequentially). I do want to create my own array, and &quot;apply&quot; (via ::Max) the arrays I am passed to this array."}, {"owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455210590, "post_id": 35328732, "comment_id": 58398532, "body": "@random, I edited my response again. Hopefully, this time I understood what you want."}, {"owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455698522, "post_id": 35328732, "comment_id": 58600070, "body": "Luis, you are correct in describing my problem. I have upvoted your solution, but I can&#39;t officially &quot;accept&quot; it because my initial question was not about just coding the ArrayMax class (there are several ways to do that and I personally prefer the const_cast approach as I dislike templates). Rather, I wanted to know if there are any facilities in the language, like special keywords or notations, that would achieve propagating const-ness to pointer members of the class. It seems the correct answer is &quot;none&quot;, which to me looks like a strange omission in the language."}, {"owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455849947, "post_id": 35328732, "comment_id": 58685071, "body": "random, &quot;const-ness&quot; does &quot;propagate&quot; to pointer members of the class/struct. Take your initial <code>struct T</code> and create a const T: <code>const T obj(&amp;a, &amp;b);</code> You won&#39;t be able to modify obj.a or obj.b. <code>obj.a = &amp;b</code> will generate a compiler error, which would not be generated if you had instantiated it as mutable: <code>T obj(&amp;a, &amp;b);</code> T::a and T::b are &quot;pointers to int&quot; and in a <code>const T</code>, they are &quot;const pointers to int&quot;. I know that you would like them to be &quot;converted&quot; to &quot;pointers to const int&quot; but that is a different type, and it is not how it works."}, {"owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "reply_to_user": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "edited": false, "score": 0, "creation_date": 1455852248, "post_id": 35328732, "comment_id": 58685659, "body": "Your option is to create a class that behaves as you desire, with templates or const_cast&lt;&gt;. I know that you don&#39;t like templates, but I consider them a better option because you don&#39;t risk accidentally modifying the arrays that you receive. Templates keep the type of those pointers as <code>int const *</code> (i.e pointers to const int) while const_cast&lt;&gt; removes the &quot;const-ness&quot; from the pointers. Templates take a bit of getting used to, but once you do, they are not so bad. And they are very powerful."}], "tags": [], "owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "is_accepted": false, "score": 1, "last_activity_date": 1455210392, "last_edit_date": 1455210392, "creation_date": 1455150767, "answer_id": 35328732, "question_id": 35327723, "link": "https://stackoverflow.com/questions/35327723/creating-const-objects-of-user-class-from-const-pointers/35328732#35328732", "title": "Creating const objects of user class from const pointers", "body": "<p>I think I understand. You want to first call <code>ArrayWithMax</code>with your own writable storage, <code>int*</code>, and from then on, you will call it with your received non-mutable storage, <code>int const *</code>. You will then pass these non-mutable <code>ArrayWithMax</code> to your mutable's <code>ArrayWithMax::Max()</code> to evaluate your running maximum. Assuming this is want you want, I kind of agree with vlad_tepesch in that the design may need some work. That said, I would do it with templates like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nconst size_t ARRAY_SIZE = 2;   // hardcoded for now; it could be 1000\n\ntemplate &lt;typename T&gt;\nclass ArrayWithMax\n{\npublic:\n    ArrayWithMax(T array) : array_(array){}\n\n    // Max will accept any class, as long as it provides U::begin() const\n    // Max will not be generated when type T is const.\n    template &lt;typename U&gt;\n    void Max(const U&amp; rhs)\n    {\n        transform(begin(), end(), rhs.begin(), begin(),\n            [] (auto a, auto b) { return max(a, b); } );\n    }\n\n    T begin() { return array_; }\n    T end() { return array_+size(); }\n\n    T begin() const { return array_; }\n    T end() const { return array_+size(); }\n    size_t size() const { return ARRAY_SIZE; }\n\nprivate:\n    T array_;\n};\n\nint main()\n{\n    // some data to test with\n    int someArray[ARRAY_SIZE];\n    someArray[0] = 1;\n    someArray[1] = 2;\n    int const * received = someArray;\n\n    int someArray2[ARRAY_SIZE];\n    someArray2[0] = 0;\n    someArray2[1] = 8;\n    int const * received2 = someArray2;\n\n    // to store max\n    int myStorage[ARRAY_SIZE];\n    memset(myStorage, 0, sizeof(myStorage));\n\n    int* aWithMax = myStorage;\n\n    // first mutable ArrayWithMax with myStorage\n    ArrayWithMax&lt;int*&gt; a(aWithMax);\n\n    copy(a.begin(), a.end(), ostream_iterator&lt;int&gt;(cout, \" \"));\n    cout &lt;&lt; endl;\n\n    // other ArrayWithMax with const int*\n    ArrayWithMax&lt;const int*&gt; receivedArray(received);\n    a.Max(receivedArray);\n\n    copy(a.begin(), a.end(), ostream_iterator&lt;int&gt;(cout, \" \"));\n    cout &lt;&lt; endl;\n\n    // and another\n    ArrayWithMax&lt;const int*&gt; receivedArray2(received2);\n    a.Max(receivedArray2);\n\n    copy(a.begin(), a.end(), ostream_iterator&lt;int&gt;(cout, \" \"));\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This program was compiled as shown below, and it produces the following output:</p>\n\n<pre><code>Luiss-Air:const luis$ g++-5.3.0 -std=c++14 ArrayWithMax.C \nLuiss-Air:const luis$ a.out\n0 0 \n1 2 \n1 8 \nLuiss-Air:const luis$\n</code></pre>\n\n<p>If <code>ArrayWithMax</code> only calculates the running max, consider just using std::transform:</p>\n\n<pre><code>    // this does what you want to do with your class\n    transform(aWithMax, aWithMax+ARRAY_SIZE, received, aWithMax,\n        [] (auto a, auto b) { return max(a, b); });\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 1345857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2395b0daa3278b63208a62015ceb6d?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/1345857/random"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1455210392, "creation_date": 1455145419, "last_edit_date": 1455150467, "question_id": 35327723, "link": "https://stackoverflow.com/questions/35327723/creating-const-objects-of-user-class-from-const-pointers", "title": "Creating const objects of user class from const pointers", "body": "<p>Is it possible to force compiler propagate const-qualifier in my class, in order to supply const-pointers to the constructor? Consider the following code:</p>\n\n<pre><code>struct T\n{\n    T(int * a, int * b): \n        a(a), b(b) {}\n\n    int * a;\n    int * b;\n};\n\nint a = 1, b = 2;\nconst int * aRef = &amp;a;\nconst int * bRef = &amp;b;\nconst T obj(aRef, bRef); // error\n</code></pre>\n\n<p>This is clearly not allowed as constructor accepts <code>int *</code>, not <code>const int *</code>. Is there any way to achieve the same effect though, if there is no intention to modify the data at <code>a</code> and <code>b</code> in a <code>const</code> object of the class <code>T</code>?</p>\n\n<p><strong>Edit</strong> Here is a slightly more complicated example which is closer to actual problem. Imagine that I am passed sequentially a number of large arrays of <code>int[]</code> (say, 1000 integers in a row), and I want to evaluate running maximum of elements in <code>k</code>-th position (i.e. the running maximum is also 1000-int vector). As I am passed <code>const int *</code> to the start of the incoming array, I design a struct</p>\n\n<pre><code>struct ArrayWithMax\n{\npublic:\n    ArrayWithMax(int * array) : array(array) {}\n    void Max(const ArrayWithMax&amp; rhs);\n\nprivate:\n    int * array;\n}\n</code></pre>\n\n<p><code>ArrayWithMax::Max</code> will obviously cycle through both arrays, and assign the biggest value (<code>max(this-&gt;array[k], rhs.array[k]</code>) to the object's <code>array</code>. I'll skip the code for brevity. </p>\n\n<p>Now, the variable I will store the result in has to be non-const (as the elements of the max-array will change). However the updates I receive are <code>const int *</code>. The easiest way for me would be to initialize <code>const ArrayWithMax</code> from <code>const int *</code>, which is exactly what the question tries to achieve.</p>\n"}, {"tags": ["c++", "oracle", "api", "oracle-call-interface"], "comments": [{"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1455145698, "post_id": 35327273, "comment_id": 58364060, "body": "you did not add the oci.lib or other core lib, or you add wrong version of it (like 64 bit when compiling 32 bit or vice versa)"}, {"owner": {"reputation": 28, "user_id": 1837121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2993cbcfc36a68e87eef0e9e6e3bb8eb?s=128&d=identicon&r=PG", "display_name": "Imperator", "link": "https://stackoverflow.com/users/1837121/imperator"}, "reply_to_user": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 1, "creation_date": 1455146352, "post_id": 35327273, "comment_id": 58364348, "body": "Actually i did almost everything well. However the OCI library was written in C and to use that in C++ I had to add extern &quot;C&quot; { ... } around the OCI includes."}], "owner": {"reputation": 28, "user_id": 1837121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2993cbcfc36a68e87eef0e9e6e3bb8eb?s=128&d=identicon&r=PG", "display_name": "Imperator", "link": "https://stackoverflow.com/users/1837121/imperator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1455143730, "answer_count": 0, "score": 0, "last_activity_date": 1455143384, "creation_date": 1455143384, "question_id": 35327273, "link": "https://stackoverflow.com/questions/35327273/linking-error-when-compliling-legacy-oracle-oci-code", "closed_reason": "Duplicate", "title": "Linking error when compliling legacy Oracle OCI code", "body": "<p>I have to make changes to a program using the legacy OCI library. To make myself familiar with the API I have tried to play with some sample code, however it fails to compile with the following linking errors:</p>\n\n<blockquote>\n  <p>1>main.obj : error LNK2019: unresolved external symbol \"int __cdecl\n  oclose(struct cda_def *)\" (?oclose@@YAHPAUcda_def@@@Z) referenced in\n  function \"void __cdecl oci_error(void)\" (?oci_error@@YAXXZ) 1>main.obj\n  : error LNK2019: unresolved external symbol \"int __cdecl oerhms(struct\n  cda_def *,short,unsigned char *,int)\"\n  (?oerhms@@YAHPAUcda_def@@FPAEH@Z) referenced in function \"void __cdecl\n  oci_error(void)\" (?oci_error@@YAXXZ) 1>main.obj : error LNK2019:\n  unresolved external symbol \"int __cdecl oexec(struct cda_def *)\"\n  (?oexec@@YAHPAUcda_def@@@Z) referenced in function _main 1>main.obj :\n  error LNK2019: unresolved external symbol \"int __cdecl olog(struct\n  cda_def *,unsigned char *,unsigned char *,int,unsigned char\n  *,int,unsigned char *,int,unsigned int)\" (?olog@@YAHPAUcda_def@@PAE1H1H1HI@Z) referenced in function _main\n  1>main.obj : error LNK2019: unresolved external symbol \"int __cdecl\n  ologof(struct cda_def *)\" (?ologof@@YAHPAUcda_def@@@Z) referenced in\n  function \"void __cdecl oci_error(void)\" (?oci_error@@YAXXZ) 1>main.obj\n  : error LNK2019: unresolved external symbol \"int __cdecl oopen(struct\n  cda_def *,struct cda_def *,unsigned char *,int,int,unsigned char\n  *,int)\" (?oopen@@YAHPAUcda_def@@0PAEHH1H@Z) referenced in function _main 1>main.obj : error LNK2019: unresolved external symbol \"int __cdecl oparse(struct cda_def *,unsigned char *,int,int,unsigned int)\" (?oparse@@YAHPAUcda_def@@PAEHHI@Z) referenced in function _main\n  1>main.obj : error LNK2019: unresolved external symbol \"int __cdecl\n  obndra(struct cda_def *,unsigned char *,int,unsigned char\n  *,int,int,int,short *,unsigned short *,unsigned short *,unsigned int,unsigned int *,unsigned char *,int,int)\"\n  (?obndra@@YAHPAUcda_def@@PAEH1HHHPAFPAG3IPAI1HH@Z) referenced in\n  function _main</p>\n</blockquote>\n\n<p>I have added the path ...\\oci\\lib\\msvc to my project as an additional library location.</p>\n\n<p>Im using:\nVisual Studio 2015 Community edition.\nOracle 10.2.</p>\n\n<p>What could be the problem?\nAll help appreciated</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1455143358, "post_id": 35327197, "comment_id": 58363082, "body": "<code>step = (Xmax - Xmin) &#47; POINTS;</code> This will be calculated in integer arithmetic, and for <code>xmin = -2 and xmax = 2</code> will result in <code>step = 0</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455143419, "post_id": 35327197, "comment_id": 58363111, "body": "<code>int step;</code> should be <code>double step;</code> also calculate it as <code>step = (double)(Xmax - Xmin) &#47; (double)POINTS;</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1455145010, "post_id": 35327197, "comment_id": 58363787, "body": "Please note that your program may run differently due to floating point inaccuracies.  Your <code>step</code> calculation may be off by 1 if you used the same values, but built the program using different compiler options, or if you used a different compiler."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1455145970, "post_id": 35327197, "comment_id": 58364172, "body": "@Puppy That&#39;s not a valid close reason, find an approprite dupe or shut up! The only valid close reason I could think of is <i>&quot;Questions asking for debugging help ...&quot;</i> because the OP obviosly missed to use the debugger in 1st place."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1455145147, "post_id": 35327303, "comment_id": 58363837, "body": "Whether to perform initialization or assignment is mostly a stylistic choice. Can you explain how it would make a significant difference in his result?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455145748, "post_id": 35327303, "comment_id": 58364077, "body": "@Barmar - it would make it clear what the type of <code>step</code> is at the point where its value is first set and, shortly after that, when it is used (although I&#39;d move its initialization down to just above the loop; it&#39;s current placement is more or less random). And, since this question is tagged C++, it&#39;s not &quot;mostly a stylistic choice&quot;; it&#39;s sometimes a matter of correctness, and often a matter of efficiency. For the first, imagine a type that has no default constructor; for the second, a default constructor that&#39;s very expensive. Uninitialized variables should be quite rare in C++."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455146068, "post_id": 35327303, "comment_id": 58364206, "body": "@Barmar - further, even in languages like C that don&#39;t have constructors, initialization is far safer (to use a grossly overloaded term) than creating an uninitialized variable with the intention of assigning a value to it later."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": -1, "last_activity_date": 1455143489, "creation_date": 1455143489, "answer_id": 35327303, "question_id": 35327197, "link": "https://stackoverflow.com/questions/35327197/why-are-all-my-double-precision-calculations-in-a-loop-give-the-same-results/35327303#35327303", "title": "Why are all my double precision calculations in a loop give the same results?", "body": "<p>First, use <strong>initialization</strong> instead of declaring a variable with no value and later assigning a value to it. So, for example, remove <code>double x, y;</code> and change these two lines:</p>\n\n<pre><code>x = Xmin + (step * i);\ny = 0.0572 * cos(4.667 * x) + 0.0218 * pi * cos(12.22 * x);\n</code></pre>\n\n<p>to these:</p>\n\n<pre><code>double x = Xmin + (step * i);\ndouble y = 0.0572 * cos(4.667 * x) + 0.0218 * pi * cos(12.22 * x);\n</code></pre>\n\n<p>That makes it much easier to see what types are involved in expressions like those.</p>\n\n<p>Now do the same for the variable <code>step</code>. If the problem isn't immediately obvious when you do that, add an output statement that shows the value of <code>step</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455146259, "post_id": 35327608, "comment_id": 58364301, "body": "Looks like the drive-by downvoters are on the prowl tonight. +1 from me."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455146373, "post_id": 35327608, "comment_id": 58364357, "body": "@PeteBecker Puppy (speculativey suspected, because of their typical pattern) isn&#39;t really a drive-by downvoter, they have their reasonings and I understand why."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1455145289, "last_edit_date": 1455145289, "creation_date": 1455144866, "answer_id": 35327608, "question_id": 35327197, "link": "https://stackoverflow.com/questions/35327197/why-are-all-my-double-precision-calculations-in-a-loop-give-the-same-results/35327608#35327608", "title": "Why are all my double precision calculations in a loop give the same results?", "body": "<p>You have some problems with integer division and type precision.</p>\n\n<ol>\n<li><p>Obviously you wan't to apply <code>step</code> with a <code>double</code> precision context, thus <code>step</code> itself should be declared as <code>double</code> type:</p>\n\n<pre><code>double step = .0;\n</code></pre></li>\n<li><p>The expression <code>(Xmax - Xmin) / POINTS</code> lacks for integer division that can't provide values from the range <em><code>+-]0-1.0[</code></em>. To overcome the integer division issue make at least one operand being casted to <code>double</code>:</p>\n\n<pre><code>double step = (double)(Xmax - Xmin) / POINTS;\n</code></pre></li>\n</ol>\n\n<p><kbd><a href=\"http://ideone.com/grLyUS\" rel=\"nofollow\"><strong>Live Demo</strong></a></kbd></p>\n"}], "owner": {"reputation": 7, "user_id": 5910788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ca72ebc16d7bc6b3836ebc6cced231?s=128&d=identicon&r=PG&f=1", "display_name": "Cami Maine", "link": "https://stackoverflow.com/users/5910788/cami-maine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455146189, "creation_date": 1455143149, "last_edit_date": 1455146189, "question_id": 35327197, "link": "https://stackoverflow.com/questions/35327197/why-are-all-my-double-precision-calculations-in-a-loop-give-the-same-results", "title": "Why are all my double precision calculations in a loop give the same results?", "body": "<p>I have some trouble doing this question:</p>\n\n<blockquote>\n  <p>Your first program is a simple mathematical calculation program. The program will take inputs from the user. Evaluate <i>f</i>(<i>x</i>) and display the results in a table. The inputs from the user will be: two <code>double</code>s <code>xmin</code> and <code>xmax</code>. A symbolic constant (<code>POINTS</code>) is used to determine the number of rows in the table. The equation is the sum of two cosine functions;</p>\n  \n  <p><i>f</i>(<i>x</i>) = 0.0572 cos(4.667 <i>x</i>) + 0.0218 &pi; cos(12.22 <i>x</i>);  [Equation 1]</p>\n  \n  <p>Hint:</p>\n  \n  <ul>\n  <li>You may use the function <code>cos</code> found in <code>&lt;cmath&gt;</code>, in your calculations.</li>\n  <li>The value for &pi; is a named constant, and its value is 3.1416;</li>\n  </ul>\n  \n  <p>Approach:</p>\n  \n  <ol>\n  <li>Define a symbolic constant (<code>POINTS</code>) to set the number of rows to 20,</li>\n  <li>Ask the user for the values of <code>xmin</code> and <code>xmax</code>;</li>\n  <li>Using the three values above (<code>POINTS</code>, <code>xmin</code> and <code>xmax</code>) compute the values for increments on <code>x</code>;</li>\n  <li>Use Equation 1 to compute the values of <i>f</i>(<i>x</i>);</li>\n  <li>Display a table with the following format:</li>\n  </ol>\n  \n  <p>Assume the value for <code>POINTS</code> is 21, and the user enters <code>xmin</code> = &minus;2 and <code>xmax</code> = 2; then your program should display a table like:</p>\n  \n  <pre class=\"lang-none prettyprint-override\"><code>X-Value   |   Y-Value\n__________|__________\n -2           -0.0043\n -1.8         -0.0982\n -1.6         +0.0378\n -1.4         +0.0438\n -1.2         +0.0099\n -1           +0.0618\n -0.8         -0.1118\n -0.6         -0.0198\n -0.4         -0.0047\n -0.2         -0.0184\n 0            +0.1257\n 0.2          -0.0184\n 0.4          -0.0047\n 0.6          -0.0198\n 0.8          -0.1118\n 1             0.0618\n 1.2           0.0099\n 1.4           0.0438\n 1.6           0.0738\n 1.8          -0.0982\n 2            -0.0043\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>\n</blockquote>\n\n<p>So far I got parts 1 to 4 but I'm am struggling with part 5. Here is what I have for my code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n#define pi 3.1416\n#define POINTS 20\nusing namespace std;\nint main()\n{\n    int Xmin, Xmax;\n    int step;\n\n    cout &lt;&lt; \"Enter a value for xMin and xMax:\\n\";\n    cin &gt;&gt; Xmin &gt;&gt; Xmax;\n    double x, y;\n    step = (Xmax - Xmin) / POINTS;\n\n    cout &lt;&lt; \"X-VALUES \" &lt;&lt; \"\" &lt;&lt; \"| \" &lt;&lt; \"\" &lt;&lt; \"Y-VALUES\" &lt;&lt; endl;\n    cout &lt;&lt; \"_________\" &lt;&lt; \"\" &lt;&lt; \"|_\" &lt;&lt; \"\" &lt;&lt; \"_________\" &lt;&lt; endl;\n\n    for (int i = 0; i &lt; POINTS; ++i) \n    {\n        x = Xmin + (step * i);\n\n        y = 0.0572 * cos(4.667 * x) + 0.0218 * pi * cos(12.22 * x);\n\n\n        cout &lt;&lt; x &lt;&lt; \"\\t \" &lt;&lt; y &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"____________________\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>It does everything, except it does not print the right values. here is what it prints from my code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter a value for xMin and xMax:\n-2\n2\n\n    X-Value   |   Y-Value\n    __________|__________\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n     -2           -0.0043\n    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>\n\n<p>I don't know what am I doing wrong. I can't get the values exactly like the table on top in part 5. It 's just repeating itself 20 times. The <code>i</code> increments by one so shouldn't I see a value change on the next increment when the program outputs the <code>x</code> and <code>y</code>? Help me, I'm so confused.</p>\n"}, {"tags": ["c++", "pointers", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1455143582, "post_id": 35327136, "comment_id": 58363187, "body": "What did you learn from the debugger?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1455143803, "post_id": 35327136, "comment_id": 58363286, "body": "Also please bear in mind that if you <code>new</code> a piece of memory, you should probably also <code>delete</code> it at some point (look at <code>addToEdgeList</code>, and then look at <code>~vertex()</code>)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1455144198, "post_id": 35327136, "comment_id": 58363446, "body": "Look at your <code>addEdge</code> function.  Does it look right to you, allocating memory, pointing to it by adding the pointer to the edge list, and then deallocating that very same memory?  If you can&#39;t see the obvious huge flaw in that, then it would be a good time to review a tutorial on dynamically allocated memory and pointers."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455144738, "post_id": 35327136, "comment_id": 58363680, "body": "<i>I can use C++ STL vectors to do this but this pointers issue is bugging me too much</i> --  So create your own <code>vector</code> class and use it.  That is much better learning experience than doing one-off allocations of <code>new</code> and <code>delete</code> as you&#39;re doing now.  By making your own vector class, you learn allocation, deallocation, copy / assignment, etc.  Then you take that tool you built and use it in your adjacency list program.   You learn none of those things writing code like you&#39;ve written."}, {"owner": {"reputation": 13, "user_id": 5442730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCK8wjw713Q/AAAAAAAAAAI/AAAAAAAAANw/UrcM9WOTkzk/photo.jpg?sz=128", "display_name": "Manoj Parihar", "link": "https://stackoverflow.com/users/5442730/manoj-parihar"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455149503, "post_id": 35327136, "comment_id": 58365424, "body": "thank you for pointing that out @PaulMcKenzie.. removed those de-allocations and got my code running."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5442730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCK8wjw713Q/AAAAAAAAAAI/AAAAAAAAANw/UrcM9WOTkzk/photo.jpg?sz=128", "display_name": "Manoj Parihar", "link": "https://stackoverflow.com/users/5442730/manoj-parihar"}, "edited": false, "score": 0, "creation_date": 1455149656, "post_id": 35327553, "comment_id": 58365469, "body": "Thank you. Got it working. Also the above code works if I don&#39;t take graph array as pointers."}, {"owner": {"reputation": 363, "user_id": 5868851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fiyld.jpg?s=128&g=1", "display_name": "Zelnes", "link": "https://stackoverflow.com/users/5868851/zelnes"}, "reply_to_user": {"reputation": 13, "user_id": 5442730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCK8wjw713Q/AAAAAAAAAAI/AAAAAAAAANw/UrcM9WOTkzk/photo.jpg?sz=128", "display_name": "Manoj Parihar", "link": "https://stackoverflow.com/users/5442730/manoj-parihar"}, "edited": false, "score": 0, "creation_date": 1455161625, "post_id": 35327553, "comment_id": 58368717, "body": "Take care also on your memory loss, there are several. Try to use valgrind if you don&#39;t use it yet."}], "tags": [], "owner": {"reputation": 363, "user_id": 5868851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fiyld.jpg?s=128&g=1", "display_name": "Zelnes", "link": "https://stackoverflow.com/users/5868851/zelnes"}, "is_accepted": true, "score": 0, "last_activity_date": 1455144640, "creation_date": 1455144640, "answer_id": 35327553, "question_id": 35327136, "link": "https://stackoverflow.com/questions/35327136/adjacency-list-representation-in-c-using-class-and-pointers-head-to-lists-no/35327553#35327553", "title": "Adjacency List representation in C++, using class and pointers, head to lists not working properly", "body": "<p>You have several errors on deallocating your pointers.<br>\nFirst, don't do <code>edge *ptr = new edge;</code> but <code>edge *ptr = head;</code> and after, remove your <code>delete</code> on <code>*ptr</code>.<br>\nIn <code>addEdge</code> function, you add your edges pointers to your graph, so, as they are pointers, you should not <code>delete</code> them at the end of the function, otherwise your graph will point on NULL.<br>\nThis is my output:</p>\n\n<pre><code>1 A 1\n0 B 0\nA-1-2\n1 A 2\n0 C 0\nB-0-2\n0 B 2\nC-0-1\n0 C 1\nA (0) -&gt;1 -&gt;2\nB (1) -&gt;0 -&gt;2\nC (2) -&gt;0 -&gt;1\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5442730, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCK8wjw713Q/AAAAAAAAAAI/AAAAAAAAANw/UrcM9WOTkzk/photo.jpg?sz=128", "display_name": "Manoj Parihar", "link": "https://stackoverflow.com/users/5442730/manoj-parihar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 35327553, "answer_count": 1, "score": 0, "last_activity_date": 1455144640, "creation_date": 1455142942, "question_id": 35327136, "link": "https://stackoverflow.com/questions/35327136/adjacency-list-representation-in-c-using-class-and-pointers-head-to-lists-no", "title": "Adjacency List representation in C++, using class and pointers, head to lists not working properly", "body": "<p>I am trying to implement adjacency lists using classes and pointers in C++. I have created a class of vertices, with an array of pointers pointing at each vertex. further in each vertex class, their is a linked list that should contain adjacency list of that vertex. </p>\n\n<p>The following code runs, but does not give the correct adjacency list correctly. The head of the adjacency list changes, I don't know why. during passing pointers to different functions, this must be happening. The head gets assigned to the edge that is given to the function addToEdgeList() in some cases, but does not stay what is desired. </p>\n\n<p>Here is my code. I can use C++ STL vectors to do this but this pointers issue is bugging me too much.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nclass vertex;\nint vertexCount = 0;\nstruct edge {\n        int vertexIndex = 0;            //takes the index of vertex of which the edge is.\n        edge *next = NULL;              //the adjacency list of that index.\n};\nclass vertex    {\n    std::string name;                   //name of the vertex. But it can only be called using numbers(0, 1, 2,...)\n    struct edge *head;          //the beginning of the edge it points to.\n    public:\n        vertex()    {\n            name = \"\";\n            head = new edge;\n            head = NULL;\n        }\n        vertex(std::string abc) {\n            name = abc;\n            head = NULL;\n        //  vertexCount += 1;\n        }\n        edge * getEdgeBeg() {\n            return head;\n        }\n        void setName(std::string abc)   {\n            name = abc;\n            vertexCount += 1;\n        }\n        void addToEdgeList(edge * e)    {\n            if (head != NULL)   {\n                edge *ptr = new edge;\n                ptr = this-&gt;head;\n                std::cout &lt;&lt; name &lt;&lt; \"-\" &lt;&lt; ptr-&gt;vertexIndex &lt;&lt; \"-\" &lt;&lt; e-&gt;vertexIndex &lt;&lt; std::endl;\n                while(ptr-&gt;next != NULL)    {\n                    ptr = ptr-&gt;next;\n                }\n                ptr-&gt;next = e;\n\n            }\n            else    {\n                head = e;\n            }\n            std::cout &lt;&lt; head-&gt;vertexIndex &lt;&lt; \" \" &lt;&lt; name &lt;&lt; \" \" &lt;&lt; e-&gt;vertexIndex &lt;&lt; std::endl;    \n        }\n        void printEdgeList()    {\n            edge *ptr = new edge;\n            ptr = head;\n            while(ptr)  {\n                std::cout &lt;&lt; \" -&gt;\" &lt;&lt; ptr-&gt;vertexIndex;\n                ptr = ptr-&gt;next;\n            }\n            delete ptr; \n        }\n        void printName()    {\n            std::cout &lt;&lt; name;\n        }\n        ~vertex()   {\n            delete head;\n        }\n}*graph[15];\n\n\nvoid addEdge(int vertex1, int vertex2)  {\n    edge *temp1 = new edge;\n    edge *temp2 = new edge;\n    temp1-&gt;vertexIndex = vertex2;\n    temp1-&gt;next = NULL;\n    graph[vertex1]-&gt;addToEdgeList(temp1);\n    temp2-&gt;vertexIndex = vertex1;\n    temp2-&gt;next = NULL;\n    graph[vertex2]-&gt;addToEdgeList(temp2);\n    delete temp1;\n    delete temp2;\n}\nvoid printGraph()   {\n    int i;\n    for(i = 0; i &lt; vertexCount; i++)    {\n        graph[i]-&gt;printName();\n        std::cout &lt;&lt; \" (\" &lt;&lt; i &lt;&lt; \")\";\n        graph[i]-&gt;printEdgeList();\n        std::cout &lt;&lt; std::endl;\n    }\n}\n\nint main()  {\n    vertex *vptr[15];\n\n    vptr[0] = new vertex;\n    vptr[0]-&gt;setName(\"A\");\n    graph[0] = vptr[0];\n\n    vptr[1] = new vertex;\n    vptr[1]-&gt;setName(\"B\");\n    graph[1] = vptr[1];\n\n    vptr[2] = new vertex;\n    vptr[2]-&gt;setName(\"C\");\n    graph[2] = vptr[2];\n\n    addEdge(0, 1);\n    addEdge(0, 2);\n    addEdge(1, 2);\n    printGraph();\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile", "automatic-variable"], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 3794803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y7Kj4.jpg?s=128&g=1", "display_name": "E. Spiroux", "link": "https://stackoverflow.com/users/3794803/e-spiroux"}, "is_accepted": false, "score": 0, "last_activity_date": 1455142698, "creation_date": 1455142698, "answer_id": 35327058, "question_id": 35326931, "link": "https://stackoverflow.com/questions/35326931/makefiles-specific-no-input-files-automatic-variables/35327058#35327058", "title": "Makefiles: specific &#39;no input files&#39;, automatic variables", "body": "<p>You must do a variable before put it in g++\nlike :</p>\n\n<p><code>FT_C= $(src/%.cpp)\nFT_O=$(FT_C:.c=.o)</code></p>\n\n<p>and</p>\n\n<p><code>g++ $(CFLAGS) -I include -o $(FT_O) -c $(FT_C)</code></p>\n\n<p>and don't put your .h in compilation '-I' are here for it.</p>\n\n<p>Look this example if you want understand what i mean: </p>\n\n<p><a href=\"https://github.com/emericspiroux/wolf3d/blob/master/libft/Makefile\" rel=\"nofollow\">https://github.com/emericspiroux/wolf3d/blob/master/libft/Makefile</a></p>\n"}, {"tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 2, "last_activity_date": 1455145502, "last_edit_date": 1455145502, "creation_date": 1455143505, "answer_id": 35327308, "question_id": 35326931, "link": "https://stackoverflow.com/questions/35326931/makefiles-specific-no-input-files-automatic-variables/35327308#35327308", "title": "Makefiles: specific &#39;no input files&#39;, automatic variables", "body": "<p>Your build target <code>%.o</code> is miswritten. You can't use the <code>%</code> in the command section, so the names of the destination file and dependent file won't ever match.</p>\n\n<p>The proper change is to do the following:</p>\n\n<pre><code>%.o: src/%.cpp include/%.h\n    g++ $(CFLAGS) \\\n    -I include \\\n    -o $@ \\\n    -c src/$(@:%.o=%.cpp)\n</code></pre>\n\n<p>Just to explain the changes, the <code>-o</code> needs the target file, which is pretty much always written as <code>$@</code> in Makefiles, as that's the name of the target.</p>\n\n<p>Secondly, the source file needs to be defined in terms of the target, the operator in question is a pattern replacement operator <code>$(@:%.o=%.cpp)</code>, so what that does is take the target - which will match a filename of <code>&lt;blah&gt;.o</code>, then it pattern match replaces <code>.o</code> with <code>.cpp</code>.</p>\n\n<p>So in the case of the target <code>mylib.o</code>, the variable <code>$@</code> is <code>mylib.o</code>, and the result of doing <code>$(@:%.o=%.cpp)</code> is to turn <code>mylib.o</code> into <code>mylib.cpp</code>. As a result it is the expected file that is being compiled, and the expected target is build.</p>\n\n<p>Rules using a <code>%</code> pattern in them are what are referred to as implicit rules, and are used to reduce the complexity of the code being written - if you had a pile of files that shared the target pattern: <code>blah.o: src/blah.cpp src/blah.h</code>, then you use the implicit rule to only have to write the target once, then you need to write the commands in terms of the target.</p>\n"}], "owner": {"reputation": 144, "user_id": 5675285, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55d89d3584b4866745dab5fab6e1da42?s=128&d=identicon&r=PG&f=1", "display_name": "limitIntegral314", "link": "https://stackoverflow.com/users/5675285/limitintegral314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1455145502, "creation_date": 1455142110, "question_id": 35326931, "link": "https://stackoverflow.com/questions/35326931/makefiles-specific-no-input-files-automatic-variables", "title": "Makefiles: specific &#39;no input files&#39;, automatic variables", "body": "<p>I'm new to makefiles, and they puzzle me. I have the following folder hierarchy:</p>\n\n<p>A folder named <code>lib</code> contains tow folders: <code>include</code> (with file <code>mylib.h</code>) and <code>src</code> (with file <code>mylib.cpp</code>). It also contains a Makefile, which, for some reason, gives me an error.</p>\n\n<p>The full makefile is:</p>\n\n<pre><code>CFLAGS = -Wall -fPIC\nOBJECTS = mylib.o\n\nall: libmine.so\n\nlibmine.so: $(OBJECTS)\n            g++ -shared $(CFLAGS) \\\n            -o libmine.so \\\n            $(OBJECTS)\n\n%.o:        src/%.cpp include/%.h\n            g++ $(CFLAGS) \\\n            -I include \\\n            -o %.o \\\n            -c src/%.cpp\n\nclean:\n            rm src/*.o\n            rm libmine.so\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>mr209@Quantum:~/Desktop/hw1/lib$ make\ng++ -Wall -fPIC \\\n            -I include \\\n            -o %.o \\\n            -c src/%.cpp\ng++: error: src/%.cpp: No such file or directory\ng++: fatal error: no input files\ncompilation terminated.\nmake: *** [mylib.o] Error 4\n</code></pre>\n\n<p>But the file <strong>is</strong> present. Thus, <code>make</code> is doing weird things, causing it not to be able to find the <code>.cpp</code> file.</p>\n\n<p>In order to make <code>libmine.so</code>, <code>g++</code> will have to do something with <code>mylib.o</code>, and for a generic <code>.o</code> file I have written some lines of code.</p>\n\n<p>Here is what I was thinking: in order to make <code>libmine.so</code>, <code>g++</code> will have to do something with <code>mylib.o</code>. Thus, in <code>lib</code>, a file named <code>mylib.o</code> has to appear. Using the generic <code>%.0</code> rule, this file is made from <code>mylib.cpp</code> in <code>src</code> and <code>mylib.h</code> in <code>include</code> (hence the first line of the <code>%.o</code> rule). The file is made using <code>g++</code>, which has to look in <code>include</code> for additional headers, produces <code>mylib.o</code> as output, and compiles <code>src/mylib.cpp</code>, but <code>-c</code> guarantees that a <code>.o</code> file is produced.</p>\n\n<p>Obviously, something goes wrong, and I am unable to figure out what. Only 2 days ago have I learned what Makefiles are and why one should learn how to deal with them, so I'm not that much of an expert.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "smart-pointers", "raii"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1455145936, "post_id": 35326858, "comment_id": 58364154, "body": "Upvoted for interest. I&#39;ve run into this (anti-?)pattern in the past, though thankfully recent (and seemingly infinite) rewrites of this project have made the whole architecture exponentially less code-smelly and meant I don&#39;t need to think about it right now... but I&#39;m still interested in answers to the questions I had in the past. I also just realised this all seems highly relevant to the PImpl idiom and inheritance among implementation classes."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1455148646, "post_id": 35326858, "comment_id": 58365161, "body": "I&#39;d see this as an anti pattern. Feels like you&#39;re associating stuff that isn&#39;t meant to be associated like that. Can you possibly extend the use case(s) a bit more?"}, {"owner": {"reputation": 431, "user_id": 2896121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c21847e05c6b288c7d7da7b96ceaaaf?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin Baranov", "link": "https://stackoverflow.com/users/2896121/constantin-baranov"}, "edited": false, "score": 0, "creation_date": 1455157781, "post_id": 35326858, "comment_id": 58367731, "body": "In your first sample you waste memory by storing two pointers to the same object. If you need <code>Base</code> be a truly polymorphic, you might have private <code>virtual BaseMember *getMember() = 0</code> there and store <code>DerivedMember*</code> in <code>Derived</code> object only. If <code>Base</code> only serves as a common implementation for other classes, you might make it a template (see CRTP) and store <code>DerivedMember*</code> in the <code>Base&lt;DerivedMember&gt;</code> object."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1455182604, "post_id": 35327330, "comment_id": 58378121, "body": "Cool, now it&#39;s the excellent answer I always suspected it was :D"}, {"owner": {"reputation": 5290, "user_id": 1381158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/006e901151b153171d7a5918b56c511c?s=128&d=identicon&r=PG", "display_name": "Inductiveload", "link": "https://stackoverflow.com/users/1381158/inductiveload"}, "edited": false, "score": 0, "creation_date": 1455527235, "post_id": 35327330, "comment_id": 58511700, "body": "This is a good way to get access to the pointer, and a useful technique in general to get access to a <code>unique_ptr</code> before turning it over to a base class. On the other hand, it needs repeating for each derived class, and I still can&#39;t shake the feeling that the whole hierarchy is flawed!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455533693, "post_id": 35327330, "comment_id": 58516045, "body": "You may add a layer <code>template &lt;typename DerivedClassT&gt; class DerivedT</code> and then have all <code>Derived</code> inherit from <code>DerivedT&lt;DerivedClass&gt;</code> (which has so the only tricky constructor)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1455180205, "last_edit_date": 1455180205, "creation_date": 1455143632, "answer_id": 35327330, "question_id": 35326858, "link": "https://stackoverflow.com/questions/35326858/using-storing-derived-member-in-derived-class-with-base-class-that-stores-base-m/35327330#35327330", "title": "Using/storing derived member in derived class with base class that stores base member", "body": "<p>You may use delegating constructor:</p>\n\n<pre><code>class Derived: public Base\n{\npublic:\n\n    Derived(std::unique_ptr&lt;DerivedMember&gt; _dmember):\n        Derived(_dmember, _dmember.get())\n    {}\n\n    // public access functions here as before\nprivate:\n Derived(std::unique_ptr&lt;DerivedMember&gt;&amp; _dmember, DerivedMember* ptr):\n        Base(std::move(_dmember)),\n        dmember(ptr)\n    {}\nprivate:\n    // handy handle to the derived class so we don't need to downcast the base (or even access it!)\n    DerivedClass* dmember\n};\n</code></pre>\n"}], "owner": {"reputation": 5290, "user_id": 1381158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/006e901151b153171d7a5918b56c511c?s=128&d=identicon&r=PG", "display_name": "Inductiveload", "link": "https://stackoverflow.com/users/1381158/inductiveload"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 1, "accepted_answer_id": 35327330, "answer_count": 1, "score": 6, "last_activity_date": 1455527089, "creation_date": 1455141851, "last_edit_date": 1455527089, "question_id": 35326858, "link": "https://stackoverflow.com/questions/35326858/using-storing-derived-member-in-derived-class-with-base-class-that-stores-base-m", "title": "Using/storing derived member in derived class with base class that stores base member", "body": "<p>A situation I often come up against is having a set of classes, <code>Base</code> and <code>Derived</code>, where the <code>Base</code> class has ownership of a base-class member <code>BaseMember</code>, and the <code>Derived</code> class has a reference or pointer to the same object, but as a <code>DerivedMember</code>.</p>\n\n<p>For example, a UI panel class that contains a specific instance of a certain type of control with some special-control functions, inheriting from a general class that contains a general control and has general-control functions.</p>\n\n<p>First, say that <code>BaseMember</code> is inherited by <code>DerivedMemeber</code>.</p>\n\n<p>Without using smart pointers, I might do something like this:</p>\n\n<pre><code>class Base\n{\nprotected:\n    // receive ownership but only because we say so,\n    // someone else can still try to delete as it's \"just a pointer\"\n    Base(BaseMember* _bmember):\n        bmember(_bmember)\n    {}\n\npublic:\n    virtual ~Base()\n    {\n        // perform an owner's duty\n        delete bmember;\n    }\n\n    // functions that might be based on BaseMember + other base state\n    void SetMemberId(....) \n    {\n        bmember-&gt;SetId(baz);\n    }\n\nprivate:\n    int baz;\n    BaseMember* bmember; //owned, but not smartly\n}\n\nclass Derived: public Base\n{\npublic:\n    Derived(DerivedMember* _dmember):\n        Base(_dmember),\n        dmember(_dmember)\n    {}\n\n    // functions that only make sense for Derived + Derived/Base state\n    void SetDerivedFrobulation()\n    {\n        // only a DerivedMember has frobulation, so only\n        // Derived allows users to access it\n        dmember-&gt;setFrobulation(foo);\n    }\n\nprivate:\n    int foo; // some state\n    DerivedMember* dmember; // no ownership here\n}\n</code></pre>\n\n<p>With smart pointers (C++11 and up, specifically, I don't really care about older C++ in this case), I am tempted to do something like this and never let the <code>Base/DerivedMember</code> object out into dumb-pointer-land where it could leak if there was an exception somewhere inconvenient.</p>\n\n<pre><code>class Base\n{\nprotected:\n    // receive ownership\n    Base(std::unique_ptr&lt;BaseMember&gt; _member):\n        member(std::move(_member))\n    {}\n\n    virtual ~Base()\n    {}\n\npublic:\n    // public access functions here as before\n\nprivate:\n    std::unique_ptr&lt;BaseMember&gt; member;\n}\n\nclass Derived: public Base\n{\npublic:\n    // pass the ownership down by unique_ptr\n    Derived(std::unique_ptr&lt;DerivedMember&gt; _dmember):\n        Base(std::move(_dmember)),\n        dmember(_dmember.get()) // _dmember is moved! SEGFAULT if access dmember later!\n    {}\n\n    // public access functions here as before\n\nprivate:\n    // handy handle to the derived class so we don't need to downcast the base (or even access it!)\n    DerivedClass* dmember\n}\n</code></pre>\n\n<p>As I noted there, you can't \"steal a peek\" at the <code>DerivedMember</code> class as it comes in to the <code>Derived</code> constructor, because the <code>unique_ptr</code> is <code>move</code>d away before <code>Derived</code> gets a look in.</p>\n\n<p>I can see a solution in providing a <code>protected</code> access to the <code>BaseMember</code> and <code>static_cast</code>ing back to <code>DerivedMember</code> in the <code>Derived</code> constructor (i.e. after the <code>Base</code> constructor is done), but this seems an ugly way to get access back to a variable we let slip though our fingers!</p>\n\n<p>Another way could be each inheritor of <code>Base</code> owns the pointer, and base just gets a dumb pointer. In this case, the <code>Base</code> destructor doesn't get access to the member, as it's already gone. Also it would duplicate the ownership logic needlessly.</p>\n\n<p>I think either:</p>\n\n<ul>\n<li>This is symptomatic of an anti-pattern and the design of the whole <code>Base</code>/<code>Derived</code>/<code>BaseMember</code>/<code>DerivedMember</code> system is not good practice.</li>\n<li>I'm missing a trick and there is a clean way to do this without fumbling a smart pointer and making a leak possible or adding functions and exposing interfaces or casting too much.</li>\n</ul>\n\n<p>Is this a good pattern for re-use, or should I look elsewhere?</p>\n\n<h2>Expanding on the use case (EDIT)</h2>\n\n<p>In a core library, I have a class <code>DataInterpreter</code> which shows \"some interpretation\" of data - could be a string, an image, etc. This is then inherited by, amongst others, <code>TextInterpreter</code> which presents a <code>string</code>.</p>\n\n<p>I then have a <code>DataDisplayPanel</code> class which represents a piece of UI for displaying in an abstract sense. Exactly what is in this panel will depend on the interpreter used: a <code>TextInterpreter</code> should get a text entry field and say a button to set some text display option, and that is handled in <code>TextDisplayPanel</code>, which has \"special\" knowledge of the text aspect of the interpreter.</p>\n\n<p>There is then a <code>DataAggregatePanel</code> which combines a number of <code>DataDisplayPanels</code> and provides some global settings that affect all displays (via virtual functions), and manages the panels in a <code>std::vector&lt;std::unique_ptr&lt;DataDisplayPanel&gt; &gt;</code>. This aggregate class doesn't deal with any of the derived classes at all, any functions would be polymorphic and defined in the base.</p>\n\n<p>In the application (which depends on the core library), these classes are extended (by inheritance or composition, whichever makes more sense). For example, if the application is a WX GUI, I might have <code>wxDataAggregatePanel</code> which contains <code>wxTextDisplayPanel</code> (and others), all of which are <code>wxPanels</code>. In this case, <code>wxTextDisplayPanel</code> might own a <code>wxTextEntry</code> and either own or inherit <code>TextInterpreter</code> and use its knowledge of the <code>TextInterpreter</code>'s specific methods to fill the text box with a string.</p>\n"}, {"tags": ["c++", "text-files"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142118, "post_id": 35326838, "comment_id": 58362536, "body": "You&#39;re wrong with the sequential logic, rather use a loop like <code>while (in_file &gt;&gt; number &gt;&gt; number1)</code>"}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142248, "post_id": 35326838, "comment_id": 58362590, "body": "sorry, that&#39;s because i typed it wrong"}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142390, "post_id": 35326838, "comment_id": 58362656, "body": "but it&#39;s still not working"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142477, "post_id": 35326838, "comment_id": 58362682, "body": "As mentioned you got the sequential logic wrong. Before entering the loop you already read <code>number</code> once."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142922, "post_id": 35327092, "comment_id": 58362856, "body": "Well, that doesn&#39;t print <code>cout &lt;&lt; &quot;There&#39;re no number in the file.&quot; &lt;&lt; endl;</code>."}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455143439, "post_id": 35327092, "comment_id": 58363122, "body": "I tried deleting that part just as what you said but it doesn&#39;t work :(( Thank you!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455143524, "post_id": 35327092, "comment_id": 58363156, "body": "@ZukuYuka, what does &quot;it doesn&#39;t work mean&quot;? Not compiling, not producing the right output, what output is it producing?"}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455143634, "post_id": 35327092, "comment_id": 58363210, "body": "&quot;Press any key to continue.&quot; This line appeared ;;A ;;"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455143887, "post_id": 35327092, "comment_id": 58363320, "body": "@ZukuYuka, did you see any other message?"}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455147181, "post_id": 35327092, "comment_id": 58364687, "body": "@RSahu nope :( Jonathan: yea I&#39;m sure"}, {"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455151995, "post_id": 35327092, "comment_id": 58366225, "body": "@RSahu the strange thing is when i change number and number1 to string type, it works :|"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455152095, "post_id": 35327092, "comment_id": 58366260, "body": "@ZukuYuka, that surprises me."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1455143039, "last_edit_date": 1455143039, "creation_date": 1455142836, "answer_id": 35327092, "question_id": 35326838, "link": "https://stackoverflow.com/questions/35326838/cannot-read-integers-from-a-txt-file-containing-2-columns-c/35327092#35327092", "title": "Cannot read integers from a txt file containing 2 columns (C++)", "body": "<p>Error in your logic:</p>\n\n<pre><code>    in_file &gt;&gt; number;   // Assigns 2 from first line to number\n    if (in_file.fail())\n    {\n        cout &lt;&lt; \"There're no number in the file.\" &lt;&lt; endl;\n    }\n\n    while (in_file &gt;&gt; number &gt;&gt; number1) // Assigns 3 to number from first line\n                                         // and assigns 5 to number1 from second line\n    {\n        cout  &lt;&lt; number &lt;&lt; \" \" &lt;&lt; number1;\n    }\n</code></pre>\n\n<p>You need to use just:</p>\n\n<pre><code>    while (in_file &gt;&gt; number &gt;&gt; number1)\n    {\n        cout  &lt;&lt; number &lt;&lt; \" \" &lt;&lt; number1;\n    }\n</code></pre>\n\n<p>If you must print \"There're no number in the file.\" in the output, you can use:</p>\n\n<pre><code>    bool gotSomeNumbers = false;\n    while (in_file &gt;&gt; number &gt;&gt; number1)\n    {\n        cout  &lt;&lt; number &lt;&lt; \" \" &lt;&lt; number1;\n        gotSomeNumbers = true;\n    }\n\n    if (!gotSomeNumbers)\n    {\n         cout &lt;&lt; \"There're no number in the file.\" &lt;&lt; endl;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1455151410, "post_id": 35327651, "comment_id": 58366030, "body": "The code breaks due to &quot;Integer division by zero.&quot; /____\\"}, {"owner": {"reputation": 1, "user_id": 4358632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ygtcq.jpg?s=128&g=1", "display_name": "Nitin Kotwar", "link": "https://stackoverflow.com/users/4358632/nitin-kotwar"}, "reply_to_user": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "edited": false, "score": 0, "creation_date": 1474338217, "post_id": 35327651, "comment_id": 66479333, "body": "just put everything after <b>if</b> scope in <b>else</b> scope... :  <b>else</b> <b>{</b> <b>int</b> <b>sum</b> <b>=0</b>......upto <b>cout&lt;&lt;sum/count</b>...............} and you are good to go"}], "tags": [], "owner": {"reputation": 1, "user_id": 4358632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ygtcq.jpg?s=128&g=1", "display_name": "Nitin Kotwar", "link": "https://stackoverflow.com/users/4358632/nitin-kotwar"}, "is_accepted": false, "score": 0, "last_activity_date": 1455145297, "last_edit_date": 1495540856, "creation_date": 1455145068, "answer_id": 35327651, "question_id": 35326838, "link": "https://stackoverflow.com/questions/35326838/cannot-read-integers-from-a-txt-file-containing-2-columns-c/35327651#35327651", "title": "Cannot read integers from a txt file containing 2 columns (C++)", "body": "<blockquote>\n  <p>The method you are using to find to know whether file is empty is not\n  correct in following way :: As soon as this line gets executed</p>\n\n<pre><code>in_file &gt;&gt; number;\n</code></pre>\n  \n  <p>The compiler will treat first line as an integer as a whole , i.e.\n  number = \"2  3\" in given scenario. now this is not a standard number\n  because of space in between 2 and 3 and </p>\n  \n  <h2><code>in_file.fail()</code> will return true.</h2>\n  \n  <p>The Correct way is to use \"eof\" function as follows : (I also added\n  1-2 lines to calculate average of these numbers as you mentioned)</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/yG8Ct.jpg\" rel=\"nofollow noreferrer\">Correct code</a></p>\n\n<blockquote>\n  <p>Reference :  \n      <a href=\"https://stackoverflow.com/questions/5835848/when-will-ofstreamopen-fail\">When will ofstream::open fail?</a>\n      <a href=\"https://stackoverflow.com/questions/2390912/checking-for-an-empty-file-in-c\">Checking for an empty file in C++</a></p>\n</blockquote>\n"}], "owner": {"reputation": 43, "user_id": 5901319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3b23f819779c564482766821ed4333e5?s=128&d=identicon&r=PG&f=1", "display_name": "Onion", "link": "https://stackoverflow.com/users/5901319/onion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455145297, "creation_date": 1455141781, "last_edit_date": 1455142220, "question_id": 35326838, "link": "https://stackoverflow.com/questions/35326838/cannot-read-integers-from-a-txt-file-containing-2-columns-c", "title": "Cannot read integers from a txt file containing 2 columns (C++)", "body": "<p>i have to write a code that prompts user to enter a file name (containing 2 columns of integer). The program then reads that file, prints out the numbers set.</p>\n\n<p>My txt file looks like this (the numbers are separated by space):</p>\n\n<p>2 3</p>\n\n<p>5 6</p>\n\n<p>7 8</p>\n\n<p>8 9</p>\n\n<p>5 7</p>\n\n<p>I thought it would be easy, but now i stuck. When i run the program, this line appeared </p>\n\n<p>\"There're no number in the file.\"</p>\n\n<p>I set number to \"int\", so why can't the compiler read the number? But when i change the type to \"string\", the numbers did appear O_O , since i later need to calculate the average of those num also, i cannot use string.</p>\n\n<p>Here is my code, I appreciate any help TT___TT</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream in_file;\n    string filename;\n    int number;\n    int number1;\n    cout &lt;&lt; \"In order to process, please enter the file name: \";\n    cin &gt;&gt; filename;\n    in_file.open(filename.c_str());\n    if (!in_file.is_open())\n    {\n        cout &lt;&lt; \"Cannot open file\" &lt;&lt; endl;\n    }\n    else\n    {\n        in_file &gt;&gt; number;\n        if (in_file.fail())\n        {\n            cout &lt;&lt; \"There're no number in the file.\" &lt;&lt; endl;\n        }\n        while (in_file &gt;&gt; number &gt;&gt; number1)\n        {\n            cout  &lt;&lt; number &lt;&lt; \" \" &lt;&lt; number1;\n        }\n    }\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "std", "mutex"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455141569, "post_id": 35326772, "comment_id": 58362278, "body": "Did you provide a definition also?"}, {"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455141640, "post_id": 35326772, "comment_id": 58362313, "body": "I&#39;m sorry, didn&#39;t understand what you were referring to, definition of what?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1455141784, "post_id": 35326772, "comment_id": 58362383, "body": "For the <code>static std::mutex m_dbMutex;</code> of course. You&#39;ll need a definition like <code>std::mutex DBManager::m_dbMutex;</code> in your source file."}, {"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455142241, "post_id": 35326772, "comment_id": 58362587, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Damn! forgot about it. thanks a lot, it solved it!"}], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455141703, "creation_date": 1455141484, "last_edit_date": 1455141703, "question_id": 35326772, "link": "https://stackoverflow.com/questions/35326772/c-undefined-symbols-for-architecture-x86-64-when-using-xcode", "title": "C++ Undefined symbols for architecture x86_64 when using xcode", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>// Critical section, lock mutex\nm_dbMutex.lock();\nsqlite3_stmt *statement;\nint ret = sqlite3_prepare(m_dbConnection, query, -1, &amp;statement, 0);\nif(ret == SQLITE_OK)\n{\n    ret = sqlite3_step(statement);\n    sqlite3_finalize(statement);\n}\nm_dbMutex.unlock();\n// End of critical section\n</code></pre>\n\n<p>Where <code>m_dbMutex</code>is a std::mutex object, which is declared in the header in the following way:</p>\n\n<pre><code>static std::mutex m_dbMutex;\n</code></pre>\n\n<p>For some reason, i can't compile my program because of this.\nFull error print:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"DBManager::m_dbMutex\", referenced from:\n      DBManager::runQuery(char const*) in DBManager.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I tried adding <code>libc++.tbd</code> and <code>libstdc++.tbd</code> to my project but it still won't compile.</p>\n\n<p>Any suggestions? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>It seems this happens when the mutex is declared static. \nI don't get this error when it's not.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 3, "creation_date": 1455141620, "post_id": 35326725, "comment_id": 58362301, "body": "See <a href=\"http://blog.qt.io/blog/2007/10/15/file-mapping/\" rel=\"nofollow noreferrer\">blog.qt.io/blog/2007/10/15/file-mapping</a>"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 2, "creation_date": 1455141727, "post_id": 35326725, "comment_id": 58362351, "body": "Definitely elegant. Good luck if your files are 500GB big."}, {"owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "edited": false, "score": 0, "creation_date": 1455143260, "post_id": 35326725, "comment_id": 58363021, "body": "This is much a OS operation to do. osx and linux have the <code>cmp</code> command (here is the source in C: <a href=\"http://www.opensource.apple.com/source/gnudiff/gnudiff-10/diffutils/cmp.c?txt\" rel=\"nofollow noreferrer\">opensource.apple.com/source/gnudiff/gnudiff-10/diffutils/&hellip;</a>)"}, {"owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "edited": false, "score": 0, "creation_date": 1455143647, "post_id": 35326725, "comment_id": 58363218, "body": "I&#39;ve also found something interesting: <a href=\"http://aass.oru.se/~tpy/texts/surprising-compare/index.html\" rel=\"nofollow noreferrer\">aass.oru.se/~tpy/texts/surprising-compare/index.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1455148020, "creation_date": 1455148020, "answer_id": 35328232, "question_id": 35326725, "link": "https://stackoverflow.com/questions/35326725/comparing-two-files-byte-wise/35328232#35328232", "title": "comparing two files byte-wise", "body": "<p>The obvious approach can be made fast although I fear most standard libraries don't make it fast:</p>\n\n<pre><code>std::locale::global(std::locale::classic());\nstd::ifstream f1(\"test.1\");\nstd::ifstream f2(\"test.2\");\ntypedef std::istreambuf_iterator isbuf_it;\nif (std::equal(isbuf_it(f1.rdbuf()), isbuf_it(),\n               isbuf_it(f2.rdbuf()), isbuf_it())) {\n    std::cout &lt;&lt; \"The files are equal\\n\";\n}\nelse {\n    std::cout &lt;&lt; \"The files are not equal\\n\";\n}\n</code></pre>\n\n<p>Whether that is fast may depend on the standard library optimizing the algorithms for segmented iteration. On the other hand, since the read memory is fresh in cache and accessed just once, there is a fair chance that even without any segmentation optimization each page is processed before the next one is readily read. It is a long time since I benchmarked this kind of stuff...</p>\n"}], "owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1455148020, "creation_date": 1455141290, "last_edit_date": 1455143068, "question_id": 35326725, "link": "https://stackoverflow.com/questions/35326725/comparing-two-files-byte-wise", "title": "comparing two files byte-wise", "body": "<p>Here <a href=\"http://www.cplusplus.com/forum/general/94032/\" rel=\"nofollow\">http://www.cplusplus.com/forum/general/94032/</a> I found a great and fast method to compare two files byte-wise. But it has boost dependency. I am now working on a program in Qt. Is there a similarly elegant and/or comparably fast way in pure Qt? Or is there any other algorithm for comparing two files in Qt? I do not insist on using memory mapping...</p>\n\n<p>This is the boost version:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;boost/iostreams/device/mapped_file.hpp&gt;\nnamespace io = boost::iostreams;\nint main()\n{\n    io::mapped_file_source f1(\"test.1\");\n    io::mapped_file_source f2(\"test.2\");\n\n    if(f1.size() == f2.size() &amp;&amp; std::equal(f1.data(), f1.data() + f1.size(), f2.data()))\n        std::cout &lt;&lt; \"The files are equal\\n\";\n    else\n        std::cout &lt;&lt; \"The files are not equal\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 1, "creation_date": 1455140211, "post_id": 35326321, "comment_id": 58361631, "body": "Is there any reason you need to be passing around C style arrays, rather than e.g. <code>std::array</code> or <code>std::vector</code>?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455140868, "post_id": 35326321, "comment_id": 58361962, "body": "<code>Objects (*)[]</code> is not the type of an array of object pointers; it&#39;s the type of a pointer to an array of objects."}, {"owner": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1455143519, "post_id": 35326321, "comment_id": 58363153, "body": "@Cubic - I&#39;m not sure what the difference is on C style arrays.  It&#39;s an array of pointers to inherited class objects of an abstract class, if that helps..."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1455144632, "post_id": 35326321, "comment_id": 58363635, "body": "@Chris The difference is that C++ vectors and arrays are easier to use and don&#39;t require weird syntax that has you second guessing all the time."}], "answers": [{"comments": [{"owner": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "edited": false, "score": 0, "creation_date": 1455143785, "post_id": 35326391, "comment_id": 58363281, "body": "Thanks!! I knew that, but just couldn&#39;t get the right combo."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1455140029, "creation_date": 1455140029, "answer_id": 35326391, "question_id": 35326321, "link": "https://stackoverflow.com/questions/35326321/c-how-to-write-header-file-prototype-for-a-function-that-accepts-an-array-of-o/35326391#35326391", "title": "C++ how to write header file prototype for a function that accepts an array of object pointers.", "body": "<p>The function signatures need to match exactly:</p>\n\n<pre><code>void myClass( Objects (*)[] );\n\nvoid myClass::myFunction( Objects (*ptr2object_Array)[] ) {\n\n  /* do stuff */ \n}\n</code></pre>\n\n<p>Simple pointers like <code>Objects *ptr2object_Array</code> aren't the same as arrays of pointers.</p>\n"}], "owner": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 35326391, "answer_count": 1, "score": 0, "last_activity_date": 1455140219, "creation_date": 1455139789, "question_id": 35326321, "link": "https://stackoverflow.com/questions/35326321/c-how-to-write-header-file-prototype-for-a-function-that-accepts-an-array-of-o", "title": "C++ how to write header file prototype for a function that accepts an array of object pointers.", "body": "<p>Header file prototype (.hpp) is giving a g++ compiler error - no matching function type in header file. What it the correct way to write the prototype (or function parameter)? I've tried oh so many combinations...</p>\n\n<pre><code>void myClass( Objects (*)[] );\n</code></pre>\n\n<p>Implementation file function definition (.cpp)</p>\n\n<pre><code>void myClass::myFunction( Objects *ptr2object_Array ) {\n\n  /* do stuff */ }\n</code></pre>\n\n<p>Looked thoroughly for the answer here and elsewhere... Thanks. Aware of the  vector lecture, I'm stuck with an array of object pointers.</p>\n"}, {"tags": ["c++", "serialization", "architecture", "boost-serialization"], "owner": {"reputation": 165, "user_id": 2227806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa42b768aa2446807658bf55edc45062?s=128&d=identicon&r=PG", "display_name": "user24601", "link": "https://stackoverflow.com/users/2227806/user24601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1455363735, "creation_date": 1455139075, "last_edit_date": 1455363735, "question_id": 35326086, "link": "https://stackoverflow.com/questions/35326086/deserialization-and-correctness-of-the-design", "title": "Deserialization and correctness of the design", "body": "<p>What I have now is a small library which able to load, save object graphs, manage object's lifetime, GCs unused objects. It uses boost.serialization</p>\n\n<ul>\n<li>In ideal universe input is always valid, in my part of universe some data may become invalid (the keys in <code>map&lt;Key, ObjectRef&gt;</code> can become invalid. <code>ObjectRef</code> is intrusive shared pointer).</li>\n<li>In the process of loading <code>ar &gt;&gt; _some_objects</code> (<code>_some_objects</code> is a STL container of type <code>std::map&lt;Key, ObjectRef&gt;</code>) if the keys become invalid, ObjectRef's destructor releases its underlying object via <code>Object::release</code>. Simply because the keys become equal and std::map can't hold equal keys.</li>\n<li><code>Object::release</code> accesses some services (to add the object into object-destroy-queue for ex.) which aren't ready to use yet as de-serialization is not complete. The whole thing is that low-level de-serialization invokes such high-level user code is bad!</li>\n<li>The worst thing is that if object-destroy-queue will be de-serialized later, during the process of loading boost.serialization will clear queue's containers</li>\n</ul>\n\n<p>```</p>\n\n<pre><code>void SomeClass::load(Archive&amp; ar, int version) {\n    // _some_objects is std::map&lt;Key, ObjectRef&gt;\n    ar &gt;&gt; _some_objects;\n}\n\nvoid Object::release() {\n   // also accesses some services (something like destroy queue)\n   // which aren't ready to use as de-serialization is not complete\n}\n</code></pre>\n\n<p>```</p>\n\n<p>How do I prevent low-level code from triggering high-level calls? It is ok to invoke <code>Object::release</code>, but not when the whole system is in some inconsistent state. Thanks</p>\n\n<ul>\n<li>I can just block from <code>Object::release</code> from accessing anything, or delay calls somehow</li>\n<li>Test if the key is valid, and then and only in this case load ObjectRef</li>\n<li>Don't use boost.serialization, use something like protobufs. Reconstruct everything manually, in proper order</li>\n</ul>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 15, "creation_date": 1455138472, "post_id": 35325872, "comment_id": 58360660, "body": "...by using <code>&lt;vector&gt;</code>...?"}, {"owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "edited": false, "score": 4, "creation_date": 1455138484, "post_id": 35325872, "comment_id": 58360669, "body": "What you want is an std::vector"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 1, "creation_date": 1455138513, "post_id": 35325872, "comment_id": 58360684, "body": "Besides the leaks, what is your problem?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1455138626, "post_id": 35325872, "comment_id": 58360738, "body": "<i>&quot;Is Visual a bad platform for learning C++?&quot;</i> No, but trying to learn C++ by trial and error is a <i>really</i> bad idea, you will end up with horrible style such as this <code>new[]</code> and (here evidently missing) <code>delete[]</code> non-sense. You should learn C++ systematically from a good book or tutorial."}, {"owner": {"reputation": 2243, "user_id": 1407528, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9e8624c43354dc642c463dcd3682a6e5?s=128&d=identicon&r=PG", "display_name": "goe", "link": "https://stackoverflow.com/users/1407528/goe"}, "edited": false, "score": 0, "creation_date": 1455138820, "post_id": 35325872, "comment_id": 58360856, "body": "As a comment, Visual Studio is a great tool to learn C++. If you plan to change your platform (linux for example) try Qt Creator, but if this is not the case, Visual is a good choice."}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1455138576, "post_id": 35325934, "comment_id": 58360712, "body": "Good as a comment, but obviously not really an answer. (Not my downvote, though.)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1455140378, "post_id": 35325934, "comment_id": 58361726, "body": "in yr sample i would have created a vector and not specified the size, to show its magic at work"}], "tags": [], "owner": {"reputation": 1050, "user_id": 4720292, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab9634db96cbb4bc54c10cbe276ae411?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4720292/pierre"}, "is_accepted": false, "score": 5, "last_activity_date": 1455140497, "last_edit_date": 1455140497, "creation_date": 1455138537, "answer_id": 35325934, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c/35325934#35325934", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>You should use an <code>std::vector</code>.</p>\n\n<p>As a summary : </p>\n\n<pre><code>// Create an array of size 10    \nstd::vector&lt;int&gt; my_vector(10);\n\n// Add '3' to my_vector\nmy_vector.push_back(3);\n\n// Remove the last element\nmy_vector.pop_back();\n</code></pre>\n\n<p>Explanation and example here : <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow\">www.cplusplus.com/reference/vector/vector/</a></p>\n\n<p>Edit : you don't need to specify the array size when you construct your object.</p>\n\n<pre><code>// Create an array    \nstd::vector&lt;int&gt; my_vector;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 468, "user_id": 5884133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1067728893247971/picture?type=large", "display_name": "Art\u016brs Eimanis", "link": "https://stackoverflow.com/users/5884133/art%c5%abrs-eimanis"}, "is_accepted": false, "score": 2, "last_activity_date": 1455138597, "creation_date": 1455138597, "answer_id": 35325947, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c/35325947#35325947", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>You can't increase the size of an array at runtime. You can create a new bigger array, and copy the contents of the old array to the new array.</p>\n"}, {"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1455139246, "post_id": 35325990, "comment_id": 58361091, "body": "What about realloc?  It does that doesn&#39;t it?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1455139470, "post_id": 35325990, "comment_id": 58361203, "body": "Not really. From cppreference.com: &quot;The reallocation is done by either: a) expanding or contracting the existing area pointed to by ptr, if possible. The contents of the area remain unchanged up to the lesser of the new and old sizes. If the area is expanded, the contents of the new part of the array are undefined. b) allocating a new memory block of size new_size bytes, copying memory area with size equal the lesser of the new and the old sizes, and freeing the old block.&quot;"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1455140215, "post_id": 35325990, "comment_id": 58361632, "body": "That sounds the same as manually allocating a new array, copying the contents over and then deleting the old one.  The new part of the expanded array isn&#39;t filled in by your algorithm either and so those values are undefined until set to something.  What&#39;s the point of doing something manually that there is a library function for?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1455140861, "post_id": 35325990, "comment_id": 58361958, "body": "That is why there are many different implementations of the *alloc functions (first fit, buddy, suballocator, jemalloc, &amp;c.) Choosing which one to use varies on the application (real time system, limited memory, distributed memory, &amp;c.).  You could write your own or use a library.  Writing your own dynamic array would allow you to control how often the allocating function gets called."}], "tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": false, "score": 0, "last_activity_date": 1455138747, "creation_date": 1455138747, "answer_id": 35325990, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c/35325990#35325990", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>Outside of using <code>std::vector</code>, you would need to allocate a new array on the heap, copy the contents over, and delete the old one. Then point your <code>int*</code> to the newly allocated array.</p>\n\n<p>This wouldn't technically change the array size, but those accessing the object would see it as though it was changing.</p>\n"}, {"tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": false, "score": 0, "last_activity_date": 1455140045, "last_edit_date": 1495541738, "creation_date": 1455140045, "answer_id": 35326397, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c/35326397#35326397", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>This is dangerous:</p>\n\n<pre><code>int * plants;\nplants = new int[currentPlants];\nfor (int i = 0; i &lt; currentPlants; i++) {\n    plants[i] = 0;\n}\n\nif (plants == nullptr) EXIT_FAILURE;\n</code></pre>\n\n<p>This is what happens (if you are lucky):</p>\n\n<ul>\n<li>the program attempts to create some memory and returns nullptr if it can't</li>\n<li>the program then uses the memory in a loop even if nullptr was returned. (If nullptr was returned this will crash the program, silently corrupt the memory so you get the wrong results or otherwise doing something you don't want)</li>\n<li>the program then checks to see if nullptr was returned.</li>\n</ul>\n\n<p>If you are unlucky the compiler does time travel and destroys the entire universe.  I am not kidding, have a look at: </p>\n\n<ul>\n<li><a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24527401/undefined-behavior-causing-time-travel\">Undefined behavior causing time travel</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 1, "last_activity_date": 1455140698, "creation_date": 1455140698, "answer_id": 35326548, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c/35326548#35326548", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>The problem with your code is that on the first pass through <code>plants</code> all of your <code>plants[x]</code> are zero. You add all of these together and get zero => <code>currentProduce == 0</code>. You then try to <code>new plants[currentProduce aka 0]</code> which is illegal.</p>\n\n<p>Your second problem is that each time you <code>new</code> you create a new array discarding the old values; <code>new</code> creates a <em>new</em> array, it doesn't know anything about the old one.</p>\n\n<p>I rewrote your code using <code>std::vector</code>, which fixes the crash but produces an endless loop because on the first pass, <code>currentProduce</code> comes out to zero so the array is truncated.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main(int argc, const char* argv_real[])\n{\n    const char* argv[] = { \"programname\", \"5\", \"25\" };\n    int currentPlants = std::stoi(argv[2]), targetPeople = std::stoi(argv[1]), currentProduce = 0, week = 0;\n    std::cout &lt;&lt; \"targetPeople = \" &lt;&lt; targetPeople\n              &lt;&lt; \", currentPlants = \" &lt;&lt; currentPlants\n              &lt;&lt; \"\\n\";\n\n    std::vector&lt;int&gt; plants;\n    // Option 1:\n    // plants.resize(currentPlants);\n    // Option 2:\n    for (auto i = 0; i &lt; currentPlants; ++i) {\n        plants.push_back(0);\n    }\n\n    while (currentProduce &lt; targetPeople) {\n        std::cout &lt;&lt; \"cp: \" &lt;&lt; currentProduce\n                  &lt;&lt; \", tp: \" &lt;&lt; targetPeople\n                  &lt;&lt; \"\\n\";\n        currentProduce = 0;\n\n        // plantCount is a reference to plants[i] for each i\n        for (auto&amp; plantCount : plants) {\n            std::cout &lt;&lt; plantCount &lt;&lt; \", \";\n            currentProduce += plantCount;\n            plantCount++;\n        }\n        std::cout &lt;&lt; \" cp: \" &lt;&lt; currentProduce &lt;&lt; \"\\n\";\n\n        if (currentProduce &gt;= targetPeople)\n            break;\n\n        // Option 1:\n            plants.resize(currentProduce);\n        // Option 2:\n        //  while (currentPlants &lt; currentProduce) {\n        //      plants.push_back(0);\n        //  }\n\n        week++;\n    }\n    std::cout &lt;&lt; week;    \n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://ideone.com/xGpoF6\" rel=\"nofollow\">http://ideone.com/xGpoF6</a></p>\n"}], "owner": {"reputation": 245, "user_id": 3507873, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/k1H3t.png?s=128&g=1", "display_name": "Scy", "link": "https://stackoverflow.com/users/3507873/scy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 35326548, "answer_count": 5, "score": 0, "last_activity_date": 1455140698, "creation_date": 1455138306, "question_id": 35325872, "link": "https://stackoverflow.com/questions/35325872/how-to-create-and-increase-the-size-of-an-array-at-runtime-in-c", "title": "How to create and increase the size of an array at runtime in C++", "body": "<p>I want to create an array whose size I will only know at runtime, and then further increase that size during execution of the program.<br>\nThis is from an /r/dailyprogrammer challenge which can be found here <a href=\"https://www.reddit.com/r/dailyprogrammer/comments/3twuwf/20151123_challenge_242_easy_funny_plant/\" rel=\"nofollow\">https://www.reddit.com/r/dailyprogrammer/comments/3twuwf/20151123_challenge_242_easy_funny_plant/</a><br>\nMSVisual gives me the error std::badd_array_new_length which means that it's having trouble instantiating the array?<br>\nI'm so tired with oftentimes copying code letter for letter from websites where it works and I constantly get errors. Is Visual a bad platform for learning C++? Should I try QT?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nvoid main(int argc, char* argv[]) {\n\n    int currentPlants = std::stoi(argv[2]), targetPeople = std::stoi(argv[1]), currentProduce = 0, week = 0;\n    int * plants;\n    plants = new int[currentPlants];\n    for (int i = 0; i &lt; currentPlants; i++) {\n        plants[i] = 0;\n    }\n\n    if (plants == nullptr) EXIT_FAILURE;\n\n    while (currentProduce &lt; targetPeople) {\n        currentProduce = 0;\n        for (int i = 0; i &lt; currentPlants; i++) {\n            currentProduce += plants[i];\n            plants[i]++;\n        }\n        if (currentProduce &gt;= targetPeople) break;\n        else {\n            plants = new int[currentProduce];\n            for (; currentPlants &lt; currentProduce; currentPlants++) {\n                plants[currentPlants] = 0;\n            }\n        }\n\n        week++;\n    }\n    std::cout &lt;&lt; week;    \n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "word-count", "isspace"], "comments": [{"owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "edited": false, "score": 0, "creation_date": 1455138393, "post_id": 35325833, "comment_id": 58360613, "body": "Could you post the string/input file that causes the error? Or does it happen, regardless of input?"}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "edited": false, "score": 0, "creation_date": 1455138594, "post_id": 35325833, "comment_id": 58360727, "body": "@LukeG  input file contents:  This is a test file for hw3 How many Uppercase letters are in this f1le? How many Lowercase letters are in this F1le? H0W mAnY dIg1ts ar3 1N in this FILe? Turn the 1npU7 N4m3 int0 its reverse reverse the Lines to their opp05173 coutnerpart find tOTal NumbEr of characTer5 in File   it&#39;s just a sample file. The key is that it should count anything within an input file that is entered by the user."}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "edited": false, "score": 0, "creation_date": 1455138809, "post_id": 35325898, "comment_id": 58360846, "body": "That actually worked and gave me the correct number of words. What exactly does the .good() do in that case? is it reading the status bit as a word?"}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "edited": false, "score": 0, "creation_date": 1455138929, "post_id": 35325898, "comment_id": 58360915, "body": "You actually answered that question. Still new to the site. Your whole comment wasn&#39;t showing because I didn&#39;t click on it. Thank you for your response."}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "edited": false, "score": 0, "creation_date": 1455138970, "post_id": 35325898, "comment_id": 58360939, "body": "@Ry23 no problem, see also <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 4, "last_activity_date": 1455138721, "last_edit_date": 1455138721, "creation_date": 1455138406, "answer_id": 35325898, "question_id": 35325833, "link": "https://stackoverflow.com/questions/35325833/counting-words-from-input-file-adding-extra-word/35325898#35325898", "title": "Counting words from input file adding extra word?", "body": "<p><code>ios::good()</code> returns <code>true</code> after reading the last character in file. So you come to the loop body one extra time. That last time the read fails, the character gets unchanged, and because it's apparently a whitespace character the word count is incremented.</p>\n\n<p>You shouldn't generally use this <code>good()</code>, <code>eof()</code> etc. as a test for end of input. Do this instead:</p>\n\n<pre><code>while (inFile.get(c)) {\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 35325898, "answer_count": 1, "score": 1, "last_activity_date": 1455138721, "creation_date": 1455138139, "question_id": 35325833, "link": "https://stackoverflow.com/questions/35325833/counting-words-from-input-file-adding-extra-word", "title": "Counting words from input file adding extra word?", "body": "<p>I am trying to count uppercase and lowercase letters, the number of digits, and the number of words in an input file. I have completed this, however, my word count is off by one. There are 52 words in the input file, but my count is 53. What would be causing this? All of the others (uppercase, lowercase, and digit) are all correct...</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>using namespace std;\n\nint main()\n{\n        fstream inFile;\n        fstream outFile;\n        string fileName(\"\");\n        string destName(\"\");\n        char c = 0;\n        ///////string wrdRev(\"\");/////////\n        int numCount = 0;\n        int capCount = 0;\n        int lowCount = 0;\n        int wordCount = 0;\n\n        cout &lt;&lt; \"Please enter file name: \";\n        getline(cin, fileName);\n        cout &lt;&lt; endl;\n\n        inFile.open(fileName, ios::in);\n\n        if (inFile.good() != true) {\n                cout &lt;&lt; \"File does not exist!\\n\" &lt;&lt; endl;\n                return 0;\n        }\n        else{\n                reverse(fileName.begin(), fileName.end());\n                destName += fileName;\n        }   \n\n\n\n\n outFile.open(destName, ios::in);\n\n        if (outFile.good() == true){\n                cout &lt;&lt; \"File '\" &lt;&lt; destName &lt;&lt; \"' already exists!\\n\" &lt;&lt; endl;\n                return 0;\n        }   \n        else {\n                outFile.clear();\n                outFile.open(destName, ios::out);\n\n\n        while(inFile.good() != false){\n                inFile.get(c);\n\n                if(isupper(c)){\n                        capCount++;\n                }\n                else if(islower(c)){\n                        lowCount++;\n                }\n                else if(isdigit(c)){\n                        numCount++;\n                }\n                else if(isspace(c)){\n                        wordCount++;\n                }\n\n        }\n                outFile &lt;&lt; \"There are \" &lt;&lt; capCount &lt;&lt; \" uppercase letters.\" &lt;&lt; endl;\n                outFile &lt;&lt; \"There are \" &lt;&lt; lowCount &lt;&lt; \" lowercse letters.\" &lt;&lt; endl;\n                outFile &lt;&lt; \"There are \" &lt;&lt; numCount &lt;&lt; \" numbers.\" &lt;&lt; endl;\n                outFile &lt;&lt; \"There are \" &lt;&lt; wordCount &lt;&lt; \" words.\" &lt;&lt; endl;\n\n\n\n        }\n\n        inFile.close();\n        outFile.close();\n\n        return 0;\n\n\n}\n</code></pre>\n\n<p>Any help would be appreciated. Thank you.</p>\n"}, {"tags": ["c++", "c", "signals", "backtrace"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1455139067, "post_id": 35325808, "comment_id": 58360990, "body": "Please share your code for <code>backtrace</code> also"}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 2, "creation_date": 1455139689, "post_id": 35325808, "comment_id": 58361336, "body": "The gist of the problem is that <code>backtrace</code> is async-signal unsafe. I can&#39;t understand how there are so many examples out there where people blatantly call it from signal handlers."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5128925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/88dadffd1eaabd18bd1e97612be7f6b0?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5128925/william"}, "edited": false, "score": 1, "creation_date": 1455228638, "post_id": 35348319, "comment_id": 58409410, "body": "@cnicutar Thanks for your comments. I really appreciate your time. Since that&#39;s the case I&#39;m also surprised to see examples out there, espcially in <a href=\"http://www.linuxjournal.com/article/6391?page=0,1\" rel=\"nofollow noreferrer\">Linux Journal</a> that use this as an example. Do you know of any other ways to mimic gdb functionality that prints backtraces upon errors without using signal handlers? Thanks again!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1455218825, "creation_date": 1455218825, "answer_id": 35348319, "question_id": 35325808, "link": "https://stackoverflow.com/questions/35325808/backtrace-inside-signal-handler/35348319#35348319", "title": "Backtrace inside Signal Handler", "body": "<p>As stated <a href=\"https://www.gnu.org/software/libc/manual/html_node/Backtraces.html\" rel=\"nofollow\">here</a>, the <code>backtrace</code> function is AS-Unsafe, which means it is unsafe to call from an asynchronous signal handler.  Doing so invokes undefined behavior.</p>\n"}], "owner": {"reputation": 91, "user_id": 5128925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/88dadffd1eaabd18bd1e97612be7f6b0?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5128925/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2052, "favorite_count": 0, "accepted_answer_id": 35348319, "answer_count": 1, "score": 1, "last_activity_date": 1455218825, "creation_date": 1455138074, "last_edit_date": 1495539912, "question_id": 35325808, "link": "https://stackoverflow.com/questions/35325808/backtrace-inside-signal-handler", "title": "Backtrace inside Signal Handler", "body": "<p>I'm trying to following the code from <a href=\"https://stackoverflow.com/questions/3151779/how-its-better-to-invoke-gdb-from-program-to-print-its-stacktrace/4611112#4611112\">this post</a> to have signal handlers print a backtrace on errors such as floating point and segmentation faults. I'm using seg fault signals as a starting point. Here is the code:</p>\n\n<pre><code>#include &lt;cstdlib&gt;      //for exit()\n#include &lt;signal.h&gt;     //signal handling   \n#include &lt;execinfo.h&gt;   //backtrace, backtrace_symbols and backtrace_fd\n#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define TRACE_MSG fprintf(stderr, \"TRACE at: %s() [%s:%d]\\n\", \\\n        __FUNCTION__, __FILE__, __LINE__)\n\nvoid show_stackframe()\n{\n    void *trace[1024];\n    char **messages = (char **) NULL;\n    int i, trace_size = 0;\n    TRACE_MSG;\n    trace_size = backtrace(trace, 1024);    // segfault here???\n    // More code here to print backtrace, but not needed at the moment..\n    TRACE_MSG;\n}\n\nvoid sigSegvHandler( int signum, siginfo_t* info, void* arg )\n{\n    TRACE_MSG;\n    show_stackframe();\n    return;\n}\n\ndouble func_b()\n{\n    show_stackframe();  // Show that backtrace works without being \n                    // called inside sighandler.\n\n    TRACE_MSG;\n    int int_a[5];\n    int_a[0] = 4;\n    int_a[11] = 10;         // cause a segfault on purpose to see\n                    // how the signal handling performs.\n\n    return 1.1;\n}\n\nint main()\n{\n    // Examine and change the seg fault signal\n    struct sigaction segvAction;   // File: /usr/include/bits/sigaction.h\n\n   // Initialize segvAction struct to all zeros for initialiation\n   memset( &amp;segvAction,  0, sizeof( segvAction ) );\n\n   segvAction.sa_sigaction = sigSegvHandler;\n   segvAction.sa_flags = SA_SIGINFO;    //Invoke signal catching function with 3 arguments instead of 1\n\n   // Set the action for the SIGSEGV signal\n   sigaction( SIGSEGV, &amp;segvAction,  NULL );\n\n   func_b();    // Produce a SIGSEGV error\n}\n</code></pre>\n\n<p>I am compiling using:</p>\n\n<pre><code> g++ -rdynamic testprogram.cpp -o testprogram\n</code></pre>\n\n<p>I receive the following output from the program:</p>\n\n<pre><code>TRACE at: show_stackframe() [stackoverflow.cpp:15]\nTRACE at: show_stackframe() [stackoverflow.cpp:17]\nTRACE at: func_b() [stackoverflow.cpp:33]\nTRACE at: sigSegvHandler() [stackoverflow.cpp:22]\nTRACE at: show_stackframe() [stackoverflow.cpp:15]\nSegmentation fault\n</code></pre>\n\n<p>My question is why does show_stackframe() cause a segmentation fault inside of sigaction but works fine when not inside of the sigaction handler? I obviously seem to be setting up the signal handler/action incorrect but I haven't been able to find it all day. GDB doesn't seem to be any help in this case.</p>\n"}, {"tags": ["c++", "c++11", "stdbind"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1455139025, "post_id": 35325607, "comment_id": 58360965, "body": "lambda version: <code>auto test = [this](int a, size_t&amp; b, const int&amp; c) { this-&gt;test_function(a, b, c);}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 3, "creation_date": 1455138134, "post_id": 35325732, "comment_id": 58360490, "body": "It is also possible to make the function static and not require a instance at all."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1455138279, "post_id": 35325732, "comment_id": 58360560, "body": "@callyalater Making it static is not an option in my specific scenario, but good to know."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 9, "last_activity_date": 1455139707, "last_edit_date": 1455139707, "creation_date": 1455137755, "answer_id": 35325732, "question_id": 35325607, "link": "https://stackoverflow.com/questions/35325607/unable-to-stdbind-member-function/35325732#35325732", "title": "Unable to std::bind member function", "body": "<p>You're forgetting the fourth parameter to the <code>std::bind</code> and that is the instance on which you want to call a non-static member function. Since it doesn't operate on the (non-existent) class member data, I reckon it should be <code>static</code>, in which case you don't need an instance.</p>\n\n<p>That being said, if you want to bind to a non-static member function, you can do:</p>\n\n<pre><code>auto test = std::bind(&amp;SomeClass::test_function, this, std::placeholders::_1,\n                      std::placeholders::_2, std::placeholders::_3);\n// you can also bind *this\n</code></pre>\n\n<p>or (this does not make sense with no bound parameter - bind <code>a</code>, <code>b</code>, <code>c</code> if you like):</p>\n\n<pre><code>auto test = std::bind(&amp;SomeClass::test_function,\n                      std::placeholders::_1, std::placeholders::_2,\n                      std::placeholders::_3, std::placeholders::_4);\ntest(this, a, b, c); // you can also pass a reference\n</code></pre>\n\n<p>and stuff like that.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1455137763, "creation_date": 1455137763, "answer_id": 35325735, "question_id": 35325607, "link": "https://stackoverflow.com/questions/35325607/unable-to-stdbind-member-function/35325735#35325735", "title": "Unable to std::bind member function", "body": "<p>When you use <code>bind</code> to capture a pointer to member function, the first argument to the resulting <code>bind</code> object has to be something that refers to an object of a suitable type. Since you're binding to <code>SomeClass::test_function</code> you need an object of type <code>SomeClass</code> to apply it to, so the first argument to <code>test</code> has to be an object of type <code>SomeClass</code> or a pointer to an object of type <code>SomeClass</code>. For starters, try calling it like this:</p>\n\n<pre><code>test(this, b, c);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": false, "score": 2, "last_activity_date": 1455139215, "last_edit_date": 1455139215, "creation_date": 1455137797, "answer_id": 35325745, "question_id": 35325607, "link": "https://stackoverflow.com/questions/35325607/unable-to-stdbind-member-function/35325745#35325745", "title": "Unable to std::bind member function", "body": "<p>You will need to pass in the reference to the object that <code>SomeClass::test_function</code> will run on (most likely <code>this</code>). <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind#Notes\" rel=\"nofollow\">Cppreference</a> describes how <code>std::bind</code> works.</p>\n\n<p>Another option is to make <code>SomeClass::test_function</code> a static member function which requires no instance to be passed into bind.</p>\n"}, {"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 3, "last_activity_date": 1455197039, "last_edit_date": 1455197039, "creation_date": 1455138070, "answer_id": 35325805, "question_id": 35325607, "link": "https://stackoverflow.com/questions/35325607/unable-to-stdbind-member-function/35325805#35325805", "title": "Unable to std::bind member function", "body": "<p>When using <code>std::bind</code> to a member function, the <code>this</code> pointer needs to feature (i.e. it needs access to an instance of the class). Either captured as an argument to the <code>bind</code> or as an argument later when the bound type is called. </p>\n\n<p>For example;</p>\n\n<pre><code>auto test = std::bind(&amp;SomeClass::test_function, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3);\ntest(a, b, c);\n</code></pre>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4461, "favorite_count": 1, "accepted_answer_id": 35325732, "answer_count": 4, "score": 2, "last_activity_date": 1455197039, "creation_date": 1455137325, "question_id": 35325607, "link": "https://stackoverflow.com/questions/35325607/unable-to-stdbind-member-function", "title": "Unable to std::bind member function", "body": "<p>I've written the following class:</p>\n\n<pre><code>class SomeClass {\nprivate:\n    void test_function(int a, size_t &amp; b, const int &amp; c) {\n        b = a + reinterpret_cast&lt;size_t&gt;(&amp;c);\n    }\npublic:\n    SomeClass() {\n        int a = 17;\n        size_t b = 0;\n        int c = 42;\n        auto test = std::bind(&amp;SomeClass::test_function, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3);\n        test(a, b, c);\n    }\n}\n</code></pre>\n\n<p>On its own, this code looks fine in the IDE (Visual Studio 2015) but when I try to compile it, I get the following errors:</p>\n\n<pre><code>Error   C2893   Failed to specialize function template 'unknown-type std::invoke(_Callable &amp;&amp;,_Types &amp;&amp;...)'    Basic Server    C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\type_traits  1441    \nError   C2672   'std::invoke': no matching overloaded function found    Basic Server    C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\type_traits  1441    \n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>EDIT: I also wrote this version:</p>\n\n<pre><code>class SomeClass {\nprivate:\n    void test_function(int a, size_t &amp; b, const int &amp; c) {\n        b = a + reinterpret_cast&lt;size_t&gt;(&amp;c);\n    }\npublic:\n    SomeClass() {\n        int a = 17;\n        size_t b = 0;\n        int c = 42;\n        auto test = std::bind(&amp;SomeClass::test_function, a, std::placeholders::_1, std::placeholders::_2);\n        test(b, c);\n    }\n}\n</code></pre>\n\n<p>I get the exact same errors.</p>\n"}, {"tags": ["c++", "post", "sharepoint", "mfc"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1455137204, "post_id": 35325465, "comment_id": 58359965, "body": "<code>strServerName</code> should not include the <code>http:&#47;&#47;</code> prefix."}, {"owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455137271, "post_id": 35325465, "comment_id": 58360006, "body": "Perfect!!! Thank you!"}, {"owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455138722, "post_id": 35325465, "comment_id": 58360791, "body": "Hey Jonathan, would you know if there is a way to get this page so it can be queried? Right now I&#39;m getting a 200 response which is good but i need the HTML page to find some values in it."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455139726, "post_id": 35325465, "comment_id": 58361363, "body": "<code>CHttpFile</code> derives from <code>CInternetFile</code>, so use the <code>CInternetFile::Read</code> method to read the data once the request has completed successfully. <a href=\"https://msdn.microsoft.com/en-us/library/3c69cwt5.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/3c69cwt5.aspx</a>"}, {"owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455139793, "post_id": 35325465, "comment_id": 58361396, "body": "Can you also post your answer as &quot;Answer&quot; so I can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 0, "last_activity_date": 1455139838, "creation_date": 1455139838, "answer_id": 35326336, "question_id": 35325465, "link": "https://stackoverflow.com/questions/35325465/throwing-cinternetexception-for-error-12005/35326336#35326336", "title": "&#39;throwing CInternetException for error 12005&#39;", "body": "<p>The server name (<code>strServerName</code>) should not include the <code>http://</code> prefix - it should simply be the domain name (or IP address) of the server.</p>\n"}], "owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 35326336, "answer_count": 1, "score": 0, "last_activity_date": 1455921560, "creation_date": 1455136843, "last_edit_date": 1455921560, "question_id": 35325465, "link": "https://stackoverflow.com/questions/35325465/throwing-cinternetexception-for-error-12005", "title": "&#39;throwing CInternetException for error 12005&#39;", "body": "<p>I keep getting <strong>\"throwing CInternetException for error 12005\"</strong></p>\n\n<p>According to <a href=\"https://support.microsoft.com/en-us/kb/193625\" rel=\"nofollow\">this</a>, my URL is invalid. However the URL is correct and i am able to access this SharePoint site.</p>\n\n<p>I am not sure what is wrong, here is my code: </p>\n\n<p>(the error occurs at <code>pFile-&gt;SendRequest();</code>)</p>\n\n<pre><code>void CUserPassDiag::Connect(){\n    CInternetSession session(_T(\"My Session\"));\n    CHttpConnection* pServer = NULL;\n    CHttpFile* pFile = NULL;\n    try\n    {\n        CString strServerName = _T(\"http://collaboration.unc.ca\");\n        CString headers = \"Content-Type: application/x-www-form-urlencoded\\r\\n\";\n        headers += \"Host: xcollaboration.pwc.ca\\r\\n\";\n        headers += \"Method: POST\\r\\n\";\n        headers += \"Pragma: no-cache\\r\\n\";\n        headers += \"Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, *//*r\\n\";\n\n        CString szHeaders = _T(\"%s\",headers);\n        //To Be Send    \n        CString strFormData  = _T(\"action=setCameraSetting&amp;videoOverlay.useTimestamp=1&amp;videoOverlay.useText=1&amp;videoOverlay.displayString=12.12-77.32\");\n\n        DWORD dwRet;\n        CString strObject = _T(\"/team/T5342DFG/SitePages/UNCHome.aspx\");\n        pServer = session.GetHttpConnection(strServerName, INTERNET_DEFAULT_HTTP_PORT, _T(\"\"), _T(\"\"));\n        pFile = pServer-&gt;OpenRequest(CHttpConnection::HTTP_VERB_POST, strObject);\n        pFile-&gt;AddRequestHeaders(szHeaders);\n        pFile-&gt;SendRequest();\n        pFile-&gt;QueryInfoStatusCode(dwRet);\n        TRACE(\"%d\",dwRet);\n        delete pFile;\n        delete pServer;\n\n    }catch(CInternetException* e){\n        TCHAR sz[1024];\n        e-&gt;GetErrorMessage(sz,1024);\n        _tprintf_s(_T(\"ERROR!  %s\\n\"), sz);\n        e-&gt;Delete();\n    }\n  session.Close();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "dll"], "comments": [{"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455136653, "post_id": 35325350, "comment_id": 58359674, "body": "You need to dereference the value at that location, you&#39;re just printing the address its located at. Also, the value of <code>ExeBaseAddress</code> + <code>0x7198BC</code> + <code>0x70e</code> is going to overflow a <code>uint16_t</code>"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455136764, "post_id": 35325350, "comment_id": 58359746, "body": "Sorry @cocarin , I&#39;m not that good with <code>C++</code>. How is that done?"}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455136848, "post_id": 35325350, "comment_id": 58359792, "body": "<a href=\"http://stackoverflow.com/questions/4955198/what-does-dereferencing-a-pointer-mean\" title=\"what does dereferencing a pointer mean\">stackoverflow.com/questions/4955198/&hellip;</a> includes an overview of dereferencing."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455137004, "post_id": 35325350, "comment_id": 58359864, "body": "Even the address being printed is not the same as the address I am seeing from the Memory Editor."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455137209, "post_id": 35325350, "comment_id": 58359967, "body": "@cocarin I tried this <code>uint16_t *value = (uint16_t*) ExeBaseAddress + 0x7198BC + 0x70e;</code> but still no luck."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1455137292, "post_id": 35325350, "comment_id": 58360022, "body": "@cocarin <code>cout &lt;&lt; ExeBaseAddress &lt;&lt; &quot; - &quot; &lt;&lt; *value &lt;&lt; endl;</code> But still not the value."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1455137302, "post_id": 35325350, "comment_id": 58360025, "body": "You need to do the math before converting to a pointer, because C++ pointer arithmetic is in array elements, not bytes (for <code>uint16_t*</code> everything will get doubled)"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1455137597, "post_id": 35325350, "comment_id": 58360195, "body": "@BenVoigt I updated my question."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1455137917, "post_id": 35325350, "comment_id": 58360363, "body": "Beware: A DWORD is too small for a pointer on 64 bit machines. Use e.g. UINTPTR if you want to stay in win32&#39;s type system."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1455138770, "post_id": 35325350, "comment_id": 58360822, "body": "@UlrichEckhardt I updated my question again. But still getting the wrong value."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458536576, "post_id": 35325350, "comment_id": 59886665, "body": "what is the output that you are getting?"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458536811, "post_id": 35325350, "comment_id": 59886733, "body": "@Abhineet I&#39;m only getting <code>00400000 - 0</code>. Value expected is 1000. Which is also confirmed by checking it with a memory reader."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458537132, "post_id": 35325350, "comment_id": 59886834, "body": "Can you load your exe in HxD (<a href=\"https://mh-nexus.de/en/hxd/\" rel=\"nofollow noreferrer\">mh-nexus.de/en/hxd</a>) and post the relevant screenshot like the base address and the offset you are trying to read?"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458537349, "post_id": 35325350, "comment_id": 59886909, "body": "@Abhineet I don&#39;t believe I&#39;ll be able to see it from the hexeditor. The application only ends at <code>0x312FF4</code>, I&#39;m trying to read beyond <code>0x7198BC</code>."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458538153, "post_id": 35325350, "comment_id": 59887178, "body": "For reading the content of some address in C, I do this:: <code>HANDLE ExeBaseAddress = GetModuleHandleA(0); \tuintptr_t *p = (uintptr_t*)((uintptr_t)ExeBaseAddress + 0x30 + 0x20); \tprintf( &quot;ExeBaseAddress - %X, Val - %X, Val Content - %X\\n&quot;, ExeBaseAddress, p, (WORD&amp;)*p ) ;</code>"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "edited": false, "score": 0, "creation_date": 1458538256, "post_id": 35325350, "comment_id": 59887206, "body": "The code you just gave, (I changed the offsets), gives me <code>ExeBaseAddress - 400000, Val - B19FCA, Val Content - 0</code>"}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458538276, "post_id": 35325350, "comment_id": 59887214, "body": "ExeBaseAddress is a HANDLE, so it&#39;s size is unknown to the compiler. That&#39;s why, we cast it to <code>unintptr_t</code>. And overall, we need an address which can be dereferenced to get the value kept at the location, so I have cast it to <code>uintptr_t*</code>."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458538491, "post_id": 35325350, "comment_id": 59887282, "body": "You need 2 bytes to be read from 0x00B19FCA, right? Because, I am doing <code>(WORD&amp;)*p</code>, if you need more bytes, you have to properly cast it. Is the location address correct now?"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "edited": false, "score": 0, "creation_date": 1458538661, "post_id": 35325350, "comment_id": 59887334, "body": "Yes, I use DWORD, I tried it and I guess the pointer I&#39;m using is incorrect. At the moment on the code it points to address <code>B19FCA</code>. But on CheatEngine it is pointed to <code>2E03074E</code>. But I&#39;m confused because I&#39;m adding the same offsets in CheatEngine and in code. Could it be the base address? I tried subtracting the offsets to get the base address, CheatEngine is using <code>2d916784</code> as base address."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1458538991, "post_id": 35325350, "comment_id": 59887460, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/106878/discussion-between-majidarif-and-abhineet\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": true, "score": 3, "last_activity_date": 1458541885, "creation_date": 1458541885, "answer_id": 36124514, "question_id": 35325350, "link": "https://stackoverflow.com/questions/35325350/dll-injection-and-reading-memory-by-offset/36124514#36124514", "title": "DLL injection and reading memory by offset", "body": "<p>From all the long comments and chats (some basic input too) with the OP, the solution found its way,</p>\n\n<p>The exe loaded have the base address stored of another PE at the location 0x7198BC. This Base Address + offset(0x70E) have the desired value contained.</p>\n\n<pre><code>HANDLE ExeBaseAddress = GetModuleHandleA(0);\n\n/*ExeBaseAddress is a HANDLE, so it's size is unknown to the compiler.\n That's why, we cast it to (unintptr_t). \n And overall, we need an address which can be dereferenced,\n to get the value kept at the location, so cast it to (uintptr_t*)*/\n\nuintptr_t *p = (uintptr_t*)((uintptr_t)ExeBaseAddress + 0x7198BC);\nuintptr_t ModuleBaseAdrs = (DWORD&amp;)*p ;\nprintf( \"ModBaseAdrsLoc - %p, ModuleBaseAdrs - %X\\n\", p, ModuleBaseAdrs ) ;\n\nuintptr_t *ValLoc = (uintptr_t *) (ModuleBaseAdrs + 0x70E);\nDWORD Val = (DWORD&amp;)*ValLoc ;\nprintf( \"ValLoc - %p, Val - %u\\n\", ValLoc, Val ) ;\n</code></pre>\n"}], "owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1591, "favorite_count": 1, "accepted_answer_id": 36124514, "answer_count": 1, "score": 1, "last_activity_date": 1458541885, "creation_date": 1455136420, "last_edit_date": 1455138742, "question_id": 35325350, "link": "https://stackoverflow.com/questions/35325350/dll-injection-and-reading-memory-by-offset", "title": "DLL injection and reading memory by offset", "body": "<p>I injected a DLL to an exe. Now I need to read data from a specific offset. My code from the DLL:</p>\n\n<pre><code>DWORD ExeBaseAddress = (DWORD)GetModuleHandleA(0); \n// HANDLE baseAddr = GetModuleHandleA(0)\n\nuint16_t value = ExeBaseAddress + 0x7198BC + 0x70e;\n\ncout &lt;&lt; value &lt;&lt; endl;\n</code></pre>\n\n<p>Problem is it doesn't give me the value I expect which is <code>1000</code>. It also doesn't give me the right address.</p>\n\n<p>Using a memory reading software I can get the <strong>CORRECT</strong> value. See:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pwTNf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pwTNf.jpg\" alt=\"cheatengine\"></a></p>\n\n<p>But I am still getting the wrong value from the code even though I'm using the exact same offset from the memory reading app. So what am I missing?</p>\n\n<hr>\n\n<p>I tried this but its still giving me the wrong value.</p>\n\n<pre><code>HANDLE ExeBaseAddress = GetModuleHandleA(0);\n\nuintptr_t p = (uintptr_t)ExeBaseAddress + 0x7198BC + 0x70e;\nint value = *reinterpret_cast&lt;int *&gt;(p);\n\ncout &lt;&lt; ExeBaseAddress &lt;&lt; \" - \" &lt;&lt; value &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "file", "struct"], "comments": [{"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1455136257, "post_id": 35325243, "comment_id": 58359425, "body": "What&#39;s happening exactly when you read ?"}, {"owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "edited": false, "score": 0, "creation_date": 1455136510, "post_id": 35325243, "comment_id": 58359584, "body": "Please tell us what exactly is going wrong, so we can help you fixing your problem? How are you trying to load the data? Why doesn&#39;t it work (exceptions, wrong results)? Besides that, I would recommend using a serialization library to accomplish things like that. Personally I use <a href=\"http://uscilab.github.io/cereal/\" rel=\"nofollow noreferrer\">cereal</a>, which I think is amazing, but there is also a serialization module in the boost library."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455136835, "post_id": 35325243, "comment_id": 58359782, "body": "With a little thought you could remove at least 90% of this code and still reproduce the problem. Don&#39;t ask people here to wade through irrelevant stuff."}, {"owner": {"reputation": 73, "user_id": 5518146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8842b0e28f96c8dbe157d691e5b55887?s=128&d=identicon&r=PG&f=1", "display_name": "bradym55", "link": "https://stackoverflow.com/users/5518146/bradym55"}, "edited": false, "score": 0, "creation_date": 1455137153, "post_id": 35325243, "comment_id": 58359937, "body": "So the user enters data into the program, which will store it into the corresponding struct members. That data is then outputted into the data.txt file. When the program is reloaded, I would like for it to grab that information from the file, and in a sense &quot;restore&quot; the session from where it left off, and use that info from the file. Right now, it will store the data to the file, but when I say go to sort or remove an item after I have restarted the program, it wipes the data.txt file."}, {"owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "edited": false, "score": 0, "creation_date": 1455137891, "post_id": 35325243, "comment_id": 58360349, "body": "@bradym55 Then please show us only the code responsible for reloading"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1455138905, "last_edit_date": 1592644375, "creation_date": 1455138351, "answer_id": 35325882, "question_id": 35325243, "link": "https://stackoverflow.com/questions/35325243/c-getting-data-from-file-to-remember-last-session/35325882#35325882", "title": "C++ Getting Data from file to remember last session", "body": "<h2>What's wrong ?</h2>\n<p>There are plenty of issues in your code.  But let's start with the beginning.</p>\n<p>When <code>main()</code> starts, <code>numItem</code> is intialized to 0.</p>\n<p>When you later add an item, you open the file.  At this moment, <code>numItem</code> is sitll 0. You then read the file by doing:</p>\n<pre><code>   for(int i = 0; i &lt; numItems; i++)  //&lt;=== ouch !!! numItem is still 0 \n      ...            \n</code></pre>\n<p>SO you loop on a counter which is 0.  So nothing gets read from the file.</p>\n<p>The list then contains only the manually added items, if you added some. Or the list is still empty.</p>\n<p>WHat ever you do afterwards, you work with an empty or almost empty list.</p>\n<p>When you exit, you overwrite the file with an empty list, so it gets scrapped !!</p>\n<h2>How to solve it ?</h2>\n<p>One possible solution could be to write right at the start of the file the number of items.  When reading the file, the first thing you would then do is read this into <code>numItem</code>.  Then you could use the kind of look construct that you have.</p>\n<p>Another alternative would be to read the file using a while loop, and incrementing numItem while you read the file.  Up to you to choose the most suitable solution.</p>\n<h2>Other issues</h2>\n<p>You are reading the file, everytime the user wants to add some elements.  This is a problem because the file is reread each time, potentially overwritting data...</p>\n<p>according to your explanations, you should read your persistent data only one:  in main() and before you enter the menu loop.</p>\n<p>Now in the meantime you've removed most of your code.  But I think there could be also a potential problem in memory allocation (I suppose it's some homework and you're not yet allowed to use standard library containers such as vectors).  Check that you've allocated some memory for reading your data into list <strong>before</strong> populating the array.</p>\n"}], "owner": {"reputation": 73, "user_id": 5518146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8842b0e28f96c8dbe157d691e5b55887?s=128&d=identicon&r=PG&f=1", "display_name": "bradym55", "link": "https://stackoverflow.com/users/5518146/bradym55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 35325882, "answer_count": 1, "score": 0, "last_activity_date": 1455138905, "creation_date": 1455136059, "last_edit_date": 1455138357, "question_id": 35325243, "link": "https://stackoverflow.com/questions/35325243/c-getting-data-from-file-to-remember-last-session", "title": "C++ Getting Data from file to remember last session", "body": "<p>What I'm looking to do is have the items, timestamp, and completed status saved to a file, which it does, and then when the program is restarted, the data will be restored to the list from the file. Right now, I can get the info to save to the file \"data.txt\" but it will not read it in, and that's what I'm looking to ultimately accomplish.</p>\n\n<pre><code>                    // Get previous session data\n                    fin.open(\"c:/temp/data.txt\", ios::in);\n\n                    if (fin.fail())\n                    {\n                        cout &lt;&lt; \"Failed to open file for reading\" &lt;&lt; endl;\n                        return 0;\n                    }\n\n                    for(int i = 0; i &lt; numItems; i++)\n                    {\n                        fin &gt;&gt; list[i].completed;\n                        fin &gt;&gt; list[i].timestamp;\n                        getline(fin, list[i].items);\n                    }\n                    fin.close();\n</code></pre>\n"}, {"tags": ["c++", "string", "c++11", "type-conversion"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1455135107, "post_id": 35324918, "comment_id": 58358786, "body": "That&#39;s the right output for the code you wrote. What do you want the result to be?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1455135173, "post_id": 35324918, "comment_id": 58358826, "body": "Don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> starts a new line."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1455135178, "post_id": 35324918, "comment_id": 58358828, "body": "do excpect to get 10! ? dealing with &quot;.&quot; as multiple operation ?"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455135209, "post_id": 35324918, "comment_id": 58358849, "body": "@pete Becker : i need the entire string. Thanks"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1455135546, "post_id": 35324918, "comment_id": 58359023, "body": "A <code>long</code> stores a numeric value. There&#39;s no obvious way to interpret &quot;1.2.3.4.5.6.7.8.9.10&quot; as a numeric value."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455136684, "post_id": 35324918, "comment_id": 58359691, "body": "@Pete Becker: please see my below clarification for mathew..which states my requirement. Thanks"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 4, "creation_date": 1455136922, "post_id": 35324918, "comment_id": 58359823, "body": "No, I&#39;m not going to hunt through your comments to answers to try to find your requirements. Put them in the question!"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1455146649, "post_id": 35324918, "comment_id": 58364477, "body": "Wow guys the question is exceedingly clear. <a href=\"http://linux.die.net/man/3/inet_aton\" rel=\"nofollow noreferrer\">linux.die.net/man/3/inet_aton</a>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 1, "creation_date": 1455150624, "post_id": 35324918, "comment_id": 58365786, "body": "@Joshua: When the question was closed, it was complete nonsense. Not only did it not say anything about IP addresses, but given the string format, it could not possibly have been about IP addresses."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455136002, "post_id": 35324948, "comment_id": 58359277, "body": "Thank You How can i store the above string to the slong?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455136117, "post_id": 35324948, "comment_id": 58359338, "body": "@Ragav: Is it not obvious to you by now that you can&#39;t?"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455136717, "post_id": 35324948, "comment_id": 58359713, "body": "What is the reason to devote? Man ask result in comments &quot;i need the entire string&quot;. The aswer is exactly is. The reason that it is impossible writed. Such answer as question."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455137992, "post_id": 35324948, "comment_id": 58360404, "body": "@oklas : i cant devote.. because iam a new user here.. aorry i dont know who did.."}], "tags": [], "owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "is_accepted": false, "score": 1, "last_activity_date": 1455270435, "last_edit_date": 1455270435, "creation_date": 1455135117, "answer_id": 35324948, "question_id": 35324918, "link": "https://stackoverflow.com/questions/35324918/how-to-pack-a-ip-address-represented-as-a-string-into-a-unsigned-long/35324948#35324948", "title": "How to pack a IP address represented as a string, into a unsigned long", "body": "<p><code>atol</code> sees digits through until a nondigit appears</p>\n\n<p>entire string is not digit, entire string you will see from this code</p>\n\n<pre><code>int main()\n{\n    long Id1;\n    std::string item = \"1.2.3.4.5.6.7.8.9.10\";\n    std::cout &lt;&lt; item &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>UPD:</strong></p>\n\n<p>I suggest my effective and universal algoithm:</p>\n\n<p>Params:</p>\n\n<pre><code>str - string to parse\nsep - fiels separator, which delimit digit position \ntextbase - radix of digits in text string\nfieldbase - field radix of position in target number\n</code></pre>\n\n<p>see about radix here: <a href=\"https://en.wikipedia.org/wiki/Radix\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Radix</a> and <a href=\"https://en.wikipedia.org/wiki/Numeral_system\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Numeral_system</a></p>\n\n<pre><code>template&lt;typename T&gt;\nT str2num( const std::string &amp;str, char sep, int textbase, int fieldbase ) {\n  T digit, result = 0;\n  std::size_t pos=0, start = 0, end = str.size() - 1;\n  std::string strnum;\n  while( ( start = str.rfind(sep,end) ) != std::string::npos ) {\n    strnum = str.substr( start + 1, end - start );\n    digit = std::strtol( strnum.c_str(), 0, textbase );\n    result += digit * pow( fieldbase, pos );\n    end = start - 1;\n    ++pos;\n  }\n  strnum = str.substr( 0, end + ( start ? 1 : 0 ) );\n  digit = std::strtol( strnum.c_str(), 0, textbase );\n  result += digit * pow( fieldbase, pos );\n  return result;\n}\n</code></pre>\n\n<p>So this universal function may be used for any analogical purpose. For example parse and convert IP adresses from string into binary form. Currently it is simple for IPv4. But IPv6 will be simple later when compilers will be support 128 bit width integer values. But currenlly IPv6 possible to parse with split string to two substrings with four fields.</p>\n\n<p>There is an example how to use:</p>\n\n<pre><code>int main()\n{\n  typedef unsigned long ul32;\n  typedef unsigned long long ul64;\n\n  // parse the IPv4 adress, where numerical system of digits\n  // in fields id 10, and field radix is 256 (in hex 0x100)\n  ul32 x32 = str2num&lt;ul32&gt;( \"10.1.10.127\", '.', 10, 256 );\n  std::cout &lt;&lt; x32 &lt;&lt; std::endl;\n\n  // parse half of the IPv6 adress, where numerical system of digits\n  // in fields id 16, and field radix is 65536 (in hex 0x10000)\n  ul64 x64 = str2num&lt;ul64&gt;( \"1234:5678:9abc:def0\", ':', 16, 65536 );\n  std::cout &lt;&lt; std::hex &lt;&lt; x64 &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>The result output:</p>\n\n<pre><code>167840383\n123456789abcdef0\n</code></pre>\n\n<p>PS:</p>\n\n<p>When You will try to compile this with 64 bit integers, the standart library pow() function is not support 64 bit values, so need to use special implementation of pow. For example Indian pow algorithm. I found pascal implementation here: <a href=\"http://www.algolib.narod.ru/Math/IndianPow.html\" rel=\"nofollow\">http://www.algolib.narod.ru/Math/IndianPow.html</a> So make translate to c++:</p>\n\n<pre><code>template&lt;typename T&gt;\nT pow( T base, unsigned int exp ) {\n  T t = base, res = 1;\n  while( 1 ) {\n    if ( exp &amp; 1 ) res *= t;\n    exp &gt;&gt;= 1;\n    if ( ! exp ) return res;\n    t *= t;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455136436, "post_id": 35325267, "comment_id": 58359538, "body": "as per a requirement, the variable type used to store the above type of string is mentioned as slong in hardware headers files. so iam trying to pack the structure manually as sent by hardware and execute a application. So the need here is how to send the above dot seperated values using slong?? Thanks Feel free to ask more clarification"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455136817, "post_id": 35325267, "comment_id": 58359773, "body": "for example :&quot;167840383&quot;  represents &quot;10.1.10.127&quot;"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455137221, "post_id": 35325267, "comment_id": 58359978, "body": "@Ragav: that&#39;s an entirely different conversion! Describe the exact rule <code>string</code> -&gt; <code>slong</code>, as it&#39;s not obvious how to decipher the algorithm given your example."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455137224, "post_id": 35325267, "comment_id": 58359980, "body": "@Ragav - presumably, <code>if (item == &quot;10.1.10.127&quot;) value = 167840383; else value = 0;</code> is not acceptable. But that&#39;s all the detailed information that you&#39;ve provided. If you want something else you&#39;ll have to say <b>exactly what it is</b> that you want."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455137292, "post_id": 35325267, "comment_id": 58360023, "body": "@Ragav: There are library packages out there for converting IP and MAC addresses from a string and placing them into a buffer.  You need to search for &quot;C++ IP string to buffer&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 1, "creation_date": 1455137351, "post_id": 35325267, "comment_id": 58360052, "body": "@Ragav: IP and MAC addresses only have 3 periods, &#39;.&#39;, not 9."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455137561, "post_id": 35325267, "comment_id": 58360169, "body": "Hint:  View the <code>slong</code> variable in hexadecimal, not decimal.  Split the hexadecimal variable into groups of 2 digits.  Convert each pair to decimal.  Place &#39;.&#39; between the decimal numbers.  You should have your IP address from a <code>slong</code> type."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1455139937, "post_id": 35325267, "comment_id": 58361493, "body": "@ThomasMatthews since you&#39;ve been able to find out the assignment here, I&#39;ve posted an answer below attempting to solve it with stdlib, take a look if you wish."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1455141642, "post_id": 35325267, "comment_id": 58362317, "body": "@ThomasMatthews in your solution, only single digits are accepted, while for IP&#39;s you need 1 to 3 digits. But you didn&#39;t know the task when typing the solution, OTOH."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1455151714, "post_id": 35325267, "comment_id": 58366128, "body": "@iksemyonov: My solution is not a good solution for processing MAC and IP addresses because it does not convert the textual representation into a numerical representation.  The solution only copies or packs the ASCII digit characters."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1455152015, "post_id": 35325267, "comment_id": 58366232, "body": "@ThomasMatthews well the problem here is that the OP seems to not really know what they&#39;re looking for in the solution anyway. What would you say about my approach though?"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1455137196, "last_edit_date": 1455137196, "creation_date": 1455136131, "answer_id": 35325267, "question_id": 35324918, "link": "https://stackoverflow.com/questions/35324918/how-to-pack-a-ip-address-represented-as-a-string-into-a-unsigned-long/35325267#35325267", "title": "How to pack a IP address represented as a string, into a unsigned long", "body": "<p>Your question is not clear because your string contains decimal points and a <code>signed long</code> is integral.  </p>\n\n<p>Also, if we take the <code>'.'</code> character as a separator, this means that there are 10 numbers in the string not one.  </p>\n\n<p>If you want to copy the characters in the string to the memory occupied by a <code>signed long</code>, you could try something like this:</p>\n\n<pre><code>int main(void)\n{\n  signed long value = 0;\n  const std::string item = \"1.2.3.4.5.6.7.8.9.10\";\n  for (unsigned int i = 0; i &lt; sizeof(signed long); ++i)\n  {\n    // shift left one byte to make room for the next character\n    value = value * 256; \n\n    // Insert the character from the string.\n    value += string[i];\n  }\n</code></pre>\n\n<p>Another method is to use <code>memcpy</code>:</p>\n\n<pre><code>  memcpy(&amp;value, item.c_str(), sizeof(signed long));\n</code></pre>\n\n<p><strong>Edit 1: Copying into a <code>slong</code></strong>\nUsing the above example, the '.' characters are skipped:</p>\n\n<pre><code>int main(void)\n{\n  slong value = 0;\n  const unsigned int destination_capacity = sizeof(slong);\n  const std::string item = \"1.2.3.4.5.6.7.8.9.10\";\n  const unsigned int length = item.size();\n  unsigned int chars_copied = 0U;\n  for (unsigned int i = 0; i &lt; length; ++i)\n  {\n    const char c = item[i];\n    if (isdigit(c))\n    {\n      // shift left one byte to make room for the next character\n      value = value * 256; \n\n      // Insert the character from the string.\n      value += string[i];\n      chars_copied++;\n      if (chars_copied &gt;= destination_capacity)\n      {\n        break;\n      }\n    }\n    return EXIT_SUCCESS;\n  }\n</code></pre>\n\n<p>The above copies the digit characters from the string and packs them into a <code>slong</code> type.  </p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140249, "post_id": 35325542, "comment_id": 58361654, "body": "Thanks !!! any minimized code in c++ version.."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140374, "post_id": 35325542, "comment_id": 58361723, "body": "&quot;any minimized code&quot; what do you mean exactly? All the code above is required to perform the operation. You can split it into a function, for example."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140497, "post_id": 35325542, "comment_id": 58361779, "body": "ok.. in c++ we can use some STL&#39;s and can we make the similar goal achieved? Just curious to know that..."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140626, "post_id": 35325542, "comment_id": 58361844, "body": "Do you want to perfrom this task with a single calls to an STL function? I&#39;m afraid it&#39;s not possible."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140778, "post_id": 35325542, "comment_id": 58361914, "body": "Welcome to post any other way in c++?"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140881, "post_id": 35325542, "comment_id": 58361971, "body": "What do you dislike about this way?"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140945, "post_id": 35325542, "comment_id": 58362004, "body": "Sorry i didnt &quot;dislike&quot;.. my need is to incorporate the solution in c++.."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455140972, "post_id": 35325542, "comment_id": 58362012, "body": "Yes this is pure C++ language! Go ahead and use it."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455141161, "post_id": 35325542, "comment_id": 58362100, "body": "One doubt is do we need more logic and code to store a ip address to a variable.. in c++."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455141367, "post_id": 35325542, "comment_id": 58362187, "body": "There is pretty much one solution: go forward and test it.. I&#39;ve included a couple checks in this code, you may add more, it&#39;s just one approach shown here. Once again: what do you dislike about this approach? Too little code? Too much?"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455142225, "post_id": 35325542, "comment_id": 58362579, "body": "i dont know if this is the only way.. but i need less code with some library calls etc.. in c++.. Appreciate your effort!!"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455142560, "post_id": 35325542, "comment_id": 58362719, "body": "Why do you need less code? My code is making library calls, lots of."}], "tags": [], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1455141078, "last_edit_date": 1455141078, "creation_date": 1455137096, "answer_id": 35325542, "question_id": 35324918, "link": "https://stackoverflow.com/questions/35324918/how-to-pack-a-ip-address-represented-as-a-string-into-a-unsigned-long/35325542#35325542", "title": "How to pack a IP address represented as a string, into a unsigned long", "body": "<p>Edited: it's not about stripping the dots, it's about packing 4 fields into one <code>unsigned long</code>. Here's my take on it with the standard library:</p>\n\n<p>Edited once more: Using the safe <code>stoi()</code> now, with a wrapper. (Pity we don't have Erlang-like tuple return types with pattern matching.)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n\nstd::pair&lt;bool, int&gt; stoi_wrap(const std::string&amp; s)\n{\n    std::pair&lt;bool, int&gt; res(true, 0);\n    try {\n        res.second = std::stoi(s);\n    } catch (std::exception e) {\n        res.first = false;\n    }\n    return res;\n}    \n\nint main(int agrc, char **argv)\n{\n    std::string s = \"10.1.10.127\";\n    std::vector&lt;unsigned char&gt; fields;\n    std::stringstream stream(s); std::string temp;\n    while(std::getline(stream, temp, '.')) {\n       const auto res = stoi_wrap(temp);\n       if (!res.first) {\n           std::cerr &lt;&lt; \"error reading a field\" &lt;&lt; '\\n'; return -1;\n       }\n       else\n           fields.push_back(res.second);\n    }\n    if (fields.size() != 4) {\n        std::cerr &lt;&lt; \"wrong field count\" &lt;&lt; std::endl; return -1;\n    }\n    unsigned long int result{}; int i{};\n    for (auto it = fields.rbegin(); it != fields.rend(); it++) {\n        result += *it &lt;&lt; 8*i; ++i;\n    }\n    std::cout &lt;&lt; result &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 1, "closed_date": 1455137398, "accepted_answer_id": 35325267, "answer_count": 3, "score": -4, "last_activity_date": 1455270435, "creation_date": 1455135030, "last_edit_date": 1455142079, "question_id": 35324918, "link": "https://stackoverflow.com/questions/35324918/how-to-pack-a-ip-address-represented-as-a-string-into-a-unsigned-long", "closed_reason": "Needs details or clarity", "title": "How to pack a IP address represented as a string, into a unsigned long", "body": "<p>How to pack an IP address, represented with a string, into an <code>unsigned long</code>. Please give solutions in C++ in a more efficient way (and with less code).\nThanks in advance!!!</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstring&gt;\n#include&lt;cstdlib&gt;\n\n    int main()\n    {\n        unsigned long Id1;\n        std::string item = \"1.2.3.4\";\n        Id1 = ??(here item need to be packed in Id1)\n        std::cout &lt;&lt; Id1 &lt;&lt;std::endl;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "mingw"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5869687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4da6322524b159e6381d02facf7aaa32?s=128&d=identicon&r=PG&f=1", "display_name": "stevenhawkingsbiggestfan", "link": "https://stackoverflow.com/users/5869687/stevenhawkingsbiggestfan"}, "edited": false, "score": 0, "creation_date": 1455559626, "post_id": 35330623, "comment_id": 58533138, "body": "Any replacement for itoa()?"}, {"owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "reply_to_user": {"reputation": 95, "user_id": 5869687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4da6322524b159e6381d02facf7aaa32?s=128&d=identicon&r=PG&f=1", "display_name": "stevenhawkingsbiggestfan", "link": "https://stackoverflow.com/users/5869687/stevenhawkingsbiggestfan"}, "edited": false, "score": 0, "creation_date": 1455676821, "post_id": 35330623, "comment_id": 58591520, "body": "itoa() works just fine on my MinGW 4.8.1 installation.  Have you run into problems with it?"}, {"owner": {"reputation": 95, "user_id": 5869687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4da6322524b159e6381d02facf7aaa32?s=128&d=identicon&r=PG&f=1", "display_name": "stevenhawkingsbiggestfan", "link": "https://stackoverflow.com/users/5869687/stevenhawkingsbiggestfan"}, "edited": false, "score": 0, "creation_date": 1455750150, "post_id": 35330623, "comment_id": 58634562, "body": "Yes, I have to use strtol"}], "tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1455163733, "creation_date": 1455163733, "answer_id": 35330623, "question_id": 35324686, "link": "https://stackoverflow.com/questions/35324686/mingw-4-8-1-cant-use-c11/35330623#35330623", "title": "MinGW 4.8.1 can&#39;t use C++11", "body": "<p>I tested this in my MinGW 4.8.1 installation and, indeed, <code>stoi()</code> is not recognized, for whatever reason.  However, its functionality can be easily replaced using <code>strtol()</code>, which does work fine in 4.8.1.  Of course, the parameter types are somewhat different between the two functions, but the differences can be accounted for trivially.  Please see documentation for the two functions.</p>\n"}], "owner": {"reputation": 95, "user_id": 5869687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4da6322524b159e6381d02facf7aaa32?s=128&d=identicon&r=PG&f=1", "display_name": "stevenhawkingsbiggestfan", "link": "https://stackoverflow.com/users/5869687/stevenhawkingsbiggestfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1455163880, "accepted_answer_id": 35330623, "answer_count": 1, "score": 0, "last_activity_date": 1455163733, "creation_date": 1455134150, "question_id": 35324686, "link": "https://stackoverflow.com/questions/35324686/mingw-4-8-1-cant-use-c11", "closed_reason": "Duplicate", "title": "MinGW 4.8.1 can&#39;t use C++11", "body": "<p>I'm trying to use <em>stoi</em> function with MinGW 4.8.1 but it says that \"stoi is not defined in this scope\". I got C++11 support checked in both project and compiler settings. Here are the build commands:</p>\n\n<pre><code>mingw32-g++.exe -std=c++11 -Wall -fexceptions -std=c++11 -std=c++11 -g -std=c++11  -c\n</code></pre>\n"}, {"tags": ["c++", "graphics", "texture-mapping", "raytracing"], "comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1455143569, "post_id": 35324666, "comment_id": 58363180, "body": "If &quot;105 is image width,&quot; then why are you multiplying by 150?  Why don&#39;t you use <code>image.width()</code> and <code>image.height()</code> to make sure you get those values right?  Why not add some assertions to make sure <code>u</code> and <code>v</code> are normalized correctly?"}, {"owner": {"reputation": 3, "user_id": 4339035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59612ed4cf5b8f90405752571700287?s=128&d=identicon&r=PG&f=1", "display_name": "Twm", "link": "https://stackoverflow.com/users/4339035/twm"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1455148166, "post_id": 35324666, "comment_id": 58365000, "body": "Thanks for replying. 105 was a typo and I&#39;m not very familiar with Cimg so I didnt know about .width(). I added assert statements for u,v, width and height but I&#39;m still getting the same result"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1455150412, "post_id": 35324666, "comment_id": 58365715, "body": "Why is the sphere oblong (wider than tall)?  It suggests you have other geometry problems going on."}, {"owner": {"reputation": 3, "user_id": 4339035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59612ed4cf5b8f90405752571700287?s=128&d=identicon&r=PG&f=1", "display_name": "Twm", "link": "https://stackoverflow.com/users/4339035/twm"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1455151258, "post_id": 35324666, "comment_id": 58365979, "body": "I think that&#39;s caused by my FOV and screen width not being setup properly but I&#39;ll look into it. Thanks"}, {"owner": {"reputation": 3, "user_id": 4339035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59612ed4cf5b8f90405752571700287?s=128&d=identicon&r=PG&f=1", "display_name": "Twm", "link": "https://stackoverflow.com/users/4339035/twm"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1455155058, "post_id": 35324666, "comment_id": 58367044, "body": "I feel like a fool. my vector getXYZ methods were all returning z. thanks a lot for your help"}], "owner": {"reputation": 3, "user_id": 4339035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59612ed4cf5b8f90405752571700287?s=128&d=identicon&r=PG&f=1", "display_name": "Twm", "link": "https://stackoverflow.com/users/4339035/twm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1455134034, "creation_date": 1455134034, "question_id": 35324666, "link": "https://stackoverflow.com/questions/35324666/texture-mapping-sphere-in-ray-tracing", "title": "Texture mapping sphere in ray tracing", "body": "<p>I'm trying to texture a sphere using a .bmp image with cimg but its not texturing properly.\nheres the texture image\n<a href=\"http://i.stack.imgur.com/sinf1.png\" rel=\"nofollow\">texture</a></p>\n\n<p>This is the result. <a href=\"http://i.stack.imgur.com/5QPef.png\" rel=\"nofollow\">result</a></p>\n\n<p>Here's my code for calculating the color at the intersection point.</p>\n\n<pre><code>virtual RGBColor getTexture(Point3D pos){\n    //normal of intersection point and sphere\n    Vector3D N = this-&gt;getNormal(pos);\n    N.normalize();\n\n\n    double u = 0.5 + atan2(N.getY(), N.getX()) / (2 * 3.141592653589793);\n    double v = 0.5 - asin(N.getY()) / 3.141592653589793;\n\n    CImg&lt;int&gt; image(\"pattern.bmp\");\n    float width = u * 150;//105 is image width\n    float height = v * 105;\n    float r;\n    float g;\n    float b;\n\n     r = image(width, height, 0, 0);\n     g = image(width, height, 0, 1);\n     b = image(width, height, 0, 2);\n\n    return(RGBColor(r,g,b));\n}\n</code></pre>\n\n<p>Pos is the point of intersection.\nAny help is apreciated</p>\n"}, {"tags": ["c++", "median"], "comments": [{"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1455134998, "post_id": 35324662, "comment_id": 58358728, "body": "If you have an even number of elements, the median is the sum of the two middle elements."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 2, "creation_date": 1455135076, "post_id": 35324662, "comment_id": 58358774, "body": "@RPGillespie You mean the mean."}], "answers": [{"tags": [], "owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "is_accepted": false, "score": 2, "last_activity_date": 1455134933, "creation_date": 1455134933, "answer_id": 35324894, "question_id": 35324662, "link": "https://stackoverflow.com/questions/35324662/c-calculate-median-with-reference/35324894#35324894", "title": "C++ calculate median with reference", "body": "<p>According to the docs (<a href=\"http://en.cppreference.com/w/cpp/algorithm/nth_element\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/algorithm/nth_element</a>) the function you're using will actually reorder the array, partially.</p>\n\n<p>You would need to keep a copy of the original and step through it to find an element matching the median.</p>\n\n<p>Another way to get it done is to have a vector of tuples, where the index is simply stored as the second member of the tuple. If course you'd still be stepping through the vector at some point.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455149094, "post_id": 35325265, "comment_id": 58365299, "body": "@jarod thanks for fix, but you broke it while doing so: it is supposed to return the iterator to the median in the original container."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1455148779, "last_edit_date": 1455148779, "creation_date": 1455136128, "answer_id": 35325265, "question_id": 35324662, "link": "https://stackoverflow.com/questions/35324662/c-calculate-median-with-reference/35325265#35325265", "title": "C++ calculate median with reference", "body": "<p>I am assuming you do not want to reorder the original container.  If wrong, there are easier ways.</p>\n\n<p><code>nth_element</code> takes a comparator.</p>\n\n<p>So first create a vector of iterators into the original container, then write a comparator that takes 2 iterators, deferences them, amd compares the result.</p>\n\n<pre><code>template&lt;class C&gt;\nauto median(C const&amp; c){\n  using std::begin; using std::end;\n  auto start = begin(c);\n  auto finish = end(c);\n  using iterator = decltype(start);\n  std::vector&lt;iterator&gt; working;\n  for(auto it = start; it != finish; ++it)\n    working.push_back(it);\n  if (working.empty())\n      return start;\n  std::nth_element(\n      begin(working), begin(working) + working.size() / 2, end(working),\n      [](iterator lhs, iterator rhs){\n          return *lhs &lt; *rhs;\n      }\n  );\n  return *(begin(working) + working.size() / 2);\n}\n</code></pre>\n\n<p>This does rely on some C++14 (auto return type deduction), but every major compiler (except possibly icc?) has support for it now.</p>\n\n<p>It is flexible enough to work on even C style arrays, and I think it even works with sentinels.</p>\n\n<p><a href=\"https://ideone.com/sa2rpc\" rel=\"nofollow\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "is_accepted": false, "score": 1, "last_activity_date": 1455141942, "last_edit_date": 1495541267, "creation_date": 1455141942, "answer_id": 35326884, "question_id": 35324662, "link": "https://stackoverflow.com/questions/35324662/c-calculate-median-with-reference/35326884#35326884", "title": "C++ calculate median with reference", "body": "<p>It is hard to know what you mean by \"do this very fast\" without knowing the exact nature of your problem or the number of elements in the data series involved, however you might like to look at the \"heap median\" aka \"rolling median\" aka \"streaming median\" algorithm described <a href=\"https://stackoverflow.com/questions/10657503/find-running-median-from-a-stream-of-integers\">here</a>, <a href=\"https://stackoverflow.com/questions/1309263/rolling-median-algorithm-in-c\">here</a>, <a href=\"https://stackoverflow.com/questions/10966298/c-implementing-heap-median-function\">here</a> and <a href=\"https://stackoverflow.com/questions/10930732/c-efficiently-calculating-a-running-median\">here</a> in the SO site. </p>\n\n<p>With this method, you can store the index of the current candidate median value without needing to iterate over the original array of data again to find the index of the median. You don't need to modify the order of the original container either.</p>\n"}], "owner": {"reputation": 901, "user_id": 4673476, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Omlfj.jpg?s=128&g=1", "display_name": "black", "link": "https://stackoverflow.com/users/4673476/black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 35325265, "answer_count": 3, "score": 3, "last_activity_date": 1455148779, "creation_date": 1455134016, "last_edit_date": 1455134128, "question_id": 35324662, "link": "https://stackoverflow.com/questions/35324662/c-calculate-median-with-reference", "title": "C++ calculate median with reference", "body": "<p>I try to calculate the median of a vector called <code>median</code>:</p>\n\n<pre><code>std::nth_element(median.begin(), median.begin() + median.size() / 2, median.end());     \nmedianVal = median[median.size() / 2];  \ncout &lt;&lt; \"The median is \" &lt;&lt; medianVal &lt;&lt; endl;\n</code></pre>\n\n<p>This works fine. But I need to get the position of the median value in its original vector. How can I do this very fast?</p>\n"}, {"tags": ["c++", "string", "stl"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 3, "creation_date": 1455134091, "post_id": 35324646, "comment_id": 58358189, "body": "Have you seen <a href=\"http://en.cppreference.com/w/cpp/algorithm/replace\" rel=\"nofollow noreferrer\"><code>std::replace_if</code></a>?"}, {"owner": {"reputation": 5088, "user_id": 1870790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/74516aa9ada5685130de646902051d8c?s=128&d=identicon&r=PG", "display_name": "gsf", "link": "https://stackoverflow.com/users/1870790/gsf"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1455134231, "post_id": 35324646, "comment_id": 58358276, "body": "Yeah, this will do it. Maybe it is so obvious, this is why nobody asked it before - but nowadays I am using stack overflow as documentation - which in this case failed me."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1455134427, "post_id": 35324646, "comment_id": 58358408, "body": "<code>QString &amp; QString::replace(const QRegExp &amp; rx, const QString &amp; after)</code>  <a href=\"http://doc.qt.io/qt-4.8/qstring.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qstring.html</a>"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1455135089, "post_id": 35324646, "comment_id": 58358778, "body": "@user3528438 How does Qt apply to this question (i.e., what does it have to do with the STL)?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1455135664, "post_id": 35324646, "comment_id": 58359083, "body": "@JamesAdkison To show that the most stl-ish answer to this question is to imporve <code>std::string</code> to be at least as full-featured as <code>QString</code>."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1455136497, "post_id": 35324646, "comment_id": 58359575, "body": "@user3528438 Fair enough. To play devil&#39;s advocate, some may be inclined to think separation of data and algorithms is a strength."}], "answers": [{"tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": true, "score": 9, "last_activity_date": 1455134233, "creation_date": 1455134233, "answer_id": 35324706, "question_id": 35324646, "link": "https://stackoverflow.com/questions/35324646/what-is-the-most-stl-ish-way-to-replace-character-in-a-stdstring-that-are-dete/35324706#35324706", "title": "What is the most stl-ish way to replace character in a std::string that are determined by predicate?", "body": "<p>According to me, this would be:</p>\n\n<p><a href=\"http://ideone.com/bcd20z\">http://ideone.com/bcd20z</a></p>\n\n<pre><code>int main()\n{\n    std::string s = \"abc12df34\";\n    std::replace_if(s.begin(), s.end(), [](char c) { return isdigit(c); }, '#');\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 525, "user_id": 5869301, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/86a49e0145a284ba5a05873250323f4d?s=128&d=identicon&r=PG&f=1", "display_name": "bisthebis", "link": "https://stackoverflow.com/users/5869301/bisthebis"}, "is_accepted": false, "score": 2, "last_activity_date": 1455134682, "creation_date": 1455134682, "answer_id": 35324830, "question_id": 35324646, "link": "https://stackoverflow.com/questions/35324646/what-is-the-most-stl-ish-way-to-replace-character-in-a-stdstring-that-are-dete/35324830#35324830", "title": "What is the most stl-ish way to replace character in a std::string that are determined by predicate?", "body": "<p>Assuming C++11 at least, I'd say for_each with a lambda function with iterators to individual char sending a reference to char.\nNot sure about how fast it is, but STL-ish, I guess it's quite much :)</p>\n\n<pre><code>using namespace std;\nint main()\n{\n    string text(\"abc12df34\";\n    for_each(text.begin(), text.end(), [](char &amp;current) {if (current &gt;= '0' &amp;&amp; current &lt;= '9') current = '#';});\n.....\n}\n</code></pre>\n\n<p>EDIT : I've just read previous answer. I didn't know about is_digit and didn't think about std::replace_if. I guess it's a better way than mine. But both work :)</p>\n"}, {"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 1, "last_activity_date": 1455134739, "creation_date": 1455134739, "answer_id": 35324840, "question_id": 35324646, "link": "https://stackoverflow.com/questions/35324646/what-is-the-most-stl-ish-way-to-replace-character-in-a-stdstring-that-are-dete/35324840#35324840", "title": "What is the most stl-ish way to replace character in a std::string that are determined by predicate?", "body": "<p>Use <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow\"><code>std::transform</code></a> to transform the string and a lambda as a unary predicate.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::string s(\"abc12df34\");\n    using std::begin;\n    using std::end;\n    std::transform(begin(s), end(s), begin(s), [&amp;](char c)\n    {\n        return (c &gt;= '0' &amp;&amp; c &lt;= '9') ? '#' : c;\n    });\n\n    std::cout &lt;&lt; s &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135208, "last_edit_date": 1455135208, "creation_date": 1455135156, "answer_id": 35324958, "question_id": 35324646, "link": "https://stackoverflow.com/questions/35324646/what-is-the-most-stl-ish-way-to-replace-character-in-a-stdstring-that-are-dete/35324958#35324958", "title": "What is the most stl-ish way to replace character in a std::string that are determined by predicate?", "body": "<p>Why not keep it simple and readable instead of trying to be \"stl-ish\":</p>\n\n<pre><code>for (char&amp; ch : str) {\n  if (isdigit(ch)) ch = '#';\n}\n</code></pre>\n"}], "owner": {"reputation": 5088, "user_id": 1870790, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/74516aa9ada5685130de646902051d8c?s=128&d=identicon&r=PG", "display_name": "gsf", "link": "https://stackoverflow.com/users/1870790/gsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 35324706, "answer_count": 4, "score": 0, "last_activity_date": 1455135208, "creation_date": 1455133971, "question_id": 35324646, "link": "https://stackoverflow.com/questions/35324646/what-is-the-most-stl-ish-way-to-replace-character-in-a-stdstring-that-are-dete", "title": "What is the most stl-ish way to replace character in a std::string that are determined by predicate?", "body": "<p>If I have a string <code>abc12df34</code>, I would like to replace say the digits with # and receive <code>abc##df##</code>.</p>\n\n<p>What is the most stl-ish way to do this?</p>\n"}, {"tags": ["c++", "qt", "video", "mp4"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1455135268, "post_id": 35324443, "comment_id": 58358891, "body": "On Linux Qt uses GStreamer, so you&#39;re probably just missing a plugin. Depending on your distro, you may just have to install a package through your package manager."}, {"owner": {"reputation": 183, "user_id": 2422729, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/befc5da2b66fe43231c8536055362c0c?s=128&d=identicon&r=PG", "display_name": "Giu_ai", "link": "https://stackoverflow.com/users/2422729/giu-ai"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1455138201, "post_id": 35324443, "comment_id": 58360516, "body": "It worked!! Thanks!!!"}], "owner": {"reputation": 183, "user_id": 2422729, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/befc5da2b66fe43231c8536055362c0c?s=128&d=identicon&r=PG", "display_name": "Giu_ai", "link": "https://stackoverflow.com/users/2422729/giu-ai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455241783, "creation_date": 1455133280, "last_edit_date": 1455241783, "question_id": 35324443, "link": "https://stackoverflow.com/questions/35324443/cannot-play-mp4-videos-decoder-missing-qt-creator", "title": "Cannot play mp4 videos, decoder missing Qt Creator", "body": "<p>I am running Linux and when I try to play an mp4 video in Qt I get the following message:</p>\n\n<blockquote>\n  <p>Warning: \"No decoder available for type 'video/x-h264,<br>\n  stream-format=(string)avc, alignment=(string)au, level=(string)4.2,<br>\n  profile=(string)high,<br>\n  codec_data=(buffer)0164002affe100352764002aac34c80780227e5c05b808080a000007d000030d41d0c000e4e00000e4e1d77971a18001c9c00001c9c3aef2e1f088451601000428ee3830,<br>\n  width=(int)1920, height=(int)1080, framerate=(fraction)50/1,<br>\n  pixel-aspect-ratio=(fraction)1/1, parsed=(boolean)true'.\"</p>\n</blockquote>\n\n<p>The audio is actaully working great but I cannot see the video. Any help?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "vector", "unique-ptr"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1455133406, "post_id": 35324428, "comment_id": 58357773, "body": "I see no vector slicing in your code.  All you have is a struct that contains a vector, and you&#39;re making a vector of these struct&#39;s."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1455133455, "post_id": 35324428, "comment_id": 58357802, "body": "In order to have slicing you need inheritance. Do you have inheritance in your code?"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1455133464, "post_id": 35324428, "comment_id": 58357811, "body": "What do you mean by &quot;slicing&quot;? If you want instances of <code>Bar</code> in <code>Foo</code> then <code>std::vector&lt;Bar&gt;</code> is the way to go."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 2607597, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/reSd1.png?s=128&g=1", "display_name": "Riptide", "link": "https://stackoverflow.com/users/2607597/riptide"}, "edited": false, "score": 0, "creation_date": 1455136735, "post_id": 35324493, "comment_id": 58359728, "body": "Ahhh Allright, yes, Bar is a &quot;flat&quot; class. I didn&#39;t get this well, now everything is clear. Thanks everyone."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 4, "last_activity_date": 1455133448, "creation_date": 1455133448, "answer_id": 35324493, "question_id": 35324428, "link": "https://stackoverflow.com/questions/35324428/vectorclass-or-vectorunique-ptrclass-in-this-case/35324493#35324493", "title": "vector&lt;Class&gt; or vector&lt;unique_ptr&lt;Class&gt;&gt; in this case?", "body": "<p>Object slicing happens when you store a derived value as its base.  It happens only to values.  Assuming you're always storing Bars, and not some derivative thereof, no slicing will occur.  <code>vector</code> stores its values elsewhere--it's not like keeping a statically sized array.</p>\n"}], "owner": {"reputation": 345, "user_id": 2607597, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/reSd1.png?s=128&g=1", "display_name": "Riptide", "link": "https://stackoverflow.com/users/2607597/riptide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35324493, "answer_count": 1, "score": 1, "last_activity_date": 1455133448, "creation_date": 1455133238, "question_id": 35324428, "link": "https://stackoverflow.com/questions/35324428/vectorclass-or-vectorunique-ptrclass-in-this-case", "title": "vector&lt;Class&gt; or vector&lt;unique_ptr&lt;Class&gt;&gt; in this case?", "body": "<p>Let's say I have a class that looks like:</p>\n\n<pre><code>class Foo\n{\n    int sam;\n    float fisher;\n    double irvin;\n\n    vector&lt;Bar&gt; lambert;\n};\n</code></pre>\n\n<p>and I want to store instances of <code>Foo</code> into a vector</p>\n\n<pre><code>vector&lt;Foo&gt; foos;\n</code></pre>\n\n<p>since <code>lambert</code> can hold an undefined amount of <code>Bar</code>s, could object slicing happen or c++'s vector is pretty clever about it ?</p>\n\n<p>Would it be better to use a vector of <code>unique_ptr</code> or do I worry too much about it ?</p>\n\n<pre><code>class Foo\n{\n    ...\n    vector&lt;unique_ptr&lt;Bar&gt;&gt; lambert;\n};\n</code></pre>\n\n<p>Thanks :) !</p>\n"}, {"tags": ["c++", "linux", "c++11", "dynamic-linking"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1455133748, "post_id": 35324324, "comment_id": 58357983, "body": "-ldl is not just a flag, it&#39;s a library designation, and the order of libraries and object files in the command line does matter."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1455133955, "post_id": 35324324, "comment_id": 58358095, "body": "Q2: no it&#39;s not wrong to kiip it in a static (as long as you&#39;re single-threaded). Addresses of functions don&#39;t change at run time."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1455134055, "post_id": 35324324, "comment_id": 58358167, "body": "Could you explain both your answers a bit more if you have time?"}], "answers": [{"comments": [{"owner": {"reputation": 202, "user_id": 1643971, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vLem.png?s=128&g=1", "display_name": "Achiko Mezvrishvili", "link": "https://stackoverflow.com/users/1643971/achiko-mezvrishvili"}, "edited": false, "score": 0, "creation_date": 1455134349, "post_id": 35324691, "comment_id": 58358351, "body": "Oh  and  by the way about  your  Q2,  if  specified  function  is declared as volatile(but  this depends  compiler  properties and which compiler you  use) at  run time might be  that function  would  change  behavour  in memory  location :)"}], "tags": [], "owner": {"reputation": 202, "user_id": 1643971, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vLem.png?s=128&g=1", "display_name": "Achiko Mezvrishvili", "link": "https://stackoverflow.com/users/1643971/achiko-mezvrishvili"}, "is_accepted": false, "score": 1, "last_activity_date": 1455134172, "creation_date": 1455134172, "answer_id": 35324691, "question_id": 35324324, "link": "https://stackoverflow.com/questions/35324324/about-the-ldl-flag-while-compiling-and-linking-c-files/35324691#35324691", "title": "About the -ldl flag while compiling and linking C++ files", "body": "<p>Begin  with your  second  question, dynamic linking  works  during run time  either  way in  C/C++  we call  later  binding  with this -> operation. Of course  when  you are  invoking  later  binding declared  like an interface or class  instance,  should be pointing  to  the  specified  object  and  memory location  for  that  object. </p>\n\n<p>The  first one question is more i think specific to  compiler.  I  guess  you  are  compiling not in  Visual Studio(Not in Windows  OS) if i am right  u should  ask  to the vendor  of the compiler  to  configure debugging  properties. :) </p>\n"}, {"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1455135600, "post_id": 35324939, "comment_id": 58359049, "body": "Thank you for the answer! Could you explain why using dlopen would be bad in this case?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1455137649, "post_id": 35324939, "comment_id": 58360223, "body": "When you dlopen a library, you load all its function and data; when you unload it, all the functions and data cease to exist and are no longer accessible; when you dlopen it again, you are loading it to potentially different region of memory."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 12, "last_activity_date": 1455135476, "last_edit_date": 1495541851, "creation_date": 1455135102, "answer_id": 35324939, "question_id": 35324324, "link": "https://stackoverflow.com/questions/35324324/about-the-ldl-flag-while-compiling-and-linking-c-files/35324939#35324939", "title": "About the -ldl flag while compiling and linking C++ files", "body": "<p><code>-ldl</code> is a library designation for the linker. It tells the linker to find and link a file named <code>libdl.so</code> (or sometimes <code>libdl.a</code>). It has the same effect as placing a full path to the library in question in the same position of the command line.</p>\n\n<p>Library and object order on the command line does matter. Normally if library A calls library B, B should be placed after A on the command line. All libraries should normally go after all object files. This is covered extensively in several SO questions and answers like <a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">this one</a>.</p>\n\n<p>As for the second question, no, an address of a function doesn't change at run time unless you <code>dlopen</code> a shared library, then unload it, then <code>dlopen</code> it again. In your case, since you don't <code>dlopen</code> the library, it is safe to keep the function address in a static variable. Of course if you run multiple threads you need to ensure thread safety somehow (mutex it out, or use thread-local storage).</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14480, "favorite_count": 5, "accepted_answer_id": 35324939, "answer_count": 2, "score": 12, "last_activity_date": 1455135918, "creation_date": 1455132875, "last_edit_date": 1455135918, "question_id": 35324324, "link": "https://stackoverflow.com/questions/35324324/about-the-ldl-flag-while-compiling-and-linking-c-files", "title": "About the -ldl flag while compiling and linking C++ files", "body": "<p>With reference to the following code</p>\n\n<p><strong>test_linker.cpp</strong></p>\n\n<pre><code>int main() {\n\n    srand(time(0));\n    for (int i = 0; i &lt; 10; ++i) {\n        cout &lt;&lt; rand() % 10 &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>urandom.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\n#include &lt;dlfcn.h&gt;\n\nint rand() throw() {\n\n    // get the original rand() function\n    static auto original_rand = (decltype(&amp;rand)) dlsym(RTLD_NEXT,\"rand\");\n\n    cout &lt;&lt; \"Call made to rand()\" &lt;&lt; endl;\n    return original_rand();\n}\n</code></pre>\n\n<p>When I try to compile the code with the following command</p>\n\n<pre><code>g++ -std=c++11 -Wall -Werror -Wextra -Wvla -pedantic -O3 urandom.cpp -c\ng++ -std=c++11 -Wall -O3 test_linker.cpp urandom.o -ldl\n</code></pre>\n\n<p>everything works fine, but when I move the <code>-ldl</code> flag to being before the files, the linker throws an error saying </p>\n\n<pre><code>urandom.cpp:(.text+0xaf): undefined reference to `dlsym'\n</code></pre>\n\n<p><strong>Question 1</strong> Could someone explain why this would happen?  I generally do not care about the order of flags in a compilation command. </p>\n\n<p><strong>Question 2</strong> Also is it wrong to keep the function pointer to the original <code>rand()</code> function a static variable? I do not know how exactly dynamic linking works and I am afraid that maybe the function address is moved around in memory at runtime.  The manual pages said that the <code>dlsym()</code> function with the <code>RTLD_NEXT</code> handle is an expensive computation so I just wanted to lazily evaluate this once. </p>\n\n<p>Note : I am compiling this on a Linux distribution and the Linux dynamic linker is involved so I will go ahead and tag this with Linux also. </p>\n"}, {"tags": ["c++", "function", "class", "templates", "c++11"], "comments": [{"owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "edited": false, "score": 0, "creation_date": 1455133001, "post_id": 35324267, "comment_id": 58357516, "body": "Can you please update your code exactly how you are calling your class and how you initialize your class?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1455133314, "post_id": 35324267, "comment_id": 58357717, "body": "Yes, an actual MCVE would help. Just add a toy <code>main</code> that creates an instance of your <code>Class&lt;some stuff here&gt;</code> then does <code>.callFunc()</code> on it, and confirm it compiles &amp; generates the error in MSVC."}], "answers": [{"comments": [{"owner": {"reputation": 1437, "user_id": 533837, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c8489de4d591d27ad9a2a943a52804e7?s=128&d=identicon&r=PG", "display_name": "AnorZaken", "link": "https://stackoverflow.com/users/533837/anorzaken"}, "edited": false, "score": 0, "creation_date": 1473181640, "post_id": 35324469, "comment_id": 66038584, "body": "+1, This answered the question I googled for and the one I thought this was about based on the question&#39;s title."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 6, "last_activity_date": 1455134227, "last_edit_date": 1455134227, "creation_date": 1455133366, "answer_id": 35324469, "question_id": 35324267, "link": "https://stackoverflow.com/questions/35324267/cannot-call-generic-stdfunction-member-from-template-class/35324469#35324469", "title": "Cannot call generic std::function member from template class", "body": "<p>I suspect you want something like that:</p>\n\n<pre><code>template &lt;typename F&gt;\nclass Class;\n\ntemplate&lt;typename R, typename... P&gt;\nclass Class&lt;R(P...)&gt; {\npublic:\n    std::function&lt;R(P...)&gt; func;\n    void callFunc(P... p) { func(p...); }\n};\n</code></pre>\n\n<p>By using partial specialization that way you can easily define the type you want.<br>\nAs an example, you can use it as:</p>\n\n<pre><code>Class&lt;int(double)&gt; c;\n</code></pre>\n\n<p>Of course, I noticed that you have no constructors for your class, so to invoke <code>func</code> is not a good idea, but it's quite easy to define it and pass a proper function as an argument.</p>\n\n<p>It follows a complete and working example where I've used the <code>operator()</code> to invoke the function:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntemplate &lt;typename F&gt;\nclass Class;\n\ntemplate&lt;typename R, typename... P&gt;\nclass Class&lt;R(P...)&gt; {\npublic:\n    Class(std::function&lt;R(P...)&gt; f): func{f} { }\n    void operator()(P... p) { func(p...); }\nprivate:\n    std::function&lt;R(P...)&gt; func;\n};\n\nvoid fn() { }\n\nint main() {\n    std::function&lt;void()&gt; f = fn;\n    Class&lt;void()&gt; c{f};\n    c();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": false, "score": 1, "last_activity_date": 1455133764, "creation_date": 1455133764, "answer_id": 35324584, "question_id": 35324267, "link": "https://stackoverflow.com/questions/35324267/cannot-call-generic-stdfunction-member-from-template-class/35324584#35324584", "title": "Cannot call generic std::function member from template class", "body": "<p>Is this what you are trying to do?</p>\n\n<p><a href=\"http://ideone.com/fork/IZ0Z1A\" rel=\"nofollow\">http://ideone.com/fork/IZ0Z1A</a></p>\n\n<p>If functionSignature is NOT a function, std::function will throw errors when you create Class but you could add a constructor and throw there a <code>static_assert(std::is_function&lt;functionSignature&gt;::value == true,\" \");</code>if you want I guess.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename functionSignature&gt;\nclass Class\n{\npublic:\n    std::function&lt;functionSignature&gt; func;\n    void callFunc() { func(); }\n};\n\nvoid f()\n{\n    std::cout &lt;&lt; \"hello\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    Class&lt;decltype(f)&gt; t {f};\n    t.callFunc();\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1455137359, "post_id": 35325485, "comment_id": 58360056, "body": "Well, since the OP changed the original question, my first answer still makes sense, but this one is more focused indeed."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1455138412, "post_id": 35325485, "comment_id": 58360624, "body": "@skypjack - There wasn&#39;t much to go on at the time you wrote your answer. You read the OP&#39;s mind, and then some. +1, on your answer, that is."}], "tags": [], "owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "is_accepted": true, "score": 2, "last_activity_date": 1455136910, "creation_date": 1455136910, "answer_id": 35325485, "question_id": 35324267, "link": "https://stackoverflow.com/questions/35324267/cannot-call-generic-stdfunction-member-from-template-class/35325485#35325485", "title": "Cannot call generic std::function member from template class", "body": "<p>Your error is here:</p>\n\n<blockquote>\n<pre><code>Class&lt;void(const int)&gt; a(std::bind(f, 10));\n</code></pre>\n</blockquote>\n\n<p>The function <code>Class::callFunc()</code> invokes <code>func()</code> -- i.e., no arguments. The result of <code>std::bind(f, 10)</code> is also a function that takes no arguments, which is consistent with the template argument to the class template. Using <code>Class&lt;void(const int)&gt;</code> is inconsistent with both the usage in the class template and the initialization.</p>\n\n<p>The solution is easy: Change the errant line to</p>\n\n<pre><code>Class&lt;void()&gt; a(std::bind(f, 10));\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 4355866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006536852159/picture?type=large", "display_name": "Stefan Dimitrov", "link": "https://stackoverflow.com/users/4355866/stefan-dimitrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 3, "accepted_answer_id": 35325485, "answer_count": 3, "score": 6, "last_activity_date": 1455136910, "creation_date": 1455132705, "last_edit_date": 1455135772, "question_id": 35324267, "link": "https://stackoverflow.com/questions/35324267/cannot-call-generic-stdfunction-member-from-template-class", "title": "Cannot call generic std::function member from template class", "body": "<p>When compiling the following code:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntemplate &lt;typename functionSignature&gt;\nclass Class\n{        \n    std::function&lt;functionSignature&gt; func;\npublic:\n    Class(const std::function&lt;functionSignature&gt;&amp; arg) : func(arg) {}\n    void callFunc() { func(); }\n};\n\nvoid f(const int i) {}\n\nint main()\n{\n    Class&lt;void(const int)&gt; a(std::bind(f, 10));\n    a.callFunc();\n    return 0;\n}\n</code></pre>\n\n<p>The VS 2015 compiler generates the following error message at the sixth line:</p>\n\n<pre><code>error C2064: term does not evaluate to a function taking 0 arguments.\n</code></pre>\n\n<p>Now, I believe this is because the compiler thinks <code>functionSignature</code> is not, well, a function signature; the same error happens when I instantiate and try to call <code>operator()</code> on an <code>std::function&lt;int&gt;</code> instead of <code>std::function&lt;int()&gt;</code>, for instance.</p>\n\n<p>How can I guarantee that the template argument will always be a function signature, so that I can call <code>operator()</code> on the <code>std::function</code>?</p>\n"}, {"tags": ["c++", "string", "c++11", "wstring"], "comments": [{"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455134593, "post_id": 35324237, "comment_id": 58358498, "body": "What do you have try? Have you see this <a href=\"http://stackoverflow.com/questions/24952008\">stackoverflow.com/questions/24952008</a> ? Full source code with errors?"}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "reply_to_user": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455164952, "post_id": 35324237, "comment_id": 58369693, "body": "Sorry, I don&#39;t see how the question you linked is related to my question."}], "answers": [{"comments": [{"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455136287, "post_id": 35324924, "comment_id": 58359453, "body": "more universal and accuracy method is use std::u16string::value_type instead of char16_t, and analogue for anothe types"}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1455164796, "post_id": 35324924, "comment_id": 58369642, "body": "There is a bug with windows, you have to use <code>typedef std::basic_ofstream&lt;wchar_t&gt; u16ofstream;</code> but it works fine. Thanks"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 1, "creation_date": 1455173830, "post_id": 35324924, "comment_id": 58373100, "body": "so use typedef std::basic_ofstream&lt;std::u16string::value_type&gt; u16ofstream;"}], "tags": [], "owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "is_accepted": true, "score": 2, "last_activity_date": 1455135060, "creation_date": 1455135060, "answer_id": 35324924, "question_id": 35324237, "link": "https://stackoverflow.com/questions/35324237/write-a-stdu16string-to-file/35324924#35324924", "title": "Write a std::u16string to file?", "body": "<p>You need to create a <code>basic_ofstream</code> whose char type is equivalent to the <code>u16string</code> value type, which should be <code>char16_t</code>:</p>\n\n<pre><code>typedef std::basic_ofstream&lt;char16_t&gt; u16ofstream;\n\nu16ofstream outfile(\"words.txt\", std::ios_base::app);\noutfile &lt;&lt; someu16string; \noutfile.close();\n</code></pre>\n\n<p>Alternatively, you can convert the <code>u16string</code> to a regular <code>string</code> and just write it to a plain <code>ofstream</code>, but you'll have to handle the conversion and deal with the string's encoding on your own.</p>\n\n<p><code>wofstream</code> may also be compatible with <code>u16string</code> on some platforms (specifically Windows), but it's not portable.</p>\n"}], "owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "accepted_answer_id": 35324924, "answer_count": 1, "score": 0, "last_activity_date": 1455135060, "creation_date": 1455132586, "question_id": 35324237, "link": "https://stackoverflow.com/questions/35324237/write-a-stdu16string-to-file", "title": "Write a std::u16string to file?", "body": "<p>I am trying to write a std::u16string to file<br>\nIt can easily be done with std::string </p>\n\n<pre><code>// ... pseudocode\nstd::wofstream outfile;\noutfile.open(\"words.txt\", std::ios_base::app);\noutfile &lt;&lt; \"something\"; \noutfile.close();\n// ...\n</code></pre>\n\n<p>But how can I write a std::u16string to file?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "input"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1455132679, "post_id": 35324226, "comment_id": 58357285, "body": "How much &quot;history&quot; would you want to preserve?  Sounds a bit like pre-mature optimization to me."}, {"owner": {"reputation": 137, "user_id": 5483940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PALp0.png?s=128&g=1", "display_name": "K.Yazoglu", "link": "https://stackoverflow.com/users/5483940/k-yazoglu"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1455132752, "post_id": 35324226, "comment_id": 58357335, "body": "@Chad for all inputs if  possible."}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1455133934, "post_id": 35324226, "comment_id": 58358084, "body": "You will have a nice logical challenge when the ranges do not include each other. i. e. &quot;6,1000,5&quot;, &quot;0,1,5&quot;, &quot;3,5,5&quot;, &quot;2000,3000,5&quot;."}, {"owner": {"reputation": 137, "user_id": 5483940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PALp0.png?s=128&g=1", "display_name": "K.Yazoglu", "link": "https://stackoverflow.com/users/5483940/k-yazoglu"}, "reply_to_user": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1455134880, "post_id": 35324226, "comment_id": 58358659, "body": "@Nacho maybe next input is &quot;0,10,5&quot; who knows? :) at some point they will include eachother. If they don&#39;t then there is no problem in the first place."}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1455136092, "post_id": 35324226, "comment_id": 58359325, "body": "Exactly, as LukeG said in his answer &quot;the cache you are building up with this technique can get out of hand pretty quickly and could ... get even bigger than the array itself, eliminating the possible speed gain&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "is_accepted": false, "score": 2, "last_activity_date": 1455138753, "last_edit_date": 1455138753, "creation_date": 1455133286, "answer_id": 35324445, "question_id": 35324226, "link": "https://stackoverflow.com/questions/35324226/how-to-hold-information-for-specific-inputs/35324445#35324445", "title": "How to hold information for specific inputs", "body": "<p>You could do it exactly as you described. Create a datatype consisting of the information of your search (from-index, to-index, searched number) as well as the result (unsuccessful, or the found index). For every search you save this information in a list. When a new search is started you could first check if there is something relevant in the cache. If there is, you can limit the search space.</p>\n\n<p>However, do mind that the cache you are building up with this technique can get out of hand pretty quickly and could (if there are a lot of searches done) get even bigger than the array itself, eliminating the possible speed gain. I don't think that's a viable way to optimize array searches. This would efficiently work only in very specific cases and I would probably not recommend doing this as a general optimization.</p>\n"}], "owner": {"reputation": 137, "user_id": 5483940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PALp0.png?s=128&g=1", "display_name": "K.Yazoglu", "link": "https://stackoverflow.com/users/5483940/k-yazoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497008179, "creation_date": 1455132541, "last_edit_date": 1497008179, "question_id": 35324226, "link": "https://stackoverflow.com/questions/35324226/how-to-hold-information-for-specific-inputs", "title": "How to hold information for specific inputs", "body": "<p>What I want to do is to save time. For example say that you have array A. 3 inputs are given. \"4,1000,5\". You will search for the number \"5\" in between the indexes 4 and 1000 of A. Let's say that there is no \"5\" in this space and you want to hold this information. So that in an another search when you have to search for 5 in between some smaller number than 4, say 2, and some larger number than 1000, say 2000, you will not search for it in the previous space. Search time will be reduced.</p>\n\n<p>I generalized the question, I'm not looking for an example which is only valid for this specific example.(you can say though)</p>\n"}, {"tags": ["c++", "security", "design-patterns", "dll-injection"], "comments": [{"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 4, "creation_date": 1455132852, "post_id": 35324222, "comment_id": 58357403, "body": "<code>&quot;Check time difference between the last attack packet ignore everything that is too fast. (for server)&quot;</code> to me this sounds like the easiest and safest by far. If you only have <code>600</code> players, you can most likely afford any server overhead. And if it&#39;s a server side check, it&#39;s unlikely they&#39;ll find something that will break the same thing. Why not do this?"}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1455132980, "post_id": 35324222, "comment_id": 58357501, "body": "@IVlad yes, this has been implemented. Problem is attacks and skills has different animation delays. There is about 100+ different delays. So the current implementation only checks the shortest delay on all the attacks. Which means they are still able to get the longer delay attacks a bit shorter."}, {"owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1455133023, "post_id": 35324222, "comment_id": 58357526, "body": "@IVlad I&#39;m also just checking on other ideas. :)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1455135099, "post_id": 35324222, "comment_id": 58358783, "body": "Tell the server about all the attack times?"}, {"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 0, "creation_date": 1455145078, "post_id": 35324222, "comment_id": 58363813, "body": "Delays are somehow written in the client code. Refactor it so that the same values are shared between client and server code. Must control it on the server side. Forget about controlling the client side. That is a wasted time and effort."}], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 8985046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqc2A.jpg?s=128&g=1", "display_name": "GuidedHacking", "link": "https://stackoverflow.com/users/8985046/guidedhacking"}, "is_accepted": false, "score": 0, "last_activity_date": 1587235306, "creation_date": 1587235306, "answer_id": 61294355, "question_id": 35324222, "link": "https://stackoverflow.com/questions/35324222/basic-protection-of-a-game-client/61294355#61294355", "title": "Basic Protection of a Game Client", "body": "<blockquote>\n  <p>Detour ReadProcessMemory or OpenProcess and exit when called?</p>\n</blockquote>\n\n<p>These are not being called in your process so hooking them locally wouldn't do anything.  You would need to hook every running process, which is not recommended.</p>\n\n<blockquote>\n  <p>ReadProcessMemory on my self(game) and check the addresses that they are changing. Check if the values are not within the normal range then exit.</p>\n</blockquote>\n\n<p>You don't need to ReadProcessMemory, you're inside your own process.  Just check the value normally.</p>\n\n<p>You should calculate these values on the server if you don't want the client's to be able to manipulate them, then just replicate this info to the clients and overwrite them.</p>\n\n<p>You can also add an antidebug library to your client to prevent the majority of people from manipulating your process.  <a href=\"https://github.com/fengjixuchui/khaleesi\" rel=\"nofollow noreferrer\">Here</a> is a decent one</p>\n"}], "owner": {"reputation": 14826, "user_id": 3134069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5002efc769839cea1738a0e530f0e5d6?s=128&d=identicon&r=PG", "display_name": "majidarif", "link": "https://stackoverflow.com/users/3134069/majidarif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587235306, "creation_date": 1455132531, "question_id": 35324222, "link": "https://stackoverflow.com/questions/35324222/basic-protection-of-a-game-client", "title": "Basic Protection of a Game Client", "body": "<p>I currently have a multiplayer game that players are starting to use memory editing to to cancel attack animation making the attack packets come-in faster or making the attacks a lot faster than normal.</p>\n\n<p>Yes a better design would be ideal but that could take a while. I wanted to get a temporary fix that can be done quick.</p>\n\n<p>The ideas:</p>\n\n<ul>\n<li>Check time difference between the last attack packet ignore everything that is too fast. (for server)</li>\n<li>Use <code>EnumWindows</code> check for window classes and stop the game if a known memory editor is detected. <code>EnumWindows</code> will be executed each time an attack is made. (for client)</li>\n<li>Use <code>ReadProcessMemory</code> to read running processes and find signitures for known memory editors.</li>\n</ul>\n\n<p>Well the question really is if any of the following could work and how it would be done:</p>\n\n<ul>\n<li><a href=\"http://research.microsoft.com/en-us/projects/detours/\" rel=\"nofollow\">Detour</a> <code>ReadProcessMemory</code> or <code>OpenProcess</code> and exit when called? (though I think this wont work because these functions gets called by the memory editor not my game).</li>\n<li><code>ReadProcessMemory</code> on my self(game) and check the addresses that they are changing. Check if the values are not within the normal range then exit.</li>\n<li>Any suggestions?</li>\n</ul>\n\n<p>I know that it is futile to do this because cheaters that knows what their doing can still get around all this. But my game has only about 600 active players, I believe they are just somewhat <code>scriptkiddies</code>. I think this simple countermeasures should be enough for small games like mine. But of course, the design will be corrected.</p>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1455132551, "post_id": 35324109, "comment_id": 58357206, "body": "Why is this tagged [\u0421] in addition to [\u0421++]? This appears to be a C++-specific question."}, {"owner": {"reputation": 1433, "user_id": 1093346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3a565cb678e2197a9a2320621524fbe?s=128&d=identicon&r=PG", "display_name": "bartgol", "link": "https://stackoverflow.com/users/1093346/bartgol"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1455132640, "post_id": 35324109, "comment_id": 58357259, "body": "Well, the typedef keyword exists also in C, no?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1455132668, "post_id": 35324109, "comment_id": 58357279, "body": "Yes, but you cannot nest typedefs into structs in C. I.e. this very issue does not exist in C."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1455132720, "post_id": 35324109, "comment_id": 58357309, "body": "Yes.  This is not a valid C program"}, {"owner": {"reputation": 1433, "user_id": 1093346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3a565cb678e2197a9a2320621524fbe?s=128&d=identicon&r=PG", "display_name": "bartgol", "link": "https://stackoverflow.com/users/1093346/bartgol"}, "edited": false, "score": 0, "creation_date": 1455132728, "post_id": 35324109, "comment_id": 58357320, "body": "Ah, ok. I code mostly in C++ and did not now that. I&#39;ll take it down."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455133669, "post_id": 35324109, "comment_id": 58357930, "body": "I think this is just an optimization that GCC is making. Since the second <code>typedef</code> is never used, there&#39;s no need to store information about it in the executable file."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455133709, "post_id": 35324109, "comment_id": 58357958, "body": "Have you tried <code>-O0</code> to disable all optimizations?"}, {"owner": {"reputation": 1433, "user_id": 1093346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3a565cb678e2197a9a2320621524fbe?s=128&d=identicon&r=PG", "display_name": "bartgol", "link": "https://stackoverflow.com/users/1093346/bartgol"}, "edited": false, "score": 0, "creation_date": 1455209055, "post_id": 35324109, "comment_id": 58397429, "body": "-O0 should be the default, at least according to gcc webpage <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a>. Anyways, I tried, and got the same result."}], "answers": [{"comments": [{"owner": {"reputation": 1433, "user_id": 1093346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3a565cb678e2197a9a2320621524fbe?s=128&d=identicon&r=PG", "display_name": "bartgol", "link": "https://stackoverflow.com/users/1093346/bartgol"}, "edited": false, "score": 0, "creation_date": 1455209227, "post_id": 35331273, "comment_id": 58397559, "body": "YES! Thank you, that worked! And you&#39;re right, this should be an extreme solution. Point is, in the real code (not the example I posted) the second typedef SHOULD be used, but I can&#39;t access it from gdb, which makes me think it is not used. However, I wanted to check whether or not it was correct to start with.  Thanks!"}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 4, "last_activity_date": 1455167708, "creation_date": 1455167708, "answer_id": 35331273, "question_id": 35324109, "link": "https://stackoverflow.com/questions/35324109/gdb-see-unused-struct-typedef/35331273#35331273", "title": "gdb: see unused struct typedef", "body": "<p>GCC by default omits unused types from debug info.  If you really need this type to appear in the debug info, use <code>-fno-eliminate-unused-debug-types</code>.  However, as the manual warns, this will bloat the resulting debug info.</p>\n"}], "owner": {"reputation": 1433, "user_id": 1093346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3a565cb678e2197a9a2320621524fbe?s=128&d=identicon&r=PG", "display_name": "bartgol", "link": "https://stackoverflow.com/users/1093346/bartgol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 35331273, "answer_count": 1, "score": 3, "last_activity_date": 1455167708, "creation_date": 1455132112, "last_edit_date": 1455132744, "question_id": 35324109, "link": "https://stackoverflow.com/questions/35324109/gdb-see-unused-struct-typedef", "title": "gdb: see unused struct typedef", "body": "<p>I am having trouble seeing all the typedefs of a struct I defined. In particular, if a typedef is not used, gdb does not show it when the type is printed. Here's an example:</p>\n\n<pre><code>struct D\n{\n  typedef double dtype;\n  typedef int itype;\n};\n\nint main(int /*argc*/, char** /*argv*/)\n{\n  D::dtype t;\n\n  t = 2;\n  return 0;\n}\n</code></pre>\n\n<p>When I run gdb, I then type <code>ptype D</code>, but I get only the following</p>\n\n<pre><code>(gdb) ptype D\ntype = struct D {\n    typedef double dtype;\n}\n(gdb) \n</code></pre>\n\n<p>Is there a way to print all the typedefs even if they are not used?\nMiscellaneous info:</p>\n\n<ol>\n<li>I have <code>set print type typedefs on</code></li>\n<li>I compiled with debug symbols: <code>g++ -g -o test main.cpp</code></li>\n<li>gdb version is 7.10</li>\n<li>gcc version is 5.3</li>\n</ol>\n"}, {"tags": ["c++", "unit-testing", "visual-studio-2012"], "comments": [{"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 1, "creation_date": 1455137077, "post_id": 35324065, "comment_id": 58359906, "body": "That question is asking about C# and that class is managed."}, {"owner": {"reputation": 2202, "user_id": 1399272, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/FoRYg.png?s=128&g=1", "display_name": "Bondolin", "link": "https://stackoverflow.com/users/1399272/bondolin"}, "reply_to_user": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1455198016, "post_id": 35324065, "comment_id": 58388896, "body": "I see.  Originally confused by the C++ tab in the docs, but the attribute should have tipped me off.  Would you mind posting this as an answer I can accept?"}], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 2268084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3AomB.png?s=128&g=1", "display_name": "WellerEE", "link": "https://stackoverflow.com/users/2268084/welleree"}, "is_accepted": true, "score": 0, "last_activity_date": 1516028055, "creation_date": 1516028055, "answer_id": 48265400, "question_id": 35324065, "link": "https://stackoverflow.com/questions/35324065/where-is-unittestassertexception-defined/48265400#48265400", "title": "Where is UnitTestAssertException defined?", "body": "<p>It is defined in Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll\nThe location of the file depends on the installation and version Visual Studio you are using.\nFor me it is in the following :</p>\n\n<p>C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\PublicAssemblies\\</p>\n\n<p>AND</p>\n\n<p>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\Common7\\IDE\\PublicAssemblies</p>\n"}], "owner": {"reputation": 2202, "user_id": 1399272, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/FoRYg.png?s=128&g=1", "display_name": "Bondolin", "link": "https://stackoverflow.com/users/1399272/bondolin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 48265400, "answer_count": 1, "score": 0, "last_activity_date": 1516028055, "creation_date": 1455132004, "last_edit_date": 1495542670, "question_id": 35324065, "link": "https://stackoverflow.com/questions/35324065/where-is-unittestassertexception-defined", "title": "Where is UnitTestAssertException defined?", "body": "<p>Trying to catch <code>UnitTestAssertException</code> per the advice given <a href=\"https://stackoverflow.com/a/9382707/1399272\">here</a> (working with Visual C++ 2012).  <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.unittestassertexception(v=vs.110).aspx\" rel=\"nofollow noreferrer\">The MSDN documentation</a> indicates it is in namespace <code>Microsoft.VisualStudio.TestTools.UnitTesting</code>, but what header do I need to include?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1455131302, "post_id": 35323817, "comment_id": 58356363, "body": "Unfortunately, I think you&#39;ll need to provide your own conversions."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 3, "creation_date": 1455131653, "post_id": 35323817, "comment_id": 58356606, "body": "Boost provides mathematical constants at various precisions, including <code>float</code>: <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/math/doc/html/math_toolkit/tutorial/non_templ.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_60_0/libs/math/doc/html/math_toolkit/&hellip;</a>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1455131771, "post_id": 35323817, "comment_id": 58356680, "body": "<code>M_PI</code> is not part of the standard either, so any dependence on it is inherently not platform independent (although nearly everyone provides it)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455132043, "post_id": 35323817, "comment_id": 58356862, "body": "They are macros, so they are not declared at all. They&#39;re just numeric literals. What make you think that is creating a problem? Do you have a platform where overly-precise floating-point literals trigger an error?"}, {"owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "edited": false, "score": 0, "creation_date": 1455132414, "post_id": 35323817, "comment_id": 58357100, "body": "It is a bit weird that such easy things are that complicated to solve."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455132737, "post_id": 35323817, "comment_id": 58357325, "body": "@rici They&#39;re double literals; casting to float introduces a second rounding (the first is in the decimal to binary conversion to double) which may not produce the correctly rounded answer."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1455132902, "post_id": 35323817, "comment_id": 58357439, "body": "@AlanStokes: with the actual value of \u03c0, there is no such issue, although I understand that there exist numbers for which it could be the case."}], "owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3251, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1455131180, "creation_date": 1455131180, "question_id": 35323817, "link": "https://stackoverflow.com/questions/35323817/use-macro-definitions-e-g-m-pi-in-math-h-as-float-not-double", "title": "Use macro definitions (e.g. M_PI) in math.h as float not double", "body": "<p>I noticed that all the mathematical constants are declared as double, which leads to conversion problems on some platforms where no double precision units exist. \nIs there a switch in the standard library of GCC to automatically down-cast or use separate definitions?</p>\n"}, {"tags": ["c++", "capnproto"], "comments": [{"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 1, "creation_date": 1455132122, "post_id": 35323797, "comment_id": 58356908, "body": "I wonder about the close vote. Care to elaborate?"}, {"owner": {"reputation": 2947, "user_id": 1309092, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3aaf7c52bb728e358ccc72d3a8f288e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1309092/rubber-duck"}, "edited": false, "score": 0, "creation_date": 1457664130, "post_id": 35323797, "comment_id": 59520352, "body": "Mods are nuts. Question/Answer helped me."}], "answers": [{"tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 2, "last_activity_date": 1455165308, "last_edit_date": 1495539944, "creation_date": 1455165308, "answer_id": 35330857, "question_id": 35323797, "link": "https://stackoverflow.com/questions/35323797/capn-proto-piecewise-write-large-message-to-disk/35330857#35330857", "title": "Cap&#39;n Proto: Piecewise write large message to disk", "body": "<p>Exactly what you describe probably won't work. When reading a packed message from disk, you must read and unpack the entire message upfront, which will require enough physical RAM to hold the whole thing unpacked.</p>\n\n<p>You have two options:</p>\n\n<ol>\n<li><p>Break the message up into many chunks. Cap'n Proto messages are self-delimiting, so you can write several messages to a file once at a time, and then later read them back one at a time in the same order.</p></li>\n<li><p>Don't use packed format. If the message isn't packed, then you can <code>mmap()</code> it. Then, the operating system will read parts into memory as they are accessed, and can flush them back out of memory later as needed. In this case, reading is trivial, but writing the file initially is tricky. Presumably, the process writing the file <em>also</em> doesn't have space for the whole file in memory. Cap'n Proto doesn't currently support writing via mmap (writable mmap is problematic), but there is usually another trick you can do: Probably, large chunks of your message actually originate directly from some input files, i.e. the message embeds huge byte blobs from other files. In this case, you can mmap() in each of those files, and then you can incorporate them into the message using <code>capnp::Orphanage::referenceExternalData()</code>. This way the files don't all have to be memory-resident at the same time; the OS will page in and out each one in sequence as the final output is being written. <a href=\"https://stackoverflow.com/a/34831852/2686899\">See this answer for more details and some example code.</a></p></li>\n</ol>\n"}], "owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 1, "accepted_answer_id": 35330857, "answer_count": 1, "score": 4, "last_activity_date": 1455188632, "creation_date": 1455131121, "last_edit_date": 1455188632, "question_id": 35323797, "link": "https://stackoverflow.com/questions/35323797/capn-proto-piecewise-write-large-message-to-disk", "title": "Cap&#39;n Proto: Piecewise write large message to disk", "body": "<p>I want to create a giant packed data array, and persist it on disk. I'm using writePackedMessageToFd(). However, since the input data is so large (50GB) I need to pieces of the message to disk to free up memory. </p>\n\n<p>Is this possible with the current version of Cap'n Proto?</p>\n\n<p>Side note: This question is different from mentioned duplicate question in that the output does not need to be streamed, e.g. there could theoretically be other options like a growing file that holds the whole (unfinished) message in a first pass. And a second pass could finish the message. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 3, "creation_date": 1455130343, "post_id": 35323491, "comment_id": 58355806, "body": "Please extract a minimal example. A lot could go wrong in your code. Also, don&#39;t paraphrase but quote the error message (after searching with that very error message on the web in order to make sure you understand the issue). BTW: Assuming you have <code>using namespace std;</code> somewhere (bad practice), then your local parameter <code>cin</code> shadows the object with the same name from namespace <code>std</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455130549, "post_id": 35323491, "comment_id": 58355914, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we are able to see your context. Works <a href=\"http://ideone.com/YLgc4T\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1455130563, "post_id": 35323491, "comment_id": 58355925, "body": "Seems like a bad idea to have a local variable shadow the name of a standard library component. (edit: This was before Ulrich edited his post to indicate the same thing)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455130635, "post_id": 35323491, "comment_id": 58355961, "body": "It isn&#39;t a good practice to name your variables and parameters with names like <code>cin</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1455130646, "post_id": 35323491, "comment_id": 58355971, "body": "@underscore_d Well, besides the confusion it&#39;s leaving, it doesn&#39;t matter much from the point of syntactical correctness."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455130741, "post_id": 35323491, "comment_id": 58356021, "body": "<i>@GarretRodgers</i> Is intellisense fooling you?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1455133092, "post_id": 35323491, "comment_id": 58357568, "body": "@Garret Rodgers: Your code, as posted, is perfectly fine (aside from missing <code>std::</code>) and compiles without any problems in Visual Studio. If you are getting that error, it is rooted in something you are not showing us (additional namespaces, most likely). Under such circumstances any attempts to guess what&#39;s wrong are basically random and likely to cure the symptoms of the problem instead of fixing the real problem."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1455131010, "post_id": 35323675, "comment_id": 58356162, "body": "Hmm, I thought the binary forms of operators (without implicit <code>this</code> LHS) couldn&#39;t possibly be considered to be declared within the class, so the global NS qualification wasn&#39;t needed. Maybe I&#39;m wrong, or maybe OP has another namespace somewhere..."}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455131262, "post_id": 35323675, "comment_id": 58356342, "body": "it worked on my gcc and as far as report from poster exists, it is worked on msvc"}], "tags": [], "owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "is_accepted": true, "score": 1, "last_activity_date": 1455132003, "last_edit_date": 1455132003, "creation_date": 1455130763, "answer_id": 35323675, "question_id": 35323491, "link": "https://stackoverflow.com/questions/35323491/inaccessible-class-members-while-overloading-operators/35323675#35323675", "title": "Inaccessible class members while overloading operators", "body": "<pre><code>friend istream&amp; ::operator&gt;&gt;(istream&amp; cin, Fraction&amp; f);\n</code></pre>\n\n<p>add :: before operator, it mark that function operator>>() placed at global namespace </p>\n\n<p>UPD: Another solution is add predefinition of functions and class, before class and function:</p>\n\n<pre><code>class Fraction;\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; cin, Fraction&amp; f);\n</code></pre>\n\n<p>And of course do not forget that std:: prefix is need for interface (.h/.hpp). But using namespace std; if used only for implementation (.cpp)</p>\n"}], "owner": {"reputation": 13, "user_id": 5910066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4fc6875083e90f82ad4c87c369906b1?s=128&d=identicon&r=PG&f=1", "display_name": "Garret Rodgers", "link": "https://stackoverflow.com/users/5910066/garret-rodgers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 35323675, "answer_count": 1, "score": -1, "last_activity_date": 1455132003, "creation_date": 1455130165, "last_edit_date": 1455130518, "question_id": 35323491, "link": "https://stackoverflow.com/questions/35323491/inaccessible-class-members-while-overloading-operators", "title": "Inaccessible class members while overloading operators", "body": "<p>I have the class:</p>\n\n<pre><code>class Fraction{\n    friend Fraction operator+(Fraction&amp; f1, Fraction&amp; f2);\n    friend Fraction operator-(Fraction&amp; f1, Fraction&amp; f2);\n    friend Fraction operator*(Fraction&amp; f1, Fraction&amp; f2);\n    friend Fraction operator/(Fraction&amp; f1, Fraction&amp; f2);\n    friend istream&amp; operator&gt;&gt;(istream&amp; cin, Fraction&amp; f);\nprivate:\n    int num;\n    int den;\n};\n</code></pre>\n\n<p>And  the operator overload:</p>\n\n<pre><code>istream&amp; operator&gt;&gt;(istream&amp; cin, Fraction&amp; f)\n{\n    char ch;\n    cin &gt;&gt; f.num &gt;&gt; ch &gt;&gt; f.den;\n    return cin;\n}\n</code></pre>\n\n<p>Visual studio is telling me f.num and f.den are inaccessible. Any ideas why?</p>\n"}, {"tags": ["c++", "max"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455128948, "post_id": 35323090, "comment_id": 58354941, "body": "Do you want std::max({a, b, c, ...}) where ... is your &quot;and so on&quot; ?"}, {"owner": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "edited": false, "score": 0, "creation_date": 1455129042, "post_id": 35323090, "comment_id": 58354994, "body": "Basically I want to take those Face1- Face6 and find the max value of them using the max function."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455129072, "post_id": 35323090, "comment_id": 58355007, "body": "Why not use an array of 6 items instead of 6 separate variables?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455129167, "post_id": 35323090, "comment_id": 58355067, "body": "@SgtOVERKILL Then pass a initializer_list by adding {} to std::max({...})"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455129229, "post_id": 35323090, "comment_id": 58355107, "body": "Why not putting the <code>Face[n]</code> variables into a <code>std::vector&lt;int&gt;</code> and use <a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow noreferrer\"><code>std::max_element</code></a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455129304, "post_id": 35323090, "comment_id": 58355148, "body": "@NathanOliver Isn&#39;t that all &#39;int&#39;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455129427, "post_id": 35323090, "comment_id": 58355218, "body": "@DieterL&#252;cking My bad.  Your right.  it just needs to be wrapped with <code>{}</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455129788, "post_id": 35323090, "comment_id": 58355450, "body": "The array / vector will probably not only help with the <code>std::max</code>, it more than likely would reduce a lot of the other code you have now that uses 6 separate variables."}], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "edited": false, "score": 0, "creation_date": 1455130118, "post_id": 35323416, "comment_id": 58355663, "body": "Thank you so much i did not have the {..} that makes it a lot easier for me rather than using a vector at this point in time!"}, {"owner": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "edited": false, "score": 0, "creation_date": 1455130471, "post_id": 35323416, "comment_id": 58355862, "body": "Is there a way to save that max output to a new int?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "edited": false, "score": 0, "creation_date": 1455131040, "post_id": 35323416, "comment_id": 58356187, "body": "@SgtOVERKILL Just put it to an int, avoid new/delete"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1455130510, "last_edit_date": 1455130510, "creation_date": 1455129917, "answer_id": 35323416, "question_id": 35323090, "link": "https://stackoverflow.com/questions/35323090/c-using-max-function-to-find-a-list-of-ints/35323416#35323416", "title": "C++ using Max function to find a list of ints", "body": "<p>Just use std::max with an initializer list (put all variables in between <code>{...}</code>) :</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    int Face1 = 0;\n    int Face2 = 1;\n    int Face3 = 2;\n    int Face4 = 3;\n    int Face5 = 2;\n    int Face6 = 1;\n    std::cout &lt;&lt; std::max({ Face1, Face2, Face3, Face4, Face5, Face6 }) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>An alternative is using an array (c-array, std::array, std::vector, ...)  - many variables acting as an array may be cumbersome - and use <code>std::max_element</code> (as mentioned by @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6).</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 1, "last_activity_date": 1455129959, "creation_date": 1455129959, "answer_id": 35323429, "question_id": 35323090, "link": "https://stackoverflow.com/questions/35323090/c-using-max-function-to-find-a-list-of-ints/35323429#35323429", "title": "C++ using Max function to find a list of ints", "body": "<p>While it might be argued that it would be better to have an array of N faces to do this, to use std::max the way you are asking you just need to turn the list into an initializer list:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nint main() {\n    int Face1 = 10, Face2 = 5, Face3 = 8, Face4 = 20, Face5 = 21, Face6 = 9;\n    std::cout &lt;&lt; std::max({ Face1, Face2, Face3, Face4, Face5, Face6 }) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/TcJKGt\" rel=\"nofollow\">http://ideone.com/TcJKGt</a></p>\n"}], "owner": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1455130510, "creation_date": 1455128764, "last_edit_date": 1455128975, "question_id": 35323090, "link": "https://stackoverflow.com/questions/35323090/c-using-max-function-to-find-a-list-of-ints", "title": "C++ using Max function to find a list of ints", "body": "<p>These are my ints for the program I am writing is it possible to somehow find the max and then set it to an int? Later down my code the ints do not equal 0. Just below is what I would like the code to do.</p>\n\n<pre><code>int Max = std::max(Face1,Face2, \"and so on\") &lt;&lt; '\\n'; \n</code></pre>\n\n<p>\n\n<pre><code>#include &lt;algorithm&gt;\nvoid RollDice() {\nint Rolls = 0;\nint Seed = 0;\nint Random = 0;\nint Face1 = 0;\nint Face2 = 0;\nint Face3 = 0;\nint Face4 = 0;\nint Face5 = 0;\nint Face6 = 0; \n</code></pre>\n\n<p>\n\n<p>Thanks any help is appreciated.</p>\n"}, {"tags": ["c++", "boost", "cross-compiling"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1455133756, "post_id": 35323060, "comment_id": 58357987, "body": "If you are using poky, why not just enable boost in yocto and rebuild toolchain, then boost is just included?"}, {"owner": {"reputation": 324, "user_id": 1599059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3eed9eb18a44c878232b450986e61f?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/1599059/simon"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1455134007, "post_id": 35323060, "comment_id": 58358127, "body": "Another team has the control on the toolchain, but I&#39;ll try to have them rebuild it.  Thanks"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1455134625, "post_id": 35323060, "comment_id": 58358520, "body": "recipes for boost is already included in yocto as far as I know, so you only need to include it into your rootfs target and toolchain target. if you have a team building yocto, they should know the how."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9927920, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zTeMikjNy6I/AAAAAAAAAAI/AAAAAAAAAAA/9CDZ9DXFvvI/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/9927920/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1585106537, "creation_date": 1585106537, "answer_id": 60842564, "question_id": 35323060, "link": "https://stackoverflow.com/questions/35323060/how-to-cross-compile-boost-libraries/60842564#60842564", "title": "How to cross-compile Boost libraries", "body": "<p>Common tasks - 1.64.0\n<a href=\"https://www.boost.org/doc/libs/1_64_0/doc/html/bbv2/tasks.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_64_0/doc/html/bbv2/tasks.html</a></p>\n\n<p>Cross-compilation\nBoost.Build supports cross compilation with the gcc and msvc toolsets.</p>\n\n<p>When using gcc, you first need to specify your cross compiler in user-config.jam (see the section called \u201cConfiguration\u201d), for example:</p>\n\n<pre><code>using gcc : arm : arm-none-linux-gnueabi-g++ ;\n</code></pre>\n\n<p>After that, if the host and target os are the same, for example Linux, you can just request that this compiler version be used:</p>\n\n<pre><code>b2 toolset=gcc-arm\n</code></pre>\n\n<p>If you want to target a different operating system from the host, you need to additionally specify the value for the target-os feature, for example:</p>\n\n<pre><code># On windows box\nb2 toolset=gcc-arm target-os=linux\n# On Linux box\nb2 toolset=gcc-mingw target-os=windows\n</code></pre>\n\n<p>For the complete list of allowed opeating system names, please see the documentation for target-os feature.</p>\n\n<p>When using the msvc compiler, it's only possible to cross-compile to a 64-bit system on a 32-bit host. Please see the section called \u201c64-bit support\u201d for details.</p>\n"}], "owner": {"reputation": 324, "user_id": 1599059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3eed9eb18a44c878232b450986e61f?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/1599059/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1841, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1585106537, "creation_date": 1455128696, "question_id": 35323060, "link": "https://stackoverflow.com/questions/35323060/how-to-cross-compile-boost-libraries", "title": "How to cross-compile Boost libraries", "body": "<p>I'm trying to cross-compile the Boost library for an ARM platform (poky toolchain) and I'm new to cross compilation.  I'm having issues at the first step -- running bootstrap.sh.  I see many posts regarding boost cross-compilation, but not so many helping at the bootstrap level.</p>\n\n<p>A few questions:</p>\n\n<p>1) What should I put exactly in 'user-config.jam'?  I tried:</p>\n\n<pre><code>using gcc : arm : arm-poky-linux-gnueabi-g++ ;\n</code></pre>\n\n<p>I see many ones specifying an exact path to the compiler.</p>\n\n<p>2) Where's the best place to put the user-config.jam file?  I tried my home (~) folder and the current folder.</p>\n\n<p>3) The toolchain has a file named \"environment-setup-cortexa9hf-vfp-neon-poky-linux-gnueabi\", should I \"source it\" before running bootstrap?</p>\n\n<p>Any help appreciated, thanks.</p>\n"}, {"tags": ["c++", "visual-studio", "debugging", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1455136572, "post_id": 35323016, "comment_id": 58359627, "body": "you&#39;d have to create some visualizers for b::m_i_c. Contribute them back if you make it!"}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1455235932, "post_id": 35323016, "comment_id": 58412393, "body": "I better give up using these containers."}], "answers": [{"comments": [{"owner": {"reputation": 457, "user_id": 2021579, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c61aa2dacf892403ff1688d5872b1b92?s=128&d=identicon&r=PG", "display_name": "Olppah", "link": "https://stackoverflow.com/users/2021579/olppah"}, "reply_to_user": {"reputation": 2691, "user_id": 3115822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djEOC.png?s=128&g=1", "display_name": "borchvm", "link": "https://stackoverflow.com/users/3115822/borchvm"}, "edited": false, "score": 0, "creation_date": 1582617608, "post_id": 60389534, "comment_id": 106829392, "body": "I am not sure I understand what you mean by &quot;essential part&quot; here. For me the essential part was to install a plugin. Is it enough if I update the answer with the name of the plugin or what is your suggestion?"}, {"owner": {"reputation": 2691, "user_id": 3115822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djEOC.png?s=128&g=1", "display_name": "borchvm", "link": "https://stackoverflow.com/users/3115822/borchvm"}, "edited": false, "score": 0, "creation_date": 1582617805, "post_id": 60389534, "comment_id": 106829466, "body": "Sorry, that&#39;s fine"}], "tags": [], "owner": {"reputation": 457, "user_id": 2021579, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c61aa2dacf892403ff1688d5872b1b92?s=128&d=identicon&r=PG", "display_name": "Olppah", "link": "https://stackoverflow.com/users/2021579/olppah"}, "is_accepted": true, "score": 0, "last_activity_date": 1582617646, "last_edit_date": 1582617646, "creation_date": 1582616020, "answer_id": 60389534, "question_id": 35323016, "link": "https://stackoverflow.com/questions/35323016/view-boostmulti-index-container-data-in-debugger/60389534#60389534", "title": "View boost::multi_index_container data in debugger", "body": "<p>Using Visual Studio 2017, the plugin \"C++ Debugger Visualizers for VS2017\" worked for me: <a href=\"https://marketplace.visualstudio.com/items?itemName=ArkadyShapkin.CDebuggerVisualizersforVS2017\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=ArkadyShapkin.CDebuggerVisualizersforVS2017</a></p>\n"}], "owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 60389534, "answer_count": 1, "score": 1, "last_activity_date": 1582617646, "creation_date": 1455128523, "question_id": 35323016, "link": "https://stackoverflow.com/questions/35323016/view-boostmulti-index-container-data-in-debugger", "title": "View boost::multi_index_container data in debugger", "body": "<p>I am attempting to investigate memory dump of the program which uses boost.multi_index library on Windows using Visual Studio. I have sources, executable and debug symbols corresponding to that memory dump. However, debugger can't show actual data stored in the multi_index container the same way as it does, for example, for std::map or std::vector. Installing this <a href=\"https://cppvisualizers.codeplex.com/\" rel=\"nofollow\">https://cppvisualizers.codeplex.com/</a> plugin did not help - still see only some internal data members without actual data. Multi-index I am trying to inspect has 2 hashed indices. Does anyone know how to get to the data based only on the raw values visible in the VS debugger? </p>\n"}, {"tags": ["c++", "c++11", "cocos2d-x", "cocos2d-x-3.0", "cocos2d-x-2.x"], "comments": [{"owner": {"reputation": 6651, "user_id": 1264375, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e0b81876ca5b35253893f82ffbc7162e?s=128&d=identicon&r=PG", "display_name": "Makalele", "link": "https://stackoverflow.com/users/1264375/makalele"}, "edited": false, "score": 0, "creation_date": 1455175037, "post_id": 35322773, "comment_id": 58373662, "body": "I don&#39;t understand what you want to do. You want to mask a sprite with polygon? Post some preview how should it look like."}, {"owner": {"reputation": 210, "user_id": 4229991, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bc84e4883603451c5b4cd38623e7eb9?s=128&d=identicon&r=PG&f=1", "display_name": "otashlanov", "link": "https://stackoverflow.com/users/4229991/otashlanov"}, "reply_to_user": {"reputation": 6651, "user_id": 1264375, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e0b81876ca5b35253893f82ffbc7162e?s=128&d=identicon&r=PG", "display_name": "Makalele", "link": "https://stackoverflow.com/users/1264375/makalele"}, "edited": false, "score": 0, "creation_date": 1455209502, "post_id": 35322773, "comment_id": 58397741, "body": "@Makalele I have node with sprite (gray heart) on it and another node with drawn polygon. Size of second node is less than first one. I need to blend this nodes. Result of blending - polygon from second node with sprite from first node inside it (on second picture it is area inside red polygon)."}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 4229991, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bc84e4883603451c5b4cd38623e7eb9?s=128&d=identicon&r=PG&f=1", "display_name": "otashlanov", "link": "https://stackoverflow.com/users/4229991/otashlanov"}, "edited": false, "score": 0, "creation_date": 1455553508, "post_id": 35404586, "comment_id": 58529311, "body": "Yes, you&#39;re right, but I need to do it by using renderer and blending functions"}], "tags": [], "owner": {"reputation": 403, "user_id": 1755026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69e97c24823c9b5034bbded196fc7a3?s=128&d=identicon&r=PG", "display_name": "GaloisPlusPlus", "link": "https://stackoverflow.com/users/1755026/galoisplusplus"}, "is_accepted": false, "score": 0, "last_activity_date": 1455525772, "last_edit_date": 1455525772, "creation_date": 1455524975, "answer_id": 35404586, "question_id": 35322773, "link": "https://stackoverflow.com/questions/35322773/how-to-blend-two-drawnodes-in-cocos2d/35404586#35404586", "title": "How to blend two DrawNodes in cocos2d", "body": "<p>It seems that you want to clip the heart sprite using the polygon as a stencil. In that case. You don't have to blend two <code>DrawNode</code>. Instead, You can use <code>ClippingNode</code> like:</p>\n\n<pre><code>auto heartSprite = cocos2d::Sprite::create(fileName);\n\nauto stencil = DrawNode::create();\nstencil-&gt;drawPolygon(verts, count, cocos2d::Color4F::WHITE, 1, cocos2d::Color4F::WHITE);\n\nauto clipper = ClippingNode::create();\nclipper-&gt;setStencil(stencil);\nclipper-&gt;addChild(heartSprite)\n</code></pre>\n\n<p>For more <code>ClippingNode</code> examples, you can refer to the official sample code: <a href=\"https://github.com/cocos2d/cocos2d-x/tree/v3/tests/cpp-tests/Classes/ClippingNodeTest\" rel=\"nofollow\">https://github.com/cocos2d/cocos2d-x/tree/v3/tests/cpp-tests/Classes/ClippingNodeTest</a></p>\n"}], "owner": {"reputation": 210, "user_id": 4229991, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bc84e4883603451c5b4cd38623e7eb9?s=128&d=identicon&r=PG&f=1", "display_name": "otashlanov", "link": "https://stackoverflow.com/users/4229991/otashlanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455525772, "creation_date": 1455127738, "question_id": 35322773, "link": "https://stackoverflow.com/questions/35322773/how-to-blend-two-drawnodes-in-cocos2d", "title": "How to blend two DrawNodes in cocos2d", "body": "<p>I need some help with cocos2d DrawNodes blending. I have DrawNode with sprite on it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1bTep.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1bTep.png\" alt=\"enter image description here\"></a>\nAnd another DrawNode with drawn polygon (polygon area is less than heart sprite). As a result of blending I need to have only a part of heart sprite inside polygon, like this:\n<a href=\"https://i.stack.imgur.com/SQSj6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SQSj6.png\" alt=\"enter image description here\"></a>\nMy code:\nTextureNode.h</p>\n\n<pre><code>class CTextureNode : public cocos2d::DrawNode\n{\npublic:\nstatic CTextureNode * create(const std::string &amp; fileName, const cocos2d::Rect &amp; rect);\n\nCTextureNode();\nvirtual ~CTextureNode();\n\nvoid setPolygonalMask(const cocos2d::Vec2 * verts, int count);\n\nprivate:\nbool initTexture(const std::string &amp; fileName, const cocos2d::Rect &amp; rect);\n\nprivate:\ncocos2d::DrawNode * m_pMask;\ncocos2d::Sprite * m_pSprite;\n\nfloat timeOutline;\nbool bShaderInc;\n};\n</code></pre>\n\n<p>TextureNode.cpp</p>\n\n<pre><code>CTextureNode * CTextureNode::create(const std::string &amp; fileName, const cocos2d::Rect &amp; rect)\n{\nauto ret = new CTextureNode();\nif (!ret || !ret-&gt;init() || !ret-&gt;initTexture(fileName, rect))\n{\n    CC_SAFE_DELETE(ret);\n}\n\nreturn ret;\n}\n\nCTextureNode::CTextureNode()\n: timeOutline(0.f)\n, bShaderInc(true)\n, m_pMask(nullptr)\n, m_pSprite(nullptr)\n{\n}\n\nCTextureNode::~CTextureNode()\n{\n}\n\nbool CTextureNode::initTexture(const std::string &amp; fileName, const cocos2d::Rect &amp; rect)\n{\nm_pSprite = cocos2d::Sprite::create(fileName, rect);\nm_pSprite-&gt;setAnchorPoint(cocos2d::Point::ZERO);\naddChild(m_pSprite);\n\nm_pMask = cocos2d::DrawNode::create();\nm_pMask-&gt;setPosition(cocos2d::Point::ZERO);\nm_pMask-&gt;setAnchorPoint(cocos2d::Point::ZERO);\naddChild(m_pMask);\n\nreturn true;\n}\n\nvoid CTextureNode::setPolygonalMask(const cocos2d::Vec2 * verts, int count)\n{\nif (m_pMask)\n{\n    m_pMask-&gt;drawPolygon(verts, count, cocos2d::Color4F::WHITE, 1, cocos2d::Color4F::WHITE);\n\n    cocos2d::BlendFunc maskBlendFunc = { GL_ONE_MINUS_SRC_ALPHA, GL_SRC_ALPHA };\n    m_pMask-&gt;setBlendFunc(maskBlendFunc);\n\n    auto size = m_pSprite-&gt;getContentSize();\n\n    auto renderer = cocos2d::RenderTexture::create(size.width, size.height, cocos2d::Texture2D::PixelFormat::RGBA8888);\n    renderer-&gt;begin();\n\n    m_pMask-&gt;visit();\n\n    renderer-&gt;end();\n}\n}\n</code></pre>\n\n<p>As a result of this code I see full hart sprite without polygon. I also try to change BlendFunc values, but it not help.\nPlease tell me what I do wrang)</p>\n\n<p>P.S. Thanks!\nP.S.P.S. Sorry for my english)</p>\n"}, {"tags": ["c++", "unit-testing", "cmake", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "edited": false, "score": 0, "creation_date": 1455138686, "post_id": 35324975, "comment_id": 58360764, "body": "This looks like the solution I need. However, I can&#39;t get the run_tests executable to link properly - the libraries complain about missing references to gtest functions."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "edited": false, "score": 0, "creation_date": 1455140900, "post_id": 35324975, "comment_id": 58361980, "body": "@Teyras If you can post an <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a> for your linkage failure maybe I can see what&#39;s wrong. For now can only say it works for me. Be sure you&#39;ve built your libgtest and libgtest_main with very same compiler that&#39;s building your <code>run_tests</code> now."}, {"owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "edited": false, "score": 0, "creation_date": 1455188220, "post_id": 35324975, "comment_id": 58382079, "body": "Well, a minimal setup seems to work. I&#39;ll mark your answer as correct and try to sort out my problems myself."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 0, "last_activity_date": 1455135193, "creation_date": 1455135193, "answer_id": 35324975, "question_id": 35322769, "link": "https://stackoverflow.com/questions/35322769/separating-googletest-test-cases-with-cmake/35324975#35324975", "title": "separating googletest test cases with cmake", "body": "<p>Here is the basic idea:-</p>\n\n<pre><code>add_library(testcase_a.o OBJECT testcase_a.cpp dependency_a.cpp)\nadd_library(testcase_b.o OBJECT testcase_b.cpp dependency_b.cpp)   \nadd_executable(run_tests $&lt;TARGET_OBJECTS:testcase_a.o&gt; $&lt;TARGET_OBJECTS:testcase_b.o&gt;)\ntarget_link_libraries(run_tests gtest gtest_main)\n</code></pre>\n\n<p>See <a href=\"https://cmake.org/cmake/help/v3.4/command/add_library.html#id4\" rel=\"nofollow\">Object Libraries</a></p>\n"}], "owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 35324975, "answer_count": 1, "score": 1, "last_activity_date": 1455135193, "creation_date": 1455127733, "last_edit_date": 1455130214, "question_id": 35322769, "link": "https://stackoverflow.com/questions/35322769/separating-googletest-test-cases-with-cmake", "title": "separating googletest test cases with cmake", "body": "<p>I work on a project built with CMake that uses Google test for testing. The CMakeLists.txt file of my tests looks like this:</p>\n\n<pre><code>add_executable(run_tests\n    testcase_a.cpp\n    dependency_a.cpp\n    testcase_b.cpp\n    dependency_b.cpp\n)\ntarget_link_libraries(run_tests gtest gtest_main)\n</code></pre>\n\n<p>With growing number of test cases, this gets rather messy. I'd like to compile each of the testcases separately and then run them using a single binary. Can this be done using CMake and gtest_main? Or is there a better way of doing this that I'm missing?</p>\n"}, {"tags": ["c++", "flatbuffers"], "comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 1, "creation_date": 1455133518, "post_id": 35322700, "comment_id": 58357841, "body": "Have a look at the memory mapped file API&#39;s for your platform. There are ways to map regions into memory so you don&#39;t have to have the whole 50GB in memory, but sections of it."}], "answers": [{"comments": [{"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1455133056, "post_id": 35324278, "comment_id": 58357540, "body": "Is there a common way to do this?"}, {"owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "reply_to_user": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 2, "creation_date": 1455133305, "post_id": 35324278, "comment_id": 58357714, "body": "No, there isn&#39;t, but your question makes me think that we should add one to the FlatBuffers library."}, {"owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "reply_to_user": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1455133380, "post_id": 35324278, "comment_id": 58357758, "body": "It is not hard though, what I&#39;d suggest is a file that contains: 32bit length of FlatBuffer 1 - buffer contents of FlatBuffer 1 - 32bit length of FlatBuffer 2 - buffer contents of FlatBuffer 2 - etc."}, {"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1455136908, "post_id": 35324278, "comment_id": 58359816, "body": "It would be nice if there was a convenience API for this. I&#39;m researching to to suggest an alternative to the official OSM protobuf format. One thing that makes using PBF, in case of OSM data, awkward is the need for various client-side implementation details. So it will be great if this was possible almost language and implementation independent."}, {"owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1455138964, "post_id": 35324278, "comment_id": 58360934, "body": "One more thing: Is it theoretically possible that FlatBuffers indirects pointers into fixed size (say 2MB) segments of compressed data, that is to be uncompressed when accessed? Compression makes a tremendous difference for the kind of data I have, since delta coding can&#39;t be applied."}, {"owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "reply_to_user": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 0, "creation_date": 1455150576, "post_id": 35324278, "comment_id": 58365769, "body": "Agreed, it be good to solve this use case generally. The way that FlatBuffers accessing memory directly would make it hard to transparently do compression or any kind of indirection, since that would entail a constant overhead that currently isn&#39;t there."}, {"owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "reply_to_user": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "edited": false, "score": 2, "creation_date": 1476308884, "post_id": 35324278, "comment_id": 67295978, "body": "btw, added some functionality to make size pre-fixing part of FlatBuffers: <a href=\"https://github.com/google/flatbuffers/commit/486c048a0d5963f83f3a0d6957e4dde41602e2e7\" rel=\"nofollow noreferrer\">github.com/google/flatbuffers/commit/&hellip;</a>"}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1581719966, "post_id": 35324278, "comment_id": 106543721, "body": "Has any progress been made since this post with regards to supporting 64 bit offsets? Just checking because the multi-flatbuffer workaround isn&#39;t quite workable for my use-case."}, {"owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "reply_to_user": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 1, "creation_date": 1581736845, "post_id": 35324278, "comment_id": 106546468, "body": "@alteredinstance no, there is no 64-bit version yet. Notes on 64-bit: <a href=\"https://github.com/google/flatbuffers/projects/10#card-14545298\" rel=\"nofollow noreferrer\">github.com/google/flatbuffers/projects/10#card-14545298</a> Contributions on github welcome."}], "tags": [], "owner": {"reputation": 4578, "user_id": 17419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU9iE.jpg?s=128&g=1", "display_name": "Aardappel", "link": "https://stackoverflow.com/users/17419/aardappel"}, "is_accepted": true, "score": 5, "last_activity_date": 1455132739, "creation_date": 1455132739, "answer_id": 35324278, "question_id": 35322700, "link": "https://stackoverflow.com/questions/35322700/flatbuffers-how-to-write-giant-files/35324278#35324278", "title": "FlatBuffers: How to write giant files", "body": "<p>There currently is no way to create a single FlatBuffer without having it all in memory at once. The only way to do it is to instead write out a chain of (length-prefixed) smaller independent FlatBuffers.</p>\n"}], "owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1817, "favorite_count": 2, "accepted_answer_id": 35324278, "answer_count": 1, "score": 8, "last_activity_date": 1455133680, "creation_date": 1455127509, "question_id": 35322700, "link": "https://stackoverflow.com/questions/35322700/flatbuffers-how-to-write-giant-files", "title": "FlatBuffers: How to write giant files", "body": "<p>I'm experimenting with FlatBuffers to store OpenStreetMap data. So, this would be 50GB.</p>\n\n<p>Since usually everything is kept in memory, how is it possible (if at all) to sequentially write data into a file?</p>\n\n<p>I have a feeling this is not quite where FlatBuffers is good for.</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 9484, "user_id": 1327235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c96d4ad697e78400e312fe40b23dc?s=128&d=identicon&r=PG", "display_name": "Juan Lopes", "link": "https://stackoverflow.com/users/1327235/juan-lopes"}, "edited": false, "score": 1, "creation_date": 1455127203, "post_id": 35322578, "comment_id": 58353845, "body": "Please, post the link to the problem, or paste here the input limits."}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 1, "creation_date": 1455127286, "post_id": 35322578, "comment_id": 58353893, "body": "Are the values in the sequences guaranteed to be positive (or at least non-negative)?"}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 4, "creation_date": 1455127310, "post_id": 35322578, "comment_id": 58353902, "body": "You only exit the <code>while (1)</code> loop when the subsequence was found (in fact, you exit the program); if no subsequence is ever found, your program busy waits forever, which will eventually cause a timeout."}, {"owner": {"reputation": 151, "user_id": 4417088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100003208521147/picture?type=large", "display_name": "Pedro Caseiro", "link": "https://stackoverflow.com/users/4417088/pedro-caseiro"}, "edited": false, "score": 0, "creation_date": 1455127367, "post_id": 35322578, "comment_id": 58353939, "body": "Input goes from 0 to 1000, Core size\t0 Kb Data of execute\t32 Mb Execution output\t500 Kb Stack of execute\t1 Mb Program code\t100 Kb Real time timeout\t60 sec Compilation timeout\t60 sec Execution timeout *\t5 sec"}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1455127438, "post_id": 35322578, "comment_id": 58353969, "body": "@MaxLybbert - I think you found the problem. You should post a fix as the answer."}, {"owner": {"reputation": 151, "user_id": 4417088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100003208521147/picture?type=large", "display_name": "Pedro Caseiro", "link": "https://stackoverflow.com/users/4417088/pedro-caseiro"}, "edited": false, "score": 0, "creation_date": 1455127463, "post_id": 35322578, "comment_id": 58353986, "body": "Mooshak is a system for managing programming contests on the Web"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455128333, "post_id": 35322578, "comment_id": 58354545, "body": "@PedroCaseiro  <code>for(int i = 1; i &lt;= tamanho; i++)</code>  Arrays start from 0, not 1.  If you input 100 values in <code>tamanho</code>, you have a memory overwrite."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455128676, "post_id": 35322578, "comment_id": 58354771, "body": "@PedroCaseiro WTH is a <i>Time limit exceeded</i>?? New kind of exception I didn&#39;t heard of yet? (I hate OJ questions)"}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455129795, "post_id": 35322578, "comment_id": 58355456, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 - It seems like it&#39;s an error message from the Mooshak contest system."}, {"owner": {"reputation": 151, "user_id": 4417088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100003208521147/picture?type=large", "display_name": "Pedro Caseiro", "link": "https://stackoverflow.com/users/4417088/pedro-caseiro"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1455129983, "post_id": 35322578, "comment_id": 58355575, "body": "Already solved the time limit exceeded. It was what @maxLybbert said :) Thanks."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455130182, "post_id": 35322578, "comment_id": 58355712, "body": "BTW, with cumulative sum, solution can be reduced to <code>O(n&#178;)</code> instead of <code>O(n^3)</code>"}, {"owner": {"reputation": 151, "user_id": 4417088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100003208521147/picture?type=large", "display_name": "Pedro Caseiro", "link": "https://stackoverflow.com/users/4417088/pedro-caseiro"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455130365, "post_id": 35322578, "comment_id": 58355814, "body": "@jarod42 this is the first exercise and we&#39;re supposed to use this algorithm. Exercise number 2 uses cumulative sum. Thanks for the tip anyway :)"}], "answers": [{"tags": [], "owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "is_accepted": true, "score": 1, "last_activity_date": 1455130134, "last_edit_date": 1495535295, "creation_date": 1455127845, "answer_id": 35322804, "question_id": 35322578, "link": "https://stackoverflow.com/questions/35322578/time-limit-exceeded-c-algorithm/35322804#35322804", "title": "Time Limit Exceeded c++ algorithm", "body": "<p>You have an infinite loop. Inside your top-level <code>while</code> loop, replace this:</p>\n\n<pre><code>if(tamanho != 0 &amp;&amp; valor != 0){\n    // logic for one sequence\n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>if(tamanho == 0 &amp;&amp; valor == 0){\n    return 0;\n}\n\n// logic for one sequence\n</code></pre>\n\n<p>(This is based on the comment by @MaxLybbert).</p>\n\n<p>P.S. As a general rule (there are some rare exceptions), you should use <code>return 0;</code> from <code>main()</code> instead of calling <code>exit(0);</code>. See the accepted answer in <a href=\"https://stackoverflow.com/q/461449/535871\">this thread</a> for why. For your particular code, however, it doesn't make any difference.</p>\n"}], "owner": {"reputation": 151, "user_id": 4417088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100003208521147/picture?type=large", "display_name": "Pedro Caseiro", "link": "https://stackoverflow.com/users/4417088/pedro-caseiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 35322804, "answer_count": 1, "score": -2, "last_activity_date": 1455130134, "creation_date": 1455127115, "question_id": 35322578, "link": "https://stackoverflow.com/questions/35322578/time-limit-exceeded-c-algorithm", "title": "Time Limit Exceeded c++ algorithm", "body": "<p>I'm currently doing an algorithm that given a sequence, checks if there is a subsequence which sum equals a given value. If I have:</p>\n\n<pre><code>3 8\n10\n5\n1\n7 5\n1\n2\n3\n4\n5\n6\n7\n0 0\n</code></pre>\n\n<p>where 3 8 and 7 5 are the (sequence size, value) and 0 0 tells us we reached the end. In this case it would print : </p>\n\n<pre><code>SUBSEQUENCE NOT FOUND\nSUBSEQUENCE FOUND AT POSITION 2\n</code></pre>\n\n<p>My question is, why am I getting a Time Limit Exceeded when I submit it to Mooshak? Here goes the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    int tamanho;\n    int valor;\n    int soma, numero;\n    int sequencia[100];\n\n\n\n    while(1){ \n\n        scanf(\"%d %d\", &amp;tamanho, &amp;valor);\n\n        if(tamanho != 0 &amp;&amp; valor != 0){\n\n            for(int i = 1; i &lt;= tamanho; i++){\n                scanf(\"%d\", &amp;numero);\n                printf(\"%d\\n\", i);\n                sequencia[i] = numero;\n                printf(\"%d\\n\", i);\n            }\n\n            for(int i = 1; i &lt; tamanho; i++){\n                printf(\"i\");\n                for(int j = i; j &lt; tamanho; j++){\n                    soma = 0;\n                    printf(\"j\");\n                    for (int z = i; z &lt; j; z++){\n                        printf(\"z\");\n                        soma = soma + sequencia[z];\n                    }\n                    if(soma == valor){\n                        printf(\"SUBSEQUENCIA NA POSICAO %d \\n\", i);\n                        exit(0);\n                    }\n                }\n            }\n            printf(\"SUBSEQUENCIA NAO ENCONTRADA\\n\");    \n        }   \n    }\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "optimization"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1455127301, "post_id": 35322492, "comment_id": 58353899, "body": "Are you asking whether creating a variable to hold the value of <code>wstrTemp</code> is better than supplying a string literal at every point it would be used?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455141158, "post_id": 35322795, "comment_id": 58362099, "body": "&quot;then second choice will be faster, but not by much.&quot;. I&#39;m reading your answers but, faster only for the compilation, it will be the same duration for these both methods once executed, right ?"}, {"owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "reply_to_user": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455141874, "post_id": 35322795, "comment_id": 58362429, "body": "When you pass a wchar_t* string to the function, it has to calculate it&#39;s length at runtime, even if it&#39;s a string literal. But it&#39;s usually very fast to do that. But the std::wstring has already the size in it (since it was calculated when you created the wstring and the length is stored in the object). So find_last_of doens&#39;t have to calculate it again. That&#39;s why I said it&#39;s faster if you must create the std::wstring object. All of that is done while your program is being executed, not at compile time. You seem to be new at stackoverflow, so don&#39;t forget to accept an answer if it helped."}, {"owner": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455142261, "post_id": 35322795, "comment_id": 58362602, "body": "Also it&#39;s especially for a gain of space. Because I haven&#39;t the same words used, but same letters, I won&#39;t use a <code>const wchar_t*</code> only for letters. But, with your answers (@kfsone also), I don&#39;t know if use until many position of chars in <code>wstrTemp</code> here, is better to gain space instead of <code>L&#39;i&#39;</code> or other example <code>L&#39;a&#39;</code>."}], "tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": false, "score": 0, "last_activity_date": 1455132066, "last_edit_date": 1455132066, "creation_date": 1455127802, "answer_id": 35322795, "question_id": 35322492, "link": "https://stackoverflow.com/questions/35322492/put-chars-used-two-times-in-a-variable-is-a-gain-of-space/35322795#35322795", "title": "Put chars used two times in a variable is a gain of space?", "body": "<p>In your very specific case, where you have stated that you \"have to\" create the <code>std::wstring wstrTemp</code>, then second choice will be faster, but not by much. </p>\n\n<p><code>std::string::find_last_of</code> accepts <code>const wchar_t*</code> strings. So if you call</p>\n\n<p><code>std::string::find_last_of</code> with a <code>const wchar_t*</code>, the only thing it has to do is call <code>wcslen</code> and then do it's work.</p>\n\n<p>While if you pass an <code>const std::wstring&amp;</code> object (which you are doing), <code>std::find_last_of</code> will already know the <code>buffer</code> location, and the <code>length</code> size. Therefore it will instantly do it's work. It doesn't have to create another std::string object.</p>\n\n<p>As for the other question, if you use a string literal like <code>\"hello\"</code> in multiple places, the compiler, most of the times (if not always) will store the <code>\"hello\"</code> only once. But if they are different, even by a single char like <code>\"hello2\"</code>, the compiler cannot longer do that, because of the null terminator which is required.</p>\n\n<p>If you have the following:</p>\n\n<pre><code>const char *ptr = \"hello\";\nchar temp[] = \"hello\";\n</code></pre>\n\n<p>First, both variables obviously have different memory address. But the string literal will, most of the times, point to same address.</p>\n\n<p>What the compiler does to create \"temp\" is: first allocate enough space in the stack, and then copy from the static location where the string literal \"hello\" is stored, into the stack address. That's the only reason why those variables do not have the same address. But the string literals do.</p>\n\n<p>based on @kfsone response, here's how it works</p>\n\n<pre><code>const char *a = \"hello\";\nconst char *b = \"hello\";\nconst char *c = \"hello\";\n//char d[] = \"hello\";\n\n// This is actually how d looks like in assembly.\nchar d[sizeof(\"hello\")]; //SUB ESP, 6\n\n// d is constructed from the string literal \"hello\"\nmemcpy(d, \"hello\", sizeof(\"hello\"));\n\n// the compiler does not call memcpy. most of the times, it will call\n// the assembly MOVS instuction if they are big string literals, or just \n// MOV DWORD PTR ES:[EDI], DWORD PTR DS:[ESI]\n// MOV WORD PTR ES:[EDI+4], WORD PTR DS:[ESI+4]\n// if they are small.\n\n// Where EDI is the stack address of \"d\" and ESI the address of the string literal \"hello\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455130119, "post_id": 35323073, "comment_id": 58355666, "body": "The compiler ignores totally variables? Even if a variable is initialized and doesn&#39;t change until a long moment after? Obviously, between these two times, this variable will used but not changed. The compiler can&#39;t detect this?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455130297, "post_id": 35323073, "comment_id": 58355788, "body": "It doesn&#39;t ignore variables, but storage of string constants is done in a specific segment of the executable, and the compiler is able to de-dupe those constants.  If you transfer a string constant to a std::wstring, it has to create a copy, so each wstring variable you copy it to will use additional <i>heap</i> memory to store an additional copy of the string."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "edited": false, "score": 0, "creation_date": 1455130341, "post_id": 35323073, "comment_id": 58355805, "body": "But if you have <code>const char *a = &quot;hello&quot;, *b = &quot;hello&quot;, *c = &quot;hello&quot;;</code> it only needs to store <code>hello</code> once in the text segment, so the cost of the above is only the cost of three pointers and not 3 copies of the text. (Assuming you are compiling with string pooling enabled)"}, {"owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "edited": false, "score": 0, "creation_date": 1455131015, "post_id": 35323073, "comment_id": 58356166, "body": "But your program is not useful, because it makes people thing that the string literal &quot;hello&quot; is stored in two different places, when they are not. The variables are because one is stored in a static location, while d[] is a local object, and has to be constructed in the stack, and it will be constructed off the &quot;hello&quot; string literal because there&#39;s a guaranty that the string literal cannot be modified since it&#39;s stored in a read only location."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "edited": false, "score": 0, "creation_date": 1455131365, "post_id": 35323073, "comment_id": 58356407, "body": "@Jos&#233; added a note at the end."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 0, "last_activity_date": 1455131339, "last_edit_date": 1455131339, "creation_date": 1455128724, "answer_id": 35323073, "question_id": 35322492, "link": "https://stackoverflow.com/questions/35322492/put-chars-used-two-times-in-a-variable-is-a-gain-of-space/35323073#35323073", "title": "Put chars used two times in a variable is a gain of space?", "body": "<p>If you use the same constant string literal twice in the same compilation unit</p>\n\n<pre><code> static const char greet[] = { 'h', 'e', 'l', 'l', 'o', '\\0' };\n std::cout &lt;&lt; \"hello\";\n std::cout &lt;&lt; \"hello\";\n const char* t = \"hello\";\n std::cout &lt;&lt; t;\n</code></pre>\n\n<p>the compiler is able to perform some space optimizations (although it is not guaranteed it will do it). Some compilers can do this across the entire binary. In Visual Studio it is an optimization option, \"String Pooling\".</p>\n\n<p>However, it only applies to constants.</p>\n\n<pre><code>static char greet[] = { 'h', 'e', 'l', 'l', 'o', '\\0' };\nstd::cout &lt;&lt; \"hello\";\n</code></pre>\n\n<p>these two cannot overlap because one is mutable and the other is not. Consider:</p>\n\n<pre><code>const char greet[] = \"hello\";\nchar greeting[] = \"hello\";\nfor (size_t i = 0; i &lt; 2; ++i) {\n    std::cout &lt;&lt; greet &lt;&lt; greeting &lt;&lt; \"\\n\";\n    greeting[0] = 'j';\n}\n</code></pre>\n\n<p>This should output \"hellohello\" and then \"hellojello\". If the strings were pooled the second iteration would errantly print \"jellojello\".</p>\n\n<p>So in general you don't have to worry about manually deduping strings, the compiler will usually do it for you in optimized builds.</p>\n\n<p>This can easily be tested with the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    const char *a = \"hello\";\n    const char *b = \"hello\";\n    const char *c = \"hello\";\n    char d[] = \"hello\";\n\n    std::cout &lt;&lt; \"&amp;a[0] = \" &lt;&lt; (void*)&amp;a[0] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"&amp;b[0] = \" &lt;&lt; (void*)&amp;b[0] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"&amp;c[0] = \" &lt;&lt; (void*)&amp;c[0] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"&amp;d[0] = \" &lt;&lt; (void*)&amp;d[0] &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/hNf29c\" rel=\"nofollow\">http://ideone.com/hNf29c</a></p>\n\n<p>In the case of <code>d</code> we get a different address - d is mutable, so a copy has to be stored, and the address is of the stack location the literal is copied to.</p>\n"}], "owner": {"reputation": 17, "user_id": 5895856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e86c2e3d6bef6ff9e2bd7dadd87c509?s=128&d=identicon&r=PG&f=1", "display_name": "Kdmeizk", "link": "https://stackoverflow.com/users/5895856/kdmeizk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35323073, "answer_count": 2, "score": -2, "last_activity_date": 1458669206, "creation_date": 1455126828, "last_edit_date": 1495541732, "question_id": 35322492, "link": "https://stackoverflow.com/questions/35322492/put-chars-used-two-times-in-a-variable-is-a-gain-of-space", "title": "Put chars used two times in a variable is a gain of space?", "body": "<p>Related to <a href=\"https://stackoverflow.com/questions/35258247/how-the-compiler-manages-the-same-char\">How the compiler manages the same char?</a>, create a variable which contains characters used at least two times in the code, is a gain of space?</p>\n\n<p>Example:</p>\n\n<pre><code>wstrFile.find_last_of(L\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\");\nwstrFile.find_last_of(L\"aefgh\");\n</code></pre>\n\n<p>for the compiler: is the same or worst or better than</p>\n\n<pre><code>std::wstring wstrTemp = L\"aefgh\"\nwstrFile.find_last_of(L\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\");\nwstrFile.find_last_of(wstrTemp);\n</code></pre>\n\n<p>In all cases, I will use \"wstrTemp\" further, its creation is needed.</p>\n\n<p><strong>NOTE TO SOLUTION:</strong></p>\n\n<p>Thanks to both answers.\nIn order to complete the answer for my question, the fact to put chars used at least two times will save space but it is totally painful/not useful to add char by char in the console, that was my main aim before this question.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "struct"], "comments": [{"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 2, "creation_date": 1455126791, "post_id": 35322447, "comment_id": 58353597, "body": "I think you might want to use <code>new</code> (instead of <code>malloc</code>) in C++."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1455126856, "post_id": 35322447, "comment_id": 58353627, "body": "So tag ended as <code>c++</code> - looks more <code>c</code> style to me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 6, "creation_date": 1455126878, "post_id": 35322447, "comment_id": 58353641, "body": "A pointer is not an array! You don&#39;t have a 3D array in your question. Being a 3-star programmer in C or C++ is not a compliment!"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1455127034, "post_id": 35322447, "comment_id": 58353749, "body": "Is this some school assignment where you are forced to use code like that? If not - you should check what <code>c++</code> containers can do for you, e.g. vectors"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 2, "creation_date": 1455127054, "post_id": 35322447, "comment_id": 58353758, "body": "In C++ the type of a variable must be fixed at compile time. And the dimension of an array is part of its type. So literally, the answer is no. However, practically speaking there&#39;s any number of ways to deal with this. (1) Always make it a 1D array (or better a vector maybe!), and use a boolean flag to indicate how you are supposed to handle it / traverse it. (2) Have two different structs, and select between them when you get the data."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1455127054, "post_id": 35322447, "comment_id": 58353759, "body": "Firstly, code using your type would decide at compile time how to use it, but the syntax for different dimensions differs. So, what happens if you use a 3D array with the 1D syntax? Since it&#39;s the same type, the compiler will not be able to detect this. I think that your very approach is flawed, maybe taking a step back and describing your problem would help. Further, please read a C++ tutorial. Your code makes a bunch of mistakes that proper learning should be able to avoid."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1455127180, "post_id": 35322447, "comment_id": 58353834, "body": "In C++ one should use no arrays at all. What is your real problem?"}, {"owner": {"reputation": 401, "user_id": 2904322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11c1ab73f2c4046d92eae0b34cd827c2?s=128&d=identicon&r=PG&f=1", "display_name": "otah007", "link": "https://stackoverflow.com/users/2904322/otah007"}, "edited": false, "score": 0, "creation_date": 1455127273, "post_id": 35322447, "comment_id": 58353881, "body": "You could use a vector, which is essentially a dynamic array. However if you&#39;re using pointers, you need to make sure that you get another pointer if you resize the vector, or add anything to it, as the previous pointer will become invalidated."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455127672, "post_id": 35322447, "comment_id": 58354127, "body": "Instead of flipping arrays back and forth between 1D and 3D, create a class that has a 1D vector, and member functions that access the elements using either the 1D or 3D &quot;formula&quot; to get to an entry in the vector."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1455128064, "post_id": 35322447, "comment_id": 58354382, "body": "<code>set array size at runtime == std::vector</code>"}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1455131569, "post_id": 35322447, "comment_id": 58356541, "body": "@SouravGhosh What does UB stand for?"}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1455131937, "post_id": 35322447, "comment_id": 58356788, "body": "@UlrichEckhardt Why did you remove the C tag from my question? I code in C but include a few C++ things here and there for convenience, and people seem to be confused because of the lack of a C tag."}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1455131998, "post_id": 35322447, "comment_id": 58356830, "body": "@4386427 Yes, I included a C tag originally."}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455132482, "post_id": 35322447, "comment_id": 58357146, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Which part of the code makes you shudder? I&#39;d love to learn from everyone, and if you could make constructive comments explaining which parts could be improved I would appreciate it."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1455132487, "post_id": 35322447, "comment_id": 58357153, "body": "I didn&#39;t remove the tags, I only removed the tags from the title, where they shouldn&#39;t be (as per site rules). That said, if you compile as C++, it is C++, not C, there is no mix like C/C++. There are even things that are frowned upon in C (casting the returnvalue of <code>malloc()</code>) while they are necessary in C++ (<code>static_cast</code> required)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455132796, "post_id": 35322447, "comment_id": 58357368, "body": "@BenLindsay As you&#39;re asking for it: <b><i>Almost every single line</i></b>! I think it started at <code>int ***three_d_arr;</code>. <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">Don&#39;t do such insane stuff.</a>"}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455133482, "post_id": 35322447, "comment_id": 58357822, "body": "@Olaf I know that a pointer isn&#39;t an array, but doesn&#39;t the <code>three_d_arr</code> pointer point to the first element of a 3D array after the memory is allocated?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455133880, "post_id": 35322447, "comment_id": 58358053, "body": "@BenLindsay: NO! A 3D array is something like <code>int i[1][2][3];</code>, a pointer to a 3D array <code>int (*i)[1][2][3];</code>, mind the parenthesis! And the first element of a 3D array is a 2D array (try figuring out the syntax!), not &quot;a pointer to pointer&quot;"}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1455133935, "post_id": 35322447, "comment_id": 58358085, "body": "@4386427 No this isn&#39;t a school assignment. I can change things however I want. I&#39;m just a newbie with C++, but it sounds like I need to learn more about C++ containers."}, {"owner": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "edited": false, "score": 0, "creation_date": 1455135784, "post_id": 35322447, "comment_id": 58359138, "body": "@BenLindsay To me, the biggest problem with the code you posted is the lack of organization. You&#39;ve got one big main method which does everything, making it impossible to reuse that code anywhere else. Perhaps you can try coming up with a design, then post on <a href=\"http://codereview.stackexchange.com\">Code Review</a> to get some constructive feedback? Later on, you could replace those int***s with <a href=\"http://codereview.stackexchange.com\">Boost data structures</a>."}, {"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "reply_to_user": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "edited": false, "score": 0, "creation_date": 1455136623, "post_id": 35322447, "comment_id": 58359658, "body": "@bullsy This is just a crappy sample code I wrote up to demonstrate that I have a struct with two different pointers, that I allocate data that either acts like a 1D or 3D array. The full code I&#39;m using is much much larger. It looks a little better than this, but it does still have the problem of using triple *&#39;s. If I replace int*** or double*** variables with Boost data structures, will the speed of for loops referencing and changing the data in the structures be affected? (I won&#39;t change the size of the structures once they&#39;re set)"}], "answers": [{"comments": [{"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "edited": false, "score": 0, "creation_date": 1455139404, "post_id": 35323695, "comment_id": 58361166, "body": "I accepted this answer because it points me in a good direction to restructure my code. I&#39;ll spend some time learning about classes and other C++ containers before implementing something like this. Thanks!"}], "tags": [], "owner": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "is_accepted": true, "score": 1, "last_activity_date": 1455132671, "last_edit_date": 1455132671, "creation_date": 1455130836, "answer_id": 35323695, "question_id": 35322447, "link": "https://stackoverflow.com/questions/35322447/set-array-dimension-at-runtime/35323695#35323695", "title": "Set array dimension at runtime", "body": "<p>My recommendation is to use two different types here, instead of a single struct. Using an abstract base class, you can make both subclasses conform to a single interface, but they would have different underlying behavior. A very basic example:</p>\n\n<pre><code>class ArrayBase {\n  int dim;\n\n  public:\n    // This function is pure virtual, which means it's impossible to      \n    // instantiate an instance of ArrayBase. Any class that inherits from\n    // ArrayBase must implement printArray().\n    virtual void printArray() = 0;\n}\n\nclass Array1D : public ArrayBase {\n  int* array;\n\n  void printArray() {\n    // some code to print this one-dimensional array\n  }\n}\n\nclass Array3D : public ArrayBase {\n  int*** array;\n\n  void printArray() {\n    // some code to print this three-dimensional array\n  }\n}\n</code></pre>\n\n<p>Later, when you need to use the array, you can dynamically allocate the type you need, like this:</p>\n\n<pre><code>ArrayBase* inputArray;\n\n// if the user wants a 1D array\ninputArray = new Array1D();\n\n// if the user wants a 3D array\ninputArray = new Array3D();\n\n// this will call the appropriate function to print the array\ninputArray-&gt;printArray(); \n</code></pre>\n\n<p>If you really want to have a single type, using boost::any is one way to condense your two array pointers into one. I would not recommend this approach, but it would work. </p>\n"}, {"comments": [{"owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "edited": false, "score": 0, "creation_date": 1455132714, "post_id": 35323782, "comment_id": 58357303, "body": "Thank you, this is good to know. However, based on the comments, it looks like the best answer will be a more major overhaul of my coding concepts. I&#39;ll wait for an answer that shows me how to clean up my code, but if none comes up, I&#39;ll select this one."}], "tags": [], "owner": {"reputation": 129, "user_id": 5888886, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wvudrsvCAKo/AAAAAAAAAAI/AAAAAAAAAMA/-knZ2eujQhk/photo.jpg?sz=128", "display_name": "AliVar", "link": "https://stackoverflow.com/users/5888886/alivar"}, "is_accepted": false, "score": 1, "last_activity_date": 1455131545, "last_edit_date": 1455131545, "creation_date": 1455131070, "answer_id": 35323782, "question_id": 35322447, "link": "https://stackoverflow.com/questions/35322447/set-array-dimension-at-runtime/35323782#35323782", "title": "Set array dimension at runtime", "body": "<p>One of the juicy things about the C/C++ pointers is the existence of <strong><em>void</em></strong> pointers. A <strong><em>void</em></strong> pointer can point to anything you want, from <strong><em>int</em></strong> to <strong><em>int</em></strong> ***.\nSo you can simply use the following code:</p>\n\n<pre><code>#define CAST1(arr) ((int *)arr)\n#define CAST3(arr) ((int ***)arr)\n#define CAST(arr,i) CAST##i(arr)\n\ntypedef struct {\n    int dim;\n    void *arr;\n} Struct;\n\nint main()\n{\n    Struct s;\n    cin &gt;&gt; s.dim;\n    int count = 0;\n\nif (s.dim == 1){\n    s.arr = malloc(2 * sizeof(int));\n    CAST(s.arr, 1)[0] = 0;\n    CAST(s.arr, 1)[1] = 1;\n}\nelse if (s.dim == 3){\n    s.arr = malloc(2 * sizeof(int ***));\n    for (int i = 0; i &lt; 2; i++){\n        CAST(s.arr, 3)[i] = (int **) malloc(2 * sizeof(int **));\n        for (int j = 0; j &lt; 2; j++){\n            CAST(s.arr, 3)[i][j] = (int *)malloc(2 * sizeof(int *));\n            for (int k = 0; k &lt; 2; k++){\n                CAST(s.arr, 3)[i][j][k] = count++;\n            }\n        }\n    }\n}\n\nif (s.dim == 1) {\n    cout &lt;&lt; CAST(s.arr, 1)[0] &lt;&lt; \", \" &lt;&lt; CAST(s.arr, 1)[1] &lt;&lt; endl;\n}\nelse if (s.dim == 3) {\n    cout &lt;&lt; CAST(s.arr, 3)[0][0][0] &lt;&lt; \", \" &lt;&lt; CAST(s.arr, 3)[0][0][1] &lt;&lt; endl;\n    cout &lt;&lt; CAST(s.arr, 3)[0][1][0] &lt;&lt; \", \" &lt;&lt; CAST(s.arr, 3)[0][1][1] &lt;&lt; endl;\n    cout &lt;&lt; CAST(s.arr, 3)[1][0][0] &lt;&lt; \", \" &lt;&lt; CAST(s.arr, 3)[1][0][1] &lt;&lt; endl;\n    cout &lt;&lt; CAST(s.arr, 3)[1][1][0] &lt;&lt; \", \" &lt;&lt; CAST(s.arr, 3)[1][1][1] &lt;&lt; endl;\n}\nelse {\n    cout &lt;&lt; \"Must enter 1 or 3\" &lt;&lt; endl;\n}\n\nsystem(\"pause\");\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1256, "user_id": 2680824, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RP4Tn.jpg?s=128&g=1", "display_name": "Ben Lindsay", "link": "https://stackoverflow.com/users/2680824/ben-lindsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 35323695, "answer_count": 2, "score": 0, "last_activity_date": 1455132671, "creation_date": 1455126671, "last_edit_date": 1455126817, "question_id": 35322447, "link": "https://stackoverflow.com/questions/35322447/set-array-dimension-at-runtime", "title": "Set array dimension at runtime", "body": "<p>I have a struct, which, depending on user inputs at runtime, will either require a 1D array or a 3D array. It will never need both. Right now, I have it set up like in the sample code below, with separate variables that can point to either a 1D array, or a 3D array. I would like to have just one variable in the struct that can point to either a 1D array or a 3D array, where the dimension is set at runtime. I have intermediate knowledge of C, and am a beginner with C++. I'd be willing to accept an answer based on C++ concepts but <em>only</em> if there is no slowdown (or negligible slowdown) compared to using C when iterating over the values. If it's a 3D array, then the for loops that access and change the array's values are the biggest bottleneck in my code. Once the array is set up, I won't need to change the dimension or size of the array.</p>\n\n<p>Is there a way to do this, or should I just settle for always having an extraneous variable in my struct?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntypedef struct {\n  int dim;\n  int *one_d_arr;\n  int ***three_d_arr;\n} Struct;\n\nint main() {\n  int count = 0;\n  int *arr1 = (int*) malloc(2 * sizeof(int));\n  arr1[0] = 0;\n  arr1[1] = 1;\n  int ***arr3 = (int***) malloc(2 * sizeof(int**));\n  for (int i=0; i&lt;2; i++) {\n    arr3[i] = (int**) malloc(2 * sizeof(int*));\n    for (int j=0; j&lt;2; j++) {\n      arr3[i][j] = (int*) malloc(2 * sizeof(int));\n      for (int k=0; k&lt;2; k++) {\n        arr3[i][j][k] = count++;\n      }   \n    }   \n  }\n  Struct s;\n  s.one_d_arr = NULL;\n  s.three_d_arr = NULL;\n  cout &lt;&lt; \"Enter number of dimensions: \";\n  cin &gt;&gt; s.dim;\n  if (s.dim==1) {\n    s.one_d_arr = arr1;\n    cout &lt;&lt; s.one_d_arr[0] &lt;&lt; \", \" &lt;&lt; s.one_d_arr[1] &lt;&lt; endl;\n  }\n  else if (s.dim==3) {\n    s.three_d_arr = arr3;\n    cout &lt;&lt; s.three_d_arr[0][0][0] &lt;&lt; \", \" &lt;&lt; s.three_d_arr[0][0][1] &lt;&lt; endl;\n    cout &lt;&lt; s.three_d_arr[0][1][0] &lt;&lt; \", \" &lt;&lt; s.three_d_arr[0][1][1] &lt;&lt; endl;\n    cout &lt;&lt; s.three_d_arr[1][0][0] &lt;&lt; \", \" &lt;&lt; s.three_d_arr[1][0][1] &lt;&lt; endl;\n    cout &lt;&lt; s.three_d_arr[1][1][0] &lt;&lt; \", \" &lt;&lt; s.three_d_arr[1][1][1] &lt;&lt; endl;\n  }\n  else {\n    cout &lt;&lt; \"Must enter 1 or 3\" &lt;&lt; endl;\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "reverse-engineering", "ida", "detours"], "comments": [{"owner": {"reputation": 43, "user_id": 1671210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4nC3y.png?s=128&g=1", "display_name": "ernilos", "link": "https://stackoverflow.com/users/1671210/ernilos"}, "edited": false, "score": 0, "creation_date": 1455207355, "post_id": 35322358, "comment_id": 58396126, "body": "Asked the same question in Reverse Engineering Stack Exchange website, link here: <a href=\"http://reverseengineering.stackexchange.com/questions/12002/detour-null-function\" title=\"detour null function\">reverseengineering.stackexchange.com/questions/12002/&hellip;</a>"}], "owner": {"reputation": 43, "user_id": 1671210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4nC3y.png?s=128&g=1", "display_name": "ernilos", "link": "https://stackoverflow.com/users/1671210/ernilos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455126441, "creation_date": 1455126441, "question_id": 35322358, "link": "https://stackoverflow.com/questions/35322358/detour-null-function", "title": "Detour null function", "body": "<p>I've been trying to detour a nullsub, this function is used with log purposes, but as the program is compiled under release flags it got removed and I'd like to restore it.</p>\n\n<p>IDA reports as follow:</p>\n\n<pre><code>.text:004BAC10 ; void __thiscall nullsub_2(void *)\n.text:004BAC10 nullsub_2       proc near       \n.text:004BAC10                 retn\n.text:004BAC10 nullsub_2       endp\n</code></pre>\n\n<p>My attempt is to detour this address with my own log function, but Microsoft Detours 3.0 throws <strong>ERROR_INVALID_BLOCK</strong> </p>\n\n<p>I think I get this error as it does not have space to place the jump function, and I don't have any idea how I can fix it.</p>\n"}, {"tags": ["c++", "function", "visual-c++", "bitmap"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1455126428, "post_id": 35322271, "comment_id": 58353361, "body": "Please post a minimal but complete example."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1455126720, "post_id": 35322271, "comment_id": 58353545, "body": "You might have a problem with padding in your struct."}], "answers": [{"comments": [{"owner": {"reputation": 7009, "user_id": 944301, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5254452cff63e21729ce2f07bd572351?s=128&d=identicon&r=PG", "display_name": "ShadowScripter", "link": "https://stackoverflow.com/users/944301/shadowscripter"}, "edited": false, "score": 0, "creation_date": 1455126734, "post_id": 35322377, "comment_id": 58353562, "body": "Oh! Oh, I see it now. That&#39;s a silly mistake. After making the arguments into <code>unsigned char</code> it works. Clearly, I didn&#39;t make everything unsigned &gt;_&lt; That also explains why it worked inline, because there they were already <code>unsigned char</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1455130020, "post_id": 35322377, "comment_id": 58355600, "body": "@DieterL&#252;cking I don&#39;t see the need. The OP should be able to add the word <code>unsigned</code> next to the word <code>char</code> without me doing it for&#39;m.  Are you saying my answer would be better if I copy/pasted the OP&#39;s code then ran a regex on it?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1455131916, "post_id": 35322377, "comment_id": 58356768, "body": "@kfsone I disagree, doing <code>s&#47;char&#47;unsigned char&#47;</code> simply makes the answer worse.  I even stated so in my comment above, prior to your edit.  Feel free to add another answer if you choose!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1455131857, "last_edit_date": 1455131857, "creation_date": 1455126472, "answer_id": 35322377, "question_id": 35322271, "link": "https://stackoverflow.com/questions/35322271/why-does-this-function-return-a-different-value-than-if-i-did-it-inline/35322377#35322377", "title": "Why does this function return a different value than if I did it inline?", "body": "<p><code>char</code> can be signed or unsigned.  A signed char when converted to a larger type sign extends.  When you do math on a char, it converts to <code>int</code>, which is a larger type.</p>\n\n<p>When doing bit manipulation, default to unsigned.</p>\n\n<pre><code>unsigned short get_u16(char b0, char b1){\n  return ((b1 &lt;&lt; 8) | b0);\n}\n</code></pre>\n\n<p>is an example of the problem.  <code>b0</code> is sign extended, maybe.</p>\n\n<p>Implementations are free to treat char as either signed or unsigned.</p>\n"}], "owner": {"reputation": 7009, "user_id": 944301, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5254452cff63e21729ce2f07bd572351?s=128&d=identicon&r=PG", "display_name": "ShadowScripter", "link": "https://stackoverflow.com/users/944301/shadowscripter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 35322377, "answer_count": 1, "score": 0, "last_activity_date": 1455131857, "creation_date": 1455126195, "question_id": 35322271, "link": "https://stackoverflow.com/questions/35322271/why-does-this-function-return-a-different-value-than-if-i-did-it-inline", "title": "Why does this function return a different value than if I did it inline?", "body": "<p>Having come back from a .NET high, looking to make a faster and more efficient image library I figured I'd try doing everything manually for <strong>maximum control</strong> <sup><em>raises fist into the air</em></sup>.<br>\nA learning experience, you know?   </p>\n\n<p>So, I'm reading some test bitmaps (.bmp extension). While reading some bitmap file headers, I noticed the size block gives me negative values.</p>\n\n<p>I've managed to track down the issue somewhat, but I'm not that great at debugging. When I replace my <code>get_u32</code> function with the same chunk of code - inline - it gives me the right size. I imagine there is some implicit type conversion going on under the hood, but I can't really tell.</p>\n\n<p>Here's the relevant code</p>\n\n<pre><code>typedef struct IMGLIB_API{\n    unsigned short type;\n    unsigned long size;\n    unsigned short reserved1;\n    unsigned short reserved2;\n    unsigned long offbits;\n} BITMAP_FILE_HEADER;\n\nunsigned short get_u16(char b0, char b1){\n    return ((b1 &lt;&lt; 8) | b0);\n}\n\nunsigned long get_u32(char b0, char b1, char b2, char b3){\n    return (b3 &lt;&lt; 24) | (b2 &lt;&lt; 16) | (b1 &lt;&lt; 8) | b0;\n}\n\nIMAGE_DATA bitmap_loader(const char* file_path){\n    IMAGE_DATA r;\n    ifstream ifs;\n    const unsigned short valid_formats[] = {\n        16973, // BM - Windows 3.1x, 95, NT, ...\n        16961, // BA - OS/2 struct bitmap array\n        17225, // CI - OS/2 struct color icon\n        17232, // CP - OS/2 const color pointer\n        18755, // IC - OS/2 struct icon\n        20564  // PT - OS/2 pointer\n    };\n    const int BMP_FILE_HEADER_SIZE = 14;\n\n    ifs.open(file_path, ifstream::in | ifstream::binary);\n    unsigned char* rhead = new unsigned char[BMP_FILE_HEADER_SIZE];\n    ifs.read((char*)rhead, BMP_FILE_HEADER_SIZE);\n\n    BITMAP_FILE_HEADER bmp_header;\n    bmp_header.type = get_u16(rhead[0], rhead[1]);\n    bmp_header.size = get_u32(rhead[2], rhead[3], rhead[4], rhead[5]); // - doesn't work\n    //bmp_header.size = (rhead[5] &lt;&lt; 24) | (rhead[4] &lt;&lt; 16) | (rhead[3] &lt;&lt; 8) | rhead[2]; // - works\n    bmp_header.reserved1 = get_u16(rhead[6], rhead[7]);\n    bmp_header.reserved2 = get_u16(rhead[8], rhead[9]);\n    bmp_header.offbits = get_u32(rhead[10], rhead[11], rhead[12], rhead[13]); // correct, reports 54 bytes\n\n    // TODO: check if valid bitmap type\n    // TODO: read the dib header\n    // TODO: read in pixel data and decompress (if needed)\n\n    r.size = bmp_header.size;\n    r.type = img_type::IM_BITMAP;\n\n    ifs.close();\n    delete rhead;\n    rhead = 0;\n    return r;\n}\n</code></pre>\n\n<p>As an example, when loading a particular bitmap with a size of 86\u00a0454 bytes, I get -74 when using the function <code>get_u32</code>. I figured that setting the return as unsigned, and the struct member to unsigned would mean it can't be.. signed. Better rename myself to Snow, because apparently I know nothing <em>grumble</em></p>\n\n<p>Feel free to give some tips on optimizations/better ways to go about it.</p>\n"}, {"tags": ["c++", "arrays", "string", "type-conversion"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1455125954, "post_id": 35322150, "comment_id": 58353043, "body": "With <code>::memcpy()</code> or with a cast to <code>char*</code>."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1455126056, "post_id": 35322150, "comment_id": 58353125, "body": "short answer: you shouldn&#39;t do it. user <code>char</code> array instead."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1455126137, "post_id": 35322150, "comment_id": 58353173, "body": "Why is this what you want to do?"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1455126225, "post_id": 35322150, "comment_id": 58353228, "body": "@YSC: Thanks , im using c++, so please write the cast line in above case?"}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1455126292, "post_id": 35322150, "comment_id": 58353272, "body": "@erip : i need to assign a std::string to unsigned char array"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1455126309, "post_id": 35322150, "comment_id": 58353287, "body": "I know <i>what</i> you need to do, I don&#39;t know <i>why</i> you want to do it."}, {"owner": {"reputation": 3477, "user_id": 3531894, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1668290480/picture?type=large", "display_name": "Jodo", "link": "https://stackoverflow.com/users/3531894/jodo"}, "edited": false, "score": 0, "creation_date": 1578682577, "post_id": 35322150, "comment_id": 105531717, "body": "A situation were you might need sth like this if you have a std::string and want to send it over TCP sockets which excepts bytes (unsigned char)."}], "answers": [{"comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1455127575, "post_id": 35322268, "comment_id": 58354062, "body": "<code>return</code> is missing."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1455129022, "post_id": 35322268, "comment_id": 58354985, "body": "-.- I was mislead by the trailing return type... and by my lazyness: not to double check..."}, {"owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "edited": false, "score": 0, "creation_date": 1455130164, "post_id": 35322268, "comment_id": 58355698, "body": "@ Cheers and hth. - Alf :  Thanks a Lot !!"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1520432666, "post_id": 35322268, "comment_id": 85312849, "body": "Just looking at this I realized that with a C++ implementation where <code>std::string</code> has raw pointers as iterators (unlikely but permitted), the unqualified call to <code>copy</code> would not invoke Argument Dependent Lookup and it would not be found. Fixed by adding namespace qualification."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 11, "last_activity_date": 1520432677, "last_edit_date": 1520432677, "creation_date": 1455126183, "answer_id": 35322268, "question_id": 35322150, "link": "https://stackoverflow.com/questions/35322150/how-to-copy-a-stdstring-to-unsigned-char-array/35322268#35322268", "title": "How to copy a std::string to unsigned char array?", "body": "<p>Here's one way:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nauto main() -&gt; int\n{\n    unsigned char trap[256];\n    std::string sample = \".1.3.6.1.4\";\n    std::copy( sample.begin(), sample.end(), trap );\n    trap[sample.length()] = 0;\n    std::cout &lt;&lt; trap &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>It can be a good idea to additionally check whether the buffer is sufficiently large.</p>\n"}, {"tags": [], "owner": {"reputation": 3477, "user_id": 3531894, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1668290480/picture?type=large", "display_name": "Jodo", "link": "https://stackoverflow.com/users/3531894/jodo"}, "is_accepted": false, "score": 1, "last_activity_date": 1578682772, "creation_date": 1578682772, "answer_id": 59687547, "question_id": 35322150, "link": "https://stackoverflow.com/questions/35322150/how-to-copy-a-stdstring-to-unsigned-char-array/59687547#59687547", "title": "How to copy a std::string to unsigned char array?", "body": "<p>Using reinterpret_cast would also be possible:</p>\n\n<pre><code>int main() {\n    std::string sample = \".1.3.6.1.4\";\n    auto uCharArr = reinterpret_cast&lt;unsigned char*&gt;(sample.c_str());\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5737185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/696a876585e83d7ff856c2d20b64b9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Ragav", "link": "https://stackoverflow.com/users/5737185/ragav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13186, "favorite_count": 3, "accepted_answer_id": 35322268, "answer_count": 2, "score": 6, "last_activity_date": 1578682772, "creation_date": 1455125884, "last_edit_date": 1455125972, "question_id": 35322150, "link": "https://stackoverflow.com/questions/35322150/how-to-copy-a-stdstring-to-unsigned-char-array", "title": "How to copy a std::string to unsigned char array?", "body": "<p>How to copy a std::string (sample) to unsigned char array (trap)?</p>\n\n<pre><code>int main() {\n    unsigned char trap[256];\n    std::string sample = \".1.3.6.1.4\";\n    strcpy(trap,sample.c_str());\n    std::cout &lt;&lt; trap &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Above code throws error:</strong></p>\n\n<pre><code>time.cpp: In function \u2018int main()\u2019:\ntime.cpp:20: error: invalid conversion from \u2018unsigned char*\u2019 to \u2018char*\u2019\ntime.cpp:20: error:   initializing argument 1 of \u2018char* strcpy(char*, const char*)\u2019\n</code></pre>\n"}, {"tags": ["c++", "opengl", "2d"], "answers": [{"tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": false, "score": 0, "last_activity_date": 1455126541, "creation_date": 1455126541, "answer_id": 35322399, "question_id": 35322133, "link": "https://stackoverflow.com/questions/35322133/how-do-i-rotate-an-object-about-its-z-axis-to-always-point-in-the-mouse-directio/35322399#35322399", "title": "How do I rotate an object about its z axis to always point in the mouse direction? (2D, OpenGL, C++, Win32, Top Down))", "body": "<p>You need to subtract the position of your character from the position of your mouse (I assume they are in the same space).</p>\n\n<p>So if you show your character at <code>e_x, e_y</code> then you get the angle with <code>atan2(mouse_y - e_y, mouse_x - e_x)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "is_accepted": false, "score": 0, "last_activity_date": 1455126905, "creation_date": 1455126905, "answer_id": 35322514, "question_id": 35322133, "link": "https://stackoverflow.com/questions/35322133/how-do-i-rotate-an-object-about-its-z-axis-to-always-point-in-the-mouse-directio/35322514#35322514", "title": "How do I rotate an object about its z axis to always point in the mouse direction? (2D, OpenGL, C++, Win32, Top Down))", "body": "<p>do you know <code>glulookat</code> ? It is useful for 3D version.</p>\n\n<p>In this case you does not need the atan function, I suppose mouse_x and mouse_y are the <strong>deltas</strong> between your subject and the mouse, If you normalize it you get the cosine and the sine of the desired angle, from them you can create a <a href=\"http://mathworld.wolfram.com/RotationMatrix.html\" rel=\"nofollow\">rotation matrix</a> and do glMultMatrix.</p>\n\n<p>I hope to help,\nRegards.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2383707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455126905, "creation_date": 1455125822, "question_id": 35322133, "link": "https://stackoverflow.com/questions/35322133/how-do-i-rotate-an-object-about-its-z-axis-to-always-point-in-the-mouse-directio", "title": "How do I rotate an object about its z axis to always point in the mouse direction? (2D, OpenGL, C++, Win32, Top Down))", "body": "<p>I have a character drawn on the screen that I can move around with the arrow keys etc...</p>\n\n<p>I am trying to rotate the character to face the position the mouse is in. For example the player is a sprite with a gun, I always want the tip of the gun facing the mouse.</p>\n\n<p>At the moment the character is rotating, but not as I want it to. For example if the mouse is on the left hand side of the window (and the character is facing left) and then if the mouse is just moved straight across to the right side of the screen then the character will face right.\nNote: This is a top down game so I have no need to change the sprite etc.</p>\n\n<p>I have included my main class where the win32 window is created and the mouse is controlled.</p>\n\n<p>Main class:</p>\n\n<pre><code>#include \"Game.h\"\n\n\n\n//OPENGL FUNCTION PROTOTYPES\nvoid display();             //called in winmain to draw everything to the screen\nvoid reshape(int width, int height);\nvoid init();                //called in winmain when the program starts.\n\n//*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\ndouble timerFrequencyRecip = 1.0;\ndouble prevDeltaT = 1.0;\n__int64 prevTime = 0;\nbool initialisedPrevDeltaT = false;\n//*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\n\nint mouse_x = 0, mouse_y = 0;\nbool LeftPressed = false;\nint screenWidth = 1280, screenHeight = 800;\nbool keys[256];\nGame * game;\n\n\n/*************    START OF OPENGL FUNCTIONS   ****************/\nvoid display()\n{\nglClear(GL_COLOR_BUFFER_BIT);\n\nglEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\nglEnable(GL_TEXTURE_2D);\n\n\nglMatrixMode(GL_MODELVIEW);\n\ngame-&gt;draw();\n\nglFlush();\n\n}\nvoid reshape(int width, int height) {\nscreenWidth = width; screenHeight = height;\n\nglViewport(0, 0, width, height);\nglMatrixMode(GL_PROJECTION);\nglLoadIdentity();\n\ngluOrtho2D(0, screenWidth, 0, screenHeight);\n\nglMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\n}\n\nvoid init()\n{\nglClearColor(1.0, 1.0, 1.0, 1.0);\n\n\n\ngame = new Game(screenWidth, screenHeight);\n\n\ngame-&gt;startGame();\n}\n\n/**************** END OPENGL FUNCTIONS *************************/\n\n//WIN32 functions\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);   // Declaration For WndProc\nvoid KillGLWindow();                                    // releases and destroys the window\nbool CreateGLWindow(char* title, int width, int height); //creates the window\nint WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int);  // Win32 main function\n\n                                                   //win32 global        variabless\nHDC         hDC = NULL;     // Private GDI Device Context\nHGLRC       hRC = NULL;     // Permanent Rendering Context\nHWND        hWnd = NULL;    // Holds Our Window Handle\nHINSTANCE   hInstance;      // Holds The Instance Of The Application\n\n\n                        /******************* WIN32 FUNCTIONS ***************************/\nint WINAPI WinMain(HINSTANCE    hInstance,          // Instance\nHINSTANCE   hPrevInstance,      // Previous Instance\nLPSTR       lpCmdLine,          // Command Line Parameters\nint         nCmdShow)           // Window Show State\n{\nMSG     msg;                                    // Windows Message Structure\nbool    done = false;                               // Bool Variable To Exit Loop\n\n// Create Our OpenGL Window\nif (!CreateGLWindow(\"Game\", screenWidth, screenHeight))\n{\n    return 0;                                   // Quit If Window Was Not Created\n}\n\nwhile (!done)                                   // Loop That Runs While done=FALSE\n{\n    if (PeekMessage(&amp;msg, NULL, 0, 0, PM_REMOVE))   // Is There A Message Waiting?\n    {\n        if (msg.message == WM_QUIT)             // Have We Received A Quit Message?\n        {\n            done = true;                            // If So done=TRUE\n        }\n        else                                    // If Not, Deal With Window Messages\n        {\n            TranslateMessage(&amp;msg);             // Translate The Message\n            DispatchMessage(&amp;msg);              // Dispatch The Message\n        }\n    }\n    else                                        // If There Are No Messages\n    {\n        if (keys[VK_ESCAPE])\n            done = true;\n    }\n    //*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\n    LARGE_INTEGER t;\n    QueryPerformanceCounter(&amp;t);\n    __int64 currentTime = t.QuadPart;\n    __int64 ticksElapsed = currentTime - prevTime;\n    double deltaT = double(ticksElapsed) * timerFrequencyRecip;\n    if (!initialisedPrevDeltaT) {\n        prevDeltaT = deltaT;\n        deltaT = 0.0025;\n        initialisedPrevDeltaT = true;\n    }\n    prevTime = currentTime;\n    prevDeltaT = deltaT;\n\n    deltaT *= 6;\n\n    //*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\n    display();                  // Draw The Scene\n\n    SwapBuffers(hDC);               // Swap Buffers (Double Buffering)\n\n    game-&gt;update(deltaT);                   // update variables\n    game-&gt;processKeys(keys);            //process keyboard\n\n\n}\n\n// Shutdown\nKillGLWindow();                                 // Kill The Window\nreturn (int)(msg.wParam);                       // Exit The Program\n}\n\n//WIN32 Processes function - useful for responding to user inputs or other events.\nLRESULT CALLBACK WndProc(HWND   hWnd,           // Handle For This Window\nUINT    uMsg,           // Message For This Window\nWPARAM  wParam,         // Additional Message Information\nLPARAM  lParam)         // Additional Message Information\n{\nswitch (uMsg)                                   // Check For Windows Messages\n{\ncase WM_CLOSE:                              // Did We Receive A Close Message?\n{\n    PostQuitMessage(0);                     // Send A Quit Message\n    return 0;                               // Jump Back\n}\nbreak;\n\ncase WM_SIZE:\n{\n    reshape(LOWORD(lParam), HIWORD(lParam));\n    return 0;\n}\nbreak;\n\ncase WM_LBUTTONDOWN:\n{\n    mouse_x = LOWORD(lParam);\n    mouse_y = screenHeight - HIWORD(lParam);\n    LeftPressed = true;\n}\nbreak;\n\ncase WM_LBUTTONUP:\n{\n    LeftPressed = false;\n}\nbreak;\n\ncase WM_MOUSEMOVE:\n{\n    mouse_x = LOWORD(lParam);\n    mouse_y = screenHeight - HIWORD(lParam);\n    game-&gt;moveMouse(mouse_x, mouse_y);\n\n}\nbreak;\ncase WM_KEYDOWN:                            // Is A Key Being Held Down?\n{\n    keys[wParam] = true;                    // If So, Mark It As TRUE\n    return 0;                               // Jump Back\n}\nbreak;\ncase WM_KEYUP:                              // Has A Key Been Released?\n{\n    keys[wParam] = false;                   // If So, Mark It As FALSE\n    return 0;                               // Jump Back\n}\nbreak;\n}\n\n// Pass All Unhandled Messages To DefWindowProc\nreturn DefWindowProc(hWnd, uMsg, wParam, lParam);\n}\n\nvoid KillGLWindow()                             // Properly Kill The Window\n{\nif (hRC)                                            // Do We Have A Rendering Context?\n{\n    if (!wglMakeCurrent(NULL, NULL))                    // Are We Able To Release The DC And RC Contexts?\n    {\n        MessageBox(NULL, \"Release Of DC And RC Failed.\", \"SHUTDOWN ERROR\", MB_OK | MB_ICONINFORMATION);\n    }\n\n    if (!wglDeleteContext(hRC))                     // Are We Able To Delete The RC?\n    {\n        MessageBox(NULL, \"Release Rendering Context Failed.\", \"SHUTDOWN ERROR\", MB_OK | MB_ICONINFORMATION);\n    }\n    hRC = NULL;                                     // Set RC To NULL\n}\n\nif (hDC &amp;&amp; !ReleaseDC(hWnd, hDC))                   // Are We Able To Release The DC\n{\n    MessageBox(NULL, \"Release Device Context Failed.\", \"SHUTDOWN ERROR\", MB_OK | MB_ICONINFORMATION);\n    hDC = NULL;                                     // Set DC To NULL\n}\n\nif (hWnd &amp;&amp; !DestroyWindow(hWnd))                   // Are We Able To Destroy The Window?\n{\n    MessageBox(NULL, \"Could Not Release hWnd.\", \"SHUTDOWN ERROR\", MB_OK | MB_ICONINFORMATION);\n    hWnd = NULL;                                        // Set hWnd To NULL\n}\n\nif (!UnregisterClass(\"OpenGL\", hInstance))          // Are We Able To Unregister Class\n{\n    MessageBox(NULL, \"Could Not Unregister Class.\", \"SHUTDOWN ERROR\", MB_OK | MB_ICONINFORMATION);\n    hInstance = NULL;                                   // Set hInstance To NULL\n}\n}\n\n/*  This Code Creates Our OpenGL Window.  Parameters Are:                   *\n*   title           - Title To Appear At The Top Of The Window              *\n*   width           - Width Of The GL Window Or Fullscreen Mode             *\n*   height          - Height Of The GL Window Or Fullscreen Mode            */\n\nbool CreateGLWindow(char* title, int width, int height)\n{\nGLuint      PixelFormat;            // Holds The Results After Searching For A Match\nWNDCLASS    wc;                     // Windows Class Structure\nDWORD       dwExStyle;              // Window Extended Style\nDWORD       dwStyle;                // Window Style\nRECT        WindowRect;             // Grabs Rectangle Upper Left / Lower Right Values\nWindowRect.left = (long)0;          // Set Left Value To 0\nWindowRect.right = (long)width;     // Set Right Value To Requested Width\nWindowRect.top = (long)0;               // Set Top Value To 0\nWindowRect.bottom = (long)height;       // Set Bottom Value To Requested Height\n\nRECT        rect;\nGetClientRect(GetDesktopWindow(), &amp;rect);\nrect.left = (rect.right / 2) - (width / 2);\nrect.top = (rect.bottom / 2) - (height / 2);\n\nhInstance = GetModuleHandle(NULL);              // Grab An Instance For Our Window\nwc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;  // Redraw On Size, And Own DC For Window.\nwc.lpfnWndProc = (WNDPROC)WndProc;                  // WndProc Handles Messages\nwc.cbClsExtra = 0;                                  // No Extra Window Data\nwc.cbWndExtra = 0;                                  // No Extra Window Data\nwc.hInstance = hInstance;                           // Set The Instance\nwc.hIcon = LoadIcon(NULL, IDI_WINLOGO);         // Load The Default Icon\nwc.hCursor = LoadCursor(NULL, IDC_ARROW);           // Load The Arrow Pointer\nwc.hbrBackground = NULL;                                    // No Background Required For GL\nwc.lpszMenuName = NULL;                                 // We Don't Want A Menu\nwc.lpszClassName = \"OpenGL\";                                // Set The Class Name\n\nif (!RegisterClass(&amp;wc))                                    // Attempt To Register The Window Class\n{\n    MessageBox(NULL, \"Failed To Register The Window Class.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                                           // Return FALSE\n}\n\n\ndwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;         // Window Extended Style\ndwStyle = WS_SYSMENU | WS_CAPTION | WS_MINIMIZEBOX;\n\nAdjustWindowRectEx(&amp;WindowRect, dwStyle, FALSE, dwExStyle);     // Adjust Window To True Requested Size\n\n                                                                // Create The Window\nif (!(hWnd = CreateWindowEx(dwExStyle,                          // Extended Style For The Window\n    \"OpenGL\",                           // Class Name\n    title,                              // Window Title\n    dwStyle,\n    rect.left,\n    rect.top,\n    WindowRect.right - WindowRect.left,\n    WindowRect.bottom - WindowRect.top,\n    NULL,                               // No Parent Window\n    NULL,                               // No Menu\n    hInstance,                          // Instance\n    NULL)))                             // Dont Pass Anything To WM_CREATE\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Window Creation Error.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\n\nstatic  PIXELFORMATDESCRIPTOR pfd =             // pfd Tells Windows How We Want Things To Be\n{\n    sizeof(PIXELFORMATDESCRIPTOR),              // Size Of This Pixel Format Descriptor\n    1,                                          // Version Number\n    PFD_DRAW_TO_WINDOW |                        // Format Must Support Window\n    PFD_SUPPORT_OPENGL |                        // Format Must Support OpenGL\n    PFD_DOUBLEBUFFER,                           // Must Support Double Buffering\n    PFD_TYPE_RGBA,                              // Request An RGBA Format\n    24,                                     // Select Our Color Depth\n    0, 0, 0, 0, 0, 0,                           // Color Bits Ignored\n    0,                                          // No Alpha Buffer\n    0,                                          // Shift Bit Ignored\n    0,                                          // No Accumulation Buffer\n    0, 0, 0, 0,                                 // Accumulation Bits Ignored\n    24,                                         // 24Bit Z-Buffer (Depth Buffer)  \n    0,                                          // No Stencil Buffer\n    0,                                          // No Auxiliary Buffer\n    PFD_MAIN_PLANE,                             // Main Drawing Layer\n    0,                                          // Reserved\n    0, 0, 0                                     // Layer Masks Ignored\n};\n\nif (!(hDC = GetDC(hWnd)))                           // Did We Get A Device Context?\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Can't Create A GL Device Context.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\nif (!(PixelFormat = ChoosePixelFormat(hDC, &amp;pfd)))  // Did Windows Find A Matching Pixel Format?\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Can't Find A Suitable PixelFormat.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\nif (!SetPixelFormat(hDC, PixelFormat, &amp;pfd))        // Are We Able To Set The Pixel Format?\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Can't Set The PixelFormat.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\nif (!(hRC = wglCreateContext(hDC)))             // Are We Able To Get A Rendering Context?\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Can't Create A GL Rendering Context.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\nif (!wglMakeCurrent(hDC, hRC))                  // Try To Activate The Rendering Context\n{\n    KillGLWindow();                             // Reset The Display\n    MessageBox(NULL, \"Can't Activate The GL Rendering Context.\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;                               // Return FALSE\n}\n\n\nShowWindow(hWnd, SW_SHOW);                      // Show The Window\nSetForegroundWindow(hWnd);                      // Slightly Higher Priority\nSetFocus(hWnd);                                 // Sets Keyboard Focus To The Window\nreshape(width, height);\n\ninit();\n\n\n//*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\n\nLARGE_INTEGER f;\nif (!QueryPerformanceFrequency(&amp;f)) {\n    MessageBox(NULL, \"Cannot get performance counter frequency\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;\n}\ntimerFrequencyRecip = 1.0 / double(f.QuadPart);\n\nLARGE_INTEGER t;\nif (!QueryPerformanceCounter(&amp;t)) {\n    MessageBox(NULL, \"Cannot get performance counter value\", \"ERROR\", MB_OK | MB_ICONEXCLAMATION);\n    return false;\n}\nprevTime = t.QuadPart;\n//*+*+*+*+*+*+*+*+*+*+* DeltaTime Stuff +*+*+*+*+*+*+*+*+*+*+*+*+*+*\n\nreturn true;                                    // Success\n}\n</code></pre>\n\n<p>Below is where I am trying to rotate the character</p>\n\n<pre><code>void Character::draw() {\nsetTexture();\nglLoadIdentity();\n\nglBindTexture(GL_TEXTURE_2D, e_texture);\ndouble angleInRadians = std::atan2(mouse_y, mouse_x);\ndouble angleInDegrees = (angleInRadians / M_PI) * 180;\nglMatrixMode(GL_MODELVIEW);\nglPushMatrix();\nglColor3f(1.0, 1.0, 1.0);\nglTranslatef(e_x, e_y, 0);\nglRotatef(angleInDegrees, 0.0, 0.0, 1.0);\nglBegin(GL_POLYGON);\nglTexCoord2f(0.0, 0.0); glVertex2f(0, 0);\nglTexCoord2f(0.0, 1.0); glVertex2f(0, e_height);\nglTexCoord2f(1.0, 1.0); glVertex2f(e_width, e_height);\nglTexCoord2f(1.0, 0.0); glVertex2f(e_width, 0);\nglEnd();\nglPopMatrix();\n}\n</code></pre>\n"}, {"tags": ["c++", "http", "proxy", "qt5", "qmediaplayer"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1999472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b58508fdd8a10ecb5aa5439e2558be?s=128&d=identicon&r=PG", "display_name": "Jenua", "link": "https://stackoverflow.com/users/1999472/jenua"}, "is_accepted": false, "score": 0, "last_activity_date": 1484829828, "creation_date": 1484829828, "answer_id": 41742102, "question_id": 35322132, "link": "https://stackoverflow.com/questions/35322132/how-to-make-a-proxy-working-with-qmediaplayer-in-qt5/41742102#41742102", "title": "How to make a proxy working with QMediaPlayer in Qt5?", "body": "<p>You can try to create a request with proxy using QNetworkAccessManager mechanism and set QNetworkReply as a second parameter in\n<strong>QMediaPlayer::setMedia(const QMediaContent &amp; media, QIODevice * stream = Q_NULLPTR)</strong>. Check more info <a href=\"http://doc.qt.io/qt-5/qmediaplayer.html#setMedia\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>There a short snippet:</p>\n\n<pre><code>QNetworkAccessManager * manager = new QNetworkAccessManager(this);\n\nQNetworkProxy proxy;\nproxy.setType(QNetworkProxy::Socks5Proxy);\nproxy.setHostName(\"localhost\");\nproxy.setPort(1234);\n\nmanager -&gt; setProxy(proxy);\n\nQNetworkReply * reply = manager -&gt; get(\n  QNetworkRequest(\n    QUrl(\"http://listen.42fm.ru:8000/stealkill\")\n  )\n);\n\nQMediaPlayer * player = new QMediaPlayer();\nplayer -&gt; setMedia(QMediaContent(), reply);\nplayer.play();\n</code></pre>\n\n<p>Hope this will be helpful for you.</p>\n"}], "owner": {"reputation": 41, "user_id": 5640198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d85d97004033678f9f6dae9250fa074?s=128&d=identicon&r=PG&f=1", "display_name": "William B.", "link": "https://stackoverflow.com/users/5640198/william-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484829828, "creation_date": 1455125820, "question_id": 35322132, "link": "https://stackoverflow.com/questions/35322132/how-to-make-a-proxy-working-with-qmediaplayer-in-qt5", "title": "How to make a proxy working with QMediaPlayer in Qt5?", "body": "<p>I have a little problem with my project on Qt. I am trying to play a web-radio directly with QMediaPlayer like this :</p>\n\n<pre><code>QMediaPlayer player;\nplayer.setMedia(QUrl(\"http://listen.42fm.ru:8000/stealkill\"));\nplayer.play();\n</code></pre>\n\n<p>It works but another constraint I have is to setup an SSH tunneling (port 8000 is blocked on the network of deployment). So i set up my port forwarding on my device and I configured Qt proxy like this:</p>\n\n<pre><code>QNetworkProxy proxy;\nproxy.setType(QNetworkProxy::Socks5Proxy);\nproxy.setHostName(\"localhost\");\nproxy.setPort(1234);\nQNetworkProxy::setApplicationProxy(proxy);\n</code></pre>\n\n<p>The proxy works for every HTTP request my application do, but it seems not working with QMediaPlayer (when I enter un bullshit proxy host name, my HTTP requests don't work anymore but QMediaPlayer still works...).</p>\n\n<p>Any idea about setting up this correctly with QMediaPlayer ?</p>\n\n<p>Thanks by advance for the help !</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "edited": false, "score": 0, "creation_date": 1455128070, "post_id": 35322089, "comment_id": 58354389, "body": "It is the answer by M.M in the linked question"}], "owner": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1455392289, "creation_date": 1455125702, "last_edit_date": 1495540739, "question_id": 35322089, "link": "https://stackoverflow.com/questions/35322089/const-and-volatile-are-reference-compatible", "title": "Const and Volatile are reference compatible?", "body": "<p>I am asking this question due to having confusion in the accepted answer for the below question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26857674/why-cant-we-initialize-a-reference-to-const-int-with-an-rvalue-volatile-int?rq=1\">Why can't we initialize a reference to <code>const int</code> with an rvalue <code>volatile int&amp;&amp;</code>?</a></p>\n\n<p>For case 1 in the question stated there , How come it should go in the following section mentioned in standard:</p>\n\n<blockquote>\n  <p>If the initializer expression is an xvalue (but not a bit-field), class prvalue, array prvalue or function lvalue and \u201ccv1 T1\u201d is reference-compatible with \u201ccv2 T2\u201d, or</p>\n</blockquote>\n\n<p>According to my knowledge it should not come to this section because xvalue returned by <code>volatile int &amp;&amp; bar()</code> is of volatile type and <code>const int &amp;</code> is not reference compatible with <code>volatile</code> xvalue and thus it should go to the very last part of reference initialization and that is the same as of case 2 and temporary should be created and case 1 should also be passed as case2 .</p>\n\n<p>Please help me to clarify this.</p>\n"}, {"tags": ["c++", "amazon-web-services", "amazon-s3", "aws-sdk"], "comments": [{"owner": {"reputation": 347, "user_id": 641267, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/077a483beb39db9d5884ee6f012f7b6e?s=128&d=identicon&r=PG", "display_name": "JohnnyD", "link": "https://stackoverflow.com/users/641267/johnnyd"}, "edited": false, "score": 0, "creation_date": 1455125633, "post_id": 35322033, "comment_id": 58352818, "body": "Incidentally, a subsequent call to AbortMultipartUpload succeeds."}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 641267, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/077a483beb39db9d5884ee6f012f7b6e?s=128&d=identicon&r=PG", "display_name": "JohnnyD", "link": "https://stackoverflow.com/users/641267/johnnyd"}, "is_accepted": false, "score": 3, "last_activity_date": 1455200601, "creation_date": 1455200601, "answer_id": 35341903, "question_id": 35322033, "link": "https://stackoverflow.com/questions/35322033/aws-c-sdk-uploadpart-times-out/35341903#35341903", "title": "AWS C++ SDK UploadPart times out", "body": "<p>The problem was my method of obtaining a stream for SetBody. I switched to using the boost library instead of a homegrown approach.</p>\n\n<pre><code>    typedef boost::iostreams::basic_array_source&lt;char&gt; Device;\n    boost::iostreams::stream_buffer&lt;Device&gt; stmbuf(_file_buf, n_bytes);\n\n    std::iostream *stm = new std::iostream(&amp;stmbuf);\n\n    request.SetBody(std::shared_ptr&lt;Aws::IOStream&gt;(stm));\n</code></pre>\n\n<p>This works well.</p>\n\n<p>I also needed to keep track of the parts I was uploading for the call to CompleteMultipartUpload as follows:</p>\n\n<pre><code>    Aws::S3::Model::CompletedPart part;\n    part.SetPartNumber(request.GetPartNumber());\n    part.SetETag(response.GetResult().GetETag());\n    _uploadedParts.AddParts(part);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7598, "user_id": 734691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/QywkD.jpg?s=128&g=1", "display_name": "Jonathan Henson", "link": "https://stackoverflow.com/users/734691/jonathan-henson"}, "is_accepted": false, "score": 1, "last_activity_date": 1484878654, "creation_date": 1484878654, "answer_id": 41755022, "question_id": 35322033, "link": "https://stackoverflow.com/questions/35322033/aws-c-sdk-uploadpart-times-out/41755022#41755022", "title": "AWS C++ SDK UploadPart times out", "body": "<p>Alternatively, you can use the TransferManager interface which will do this for you. It has an IOStream interface. In addition we provide a preallocated buffer implementation for iostream:</p>\n\n<p><a href=\"https://github.com/aws/aws-sdk-cpp/blob/master/aws-cpp-sdk-core/include/aws/core/utils/stream/PreallocatedStreamBuf.h\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-cpp/blob/master/aws-cpp-sdk-core/include/aws/core/utils/stream/PreallocatedStreamBuf.h</a></p>\n"}], "owner": {"reputation": 347, "user_id": 641267, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/077a483beb39db9d5884ee6f012f7b6e?s=128&d=identicon&r=PG", "display_name": "JohnnyD", "link": "https://stackoverflow.com/users/641267/johnnyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1484878654, "creation_date": 1455125534, "question_id": 35322033, "link": "https://stackoverflow.com/questions/35322033/aws-c-sdk-uploadpart-times-out", "title": "AWS C++ SDK UploadPart times out", "body": "<p>I am try to upload a file to Amazon S3 using the AWS C++ SDK.</p>\n\n<p>The call to CreateMultipartUpload returns successfully but the following call to UploadPart times out with the following error:</p>\n\n<pre><code>(Aws::String) m_message = \"Unable to parse ExceptionName: RequestTimeout Message: Your socket connection to the server was not read from or written to within the timeout period. Idle connections will be closed.\"\n</code></pre>\n\n<p>I don't understand why the initiate call works but not the part upload call. There clearly isn't any network issue.</p>\n\n<p>This is my code:</p>\n\n<pre><code>bool FileUploader::uploadChunk() {\n\n    Aws::S3::Model::UploadPartRequest request;\n    request.SetBucket(\"video\");\n    request.SetKey(_key);\n    request.SetUploadId(_file-&gt;uploadId);\n    request.SetPartNumber(_file-&gt;chunksUploaded + 1);\n\n    long file_pos = _file-&gt;chunksUploaded * CHUNK_SIZE;\n    _input_file.seekg(file_pos, std::ios::beg);\n\n    _input_file.read(_file_buf, CHUNK_SIZE);\n    long n_bytes = _input_file.gcount();\n\n    if(n_bytes &gt; 0) {\n\n        request.SetContentLength(n_bytes);\n\n        char_array_buffer buf2(_file_buf, _file_buf + n_bytes);\n        std::iostream *chunk_stream = new std::iostream(&amp;buf2);\n\n        request.SetBody(std::shared_ptr&lt;std::iostream&gt;(chunk_stream));\n\n        Aws::S3::Model::UploadPartOutcome response = _client-&gt;UploadPart(request);\n        if(response.IsSuccess()) {\n            _file-&gt;chunksUploaded++;\n            _uploader-&gt;updateUploadStatus(_file);\n        }\n\n        return response.IsSuccess();\n\n    }\n    else {\n        return false;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1455125806, "post_id": 35322010, "comment_id": 58352947, "body": "there is no polymorphism for values, thus I dont really understand what you mean with a)."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1455126181, "post_id": 35322010, "comment_id": 58353201, "body": "There is no difference between <code>Foo* a = new Foo()</code> and <code>Foo* b = new Foo()</code>. What are you trying to illustrate here?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1455126366, "post_id": 35322010, "comment_id": 58353324, "body": "These are all potentially optimizable since the dynamic type of <code>a</code>, <code>b</code>, and <code>c</code> are all known at compile time. Whether compilers actually perform the optimization is another matter. As Yam Marcovic noted, this is an active field of research, so the state of the art is constantly changing."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1455126428, "post_id": 35322010, "comment_id": 58353360, "body": "You&#39;re wondering about compiler optimizations but I&#39;m wondering what your question is and what you have done yourself in order to answer it..."}], "answers": [{"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 9, "last_activity_date": 1455126663, "last_edit_date": 1455126663, "creation_date": 1455126254, "answer_id": 35322288, "question_id": 35322010, "link": "https://stackoverflow.com/questions/35322010/virtual-function-overhead-when-deterministic-c/35322288#35322288", "title": "virtual function overhead when deterministic (c++)", "body": "<p>In the first case, this will not be a virtual call. The compiler will issue a call straight to <code>Foo::DoSomething()</code>.</p>\n\n<p>In the second case, it's more complicated. For one, it's at-best a link time optimization, since for a specific translation unit, the compiler doesn't know who else might inherit from that class. The other problem you get is with shared libraries which might also inherit without your executable knowing anything about it.</p>\n\n<p>In general, though, this a compiler optimization known as <em>virtual function call elimination</em>, or <em>devirtualization</em>, and is somewhat of an active field of research. Some compilers do it to some extent, others don't do it at all.</p>\n\n<p>See, in GCC (g++), <code>-fdevirtualize</code> and <code>-fdevirtualize-speculatively</code>. The names kind of hint at the guaranteed level of quality.</p>\n"}, {"comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1455128475, "post_id": 35322361, "comment_id": 58354650, "body": "Is this the result when using O3?"}, {"owner": {"reputation": 525, "user_id": 5869301, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/86a49e0145a284ba5a05873250323f4d?s=128&d=identicon&r=PG&f=1", "display_name": "bisthebis", "link": "https://stackoverflow.com/users/5869301/bisthebis"}, "edited": false, "score": 0, "creation_date": 1455132256, "post_id": 35322361, "comment_id": 58357007, "body": "I know almost nothing about assembly. Is this (for virtual call) a call to a &quot;function pointer&quot; ro waht looks the most like it in assembly ?"}], "tags": [], "owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "is_accepted": false, "score": 2, "last_activity_date": 1455126445, "creation_date": 1455126445, "answer_id": 35322361, "question_id": 35322010, "link": "https://stackoverflow.com/questions/35322010/virtual-function-overhead-when-deterministic-c/35322361#35322361", "title": "virtual function overhead when deterministic (c++)", "body": "<p>In Visual Studio 2013, a virtual function call is not optimized even when the behavior is deterministic.</p>\n\n<p>For example,</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstatic int counter = 0;\n\nstruct Foo\n{\n    virtual void VirtualCall() { ++counter; }\n    void RegularCall() { ++counter; }\n};\n\nint main()\n{\n    Foo* a = new Foo();\n    a-&gt;VirtualCall(); //Overhead ? a doesn't seem to be able to change nature.\n    a-&gt;RegularCall();\n    std::cout &lt;&lt; counter;\n    return 0;\n}\n</code></pre>\n\n<p>The machine code for the virtual call looks like this:</p>\n\n<pre><code>a-&gt;VirtualCall()\n\n  0001b 8b 01        mov     eax, DWORD PTR [ecx]\n  0001d ff 10        call    DWORD PTR [eax]\n</code></pre>\n\n<p>The machine code for the regular call shows that the function was inlined - there was no function call:</p>\n\n<pre><code> a-&gt;RegularCall()\n\n  00         inc     DWORD PTR _counter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1456069950, "creation_date": 1456069950, "answer_id": 35538259, "question_id": 35322010, "link": "https://stackoverflow.com/questions/35322010/virtual-function-overhead-when-deterministic-c/35538259#35538259", "title": "virtual function overhead when deterministic (c++)", "body": "<p>In general you can trust your compiler optimiser to make the good choice, depending of course on the optimisation settings. </p>\n\n<p>For the proof of concept, here a code using the different cases, <code>Foo</code> and <code>Bar</code> being defined as you did: </p>\n\n<pre><code>struct Tzar : public Foo\n{\n   void DoSomething() override final;  // this is a virtual than can't be overriden further\n};\n\nFoo* factory ();  \nBar* bar_factory(); \nTzar* tsar_factory(); \n\nint main()\n{\n    Foo myfoo;\n    myfoo.DoSomething();  // this is a direct call\n\n    Foo* a = new Foo();\n    a-&gt;DoSomething();  //Overhead only without optimisation: a is clearly a Foo, so Foo::DoSomething(). \n\n    Foo* b = new Bar();\n    b-&gt;DoSomething(); //Overhead only without optimisation:  b is clearly a Bar, so Bar::DoSomething().\n\n    Bar* c = new Bar();\n    c-&gt;DoSomething(); //Overhead only without optimisation: c is clearly a Bar, so Bar::DoSomething\n\n    Foo* d = factory(); \n    d-&gt;DoSomething();  // Overhead required:  we don't know the type of d, unless global optimisation could predict it\n\n    a = d; \n    a-&gt;DoSomething();  //the unknown propagates to a, so now this call is indirect \n\n    Foo*e = bar_factory(); \n    e-&gt;DoSomething();  // Overhead required:  we don't know the type of e: could be a Bar or a furhter derivate unknown in this compilation unit\n\n    Foo*f = tsar_factory(); \n    f-&gt;DoSomething();  // Overhead could be optimised away : we don't know the type of f, but f::DoSomething() can't be overriden further\n                       // but currently it isn't\n\n  return 0;\n}\n</code></pre>\n\n<p>You can find <a href=\"https://goo.gl/kh3UC2\" rel=\"nofollow\">here the assembly code</a> generated for all the cases you have submitted using GCC 5.3.0 without optimisation.  It is colourised to help you seeing the assembler code for each C++ statement.  </p>\n\n<p>The first call will always be a direct call: </p>\n\n<pre><code>    lea     rax, [rbp-80]         ;  take the object pointer from the stack\n    mov     rdi, rax              ;  set the this pointer of the invoking object\n    call    Foo::DoSomething()    ; direct call to the function\n</code></pre>\n\n<p>Without optimisation, all the other invocations of <code>DoSomething()</code> will use the indirect call.  here the example of the <code>b-&gt;DoSomething()</code>:  </p>\n\n<pre><code>    mov     rax, QWORD PTR [rbp-32]\n    mov     rax, QWORD PTR [rax]\n    mov     rax, QWORD PTR [rax]  ; load the function call from the vtable\n    mov     rdx, QWORD PTR [rbp-32]\n    mov     rdi, rax              ;  set the this pointer of the invoking object\n    call    rax                   ; indirect call via register \n</code></pre>\n\n<p>If you now set the optimizing flag -O2 in the compiler option, you'll see that most indirect calls get optimized away, when the compiler can predict the real type of the polymorphic pointer.  In the example above, it will be:</p>\n\n<pre><code>    mov     rdi, rax            ;  set the this pointer of the invoking object\n    call    Bar::DoSomething()  ; direct call !! \n</code></pre>\n\n<p>When the compiler is not able to safely predict the real type, it will use the indirect call.  For example, if you have a function  <code>bar_factory()</code>, which returns a <code>Bar</code> pointer, the compiler can't know if it will return a pointer to a <code>Bar</code> object or to an object of a class derived from <code>Bar</code> (which could be defined in another compilation unit and not known here).   </p>\n\n<p>The only unexpected point is when you define a virtual function to be the final override (<code>Tzar</code> class in my example).  Here you could expect that  the compiler would take advantage of the fact that <code>DoSomething()</code> is not supposed to get derived further.  But it's not necessarily done.    </p>\n"}], "owner": {"reputation": 525, "user_id": 5869301, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/86a49e0145a284ba5a05873250323f4d?s=128&d=identicon&r=PG&f=1", "display_name": "bisthebis", "link": "https://stackoverflow.com/users/5869301/bisthebis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1456069950, "creation_date": 1455125474, "last_edit_date": 1455126396, "question_id": 35322010, "link": "https://stackoverflow.com/questions/35322010/virtual-function-overhead-when-deterministic-c", "title": "virtual function overhead when deterministic (c++)", "body": "<p>I know that virtual functions are essentially function pointers contained on a vtable, which makes polymorphic calls slower because of indirection etc.\nBut I'm wondering about compiler optimisation when call is deterministic.\nBy deterministic, I mean the following cases:</p>\n\n<ol>\n<li>The object is a value and not a reference, so there is no polymorphism possible:</li>\n</ol>\n\n\n\n<pre><code>struct Foo\n{\n    virtual void DoSomething(){....}\n};\n\nint main()\n{\n    Foo myfoo;\n    myfoo.DoSemthing();\n    return 0;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>The reference is to a childless class:</li>\n</ol>\n\n\n\n<pre><code>struct Foo\n{\n    virtual void DoSomething();\n};\nstruct Bar : public Foo\n{\n   virtual void DoSomething();\n};\n\nint main()\n{\n    Foo* a = new Foo();\n    a-&gt;DoSomething(); //Overhead ? a doesn't seem to be able to change nature.\n\n    Foo* b = new Bar();\n    b-&gt;DoSomething(); //Overhead ? It's a polymorphic call, but b's nature is deterministic.\n\n    Bar* c = new Bar();\n    c-&gt;DoSomething(); //Overhead ? It is NOT possible to have an other version of the method than Bar::DoSomething\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "shell"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1455125338, "post_id": 35321945, "comment_id": 58352619, "body": "<a href=\"http://stackoverflow.com/questions/478898/how-to-execute-a-command-and-get-output-of-command-within-c\" title=\"how to execute a command and get output of command within c\">stackoverflow.com/questions/478898/&hellip;</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1455125354, "post_id": 35321945, "comment_id": 58352633, "body": "No. BTW C++ was always designed with backward C compatibility in mind"}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 2, "creation_date": 1455125362, "post_id": 35321945, "comment_id": 58352642, "body": "Wow not to be snarky but you could have typed your question into Google or Bing or whatever instead of the new question page."}], "answers": [{"tags": [], "owner": {"reputation": 2030, "user_id": 1249278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85067d968f90780d8ca292ab99962189?s=128&d=identicon&r=PG", "display_name": "shafeen", "link": "https://stackoverflow.com/users/1249278/shafeen"}, "is_accepted": true, "score": 3, "last_activity_date": 1455125509, "creation_date": 1455125509, "answer_id": 35322019, "question_id": 35321945, "link": "https://stackoverflow.com/questions/35321945/is-there-a-c-way-to-invoke-linux-shell-commands/35322019#35322019", "title": "Is there a C++ way to invoke linux shell commands?", "body": "<p>No. it's the same as the C one.</p>\n\n<p><code>#include &lt;cstdlib&gt;</code> and then use <code>std::system(\"whatever your command is\")</code>.</p>\n"}], "owner": {"reputation": 323, "user_id": 4727359, "user_type": "registered", "accept_rate": 27, "profile_image": "https://lh4.googleusercontent.com/-i2mbn-z5_5Y/AAAAAAAAAAI/AAAAAAAAABA/NYlJh2N4Xuo/photo.jpg?sz=128", "display_name": "neckutrek", "link": "https://stackoverflow.com/users/4727359/neckutrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 35322019, "answer_count": 1, "score": -2, "last_activity_date": 1455125509, "creation_date": 1455125259, "question_id": 35321945, "link": "https://stackoverflow.com/questions/35321945/is-there-a-c-way-to-invoke-linux-shell-commands", "title": "Is there a C++ way to invoke linux shell commands?", "body": "<p>In C there is popen() and system() to invoke external commands. Is there a more standardized way in C++ to do this using for instance STL and 'std::'?</p>\n"}, {"tags": ["python", "c++", "macos", "boost", "linker"], "owner": {"reputation": 331, "user_id": 1406626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9351f2a552a471d1797c3401014e920f?s=128&d=identicon&r=PG", "display_name": "user1406626", "link": "https://stackoverflow.com/users/1406626/user1406626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455127366, "creation_date": 1455125068, "last_edit_date": 1455127366, "question_id": 35321876, "link": "https://stackoverflow.com/questions/35321876/setting-install-name-building-boost-1-60-0-on-macos-x", "title": "Setting install_name building boost 1.60.0 on MacOS X?", "body": "<p>Using the standard:</p>\n\n<pre><code>% ./bootstrap.sh\n% sudo ./b2 install\n</code></pre>\n\n<p>Builds Boost v1.60.0 fine on MacOS 10.11.2, however the install_name entries on the libboost_*.dylib files are relative, without absolute paths:</p>\n\n<pre><code>% otool -D /usr/local/lib/libboost_python.dylib\n</code></pre>\n\n<p>Produces</p>\n\n<pre><code>/usr/local/lib/libboost_python.dylib:\nlibboost_python.dylib\n</code></pre>\n\n<p>This becomes a problem attempting to use libboost_python.dylib with Apple's standard python which complains about unsafe use of relative rpath when importing a library using Boost.Python:</p>\n\n<pre><code>% python\n&gt;&gt;&gt; import mylibrary\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: dlopen(/path/to/mylibrary.so, 2): Library not loaded: libboost_chrono.dylib\n  Referenced from: /path/to/mylibrary.so\n  Reason: unsafe use of relative rpath libboost_chrono.dylib in /path/to/mylibrary.so with restricted binary\n</code></pre>\n\n<p>Using:</p>\n\n<pre><code>sudo install_name_tool -id /usr/local/lib/libboost_chrono.dylib /usr/local/lib/libboost_chrono.dylib\n</code></pre>\n\n<p>almost fixes this, except references from one libboost_ library to another (i.e. libboost_thread linking to libboost_atomic) remain relative during compiling boost, so the install_name_tool would need to be run during the compilation. Alternatively using a non-standard Python  doesn't complain. But I'd like to be able to specify the install_name is correctly generated when building Boost, ideally as parameters to b2, but haven't be able to determine how? I tried (admittedly a long-shot):</p>\n\n<pre><code>sudo ./b2 dll-path=/usr/local/lib install\n</code></pre>\n\n<p>Without success.</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 2, "creation_date": 1455124481, "post_id": 35321602, "comment_id": 58352045, "body": "What&#39;s the rationale for this?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1455125013, "post_id": 35321602, "comment_id": 58352407, "body": "I would like to access exported function from the address space."}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1455125107, "post_id": 35321602, "comment_id": 58352459, "body": "A DLL is mapped into the address space of its calling process, my first question still applies I think"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1455125630, "post_id": 35321602, "comment_id": 58352817, "body": "but this is another executable file, not a dynamic library I can just map it into parent process but what is the purpose of it because I still cannot run it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455132559, "post_id": 35321602, "comment_id": 58357209, "body": "@user2887378 You probably should <a href=\"http://stackoverflow.com/posts/35321602/edit\">improve your question</a> and tell a bit more about your motivations. As it is you have a XY-problem. As far I could read from your comments you have the problem you need to connect from proprietary (non disclosed) code with a GPLed shared library."}, {"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1455149156, "post_id": 35321602, "comment_id": 58365318, "body": "Arguably the most important defining characteristic of a process is having a unique address space. So having a process with the same address space as another process doesn&#39;t make much sense. The other defining characteristics of a Windows process such as the set of resources it owns, its (usual) mapping to a specific user, its (usual) mapping to a fixed set of Windows stations, its mapping to a &quot;NT subsystem&quot;, etc. are all malleable (except NT subsystem): they can be shared, their usual mapping changed,  their settings copied, etc. - so aren&#39;t as unique as the address space."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "edited": false, "score": 0, "creation_date": 1455125123, "post_id": 35321674, "comment_id": 58352468, "body": "Yeah, but it has to be another executable because the child process is on GPL license and I cannot load any dynamic library without source code opening, but this code has to be closed. I need to inject dll into a child process then, thanks."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455125362, "post_id": 35321674, "comment_id": 58352640, "body": "@user2887378 Well, then try to get something that uses a LGPL license, or wrap that stuff in a separate process and use IPC mechanisms (may be shared memory)."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 1, "creation_date": 1455125451, "post_id": 35321674, "comment_id": 58352692, "body": "@user2887378: The GPL does not make a distinction between processes or libraries. All it cares about is, if you&#39;re using GPL-ed code directly. Calling directly functions from a different process image would still be considered library linking by the GPL."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455125519, "post_id": 35321674, "comment_id": 58352731, "body": "@datenwolf I 1st thought so as well, but the OP states that the DLL will be linked into a separate executable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "edited": false, "score": 0, "creation_date": 1455125717, "post_id": 35321674, "comment_id": 58352874, "body": "I ment another executable not a dynamic library, the child process (gpl) exporting a function which I would call it from a parent."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455126772, "post_id": 35321674, "comment_id": 58353586, "body": "@user2887378: That doesn&#39;t make a difference. You want to directly call a function from a different binary. That makes this binary a library. It doesn&#39;t matter if this thing is designated a &quot;executable&quot; or a &quot;DLL&quot;. To the operating system a DLL is the same thing as an EXE, with the only difference being, that an EXE has an entry point that gets called at launch, while a DLL just sits there. But it is perfectly possible to create a DLL, that can also be &quot;launched&quot;. And as a matter of fact you can export symbols from EXEs and load a EXE with <code>LoadLibrary</code>."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455126919, "post_id": 35321674, "comment_id": 58353673, "body": "@user2887378: Heck, you could even write a linker <code>.def</code> that will make the liker to link an <code>.exe</code> to another <code>.exe</code>. The file format used by DLLs, EXEs, and all the other Windows executable binaries is the same. It&#39;s called PE and the OS kernel does not distinguish between them. On Linux it&#39;s the same BTW; just with ELF instead of PE. And when it comes to the GPL directly calling a function into a binary loaded into the same address space (which is what you want to do) counts as linkage."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455127087, "post_id": 35321674, "comment_id": 58353777, "body": "@datenwolf The point could be solved maybe, you have a GPLed DLL, and provide an executable wrapper that&#39;s also under GPL and provides whatever kind of IPC, not?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455132211, "post_id": 35321674, "comment_id": 58356969, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Yes, that would be a valid approach. What the GPL forbids is linkage, i.e. directly calling a piece of GPL code, from another piece of code that&#39;s not GPL license compatible. IPC is not direct linkage. I guess if it were for RMS then even IPC should be GPL-ed, but then each and every network interaction is essentially IPC (through several layers)."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1455124454, "creation_date": 1455124454, "answer_id": 35321674, "question_id": 35321602, "link": "https://stackoverflow.com/questions/35321602/start-child-process-process-inside-parent-process/35321674#35321674", "title": "Start child process process inside parent process", "body": "<blockquote>\n  <p>Is it possible to start a child process inside same address space? I would like to access any exported function localy.</p>\n</blockquote>\n\n<p>No, it's not possible. The operating system creates a new address space for each process, that is protected to be accessed from other processes.</p>\n\n<p>Use threads instead.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "edited": false, "score": 0, "creation_date": 1455125449, "post_id": 35321907, "comment_id": 58352691, "body": "Yeah, im going to use shared memory or injecting module into a child process, just wanted to be sure if that would be possible. Thank you @MooseBoys for the LoadLibrary info, appreciate."}], "tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": false, "score": 1, "last_activity_date": 1455125149, "creation_date": 1455125149, "answer_id": 35321907, "question_id": 35321602, "link": "https://stackoverflow.com/questions/35321602/start-child-process-process-inside-parent-process/35321907#35321907", "title": "Start child process process inside parent process", "body": "<blockquote>\n  <p>I would like to access any exported function locally.</p>\n</blockquote>\n\n<p>You do not need the child process to share the same memory space as the parent.  Calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684175(v=vs.85).aspx\" rel=\"nofollow\"><code>LoadLibrary</code></a> with the parent process's executable will provide the child process access to exported entrypoints in the parent. Note that this will <em>not</em> provide a mechanism to share memory (unless you're actually using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686958(v=vs.85).aspx\" rel=\"nofollow\">shared memory</a>).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2887378"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 35321674, "answer_count": 2, "score": -6, "last_activity_date": 1455125149, "creation_date": 1455124225, "question_id": 35321602, "link": "https://stackoverflow.com/questions/35321602/start-child-process-process-inside-parent-process", "title": "Start child process process inside parent process", "body": "<p>Is it possible to start a child process inside same address space?\nI would like to access any exported function localy.</p>\n\n<p>ex:</p>\n\n<ol>\n<li>Start (launcher) process (parent).</li>\n<li>(launcher) calls CreateProcess(...) (child process)</li>\n</ol>\n\n<p>but the child process will have a new address space, am I correct? Is there any way to CreateProcess inside parent process address space? I know that it's possible to access it externally but would like to do it in elegant way.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455124836, "post_id": 35321571, "comment_id": 58352299, "body": "Side note: <code>std::cout &lt;&lt; std::boolalpha;</code> (which is a sticky flag)"}], "answers": [{"comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1455124289, "post_id": 35321601, "comment_id": 58351927, "body": "string or const char* :-)"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1455124377, "post_id": 35321601, "comment_id": 58351983, "body": "The OP didn&#39;t specify what kind of string she/he wants, <code>std::string</code> or char array. I guess it doesn&#39;t matter."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 5, "creation_date": 1455124384, "post_id": 35321601, "comment_id": 58351990, "body": "<code>compare(0,0)</code> --&gt; &quot;x is greater than y&quot;"}, {"owner": {"reputation": 101, "user_id": 5720724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9d2558365dcf8ce95ab7f6a5329add2?s=128&d=identicon&r=PG&f=1", "display_name": "T-kin-ter", "link": "https://stackoverflow.com/users/5720724/t-kin-ter"}, "edited": false, "score": 0, "creation_date": 1455125856, "post_id": 35321601, "comment_id": 58352978, "body": "I have one question, why I have to surround by brackets all expression <code>cout &lt;&lt; ((n == m) ? &quot;the same&quot; : compare(n, m));</code> ? When I write <code>cout &lt;&lt; (n == m) ? &quot;the same&quot; : compare(n, m);</code> it produces wrong results."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 101, "user_id": 5720724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9d2558365dcf8ce95ab7f6a5329add2?s=128&d=identicon&r=PG&f=1", "display_name": "T-kin-ter", "link": "https://stackoverflow.com/users/5720724/t-kin-ter"}, "edited": false, "score": 1, "creation_date": 1455126133, "post_id": 35321601, "comment_id": 58353172, "body": "@T-kin-ter <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">Operator precedence rules</a>. It is parsed as  <code>(cout &lt;&lt; (n == m)) ? &quot;the same&quot; : compare(n, m);</code>."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1455124220, "creation_date": 1455124220, "answer_id": 35321601, "question_id": 35321571, "link": "https://stackoverflow.com/questions/35321571/how-can-i-return-string-instead-of-bool-in-lambda/35321601#35321601", "title": "How can I return string instead of bool in lambda?", "body": "<pre><code>auto compare = [](int x, int y) {\n  return x &lt; y ? \"x is less than y\" : \"x is greater than y\";\n};\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5720724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9d2558365dcf8ce95ab7f6a5329add2?s=128&d=identicon&r=PG&f=1", "display_name": "T-kin-ter", "link": "https://stackoverflow.com/users/5720724/t-kin-ter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 35321601, "answer_count": 1, "score": -5, "last_activity_date": 1455127394, "creation_date": 1455124148, "last_edit_date": 1455127394, "question_id": 35321571, "link": "https://stackoverflow.com/questions/35321571/how-can-i-return-string-instead-of-bool-in-lambda", "title": "How can I return string instead of bool in lambda?", "body": "<blockquote>\n  <p>How can I return string \"x is less than y\" or  \"x is greater than y\" instead of bool values in this case ?   </p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int n, m;\n    cin &gt;&gt; n &gt;&gt; m;\n    auto compare = [](int x, int y) { return  x &lt; y; };\n    cout &lt;&lt; ((n == m) ? \"the same\" : to_string(compare(n, m)));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "member-functions"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1455123878, "post_id": 35321362, "comment_id": 58351668, "body": "Have a look at <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\"><code>std::bind</code></a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455123942, "post_id": 35321362, "comment_id": 58351711, "body": "^ ... and <code>std::function</code> when you&#39;re already at it."}, {"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 1, "creation_date": 1455124041, "post_id": 35321362, "comment_id": 58351778, "body": "Thanks. I have looked at a lot of Web pages and my head is swimming. I need some specifics. That&#39;s why I came here with this question."}], "answers": [{"comments": [{"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 1, "creation_date": 1455124368, "post_id": 35321568, "comment_id": 58351975, "body": "Actually, will <code>bind()</code> return something that&#39;s convertible to a simple function pointer, as he&#39;s defined it?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 2, "creation_date": 1455124539, "post_id": 35321568, "comment_id": 58352078, "body": "@YamMarcovic - good point. <code>valNamedFlags</code> has to take the result of the bind expression as its final argument; in practice, that means it should either be a template or it should take <code>std::function&lt;void(int,bool)&gt;</code> where it currently takes <code>valNamedFlagsCallback</code>."}, {"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455127940, "post_id": 35321568, "comment_id": 58354289, "body": "Thanks. Sorry to be so dense. I changed the prototype as you suggested to use std::function&lt;void(int,bool)&gt; callBack and I have been playing with the call -- something like std::bind(setStatement, _1, _2). I am getting literally hundreds of errors that I cannot make heads or tails of. Any more clues? Thanks much!"}, {"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455128013, "post_id": 35321568, "comment_id": 58354345, "body": "Oh, also tried std::bind(setStatement, this, _1, _2) and still getting hundreds of errors."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455133356, "post_id": 35321568, "comment_id": 58357745, "body": "@Charles -- you should probably post either of those as a new question, including the code that&#39;s failing."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455157363, "post_id": 35321568, "comment_id": 58367621, "body": "@Charles I tried a simplified demo <a href=\"http://rextester.com/MBNZRM11968\" rel=\"nofollow noreferrer\">here</a>, please check it."}, {"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455214620, "post_id": 35321568, "comment_id": 58401067, "body": "@songyuanyao, thanks. Already had mine running before I saw yours, but Yes, you nailed it! My case is slightly simpler in that I have only two classes, p and e, while you have p, e and main. Good example."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 5, "last_activity_date": 1455157457, "last_edit_date": 1455157457, "creation_date": 1455124131, "answer_id": 35321568, "question_id": 35321362, "link": "https://stackoverflow.com/questions/35321362/how-declare-a-c-mem-fnmember-function-in-function-declaration/35321568#35321568", "title": "How declare a C++ mem_fn(member_function) in function declaration?", "body": "<p>You need to <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow\"><code>bind</code></a> an instance on it to call via a member function pointer. (i.e. <code>std::bind(&amp;e::setStatement, eInstance, _1, _2)</code>, suppose <code>eInstance</code> is a pointer to an object of class <code>e</code>).</p>\n\n<pre><code>using namespace std::placeholders;  // for _1, _2, _3...\npInstance-&gt;valNamedFlags(operand, \"Statement types\", statementsSubscripts, statementsNames, std::bind(&amp;e::setStatement, eInstance, _1, _2));\n</code></pre>\n\n<p>Note that the return value of <code>std::bind</code> (which is unspecified) doesn't match the free function pointer type <code>valNamedFlagsCallback</code>, one of the solutions is to use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow\"><code>std::function</code></a>.</p>\n\n<pre><code>typedef std::function&lt;void(const int, const bool)&gt; valNamedFlagsCallback;\n</code></pre>\n\n<p><a href=\"http://rextester.com/MBNZRM11968\" rel=\"nofollow\">Simplified demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455126091, "post_id": 35321728, "comment_id": 58353142, "body": "Thanks much! This is the level of help I need. Forgot to mention that one problem is that I have found a lot of examples of mem_fn() and bind() on the Web but none are for a function prototype and I have been unable to make that leap on my own. Can&#39;t see why I would <i>not</i> want to go to your std::function typedef. Not sure exactly how to specify the reference now in the call. Tried std::bind&lt;e&gt;(&amp;e::setStatement) and I am getting dozens of inscrutable errors on MS templates ..."}, {"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455126290, "post_id": 35321728, "comment_id": 58353269, "body": "Oh, also, I am doing alpha testing in MS VS 2010 but my ultimate environment is a compiler that only offers partial C++11 support and so I cannot use lambdas."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "reply_to_user": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455126360, "post_id": 35321728, "comment_id": 58353317, "body": "@Charles That&#39;s not your fault, because I had a typo. Try again with revised code, please, and we&#39;ll see what else needs to be worked out."}], "tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": true, "score": 6, "last_activity_date": 1455126335, "last_edit_date": 1455126335, "creation_date": 1455124625, "answer_id": 35321728, "question_id": 35321362, "link": "https://stackoverflow.com/questions/35321362/how-declare-a-c-mem-fnmember-function-in-function-declaration/35321728#35321728", "title": "How declare a C++ mem_fn(member_function) in function declaration?", "body": "<p>Actually, you'll have a problem doing bind-like stuff as some suggested, since your callback is defined as a simple function pointer, and not a callable.</p>\n\n<p>If you can afford to do it, you can change your</p>\n\n<pre><code>typedef void (*valNamedFlagsCallback)(const int, const bool);\n</code></pre>\n\n<p>to something like</p>\n\n<pre><code>typedef std::function&lt;void(int, bool)&gt; valNamedFlagsCallback\n</code></pre>\n\n<p>(also noting that <code>const</code> on value parameters doesn't affect the signature of the function), then you can use <code>std::bind()</code>,</p>\n\n<pre><code>using namespace std::placeholders;\n\npInstance-&gt;valNamedFlags(operand,\n      \"Statement types\", \n      statementsSubscripts,\n      statementsNames,\n      std::bind(&amp;E::setStatement, e, _1, _2));\n</code></pre>\n\n<p>or you can use lambdas:</p>\n\n<pre><code>pInstance-&gt;valNamedFlags(operand,\n  \"Statement types\", \n  statementsSubscripts,\n  statementsNames,\n  [&amp;](int i, bool b) { e-&gt;setStatement(i, b); });\n</code></pre>\n\n<p>If you <em>must</em> keep it as a simple function, then you'll have to send one which references the right object as a global/static variable.</p>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "edited": false, "score": 0, "creation_date": 1455151489, "post_id": 35323056, "comment_id": 58366058, "body": "Just for completeness let me add that MS VS 2010 takes std::bind and so forth with no problem but my other compiler which is much more of a stickler for standards-conformant syntactic perfection requires std::tr1::bind() and so forth."}], "tags": [], "owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1455128681, "creation_date": 1455128681, "answer_id": 35323056, "question_id": 35321362, "link": "https://stackoverflow.com/questions/35321362/how-declare-a-c-mem-fnmember-function-in-function-declaration/35323056#35323056", "title": "How declare a C++ mem_fn(member_function) in function declaration?", "body": "<p>Got it!!! THANKS ALL!!!</p>\n\n<p>Prototype:</p>\n\n<pre><code>bool valNamedFlags(const OptBlk *operand, const char *description_of_value_or_NULL, const int subscripts[], const char *names[], std::function&lt;void(int,bool)&gt; callBack);\n</code></pre>\n\n<p>Call:</p>\n\n<pre><code>valNamedFlags(..., std::bind(&amp;e::setStatement, this, _1, _2));\n</code></pre>\n\n<p>Actually runs and calls setStatement with the proper arguments.</p>\n"}], "owner": {"reputation": 335, "user_id": 4157812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Cbcaw.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/4157812/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 35321728, "answer_count": 3, "score": 6, "last_activity_date": 1455157457, "creation_date": 1455123574, "last_edit_date": 1455127227, "question_id": 35321362, "link": "https://stackoverflow.com/questions/35321362/how-declare-a-c-mem-fnmember-function-in-function-declaration", "title": "How declare a C++ mem_fn(member_function) in function declaration?", "body": "<p>I understand the basic problem in passing the address of a member function outside of its class. I get the feeling that mem_fn() might be the solution but I am having trouble with the specifics.</p>\n\n<p>I have a member function in class p that is currently declared as</p>\n\n<pre><code>typedef void (*valNamedFlagsCallback)(const int, const bool);\nbool valNamedFlags(const OptBlk *operand, const char *description_of_value_or_NULL, const int subscripts[], const char *names[], valNamedFlagsCallback callBack);\n</code></pre>\n\n<p>In class e I am trying to call valNamedFlags with </p>\n\n<pre><code>pInstance-&gt;valNamedFlags(operand, \"Statement types\", statementsSubscripts, statementsNames, std::mem_fn(&amp;e::setStatement));\n</code></pre>\n\n<p>(I started out without the mem_fn() but of course that has the classic \"pointers to member functions\" problem. I've tried both &amp;e::setStatement and just plain &amp;setStatement.)</p>\n\n<p>FWIW, setStatement is prototyped as</p>\n\n<pre><code>  void setStatement(const int ifcid, const bool isAffirmative);\n</code></pre>\n\n<p>Everything works if I eliminate the mem_fn() and declare setStatement as static. I'm just pointing that out as a way of saying that I have eliminated all of the other possible issues; my only issue is the \"pointers to member functions\" problem. Unfortunately, setStatement() needs to be a member function, not a static.</p>\n\n<p>The specific error I am getting in MS VS 2010 is </p>\n\n<blockquote>\n  <p>bool p::valNamedFlags(const OptBlk *,const char *,const int [],const char *[],p::valNamedFlagsCallback)' : cannot convert parameter 5 from 'std::tr1::_Mem_fn3&lt;_Rx,_Pmf,_Arg0,_Arg1,_Arg2>' to 'p::valNamedFlagsCallback'</p>\n</blockquote>\n\n<p>I would like to keep the callback declaration independent of class e; that is, I do not want to go to </p>\n\n<pre><code>typedef void (*e::valNamedFlagsCallback)(const int, const bool);\n</code></pre>\n\n<p>because I want to keep p more generalized than that.</p>\n\n<p>Is mem_fn() the right solution or am I way off base? If so, how should I be declaring the callback in the valNamedFlags() prototype?</p>\n\n<p>Or should I be pursuing a different approach?</p>\n"}, {"tags": ["android", "c++", "c++11"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455123483, "post_id": 35321215, "comment_id": 58351396, "body": "The guarantee is for a particular object of type <code>steady_clock</code> - it will never decrease its value. You are comparing two different instances of the type."}, {"owner": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455165752, "post_id": 35321215, "comment_id": 58369927, "body": "Thanks for the response. So basically the epoch for steady_clock is system boot right ?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "edited": false, "score": 0, "creation_date": 1455125232, "post_id": 35321308, "comment_id": 58352541, "body": "Thanks for the quick response. When i close the application and start again after say 1 hour still steadiness holds true. But only after i restart the phone the steadiness is lost. Any explanation for this?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "edited": false, "score": 1, "creation_date": 1455125354, "post_id": 35321308, "comment_id": 58352634, "body": "@mechX -- &quot;not required to&quot; is not the same as &quot;required not to&quot;. &lt;g&gt; Most likely, <code>now()</code> calls something in the OS to get the current time, and the OS clock steadily increases. When you reboot, the OS clock restarts, too."}, {"owner": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "edited": false, "score": 0, "creation_date": 1455126622, "post_id": 35321308, "comment_id": 58353478, "body": "Hey, thanks again for the explanation.     This makes my work a bit tricky as i need steadiness even after reboot and i &#39;cannot use system_clock as it is dependent on wall clock&#39; . Any suggestions for a possible solution or work around?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "edited": false, "score": 0, "creation_date": 1455134643, "post_id": 35321308, "comment_id": 58358531, "body": "@mechX -- I&#39;d be inclined to save the current time when the application exits, then load it in when the application restarts and use the difference between the previously-saved time and the currently-indicated time to adjust subsequent times."}, {"owner": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "edited": false, "score": 0, "creation_date": 1455134970, "post_id": 35321308, "comment_id": 58358713, "body": "Hey Pete, the issue with using system_clock is that it can be hacked by changing time from phone settings. My solution fails if the clock is not monotonic."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1455123448, "creation_date": 1455123448, "answer_id": 35321308, "question_id": 35321215, "link": "https://stackoverflow.com/questions/35321215/c11-stdchronosteady-clock-issue-on-android/35321308#35321308", "title": "C++11 std::chrono::steady_clock issue on Android", "body": "<p>The formal requirement for a steady clock is that the result of a call to <code>now()</code> that <strong>happens before</strong> another call to <code>now()</code> is always less than or equal to the result of the second call. The <strong>happens before</strong> relationship only applies to actions within a program run. A steady clock is not required to be steady across different invocations of a program.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 2701057, "user_type": "registered", "profile_image": "https://graph.facebook.com/680576912/picture?type=large", "display_name": "Daniel Weaver", "link": "https://stackoverflow.com/users/2701057/daniel-weaver"}, "is_accepted": false, "score": 1, "last_activity_date": 1498539329, "creation_date": 1498539329, "answer_id": 44772505, "question_id": 35321215, "link": "https://stackoverflow.com/questions/35321215/c11-stdchronosteady-clock-issue-on-android/44772505#44772505", "title": "C++11 std::chrono::steady_clock issue on Android", "body": "<p>On Android, AFAICT steady_clock is the same as (from Java) System.Clock.elapsedRealtime, which resets to zero on boot -- <a href=\"https://developer.android.com/reference/android/os/SystemClock.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/SystemClock.html</a></p>\n\n<p>I'm totally failing to dig up the source code for clock_gettime, though. <a href=\"https://android.googlesource.com/platform/ndk.git/+/43255f3d58b03cd931d29d1ee4e5144e86e875ce/sources/cxx-stl/llvm-libc++/libcxx/src/chrono.cpp#124\" rel=\"nofollow noreferrer\">https://android.googlesource.com/platform/ndk.git/+/43255f3d58b03cd931d29d1ee4e5144e86e875ce/sources/cxx-stl/llvm-libc++/libcxx/src/chrono.cpp#124</a> shows it calling clock_gettime(CLOCK_MONOTONIC), but I'm not sure how to penetrate the veil from there.</p>\n"}], "owner": {"reputation": 13, "user_id": 5909323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca217ec0207b2d39835e8f5d3239c98b?s=128&d=identicon&r=PG&f=1", "display_name": "mechX", "link": "https://stackoverflow.com/users/5909323/mechx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "accepted_answer_id": 35321308, "answer_count": 2, "score": 1, "last_activity_date": 1498539329, "creation_date": 1455123172, "question_id": 35321215, "link": "https://stackoverflow.com/questions/35321215/c11-stdchronosteady-clock-issue-on-android", "title": "C++11 std::chrono::steady_clock issue on Android", "body": "<p>I have been using <strong>std::chrono::steady_clock</strong> for interval calculation in an application i am making for <strong>Android platform.</strong></p>\n\n<p>Code:</p>\n\n<pre><code>// On application start\nauto timeSinceEpoch = std::chrono::steady_clock::now().time_since_epoch();\n\nauto timeInSec = std::chrono::duration_cast&lt;seconds&gt;(timeSinceEpoch).count();\n\nlog(\"On Enter Start Time Point - %lld\", timeInSec);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>On Enter Start Time Point - 521\n</code></pre>\n\n<p><strong>Now i switch off the phone and restart the phone. I run my application and this time Output is:</strong></p>\n\n<pre><code>On Enter Start Time Point - 114\n</code></pre>\n\n<p>As per definition at cppreference.com </p>\n\n<p>\"Class std::chrono::steady_clock represents a monotonic clock. <strong>The time points of this clock cannot decrease as physical time moves forward</strong>.\"</p>\n\n<p><strong>How is the output when i restart the phone giving lesser value?</strong></p>\n\n<p>If anyone has faced this issue please help me out here. Thanks!!</p>\n"}, {"tags": ["c++", "wireshark", "network-protocols", "pcap", "sdp"], "comments": [{"owner": {"reputation": 3986, "user_id": 5237806, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/Zwf7v.jpg?s=128&g=1", "display_name": "chenchuk", "link": "https://stackoverflow.com/users/5237806/chenchuk"}, "edited": false, "score": 0, "creation_date": 1455123401, "post_id": 35321072, "comment_id": 58351336, "body": "im not sure but i think what you are looking for is called &#39;sdp dissector&#39;. dissectors are the protocol level parsers"}, {"owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "reply_to_user": {"reputation": 3986, "user_id": 5237806, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/Zwf7v.jpg?s=128&g=1", "display_name": "chenchuk", "link": "https://stackoverflow.com/users/5237806/chenchuk"}, "edited": false, "score": 0, "creation_date": 1455123711, "post_id": 35321072, "comment_id": 58351552, "body": "I&#39;m building my own disector using a grammar parsing library. But inorder to write the grammar I need to know which protocols can encapsulate the SDP protocol. For example a possible stack is: Ether | IP | UDP | SIP | SDP or Ether | IP | UDP |  MGCP | SDP. But I need to know what other protocols can be headers for sdp"}], "answers": [{"comments": [{"owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "edited": false, "score": 0, "creation_date": 1455273671, "post_id": 35323966, "comment_id": 58426946, "body": "That is very good! One more question, are all these used to initiate RTP streams?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "reply_to_user": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "edited": false, "score": 1, "creation_date": 1455275980, "post_id": 35323966, "comment_id": 58428430, "body": "In theory, all of them could be used to initiate an RTP or other stream.  Whether any do in practice is another matter, but it&#39;s best to assume that any of them can be."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 0, "last_activity_date": 1455131685, "creation_date": 1455131685, "answer_id": 35323966, "question_id": 35321072, "link": "https://stackoverflow.com/questions/35321072/filtering-sdp-packets-using-pcap/35323966#35323966", "title": "Filtering sdp packets using pcap", "body": "<p>If we limit ourselves to the protocols over which SDP can <em>directly</em> run, then, if we look at the current master-branch version of Wireshark:</p>\n\n<ul>\n<li>any protocol that uses a media type to describe its payload could, in principle, carry SDP, with a media type value of \"application/sdp\", although I don't know whether, in practice, you'll ever see, for example, SDP-over-HTTP rather than, say, SDP-over-SIP;</li>\n<li>the BICC bearer control tunneling protocol, specified in ITU-T Recommendation <a href=\"https://www.itu.int/rec/T-REC-Q.1990-200107-I/en\" rel=\"nofollow\">Q.1990</a>, can carry SDP, with the Tunneled Protocol Indicator having the value of 0x20 for SDP;</li>\n<li>the Cisco Session Management protocol can carry SDP;</li>\n<li>the <a href=\"https://en.wikipedia.org/wiki/ISDN_User_Part\" rel=\"nofollow\">ISUP</a> (ISDN User Part) protocol can carry SDP;</li>\n<li>the Gateway Control protocol (<a href=\"http://tools.ietf.org/html/rfc3525\" rel=\"nofollow\">RFC 3525</a>; an earlier version was called MEGACO) and MGCP (<a href=\"http://tools.ietf.org/html/rfc3435\" rel=\"nofollow\">RFC 3435</a>) can carry SDP;</li>\n<li>the Session Announcement Protocol (<a href=\"http://tools.ietf.org/html/rfc2974\" rel=\"nofollow\">RFC 2974</a>) can carry SDP.</li>\n</ul>\n\n<p>Which of those you will see in present-day network traffic is another matter.</p>\n\n<p>As for the protocols on top of which those run, well, most of them run on top of TCP or possibly UDP, or on top of something that ultimately runs on top of TCP or possibly UDP, which means that they will then run on top of IPv4 or IPv6, which means that they will then run on top of any link layer that can transport IPv4 or IPv6, meaning Ethernet and 802.11 and PPP and....</p>\n\n<p>However, ISUP, at least, can run on top of old-fashioned telephony networking stacks, such as the <a href=\"https://en.wikipedia.org/wiki/Signalling_System_No._7\" rel=\"nofollow\">Signaling System No. 7</a> stack; whether it transports SDP when run on those stacks is another matter.</p>\n"}], "owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 35323966, "answer_count": 1, "score": 0, "last_activity_date": 1455131685, "creation_date": 1455122796, "question_id": 35321072, "link": "https://stackoverflow.com/questions/35321072/filtering-sdp-packets-using-pcap", "title": "Filtering sdp packets using pcap", "body": "<p>I want to filter  sdp packets to be able to identify the possible sessions initiations for rtp streams. I'm using pcap library for c++ to read the packets and  I would like to write a parser for sdp packets but I don't know which protocols can encapsulate sdp other than SIP and  MGCP (I mean after UDP). Or If anybody can shed any light on how does wireshark filters/identifys SDP packets.</p>\n"}, {"tags": ["c++", "vector", "segmentation-fault", "sdl", "memory-corruption"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455122870, "post_id": 35320951, "comment_id": 58350932, "body": "You have a copy constructor, but no copy assignment. See <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is the Rule of Three?</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455122981, "post_id": 35320951, "comment_id": 58351010, "body": "Also, it doesn&#39;t make sense to set pointers to NULL in the destructor.  The object is going away anyway, so all you&#39;re doing is wasting cycles.  In addition to that, there is no need to check for NULL when issuing a <code>delete</code> call."}, {"owner": {"reputation": 120, "user_id": 5827506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0f253c60033c84cc24d9cc0e32fa78?s=128&d=identicon&r=PG&f=1", "display_name": "Yk Cheese", "link": "https://stackoverflow.com/users/5827506/yk-cheese"}, "edited": false, "score": 0, "creation_date": 1455123145, "post_id": 35320951, "comment_id": 58351148, "body": "During my research, I read articles saying I should set pointers to NULL after freeing them, but you&#39;re right it doesn&#39;t make much sense in a destructor"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455123664, "post_id": 35320951, "comment_id": 58351524, "body": "@YkCheese You should have tested how your <code>Tile</code> class will hold up in a vector by writing a simple <code>main</code> program that copies, assigns, and destroys <code>Tile</code>s, checking for double-frees and memory leaks.  No need to wait until you use vector to see the problem.  Something like this barebones example: <a href=\"http://ideone.com/M6mX7p\" rel=\"nofollow noreferrer\">ideone.com/M6mX7p</a>"}, {"owner": {"reputation": 120, "user_id": 5827506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0f253c60033c84cc24d9cc0e32fa78?s=128&d=identicon&r=PG&f=1", "display_name": "Yk Cheese", "link": "https://stackoverflow.com/users/5827506/yk-cheese"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455125203, "post_id": 35320951, "comment_id": 58352522, "body": "@BoPersson your advice is correct: It now works. Rewrite it as an answer so I can validate it, please."}, {"owner": {"reputation": 120, "user_id": 5827506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0f253c60033c84cc24d9cc0e32fa78?s=128&d=identicon&r=PG&f=1", "display_name": "Yk Cheese", "link": "https://stackoverflow.com/users/5827506/yk-cheese"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455125401, "post_id": 35320951, "comment_id": 58352660, "body": "@PaulMcKenzie I did do this during my research, but issued something weird so I dropped it. Check it out <a href=\"http://cpp.sh/8gor\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455127482, "post_id": 35320951, "comment_id": 58354004, "body": "Out of curiosity... if <code>Tile::m_imgfile</code> is a <code>std::string</code>, and <code>Tile::init()</code> takes a <code>const std::string&amp;</code>, why does the copy constructor pass it <code>tile.m_imgfile.c_str()</code>, but the standard constructor just passes it the constructor&#39;s <code>std::string</code> argument directly?  Correct me if I&#39;m wrong, but wouldn&#39;t the second line of <code>Tile::init()</code> call <code>std::string</code>&#39;s copy constructor and make a deep copy of the string anyways?  Just curious."}, {"owner": {"reputation": 120, "user_id": 5827506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0f253c60033c84cc24d9cc0e32fa78?s=128&d=identicon&r=PG&f=1", "display_name": "Yk Cheese", "link": "https://stackoverflow.com/users/5827506/yk-cheese"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455134500, "post_id": 35320951, "comment_id": 58358456, "body": "@Justin Time ... That would be me coding at 1am. Thanks for pointing it out..."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455136750, "post_id": 35320951, "comment_id": 58359739, "body": "You&#39;re welcome.  Wasn&#39;t sure if there was some benefit I wasn&#39;t aware of, or anything."}], "owner": {"reputation": 120, "user_id": 5827506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0f253c60033c84cc24d9cc0e32fa78?s=128&d=identicon&r=PG&f=1", "display_name": "Yk Cheese", "link": "https://stackoverflow.com/users/5827506/yk-cheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455219755, "creation_date": 1455122452, "last_edit_date": 1495542670, "question_id": 35320951, "link": "https://stackoverflow.com/questions/35320951/segmentation-faults-double-free-or-corruption-with-vectors-and-sdl", "title": "Segmentation Faults, Double free or corruption with vectors and SDL", "body": "<p>I am attempting to code a basic game engine in c++/SDL. But while testing my first class, I get memory errors:  or <code>Segmentation Fault</code>s, or <code>double free or corruption</code>.</p>\n\n<p>It always crashes in the same way, but than the different errors seem to occur at random.</p>\n\n<p>To demonstrate, compile my source code and execute it with as argument the path to a <code>.bmp</code> image file. When you left click, it adds the sprite to the screen on the position your mouse was. when you right click, any sprite in contact with the one on the mouse is supposed to get erased. But instead, it crashes.</p>\n\n<p>I searched a bit/a bit more/a lot more, looked for issues such as deep vs shallow copy for the pointers used, an so on, but without success.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28131466/double-free-or-corruptionfasttop-error-segmentation-fault-in-c\">This</a> question is only related in the fact that I am using a dynamic array.</p>\n\n<p>My source, all in one file for your convenience (sorry its around 150 lines, I tried to strip it as much as I could and commented it as much as possible :-/ ):</p>\n\n<pre><code>#include &lt;iostream&gt; //system includes\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#include &lt;SDL/SDL.h&gt; //lib includes\n\n//#include \"Tile.h\" //project includes\n\nclass Tile //-------------------------- TILE.H CONTENT ----------------------\n{\n    public:\n        Tile(const std::string &amp;imgFile, const int &amp;x, const int &amp;y);\n\n        Tile(const Tile &amp;tile);\n\n        void draw(SDL_Surface* dest) const;\n\n        void setPos(const int &amp;x, const int &amp;y);\n\n        bool coliding(const Tile &amp;tile) const;\n\n        virtual ~Tile();\n    protected:\n    private:\n        void init(const std::string &amp;imgFile, const int &amp;x, const int &amp;y); //helper func\n\n        SDL_Surface* m_img;\n        SDL_Rect* m_rect;\n        std::string m_imgFile; //for deep copying\n};\n\nTile::Tile(const Tile &amp;tile) // ----------------------- TILE.CPP CONTENT -------------------------\n{\n    init(tile.m_imgFile/*This is to deep copy th img*/, tile.m_rect-&gt;x, tile.m_rect-&gt;y);\n}\n\nTile::Tile(const std::string &amp;imgFile, const int &amp;x, const int &amp;y)\n{\n    init(imgFile, x, y);\n}\n\nvoid Tile::init(const std::string &amp;imgFile, const int &amp;x, const int &amp;y)\n{\n    m_img = SDL_DisplayFormat(SDL_LoadBMP(imgFile.c_str())); // load and optimize sprite\n    m_imgFile = imgFile;\n\n    if (!m_img)\n    {\n        std::cout &lt;&lt; \"Unable to load image: \" &lt;&lt; SDL_GetError() &lt;&lt; std::endl;\n        exit(EXIT_FAILURE);\n    }\n\n    m_rect = new SDL_Rect;\n\n    m_rect-&gt;h = m_img-&gt;h;\n    m_rect-&gt;w = m_img-&gt;w;\n\n    setPos(x, y);\n}\n\nvoid Tile::draw(SDL_Surface* dest) const\n{\n    SDL_BlitSurface(m_img, 0, dest, m_rect);\n}\n\nvoid Tile::setPos(const int &amp;x, const int &amp;y)\n{\n    m_rect-&gt;x = x;\n    m_rect-&gt;y = y;\n}\n\nbool Tile::coliding(const Tile &amp;tile) const\n{\n    int x1 = m_rect-&gt;x;\n    int y1 = m_rect-&gt;y;\n    int x2 = m_rect-&gt;x + m_rect-&gt;w;\n    int y2 = m_rect-&gt;y + m_rect-&gt;h;\n\n    int x3 = tile.m_rect-&gt;x;\n    int y3 = tile.m_rect-&gt;y;\n    int x4 = tile.m_rect-&gt;x + tile.m_rect-&gt;w;\n    int y4 = tile.m_rect-&gt;y + tile.m_rect-&gt;h;\n\n    if ((((x1 &gt;= x3 and x1 &lt;= x4) and (y1 &gt;= y3 and y1 &lt;= y4)) or\n            ((x2 &gt;= x3 and x2 &lt;= x4) and (y2 &gt;= y3 and y2 &lt;= y4)) or\n            ((x1 &gt;= x3 and x1 &lt;= x4) and (y2 &gt;= y3 and y2 &lt;= y4)) or\n            ((x2 &gt;= x3 and x2 &lt;= x4) and (y1 &gt;= y3 and y1 &lt;= y4)))\n            or\n            (((x3 &gt;= x1 and x3 &lt;= x2) and (y3 &gt;= y1 and y3 &lt;= y2)) or\n             ((x4 &gt;= x1 and x4 &lt;= x2) and (y4 &gt;= y1 and y4 &lt;= y2)) or\n             ((x3 &gt;= x1 and x3 &lt;= x2) and (y4 &gt;= y1 and y4 &lt;= y2)) or\n             ((x4 &gt;= x1 and x4 &lt;= x2) and (y3 &gt;= y1 and y3 &lt;= y2))))\n        return(true);\n    else return(false);\n\n}\n\nTile::~Tile()\n{\n    if(m_img != NULL)\n    {\n        SDL_FreeSurface(m_img);\n        m_img = NULL;\n    }\n\n    if(m_rect != NULL)\n    {\n        delete m_rect;\n        m_rect = NULL;\n    }\n\n    //dtor\n}\n\n\nusing namespace std;\n\nint main (int argc, char **argv) //---------------------- MAIN.CPP ------------------------\n{\n    if(argc != 2) //prog name + arg\n    {\n        cout &lt;&lt; \"Needs EXACTLY one argument: file for sprite.\\n\";\n        return EXIT_FAILURE;\n    }\n\n    // initialize SDL video\n    if ( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 )\n    {\n        cout &lt;&lt; \"Unable to init SDL: \" &lt;&lt; SDL_GetError() &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n\n    // make sure SDL cleans up before exit\n    atexit(SDL_Quit);\n\n    // create a new window\n    SDL_Surface* screen = SDL_SetVideoMode(640, 480, 16,\n                                           SDL_HWSURFACE|SDL_DOUBLEBUF);\n    if ( !screen ) //if screen is a NULL pointer:\n    {\n        cout &lt;&lt; \"Unable to set 640x480 video: \" &lt;&lt; SDL_GetError() &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n\n    //create \"mouse\" sprite and container for the others\n    vector&lt;Tile&gt; tiles;\n    Tile tile(argv[1], 0, 0);\n\n    // program main loop\n    bool done = false;\n    bool click_l = false;\n    bool click_r = false;\n\n    while (!done)\n    {\n        // message processing loop\n        SDL_Event event;\n        while (SDL_PollEvent(&amp;event))\n        {\n            // check for messages\n            switch (event.type)\n            {\n                // exit if the window is closed\n                case SDL_QUIT:\n                    done = true;\n                    break;\n\n                // check for keypresses\n                case SDL_KEYDOWN:\n                    {\n                        switch(event.key.keysym.sym) //if its a key and its...\n                        {\n                            case SDLK_ESCAPE: //escape: exit\n                                done = true;\n                                break;\n\n                            case SDLK_r: //r: empty screen\n                                tiles.clear();\n                                break;\n\n                            default: //something else: do nothing\n                                break;\n                        } //end of key switch\n                        break;\n                    }\n\n                case SDL_MOUSEMOTION: //if the mouse moves\n                    tile.setPos(event.motion.x, event.motion.y); //move the mouse tile to it\n                    break;\n\n                case SDL_MOUSEBUTTONDOWN: //update click bools\n                    if(event.button.button == SDL_BUTTON_LEFT)\n                        click_l = true;\n                    else if(event.button.button == SDL_BUTTON_RIGHT)\n                        click_r = true;\n                    break;\n\n                case SDL_MOUSEBUTTONUP://update click bools\n                    if(event.button.button == SDL_BUTTON_LEFT)\n                        click_l = false;\n                    else if(event.button.button == SDL_BUTTON_RIGHT)\n                        click_r = false;\n                    break;\n            } // end switch\n        } // end of message processing\n\n        if(click_l) //add a tile on screen if left click\n        {\n            tiles.push_back(tile);\n        }\n        else if(tiles.size()&gt;=1 and click_r) //else if right click\n        {\n            for(size_t i = 0; i &lt; tiles.size(); i++) //go through container\n            {\n                if(tiles[i].coliding(tile)) //if a tile is coliding with mouse\n                {\n                    tiles.erase(tiles.begin() + i--); //delete it, decrement i to avoid skiping a tile\n                }\n            }\n        }\n\n        // DRAWING STARTS HERE\n        // clear screen\n        SDL_FillRect(screen, 0, SDL_MapRGB(screen-&gt;format, 255, 255, 255));\n\n        // draw bitmaps\n        if(tiles.size()&gt;=1) //draw all tiles in conatainer\n        {\n            for(int i=tiles.size(); i-- &gt; 0;)\n            {\n                tiles[i].draw(screen);\n            }\n        }\n\n        tile.draw(screen); //draw tile on mouse\n        // DRAWING ENDS HERE\n\n        // finally, update the screen :)\n        SDL_Flip(screen);\n    } // end main loop\n\n    // if reaches here, no error occured\n    cout &lt;&lt; endl &lt;&lt; \"Exited cleanly\" &lt;&lt; endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Press <code>r</code> to empty the screen (That works without crashing, for some reason).</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1455121996, "post_id": 35320734, "comment_id": 58350242, "body": "Does it compile?  Sometimes IntelliSense is wrong."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 3, "creation_date": 1455122084, "post_id": 35320734, "comment_id": 58350302, "body": "There&#39;s a <a href=\"http://stackoverflow.com/questions/9258525/can-constexpr-function-evaluation-do-tail-recursion-optimization\">recursion limit in constexpr functions</a>, apparently. What does the Output window show? (Usually it has more context than what shows in the Error List.)"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1455122090, "post_id": 35320734, "comment_id": 58350313, "body": "It does not compile. I&#39;ve just added the error messages at the bottom of the post."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1455122191, "post_id": 35320734, "comment_id": 58350379, "body": "@Cameron I think you&#39;re right. If I change it to 300 instead of 1 million, IntelliSense still complains, but the compile error goes away."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1455122262, "post_id": 35320734, "comment_id": 58350432, "body": "@KarolyHorvath It resolves to a number that&#39;s slightly less than <code>1&lt;&lt;64</code>. It happens to be a prime number, hence my use of it."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1455122448, "post_id": 35320734, "comment_id": 58350577, "body": "@Xirema: that and the overflows(=wrapping) freak me out. Try to write code that documents these facts ;)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455131788, "post_id": 35320734, "comment_id": 58356692, "body": "BTW, in c++14, you may do the loop and avoiding recursion for <code>constexpr</code> function."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455132882, "post_id": 35320734, "comment_id": 58357422, "body": "@Jarod42 Not in Visual Studio, unfortunately. That functionality still isn&#39;t supported by VS2015."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455134200, "post_id": 35320734, "comment_id": 58358252, "body": "You may use logarithm complexity to code <code>power_function</code> instead of linear to solve your problem."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1455134468, "post_id": 35320734, "comment_id": 58358432, "body": "Like <a href=\"https://ideone.com/kZ7Api\" rel=\"nofollow noreferrer\">that</a>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1456260179, "post_id": 35320734, "comment_id": 58861885, "body": "@Jarod42 Just letting you know that I ended up using your code for the final version of my code, but I had to fix a typo to do so: the recursive call to <code>power_function</code> needed to take <code>prime * prime</code>, not <code>prime</code>."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1455122696, "post_id": 35320994, "comment_id": 58350810, "body": "Not true. The standard would never set an upper bound. <a href=\"http://stackoverflow.com/questions/9258525/can-constexpr-function-evaluation-do-tail-recursion-optimization\" title=\"can constexpr function evaluation do tail recursion optimization\">stackoverflow.com/questions/9258525/&hellip;</a>"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 1, "creation_date": 1455122902, "post_id": 35320994, "comment_id": 58350956, "body": "You are right. The 512 limit is implemented in gcc and clang. I assumed it was required in the standard, but it never says that."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 1, "creation_date": 1455129900, "post_id": 35320994, "comment_id": 58355514, "body": "gcc and clang both allow this option to increase the recursion depth: <code>-fconstexpr-depth=&lt;value&gt;</code>, but it looks like Visual Studio does not support that option."}], "tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": true, "score": 3, "last_activity_date": 1488486938, "last_edit_date": 1488486938, "creation_date": 1455122587, "answer_id": 35320994, "question_id": 35320734, "link": "https://stackoverflow.com/questions/35320734/function-call-must-have-a-constant-value-in-a-constant-expression/35320994#35320994", "title": "&quot;function call must have a constant value in a constant expression&quot;", "body": "<p>There is a recursion limit of 512 for <code>constexpr</code> in the gcc and clang compilers. Because the compiler interprets <code>constexpr</code> functions as inline functions (C++ Standard 7.1.5 subsec. 2), they must be resolved at compile time. If after 512 iterations the compiler cannot resolve the expression to a constant, it halts compilation and raises an error. The standard <em>recommends</em> a minimum of 512 for recursive <code>constexpr</code> function invocations, but does not <em>require</em> it (See Annex B [implimits] 2.38 in the standard).</p>\n\n<p>This limit may be applied in Visual Studio, but I am unsure.</p>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5168, "favorite_count": 0, "accepted_answer_id": 35320994, "answer_count": 1, "score": 4, "last_activity_date": 1488486938, "creation_date": 1455121914, "last_edit_date": 1455122055, "question_id": 35320734, "link": "https://stackoverflow.com/questions/35320734/function-call-must-have-a-constant-value-in-a-constant-expression", "title": "&quot;function call must have a constant value in a constant expression&quot;", "body": "<p>I have the following code:</p>\n\n<pre><code>constexpr unsigned long long power_function(const unsigned long long prime, const unsigned long long iterations) {\n    return iterations &gt; 0 ? prime * power_function(prime, iterations - 1) : prime;\n}\n\n/* Inside my Class Definition*/\n\nprivate:\n    static constexpr unsigned long long prime = power_function(-363, 1'000'000); //Error occurs here\n</code></pre>\n\n<p>IntelliSense complains that <code>power_function</code> is being used incorrectly. But for the life of me, I can't work out what the issue is. I'm using Visual Studio 2015, FYI.</p>\n\n<p>Error messages:</p>\n\n<pre><code>Error   C2131   expression did not evaluate to a constant   Basic Server    c:\\&lt;snip&gt;   28  \nError   C2131   expression did not evaluate to a constant   Basic Server    c:\\&lt;snip&gt;   33  \n</code></pre>\n\n<p>line 28 corresponds to the line where the return function is, and line 33 corresponds to the line where the constexpr is defined.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1455121921, "post_id": 35320681, "comment_id": 58350183, "body": "For an easy life, use <code>std::vector</code>, and <code>std::sort</code>. Modern compilers will not take an unnecessary deep copy if you <code>return</code> a <code>std::vector</code>."}, {"owner": {"reputation": 541, "user_id": 3713547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p4oej.jpg?s=128&g=1", "display_name": "drglove", "link": "https://stackoverflow.com/users/3713547/drglove"}, "edited": false, "score": 1, "creation_date": 1455122066, "post_id": 35320681, "comment_id": 58350292, "body": "He says in the question that &quot;I have to use the prototype exactly as it is written&quot;."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 6, "creation_date": 1455122075, "post_id": 35320681, "comment_id": 58350297, "body": "C++ is case-sensitive. <code>sort_array</code> is a different function from <code>sort_Array</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1455122320, "post_id": 35320681, "comment_id": 58350482, "body": "Unrelated but, if you are sorting the input array, do you need to return a newed array too? This is a potential memory leak."}, {"owner": {"reputation": 13, "user_id": 5665128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002134996474586/picture?type=large", "display_name": "Willard Laxton", "link": "https://stackoverflow.com/users/5665128/willard-laxton"}, "edited": false, "score": 0, "creation_date": 1455122497, "post_id": 35320681, "comment_id": 58350626, "body": "I think I use the same cases for the variable sorted_Array. I do all my variables in that format. I also tried initializing size to 0 as a sort of place holder until it gets initialized later but I am still having the same issues"}, {"owner": {"reputation": 13, "user_id": 5665128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002134996474586/picture?type=large", "display_name": "Willard Laxton", "link": "https://stackoverflow.com/users/5665128/willard-laxton"}, "edited": false, "score": 0, "creation_date": 1455122565, "post_id": 35320681, "comment_id": 58350701, "body": "I also have to return a dynamically allocated array as per the assignment. I will delete it later."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455122573, "post_id": 35320681, "comment_id": 58350709, "body": "Sort the array sent to you, and pass back a pointer to the array that was sent to you.  There is no need to allocate for another array (unless the assignment you were given says so).  Also, <code>int size; int initial_Array[size];</code> is not standard.  You cannot declare arrays in C++ using a runtime value for the number of entries."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1455122213, "post_id": 35320840, "comment_id": 58350393, "body": "This is also a VLA which is not standard."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1455122418, "post_id": 35320840, "comment_id": 58350552, "body": "&quot;Because you...&quot; What? That leads to a linker error? I know it is UB, but still..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1455122636, "post_id": 35320840, "comment_id": 58350765, "body": "Still, most of your &quot;answer&quot; is irrelevant to the question being asked."}, {"owner": {"reputation": 13, "user_id": 5665128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002134996474586/picture?type=large", "display_name": "Willard Laxton", "link": "https://stackoverflow.com/users/5665128/willard-laxton"}, "edited": false, "score": 0, "creation_date": 1455122734, "post_id": 35320840, "comment_id": 58350831, "body": "Oh wow I am an idiot. I didn&#39;t even notice that. I even looked to make sure. I have been looking at that for hours. I just change it and the error went away. Thank you for your help"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1455122508, "last_edit_date": 1455122508, "creation_date": 1455122153, "answer_id": 35320840, "question_id": 35320681, "link": "https://stackoverflow.com/questions/35320681/returning-a-pointer-from-a-function-c/35320840#35320840", "title": "Returning a Pointer from a function c++", "body": "<p>You define <code>intial_Array</code> with an uninitialised <code>size</code>:</p>\n\n<pre><code>int size;\nint initial_Array[size];\n</code></pre>\n\n<p>Which is UB.</p>\n\n<p>But your error comes from calling <code>sort_Array</code> when you've defined <code>sort_array</code></p>\n"}], "owner": {"reputation": 13, "user_id": 5665128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002134996474586/picture?type=large", "display_name": "Willard Laxton", "link": "https://stackoverflow.com/users/5665128/willard-laxton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 35320840, "answer_count": 1, "score": -1, "last_activity_date": 1455122959, "creation_date": 1455121815, "question_id": 35320681, "link": "https://stackoverflow.com/questions/35320681/returning-a-pointer-from-a-function-c", "title": "Returning a Pointer from a function c++", "body": "<p>When I try to compile in C++ it says that there is an undefined reference to sort_Array(int *, int). I have been messing with this for about an hour and I can't figure out why I am getting this error. I thought it was telling me to use a pointer. I have to use the prototype exactly as it is written for the assignment so i can't change the array to a pointer or pass it by reference like I thought it was telling me to. I also have to get the size of the array from the user. Could this be a situation where I need to dynamically allocate the array. It crossed my mind, but I am not sure.</p>\n\n<p>This is the prototype</p>\n\n<pre><code>    int *sort_Array(int [], int);\n</code></pre>\n\n<p>This is how I am trying to use it</p>\n\n<pre><code>    int size;\n    int initial_Array[size];\n        cout &lt;&lt; \"What is the size of your array?\" &lt;&lt; endl;\n        cin &gt;&gt; size;\n        cin.ignore();\n\n    sort_Array(initial_Array, size);\n</code></pre>\n\n<p>This is the actual function</p>\n\n<pre><code>    int *sort_array(int unsorted_Array[], int size)\n    {\n        int *sorted_Array, i;\n        sorted_Array = new int[size];\n\n    //Function for sorting the array.\n\n        selection_Sort(unsorted_Array, size);\n\n    //Copies the newly sorted unsorted array variable to the sorted array varible.\n\n        for(i=0; i&lt;size; i++)\n       {\n            unsorted_Array[i] = sorted_Array[i];\n       }\n\n     return sorted_Array;\n       }\n</code></pre>\n"}, {"tags": ["c++", "placement-new"], "comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 2, "creation_date": 1455125280, "post_id": 35320468, "comment_id": 58352573, "body": "Why do you need this? It does not seem right."}, {"owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1455205789, "post_id": 35320468, "comment_id": 58394870, "body": "@ZDF As it turns out, as I looked at the problem more closely it turns out I likely don&#39;t. So the answer to your question seems fairly clear - inexperience... :)"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1455121474, "creation_date": 1455121474, "answer_id": 35320551, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new/35320551#35320551", "title": "How to determine if object has been placed using placement new", "body": "<p>The language doesn't provide any built-in mechanism to provide that information, at least none that I know of. You'll have to add your own bookkeeping code to track such information.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1455121480, "creation_date": 1455121480, "answer_id": 35320552, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new/35320552#35320552", "title": "How to determine if object has been placed using placement new", "body": "<p>You could maintain a <code>static</code> table of <code>this</code> pointer values which you mutate in the constructors and destructor to <code>MyClass</code>. Then check this against a particular value of <code>buffer</code> when you need to.</p>\n\n<p>Don't forget to consider the repercussions of move semantics. Will be tricky to get right.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455121957, "post_id": 35320640, "comment_id": 58350205, "body": "Why should one use statistical approach when a flag yields guaranteed behavior?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455122125, "post_id": 35320640, "comment_id": 58350332, "body": "@Cheersandhth.-Alf It seems that there is some trivial solution to the problem that you are talking about. I don&#39;t get it; maybe you should add an answer to explain what you mean by &quot;a flag&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455125076, "post_id": 35320640, "comment_id": 58352439, "body": "I hate classes which have a different (greater) size in debug builds"}], "tags": [], "owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "is_accepted": false, "score": 2, "last_activity_date": 1455121729, "creation_date": 1455121729, "answer_id": 35320640, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new/35320640#35320640", "title": "How to determine if object has been placed using placement new", "body": "<p>For debugging purposes, you can add a special member <code>signature</code> to <code>MyClass</code> and set its value to a constant </p>\n\n<pre><code>class MyClass {\n   public:\n      MyClass() : signature(762347562374) {}\n      bool isValidSignature() const { return signature==762347562374; }\n   private:\n      unsigned long long signature;\n      &lt;other members&gt;\n};\n</code></pre>\n\n<p>Then, check it as follows:</p>\n\n<pre><code>char *buffer  = new char[sizeof(MyClass)]; //pre-allocated buffer\nMyClass *my_class = new (buffer) MyClass; //put da class there \nif (my_class-&gt;isValidSignature())\n   &lt;this means that the object has been allocated correctly, with a high probability&gt;\n}\n</code></pre>\n\n<p>You can put everything that's related to signature, inside a proper <code>#ifdef</code> so that is only runs in debug mode.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455121886, "post_id": 35320663, "comment_id": 58350157, "body": "How does this compare to just a <code>bool</code> variable directly?"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455122189, "post_id": 35320663, "comment_id": 58350378, "body": "Just thought it was a nice way to wrap things up."}], "tags": [], "owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "is_accepted": false, "score": 1, "last_activity_date": 1455122713, "last_edit_date": 1455122713, "creation_date": 1455121773, "answer_id": 35320663, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new/35320663#35320663", "title": "How to determine if object has been placed using placement new", "body": "<p>Not without tracking it yourself.</p>\n\n<p>One solution would be to create a wrapper around <a href=\"http://en.cppreference.com/w/cpp/memory/allocator\" rel=\"nofollow\">std::allocator</a>.</p>\n\n<pre><code>template&lt;class T&gt;\nclass MyAllocator\n{\npublic:\n    T* allocate(std::size_t count = 1) \n    { \n        return allocator_.allocate(count);\n    }\n\n    template&lt;class... Args&gt;\n    void construct(T* ptr, Args&amp;&amp;... args)\n    {\n        allocator_.construct(ptr, std::forward&lt;Args&gt;(args)...);\n        allocated_ = true;\n    }\n\n    bool IsAllocated() const\n    {\n        return allocated_;\n    }\n\nprivate:\n    std::allocator&lt;T&gt; allocator_;\n    bool allocated_;\n\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 1, "last_activity_date": 1455122666, "creation_date": 1455122666, "answer_id": 35321028, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new/35321028#35321028", "title": "How to determine if object has been placed using placement new", "body": "<p>Original code:</p>\n\n<pre><code>char *buffer  = new char[sizeof(MyClass)]; //pre-allocated buffer\nMyClass *my_class = new (buffer) MyClass; //put da class there \n</code></pre>\n\n<p>To determine <em>dynamically</em> whether the placement <code>new</code> has been performed information about it has to be stored somewhere. The language does not provide that service. So you have to do it yourself, in one of two possible main ways:</p>\n\n<ul>\n<li>Storing the info in the buffer.<br>\nFor this case the buffer has to be initialized at allocation. E.g. just add <code>()</code> at the end of your <code>new</code> expression. Otherwise there is no way to guarantee that the buffer contents don't look like an object. Two sub-cases:\n\n<ol>\n<li>By adding room for a flag in the buffer.</li>\n<li>By having the flag as a member of the object.<br>\nIn the case of a polymorphic class there will in practice be a non-zero vtable pointer, which can serve as flag.</li>\n</ol></li>\n<li>Storing the info externally.<br>\nFor this case the buffer does not need to be initialized at allocation. There are a zillion plus some possibilities, including\n\n<ol>\n<li>A simple <code>bool</code> variable.</li>\n<li>A collection of pointers to all such objects.</li>\n<li>An audible signal emitted to a chimpanzee, which is later queried.</li>\n</ol></li>\n</ul>\n"}], "owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 35321028, "answer_count": 5, "score": 5, "last_activity_date": 1455122713, "creation_date": 1455121278, "question_id": 35320468, "link": "https://stackoverflow.com/questions/35320468/how-to-determine-if-object-has-been-placed-using-placement-new", "title": "How to determine if object has been placed using placement new", "body": "<p>Using the placement new syntax, I should be able to do something like this:</p>\n\n<pre><code>char *buffer  = new char[sizeof(MyClass)]; //pre-allocated buffer\nMyClass *my_class = new (buffer) MyClass; //put da class there \n</code></pre>\n\n<p>Now suppose I just do the first line, but not the second. Is there a way that it can be determined in code whether the buffer has been allocated appropriately, but no object of type MyClass has yet been instantiated there?</p>\n"}, {"tags": ["c++", "doxygen", "template-specialization"], "comments": [{"owner": {"reputation": 454, "user_id": 682537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d9841d5c680d13c0dcd8d90098f2e63?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/682537/jonathan"}, "edited": false, "score": 0, "creation_date": 1455122003, "post_id": 35320213, "comment_id": 58350245, "body": "possible duplicate of: <a href=\"http://stackoverflow.com/questions/20979469/template-specialisation-of-a-static-function-is-shown-in-doxygen-genered-documen\" title=\"template specialisation of a static function is shown in doxygen genered documen\">stackoverflow.com/questions/20979469/&hellip;</a>"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 454, "user_id": 682537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d9841d5c680d13c0dcd8d90098f2e63?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/682537/jonathan"}, "edited": false, "score": 0, "creation_date": 1455125177, "post_id": 35320213, "comment_id": 58352500, "body": "it&#39;s not a duplicate of that question, because you can&#39;t /** @cond */ just the specialization, you have to ignore the entire struct using that method. I still want <code>struct unit_traits</code> to be documented, I just don&#39;t want it to show the specialization."}], "answers": [{"comments": [{"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455124643, "post_id": 35321119, "comment_id": 58352162, "body": "I don&#39;t want to skip the entire definition, I just want the part between the &lt;..&gt; not to show up."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455125288, "post_id": 35321119, "comment_id": 58352578, "body": "It&#39;s the preprocessor. You are not constrained to put it around complete definitions. If you use it to surround <i>anything</i>, the compiler won&#39;t mind."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455125983, "post_id": 35321119, "comment_id": 58353066, "body": "check out the update to the question. It either doesn&#39;t work in the case or I&#39;m using it wrong."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455128498, "post_id": 35321119, "comment_id": 58354666, "body": "I understand your question less and less, I must say - in particular the relationship to your comment above. At some point, you must have a general definition of the class. You can document that if you want. If there&#39;s any specialization you don&#39;t want DoxyGen to see, just wrap it up completely in the preprocessor directive. Not sure why an &quot;end case of a template recursion&quot;  would have to do with &quot; the part between the &lt;..&gt; not to show up&quot;."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455290635, "post_id": 35321119, "comment_id": 58438185, "body": "the unspecialized version of the traits class would be <code>template&lt;typename&gt; unit_traits;</code>. It wouldn&#39;t include any of the member typedefs, and so documenting that and ignoring the specialization won&#39;t help. What I&#39;d like to do, which maybe the answer is &#39;you can&#39;t&#39;, is document the specialized version of the class but have it show up in the docs as <code>unit_traits</code> instead of <code>unit_traits&lt;lots characters used for the specialization that the user doesn&#39;t care about&gt;</code>"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1455292167, "post_id": 35321119, "comment_id": 58439306, "body": "@NicolasHolthaus OK, I think I understand it now. See update."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 1, "creation_date": 1455293451, "post_id": 35321119, "comment_id": 58440220, "body": "@AmiTavory -- There are lots of people at this site who would dispute your claim that &quot;heavily-templated C++ is borderline undocumentable&quot; (or my claim that heavily templated C++ is borderline unmaintainable). I can grok those templates (usually). Most people, however, when they look at my templates do something like this: (\u2609_\u2609)"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1455293520, "post_id": 35321119, "comment_id": 58440267, "body": "@DavidHammen That&#39;s the spitting image of me looking at boost source code :-)"}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1455293593, "post_id": 35321119, "comment_id": 58440319, "body": "@AmiTavory -- Try looking at eigen. Underneath the hood, it&#39;s templates from here to there. Ignore all the template magic and it just works. It&#39;s magic!"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1455293711, "post_id": 35321119, "comment_id": 58440416, "body": "@DavidHammen I&#39;m sure you&#39;re right. Working my way through <a href=\"http://www.linux.fm/\" rel=\"nofollow noreferrer\">linux.fm</a> first, though :-)"}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 1, "last_activity_date": 1545486623, "last_edit_date": 1545486623, "creation_date": 1455122911, "answer_id": 35321119, "question_id": 35320213, "link": "https://stackoverflow.com/questions/35320213/hide-template-specialization-parameters-in-doxygen-output/35321119#35321119", "title": "Hide Template Specialization Parameters in Doxygen Output", "body": "<p>According to the <a href=\"http://www.doxygen.nl/manual/faq.html\" rel=\"nofollow noreferrer\">doxygen FAQ</a>, you can use the preprocessor to basically have doxygen see a different version of your code (whether this is a good idea or not is a separate question).</p>\n\n<p>So, presumably you could do something like this:</p>\n\n<pre><code>/** Doxygen doc for general-form unit_traits. */\ntemplate&lt;typename General&gt;\nclass unit_traits;\n</code></pre>\n\n<p>Now, you can fool doxygen (again, caveat at the end) like this:</p>\n\n<pre><code>#ifndef DOXYGEN_SHOULD_SKIP_THIS\n// Code actually being built.\ntemplate&lt;&gt;\nclass unit_traits&lt;int&gt;\n#else // DOXYGEN_SHOULD_SKIP_THIS\n/** Doxygen comment for the int case. */\nclass unit_traits\n#endif // DOXYGEN_SHOULD_SKIP_THIS\n{\n....\n};\n</code></pre>\n\n<p>Your compiler will be fine with this. Regarding doxygen, it will either work or not - since it's not really valid C++ code to have <code>unit_traits</code> both template and not, doxygen will either buy it or not, and even if it does, next version might not.</p>\n\n<p>Clearly, you could do something like this, though:</p>\n\n<pre><code>#ifndef DOXYGEN_SHOULD_SKIP_THIS\n// Code actually being built.\ntemplate&lt;&gt;\nclass unit_traits&lt;int&gt;\n#else // DOXYGEN_SHOULD_SKIP_THIS\n/** Doxygen comment for the int case. */\nclass int_unit_traits\n#endif // DOXYGEN_SHOULD_SKIP_THIS\n{\n...\n};\n</code></pre>\n\n<p>Since both preprocessor paths are valid C++ (well, sort of), your compiler <em>and</em> doxygen should be happy.</p>\n\n<hr>\n\n<p><strong>Caveat</strong></p>\n\n<p>Personally, I think that the fact that you're trying to \"fool\" doxygen indicates that there's a conceptual problem. Heavily-templated C++ is borderline undocumentable, and doxygen does a better job at it than I could do in a million years, but it's still problematic.</p>\n\n<p>In similar cases, I usually just place all documentation, for the general case and the specializations - in a doxygen comment for the general case. I make doxygen ignore the specializations (using the preprocessor), and just put a non-doxygen comment on each saying that the documentation is in the general case. Admittedly, this is crappy too :-)</p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "accepted_answer_id": 35321119, "answer_count": 1, "score": 1, "last_activity_date": 1545486623, "creation_date": 1455120603, "last_edit_date": 1455292435, "question_id": 35320213, "link": "https://stackoverflow.com/questions/35320213/hide-template-specialization-parameters-in-doxygen-output", "title": "Hide Template Specialization Parameters in Doxygen Output", "body": "<p>I'm writing a library which makes extensive use of meta-programing, and has traits classes such as </p>\n\n<pre><code>/// Doxygen comments...\ntemplate&lt;class T&gt;\nstruct unit_traits&lt;T, typename void_t&lt;\n    typename T::base_unit_type,\n    typename T::conversion_ratio,\n    typename T::pi_exponent_ratio,\n    typename T::translation_ratio&gt;::type&gt;\n{\n    typedef typename T::base_unit_type base_unit_type;          ///&lt; typedef documentation\n    typedef typename T::conversion_ratio conversion_ratio;      ///&lt; typedef documentation\n    typedef typename T::pi_exponent_ratio pi_exponent_ratio;    ///&lt; typedef documentation\n    typedef typename T::translation_ratio translation_ratio;    ///&lt; typedef documentation\n};\n</code></pre>\n\n<p>However, the specialization is just an implementation detail (there are other places where specializations are used to end recursions, etc), and it clutters the doxygen output, since the library user only really needs to know that <code>unit_traits&lt;someType&gt;::...</code> is available. Is there some way to hide the specializations parameters in the documentation, preferably without creating dummy documentation targets?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Just to be clear, I've attempted the following, and they do not hide the specialization:</p>\n\n<pre><code>    template&lt;class T&gt;\n    struct unit_traits\n/** @cond */\n        &lt;T, typename void_t&lt;\n        typename T::base_unit_type,\n        typename T::conversion_ratio,\n        typename T::pi_exponent_ratio,\n        typename T::translation_ratio&gt;::type&gt;\n/** @endcond */\n    {\n        typedef typename T::base_unit_type base_unit_type;\n        typedef typename T::conversion_ratio conversion_ratio;\n        typedef typename T::pi_exponent_ratio pi_exponent_ratio;\n        typedef typename T::translation_ratio translation_ratio;\n    };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template&lt;class T&gt;\n        struct unit_traits\n    #ifndef DOXYGEN_SHOULD_SKIP_THIS\n            &lt;T, typename void_t&lt;\n            typename T::base_unit_type,\n            typename T::conversion_ratio,\n            typename T::pi_exponent_ratio,\n            typename T::translation_ratio&gt;::type&gt;\n    #endif\n        {\n            typedef typename T::base_unit_type base_unit_type;              \n            typedef typename T::conversion_ratio conversion_ratio;                                      \n            typedef typename T::pi_exponent_ratio pi_exponent_ratio;                                \n            typedef typename T::translation_ratio translation_ratio;                                    \n        };\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "edited": false, "score": 2, "creation_date": 1455120953, "post_id": 35320272, "comment_id": 58349467, "body": "The Visual Studio contains &quot;wizards&quot; that help you manage the code, like adding a message handler in MFC. 10-15 years ago the source contained lots of markers to make it easier for the IDE to recognize certain parts. Nowadays it seems to work anyway."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 2, "last_activity_date": 1455120739, "creation_date": 1455120739, "answer_id": 35320272, "question_id": 35320149, "link": "https://stackoverflow.com/questions/35320149/what-does-afx-msg-do-mfc/35320272#35320272", "title": "What does &#39;afx_msg&#39; do? - MFC", "body": "<p>The code in <code>afxwin.h</code> is just:</p>\n\n<pre><code>// Type modifier for message handlers\n#ifndef afx_msg\n#define afx_msg         // intentional placeholder\n#endif\n</code></pre>\n\n<p>it is, or might have been, a help for the wizards to recognize the code.</p>\n\n<p>It doesn't do anything else.</p>\n"}, {"comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "edited": false, "score": 0, "creation_date": 1455122386, "post_id": 35320329, "comment_id": 58350530, "body": "Can&#39;t think of other function modifiers offhand, but MFC does define a large number of macros. See for example <a href=\"https://msdn.microsoft.com/en-us/library/f2dch7fb.aspx\" rel=\"nofollow noreferrer\">MFC Macros and Globals</a> in particular the sections about <a href=\"https://msdn.microsoft.com/en-us/library/f16k9f4y.aspx\" rel=\"nofollow noreferrer\">Run-Time Object Model Services</a>, <a href=\"https://msdn.microsoft.com/en-us/library/e583tzca.aspx\" rel=\"nofollow noreferrer\">Exception Processing</a>, <a href=\"https://msdn.microsoft.com/en-us/library/87zae4a3.aspx\" rel=\"nofollow noreferrer\">ATL and MFC String Conversion Macros</a> etc."}], "tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 5, "last_activity_date": 1455120889, "creation_date": 1455120889, "answer_id": 35320329, "question_id": 35320149, "link": "https://stackoverflow.com/questions/35320149/what-does-afx-msg-do-mfc/35320329#35320329", "title": "What does &#39;afx_msg&#39; do? - MFC", "body": "<p><code>afx_msg</code> is an empty macro #define'd in <code>afxwin.h</code>:</p>\n\n<pre><code>// Type modifier for message handlers\n#ifndef afx_msg\n#define afx_msg         // intentional placeholder\n#endif\n</code></pre>\n\n<p>The code will compile and work the same with or without <code>afx_msg</code>, but it is used by convention as an indicator that the function is a message handler, and is required if using the class wizard, per <a href=\"https://msdn.microsoft.com/en-us/library/0812b0wa.aspx\" rel=\"noreferrer\">TN006: Message Maps</a>:</p>\n\n<blockquote>\n  <p>ClassWizard requires that you use the afx_msg keyword in your message map handler declarations.</p>\n</blockquote>\n"}], "owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7819, "favorite_count": 0, "accepted_answer_id": 35320329, "answer_count": 2, "score": 6, "last_activity_date": 1455120889, "creation_date": 1455120448, "question_id": 35320149, "link": "https://stackoverflow.com/questions/35320149/what-does-afx-msg-do-mfc", "title": "What does &#39;afx_msg&#39; do? - MFC", "body": "<p><strong>Disclaimer:</strong> I'm new to MFC and have basic knowledge of c++</p>\n\n<p><strong>My question:</strong> </p>\n\n<p>I ran into the following code that was auto generated by Visual studio: </p>\n\n<p><code>afx_msg void OnBnClickedOk();</code></p>\n\n<p>what does <code>afx_msg</code> do and are there other like that?</p>\n\n<hr>\n\n<p>As far as my knowledge goes, there are only a handful of access specifiers like : <code>public</code>, <code>private</code>, <code>protected</code>. There's also <code>virtual</code>.</p>\n\n<p>I found an answer <a href=\"http://forums.codeguru.com/showthread.php?68767-what-is-afx_msg-When-I-need-it\" rel=\"noreferrer\">here</a> but it is still not clear to me.</p>\n"}, {"tags": ["c++", "templates", "smart-pointers"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1455121641, "post_id": 35320086, "comment_id": 58349979, "body": "Note that <code>throw()</code> is deprecated and you should use <code>noexcept</code>. Also, <code>auto_ptr</code> is deprecated in favour of <code>unique_ptr</code> and <code>shared_ptr</code>."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1455121789, "post_id": 35320086, "comment_id": 58350086, "body": "@rubenvb, yes I know, just curious the reason behind this ; )"}], "answers": [{"comments": [{"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 1, "creation_date": 1455121133, "post_id": 35320312, "comment_id": 58349618, "body": "Good explanation, but misses OP&#39;s intent. The ideal answer would combine this with @songyuanyao&#39;s."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1455142433, "post_id": 35320312, "comment_id": 58362673, "body": "@YamMarcovic:  Smart pointers constructors (in general) <i>can</i> throw.  Just when they do they need to not leak their argument.  For example see the <code>shared_ptr(T*)</code> constructor.  It can throw."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 5, "last_activity_date": 1455120852, "creation_date": 1455120852, "answer_id": 35320312, "question_id": 35320086, "link": "https://stackoverflow.com/questions/35320086/why-smart-pointer-templates-need-to-disable-exception-throwing-in-constructor/35320312#35320312", "title": "Why smart pointer templates need to disable exception throwing in constructor", "body": "<p><code>throw()</code> doesn't disable exception throwing. It simply says that the function does not throw any exceptions. That's a statement about the code in the constructor: there's nothing there that will throw an exception that escapes from the constructor. That means that either the code in the constructor doesn't throw any exceptions (for example, <code>int i = 3;</code> will not throw an exception), or that anything that does throw an exception is enclosed in a <code>try</code> block whose <code>catch</code> clauses don't throw anything.</p>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455121423, "post_id": 35320332, "comment_id": 58349815, "body": "The absence of <code>throw()</code> does not mean that the function will throw exceptions. All it means is that the function doesn&#39;t promise not to throw exceptions."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455121680, "post_id": 35320332, "comment_id": 58350008, "body": "Thank you for the answer, but I&#39;m still wondering what gonna happen if auto_ptr&#39;s constructor fails to construct the object?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455121797, "post_id": 35320332, "comment_id": 58350093, "body": "@Curtis2 - it&#39;s written so that it can&#39;t fail."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455122054, "post_id": 35320332, "comment_id": 58350284, "body": "@Curtis2 If <code>auto_ptr</code>&#39;s constructor throws an exception (just an assumption), the exception might be caught by a <code>try-catch</code> block, but in my example you couldn&#39;t do anything valuable in <code>catch</code> block. The pointer passed to it has been lost, then the memory allocated been lost either."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455122106, "post_id": 35320332, "comment_id": 58350321, "body": "@PeteBecker Can&#39;t fail? I don&#39;t get it, does it mean there are some kind of mechanism that guarantee the success?"}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455122291, "post_id": 35320332, "comment_id": 58350456, "body": "@songyuanyao So the reason we use throw() is that throwing exception can do nothing helpful here. If problem occurs, the memory leak is inevitable?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455122465, "post_id": 35320332, "comment_id": 58350596, "body": "@Curtis2 - the constructor just copies the pointer that was passed in. As long as that pointer satisfies the preconditions for the constructor (i.e., it is either <code>NULL</code> or a value returned by <code>new T</code>) copying it simply won&#39;t fail."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455122743, "post_id": 35320332, "comment_id": 58350839, "body": "@PeteBecker Ah~ I see. Thanks : )"}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1455123026, "post_id": 35320332, "comment_id": 58351049, "body": "@songyuanyao So it&#39;s caller&#39;s responsibility, thank your for the help. Actually, this is my first time to see a constructor using throw()/nonexcept, and still not familiar with exceptions in C++."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1455145864, "post_id": 35320332, "comment_id": 58364130, "body": "@songyuanyao Actually, following on Howard&#39;s point, what would stop a smart pointer constructor from just making sure that the pointer it gets never leaves it alive if it <i>does</i> end up throwing an exception? Would there be a serious drawback in that? If so, why may <code>shared_ptr(T*)</code> throw <code>bad_alloc</code>?"}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 3, "last_activity_date": 1455157674, "last_edit_date": 1455157674, "creation_date": 1455120895, "answer_id": 35320332, "question_id": 35320086, "link": "https://stackoverflow.com/questions/35320086/why-smart-pointer-templates-need-to-disable-exception-throwing-in-constructor/35320332#35320332", "title": "Why smart pointer templates need to disable exception throwing in constructor", "body": "<p>Because if the constructor of <code>auto_ptr</code> would throw exceptions, the pointer might be lost and then cause memory leak. For example:</p>\n\n<pre><code>auto_ptr&lt;int&gt; ap(new int);\n</code></pre>\n\n<p>The memory allocated couldn't be deallocated again if the constructor failed.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1455140059, "creation_date": 1455140059, "answer_id": 35326402, "question_id": 35320086, "link": "https://stackoverflow.com/questions/35320086/why-smart-pointer-templates-need-to-disable-exception-throwing-in-constructor/35326402#35326402", "title": "Why smart pointer templates need to disable exception throwing in constructor", "body": "<p>They are declaring an intent/promise not to throw exceptions - they still can, but will be smacked down hard by the runtime if they do.\nThe reason to use noexcept over throw() is mostly academic.</p>\n"}], "owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1455157674, "creation_date": 1455120295, "question_id": 35320086, "link": "https://stackoverflow.com/questions/35320086/why-smart-pointer-templates-need-to-disable-exception-throwing-in-constructor", "title": "Why smart pointer templates need to disable exception throwing in constructor", "body": "<p>I find such question while reading the <em>Smart Pointer Template Classes</em> in C++ primer plus.\nThe book gives an example of how <em>auto_ptr</em> class is implemented, like this,</p>\n\n<pre><code>template&lt;class X&gt; class auto_ptr {\npublic:\n    explicit auto_ptr(X* p = 0) throw();\n...};\n</code></pre>\n\n<p>throw() at the end of constructor means this constructor doesn't throw an exception.\nI know this is deprecated, but I do not know why it needs to disable its exception throwing.</p>\n"}, {"tags": ["c++", "c", "gcc", "clang", "constants"], "comments": [{"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "edited": false, "score": 0, "creation_date": 1455119911, "post_id": 35319842, "comment_id": 58348627, "body": "Warnings that aren&#39;t useful can be suppressed, with <code>-Wno-incompatible-pointer-types</code> (for gcc) and <code>-Wno-incompatible-pointer-types-discards-qualifiers</code> (for clang) in this case (that&#39;s why the warning message shows the warning flag that activates it: so you can suppress it if it isn&#39;t useful to you). Then you can continue with <code>-Werror</code> without problems."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "reply_to_user": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "edited": false, "score": 2, "creation_date": 1455120171, "post_id": 35319842, "comment_id": 58348832, "body": "@chrisjester-young That&#39;s not his question how to suppress warning."}, {"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1455120275, "post_id": 35319842, "comment_id": 58348915, "body": "@texasbruce I&#39;m aware. I can&#39;t tell the OP why the warning is shown by default in C but not in C++, since I&#39;m not a gcc or clang developer and I didn&#39;t implement the warning criteria."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1455120385, "post_id": 35319842, "comment_id": 58349002, "body": "C has a simpler, less flexible type system. C++ has a more powerful type system. That&#39;s all. There&#39;s no technical reason why C <i>cannot</i> allow this conversion. It can. It simply does not."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1455120831, "post_id": 35319842, "comment_id": 58349357, "body": "@Olaf No, C++ allows cast from <code>Foo**</code> to <code>const Foo* const*</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1455123277, "post_id": 35319842, "comment_id": 58351236, "body": "@user2079303: I hate to appologise, but I do if I was on the wrong track. I somehow added an <code>f</code> in my mind to the <code>print</code> call, thus read <code>printfd(argv);</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455123317, "post_id": 35319842, "comment_id": 58351272, "body": "@rici: Thanks, I somehow mess it up."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1455130081, "post_id": 35319842, "comment_id": 58355635, "body": "@nert: The question of &quot;why?&quot; has been around for a very long time. I&#39;ve been searching for the answer too, but it appears that the only answer here is &quot;It just so happened historically, and no one cares to correct this issue&quot;. I don&#39;t know why C does not want to adopt the C++ approach to const-correctness in such conversions. It would break no legacy code."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 17, "creation_date": 1455120940, "post_id": 35320292, "comment_id": 58349449, "body": "@Olaf: The question asks for a comparison. I&#39;m comparing. You don&#39;t have to like the comparison."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 19, "creation_date": 1455121258, "post_id": 35320292, "comment_id": 58349714, "body": "@Olaf: Oranges have more vitamin C than apples. Apples have more fibre."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1455123995, "post_id": 35320292, "comment_id": 58351746, "body": "The reason for the recursive C++ definition is likely that due to the special properties of const references the situation is much more likely in C++, so it needed treating there."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 1, "creation_date": 1455124088, "post_id": 35320292, "comment_id": 58351808, "body": "C and C++ are different languages, but they are still closely related, because C++ was designed to be able to directly include standard C library headers and call the functions defined therein."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1455127105, "post_id": 35320292, "comment_id": 58353788, "body": "@JanHudec: The problem with prototypes and C is noted in the Posix standard as a &quot;limitation of the ISO C standard&quot;; it affects the prototypes for the <code>exec*</code> system interfaces (which is where the note is) and possibly others. So the issue has been considered problematic for some time, but evidently not so problematic that the standard was updated."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 762, "user_id": 2959763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnsXN.png?s=128&g=1", "display_name": "nert", "link": "https://stackoverflow.com/users/2959763/nert"}, "edited": false, "score": 1, "creation_date": 1455134034, "post_id": 35320292, "comment_id": 58358153, "body": "@nert: That&#39;s award enough for me :) The standards themselves are paywalled, but the committees make drafts available for free; the closest draft to the standard generally differs only in small editorial corrections, and that&#39;s what you will see quoted here. For C: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/standards\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/standards</a> (link says: WG14 N1570)  For C++: <a href=\"https://isocpp.org/std/the-standard\" rel=\"nofollow noreferrer\">isocpp.org/std/the-standard</a>"}, {"owner": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490615175, "post_id": 35320292, "comment_id": 73175191, "body": "Is it possible to write in C a function whose prototype affirms &quot;I guarantee not a single bit, nested or not, of this <code>char **</code> pointer will be modified&quot;? Or is it impossible and it&#39;s better to just write the function as <code>char **</code> ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490624001, "post_id": 35320292, "comment_id": 73181850, "body": "@cesss: you can easily write the prototype. The problem is that you make it really annoying for the caller, so much so that it&#39;s not worth the effort. That is really what this discussion is about."}, {"owner": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490629861, "post_id": 35320292, "comment_id": 73186113, "body": "@rici: I meant writing a function prototype in a way that it won&#39;t issue a warning on current C compilers if you call it with a <code>char **</code>argument. I tried everything with clang, even with <code>char const *const *const</code> (which to my knowledge shouldn&#39;t issue a warning, as any cast from <code>char **</code> to <code>char const *const *const</code> is obviously safe, no matter how picky you are, as you are affirming that neither the pointed to data, nor the final pointer, nor any intermediate pointers, shall be modified), but, however, clang (when compiling C code) still issues a warning when casting from <code>char **</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490630132, "post_id": 35320292, "comment_id": 73186307, "body": "@cesss: yes, that is exactly what my answer says. No, there is no solution in C although it works fine in C++. If there were a C solution, Posix would use it; they are people with a lot more experience in C than either of us so I think they can be trusted when they say there is no solution."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 13, "last_activity_date": 1455158840, "last_edit_date": 1592644375, "creation_date": 1455120778, "answer_id": 35320292, "question_id": 35319842, "link": "https://stackoverflow.com/questions/35319842/why-c-doesnt-allow-implicit-conversion-from-char-to-const-char-const-and/35320292#35320292", "title": "Why C doesn&#39;t allow implicit conversion from char ** to const char *const * (and C++ does)?", "body": "<p>C and C++ are different in this respect. I don't have an answer to why C++ is more generous, other than that the C++ behaviour seems to me to be correct.</p>\n<p>C simply doesn't allow indirect <code>const</code> conversion. That is a conservative, easy-to-implement restriction, with the unfortunate consequence that you cannot provide <code>char*[]</code> to a function expecting <code>char const* const*</code>. The restriction is in \u00a76.3.2.3, paragraph 2, and it is simply not recursive:</p>\n<blockquote>\n<p>For any qualifier <code>q</code>, a pointer to a non-<code>q</code>-qualified type may be converted to a pointer to the <code>q</code>-qualified version of the type; the values stored in the original and converted pointers shall compare equal.</p>\n</blockquote>\n<p>C++ allows conversions according to a somewhat complex formulation in \u00a74.4 [conv.qual], paragraph 3. It is permitted to convert</p>\n<p><code>T cv<sub>n</sub> P<sub>n-1</sub>cv<sub>n-1</sub> \u2026 P<sub>1</sub>cv<sub>1</sub> P<sub>0</sub>cv<sub>0</sub></code>\n\u21d2\n<code>T cv'<sub>n</sub> P<sub>n-1</sub>cv'<sub>n-1</sub> \u2026 P<sub>1</sub>cv'<sub>1</sub> P<sub>0</sub>cv'<sub>0</sub></code></p>\n<p>(where <code>T</code> is a type; <code>P<sub>1</sub>\u2026P<sub>n</sub></code> are pointer/array type constructors, and each <code>cv<sub>0</sub>\u2026cv<sub>n</sub></code> is some possibly empty subset of <code>const</code> and <code>volatile</code>)</p>\n<p>provided that:</p>\n<ol>\n<li><p>For every <code>k &gt; 0</code>, <code>cv<sub>k</sub></code> is a subset of <code>cv'<sub>k</sub></code> (so you can't remove a <code>const</code> or a <code>volatile</code>), and</p>\n</li>\n<li><p>If <code>cv<sub>k</sub></code> and <code>cv'<sub>k</sub></code> differ for some <code>k &gt; 0</code>, all the following <code>cv'<sub>i&gt;k</sub></code> include <code>const</code>.</p>\n</li>\n</ol>\n<p>In the actual standard, that expression is reversed; I put it in the order of declaration, whereas in the standard it is in order of application of the pointer/array constructors. I didn't change the direction of the numbering, though, which is why they are numbered right to left. I also left out some details -- for example, it's not strictly necessary for the two <code>T</code>s to be identical -- but I think it gives an idea of the intention.</p>\n<p>The explanation for the first restriction is reasonably obvious. The second restriction prevents the problem described in the C FAQ, where a <code>const</code> pointer might be stored into a non-<code>const</code> pointer object, and then subsequently used to mutate the <code>const</code> object it points to.</p>\n<p>The bottom line is that in C++, your prototype <code>const char *const * param</code> will work with arguments of type <code>char**</code>, <code>const char**</code>, or even <code>char*const*</code>, but in C only the last one will work without warning, and it is the least useful. The only workaround I know of (other than switching to C++) is to ignore the warning.</p>\n<p>For what it's worth, there is a note in the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/environ.html#tag_16_111_08\" rel=\"noreferrer\">Rationale section of the Posix specification of the <code>exec*</code> interfaces</a> about the problem this causes for these prototypes, and the workaround selected by Posix, which is to use <code>char*[]</code> as the prototype and textually note that these are constant: (emphasis added)</p>\n<blockquote>\n<p>The statement about <code>argv[]</code> and <code>envp[]</code> being constants is included to make explicit to future writers of language bindings that these objects are completely constant. <strong>Due to a limitation of the ISO C standard, it is not possible to state that idea in standard C.</strong> Specifying two levels of <code>const</code>-qualification for the <code>argv[]</code> and <code>envp[]</code> parameters for the exec functions may seem to be the natural choice, given that these functions do not modify either the array of pointers or the characters to which the function points, but this would disallow existing correct code. Instead, only the array of pointers is noted as constant.</p>\n</blockquote>\n<p>There's a useful compatibility chart following that paragraph, which I didn't quote because of the formatting limitations of this site.</p>\n"}], "owner": {"reputation": 762, "user_id": 2959763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnsXN.png?s=128&g=1", "display_name": "nert", "link": "https://stackoverflow.com/users/2959763/nert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 3, "accepted_answer_id": 35320292, "answer_count": 1, "score": 15, "last_activity_date": 1455159186, "creation_date": 1455119710, "question_id": 35319842, "link": "https://stackoverflow.com/questions/35319842/why-c-doesnt-allow-implicit-conversion-from-char-to-const-char-const-and", "title": "Why C doesn&#39;t allow implicit conversion from char ** to const char *const * (and C++ does)?", "body": "<p>I know implicit conversion from <code>char **</code> to <code>const char **</code> cannot be done and why, and that the conversion to <code>char *const *</code> works.  See bottom for links to explanation on that.</p>\n\n<p>It all makes sense apart from one particular thing.  So I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid\nprint(const char *const*param)\n{\n    printf(\"%s\\n\", param[0]);\n}\n\nint\nmain(int argc, char **argv)\n{\n    print(argv);\n    return 0;\n}\n</code></pre>\n\n<p>If I compile this as a C++ code, it compiles quite fine.  However, if the same code is compiled as a C code only, I get an error (well, a warning, but let's suppose <code>-Werror</code>, i.e. treat warnings as errors).</p>\n\n<p>gcc:</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:12:11: warning: passing argument 1 of \u2018print\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n     print(argv);\n           ^\ntest.c:4:1: note: expected \u2018const char * const*\u2019 but argument is of type \u2018char **\u2019\n print(const char *const*param)\n ^\n</code></pre>\n\n<p>clang:</p>\n\n<pre><code>test.c:12:11: warning: passing 'char **' to parameter of type 'const char *const *' discards qualifiers in nested pointer types [-Wincompatible-pointer-types-discards-qualifiers]\n    print(argv);\n          ^~~~\ntest.c:4:25: note: passing argument to parameter 'param' here\nprint(const char *const*param)\n                        ^\n</code></pre>\n\n<p>Both behaviours are standard-independent and also compiler-independent.  I tried various standards with both <code>gcc</code> and <code>clang</code>.</p>\n\n<p>There are two reasons for this inquiry.  Firstly, I want to understand whether there is a difference and, secondly, I have a function that does nothing with any layer of the pointers and I need it to be able to work with <code>const char **</code> as well as <code>char *const *</code> and <code>char **</code>.  Explicitly casting each call is not maintainable.  And I have no idea how should the function prototype look like.</p>\n\n<hr>\n\n<p>This is the question that started my curiosity:\n<a href=\"https://stackoverflow.com/questions/7016098/implicit-conversion-from-char-to-const-char\">Implicit conversion from char** to const char**</a></p>\n\n<p>And here is another nice explanation for the <code>char ** =&gt; const char**</code> problem:\n<a href=\"http://c-faq.com/ansi/constmismatch.html\">http://c-faq.com/ansi/constmismatch.html</a></p>\n\n<p>If the links are confusing related to this question, feel free to edit them out.</p>\n"}, {"tags": ["c++", "linux"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4489558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993c412d561effd2b6e7106afb136d0?s=128&d=identicon&r=PG&f=1", "display_name": "vapid", "link": "https://stackoverflow.com/users/4489558/vapid"}, "edited": false, "score": 0, "creation_date": 1455178694, "post_id": 35323288, "comment_id": 58375645, "body": "Thank you for your suggestions. So, according to its specifications &#39;waitpid&#39; with &#39;WNOHANG&#39; will return &gt;0 value when the child process will have &quot;changed state&quot;. So that means this &quot;change of state&quot; can happen only on process termination?"}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "reply_to_user": {"reputation": 151, "user_id": 4489558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993c412d561effd2b6e7106afb136d0?s=128&d=identicon&r=PG&f=1", "display_name": "vapid", "link": "https://stackoverflow.com/users/4489558/vapid"}, "edited": false, "score": 0, "creation_date": 1455192585, "post_id": 35323288, "comment_id": 58385154, "body": "For your purposes, the only state change will be when the process terminates. The other uses only come into play if (a) you&#39;re writing a debugger (i.e. using <code>ptrace(2)</code>) or (b) if you specify the <code>WUNTRACED</code> or <code>WCONTINUED</code> flags, in which case you would also be informed when there is a stop signal (e.g. Ctrl-Z) or a continue-from-stop."}], "tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": true, "score": 2, "last_activity_date": 1455192624, "last_edit_date": 1455192624, "creation_date": 1455129445, "answer_id": 35323288, "question_id": 35319629, "link": "https://stackoverflow.com/questions/35319629/better-way-to-monitor-and-kill-other-programs-stalled-process-in-linux/35323288#35323288", "title": "Better way to monitor and kill other program&#39;s stalled process in linux?", "body": "<p><code>(WIFEXITED(retval))</code> won't return true if the program is killed by a signal (including say a crash due to segmentation violation). </p>\n\n<p>Probably best to just check for a successful return from <code>waitpid</code>. That will only happen if the program is terminated (whether voluntarily or not).</p>\n\n<p>Depending on how important it is to make sure the process is gone... <br/>\nAfter killing the process with <code>SIGTERM</code>, you could sleep another second or so and if it's still not gone, use <code>SIGKILL</code> to be sure.</p>\n"}], "owner": {"reputation": 151, "user_id": 4489558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993c412d561effd2b6e7106afb136d0?s=128&d=identicon&r=PG&f=1", "display_name": "vapid", "link": "https://stackoverflow.com/users/4489558/vapid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 35323288, "answer_count": 1, "score": 5, "last_activity_date": 1455192624, "creation_date": 1455119082, "question_id": 35319629, "link": "https://stackoverflow.com/questions/35319629/better-way-to-monitor-and-kill-other-programs-stalled-process-in-linux", "title": "Better way to monitor and kill other program&#39;s stalled process in linux?", "body": "<p>I need my program to run some other program, but if the other program won't return within some time limit, I need to kill it. I came up with the following solution that seems to be working.</p>\n\n<pre><code>int main()\n{\nint retval, timeout=10;\npid_t proc1=fork();\n\nif(proc1&gt;0)\n{\n    while(timeout)\n    {\n        waitpid(proc1, &amp;retval, WNOHANG);\n        if(WIFEXITED(retval)) break; //normal termination\n        sleep(1);\n        --timeout;\n        if(timeout==0)\n        {\n            printf(\"attempt to kill process\\n\");\n            kill(proc1, SIGTERM);\n            break;\n        }\n    }\n}\nelse if(proc1==0)\n{\n    execlp(\"./someprogram\", \"./someprogram\", \"-a\", \"-b\", NULL);\n}\n//else if fork failed etc.\nreturn 0;\n}\n</code></pre>\n\n<p>I need my program to be as robust as possible but I am new to programming under linux so I may not be aware of possible problems with it. My questions are:\n1. Is this a proper solution to this particular problem or are there better methods?\n2. Does anyone see possible problems or bugs that can lead to an unexpected behavior or a leak of system resources?</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1455118759, "post_id": 35319421, "comment_id": 58347699, "body": "The second approach is missing the <code>join()</code> call that the first one has. You should not allow <code>c_thread</code> to be destroyed without calling <code>join()</code> or <code>detach()</code> on it first."}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1455118996, "post_id": 35319421, "comment_id": 58347882, "body": "I do agree! in my final software actually both threads are infinite loops which runs forever. and since i have put an infinite loop in the main this for sure is not finishing before my thread is done"}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1455119036, "post_id": 35319421, "comment_id": 58347924, "body": "i tried to put some cout in the main while loops and nothing is printed"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1455119136, "post_id": 35319421, "comment_id": 58348009, "body": "There are no loops in the code you&#39;ve shown. I, for one, have no idea what you are talking about."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455120944, "post_id": 35319421, "comment_id": 58349458, "body": "Don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> starts a new line."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1455121190, "post_id": 35319507, "comment_id": 58349660, "body": "Further, a <code>join</code> is <b>required</b> before the destructor of <code>std::thread</code> runs (unless the thread has been detached). The absence of the <code>join</code> call is the reason for the call to <code>terminate</code>."}], "tags": [], "owner": {"reputation": 7790, "user_id": 786186, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/74776c91bbca453c527ffe43baf8be3c?s=128&d=identicon&r=PG", "display_name": "Alessandro Pezzato", "link": "https://stackoverflow.com/users/786186/alessandro-pezzato"}, "is_accepted": false, "score": 0, "last_activity_date": 1455118776, "creation_date": 1455118776, "answer_id": 35319507, "question_id": 35319421, "link": "https://stackoverflow.com/questions/35319421/use-stdthread-within-function-method/35319507#35319507", "title": "use std::thread within function method", "body": "<p><code>c_thread</code> go out of scope whwn <code>run()</code> ends, so the thread is destroyed, probably before <code>procedure()</code> has finished.</p>\n\n<p>I guess you want the <code>std::thread</code> instance as a member of <code>myClass</code>, not as a local variable. In this case, the thread is destroyed only when <code>c</code> go out of scope. Anyway, a <code>thread.join()</code> in the destructor of <code>myClass</code> will wait until the thread has completed.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1455119194, "last_edit_date": 1455119194, "creation_date": 1455118783, "answer_id": 35319509, "question_id": 35319421, "link": "https://stackoverflow.com/questions/35319421/use-stdthread-within-function-method/35319509#35319509", "title": "use std::thread within function method", "body": "<p>When you call <code>c-&gt;run();</code> it executes</p>\n\n<pre><code>void run(){\n    std::cout &lt;&lt; \"run()\"&lt;&lt;std::endl;\n    std::thread c_thread(&amp;myClass::procedure,this);     \n};\n</code></pre>\n\n<p>When the function ends <code>c_thread</code> is destroyed.  Since you never called <code>join()</code> or <code>detach()</code> on it  <code>c_thread</code> is still joinable and this causes the destructor  to throws an exception.  See <a href=\"http://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow\"><code>std::thread::~thread()</code></a></p>\n\n<p>You need to make <code>c_thread</code> a member of <code>myClass</code> and in the <code>myClass</code> destructor you either need to call <code>join()</code> or <code>detach()</code> on it.  This will allow the thread object to be destroyed without throwing an exception.  If you call <code>join()</code> the destructor will not end until <code>myClass::procedure</code> ends.  If you call <code>detach()</code> then the destructor will complete immediately but the thread will keep running until the function ends.</p>\n"}], "owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 35319509, "answer_count": 2, "score": 0, "last_activity_date": 1455119194, "creation_date": 1455118560, "question_id": 35319421, "link": "https://stackoverflow.com/questions/35319421/use-stdthread-within-function-method", "title": "use std::thread within function method", "body": "<p>This piece of code works as expected (it prints \"procedure()\")</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass myClass{\npublic:\n    myClass(){};\n    ~myClass(){};\n    void run(){std::cout &lt;&lt; \"run()\"&lt;&lt;std::endl;};\n    void procedure(){std::cout &lt;&lt; \"procedure()\"&lt;&lt;std::endl;};\n};\n\n\nint main(int argc, char *argv[]){\n    myClass* c = new myClass();\n    std::thread c_thread(&amp;myClass::procedure,c);\n    c_thread.join();\n    return 0;\n}\n</code></pre>\n\n<p>now i do not like the fact that the caller has to know that my class launches a thread! So i would prefere that launching the thread is hidden in my constructor on the run method. So i wrote the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\nclass myClass{\npublic:\n    myClass(){};\n    ~myClass(){};\n    void run(){\n        std::cout &lt;&lt; \"run()\"&lt;&lt;std::endl;\n        std::thread c_thread(&amp;myClass::procedure,this);     \n    };\n    void procedure(){std::cout &lt;&lt; \"procedure()\"&lt;&lt;std::endl;};\n};\n\n\nint main(int argc, char *argv[]){\n    myClass* c = new myClass();\n\n    c-&gt;run();\n    while(true){}\n\n    return 0;\n}\n</code></pre>\n\n<p>this ends up in the following error:</p>\n\n<pre><code>[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nrun()\n[New Thread 0x7ffff6fdd700 (LWP 4485)]\nterminate called without an active exception\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff70135f7 in raise () from /lib64/libc.so.6\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-106.el7_2.1.x86_64 libgcc-4.8.5-4.el7.x86_64 libstdc++-4.8.5-4.el7.x86_64\n(gdb) bt\n#0  0x00007ffff70135f7 in raise () from /lib64/libc.so.6\n#1  0x00007ffff7014ce8 in abort () from /lib64/libc.so.6\n#2  0x00007ffff79179d5 in __gnu_cxx::__verbose_terminate_handler() () from /lib64/libstdc++.so.6\n#3  0x00007ffff7915946 in ?? () from /lib64/libstdc++.so.6\n#4  0x00007ffff7915973 in std::terminate() () from /lib64/libstdc++.so.6\n#5  0x000000000040109d in std::thread::~thread (this=0x7fffffffdeb0, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8.2/thread:143\n#6  0x00000000004011e1 in myClass::run (this=0x606010) at test2.cpp:9\n#7  0x0000000000400f65 in main (argc=1, argv=0x7fffffffe008) at test2.cpp:17\n(gdb) q\n</code></pre>\n\n<p>anyone knows the reason?</p>\n"}, {"tags": ["c++", "windows", "file-io"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455119966, "post_id": 35319412, "comment_id": 58348674, "body": "If this is Windows, why not use the requisite Windows API functions to remove a directory?  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  Also, I suggest you run this under a debugger, single stepping at a time, and especially for something like this.  Why?  What if something goes wrong, i.e. a variable is set incorrectly, and because of that, you start deleting directories that you didn&#39;t mean to delete?"}, {"owner": {"reputation": 81, "user_id": 4583062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nLsGj.jpg?s=128&g=1", "display_name": "BrainOverflow", "link": "https://stackoverflow.com/users/4583062/brainoverflow"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1455120542, "post_id": 35319412, "comment_id": 58349133, "body": "Yes, sure, I run this code under debugger. It definitely could be painful to delete wrong directories. And about API...I even don&#39;t now is it right to use such things in studying, cause I&#39;m beginner and I&#39;m trying to learn basic things of cpp."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1455124637, "post_id": 35319412, "comment_id": 58352158, "body": "If your compiler is up-to-date enough to support the standard <i>filesystem</i> Technical Specification this could be quite simple: <a href=\"http://en.cppreference.com/w/cpp/experimental/fs/remove\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/experimental/fs/remove</a>"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4583062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nLsGj.jpg?s=128&g=1", "display_name": "BrainOverflow", "link": "https://stackoverflow.com/users/4583062/brainoverflow"}, "edited": false, "score": 0, "creation_date": 1455120039, "post_id": 35319775, "comment_id": 58348726, "body": "Yes, it is under Windows. Thanks for answer! I&#39;ll try to do it that way now."}, {"owner": {"reputation": 1605, "user_id": 3125731, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/506b2f95f52e86ca1736df597eebf0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Kasperczyk", "link": "https://stackoverflow.com/users/3125731/tomasz-kasperczyk"}, "edited": false, "score": 0, "creation_date": 1455120185, "post_id": 35319775, "comment_id": 58348850, "body": "Alternatively instead of moving the contents to a temp location, you can wait until it gets deleted by checking if it exists and then proceed further."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 1, "creation_date": 1455120321, "post_id": 35319775, "comment_id": 58348952, "body": "The problem with waiting is that it is difficult to say when it is actually deleted, so that might need unnecessary waiting (and still sometimes it might not help to wait even for a minute or more, if some program is holding the handle)."}, {"owner": {"reputation": 81, "user_id": 4583062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nLsGj.jpg?s=128&g=1", "display_name": "BrainOverflow", "link": "https://stackoverflow.com/users/4583062/brainoverflow"}, "edited": false, "score": 0, "creation_date": 1455145942, "post_id": 35319775, "comment_id": 58364160, "body": "Thank you axalis! Method with directory moving works well!"}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 5, "last_activity_date": 1455120640, "last_edit_date": 1455120640, "creation_date": 1455119499, "answer_id": 35319775, "question_id": 35319412, "link": "https://stackoverflow.com/questions/35319412/removing-directories-and-all-sub-directories-in-it/35319775#35319775", "title": "removing directories and all sub-directories in it", "body": "<p>Is this under Windows? In Windows in particular the problem is that if you remove a file or subfolder, it is not removed immediately but asynchronously \"sometime in the future\". This can take even quite a long time, especially if someone still has some of the file handles open. And even if not, if your program is \"too fast\" (or the filesystem under heavy load), when you try to remove the parent folder, the contents might not have been actually removed yet, and the call fails.</p>\n\n<p>Commonly this is solved by moving each sub-file and sub-folder to some temporary location (on the same partition!), and then deleting it. That way the parent folder will be empty and deletable, even though the contents has not been \"physically\" deleted yet (because everything is already moved outside - the move is synchronous).</p>\n\n<p>You can see this talk for more info on that: <a href=\"https://youtu.be/uhRWMGBjlO8?t=7m30s\" rel=\"nofollow\">https://youtu.be/uhRWMGBjlO8?t=7m30s</a></p>\n\n<p>In general, handling the filesystem properly really isn't all that simple and there is a lot of space for race conditions.</p>\n\n<p>You can confirm this problem if you put a sleep before deleting each folder, lets say 200ms, to see if giving the system some time to delete the contents \"solves\" the issue (however that is not a \"real solution\", it is just to see that it is indeed a timing issue).</p>\n\n<p>Note that it is not a problem if you move-and-delete and your program terminates before the actual deletion happens - once the delete returned successfully, the Windows OS will take care that the file will be deleted.</p>\n"}], "owner": {"reputation": 81, "user_id": 4583062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nLsGj.jpg?s=128&g=1", "display_name": "BrainOverflow", "link": "https://stackoverflow.com/users/4583062/brainoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 35319775, "answer_count": 1, "score": 3, "last_activity_date": 1455126639, "creation_date": 1455118528, "last_edit_date": 1455126639, "question_id": 35319412, "link": "https://stackoverflow.com/questions/35319412/removing-directories-and-all-sub-directories-in-it", "title": "removing directories and all sub-directories in it", "body": "<p>I wrote a function which should delete a directory and all files and folders in it, but it got some troubles.\nFor my targets, I made special directory for experiments. This directory stores some files and one folder. And this folder (sub-directory) also contains 1 or 2 files. My function successfuly removes sub-directory and all files in it. And all files in main directory are also removes successfuly. But when the function starts to remove main directory - it fails. It seems like rmdir returns not 0 and I dont know why, cause sub directory removes well. </p>\n\n<p><strong>As an argument it takes string like \"D:\\new\\\".</strong></p>\n\n<p>Where new is main directory that should be removed whith everything in it. \n<em>Here is code of this function:</em></p>\n\n<pre><code> void OperationsWithDirectories::RemovingCycle(string _path)\n    {\n        string wayToFile;           // string to hold the path to the directory without mask \n        string deletedFile;         // string which would hold the way to deleting file\n        wayToFile = _path;\n\n        _path += \"*.*\";             // add a mask to the _path string\n\n\n        _finddata_t* fileinfo = new _finddata_t;\n\n        long done = _findfirst(_path.c_str(), fileinfo);\n\n        int IsContinue = done;\n\nwhile (IsContinue != -1)\n{\n    deletedFile = wayToFile + fileinfo-&gt;name;\n\n    if (fileinfo-&gt;attrib == _A_SUBDIR)\n    {\n        if (strcmp(fileinfo-&gt;name, \".\") != 0 &amp;&amp; strcmp(fileinfo-&gt;name, \"..\") != 0)\n        {\n            cout &lt;&lt; \"\\nEnter subdirectory\\n\";\n            RemovingCycle(wayToFile + fileinfo-&gt;name + \"\\\\\");       //recursive func wich would start, if subdirectory is exist\n            cout &lt;&lt; \"\\nOutta subdirectory\\n\";\n        }\n    }\n    else\n    {\n        if ((remove(deletedFile.c_str())) != 0)\n            cout &lt;&lt; \"\\n\\n ERROR IN FILE DELETING\\n\\n\";\n        else\n            cout &lt;&lt; endl &lt;&lt; deletedFile &lt;&lt; \" - was deleted\";\n    }\n\n    IsContinue = _findnext(done, fileinfo);\n}\n\nif ((_rmdir(wayToFile.c_str())) != 0)\n    cout &lt;&lt; \"\\n\\nERROR IN DIRECT - \" &lt;&lt; wayToFile &lt;&lt; \" DELETING\\n\\n\";\nelse\n    cout &lt;&lt; \"\\ndir - \" &lt;&lt; wayToFile &lt;&lt; \" was deleted succesfully\\n\";\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455119932, "post_id": 35319380, "comment_id": 58348649, "body": "Changed var[i]=numb; to var.push_back(numb): and now I cant terminate the loop with enter and changed cin&gt;&gt;numb&gt;&gt;temp to cin&gt;&gt;numb"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455121354, "post_id": 35319380, "comment_id": 58349772, "body": "@Testermoon01 I updated the answer to show why you do not get output."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455121614, "post_id": 35319380, "comment_id": 58349961, "body": "You&#39;re right, my last problem is while loop still wont terminate on pressing enter instead terminates when I pressed different key. I need that enter key to terminate it. Any ideas?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455121853, "post_id": 35319380, "comment_id": 58350133, "body": "@Testermoon01 Not sure what is going on.  <a href=\"http://coliru.stacked-crooked.com/a/785de7a041368f9d\" rel=\"nofollow noreferrer\">this</a> works perfectly for me and after I press <code>Ctrl+z</code> all I have to do is press enter."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455121983, "post_id": 35319380, "comment_id": 58350234, "body": "Is there an alternate for Ctrl+Z? Because I should need enter key to terminate the looop"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1455121338, "last_edit_date": 1455121338, "creation_date": 1455118445, "answer_id": 35319380, "question_id": 35319282, "link": "https://stackoverflow.com/questions/35319282/trying-to-input-line-of-integer-and-sorts-in-insertion-sort-type-of-function-wit/35319380#35319380", "title": "Trying to input line of integer and sorts in insertion sort type of function with vector as storage", "body": "<p>You never initialized <code>i</code> so <code>var[i]=numb;</code> could be anything and you have undefined behavior.  You also never initialized <code>var</code> so <code>var[i]=numb;</code> could be anything and you have undefined behavior.</p>\n\n<p>Also with <code>cin&gt;&gt;numb&gt;&gt;temp</code> is not going to consume the white space between the numbers.  <code>cin</code> already ignores white space so this is trimming some of the numbers you entered.</p>\n\n<p>EDIT:</p>\n\n<p>Your new code forgets to increment <code>i</code> while you are getting the input.  Instead of doing that though you can just use the <code>size()</code> function of the vector and change your for loop to</p>\n\n<pre><code>for(size_t a=0; a &lt; var.size(); ++a){\n    cout&lt;&lt;var[a]&lt;&lt;\" \";\n}\n</code></pre>\n\n<p>Or better yet use a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow\">ranged based for loop</a> like</p>\n\n<pre><code>for (auto e : var)\n    std::cout &lt;&lt; e &lt;&lt; \" \";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455119176, "post_id": 35319468, "comment_id": 58348046, "body": "I added push_back instead of giving value to var[i] and now I cant stop the  while loop from inputting values"}, {"owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455119200, "post_id": 35319468, "comment_id": 58348066, "body": "See my edits on the <code>EOF</code> and hit return afterwards."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455119718, "post_id": 35319468, "comment_id": 58348479, "body": "Tried Ctrl+Z and didnt do anything. If it helps, Im using devc++ and still I cant terminate the while loop with the push_back and why wouldn&#39;t I need the if statement? Im just a student though."}, {"owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455119833, "post_id": 35319468, "comment_id": 58348566, "body": "Did you remember to hit the <code>Enter</code> key? I understand that."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120042, "post_id": 35319468, "comment_id": 58348728, "body": "Of course.It just moves the pointer down and entering values is infinite"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120110, "post_id": 35319468, "comment_id": 58348784, "body": "@Testermoon01 When you enter <code>Ctrl+Z</code> do you see <code>^Z</code> in the command prompt?"}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120222, "post_id": 35319468, "comment_id": 58348870, "body": "Yes sir, and I entered it. Then my for loop for displaying the values in var didnt kick in"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120433, "post_id": 35319468, "comment_id": 58349042, "body": "@Testermoon01 What does your code look like now that you made the changes?  It could be that the for loop no longer runs."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120522, "post_id": 35319468, "comment_id": 58349115, "body": "Could I send you the whole code? I&#39;ve been working on it in earlier this evening and I cant make the program run properly"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455120785, "post_id": 35319468, "comment_id": 58349313, "body": "@Testermoon01 No.  You can either update this qiestion(do not invalidate the answers you already have) or ask a new question."}, {"owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "reply_to_user": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455122142, "post_id": 35319468, "comment_id": 58350345, "body": "@Testermoon01: I said the condition <code>temp == char(13)</code> is not needed."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455122254, "post_id": 35319468, "comment_id": 58350424, "body": "I need to terminate the while loop when the user feels like. What should I do?"}, {"owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "edited": false, "score": 0, "creation_date": 1455122296, "post_id": 35319468, "comment_id": 58350461, "body": "I also said the user will signal <code>EOF</code> to break the loop. Please read the answer carefully."}, {"owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "edited": false, "score": 0, "creation_date": 1455122474, "post_id": 35319468, "comment_id": 58350601, "body": "I read it but is there any alternative for Ctrl+Z ? Because I really need the enter key to terminate the program.."}], "tags": [], "owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "is_accepted": false, "score": 0, "last_activity_date": 1455122542, "last_edit_date": 1455122542, "creation_date": 1455118703, "answer_id": 35319468, "question_id": 35319282, "link": "https://stackoverflow.com/questions/35319282/trying-to-input-line-of-integer-and-sorts-in-insertion-sort-type-of-function-wit/35319468#35319468", "title": "Trying to input line of integer and sorts in insertion sort type of function with vector as storage", "body": "<p>You don't need to manually read spaces, <code>cin</code> will just ignore that space for you.</p>\n\n<p>So you just need:</p>\n\n<pre><code>while(cin&gt;&gt;numb)\n</code></pre>\n\n<p>Also <code>char(13)</code> is the carriage return in ascii. So you don't need these two lines either:</p>\n\n<pre><code>if(temp==char(13))\n    break;\n</code></pre>\n\n<p>Instead, users will signal <code>EOF</code> to break the loop. In Linux, it's <code>Ctrl+D</code>; in Windows, it's <code>Ctrl+Z</code>.</p>\n\n<p>Besides, other answers have said that you should use <code>push_back</code>.</p>\n\n<p>The code is just this simple:</p>\n\n<pre><code>while (cin &gt;&gt; numb)\n    var.push_back(numb);\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>Your updated code is also problematic. You never updated <code>i</code> but used to it print out the array. Here's the full working version.</p>\n\n<pre><code>while (cin &gt;&gt; numb)\n    var.push_back(numb);\n\ninsertionSort(var);\n\nfor (int i = 0; i &lt; var.size(); i++)\n    cout &lt;&lt; var[i] &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5909059, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/EZOgc.png?s=128&g=1", "display_name": "CJ Canlas", "link": "https://stackoverflow.com/users/5909059/cj-canlas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1455122542, "creation_date": 1455118192, "last_edit_date": 1455121454, "question_id": 35319282, "link": "https://stackoverflow.com/questions/35319282/trying-to-input-line-of-integer-and-sorts-in-insertion-sort-type-of-function-wit", "title": "Trying to input line of integer and sorts in insertion sort type of function with vector as storage", "body": "<pre><code>vector&lt;int&gt; var;\n    int numb,i;\n    char temp;\n\n    cout&lt;&lt;\"Enter numbers: \";\n    //Inputs integers with spaces\n    while(cin&gt;&gt;numb&gt;&gt;temp){\n        var[i]=numb;\n        i++;\n        if(temp==char(13)){\n            break;\n        }\n    }\n    insertionSort(var);\n    for(int a=0;a&lt;i;a++){\n        cout&lt;&lt;var[a]&lt;&lt;\" \";\n    }\n</code></pre>\n\n<p>This program terminates after enter key has been pressed, any idea how to fix it?</p>\n\n<p>EDIT:</p>\n\n<p>Updated version of the program and while loop wont terminate after pressing enter key</p>\n\n<pre><code>    vector&lt;int&gt; var;\n    int numb,i=0;\n    cout&lt;&lt;\"Enter numbers: \";\n    while(cin&gt;&gt;numb){\n        if(numb==char(13)){\n        break;\n        }\n        else{\n        var.push_back(numb);\n    }\n    }\n    insertionSort(var);\n    for(int a=0;a&lt;i;a++){\n        cout&lt;&lt;var[a]&lt;&lt;\" \";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 1, "user_id": 11788618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VHCt34uGFOw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rekmIlxvJyDu4ES-TxAX8fnAegiaw/photo.jpg?sz=128", "display_name": "Murat Cosar", "link": "https://stackoverflow.com/users/11788618/murat-cosar"}, "edited": false, "score": 0, "creation_date": 1563227739, "post_id": 35319094, "comment_id": 100624411, "body": "You can use createMeshSection node."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 2011909, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/404b06fbc20c7153bbdae3be0962f6fa?s=128&d=identicon&r=PG", "display_name": "user2011909", "link": "https://stackoverflow.com/users/2011909/user2011909"}, "edited": false, "score": 0, "creation_date": 1455119184, "post_id": 35319199, "comment_id": 58348052, "body": "Thanks for your answer. Is it possible to load an OBJ+MTL+PNG &#39;thing&#39; by code?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 121, "user_id": 2011909, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/404b06fbc20c7153bbdae3be0962f6fa?s=128&d=identicon&r=PG", "display_name": "user2011909", "link": "https://stackoverflow.com/users/2011909/user2011909"}, "edited": false, "score": 0, "creation_date": 1455119239, "post_id": 35319199, "comment_id": 58348098, "body": "@user2011909 No, I don&#39;t believe so, not without adding lots of code to the runtime, which is currently in the editor.  It might be trivial, but it&#39;s not a normal thing to do."}, {"owner": {"reputation": 121, "user_id": 2011909, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/404b06fbc20c7153bbdae3be0962f6fa?s=128&d=identicon&r=PG", "display_name": "user2011909", "link": "https://stackoverflow.com/users/2011909/user2011909"}, "edited": false, "score": 0, "creation_date": 1455119409, "post_id": 35319199, "comment_id": 58348247, "body": "Or to script the import and converting (obj -&gt; asset) work flow in C++?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 121, "user_id": 2011909, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/404b06fbc20c7153bbdae3be0962f6fa?s=128&d=identicon&r=PG", "display_name": "user2011909", "link": "https://stackoverflow.com/users/2011909/user2011909"}, "edited": false, "score": 0, "creation_date": 1455119533, "post_id": 35319199, "comment_id": 58348348, "body": "@user2011909 That&#39;s what you&#39;d have to do, yes.  How much work is involved is unknown to me."}], "tags": [], "owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1455117993, "creation_date": 1455117993, "answer_id": 35319199, "question_id": 35319094, "link": "https://stackoverflow.com/questions/35319094/unreal-engine-4-load-obj-file/35319199#35319199", "title": "Unreal Engine 4 : Load OBJ file", "body": "<p>A static mesh object and a <code>.OBJ</code> file are not the same thing.</p>\n\n<p>The former is a file containing a UE4-specific asset and the latter is a mesh interchange file (often with an associated <code>.MTL</code> material file).</p>\n\n<p>The <code>.OBJ</code> files needs to be imported by the Unreal Editor in order to create the asset file, which can then be added to the scene, dynamically or otherwise.</p>\n"}], "owner": {"reputation": 121, "user_id": 2011909, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/404b06fbc20c7153bbdae3be0962f6fa?s=128&d=identicon&r=PG", "display_name": "user2011909", "link": "https://stackoverflow.com/users/2011909/user2011909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1888, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563227739, "creation_date": 1455117731, "question_id": 35319094, "link": "https://stackoverflow.com/questions/35319094/unreal-engine-4-load-obj-file", "title": "Unreal Engine 4 : Load OBJ file", "body": "<p>I am try to load an OBJ file in my C++ script but it is everytime NULL. Why?</p>\n\n<pre><code>UStaticMesh* mesh = Cast&lt;UStaticMesh&gt;(StaticLoadObject(UStaticMesh::StaticClass(), NULL, TEXT(\"StaticMesh'/Game/StarterContent/Materials/Frame_02392'\")));\n\nif(mesh == NULL)\n{\n    UE_LOG(LogTemp, Log, TEXT(\"Empty Mesh!\"));\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "mutex", "condition-variable"], "comments": [{"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455118114, "post_id": 35318942, "comment_id": 58347187, "body": "Better represent fully worked example (with valid someCondition and so on) for people who want try to reproduce problem. It is possible error appears alredy when you prepare such example/"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455118427, "post_id": 35318942, "comment_id": 58347439, "body": "Normally software development process includes writing tests that cover every part of code. So this problem must be covered by test too."}, {"owner": {"reputation": 13, "user_id": 4619907, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ghjUn.png?s=128&g=1", "display_name": "Tibor Mikita", "link": "https://stackoverflow.com/users/4619907/tibor-mikita"}, "reply_to_user": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455118450, "post_id": 35318942, "comment_id": 58347464, "body": "I am sorry, is it better now?"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455119786, "post_id": 35318942, "comment_id": 58348529, "body": "Read the <a href=\"https://en.wikipedia.org/wiki/Test-driven_development\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Test-driven_development</a> read 1-5. Your code is not compiled. Are You try to compile and run before post. What You need to solve problem? You need worked code that show at log some demonstration of error (first). Test code is code that check is error exists or not (second). Need first or second."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4619907, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ghjUn.png?s=128&g=1", "display_name": "Tibor Mikita", "link": "https://stackoverflow.com/users/4619907/tibor-mikita"}, "edited": false, "score": 0, "creation_date": 1455121482, "post_id": 35319855, "comment_id": 58349856, "body": "This actually looks great! I think it can work. Right now i&#39;m trying to make it work according to your example. I&#39;ll be in touch."}, {"owner": {"reputation": 13, "user_id": 4619907, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ghjUn.png?s=128&g=1", "display_name": "Tibor Mikita", "link": "https://stackoverflow.com/users/4619907/tibor-mikita"}, "edited": false, "score": 0, "creation_date": 1455138181, "post_id": 35319855, "comment_id": 58360502, "body": "Yep, your solution is fantastic. Thanks a lot :)"}, {"owner": {"reputation": 13, "user_id": 4619907, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ghjUn.png?s=128&g=1", "display_name": "Tibor Mikita", "link": "https://stackoverflow.com/users/4619907/tibor-mikita"}, "edited": false, "score": 0, "creation_date": 1460459333, "post_id": 35319855, "comment_id": 60741446, "body": "I found deadlock. Sometimes tfunc() notifies main thread, which will call cv.notify_all() before tfunc() gets to cv.wait(lck). So it wont be free and wait for notify that will never come. How can this be fixed? And i dont quit understand how can this work. When tfunc() lock mutex mtx with unique_lock and then waits for nofify, how can main thread notifies it, when main thread uses same mutex mtx before is calls cv.notify_all()."}], "tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": false, "score": 1, "last_activity_date": 1455120680, "last_edit_date": 1455120680, "creation_date": 1455119734, "answer_id": 35319855, "question_id": 35318942, "link": "https://stackoverflow.com/questions/35318942/stdcondition-variable-calling-notify-all-more-than-once/35319855#35319855", "title": "std::condition_variable calling notify_all more than once", "body": "<p>Is it just me or you are trying to block the main thread with a mutex (which is your way of trying to notify it when all threads are done?), I mean that's not the task of a mutex. That's where the condition variable should be used.</p>\n\n<pre><code>// New condition_variable, to nofity main thread when child is done with level\nstd::condition_variable cv2;\n\n// When a child is done, it will update this counter\nint counter = 0; // This is already protected by cvMtx, otherwise it could be atomic.\n\n// This is to sync cout\nstd::mutex cout_mutex;\n\nvoid tfunc()\n{\n    for (int i = 0; i &lt; 5; i++)\n    {\n        {\n            std::lock_guard&lt;std::mutex&gt; l(cout_mutex);\n            std::cout &lt;&lt; \"Level \" &lt;&lt; i + 1 &lt;&lt; \" \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n        }\n\n        {\n            std::lock_guard&lt;std::mutex&gt; l(cvMtx);\n            counter++; // update counter &amp;\n        }\n\n        cv2.notify_all(); // notify main thread we are done.\n\n        {\n            //wait for notify\n            unique_lock&lt;mutex&gt; lck(mtx);\n            cv.wait(lck);\n            // Note that I've removed the \"ready\" flag here\n            // That's because u would need multiple ready flags to make that work\n        }\n    }\n}\n\nint main()\n{\n    std::thread t1(tfunc);\n    std::thread t2(tfunc);\n\n    for (int i = 0; i &lt; 5; i++)\n    {\n        {\n            unique_lock&lt;mutex&gt; lck(cvMtx);\n\n            // Wait takes a predicate which u can take advantage of\n            cv2.wait(lck, [] { return (counter == 2); });\n            counter = 0;\n\n            // This thread will get notified multiple times\n            // But it only will wake up when counter matches 2\n            // Which equals to how many threads we've created.              \n        }\n\n        // Sleeping a bit to know the code is working\n        std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n\n        // Wake up all threds and continue to next level.\n        unique_lock&lt;mutex&gt; lck(mtx);\n        cv.notify_all();\n    }\n\n    t1.join();\n    t2.join();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "is_accepted": false, "score": 0, "last_activity_date": 1466199596, "last_edit_date": 1466199596, "creation_date": 1466198089, "answer_id": 37890466, "question_id": 35318942, "link": "https://stackoverflow.com/questions/35318942/stdcondition-variable-calling-notify-all-more-than-once/37890466#37890466", "title": "std::condition_variable calling notify_all more than once", "body": "<p>The synchronization can be done with a single counter, threads increment the counter under lock and check for the counter to reach a multiple of the number of concurrent threads.  This greatly simplifies the logic.  I've made this change and also grouped the shared variables into a class, and provided member functions to access them.  To avoid <a href=\"https://www.wikiwand.com/en/False_sharing\" rel=\"nofollow\">false sharing</a> I've ensured that variables that are read-only are separate from those that are read-write by the threads, and also separated read-write variables by usage.  The use of global variables is discouraged, see <a href=\"http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Ri-global\" rel=\"nofollow\">C++ Core Guidelines</a> for this and other good advice.</p>\n\n<p>The simplified code follows, you can see it <a href=\"http://ideone.com/CCJgsz\" rel=\"nofollow\">live in ideone</a>.  Note: it looks like there isn't true concurrency in ideone, you'll have to run this on a multi-core environment to actually test hardware concurrency.</p>\n\n<pre><code>//http://stackoverflow.com/questions/35318942/stdcondition-variable-calling-notify-all-more-than-once\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;vector&gt;\n#include &lt;condition_variable&gt;\n\nstatic constexpr size_t CACHE_LINE_SIZE = 64;\nstatic constexpr size_t NTHREADS        = 2;\nstatic constexpr size_t NLEVELS         = 5;\nstatic constexpr size_t NITERATIONS     = 100;\n\nclass Synchronize\n{\n    alignas(CACHE_LINE_SIZE) // read/write while threads are busy working\n    std::mutex mtx_std_cout;\n\n    alignas(CACHE_LINE_SIZE) // read/write while threads are synchronizing at level\n    std::mutex cvMtx;\n    std::condition_variable cv;\n    size_t threadsFinished{0};\n\n    alignas(CACHE_LINE_SIZE) // read-only parameters\n    const size_t n_threads;\n    const size_t n_levels;\n\npublic: // class Synchronize owns unique resources:\n    //   - must be explicitly constructed\n    //   - disallow default ctor,\n    //   - disallow copy/move ctor and\n    //   - disallow copy/move assignment\n\n    Synchronize( Synchronize const&amp; ) = delete;\n    Synchronize &amp; operator=( Synchronize const&amp; ) = delete;\n    explicit Synchronize( size_t nthreads, size_t nlevels )\n        : n_threads{nthreads}, n_levels{nlevels}\n    {}\n\n    size_t nlevels() const { return n_levels; }\n    std::mutex &amp; std_cout_mutex() { return mtx_std_cout; }\n    void level_done_wait_all( size_t level )\n    {\n        std::unique_lock&lt;std::mutex&gt; lk(cvMtx);\n        threadsFinished++;\n        cv.wait(lk, [&amp;]{return threadsFinished &gt;= n_threads * (level+1);});\n        cv.notify_all();\n    }\n};\n\nvoid tfunc( Synchronize &amp; sync )\n{\n    for(size_t i = 0; i &lt; sync.nlevels(); i++)\n    {\n        //do something\n        for (size_t j = 0; j &lt; NITERATIONS; j++) {\n            std::unique_lock&lt;std::mutex&gt; lck(sync.std_cout_mutex());\n            if (j == 0) std::cout &lt;&lt; '\\n';\n            std::cout &lt;&lt; ' ' &lt;&lt; i &lt;&lt; ',' &lt;&lt; j;\n        }\n\n        sync.level_done_wait_all(i);\n    }\n}\n\nint main() {\n\n    Synchronize sync{ NTHREADS, NLEVELS };\n\n    std::vector&lt;std::thread*&gt; threads(NTHREADS,nullptr);\n    for(auto&amp;t:threads) t = new std::thread(tfunc,std::ref(sync));\n    for(auto t:threads) {\n        t-&gt;join();\n        delete t;\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4619907, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ghjUn.png?s=128&g=1", "display_name": "Tibor Mikita", "link": "https://stackoverflow.com/users/4619907/tibor-mikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466199596, "creation_date": 1455117349, "last_edit_date": 1455118691, "question_id": 35318942, "link": "https://stackoverflow.com/questions/35318942/stdcondition-variable-calling-notify-all-more-than-once", "title": "std::condition_variable calling notify_all more than once", "body": "<p>First, let me introduce you to my problem.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex mtx;\nstd::mutex cvMtx;\nstd::mutex mtx2;\nbool ready{false};\nstd::condition_variable cv;\nint threadsFinishedCurrentLevel{0};\n\nvoid tfunc() {\n  for(int i = 0; i &lt; 5; i++) {\n    //do something\n    for (int j = 0; j &lt; 10000; j++) {\n      std::cout &lt;&lt; j &lt;&lt; std::endl;\n    }\n    //this is i-th level\n    mtx2.lock();\n    threadsFinishedCurrentLevel++;\n    if (threadsFinishedCurrentLevel == 2) {\n        //this is last thread in current level\n        threadsFinishedCurrentLevel = 0;\n        cvMtx.unlock();\n    }\n    mtx2.unlock();\n    {\n      //wait for notify\n      unique_lock&lt;mutex&gt; lck(mtx);\n      while (!ready) cv_.wait(lck);\n    }\n  }\n}\n\nint main() {\n  cvMtx.lock(); //init\n\n  std::thread t1(tfunc);\n  std::thread t2(tfunc);\n\n  for (int i = 0; i &lt; 5; i++) {\n    cvMtx.lock();\n    {\n      unique_lock&lt;mutex&gt; lck(mtx);\n      ready = true;\n      cv.notify_all();\n    }\n  }\n  t1.join();\n  t2.join();\n  return 0;\n}\n</code></pre>\n\n<p>I have 2 threads. My computation consists of levels(for this example, lets say we have 5 levels). On the same level, computation can be divided to threads. Each thread then calculates part of a problem. When i want to step to the next(higher) level, lower level must be first done. So my idea is something like this. When last thread on the current level is done, it unlocks main thread, so it can notify all of the threads to continue to next level. But this notify has to be called more then once. Because there are plenty of these levels. Can this condition_variable be restarted or something? Or do I need for each level one condition_variable? So for example, when i have 1000 levels, i need to allocate dynamically 1000x condition_variable?</p>\n"}, {"tags": ["c++", "algorithm", "optimization", "c++14", "template-meta-programming"], "comments": [{"owner": {"reputation": 1311, "user_id": 1265214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeca2beea29930391251f12d82c543fc?s=128&d=identicon&r=PG", "display_name": "pyj", "link": "https://stackoverflow.com/users/1265214/pyj"}, "edited": false, "score": 0, "creation_date": 1455595220, "post_id": 35318908, "comment_id": 58546926, "body": "Ok. I have an iterative version working that&#39;s left associative, that I can generalize (I hope) for TMP.  Did you want it right associative for odd numbers of elements or always left or right associative?"}, {"owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "edited": false, "score": 0, "creation_date": 1455619162, "post_id": 35318908, "comment_id": 58558780, "body": "Out of curiosity: This morning, the bounty was running for another three days. Was that bad information? I intended to write another answer and thought I had loads of time left."}, {"owner": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "edited": false, "score": 0, "creation_date": 1455621967, "post_id": 35318908, "comment_id": 58560536, "body": "I&#39;m rather new in bounties, dunno how exactly it works. I saw a nice and relevant answer and just gave it there."}, {"owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "edited": false, "score": 0, "creation_date": 1455662804, "post_id": 35318908, "comment_id": 58587123, "body": "Ok, I added my TMP variants anyway. Personally, I think you should wait with awarding the bounty until the end of the period. But I don&#39;t know if there is an accepted etiquette for that, actually."}, {"owner": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "reply_to_user": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "edited": false, "score": 0, "creation_date": 1455695369, "post_id": 35318908, "comment_id": 58598333, "body": "@Rumburak, thanks, this is much appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "edited": false, "score": 0, "creation_date": 1455616184, "post_id": 35424233, "comment_id": 58556625, "body": "I tried that with a <code>boost::circular_buffer&lt;cv::Mat&gt;</code> and I get a <code>no viable overloaded &#39;=&#39;</code> error at this line: <code>end = scratch_current</code>. I think that <code>end</code> has a type <code>It</code> and <code>scratch_current</code> a type <code>std::vector&lt;decltype(op(*begin, *end))&gt;::iterator</code>. In your example these two coincide since you&#39;re using a <code>std::vector&lt;int&gt;</code> (and since  <code>std::minus&lt;int&gt;</code> also results in <code>int</code>). What would be a solution to this?"}, {"owner": {"reputation": 1311, "user_id": 1265214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeca2beea29930391251f12d82c543fc?s=128&d=identicon&r=PG", "display_name": "pyj", "link": "https://stackoverflow.com/users/1265214/pyj"}, "reply_to_user": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "edited": false, "score": 0, "creation_date": 1455625217, "post_id": 35424233, "comment_id": 58562910, "body": "Good catch! You could replace the vector with the container type you are expecting by using a &quot;scratch type&quot;  template parameter. Either that or just update the function to write in place using the given integrators and avoid the copy (didn&#39;t try it but should work out)."}, {"owner": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "edited": false, "score": 0, "creation_date": 1455625341, "post_id": 35424233, "comment_id": 58562967, "body": "unless there was a way to extrapolate the container&#39;s type from its iterator.. or maybe there is?"}], "tags": [], "owner": {"reputation": 1311, "user_id": 1265214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeca2beea29930391251f12d82c543fc?s=128&d=identicon&r=PG", "display_name": "pyj", "link": "https://stackoverflow.com/users/1265214/pyj"}, "is_accepted": false, "score": 1, "last_activity_date": 1455599386, "creation_date": 1455599386, "answer_id": 35424233, "question_id": 35318908, "link": "https://stackoverflow.com/questions/35318908/optimise-binary-fold-algorithm-and-make-it-left-or-right-associative/35424233#35424233", "title": "optimise &quot;binary_fold&quot; algorithm and make it left (or right) associative", "body": "<p>I wrote an \"always-left associative\" iterative version, with some timing runs you can use as well.  It performs slightly worse until you turn on compiler optimizations.</p>\n\n<p>Total run times for 10000 iterations, with 5000 values.</p>\n\n<pre><code>g++ --std=c++11 main.cpp &amp;&amp; ./a.out\nRecursive elapsed:9642msec\nIterative elapsed:10189msec\n\n$ g++ --std=c++11 -O1 main.cpp &amp;&amp; ./a.out\nRecursive elapsed:3468msec\nIterative elapsed:3098msec\nIterative elapsed:3359msec # another run\nRecursive elapsed:3668msec\n\n$ g++ --std=c++11 -O2 main.cpp &amp;&amp; ./a.out\nRecursive elapsed:3193msec\nIterative elapsed:2763msec\nRecursive elapsed:3184msec # another run\nIterative elapsed:2696msec\n\n$ g++ --std=c++11 -O3 main.cpp &amp;&amp; ./a.out\nRecursive elapsed:3183msec\nIterative elapsed:2685msec\nRecursive elapsed:3106msec # another run\nIterative elapsed:2681msec\nRecursive elapsed:3054msec # another run\nIterative elapsed:2653msec\n</code></pre>\n\n<p>Compilers can have a little easier time optimizing loops than recursion.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;    \n\ntemplate&lt;class It, class Func&gt;\nauto binary_fold_rec(It begin, It end, Func op) -&gt;  decltype(op(*begin, *end)) {\n  std::ptrdiff_t diff = end - begin;\n  switch (diff) {\n    case 0: throw std::out_of_range(\"binary fold on empty container\");\n    case 1: return *begin;\n    case 2: return op(*begin, *(begin + 1));\n    default: { // first round to the nearest multiple of 2 and then advance\n      It mid{begin};\n      int div = diff/2;\n      int offset = (div%2 == 1) ? (div+1) : div; // round to the closest multiple of two (upwards)\n      std::advance(mid, offset);\n      return op( binary_fold_rec(begin,mid,op), binary_fold_rec(mid,end,op) );\n    }\n  }\n}\n\n\n// left-associative\ntemplate&lt;class It, class Func&gt;\nauto binary_fold_it(It begin, It end, Func op) -&gt; decltype(op(*begin, *end)) {\n    // Allocates enough scratch to begin with that we don't need to mess with again.\n    std::ptrdiff_t diff = end - begin;\n    std::vector&lt;decltype(op(*begin, *end))&gt; scratch (static_cast&lt;int&gt;(diff));\n    auto scratch_current = scratch.begin();\n\n    if(diff == 0) {\n        throw std::out_of_range(\"binary fold on empty container.\");\n    }\n\n    while(diff &gt; 1) {\n        auto fake_end = (diff &amp; 1) ? end - 1 : end; \n        while(begin != fake_end) {\n            (*scratch_current++) = op(*begin, *(begin+1));\n            begin += 2; // silly c++ can't guarantee ++ order, so increment here.\n        }\n        if(fake_end != end) {\n            *scratch_current++ = *begin;\n        }\n        end = scratch_current;\n        begin = scratch_current = scratch.begin();\n        diff = end - begin;\n    };\n    return scratch[0];\n}\n\n\nvoid run(std::initializer_list&lt;int&gt; elems, int expected) {\n    std::vector&lt;int&gt; v(elems);\n    auto result = binary_fold_it(v.begin(), v.end(), std::minus&lt;int&gt;());\n    std::cout &lt;&lt; result &lt;&lt; std::endl;\n    assert(binary_fold_it(v.begin(), v.end(), std::minus&lt;int&gt;()) == expected);\n}\n\nconstexpr int rolls = 10000;\nconstexpr int min_val = -1000;\nconstexpr int max_val = 1000;\nconstexpr int num_vals = 5000;\n\nstd::vector&lt;int&gt; random_vector() {\n    // Thanks http://stackoverflow.com/questions/21516575/fill-a-vector-with-random-numbers-c\n    // for saving me time.\n    std::uniform_int_distribution&lt;int&gt; distribution(min_val, max_val);\n    std::default_random_engine generator;\n    std::vector&lt;int&gt; data(num_vals);\n    std::generate(data.begin(), data.end(), [&amp;]() { return distribution(generator); });\n    return data;\n}\n\ntemplate&lt;typename It, typename Func&gt;\nvoid evaluate(void(*func)(It, It, Func), const char* message) {\n    auto start = std::chrono::high_resolution_clock::now();\n    for(int i=0; i&lt;rolls; i++) {\n        auto data = random_vector();\n        func(data.begin(), data.end(), std::minus&lt;int&gt;());\n    }\n    auto end = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; message &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end-start).count() &lt;&lt; \"msec\\n\";\n}\n\n\nvoid evaluate(void(*func)(), const char* message) {\n    auto start = std::chrono::high_resolution_clock::now();\n    for(int i=0; i&lt;rolls; i++) {\n        func();\n    }\n    auto end = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; message &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end-start).count() &lt;&lt; \"msec\\n\";\n}\n\n\nvoid time_it() {\n    auto data = random_vector();\n    binary_fold_it(data.begin(), data.end(), std::minus&lt;int&gt;());\n}\n\n\nvoid time_rec() {\n    auto data = random_vector();\n    binary_fold_rec(data.begin(), data.end(), std::minus&lt;int&gt;());\n}\n\n\nint main() {\n    evaluate(time_rec, \"Recursive elapsed:\");\n    evaluate(time_it, \"Iterative elapsed:\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "is_accepted": true, "score": 0, "last_activity_date": 1455662455, "creation_date": 1455662455, "answer_id": 35444429, "question_id": 35318908, "link": "https://stackoverflow.com/questions/35318908/optimise-binary-fold-algorithm-and-make-it-left-or-right-associative/35444429#35444429", "title": "optimise &quot;binary_fold&quot; algorithm and make it left (or right) associative", "body": "<p>I have two TMP versions. Which one is better, depends on the data types, I guess:</p>\n\n<p><strong>Solution A:</strong></p>\n\n<p>First, let's find a good offset for the split point (powers of two seem great):</p>\n\n<pre><code>template&lt;std::ptrdiff_t diff, std::ptrdiff_t V = 2&gt;\nstruct offset\n{\n  static constexpr std::ptrdiff_t value =\n      (V * 2 &lt; diff - 1) ? offset&lt;diff, V * 2&gt;::value : V;\n};\n\n// End recursion\ntemplate&lt;std::ptrdiff_t diff&gt;\nstruct offset&lt;diff, 1&lt;&lt;16&gt;\n{\n  static constexpr std::ptrdiff_t value = 1&lt;&lt;16;\n};\n\n// Some special cases\ntemplate&lt;&gt; \nstruct offset&lt;0, 2&gt;\n{\n  static constexpr std::ptrdiff_t value = 0;\n};\n\ntemplate&lt;&gt;\nstruct offset&lt;1, 2&gt; \n{\n  static constexpr std::ptrdiff_t value = 0;\n};\n\ntemplate&lt;&gt;\nstruct offset&lt;2, 2&gt;\n{\n  static constexpr std::ptrdiff_t value = 0;\n};\n</code></pre>\n\n<p>With this, we can create a recursive TMP version:</p>\n\n<pre><code>template &lt;std::ptrdiff_t diff, class It, class Func&gt;\nauto binary_fold_tmp(It begin, It end, Func op)\n    -&gt; decltype(op(*begin, *end))\n{\n  assert(end - begin == diff);\n  switch (diff)\n  {\n    case 0:\n      assert(false);\n      return 0;  // This will never happen\n    case 1:\n      return *begin;\n    case 2:\n      return op(*begin, *(begin + 1));\n    default:\n    {  // first round to the nearest multiple of 2 and then advance\n      It mid{begin};\n      std::advance(mid, offset&lt;diff&gt;::value);\n      auto left = binary_fold_tmp&lt;offset&lt;diff&gt;::value&gt;(begin, mid, op);\n      auto right =\n          binary_fold_tmp&lt;diff - offset&lt;diff&gt;::value&gt;(mid, end, op);\n      return op(left, right);\n    }\n  }\n}\n</code></pre>\n\n<p>This can be combined with a non-TMP version like this, for instance:</p>\n\n<pre><code>template &lt;class It, class Func&gt;\nauto binary_fold(It begin, It end, Func op)\n    -&gt; decltype(op(*begin, *end))\n{\n  const auto diff = end - begin;\n  assert(diff &gt; 0);\n  switch (diff)\n  {\n    case 1:\n      return binary_fold_tmp&lt;1&gt;(begin, end, op);\n    case 2:\n      return binary_fold_tmp&lt;2&gt;(begin, end, op);\n    case 3:\n      return binary_fold_tmp&lt;3&gt;(begin, end, op);\n    case 4:\n      return binary_fold_tmp&lt;4&gt;(begin, end, op);\n    case 5:\n      return binary_fold_tmp&lt;5&gt;(begin, end, op);\n    case 6:\n      return binary_fold_tmp&lt;6&gt;(begin, end, op);\n    case 7:\n      return binary_fold_tmp&lt;7&gt;(begin, end, op);\n    case 8:\n      return binary_fold_tmp&lt;8&gt;(begin, end, op);\n    default:\n      if (diff &lt; 16)\n        return op(binary_fold_tmp&lt;8&gt;(begin, begin + 8, op),\n                  binary_fold(begin + 8, end, op));\n      else if (diff &lt; 32)\n        return op(binary_fold_tmp&lt;16&gt;(begin, begin + 16, op),\n                  binary_fold(begin + 16, end, op));\n      else\n        return op(binary_fold_tmp&lt;32&gt;(begin, begin + 32, op),\n                  binary_fold(begin + 32, end, op));\n  }\n}\n</code></pre>\n\n<p><strong>Solution B:</strong></p>\n\n<p>This calculates the pair-wise results, stores them in a buffer, and then calls itself with the buffer:</p>\n\n<pre><code>template &lt;std::ptrdiff_t diff, class It, class Func, size_t... Is&gt;\nauto binary_fold_pairs_impl(It begin,\n                            It end,\n                            Func op,\n                            const std::index_sequence&lt;Is...&gt;&amp;)\n    -&gt; decltype(op(*begin, *end))\n{\n  std::decay_t&lt;decltype(*begin)&gt; pairs[diff / 2] = {\n      op(*(begin + 2 * Is), *(begin + 2 * Is + 1))...};\n\n  if (diff == 2)\n    return pairs[0];\n  else\n    return binary_fold_pairs_impl&lt;diff / 2&gt;(\n        &amp;pairs[0],\n        &amp;pairs[0] + diff / 2,\n        op,\n        std::make_index_sequence&lt;diff / 4&gt;{});\n}\n\ntemplate &lt;std::ptrdiff_t diff, class It, class Func&gt;\nauto binary_fold_pairs(It begin, It end, Func op) -&gt; decltype(op(*begin, *end))\n{\n  return binary_fold_pairs_impl&lt;diff&gt;(\n      begin, end, op, std::make_index_sequence&lt;diff / 2&gt;{});\n}\n</code></pre>\n\n<p>This template function requires <code>diff</code> to be a power of 2. But of course you can combine it with a non-template version, again:</p>\n\n<pre><code>template &lt;class It, class Func&gt;\nauto binary_fold_mix(It begin, It end, Func op) -&gt; decltype(op(*begin, *end))\n{\n  const auto diff = end - begin;\n  assert(diff &gt; 0);\n  switch (diff)\n  {\n    case 1:\n      return *begin;\n    case 2:\n      return binary_fold_pairs&lt;2&gt;(begin, end, op);\n    case 3:\n      return op(binary_fold_pairs&lt;2&gt;(begin, begin + 1, op),\n                *(begin + (diff - 1)));\n    case 4:\n      return binary_fold_pairs&lt;4&gt;(begin, end, op);\n    case 5:\n      return op(binary_fold_pairs&lt;4&gt;(begin, begin + 4, op),\n                *(begin + (diff - 1)));\n    case 6:\n      return op(binary_fold_pairs&lt;4&gt;(begin, begin + 4, op),\n                binary_fold_pairs&lt;4&gt;(begin + 4, begin + 6, op));\n    case 7:\n      return op(binary_fold_pairs&lt;4&gt;(begin, begin + 4, op),\n                binary_fold_mix(begin + 4, begin + 7, op));\n    case 8:\n      return binary_fold_pairs&lt;8&gt;(begin, end, op);\n    default:\n      if (diff &lt;= 16)\n        return op(binary_fold_pairs&lt;8&gt;(begin, begin + 8, op),\n                  binary_fold_mix(begin + 8, end, op));\n      else if (diff &lt;= 32)\n        return op(binary_fold_pairs&lt;16&gt;(begin, begin + 16, op),\n                  binary_fold_mix(begin + 16, end, op));\n      else\n        return op(binary_fold_pairs&lt;32&gt;(begin, begin + 32, op),\n                  binary_fold_mix(begin + 32, end, op));\n  }\n}\n</code></pre>\n\n<p>I measured with the same program as MtRoad. On my machine, the differences are not as big as MtRoad reported. With <code>-O3</code> solutions A and B seem to be slightly faster than MtRoad's version, but in reality, you need to test with your types and data.</p>\n\n<p>Remark: I did not test my versions too rigorously.</p>\n"}], "owner": {"reputation": 1575, "user_id": 5082337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/602d82f37f432daa9a2e1907a3f02b83?s=128&d=identicon&r=PG", "display_name": "Marinos K", "link": "https://stackoverflow.com/users/5082337/marinos-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 35444429, "answer_count": 2, "score": 1, "last_activity_date": 1455662455, "creation_date": 1455117277, "last_edit_date": 1495542199, "question_id": 35318908, "link": "https://stackoverflow.com/questions/35318908/optimise-binary-fold-algorithm-and-make-it-left-or-right-associative", "title": "optimise &quot;binary_fold&quot; algorithm and make it left (or right) associative", "body": "<p>Following <a href=\"https://stackoverflow.com/questions/35301733/algorithm-for-function-evaluation-by-pairs-c-stl\">my original question</a> and considering some of the proposed solutions I came up with this for C++14:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;exception&gt;\n#include &lt;iterator&gt;\n#include &lt;cstddef&gt;\n\ntemplate&lt;class It, class Func&gt;\nauto binary_fold(It begin, It end, Func op) -&gt;  decltype(op(*begin, *end)) {\n  std::ptrdiff_t diff = end - begin;\n  switch (diff) {\n    case 0: throw std::out_of_range(\"binary fold on empty container\");\n    case 1: return *begin;\n    case 2: return op(*begin, *(begin + 1));\n    default: { // first round to the nearest multiple of 2 and then advance\n      It mid{begin};\n      int div = diff/2;\n      int offset = (div%2 == 1) ? (div+1) : div; // round to the closest multiple of two (upwards)\n      std::advance(mid, offset);\n      return op( binary_fold(begin,mid,op), binary_fold(mid,end,op) );\n    }\n  }\n}\n</code></pre>\n\n<p>this algorithm will perform a binary operation pairwise recursively until a result is obtained. E.g.</p>\n\n<pre><code> std::vector&lt;int&gt; v = {1,3,5,6,1};\n auto result = mar::binary_fold(v.cbegin(), v.cend(), std::minus&lt;int&gt;());\n</code></pre>\n\n<p>will resolve in:</p>\n\n<pre><code>1 - (5-6) - (1-3) = 0\n</code></pre>\n\n<p>In some cases (like the one above) the algorithm will be left associative, but in others (like the following), it will be right associative: </p>\n\n<pre><code>  std::vector&lt;int&gt; v = {7,4,9,2,6,8};\n  auto result = mar::binary_fold(v.cbegin(), v.cend(), std::minus&lt;int&gt;());\n</code></pre>\n\n<p>results in: </p>\n\n<pre><code>(7-4) - (9-2) - (6-8) = -2\n</code></pre>\n\n<p>I'm wondering how I can further optimise this algorithm so that: </p>\n\n<p>a. it is definitely left or right associative</p>\n\n<p>b. it is as fast as possible (this will be put within an openGL drawing loop, so it has to be very fast).</p>\n\n<p>c. make a TMP version that will compute the offsets in compilation time when the size of the container is known (this is not necessary for my application, but I'm just curious of how it can be done).</p>\n\n<p>my first thoughts on b. is that an iterative version would be probably faster, and that the offset calculation could be further optimised (maybe with some bitwise magic?). I'm stuck nevertheless. </p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455117323, "post_id": 35318840, "comment_id": 58346520, "body": "As first step run your program in the debugger and step through line by line to find the exact source of that error."}, {"owner": {"reputation": 3, "user_id": 5908924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jOorxw5po94/AAAAAAAAAAI/AAAAAAAACsI/84rMECv7qGk/photo.jpg?sz=128", "display_name": "Philip Jackson", "link": "https://stackoverflow.com/users/5908924/philip-jackson"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455117458, "post_id": 35318840, "comment_id": 58346625, "body": "The program is building fine. The problem is only showing when I run it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455117470, "post_id": 35318840, "comment_id": 58346637, "body": "What input are you giving the program?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455117558, "post_id": 35318840, "comment_id": 58346725, "body": "@PhilipJackson Finding compiler errors isn&#39;t what I&#39;ve been referring to. Do you know what a debugger is at all?"}, {"owner": {"reputation": 752, "user_id": 5817031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7aff9e19559208d678b671a4fe986d?s=128&d=identicon&r=PG", "display_name": "ul90", "link": "https://stackoverflow.com/users/5817031/ul90"}, "edited": false, "score": 0, "creation_date": 1455117667, "post_id": 35318840, "comment_id": 58346820, "body": "the line <code>Sales_item nonzero = 0;</code> shows an compile error. cannot be compiled because there is no operator= or constructor defined that takes an integer."}, {"owner": {"reputation": 752, "user_id": 5817031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7aff9e19559208d678b671a4fe986d?s=128&d=identicon&r=PG", "display_name": "ul90", "link": "https://stackoverflow.com/users/5817031/ul90"}, "edited": false, "score": 0, "creation_date": 1455117745, "post_id": 35318840, "comment_id": 58346886, "body": "It&#39;s working if i change <code>Sales_item nonzero = 0;</code> to <code>Sales_item nonzero;</code> - without segfault (on OSX using clang compiler)."}, {"owner": {"reputation": 3, "user_id": 5908924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jOorxw5po94/AAAAAAAAAAI/AAAAAAAACsI/84rMECv7qGk/photo.jpg?sz=128", "display_name": "Philip Jackson", "link": "https://stackoverflow.com/users/5908924/philip-jackson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455118062, "post_id": 35318840, "comment_id": 58347149, "body": "@NathanOliver The error message is thrown before I get the chance to enter any input."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1455118067, "post_id": 35318840, "comment_id": 58347151, "body": "<code>Sales_item nonzero = 0</code> is wrong.  At best it will be a compiler error, at worst, a bunch of calls to conversion constructors, eventually leading to <code>std::string(const char* c)</code> with <code>c == nullptr</code>"}, {"owner": {"reputation": 3, "user_id": 5908924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jOorxw5po94/AAAAAAAAAAI/AAAAAAAACsI/84rMECv7qGk/photo.jpg?sz=128", "display_name": "Philip Jackson", "link": "https://stackoverflow.com/users/5908924/philip-jackson"}, "reply_to_user": {"reputation": 752, "user_id": 5817031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7aff9e19559208d678b671a4fe986d?s=128&d=identicon&r=PG", "display_name": "ul90", "link": "https://stackoverflow.com/users/5817031/ul90"}, "edited": false, "score": 0, "creation_date": 1455118232, "post_id": 35318840, "comment_id": 58347287, "body": "@ul90 Ah, you&#39;re right. This was the cause of the problem. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 2, "last_activity_date": 1455118052, "creation_date": 1455118052, "answer_id": 35319224, "question_id": 35318840, "link": "https://stackoverflow.com/questions/35318840/c-primer-exercise-1-20-run-error/35319224#35319224", "title": "C++ Primer Exercise 1.20 Run Error", "body": "<p>Your problem is caused by this line:</p>\n\n<pre><code>Sales_item nonzero = 0;\n</code></pre>\n\n<p>because of this constructor:</p>\n\n<pre><code>Sales_item(const std::string &amp;book)\n</code></pre>\n\n<p>which is used because<code>0</code> can denote a null <code>char*</code>, and a <code>std::string</code> can be constructed from a <code>char*</code>.</p>\n\n<p>Your problem occurs because constructing a <code>std::string</code> from the null pointer is invalid.</p>\n\n<p>The line should be</p>\n\n<pre><code>Sales_item nonzero;\n</code></pre>\n\n<p>(By the way, it's exceedingly rare for the tools to be at fault. The most likely culprit is always the code you wrote yourself.)</p>\n"}], "owner": {"reputation": 3, "user_id": 5908924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jOorxw5po94/AAAAAAAAAAI/AAAAAAAACsI/84rMECv7qGk/photo.jpg?sz=128", "display_name": "Philip Jackson", "link": "https://stackoverflow.com/users/5908924/philip-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 35319224, "answer_count": 1, "score": -1, "last_activity_date": 1455118052, "creation_date": 1455117122, "question_id": 35318840, "link": "https://stackoverflow.com/questions/35318840/c-primer-exercise-1-20-run-error", "title": "C++ Primer Exercise 1.20 Run Error", "body": "<p>Exercise 1.20 from the book C++ Primer 5th Edition is throwing an error when I run my program. I've tried running the program on 3 different computers with the same result. I have been using Visual Studio 2015 as my IDE. I suspect that Visual Studio is the culprit, but I don't know enough about it figure it out on my own, and I haven't had any luck with searches. Thanks!</p>\n\n<p>The error message is as follows:</p>\n\n<blockquote>\n  <p>Debug Assertion Failed!</p>\n  \n  <p>Program: C:\\Windows\\system32\\MSVCP140D.dll File: c:\\program files\n  (x86)\\microsoft visual studio 14.0\\vc\\include\\xstring Line: 1175</p>\n  \n  <p>Expression: invalid null pointer</p>\n</blockquote>\n\n<p>The following is my source code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Sales_item.h\"\n\n    int main()\n    {\n        Sales_item nonzero = 0;\n        while (std::cin &gt;&gt; nonzero)\n            std::cout &lt;&lt; nonzero;\n        return 0;\n    }\n</code></pre>\n\n<p>The header file \"Sales_item.h\" is as follows:</p>\n\n<pre><code>#ifndef SALESITEM_H\n// we're here only if SALESITEM_H has not yet been defined \n#define SALESITEM_H\n\n#include \"Version_test.h\" \n\n// Definition of Sales_item class and related functions goes here\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Sales_item {\n// these declarations are explained section 7.2.1, p. 270 \n// and in chapter 14, pages 557, 558, 561\nfriend std::istream&amp; operator&gt;&gt;(std::istream&amp;, Sales_item&amp;);\nfriend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const Sales_item&amp;);\nfriend bool operator&lt;(const Sales_item&amp;, const Sales_item&amp;);\nfriend bool \noperator==(const Sales_item&amp;, const Sales_item&amp;);\npublic:\n    // constructors are explained in section 7.1.4, pages 262 - 265\n    // default constructor needed to initialize members of built-in type\n#if defined(IN_CLASS_INITS) &amp;&amp; defined(DEFAULT_FCNS)\n    Sales_item() = default;\n#else\n    Sales_item(): units_sold(0), revenue(0.0) { }\n#endif\n    Sales_item(const std::string &amp;book):\n              bookNo(book), units_sold(0), revenue(0.0) { }\n    Sales_item(std::istream &amp;is) { is &gt;&gt; *this; }\npublic:\n    // operations on Sales_item objects\n    // member binary operator: left-hand operand bound to implicit this pointer\n    Sales_item&amp; operator+=(const Sales_item&amp;);\n\n    // operations on Sales_item objects\n    std::string isbn() const { return bookNo; }\n    double avg_price() const;\n// private members as before\nprivate:\n    std::string bookNo;      // implicitly initialized to the empty string\n#ifdef IN_CLASS_INITS\n    unsigned units_sold = 0; // explicitly initialized\n    double revenue = 0.0;\n#else\n    unsigned units_sold;  \n    double revenue;       \n#endif\n};\n\n// used in chapter 10\ninline\nbool compareIsbn(const Sales_item &amp;lhs, const Sales_item &amp;rhs) \n{ return lhs.isbn() == rhs.isbn(); }\n\n// nonmember binary operator: must declare a parameter for each operand\nSales_item operator+(const Sales_item&amp;, const Sales_item&amp;);\n\ninline bool \noperator==(const Sales_item &amp;lhs, const Sales_item &amp;rhs)\n{\n    // must be made a friend of Sales_item\n    return lhs.units_sold == rhs.units_sold &amp;&amp;\n           lhs.revenue == rhs.revenue &amp;&amp;\n           lhs.isbn() == rhs.isbn();\n}\n\ninline bool \noperator!=(const Sales_item &amp;lhs, const Sales_item &amp;rhs)\n{\n    return !(lhs == rhs); // != defined in terms of operator==\n}\n\n// assumes that both objects refer to the same ISBN\nSales_item&amp; Sales_item::operator+=(const Sales_item&amp; rhs) \n{\n    units_sold += rhs.units_sold; \n    revenue += rhs.revenue; \n    return *this;\n}\n\n// assumes that both objects refer to the same ISBN\nSales_item \noperator+(const Sales_item&amp; lhs, const Sales_item&amp; rhs) \n{\n    Sales_item ret(lhs);  // copy (|lhs|) into a local object that we'll return\n    ret += rhs;           // add in the contents of (|rhs|) \n    return ret;           // return (|ret|) by value\n}\n\nstd::istream&amp; \noperator&gt;&gt;(std::istream&amp; in, Sales_item&amp; s)\n{\n    double price;\n    in &gt;&gt; s.bookNo &gt;&gt; s.units_sold &gt;&gt; price;\n    // check that the inputs succeeded\n    if (in)\n        s.revenue = s.units_sold * price;\n    else \n        s = Sales_item();  // input failed: reset object to default state\n    return in;\n}\n\nstd::ostream&amp; \noperator&lt;&lt;(std::ostream&amp; out, const Sales_item&amp; s)\n{\n    out &lt;&lt; s.isbn() &lt;&lt; \" \" &lt;&lt; s.units_sold &lt;&lt; \" \"\n        &lt;&lt; s.revenue &lt;&lt; \" \" &lt;&lt; s.avg_price();\n    return out;\n}\n\ninline bool operator&lt;(const Sales_item &amp;, const Sales_item &amp;)\n{\n    return false;\n}\n\ndouble Sales_item::avg_price() const\n{\n    if (units_sold) \n        return revenue/units_sold; \n    else \n        return 0;\n}\n#endif\n</code></pre>\n\n<p>It references another header file called \"Version_test.h\".</p>\n\n<pre><code>#ifndef VERSION_TEST_H\n#define VERSION_TEST_H\n\n/* As of the first printing of C++ Primer, 5th Edition (July 2012), \n * the Microsoft Complier did not yet support a number of C++ 11 features.  \n *\n * The code we distribute contains both normal C++ code and \n * workarounds for missing features.  We use a series of CPP variables to\n * determine whether a given features is implemented in a given release\n * of the MS compiler.  The base version we used to test the code in the book\n * is Compiler Version 17.00.50522.1 for x86.\n *\n * When new releases are available we will update this file which will\n * #define the features implmented in that release.\n*/\n\n#if _MSC_FULL_VER == 170050522 || _MSC_FULL_VER == 170050727 \n// base version, future releases will #define those features as they are\n// implemented by Microsoft\n\n/* Code in this delivery use the following variables to control compilation\n\n   Variable tests           C++ 11 Feature \nCONSTEXPR_VARS            constexpr variables\nCONSTEXPR_FCNS            constexpr functions\nCONSTEXPR_CTORS           constexpr constructors and other member functions\nDEFAULT_FCNS              = default \nDELETED_FCNS              = delete  \nFUNC_CPP                  __func__ local static\nFUNCTION_PTRMEM           function template with pointer to member function\nIN_CLASS_INITS            in class initializers \nINITIALIZER_LIST          library initializer_list&lt;T&gt; template\nLIST_INIT                 list initialization of ordinary variables\nLROUND                    lround function in cmath\nNOEXCEPT                  noexcept specifier and noexcept operator\nSIZEOF_MEMBER             sizeof class_name::member_name\nTEMPLATE_FCN_DEFAULT_ARGS default template arguments for function templates\nTYPE_ALIAS_DECLS          type alias declarations\nUNION_CLASS_MEMS          unions members that have constructors or copy control\nVARIADICS                 variadic templates\n*/\n#endif  // ends compiler version check\n\n#ifndef LROUND\ninline long lround(double d)\n{\n    return (d &gt;= 0) ?  long(d + 0.5) : long(d - 0.5);\n}\n#endif\n\n#endif  // ends header guard\n</code></pre>\n"}, {"tags": ["c++", "windows-phone-8.1", "software-defined-radio"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455122999, "post_id": 35318834, "comment_id": 58351032, "body": "This is possible, hardware/firmware-wise?  Signals, what signals?"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455142556, "post_id": 35325019, "comment_id": 58362715, "body": "That&#39;s what I thought:)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455143264, "post_id": 35325019, "comment_id": 58363025, "body": "Point is that the bandwidth that modern mobile radio standards use are really too much for power-saving small CPUs like those in smartphones. To process 50Megasamples per second, you&#39;d need a really capable x86 CPU with SIMD instructions. In hardware, with specialized DSP in silicon, this is different."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135343, "creation_date": 1455135343, "answer_id": 35325019, "question_id": 35318834, "link": "https://stackoverflow.com/questions/35318834/how-to-write-code-to-interface-with-the-antenna-on-windows-phone-8-1/35325019#35325019", "title": "How to write code to interface with the antenna on windows phone 8.1", "body": "<p>You can't do that. Modern Mobile Phone Chipsets don't allow the CPU to access the raw RF signal.</p>\n"}], "owner": {"reputation": 1, "user_id": 5908956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17ae97b1412214399056aa5f06a9d9d?s=128&d=identicon&r=PG&f=1", "display_name": "Yellowlynx", "link": "https://stackoverflow.com/users/5908956/yellowlynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1455135343, "creation_date": 1455117095, "question_id": 35318834, "link": "https://stackoverflow.com/questions/35318834/how-to-write-code-to-interface-with-the-antenna-on-windows-phone-8-1", "title": "How to write code to interface with the antenna on windows phone 8.1", "body": "<p>I want to create an app for windows phone capable of accessing the antenna used for cellular communications as a kind of software defined radio antenna with a limited band.  Ideally the app will receive and analyze signals similarly to how various SDR programs analyze signals on other bands.</p>\n\n<p>My question is what lines of code, or library can I use to bypass the abstraction and access the radio antenna to receive signals on the appropriate band (850-950 MHz)?</p>\n\n<p>The hardware I am working with is a Samsung Ativ SE with Windows 8.1 on Verizon, I am currently developing in c++ with Visual Studio 2015, but could change compilers easily</p>\n"}, {"tags": ["c++", "string", "string-concatenation"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455117136, "post_id": 35318779, "comment_id": 58346372, "body": "You are trying to add pointers (which obviously isn&#39;t what you want to do). You should construct the whole path in a <code>std::string</code> variable first, and then pass <code>c_str()</code> to the <code>downloadFile()</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 983, "user_id": 2134973, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ea55e49eac434728f87b4ca9d60ec2de?s=128&d=identicon&r=PG", "display_name": "Rocket", "link": "https://stackoverflow.com/users/2134973/rocket"}, "edited": false, "score": 0, "creation_date": 1455186806, "post_id": 35318861, "comment_id": 58381064, "body": "Thanks I&#39;ve found this helpful."}], "tags": [], "owner": {"reputation": 752, "user_id": 5817031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7aff9e19559208d678b671a4fe986d?s=128&d=identicon&r=PG", "display_name": "ul90", "link": "https://stackoverflow.com/users/5817031/ul90"}, "is_accepted": false, "score": 2, "last_activity_date": 1455117175, "creation_date": 1455117175, "answer_id": 35318861, "question_id": 35318779, "link": "https://stackoverflow.com/questions/35318779/c-error-cannot-convert-stdbasic-stringchar-to-const-char/35318861#35318861", "title": "C++ error: cannot convert \u2018std::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019", "body": "<p>Try this:</p>\n\n<pre><code>downloadFile((decode(foo[5]) + \"filename.txt\").c_str(), \"/user/tmp/file.txt\");\n</code></pre>\n\n<p>The operator+ is not defined for char arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 5, "last_activity_date": 1455133007, "last_edit_date": 1455133007, "creation_date": 1455117191, "answer_id": 35318868, "question_id": 35318779, "link": "https://stackoverflow.com/questions/35318779/c-error-cannot-convert-stdbasic-stringchar-to-const-char/35318868#35318868", "title": "C++ error: cannot convert \u2018std::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019", "body": "<p>C-strings can't be concatenated with <code>+</code>.</p>\n\n<p>Use <code>std::string::+</code> instead:</p>\n\n<pre><code>downloadFile((test + \"filename.txt\").c_str(), \"/user/tmp/file.txt\");\n</code></pre>\n\n<p>Note that <code>c_str</code> only returns a pointer to the <code>std::string</code>'s internal character array, so it's valid only during the execution of the <code>downloadFile</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1455134227, "last_edit_date": 1455134227, "creation_date": 1455124649, "answer_id": 35321734, "question_id": 35318779, "link": "https://stackoverflow.com/questions/35318779/c-error-cannot-convert-stdbasic-stringchar-to-const-char/35321734#35321734", "title": "C++ error: cannot convert \u2018std::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019", "body": "<p>The main problem in your code is that you are trying to use <code>operator+</code> to concatenate raw <strong>C strings</strong> (i.e. raw <code>const char*</code> pointers, or raw <code>char []</code> arrays), which doesn't work.</p>\n\n<p>In C, you should use proper library functions (like <code>strncat</code> or safer variants) to do that; but since you are using <strong>C++</strong>, you can do better, and write <em>easier</em> code: just use a <strong>C++ string class</strong>, like <code>std::string</code>.</p>\n\n<p>In fact, the C++ standard library offers convenient overloads for <code>operator+</code> that work with <code>std::string</code>, so you can concatenate C++ strings in an easy, intuitive and safe way; for example:</p>\n\n<pre><code>// Build your URL string\nstd::string test = decode(foo[5]);\nstd::string url = test + \"filename.txt\";\n\n// Use std::string::c_str() to convert from C++ string\n// to C raw string pointer const char*\ndownloadFile(url.c_str(), \"/user/tmp/file.txt\");\n</code></pre>\n"}], "owner": {"reputation": 983, "user_id": 2134973, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ea55e49eac434728f87b4ca9d60ec2de?s=128&d=identicon&r=PG", "display_name": "Rocket", "link": "https://stackoverflow.com/users/2134973/rocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7974, "favorite_count": 3, "accepted_answer_id": 35318868, "answer_count": 3, "score": 2, "last_activity_date": 1455134227, "creation_date": 1455116961, "last_edit_date": 1455124713, "question_id": 35318779, "link": "https://stackoverflow.com/questions/35318779/c-error-cannot-convert-stdbasic-stringchar-to-const-char", "title": "C++ error: cannot convert \u2018std::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019", "body": "<p>I'm using a function to download a file.</p>\n\n<pre><code>void downloadFile(const char* url, const char* fname) {\n  //..\n}\n</code></pre>\n\n<p>This is called like :</p>\n\n<pre><code>downloadFile(\"http://servera.com/file.txt\", \"/user/tmp/file.txt\");\n</code></pre>\n\n<p>This working fine.  </p>\n\n<p>But I want to change the URL to be a value from an array. The array stores encrypted values which when decrypted are strings, so I get the issue <code>error: cannot convert \u2018std::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019</code></p>\n\n<p>I've tried:</p>\n\n<pre><code> string test = decode(foo[5]);\n const char* t1= test.c_str();\n downloadFile(t1 \"filename.txt\", \"/user/tmp/file.txt\");\n\ndownloadFile(t1 + \"filename.txt\", \"/user/tmp/file.txt\");\n</code></pre>\n\n<p>and </p>\n\n<pre><code>downloadFile((decode(foo[5]).c_str()) + \"filename.txt\", \"/user/tmp/file.txt\");\n</code></pre>\n\n<p>which gives:\n<code>error: invalid operands of types \u2018const char*\u2019 and \u2018const char [17]\u2019 to binary \u2018operator+\u2019</code></p>\n\n<p>What am I doing wrong ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "c++11", "polymorphism"], "comments": [{"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455116922, "post_id": 35318699, "comment_id": 58346216, "body": "@BoPersson They are not all the same type. I want to store objects templated on any type in the vector. Then I want to be able to compare two of those objects, only if they are the same type."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455117109, "post_id": 35318699, "comment_id": 58346348, "body": "@BoPersson Apparently my simplification did more harm than good! I updated the example to better show the use case. I meant that I know two objects are the same type because I do a type comparison test using <code>typeid()</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455117529, "post_id": 35318699, "comment_id": 58346696, "body": "@DavidDoria Ah.  I mistook what you were doing.  deleting comments."}], "answers": [{"comments": [{"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 0, "creation_date": 1455129996, "post_id": 35319029, "comment_id": 58355583, "body": "I would actually do a typeid check and a static_cast instead of the dynamic_cast, as the equality comparison may slice for comparisons derived from TypedChild&lt;T&gt;."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1455117586, "creation_date": 1455117586, "answer_id": 35319029, "question_id": 35318699, "link": "https://stackoverflow.com/questions/35318699/comparing-properties-of-templated-child-classes-from-base-class-pointers/35319029#35319029", "title": "Comparing properties of templated child classes from base class pointers", "body": "<p>With your use case, being able to avoid a <code>dynamic_cast</code> will be hard, if not impossible. If you want to get the value of just one object, you'll need to use <code>dynamic_cast</code>, such as:</p>\n\n<pre><code>Parent* child = ...;\n\nauto typedChild = dynamic_cast&lt;TypedChild*&gt;(child):\nif ( typedChild )\n{\n   int val = typedChild-&gt;getValue();\n}\n</code></pre>\n\n<p>If you want to compare two objects for equality, the best case scenario is to have a <code>virtual</code> <code>operator==()</code> function.</p>\n\n<pre><code>class Parent\n{\n   public:\n\n      virtual ~Parent(){}\n      virtual bool operator==(Parent const&amp; rhs) const = 0;\n\n};\n\ntemplate&lt;typename T&gt;\nclass TypedChild : public Parent\n{\n   public:\n      virtual ~TypedChild(){}\n      T getValue() {return mValue;}\n\n      virtual bool operator==(Parent const&amp; rhs) const\n      {\n         auto derivedRHS = dynamic_cast&lt;TypedChild&lt;T&gt; const*&gt;(&amp;rhs);\n         if ( !derivedRHS )\n         {\n            return false;\n         }\n         return (this-&gt;mValue == derivedRHS-&gt;mValue);\n      }\n\n   private:\n      T mValue;\n};\n</code></pre>\n"}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 35319029, "answer_count": 1, "score": 0, "last_activity_date": 1455117586, "creation_date": 1455116728, "last_edit_date": 1455117044, "question_id": 35318699, "link": "https://stackoverflow.com/questions/35318699/comparing-properties-of-templated-child-classes-from-base-class-pointers", "title": "Comparing properties of templated child classes from base class pointers", "body": "<p>I have a class template that derives from a parent class. I am storing the children in a vector as <code>Parent*</code>. I can later use <code>typeid</code> to determine if two objects are the same type. What I want to do is compare a property of two objects that are the same type. For simplicity, I have omitted storing the objects in a vector, but the concept is demonstrated below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n#include &lt;vector&gt;\n\nclass Parent{ public: virtual ~Parent(){}};\n\ntemplate&lt;typename T&gt;\nclass TypedChild : public Parent\n{\npublic:\n    virtual ~TypedChild(){}\n    T getValue() {return mValue;}\nprivate:\n    T mValue;\n};\n\nint main()\n{\n\n  Parent* child1 = new TypedChild&lt;int&gt;();\n  Parent* child2 = new TypedChild&lt;float&gt;();\n\n  std::vector&lt;Parent*&gt; objects;\n  objects.push_back(child1);\n  objects.push_back(child2);\n\n  if(typeid(*(objects[0])) == typeid(*(objects[1])))\n      if(objects[0]-&gt;getValue() == objects[1]-&gt;getValue()) // compiler error: Parent has no member named getValue\n          std::cout &lt;&lt; \"Success\";\n\n\n  return 0;\n}\n</code></pre>\n\n<p>Of course in this example I could dynamic_cast to <code>TypedChild&lt;int&gt;</code> before calling <code>getValue()</code>, but in the real case where the objects are in a vector I don't know their types, I just know that they are the same type so their <code>getValue()</code> functions should return the same type and can hence be compared.</p>\n\n<p>Is there any way to do this comparison?</p>\n"}, {"tags": ["c++", "return-value", "bit-shift"], "answers": [{"comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1455117038, "post_id": 35318735, "comment_id": 58346302, "body": "I&#39;m looking for any documentation to back that up but I can&#39;t seem to find anything"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1455160241, "post_id": 35318735, "comment_id": 58368354, "body": "without proper documentation quote this will probably be downvoted"}], "tags": [], "owner": {"reputation": 1, "user_id": 3727265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c781da1a67f4e0f77e1ab981e374df7?s=128&d=identicon&r=PG&f=1", "display_name": "UncleBarbeque", "link": "https://stackoverflow.com/users/3727265/unclebarbeque"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116827, "creation_date": 1455116827, "answer_id": 35318735, "question_id": 35318579, "link": "https://stackoverflow.com/questions/35318579/executing-command-with-system-returns-256-times-the-return-value-8-what/35318735#35318735", "title": "Executing command with system() returns 256 times the return value ( &lt;&lt; 8). What is the point of this?", "body": "<p>For the return value of any system call, the high 8 bits are the exit status and the low 8 are the signal ID. To retrieve the exit status, like you found out, you must shift the value 8 bits right.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1455118590, "last_edit_date": 1455118590, "creation_date": 1455117039, "answer_id": 35318813, "question_id": 35318579, "link": "https://stackoverflow.com/questions/35318579/executing-command-with-system-returns-256-times-the-return-value-8-what/35318813#35318813", "title": "Executing command with system() returns 256 times the return value ( &lt;&lt; 8). What is the point of this?", "body": "<p>As far as the language standards are concerned, the return value of <code>system()</code> is implementation-defined.  There is no justification there for assuming that the return value of <code>system()</code> has any relationship to the exit status of the command that is run.</p>\n\n<p>With a POSIX-conformant library, however, the return value of a successful call to <code>system()</code> is defined to be in the format used by the <code>wait</code>(2) function.  I speculate that this is for consistency, and perhaps also for ease of implementation.  In any event, that return value carries information not only about the exit status, but also about how the process terminated  -- normally, or because of a signal -- and other information.  On such a system, one is expected to check whether the process exited normally by applying the <code>WIFEXITED()</code> macro to the code, and to extract the exit status itself via the <code>WEXITSTATUS()</code> macro.  These macros will be declared in <code>sys/wait.h</code>.</p>\n\n<p>That's all very C-ish, of course.  There is likely a more C++-ish alternative to some of that.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1455117685, "last_edit_date": 1455117685, "creation_date": 1455117176, "answer_id": 35318862, "question_id": 35318579, "link": "https://stackoverflow.com/questions/35318579/executing-command-with-system-returns-256-times-the-return-value-8-what/35318862#35318862", "title": "Executing command with system() returns 256 times the return value ( &lt;&lt; 8). What is the point of this?", "body": "<p>The return value of <a href=\"http://en.cppreference.com/w/cpp/utility/program/system\" rel=\"nofollow\"><code>system</code></a> is implementation defined. Especially, it's not defined to return the value that the executed command passed to <code>exit</code>.</p>\n\n<p><em>Why</em> does your system in particular happen to not return only the return value of the command, but also a low order byte that happened to be 0... well that also depends on which implementation you are using.</p>\n\n<p>In case you happen to be using POSIX, you can read this <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html\" rel=\"nofollow\">manual</a> to find out what <code>system</code> returns:</p>\n\n<blockquote>\n  <p>If command is not a null pointer, system() shall return the termination status of the command language interpreter in the format specified by waitpid()</p>\n</blockquote>\n\n<p>And the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html\" rel=\"nofollow\">manual</a> for <code>waitpid</code> tells you what information can be interpreted from the return value, and how.</p>\n"}], "owner": {"reputation": 655, "user_id": 5436419, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-xcGjubk3_rI/AAAAAAAAAAI/AAAAAAAAAbo/zgIOA4vnSXY/photo.jpg?sz=128", "display_name": "Ben Turner", "link": "https://stackoverflow.com/users/5436419/ben-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 35318813, "answer_count": 3, "score": 1, "last_activity_date": 1455118590, "creation_date": 1455116421, "question_id": 35318579, "link": "https://stackoverflow.com/questions/35318579/executing-command-with-system-returns-256-times-the-return-value-8-what", "title": "Executing command with system() returns 256 times the return value ( &lt;&lt; 8). What is the point of this?", "body": "<p>It took me a while to find the solution to the issue I was having in relation to this:</p>\n\n<pre><code>status = system(\"[ -e myFile ] &amp;&amp; exit 1 || exit 101\");\n\nif(status == 101)\n{\n    ...\n</code></pre>\n\n<p>The return value was being sent back as 25856 (101*256 (or 101 &lt;&lt; 8)).</p>\n\n<p>None of the answers I found indicated the REASON that this effective 256 multiplication occurs...</p>\n\n<p>Anyone able to provide an explanation for me?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "windows", "winapi", "windows-10"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1455117722, "post_id": 35318521, "comment_id": 58346860, "body": "Your code has always worked, subject to the 32 but, 49 day wrap around that can be fixed with <code>GetTickCount64</code>. Your edits suggest that you don&#39;t have a very clear idea of what you are doing at all. The registry is not the place to look for uptime. I wonder if you are really opening your mind properly to this problem."}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1455118074, "post_id": 35318521, "comment_id": 58347161, "body": "It seems you don&#39;t really understand that I did shutdown the computer, unplugged the cable and waited for a minute. Still the system uptime was that of 500 hours. Do you think I&#39;m trying to fool anyone? Whats the problem?"}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1455118128, "post_id": 35318521, "comment_id": 58347199, "body": "It was not until I rebooted that it actually rested."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1455118218, "post_id": 35318521, "comment_id": 58347277, "body": "Never mind. This is not productive."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455117551, "post_id": 35318698, "comment_id": 58346720, "body": "I shutdown my computer everyday."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 2, "creation_date": 1455117648, "post_id": 35318698, "comment_id": 58346801, "body": "Apparently not. You&#39;ve been suspending the system rather than shutting it down."}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455117738, "post_id": 35318698, "comment_id": 58346874, "body": "Well, I&#39;ve been using Power -&gt; Shutdown."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455117810, "post_id": 35318698, "comment_id": 58346935, "body": "Well, the evidence suggests otherwise."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1455138604, "post_id": 35318698, "comment_id": 58360728, "body": "Doesn&#39;t Windows 10 use a form of hibernation automatically (regardless of what you tell it to do) in order to speed boot times?"}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455175475, "post_id": 35318698, "comment_id": 58373886, "body": "This would explain why I the value was so high and not 0 every time I start the computer."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 1, "last_activity_date": 1455116728, "creation_date": 1455116728, "answer_id": 35318698, "question_id": 35318521, "link": "https://stackoverflow.com/questions/35318521/gettickcount-values-on-windows-10/35318698#35318698", "title": "GetTickCount values on Windows 10", "body": "<p>500 hours uptime is not especially surprising. That's around 20 days. Modern systems are seldom shutdown. Typically they are suspended rather than shutdown. I think your system really has been up for 500 hours. </p>\n\n<p>Of course, you should be using <code>GetTickCount64</code> to work with a 64 bit tick count. That will avoid the 49 day wrap around that is a consequence of the 32 bit values returned by <code>GetTickCount</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455117279, "post_id": 35318740, "comment_id": 58346484, "body": "Well this answers how to get the Uptime, thx. I will do an edit to display some other findings I did."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 5, "last_activity_date": 1455116838, "creation_date": 1455116838, "answer_id": 35318740, "question_id": 35318521, "link": "https://stackoverflow.com/questions/35318521/gettickcount-values-on-windows-10/35318740#35318740", "title": "GetTickCount values on Windows 10", "body": "<p>The documentation for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx\"><code>GetTickCount</code></a> describes the correct way to get the system up-time:</p>\n\n<blockquote>\n  <p>To obtain the time elapsed since the computer was started, retrieve\n  the System Up Time counter in the performance data in the registry key\n  HKEY_PERFORMANCE_DATA. The value returned is an 8-byte value. For more\n  information, see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa373083(v=vs.85).aspx\">Performance Counters</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455174958, "post_id": 35331467, "comment_id": 58373625, "body": "Thanks! I will look into this today."}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455180690, "post_id": 35331467, "comment_id": 58376914, "body": "I am unfortunately not successful with this, according to your link to MSDN the <code>SystemTimeOfDayInformation</code> does retrieve a <code>SYSTEM_TIMEOFDAY_INFORMATION</code> but this does not have the <code>BootTime</code> field. It seems to be used for randomizing instead. I may be wrong but I didnt get it to work."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 1, "creation_date": 1455232063, "post_id": 35331467, "comment_id": 58410993, "body": "@Gurra: I assure you, the real data actually has <code>BootTime</code> and <code>CurrentTime</code> fields (I use them in my code, so I know they work).  MSDN is simply hiding the fields from documentation. I have included the &quot;real&quot; declaration in my answer now."}, {"owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "edited": false, "score": 0, "creation_date": 1455363274, "post_id": 35331467, "comment_id": 58463558, "body": "OK, I will try again next week. I did try and use this but will include some of my code next time i try. Thanks!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1455232189, "last_edit_date": 1495540832, "creation_date": 1455168667, "answer_id": 35331467, "question_id": 35318521, "link": "https://stackoverflow.com/questions/35318521/gettickcount-values-on-windows-10/35331467#35331467", "title": "GetTickCount values on Windows 10", "body": "<blockquote>\n  <p>Im trying to use the GetTickCount() in Windows API to get the system uptime. I want to know how long the system has been running. </p>\n</blockquote>\n\n<p>In addition to what others have said, there is another alternative solution.</p>\n\n<p>You can call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724509.aspx\" rel=\"nofollow noreferrer\"><code>NtQuerySystemInformation()</code></a> from <code>ntdll.dll</code>, setting its <code>SystemInformationClass</code> parameter to <code>SystemTimeOfDayInformation</code> to retrieve a <code>SYSTEM_TIMEOFDAY_INFORMATION</code> structure containing <code>BootTime</code> and <code>CurrentTime</code> fields as <code>LARGE_INTEGER</code> values:</p>\n\n<pre><code>typedef struct _SYSTEM_TIMEOFDAY_INFORMATION {\n    LARGE_INTEGER BootTime;\n    LARGE_INTEGER CurrentTime;\n    LARGE_INTEGER TimeZoneBias;\n    ULONG TimeZoneId;\n    ULONG Reserved;\n    ULONGLONG BootTimeBias;\n    ULONGLONG SleepTimeBias;\n} SYSTEM_TIMEOFDAY_INFORMATION, *PSYSTEM_TIMEOFDAY_INFORMATION;\n</code></pre>\n\n<p>You can simply subtract <code>BootTime</code> from <code>CurrentTime</code> to get the elapsed time that Windows has been running (this is exactly how Task Manager calculates the \"System Up Time\").</p>\n\n<p><a href=\"https://stackoverflow.com/a/26074521/65863\">How to get Windows boot time?</a></p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20150512-00/?p=44884/\" rel=\"nofollow noreferrer\">How does Task Manager compute Up Time, and why doesn\u2019t it agree with GetTickCount?</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6744348, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a7ba7ca610c436227a693300a91c2c68?s=128&d=identicon&r=PG", "display_name": "Phuphus", "link": "https://stackoverflow.com/users/6744348/phuphus"}, "is_accepted": false, "score": 2, "last_activity_date": 1471880413, "creation_date": 1471880413, "answer_id": 39083623, "question_id": 35318521, "link": "https://stackoverflow.com/questions/35318521/gettickcount-values-on-windows-10/39083623#39083623", "title": "GetTickCount values on Windows 10", "body": "<p>I just had the same problem. I solved it by :</p>\n\n<ul>\n<li>using the restart command rather that shutting down the computer : this performs a true restart of the computer and not a \"half-hibernation\" like the shutdown command when the \"fast startup\" is enabled</li>\n<li>disabling the \"fast startup\" option. This fast startup option leads to a non reseted GetTickCount at startup !!</li>\n</ul>\n\n<p>I guess that a lot of old programs will bug again with W10 and the fast startup option...</p>\n"}], "owner": {"reputation": 125, "user_id": 4940776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0df3a1810c6b31630c81e7ea7952e7?s=128&d=identicon&r=PG&f=1", "display_name": "Gurra", "link": "https://stackoverflow.com/users/4940776/gurra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3996, "favorite_count": 3, "answer_count": 4, "score": 4, "last_activity_date": 1471880413, "creation_date": 1455116267, "last_edit_date": 1455193126, "question_id": 35318521, "link": "https://stackoverflow.com/questions/35318521/gettickcount-values-on-windows-10", "title": "GetTickCount values on Windows 10", "body": "<p>Im trying to use the GetTickCount() in Windows API to get the system uptime. I want to know how long the system has been running. </p>\n\n<p>However the return from GetTickCount is insanely high. This code gives me uptime of over 500 hours. </p>\n\n<p>This goes for GetTickCount64() as well.</p>\n\n<p>Why is this value so high?</p>\n\n<pre><code>DWORD time_ms = GetTickCount();\nDWORD seconds = (time_ms / 1000) % 60;\nDWORD minutes = time_ms /(1000*60) % 60;\nDWORD hours = time_ms / (1000*60*60);\nstringstream ss;\nss &lt;&lt; \"Hours: \";\nss &lt;&lt; hours;\nss &lt;&lt; \" Minutes: \";\nss &lt;&lt; minutes;\nss &lt;&lt; \" seconds: \";\nss &lt;&lt; seconds;\nMessageBoxA(0, ss.str().c_str(), \"Uptime\", 0);\n</code></pre>\n\n<p>As i run the program I can see that it is progressing correctly, but cannot comprehend how I will get the total uptime for my desktop. </p>\n\n<p>Thanks</p>\n\n<p><strong>Edit</strong>: \nI checked the uptime with \"systeminfo\" in CMD and found that the \"System boot time\" was actually aprox ~500hours ago. So  I shut down the computer and unplugged the electricity, booted but still,the System boot time had this high value. However, restarting the computer made it reset, and now my code works.  </p>\n\n<p><strong>EDIT 2:</strong>\nThis blog <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20141113-00/?p=43623\" rel=\"nofollow\">https://blogs.msdn.microsoft.com/oldnewthing/20141113-00/?p=43623</a> states that GetTickCount should rather be used for measuring time intervals than what I'm trying to achieve. Seems like I have to look at the registry. </p>\n\n<p><strong>EDIT 3:</strong></p>\n\n<p>After finding the right counter in the registry, it has the same value has GetTickCount and similar functions. It seems that shut down in Windows brings it to some sort of hibernation. I have not found any solution to this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1455116806, "post_id": 35318501, "comment_id": 58346121, "body": "What happens if you explicitly tell to generate a default constructor (<code>C() = default;</code>)?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455116877, "post_id": 35318501, "comment_id": 58346176, "body": "Yes, there are rules. Start from <a href=\"http://eel.is/c++draft/except.spec#17\" rel=\"nofollow noreferrer\">&#91;except.spec&#93;/17</a> and go up."}, {"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "edited": false, "score": 0, "creation_date": 1455117193, "post_id": 35318501, "comment_id": 58346417, "body": "Just saying <code>=default</code> does not change anything. I&#39;ve tried specifiying <code>C() noexcept(false)=default;</code> but this generates syntax error"}, {"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455117293, "post_id": 35318501, "comment_id": 58346496, "body": "@T.C. it refers only to special member functions and says nothing about constructors of member variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 1, "creation_date": 1455117413, "post_id": 35318501, "comment_id": 58346592, "body": "Perhaps worth keeping in mind is that the rules changed after C++14. The rules linked to by T.C. may or may not be what your particular versions of your compilers implement."}, {"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "edited": false, "score": 0, "creation_date": 1455117701, "post_id": 35318501, "comment_id": 58346849, "body": "If (at least some of) those rules are still valid, it looks like for constructor, compiler must form a &quot;set&quot; of all types of exceptions any base class constructors and any member constructors might throw and then decide upon the results. As far as I know VC never supported <code>throw(type)</code>, so for them this set is either &quot;empty&quot; for <code>noexcept</code> or non-empty. Then does it look like a bug in compiler(s)?"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "edited": false, "score": 0, "creation_date": 1455119070, "post_id": 35318999, "comment_id": 58347958, "body": "<i>If f is a default constructor or inheriting constructor, the set also contains all members of the sets of potential exceptions of the initialization of non-static data members from brace-or-equal-initializers.</i> - a quote from DR1351 makes me think that compiler incorrectly produces a <code>noexcept</code> default constructor here. Looks like a bug."}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": true, "score": 1, "last_activity_date": 1455117514, "creation_date": 1455117514, "answer_id": 35318999, "question_id": 35318501, "link": "https://stackoverflow.com/questions/35318501/when-does-compiler-mark-default-generated-constructor-as-noexcept/35318999#35318999", "title": "When does compiler mark default generated constructor as noexcept?", "body": "<p>I'm going by C++14 here; I don't know if post-C++14 wording changes clarified the situation.</p>\n\n<p>The problem is that the standard's language for generated noexcept specifications in the face of in-class initializers is rather unclear. The standard says for generated member functions in 17p14:</p>\n\n<blockquote>\n  <p><code>f</code> allows all exceptions if any function it directly invokes allows all exceptions, and <code>f</code> has the <em>exception-specification</em> <code>noexcept(true)</code> if every function it directly invokes allows no exceptions.</p>\n</blockquote>\n\n<p>However, \"directly invokes\" is not clearly defined in the standard, and is not obvious when it comes to in-class initializers. Your class <code>C</code> invokes <code>std::make_shared&lt;B&gt;</code> (which obviously can throw regardless of B's exception specification, as it allocates memory) and the copy constructor of <code>std::shared_ptr&lt;B&gt;</code> (which is noexcept) in its initializer, but do those count as \"directly invoked\", or does only the copy constructor count?</p>\n\n<p>It may well be that this is where the compilers differ in interpretation. Clang appears to count <code>make_shared</code>, while the other compilers apparently don't.</p>\n\n<p>Giving <code>B</code> a default constructor should change nothing, since that constructor is only called from within <code>make_shared</code> and is therefore definitely out of the view of the compiler; if it does change something, there's something seriously wrong.</p>\n\n<p>However, giving <code>C</code> an empty, non-defaulted default constructor should most definitely mean that the constructor is not noexcept, and different behavior is definitely a bug.</p>\n"}, {"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 1, "last_activity_date": 1455118295, "last_edit_date": 1455118295, "creation_date": 1455117986, "answer_id": 35319198, "question_id": 35318501, "link": "https://stackoverflow.com/questions/35318501/when-does-compiler-mark-default-generated-constructor-as-noexcept/35319198#35319198", "title": "When does compiler mark default generated constructor as noexcept?", "body": "<p>It seems that this is a compiler bug that has to do with <a href=\"http://en.cppreference.com/w/cpp/language/data_members#Member_initialization\" rel=\"nofollow\"><em>default member initializers</em></a>. Note the following workaround fixes GCC:</p>\n\n<pre><code>struct C\n{\n    std::shared_ptr&lt;B&gt; b;\n    C() : b{std::make_shared&lt;B&gt;()} {}\n};\n</code></pre>\n\n<p><kbd><a href=\"http://rextester.com/SRJQ88734\" rel=\"nofollow\">Demo</a></kbd></p>\n\n<p><strong>whereas all of this <em>still</em> crashes</strong> (note I explicitly used <code>noexecpt(false)</code>).</p>\n\n<pre><code>struct A\n{\n    A() noexcept(false)\n    {\n        throw E();\n    }\n};\n\nstruct B\n{\n    A a;\n    B() noexcept(false) {}\n};\n\nstruct C\n{\n    std::shared_ptr&lt;B&gt; b{ std::make_shared&lt;B&gt;() };\n    C() noexcept(false) {}\n};\n</code></pre>\n\n<p><kbd><a href=\"http://rextester.com/BYYI98582\" rel=\"nofollow\">Demo</a></kbd></p>\n\n<p>even further, keeping the default initializer but overriding it with a specific one, also fixes things:</p>\n\n<pre><code>struct C\n{\n    std::shared_ptr&lt;B&gt; b{ std::make_shared&lt;B&gt;() };\n    C() : b(std::make_shared&lt;B&gt;()) {}\n};\n</code></pre>\n\n<p><kbd><a href=\"http://rextester.com/JIBZ45922\" rel=\"nofollow\">Demo</a></kbd></p>\n\n<p>So it definitely seems to me to be a bug in GCC, at least.</p>\n"}], "owner": {"reputation": 401, "user_id": 4256624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd888bbf1dfce7d0329193acc4511d5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bessonov", "link": "https://stackoverflow.com/users/4256624/alexander-bessonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 3, "accepted_answer_id": 35318999, "answer_count": 2, "score": 15, "last_activity_date": 1455118295, "creation_date": 1455116191, "last_edit_date": 1455116526, "question_id": 35318501, "link": "https://stackoverflow.com/questions/35318501/when-does-compiler-mark-default-generated-constructor-as-noexcept", "title": "When does compiler mark default generated constructor as noexcept?", "body": "<p>It seems like at modern versions of at least some compilers (GCC 5.2 and Visual C++ 2015 Update 1) incorrectly generate <code>noexcept</code> default constructors when there are initialized class members:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;exception&gt;\n#include &lt;iostream&gt;\n\nstruct E {};\n\nstruct A\n{\n    A()\n    {\n        throw E();\n    }\n};\n\nstruct B\n{\n    A a;\n};\n\nstruct C\n{\n    std::shared_ptr&lt;B&gt; b{ std::make_shared&lt;B&gt;() };\n        //C() {}  // uncomment to fix\n};\n\nint main()\n{\n    try\n    {\n        new C;\n    }\n    catch (const E &amp;)\n    {\n        std::cout &lt;&lt; \"Exception caught\\n\";\n    }\n    std::cout &lt;&lt; \"Exiting...\\n\";\n}\n</code></pre>\n\n<p>Running this code causes <code>std::terminate</code> to be called (instead of invoking catch block) on GCC 5.2 (C++14 mode) and Visual C++ 2015 Update 1.</p>\n\n<p>Live example:\n<a href=\"http://coliru.stacked-crooked.com/view?id=16efc34ec173aca7\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/view?id=16efc34ec173aca7</a></p>\n\n<p>Uncommenting empty constructor fixes this code for Visual C++, but not for GCC. Clang 3.6 correctly (I suppose?) calls catch block in any case.</p>\n\n<p>Are there any rules in Standard that tell when the default generated constructor must be marked as <code>noexcept</code>?</p>\n"}, {"tags": ["c++", "c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1455116346, "post_id": 35318428, "comment_id": 58345768, "body": "Things are far more complicated than you think. A executable file contains more than machine code. For executing an executable file (binary) the operating systems loads the file into memory and does a lot of complicated things before the actual execution of the code takes place."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1455121654, "post_id": 35318477, "comment_id": 58349989, "body": "Please clarify &quot;file prefix&quot;.  What OSes use a file prefix?"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455139096, "post_id": 35318477, "comment_id": 58361012, "body": "@ThomasMatthews Read about ELF (Linux) or PE (Windows) file format. There is structure with executable info in the beginning in addition to real executable instructions. In short it can be called &quot;prefix&quot;. Do you agree?"}], "tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116142, "creation_date": 1455116142, "answer_id": 35318477, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318477#35318477", "title": "Trying to execute any binary from c", "body": "<p>You can run such hex code but you cannot get an executable file without modifications. There is file prefix which is for the OS and is not assembly opcodes.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135295, "last_edit_date": 1455135295, "creation_date": 1455116413, "answer_id": 35318576, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318576#35318576", "title": "Trying to execute any binary from c", "body": "<p>It is certainly implementation specific, practically dependent upon your <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow\">operating system</a> and processor <a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow\">instruction set</a> (and <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow\">calling conventions</a>).</p>\n\n<p><sup>(I guess and hope you are on Linux; but your question is unclear)</sup></p>\n\n<p>On Linux/x86_64, most of the memory in your <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow\">virtual address space</a> is <em>not</em> executable (for security reasons). Try running your program with <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow\">strace(1)</a> to understand the relevant system calls. Also use the debugger <code>gdb</code>. You may need to make the segment containing your binary code executable, e.g. with <a href=\"http://man7.org/linux/man-pages/man2/mprotect.2.html\" rel=\"nofollow\">mprotect(2)</a>. If your process is 1234, try <code>cat /proc/1234/maps</code> in some other terminal (to query its virtual address space). Read more about <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">proc(5)</a> for details.</p>\n\n<p>Perhaps you should consider <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow\">JIT compilation</a> techniques and libraries like <a href=\"https://github.com/kobalicek/asmjit\" rel=\"nofollow\">asmjit</a>, <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow\">GCCJIT</a>, etc...</p>\n\n<p>BTW, an <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\">ELF</a> executable file is quite complex, and does not start with executable <a href=\"https://en.wikipedia.org/wiki/Machine_code\" rel=\"nofollow\">machine code</a>. Read also <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\" rel=\"nofollow\">elf(5)</a>. Use <a href=\"http://man7.org/linux/man-pages/man1/objdump.1.html\" rel=\"nofollow\">objdump(1)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man1/readelf.1.html\" rel=\"nofollow\">readelf(1)</a> to explore and understand ELF executables. This might explain why your experiment failed (but we don't know how did you come with <code>char code[] = {0x7f,0x45,0x4c,0x46</code> .... these few bytes look like some ELF header)</p>\n\n<p>You probably should <em>carefully</em> extract some functions (i.e. their machine code &amp; data) from your ELF executable and deal with <a href=\"https://en.wikipedia.org/wiki/Relocation_%28computing%29\" rel=\"nofollow\">relocations</a> (and <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow\">name mangling</a>, for C++), if you want to continue your experiment. Reading Levine's book on <a href=\"http://www.iecc.com/linker/\" rel=\"nofollow\"><em>Linkers &amp; Loaders</em></a> will be helpful.</p>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1455116559, "post_id": 35318598, "comment_id": 58345947, "body": "if running bare metal on a microcontroller for example, then you can simply branch to the array of instructions and it should work just fine (well so long as they are aligned right and are actually instructions that terminate properly or end in a loop."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116484, "creation_date": 1455116484, "answer_id": 35318598, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318598#35318598", "title": "Trying to execute any binary from c", "body": "<p>I assume this is on your pc or laptop or whatever computer you are reading this webpage on.   Each program is prevented from running arbitrary code in memory, or even accessing code outside its space.   you have a program and you have data in an array, which you may know to be instructions but the operating system and the compiler, etc know to be data.  So you have to talk to the operating system to ask it to allow you to execute that code.  Search for self modifying code here at stackoverflow or on the net.  probably want to use mmap() if running on linux.</p>\n"}], "owner": {"reputation": 11, "user_id": 5908874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153233487316090/picture?type=large", "display_name": "Sergio Mancera", "link": "https://stackoverflow.com/users/5908874/sergio-mancera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "closed_date": 1455116772, "answer_count": 3, "score": -4, "last_activity_date": 1455135295, "creation_date": 1455115967, "last_edit_date": 1495539912, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c", "closed_reason": "Needs details or clarity", "title": "Trying to execute any binary from c", "body": "<p>I followed this <a href=\"https://stackoverflow.com/questions/18476002/execute-binary-machine-code-from-c\">thread</a> in order to execute some binary code.</p>\n\n<p>The tinky_winky's answer, while worked when I did try to execute another binary file didn't worked.</p>\n\n<p>For example I wrote this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\n   printf(\"Prueba\\n\");\n   return(0);\n}\n</code></pre>\n\n<p>compiled with gcc (without any parameters) and then put the generated binary on the code variable</p>\n\n<pre><code>char code[] = {0x7f,0x45,0x4c,0x46,0x02,0x01,0x01,0x00,0x00,...};\n</code></pre>\n\n<p>and then tried to compile the new file, but got segmentation fault error.</p>\n\n<p>It is possible to actually run any kind of arbitrary code within c (or c++) or it is only possible to run functions in bare asm code (like in the original thread)? </p>\n"}, {"tags": ["c++", "iterator", "const-iterator"], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 4742074, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5f384b6f302a8ad03ff334f8dde3a28?s=128&d=identicon&r=PG&f=1", "display_name": "one_two_three", "link": "https://stackoverflow.com/users/4742074/one-two-three"}, "edited": false, "score": 0, "creation_date": 1455122323, "post_id": 35318665, "comment_id": 58350484, "body": "Right. But how can I make it work then? For that matter, how does it work in STL?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 415, "user_id": 4742074, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5f384b6f302a8ad03ff334f8dde3a28?s=128&d=identicon&r=PG&f=1", "display_name": "one_two_three", "link": "https://stackoverflow.com/users/4742074/one-two-three"}, "edited": false, "score": 0, "creation_date": 1455122650, "post_id": 35318665, "comment_id": 58350772, "body": "You might want to check <a href=\"http://stackoverflow.com/a/35311638/597607\">this answer</a> to another iterator question from earlier today."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116627, "creation_date": 1455116627, "answer_id": 35318665, "question_id": 35318350, "link": "https://stackoverflow.com/questions/35318350/calls-const-instead-of-non-const-access-operator-for-iterator/35318665#35318665", "title": "Calls const instead of non-const access operator for iterator", "body": "<p>When you use <code>const_iterator it</code> in your for-loop, <code>it</code> is of type <code>const_iterator</code> but it is itself non-const. </p>\n\n<p>Therefore using its member functions will use the non-const members, which doesn't work when the <code>my_iterator</code> stores a real <code>list::const_iterator</code>. In the expression <code>&amp;(*m_it)</code>, the element referenced by <code>*m_it</code> is const, so you cannot get a non-const address to that object:</p>\n\n<blockquote>\n  <p>error: invalid conversion from \u2018const Data*\u2019</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4742074, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5f384b6f302a8ad03ff334f8dde3a28?s=128&d=identicon&r=PG&f=1", "display_name": "one_two_three", "link": "https://stackoverflow.com/users/4742074/one-two-three"}, "is_accepted": true, "score": 0, "last_activity_date": 1455183358, "creation_date": 1455183358, "answer_id": 35335489, "question_id": 35318350, "link": "https://stackoverflow.com/questions/35318350/calls-const-instead-of-non-const-access-operator-for-iterator/35335489#35335489", "title": "Calls const instead of non-const access operator for iterator", "body": "<p>After some investigation I finally found the problem, so I am posting the correct, compilable, version of the above code. Here are the highlights:</p>\n\n<p>-- The main problem was that I under-defined template parameters for base std::iterator class. It takes 5 parameters, but I defined only first 2, relying on default type assignment for the rest. This was a mistake. For example by default <code>pointer</code> is defined as <code>value_type*</code>, but what I needed was actually <code>const value_type*</code> for constant iterator. I therefore defined all 5 template parameters.</p>\n\n<p>-- There were no need to have 2 versions of <code>operator*()</code> and <code>operator-&gt;()</code>.</p>\n\n<p>-- I also added another templated constructor to allow assigning non-const iterator to the const ones.</p>\n\n<p>So below are results of my endeavours.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;list&gt;\n\nclass Data\n{\npublic:\n  double x;\n};\n\ntypedef std::list&lt;Data&gt; list_of_data;\n\ntemplate &lt;class IteratorType&gt;\nclass my_iterator :\n     public std::iterator&lt;std::bidirectional_iterator_tag,\n                          typename IteratorType::value_type,\n                          typename IteratorType::difference_type,\n                          typename IteratorType::pointer,\n                          typename IteratorType::reference&gt;\n{\npublic:\n  //type of itself\n  typedef my_iterator self;\n  //type of iterator over cells\n  typedef IteratorType list_iterator_type;\n\n  my_iterator(list_iterator_type it) :\n    m_it(it)\n  {}//constructor.\n\n  my_iterator(const self&amp; source) :\n    m_it(source.m_it)\n  {}\n\n  template&lt;class another_iterator&gt;\n  my_iterator(const my_iterator&lt;another_iterator&gt;&amp; source) :\n    m_it(source.m_it)\n  {}\n\n  self&amp; operator=(const self&amp; source)\n  {\n    m_it = source.m_it;\n    return *this;\n  }//operator=\n\n  bool operator==(self other) const\n  {\n    return m_it == other.m_it;\n  }\n\n  bool operator!=(self other) const\n  {\n    return m_it != other.m_it;\n  }\n\n  inline typename self::reference operator*() const\n  { return (*m_it);}\n\n  inline typename self::pointer operator-&gt;() const\n    { return &amp;(*m_it); }\n\n  inline self&amp; operator++()\n  {\n    ++m_it;\n    return (*this);\n  }//operator++\n\n  inline self operator++(int)\n  {\n    self tmp(*this);\n    ++(*this);\n    return tmp;\n  }//operator++(int)\n\nprivate:\n\n  list_iterator_type m_it;\n};\n\n///non constant iterator over cells.\ntypedef my_iterator&lt;list_of_data::iterator&gt; iterator;\n///constant iterator over cells.\ntypedef my_iterator&lt;list_of_data::const_iterator&gt; const_iterator;\n\nint main()\n{\n  list_of_data test_list;\n  Data a;\n  test_list.push_back(a);\n  test_list.push_back(a);\n  test_list.push_back(a);\n  for(iterator it  = iterator(test_list.begin()); \n                     it != iterator(test_list.end()); ++it)\n  {\n    it-&gt;x = 2;\n  }\n  for(const_iterator it  = const_iterator(test_list.begin()); \n                     it != const_iterator(test_list.end()); ++it)\n  {\n    std::cout &lt;&lt; \"  it-&gt;x =\" &lt;&lt; it-&gt;x &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"(*it).x =\" &lt;&lt; (*it).x &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 4742074, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5f384b6f302a8ad03ff334f8dde3a28?s=128&d=identicon&r=PG&f=1", "display_name": "one_two_three", "link": "https://stackoverflow.com/users/4742074/one-two-three"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 35335489, "answer_count": 2, "score": 0, "last_activity_date": 1455183358, "creation_date": 1455115754, "question_id": 35318350, "link": "https://stackoverflow.com/questions/35318350/calls-const-instead-of-non-const-access-operator-for-iterator", "title": "Calls const instead of non-const access operator for iterator", "body": "<p>I want to build a custom iterator on top of one of STL iterators. Here is the stripped-down version of the code which I would expect to be compilable:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iterator&gt;\n#include &lt;list&gt;\n\nclass Data\n{\npublic:\n  double x;\n};\n\ntypedef std::list&lt;Data&gt; list_of_data;\n\ntemplate &lt;class IteratorType&gt;\nclass my_iterator :\n     public std::iterator&lt;std::bidirectional_iterator_tag,\n                          typename IteratorType::value_type &gt;\n{\npublic:\n  //type of itself\n  typedef my_iterator self;\n  //type of underlying iterator\n  typedef IteratorType list_iterator_type;\n\n  my_iterator(list_iterator_type it) :\n    m_it(it)\n  {}//constructor.\n\n  my_iterator(const self&amp; source) :\n    m_it(source.m_it)\n  {}\n\n  self&amp; operator=(const self&amp; source)\n  {\n    m_it = source.m_it;\n    return *this;\n  }//operator=\n\n  bool operator==(self other)\n  {\n    return m_it == other.m_it;\n  }\n\n  bool operator!=(self other)\n  {\n    return m_it != other.m_it;\n  }\n\n  inline typename self::reference operator*()\n  { return (*m_it);}\n\n  inline const typename self::reference operator*() const\n    { return (*m_it); }\n\n  inline typename self::pointer operator-&gt;()\n    { return &amp;(*m_it); }\n\n  inline const typename self::pointer operator-&gt;() const\n    { return &amp;(*m_it); }\n\n  inline self&amp; operator++()\n  {\n    ++m_it;\n  }//operator++\n\n  inline self operator++(int)\n  {\n    self tmp(*this);\n    ++(*this);\n    return tmp;\n  }//operator++(int)\n\nprivate:\n\n  list_iterator_type m_it;\n};\n\n///non constant iterator over cells.\ntypedef my_iterator&lt;list_of_data::iterator&gt; iterator;\n///constant iterator over cells.\ntypedef my_iterator&lt;list_of_data::const_iterator&gt; const_iterator;\n\nint main()\n{\n  list_of_data test_list;\n  Data a;\n  test_list.push_back(a);\n  test_list.push_back(a);\n  test_list.push_back(a);\n  for(const_iterator it  = const_iterator(test_list.begin()); \n                     it != const_iterator(test_list.end()); ++it)\n  {\n    double x = it-&gt;x;\n    double y = (*it).x;\n  }\n}\n</code></pre>\n\n<p>However it shows the following error message :</p>\n\n<pre><code>test_list.cpp: In instantiation of \u2018typename my_iterator&lt;IteratorType&gt;::self::pointer my_iterator&lt;IteratorType&gt;::operator-&gt;() [with IteratorType = std::_List_const_iterator&lt;Data&gt;; typename my_iterator&lt;IteratorType&gt;::self::pointer = Data*]\u2019:\ntest_list.cpp:92:18:   required from here\ntest_list.cpp:55:21: error: invalid conversion from \u2018const Data*\u2019 to \u2018std::iterator&lt;std::bidirectional_iterator_tag, Data, long int, Data*, Data&amp;&gt;::pointer {aka Data*}\u2019 [-fpermissive]\n     { return &amp;(*m_it); }\n                     ^\ntest_list.cpp: In instantiation of \u2018typename my_iterator&lt;IteratorType&gt;::self::reference my_iterator&lt;IteratorType&gt;::operator*() [with IteratorType = std::_List_const_iterator&lt;Data&gt;; typename my_iterator&lt;IteratorType&gt;::self::reference = Data&amp;]\u2019:\ntest_list.cpp:93:18:   required from here\ntest_list.cpp:49:18: error: invalid initialization of reference of type \u2018std::iterator&lt;std::bidirectional_iterator_tag, Data, long int, Data*, Data&amp;&gt;::reference {aka Data&amp;}\u2019 from expression of type \u2018const Data\u2019\n   { return (*m_it);}\n</code></pre>\n\n<p>as far as I can see it refers to non-const version of the access operator, but why, if I explicitly use constant iterator here?</p>\n"}, {"tags": ["c++", "linux", "qt", "network-programming", "cross-platform"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1455116122, "post_id": 35318296, "comment_id": 58345596, "body": "If you really want to use c++, and you are ok using third part libraries, check the <a href=\"http://think-async.com/\" rel=\"nofollow noreferrer\">asio c++</a>. Check <a href=\"http://stackoverflow.com/questions/678367/c-sockets-library-for-cross-platform\">this</a> for more library options. If you want to implement yourself, you will have some <a href=\"http://www.techpowerup.com/forums/threads/c-c-sockets-faq-and-how-to-win-linux.56901/\" rel=\"nofollow noreferrer\">ifdef</a> in your code."}, {"owner": {"reputation": 1683, "user_id": 96410, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7eb4f14dbb910a956fc154129d3aa039?s=128&d=identicon&r=PG", "display_name": "jpou", "link": "https://stackoverflow.com/users/96410/jpou"}, "edited": false, "score": 0, "creation_date": 1455116572, "post_id": 35318296, "comment_id": 58345955, "body": "I&#39;ve added a link to <i>very</i> nice blog post re cross-platform dev"}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1455118250, "post_id": 35318296, "comment_id": 58347297, "body": "Perhaps Java is a better option? I&#39;m not sure what your experience level is with C++/Java, but it would be a little easier going to Java from C# in my opinion. Sockets are a whole lot easier in Java, also, assuming you&#39;re not using third party libraries."}, {"owner": {"reputation": 195, "user_id": 4640489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/629d69395ae8ec0145b68a1f73472698?s=128&d=identicon&r=PG&f=1", "display_name": "hexcode", "link": "https://stackoverflow.com/users/4640489/hexcode"}, "edited": false, "score": 0, "creation_date": 1455122634, "post_id": 35318296, "comment_id": 58350761, "body": "I just heard back form the TA. He said that he&#39;s &quot;not sure that the department computers even have Qt installed&quot; for testing. He advised me to use either MinGW, Cygwin or Java. Do you think one could make a nice (relatively simple network) program with a GUI in Java, when working in Windows, targeted for Linux?"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4640489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/629d69395ae8ec0145b68a1f73472698?s=128&d=identicon&r=PG&f=1", "display_name": "hexcode", "link": "https://stackoverflow.com/users/4640489/hexcode"}, "edited": false, "score": 0, "creation_date": 1455116319, "post_id": 35318337, "comment_id": 58345744, "body": "That&#39;s actually something I&#39;d have loved doing. But, the TA said this: &quot;You need to use Java or C++, because your program will be tested on department Linux machines&quot;  I&#39;m pretty that he&#39;s more interested in seeing C++/Java code that just wanting to get it run on Linux. I&#39;ll ask him, but as of now, I&#39;ll assume that it&#39;s not allowed. Thanks for your comment, though =)"}], "tags": [], "owner": {"reputation": 1683, "user_id": 96410, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7eb4f14dbb910a956fc154129d3aa039?s=128&d=identicon&r=PG", "display_name": "jpou", "link": "https://stackoverflow.com/users/96410/jpou"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116535, "last_edit_date": 1455116535, "creation_date": 1455115717, "answer_id": 35318337, "question_id": 35318296, "link": "https://stackoverflow.com/questions/35318296/developing-a-p2p-network-project-in-c-in-windows-that-should-work-in-linux/35318337#35318337", "title": "Developing a P2P network project in C++ in windows, that should work in Linux", "body": "<p>Why not use C# on Linux using Mono? Stick to what you know - you will save loads and loads of time. Library reuse is an added bonus :)</p>\n\n<p>EDIT: <a href=\"https://www.backblaze.com/blog/10-rules-for-how-to-write-cross-platform-code/\" rel=\"nofollow\">This</a> helped me tremendously when I needed to do cross-platform C++ dev.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 4640489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/629d69395ae8ec0145b68a1f73472698?s=128&d=identicon&r=PG&f=1", "display_name": "hexcode", "link": "https://stackoverflow.com/users/4640489/hexcode"}, "edited": false, "score": 0, "creation_date": 1455122517, "post_id": 35318484, "comment_id": 58350648, "body": "I just heard back form the TA. He said that he&#39;s &quot;not sure that the department computers even have Qt installed&quot; for testing.  He advised me to use either MinGW, Cygwin or Java.   Do you think one could make a nice (relatively simple network) program with a GUI in Java, when working in Windows, targeted for Linux?"}], "tags": [], "owner": {"reputation": 820, "user_id": 3241143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a1bc37ec0fb1ab51cb40d6595f22d?s=128&d=identicon&r=PG&f=1", "display_name": "0xFFFFFFFF", "link": "https://stackoverflow.com/users/3241143/0xffffffff"}, "is_accepted": false, "score": 0, "last_activity_date": 1455124431, "last_edit_date": 1455124431, "creation_date": 1455116159, "answer_id": 35318484, "question_id": 35318296, "link": "https://stackoverflow.com/questions/35318296/developing-a-p2p-network-project-in-c-in-windows-that-should-work-in-linux/35318484#35318484", "title": "Developing a P2P network project in C++ in windows, that should work in Linux", "body": "<p>there are lots of network c++ libraries which can be cross-platform. Qt Network is one, and network just a small part of Qt Framework., you can try use boost::asio which is a excellent cross-platform network library too.</p>\n\n<p>but when you try to use C++ which generally will compiler to native code, you have to build or cross-compile to your target machine, which mean for different OS you have to compile your code to generate that OS binaries.</p>\n\n<p>another choice is use Java or Mono/.net but I think in your question you prefer use c++.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>your target machine does not need Qt or Boost installed. you can either static build your program or copy .so files with your program together.</p>\n\n<p>MinGW and Cygwin are \"actually\" GCC port for Windows. Java is cross-platform. if you want to make your project done quickly, Java might be your choice, lots of sample codes can be found online.</p>\n\n<p>Qt is another good choice, Qt network does have a very good example named <strong>torrent</strong>, which is a working bit torrent client.</p>\n\n<p>all are handy, you just need time to figure it out.</p>\n"}, {"tags": [], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1455155647, "creation_date": 1455155647, "answer_id": 35329457, "question_id": 35318296, "link": "https://stackoverflow.com/questions/35318296/developing-a-p2p-network-project-in-c-in-windows-that-should-work-in-linux/35329457#35329457", "title": "Developing a P2P network project in C++ in windows, that should work in Linux", "body": "<p>IMHO, download Qt, and start with this example:</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qtnetwork-torrent-example.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qtnetwork-torrent-example.html</a></p>\n\n<p>On the windows side, you can still develop in Visual Studio (on the windows side at least):</p>\n\n<p><a href=\"http://doc.qt.io/vs-addin/\" rel=\"nofollow\">http://doc.qt.io/vs-addin/</a></p>\n\n<p>Qt Creator is a great IDE.  It is built for working with the Qt Libraries.</p>\n\n<p>The networking side is pretty straight forward.</p>\n\n<p>The graphics choices are either Widgets, QML, or Widgets/GraphicsView or some other third party library.</p>\n\n<p>If you ever want to take the game mobile, QML is the way to go.  Otherwise, Widgets/GraphicsView can handle most 2D games written for the desktop.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 195, "user_id": 4640489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/629d69395ae8ec0145b68a1f73472698?s=128&d=identicon&r=PG&f=1", "display_name": "hexcode", "link": "https://stackoverflow.com/users/4640489/hexcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1455155647, "creation_date": 1455115583, "last_edit_date": 1455115727, "question_id": 35318296, "link": "https://stackoverflow.com/questions/35318296/developing-a-p2p-network-project-in-c-in-windows-that-should-work-in-linux", "title": "Developing a P2P network project in C++ in windows, that should work in Linux", "body": "<p>I've got this project as part of a requirement for a graduate course. I need to develop a P2P program (having a miniature BitTorrent protocol). I've worked with network applications in .NET before, but not in C++/Java. But, I do have knowledge about sockets in C++ and how they work.</p>\n\n<p>The problem I'm facing is this: The TA requires the programs to finally \"work in Linux\". I've hardly even used Linux before and quite naturally, I'm concerned about this.</p>\n\n<p>Is there a way for me to use VS to develop programs that will work on Linux? As far as I know, I can use Qt to develop \"cross platform\" applications, right? Also, I think that they've also got a network package there that I can use.</p>\n\n<p>Any advise? I'd be grateful for some ...</p>\n\n<hr>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "edited": false, "score": 0, "creation_date": 1455115865, "post_id": 35318293, "comment_id": 58345423, "body": "What compiler are you using?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "edited": false, "score": 0, "creation_date": 1455116063, "post_id": 35318293, "comment_id": 58345562, "body": "@RaydelMiranda: Both gcc/clang reports errors <a href=\"http://coliru.stacked-crooked.com/a/d696f4d9abeb6e7e\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 1704, "user_id": 2206057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99e2529cce2788552ed56014f036901a?s=128&d=identicon&r=PG", "display_name": "Hei", "link": "https://stackoverflow.com/users/2206057/hei"}, "edited": false, "score": 0, "creation_date": 1455116423, "post_id": 35318293, "comment_id": 58345824, "body": "I am using gcc 4.8.5."}, {"owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "edited": false, "score": 0, "creation_date": 1455116472, "post_id": 35318293, "comment_id": 58345871, "body": "You should visit this answer: <a href=\"http://stackoverflow.com/questions/3052579/explicit-specialization-in-non-namespace-scope\" title=\"explicit specialization in non namespace scope\">stackoverflow.com/questions/3052579/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1704, "user_id": 2206057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99e2529cce2788552ed56014f036901a?s=128&d=identicon&r=PG", "display_name": "Hei", "link": "https://stackoverflow.com/users/2206057/hei"}, "edited": false, "score": 0, "creation_date": 1455116861, "post_id": 35318713, "comment_id": 58346164, "body": "class isn&#39;t considered a namespace?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 1704, "user_id": 2206057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99e2529cce2788552ed56014f036901a?s=128&d=identicon&r=PG", "display_name": "Hei", "link": "https://stackoverflow.com/users/2206057/hei"}, "edited": false, "score": 0, "creation_date": 1455117304, "post_id": 35318713, "comment_id": 58346503, "body": "@Hei No, they are different things in c++."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 2, "last_activity_date": 1455126821, "last_edit_date": 1455126821, "creation_date": 1455116767, "answer_id": 35318713, "question_id": 35318293, "link": "https://stackoverflow.com/questions/35318293/specializing-templatized-struct-inside-templatized-class/35318713#35318713", "title": "Specializing Templatized Struct Inside Templatized Class", "body": "<blockquote>\n  <p>What's the correct syntax to keep them inside class A?</p>\n</blockquote>\n\n<p>No, explicit specialization can't be put in a class scope, it must be put in namespace scope.</p>\n\n<p>From the standard, $14.7.3/2 Explicit specialization [temp.expl.spec]</p>\n\n<blockquote>\n  <p>An explicit specialization shall be declared in a namespace enclosing the specialized template.</p>\n</blockquote>\n\n<p>So you have to move it outside the class, such as:</p>\n\n<pre><code>template&lt;&gt; \ntemplate&lt;&gt; \nclass A&lt;B, D&gt;::BarSelector&lt;D&gt; {\n    void bar(double*) {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>Note that it's impossible to specialize a member without explicitly specializing the containing class. That might be a side note about why can't explicit specialize a member template in class scope (which let you specialize a member template without explicitly specializing the outside class template).</p>\n"}], "owner": {"reputation": 1704, "user_id": 2206057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99e2529cce2788552ed56014f036901a?s=128&d=identicon&r=PG", "display_name": "Hei", "link": "https://stackoverflow.com/users/2206057/hei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 35318713, "answer_count": 1, "score": 1, "last_activity_date": 1455126821, "creation_date": 1455115576, "question_id": 35318293, "link": "https://stackoverflow.com/questions/35318293/specializing-templatized-struct-inside-templatized-class", "title": "Specializing Templatized Struct Inside Templatized Class", "body": "<pre><code>template &lt;class T1, class T2&gt;\nclass A {\n\ntemplate &lt;typename T&gt;\nstruct BarSelector {\n    void bar(T*) {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;&gt; struct BarSelector&lt;D&gt; {\n    void bar(D*) {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n    }\n};\n\npublic:\n    void foo(T2* pT2) {\n        // do something\n        BarSelector&lt;T2&gt; selector;\n        selector.bar(pT2);\n    }\n};\n\nint main() {\n    C c;\n    A&lt;B, C&gt; a1;\n    a1.foo(&amp;c);\n\n    D* pD;\n    A&lt;B, D&gt; a2;\n    a2.foo(pD);\n}\n</code></pre>\n\n<p>Compiler gave:</p>\n\n<pre><code>toverloading.cpp:20:11: error: explicit specialization in non-namespace scope \u2018class A&lt;T1, T2&gt;\u2019\n template &lt;&gt; struct BarSelector&lt;D&gt; {\n           ^\ntoverloading.cpp:20:20: error: template parameters not used in partial specialization:\n template &lt;&gt; struct BarSelector&lt;D&gt; {\n                    ^\ntoverloading.cpp:20:20: error:         \u2018T1\u2019\ntoverloading.cpp:20:20: error:         \u2018T2\u2019\n</code></pre>\n\n<p>If I move the BarSelector outside class A, it works.</p>\n\n<p>What's the correct syntax to keep them inside class A?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "android", "c++", "sqlite", "android-ndk"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1455116883, "post_id": 35318181, "comment_id": 58346185, "body": "Start simply by extracting the file to your PC. If you can open it with sqlite there, you will be able to use <a href=\"http://blog.kdehairy.com/using-sqlite-natively-on-android/\" rel=\"nofollow noreferrer\">blog.kdehairy.com/using-sqlite-natively-on-android</a>. If the file is encrypted, or damaged, you have a problem."}, {"owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1455118707, "post_id": 35318181, "comment_id": 58347657, "body": "I pulled it and it&#39;s perfectly readable and writable."}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "is_accepted": true, "score": 1, "last_activity_date": 1455120280, "creation_date": 1455120280, "answer_id": 35320079, "question_id": 35318181, "link": "https://stackoverflow.com/questions/35318181/android-ndk-write-to-sqlite/35320079#35320079", "title": "Android NDK write to SQLite", "body": "<p>I found a problem.\nFirst let me say sorry because the problem is not visible from original code in my question.</p>\n\n<p>I passed to C++ function path to database file returned by</p>\n\n<pre><code>getDatabasePath(\"database_name\").getAbsolutePath()\n</code></pre>\n\n<p>but it seems that it returns path with symbolic links and that SQLite somehow cannot handle.</p>\n\n<p><strong>Solution:</strong></p>\n\n<pre><code>try {\n    getDatabasePath(\"database_name\").getCanonicalPath();\n}\ncatch (IOException e) { e.printStackTrace(); }\n</code></pre>\n\n<p><em>According to manual canonical does resolve symbolic links.</em></p>\n"}], "owner": {"reputation": 605, "user_id": 2558231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b00d9fec45fb7268c1e874dafeb15f?s=128&d=identicon&r=PG", "display_name": "Majkeee", "link": "https://stackoverflow.com/users/2558231/majkeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 35320079, "answer_count": 1, "score": 1, "last_activity_date": 1455212737, "creation_date": 1455115296, "last_edit_date": 1455212737, "question_id": 35318181, "link": "https://stackoverflow.com/questions/35318181/android-ndk-write-to-sqlite", "title": "Android NDK write to SQLite", "body": "<p>in my work I am trying to do some comparisons and as such I need to be able to write to database from NDK.\nI tried to inspire from <a href=\"http://blog.kdehairy.com/using-sqlite-natively-on-android/\" rel=\"nofollow\">this source</a>, but I keep getting (from emulator and physical device) following error on insert:<br>\n<strong>file is encrypted or is not a database</strong></p>\n\n<p><em>My relevant piece of code:</em></p>\n\n<pre><code>extern \"C\"\n{\n    JNIEXPORT jstring JNICALL Java_package_Benchmark_getMessage(JNIEnv *env, jobject thisObj, jstring filePath, jstring databasePath)\n    {\n        sqlite3 *db;\n        const char *database = env-&gt;GetStringUTFChars(databasePath, 0);\n        if (sqlite3_open_v2(database, &amp;db, SQLITE_OPEN_READWRITE, NULL) == SQLITE_OK) // returns zero but probably sets db as read-only\n        {\n            if (SQLITE_OK != sqlite3_exec(db, \"INSERT INTO lessons (wordCount, wordPassedCount, lessonName, selected) VALUES (0, 0, '50k', 0)\", NULL, NULL, NULL))\n                LOGD(\"%s\", sqlite3_errmsg(db)); // here i get the error\n            int lesson_id = sqlite3_last_insert_rowid(db);\n            return env-&gt;NewStringUTF(\"Database opened!!\");\n        }\n        env-&gt;ReleaseStringUTFChars(databasePath, database);\n    }\n}\n</code></pre>\n\n<p><strong>So my question is:</strong><br>\nCan I (and how) insert to application's database (created by Java api) from NDK?</p>\n\n<p>As workaround I guess would be possible to create temporary database (not encrypted), but I rather use the one I created beforehand by <strong>Java's SQLiteOpenHelper</strong>. </p>\n"}, {"tags": ["javascript", "c++", "node.js", "node-gyp", "libraw"], "owner": {"reputation": 95, "user_id": 1027721, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e549537014e5e730e619e9bdd1493b72?s=128&d=identicon&r=PG", "display_name": "m0g", "link": "https://stackoverflow.com/users/1027721/m0g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455115250, "creation_date": 1455114028, "last_edit_date": 1455115250, "question_id": 35317667, "link": "https://stackoverflow.com/questions/35317667/node-gyp-trying-to-compile-libraw-as-a-dependency", "title": "Node-gyp trying to compile libraw as a dependency", "body": "<p>I'm trying to compile libraw as a dependency for my node.js project.</p>\n\n<p>I have two different .gyp files: <code>./binding.gyp</code> and <code>./vendor/raw.gyp</code></p>\n\n<p>I have downloaded the current version of libraw and the demosaicing packs, all of them can be found on the <code>./vendor/</code> folder as:</p>\n\n<pre><code>LibRaw-0.17.1\nLibRaw-demosaic-pack-GPL2-0.17.1\nLibRaw-demosaic-pack-GPL3-0.17.1\n</code></pre>\n\n<p>Here are my two gyp files:</p>\n\n<p><strong>./binding.gyp</strong></p>\n\n<pre><code>{\n  \"includes\": [ \"vendor/raw.gyp\" ],\n  \"targets\": [\n    {\n      \"target_name\": \"node_libraw\",\n      \"sources\": [ \"node_libraw.cc\" ],\n      \"include_dirs\" : [\n        \"build/Release\",\n        \"vendor/LibRaw-0.17.1\",\n        \"&lt;!(node -e \\\"require('nan')\\\")\"\n      ],\n      \"libraries\": [\n        \"-lraw\",\n        \"-Wl,-rpath=./build/Release/obj.target/\"\n      ]\n    }\n  ],\n}\n</code></pre>\n\n<p><strong>./vendor/raw.gyp</strong></p>\n\n<pre><code>{\n  \"targets\": [\n    {\n      \"default_configuration\": \"Release\",\n      \"target_name\": \"raw\",\n      \"type\": \"static_library\",\n      \"sources\": [\n        \"LibRaw-0.17.1/internal/dcraw_common.cpp\",\n        \"LibRaw-0.17.1/internal/dcraw_fileio.cpp\",\n        \"LibRaw-0.17.1/internal/demosaic_packs.cpp\",\n        \"LibRaw-0.17.1/src/libraw_cxx.cpp\",\n        \"LibRaw-0.17.1/src/libraw_datastream.cpp\",\n        \"LibRaw-0.17.1/src/libraw_c_api.cpp\"\n      ],\n      \"include_dirs\": [ \n        \"./LibRaw-demosaic-pack-GPL2-0.17.1\",\n        \"./LibRaw-demosaic-pack-GPL3-0.17.1\",\n        \"./LibRaw-0.17.1\"\n      ],\n      \"libraries\": [\n        \"-ljpeg8\"\n      ],\n      \"cflags\": [ \n        \"-Wdeprecated-declarations\",\n        \"-pthread -w\"\n      ],\n      \"cflags_cc\": [\n        \"-pthread -w\",\n        \"-fexceptions\",\n        \"-I./LibRaw-demosaic-pack-GPL2-0.17.1\",\n        \"-DLIBRAW_DEMOSAIC_PACK_GPL2\",\n        \"-I./LibRaw-demosaic-pack-GPL3-0.17.1\",\n        \"-DLIBRAW_DEMOSAIC_PACK_GPL3\",\n        \"-DUSE_JPEG8\"\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>The problem being that, when I'm trying to compile the library with <code>node-gyp configure build</code> I end up with the following error:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lraw\ncollect2: error: ld returned 1 exit status\nnode_libraw.target.mk:124: recipe for target 'Release/obj.target/node_libraw.node' failed\n</code></pre>\n\n<p>Here is the full output:</p>\n\n<pre><code>$ node-gyp configure build\ngyp info it worked if it ends with ok\ngyp info using node-gyp@3.0.3\ngyp info using node@4.2.4 | linux | x64\ngyp info spawn python2\ngyp info spawn args [ '/usr/share/node-gyp/gyp/gyp_main.py',\ngyp info spawn args   'binding.gyp',\ngyp info spawn args   '-f',\ngyp info spawn args   'make',\ngyp info spawn args   '-I',\ngyp info spawn args   '/node-libraw/build/config.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/usr/share/node-gyp/addon.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/usr/include/nodejs/common.gypi',\ngyp info spawn args   '-Dlibrary=shared_library',\ngyp info spawn args   '-Dvisibility=default',\ngyp info spawn args   '-Dnode_root_dir=/usr/include/nodejs',\ngyp info spawn args   '-Dnode_gyp_dir=/usr/share/node-gyp',\ngyp info spawn args   '-Dnode_lib_file=node.lib',\ngyp info spawn args   '-Dmodule_root_dir=/node-libraw',\ngyp info spawn args   '--depth=.',\ngyp info spawn args   '--no-parallel',\ngyp info spawn args   '--generator-output',\ngyp info spawn args   'build',\ngyp info spawn args   '-Goutput_dir=.' ]\ngyp info spawn make\ngyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\nmake: Entering directory '/node-libraw/build'\nCXX(target) Release/obj.target/node_libraw/node_libraw.o\nIn file included from ../vendor/LibRaw-0.17.1/libraw/libraw.h:40:0,\nfrom ../node_libraw.cc:6:\n../vendor/LibRaw-0.17.1/libraw/libraw_datastream.h:96:10: warning: \u2018template&lt;class&gt; class std::auto_ptr\u2019 is deprecated [-Wdeprecated-declarations]\nstd::auto_ptr&lt;std::streambuf&gt; f; /* will close() automatically through dtor */\n^\nIn file included from /usr/include/c++/5/memory:81:0,\nfrom ../vendor/LibRaw-0.17.1/libraw/libraw_datastream.h:38,\nfrom ../vendor/LibRaw-0.17.1/libraw/libraw.h:40,\nfrom ../node_libraw.cc:6:\n/usr/include/c++/5/bits/unique_ptr.h:49:28: note: declared here\ntemplate&lt;typename&gt; class auto_ptr;\n^\nIn file included from ../vendor/LibRaw-0.17.1/libraw/libraw.h:40:0,\nfrom ../node_libraw.cc:6:\n../vendor/LibRaw-0.17.1/libraw/libraw_datastream.h:97:10: warning: \u2018template&lt;class&gt; class std::auto_ptr\u2019 is deprecated [-Wdeprecated-declarations]\nstd::auto_ptr&lt;std::streambuf&gt; saved_f; /* when *f is a subfile, *saved_f is the\n^\nIn file included from /usr/include/c++/5/memory:81:0,\nfrom ../vendor/LibRaw-0.17.1/libraw/libraw_datastream.h:38,\nfrom ../vendor/LibRaw-0.17.1/libraw/libraw.h:40,\nfrom ../node_libraw.cc:6:\n/usr/include/c++/5/bits/unique_ptr.h:49:28: note: declared here\ntemplate&lt;typename&gt; class auto_ptr;\n^\nSOLINK_MODULE(target) Release/obj.target/node_libraw.node\n/usr/bin/ld: cannot find -lraw\ncollect2: error: ld returned 1 exit status\nnode_libraw.target.mk:124: recipe for target 'Release/obj.target/node_libraw.node' failed\nmake: *** [Release/obj.target/node_libraw.node] Error 1\nmake: Leaving directory '/node-libraw/build'\ngyp ERR! build error\ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/usr/share/node-gyp/lib/build.js:269:23)\ngyp ERR! stack     at emitTwo (events.js:87:13)\ngyp ERR! stack     at ChildProcess.emit (events.js:172:7)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)\ngyp ERR! System Linux 4.3.0-6-generic\ngyp ERR! command \"/usr/bin/nodejs\" \"/usr/bin/node-gyp\" \"configure\" \"build\"\ngyp ERR! cwd /node-libraw\ngyp ERR! node -v v4.2.4\ngyp ERR! node-gyp -v v3.0.3\ngyp ERR! not ok\n</code></pre>\n\n<p>And the url of the project: <a href=\"https://github.com/m0g/node-libraw/tree/batteries\" rel=\"nofollow\">https://github.com/m0g/node-libraw/tree/batteries</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1455114135, "post_id": 35317344, "comment_id": 58344132, "body": "This is how references work - &quot;assigning&quot; a value to a reference assigns a value to the referenced object; the reference and the object are the same thing. You can&#39;t replace a reference to one object with a reference to a different object, you can only replace the value of one object with a (copy of) the value of a different object."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1455114794, "post_id": 35317344, "comment_id": 58344668, "body": "I know how reference assignment works. I&#39;m asking why the standard didn&#39;t make unique_ptr a bit more smart in case of storing a deleter reference. The current behavior looks useless unless std::reference_wrapper is used."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 4, "creation_date": 1455115716, "post_id": 35317344, "comment_id": 58345316, "body": "The current behaviour is useless <i>for what you&#39;re trying to do</i> but that doesn&#39;t mean it&#39;s useless. It means you&#39;re not using it as it&#39;s meant to be used."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455116104, "post_id": 35317344, "comment_id": 58345586, "body": "Jonathan, could you give me an example when the standard behavior is useful?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1455116949, "post_id": 35317344, "comment_id": 58346235, "body": "I don&#39;t know why you&#39;re using references, but the point of storing a deleter by reference is to avoid copying it, because it&#39;s heavyweight, or not copyable. If you want to use a feature that is intended to avoid copying the deleter, but then want to modify (i.e. copy) it then you need to think about what that will mean and define assignment for your type correctly."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455117287, "post_id": 35317344, "comment_id": 58346488, "body": "It&#39;s not about avoiding a copy because a deleter is heavy or not copyable. It&#39;s about sharing a deleter with unique identity between multiple unique pointers."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1455125056, "post_id": 35317344, "comment_id": 58352431, "body": "My answer shows a simpler way to do that without references, where the identity of the counter is what matters, not the deleters. i.e. put the state outside the deleter."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455125610, "post_id": 35317344, "comment_id": 58352804, "body": "To get this without reference I already use a reference_wrapper. Please read my question: I an not looking for a workaround, I&#39;m trying to understand the reason for the current design of unique_ptr. At the moment I don&#39;t see any point why a deleter reference is allowed at all."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1455146623, "post_id": 35317344, "comment_id": 58364459, "body": "Why shouldn&#39;t deleter reference be allowed? What would be the point of disallowing it?"}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455148181, "post_id": 35317344, "comment_id": 58365008, "body": "It will remove a confusion in unique_ptr behavior. It would be OK to have it if there is a use case for it, but so far, no one was mentioned, thus I see only a cons form this feature."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1455236012, "post_id": 35317344, "comment_id": 58412422, "body": "I guess I don&#39;t see that the behavior is confusing, it&#39;s pretty much what you should expect if you think about it. Core language features typically don&#39;t have an explicit, dedicated use that justifies each and every one of them. Instead, sometimes features that were useful in C++98 are hardly used in C++11, or features that were rarely used now may be much more useful in concert with future additions. If you think its a bug you probably should take the stance that it breaks something rather than try to put the onus on everyone else to illustrate the utility of the normal behavior."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1455236155, "post_id": 35317344, "comment_id": 58412472, "body": "Or explain why it would make more sense the other (another?) way? I must admit it&#39;s not entirely clear to me what change you would have in mind. Keep in mind also that if unique_ptr with reference deleter would just be disabled using sfinae or something, just because you think its ugly, well c++11 has been out there for 5 years now, so surely there are some people whose programs would be broken by this and wouldn&#39;t appreciate being forced to rewrite them."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1455707886, "post_id": 35317344, "comment_id": 58606834, "body": "@Chris, I&#39;m trying to understand why it was decided that the move-assignment operator copies the referenced deleter. So far I don&#39;t see any point for this neither a real use case. By default, the move/copy assignment operator is not generated if class has a reference member. And that&#39;s for purpose."}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455113874, "post_id": 35317370, "comment_id": 58343932, "body": "Unfortunately I can&#39;t use a pointer to a &quot;shared deleter&quot; without wrapping it into a lambda or some other by-value wrapper around the pointer.  The standard clearly distinguish cases when the deleter is a reference type and when it is not a reference type. I&#39;m wondering, why, having such a clear distinguish, they didn&#39;t make a reference case more easy to use or just forbid it."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455114161, "post_id": 35317370, "comment_id": 58344154, "body": "Yep, std::reference_wrapper helps. I mentioned it above. I mean, I know the workaround and asking more about why the standard put it like it is now, so people has to use workaround for a quite common use case...  Btw, nice to talk to you again. Your const_string library is great!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1455114161, "last_edit_date": 1455114161, "creation_date": 1455113189, "answer_id": 35317370, "question_id": 35317344, "link": "https://stackoverflow.com/questions/35317344/unique-ptrs-assignment-operator-copies-a-deleter-stored-by-a-reference-is-it-a/35317370#35317370", "title": "unique_ptr&#39;s assignment operator copies a deleter stored by a reference. Is it a feature or a bug?", "body": "<p>Having reference data members often leads to surprising results because assigning to a reference has non-value semantics because a reference cannot be re-assigned to refer to another object. Basically, reference data members break your assignment operator semantics. </p>\n\n<p>Using pointer members instead fixes that. Alternatively, use <code>std::reference_wrapper&lt;&gt;</code> and <code>std::ref()</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Why does it perform a deep copy of a deleter stored by a reference rather than just a shallow copy?</p>\n</blockquote>\n\n<p>It performs member-wise copy. If the value being copied is a pointer, that happens to be a shallow copy.</p>\n"}, {"comments": [{"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1495144776, "post_id": 35317773, "comment_id": 75141780, "body": "Yes. But my question is about different thing. It&#39;s like a class with a reference member and for such a class copy/move assignment is deleted. Because assigning to a reference member is not what most users would expect and resetting of a reference is not possible. Thus there is only one option is to delete the assignment."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1495147625, "post_id": 35317773, "comment_id": 75142831, "body": "It&#39;s unclear to me <i>why</i> <code>unique_ptr</code> supports a reference as deleter type. But given that it does, and that it&#39;s a no overhead class, the copy referent behavior isn&#39;t unreasonable. Because the reference acts as the object that it refers to, it&#39;s what you&#39;d get in an ordinary class with an assignment operator implemented as a sequence of per-member assignments. [I added that last sentence to the answer, explicitly drawing the conclusion.]"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 0, "last_activity_date": 1495147755, "last_edit_date": 1495147755, "creation_date": 1455114283, "answer_id": 35317773, "question_id": 35317344, "link": "https://stackoverflow.com/questions/35317344/unique-ptrs-assignment-operator-copies-a-deleter-stored-by-a-reference-is-it-a/35317773#35317773", "title": "unique_ptr&#39;s assignment operator copies a deleter stored by a reference. Is it a feature or a bug?", "body": "<p>A reference can't be reseated after initialization. It acts in all ways as the object it refers to. And that includes assignment.</p>\n\n<p>Because the reference acts as the object that it refers to, the copying of the referent is what you'd get in an ordinary class with an assignment operator implemented as a sequence of per-member assignments. </p>\n"}, {"comments": [{"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455116018, "post_id": 35318283, "comment_id": 58345528, "body": "Jonathan, by shallow copy of a reference I meant behavior of std::reference_wrapper. This is in fact just a non-null pointer with syntax sugar around."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455116073, "post_id": 35318283, "comment_id": 58345567, "body": "Right, that&#39;s pointer semantics. Why are you surprised that a reference behaves like a reference not like a pointer? <code>reference_wrapper</code> is the oddity, not the reference."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455117380, "post_id": 35318283, "comment_id": 58346560, "body": "I just trying to find a use-case for current behavior and the reason why unique_ptr is not using a reference_wrapper internally what IMO will make it just more convenient :)"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 2, "creation_date": 1455117447, "post_id": 35318283, "comment_id": 58346617, "body": "More convenient <i>if you don&#39;t want your reference to act like a reference</i>."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455123328, "post_id": 35318283, "comment_id": 58351282, "body": "Please give an example where the current handling of a deleter reference is useful. Your answer has a lot of upvotes but it has no actual answer to my questions."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455125597, "post_id": 35318283, "comment_id": 58352793, "body": "It behaves the way it does <i>because that&#39;s how references behave</i>. Use a reference to avoid copying heavy objects, but if you do that, it behaves like a reference."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455125789, "post_id": 35318283, "comment_id": 58352933, "body": "In fact, rather than avoid a copy it introduces it. :)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 1, "creation_date": 1455146454, "post_id": 35318283, "comment_id": 58364396, "body": "&quot;What does a shallow copy of a reference even mean? There&#39;s no such thing in C++. If you don&#39;t want reference semantics, don&#39;t use references.&quot; I mean I guess what OP wants is that, a new reference is initialized, using the value bound from the old reference. @oliora, Effectively what you are asking is that when you copy assign <code>unique_ptr</code>, the old deleter is <i>destroyed</i> and a new one is <i>copy constructed</i> or something like this. But of course that&#39;s now how assignment operators work in C++, that&#39;s why this isn&#39;t a bug. Making a custom type indeed seems like a good approach for you."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 2, "creation_date": 1455146559, "post_id": 35318283, "comment_id": 58364440, "body": "Whether or not it&#39;s &quot;useful&quot; that it works this way, it would be very confusing if it didn&#39;t."}, {"owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "edited": false, "score": 0, "creation_date": 1455148507, "post_id": 35318283, "comment_id": 58365115, "body": "If it&#39;s not useful it can be disabled. Value-only semantics works just fine for std::bind, std::shared_ptr&#39;s deleter and for allocators."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 13, "last_activity_date": 1455116729, "last_edit_date": 1455116729, "creation_date": 1455115549, "answer_id": 35318283, "question_id": 35317344, "link": "https://stackoverflow.com/questions/35317344/unique-ptrs-assignment-operator-copies-a-deleter-stored-by-a-reference-is-it-a/35318283#35318283", "title": "unique_ptr&#39;s assignment operator copies a deleter stored by a reference. Is it a feature or a bug?", "body": "<p>This is a feature.</p>\n\n<p>If you have stateful deleters presumably the state is important, and is associated with the pointer that it will be used to delete. That means the deleter state should be transferred when ownership of the pointer transfers.</p>\n\n<p>But if you store a deleter by reference it means you care about the identity of the deleter, not just its value (i.e. it's state), and updating the <code>unique_ptr</code> should not re-bind the reference to a different object.</p>\n\n<p>So if you don't want this, why are you even storing a deleter by reference?</p>\n\n<p>What does a shallow copy of a reference even <em>mean</em>? There's no such thing in C++. If you don't want reference semantics, don't use references.</p>\n\n<p>If you really want to do this, then the solution is simple: define assignment for your deleter to not change the counter:</p>\n\n<pre><code>CountingDeleter&amp;\noperator=(const CountingDeleter&amp;) noexcept\n{ return *this; }\n</code></pre>\n\n<p>Or since what you really seem to care about is the counter, not the deleter, keep the counter outside the deleter and don't use reference deleters:</p>\n\n<pre><code>struct CountingDeleter\n{\n    void operator()(std::string *p) {\n        ++*cntr_;\n        delete p;\n    }\n\n    unsigned long* cntr_;\n};\n\nunsigned long c1 = 0, c2 = 0;\nCountingDeleter d1{&amp;c1}, d2{&amp;c2};\n\n{\n    std::unique_ptr&lt;std::string, CountingDeleter&gt;\n        p1(new std::string{\"first\"} , d1),\n        p2(new std::string{\"second\"}, d2);\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 2572774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ca143af901cc5bf8ba6ca6019bdd5f?s=128&d=identicon&r=PG", "display_name": "oliora", "link": "https://stackoverflow.com/users/2572774/oliora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "answer_count": 3, "score": 11, "last_activity_date": 1495147755, "creation_date": 1455113090, "last_edit_date": 1455230101, "question_id": 35317344, "link": "https://stackoverflow.com/questions/35317344/unique-ptrs-assignment-operator-copies-a-deleter-stored-by-a-reference-is-it-a", "title": "unique_ptr&#39;s assignment operator copies a deleter stored by a reference. Is it a feature or a bug?", "body": "<p>Imaging the case when you have an <code>unique_ptr</code> with a custom deleter stored by a reference:</p>\n\n<pre><code>struct CountingDeleter\n{\n    void operator()(std::string *p) {\n        ++cntr_;\n        delete p;\n    }\n\n    unsigned long cntr_ = 0;\n};\n\nint main()\n{\n    CountingDeleter d1{}, d2{};\n\n    {\n        std::unique_ptr&lt;std::string, CountingDeleter&amp;&gt;\n            p1(new std::string{\"first\"} , d1),\n            p2(new std::string{\"second\"}, d2);\n\n        p1 = std::move(p2); // does d1 = d2 under cover\n    }\n\n    std::cout &lt;&lt; \"d1 \" &lt;&lt; d1.cntr_ &lt;&lt; \"\\n\"; // output: d1 1\n    std::cout &lt;&lt; \"d2 \" &lt;&lt; d2.cntr_ &lt;&lt; \"\\n\"; // output: d2 0\n}\n</code></pre>\n\n<p>It was a surprise for me that the assignment in the code above has a side-effect of copying <code>d2</code> into <code>d1</code>. I've double check it and found that this behavior is as described in the standard in <a href=\"http://eel.is/c++draft/unique.ptr.single.asgn\" rel=\"noreferrer\">[unique.ptr.single.asgn]</a>:</p>\n\n<blockquote>\n  <p>(1) - Requires: If <code>D</code> is not a reference type, <code>D</code> shall satisfy the requirements of <code>MoveAssignable</code> and assignment of the deleter from an rvalue of type <code>D</code> shall not throw an exception.\n  Otherwise, <code>D</code> is a reference type; <code>remove_reference_t&lt;D&gt;</code> shall satisfy the <code>CopyAssignable</code> requirements and assignment of the deleter from an lvalue of type <code>D</code> shall not throw an exception.</p>\n  \n  <p>(2) - Effects: Transfers ownership from <code>u</code> to <code>*this</code> as if by calling <code>reset(u.release())</code> followed by <code>get_deleter() = std::forward&lt;D&gt;(u.get_deleter())</code>.</p>\n</blockquote>\n\n<p>To get the behavior that I expected (a shallow copy of the deleter reference) I had to wrap the deleter reference into <code>std::reference_wrapper</code>:</p>\n\n<pre><code>std::unique_ptr&lt;std::string, std::reference_wrapper&lt;CountingDeleter&gt;&gt;\n    p1(new std::string{\"first\"} , d1),\n    p2(new std::string{\"second\"}, d2);\n\np1 = std::move(p2); // p1 now stores reference to d2 =&gt; no side effects!\n</code></pre>\n\n<p>For me the current handling of a deleter reference in the unique ptr is counter-intuitive and even error-prone:</p>\n\n<ol>\n<li><p>When you store a deleter by a reference rather than by value this mostly because you want the shared deleter with some important unique state. So you don't expect the shared deleter is overwritten and its state is lost after a unique ptr assignment.</p></li>\n<li><p>It's expected that assignment of a unique_ptr is extremely chip, especially if the deleter is a reference. But instead of this, you get copying of the deleter what can be (unexpectedly) expensive.</p></li>\n<li><p>After the assignment, the pointer become bound to original deleter's copy, rather than to the original deleter itself. This might lead to some unexpected side-effects if the deleter's identity is important.</p></li>\n<li><p>Also, current behavior prevents from using a const reference to a deleter because you just can't copy into a const object.</p></li>\n</ol>\n\n<p>IMO it would be better to forbid a deleters of reference types and accept only a movable value types.</p>\n\n<p>So my question is the following (it looks like two questions in one, sorry):</p>\n\n<ul>\n<li><p>Is there any reason why the standard <code>unique_ptr</code> behaves like this?</p></li>\n<li><p>Does anybody have a good example where it's useful to have a reference type deleter in <code>unique_ptr</code> rather than a non-reference one (i.e. a value type)?</p></li>\n</ul>\n"}, {"tags": ["c++", "simd", "memory-alignment", "powerpc", "altivec"], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 5857323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4283db2ded9f40e82eac87b9eaf4807c?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/5857323/georg"}, "edited": false, "score": 0, "creation_date": 1455169522, "post_id": 35317921, "comment_id": 58371199, "body": "Thank you! It looks great!"}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": true, "score": 4, "last_activity_date": 1455114617, "creation_date": 1455114617, "answer_id": 35317921, "question_id": 35317341, "link": "https://stackoverflow.com/questions/35317341/how-to-store-a-vector-to-an-unaligned-location-in-memory-with-altivec/35317921#35317921", "title": "How to store a vector to an unaligned location in memory with Altivec", "body": "<p>First of all I want mention that if you save Altivec vector to an unaligned memory many times you don't need to save previous memory state in the middle of array only at the beginning and at the end. \nSo there is an useful function and class in the <a href=\"http://simd.sourceforge.net/\" rel=\"nofollow\">Simd Library</a>, which  implement this functionality:</p>\n\n<pre><code>typedef __vector uint8_t v128_u8;\nconst v128_u8 K8_00 = vec_splat_u8(0x00);\nconst v128_u8 K8_FF = vec_splat_u8(0xFF);\n\ntemplate &lt;bool align&gt; inline v128_u8 Load(const uint8_t * p);\n\ntemplate &lt;&gt; inline v128_u8 Load&lt;false&gt;(const uint8_t * p)\n{\n    v128_u8 lo = vec_ld(0, p);\n    v128_u8 hi = vec_ld(16, p);\n    return vec_perm(lo, hi, vec_lvsl(0, p));        \n}        \n\ntemplate &lt;&gt; inline v128_u8 Load&lt;true&gt;(const uint8_t * p)\n{\n    return vec_ld(0, p); \n}\n\ntemplate &lt;bool align&gt; struct Storer;\n\ntemplate &lt;&gt; struct Storer&lt;true&gt;\n{\n    template &lt;class T&gt; Storer(T * ptr)\n        :_ptr((uint8_t*)ptr)\n    {\n    }\n\n    template &lt;class T&gt; inline void First(T value)\n    {\n        vec_st((v128_u8)value, 0, _ptr);\n    }\n\n    template &lt;class T&gt; inline void Next(T value)\n    {\n        _ptr += 16;\n        vec_st((v128_u8)value, 0, _ptr);\n    }\n\n    inline void Flush()\n    {\n    }\nprivate:\n    uint8_t * _ptr;\n};\n\ntemplate &lt;&gt; struct Storer&lt;false&gt;\n{\n    template &lt;class T&gt; inline Storer(T * ptr)\n        :_ptr((uint8_t*)ptr)\n    {\n        _perm = vec_lvsr(0, _ptr);\n        _mask = vec_perm(K8_00, K8_FF, _perm);\n    }\n\n    template &lt;class T&gt; inline void First(T value)\n    {\n        _last = (v128_u8)value;\n        v128_u8 background = vec_ld(0, _ptr);\n        v128_u8 foreground = vec_perm(_last, _last, _perm);\n        vec_st(vec_sel(background, foreground, _mask), 0, _ptr);\n    }\n\n    template &lt;class T&gt; inline void Next(T value)\n    {\n        _ptr += 16;\n        vec_st(vec_perm(_last, (v128_u8)value, _perm), 0, _ptr);\n        _last = (v128_u8)value;\n    }\n\n    inline void Flush()\n    {\n        v128_u8 background = vec_ld(16, _ptr);\n        v128_u8 foreground = vec_perm(_last, _last, _perm); \n        vec_st(vec_sel(foreground, background, _mask), 16, _ptr);\n    }\nprivate:\n    uint8_t * _ptr;\n    v128_u8 _perm;\n    v128_u8 _mask;\n    v128_u8 _last;\n};\n</code></pre>\n\n<p>Its using will be look like:</p>\n\n<pre><code>template&lt;bool align&gt; void SomeFunc(const unsigned char * src, size_t size, unsigned char * dst)\n{\n    Storer&lt;align&gt; _dst(dst);\n    __vector unsigned char a = Load&lt;align&gt;(src);\n    //simple work\n    _dst.First(a);// save first block \n    for(size_t i = 16; i &lt; size; i += 16)\n    {\n        __vector unsigned char a = Load&lt;align&gt;(src + i);\n        //simple work\n        _dst.Next(a);// save body \n    }\n    _dst.Flush();  // save tail      \n}\n</code></pre>\n\n<p>Performance loss will be 30-40% compare to aligned version.\nIt is unpleasantly of course but tolerantly.</p>\n\n<p>Additional advantage is reducing of code -  all functions (aligned and unaligned) have the same implementation.</p>\n"}], "owner": {"reputation": 110, "user_id": 5857323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4283db2ded9f40e82eac87b9eaf4807c?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/5857323/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 35317921, "answer_count": 1, "score": 5, "last_activity_date": 1516452458, "creation_date": 1455113085, "last_edit_date": 1516452458, "question_id": 35317341, "link": "https://stackoverflow.com/questions/35317341/how-to-store-a-vector-to-an-unaligned-location-in-memory-with-altivec", "title": "How to store a vector to an unaligned location in memory with Altivec", "body": "<p>I know from <a href=\"http://web-docs.gsi.de/~ikisel/reco/Systems/Altivec.pdf\" rel=\"noreferrer\">tutorial</a> that unaligned loading and storing it can look like: </p>\n\n<pre><code>//Load a vector from an unaligned location in memory\n__vector unsigned char LoadUnaligned(const unsigned char * src )\n{\n    __vector unsigned char permuteVector = vec_lvsl(0, src);\n    __vector unsigned char low = vec_ld( 0, src);\n    __vector unsigned char high = vec_ld( 16, src);\n    return vec_perm( low, high, permuteVector);\n}\n\n//Store a vector to an unaligned location in memory\nvoid StoreUnaligned(__vector unsigned char v, __vector unsigned char * dst)\n{\n    //Load the surrounding area\n    __vector unsigned char low = vec_ld( 0, dst);\n    __vector unsigned char high = vec_ld( 16, dst);\n    //Prepare the constants that we need\n    __vector unsigned char permuteVector = vec_lvsr( 0, (int*) dst);\n    __vector signed char oxFF = vec_splat_s8( -1 );\n    __vector signed char ox00 = vec_splat_s8( 0 );\n    //Make a mask for which parts of the vectors to swap out\n    __vector unsigned char mask = vec_perm( ox00, oxFF, permuteVector );\n    //Right rotate our input data\n    v = vec_perm( v, v, permuteVector );\n    //Insert our data into the low and high vectors\n    low = vec_sel( v, low, mask );\n    high = vec_sel( high, v, mask );\n    //Store the two aligned result vectors\n    vec_st( low, 0, dst);\n    vec_st( high, 16, dst);\n}\n</code></pre>\n\n<p>It looks terrible. So great amount of work in order to store one vector!\nAnd It has appropriate performance loss.</p>\n\n<pre><code>void SomeFuncA(const unsigned char * src, size_t size, unsigned char * dst)\n{\n    for(size_t i = 0; i &lt; size; i += 16)\n    {\n        __vector unsigned char a = vec_ld(0, src + i);\n        //simple work\n        vec_st(a, 0, dst + i);\n    }    \n}\n\nvoid SomeFuncU(const unsigned char * src, size_t size, unsigned char * dst)\n{\n    for(size_t i = 0; i &lt; size; i += 16)\n    {\n        __vector unsigned char a = LoadUnaligned(src + i);\n        //simple work\n        StoreUnaligned(dst + i, a);\n    }    \n}\n</code></pre>\n\n<p>The second function works in 3-4 times slowly than the first.\nSince I can't control align of input and output memory then I have to implement both versions. \nHow can I minimize performance loss for unaligned case?</p>\n"}, {"tags": ["c++", "opencv", "distortion", "fisheye"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1455116098, "post_id": 35317288, "comment_id": 58345581, "body": "probably you must know the real-world positions of the points. Typically you provide images of a test-pattern, where some features can be easily extracted (e.g. dot pattern or a chessboard pattern) and where you know the relative positions of the pattern elements."}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1455117138, "post_id": 35317288, "comment_id": 58346373, "body": "Thanks for the answer, but don&#39;t you think there is a geometric way to get these points by observation of the image only ? Or given the parameters of the lens can&#39;t I obtain them ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1455117435, "post_id": 35317288, "comment_id": 58346606, "body": "afaik there is no such way. There are however some non-standard approaches to use different kind of known objects. For example in <a href=\"https://hal.inria.fr/inria-00267247/document\" rel=\"nofollow noreferrer\">hal.inria.fr/inria-00267247/document</a> you just have to know that lines are straight in reality (afair). But you would probably would have to implement that correction process yourself, most common approach is to create a test pattern (or known object) and use that for calibration. On SO there was a question whether to use a coca cola can as calibration pattern, but no idea whether this was solved then."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1455117606, "post_id": 35317288, "comment_id": 58346765, "body": "or do you mean to extract the testpattern (chessboard corner) points from the image? Yes, that&#39;s possible."}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1455118140, "post_id": 35317288, "comment_id": 58347210, "body": "The answer below is very clear, thank you for all the help !!"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455117874, "post_id": 35318826, "comment_id": 58346991, "body": "Wow this is really clear ! Thankk you ! So, if I undurstand it correctly, the actual length of the square side does not matter (cf. the length of the vector in the real world ), everything is relative. And also, do you have an idea of the number of points I should take ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455118150, "post_id": 35318826, "comment_id": 58347218, "body": "the more points the better, and the more distributed over the image the better. I don&#39;t know how many points are needed as a minimum, sorry. The actual size of the squares does only matter if you&#39;ll need or provide the correct camera intrinsic parameters (incl. scale), afaik it is not needed for the distortion correction. However I must tell you that I didn&#39;t use the fisheye::calibrate function yet myself, so all this is just from my non-fisheye calibration experience and might be erroneous, so if it doesn&#39;t work in your case don&#39;t trust too much on my example :)"}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455455442, "post_id": 35318826, "comment_id": 58488094, "body": "I used the function as you said but I&#39;m getting some weird valued in the K matrix. I printed the values in the console and this is what I got: [-1.#IND, -1.#IND, -1.#IND;  0, -1.#IND, -1.#IND;  0, 0, 1]. Do you have an Idea of the problem ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455455529, "post_id": 35318826, "comment_id": 58488121, "body": "can you post the images and testpattern sizes you used for calibration?"}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455456085, "post_id": 35318826, "comment_id": 58488304, "body": "I used the image posted above. I need several images to perform the calibration ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455456215, "post_id": 35318826, "comment_id": 58488334, "body": "you took the image that I&#39;ve posted? For your camera you need your own images (taken by that camera). But you could use my image for testing... but maybe you need more points. I&#39;ll try later"}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455456224, "post_id": 35318826, "comment_id": 58488337, "body": "I updated the code above. The source image is the image of the chessboard that you uploaded here."}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455456306, "post_id": 35318826, "comment_id": 58488363, "body": "I just want to check currently if the functions work correcty on a general image, so the image you uploaded is enough for me. I used 20 points, I can try with more points and see."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1455471042, "post_id": 35318826, "comment_id": 58493376, "body": "sorry, no idea... maybe <a href=\"http://stackoverflow.com/questions/26794937/fisheye-lens-calibration-with-opencv-3-0\" title=\"fisheye lens calibration with opencv 3 0\">stackoverflow.com/questions/26794937/&hellip;</a> helps"}], "tags": [], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "is_accepted": false, "score": 1, "last_activity_date": 1455117488, "last_edit_date": 1455117488, "creation_date": 1455117079, "answer_id": 35318826, "question_id": 35317288, "link": "https://stackoverflow.com/questions/35317288/perform-calibration-on-fisheye-image-cancelling-fisheye-effect/35318826#35318826", "title": "Perform calibration on fisheye image - cancelling fisheye effect", "body": "<p>For calibration with <code>cv::fisheye::calibrate</code> you must provide </p>\n\n<pre><code>objectPoints    vector of vectors of calibration pattern points in the calibration pattern coordinate space. \n</code></pre>\n\n<p>This means to provide KNOWN real-world coordinates of the points (must be corresponding points to the ones in imagePoints), but you can choose the coordinate system positon arbitrarily (but carthesian), so you must know your object - e.g. a planar test pattern.</p>\n\n<pre><code>imagePoints vector of vectors of the projections of calibration pattern points\n</code></pre>\n\n<p>These must be the same points as in objectPoints, but given in image coordinates, so where the projection of the object points hit your image (read/extract the coordinates from your image).</p>\n\n<p>For example, if your camera did capture this image (taken from <a href=\"http://docs.opencv.org/master/db/d58/group__calib3d__fisheye.html#gsc.tab=0\" rel=\"nofollow noreferrer\">here</a> ):</p>\n\n<p><a href=\"https://i.stack.imgur.com/lBIqt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lBIqt.jpg\" alt=\"image of a testpattern, captured by a fisheye camera\"></a></p>\n\n<p>you must know the dimension of your testpattern (up to a scale), for example you could choose the top-left corner of the top-left square to be position (0,0,0), the top-right corner of the top-left square to be (1,0,0), and the bottom-left corner of the top-left square to be (1,1,0), so your whole testpattern would be placed on the xy-plane.</p>\n\n<p>Then you could extract these correspondences:</p>\n\n<pre><code>pixel        real-world\n(144,103)    (4,3,0)\n(206,75)     (7,2,0)\n(109,151)    (2,5,0)\n(253,159)    (8,6,0)\n</code></pre>\n\n<p>for these points (marked red):</p>\n\n<p><a href=\"https://i.stack.imgur.com/oW8nM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oW8nM.png\" alt=\"enter image description here\"></a></p>\n\n<p>The pixel position could be your <code>imagePoints</code> list while the real-world positions could be your <code>objectPoints</code> list.</p>\n\n<p>Does this answer your question?</p>\n"}], "owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2091, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455456155, "creation_date": 1455112928, "last_edit_date": 1455456155, "question_id": 35317288, "link": "https://stackoverflow.com/questions/35317288/perform-calibration-on-fisheye-image-cancelling-fisheye-effect", "title": "Perform calibration on fisheye image - cancelling fisheye effect", "body": "<p>I'm currently using opencv library with c++, and my goal is to cancel a fisheye effect on an image (\"make it plane\") \nI'm using the function \"undistortImage\" to cancel the effect but I need before to perform camera calibration in order to find the parameters K, Knew, and D, but I didn't understand exactly the documentation ( link: <a href=\"http://docs.opencv.org/master/db/d58/group__calib3d__fisheye.html#gga37375a2741e88052ce346884dfc9c6a0a0899eaa2f96d6eed9927c4b4f4464e05\" rel=\"nofollow\">http://docs.opencv.org/master/db/d58/group__calib3d__fisheye.html#gga37375a2741e88052ce346884dfc9c6a0a0899eaa2f96d6eed9927c4b4f4464e05</a>). \nFrom my understanding, I should give two lists of points and the function \"calibrate\" is supposed to return the arrays I need. So my question is the following: given a fisheye image, how am I supposed to pick the two lists of points to get the result ? This is for the moment my code, very basic, just takes the picture, display it, performs the undistortion and displays the new image. The elements in the matrix are random, so currently the result is not as expected. Thanks for the answers.</p>\n\n<pre><code>#include \"opencv2\\core\\core.hpp\"\n#include \"opencv2\\highgui\\highgui.hpp\"\n#include \"opencv2\\calib3d\\calib3d.hpp\"\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace std;\nusing namespace cv;\n\nint main(){\n\n    cout &lt;&lt; \" Usage: display_image ImageToLoadAndDisplay\" &lt;&lt; endl;\n    Mat image;\n    image = imread(\"C:/Users/Administrator/Downloads/eiffel.jpg\", CV_LOAD_IMAGE_COLOR);   // Read the file\n    if (!image.data)                              // Check for invalid input\n    {\n        cout &lt;&lt; \"Could not open or find the image\" &lt;&lt; endl;\n        return -1;\n    }\n    cout &lt;&lt; \"Input image depth: \" &lt;&lt; image.depth() &lt;&lt; endl;\n\n    namedWindow(\"Display window\", WINDOW_AUTOSIZE);// Create a window for display.\n    imshow(\"Display window\", image);                   // Show our image inside it.\n\n    Mat Ka = Mat::eye(3, 3, CV_64F); // Creating distortion matrix\n    Mat Da = Mat::ones(1, 4, CV_64F);\n    Mat dstImage(image.rows, image.cols, CV_32F);\n\n    cout &lt;&lt; \"K matrix depth: \" &lt;&lt; Ka.depth() &lt;&lt; endl;\n    cout &lt;&lt; \"D matrix depth: \" &lt;&lt; Da.depth() &lt;&lt; endl;\n\n    Mat Knew = Mat::eye(3, 3, CV_64F);\n    std::vector&lt;cv::Vec3d&gt; rvec;\n    std::vector&lt;cv::Vec3d&gt; tvec;\n    int flag = 0; \n    std::vector&lt;Point3d&gt; objectPoints1 = { Point3d(0,0,0),  Point3d(1,1,0),  Point3d(2,2,0), Point3d(3,3,0), Point3d(4,4,0), Point3d(5,5,0), \n        Point3d(6,6,0),  Point3d(7,7,0),  Point3d(3,0,0), Point3d(4,1,0), Point3d(5,2,0), Point3d(6,3,0), Point3d(7,4,0),  Point3d(8,5,0),  Point3d(5,4,0), Point3d(0,7,0), Point3d(9,7,0), Point3d(9,0,0), Point3d(4,3,0), Point3d(7,2,0)};\n    std::vector&lt;Point2d&gt; imagePoints1 = { Point(107,84),  Point(110,90),  Point(116,96), Point(126,107), Point(142,123), Point(168,147),\n        Point(202,173),  Point(232,192),  Point(135,69), Point(148,73), Point(165,81), Point(189,93), Point(219,112),  Point(248,133),  Point(166,119), Point(96,183), Point(270,174), Point(226,56), Point(144,102), Point(206,75) };\n\n    std::vector&lt;std::vector&lt;cv::Point2d&gt; &gt; imagePoints(1);\n    imagePoints[0] = imagePoints1;\n    std::vector&lt;std::vector&lt;cv::Point3d&gt; &gt; objectPoints(1);\n    objectPoints[0] = objectPoints1;\n    fisheye::calibrate(objectPoints, imagePoints, image.size(), Ka, Da, rvec, tvec, flag); // Calibration\n    cout &lt;&lt; Ka&lt;&lt; endl;\n    cout &lt;&lt; Da &lt;&lt; endl;\n    fisheye::undistortImage(image, dstImage, Ka, Da, Knew); // Performing distortion\n    namedWindow(\"Display window 2\", WINDOW_AUTOSIZE);// Create a window for display.\n    imshow(\"Display window 2\", dstImage);                   // Show our image inside it.\n\n    waitKey(0);                                          // Wait for a keystroke in the window\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "clang-format"], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 245415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bb3723c9baeeafcfc5033a806f905?s=128&d=identicon&r=PG", "display_name": "XKpe", "link": "https://stackoverflow.com/users/245415/xkpe"}, "is_accepted": true, "score": 0, "last_activity_date": 1472647819, "creation_date": 1472647819, "answer_id": 39250161, "question_id": 35317115, "link": "https://stackoverflow.com/questions/35317115/clang-format-3-8-breaks-before-and-after-comment-blocks/39250161#39250161", "title": "clang-format 3.8 breaks before and after comment blocks", "body": "<p>I've found that this problem can be solved by setting:</p>\n\n<pre><code>KeepEmptyLinesAtTheStartOfBlocks: true\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 245415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bb3723c9baeeafcfc5033a806f905?s=128&d=identicon&r=PG", "display_name": "XKpe", "link": "https://stackoverflow.com/users/245415/xkpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 39250161, "answer_count": 1, "score": 1, "last_activity_date": 1472647819, "creation_date": 1455112464, "question_id": 35317115, "link": "https://stackoverflow.com/questions/35317115/clang-format-3-8-breaks-before-and-after-comment-blocks", "title": "clang-format 3.8 breaks before and after comment blocks", "body": "<p>Is there a way to control the break before and after comment blocks?</p>\n\n<p>I'd like to have my comment blocks to be connected with the following function. I'd also like to have one line break before a comment block.</p>\n\n<p>For example this code:</p>\n\n<pre><code>/**\n * \\breif some comments\n */\n\nvoid f1()\n{\n}\n\n\n/**\n * \\breif some comments\n */\n\n\nvoid f1()\n{\n}\n\n\nclass A {\n\n/**\n * \\breif some comments\n */\n\nvoid f1()\n{\n}\n\n/**\n * \\breif some comments\n */\nvoid f1()\n{\n}\n};\n\ntemplate&lt;typename T&gt;\nclass A {\n\n\n/**\n * \\breif some comments\n */\n\nvoid f1()\n{\n}\n\n/**\n * \\breif some comments\n */\nvoid f1()\n{\n}\n\n};\n</code></pre>\n\n<p>To be formatted like this:</p>\n\n<pre><code>/**\n * \\breif some comments\n */\nvoid f1()\n{\n}\n\n/**\n * \\breif some comments\n */\nvoid f1()\n{\n}\n\nclass A\n{\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n};\n\ntemplate &lt; typename T &gt;\nclass A\n{\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n};\n</code></pre>\n\n<p>But what I'm getting is this:</p>\n\n<pre><code>/**\n * \\breif some comments\n */\n\nvoid f1()\n{\n}\n\n/**\n * \\breif some comments\n */\n\nvoid f1()\n{\n}\n\nclass A\n{\n  /**\n   * \\breif some comments\n   */\n\n  void f1() {}\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n};\n\ntemplate &lt; typename T &gt;\nclass A\n{\n  /**\n   * \\breif some comments\n   */\n\n  void f1() {}\n  /**\n   * \\breif some comments\n   */\n  void f1() {}\n};\n</code></pre>\n\n<p>Here is my <code>.clang-format</code>:</p>\n\n<pre><code>---\nLanguage:        Cpp\nBasedOnStyle:  Google\nAccessModifierOffset: -2\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: false\nAlignConsecutiveDeclarations: false\n\nAlignEscapedNewlinesLeft: true\nAlignOperands:   true\nAlignTrailingComments: true\nAllowAllParametersOfDeclarationOnNextLine: true\n\nAllowShortBlocksOnASingleLine: false\nAllowShortCaseLabelsOnASingleLine: false\nAllowShortFunctionsOnASingleLine: Inline\nAllowShortIfStatementsOnASingleLine: false\nAllowShortLoopsOnASingleLine: false\n\nAlwaysBreakAfterDefinitionReturnType: None\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: true\nAlwaysBreakTemplateDeclarations: true\n\nBinPackArguments: true\nBinPackParameters: true\n\nBraceWrapping:\n  AfterClass:      false\n  AfterControlStatement: false\n  AfterEnum:       false\n  AfterFunction:   false\n  AfterNamespace:  false\n  AfterObjCDeclaration: false\n  AfterStruct:     false\n  AfterUnion:      false\n  BeforeCatch:     false\n  BeforeElse:      false\n  IndentBraces:    false\n\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Allman\nBreakBeforeTernaryOperators: true\nBreakConstructorInitializersBeforeComma: false\nColumnLimit:     100\nCommentPragmas:  '^ IWYU pragma:'\nConstructorInitializerAllOnOneLineOrOnePerLine: true\nConstructorInitializerIndentWidth: 0\nContinuationIndentWidth: 4\nCpp11BracedListStyle: true\nDerivePointerAlignment: true\nDisableFormat:   false\nExperimentalAutoDetectBinPacking: false\nForEachMacros:   [ foreach, Q_FOREACH, BOOST_FOREACH ]\nIncludeCategories:\n  - Regex:           '^&lt;.*\\.h&gt;'\n    Priority:        1\n  - Regex:           '^&lt;.*'\n    Priority:        2\n  - Regex:           '.*'\n    Priority:        3\nIndentCaseLabels: false\nIndentWidth:     2\nIndentWrappedFunctionNames: false\nKeepEmptyLinesAtTheStartOfBlocks: false\nMacroBlockBegin: ''\nMacroBlockEnd:   ''\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: None\nObjCBlockIndentWidth: 2\nObjCSpaceAfterProperty: false\nObjCSpaceBeforeProtocolList: false\nPenaltyBreakBeforeFirstCallParameter: 1\nPenaltyBreakComment: 300\nPenaltyBreakFirstLessLess: 120\nPenaltyBreakString: 1000\nPenaltyExcessCharacter: 1000000\nPenaltyReturnTypeOnItsOwnLine: 200\nPointerAlignment: Left\nReflowComments:  true\nSortIncludes:    true\nSpaceAfterCStyleCast: false\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: Never\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 1\nSpacesInAngles:  true\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: true\nSpacesInParentheses: true\nSpacesInSquareBrackets: true\nStandard:        Auto\nTabWidth:        2\nUseTab:          Never\n...\n</code></pre>\n"}, {"tags": ["c++", "qt", "permissions"], "answers": [{"comments": [{"owner": {"reputation": 1008, "user_id": 2987488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4eff17dc15a5bb805d298cc9d361689?s=128&d=identicon&r=PG&f=1", "display_name": "azal", "link": "https://stackoverflow.com/users/2987488/azal"}, "edited": false, "score": 0, "creation_date": 1455113612, "post_id": 35317158, "comment_id": 58343731, "body": "I am on Windows and the problem still remains unresolved. Isn&#39;t there a working cross-platform solution? The file I&#39;m trying to write is too big to wait for it to be cached in memory for writing and then get the error message. I want the check to be done a priori."}, {"owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "reply_to_user": {"reputation": 1008, "user_id": 2987488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4eff17dc15a5bb805d298cc9d361689?s=128&d=identicon&r=PG&f=1", "display_name": "azal", "link": "https://stackoverflow.com/users/2987488/azal"}, "edited": false, "score": 1, "creation_date": 1455116784, "post_id": 35317158, "comment_id": 58346106, "body": "An dirty option would be to create an empty file, you might use the QTemporaryFile <a href=\"http://doc.qt.io/qt-4.8/qtemporaryfile.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qtemporaryfile.html</a> which has the advantage of removing itself once closed"}, {"owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "reply_to_user": {"reputation": 1008, "user_id": 2987488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4eff17dc15a5bb805d298cc9d361689?s=128&d=identicon&r=PG&f=1", "display_name": "azal", "link": "https://stackoverflow.com/users/2987488/azal"}, "edited": false, "score": 0, "creation_date": 1455117200, "post_id": 35317158, "comment_id": 58346421, "body": "It looks like that writable on windows just means you can change it&#39;s name. That&#39;s why the Destop folder is readonly but you can still create a file inside (<a href=\"http://stackoverflow.com/questions/1089598/incorrect-qfileinfo-permissions-for-user-desktop-on-vista-64\" title=\"incorrect qfileinfo permissions for user desktop on vista 64\">stackoverflow.com/questions/1089598/&hellip;</a>)"}, {"owner": {"reputation": 1008, "user_id": 2987488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4eff17dc15a5bb805d298cc9d361689?s=128&d=identicon&r=PG&f=1", "display_name": "azal", "link": "https://stackoverflow.com/users/2987488/azal"}, "edited": false, "score": 0, "creation_date": 1455179452, "post_id": 35317158, "comment_id": 58376148, "body": "since nothing &quot;clean&quot; works till now, I will try to set the flag for the NTFS system as @bibi suggested and i will let you know"}], "tags": [], "owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "is_accepted": false, "score": 8, "last_activity_date": 1455112608, "creation_date": 1455112608, "answer_id": 35317158, "question_id": 35317097, "link": "https://stackoverflow.com/questions/35317097/how-to-check-if-a-folder-is-writable-using-qt/35317158#35317158", "title": "How to check if a folder is writable using Qt", "body": "<p>use <a href=\"http://doc.qt.io/qt-4.8/qfileinfo.html\">QFileInfo</a>:</p>\n\n<pre><code>QFileInfo my_dir(folderName);\n\nif(my_dir.isDir() &amp;&amp; my_dir.isWritable()){\n    // Do something\n}\n</code></pre>\n\n<p>but pay attention to <a href=\"http://doc.qt.io/qt-4.8/qfile.html#platform-specific-issues\">this problem</a> if you're on Windows</p>\n"}], "owner": {"reputation": 1008, "user_id": 2987488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4eff17dc15a5bb805d298cc9d361689?s=128&d=identicon&r=PG&f=1", "display_name": "azal", "link": "https://stackoverflow.com/users/2987488/azal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5467, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1455112608, "creation_date": 1455112382, "question_id": 35317097, "link": "https://stackoverflow.com/questions/35317097/how-to-check-if-a-folder-is-writable-using-qt", "title": "How to check if a folder is writable using Qt", "body": "<p>I am trying to check if a folder is writable so I can prompt an error dialog.\nI am trying this:</p>\n\n<pre><code>QFileDevice::Permissions permissions_list = QFile( folderName ).permissions();\n\n    if ( permissions_list &amp;&amp; QFileDevice::WriteUser )\n    {\n    }\n</code></pre>\n\n<p>but it does not work. It's the same for both writable folders and restricted ones.</p>\n"}]