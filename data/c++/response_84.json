[{"tags": ["c++", "visual-studio"], "owner": {"reputation": 338, "user_id": 6484173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7682936a6670d3d50ad4ef018e12af3?s=128&d=identicon&r=PG&f=1", "display_name": "jv110", "link": "https://stackoverflow.com/users/6484173/jv110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471477858, "creation_date": 1471477858, "question_id": 39007937, "link": "https://stackoverflow.com/questions/39007937/lnk2019-error-on-template-function-even-when-implementing-on-header", "title": "LNK2019 error on template function even when implementing on header", "body": "<p>I have a GameObject class that has a component system that works with templates (using typenames). But doesn't build, and I don't see anything wrong with it.</p>\n\n<p>I've searched a lot, and the only solution I can find is to put the implementation in the header, which I did.</p>\n\n<p>Thanks.</p>\n\n<p>Here's the output:</p>\n\n<pre><code>1&gt;------ Build started: Project: SomeRandomProject, Configuration: Debug Win32 ------\n1&gt;  &lt;some other files&gt;\n1&gt;  Camera.cpp\n1&gt;  Sprite.cpp\n1&gt;  GameObject.cpp\n1&gt;Camera.obj : error LNK2019: unresolved external symbol \"public: class Model * __thiscall GameObject::getComponent&lt;class Model&gt;(void)\" (??$getComponent@VModel@@@GameObject@@QAEPAVModel@@XZ) referenced in function \"public: void __thiscall Camera::render(class Level *)\" (?render@Camera@@QAEXPAVLevel@@@Z)\n1&gt;Camera.obj : error LNK2019: unresolved external symbol \"public: class Texture * __thiscall GameObject::getComponent&lt;class Texture&gt;(void)\" (??$getComponent@VTexture@@@GameObject@@QAEPAVTexture@@XZ) referenced in function \"public: void __thiscall Camera::render(class Level *)\" (?render@Camera@@QAEXPAVLevel@@@Z)\n1&gt;Sprite.obj : error LNK2019: unresolved external symbol \"public: void __thiscall GameObject::addComponent&lt;class Model&gt;(class Component *)\" (??$addComponent@VModel@@@GameObject@@QAEXPAVComponent@@@Z) referenced in function \"public: __thiscall Sprite::Sprite(class Texture *)\" (??0Sprite@@QAE@PAVTexture@@@Z)\n1&gt;Sprite.obj : error LNK2019: unresolved external symbol \"public: void __thiscall GameObject::addComponent&lt;class Texture&gt;(class Component *)\" (??$addComponent@VTexture@@@GameObject@@QAEXPAVComponent@@@Z) referenced in function \"public: __thiscall Sprite::Sprite(class Texture *)\" (??0Sprite@@QAE@PAVTexture@@@Z)\n1&gt;C:\\some\\random\\path.exe : fatal error LNK1120: 4 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>GameObject.h:</p>\n\n<pre><code>#pragma once\n\n#include \"Component.h\"\n#include &lt;glm/glm.hpp&gt;\n#include &lt;typeindex&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nclass GameObject {\npublic:\n    std::string name;\n    glm::vec3 pos;\n    glm::vec3 rot;\n\npublic:\n    GameObject();\n    ~GameObject();\n\n    template&lt;typename T&gt;\n    void addComponent(Component* component) {\n        components[typeid(T)] = (void*) component;\n        component-&gt;object = this;\n        component-&gt;init();\n    }\n\n    template&lt;typename T&gt;\n    T* getComponent() {\n        return (T*) components[typeid(T)];\n    }\n\n    void update();\n\nprivate:\n    std::map&lt;std::type_index, Component*&gt; components;\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda", "function-pointers"], "comments": [{"owner": {"reputation": 1401, "user_id": 5813357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XErIM.png?s=128&g=1", "display_name": "romain-aga", "link": "https://stackoverflow.com/users/5813357/romain-aga"}, "edited": false, "score": 0, "creation_date": 1471477806, "post_id": 39007879, "comment_id": 65367495, "body": "It&#39;s been a long time that I wrote some C++, but if my memory is still intact, you can write closure in c++ and return it like in javascript/python."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 3, "creation_date": 1471477928, "post_id": 39007879, "comment_id": 65367521, "body": "<code>std::function</code> is probably what you want."}], "answers": [{"comments": [{"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1471479032, "post_id": 39008011, "comment_id": 65367800, "body": "I&#39;m not going to rewrite completely the original question&#39;s code. One step at the time :-)"}, {"owner": {"reputation": 3165, "user_id": 865725, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/240fb333fcd026655ba8b257cc3a5d9e?s=128&d=identicon&r=PG", "display_name": "pizzafilms", "link": "https://stackoverflow.com/users/865725/pizzafilms"}, "edited": false, "score": 0, "creation_date": 1471479853, "post_id": 39008011, "comment_id": 65368009, "body": "Thanks, but I was looking for a way that Slider wouldn&#39;t have to know anything about Editor."}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "edited": false, "score": 1, "creation_date": 1471480005, "post_id": 39008011, "comment_id": 65368053, "body": "you&#39;re really better off having an interface (contract) of some kind. Often just passing function pointers/<code>std::function</code> wrappers is not the best solution and it will result in maintenance nightmares."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1471481192, "post_id": 39008011, "comment_id": 65368329, "body": "I think these are terrible solutions for the use case in the OP; I did not downvote, however, since the approaches can sometimes be reasonable for other problems."}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "edited": false, "score": 0, "creation_date": 1471481568, "post_id": 39008011, "comment_id": 65368399, "body": "I personally find quite useful to template these kind of things, of course not as a general rule. In generic code it helps a lot and ti means you can pass a functor, a lambda, a function pointer and everything would still work."}], "tags": [], "owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "is_accepted": false, "score": -1, "last_activity_date": 1471479524, "last_edit_date": 1471479524, "creation_date": 1471478329, "answer_id": 39008011, "question_id": 39007879, "link": "https://stackoverflow.com/questions/39007879/function-pointer-functor-or-lambda/39008011#39008011", "title": "Function pointer, Functor or Lambda?", "body": "<p>There are different ways to achieve what you're looking for. \nHere's a way, avoiding function pointers.</p>\n\n<p>I didn't correct some other obvious mistakes, like the memory leak that arises from calling<code>new</code> and never deleting the object. \nBest practice in this case would be using a <code>std::unique_ptr</code></p>\n\n<pre><code>class Slider\n{\npublic:\n\n    Slider(Editor&amp; e)\n  : _e(e)\n  { }\n    void onMouseDown()\n    {\n        if(rightClick or ctlKeyDown)\n        {\n            _e.showPopupMenu(this);\n        }\n    }\n\n    Editor&amp; _e;\n};\n\n\nclass Editor\n{\npublic:\n    void showPopupMenu(Slider *s)\n    {\n        // build the popupMenu with information based on the slider\n    }\n\n    void init()\n    {\n        // create a slider and connect the popupMenu function to it\n        mySlider = new Slider(*this);\n    }\n\n    Slider* mySlider;\n};\n</code></pre>\n\n<p>Here's another solution moving a functor directly in the constructor, however using templates.</p>\n\n<pre><code>template &lt;typename Handler&gt;\nclass Slider\n{\npublic:\n\n        Slider(Handler&amp;&amp; h)\n        : _h(std::move(h))\n        { }\n\n    void onMouseDown()\n    {\n        if(rightClick or ctlKeyDown)\n        {\n           // show popup menu\n           _h(this);\n        }\n    }\n\n        Handler _h;\n};\n\n\nclass Editor\n{\npublic:\n    void showPopupMenu(Slider *s)\n    {\n        // build the popupMenu with information based on the slider\n    }\n\n    void init()\n    {\n        // create a slider and connect the popupMenu function to it\n        mySlider = new Slider([this](Slider* s){ showPopupMenu(s); });\n    }\n\n    Slider *mySlider;\n};\n</code></pre>\n\n<p>You could also use a <code>std::function</code> instead, as shows on another answer</p>\n"}, {"comments": [{"owner": {"reputation": 3165, "user_id": 865725, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/240fb333fcd026655ba8b257cc3a5d9e?s=128&d=identicon&r=PG", "display_name": "pizzafilms", "link": "https://stackoverflow.com/users/865725/pizzafilms"}, "edited": false, "score": 0, "creation_date": 1471479789, "post_id": 39008022, "comment_id": 65367986, "body": "I was about 80% there when you posted this. Thanks. I would have missed the way you declared the actual function. This worked perfectly, although I&#39;m guessing that you meant to use [me](Slider *s) instead of [this](Slider *). Thanks again!"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 3165, "user_id": 865725, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/240fb333fcd026655ba8b257cc3a5d9e?s=128&d=identicon&r=PG", "display_name": "pizzafilms", "link": "https://stackoverflow.com/users/865725/pizzafilms"}, "edited": false, "score": 0, "creation_date": 1471479856, "post_id": 39008022, "comment_id": 65368011, "body": "I actually captured <code>me</code> initially, but while pondering the best style, decided to switch back to capturing <code>this</code>, but forgot to remove that line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 3, "creation_date": 1471480514, "post_id": 39008022, "comment_id": 65368154, "body": "Higher order programming may be an advanced <i>programming</i> topic -- but for someone who <i>has</i> learned it, I strongly disagree with the sentiment that it is something you should avoid doing in C++."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1471480552, "post_id": 39008022, "comment_id": 65368160, "body": "I do not recall saying that it should be avoided permanently."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 2, "last_activity_date": 1471479820, "last_edit_date": 1471479820, "creation_date": 1471478433, "answer_id": 39008022, "question_id": 39007879, "link": "https://stackoverflow.com/questions/39007879/function-pointer-functor-or-lambda/39008022#39008022", "title": "Function pointer, Functor or Lambda?", "body": "<p>Lambdas and functors are one of the most advanced C++ topics. You're better off starting with some fundamentals before, and have a solid understanding of how C++ classes work.</p>\n\n<p>But, since you asked, the C++ equivalent of this should be something like this:</p>\n\n<pre><code>class Slider\n{\npublic:\n    void onMouseDown()\n    {\n        if(rightClick or ctlKeyDown)\n        {\n            if(myFunctionPointer)\n            {\n                // show popup menu\n                myFunctionPointer(this);\n            }\n        }\n    }\n\n    std::function&lt;void (Slider *)&gt; myFunctionPointer=nullptr;\n};\n\n\nclass Editor\n{\npublic:\n    void showPopupMenu(Slider *s)\n    {\n        // build the popupMenu with information based on the slider\n    }\n\n    void init()\n    {\n        // create a slider and connect the popupMenu function to it\n        mySlider = new Slider;\n\n\n        mySlider-&gt;functionPointer = [this](Slider *)\n             {\n                   showPopupMenu();\n             };\n\n    }\n\n    Slider *mySlider;\n};\n</code></pre>\n\n<p>As I said, I think that you're better off focusing your efforts on getting the fundamentals down pat, first, before plunging into these shark-infested waters.</p>\n\n<p>And just to add some additional color: this will compile (the only thing that's missing is the definitions of <code>rightClick</code> or <code>ctlKeyDown</code>), but it may or may not be right, depending on the scope and the lifetime of the objects involved. It may or may not be necessary to have the lambda capture a <code>std::shared_ptr</code>, instead of <code>this</code>, depending on how the objects in this application get instantiated. Understanding how C++ objects work would be a necessary prerequisite before dealing with closures and callbacks, of this sort.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 2, "creation_date": 1471480698, "post_id": 39008233, "comment_id": 65368213, "body": "I think I disagree with your advice about function pointers -- what you describe is a <i>necessary</i> condition for their use, but is not a <i>sufficient</i> condition. Using a function pointer instead of <code>std::function</code> is an <i>optimization</i>, and probably a premature one."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1471483699, "post_id": 39008233, "comment_id": 65368902, "body": "@hurkyl As an aside, sufficient reasons for using a function pointer over a std function include include need for nothrow copy/construct, constexpr evaluation of value or template non-type argument, standard layout and other pod requirements, guarantee of statelessness, etc.  Did I miss any important ones you know of?"}], "tags": [], "owner": {"reputation": 830, "user_id": 5630061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67ef8f5d4b99d8f7e6d8f5efba127bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dafang Cao", "link": "https://stackoverflow.com/users/5630061/dafang-cao"}, "is_accepted": false, "score": 5, "last_activity_date": 1471480507, "creation_date": 1471480507, "answer_id": 39008233, "question_id": 39007879, "link": "https://stackoverflow.com/questions/39007879/function-pointer-functor-or-lambda/39008233#39008233", "title": "Function pointer, Functor or Lambda?", "body": "<p>When it comes to treating function as objects, your basic options are: function pointer, functor/lambda, std::function. I am going to assume that you can find out their syntax and will focus on their difference.</p>\n\n<p>A function pointer should be used when there is no need for a closure. This applies when the procedure you want to call is stateless or has a global state, and you have all parameters in the scope.</p>\n\n<p>A functor should be used when you need to create a closure. Since functors are objects, you can maintain an internal state and pass parameters inside the closure.</p>\n\n<p>A lambda is essentially a functor, without an explicit typename. The capture list of a lambda is its member if it were implemented as a functor instead. Note that you can overload <code>operator()</code> for a functor but not a lambda.</p>\n\n<p>The problem with functor/lambdas is that each of their definition has a different type, and can be ill-suited in function signature/class member types. std::function resolves the problem by being able to accept functor/lambda/function pointer and convert them to a uniform type of std::function. You pay a (often small) price for this flexibility in the form of performance though.</p>\n"}], "owner": {"reputation": 3165, "user_id": 865725, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/240fb333fcd026655ba8b257cc3a5d9e?s=128&d=identicon&r=PG", "display_name": "pizzafilms", "link": "https://stackoverflow.com/users/865725/pizzafilms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2542, "favorite_count": 1, "accepted_answer_id": 39008022, "answer_count": 3, "score": 2, "last_activity_date": 1471480507, "creation_date": 1471477446, "question_id": 39007879, "link": "https://stackoverflow.com/questions/39007879/function-pointer-functor-or-lambda", "title": "Function pointer, Functor or Lambda?", "body": "<p>I'm relatively new to C++, having spent years with Obj-C, and wondering about how to add what would be closure block in Obj-C, to a C++ class. Here's some pseudo code of what I want to do:</p>\n\n<pre><code>class Slider\n{\npublic:\n    void onMouseDown()\n    {\n        if(rightClick or ctlKeyDown)\n        {\n            if(myFunctionPointer != nil)\n            {\n                // show popup menu\n                myFunctionPointer(this);\n            }\n        }\n    }\n\n    FunctionPointer myFunctionPointer = nil;\n};\n\n\nclass Editor\n{\npublic:\n    void showPopupMenu(Slider *s)\n    {\n        // build the popupMenu with information based on the slider\n    }\n\n    void init()\n    {\n        // create a slider and connect the popupMenu function to it\n        mySlider = new Slider;\n        mySlider-&gt;functionPointer = showPopupMenu();\n    }\n\n    Slider *mySlider;\n};\n</code></pre>\n\n<p>As you can see, I'm trying to get my Slider class to call a function without knowing anything about it. </p>\n\n<p>This shouldn't be that difficult, but I'm interested in doing it the best/proper way. Lambdas and functors look incredibly confusing. Maybe I'm looking for something else. But what?</p>\n"}, {"tags": ["c++", "c++11", "boost", "lambda"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 3, "creation_date": 1471477355, "post_id": 39007806, "comment_id": 65367375, "body": "personally, I&#39;d write a <code>transform_if</code> template function--it would mirror the naming scheme of other algorithms like <code>copy_if</code> and keep the resulting code simple and comprehensible."}, {"owner": {"reputation": 1664, "user_id": 1851678, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bdcff1b7cdb4a88526e436ad7550c9a4?s=128&d=identicon&r=PG", "display_name": "Zoso", "link": "https://stackoverflow.com/users/1851678/zoso"}, "edited": false, "score": 0, "creation_date": 1615757479, "post_id": 39007806, "comment_id": 117784217, "body": "Half a decade late comment but a simple for each loop and inserting the elements in the map didn&#39;t work for you?"}, {"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "reply_to_user": {"reputation": 1664, "user_id": 1851678, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bdcff1b7cdb4a88526e436ad7550c9a4?s=128&d=identicon&r=PG", "display_name": "Zoso", "link": "https://stackoverflow.com/users/1851678/zoso"}, "edited": false, "score": 0, "creation_date": 1616003318, "post_id": 39007806, "comment_id": 117869832, "body": "@Zoso I don&#39;t have the code in front of me now, but one could imagine: I store a lambda somewhere that various parts of my code use for doing this type of processing/filtering (maybe I even have a collection of lambdas for different filters etc.).  So in that case I&#39;m stuck using lambdas; and I want my lambdas to do the processing, not just return true/false whether the processing should be done.  And if the logic for checking badness of an item is very complicated, I want that logic buried inside the lambda (not repeated). So transform_if + lambda may be cleaner than foreach + badness checks."}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471540634, "post_id": 39007978, "comment_id": 65398756, "body": "This would work, but does this require looking at each element in the vector twice, once to perform the filter and then again inside the lambda?  I&#39;m hoping to do something like this but to visit each item in the vector just once."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471543313, "post_id": 39007978, "comment_id": 65400234, "body": "@davewy The Boost adaptors are lazy. Here&#39;s a demo - <a href=\"http://coliru.stacked-crooked.com/a/60c28e85ec08bbe3\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/60c28e85ec08bbe3</a>. For some reason, the lambda is called once for the very first element in the <code>vector</code> before the call to <code>transform</code> (maybe that&#39;s just how the range composition works) but other than that, the <code>vector</code> is being traversed within the call to <code>transform</code>."}, {"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471545156, "post_id": 39007978, "comment_id": 65401213, "body": "Thanks!  In the code sample you provide, it looks like elements are printed out two or three times.  Even though boost adaptors are lazy, they still require evaluation when the iterator visits an element.  So each element is visited two or three times, not just once.  Any ideas?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 1, "creation_date": 1471547082, "post_id": 39007978, "comment_id": 65402250, "body": "@davewy Here&#39;s the same example made less noisy - <a href=\"http://coliru.stacked-crooked.com/a/fadee6ebf30cd7c6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/fadee6ebf30cd7c6</a>. I&#39;d defined the <code>string</code> conversion operator to avoid defining the other operators for <code>MyString</code>, but since I defined them anyway, that conversion is not necessary. So each element is being printed twice, once for the filtering and once for the transform, not sure how you want to avoid either."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": false, "score": 3, "last_activity_date": 1471478136, "creation_date": 1471478136, "answer_id": 39007978, "question_id": 39007806, "link": "https://stackoverflow.com/questions/39007806/stdtransform-with-lambda-skip-some-items/39007978#39007978", "title": "std::transform with lambda: skip some items", "body": "<p>You can use <a href=\"http://www.boost.org/doc/libs/release/libs/range/doc/html/range/reference/adaptors/reference/filtered.html\" rel=\"nofollow\"><code>boost::adaptors::filtered</code></a> to first filter the <code>vector</code> of the elements you don't want, before passing it to <code>transform</code>.</p>\n\n<pre><code>using boost::adaptors::filtered;\nboost::transform(names | filtered([](std::string const&amp; s) { return s != \"bad\"; }),\n                 std::inserter(first_to_last_name_map, first_to_last_name_map.begin()),\n                 [](std::string const&amp; i) { return std::make_pair(i.substr(0,5), i.substr(5,5)); });\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f11c36f78a13d4e2\" rel=\"nofollow\">Live demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471540561, "post_id": 39008607, "comment_id": 65398723, "body": "This would work, but does this require 2 passes through the vector, one to construct the iterator returned by remove_if and one to do the transform?  I&#39;m hoping to do something like this but to visit each item in the vector just once."}], "tags": [], "owner": {"reputation": 1148, "user_id": 4966481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27fef0fb61ca4732c48f1b021f66ca92?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Martin", "link": "https://stackoverflow.com/users/4966481/adam-martin"}, "is_accepted": false, "score": 4, "last_activity_date": 1471483718, "creation_date": 1471483718, "answer_id": 39008607, "question_id": 39007806, "link": "https://stackoverflow.com/questions/39007806/stdtransform-with-lambda-skip-some-items/39008607#39008607", "title": "std::transform with lambda: skip some items", "body": "<p>You can simply have a first/last pass with <code>std::remove_if</code>.  E.g. </p>\n\n<pre><code>std::vector&lt;std::string&gt; names;\nstd::map&lt;std::string, std::string&gt; first_to_last_name_map;\nstd::transform(names.begin(), \n               std::remove_if(names.begin(),\n                              names.end(),\n                              [](const std::string &amp;str){\n                                    return str==\"bad\";\n                              }),\n               std::inserter(first_to_last_name_map, \n                             first_to_last_name_map.begin()),\n               [](const std::string&amp; i){\n                     return std::pair&lt;std::string, std::string&gt;(i.substr(0,5), i.substr(5,5));\n               });\n</code></pre>\n\n<p>Note that <code>remove_if</code> simply shifts the removed items past the iterator it returns.  </p>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471541061, "post_id": 39008659, "comment_id": 65398971, "body": "I like this answer as well, but does it also require looking at each item in the vector twice, once inside the lambda and then again inside the if in transform_if (or implicitly inside the range iterator for f in polymap)?  I am hoping to consider each element in the vector only once."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471543931, "post_id": 39008659, "comment_id": 65400562, "body": "@davewy What do you mean by &quot;consider&quot; or &quot;looking&quot;?  The <code>if</code> clause branches on the engageness of the optional (is it empty or not), not on the contents of the optional.  It moves the contents out of the optional into the sink, which also isn&#39;t &quot;looking&quot;.  And the &quot;looking&quot; is done one element at a time -- there is only one pass here.  So, I am not sure what you are saying."}, {"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471544643, "post_id": 39008659, "comment_id": 65400931, "body": "I mean that there are two comparison operations performed for each element: the first comparison <code>(i == &quot;bad&quot;)</code> determines what value the optional should have, and then the second <code>if</code> looks at whether the optional has a value or not.  So two comparisons are performed before inserting the element into the map.  I want to perform only one comparison with or operation on each element in the vector before inserting the valid ones into the map."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 1, "creation_date": 1471548064, "post_id": 39008659, "comment_id": 65402743, "body": "@davewy So, your problem is you have a lambda which returns the equivalent of <code>false</code>, then the code calling the lambda does an <code>if</code>, and you are worried about that because ... performance?  Or some other reason?  First, it is in code that is about to <i>allocate memory</i> (maps are node-based), which is going to be 10x more expensive than even a failed branch.  Second, the second branch is quite removable by a compiler that inlines the lambda, and that is what lambdas are for (ease of inlining).  Finally, even if not inlined, it is highly predictable, and branch prediction makes it free."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1471487516, "last_edit_date": 1471487516, "creation_date": 1471484132, "answer_id": 39008659, "question_id": 39007806, "link": "https://stackoverflow.com/questions/39007806/stdtransform-with-lambda-skip-some-items/39008659#39008659", "title": "std::transform with lambda: skip some items", "body": "<pre><code>template&lt;class Src, class Sink, class F&gt;\nvoid transform_if(Src&amp;&amp; src, Sink&amp;&amp; sink, F&amp;&amp; f){\n  for(auto&amp;&amp; x:std::forward&lt;Src&gt;(src))\n    if(auto&amp;&amp; e=f(decltype(x)(x)))\n      *sink++ = *decltype(e)(e);\n}\n</code></pre>\n\n<p>Now simply get a boost or std or std experiental optional.  Have your <code>f</code> return an <code>optional&lt;blah&gt;</code>.</p>\n\n<pre><code>auto sink = std::inserter(first_to_last_name_map, first_to_last_name_map.begin());\nusing pair_type = decltype(first_to_last_name_map)::value_type;\n\ntransform_if(names, sink,\n  [](const std::string&amp; i)-&gt;std::optional&lt;pair_type&gt;{\n    if (i == \"bad\")\n      return {}; // Don't Want This\n    else\n      return std::make_pair(i.substr(0,5), i.substr(5,5));\n  }\n);\n</code></pre>\n\n<p>My personal preferred optional actually has begin end defined.  And we get this algorithm:</p>\n\n<pre><code>template&lt;class Src, class Sink, class F&gt;\nvoid polymap(Src&amp;&amp; src, Sink&amp;&amp; sink, F&amp;&amp; f){\n  for(auto&amp;&amp; x:std::forward&lt;Src&gt;(src))\n    for(auto&amp;&amp; e:f(decltype(x)(x)))\n      *sink++ = decltype(e)(e);\n}\n</code></pre>\n\n<p>which now lets the <code>f</code> return a range, where optional is a model of a zero or one element range.</p>\n"}], "owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4260, "favorite_count": 2, "accepted_answer_id": 39008659, "answer_count": 3, "score": 6, "last_activity_date": 1471541202, "creation_date": 1471476921, "last_edit_date": 1471541202, "question_id": 39007806, "link": "https://stackoverflow.com/questions/39007806/stdtransform-with-lambda-skip-some-items", "title": "std::transform with lambda: skip some items", "body": "<p>I have some C++11 code like</p>\n\n<pre><code>std::vector&lt;std::string&gt; names;\nstd::map&lt;std::string, std::string&gt; first_to_last_name_map;\nstd::transform(names.begin(), names.end(), std::inserter(first_to_last_name_map, first_to_last_name_map.begin()), [](const std::string&amp; i){\n    if (i == \"bad\")\n        return std::pair&lt;std::string, std::string&gt;(\"bad\", \"bad\"); // Don't Want This\n    else\n        return std::pair&lt;std::string, std::string&gt;(i.substr(0,5), i.substr(5,5));\n});\n</code></pre>\n\n<p>where I'm transforming a vector to a map using std::transform with a lambda function.  My problem is that sometimes, as shown, I don't want to return anything from my lambda function, i.e. I basically want to skip that <code>i</code> and go to the next one (without adding anything to the map).</p>\n\n<p>Is there any way to achieve what I'm thinking about?  I can use boost if it helps.  I want to avoid a solution where I have to do a pre-process or post-process on my vector to filter out the \"bad\" items; I should only need to look at each item once.  Also, my actual logic is a bit more complicated than the if/else as written, so I think it would be nice to keep things encapsulated in this std::transform/lambda model if possible (though maybe what I'm trying to achieve isn't possible with this model).</p>\n\n<p>EDIT: Just to emphasize, I'm looking to perform this operation (selectively processing vector elements and inserting them into a map) in the most efficient way possible, even if it means a less elegant solution or a big rewrite.  I could even use a different map data type depending on what is most efficient.</p>\n"}, {"tags": ["c++", "opengl", "textures", "sdl", "alpha"], "comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1471482121, "post_id": 39007747, "comment_id": 65368521, "body": "Not necessarily related, but your code comments about &quot;locking&quot; and &quot;unlocking&quot; by modifying the texture binding brought this to mind. Binding <b>0</b> doesn&#39;t really disable anything, there is an actual texture in OpenGL with name <b>0</b>. That texture is not immutable -- commands that modify texture data continue to function when <b>0</b> is bound and you can even draw using that texture, it&#39;s not a good idea because so many people assume that texture <b>0</b> has some special meaning that it usually has an inconsistent state."}, {"owner": {"reputation": 906, "user_id": 2654084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc5d1a109be8d1a57dd6230856631d1?s=128&d=identicon&r=PG", "display_name": "Ben Damer", "link": "https://stackoverflow.com/users/2654084/ben-damer"}, "edited": false, "score": 0, "creation_date": 1471624689, "post_id": 39007747, "comment_id": 65437520, "body": "Can you provide a link to the texture you are using? Also, what kind of mesh are you rendering the texture onto?"}, {"owner": {"reputation": 2036, "user_id": 3232810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f77698b15c8b222d1f27fb7edf43b92?s=128&d=identicon&r=PG", "display_name": "Jonny D", "link": "https://stackoverflow.com/users/3232810/jonny-d"}, "edited": false, "score": 0, "creation_date": 1474673048, "post_id": 39007747, "comment_id": 66643254, "body": "Remember to render back to front to properly compose colors with alpha blending."}], "owner": {"reputation": 19, "user_id": 6726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163a8d449319dc90fedd7ae8331b4c77?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Schambourg", "link": "https://stackoverflow.com/users/6726149/maxime-schambourg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471476551, "creation_date": 1471476551, "question_id": 39007747, "link": "https://stackoverflow.com/questions/39007747/problems-with-alpha-textures-opengl-sdl2", "title": "problems with alpha textures openGL + SDL2", "body": "<p>I load a texture in a PNG with transparency in my program with this code :</p>\n\n<pre><code>// Loading the image in a SDL_Surface\nSDL_Surface* imageSDL = IMG_Load(m_imageFile.c_str());\n\nif (imageSDL == 0)\n{\n    std::cout &lt;&lt; \"Error while loading texture \\\"\" &lt;&lt; m_imageFile.c_str() &lt;&lt; \"\\\" : \"\n    &lt;&lt; IMG_GetError() &lt;&lt; std::endl;\n    return false;\n}\n\nSDL_Surface* invertedImage = invertPixels(imageSDL);\nSDL_FreeSurface(imageSDL);\n\n// Destruction of an eventual old texture\nif(glIsTexture(m_id) == GL_TRUE)\n    glDeleteTextures(1, &amp;m_id);\n\n// ID Generation\nglGenTextures(1, &amp;m_id);\n\n// Locking\nglBindTexture(GL_TEXTURE_2D, m_id);\n\n// Assessing format and internal format\nGLenum internalFormat(0);\nGLenum format(0);\n\n// Assessing number of components (alpha or no alpha)\nif (invertedImage-&gt;format-&gt;BytesPerPixel == 3)\n{\n    internalFormat = GL_RGB;\n\n    if (invertedImage-&gt;format-&gt;Rmask == 0xff)\n        format = GL_RGB;\n\n    else\n        format = GL_BGR;\n}\nelse if (invertedImage-&gt;format-&gt;BytesPerPixel == 4)\n{\n    internalFormat = GL_RGBA;\n\n    if (invertedImage-&gt;format-&gt;Rmask == 0xff)\n        format = GL_RGBA;\n\n    else\n        format = GL_BGRA;\n}\nelse\n{\n    std::cout &lt;&lt; \"Error, unknown format of image \\\"\" &lt;&lt; m_imageFile.c_str() &lt;&lt; \"\\\" : \"\n    &lt;&lt; SDL_GetError() &lt;&lt; std::endl;\n    return false;\n}\n\n// pixels copying\nglTexImage2D(GL_TEXTURE_2D, 0, internalFormat, invertedImage-&gt;w, invertedImage-&gt;h, 0, format, GL_UNSIGNED_BYTE, invertedImage-&gt;pixels);\n\n// Filters application\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n\n// Unlocking\nglBindTexture(GL_TEXTURE_2D, 0);\n\nglEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\nSDL_FreeSurface(invertedImage);\n</code></pre>\n\n<p>unfortunately, the transparent parts appear with some artifacts.</p>\n\n<p>that's the mesh for a bit far (the window and the door are transparent)\n<a href=\"http://i.stack.imgur.com/t7QPV.png\" rel=\"nofollow\">mesh</a></p>\n\n<p>that's the window from up close\n<a href=\"http://i.stack.imgur.com/a9GUx.png\" rel=\"nofollow\">window</a></p>\n\n<p>do you know what might cause that?</p>\n"}, {"tags": ["python", "c++", "matplotlib"], "comments": [{"owner": {"reputation": 59, "user_id": 6693350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6ebd3b0dbd25745be60442c3b798943?s=128&d=identicon&r=PG&f=1", "display_name": "Revist", "link": "https://stackoverflow.com/users/6693350/revist"}, "edited": false, "score": 0, "creation_date": 1471476733, "post_id": 39007654, "comment_id": 65367215, "body": "I found some old answer to this topic at <a href=\"https://github.com/matplotlib/matplotlib/issues/2134/\" rel=\"nofollow noreferrer\">github.com/matplotlib/matplotlib/issues/2134</a> comment by efiring. Basically he says that when there are computations performed the figures will freeze and there&#39;s nothing to be done about it. One must stop computations to work with the plot. Maybe something has changed since then?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6693350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6ebd3b0dbd25745be60442c3b798943?s=128&d=identicon&r=PG&f=1", "display_name": "Revist", "link": "https://stackoverflow.com/users/6693350/revist"}, "edited": false, "score": 0, "creation_date": 1471523097, "post_id": 39009462, "comment_id": 65386633, "body": "Thanks for the response. Does this code do calculations for some I and stops calculations to show the plot for 10 secounds for other?"}, {"owner": {"reputation": 141, "user_id": 6037819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dPAxJYpSeJk/AAAAAAAAAAI/AAAAAAAAAUE/4aYlOB5h3AU/photo.jpg?sz=128", "display_name": "Mansweet", "link": "https://stackoverflow.com/users/6037819/mansweet"}, "reply_to_user": {"reputation": 59, "user_id": 6693350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6ebd3b0dbd25745be60442c3b798943?s=128&d=identicon&r=PG&f=1", "display_name": "Revist", "link": "https://stackoverflow.com/users/6693350/revist"}, "edited": false, "score": 0, "creation_date": 1471548898, "post_id": 39009462, "comment_id": 65403184, "body": "@Revist, yes.  If your calculations take long enough, you would not need to sleep (pause) the loop operation. I missed your point of wanting to add the figure to the previous one. Can you provide a little bit more context as to your task?  Without knowing, You could just put the output into some list, and replot at each iteration from that list."}], "tags": [], "owner": {"reputation": 141, "user_id": 6037819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dPAxJYpSeJk/AAAAAAAAAAI/AAAAAAAAAUE/4aYlOB5h3AU/photo.jpg?sz=128", "display_name": "Mansweet", "link": "https://stackoverflow.com/users/6037819/mansweet"}, "is_accepted": false, "score": 0, "last_activity_date": 1471490264, "creation_date": 1471490264, "answer_id": 39009462, "question_id": 39007654, "link": "https://stackoverflow.com/questions/39007654/showing-a-few-figures-without-stopping-calculations-in-matplotlib/39009462#39009462", "title": "Showing a few figures without stopping calculations in matplotlib", "body": "<p>The following code should do what you want.  I did this in an IPython Notebook.</p>\n\n<pre><code>from IPython import display\nimport matplotlib.pyplot as plt\n\ndef stream_plot(iterable, plotlife=10.):\n\n        for I in iterable:\n            display.clear_output(wait=True)\n            output = do_calculations_on_i(I)\n            plt.plot(output)\n            display.display(plt.gca());\n            time.sleep(plotlife); #how long to show the plot for\n</code></pre>\n\n<p>the wait=True will wait to clear the old plot until it has something new to plot, or any other output is printed.</p>\n\n<p>I put the sleep in there so I can observe each plot before it is wiped away.  This was useful for having to observe distributions for several entities.  You may or may not need it for what you want to do. </p>\n"}], "owner": {"reputation": 59, "user_id": 6693350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6ebd3b0dbd25745be60442c3b798943?s=128&d=identicon&r=PG&f=1", "display_name": "Revist", "link": "https://stackoverflow.com/users/6693350/revist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471490264, "creation_date": 1471475859, "question_id": 39007654, "link": "https://stackoverflow.com/questions/39007654/showing-a-few-figures-without-stopping-calculations-in-matplotlib", "title": "Showing a few figures without stopping calculations in matplotlib", "body": "<p>Hi I would like to show a few figures in matplotlib without stopping calculations. I would like the figure to show up right after the calculations that concern it are finished for example:</p>\n\n<pre><code>import numpy as np\nimport pylab as py\n\nx=np.linspace(0,50,51)\ny=x\nfig, axs = plt.subplots(1, 1)\ncs = axs.plot(x, y)\n</code></pre>\n\n<p>now i want to show the plot without blocking the possibility to make some other calculations</p>\n\n<pre><code>plt.show(block=False)\nplt.pause(5)\n</code></pre>\n\n<p>I create the second plot</p>\n\n<pre><code>y1=2*x\nfig1, axs1 = plt.subplots(1, 1)\ncs1 = axs1.plot(x, y1)\n\nplt.show()\n</code></pre>\n\n<p>This works however the first freezes (after 5 secound pause which I added) until I call plt.show() at the end. It is crucial that the first figure shows and works, then after calculations another figure is added to it.</p>\n"}, {"tags": ["c++", "winapi", "utf-8", "createprocess"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1471473898, "post_id": 39007332, "comment_id": 65366458, "body": "Why do you expect the child process to be outputting UTF8 ?  fyi std::wstring on Windows is usually used for UTF16."}, {"owner": {"reputation": 109, "user_id": 5672875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1fe6821e42e3cbfd7000ee144cf605b1?s=128&d=identicon&r=PG&f=1", "display_name": "MrWhite", "link": "https://stackoverflow.com/users/5672875/mrwhite"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1471474221, "post_id": 39007332, "comment_id": 65366541, "body": "There are some characters like \u010d,\u0107,\u017e that are printed when the command is executed using CreateProcess() so that&#39;s why I need it with wstring."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1471475353, "post_id": 39007332, "comment_id": 65366841, "body": "They are most likely MBCS on a code page you would need to determine."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1471500416, "post_id": 39007332, "comment_id": 65373340, "body": "Pipes deal in raw bytes, not characters. What do the raw bytes actually look like in the output you are having trouble with? If you post the bytes here, and the string output you are expecting, someone can likely help identify the encoding being used."}, {"owner": {"reputation": 109, "user_id": 5672875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1fe6821e42e3cbfd7000ee144cf605b1?s=128&d=identicon&r=PG&f=1", "display_name": "MrWhite", "link": "https://stackoverflow.com/users/5672875/mrwhite"}, "edited": false, "score": 0, "creation_date": 1471519231, "post_id": 39007332, "comment_id": 65384031, "body": "I got output like that: <a href=\"http://prntscr.com/c7982a\" rel=\"nofollow noreferrer\">prntscr.com/c7982a</a> , but it should be like that: <a href=\"http://prntscr.com/c7989y\" rel=\"nofollow noreferrer\">prntscr.com/c7989y</a>"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1476113738, "post_id": 39961673, "comment_id": 67203440, "body": "I think the last bullet should refer to <code>WriteConsoleA</code>. There seems little point in calling <code>SetConsolveCP</code> when you&#39;re calling <code>WriteConsoleW</code>. The <code>WriteFile</code> part is of correct; there&#39;s no such thing as <code>WriteFileA&#47;W</code> because it writes binary data instead of text."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1476116470, "post_id": 39961673, "comment_id": 67204973, "body": "@MSalters I do not think you are right. The using the <code>WriteConsoleA</code>, you are using the OEM encoding to specify the output; and using the <code>WriteConsoleW</code> you are using the UTF-16 LE encoding. And the system converts either to the default encoding. But using the <code>SetConsoleCP</code> you can override either, to use e.g. UTF-8. How would you make your application output UTF-8 with the <code>WriteConsoleW</code> alone?"}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": 3, "last_activity_date": 1562055819, "last_edit_date": 1562055819, "creation_date": 1476113219, "answer_id": 39961673, "question_id": 39007332, "link": "https://stackoverflow.com/questions/39007332/c-getting-utf-8-output-from-createprocess/39961673#39961673", "title": "C++ Getting UTF-8 output from CreateProcess()", "body": "<p>The output of a command is a byte stream. So you read it as a byte stream. It's up to the two programs to agree on the encoding to use.</p>\n\n<p>For example:</p>\n\n<ul>\n<li><p>If you execute a .NET (C#/VB.NET) console application, the application can use the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.console.outputencoding\" rel=\"nofollow noreferrer\"><code>Console.OutputEncoding</code></a>, to set the encoding the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.console.write\" rel=\"nofollow noreferrer\"><code>Console.Write[Line]</code> method</a> will use.</p>\n\n<pre class=\"lang-csharp prettyprint-override\"><code>Console.OutputEncoding = Text.Encoding.UTF8;\n</code></pre></li>\n<li><p>Similarly, a PowerShell script can use the <code>[Console]::OutputEncoding</code>, to set the encoding the <a href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/write-output\" rel=\"nofollow noreferrer\"><code>Write-Output</code></a> or <a href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/write-host\" rel=\"nofollow noreferrer\"><code>Write-Host</code></a> cmdlets will use.</p>\n\n<pre class=\"lang-powershell prettyprint-override\"><code>[Console]::OutputEncoding = [Text.Encoding]::UTF8\n</code></pre></li>\n<li><p>The <code>cmd.exe</code> or a batch file can use the <a href=\"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/chcp\" rel=\"nofollow noreferrer\"><code>chcp</code> command</a>.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>chcp 65001\n</code></pre></li>\n<li><p>A Win32 application can use the <a href=\"https://docs.microsoft.com/en-us/windows/console/setconsoleoutputcp\" rel=\"nofollow noreferrer\"><code>SetConsoleOutputCP</code> function</a> to sets its output encoding, if it is using the <a href=\"https://docs.microsoft.com/en-us/windows/console/writeconsole\" rel=\"nofollow noreferrer\"><code>WriteConsole</code></a>. If the application is using the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-writefile\" rel=\"nofollow noreferrer\"><code>WriteFile</code></a>, it just need to write the bytes encoded as desired already (e.g. using the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/stringapiset/nf-stringapiset-widechartomultibyte\" rel=\"nofollow noreferrer\"><code>WideCharToMultiByte</code></a>).</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>SetConsoleOutputCP(CP_UTF8);\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>When you then read the application output, you decode the byte stream using the agreed encoding. E.g. using the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/stringapiset/nf-stringapiset-multibytetowidechar\" rel=\"nofollow noreferrer\"><code>MultiByteToWideChar</code> function</a>.</p>\n"}], "owner": {"reputation": 109, "user_id": 5672875, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1fe6821e42e3cbfd7000ee144cf605b1?s=128&d=identicon&r=PG&f=1", "display_name": "MrWhite", "link": "https://stackoverflow.com/users/5672875/mrwhite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1562055819, "creation_date": 1471473648, "last_edit_date": 1476113335, "question_id": 39007332, "link": "https://stackoverflow.com/questions/39007332/c-getting-utf-8-output-from-createprocess", "title": "C++ Getting UTF-8 output from CreateProcess()", "body": "<p>I can't make it work so I get UTF-8 output from <code>CreateProcess()</code> into <code>wstring</code>.</p>\n\n<p>Currently I am running this method to do that but without UTF-8 output:</p>\n\n<pre><code>HANDLE g_hChildStd_OUT_Rd = NULL;\nHANDLE g_hChildStd_OUT_Wr = NULL;\nHANDLE g_hChildStd_ERR_Rd = NULL;\nHANDLE g_hChildStd_ERR_Wr = NULL;\n\nPROCESS_INFORMATION CreateChildProcess(void);\nvoid ReadFromPipe(PROCESS_INFORMATION);\n\nstring run(char *command){\n    SECURITY_ATTRIBUTES sa;\n    sa.nLength = sizeof(SECURITY_ATTRIBUTES);\n    sa.bInheritHandle = TRUE;\n    sa.lpSecurityDescriptor = NULL;\n    if ( ! CreatePipe(&amp;g_hChildStd_ERR_Rd, &amp;g_hChildStd_ERR_Wr, &amp;sa, 0) ) {\n        exit(1);\n    }\n    if ( ! SetHandleInformation(g_hChildStd_ERR_Rd, HANDLE_FLAG_INHERIT, 0) ){\n        exit(1);\n    }\n    if ( ! CreatePipe(&amp;g_hChildStd_OUT_Rd, &amp;g_hChildStd_OUT_Wr, &amp;sa, 0) ) {\n        exit(1);\n    }\n    if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) ){\n        exit(1);\n    }\n    char *szCmdline=command;\n    PROCESS_INFORMATION piProcInfo;\n    STARTUPINFO siStartInfo;\n    bool bSuccess = FALSE;\n    ZeroMemory( &amp;piProcInfo, sizeof(PROCESS_INFORMATION) );\n    ZeroMemory( &amp;siStartInfo, sizeof(STARTUPINFO) );\n    siStartInfo.cb = sizeof(STARTUPINFO);\n    siStartInfo.hStdError = g_hChildStd_ERR_Wr;\n    siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;\n    siStartInfo.dwFlags |= STARTF_USESTDHANDLES;\n    bSuccess = CreateProcess(NULL,\n        szCmdline,     // command line\n        NULL,          // process security attributes\n        NULL,          // primary thread security attributes\n        TRUE,          // handles are inherited\n        CREATE_NO_WINDOW,             // creation flags\n        NULL,          // use parent's environment\n        NULL,          // use parent's current directory\n        &amp;siStartInfo,  // STARTUPINFO pointer\n        &amp;piProcInfo);  // receives PROCESS_INFORMATION\n    CloseHandle(g_hChildStd_ERR_Wr);\n    CloseHandle(g_hChildStd_OUT_Wr);\n    if ( ! bSuccess ) {\n\n        exit(1);\n    }\n    DWORD dwRead;\n    CHAR chBuf[BUFSIZE];\n    bool bSuccess2 = FALSE;\n    std::string out = \"\", err = \"\";\n    for (;;) {\n        bSuccess2=ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n        if( ! bSuccess2 || dwRead == 0 ) break;\n\n        std::string s(chBuf, dwRead);\n        out += s;\n    }\n    dwRead = 0;\n    for (;;) {\n        bSuccess2=ReadFile( g_hChildStd_ERR_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n        if( ! bSuccess2 || dwRead == 0 ) break;\n\n        std::string s(chBuf, dwRead);\n        err += s;\n    }\n\n    return out;\n}\n</code></pre>\n\n<p>I tried several things but did not succeed in making it working.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 9, "creation_date": 1471471393, "post_id": 39006941, "comment_id": 65365613, "body": "Use a vector if you need dynamic resizing. Arrays are for when you know exactly how much memory you need. <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/vector/vector</a>"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 1, "creation_date": 1471471435, "post_id": 39006941, "comment_id": 65365636, "body": "What reggae said: <a href=\"http://www.cprogramming.com/tutorial/stl/vector.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/stl/vector.html</a>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1471471588, "post_id": 39006941, "comment_id": 65365699, "body": "See the SO C++ documentation of arrays at (<a href=\"http://stackoverflow.com/documentation/c%2b%2b/3017/arrays/10246/a-dynamic-size-matrix-using-stdvector-for-storage#t=201608172209182527323\">stackoverflow.com/documentation/c%2b%2b/3017/arrays/10246/&hellip;</a>&zwnj;&#8203;)."}, {"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471471635, "post_id": 39006941, "comment_id": 65365714, "body": "never mind thanks alot."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1471471935, "post_id": 39006941, "comment_id": 65365822, "body": "I meant (<a href=\"http://stackoverflow.com/documentation/c%2b%2b/3017/arrays/10243/dynamically-sized-raw-array#t=201608172211035032625\">stackoverflow.com/documentation/c%2b%2b/3017/arrays/10243/&hellip;</a>&zwnj;&#8203;), but the keyboard and SO&#39;s interface conspired to not let me post it."}, {"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471472122, "post_id": 39006941, "comment_id": 65365893, "body": "thanks alot for the help :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471473436, "post_id": 39006941, "comment_id": 65366317, "body": "@Ian - Also, even if you knew the exact number of entries and did not change the size dynamically, use <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> and not dumb C++ arrays: <code>std::array&lt;int, 4&gt; arr = {{1,2,3,4}};</code>"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1471472169, "post_id": 39007086, "comment_id": 65365907, "body": "Using single quotes in comments of code snippets! The habits that we get into :) :)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1471472470, "post_id": 39007086, "comment_id": 65366002, "body": "It&#39;s not very nice to point a beginner towards <code>new</code> and <code>delete</code>. Point beginners, <i>and</i> experienced, for that matter, towards <code>std::vector</code>. Thank you."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1471472572, "post_id": 39007086, "comment_id": 65366036, "body": "@Cheersandhth.-Alf I did in the code; edited this answer for clarity. Also already linked a std::vector tutorial in the question comments."}], "tags": [], "owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1471472545, "last_edit_date": 1471472545, "creation_date": 1471472083, "answer_id": 39007086, "question_id": 39006941, "link": "https://stackoverflow.com/questions/39006941/how-do-you-delete-and-append-values-to-an-array-in-c/39007086#39007086", "title": "How do you delete and append values to an array in c++?", "body": "<p>You can't, without <code>new</code>/<code>delete</code>, but <code>std::vector</code> is better. Here's an example of both.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main() {\n    // With new/delete:\n    int *array = new int[3];\n    array[0] = 1;\n    array[1] = 2;\n    array[2] = 3;\n\n    // `array` processing...\n\n    int *array2 = new int[4];\n    for (int i = 0; i &lt; 3; i++) {\n        // copy old data into new array (array2)\n        array2[i] = array[i];\n    }\n    array2[3] = 4;\n    delete []array;\n\n    // `array2` processing...\n\n    delete []array2;\n\n    // With STL vector:\n    std::vector&lt;int&gt; array3;\n    array3.resize(3);\n    array3[0] = 1;\n    array3[1] = 2;\n    array3[2] = 3;\n\n    // `array3` processing...\n\n    // Add any number of elements\n    array3.push_back(4);\n\n    // resized `array3` processing...\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1471473101, "creation_date": 1471471322, "question_id": 39006941, "link": "https://stackoverflow.com/questions/39006941/how-do-you-delete-and-append-values-to-an-array-in-c", "title": "How do you delete and append values to an array in c++?", "body": "<p>I am a beginner in c++ and I am wondering how do you delete and append values to arrays.</p>\n\n<p>What I mean is like this: </p>\n\n<pre><code>int arr[] = {1, 2, 3, 4}\n</code></pre>\n\n<p>I want to turn it into:</p>\n\n<pre><code>int arr[] = {1, 2, 3}\n</code></pre>\n\n<p>by deleting the last value of the array.</p>\n\n<p>Also,</p>\n\n<p>I would like to know how to append the a value to the end of an array. Like this: </p>\n\n<pre><code>int arr[] = {1, 2, 3, 4}\n</code></pre>\n\n<p>Into this:</p>\n\n<pre><code>int arr[] = {1, 2, 3, 4, 5}\n</code></pre>\n\n<p>Can anyone help me.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "stack"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1471471353, "post_id": 39006900, "comment_id": 65365597, "body": "Note: In C++03 you could not have a standard collection of <code>X</code> directly as a class <code>X</code> data member (because <code>X</code> is incomplete at that point). I&#39;m not sure but I don&#39;t think that changed in C++11. Also it&#39;s a bit of a design smell that each <code>Alien</code> has two stacks of <code>Alien</code>s."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 1, "creation_date": 1471472490, "post_id": 39006900, "comment_id": 65366007, "body": "Please reduce your code to a MINIMAL, Verifiable, and Complete Example: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 5512, "user_id": 525169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/074ef4d038759067691dbb7fb0a4d19f?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/525169/praveen"}, "edited": false, "score": 0, "creation_date": 1471480298, "post_id": 39006900, "comment_id": 65368116, "body": "What&#39;s wrong with the way you&#39;re doing it now, i.e. popping the two stacks one by one?"}, {"owner": {"reputation": 5512, "user_id": 525169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/074ef4d038759067691dbb7fb0a4d19f?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/525169/praveen"}, "reply_to_user": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 1, "creation_date": 1471480346, "post_id": 39006900, "comment_id": 65368127, "body": "@KeithM Typing out <code>[mcve]</code> in a comment makes it conveniently expand into <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, complete with the title and link, for future reference :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": false, "score": 0, "last_activity_date": 1471480326, "creation_date": 1471480326, "answer_id": 39008222, "question_id": 39006900, "link": "https://stackoverflow.com/questions/39006900/how-to-pop-off-2-stacks-at-the-same-time/39008222#39008222", "title": "How to pop off 2 stacks at the same time", "body": "<p>Other than syntax errors pointed out by \"Cheers and hth\" ...</p>\n\n<p>(1) Alien class has two stacks as members. I think that you want to insert players into these two stacks. Instead the Alien::putPlayersInStack function is inserting the players into two temporary stacks that run out of scope and destroyed at the end of the function.</p>\n\n<p>(2) I am not sure what the rules of the game are, but I would guess that you are trying to do something like this:</p>\n\n<pre><code>void Alien::battlefield()\n{\n    cout &lt;&lt; \"Prepare for battle \" &lt;&lt; endl;\n    Alien p1,p2;        \n    while (1)\n    {\n        if (alienStack1.empty()) { /*battle ended*/ return; }\n        if (alienStack2.empty()) { /*battle ended*/ return; }\n        p1=alienStack1.top(); alienStack1.pop();\n        p2=alienStack1.top(); alienStack2.pop();      \n\n        /* Now compare players p1, p2 */\n    }    \n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4619160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d174699bc5cfcad00f2679e8ab85baa?s=128&d=identicon&r=PG&f=1", "display_name": "Madee", "link": "https://stackoverflow.com/users/4619160/madee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1471480326, "creation_date": 1471471129, "question_id": 39006900, "link": "https://stackoverflow.com/questions/39006900/how-to-pop-off-2-stacks-at-the-same-time", "title": "How to pop off 2 stacks at the same time", "body": "<p>I'm currently working on a program that simulates a game featuring 2 teams, both containing a number of players. Each team is represented as a stack (alienStack1 and alienStack2); these two stacks contain a number of players in each. In order for the 2 players to fight (one from each stack) I have to pop corresponding aliens off the stacks to face off against one another, but I dont know how to pop two stacks at the same time. We are supposed to then send the items popped into the queue, but before I try to attempt that, I would like to figure this out first. I would appreciate if someone could help me with this issue. </p>\n\n<p>Here is my code so far: \nWhere I am having issues with the popping of 2 stacks is in my battlefield() function. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stack&gt;\nusing namespace std;\n\nclass Alien \n{\n    public: \n        Alien();                    \n        Alien(int h, int w, char g);  //set height to h,                                      \n        void setHeight(int h);        //set height to h \n        void setWeight(int w);        //set weight to w \n        void setGender(char g);       //sets the gender to g \n        int getHeight();              //return the height\n        int getWeight();              //return the weight \n        char getGender();             //return the gender \n\n        bool operator==(const Alien&amp; alien) const; \n        bool operator!=(const Alien&amp; alien) const; \n        bool operator&lt;=(const Alien&amp; alien) const; \n        bool operator&lt;(const Alien&amp; alien) const; \n        bool operator&gt;=(const Alien&amp; alien) const; \n        bool operator&gt;(const Alien&amp; alien) const;\n        void putPlayersInStack(Alien alien, Alien alien2, Alien alien3, Alien alien4);\n        void battlefield();\nprivate: \n    int height;  //inches \n    int weight;  //pounds \n    char gender;  //the gender.  Either 'M' or 'F'\n    stack &lt;Alien&gt; alienStack1;\n    stack &lt;Alien&gt; alienStack2;\n};\n\nAlien::Alien()\n{\n    height = 60;\n    weight = 100;\n    gender = 'M';\n    int statusPoints = 0;\n}\n\nAlien::Alien(int h, int w, char g)\n{\n    height = h;\n    weight = w;\n    gender = g;\n    int statusPoints = 0;\n}\n\nvoid Alien::setHeight(int h)\n{\n    if (height &gt; 0)\n    {\n        height = h;\n    }\n    else\n    {\n        cout &lt;&lt; \"Invalid height. Must be greater than zero. \" &lt;&lt; endl;\n    }\n}\n\nvoid Alien::setWeight(int w)\n{\n    if (weight &gt; 0)\n    {\n        weight = w;\n    }\n    else\n    {\n        cout &lt;&lt; \"Invalid weight. Must be greater than zero. \" &lt;&lt; endl;\n    }\n}\n\nvoid Alien::setGender(char g)\n{\n    if (gender == 'M' &amp;&amp; gender == 'F')\n    {\n        gender = g;\n    }\n    else\n    {\n        cout &lt;&lt; \"Invalid gender. Must be either M or F. \" &lt;&lt; endl;\n    }\n}\n\nint Alien::getHeight()\n{\n    return height;\n}\n\nint Alien::getWeight()\n{\n    return weight;\n}\n\nchar Alien::getGender()\n{\n    return gender;\n}\n\nstatic int getGenderValue(char g)\n{\n    int genderValue = 0;\n    int statusPoints = 0;\n\n    if (g == 'F')\n    {\n        genderValue = 3;\n    }\n    else\n        genderValue = 2;\n\n    return genderValue;\n}\n\nstatic int getStatusPoint(Alien alien)\n{\n    int genderValue = getGenderValue(alien.getGender());\n\n    return (alien.getHeight() * alien.getWeight() * genderValue);\n}\n\nbool Alien::operator==(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) == getStatusPoint(alien);\n}\n\nbool Alien::operator!=(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) != getStatusPoint(alien);\n}\n\nbool Alien::operator&lt;=(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) &lt;= getStatusPoint(alien);\n}\n\nbool Alien::operator&gt;=(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) &gt;= getStatusPoint(alien);\n}\n\nbool Alien::operator&lt;(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) &lt; getStatusPoint(alien);\n}\n\nbool Alien::operator&gt;(const Alien&amp; alien) const\n{\n    return getStatusPoint(*this) &gt; getStatusPoint(alien);\n}\n\nvoid Alien::putPlayersInStack(Alien alien, Alien alien2, Alien alien3, Alien alien4)\n{\n    stack &lt;Alien&gt; alienStack1;\n    stack &lt;Alien&gt; alienStack2;\n\n    // Team 1\n    alienStack1.push(alien);\n    alienStack1.push(alien2);\n\n    //Team 2\n    alienStack2.push(alien3);\n    alienStack2.push(alien4);\n}\n\nvoid Alien::battlefield()\n{\n    cout &lt;&lt; \"Prepare for battle \" &lt;&lt; endl;\n\n    while (!alienStack1.empty())\n    {\n        alienStack1.top();\n        alienStack1.pop();\n    }\n\n    while (!alienStack2.empty())\n    {\n        alienStack2.top();\n        alienStack2.pop();\n    }\n\n}\n\nint main()\n{\n    // Driver to test all 6 operators \n\n        Alien alien1(40, 120, 'M');\n        Alien alien2(50, 130, 'F');\n        Alien alien3(60, 140, 'M');\n        Alien alien4(70, 150, 'F');\n\n        Alien sendToStack;\n        sendToStack.putPlayersInStack(alien1, alien2, alien3, alien4);\n\n\n        /*if (player1 == player2)\n        {\n            cout &lt;&lt; \"Same score, it's a tie! \" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }\n\n        if (player1 != player2)\n        {\n            cout &lt;&lt; \"players are NOT equal \" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }\n\n        if (player1 &lt;= player2)\n        {\n            cout &lt;&lt; \"It's a tie or the player 2 wins!\" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }\n\n        if (player1 &lt; player2)\n        {\n            cout &lt;&lt; \"Player 2 wins!\" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }\n\n        if (player1 &gt;= player2)\n        {\n            cout &lt;&lt; \"It's a tie or player 1 wins!\" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }\n\n        if (player1 &gt; player2)\n        {\n            cout &lt;&lt; \"Player 1 wins!\" &lt;&lt; endl;\n            cout &lt;&lt; endl;\n        }*/\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "netbeans"], "comments": [{"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1471471190, "post_id": 39006863, "comment_id": 65365545, "body": "Releated: I&#39;m getting the same warning as <a href=\"http://stackoverflow.com/questions/37236721/unable-to-resolve-template-based-identifier-get-netbeans-8-1\" title=\"unable to resolve template based identifier get netbeans 8 1\">stackoverflow.com/questions/37236721/&hellip;</a> , though there&#39;s no answer there"}, {"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1517598968, "post_id": 39006863, "comment_id": 84175979, "body": "Explaining the downvote would be appreciated -- seems like this problem affected multiple other people as well, so the q&amp;a were at least a bit useful!"}], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 0, "creation_date": 1496826384, "post_id": 41399202, "comment_id": 75815247, "body": "Sadly it did not work with boost 1.60. Notice that your line 94 is my line 52"}, {"owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 0, "creation_date": 1496826727, "post_id": 41399202, "comment_id": 75815484, "body": "However, neither commenting <code>#include &lt;boost&#47;predef&#47;os&#47;bsd.h&gt;</code> from <i>os.h</i> header, re-parsing from Code Assistance changed nothing..."}], "tags": [], "owner": {"reputation": 661, "user_id": 7358466, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154333452887098/picture?type=large", "display_name": "Marvin Herbold", "link": "https://stackoverflow.com/users/7358466/marvin-herbold"}, "is_accepted": true, "score": 3, "last_activity_date": 1483114165, "creation_date": 1483114165, "answer_id": 41399202, "question_id": 39006863, "link": "https://stackoverflow.com/questions/39006863/boost-netbeans-recursive-includes-related-to-bsd-on-linux-mint-17-2/41399202#41399202", "title": "Boost / Netbeans: Recursive Includes Related to BSD on Linux Mint 17.2", "body": "<p>I was having the same problem.  The issue is with the boost <strong>predef/os/bsd.h</strong> header.  It #includes 5 files in the #else block for the #ifndef  BOOST_PREDEF_OS_BSD_H guard.  This means that this header file is not guarded against recursion if any of those 5 files also includes bsd.h (which they do).</p>\n\n<p>My solution was to edit the predef/os/bsd.h file and add a recursion guard in the #else block - so, starting at around line 94 my predef/os/bsd.h file now looks like:</p>\n\n<pre><code>#ifndef BOOST_PREDEF_OS_BSD_H_PREVENT_RECURSION      &lt;-- ADD THIS\n#define BOOST_PREDEF_OS_BSD_H_PREVENT_RECURSION      &lt;-- ADD THIS\n\n#include &lt;boost/predef/os/bsd/bsdi.h&gt;\n#include &lt;boost/predef/os/bsd/dragonfly.h&gt;\n#include &lt;boost/predef/os/bsd/free.h&gt;\n#include &lt;boost/predef/os/bsd/open.h&gt;\n#include &lt;boost/predef/os/bsd/net.h&gt;\n\n#endif                                               &lt;-- ADD THIS\n</code></pre>\n\n<p>And now netbeans code assistance is happy and my code still links and compiles without error.</p>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "edited": false, "score": 0, "creation_date": 1517598620, "post_id": 48427783, "comment_id": 84175809, "body": "Ideally one wouldn&#39;t have to edit boost to get this to work.  However, my question is all with out-of-date tools now, so I can&#39;t comment whether there&#39;s a similar issue with the latest gcc/boost/netbeans."}], "tags": [], "owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1516812910, "creation_date": 1516812910, "answer_id": 48427783, "question_id": 39006863, "link": "https://stackoverflow.com/questions/39006863/boost-netbeans-recursive-includes-related-to-bsd-on-linux-mint-17-2/48427783#48427783", "title": "Boost / Netbeans: Recursive Includes Related to BSD on Linux Mint 17.2", "body": "<p>The rough way: comment</p>\n\n<pre><code>#include &lt;boost/predef/os/bsd.h&gt;\n</code></pre>\n\n<p>Everywhere (should be inside the following headers)</p>\n\n<ol>\n<li><code>predef/os.h</code></li>\n<li><code>predef/other/endian.h</code></li>\n</ol>\n"}], "owner": {"reputation": 1114, "user_id": 4451284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fdce2e15afad769bb8424138c881c341?s=128&d=identicon&r=PG&f=1", "display_name": "davewy", "link": "https://stackoverflow.com/users/4451284/davewy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 2, "accepted_answer_id": 41399202, "answer_count": 2, "score": 0, "last_activity_date": 1516812910, "creation_date": 1471470956, "question_id": 39006863, "link": "https://stackoverflow.com/questions/39006863/boost-netbeans-recursive-includes-related-to-bsd-on-linux-mint-17-2", "title": "Boost / Netbeans: Recursive Includes Related to BSD on Linux Mint 17.2", "body": "<p>I have a C++ project in Netbeans on my Linux Mint 17.2 machine.  I'm using the GCC 5 toolchain (e.g. g++ 5.3.0), Netbeans 8.1, and Boost 1.61.0.</p>\n\n<p>I'm encountering a weird warning in my project that shows up all over the place.  For instance, in my main.cpp, I <code>#include &lt;iostream&gt;</code> at the very top, and that line gets a warning.  (I see this warning happen for the first file I include in every file, so it is <em>not</em> an issue with iostream etc.).</p>\n\n<p>The warning is that there is a recursive <code>#include</code> in boost.  Specifically, Netbeans complains that <code>&lt;boost/predef/os/bsd/free.h&gt;</code> includes <code>&lt;boost/predef/os/bsd.h&gt;</code> and that <code>&lt;boost/predef/os/bsd.h&gt;</code> includes <code>&lt;boost/predef/os/bsd/free.h&gt;</code>.  For the record, this appears to be true - does anyone know why there is this recursive include in boost, and if it is really supposed to be there?</p>\n\n<p>The bigger issue is that my system is not BSD, so I don't know why I'm getting these warnings from the BSD headers, which shouldn't be included or active/defined.  I tried printing <code>BOOST_PLATFORM_CONFIG</code> from my main.cpp, and it prints out the path to boost's Linux config header, as expected - not the BSD config header.  And, my program compiles and runs fine, so I'm assuming it's never actually using the BSD headers.  Which means that the fact that these BSD headers are giving me warnings might be a Netbeans problem, not a boost problem.</p>\n\n<p>Does anyone have any ideas on how to narrow down and fix this issue with these strange recursive include warnings?</p>\n"}, {"tags": ["c++", "ios", "windows", "build", "jailbreak"], "answers": [{"tags": [], "owner": {"reputation": 2704, "user_id": 193772, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c7998bc97debca020f3296ffa3e259f4?s=128&d=identicon&r=PG", "display_name": "twodayslate", "link": "https://stackoverflow.com/users/193772/twodayslate"}, "is_accepted": false, "score": 0, "last_activity_date": 1471643897, "creation_date": 1471643897, "answer_id": 39048218, "question_id": 39006740, "link": "https://stackoverflow.com/questions/39006740/build-ios-apps-windows-7-10-jailbroken-device/39048218#39048218", "title": "Build iOS apps, Windows 7/10 &amp; Jailbroken device", "body": "<p>You can rent a macOS machine though a service such as <a href=\"http://www.macincloud.com\" rel=\"nofollow\">http://www.macincloud.com</a>.\nYou could also buy a Mac Mini. </p>\n"}], "owner": {"reputation": 129, "user_id": 2631711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15987e4407d2d896459b6fce8511c4a3?s=128&d=identicon&r=PG", "display_name": "Dory", "link": "https://stackoverflow.com/users/2631711/dory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471643897, "creation_date": 1471470214, "question_id": 39006740, "link": "https://stackoverflow.com/questions/39006740/build-ios-apps-windows-7-10-jailbroken-device", "title": "Build iOS apps, Windows 7/10 &amp; Jailbroken device", "body": "<p>I have an jailbroken iOS device and Windows 7/10. I would like to be able to easily build and compile (C++/Cocos2Dx) iOS games and directly test them on my device. I would also like to be able to share my code to OS X users so that they can also compile it using XCode (probably not a problem).</p>\n\n<p><strong>What is the best way to do so?</strong></p>\n\n<p>What I know (but may be partly wrong) : </p>\n\n<ul>\n<li>I could use virtual machines to simulate OS X but it seems to be slow and therefore not the best long-term solution.</li>\n<li>There are tools to compile iOS code with jailbroken iOS devices using some toolchain available on Cydia but I'm not really sure if and how it would work using the latest versions of iOS and using external libraries like Cocos2Dx. Plus it does not seem to be ultra convenient to compile then install and test your app on the device.</li>\n<li>I could use Marmalade but I'm not sure about including Cocos2Dx in it, it's not entirely free and I don't know if the code can easily be compiled in someone's else XCode.</li>\n</ul>\n"}, {"tags": ["c++", "build", "visual-studio-2015", "assimp"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1471470288, "post_id": 39006595, "comment_id": 65365191, "body": "You can download CMake for free, it can make a visual studio project file for you."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1471470388, "post_id": 39006595, "comment_id": 65365225, "body": "@RyanP I guess I&#39;ll have to try it, but I&#39;ve never used CMake before"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1471470599, "post_id": 39006595, "comment_id": 65365312, "body": "It&#39;s worth learning. The idea is simple, instead of configuring your project in Visual Studio, or Eclipse, or using a Makefile... you just have to learn how to configure a project in CMake syntax, and then CMake will be able to generate all of those for you depending on which platform and with which tool-set you want to compile."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1471472593, "post_id": 39006595, "comment_id": 65366046, "body": "@RyanP I was able to generate the solution file for VS2015; I build out ASSIMP a few projects within failed to build; but the actual ASSMIP project within did build and it appears that I have a dll available. I&#39;m in the process of trying to link against it now."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1472332815, "post_id": 39006595, "comment_id": 65712940, "body": "@RyanP Yes; the libraries worked out; thank you for the advice. It took a little bit to figure out how CMake works; but it isn&#39;t all that difficult."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1472478764, "post_id": 39006595, "comment_id": 65754923, "body": "I&#39;m glad it worked out! I&#39;ve really taken to CMake, I like it a lot."}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471469486, "creation_date": 1471469486, "question_id": 39006595, "link": "https://stackoverflow.com/questions/39006595/building-assimp-3-2-from-source-without-using-cmake", "title": "Building Assimp 3.2 from Source Without Using CMake", "body": "<p>I am using Visual Studio 2015 Community Edition in C++. I just got done setting up the newest version of Boost v1.61.0 and boost seems to be working fine. I did this in advance since some of the functionality in Assimp depends on the Boost library. I have downloaded the newest version of Assimp 3.2 from here <a href=\"http://assimp.org/index.html\" rel=\"nofollow\">Assimp</a> which is source only. I've read through the documentations, I've, searched here at stack, done google searches and even looked on youtube for how to build this from source code in Visual Studio and I am not able to find anything. Does anyone know the proper procedure to do this? Remember I am not using nor do I have CMake. It does not matter if I create a DLL or Lib. I can link either dynamically or statically; I just want to be able to use the newest version of Assimp in my OpenGL projects.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "constructor", "shared-ptr"], "comments": [{"owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "edited": false, "score": 2, "creation_date": 1471469691, "post_id": 39006551, "comment_id": 65364951, "body": "You told it to call <code>new xyz()</code>, not to call <code>make_shared</code> - it would be pretty strange if your compiler calls something else than you stated, wouldn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471470555, "post_id": 39006646, "comment_id": 65365296, "body": "<code>make_shared</code> can hold bigger chunks of virtual memory than <code>shared_ptr(new)</code> if all that&#39;s left is a <code>unique_ptr</code>. Question is if that&#39;s an observable effect."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471471014, "post_id": 39006646, "comment_id": 65365463, "body": "@MooingDuck: Yes, but I think on modern systems to get a state where that could be a possibility, the machine would slow down to snail&#39;s pace and beyond first, so one would have to wait years for it. Problems that could prevent the optimization include (1) custom allocator. Uhm, I can&#39;t think of more right now."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471471623, "post_id": 39006646, "comment_id": 65365711, "body": "overloaded <code>operator new</code> would be another weird edge case."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1471470022, "last_edit_date": 1471470022, "creation_date": 1471469697, "answer_id": 39006646, "question_id": 39006551, "link": "https://stackoverflow.com/questions/39006551/shared-pointer-creation-under-a-constructor/39006646#39006646", "title": "shared pointer creation under a constructor", "body": "<p>The language has very little automatic use of library facilities.</p>\n\n<p>There are some cases where the core language depends on the standard library, yes. E.g. you have to include the <code>&lt;typeinfo&gt;</code> header in order to use the <code>typeid</code> operator. And there's the call of <code>std::terminate</code> for an unhandled exception. But apart from such very special and fundamental cases, the core language and standard library are separate. With knowledge of necessary compiler and OS specific features you could implement the standard library yourself.</p>\n\n<p>So, in short, there's no guaranteed magic replacement of your <code>new</code>-expression with a call to <code>make_shared</code>, but if the compiler can guarantee that the visible effect will be the same, then it <em>can</em> optimize that way under the <em>as-if</em> rule.</p>\n\n<p>As far as I know there's no compiler yet that does that, as of Aug. 2016.</p>\n"}], "owner": {"reputation": 761, "user_id": 6386155, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-YUFMoRcx3uo/AAAAAAAAAAI/AAAAAAAAAAA/I9gNVrYQpDQ/photo.jpg?sz=128", "display_name": "user6386155", "link": "https://stackoverflow.com/users/6386155/user6386155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1471470022, "creation_date": 1471469239, "question_id": 39006551, "link": "https://stackoverflow.com/questions/39006551/shared-pointer-creation-under-a-constructor", "title": "shared pointer creation under a constructor", "body": "<p>Suppose I have a c++ class as</p>\n\n<pre><code>class xyz\n {\n ...\n };\nclass abc \n {\n  shared_ptr&lt;xyz&gt; ptr;\n  ..\n  abc():ptr( new xyz()) // line 1\n   {\n   }\n };\n</code></pre>\n\n<p>What is invoked on line 1 ? </p>\n\n<pre><code>make_shared&lt;xyz&gt;()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>shared_ptr&lt;xyz&gt;(new xyz())\n</code></pre>\n\n<p>Does it depend on compiler?</p>\n"}, {"tags": ["c++", "google-nativeclient"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1471469145, "post_id": 39006506, "comment_id": 65364713, "body": "You are storing a pointer to a destroyed temporary."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1471469400, "post_id": 39006506, "comment_id": 65364820, "body": "Don&#39;t spam tags. There is no language &quot;C/C++&quot; and the snippets are clearly C++, not C."}, {"owner": {"reputation": 1087, "user_id": 2546103, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/6UdPF.jpg?s=128&g=1", "display_name": "Mohammad Abu Musa", "link": "https://stackoverflow.com/users/2546103/mohammad-abu-musa"}, "edited": false, "score": 0, "creation_date": 1471469469, "post_id": 39006506, "comment_id": 65364857, "body": "It relates to all three of them, I am not trying to spam"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1471471355, "post_id": 39006506, "comment_id": 65365599, "body": "@MohammadAbuMusa Coding in C++ is not sufficient reason to tag C. You&#39;re using std::string, namespaces, and OOP. That&#39;s not C."}], "answers": [{"comments": [{"owner": {"reputation": 1087, "user_id": 2546103, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/6UdPF.jpg?s=128&g=1", "display_name": "Mohammad Abu Musa", "link": "https://stackoverflow.com/users/2546103/mohammad-abu-musa"}, "edited": false, "score": 0, "creation_date": 1471495566, "post_id": 39006531, "comment_id": 65371939, "body": "Thanks for the answer, here is the code I used to solve this issue   <code>*out_function =  strdup(cmd_value.AsString().c_str());</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 1087, "user_id": 2546103, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/6UdPF.jpg?s=128&g=1", "display_name": "Mohammad Abu Musa", "link": "https://stackoverflow.com/users/2546103/mohammad-abu-musa"}, "edited": false, "score": 0, "creation_date": 1471495871, "post_id": 39006531, "comment_id": 65372018, "body": "@Mohammad Abu Musa: That will solve it, but now you have a <code>malloc</code>ed block of raw memory to manage manually. As I said, a much better idea would be to switch to using <code>std::string</code> until the last moment."}, {"owner": {"reputation": 1087, "user_id": 2546103, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/6UdPF.jpg?s=128&g=1", "display_name": "Mohammad Abu Musa", "link": "https://stackoverflow.com/users/2546103/mohammad-abu-musa"}, "edited": false, "score": 0, "creation_date": 1471497332, "post_id": 39006531, "comment_id": 65372363, "body": "Thanks, I just did that, I think using <code>std::string</code> is a much better approach"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 11, "last_activity_date": 1471472632, "last_edit_date": 1471472632, "creation_date": 1471469116, "answer_id": 39006531, "question_id": 39006506, "link": "https://stackoverflow.com/questions/39006506/c-str-returns-empty-string/39006531#39006531", "title": "c_str() returns empty string", "body": "<p>The result of <code>c_str()</code> is only valid as long as the <code>std::string</code> object that produced that result is valid.</p>\n\n<p>In your case, <code>AsString()</code> call produces a <em>temporary</em> <code>std::string</code> object which is then immediately destroyed. After that the result of that <code>c_str()</code> call no longer makes any sense. Trying to access the memory pointed by that pointer leads to undefined behavior.</p>\n\n<p>Don't attempt to store the pointer returned by <code>c_str()</code>. If you need that string as a C-string for an extended period of time, allocate memory buffer for it yourself and copy the result of <code>c_str()</code> to that buffer.</p>\n\n<p>Another (much better) idea would be not to rush the conversion to C-string. Return the result as <code>std::string</code> and call <code>c_str()</code> on it at the very last moment: when you reall really really need a C-string.</p>\n"}], "owner": {"reputation": 1087, "user_id": 2546103, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/6UdPF.jpg?s=128&g=1", "display_name": "Mohammad Abu Musa", "link": "https://stackoverflow.com/users/2546103/mohammad-abu-musa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3442, "favorite_count": 0, "closed_date": 1471469488, "accepted_answer_id": 39006531, "answer_count": 1, "score": -1, "last_activity_date": 1471472632, "creation_date": 1471468968, "last_edit_date": 1471469386, "question_id": 39006506, "link": "https://stackoverflow.com/questions/39006506/c-str-returns-empty-string", "closed_reason": "Duplicate", "title": "c_str() returns empty string", "body": "<p>For some reason c_str() returns empty string, the parameter <code>const chart**out_function</code> will hold a method name for file operations like <code>fopen</code> so basically what I do is converting a string I have to c_str() but I get an empty string below is how I do the calls </p>\n\n<p>In this part I just prepare a dictionary with an operation name, as you can notice I am just sending \"fopen\" as string</p>\n\n<pre><code>    pp::VarDictionary fileOp;\n    pp::VarArray args;\n    args.Set(0, \"filename.txt\");\n    args.Set(1, \"wb\");\n    fileOp.Set(\"args\", args);\n    fileOp.Set(\"cmd\", \"fopen\");\n</code></pre>\n\n<p>This function will parse the dictionary sent above and return the name of the function in <code>out_function</code> and <code>args</code> in <code>out_params</code> </p>\n\n<pre><code>    int ParseMessage(pp::Var message, const char** out_function,\n        pp::Var* out_params) {\n</code></pre>\n\n<p>I use this line of code to convert the string to c_string, but It returns empty text </p>\n\n<pre><code>*out_function =  cmd_value.AsString().c_str();\n</code></pre>\n\n<p>here is the full code, it is based on Google Native Client but at the same time it is standard C/C++ code </p>\n\n<p><a href=\"http://pastebin.com/S4P8aZqL\" rel=\"nofollow\">http://pastebin.com/S4P8aZqL</a></p>\n"}, {"tags": ["c++", "user-interface", "event-handling", "cross-platform"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471468567, "post_id": 39006403, "comment_id": 65364454, "body": "Probably not. Sorry."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471468627, "post_id": 39006403, "comment_id": 65364481, "body": "If you don&#39;t interact with the OS&#39;s event system/queue, how are you (as a userspace program) going to receive events?"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1471469279, "post_id": 39006403, "comment_id": 65364766, "body": "Yes, but you have to write a new operating system from scratch using a technique that hasn&#39;t been invented yet to respond to user interactions."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471468859, "post_id": 39006441, "comment_id": 65364596, "body": "Does <b><i>linux</i></b> have notion of <i>windows</i>? That&#39;s new to me. Could you elaborate please?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471468919, "post_id": 39006441, "comment_id": 65364616, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Eh, updated. Literally every version of Linux I&#39;ve used had a GUI in some form or another, so I&#39;m used to lumping them all together as &quot;Linux&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471468986, "post_id": 39006441, "comment_id": 65364651, "body": "X11 does have a notion of windows and X has an event loop. I assume that&#39;s what&#39;s being refered to. But you are absolutely correct that that is not a <i>Linux</i> thing - it a <i>X</i> thing."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1471469041, "last_edit_date": 1471469041, "creation_date": 1471468714, "answer_id": 39006441, "question_id": 39006403, "link": "https://stackoverflow.com/questions/39006403/is-there-a-way-to-write-a-gui-without-an-event-loop/39006441#39006441", "title": "Is there a way to write a GUI without an event loop?", "body": "<p>Windows and X11 (Linux) both require that any windows be answerable to Event Callbacks (or be the parent of a window currently answering event callbacks), or else the OS will treat them as though they stopped responding\u2014and on Windows at least, will trigger a \"Program X has stopped responding\" pop-up.</p>\n\n<p>The semantics of <em>how</em> those event callbacks need to be handled is different (namely, Windows requires the \"Thread that created the window\" to handle them, whereas Linux requires the \"Main Thread\" to handle them) but the principle is the same.</p>\n\n<p>I'm not familiar with MacOS, but I'd presume it has similar logic.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1471479682, "creation_date": 1471479682, "answer_id": 39008151, "question_id": 39006403, "link": "https://stackoverflow.com/questions/39006403/is-there-a-way-to-write-a-gui-without-an-event-loop/39008151#39008151", "title": "Is there a way to write a GUI without an event loop?", "body": "<p>Allnmajor windowing frameworks I am aware of expect to be interacted with with an event loop by gui apps.</p>\n\n<p>Now, you could wrap the ui framework interaction and ferry said events to event broadcasters.</p>\n\n<p>Then the application would just subscribe to being notified.</p>\n\n<p>Now, in some cases, the windowing framework may demand synchonous responses from messages, so in those cases the abstraction will leak a bit.  But otherwise you coukd have an event-loop free GUI app in the client code (the event loop would still exist, but be solely in the cross platform library).</p>\n\n<p>A way to imagine programming in such a framework is that you would set up ui widgets and hook them to code, including hooks like \"on app start\" which might launch your main window, which in turn hooks more messages.</p>\n"}], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1471479682, "creation_date": 1471468504, "question_id": 39006403, "link": "https://stackoverflow.com/questions/39006403/is-there-a-way-to-write-a-gui-without-an-event-loop", "title": "Is there a way to write a GUI without an event loop?", "body": "<p>Libraries like Qt provide an event loop that handles UI events, often (or always?) wrapping the OS UI event loop in order to achieve the best results.</p>\n\n<p>Now I can't help wondering if there is a way to write the UI without that master event loop, such that it works on all major OSes.</p>\n\n<p>If this is possible, how would it work, and are there any examples in the wild of an event-loop free UI (preferably in C++)?</p>\n"}, {"tags": ["c++", "oop", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1513697784, "post_id": 39006912, "comment_id": 82746942, "body": "In that design the functions in the .cu are not member functions of the class, I presume?"}, {"owner": {"reputation": 14078, "user_id": 442006, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/745d0832184e9df52e3d6d9e4bdbad52?s=128&d=identicon&r=PG", "display_name": "Roger Dahl", "link": "https://stackoverflow.com/users/442006/roger-dahl"}, "reply_to_user": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 1, "creation_date": 1514432470, "post_id": 39006912, "comment_id": 82971097, "body": "Correct -- they are like library functions that you call from your class members."}], "tags": [], "owner": {"reputation": 14078, "user_id": 442006, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/745d0832184e9df52e3d6d9e4bdbad52?s=128&d=identicon&r=PG", "display_name": "Roger Dahl", "link": "https://stackoverflow.com/users/442006/roger-dahl"}, "is_accepted": false, "score": 2, "last_activity_date": 1471471161, "creation_date": 1471471161, "answer_id": 39006912, "question_id": 39006348, "link": "https://stackoverflow.com/questions/39006348/accessing-class-data-members-from-within-cuda-kernel-how-to-design-proper-host/39006912#39006912", "title": "Accessing class data members from within cuda kernel - how to design proper host/device interaction?", "body": "<p>What has worked best for me is to only put regular CUDA functions, kernels and kernel launches in CUDA C (<code>.cu</code>) files, and then build an object oriented interface on top of that, with classes in C++ (<code>.cpp</code>) files.</p>\n\n<p>So, in your class constructor, you call functions in your <code>.cu</code> file that allocate and initialize memory and in your methods, you call functions that launch kernels, etc.</p>\n\n<p>This can also make development turnaround faster because you can often change your classes without incurring recompile of <code>.cu</code> files, which is much slower than compiling pure <code>.cpp</code> files. </p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4329689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1826b81b3c4c5872ee00705309458206?s=128&d=identicon&r=PG&f=1", "display_name": "learningProcess", "link": "https://stackoverflow.com/users/4329689/learningprocess"}, "edited": false, "score": 0, "creation_date": 1471542979, "post_id": 39007792, "comment_id": 65400051, "body": "Thanks!! This answer arranged my mind. In fact I wanted to pass a pointer to the object, but with the hints you gave I was able to solve it. I was trying to avoid having an additional <code>h_data</code> array. For no good reason probably. I will keep your warning about globals in mind"}, {"owner": {"reputation": 63, "user_id": 4329689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1826b81b3c4c5872ee00705309458206?s=128&d=identicon&r=PG&f=1", "display_name": "learningProcess", "link": "https://stackoverflow.com/users/4329689/learningprocess"}, "edited": false, "score": 0, "creation_date": 1471555748, "post_id": 39007792, "comment_id": 65406345, "body": "My bad! The answer fully covers the presented case, i.e., passing the class by value. I thought I had solved the case of <b>passing a pointer</b>, when the kernel has a signature of <code>__global__ void myKernel(myClass *obj)</code> but I actually haven&#39;t. I know this might very well be another question, but could you edit your answer to cover that? Thanks!"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 5, "last_activity_date": 1471476799, "last_edit_date": 1495540295, "creation_date": 1471476799, "answer_id": 39007792, "question_id": 39006348, "link": "https://stackoverflow.com/questions/39006348/accessing-class-data-members-from-within-cuda-kernel-how-to-design-proper-host/39007792#39007792", "title": "Accessing class data members from within cuda kernel - how to design proper host/device interaction?", "body": "<p>Your approach should be workable.  When you pass an object by value as a kernel parameter (as you have indicated) there really isn't much setup that needs to be done associated with the transfer from host to device.</p>\n\n<p>You need to properly allocate data on the host and the device, and use <code>cudaMemcpy</code> type operations at appropriate points to move the data, just as you would in an ordinary CUDA program.</p>\n\n<p>One thing to be aware of when declaring an object at global scope as you have done, is that it is recommended <em>not</em> to use CUDA API calls in the object's constructor or destructor.  The reasons are covered <a href=\"https://stackoverflow.com/questions/24869167/trouble-launching-cuda-kernels-from-static-initialization-code\">here</a>, I won't repeat them here.  Although that treatment mostly focuses on kernels launched before main, the CUDA lazy initialization can also impact any CUDA API call that is executed outside of <code>main</code> scope, which applies to constructors and destructors of objects instantiated at global scope.</p>\n\n<p>What follows is a fleshed out example from what you have shown.  I mostly didn't change the code you had already written, just added some method definitions for the ones you hadn't.  There's obviously a lot of different possible approaches here.  For more examples you might want to look at the <a href=\"http://docs.nvidia.com/cuda/cuda-samples/index.html#cpp-integration\" rel=\"nofollow noreferrer\">CUDA C++ integration sample code</a>.</p>\n\n<p>Here's a worked example around what you have shown:</p>\n\n<pre><code>$ cat t1236.cu\n#include &lt;cstdio&gt;\n\nclass myClass\n{\npublic:\n        bool bool_var;    // Set from host and readable from device\n        int  data_size;   // Set from host\n        __host__ myClass();\n        __host__ ~myClass();\n        __host__ void setValues(bool iftrue, int size);\n        __device__ void dosomething(int device_parameter);\n        __host__ void export_data();\n\n        // completely unknown methods\n        __host__ void prepareDeviceObj();\n        __host__ void retrieveDataToHost();\nprivate:\n        int *data; // Filled in device, shared between threads, at the end copied back to host for data output\n        int *h_data;\n};\n\n__host__ myClass::myClass()\n{\n}\n\n__host__ myClass::~myClass()\n{\n}\n\n__host__ void myClass::prepareDeviceObj(){\n        cudaMemcpy(data, h_data, data_size*sizeof(h_data[0]), cudaMemcpyHostToDevice);\n}\n__host__ void myClass::retrieveDataToHost(){\n        cudaMemcpy(h_data, data, data_size*sizeof(h_data[0]), cudaMemcpyDeviceToHost);\n}\n\n__host__ void myClass::setValues(bool iftrue, int size)\n{\n        bool_var  = iftrue;\n        data_size = size;\n        cudaMalloc(&amp;data, data_size*sizeof(data[0]));\n        h_data = (int *)malloc(data_size*sizeof(h_data[0]));\n        memset(h_data, 0, data_size*sizeof(h_data[0]));\n}\n\n__device__ void myClass::dosomething(int idx)\n{\n        int toadd = idx+data_size;\n        atomicAdd(&amp;(data[idx]), toadd); // data should be unique among threads\n}\n__host__ void myClass::export_data(){\n        for (int i = 0; i &lt; data_size; i++) printf(\"%d \", h_data[i]);\n        printf(\"\\n\");\n        cudaFree(data);\n        free(h_data);\n}\n\n\n__global__ void myKernel(myClass obj)\n{\n        const int idx = blockIdx.x*blockDim.x + threadIdx.x;\n        if(idx &lt; obj.data_size)\n        {\n                if(!obj.bool_var)\n                        printf(\"Object is not up to any task here!\");\n                else\n                {\n                        //printf(\"Object is ready!\");\n                        obj.dosomething(idx);\n                }\n        }\n}\n\n\nmyClass globalInstance;\n\nint main(int argc, char** argv)\n{\n        int some_number = 40;\n        globalInstance.setValues(true, some_number);\n        globalInstance.prepareDeviceObj();\n        myKernel&lt;&lt;&lt;1,some_number&gt;&gt;&gt;(globalInstance);\n        globalInstance.retrieveDataToHost();\n        globalInstance.export_data();\n        exit(EXIT_SUCCESS);\n}\n$ nvcc -o t1236 t1236.cu\n$ cuda-memcheck ./t1236\n========= CUDA-MEMCHECK\n40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4329689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1826b81b3c4c5872ee00705309458206?s=128&d=identicon&r=PG&f=1", "display_name": "learningProcess", "link": "https://stackoverflow.com/users/4329689/learningprocess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4869, "favorite_count": 4, "accepted_answer_id": 39007792, "answer_count": 2, "score": 5, "last_activity_date": 1471476799, "creation_date": 1471468283, "question_id": 39006348, "link": "https://stackoverflow.com/questions/39006348/accessing-class-data-members-from-within-cuda-kernel-how-to-design-proper-host", "title": "Accessing class data members from within cuda kernel - how to design proper host/device interaction?", "body": "<p>I've been trying to transform some <em>cuda/C</em> code into a more OO code, but my goal doesn't seem to be easy to achieve for my current understanding of the cuda functioning mechanism. I haven't been able to find good a explanation either on this situation. It might not be possible after all.</p>\n\n<p>I have a <em>global</em> object of class <em>myClass</em> holding an array to be filled in a kernel.</p>\n\n<p>How should the methods in <em>myClass</em> be defined so that the array and boolean members are <strong>visible from device</strong> and the array can then be <strong>copied back to host</strong>? I am using cuda 7.5 and the compute capability of my card is 3.5.</p>\n\n<p>This is a tentative structure describing the situation:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cuda.h&gt;\n#include &lt;cuda_runtime.h&gt;\n\nclass myClass\n{\npublic:\n        bool bool_var;    // Set from host and readable from device\n        int  data_size;   // Set from host\n        __device__ __host__ myClass();\n        __device__ __host__ ~myClass();\n        __host__ void setValues(bool iftrue, int size);\n        __device__ void dosomething(int device_parameter);\n        __host__ void export();\n\n        // completely unknown methods\n        __host__ void prepareDeviceObj();\n        __host__ void retrieveDataToHost();\nprivate:\n        int *data; // Filled in device, shared between threads, at the end copied back to host for data output\n};\n\n__host__ __device__ myClass::myClass()\n{\n}\n\n__host__ __device__ myClass::~myClass()\n{\n#ifdef __CUDACC__\n        if(bool_var)\n                cudaFree(data);\n#else\n        free(data);\n#endif\n}\n\n__host__ void myClass::setValues(bool iftrue, int size)\n{\n        bool_var  = iftrue;\n        data_size = size;\n}\n\n__device__ void myClass::dosomething(int idx)\n{\n        int toadd = idx+data_size;\n        atomicAdd(&amp;data[idx], toadd); // data should be unique among threads\n}\n\n\n__global__ void myKernel(myClass obj)\n{\n        const int idx = blockIdx.x*blockDim.x + threadIdx.x;\n        if(idx &lt; obj.data_size)\n        {\n                if(!obj.bool_var)\n                        printf(\"Object is not up to any task here!\");\n                else\n                {\n                        printf(\"Object is ready!\");\n                        obj.dosomething(idx);\n                }\n        }\n}\n\n\nmyClass globalInstance;\n\nint main(int argc, char** argv)\n{\n        int some_number = 40;\n        globalInstance.setValues(true, some_number);\n        globalInstance.prepareDeviceObj();           // unknown\n        myKernel&lt;&lt;&lt;1,some_number&gt;&gt;&gt;(globalInstance); // how to pass the object?\n        globalInstance.retrieveDataToHost();         // unknown\n        globalInstance.export();\n        exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "template-classes"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1471467730, "post_id": 39006209, "comment_id": 65364066, "body": "Best fit and other stuff. If the explicit specialization can be chosen, it will be, otherwise default to base template."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1471467860, "post_id": 39006209, "comment_id": 65364117, "body": "It&#39;s called <a href=\"http://en.cppreference.com/w/cpp/language/partial_specialization#Partial_ordering\" rel=\"nofollow noreferrer\">partial ordering</a>"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1471467932, "creation_date": 1471467932, "answer_id": 39006272, "question_id": 39006209, "link": "https://stackoverflow.com/questions/39006209/how-is-template-class-matched/39006272#39006272", "title": "how is template class matched", "body": "<p>There are two steps.</p>\n\n<ol>\n<li>We match the primary class template: <code>enable_if&lt;true, int&gt;</code> matches <code>enable_if&lt;bool, T&gt;</code>. If there were any default arguments on the primary, we'd populate them at this point. </li>\n<li><p>We enumerate all the specializations of the primary class template that also match, which would be:<br>\na. <code>enable_if&lt;bool, T&gt;</code>, with <code>bool=true</code> and <code>T=int</code><br>\nb. <code>enable_if&lt;true, T&gt;</code>, with <code>T=int</code></p>\n\n<p>We pick the <em>most specialized</em> specialization through a process called partial ordering, which you can think of informally as picking the most specific one. In this case, (2b) is more specific than (2a) because all (2b) instantiations could match against (2a) but not the reverse, so we select that one.</p></li>\n</ol>\n\n<p>And so, you end up with an instantiation <code>enable_if&lt;true, T&gt;</code> with <code>T=int</code>. </p>\n"}], "owner": {"reputation": 5823, "user_id": 448839, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7c7299130fe9d4e825773fe7e7be83e?s=128&d=identicon&r=PG", "display_name": "pepero", "link": "https://stackoverflow.com/users/448839/pepero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 39006272, "answer_count": 1, "score": 2, "last_activity_date": 1471468715, "creation_date": 1471467646, "last_edit_date": 1471468715, "question_id": 39006209, "link": "https://stackoverflow.com/questions/39006209/how-is-template-class-matched", "title": "how is template class matched", "body": "<p>I try to understand the <code>enable_if</code> implementation, which is a pair of template classes. what I do not understand, why <code>enable_if&lt;true, int&gt;</code> is not matched to the first one? how is this decided?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;bool, class T = void&gt;\nstruct enable_if\n{\n    enable_if() { std::cout &lt;&lt; \"invalid type\";}\n};\n\ntemplate &lt;class T&gt;\nstruct enable_if&lt;true, T&gt;\n{\n  typedef T type;\n  enable_if() { std::cout &lt;&lt;\"valid type\";}\n};\n\nint main(){\n    enable_if&lt;0==0, int&gt; example; // print \"valid type\"\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "deployment"], "comments": [{"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471468190, "post_id": 39006199, "comment_id": 65364279, "body": "What errors do they get? The best way is to install the Redistributable Package from MS as you mention..."}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471468318, "post_id": 39006199, "comment_id": 65364334, "body": "The exact error is &quot;This application has failed to start because MSVCR&lt;version number&gt;.dll was not found. Re-installing the application may fix this problem.&quot;"}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471468679, "post_id": 39006199, "comment_id": 65364509, "body": "And what is the version number? ;-)"}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471468736, "post_id": 39006199, "comment_id": 65364531, "body": "100. Sorry, I considered it would be clear based on the question"}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471469015, "post_id": 39006199, "comment_id": 65364665, "body": "Strange... It was not clear as you wrote your comment, because your application could use library / SDK, which requires different version of the runtime than your application requires."}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471514285, "post_id": 39006199, "comment_id": 65380940, "body": "Yes, but this is not the issue. I have used depends.exe to check for other dependencies"}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471516198, "post_id": 39006199, "comment_id": 65382153, "body": "Then I would check, if there are some breaking changes in updates (VS 2010 SP1), but they should not. Did you compare installed *.dll with the packed in your zip?"}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471516280, "post_id": 39006199, "comment_id": 65382215, "body": "Yes, they have a difference of a little bit over 2,000 bytes or something"}], "answers": [{"comments": [{"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1471468586, "post_id": 39006346, "comment_id": 65364460, "body": "I see. How would you handle it if you offered a <code>zip</code> file for your software, so that I can run without the necessity to install?"}, {"owner": {"reputation": 100, "user_id": 6728149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51be7ddaea6d7671b271187affaae28?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6728149/mike"}, "reply_to_user": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1471469604, "post_id": 39006346, "comment_id": 65364911, "body": "Try using Inno Setup or NSIS, both of them are free to use, and have a lots of tutorial on internet."}], "tags": [], "owner": {"reputation": 100, "user_id": 6728149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51be7ddaea6d7671b271187affaae28?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6728149/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1471468270, "creation_date": 1471468270, "answer_id": 39006346, "question_id": 39006199, "link": "https://stackoverflow.com/questions/39006199/which-msvcp100-dll-msvcr100-dll-to-deploy-for-customers/39006346#39006346", "title": "Which msvcp100.dll/msvcr100.dll to deploy for customers?", "body": "<p>It depends on the OS version and architecture, so its better to add the Microsoft Visual C++ Redistributable Package in your installer as prerequisite, so that the installer can check the system if its actually required or not and then install/skip it accordingly.</p>\n"}], "owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 39006346, "answer_count": 1, "score": -1, "last_activity_date": 1599562967, "creation_date": 1471467623, "last_edit_date": 1599562967, "question_id": 39006199, "link": "https://stackoverflow.com/questions/39006199/which-msvcp100-dll-msvcr100-dll-to-deploy-for-customers", "title": "Which msvcp100.dll/msvcr100.dll to deploy for customers?", "body": "<p>With my product I have deployed specific versions of msvcp100.dll and msvcr100.dll that also belong to a redistribution package. To be more precise, I use them from my directory <code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\redist\\x86\\Microsoft.VC100.CRT</code>. I just put these dlls into the installation directory of my software. And yes, my software is compiled as x86 and with Visual Studio 2010.</p>\n<p>Those work fine on my machine. However, I see that some customers get errors that can be solved by removing those files and manually installing the Visual Studio 2010 redistributables with the online installer from Microsoft. The errors will be of the form:</p>\n<blockquote>\n<p>This application has failed to start because MSVCR100.dll\nwas not found. Re-installing the application may fix this problem.</p>\n</blockquote>\n<p>I thought that msvcp100.dll and msvcr100.dll are in some kind unique but there seem to be different version to be out there. How should I deploy these files to my customers such that it works for all of them? If this is not possible, what would be a good way to deploy these files?</p>\n"}, {"tags": ["c++", "class", "inheritance", "struct"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471467741, "post_id": 39006189, "comment_id": 65364073, "body": "Can you show the contents of the <code>class_parent.h</code>header as well please?"}, {"owner": {"reputation": 1501, "user_id": 1073623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGnBW.jpg?s=128&g=1", "display_name": "infiniteRefactor", "link": "https://stackoverflow.com/users/1073623/infiniterefactor"}, "edited": false, "score": 0, "creation_date": 1471468108, "post_id": 39006189, "comment_id": 65364240, "body": "Can you elaborate more on what you want? <code>newStruct</code> is a type, you can use it in parent and child classes. <code>messageStruct...</code> are local variables to the function (as you seem to be aware of). If you define them as class members you can access them too. Is this what you want? Your description is very vague."}, {"owner": {"reputation": 699, "user_id": 6702215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca7ad93d190655f6306f4137b5482b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Wang", "link": "https://stackoverflow.com/users/6702215/sean-wang"}, "edited": false, "score": 0, "creation_date": 1471468278, "post_id": 39006189, "comment_id": 65364318, "body": "Your code is declaring the newStruct structs locally within the parent function. This is why your child class does not have those three structs defined. Scope is the problem."}, {"owner": {"reputation": 1, "user_id": 6728114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6695dd7078e197a7ecfcc27e654b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Moe", "link": "https://stackoverflow.com/users/6728114/moe"}, "reply_to_user": {"reputation": 1501, "user_id": 1073623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGnBW.jpg?s=128&g=1", "display_name": "infiniteRefactor", "link": "https://stackoverflow.com/users/1073623/infiniterefactor"}, "edited": false, "score": 0, "creation_date": 1471470003, "post_id": 39006189, "comment_id": 65365088, "body": "@infiniteRefactor I already tried it out with defining them in public, I just wanted to try if I could get it more overseeable by putting them in functions, but I already had the idea it wouldn&#39;t work... Just wanted to find a way to make it neat. But appearently putting them into public is the only Option..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6728114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6695dd7078e197a7ecfcc27e654b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Moe", "link": "https://stackoverflow.com/users/6728114/moe"}, "edited": false, "score": 0, "creation_date": 1471469573, "post_id": 39006253, "comment_id": 65364900, "body": "Buut could I define them in public, then edit messageStruct_one.message in class_parent_function and then pass it down to the child class?   Edit: dumb question, of Course it worked..."}], "tags": [], "owner": {"reputation": 699, "user_id": 6702215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bca7ad93d190655f6306f4137b5482b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Wang", "link": "https://stackoverflow.com/users/6702215/sean-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1471468827, "last_edit_date": 1471468827, "creation_date": 1471467845, "answer_id": 39006253, "question_id": 39006189, "link": "https://stackoverflow.com/questions/39006189/c-pass-down-an-already-defined-struct-from-on-class-to-another/39006253#39006253", "title": "C++, pass down an already defined Struct from on Class to another", "body": "<p>Your structs in the parent function are defined locally. They will not be available outside the scope of the function. If you want your parent function to be the one creating these structs then you could have some method to create and return your structs. Like so</p>\n\n<pre><code>newStruct class_parent::create_new_struct(std::string text)\n{   \n    struct newStruct result;\n    result.message = text;\n    return result;\n}\n</code></pre>\n\n<p>Then call it in your child like so</p>\n\n<pre><code>messageStruct_one = create_new_struct(\"some text\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6728114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6695dd7078e197a7ecfcc27e654b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Moe", "link": "https://stackoverflow.com/users/6728114/moe"}, "edited": false, "score": 0, "creation_date": 1471469459, "post_id": 39006315, "comment_id": 65364852, "body": "Okay, that is something I have already tried out and it worked, I only wanted to try if it possible to maybe do it this way (what I wrote in the question. I just wanted to have it more neatly arranged). But could I edit messageStruct_one.message in the function and then pass it down to the child class?  Edit: dumb question, of Course it worked..."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1471468132, "creation_date": 1471468132, "answer_id": 39006315, "question_id": 39006189, "link": "https://stackoverflow.com/questions/39006189/c-pass-down-an-already-defined-struct-from-on-class-to-another/39006315#39006315", "title": "C++, pass down an already defined Struct from on Class to another", "body": "<p>The variables <code>messageStruct_one</code>, <code>messageStruct_two</code>, and <code>messageStruct_three</code> are local to the method <code>class_parent::function_of_parent</code>.  </p>\n\n<p>If you want them to be visible to another method, you would need to define them as <code>protected</code> members of the parent class.</p>\n\n<pre><code>  class class_parent\n  {\n    public:   \n      struct newStruct\n      {\n        std::string message;\n      };\n      void function_of_parent();\n      class_parent();\n      ~class_parent();\n    private:\n      int y = 1;\n    protected:\n      int x = 0;\n      newStruct messageStruct_one =  { \"Some text, \" };\n      newStruct messageStruct_two =  { \" even more text \" };\n      newStruct messageStruct_three =  { \" ...foo\" };\n  };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6728114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6695dd7078e197a7ecfcc27e654b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Moe", "link": "https://stackoverflow.com/users/6728114/moe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1471468827, "creation_date": 1471467583, "last_edit_date": 1471468529, "question_id": 39006189, "link": "https://stackoverflow.com/questions/39006189/c-pass-down-an-already-defined-struct-from-on-class-to-another", "title": "C++, pass down an already defined Struct from on Class to another", "body": "<p>First of all here is my Code:</p>\n\n<p>parent_class.h:</p>\n\n<pre><code> #include &lt;string&gt;\n\n  class class_parent\n  {\n  public:   \n   struct newStruct\n   {\n    std::string message;\n   };\n   void function_of_parent();\n    class_parent();\n   ~class_parent();\n  private:\n    int y = 1;\n  protected:\n    int x = 0;\n   };\n</code></pre>\n\n<p>parent_class.cpp:</p>\n\n<pre><code>  #include \"stdafx.h\"\n  #include \"class_parent.h\"\n  #include &lt;iostream&gt;\n  #include &lt;string&gt;\n\nvoid class_parent::function_of_parent()\n{   \n  x = y*10;\n\n  newStruct messageStruct_one =\n  {\n    \"Some text, \"\n  };\n  newStruct messageStruct_two =\n  {\n    \" even more text \"\n  };\n  newStruct messageStruct_three =\n  {\n    \" ...foo\"\n  };\n\n  std::cout &lt;&lt; \" Parent Class says: \" &lt;&lt; messageStruct_one.message   &lt;&lt; \" \"   &lt;&lt; messageStruct_two.message &lt;&lt; \" \" &lt;&lt; messageStruct_three.message &lt;&lt; std::endl;\n  std::cout &lt;&lt; \" \" &lt;&lt; x &lt;&lt; \"\\n\\t\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>class_child.h:</p>\n\n<pre><code>  #include \"class_parent.h\"\n\n  class class_child: public class_parent\n  {\n  public:    \n     void function_of_child();  \n     class_child();\n     ~class_child();\n  };\n</code></pre>\n\n<p>class_child.cpp:</p>\n\n<pre><code>    #include \"stdafx.h\"\n    #include \"class_child.h\"\n    #include \"class_parent.h\"\n    #include &lt;iostream&gt;\n\n    void class_child::function_of_child()\n    {\n       function_of_parent();     \n\n       std::cout &lt;&lt; \" Child Class says: \" &lt;&lt; messageStruct_one.message                                    //here I want to use messageStruct_[one-three] \n                 &lt;&lt; \" \" &lt;&lt;  messageStruct_two.message &lt;&lt; \" \" &lt;&lt; messageStruct_three.message &lt;&lt; std::endl;  //which was defined in the parent class       \n      std::cout &lt;&lt; \" \" &lt;&lt; x &lt;&lt; \"\\n\\t\" &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p>When I want to compile it, it says, that messageStruct_[one-three] is undefined, which was to be expected. I know that structs are similar to classes but I still couldn't find a way to use messageStruct_ from the parent_class_function, which is what I want. Using newStruct to make messageStruct_ in the child class works fine, but I'd like to use the one from the parent class. Is that even possible?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "c++", "interface", "operators", "functor"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 1, "creation_date": 1471466297, "post_id": 39005825, "comment_id": 65363360, "body": "It&#39;s unclear what it is you&#39;re trying to actually <i>accomplish</i>. This seems like a simple case for a lambda."}, {"owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471466373, "post_id": 39005825, "comment_id": 65363403, "body": "@ chrylis Is it possible without a lamba? The function may be complicated..."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1471466600, "post_id": 39005825, "comment_id": 65363502, "body": "Why do you need to do this? Why not <code>Test2(5).test()</code>?"}, {"owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471467188, "post_id": 39005825, "comment_id": 65363831, "body": "@ 4castle I am using the functor to &quot;inject&quot; a supplementary data necessary for computations. The operator ()() performs some complex matrix operations, matrices are constructed from this data. The code represents a significantly simplified example."}, {"owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471467761, "post_id": 39005825, "comment_id": 65364077, "body": "@ Jesper Thanks... Is there a different approach (natural to Java) to express this relationship?"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1471469335, "post_id": 39005825, "comment_id": 65364792, "body": "@justik Use the built-in &quot;at&quot; functionality, with no spaces, which autocompletes. Your version doesn&#39;t actually notify."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1471467752, "last_edit_date": 1471467752, "creation_date": 1471467407, "answer_id": 39006138, "question_id": 39005825, "link": "https://stackoverflow.com/questions/39005825/c-functors-to-java-overloading-operator/39006138#39006138", "title": "C++ functors to Java, overloading operator ()()", "body": "<p>You aren't going to get exactly the same thing in Java, but the principle of what you're doing should be the same.</p>\n\n<p>If you want a functor in Java that can be called like <code>functor_obj()</code>, that's not possible. Java doesn't allow operator overloading*, so that kind of syntax simply isn't possible.</p>\n\n<p>However, Java 8 introduced the concept of \"Functional Interfaces\", which are defined as any Interface which has exactly one [abstract**] function. Any time you're working with a Functional Interface, it's instantiation can be replaced with a lambda expression.</p>\n\n<pre><code>Runnable run = () -&gt; {System.out.println(\"Hello World (FROM THE SECOND DIMEN\u2014I mean THREAD)\");};\nThread thread = new Thread(run); \n//Also Equivalent to the two above lines:\n//Thread thread = new Thread(() -&gt; {System.out.println(\"Hello World (FROM THE SECOND DIMEN\u2014I mean THREAD)\");});\nthread.start();\nthread.join();\n</code></pre>\n\n<p>If you wanted to invoke this particular functor, you'd simply invoke it the same you would any other object that implemented an Interface:</p>\n\n<pre><code>run.run();\n</code></pre>\n\n<p>Because what Java Lambda expressions do is hide the implementation. The following code:</p>\n\n<pre><code>Runnable run = () -&gt; {System.out.println(\"Hello World (FROM THE SECOND DIMEN\u2014I mean THREAD)\");};\n</code></pre>\n\n<p>Does the same thing as the Java 7 equivalent code:</p>\n\n<pre><code>Runnable run = new Runnable() {\n    public void run() {\n        System.out.println(\"Hello World (FROM THE SECOND DIMEN\u2014I mean THREAD)\");\n    }\n};\n</code></pre>\n\n<p>So for your example, you'd probably write something like this:</p>\n\n<pre><code>public static double test(Supplier&lt;Double&gt; f) {//imported from java.util.function\n    return f.get();\n}\n</code></pre>\n\n<p>Which could then be invoked like this:</p>\n\n<pre><code>double a = test(() -&gt; 25);\n</code></pre>\n\n<p>Which is equivalent to the code you wrote in your original <code>main</code> function. And if you need to store the functor for future use, you'd write it like this:</p>\n\n<pre><code>Supplier&lt;Double&gt; sup = () -&gt; 25;\ndouble a = test(sup);\n/*sup can now be stored somewhere or passed to a different function.*/\n</code></pre>\n\n<hr>\n\n<p>* - I mean, Java DOES have operator overloading for <code>String</code> objects to allow the use of <code>+</code> to concatenate objects, but that's pretty much the only situation where it's used.</p>\n\n<p>** - Java 8 also introduced \"Default\" methods to interfaces, which allows interfaces to have implemented methods. That might seem weird, until you realize it lets you write stuff like <code>public default void sort()</code> which can be added to <code>java.util.List&lt;T&gt;</code> to allow for all lists, which have accessors and removal operations, to be sorted using a common, generic algorithm.</p>\n"}, {"comments": [{"owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471468212, "post_id": 39006180, "comment_id": 65364290, "body": "Interesting solution, quite different approach than in C++ :-)"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "reply_to_user": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471468330, "post_id": 39006180, "comment_id": 65364341, "body": "Actually, it&#39;s quite similar. Instead of using <code>()</code> to execute it, you use <code>.getAsDouble()</code> to execute it. Otherwise it&#39;s just slightly different syntax and different names for the same result."}, {"owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471469963, "post_id": 39006180, "comment_id": 65365069, "body": "Does it works for a static method analogous to getAsDouble or some additional parameters passed to this method (not involved in a constructor) ?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "reply_to_user": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "edited": false, "score": 0, "creation_date": 1471478337, "post_id": 39006180, "comment_id": 65367627, "body": "If you use a static method, you will no longer be able to use polymorphism to accomplish the task. In other words, you will have to hardcode all of the method calls. You will be better off keeping them as objects. And yes, you can add additional parameters, but you will not be able to use the <code>DoubleSupplier</code> interface. You will have to use your own custom interface. You can change all of these parameters as needed. Since Java relies heavily on object-oriented programming, you may want to use some tutorials so that everything makes more sense."}], "tags": [], "owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "is_accepted": true, "score": 2, "last_activity_date": 1471467538, "creation_date": 1471467538, "answer_id": 39006180, "question_id": 39005825, "link": "https://stackoverflow.com/questions/39005825/c-functors-to-java-overloading-operator/39006180#39006180", "title": "C++ functors to Java, overloading operator ()()", "body": "<p>In Java 8, you can use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/DoubleSupplier.html\" rel=\"nofollow\"><code>DoubleSupplier</code></a> interface to get a <code>double</code> value from an object:</p>\n\n<pre><code>public class Test implements DoubleSupplier {\n    private double a;\n    public Test(double a) { this.a = a; }\n    public double getAsDouble() { return 10 * a; }\n\n    public static double test(DoubleSupplier ds) { \n        return ds.getAsDouble();\n    }\n    public static void main(String[] args) {\n        double a = test(new Test(5));\n    }\n}\n</code></pre>\n\n<p>If you aren't using Java 8, then you could just make your own interface to implement from:</p>\n\n<pre><code>public interface MyDoubleSupplier {\n    double getAsDouble();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185247, "user_id": 135589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbd98f264c64096af168747c3ae71a7d?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/135589/jesper"}, "is_accepted": false, "score": 1, "last_activity_date": 1471467667, "creation_date": 1471467667, "answer_id": 39006214, "question_id": 39005825, "link": "https://stackoverflow.com/questions/39005825/c-functors-to-java-overloading-operator/39006214#39006214", "title": "C++ functors to Java, overloading operator ()()", "body": "<p>There's no exact equivalent in Java, as there's nothing like overloading the meaning of <code>()</code> as you can do in C++.</p>\n\n<p>Since Java 8 you can program in a functional style in Java, and there are a number of standard functional interfaces in the package <code>java.util.function</code>.</p>\n\n<p>You could do something like this:</p>\n\n<pre><code>import java.util.function.DoubleSupplier;\n\npublic double test(DoubleSupplier supplier) {\n    return supplier.getAsDouble();\n}\n\npublic DoubleSupplier newSupplier(double a) {\n    return () -&gt; 10 * a;\n}\n\n// use it:\ndouble a = test(newSupplier(5));\n</code></pre>\n"}], "owner": {"reputation": 3551, "user_id": 287693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a2b2f6453da084d8538fd521c0a0f264?s=128&d=identicon&r=PG", "display_name": "justik", "link": "https://stackoverflow.com/users/287693/justik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 39006180, "answer_count": 3, "score": 1, "last_activity_date": 1471467752, "creation_date": 1471466117, "last_edit_date": 1471467242, "question_id": 39005825, "link": "https://stackoverflow.com/questions/39005825/c-functors-to-java-overloading-operator", "title": "C++ functors to Java, overloading operator ()()", "body": "<p>Suppose a simple example of functors in C++:</p>\n\n<pre><code>class Test2 {\n    private:\n        double a;\n\n    public:\n        Test2 (double a_) : a(a_){}\n        double operator () () {return 10*a;}\n};\n\ntemplate &lt;typename Function&gt;\ndouble test ( Function function ) {return function();}\n\nint main(int argc,  char* argv[]) {\n    double a = test( Test2(5) );\n    return 0;\n}\n</code></pre>\n\n<p>Is there any way to implement this construction in Java (for example using the interface Functor)? Could you give me a short example? Thanks for your help.</p>\n"}, {"tags": ["c++", "ios", "objective-c", "swift", "cordova"], "owner": {"reputation": 11, "user_id": 6728005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04769865c3943b7c6cf9533f590ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sameer", "link": "https://stackoverflow.com/users/6728005/sameer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475679718, "creation_date": 1471465710, "question_id": 39005717, "link": "https://stackoverflow.com/questions/39005717/cdvviewcontroller-not-found-failed-to-import-bridging-header", "title": "CDVViewController not found / Failed to import bridging header", "body": "<p>XCode 7.3.1\nEl Captain 10.11.6\nCordova 6.3.1</p>\n\n<p>I'm working at the 4:35 mark: <a href=\"https://www.youtube.com/watch?v=eTV-tNzWxGc\" rel=\"nofollow\">https://www.youtube.com/watch?v=eTV-tNzWxGc</a></p>\n\n<p>When I try to build the product, I'm getting two errors under bridge-header.h;</p>\n\n<ul>\n<li>'CDVViewController.h' file not found</li>\n<li>Failed to import bridging header '/users/jauharsa/documents/demos/swift-sd/bridge-header.h'</li>\n</ul>\n\n<p>I've made the follow updates;</p>\n\n<ul>\n<li>\"Yes\" to Build Active Architecture Only on the project and target level</li>\n<li>Added the file name \"bridge-header.h\" to the target level of Objective-C Bridging Header</li>\n<li>Under the project level header search paths adding, \"$(TARGET_BUILD_DIR)/usr/local/include\", \"$(OBJROOT)/UninstalledProducts/include\", \"$(Build_Products_Dir)\" to debug, and all the ones I just stated and \"$(OBJROOT)/UninstalledProducts/$(PLATFORM_NAME)/include\" to release.</li>\n</ul>\n\n<p>I'm new to programming, so apologies if I'm making a dumb mistake.</p>\n"}, {"tags": ["c++", "c++11", "aggregate", "language-lawyer", "list-initialization"], "answers": [{"comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471466576, "post_id": 39005774, "comment_id": 65363495, "body": "So what do you think about the <code>struct B</code> example? You think <code>gcc</code> and <code>clang</code> are using some C++14 feature that shouldn&#39;t be available in C++11 standard?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471497685, "post_id": 39005774, "comment_id": 65372460, "body": "@ChrisBeck: I think they&#39;ve decided that this was a clear defect in the C++11 standard, and they have implemented the fixed version.  I suspect the only reason this never got to &quot;resolved&quot; was that they have started doing C++ releases much faster, so rather than fixing defects in the old standards, they just fix it in the latest."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1471465928, "creation_date": 1471465928, "answer_id": 39005774, "question_id": 39005700, "link": "https://stackoverflow.com/questions/39005700/list-initialization-of-aggregates-when-can-it-invoke-copy-constructor/39005774#39005774", "title": "list initialization of aggregates: when can it invoke copy constructor?", "body": "<blockquote>\n  <p>When the standard writes,</p>\n  \n  <p>\"If <code>X</code>, foo-initialization is performed. Otherwise, if <code>Y</code>,\n  bar-initialization is performed, ...</p>\n  \n  <p>doesn't this mean that if <code>X</code> holds, but foo-initialization cannot be\n  performed, then we should check if <code>Y</code> holds, and then attempt\n  bar-initialization?</p>\n</blockquote>\n\n<p>No.  If <code>X</code> holds we perform foo-initialization.  If that fails the program is ill-formed.</p>\n"}, {"comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471466416, "post_id": 39005787, "comment_id": 65363426, "body": "So you think in my example with <code>struct B</code>, <code>gcc-5</code> should behave the same as <code>gcc-4.8</code> and <code>gcc-4.9</code>, when <code>std=c++11</code>?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471466596, "post_id": 39005787, "comment_id": 65363500, "body": "@ChrisBeck: That&#39;s a <i>different</i> question. That&#39;s a question of whether defect fixes should be retroactively applied to existing standards. And the answer to that one is, generally speaking, yes. That&#39;s what a defect report <i>is</i>; it&#39;s a <i>bug</i> in the standard. Bugs should be fixed, and you shouldn&#39;t have to say you&#39;re using the next version to get them, right?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471467035, "post_id": 39005787, "comment_id": 65363747, "body": "I mean there is a difference between a bug in the implementation of the standard, and a defect in the wording of the standard. The former, yeah that should be resolved by a release incrementing only the patch-level, ideally. But if I say <code>std=c++11</code> I generally assume they are trying to implement N3797. Otherwise it means I can&#39;t really know what the compiler will try to do unless I read all the standards. Or I have to tell people &quot;you can&#39;t use clang after version 3.6, or unfortunately it will compile but the intializations won&#39;t work like intended and you&#39;ll see 1 instead of 2&quot;"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471467194, "post_id": 39005787, "comment_id": 65363836, "body": "Maybe I didn&#39;t understand what &quot;defect reports&quot; are in C++. Are defect reports, a problem with release X that we hope to address in next release, or do they essentially have bugfix releases of previously released standards? I thought that basically the C++11 standard doesn&#39;t change after it&#39;s published, and any defect reports are discussion items for C++14 etc."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471467358, "post_id": 39005787, "comment_id": 65363905, "body": "@ChrisBeck: Defect reports are bug in the standard. The committee does not make bugfix releases of the whole standard, but they do make it clear when they&#39;ve approved a defect report and exactly what the fix is in terms of wording."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471467826, "post_id": 39005787, "comment_id": 65364106, "body": "I see. So on the defect report page, it says &quot;Issues with DR, accepted, DRWP, and WP status are NOT part of the International Standard for C++. They are provided for informational purposes only, as an indication of the intent of the Committee.&quot; And when I ask the compiler for <code>--std=c++11</code>, it means, C++ as described in C++11 standard document, plus any defect reports which clarify the intent of the standards committee? Or something like this?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1471469937, "post_id": 39005787, "comment_id": 65365056, "body": "I guess it&#39;s extremely unlikely that this change would actually break a program designed for c++11 -- my example is pretty artificial, and an aggregate can&#39;t contain a copy of itself, so <code>A b{a};</code> just would have failed with the older compilers, unless these goofy implicit conversions are involved. Maybe if the aggregate contains a reference to itself or something, but that&#39;s also pretty artificial."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 4, "last_activity_date": 1471466363, "last_edit_date": 1592644375, "creation_date": 1471465998, "answer_id": 39005787, "question_id": 39005700, "link": "https://stackoverflow.com/questions/39005700/list-initialization-of-aggregates-when-can-it-invoke-copy-constructor/39005787#39005787", "title": "list initialization of aggregates: when can it invoke copy constructor?", "body": "<blockquote>\n<p>When the standard writes,</p>\n<p>&quot;If X, foo-initialization is performed. Otherwise, if Y, bar-initialization is performed, .... Otherwise, the program is ill-formed.&quot;,</p>\n<p>doesn't this mean that if X holds, but foo-initialization cannot be performed, then we should check if Y holds, and then attempt bar-initialization?</p>\n</blockquote>\n<p>No, it does not. Think of it like actual code:</p>\n<pre><code>T *p = ...;\nif(p)\n{\n  p-&gt;Something();\n}\nelse\n{ ... }\n</code></pre>\n<p><code>p</code> isn't NULL. That doesn't mean it's a valid pointer either. If <code>p</code> points to a destroyed object, <code>p-&gt;Something()</code> failing will not cause you to skip to the <code>else</code>. You had your chance to protect the call in the condition.</p>\n<p>So you get undefined behavior.</p>\n<p>The same goes here. If X, do A. That doesn't imply what happens if A fails; it tell you to do it. If it can't be done... you're screwed.</p>\n"}], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 2, "accepted_answer_id": 39005774, "answer_count": 2, "score": 7, "last_activity_date": 1471466363, "creation_date": 1471465635, "question_id": 39005700, "link": "https://stackoverflow.com/questions/39005700/list-initialization-of-aggregates-when-can-it-invoke-copy-constructor", "title": "list initialization of aggregates: when can it invoke copy constructor?", "body": "<p>Consider the following code:</p>\n\n<pre><code>struct A {\n  int x;\n};\n\nint main() {\n  A a;\n  A b{a};\n}\n</code></pre>\n\n<p>Is this program well-formed at C++11 standard? In my copy of N3797 it says</p>\n\n<blockquote>\n  <p>8.5.4 List initialization <code>[dcl.init.list]</code>  </p>\n  \n  <p>3: List-initialization of an object or reference of type <code>T</code> is defined as follows:<br>\n     - If <code>T</code> is an aggregate, aggregate initialization is performed (8.5.1).<br>\n     - Otherwise, if <code>T</code> is a specialization of <code>std::initializer_list&lt;E&gt;</code>, ...<br>\n     - Otherwise, if <code>T</code> is a class type, constructors are considered. The applicable constructors are enumerated and the best one is chosen using overload resolution. If a narrowing conversion is required to convert any of the types, the program is ill-formed.<br>\n     - Otherwise, if the initializer list has a single element of type <code>E</code> and either <code>T</code> is not a reference type or it is reference-related to <code>E</code>, the object or reference is initialized from that element; if a narrowing conversion is required to convert the element to <code>T</code>, the program is ill-formed.<br>\n     - Otherwise, if <code>T</code> is a reference type, a pr-value temporary of the type reference by <code>T</code> is copy-list-initialized or direct-list-initialized, depending on the kind of initialization for the reference, and the reference is bound to that temporary.<br>\n     - Otherwise, if the initializer list has no elements, the object is value-initialized.<br>\n     - Otherwise, the program is ill-formed.  </p>\n</blockquote>\n\n<p>The point of the example is, the type is an aggregate, but list-initialization is supposed to invoke the copy constructor. On <code>gcc 4.8</code> and <code>gcc 4.9</code>, at C++11 standard, it fails:</p>\n\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:7:8: error: cannot convert \u2018A\u2019 to \u2018int\u2019 in initialization\n   A b{a};\n        ^\n</code></pre>\n\n<p>and says <code>A is not convertible to int</code> or similar, because aggregate initialization fails. On <code>gcc 5.4</code>, it works fine at C++11 standard.</p>\n\n<p>On <code>clang</code> you get similar errors with <code>clang-3.5</code>, <code>3.6</code>, and it starts working at <code>clang-3.7</code>.</p>\n\n<p>I understand that it is well-formed at C++14 standard, and that it was mentioned in a defect report <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1467\">here</a>.</p>\n\n<p>However, what I don't understand is why this was considered a defect in the standard.</p>\n\n<p>When the standard writes,  </p>\n\n<p>\"If <code>X</code>, foo-initialization is performed. Otherwise, if <code>Y</code>, bar-initialization is performed, .... Otherwise, the program is ill-formed.\",  </p>\n\n<p>doesn't this mean that if <code>X</code> holds, but foo-initialization cannot be performed, then we should check if <code>Y</code> holds, and then attempt bar-initialization?  </p>\n\n<p>This would make the example work, because when aggregate initialization fails, we don't match <code>std::initializer_list</code>, and the next condition we match is \"<code>T</code> is a class type\", and then we consider constructors.</p>\n\n<p>Note that this <em>does</em> seem to be how it works in this modified example</p>\n\n<pre><code>struct A {\n  int x;\n};\n\nint main() {\n  A a;\n  const A &amp; ref;\n  A b{ref};\n}\n</code></pre>\n\n<p>All the same compilers treat this the same way as the earlier example, at C++11 and C++14 standards. But it seems that the modified wording from the CWG defect record doesn't apply to this case. It reads:</p>\n\n<blockquote>\n  <p>If <code>T</code> is a class type and the initializer list has a single element of type <code>cv T</code> or a class type derived from <code>T</code>, the object is initialized from that element.</p>\n</blockquote>\n\n<p><a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1467\">http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1467</a></p>\n\n<p>But in the second code example, the initializer list technically contains <code>const T &amp;</code>. So I don't see how it would work unless after aggregate initialization fails, we are supposed to attempt constructors.</p>\n\n<p>Am I wrong? Is it not supposed to attempt constructors after aggregate initialization fails?</p>\n\n<p>Here's a related example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct B {\n  int x;\n\n  operator int() const { return 2; }\n};\n\nint main() {\n  B b{1};\n  B c{b};\n  std::cout &lt;&lt; c.x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>In <code>clang-3.6</code>, <code>gcc-4.8</code>, <code>gcc-4.9</code>, it prints <code>2</code>, and in <code>clang-3.7</code>, <code>gcc-5.0</code> it prints <code>1</code>.</p>\n\n<p>Assuming I'm wrong, and at C++11 standard, list initialization of an aggregate is supposed to be aggregate initialization and nothing else, until the new wording in the defect report is introduced, is it a bug that this happens even when I select <code>-std=c++11</code> on the newer compilers?</p>\n"}, {"tags": ["c++", "arrays", "qt", "qstring", "qvector"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1471465553, "post_id": 39005641, "comment_id": 65363009, "body": "You are creating a <code>QVector</code> which has a size and capacity of 0 - you first need to fill it with elements using <code>append</code> <a href=\"http://doc.qt.io/qt-5/qvector.html#append\" rel=\"nofollow noreferrer\">official reference</a>"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 5462371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/97iGT.png?s=128&g=1", "display_name": "Mathis Delaunay", "link": "https://stackoverflow.com/users/5462371/mathis-delaunay"}, "edited": false, "score": 0, "creation_date": 1471469453, "post_id": 39006246, "comment_id": 65364844, "body": "Someone help me and he give me this which work perfectly :                                 QVector&lt;QVector &lt;QString&gt;&gt; tableur(QVector&lt;QVector &lt;QString&gt;&gt;(10,QVector&lt;QString&gt;(10,&quot;&quot;)));     tableur[1][1] = &quot;Mmot&quot;;     qDebug() &lt;&lt; tableur[1][1];"}], "tags": [], "owner": {"reputation": 955, "user_id": 2560087, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/065698904c8b19f2b8d048a9ba8ec59d?s=128&d=identicon&r=PG", "display_name": "bashis", "link": "https://stackoverflow.com/users/2560087/bashis"}, "is_accepted": true, "score": 1, "last_activity_date": 1471468094, "last_edit_date": 1471468094, "creation_date": 1471467779, "answer_id": 39006246, "question_id": 39005641, "link": "https://stackoverflow.com/questions/39005641/create-qstring-array-of-two-dimensions-with-qvector-with-qt/39006246#39006246", "title": "Create QString array of two dimensions with QVector with Qt", "body": "<p>Assuming you are trying to create a table (for which <code>QVector&lt;QVector&lt;T&gt;&gt;</code> is not the best choice) you should initialize it first.</p>\n\n<p>Something like:</p>\n\n<pre><code>QVector&lt;QVector&lt;QString&gt;&gt; CreateTableau(int sizeX, int sizeY)\n{\n   QVector&lt;QVector&lt;QString&gt;&gt; result;\n   for (int idx1 = 0; idx1 &lt; sizeX; idx1++)\n   {\n      result.append(QVector&lt;QString&gt;());\n      for (int idx2 = 0; idx2 &lt; sizeY; idx2++)\n      {\n         result[idx1].append(QString());\n      } \n   }\n   return result;\n}\n</code></pre>\n\n<p>then you call it like:</p>\n\n<pre><code>int i = 10;\nint j = 10;\nQVector&lt;QVector&lt;QString&gt;&gt; tableau = CreateTableau(100, 100); //TODO: replace with appropriate sizes.\nQString word = \"Word\";\ntableau[i][j] = word;\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 5462371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/97iGT.png?s=128&g=1", "display_name": "Mathis Delaunay", "link": "https://stackoverflow.com/users/5462371/mathis-delaunay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1659, "favorite_count": 0, "accepted_answer_id": 39006246, "answer_count": 1, "score": 0, "last_activity_date": 1471468094, "creation_date": 1471465403, "question_id": 39005641, "link": "https://stackoverflow.com/questions/39005641/create-qstring-array-of-two-dimensions-with-qvector-with-qt", "title": "Create QString array of two dimensions with QVector with Qt", "body": "<p>I want to to put in array some QString words but I don't know how can I do. \nI have try with Vector like this : </p>\n\n<pre><code>int i = 10;\nint j = 10;\nQVector &lt; QVector &lt; QString&gt; &gt; tableau;\nQString word = \"Word\";\ntableau[i][j] = word;\n</code></pre>\n\n<p>But that don't work.\nThis is the error message : </p>\n\n<pre><code>ASSERT failure in QVector&lt;T&gt;::operator[]: \"index out of range\"\n</code></pre>\n\n<p>Ah have try with std::vector and std::string but this don't work to </p>\n\n<p>So can you explain me how to create a string array of two dimensions to put word \nThanks </p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1471465477, "post_id": 39005581, "comment_id": 65362962, "body": "Your comments <code>&#47;&#47; this line of code might be bugged</code> are spot on. Try to use a debugger to fix ONE thing at a time. Your <code>prevCheck</code> is broken partially because of how all the other functions are written."}, {"owner": {"reputation": 53, "user_id": 6714271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c30201c5d3817cdd482352a2da386434?s=128&d=identicon&r=PG&f=1", "display_name": "Klemens", "link": "https://stackoverflow.com/users/6714271/klemens"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1471466158, "post_id": 39005581, "comment_id": 65363296, "body": "i am writting in vim , and i have not befriended with gdb yet :P But of&#39;course i will try it."}, {"owner": {"reputation": 524, "user_id": 2647513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de473566ab716b5ed2b7bcb7b6967fad?s=128&d=identicon&r=PG", "display_name": "user2647513", "link": "https://stackoverflow.com/users/2647513/user2647513"}, "edited": false, "score": 0, "creation_date": 1471470318, "post_id": 39005581, "comment_id": 65365197, "body": "learning c++ with vim??? Get yourself an IDE with a debugger!"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1471470880, "post_id": 39005581, "comment_id": 65365409, "body": "using <code>vim</code> instead of an <code>IDE</code> isn&#39;t unheard of. I use <code>vim</code> to write in <code>c</code>, but then again <code>c</code> is much simpler and easier than <code>c++</code>."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1471470920, "post_id": 39005581, "comment_id": 65365423, "body": "I like vim.  But it doesn&#39;t stop you from using a graphical front end for gdb (like ddd for example)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1471472778, "post_id": 39005581, "comment_id": 65366109, "body": "Learn the easiest way you can. Lets you spend more time learning."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1471512041, "post_id": 39005581, "comment_id": 65379422, "body": "You are doing far too much in a single line (for example in append: tail = tail-&gt;next=...). Separate your commands, go step by step. Readability is far more important than code appearing to be clever."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 6714271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c30201c5d3817cdd482352a2da386434?s=128&d=identicon&r=PG&f=1", "display_name": "Klemens", "link": "https://stackoverflow.com/users/6714271/klemens"}, "is_accepted": false, "score": 0, "last_activity_date": 1471507913, "last_edit_date": 1471507913, "creation_date": 1471507476, "answer_id": 39012888, "question_id": 39005581, "link": "https://stackoverflow.com/questions/39005581/c-double-linked-list-prev-pointer/39012888#39012888", "title": "c++ double linked list prev pointer", "body": "<p>I have rapaired that bug. This solution is not very elegant but now it works well :P</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid DoubleList&lt;T&gt;::insert(const T it){\n\n    if(!size) tail=curr-&gt;next=std::make_shared&lt;Node&gt;(it,nullptr,curr-&gt;next);\n    else curr-&gt;next=curr-&gt;next-&gt;prev=std::make_shared&lt;Node&gt;(it,curr,curr-&gt;next);\n    ++size;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6714271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c30201c5d3817cdd482352a2da386434?s=128&d=identicon&r=PG&f=1", "display_name": "Klemens", "link": "https://stackoverflow.com/users/6714271/klemens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471507913, "creation_date": 1471465193, "last_edit_date": 1471466357, "question_id": 39005581, "link": "https://stackoverflow.com/questions/39005581/c-double-linked-list-prev-pointer", "title": "c++ double linked list prev pointer", "body": "<p>Recently i have started learn c++ and i have begining play with simple structures. I have struggling with double linked list and i have got stuck on \"prev\" pointer ;/ \"Next\" pointer works well but \"prev\" dosen't and i don't know why. </p>\n\n<pre><code>#ifndef _DOUBLELIST_HPP\n#define _DOUBLELIST_HPP\n#include&lt;iostream&gt;\n#include&lt;memory&gt;\n\ntemplate &lt;typename T&gt;\nclass DoubleList{\n    private:\n        struct Node{\n            T value;\n            std::shared_ptr&lt;Node&gt; prev;\n            std::shared_ptr&lt;Node&gt; next;\n\n            Node(std::shared_ptr&lt;Node&gt; prevp=nullptr,std::shared_ptr&lt;Node&gt; nextp=nullptr):prev(prevp),next(nextp){};\n            Node(T it,std::shared_ptr&lt;Node&gt; prevp,std::shared_ptr&lt;Node&gt; nextp):value(it),prev(prevp),next(nextp){};\n        };\n\n        std::shared_ptr&lt;Node&gt; head; //head is also header node as the first node of the list \n        std::shared_ptr&lt;Node&gt; tail; // but it have no element, is not considered to be an element\n        std::shared_ptr&lt;Node&gt; curr; // of the list in that i don't chceck when list is empty\n        size_t size;\n\n        void clear(){\n            while(curr-&gt;next)\n                curr=std::move(curr-&gt;next);\n            size=0;\n        }\n\n    public:\n        DoubleList():size(0),head(std::make_shared&lt;Node&gt;()),curr(tail),tail(head){};\n\n\n        void insert(const T it);//add node at the begin of a list\n        void append(const T it);//add node at the end of a list\n        void moveToStart(){curr=head;}\n        void goNext();//shift position to a next item\n        void goPrev();//shift position to a prev item\n\n        template&lt;typename U&gt; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;,const DoubleList&lt;U&gt;&amp;);\n}; \n\n\ntemplate &lt;typename T&gt;\nvoid DoubleList&lt;T&gt;::insert(const T it){//(item,prev,next)-&gt; these are arguments of Node constructor\n    curr-&gt;next=std::make_shared&lt;Node&gt;(it,curr,curr-&gt;next);// this line of code might be bugged\n    if(tail==curr) tail=curr-&gt;next;\n    ++size;\n}\n\ntemplate &lt;typename T&gt;\nvoid DoubleList&lt;T&gt;::append(T it){\n   tail=tail-&gt;next=std::make_shared&lt;Node&gt;(it,tail,tail-&gt;next); //and this line of code might be bugged too\n    ++size;\n}\n\ntemplate &lt;typename T&gt;\nvoid DoubleList&lt;T&gt;::goNext(){\n     curr=curr-&gt;next;\n     std::cout&lt;&lt;curr-&gt;value&lt;&lt;\" next\\n\";\n}\n\n// this fun is not working well ;/\ntemplate &lt;typename T&gt;\nvoid DoubleList&lt;T&gt;::goPrev(){\n     curr=curr-&gt;prev;\n     std::cout&lt;&lt;curr-&gt;value&lt;&lt;\" prev\\n\";\n}\n\ntemplate &lt;typename U&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os,const DoubleList&lt;U&gt;&amp; d){\n    auto temp=d.head.get();\n    temp=temp-&gt;next.get();\n    while(temp){\n        os&lt;&lt;temp-&gt;value&lt;&lt;std::endl;\n        temp=temp-&gt;next.get();\n    }\n    return os;\n}\n\n#endif\n\n\n\n// and some simple tests\n\n#include&lt;iostream&gt;\n#include\"doublelist.hpp\"\n\ntypedef int myCheckType; \n\nvoid insertCheck(DoubleList&lt;myCheckType&gt;&amp;);\nvoid appendCheck(DoubleList&lt;myCheckType&gt;&amp;);\nvoid nextCheck(DoubleList&lt;myCheckType&gt;&amp;);\nvoid prevCheck(DoubleList&lt;myCheckType&gt;&amp;);\n\n\nint main(){\n    DoubleList&lt;myCheckType&gt; l;\n    insertCheck (l);\n    appendCheck(l);\n    nextCheck(l);\n    prevCheck(l);\n    std::cout&lt;&lt;l;\n}\n\nvoid insertCheck (DoubleList&lt;myCheckType&gt;&amp; l){\n    for(int i=0;i&lt;4;++i)\n        l.insert(i);\n}\n\nvoid appendCheck(DoubleList&lt;myCheckType&gt;&amp; l){\n    for(int i=20;i&lt;25;++i)\n        l.append(i);\n}\nvoid nextCheck(DoubleList&lt;myCheckType&gt;&amp; l){\n    for(int i=0;i&lt;4;++i)\n        l.goNext();\n}\n\nvoid prevCheck(DoubleList&lt;myCheckType&gt;&amp; l){\n    for(int i=0;i&lt;3;++i)\n        l.goPrev();\n}\n</code></pre>\n"}, {"tags": ["c++", "cocos2d-x-3.x"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471516664, "post_id": 39007891, "comment_id": 65382481, "body": "Yes this is very helpful, but I won&#39;t mark it as an answer cause I can&#39;t get the time of execution, but  Thank you very much, I appreciate your helpful answer."}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471518816, "post_id": 39007891, "comment_id": 65383778, "body": "@duri, Once I am able to match requests with responses, I could measure &quot;response time&quot;, by putting requests/timeValue in a global hash. I admit that it would be much easier if we had HTTPResponse::getResponseTime(), but I don&#39;t see such an interface."}, {"owner": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471519420, "post_id": 39007891, "comment_id": 65384175, "body": "That&#39;s what I need. I am new to C++ and I don&#39;t know how to store key value pair. Right now I am trying to do it with Json::Value but I don&#39;t know if it works. Can you please provide an example how to create this global hash please?"}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471525530, "post_id": 39007891, "comment_id": 65388375, "body": "@duri, What is your c++ version (C++03,C++11,C++14)? What is your operating system (unix/linux, Windows)?"}, {"owner": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471532978, "post_id": 39007891, "comment_id": 65393844, "body": "I want to do this cross-platform, but I have Ubuntu 14.04 and I am using C++11. I just found out to get the fastest server I simply write down the IP address of the first response (it&#39;s the fastest one because it&#39;s response came first)."}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "edited": false, "score": 0, "creation_date": 1471888087, "post_id": 39007891, "comment_id": 65519253, "body": "@duri, does the posted code seem to address your need to get processing time?"}], "tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": true, "score": 1, "last_activity_date": 1471566220, "last_edit_date": 1471566220, "creation_date": 1471477569, "answer_id": 39007891, "question_id": 39005556, "link": "https://stackoverflow.com/questions/39005556/get-execution-time-of-http-request/39007891#39007891", "title": "Get execution time of http request", "body": "<p>Does this help? From the documentation of\n<a href=\"http://www.cocos2d-x.org/reference/native-cpp/V3.0rc1/db/d8f/classcocos2d_1_1network_1_1_http_request.html\" rel=\"nofollow\">HTTPRequest</a> and <a href=\"http://www.cocos2d-x.org/reference/native-cpp/V3.0rc1/d8/dbd/classcocos2d_1_1network_1_1_http_response.html\" rel=\"nofollow\">HTTPResponse</a> ....</p>\n\n<p>You can set a string tag to identify your request, this tag can be found in HttpResponse->getHttpRequest->getTag()</p>\n\n<pre><code>    void HTTPRequest::setTag(const char *tag);\n</code></pre>\n\n<p>Get the string tag back to identify the request.\nThe best practice is to use it in your MyClass::onMyHttpRequestCompleted(sender, HttpResponse*) callback</p>\n\n<pre><code>    const char* HTTPResponse::getTag();\n</code></pre>\n\n<hr>\n\n<p>Edit: You can use these unique tags to pair up the requests with asynchronous responses in a global hash and thus measure \"response time\". There doesn't seem to be any interface in HTTP* classes to give you the time of execution.</p>\n\n<hr>\n\n<p>Edit:\nThere are two ways to pair up HTTPResponse with a HTTPRequest. Here I try to use the second method with some quick/dirty code. Please convert/use it as you see fit.</p>\n\n<ol>\n<li><a href=\"http://www.cocos2d-x.org/reference/native-cpp/V3.0rc1/db/d8f/classcocos2d_1_1network_1_1_http_request.html#a3ffb780946af4af7849d24d27d12cd0a\" rel=\"nofollow\">setTag/getTag</a></li>\n<li><a href=\"http://www.cocos2d-x.org/reference/native-cpp/V3.0rc1/db/d8f/classcocos2d_1_1network_1_1_http_request.html#a760e981419307dc53ca0c7e885b9123a\" rel=\"nofollow\">setUserData/getUserData</a></li>\n</ol>\n\n<p>Create a file HTTPCustomData.h :</p>\n\n<pre><code>#include &lt;time.h&gt;\nclass HTTPCustomData {\n    private:\n        time_t t1;\n    public:\n        HTTPCustomData() { time(&amp;t1); }\n        double getTimePassed(void) {\n            time_t t2; time(&amp;t2); return(difftime(t2,t1));\n        }\n};\n</code></pre>\n\n<p>Use the following code where you send request:</p>\n\n<pre><code>#include \"HTTPCustomData.h\"\nfor ( int i = 0; i &lt; servers.size(); ++i ) {\n    // ...\n    // ... Before \"send\"\n    request-&gt;setUserData(new HTTPCustomData());\n    cocos2d::network::HttpClient::getInstance()-&gt;send(request);\n    request-&gt;release();\n}\n</code></pre>\n\n<p>Later in GameScene::onServerRequestCompleted method, ...</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n#include \"HTTPCustomData.h\"\nvoid GameScene::onServerRequestCompleted(...) {\n{\n    // ...\n    std::unique_ptr&lt;HTTPCustomData&gt; h(\n        (HTTPCustomData *)(response-&gt;getHTTPRequst()-&gt;getUserData())\n    );\n    std::cout &lt;&lt; h-&gt;getTimePassed() &lt;&lt; std::endl;\n    // ....\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 6626362, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/764265763951cc3c1c4f875804625edf?s=128&d=identicon&r=PG&f=1", "display_name": "duri", "link": "https://stackoverflow.com/users/6626362/duri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 39007891, "answer_count": 1, "score": 0, "last_activity_date": 1471566220, "creation_date": 1471465121, "question_id": 39005556, "link": "https://stackoverflow.com/questions/39005556/get-execution-time-of-http-request", "title": "Get execution time of http request", "body": "<p>I have the following code:</p>\n\n<pre><code>void GameScene::onGetServersRequestCompleted( cocos2d::network::HttpClient *sender, cocos2d::network::HttpResponse *response )\n{\n\nif( 200 == response-&gt;getResponseCode() ) {\n    std::vector&lt;char&gt; *buffer = response-&gt;getResponseData();\n    std::string serversString( buffer-&gt;begin(), buffer-&gt;end() );\n\n    Json::Reader reader;\n    Json::Value root;\n\n    reader.parse(serversString, root);\n\n    const Json::Value servers = root[\"servers\"];\n    for ( int i = 0; i &lt; servers.size(); ++i ) {\n        //CCLOG(\"%s\",  servers[i].asString().c_str());\n        cocos2d::network::HttpRequest *request = new cocos2d::network::HttpRequest();\n        request-&gt;setUrl(\"http://\" + servers[i].asString() + \"/info\");\n        request-&gt;setRequestType(cocos2d::network::HttpRequest::Type::GET);\n        request-&gt;setResponseCallback(CC_CALLBACK_2(GameScene::onServerRequestCompleted, this));\n        cocos2d::network::HttpClient::getInstance()-&gt;send(request);\n        request-&gt;release();\n    }\n\n} else {\n    CCLOG(\"Request Failed! Response Code: %i\\n\", response-&gt;getResponseCode());\n    /*std::vector&lt;char&gt; *buffer = response-&gt;getResponseData();\n    std::string serversString( buffer-&gt;begin(), buffer-&gt;end() );\n    CCLOG(\"%s\", serversString.c_str());*/\n    this-&gt;serverIp = \"185.8.166.41\";\n}\n\n}\n</code></pre>\n\n<p>I am trying to get the right server. What I would like to do is to get the execution time of each server's request and get the fastest one. Is it possible? because it's an asynchronous function I don't know how to do it. How would you do it?</p>\n"}, {"tags": ["c++", "pointers", "memory"], "answers": [{"comments": [{"owner": {"reputation": 1913, "user_id": 1970843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aadb1e11f1d872253f24685b101d335?s=128&d=identicon&r=PG", "display_name": "GabrielF", "link": "https://stackoverflow.com/users/1970843/gabrielf"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1471466739, "post_id": 39005515, "comment_id": 65363589, "body": "@SergeyA would you care to explain that statement for a casual c++ programmer? I always thought <code>B b()</code> was stack and <code>B *b = new B()</code> was heap... did I miss something?"}], "tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": true, "score": 5, "last_activity_date": 1471466704, "last_edit_date": 1471466704, "creation_date": 1471464931, "answer_id": 39005515, "question_id": 39005405, "link": "https://stackoverflow.com/questions/39005405/memory-allocation-using-pointer-vs-without-using-pointer/39005515#39005515", "title": "Memory allocation using pointer VS without using pointer", "body": "<p>Yes, your first example requires at least <code>sizeof(int*)</code> (in automatic storage) + <code>sizeof(int)</code> (in dynamic storage). There may also be overhead from the memory management. </p>\n\n<p>Your second example only requires <code>sizeof(int)</code> which may end up being omitted entirely (by optimization) depending on how its used. </p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 4035376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3741d11e3bef4028d7d29d7379199ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/4035376/ruby"}, "edited": false, "score": 0, "creation_date": 1471477632, "post_id": 39005619, "comment_id": 65367443, "body": "Thank you, that helped! :)"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1471466403, "last_edit_date": 1471466403, "creation_date": 1471465324, "answer_id": 39005619, "question_id": 39005405, "link": "https://stackoverflow.com/questions/39005405/memory-allocation-using-pointer-vs-without-using-pointer/39005619#39005619", "title": "Memory allocation using pointer VS without using pointer", "body": "<blockquote>\n  <p><em>\"Is there any difference in terms of memory usage between the following two codes in C++?\"</em> </p>\n</blockquote>\n\n<p>Of course, your 1st example leaks memory unless you're not calling <code>delete val;</code> after you don't need it anymore.</p>\n\n<p>You might want to read about the <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow\">RAII</a> idiom, regarding your 2nd sample (though just dealing with simple <code>int</code> values all that turns out to be trivial).</p>\n\n<p>Note c++ <code>new</code> isn't handled the same way as in <a href=\"/questions/tagged/java\" class=\"post-tag\" title=\"show questions tagged &#39;java&#39;\" rel=\"tag\">java</a> or <a href=\"/questions/tagged/c%23\" class=\"post-tag\" title=\"show questions tagged &#39;c#&#39;\" rel=\"tag\">c#</a> language, there's no garbage collector.</p>\n"}], "owner": {"reputation": 9, "user_id": 4035376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3741d11e3bef4028d7d29d7379199ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/4035376/ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 39005515, "answer_count": 2, "score": -3, "last_activity_date": 1471466704, "creation_date": 1471464524, "question_id": 39005405, "link": "https://stackoverflow.com/questions/39005405/memory-allocation-using-pointer-vs-without-using-pointer", "title": "Memory allocation using pointer VS without using pointer", "body": "<p>Is there any difference in terms of memory usage between the following two codes in C++?</p>\n\n<pre><code>int *val = new int(5);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int val = 5;\n</code></pre>\n"}, {"tags": ["c#", "c++", "unity3d", "dll", "dllimport"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471468992, "post_id": 39005612, "comment_id": 65364655, "body": "This is a really nice tool thank you. When I do the check on the one that is working, all the functions show up unmangled. When I do the check on the one that isn&#39;t working, no functions show up at all."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471469061, "post_id": 39005612, "comment_id": 65364684, "body": "@mBajema good sign, please check you have compiled both dlls for the sample platform - x86 or x64"}, {"owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471469423, "post_id": 39005612, "comment_id": 65364828, "body": "I have both of them set as Release Configuration Platform x64 in the configuration manager."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471469516, "post_id": 39005612, "comment_id": 65364872, "body": "@mBajema Recheck the second dll&#39;s linker option in Linker -&gt; Additional -&gt; Target Machine. For x64 there should be <code>MachineX64</code> value."}, {"owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471470203, "post_id": 39005612, "comment_id": 65365157, "body": "the Target Machine says MachineX64 (/MACHINE:X64) for both"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471470262, "post_id": 39005612, "comment_id": 65365181, "body": "@mBajema You also can do the following experiment. Write <code>__declspec(dllexport)</code> instead of <code>EXPORT_API</code> for <code>IsFive</code>, recompile and check with Dependency Walker again."}, {"owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471470665, "post_id": 39005612, "comment_id": 65365333, "body": "This made no change."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471471281, "post_id": 39005612, "comment_id": 65365568, "body": "@mBajema The last thing I can guess is that your header file with function definitions is not used in your <code>cpp</code> file. To check this put <code>__declspec(dllexport)</code> inside <code>cpp</code> in function definition."}, {"owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471472007, "post_id": 39005612, "comment_id": 65365844, "body": "That did the trick. I am able to use these functions in Unity now that I included the header. Do you want to edit this answer or make a new one for me to mark as the answer?"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "edited": false, "score": 0, "creation_date": 1471472804, "post_id": 39005612, "comment_id": 65366114, "body": "@mBajema I&#39;ve edited the answer, waiting for your turn."}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 2, "last_activity_date": 1471472755, "last_edit_date": 1471472755, "creation_date": 1471465296, "answer_id": 39005612, "question_id": 39005340, "link": "https://stackoverflow.com/questions/39005340/entrypointnotfoundexception-in-one-dll-while-seems-fine-in-another/39005612#39005612", "title": "EntryPointNotFoundException in one DLL while seems fine in another", "body": "<p><a href=\"http://www.dependencywalker.com/\" rel=\"nofollow\">Dependency Walker</a> shows no exported functions, but exported functions in header file looks good. Seems the <code>h</code> file is not included into the <code>cpp</code> file. To check this put <code>__declspec(dllexport)</code> inside cpp in function definition.</p>\n"}], "owner": {"reputation": 3, "user_id": 6727971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b57f880efd783f3136e3bd5f67ecd79?s=128&d=identicon&r=PG&f=1", "display_name": "mBajema", "link": "https://stackoverflow.com/users/6727971/mbajema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 39005612, "answer_count": 1, "score": 0, "last_activity_date": 1471472755, "creation_date": 1471464257, "question_id": 39005340, "link": "https://stackoverflow.com/questions/39005340/entrypointnotfoundexception-in-one-dll-while-seems-fine-in-another", "title": "EntryPointNotFoundException in one DLL while seems fine in another", "body": "<p>I have two DLLs that I created and they reside in Assets/Plugins. One seems to be working fine, the other gives me an EntryPointNotFoundException even though the code look exactly the same to me. Maybe there's some setting I missed in VisualStudio? What settings do I need?</p>\n\n<p>The one that works looks like this:</p>\n\n<p>C#</p>\n\n<pre><code>[DllImport(\"winBlinkDetect\")]\n     private static extern void IsSeven(ref int x);\n\n [DllImport(\"winBlinkDetect\")]\n     private static extern int PrintFive();\n\n void Start()\n     {\n         int test = 0;\n         Debug.Log(\"x = \" + test);\n         IsFive(ref test);\n         Debug.Log(\"x = \" + test);\n         Debug.Log(PrintFive());\n     }\n</code></pre>\n\n<p>C++ Header</p>\n\n<pre><code> #if _MSC_VER // this is defined when compiling with Visual Studio\n #define EXPORT_API __declspec(dllexport) // Visual Studio needs annotating exported functions with this\n #define _USE_MATH_DEFINES\n #else\n #define EXPORT_API // XCode does not need annotating exported functions, so define is empty\n #endif\n\n #ifdef __cplusplus\n extern \"C\" {\n #endif\n\n     void EXPORT_API IsFive(int *y);\n     void EXPORT_API IsSeven(int *x);\n     int EXPORT_API PrintFive();\n\n\n #ifdef __cplusplus\n }\n #endif\nC++ .cpp\n\n void IsFive(int *y)\n {\n     *y = 5;\n }\n\n void IsSeven(int *x)\n {\n     *x = 7;\n }\n\n int PrintFive()\n {\n     return 99;\n }\n</code></pre>\n\n<p>For the one that doesn't work: \nC#</p>\n\n<pre><code>[DllImport(\"brain\")]\n     private static extern int GiveNinetyNine();\n\n     [DllImport(\"brain\")]\n     private static extern void IsFive(ref int x);\n\n void Start()\n     {\n         int test = 0;\n         Debug.Log(\"x = \" + test);\n         IsFive(ref test);\n         Debug.Log(\"x = \" + test);\n         Debug.Log(GiveNinetyNine());\n     }\n</code></pre>\n\n<p>C ++ Header</p>\n\n<pre><code>#if _MSC_VER // this is defined when compiling with Visual Studio\n #define EXPORT_API __declspec(dllexport) // Visual Studio needs annotating exported functions with this\n #define _USE_MATH_DEFINES\n #else\n #define EXPORT_API // XCode does not need annotating exported functions, so define is empty\n #endif\n\n #include &lt;string&gt;;\n\n #ifdef __cplusplus\n extern \"C\" {\n #endif\n\n     // test functions\n     void EXPORT_API IsFive(int *y);\n     void EXPORT_API IsSeven(int *x);\n     int EXPORT_API GiveNinetyNine();\n #ifdef __cplusplus\n }\n #endif\nC++ .cpp\n\n void IsFive(int *y)\n {\n     *y = 5;\n }\n\n void IsSeven(int *x)\n {\n     *x = 7;\n }\n\n int GiveNinetyNine()\n {\n     return 99;\n }\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "optimization", "floating-point"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 4, "creation_date": 1471463224, "post_id": 39005074, "comment_id": 65361767, "body": "It makes use of undefined behavior? Do have some more details?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1471463225, "post_id": 39005074, "comment_id": 65361770, "body": "If <code>-fno-fast-math</code> doesn&#39;t make the problem go away, post an example of the code that is affected, please.  (I don&#39;t <i>think</i> <code>-O3</code> turns on <code>-ffast-math</code>, but I could be wrong.  <code>-ffast-math</code> is a euphemism; it enables a broad spectrum of <i>incorrect</i> optimizations on floating-point code.)"}, {"owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1471463340, "post_id": 39005074, "comment_id": 65361833, "body": "@zwol but that doesn&#39;t abide by IEEE-754 right?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1471463399, "post_id": 39005074, "comment_id": 65361861, "body": "Also, if you are using a 32-bit x86 for your code, try <code>-mfpmath=sse</code>.  (This is the default for x86-64.)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1471463453, "post_id": 39005074, "comment_id": 65361891, "body": "Right, and it also does stuff that&#39;s valid for mathematical real numbers but incorrect for floating-point in general (not just incorrect per the letter of IEEE 754).  Which is why I&#39;m telling you to make sure it&#39;s turned off."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 8, "creation_date": 1471463540, "post_id": 39005074, "comment_id": 65361941, "body": "Post your code. <code>-O3</code> does <b>not</b> include unsafe math optimizations. <code>-Ofast</code> does."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1471465376, "post_id": 39005074, "comment_id": 65362920, "body": "If you have specific requirements, write code using tools that are guaranteed to meet them."}], "answers": [{"tags": [], "owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "is_accepted": true, "score": 2, "last_activity_date": 1471465778, "last_edit_date": 1592644375, "creation_date": 1471464265, "answer_id": 39005344, "question_id": 39005074, "link": "https://stackoverflow.com/questions/39005074/wildly-different-behaviour-between-o2-and-o3-optimized-fp-code/39005344#39005344", "title": "wildly different behaviour between O2 and O3 optimized FP code", "body": "<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow noreferrer\">GCC manual</a>:</p>\n<blockquote>\n<p>-O3</p>\n<p>Optimize yet more. -O3 turns on all optimizations specified by -O2 and also turns on the -finline-functions, -funswitch-loops, -fpredictive-commoning, -fgcse-after-reload, -ftree-vectorize, -fvect-cost-model, -ftree-partial-pre and -fipa-cp-clone options.</p>\n</blockquote>\n<p>No of these optimizations are particularly unsafe. The only optimization that I see can change the result is <code>-ftree-vectorize</code>. In some cases, using vector instructions can change the result compared to FPU instructions. For example, FPU by default uses 80-bit internal precision for doubles, while vector SIMD instructions use 64 bits. Also the implementation of some math functions (like <code>sqrt</code>) may be different.</p>\n<p>You would get much better chance of getting help, if you posted your code, exact compiler flags and information about your hardware (which SIMD instructions does your CPU have).</p>\n<p>You can also directly compare assembly code generated in these two cases.</p>\n<p>PS. But in my experience, the most likely cause is undefined behavior in the program. Typically, uninitialized variable, division by zero, etc. Make sure you compile with high warnings level (<code>-Wall -Wextra -Wpedantic</code>), and use UB Sanitizer.</p>\n"}], "owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "closed_date": 1471468271, "accepted_answer_id": 39005344, "answer_count": 1, "score": -5, "last_activity_date": 1471465900, "creation_date": 1471463162, "last_edit_date": 1495535630, "question_id": 39005074, "link": "https://stackoverflow.com/questions/39005074/wildly-different-behaviour-between-o2-and-o3-optimized-fp-code", "closed_reason": "Not suitable for this site", "title": "wildly different behaviour between O2 and O3 optimized FP code", "body": "<p>I am working on some floating-point numerical code, what makes me frustrated is the fact that the behaviour of O3 optimized(GCC 4.8.3)code generates very different result from the O2 case(stable one), and it ends up with numerical disaster as expected.</p>\n\n<p>I looked at <a href=\"https://stackoverflow.com/questions/7517588/different-floating-point-result-with-optimization-enabled-compiler-bug\">this thread</a> which may be relevant, but the answer there does't  fix my problem. I know that what O3 does in addition to O2 is mainly about inlining and loop unrolling. And I am quite sure the reason is due to the floating-point calculation part, because after I explicitly use O2 optimization for that part the results looks fine. </p>\n\n<pre><code>#pragma GCC push_options\n#pragma GCC optimize (\"O2\")\n\nFP computation code (double precision)\n\n#pragma GCC pop_options \n</code></pre>\n\n<p>So my question is, what kind of optimizations O3 does could really make a huge difference for floating-point calculation specifically?</p>\n"}, {"tags": ["c++", "while-loop", "cin"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471463144, "post_id": 39005039, "comment_id": 65361718, "body": "If you want it to prompt for output you have to code it.  Otherwise it just expects you to start entering in data."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1471463214, "post_id": 39005039, "comment_id": 65361759, "body": "What did you type for input?"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1471463332, "post_id": 39005039, "comment_id": 65361831, "body": "works for me on <a href=\"http://ideone.com/LG9a9S\" rel=\"nofollow noreferrer\">ideone</a>"}, {"owner": {"reputation": 1913, "user_id": 1970843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aadb1e11f1d872253f24685b101d335?s=128&d=identicon&r=PG", "display_name": "GabrielF", "link": "https://stackoverflow.com/users/1970843/gabrielf"}, "edited": false, "score": 0, "creation_date": 1471464742, "post_id": 39005039, "comment_id": 65362573, "body": "what compiler are you using?"}, {"owner": {"reputation": 21, "user_id": 6693093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c732317a28a94fa97f484614c044fefe?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Darsh", "link": "https://stackoverflow.com/users/6693093/stan-darsh"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1471479930, "post_id": 39005039, "comment_id": 65368028, "body": "I didn&#39;t type in an input as the program never gave me an opportunity to enter any. @PeteBecker.                                I&#39;m compiling via the Terminal. GabrielF"}, {"owner": {"reputation": 1913, "user_id": 1970843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aadb1e11f1d872253f24685b101d335?s=128&d=identicon&r=PG", "display_name": "GabrielF", "link": "https://stackoverflow.com/users/1970843/gabrielf"}, "edited": false, "score": 0, "creation_date": 1471523868, "post_id": 39005039, "comment_id": 65387224, "body": "@StanDarsh check the compiler version with <code>g++ --version</code>. Also, please add commandline you are using to compile and any messages being given in either compiling or running."}, {"owner": {"reputation": 1913, "user_id": 1970843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aadb1e11f1d872253f24685b101d335?s=128&d=identicon&r=PG", "display_name": "GabrielF", "link": "https://stackoverflow.com/users/1970843/gabrielf"}, "edited": false, "score": 0, "creation_date": 1471523965, "post_id": 39005039, "comment_id": 65387286, "body": "Maybe adding some debugging too. If you add a <code>std::cout &lt;&lt; &quot;teste&quot; &lt;&lt; std::endl</code> as the very first line of your main, will it print it?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6693093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c732317a28a94fa97f484614c044fefe?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Darsh", "link": "https://stackoverflow.com/users/6693093/stan-darsh"}, "edited": false, "score": 0, "creation_date": 1471484077, "post_id": 39006335, "comment_id": 65368998, "body": "I&#39;m sure I&#39;m making an error but I don&#39;t understand what it is. I&#39;m not getting the opportunity to enter numbers at all. I&#39;m compiling via g++ in macs terminal and then running it using ./"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 21, "user_id": 6693093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c732317a28a94fa97f484614c044fefe?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Darsh", "link": "https://stackoverflow.com/users/6693093/stan-darsh"}, "edited": false, "score": 0, "creation_date": 1471530176, "post_id": 39006335, "comment_id": 65391813, "body": "@StanDarsh Add example terminal session (copy-paste preferred over screen shot, unless you think the screen shot shows something copypasted text would not). You could also add debug prints to the code (use cerr, not cout), and check the various status methods offered by cin to see just why it fails."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 1, "last_activity_date": 1471468209, "creation_date": 1471468209, "answer_id": 39006335, "question_id": 39005039, "link": "https://stackoverflow.com/questions/39005039/cin-is-being-ignored-in-while-and-for-loops/39006335#39006335", "title": "Cin is being ignored in while and for loops", "body": "<p>The program works, it just works differently than what you expect!</p>\n\n<p>It expects you to keep entering numbers separted by whitespace, then giving end-of-file (ctrl-Z on Windows, ctrl-d on Unix on empty line) or other invalid input, so that <code>cin</code> goes to fail state.</p>\n\n<p>And when <code>cin</code> goes to fail state, then it gives false to <code>for</code> loop (due to implicit cast to bool using an overloaded bool cast operator), which ends. Then your program prints them sum. If you didn't manage to enter any numbers, then it prints 0, as that is what <code>sum</code> was initialized to.</p>\n"}], "owner": {"reputation": 21, "user_id": 6693093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c732317a28a94fa97f484614c044fefe?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Darsh", "link": "https://stackoverflow.com/users/6693093/stan-darsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1471468209, "creation_date": 1471463046, "last_edit_date": 1471464187, "question_id": 39005039, "link": "https://stackoverflow.com/questions/39005039/cin-is-being-ignored-in-while-and-for-loops", "title": "Cin is being ignored in while and for loops", "body": "<p>Alright well I'm a newbie with C++ so I'm doing some exercises in Lippman's <em>C++ Primer 5th Edition</em> and the function never even prompts the user for an input. I'm very frustrated as none of my produced code worked and neither does this from an answer key. This only produces \"0\" when compiled and ran. Any help is appreciated. Compiled on a x64 Mac. </p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n    int sum = 0;\n    for (int val; std::cin &gt;&gt; val; sum += val);\n    std::cout &lt;&lt; sum &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "googletest", "googlemock", "gmock"], "answers": [{"tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 2, "last_activity_date": 1471864907, "creation_date": 1471864907, "answer_id": 39078241, "question_id": 39004952, "link": "https://stackoverflow.com/questions/39004952/gmock-gtest-how-to-setup-the-mock/39078241#39078241", "title": "gmock gtest how to setup the mock", "body": "<p>Simple solution is to have all mocked nodes predefined before test case. And use <code>Sequence</code>/<code>InSequence</code>  to be sure that everything happens in proper order.</p>\n\n<pre><code>class ObjTest : public ::testing::Test\n{\nprotected:\n   const std::size_t N = ...; // I do not know how many do you need\n   std::vector&lt;MockedNode&gt; mockedNode;\n   std::vector&lt;Node*&gt; children; \n   Sequence s;\n   .... Obj; // I am not sure what is Obj in your question\n   ObjTest () : mockedNode(N)\n   {}\n   void SetUp() override\n   {\n       // initial setup\n       EXPECT_CALL(Obj, GetNode()).WillOnce(Return(&amp;mockedNode.front())).InSequence(s);\n   }\n};\n</code></pre>\n\n<p>Having such test class with initial setup - you can create test cases testing various scenarios that happen after initial sequence:</p>\n\n<pre><code>TEST_F(ObjTest, shouldLinkOneNodeToItself)\n{\n    std::vector&lt;Node*&gt; children { &amp;mockedNode[0] };\n    EXPECT_CALL(mockedNode[0], SetNext(&amp;mockedNode[0])).InSequence(s);\n    EXPECT_CALL(mockedNode[0], SetPrevious(&amp;mockedNode[0])).InSequence(s);\n    Obj.testedFunction(children); // you have not provided your tested function name...\n}\n</code></pre>\n\n<p>And very similar test case for two children:</p>\n\n<pre><code>TEST_F(ObjTest, shouldLinkTwoNodesToEachOther)\n{\n    std::vector&lt;Node*&gt; children { &amp;mockedNode[0], &amp;&amp;mockedNode[1] };\n    // first interation\n    EXPECT_CALL(mockedNode[0], SetNext(&amp;mockedNode[0])).InSequence(s);\n    EXPECT_CALL(mockedNode[0], SetPrevious(&amp;mockedNode[0])).InSequence(s);\n    // second iteration\n    EXPECT_CALL(mockedNode[0], GetNext()).WillOnce(Return(&amp;mockedNode[0])).InSequence(s);\n    EXPECT_CALL(mockedNode[1], SetNext(&amp;mockedNode[0])).InSequence(s);\n    EXPECT_CALL(mockedNode[1], SetPrevious(&amp;mockedNode[0])).InSequence(s);\n    // etc...\n\n    Obj.testedFunction(children);\n}\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 2039094, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bddf49261fab0a3b9926225dfad90856?s=128&d=identicon&r=PG", "display_name": "Gilson PJ", "link": "https://stackoverflow.com/users/2039094/gilson-pj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 39078241, "answer_count": 1, "score": 3, "last_activity_date": 1472198162, "creation_date": 1471462711, "last_edit_date": 1472198162, "question_id": 39004952, "link": "https://stackoverflow.com/questions/39004952/gmock-gtest-how-to-setup-the-mock", "title": "gmock gtest how to setup the mock", "body": "<p>Please consider the below code sample</p>\n\n<pre><code>NodeInterface * pPreNode = NULL;\nNodeInterface * pChild = NULL;\n\nfor (uint16_t Index = 0; Index &lt; Children.size(); ++Index)\n{\n    pChild = Children[Index];\n    if (pPreNode == NULL)\n    {\n        pChild-&gt;SetPrevious(pChild);\n        pChild-&gt;SetNext(pChild);\n    }\n    else\n    {\n        pChild-&gt;SetNext(pPreNode-&gt;GetNext());\n        pChild-&gt;SetPrevious(pPreNode);\n        pPreNode-&gt;GetNext()-&gt;SetPrevious(pChild);\n        pPreNode-&gt;SetNext(pChild);\n    }\n    pPreNode = pChild;\n}\n</code></pre>\n\n<p>To test this lines how to setup the mock exactly?\n<code>Children</code> is a <code>vector</code> of Nodes and we are passing Mocked objects.</p>\n\n<pre><code>EXPECT_CALL(Obj, GetNode()).WillOnce(Invoke(this, &amp;GetANewNode));\n</code></pre>\n\n<p>and the GetANewNode will provide new MockedNode</p>\n\n<pre><code>MockedNode * GetANewNode()\n{\n    MockedNode * pMockedNode = new MockedNode();\n    return pMockedNode;\n}\n</code></pre>\n\n<p>How to provide exact nodes for each <code>Next()</code>, <code>Previous()</code> calls?</p>\n\n<pre><code>EXPECT_CALL(*pMockedNode, SetNext(_));\nEXPECT_CALL(*pMockedNode, SetPrevious(_));\nEXPECT_CALL(*pMockedNode, GetNext());\nEXPECT_CALL(*pMockedNode, GetPrevious());\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": false, "score": 1, "last_activity_date": 1471465430, "creation_date": 1471465430, "answer_id": 39005647, "question_id": 39004923, "link": "https://stackoverflow.com/questions/39004923/static-pointer-cast-through-inheritance-and-template/39005647#39005647", "title": "static_pointer_cast through inheritance and template", "body": "<p>In C++, there is no covariance or contravariance, there is no relationship between <code>T&lt;Base&gt;</code> and <code>T&lt;Sub&gt;</code>, even if there is one between <code>Base</code> and <code>Sub</code>.</p>\n\n<p>You either need to build a common ancestor of different <code>EventSubscriptionManager</code> instances (e.g: <code>EventSubscriptionManagerBase</code>), and use that, or provide a converting constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 38, "user_id": 6723347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iZf6Hscm7C4/AAAAAAAAAAI/AAAAAAAAAz4/Zwt5cogC9Bo/photo.jpg?sz=128", "display_name": "mstehula", "link": "https://stackoverflow.com/users/6723347/mstehula"}, "edited": false, "score": 0, "creation_date": 1471490520, "post_id": 39005670, "comment_id": 65370594, "body": "Thank you for helping me understand. Between yours and erenon&#39;s answer, I gathered that instead of using BaseEvent inside the Subscription Manager template I should create a BaseEventSubscriptionManager to go inside the std::unordered_map template."}, {"owner": {"reputation": 38, "user_id": 6723347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iZf6Hscm7C4/AAAAAAAAAAI/AAAAAAAAAz4/Zwt5cogC9Bo/photo.jpg?sz=128", "display_name": "mstehula", "link": "https://stackoverflow.com/users/6723347/mstehula"}, "edited": false, "score": 0, "creation_date": 1471492273, "post_id": 39005670, "comment_id": 65371031, "body": "I took the link you provided and edited it to show my new direction, simply so I can save it for later. <a href=\"http://coliru.stacked-crooked.com/a/729d9edd5a4d331a\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": true, "score": 1, "last_activity_date": 1471465523, "creation_date": 1471465523, "answer_id": 39005670, "question_id": 39004923, "link": "https://stackoverflow.com/questions/39004923/static-pointer-cast-through-inheritance-and-template/39005670#39005670", "title": "static_pointer_cast through inheritance and template", "body": "<p>I can tell you why it does not compile. This is because</p>\n\n<pre><code>EventSubscriptionManager&lt;E&gt;\n</code></pre>\n\n<p>is unrelated to</p>\n\n<pre><code>EventSubscriptionManager&lt;BaseEvent&gt;\n</code></pre>\n\n<p>So, according to  <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/pointer_cast\" rel=\"nofollow\">point 1.)</a> on the reference page, </p>\n\n<pre><code>static_cast&lt;EventSubscriptionManager&lt;E&gt;*&gt;((EventSubscriptionManager&lt;BaseEvent&gt;*)nullptr)\n</code></pre>\n\n<p>is ill-formed.</p>\n\n<p>However, without knowing the background I can't tell what to do as a workaround.\nJust: you have to relate the two classes, or choose a completely new design.</p>\n\n<hr>\n\n<hr>\n\n<p>In order to do so, <a href=\"http://coliru.stacked-crooked.com/a/002c87debc2fa835\" rel=\"nofollow\">here</a> is a minimal example why it fails which might be helpful:</p>\n\n<pre><code>struct Base {};\nstruct Derived : Base {};\n\ntemplate&lt;typename T&gt;\nstruct Foo {};\n\nint main()\n{\n   static_cast&lt;Foo&lt;Derived&gt;*&gt;((Foo&lt;Base&gt;*)nullptr);\n}\n</code></pre>\n\n<p>You can try to improve on that.</p>\n"}], "owner": {"reputation": 38, "user_id": 6723347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iZf6Hscm7C4/AAAAAAAAAAI/AAAAAAAAAz4/Zwt5cogC9Bo/photo.jpg?sz=128", "display_name": "mstehula", "link": "https://stackoverflow.com/users/6723347/mstehula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 39005670, "answer_count": 2, "score": 0, "last_activity_date": 1471465523, "creation_date": 1471462604, "question_id": 39004923, "link": "https://stackoverflow.com/questions/39004923/static-pointer-cast-through-inheritance-and-template", "title": "static_pointer_cast through inheritance and template", "body": "<p>I am having trouble finding a fix for the following error, thrown when compiling a <code>std::static_pointer_cast&lt;&gt;()</code>:</p>\n\n<pre><code>error: invalid static_cast from type ecse::EventSubscriptionManager&lt;ecse::BaseEvent&gt;* to type ecse::EventSubscriptionManager&lt;TestEvent&gt;*\n</code></pre>\n\n<p>I have the following hierarchy. In the end they will be filled with POD type members and will most likely become structs.</p>\n\n<pre><code>class BaseEvent {};\n\ntemplate &lt;class E&gt;\nclass Event : public BaseEvent, public Type&lt;E&gt; {};\n\nclass TestEvent : public Event&lt;TestEvent&gt; {};\n</code></pre>\n\n<p>I am currently working on the Subscribe function part of the EventManager, however when compiling I am receiving the error posted above. Note: <code>E::ID()</code> is defined in the class as Type and is used for identifying the class type.</p>\n\n<pre><code>template &lt;class E&gt;\nclass EventSubscriptionManager\n{\npublic:\n  void Subscribe(std::function&lt;void(E)&gt;  fptr);\nprivate:\n  std::function&lt;void(E)&gt; event_function_;\n};\n\nclass EventManager\n{\npublic:\n  template &lt;class E&gt;\n  void Subscribe(std::function&lt;void(E)&gt; fptr)\n  {\n     std::shared_ptr&lt;EventSubscriptionManager&lt;E&gt;&gt; sub_manager_ptr;\n     auto sub_manager_iterator = sub_managers_.find(E::ID());\n     if(sub_manager_iterator == sub_managers_.end())\n     {\n       sub_manager_ptr = std::make_shared&lt;EventSubscriptionManager&lt;E&gt;&gt;();\n     }\n     else\n     {\n       sub_manager_ptr = std::static_pointer_cast&lt;EventSubscriptionManager&lt;E&gt;&gt;(sub_manager_iterator-&gt;second);\n     }\n     // Continue function...\n  }\nprivate:\n  std::unordered_map&lt;std::size_t, std::shared_ptr&lt;EventSubscriptionManager&lt;BaseEvent&gt;&gt;&gt; sub_managers_;\n}\n</code></pre>\n\n<p>I believe that the issue is that between the <code>TestEvent</code> and the <code>BaseEvent</code> there is the <code>Event&lt;E&gt;</code> class with the template, with <code>TestEvent</code> inheriting <code>Event&lt;TestEvent&gt;</code> instead of <code>BaseEvent</code>. Is this true? If so, how can I set up my hierarchy to allow for this type of casting? </p>\n\n<p>If that is not the case, what is the issue with the above static cast?</p>\n"}, {"tags": ["c++", "c++11", "auto", "stdtuple"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1471462190, "post_id": 39004743, "comment_id": 65361209, "body": "Does this compile?  It shouldn&#39;t."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1471462303, "post_id": 39004743, "comment_id": 65361271, "body": "Why do you need <code>decltype(auto)</code> here? If your compiler supports return type deduction for functions, then getting rid of the trailing return type in the example above should work."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1471462347, "post_id": 39004743, "comment_id": 65361299, "body": "So it&#39;s quicker to ask a question here than create a simple testcase and try compiling that?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1471462361, "post_id": 39004743, "comment_id": 65361304, "body": "@FallingFromBed You can always create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and compile that to test things.  That would have told you it would not compile."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1471462529, "post_id": 39004743, "comment_id": 65361396, "body": "@FallingFromBed what cpu do you have? Compiling this on my computer takes a fraction of a second. Hardly unbearable."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471462696, "post_id": 39004743, "comment_id": 65361493, "body": "&quot;I am now on GCC that doesn&#39;t support <code>decltpe(auto)</code> [sic] as a return type&quot; False. It does. Did you downgrade to some ancient version? Anyway, that&#39;s not why this code can&#39;t compile, as simple testing would&#39;ve shown. One need not ask &quot;scholars&quot; to predict what a 4-line program will do."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1471468329, "post_id": 39004743, "comment_id": 65364339, "body": "Best practice is to make an effort on your own before demanding help. If it&#39;s not previously answered, do a self-answering Q&amp;A afterwards."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1471462511, "post_id": 39004830, "comment_id": 65361383, "body": "<code>std::funciton</code> adds indirection where none is originally required. I do not like this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1471462845, "post_id": 39004830, "comment_id": 65361576, "body": "@SergeyA You cannot return a type that you don&#39;t know.  I can&#39;t see a better way without putting the type outside the function."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1471462882, "post_id": 39004830, "comment_id": 65361603, "body": "same remark as from @SergeyA. If there are no variables captured, I&#39;d use a function pointer instead of std::function (--no indirection through type erasure)... or better avoid the problem and define <code>p</code> outside of the function."}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "reply_to_user": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1471463355, "post_id": 39004830, "comment_id": 65361841, "body": "@davidhigh: A function pointer is just as bad as <code>std::function</code> (no inlining possible). If performance is really that critical, the callable type should be defined outside the function."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471463377, "post_id": 39004830, "comment_id": 65361853, "body": "@NathanOliver, neitheir do I - or I&#39;d provide one in the answer. I still can dislike this one, can&#39;t i?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1471463480, "post_id": 39004830, "comment_id": 65361906, "body": "@SergeyA Sure you can.  I think I overreacted and interpreted disliked as down vote which is not the case.  I&#39;ll go back to pondering a solution."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1471463720, "post_id": 39004830, "comment_id": 65362049, "body": "@erenon: I meant I&#39;d use it if I really need it hard and dirty :-). In this case, see <a href=\"http://stackoverflow.com/questions/5057382/what-is-the-performance-overhead-of-stdfunction\">here</a> and <a href=\"http://stackoverflow.com/questions/14306497/performance-of-stdfunction-compared-to-raw-function-pointer-and-void-this\">here</a>, for example, for some not too definite answers"}], "tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": true, "score": 5, "last_activity_date": 1471462242, "last_edit_date": 1495535319, "creation_date": 1471462242, "answer_id": 39004830, "question_id": 39004743, "link": "https://stackoverflow.com/questions/39004743/does-stdtuple-accept-auto-as-a-type/39004830#39004830", "title": "Does std::tuple accept auto as a type", "body": "<p>No, since <code>p</code> is not available at that scope, and a lambda expression shall not appear in unevaluated context (which is decltype). (See more <a href=\"https://stackoverflow.com/questions/22232164/why-are-lambda-expressions-not-allowed-in-an-unevaluated-operands-but-allowed-in\">here</a>)</p>\n\n<p>You can, however, wrap it in an <code>std::function</code>:</p>\n\n<pre><code>std::tuple&lt;int, std::function&lt;void(some)&gt;&gt; myfun()\n{\n  std::function&lt;void(some)&gt; p = [](some){};\n  return std::forward_as_tuple(100, p);\n}\n</code></pre>\n"}], "owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 39004830, "answer_count": 1, "score": -3, "last_activity_date": 1471462461, "creation_date": 1471461951, "question_id": 39004743, "link": "https://stackoverflow.com/questions/39004743/does-stdtuple-accept-auto-as-a-type", "title": "Does std::tuple accept auto as a type", "body": "<p>I have to return an int and a function object to the caller, I was thought of returning a tuple like <code>make_tuple(int,[](some){})</code> I am now on GCC that doesn't support <code>decltpe(auto)</code> as a return type, is ther any way i could make my return type as <code>std::tuple&lt;int,auto&gt; myfun()</code> right now I've been doing like below(but not sure)</p>\n\n<pre><code>auto myfun()-&gt;decltype(make_tuple(100,p))\n{\n   auto p=[](some){};\n   return make_tuple(100,p);\n}\n</code></pre>\n\n<p>what I am doing is ok?</p>\n"}, {"tags": ["c++", "winsock2"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471461768, "post_id": 39004554, "comment_id": 65361026, "body": "Are those functions thread safe? I couldn&#39;t convince myself that they are from quickly scanning the documentation.."}, {"owner": {"reputation": 131, "user_id": 1693492, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50b2948caf629f4094b1ada2995173ac?s=128&d=identicon&r=PG", "display_name": "angelhalo", "link": "https://stackoverflow.com/users/1693492/angelhalo"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471466921, "post_id": 39004554, "comment_id": 65363679, "body": "which functions are you refering to ?   iirc, using closesocket() to unblock a blocking call from recvfrom() was an idea i saw from  <a href=\"http://stackoverflow.com/questions/8049677/stopping-a-receiver-thread-that-blocks-on-recv\" title=\"stopping a receiver thread that blocks on recv\">stackoverflow.com/questions/8049677/&hellip;</a>  with my implementation, at any point of time, there is only one worker thread using this socket.   the only exception is calling the closesocket() from the main thread."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471467054, "post_id": 39004554, "comment_id": 65363756, "body": "<code>recvfrom</code> and <code>closesocket</code>."}, {"owner": {"reputation": 131, "user_id": 1693492, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50b2948caf629f4094b1ada2995173ac?s=128&d=identicon&r=PG", "display_name": "angelhalo", "link": "https://stackoverflow.com/users/1693492/angelhalo"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1471467688, "post_id": 39004554, "comment_id": 65364047, "body": "as far as i know, winsock2 is thread safe and detaching a thread to listen for data seems legit, with reference to :  <a href=\"http://stackoverflow.com/questions/13983398/is-winsock2-thread-safe\" title=\"is winsock2 thread safe\">stackoverflow.com/questions/13983398/is-winsock2-thread-safe</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1471483990, "post_id": 39004554, "comment_id": 65368974, "body": "Reading in a separate thread is perfectly fine. However, if <code>closesocket()</code> is not aborting a blocked <code>recvfrom()</code> (it should, at least on Windows), you could try re-writing the code to not rely on that behavior.  Use <code>WSASocket()</code> with the <code>WSA_FLAG_OVERLAPPED</code> flag to create the socket, then use <code>WSARecvFrom()</code> instead of <code>recvfrom()</code> so you can associate the read with a <code>WSAOVERLAPPED</code> struct or an I/O Completion Port.  You can then abort the read using <code>CancelIo&#47;Ex()</code> before closing the socket."}], "owner": {"reputation": 131, "user_id": 1693492, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50b2948caf629f4094b1ada2995173ac?s=128&d=identicon&r=PG", "display_name": "angelhalo", "link": "https://stackoverflow.com/users/1693492/angelhalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471461500, "creation_date": 1471461276, "last_edit_date": 1471461500, "question_id": 39004554, "link": "https://stackoverflow.com/questions/39004554/winsock2-trying-to-interrupt-recvfrom-in-worker-thread-by-calling-closesocket", "title": "winsock2 trying to interrupt recvfrom() in worker thread by calling closesocket(..) from main", "body": "<p>I have a UDP multicast receiver that will start an <code>std::thread</code> then <code>detach()</code> it to handle the receiving of messages, and it should be able to interrupt the blocking call when called upon. </p>\n\n<pre><code> void startThread()\n{\n    if(flagIsNotset)\n    {\n        //set flag\n        std::thread t(&amp;receiveData, this, socketDetails);\n        t.detach();\n    }\n}\n\n\n    void receiveData(socketDetails)\n    {\n       //initilaise socket\n       //bind socket to interface\n       //binds multicast address &amp; port to interface\n\n       while(true) \n       {\n           //recvfrom(...)\n\n           //handle received data\n        }\n\n       //prints a message to know that the thread has exited the while loop\n       //unset flag\n    }\n\n    void interrupt()\n    {\n         //unset flag is shifted here after realizing it did not reach the end of receiveData() when closesocket was called for the first time.\n         closesocket(s);\n    }\n</code></pre>\n\n<p>everything was fine, I can receive UDP messages etc. but when interrupt is first called: it does not reach the message printing part &amp; setting flag portion. when I shift the //set flag codes to <code>interrupt()</code>, I can confirm that for the first time (of calling <code>interrupt()</code> then <code>startThread()</code>), the message is not printed but on subsequent calls, it reached the end of the receiveData function as intended.</p>\n\n<p>My question are as follows :</p>\n\n<p>1) What happened to the first thread that was detached? is it stuck in <code>recvfrom</code> forever and was not interrupted by <code>closesocket()</code> ? </p>\n\n<p>2) Will this cause memory leaking ? that is my primary concern...as I am unable to figure out the state of the first thread that was detached, will setting the thread t as a private member and calling the <code>t::~thread()</code> in <code>interrupt()</code> helps to ensure that the thread is terminated when interrupt is called?</p>\n\n<p>3) Repeating <code>startThread()</code> and <code>interrupt()</code> does not seems to create a duplicate thread that is listening from the same socket. (i.e always receive one copy of the multicast message)</p>\n\n<p>4) If there is any suggestions to improve this code, please feel free to comment.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1471460898, "post_id": 39004429, "comment_id": 65360604, "body": "Dynamic allocation can only guarantee alignment for fundamental types - but not custom/over-alignments - until C++17: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3396.htm\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3396.htm</a> Perhaps your compiler/library of choice (which is?) has a non-portable option to enforce this, though."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471460915, "post_id": 39004429, "comment_id": 65360612, "body": "&quot;Would I be correct in saying... the alignment guarantees are lost?&quot; No. The alignment guarantees are not lost. That&#39;s why you get the error message.  Deriving from RTCRay8 won&#39;t help, and neither will manually adding padding."}, {"owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471461655, "post_id": 39004429, "comment_id": 65360951, "body": "@MooingDuck I forgot to say that this was a warning, not an error, I just added it to the title."}, {"owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1471462133, "post_id": 39004429, "comment_id": 65361181, "body": "@underscore_d My question is specifically about what to do if you dynamically allocate a class which contains an aligned type and you get this particular warning; the proposed duplicate does not answer this. Also, my question puts the problem into context and if answered provides a solution."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1471463879, "post_id": 39004429, "comment_id": 65362134, "body": "@user2345397: Hint: <code>RTCRay8</code> is &quot;overaligned&quot; because it has an alignment bigger than <code>std::max_align_t</code>, which isn&#39;t supported by your compiler. A class that contains this aligned type is itself <i>also</i> aligned to the same number, and is thus <i>also</i> overaligned.   And the other question is about alignment in dynamic memory, which is what you&#39;re asking.  And the top answer there says &quot;As for allocating memory with an alignment greater than <code>alignof(std::max_align_t)</code>&quot;... and proceeds to answer your question.  This is indeed a duplicate."}, {"owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "edited": false, "score": 0, "creation_date": 1471467945, "post_id": 39004429, "comment_id": 65364166, "body": "That makes sense, I didn&#39;t consider that it might be an incompatibility between Embree and my compiler. Thanks for the explanation. I still personally think there is value in questions that put the problem into context, but if SO policy disagrees, I can respect that."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1498977337, "post_id": 39004429, "comment_id": 76715315, "body": "I think this question is not a duplicate because it is MSVC++ specific, while <a href=\"https://stackoverflow.com/questions/6973995/dynamic-aligned-memory-allocation-in-c11\" title=\"dynamic aligned memory allocation in c11\">stackoverflow.com/questions/6973995/&hellip;</a> is generic. It would be nice if the current question is once answered with &quot;supported in MSVC++20XX&quot;, while such an answer seems less appropriate for that other question."}], "owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "closed_date": 1471461681, "answer_count": 0, "score": 0, "last_activity_date": 1471461483, "creation_date": 1471460748, "last_edit_date": 1471461483, "question_id": 39004429, "link": "https://stackoverflow.com/questions/39004429/warning-object-allocated-on-the-heap-may-not-be-aligned-32-but-structure-is-n", "closed_reason": "Duplicate", "title": "Warning: &quot;Object allocated on the heap may not be aligned 32&quot; but structure is not declared aligned, it just contains aligned type", "body": "<p>I'm working with a library which has aligned types, and I have a structure that contains an array of one of these types. My compiler (MSVC) is complaining with the error message in the title (citing <em>my</em> structure when I try to dynamically allocate it).</p>\n\n<p>Here's the class in question, from Embree (Raytracing software):</p>\n\n<pre><code>#  define RTCORE_ALIGN(...) __declspec(align(__VA_ARGS__))\n\n#ifndef __RTCRay8__\n#define __RTCRay8__\nstruct RTCORE_ALIGN(32) RTCRay8\n{\n  //data\n}\n</code></pre>\n\n<p>My struct looks like this:</p>\n\n<pre><code>struct ContainerThing\n{\n  RTCRay8 ray_packets[SIZE_CONSTANT];\n}\n</code></pre>\n\n<p>Would I be correct in saying that because the RTCRay8 array is inside of a dynamically allocated class, the alignment guarantees are lost? The array will therefore be potentially misaligned?</p>\n\n<p>If that's what's happening, my question is: What is the solution? It seems like I will need to derive from RTCRay8 to fix this, but will overriding new and delete for that derived type work, or will I simply need to manually align the class (add padding to the end)?</p>\n"}, {"tags": ["c++", "lapack", "lapacke"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1471461071, "post_id": 39004426, "comment_id": 65360675, "body": "I have literally no idea what you&#39;re asking. At first it seemed like a bot generated text."}, {"owner": {"reputation": 143, "user_id": 5170933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f29afa9bf1643f8893e8daaa2764aa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Boki", "link": "https://stackoverflow.com/users/5170933/boki"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 1, "creation_date": 1471465046, "post_id": 39004426, "comment_id": 65362725, "body": "Thanks for the comment, let me rephrase the question."}], "answers": [{"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": true, "score": 2, "last_activity_date": 1471467179, "creation_date": 1471467179, "answer_id": 39006080, "question_id": 39004426, "link": "https://stackoverflow.com/questions/39004426/lapacke-zheevx-failed-to-converge-how-to-increase-abstol-with-2dlamchs/39006080#39006080", "title": "LAPACKE_zheevx() failed to converge -- how to increase ABSTOL with 2*DLAMCH(&#39;S&#39;) in C++?", "body": "<p>I don\u2019t know anything about these libraries, but a bit of Googling reveals there is a corresponding <a href=\"http://www.netlib.org/lapack/explore-html/d9/d12/lapacke__dlamch_8c.html\" rel=\"nofollow\"><code>LAPACKE_dlamch()</code></a> function:</p>\n\n<pre><code>double LAPACKE_dlamch(char cmach)\n</code></pre>\n\n<p>So you should be able to just pass <code>LAPACKE_dlamch('S')</code> as the <code>abstol</code> (12th) parameter of <a href=\"http://www.netlib.org/lapack/explore-html/d7/d91/lapacke__zheevx_8c.html\" rel=\"nofollow\"><code>LAPACKE_zheevx()</code></a>:</p>\n\n<pre><code>lapack_int LAPACKE_zheevx (\n    int matrix_layout,\n    char jobz,\n    char range,\n    char uplo,\n    lapack_int n,\n    lapack_complex_double *a,\n    lapack_int lda,\n    double vl,\n    double vu,\n    lapack_int il,\n    lapack_int iu,\n    double abstol,\n//  ^^^^^^^^^^^^^\n    lapack_int *m,\n    double *w,\n    lapack_complex_double *z,\n    lapack_int ldz,\n    lapack_int *ifail\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 5170933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f29afa9bf1643f8893e8daaa2764aa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Boki", "link": "https://stackoverflow.com/users/5170933/boki"}, "edited": false, "score": 0, "creation_date": 1471542566, "post_id": 39006324, "comment_id": 65399852, "body": "Thanks a lot guys! Let me try it this week and I&#39;ll post my findings."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 2, "last_activity_date": 1471523407, "last_edit_date": 1471523407, "creation_date": 1471468170, "answer_id": 39006324, "question_id": 39004426, "link": "https://stackoverflow.com/questions/39004426/lapacke-zheevx-failed-to-converge-how-to-increase-abstol-with-2dlamchs/39006324#39006324", "title": "LAPACKE_zheevx() failed to converge -- how to increase ABSTOL with 2*DLAMCH(&#39;S&#39;) in C++?", "body": "<p>In addition to the answer of Jon Purdy (which is practically the way to go):</p>\n\n<p><a href=\"http://www.netlib.org/lapack/explore-html/d5/dd4/dlamch_8f_source.html\" rel=\"nofollow\">Here</a> is the definition of <code>dlamch.f</code> in Fortran. Going through that function, and getting the Lapack-intrinsic functions from <a href=\"https://www.nsc.liu.se/~boein/f77to90/a5.html\" rel=\"nofollow\">here</a>, one sees that for the input <code>'s'</code> the function translated to C++ becomes:</p>\n\n<pre><code>auto dlamch_s()\n{\n    auto one = 1.0;\n    auto rnd = one;\n    auto eps = (one == rnd ? 0.5 : 1.0) * std::numeric_limits&lt;double&gt;::epsilon();\n    auto sfmin = std::numeric_limits&lt;double&gt;::min();\n    auto small = one / std::numeric_limits&lt;double&gt;::max();\n    if(small&gt;=sfmin)\n    {\n        sfmin = small*(one + eps);\n    }\n    return sfmin;\n}\n</code></pre>\n\n<p>Don't ask me, however, why the <code>one == rnd</code> step is needed.</p>\n"}], "owner": {"reputation": 143, "user_id": 5170933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f29afa9bf1643f8893e8daaa2764aa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Boki", "link": "https://stackoverflow.com/users/5170933/boki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 39006080, "answer_count": 2, "score": 1, "last_activity_date": 1471523407, "creation_date": 1471460737, "last_edit_date": 1471467399, "question_id": 39004426, "link": "https://stackoverflow.com/questions/39004426/lapacke-zheevx-failed-to-converge-how-to-increase-abstol-with-2dlamchs", "title": "LAPACKE_zheevx() failed to converge -- how to increase ABSTOL with 2*DLAMCH(&#39;S&#39;) in C++?", "body": "<p>This is a question about setting proper tolerance (\"abstol\") for convergence of eigenvalue calculation with LAPACKE_zheevx() function in C++. </p>\n\n<p>When LAPACKE_zheev() fails to converge when calculating eigenvalues/eigenvectors with the default value of \"abstol\" (i.e. abstol=-1), the LAPACK manual says to set abstol=2*DLAMCH('S'). However, DLAMCH is Fortran function and I use C++ which does not recognize it as a valid C++ function. Could anyone please help me how to properly set \"abstol=2*DLAMCH('S')\" when using LAPACK with C++ (i.e. when using LAPACKE)?</p>\n\n<p>Thanks very much in advance!!</p>\n\n<p>Background:\nLAPACKE is C++ interface for LAPACK (Fortran library for numerical algebra). LAPACKE_zheevx() is LAPACKE's C++ interface for LAPACK's ZHEEVX() function.</p>\n\n<p>Keywords:\nLAPACK, LAPACKE, C++, ABSTOL, DLAMCH, CONVERGENCE, EIGENVALUES, EIGENVECTORS</p>\n"}, {"tags": ["c++", "c++11", "linker-errors", "variadic", "template-function"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 1, "creation_date": 1471460093, "post_id": 39004270, "comment_id": 65360186, "body": "Templates have static linkage, consequently their definitions must go in the header."}, {"owner": {"reputation": 121, "user_id": 1653204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7abf40ecadd138d3d2ba5450be2827?s=128&d=identicon&r=PG", "display_name": "Pulseczar", "link": "https://stackoverflow.com/users/1653204/pulseczar"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1471461485, "post_id": 39004270, "comment_id": 65360875, "body": "Thanks. I&#39;m quite new to using templates. (obviously, right?) Unfortunately, having to move it to the header file throws a huge wrench into my code, which is a lot more complicated than the stripped-down version I posted."}], "owner": {"reputation": 121, "user_id": 1653204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7abf40ecadd138d3d2ba5450be2827?s=128&d=identicon&r=PG", "display_name": "Pulseczar", "link": "https://stackoverflow.com/users/1653204/pulseczar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1471460165, "answer_count": 0, "score": 0, "last_activity_date": 1471460025, "creation_date": 1471460025, "question_id": 39004270, "link": "https://stackoverflow.com/questions/39004270/variadic-template-function-wont-link", "closed_reason": "Duplicate", "title": "Variadic template function won&#39;t link", "body": "<p>cmds.cpp has this:</p>\n\n<pre><code>namespace TestNamespace\n{\n    template&lt;typename... Args&gt;\n    void tprint(Args const&amp; ... args)\n    {\n        std::ostringstream message;\n        using List= int[];\n        (void)List{0, ((void)(message &lt;&lt; args), 0) ... };\n\n        std::cout &lt;&lt; message.str();\n    }\n}\n</code></pre>\n\n<p>cmds.h has this:</p>\n\n<pre><code>namespace TestNamespace\n{\n    template&lt;typename... Args&gt; void tprint(Args const&amp; ... args);\n}\n</code></pre>\n\n<p>main.cpp has this:</p>\n\n<pre><code>#include \"cmds.h\"\n\nusing namespace TestNamespace;\n\nvoid func()\n{\n    tprint(\"test\\n\");\n}\n</code></pre>\n\n<p>Compiler happily compiles. Linker, however, says:</p>\n\n<pre><code>main.cpp: undefined reference to `void TestNamespace::tprint&lt;char [6]&gt;(char const (&amp;) [6])'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Makefile flags:</p>\n\n<pre><code>CPPFLAGS=-std=c++11 -m32 -Wall -g -I./ -Wno-trigraphs\nLDFLAGS=-std=c++11 -m32 -L./ -lm\n</code></pre>\n\n<p>What is going on?</p>\n"}, {"tags": ["c++", "c++11", "stl", "allocator"], "comments": [{"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471460086, "post_id": 39004238, "comment_id": 65360178, "body": "The <code>operator new</code> does not allocate memory, it creates an object (and sometimes also allocate memory, but not in your case). So, I&#39;d say the second line (<code>::new(__node) _Rb_tree_node&lt;_Val&gt;;</code>) probably constructs the node in the <code>__node</code> allocated memory block"}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "reply_to_user": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471460414, "post_id": 39004238, "comment_id": 65360358, "body": "Ok, but why pass the pointer <code>__node</code> to the operator? Furthermore, if it does construct the node, what does the <code>::construct()</code> do afterwards?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471461093, "post_id": 39004238, "comment_id": 65360688, "body": "&quot;why pass the pointer&quot;? As answers explain, this is the <i>placement <code>new</code></i> syntax. And how else would it know where to <i>place</i> the <i><code>new</code></i> object?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1471461115, "post_id": 39004238, "comment_id": 65360696, "body": "@Mehlins: The <code>new</code> keyword in normal usage does two things: it allocates memory, and then it calls the <code>operator new</code> function and passes it a pointer to the memory, and this function uses the constructor to create the object at that location in memory."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461689, "post_id": 39004407, "comment_id": 65360974, "body": "Thanks. Just the final thing. Why it uses the node allocator for <code>_M_valptr()</code>, which is of another type?"}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461780, "post_id": 39004407, "comment_id": 65361031, "body": "@Mehlins what is the type of <code>_M_valptr</code>?"}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461951, "post_id": 39004407, "comment_id": 65361114, "body": "<code>Val*</code>. The code is: <code>__gnu_cxx::__aligned_membuf&lt;_Val&gt; _M_storage;  _Val*  _M_valptr() { return _M_storage._M_ptr(); }</code>"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461956, "post_id": 39004407, "comment_id": 65361117, "body": "@Mehlins As Ami Tavory already explained, in turn calls the <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/construct\" rel=\"nofollow noreferrer\"><code>construct</code></a> method of the allocator, which then calls placement new. (this line does not allocate any memory, it only constructs an object, so it is not using the allocator to allocate anything anyway, and thus the type of the allocator does not matter)"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1471462034, "post_id": 39004407, "comment_id": 65361141, "body": "By the way, <code>construct</code> method in the <code>allocator</code> / <code>allocator_traits</code> is declared deprecated in C++17."}, {"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 1, "creation_date": 1471462587, "post_id": 39004407, "comment_id": 65361424, "body": "Oh, ok, I see. The construct function is actually a template and uses type inference for the <code>_M_valptr()</code>. Also, the <code>construct</code> function is only deprecated for <code>allocator</code>. From what I&#39;ve been seeing they&#39;re trying to shift everything to <code>allocator_traits</code>, to make things more generic. Thanks"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 1, "creation_date": 1471462676, "post_id": 39004407, "comment_id": 65361478, "body": "@Mehlins Yes, I stay corrected, it is not deprecated in the <code>allocator_traits</code>. And the idea of deprecation is that the allocator should take case of allocating memory only, it does not need to know much about the type and how to construct it."}], "tags": [], "owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "is_accepted": true, "score": 8, "last_activity_date": 1471461304, "last_edit_date": 1471461304, "creation_date": 1471460652, "answer_id": 39004407, "question_id": 39004238, "link": "https://stackoverflow.com/questions/39004238/allocator-usage-in-c-stl-tree/39004407#39004407", "title": "Allocator usage in C++ (STL Tree)", "body": "<pre><code>::new(__node) _Rb_tree_node&lt;_Val&gt;;\n</code></pre>\n\n<p>This form of <a href=\"http://en.cppreference.com/w/cpp/language/new\">new expression</a> is called 'placement new'. It does not allocate new memory, but only constructs an object in the memory region pointed by the argument. Here <code>__node</code> is a pointer to already allocated memory for the node, this expression constructs an object of type <code>_Rb_tree_node&lt;_Val&gt;</code> in this place.</p>\n\n<pre><code>_Alloc_traits::construct(_M_get_Node_allocator(), __node-&gt;_M_valptr(), ...);\n</code></pre>\n\n<p>this line <a href=\"http://en.cppreference.com/w/cpp/memory/allocator_traits/construct\">constructs</a> an object of type <code>_Val</code> in the memory pointed to by <code>__node-&gt;_M_valptr()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461333, "post_id": 39004449, "comment_id": 65360811, "body": "Ok, so I assume it uses the placement <code>new</code> because it has no value to pass (required in the <code>::construct()</code>), and then it uses the <code>::construct()</code> function because it actually has some value to pass (hidden in the <code>...</code>). There&#39;s one thing I still don&#39;t get. Why it uses the node allocator for <code>_M_valptr()</code>, which is of another type?"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "edited": false, "score": 0, "creation_date": 1471461988, "post_id": 39004449, "comment_id": 65361123, "body": "@Mehlins This really depends on the exact standard library <i>implementation</i> you&#39;re using, but, again, it&#39;s almost positively just indirectly calling the global placement new. How does it know to call the appropriate one via the node allocator? through the <code>rebind</code> mechanism you mentioned, through function templates, etc. It&#39;s not fundamentally using the node allocator, despite the apperance."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 3, "last_activity_date": 1471460848, "creation_date": 1471460848, "answer_id": 39004449, "question_id": 39004238, "link": "https://stackoverflow.com/questions/39004238/allocator-usage-in-c-stl-tree/39004449#39004449", "title": "Allocator usage in C++ (STL Tree)", "body": "<p>The line </p>\n\n<pre><code>::new(__node) _Rb_tree_node&lt;_Val&gt;;\n</code></pre>\n\n<p>uses <a href=\"http://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow\">placement <code>new</code></a>, which simply constructs an object of type <code>_Rb_tree_node&lt;_Val&gt;</code> at given memory address <code>__node)</code>. This constructs the node object. </p>\n\n<p>Now it needs to do something with one of the members at <code>_M_valptr()</code>. The line </p>\n\n<pre><code>_Alloc_traits::construct(_M_get_Node_allocator(), __node-&gt;_M_valptr(), ...);\n</code></pre>\n\n<p>(indirectly calls) the allocator's <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/construct\" rel=\"nofollow\"><code>construct</code> method</a> which is very similar to the global placement <code>new</code> (in fact, it typically just calls it). As such, it again takes a pointer to the location where to construct the object. This constructs the value object.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 2, "last_activity_date": 1471460861, "creation_date": 1471460861, "answer_id": 39004453, "question_id": 39004238, "link": "https://stackoverflow.com/questions/39004238/allocator-usage-in-c-stl-tree/39004453#39004453", "title": "Allocator usage in C++ (STL Tree)", "body": "<p>It's using something called \"<a href=\"https://isocpp.org/wiki/faq/dtors#placement-new\" rel=\"nofollow\">Placement New</a>\", which allows an object to be constructed in memory that has already been allocated.</p>\n\n<pre><code>void * mem = malloc(sizeof(MyStruct));\nMyStruct * my_struct_ptr = new(mem) MyStruct(/*Args...*/);\n\n/*Do stuff...*/\n\nmy_struct_ptr-&gt;~MyStruct();//Literally one of the only times a good programmer would ever do this!\nfree(mem);\n</code></pre>\n\n<p>Or you could write it like this:</p>\n\n<pre><code>char * mem = new char[sizeof(MyStruct)];\nMyStruct * my_struct_ptr = new(mem) MyStruct(/*Args...*/);\n\n/*Do stuff...*/\n\nmy_struct_ptr-&gt;~MyStruct();//Literally one of the only times a good programmer would ever do this!\ndelete mem;\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>char mem[sizeof(MyStruct)];\nMyStruct * my_struct_ptr = new(mem) MyStruct(/*Args...*/);\n\n/*Do stuff...*/\n\nmy_struct_ptr-&gt;~MyStruct();//Literally one of the only times a good programmer would ever do this!\n</code></pre>\n\n<p>The basic idea is that you now become responsible for the manual cleanup normally automatically handled by the language and compiler. Which is extremely bad practice <strong>EXCEPT</strong> when working with allocators, where direct control over the memory allocations becomes essential to writing a good allocator.</p>\n"}], "owner": {"reputation": 339, "user_id": 6556825, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/00bf023ceb9492db6e7a9211526eba77?s=128&d=identicon&r=PG&f=1", "display_name": "gmardau", "link": "https://stackoverflow.com/users/6556825/gmardau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 1, "accepted_answer_id": 39004407, "answer_count": 3, "score": 6, "last_activity_date": 1471461304, "creation_date": 1471459903, "question_id": 39004238, "link": "https://stackoverflow.com/questions/39004238/allocator-usage-in-c-stl-tree", "title": "Allocator usage in C++ (STL Tree)", "body": "<p>I've recently been trying to understand how c++ allocators work, and I've been looking to the implementation of the red-black tree that the STL library uses for things like <code>std::set</code> or <code>std::map</code>, but there are some things that I can't get my head around.</p>\n\n<p>The first thing that does is convert the allocator from the type the container has to store - <code>_Val</code> - to the type of the node that the tree uses - <code>_Rb_tree_node&lt;_Val&gt;</code> - using the rebind template:</p>\n\n<pre><code>typedef typename __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::template\n    rebind&lt;_Rb_tree_node&lt;_Val&gt; &gt;::other _Node_allocator;\n\ntypedef __gnu_cxx::__alloc_traits&lt;_Node_allocator&gt; _Alloc_traits;\n</code></pre>\n\n<p>This I can sort out.</p>\n\n<p>Now, when an element is inserted and it needs to create a new node what it does is this</p>\n\n<pre><code>_Node_type __node = _Alloc_traits::allocate(_M_get_Node_allocator(), 1);\n</code></pre>\n\n<p>which I assume allocates space for a single node. But then it does this</p>\n\n<pre><code>::new(__node) _Rb_tree_node&lt;_Val&gt;;\n</code></pre>\n\n<p>which I really don't know what it does, since the space for <code>__node</code> has already been allocated. But after that it also does this</p>\n\n<pre><code>_Alloc_traits::construct(_M_get_Node_allocator(), __node-&gt;_M_valptr(), ...);\n</code></pre>\n\n<p>which makes me even more confused, because is supposedly constructing a node (is the node allocator), but it passes the pointer <code>__node-&gt;_M_valptr()</code> which is of type <code>_Val*</code>.</p>\n\n<p>If someone could explain this, I would be very grateful.</p>\n"}, {"tags": ["c++", "antlr", "antlr3"], "comments": [{"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1471507143, "post_id": 39004192, "comment_id": 65376614, "body": "Look at mine pull request, is fixes much more."}, {"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1471507649, "post_id": 39004192, "comment_id": 65376892, "body": "See here: <a href=\"https://github.com/antlr/antlr3/pull/145\" rel=\"nofollow noreferrer\">github.com/antlr/antlr3/pull/145</a> is also fixes some performance problems. Without these fixes are C a C++ targets much slower that Java one."}], "owner": {"reputation": 157, "user_id": 226539, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GOLfN.jpg?s=128&g=1", "display_name": "Daniel Bigham", "link": "https://stackoverflow.com/users/226539/daniel-bigham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1471468184, "creation_date": 1471459750, "last_edit_date": 1471468184, "question_id": 39004192, "link": "https://stackoverflow.com/questions/39004192/antlr3-with-c-target-invalid-conversion-from-const-commontokentype", "title": "Antlr3 with C++ target: invalid conversion from const CommonTokenType*", "body": "<p>I'm trying to get a super-simple grammar working for ANTLR3 with a C++ target.</p>\n\n<p>I'm finding that if I refer to any variables in my action, I get the following error:</p>\n\n<blockquote>\n  <p><code>invalid conversion from \u2018const CommonTokenType* {aka const CommonToken&lt;Traits&lt;NlpCfgRuleAntlrLexer, NlpCfgRuleAntlrParser&gt;&gt;*}\u2019 to \u2018Traits&lt;NlpCfgRuleAntlrLexer, NlpCfgRuleAntlrParser&gt;::CommonTokenType* {aka CommonToken&lt;Traits&lt;NlpCfgRuleAntlrLexer, NlpCfgRuleAntlrParser&gt;&gt;*}\u2019 [-fpermissive]</code></p>\n</blockquote>\n\n<p>Here's the core part of my grammar:</p>\n\n<pre><code>def \n    : ID ':' {$ID.text;}\n    ;\nID  : 'a'..'z'+ ;\n</code></pre>\n\n<p>If I go into the generated C++ source to this line:</p>\n\n<pre><code>ImplTraits::CommonTokenType* ID1 = NULL;\n</code></pre>\n\n<p>... and change it to:</p>\n\n<pre><code>const ImplTraits::CommonTokenType* ID1 = NULL;\n</code></pre>\n\n<p>... then the compile error goes away.</p>\n\n<p>Perhaps the fix is here: (?)</p>\n\n<p><a href=\"https://github.com/ibre5041/antlr3/commit/0c90ab8f8506a46e37f54988207cb4d6a1d2596a\" rel=\"nofollow\">https://github.com/ibre5041/antlr3/commit/0c90ab8f8506a46e37f54988207cb4d6a1d2596a</a></p>\n\n<p>If so, might I ask why super-super-super basic functionality is broken in ANTLR's C++ target?</p>\n\n<p>If it's helpful to anyone else, I'm currently working around this by running a command in my Makefile to manually search and replace in the generated code:</p>\n\n<pre><code>perl -p -i -e 's/    ImplTraits::CommonTokenType\\*/    const ImplTraits::CommonTokenType*/g' $(GEN)/mydir/*.cpp\n</code></pre>\n"}, {"tags": ["c++", "tensorflow", "eigen"], "comments": [{"owner": {"reputation": 457, "user_id": 5556342, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/05169b6a5ec547ed54a67f1a0ad7947f?s=128&d=identicon&r=PG&f=1", "display_name": "Alperen AYDIN", "link": "https://stackoverflow.com/users/5556342/alperen-aydin"}, "edited": false, "score": 0, "creation_date": 1471512620, "post_id": 39004144, "comment_id": 65379830, "body": "It seems that the question here has part of the answer:<a href=\"http://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph\" title=\"how do i pass an opencv mat into a c tensorflow graph\">stackoverflow.com/questions/36044197/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5656895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d18559b313bab09af54e7cb33fafc2?s=128&d=identicon&r=PG&f=1", "display_name": "ChillySean", "link": "https://stackoverflow.com/users/5656895/chillysean"}, "is_accepted": false, "score": 0, "last_activity_date": 1518632125, "creation_date": 1518632125, "answer_id": 48793734, "question_id": 39004144, "link": "https://stackoverflow.com/questions/39004144/in-tensorflows-c-api-how-do-i-use-an-eigen-tensor-to-set-my-tensorflow-tenso/48793734#48793734", "title": "In Tensorflow&#39;s C++ API, how do I use an Eigen Tensor to set my Tensorflow Tensor?", "body": "<p>I think the problem is you are using '.matrix', which only return 2d matrix.</p>\n\n<pre><code>template &lt;typename T&gt;\n  typename TTypes&lt;T&gt;::Matrix matrix() {\n    return tensor&lt;T, 2&gt;();\n  }\n</code></pre>\n\n<p><strong>You should use '.tensor', which can return Nd matrix.</strong></p>\n\n<pre><code>template &lt;typename T, size_t NDIMS&gt;\ntypename TTypes&lt;T, NDIMS&gt;::Tensor Tensor::tensor() {\n  CheckTypeAndIsAligned(DataTypeToEnum&lt;T&gt;::v());\n  return typename TTypes&lt;T, NDIMS&gt;::Tensor(base&lt;T&gt;(),\n                                           shape().AsEigenDSizes&lt;NDIMS&gt;());\n}\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 5556342, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/05169b6a5ec547ed54a67f1a0ad7947f?s=128&d=identicon&r=PG&f=1", "display_name": "Alperen AYDIN", "link": "https://stackoverflow.com/users/5556342/alperen-aydin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2665, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1518632125, "creation_date": 1471459569, "question_id": 39004144, "link": "https://stackoverflow.com/questions/39004144/in-tensorflows-c-api-how-do-i-use-an-eigen-tensor-to-set-my-tensorflow-tenso", "title": "In Tensorflow&#39;s C++ API, how do I use an Eigen Tensor to set my Tensorflow Tensor?", "body": "<p>So let's say I have a 4D Eigen::Tensor T.</p>\n\n<p>Similarly I also have a 4D Tensorflow::Tensor X with the same shape as T</p>\n\n<pre><code>  int size = T.dimension(0);\n  int rows = T.dimension(1);\n  int cols = T.dimension(2);\n  int channels = T.dimension(3);\n\n  TensorShape TS;\n  TS.AddDim(size);\n  TS.AddDim(rows);\n  TS.AddDim(cols);\n  TS.AddDim(size);\n\n  Tensor x( DT_FLOAT, TS);\n</code></pre>\n\n<p>Now I want to put the data in T in x. </p>\n\n<p>So I try to do: </p>\n\n<pre><code>  x.matrix&lt;float&gt;()() = T;\n</code></pre>\n\n<p>But the compiler yells at me when I do thqt: </p>\n\n<blockquote>\n  <p>cannot convert 'Eigen::Tensor' to 'Eigen::TensorMap, 16>::Scalar {aka float}' in assignment</p>\n</blockquote>\n\n<p>When I try to convert T to a TensorMap I get even more error. </p>\n\n<p>What am I missing here? </p>\n"}, {"tags": ["c++", "exception-handling", "c++14", "shared-ptr", "initializer-list"], "comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 16, "creation_date": 1471458407, "post_id": 39003756, "comment_id": 65359274, "body": "Looks like a <a href=\"https://gcc.gnu.org/ml/gcc-bugs/2015-05/msg01091.html\" rel=\"nofollow noreferrer\">gcc bug</a>: <i>&quot;destructor not called for members of partially constructed anonymous struct/array&quot;</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 1080000, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KKv1g.jpg?s=128&g=1", "display_name": "Vishwadeep Singh", "link": "https://stackoverflow.com/users/1080000/vishwadeep-singh"}, "edited": false, "score": 0, "creation_date": 1474266940, "post_id": 39004422, "comment_id": 66443763, "body": "Is it something different from partial objects (created if exception is thrown from constructor) and destructor will not be called later"}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 12, "last_activity_date": 1471460720, "creation_date": 1471460720, "answer_id": 39004422, "question_id": 39003756, "link": "https://stackoverflow.com/questions/39003756/memory-leak-under-gcc-but-not-clang-when-throwing-in-the-middle-of-a-c14-ini/39004422#39004422", "title": "memory leak under GCC (but not Clang) when throwing in the middle of a C++14 initializer list for std::list&lt;shared_ptr&gt;", "body": "<p><em>Turning my comment into an answer so you can mark the question as answered.</em></p>\n\n<p>This looks to be a gcc bug</p>\n\n<blockquote>\n  <p><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=66139\">Bug 66139</a> - <strong>destructor not called for members of partially constructed anonymous struct/array</strong></p>\n</blockquote>\n\n<p>Note in particular the last two test cases which use <code>std::initializer_list</code> to illustrate the problem.</p>\n"}], "owner": {"reputation": 223, "user_id": 6727640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d08f0128c75c8c9fd7bcee018633c54?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6727640/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 1, "accepted_answer_id": 39004422, "answer_count": 1, "score": 22, "last_activity_date": 1471460720, "creation_date": 1471458026, "last_edit_date": 1471458574, "question_id": 39003756, "link": "https://stackoverflow.com/questions/39003756/memory-leak-under-gcc-but-not-clang-when-throwing-in-the-middle-of-a-c14-ini", "title": "memory leak under GCC (but not Clang) when throwing in the middle of a C++14 initializer list for std::list&lt;shared_ptr&gt;", "body": "<p>Consider the following program:</p>\n\n<pre><code>#include &lt;stdexcept&gt;\n#include &lt;stdio.h&gt;\n#include &lt;memory&gt;\n#include &lt;list&gt;\nclass Foo {\npublic:\n    Foo(){\n        if (s_ct==0) {throw std::bad_alloc();}\n        --s_ct;\n        fprintf(stderr, \"ctor %p\\n\", this);\n    }\n    ~Foo(){\n        fprintf(stderr, \"dtor %p\\n\", this);\n    }\nprivate:\n    static int s_ct;\n};\n\nint Foo::s_ct = 2;\n\nint main(){\n    try {\n        std::list&lt;std::shared_ptr&lt;Foo&gt;&gt; l = {\n            std::make_shared&lt;Foo&gt;(),\n            std::make_shared&lt;Foo&gt;(),\n            std::make_shared&lt;Foo&gt;()\n        };\n    } catch (std::bad_alloc&amp;) {\n        fprintf(stderr, \"caught exception.\\n\");\n    }\n    fprintf(stderr, \"done.\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Compiled like this:</p>\n\n<pre><code>[little:~] $ g++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.2) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR     PURPOSE.\n\n[little:~] $ g++ --std=c++14 -o list_init list_init.cc\n[little:~] $ \n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[little:~] $ ./list_init \nctor 0x1294c30\nctor 0x1294c50\ncaught exception.\ndone.\n[little:~] $ \n</code></pre>\n\n<p>Notice that the destructors are not called.  Valgrind correctly complains of the leak as well.</p>\n\n<p>This seems to violate one of the key purposes of <code>std::make_shared</code> -- namely, that if another expression in the statement throws, the shared object gets properly destroyed because it is wrapped by a fully constructed shared pointer object.</p>\n\n<p>Clang does what I would like here:</p>\n\n<pre><code>[little:~] $ clang++ --version\nclang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\nInstalledDir: /usr/bin\n[little:~] $ clang++ --std=c++14 -o foo list_init.cc\n[little:~] $ ./foo\nctor 0x1dfec30\nctor 0x1dfec50\ndtor 0x1dfec50\ndtor 0x1dfec30\ncaught exception.\ndone.\n[little:~] $ \n</code></pre>\n\n<p>So is this a GCC bug, or do I need to fix my program?</p>\n"}, {"tags": ["c++", "padding"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1471458051, "post_id": 39003750, "comment_id": 65359067, "body": "And your question is ... ?"}, {"owner": {"reputation": 15, "user_id": 4482503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b3c4af1b188dbb958bdec81430a8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Ranarrr", "link": "https://stackoverflow.com/users/4482503/ranarrr"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1471458233, "post_id": 39003750, "comment_id": 65359168, "body": "@FredLarson edited. forgot to ask it.."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1471458261, "post_id": 39003750, "comment_id": 65359181, "body": "Write <code>pad(0x4, 0x30)</code> without <code>;</code>"}, {"owner": {"reputation": 419, "user_id": 6643398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nsj3y3qxesE/AAAAAAAAAAI/AAAAAAAAAmc/9NBAvbDSKnU/photo.jpg?sz=128", "display_name": "Patrik H", "link": "https://stackoverflow.com/users/6643398/patrik-h"}, "edited": false, "score": 0, "creation_date": 1471458460, "post_id": 39003750, "comment_id": 65359299, "body": "<code>#</code> creates a string literal, use <code>##</code> to glue <code>__pad</code> and <code>log</code> together"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1471458985, "post_id": 39003750, "comment_id": 65359600, "body": "Identifiers with a double underscore are reserved. See <a href=\"http://stackoverflow.com/q/228783/10077\">stackoverflow.com/q/228783/10077</a>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1471460939, "post_id": 39003750, "comment_id": 65360621, "body": "When debugging macro problems, it sometimes helps to look at the output of the preprocessor to see what it did with your macro. Every compiler I know of has an option to run just the preprocessor. It&#39;s usually a variant of -E."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4482503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b3c4af1b188dbb958bdec81430a8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Ranarrr", "link": "https://stackoverflow.com/users/4482503/ranarrr"}, "edited": false, "score": 0, "creation_date": 1471458613, "post_id": 39003850, "comment_id": 65359381, "body": "Thank you very much. Another question, if i do pad( 0x7AE, 2 ) is the pad name going to be __pad0x7AE[2], __pad7AE[2] or __pad1966[2] (7AEh)?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 15, "user_id": 4482503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b3c4af1b188dbb958bdec81430a8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Ranarrr", "link": "https://stackoverflow.com/users/4482503/ranarrr"}, "edited": false, "score": 0, "creation_date": 1471458838, "post_id": 39003850, "comment_id": 65359522, "body": "The field name will be <code>__pad0x7AE</code>.  The token gets pasted raw just as you spelled it."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 4, "last_activity_date": 1471458364, "creation_date": 1471458364, "answer_id": 39003850, "question_id": 39003750, "link": "https://stackoverflow.com/questions/39003750/c-using-private-and-public-in-macro-inside-class/39003850#39003850", "title": "C++ using private and public in macro, inside class", "body": "<p>Use the <code>##</code> paste operator to combine two tokens together.  Also, don't stringify the size using <code>#</code> - you don't want a string inside the square brackets.</p>\n\n<pre><code>#define pad(loc, size)  private: \\\n                    char __pad##loc[size]; \\\n                    public:\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4482503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b3c4af1b188dbb958bdec81430a8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Ranarrr", "link": "https://stackoverflow.com/users/4482503/ranarrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 39003850, "answer_count": 1, "score": 0, "last_activity_date": 1506515096, "creation_date": 1471457975, "last_edit_date": 1506515096, "question_id": 39003750, "link": "https://stackoverflow.com/questions/39003750/c-using-private-and-public-in-macro-inside-class", "title": "C++ using private and public in macro, inside class", "body": "<p>Im trying to make a macro for padding my classes which i use in game hacking. Let me show you what i am trying to do:</p>\n\n<pre><code>#define pad(loc, size)  private: \\\n                    char _pad#loc[#size]; \\\n                    public:\n</code></pre>\n\n<p>then i want to use it like:</p>\n\n<pre><code>class C_VTable {\npublic:\n   float member;          // &lt;- public\n   pad(0x4, 0x30);        // &lt;- private im not sure how to make the pad name be like pad0x4\n   float anothermember;   // &lt;- public again\n};\n</code></pre>\n\n<p>How can i do this, because i get an error saying it expected a ;\na little messy, but i hope you understand.</p>\n\n<p>Any help is greatly appreciated :)</p>\n"}, {"tags": ["c++", "struct", "syntax", "typedef"], "comments": [{"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 1, "creation_date": 1471457267, "post_id": 39003337, "comment_id": 65358627, "body": "You might find it helpful to look up Template Metaprogramming."}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 1, "last_activity_date": 1471456654, "last_edit_date": 1495541696, "creation_date": 1471456654, "answer_id": 39003368, "question_id": 39003337, "link": "https://stackoverflow.com/questions/39003337/meaning-of-c-struct-syntax-with-only-typedef/39003368#39003368", "title": "meaning of c++ struct syntax with only typedef", "body": "<p>This kind of syntax is used to create \"templated typedefs\". In C++11 and above, <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">type aliases / alias templates</a> should be used instead.</p>\n\n<p>The purpose of the code snippet you posted is to create a type alias that depends on <code>_Function</code> and <code>_ReturnType</code>.</p>\n\n<p>It can be accessed like this: </p>\n\n<pre><code>typename _TaskOfType_ContinuationTypeTraits&lt;F, R&gt;::_TaskOfType\n</code></pre>\n\n<hr>\n\n<p>If you have access to C++11, this is a cleaner, better and more straightforward solution:</p>\n\n<pre><code>template&lt;typename _Function, typename _ReturnType&gt;\nusing _TaskOfType = \n    task&lt;typename _TaskTypeTraits&lt;\n        typename _FunctionTypeTraits&lt;_Function, _ReturnType&gt;::_FuncRetType&gt;::_TaskRetType&gt;\n</code></pre>\n\n<p>Which can be used like this:</p>\n\n<pre><code>_TaskOfType&lt;F, R&gt;\n</code></pre>\n\n<p><em>More info: <a href=\"https://stackoverflow.com/questions/18287151/difference-between-typedef-and-c11-type-alias\">\"Difference between typedef and C++11 type alias\"</a></em></p>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1471460984, "post_id": 39003615, "comment_id": 65360639, "body": "Nice! Now it has some meat! +1"}, {"owner": {"reputation": 333, "user_id": 2984297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/573c5edc432abbb67e1b5cebee09734b?s=128&d=identicon&r=PG&f=1", "display_name": "user2984297", "link": "https://stackoverflow.com/users/2984297/user2984297"}, "edited": false, "score": 0, "creation_date": 1471461739, "post_id": 39003615, "comment_id": 65361004, "body": "I think your answer is more related in explaining the purpose(advantage) of such syntax. And your example is easier to understand and makes sense too. Eventually it is calculating the type. But @Vittorio Romeo answer makes sense too."}], "tags": [], "owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "is_accepted": false, "score": 3, "last_activity_date": 1471461216, "last_edit_date": 1471461216, "creation_date": 1471457508, "answer_id": 39003615, "question_id": 39003337, "link": "https://stackoverflow.com/questions/39003337/meaning-of-c-struct-syntax-with-only-typedef/39003615#39003615", "title": "meaning of c++ struct syntax with only typedef", "body": "<p>In C++ parlance, the <code>_TaskOfType_ContinuationTypeTraits</code> is a metafunction. It does type computations at compile-time. </p>\n\n<p>A metafunction is in a way similar to a run-time function. The key difference is that the input arguments to a metafunction are type(s), and returns are also type(s).</p>\n\n<p>Eg. The following metafunction takes a type, and returns a pointer of the type you supply to it.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct add_pointer\n{\n    typedef T* type;\n}\n</code></pre>\n\n<p>Now, if you did <code>add_pointer&lt;int&gt;::type</code>, it returns <code>int*</code>. You see, you gave it a type (<code>int</code> in this case) and the compiler computed a new type (<code>int*</code> in this case) and gave it back to you when you invoked the <code>::type</code> of the metafunction. When you do <code>::type</code> on a metafunction, that is when the template is instantiated. This is the run-time equivalent of calling a function. Also note that all of this happened at compile-time!</p>\n\n<p>Now, going back to your <code>_TaskOfType_ContinuationTypeTraits</code>. This is just like my <code>add_pointer</code>. In <code>add_pointer</code>, I just had one template argument, you have two. I just added a pointer to the type that was supplied, you have something much more complicated. But, at it's essence, it is only a type computation. My <code>add_pointer</code> returns when I call <code>::type</code> on it, yours does when you call <code>::_TaskOfType</code>.</p>\n"}], "owner": {"reputation": 333, "user_id": 2984297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/573c5edc432abbb67e1b5cebee09734b?s=128&d=identicon&r=PG&f=1", "display_name": "user2984297", "link": "https://stackoverflow.com/users/2984297/user2984297"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 39003368, "answer_count": 2, "score": 3, "last_activity_date": 1471461216, "creation_date": 1471456520, "question_id": 39003337, "link": "https://stackoverflow.com/questions/39003337/meaning-of-c-struct-syntax-with-only-typedef", "title": "meaning of c++ struct syntax with only typedef", "body": "<p>When I examine some code snip from some libraries, I saw some code like this\uff1a</p>\n\n<pre><code>template&lt;typename _Function, typename _ReturnType&gt;\nstruct _TaskOfType_ContinuationTypeTraits\n{\n    typedef task&lt;typename _TaskTypeTraits&lt;typename _FunctionTypeTraits&lt;_Function, _ReturnType&gt;::_FuncRetType&gt;::_TaskRetType&gt; _TaskOfType;\n};\n</code></pre>\n\n<p>Can someone provide some explanation of the code? What is it trying to do and what is the advantage to use a struct with only typedef statement within the body?</p>\n"}, {"tags": ["c++", "performance", "memory", "garbage-collection"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 5, "creation_date": 1471456020, "post_id": 39003183, "comment_id": 65357934, "body": "There is no garbage collection in C++"}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471456267, "post_id": 39003183, "comment_id": 65358077, "body": "1st way is better in term of readability: when reading a function call of the 2nd way, you don&#39;t know if an argument is passed as input or as output. The &quot;return way&quot; is less ambiguous"}, {"owner": {"reputation": 515, "user_id": 1612373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vnzbb.jpg?s=128&g=1", "display_name": "Maher Manoubi", "link": "https://stackoverflow.com/users/1612373/maher-manoubi"}, "edited": false, "score": 0, "creation_date": 1471456347, "post_id": 39003183, "comment_id": 65358122, "body": "ok good to know! I guess you have to be your own Garbage collection in c++ which I have to search how it&#39;s done. As I mentioned I&#39;m still C++ beginner."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1471456547, "post_id": 39003183, "comment_id": 65358237, "body": "@MaherManoubi C++ &quot;garbage collection&quot; is the use of <a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\">automatic objects</a>"}], "owner": {"reputation": 515, "user_id": 1612373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vnzbb.jpg?s=128&g=1", "display_name": "Maher Manoubi", "link": "https://stackoverflow.com/users/1612373/maher-manoubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1471456034, "answer_count": 0, "score": 0, "last_activity_date": 1471456814, "creation_date": 1471455964, "last_edit_date": 1471456814, "question_id": 39003183, "link": "https://stackoverflow.com/questions/39003183/c-when-writing-a-function-is-it-better-to-initialize-return-value-within-func", "closed_reason": "Duplicate", "title": "C++ When writing a function: is it better to initialize return value within function or pass it as reference?", "body": "<p>Edit: This question is marked as duplicate and I can understand why but I searched and searched and I couldn't find the other question so hopefully this can be used as a funnel to the other question's answers. Also the other question doesn't have a best answer yet. </p>\n\n<p>I don't have much experience with C++ but I always wondered about the following and couldn't find anything that explains which way is better anywhere:</p>\n\n<p>1st Way: When writing functions, is it better to do this:</p>\n\n<pre><code>int value = Calculation(x, y); \n\nint Calculation(int x, int y)\n{\n    int value = x + y;\n    // Some More calculation involving value\n    return value;\n}\n</code></pre>\n\n<p>2nd Way. or is it better to do it way:</p>\n\n<pre><code>int value = 0;\nCalculation(value, x, y);  \n\nvoid Calculation(int&amp; value, int x, int y)\n{\n    value = x + y;\n    // Some More calculation involving value\n}\n</code></pre>\n\n<p>From my experience in other Programming Languages, it is always good practice to write functions that take arguments and return the result but I always felt by doing so, I always have an extra variable declared within the function (the return variable) and every call to the function requires extra work from the Garbage Collector. I could be wrong but that's how I currently think about it. </p>\n\n<p>The 2nd way, I only had to declare value once but I passed it by reference which means I'm giving extra work for the compiler every time I use the variable in function because it has to point to it every time. </p>\n\n<p>So in Summary, my guess is that the 1st way is less work but an extra variable is added in memory. The 2nd way is less memory work but extra work needed to find the variable every time it's used in the function.</p>\n\n<p>Finally my question, should I always stick to the 1st way?</p>\n\n<p>Thanks so much!</p>\n"}, {"tags": ["c++", "windows", "mingw", "ms-mpi"], "answers": [{"comments": [{"owner": {"reputation": 84, "user_id": 4239865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/na3us.jpg?s=128&g=1", "display_name": "Maometto", "link": "https://stackoverflow.com/users/4239865/maometto"}, "edited": false, "score": 0, "creation_date": 1583413065, "post_id": 39004972, "comment_id": 107112959, "body": "I know this is old, but what did you include exactly?"}], "tags": [], "owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "is_accepted": true, "score": 0, "last_activity_date": 1471462804, "creation_date": 1471462804, "answer_id": 39004972, "question_id": 39002632, "link": "https://stackoverflow.com/questions/39002632/compiling-mpi-with-mingw/39004972#39004972", "title": "Compiling MPI with mingw", "body": "<p>Interestingly enough, adding #include  to the top of MS-MPI's mpi.h worked. </p>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 4592964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-aHFgTBC3zoE/AAAAAAAAAAI/AAAAAAAAFkk/Y4UFZfmPzqM/photo.jpg?sz=128", "display_name": "CatDog", "link": "https://stackoverflow.com/users/4592964/catdog"}, "is_accepted": false, "score": 0, "last_activity_date": 1503768969, "creation_date": 1503768969, "answer_id": 45898052, "question_id": 39002632, "link": "https://stackoverflow.com/questions/39002632/compiling-mpi-with-mingw/45898052#45898052", "title": "Compiling MPI with mingw", "body": "<p>You may try mpich2. <code>mpich2-v1.4.1p1</code> is the last version support windows officically. It also supports the MinGW and gfortran.</p>\n\n<p>As stated in the mpich2's website, the msmpi is just a branch of mpich2 version 1.</p>\n"}], "owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 39004972, "answer_count": 2, "score": -1, "last_activity_date": 1503768969, "creation_date": 1471453979, "question_id": 39002632, "link": "https://stackoverflow.com/questions/39002632/compiling-mpi-with-mingw", "title": "Compiling MPI with mingw", "body": "<p>I don't seem to be finding anything on this, or quite like this. I have this code that we want working with windows, so I've been using mingw and working to modify the code so it compiles. However, I ran into a big issue. The issue is entirely with Microsoft MPI. Our code includes and uses MPI for parallelization code. When the mingw compiler gets to the mpi portion, it tries to compile mpi.h and fails right away, because the overhead like (MPI_Offset and MPI_Count) are not declared in the header file (IIRC, they're usually done during compile time by mpicc or whatever, but MS-MPI doesn't do things that way, not really sure how it does things), it comes up with a bunch of \"has not been declared\" errors. How can I fix this? I really have no clue how MS-MPI works and the microsoft resources I've found do not help. I keep seein something about a cross platform mingw compiler, but I'm not sure what that is or how I'd use it. I have pretty much no experience compiling things outside of visual studio, and am only beginning to get familiar with mingw. Even pointers on where to look would be appreciated.</p>\n"}, {"tags": ["c++", "templates", "c++11", "friend-function", "dependent-name"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471453697, "post_id": 39002406, "comment_id": 65356690, "body": "You cannot friend a particular member function of a class (template or not) selectively. I&#39;m gonna search the dupe now."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471453787, "post_id": 39002406, "comment_id": 65356739, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 just to be clear I&#39;m trying to friend the member typedef (which is a class) not the member function."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1471454184, "post_id": 39002406, "comment_id": 65356951, "body": "show your attempts."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471454268, "post_id": 39002406, "comment_id": 65356994, "body": "Unfortunately you didn&#39;t leave a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates your problem actually, you probably need to refer that type using the <code>typename</code> keyword in front."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471454371, "post_id": 39002406, "comment_id": 65357063, "body": "See here for some more info: <a href=\"http://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\" title=\"where and why do i have to put the template and typename keywords\">stackoverflow.com/questions/610245/&hellip;</a>"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1471454576, "post_id": 39002406, "comment_id": 65357178, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 @KarolyHorvath I updated the question with my attempted <code>friend</code> declaration and the subsequent error."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 3, "creation_date": 1471454695, "post_id": 39002406, "comment_id": 65357238, "body": "You cannot do this. You can make the <code>Register</code> class template a friend, and call a private function of <code>Register</code> from within the policy (passing its type to the policy, and befriending the policy). Alternatively, you can change the call to <code>Register</code> into <code>Register::writeRegister(value, this, &amp;Device::writeDeviceRegister);</code>, which may pass this member function pointer along to the policy, which can then call it on the <code>Derive</code> pointer (or pass a lambda.. it&#39;s all template code anyway..)."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1471454899, "post_id": 39002406, "comment_id": 65357344, "body": "@JohannesSchaub-litb thanks, I was wondering if it wasn&#39;t allowed. I think passing the function is probably cleaner than friendship in either case."}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471454422, "creation_date": 1471453166, "last_edit_date": 1471454422, "question_id": 39002406, "link": "https://stackoverflow.com/questions/39002406/friend-a-dependent-typename-of-a-template-class", "title": "friend a dependent typename of a template class", "body": "<p>I have 3 classes, <code>Device</code>, <code>Register</code>, and <code>WriteOnlyPolicy</code>, defined as such:</p>\n\n<h1>Device</h1>\n\n<pre><code>class Device\n{\npublic:\n\n    template&lt;class Register&gt;\n    inline void write(typename Register::value_type value)\n    {\n        Register::writeRegister(value, this);\n    }\n\nprotected:\n\n    // limit device-specific API calls to this function\n    virtual void writeDeviceRegister(uint64_t address, uint64_t value) = 0;\n\n};\n</code></pre>\n\n<h1>Register</h1>\n\n<pre><code>template&lt;uint64_t ADDRESS, class ValueType, template&lt;class&gt; class AccessPolicy&gt;\nstruct Register : public AccessPolicy&lt;ValueType&gt;\n{\n    using value_type = ValueType;\n    using access_policy = AccessPolicy&lt;ValueType&gt;;\n\n    static void writeRegister(value_type value, Device* device)\n    {\n        access_policy::write(ADDRESS, device, value);\n    }\n}\n</code></pre>\n\n<h1>WriteOnlyPolicy</h1>\n\n<pre><code>template&lt;typename value_type&gt;\nclass WriteOnlyPolicy\n{\nprotected:\n\n    static void write(uint64_t ADDRESS, Device* device, value_type value)\n    {\n        // convert from a value_type to a uint64_t...\n        // Shift/mask as needed...\n        device-&gt;writeDeviceRegister(ADDRESS, value);\n    }\n};\n</code></pre>\n\n<p><code>Register</code> and <code>WriteOnlyPolicy</code> never actually get instantiated in this scheme, but I want the policy to call the protected <code>writeDeviceRegister</code> function of the <code>Device</code> class. I don't want that function to be public as I only want to expose the <code>write</code> function to users of the class, and not the device-specific implementation.</p>\n\n<p>In order to allow that I want <code>Device</code> to friend <code>Register::access_policy</code> (which in this case would be the <code>WriteOnlyPolicy</code> class given as a template argument), but I can't figure out the syntax to friend a dependent typename of a template class. Is this possible?</p>\n\n<p>I thought that putting a <code>friend</code> declaration in the <code>Device</code> class such as</p>\n\n<pre><code>template&lt;uint64_t a, class b, template&lt;class&gt; class c&gt;\nfriend typename Register&lt;a,b,c&gt;::access_policy;\n</code></pre>\n\n<p>would do the trick, but I get the error</p>\n\n<blockquote>\n  <p>error: expected unqualified-id before ';' token</p>\n</blockquote>\n"}, {"tags": ["c++", "linux", "compilation", "raspberry-pi", "cross-compiling"], "comments": [{"owner": {"reputation": 96, "user_id": 6581851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed4ab470b7ff7201795a0db634ce551?s=128&d=identicon&r=PG&f=1", "display_name": "Bonan", "link": "https://stackoverflow.com/users/6581851/bonan"}, "edited": false, "score": 0, "creation_date": 1471455165, "post_id": 39002372, "comment_id": 65357492, "body": "Can you put up the output from ldd hello_world"}, {"owner": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "edited": false, "score": 0, "creation_date": 1471461100, "post_id": 39002372, "comment_id": 65360689, "body": "On your Pi, try gdb hello_world, then run the program and watch it segfault. Then use bt to get a backtrace, which should provide more information."}, {"owner": {"reputation": 547, "user_id": 3608859, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/141c2980f205ce9f018407974ae31bbf?s=128&d=identicon&r=PG&f=1", "display_name": "alabamajack", "link": "https://stackoverflow.com/users/3608859/alabamajack"}, "edited": false, "score": 0, "creation_date": 1471503452, "post_id": 39002372, "comment_id": 65374681, "body": "Output of the on raspi compiled one:       <code>pi@raspberrypi:~ $ ldd hello_world       &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;libarmmem.so (0xb6f40000)         libstdc++.so.6 =&gt; &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;libstdc++.so.6 (0xb6e52000)         libm.so.6 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libm.so.6 (0xb6dd7000)         libgcc_s.so.1 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libgcc_s.so.1 (0xb6daa000)         libc.so.6 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libc.so.6 (0xb6c69000)         &#47;lib&#47;ld-linux-armhf.so.3 (0x7f57c000)</code>"}, {"owner": {"reputation": 547, "user_id": 3608859, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/141c2980f205ce9f018407974ae31bbf?s=128&d=identicon&r=PG&f=1", "display_name": "alabamajack", "link": "https://stackoverflow.com/users/3608859/alabamajack"}, "edited": false, "score": 0, "creation_date": 1471503554, "post_id": 39002372, "comment_id": 65374738, "body": "and the cross compiled: <code>pi@raspberrypi:~ $ ldd hello_world_cc          &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;libarmmem.so (0xb6f1f000)         libstdc++.so.6 =&gt; &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;libstdc++.so.6 (0xb6e31000)         libgcc_s.so.1 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libgcc_s.so.1 (0xb6e04000)         libc.so.6 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libc.so.6 (0xb6cc3000)         libm.so.6 =&gt; &#47;lib&#47;arm-linux-gnueabihf&#47;libm.so.6 (0xb6c48000)         &#47;lib&#47;ld-linux-armhf.so.3 (0x7f587000)</code>"}, {"owner": {"reputation": 547, "user_id": 3608859, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/141c2980f205ce9f018407974ae31bbf?s=128&d=identicon&r=PG&f=1", "display_name": "alabamajack", "link": "https://stackoverflow.com/users/3608859/alabamajack"}, "reply_to_user": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "edited": false, "score": 0, "creation_date": 1471503980, "post_id": 39002372, "comment_id": 65374958, "body": "@FrancescaNannizzi the output of gdb: <code>pi@raspberrypi:~ $ gdb hello_world_cc  ... This GDB was configured as &quot;arm-linux-gnueabihf&quot;. ... (gdb) run Starting program: &#47;home&#47;pi&#47;hello_world_cc   Program received signal SIGSEGV, Segmentation fault. 0x0005f7e2 in ?? () (gdb) bt #0  0x0005f7e2 in ?? () #1  0x0001062e in _start () (gdb)</code>"}, {"owner": {"reputation": 1475, "user_id": 2201317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1pP5.jpg?s=128&g=1", "display_name": "Francesca Nannizzi", "link": "https://stackoverflow.com/users/2201317/francesca-nannizzi"}, "edited": false, "score": 0, "creation_date": 1471531743, "post_id": 39002372, "comment_id": 65393014, "body": "@alabamajack Unfortunately it looks like the stack trace is corrupted, so that&#39;s not much help. My best guess is that you cross-compiled with a different version of GLIBC than is running on the device."}], "answers": [{"tags": [], "owner": {"reputation": 2507, "user_id": 2794542, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3b59279f417d0b4202222740ea05fa65?s=128&d=identicon&r=PG&f=1", "display_name": "norekhov", "link": "https://stackoverflow.com/users/2794542/norekhov"}, "is_accepted": false, "score": 2, "last_activity_date": 1528879274, "last_edit_date": 1528879274, "creation_date": 1528877627, "answer_id": 50832243, "question_id": 39002372, "link": "https://stackoverflow.com/questions/39002372/cross-compiling-for-raspi-executing-the-programm-ends-in-segmentation-fault/50832243#50832243", "title": "Cross Compiling for Raspi - Executing the programm ends in &quot;Segmentation fault&quot;", "body": "<p>Toolchain compiler arm-linux-gnueabihf-gcc can have different default parameters which one can get running:</p>\n\n<pre><code> arm-linux-gnueabihf-gcc -Q --help=target\n</code></pre>\n\n<p>Compiler installed on Raspberry Stretch (I will leave essential information only):</p>\n\n<p><code>\n  -march=                               armv6\n  -marm                                 [enabled]\n  -mfloat-abi=                          hard\n  -mfp16-format=                        none\n  -mfpu=                                vfp\n</code></p>\n\n<p>Stretch default cross-compiler:</p>\n\n<p><code>\n  -march=                               armv7-a\n  -marm                                 [disabled]\n  -mfloat-abi=                          hard\n  -mfp16-format=                        none\n  -mfpu=                                vfpv3-d16\n</code></p>\n\n<p>Now you see the difference in architecture. So to sompile with cross-compiler one will need to set <code>march</code> to match your desired CPU. \nAlso note that Debian cross compiler by default emits Thumb code and Raspberry Stretch emits ARM code</p>\n\n<p>I suggest you're cross-compiling for newer CPU family while your device doesn't support it.</p>\n"}], "owner": {"reputation": 547, "user_id": 3608859, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/141c2980f205ce9f018407974ae31bbf?s=128&d=identicon&r=PG&f=1", "display_name": "alabamajack", "link": "https://stackoverflow.com/users/3608859/alabamajack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1691, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1528879274, "creation_date": 1471453027, "last_edit_date": 1471453118, "question_id": 39002372, "link": "https://stackoverflow.com/questions/39002372/cross-compiling-for-raspi-executing-the-programm-ends-in-segmentation-fault", "title": "Cross Compiling for Raspi - Executing the programm ends in &quot;Segmentation fault&quot;", "body": "<p>I have a self-written programm which I want to build also for Raspberry Pi from my x86 machine. I'm using eclipse generated makefiles and cannot change this thing.</p>\n\n<p>I've read this tutorial for CC for raspi : <a href=\"http://hackaday.com/2016/02/03/code-craft-cross-compiling-for-the-raspberry-pi/\" rel=\"nofollow\">Hackaday-Link</a>. Because raspi also have installed gcc version 4.9, I also try it with this version of the cross compiler. The problem also exisits with this hello world programm:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    cout &lt;&lt; \"hello world!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>When compiling and running it directly on the raspi, the output is <code>hello world!</code>. OK, thats fine.\nBut when cross-compiling it with version 4.9 of <code>arm-linux-gnueabihf-g++-4.9</code>, then scp it to the raspi, make it executable and run it, the output of <code>./hello_world</code> is <code>Segmentation fault</code>. When executing <code>sudo ./hello_world</code> there is no output.</p>\n\n<p>I tried to get some information about the files and see that the locally on the raspi compiled program outputed:</p>\n\n<pre><code>pi@raspberrypi:~ $ file hello_world\nhello_world: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, for GNU/Linux 2.6.32, BuildID[sha1]=41161ae762d940b12c3313ca065a3badd284f6d3, not stripped\n</code></pre>\n\n<p>and the cross-compiled version outputs</p>\n\n<pre><code>pi@raspberrypi:~ $ file hello_world\nhello_world: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, for GNU/Linux 3.2.0, BuildID[sha1]=4f1f4fb86710ef8130f148dc5adae1c0c18092fd, not stripped\n</code></pre>\n\n<p>Can anyone tell me what the problem is and how to solve it?</p>\n"}, {"tags": ["c++", "csv", "boost-tokenizer"], "comments": [{"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1471454870, "post_id": 39002246, "comment_id": 65357330, "body": "Only difference is empty line at the end of copied file."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1886725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621824ab90afb193ec3f7ad7b9568b6?s=128&d=identicon&r=PG", "display_name": "vlavyb", "link": "https://stackoverflow.com/users/1886725/vlavyb"}, "edited": false, "score": 0, "creation_date": 1471463703, "post_id": 39003771, "comment_id": 65362034, "body": "Thank you! This was the first time I heard about carriage return, now I know! :)"}], "tags": [], "owner": {"reputation": 128, "user_id": 6727693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b5a03423d94acef77493a4b2e30666?s=128&d=identicon&r=PG&f=1", "display_name": "Sycjam", "link": "https://stackoverflow.com/users/6727693/sycjam"}, "is_accepted": true, "score": 0, "last_activity_date": 1471459814, "last_edit_date": 1471459814, "creation_date": 1471458106, "answer_id": 39003771, "question_id": 39002246, "link": "https://stackoverflow.com/questions/39002246/csv-parser-in-c-doesnt-read-the-first-element/39003771#39003771", "title": "CSV parser in C++ doesn&#39;t read the first element", "body": "<p>New lines in your orginal file ends with a <a href=\"https://en.wikipedia.org/wiki/Carriage_return\" rel=\"nofollow\">carriage return</a>, which is read by your code with last varible in the line, and then printed. So first line is printed like this</p>\n\n<pre><code>1 2 3 4 5\\r\n</code></pre>\n\n<p>and then you print space, which is printed at the beginning of the line, covering \"1\".</p>\n\n<p>You could easily see that in debugger :)</p>\n"}], "owner": {"reputation": 25, "user_id": 1886725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621824ab90afb193ec3f7ad7b9568b6?s=128&d=identicon&r=PG", "display_name": "vlavyb", "link": "https://stackoverflow.com/users/1886725/vlavyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 39003771, "answer_count": 1, "score": 0, "last_activity_date": 1471459814, "creation_date": 1471452618, "last_edit_date": 1471453029, "question_id": 39002246, "link": "https://stackoverflow.com/questions/39002246/csv-parser-in-c-doesnt-read-the-first-element", "title": "CSV parser in C++ doesn&#39;t read the first element", "body": "<p>I extracted this piece of code to parse a CSV file, however it doesn't read the first element for the first n-1 rows. I can't figure it out why, and when I copy the data into a new empty file and save it as CSV file, the error disappears and it works fine. Here are the links for the <a href=\"https://www.dropbox.com/s/rg3xhdqle96rux1/example_file.csv?dl=0\" rel=\"nofollow\">original</a> (error happens) and the <a href=\"https://www.dropbox.com/s/ejduf1caju0r6ql/test.csv?dl=0\" rel=\"nofollow\">copied</a> (error doesn't happen) CSV file. Could you please help me as why this is happening? </p>\n\n<p>Thank you.</p>\n\n<pre><code>#include &lt;boost/tokenizer.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nint main(int argc, char** argv)\n{\n    using namespace std;\n\n    if (argc != 2)\n    {\n        cerr &lt;&lt; \"Usage: \" &lt;&lt; argv[0] &lt;&lt; \" &lt;csv file&gt;\" &lt;&lt; endl;\n        return -1;\n    }\n\n    vector&lt; vector&lt;string&gt; &gt; csv_values;\n\n    fstream file(argv[1], ios::in);\n\n    if (file)\n    {\n        typedef boost::tokenizer&lt; boost::char_separator&lt;char&gt; &gt; Tokenizer;\n        boost::char_separator&lt;char&gt; sep(\",\");\n        string line;\n\n        while (getline(file, line))\n        {\n            Tokenizer info(line, sep);   // tokenize the line of data\n            vector&lt;string&gt; values;\n\n            for (Tokenizer::iterator it = info.begin(); it != info.end(); ++it)\n            {\n                // convert data into double value, and store\n                values.push_back(it-&gt;c_str());\n            }\n\n            // store array of values\n            csv_values.push_back(values);\n        }\n    }\n    else\n    {\n        cerr &lt;&lt; \"Error: Unable to open file \" &lt;&lt; argv[1] &lt;&lt; endl;\n        return -1;\n    }\n\n    // display results\n    cout.precision(1);\n    cout.setf(ios::fixed,ios::floatfield);\n\n    for (vector&lt; vector&lt;string&gt; &gt;::const_iterator it = csv_values.begin(); it != csv_values.end(); ++it)\n    {\n\n        const vector&lt;string&gt;&amp; values = *it;\n\n        for (vector&lt;string&gt;::const_iterator it2 = values.begin(); it2 != values.end(); ++it2)\n        {\n            cout &lt;&lt; *it2 &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "vector", "data-structures", "reference"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471451917, "post_id": 39001994, "comment_id": 65355719, "body": "Your two examples are UB because <code>erase(begin)</code> invalidates all iterators, pointers, and references. Can&#39;t you just store the <i>index</i>, not any iterator, and adjust as needed as you go along? I had a similar problem recently where I realised I was at risk of invaliding an iterator I was using - and then spent ages worrying about reallocation, etc - before realising that all I need is to know which index the element of interest is (or in your case, was) at in order to get back to it later. So whether the vector has been reallocated or not now doesn&#39;t matter at all, and my code just works."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471452086, "post_id": 39001994, "comment_id": 65355807, "body": "@underscore_d also index can become invalid after <code>erase</code> (or stay valid but index to a different element)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471452143, "post_id": 39001994, "comment_id": 65355843, "body": "@mvidelgauz Yes, I just edited to say that the OP can adjust the index if they know how it&#39;s &#39;drifting&#39;. That is defined behaviour, rather than assuming they can adjust an iterator or pointer later, since the entire buffer might have been moved during the manipulation."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1471452152, "post_id": 39001994, "comment_id": 65355851, "body": "The second example is not UB.  The <code>shared_ptr</code> is just entirely independent of the <code>vector</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1471452185, "post_id": 39001994, "comment_id": 65355868, "body": "The simplest solution will be to go for a <code>vector</code> of <code>shared_ptr</code>s, with your &quot;observers&quot; being <code>weak_ptr</code>s."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1471452316, "post_id": 39001994, "comment_id": 65355931, "body": "@aschepler OK, that&#39;s not UB, but is it really doing what the OP thinks it is? It&#39;s just copying the element and returning a pointer to the copy. Why not just take a copy by-value in that case? The OP wants some kind of ill-defined &#39;reference to a position in the container&#39;, not just a copy of any element, which is what both of these give them."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1471452324, "post_id": 39001994, "comment_id": 65355934, "body": "@underscore_d my feeling is that <code>vector</code> is not best way to implement such things (very volatile containers). May be <code>map</code>? Even using <code>int</code>s as keys, with map they will stay valid always except when that the same key is erased"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 2, "creation_date": 1471452419, "post_id": 39001994, "comment_id": 65355989, "body": "@mvidelgauz Indeed, or <code>list</code>, which seems even better - only invalidates iterators for the <code>erase()</code>d element."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 2, "creation_date": 1471452451, "post_id": 39001994, "comment_id": 65356006, "body": "@mvidelgauz If the container type can be changed, a <code>std::list</code> would be the simplest thing giving the desired behavior."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471452571, "post_id": 39001994, "comment_id": 65356081, "body": "@underscore_d and @aschepler you both are right. again I am caught with my disregarding of <code>list</code> existence, my bad..."}, {"owner": {"reputation": 313, "user_id": 5266114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da9393a37aaab7c5cb5707dd6371e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Tar", "link": "https://stackoverflow.com/users/5266114/tar"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1471452599, "post_id": 39001994, "comment_id": 65356097, "body": "@aschepler Yes, the container type can definitely be changed, in-fact, that is the crux of my question, to ask what alternate approaches (as mine is clearly not valid in its current state) would be best for the desired effect."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1471455190, "post_id": 39002250, "comment_id": 65357509, "body": "<code>std::list</code> might be better, as using a <code>map</code> would mean adding a requirement for keys: if these have no meaning in the OP&#39;s case, they would have to be artificially/arbitrarily grafted onto the program&#39;s design. In contrast, with <code>list</code>, they could just keep safe iterators/pointers/references to elements, which would only be invalidated by <code>erase()</code>ing that specific element. Btw, they get the same guarantees with <code>map</code>s too, but again with the added requirement of keys that might not have any use."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6697869"}, "is_accepted": false, "score": 2, "last_activity_date": 1471452629, "creation_date": 1471452629, "answer_id": 39002250, "question_id": 39001994, "link": "https://stackoverflow.com/questions/39001994/how-to-maintain-reference-pointer-link-to-vector-element-after-change-to-vector/39002250#39002250", "title": "How to maintain reference/pointer/link to vector element after change to vector?", "body": "<p>A container that stores key/value pairs might work for you. For example, <code>std::map</code> or <code>std::unordered_map</code>.</p>\n\n<p>When using these containers, you'd keep a reference to the desired object by storing the key. If you want to modify said object, just look it up in the container using the key. Now you can add/remove other objects as much as you want without affecting the object in question (assuming the added/removed objects have unique keys).</p>\n"}, {"tags": [], "owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "is_accepted": false, "score": 2, "last_activity_date": 1471453632, "last_edit_date": 1471453632, "creation_date": 1471452775, "answer_id": 39002312, "question_id": 39001994, "link": "https://stackoverflow.com/questions/39001994/how-to-maintain-reference-pointer-link-to-vector-element-after-change-to-vector/39002312#39002312", "title": "How to maintain reference/pointer/link to vector element after change to vector?", "body": "<p>If there is a way for you to keep using a vector and change the way you manage your objects, then you won't get much more performance than what you have now.</p>\n\n<p>Otherwise, you can use a <em>stable</em> vector (<a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost/container/stable_vector.html\" rel=\"nofollow\">here's the boost version</a>). It is essentially a vector of pointers, which grants it iterator and reference stability. This means that iterators (pointers) and references to the elements are not invalidated by any operation other than removing the element itself.</p>\n\n<p>Of course, there are some big drawbacks to this, mainly in performance. The two main performance issues are the fact that you go through a pointer every time you want to access an element, and the fact that the elements are not stored contiguously (which of course impacts the speed of iteration).</p>\n\n<p>However, it also has advantages over other pointer-heavy data types (lists, sets, maps). Mainly, it performs lookup and pushbacks in constant time, even though it's slower than a normal vector.</p>\n\n<p>Then again, if you really need performance, you might want to keep your vector and rethink your design around it.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1471453259, "creation_date": 1471453259, "answer_id": 39002426, "question_id": 39001994, "link": "https://stackoverflow.com/questions/39001994/how-to-maintain-reference-pointer-link-to-vector-element-after-change-to-vector/39002426#39002426", "title": "How to maintain reference/pointer/link to vector element after change to vector?", "body": "<p>One possible option is to have the vector store <code>std::shared_ptr</code> objects, and issue <code>std::weak_ptr</code> or <code>std::shared_ptr</code> objects to refer to the object in question.</p>\n\n<pre><code>std::vector&lt;std::shared_ptr&lt;int&gt;&gt; ints;\nfor(size_t i = 0; i &lt; 10000; i++) {\n    ints.emplace_back(std::make_shared&lt;int&gt;(int(i)));\n}\nstd::weak_ptr&lt;int&gt; my_important_int = ints[6000];\n{\n    auto lock = my_important_int.lock();\n    if(lock) std::cout &lt;&lt; *lock &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"index 6000 expired.\" &lt;&lt; std::endl;\n}\n\nauto erase_it = std:remove_if(ints.begin(), ints.end(), [](auto &amp; i) {return (*i) &gt; 5000 &amp;&amp; ((*i) % 4) != 0;});\nints.erase(erase_it, ints.end());\n\n{\n    auto lock = my_important_int.lock();\n    if(lock) std::cout &lt;&lt; *lock &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"index 6000 expired.\" &lt;&lt; std::endl;\n}\n\nints.erase(ints.begin(), ints.end());\n\n{\n    auto lock = my_important_int.lock();\n    if(lock) std::cout &lt;&lt; *lock &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"index 6000 expired.\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Which should print out:</p>\n\n<pre><code>6000\n6000\nindex 6000 expired.\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 5266114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da9393a37aaab7c5cb5707dd6371e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Tar", "link": "https://stackoverflow.com/users/5266114/tar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "accepted_answer_id": 39002426, "answer_count": 3, "score": 2, "last_activity_date": 1471453632, "creation_date": 1471451773, "question_id": 39001994, "link": "https://stackoverflow.com/questions/39001994/how-to-maintain-reference-pointer-link-to-vector-element-after-change-to-vector", "title": "How to maintain reference/pointer/link to vector element after change to vector?", "body": "<p>I have a <code>std::vector</code> of a custom class (using <code>int</code> in sample for simplicity). I would like to keep a reference/pointer/link/other to a member of the vector. However, the vector frequently has elements removed and added. </p>\n\n<p>To illustrate my point, in the sample below I take either a reference or a pointer to the second element of the vector. I use the reference/pointer to increase the value of the chosen element. I then erase the first element, and use the ref/pointer to increment again. </p>\n\n<p>Reference example:</p>\n\n<pre><code>std::vector&lt;int&gt; intVect = {1,1,1};\nint&amp; refI = intVect.at(1);\nrefI++;\nintVect.erase(intVect.begin());\nrefI++;\n</code></pre>\n\n<p>Smart-Pointer example: </p>\n\n<pre><code>std::vector&lt;int&gt; intVect2 = {1,1,1};\nstd::shared_ptr&lt;int&gt; ptrI = std::make_shared&lt;int&gt;(intVect2.at(1)) ;\n*ptrI = *ptrI +1;\nintVect2.erase(intVect2.begin());\n*ptrI = *ptrI +1;\n</code></pre>\n\n<p>What I would like to happen is to end up with the referenced element to have a value of 3, the final vector being composed of <code>{3,1}</code>. However, in the reference example, the final vector is <code>{2,2}</code>, and in the pointer example the final vector is <code>{1,1}</code>.</p>\n\n<p>Understanding that the pointer is essentially a memory address, I can understand why this method might not be possible, but if it somehow is, let me know. </p>\n\n<p><strong>The more important question</strong> is then, what alternate approach or structure could be used that would allow for some form of ref/pointer/link/other to that element (be it a value or an object) that is viable after adding members to, or removing members from, the vector(or other structure) that contains it?</p>\n\n<p><strong>For extra credit:</strong></p>\n\n<p>The objects I am actually working with have a <code>position</code> property. I have a second structure that needs to keep track of the objects for quick lookup of which objects are at which positions. I am currently using a grid (vector of vectors) to represent possible positions, each holding indexes into the vector of objects for the objects currently at the position. However, when an object is deleted from the vector (which happens very frequently, up to hundreds of times per iteration), my current resort is to loop through every grid position and decrement any indexes greater than the deleted index, which is slow and clumsy. Additional thoughts in regards to this problem in context are much appreciated, but my key question concerns the above examples. </p>\n"}, {"tags": ["c++", "debugging", "visual-c++", "extern"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1471451751, "post_id": 39001920, "comment_id": 65355619, "body": "That&#39;s the same setup I use. I&#39;m not sure how to reproduce. Did you say console is a global variable initialized before main? Have you tried a breakpoint? Perhaps an initialize function would fix this."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1471452088, "post_id": 39001920, "comment_id": 65355808, "body": "Have you added the library in your project settings, or are you just including the header file? Second thought, you&#39;d get a linkage error for <code>console </code> if you haven&#39;t linked that library, so it has to be something else..."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1471452220, "post_id": 39001920, "comment_id": 65355884, "body": "That would give link errors, not a runtime issue."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471452822, "post_id": 39001920, "comment_id": 65356208, "body": "@Water <code>Console *console = new Console();</code>  -- Are you sure this is the exact code you have?  That <code>console</code> is not the same as your <code>extern</code> variable which happens to have the same name."}, {"owner": {"reputation": 2335, "user_id": 3453041, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/024667382dfea30a6c96bed77f8b5c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Water", "link": "https://stackoverflow.com/users/3453041/water"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1471452928, "post_id": 39001920, "comment_id": 65356267, "body": "@PaulMcKenzie I copy pasted it. However I think you&#39;re onto something, it appears other code is getting called before the main function that don&#39;t let the global variable get initialized. Is there a way to ensure that the variable is set before being used? I don&#39;t know if that will require changing the code to use a singleton pattern, or if there is a way to make sure the <code>console</code> is run before everything else (of which I don&#39;t know how to do currently)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471452989, "post_id": 39001920, "comment_id": 65356287, "body": "@Water I updated my comment, but since you bring it up, yes, make sure the line is executed.  But again, that line of code you posted has issues, such as it is not the same variable as your <code>extern</code> variable.  This <code>Console *console = new Console();</code> declares a brand new variable called <code>console</code>, different than the <code>extern</code> variable."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1471453647, "post_id": 39001920, "comment_id": 65356664, "body": "Oh yeah, that would be it. And I was posting an answer on how to control the order of initialization before main. I&#39;ll delete that. :)"}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 1, "last_activity_date": 1471455339, "last_edit_date": 1471455339, "creation_date": 1471455028, "answer_id": 39002930, "question_id": 39001920, "link": "https://stackoverflow.com/questions/39001920/extern-pointer-is-null-in-static-library-worked-fine-when-not-a-static-library/39002930#39002930", "title": "Extern pointer is null in static library, worked fine when not a static library", "body": "<p>The clue is in this comment:  \"it appears other code is getting called before the main function that don't let the global variable get initialized.\"</p>\n\n<p>The code referencing <code>console</code> is probably running as part of the initialization of another global and, in this case, is happening before the initialization of <code>console</code>.  You have to be very careful to be sure that you're not depending on the order of the global initializers.  You were probably getting lucky before you split the program, and now your luck has run out.</p>\n\n<p>The easiest way to fix it is to use a singleton pattern.  Instead of having other parts of the program directly reference the pointer, you have them call a function that returns the pointer, and that function will initialize it the first time.  This ensures that it's initialized before it's used.</p>\n\n<p>Here's a common pattern for it:</p>\n\n<pre><code>Console *GetConsole() {\n    static Console *console = new Console();\n    return console;\n}\n</code></pre>\n\n<p>Now console is no longer a global variable.  Everything that wants to access the console calls <code>GetConsole</code> instead.</p>\n\n<p>The function-local static variable will be initialized the first time the function is called, and after that it just returns the value.  If you have multiple threads and an older compiler, you have to do more work to protect against a possible race condition.  Modern compilers should do the initialization in a thread-safe way.</p>\n"}], "owner": {"reputation": 2335, "user_id": 3453041, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/024667382dfea30a6c96bed77f8b5c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Water", "link": "https://stackoverflow.com/users/3453041/water"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 39002930, "answer_count": 1, "score": 1, "last_activity_date": 1471455339, "creation_date": 1471451490, "question_id": 39001920, "link": "https://stackoverflow.com/questions/39001920/extern-pointer-is-null-in-static-library-worked-fine-when-not-a-static-library", "title": "Extern pointer is null in static library, worked fine when not a static library", "body": "<p>I broke my Visual Studio project (2015, C++) into three pieces:</p>\n\n<ul>\n<li>The main application in a static library</li>\n<li>The executable which just has a main function</li>\n<li>Unit tests which use the static .lib file so that they can import the required classes and do the unit tests on them.</li>\n</ul>\n\n<p>Before I split it into a lib/exe/tests, the main application was just a standalone executable, and it worked perfectly fine.</p>\n\n<p>Now I can't run the executable with only the main function, nor the unit tests as a certain pointer is always null. The only main difference is that I'm using a raw pointer in this example, but I was using a unique_ptr in my code (currently however I switched to the raw pointer just to make sure this following example is as accurate as possible and it didn't magically compile/run properly with the raw pointer).</p>\n\n<p>The code looks very similar to the following (the extra code has been removed):</p>\n\n<pre><code>// console.hpp\nextern Console *console;\n</code></pre>\n\n<p>The implementation cpp file (only of what is needed):</p>\n\n<pre><code>// console.cpp\nConsole *console = new Console();\n</code></pre>\n\n<p>Now in some unrelated function, this code fails due to the console pointer being a nullptr:</p>\n\n<pre><code>// some_other_file.cpp\n#include \"console.hpp\"\n\n    // Inside some function...\n    console-&gt;doSomething();  // console is NULL\n</code></pre>\n\n<p>Again, the code I have <em>worked perfectly</em> fine when it was in one project. Regardless, it all compiles fine with no linking errors even though it has been broken into 3 pieces, but now that pointer is always null.</p>\n\n<p>As a last interesting note, the non-pointer variables that are global and extern do work. Is this something limited to pointers/unique_ptrs?</p>\n\n<p>Is this something fixable by a singleton pattern?</p>\n"}, {"tags": ["c++", "mfc", "activex"], "comments": [{"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 2, "creation_date": 1471451695, "post_id": 39001918, "comment_id": 65355599, "body": "UI is executing in its own thread and you are locking that thread if you execute your (long running) code in response to a UI event (a button click?). You need to create another so-called <a href=\"https://en.wikipedia.org/wiki/Thread_pool\" rel=\"nofollow noreferrer\">worker thread</a>"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 1, "creation_date": 1471451815, "post_id": 39001918, "comment_id": 65355663, "body": "Another approach is to perform you measurement in small steps and execute one step per <a href=\"https://msdn.microsoft.com/en-us/library/3e077sxt.aspx\" rel=\"nofollow noreferrer\">onIdle</a>"}, {"owner": {"reputation": 173, "user_id": 2664396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb50dd62c726b6bb962067fa9ee478d?s=128&d=identicon&r=PG", "display_name": "J\u0101nis \u0160mits", "link": "https://stackoverflow.com/users/2664396/j%c4%81nis-%c5%a0mits"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471452634, "post_id": 39001918, "comment_id": 65356120, "body": "Thank you! I guess I will start with trying to make onIdle work. To be honest I had a hard time understanding the various tutorials on worker/UI threads."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471452847, "post_id": 39001918, "comment_id": 65356223, "body": "onIdle will only work good if you really can split your measurement into VERY small and fast steps. Generally threads are better - that&#39;s exactly what they were invented for, but you&#39;ll need to pass not a short and easy learning curve..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1471452915, "post_id": 39001918, "comment_id": 65356260, "body": "@J\u0101nis\u0160mits: I&#39;d stay <i>away</i> from <code>onIdle</code> if at all possible. It was pretty much necessary on 16-bit Windows, and has been retained all these years primarily for the sake of backward compatibility. Your case fits much better with using a background thread. The docs get confusing because they cover lots of corner cases, but using them for a case like this is really quite simple."}, {"owner": {"reputation": 173, "user_id": 2664396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb50dd62c726b6bb962067fa9ee478d?s=128&d=identicon&r=PG", "display_name": "J\u0101nis \u0160mits", "link": "https://stackoverflow.com/users/2664396/j%c4%81nis-%c5%a0mits"}, "edited": false, "score": 0, "creation_date": 1471453205, "post_id": 39001918, "comment_id": 65356402, "body": "Ok, I will heed your advice and try to work through the docs/tutorials, thank you! I guess <a href=\"https://msdn.microsoft.com/en-us/library/975t8ks0.aspx\" rel=\"nofollow noreferrer\">this</a> is a good place to start?"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471453507, "post_id": 39001918, "comment_id": 65356588, "body": "@J\u0101nis\u0160mits You are right but usually business interests cannot be just discarded (hard to admit it but I was beaten by my managers many times for doing <i>&quot;just correct&quot;</i> things). If thread approach will take OP a week to implement and <i>bad</i> onIdle will just work in 2 hours than this bad option has to be on the table for him to choose"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1471455024, "post_id": 39001918, "comment_id": 65357414, "body": "@JerryCoffin my previous comment was for you actually, just typo..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471458996, "post_id": 39001918, "comment_id": 65359610, "body": "@mvidelgauz: I would be rather surprised to see an OnIdle implementation done in 2 hours, but a thread-based implementation take a week. In fact, rather the opposite tends to be the case: using OnIdle requires that you split the task up into little pieces explicitly, where a thread-based version lets you just write your code normally, and then use a fairly simple bit of code to start it running in a separate thread. In this case, it looks like the result is being handled as Windows messages, in which case you need to use PostMessage instead SendMessage, but little else."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1471460019, "post_id": 39001918, "comment_id": 65360139, "body": "@JerryCoffin Yes, I know what you are talking about, you are right. But it depends on that worker task. Sometimes it is naturaly split in small steps without inventing a special algorithm to achive it, while threads require syncing, at least to stop. Anyway, what I am standing with is that both options do exist and it is OP who should make a choice (probably by trial) taking business goal and schedule as priority"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1471462286, "post_id": 39001918, "comment_id": 65361261, "body": "@JerryCoffin <i>&quot;I would be rather surprised to see ... a thread-based implementation take a week&quot;</i> take into account that OP is not experienced programmer... His words: <i>&quot; I had a hard time understanding the various tutorials on worker/UI threads&quot;</i>"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471467702, "post_id": 39001918, "comment_id": 65364054, "body": "@mvidelgauz: I did take that into account. The fact is, that <code>OnIdle</code> is a <i>pain</i> to use well. Using enough to use a thread reasonably well isn&#39;t nearly as much work."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1471470035, "post_id": 39001918, "comment_id": 65365099, "body": "@JerryCoffin Ok, I think we gave OP enough info to start with. If he will have another questions we&#39;ll see them"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1471490674, "post_id": 39001918, "comment_id": 65370628, "body": "You make it sound that you chose MFC because you have to use an ActiveX control. MFC is not required to use an ActiveX control. A plain Windows API (maybe with ATL to make COM easier and safer) would do just fine. Just mentioning this, since MFC has a steep learning curve attached as well."}], "owner": {"reputation": 173, "user_id": 2664396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb50dd62c726b6bb962067fa9ee478d?s=128&d=identicon&r=PG", "display_name": "J\u0101nis \u0160mits", "link": "https://stackoverflow.com/users/2664396/j%c4%81nis-%c5%a0mits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471451481, "creation_date": 1471451481, "question_id": 39001918, "link": "https://stackoverflow.com/questions/39001918/mfc-c-keep-ui-from-locking-up-while-event-handler-is-running", "title": "MFC C++ Keep UI from locking up while event handler is running", "body": "<p>I come from a physics background so I have very little experience with MFC. However the Thorlabs stepper motor controller we are using talks to the PC through an ActiveX control.</p>\n\n<p>I have written a little program that moves a motor, measures the signal at that point and then moves on in the process scanning a 2D area. However the UI locks up while the measurement is running. Is there any way to prevent this from happening? It would't be a proble aside from the fact that connections with the various devices should be properly closed which can be done with the \"Proper quit\" button if one could click it.</p>\n\n<p>The UI looks something like this:\n<a href=\"https://i.stack.imgur.com/GCHgz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GCHgz.png\" alt=\"The UI of the program at question\"></a></p>\n"}, {"tags": ["python", "c++", "cython"], "answers": [{"tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": false, "score": 0, "last_activity_date": 1471503189, "last_edit_date": 1471503189, "creation_date": 1471454173, "answer_id": 39002696, "question_id": 39001828, "link": "https://stackoverflow.com/questions/39001828/cython-error-by-python-import/39002696#39002696", "title": "cython error by python import", "body": "<p><code>bcm2835_init</code> is presumably in \"bcm2835.cpp\" so you need to add that to <code>sources</code> in \"setup.py\"</p>\n\n<pre><code>sources=[\"dev.pyx\",\"Device.cpp\",\"bcm2835.cpp\"]\n</code></pre>\n\n<p>Alternatively, if you have a bcm2835 library already compiled you might want to link to it by adding to \"setup.py\"</p>\n\n<pre><code>libraries = [\"bcm2835\"]\n</code></pre>\n\n<p>You're getting the error because it you call the function (in \"Device.cpp\") but never provide a definition of the function.</p>\n"}], "owner": {"reputation": 1, "user_id": 6726971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9edd5ebb385e9d65f841cec45bda978f?s=128&d=identicon&r=PG&f=1", "display_name": "nico_1994", "link": "https://stackoverflow.com/users/6726971/nico-1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471525834, "creation_date": 1471451167, "last_edit_date": 1471459299, "question_id": 39001828, "link": "https://stackoverflow.com/questions/39001828/cython-error-by-python-import", "title": "cython error by python import", "body": "<p>I\u2019m making an C++ class to manage the communication with a device (SPI). The idea is to use this C++ class on an Arduino and a Raspberry Pi. This way I need to make this class only once. </p>\n\n<p>I will use the class on the Arduino (this is no problem).\nI also want to use it on my Raspberry Pi together with python. (Here is the problem)</p>\n\n<p>I already made a test class (Rectangle) to use it on both. This one was successful :)</p>\n\n<p>Now I stumble across a problem with my real class. </p>\n\n<p>My idea was to make a <code>namespace</code> with 2 classes inside (one <code>public</code>, one <code>private</code>). The <code>public</code> one to manage the communication of the device. The <code>private</code> one to manage the SPI bus needed for the device. </p>\n\n<p>Now I want to make the SPI class with the bcm2835 class from mikem, this is where I get an error. (<a href=\"http://www.airspayce.com/mikem/bcm2835/\" rel=\"nofollow\">http://www.airspayce.com/mikem/bcm2835/</a>).</p>\n\n<p><strong><em>The next files I made (I know, it\u2019s still public):</em></strong>\n<em>Device.h</em></p>\n\n<pre><code>namespace device {\n    class Spi {\n        public:\n            int speed, modus;\n            Spi(int speed, int modus);\n            ~Spi();\n            void openSpi();\n            void closeSpi();\n            void writeSpi(int dataToWrite);\n            int readSpi();\n    };\n}\n</code></pre>\n\n<p><em>Device.cpp</em></p>\n\n<pre><code>#include \"Device.h\"\n#include \u201cbcm2835.h\u201d\n#include &lt;iostream&gt;\n\nusing namespace device;\n\n//###############################################################################################\n//***********************************************************************************************\n//      Constructors:\n//                      Default constructor: speed = 1MHz, modus = 0\n//                      Specific constructor: speed = var(int), modus = var(int)\n//***********************************************************************************************\n//Specific\nSpi::Spi(int speed, int modus) {\n    speed = speed;\n    modus = modus;\n}\n\n//Default\nSpi::~Spi() {\n}\n//###############################################################################################\n\nvoid Spi::openSpi() {\n    if (!bcm2835_init())\n    {\n      std::cout&lt;&lt; \"bcm2835_init failed.\" ;\n      //return 1;\n    }\n    std::cout &lt;&lt; \"SPI is open.\";\n}\n\nvoid Spi::closeSpi()\n{\n    std::cout &lt;&lt; \"SPI is closed.\";\n}\n\nvoid Spi::writeSpi(int dataToWrite) {\n    std::cout &lt;&lt; \"SPI write: \" &lt;&lt; dataToWrite;\n}\n\nint Spi::readSpi() {\n    return 0;\n}\n</code></pre>\n\n<p><em>dev.pyx</em></p>\n\n<pre><code>cdef extern from \"Device.h\" namespace \"device\":\n    cdef cppclass Spi:\n        Spi(int, int) except +\n        int speed, modus\n        void openSpi()\n        void closeSpi()\n        void writeSpi(int)\n        int readSpi()\n\ncdef class PySpi:\n    cdef Spi *thisptr\n    def __cinit__(self, int speed, int modus):\n        self.thisptr = new Spi(speed, modus)\n    def __dealloc__(self):\n        del self.thisptr\n    def openSpi(self):\n        self.thisptr.openSpi()\n    def closeSpi(self):\n        self.thisptr.closeSpi()\n    def writeSpi(self, data):\n        self.thisptr.writeSpi(data)\n    def readSpi(self):\n        return self.thisptr.readSpi()\n</code></pre>\n\n<p><em>setup.py</em></p>\n\n<pre><code>from distutils.core import setup, Extension\nfrom Cython.Build import cythonize\n\nsetup(ext_modules = cythonize(Extension(\n        \"dev\",\n        sources=[\"dev.pyx\",\"Device.cpp\"],\n        language=\"c++\",\n    )))\n</code></pre>\n\n<p>I get no errors while building, but when I do \u201cimport dev\u201d inside python. I get the error:</p>\n\n<blockquote>\n  <p>undefined symbol: bcm2835_init</p>\n</blockquote>\n\n<p>Does anyone know what I do wrong? </p>\n"}, {"tags": ["c++", "xcode"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471450927, "post_id": 39001695, "comment_id": 65355184, "body": "And what is the problems you have? What works? What doesn&#39;t work? Please elaborate!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471450965, "post_id": 39001695, "comment_id": 65355216, "body": "Also, you <i>do</i> know that the &quot;C:\\&quot; prompt and <code>.exe</code> files are used on <i>Windows</i> and not on macOS?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1471451320, "post_id": 39001695, "comment_id": 65355407, "body": "Are you asking how those commands should be formed to accomplish the same task on your Mac as you do on Windows. ? Just checking."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1471451920, "post_id": 39001695, "comment_id": 65355721, "body": "Sorry, you should really go for another book:  a c++ tutorial that in 2016 still has <code>#include &lt;stdio.h&gt;</code> is certainly not the best source for learning proper C++.  And if stdio would really be needed because of some legacy C functions,  in c++ it should be  <code>#include &lt;cstdio&gt;</code>."}, {"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1471455271, "post_id": 39001695, "comment_id": 65357546, "body": "@Christophe Xcode automatically puts that in there. i meant to delete it."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "edited": false, "score": 0, "creation_date": 1471455112, "post_id": 39001991, "comment_id": 65357456, "body": "This is what i needed but it still isn&#39;t executing any program. is there something else that needs to be done before hand? like an option to connect Xcode or terminal to a text editor to run the program? @ShadersAndTrees"}, {"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "edited": false, "score": 0, "creation_date": 1471455171, "post_id": 39001991, "comment_id": 65357499, "body": "it doesn&#39;t give me any feedback either in terminal it simply creates a new line"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1471456090, "post_id": 39001991, "comment_id": 65357975, "body": "The output is a file called <code>poem.txt</code> not anything in Terminal."}, {"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1471456257, "post_id": 39001991, "comment_id": 65358072, "body": "@MarkSetchell okay but in the book it shows that (in the windows version) notepad pops up and shows the poem.txt file when it is run how do i get it to do that"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1471456619, "post_id": 39001991, "comment_id": 65358278, "body": "Macs don&#39;t have <code>Notepad</code> and this program doesn&#39;t appear to open it anyway. Try <code>open poem.txt</code> in Terminal. If that works, add something like <code>system(&quot;open poem.txt&quot;);</code> near the end of your program."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6697869"}, "is_accepted": true, "score": 1, "last_activity_date": 1472160263, "last_edit_date": 1472160263, "creation_date": 1471451760, "answer_id": 39001991, "question_id": 39001695, "link": "https://stackoverflow.com/questions/39001695/writing-a-file-in-c-with-xcode-and-running-with-terminal/39001991#39001991", "title": "writing a file in c++ with Xcode and running with terminal", "body": "<p>On OS X, the first line in Terminal would be:</p>\n\n<p><code>g++ write.cpp -o write</code></p>\n\n<p>The second line would be:</p>\n\n<p><code>./write</code></p>\n\n<p>The first line compiles your code and creates an executable called <code>write</code>. The second line runs the executable.</p>\n"}], "owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 39001991, "answer_count": 1, "score": 1, "last_activity_date": 1472160263, "creation_date": 1471450727, "question_id": 39001695, "link": "https://stackoverflow.com/questions/39001695/writing-a-file-in-c-with-xcode-and-running-with-terminal", "title": "writing a file in c++ with Xcode and running with terminal", "body": "<p>I'm very new to programming and i bought myself a self help book but the book is designed for windows. I've mostly been able to translate so far but i'm stumped on writing/appending files and running them through terminal. I was wondering if someone could translate these lines for me. these lines are what I'm told to type in command prompt/terminal.</p>\n\n<p>C:\\MyPrograms> c++ write.cpp -o write.exe</p>\n\n<p>C:\\MyPrograms> write</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\nstring poem = \"\\n\\tI never saw a man who looked\" ;\npoem.append(\"\\n\\tWith such a wistful eye\") ;\npoem.append(\"\\n\\tUpon that little tent of blue\") ;\npoem.append(\"\\n\\tWhich prisoners call the sky\") ;\n\nofstream writer(\"poem.txt\") ;\n\nif (! writer)\n{\n    cout &lt;&lt; \"Error opening file for output\" &lt;&lt; endl ;\n    return -1 ;             //signal an error then exit the program.\n}\n\nwriter &lt;&lt; poem &lt;&lt; endl ;            // write output\nwriter.close() ;                    // close filestream.\n\nreturn 0 ;\n}\n</code></pre>\n\n<p>This is the program i am trying to run named write.cpp please help thanks!</p>\n"}, {"tags": ["c++", "gcc", "libstdc++"], "comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1471450769, "post_id": 39001658, "comment_id": 65355081, "body": "I think g++ can dump its search path with some command line flag, which you can grep out of the output, and then try the directories to find the libraries."}], "answers": [{"comments": [{"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1471451264, "post_id": 39001836, "comment_id": 65355371, "body": "You just don&#39;t usually need to package the dynamic loader itself, <code>ld-linux*.so.*</code>, although, if the target system has very old glibc, you may have to."}, {"owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1471451309, "post_id": 39001836, "comment_id": 65355397, "body": "@Ruslan: true, although it really depends on what you&#39;re trying to do, maybe some chrooted environment."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1471461863, "post_id": 39001836, "comment_id": 65361063, "body": "I used the approach in my answer for libstdc++, then <code>-print-file-name</code> for other shared libraries I want to package."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1471465745, "post_id": 39001836, "comment_id": 65363103, "body": "(the advantage being that I can do so in make variables before I&#39;ve even built anything)"}, {"owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1471465955, "post_id": 39001836, "comment_id": 65363206, "body": "@LightnessRacesinOrbit: Well, YMMV, but for determining libraries used in run time I&#39;d rather use something that uses ld.so instead of GCC which is about compile time. Granted, there should be no practical difference, but who knows."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1471466460, "post_id": 39001836, "comment_id": 65363443, "body": "@RomanKhimov: Dunno, seems to me that it&#39;s <i>even better</i> to explicitly name the libraries that are actually being found during the build, so if there <i>were</i> a practical difference (I agree, there shouldn&#39;t be) I&#39;d definitely be getting what I want. And then I&#39;d be nuking the practical difference by redistributing literally the libraries I linked against and ensuring that these were the objects used at runtime (cos I&#39;m <code>rpath</code>ing)."}, {"owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1471468049, "post_id": 39001836, "comment_id": 65364220, "body": "@LightnessRacesinOrbit: maybe it&#39;s just very unusual for me to see GCC being used this way, because the usual package build process has separate stages for compilation, installation and packaging that involves automatic dependency finding, the latter never uses GCC and only operates on final resulting binaries. Also, the right answer might be dependant on the way you test your application, if you always test your full final (libraries included) package, then you may really not care much and use something that is easier to implement for some reason."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1471614464, "post_id": 39001836, "comment_id": 65430894, "body": "Your approach has the benefit of working even when <code>$(GCC_INSTALL_DIR)&#47;libstdc++.so</code> is a linker script, I&#39;ve discovered..."}], "tags": [], "owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "is_accepted": true, "score": 6, "last_activity_date": 1471451207, "creation_date": 1471451207, "answer_id": 39001836, "question_id": 39001658, "link": "https://stackoverflow.com/questions/39001658/how-can-i-programatically-determine-where-my-c-runtime-libraries-are/39001836#39001836", "title": "How can I programatically determine where my C++ runtime libraries are?", "body": "<p>If I understand correctly, you have already built your binaries and just want to get a list of runtime libraries to package them along with binaries? You can try using <code>ldd</code> for this, like:</p>\n\n<pre><code>&gt; ldd /usr/bin/ls\n    linux-vdso.so.1 (0x00007ffe76dd2000)\n    libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007fc97131f000)\n    libcap.so.2 =&gt; /lib64/libcap.so.2 (0x00007fc97111a000)\n    libacl.so.1 =&gt; /lib64/libacl.so.1 (0x00007fc970f10000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fc970b68000)\n    libpcre.so.1 =&gt; /usr/lib64/libpcre.so.1 (0x00007fc970902000)\n    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fc9706fd000)\n    /lib64/ld-linux-x86-64.so.2 (0x000055c4ba4ed000)\n    libattr.so.1 =&gt; /lib64/libattr.so.1 (0x00007fc9704f8000)\n    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fc9702db000)\n</code></pre>\n\n<p>This way you will see all libraries needed except, of course, the ones that are used via dlopen().</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1471461724, "post_id": 39002156, "comment_id": 65360997, "body": "@FirstStep: Yes and it&#39;s beautiful. Or seems to be, so far."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1471614475, "post_id": 39002156, "comment_id": 65430907, "body": "Bah, breaks when <code>libstdc++.so</code> at that location is a linker script."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1471461742, "last_edit_date": 1471461742, "creation_date": 1471452332, "answer_id": 39002156, "question_id": 39001658, "link": "https://stackoverflow.com/questions/39001658/how-can-i-programatically-determine-where-my-c-runtime-libraries-are/39002156#39002156", "title": "How can I programatically determine where my C++ runtime libraries are?", "body": "<p>In my Makefile:</p>\n\n<pre><code>GCC_INSTALL_DIR := $(shell $(CXX) -print-search-dirs | grep install | cut -d' ' -f2)\n</code></pre>\n\n<p>&hellip;then my main build target will perform:</p>\n\n<pre><code>ln -sf $(GCC_INSTALL_DIR)/libstdc++.so $(BIN_DIR)/deps/\n</code></pre>\n\n<p>&hellip;and I can dump everything in <code>$(BIN_DIR)/deps</code> into the right place on install.</p>\n\n<p>I think.</p>\n"}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1099, "favorite_count": 2, "accepted_answer_id": 39001836, "answer_count": 2, "score": 3, "last_activity_date": 1471461742, "creation_date": 1471450598, "last_edit_date": 1495541612, "question_id": 39001658, "link": "https://stackoverflow.com/questions/39001658/how-can-i-programatically-determine-where-my-c-runtime-libraries-are", "title": "How can I programatically determine where my C++ runtime libraries are?", "body": "<p>I'm building C++11 with GCC 4.8 on CentOS 6 using \"hax\", then deploying on arbitrary CentOS 6 targets (on which anything C++-related out of the box will have been built as C++03 with GCC 4.3) <sup>(<a href=\"https://stackoverflow.com/q/38769843/560648\">ref</a>)</sup>.</p>\n\n<p>To make this work, I'm going to ship all of my third-party libs as well as the g++ runtimes, and <code>rpath</code> my executables so the newer libs are assuredly found in the proper place. For the runtimes, by my count I need to ship <code>libstdc++</code> and <code>libgcc_s</code>. But I need to know where they are on my build system so that I can package them up.</p>\n\n<p><strong>Is there some neat way I can query for their location from within my packaging script?</strong></p>\n\n<p><em>(If the best approach is too awkward I'll just link them statically, but I'd like to avoid that if I can as my project includes several executables. Also if I were to statically link</em> everything <em>I believe I'd run the risk of GPL-ing my whole project, e.g. by statically linking the MySQL C API via my C++ MySQL wrapper lib. Could do a mixture of both, I suppose, though <a href=\"https://stackoverflow.com/q/13636513/560648\">some sources warn against this</a>&hellip;)</em></p>\n\n<p>For bonus points, do I need to add anything to this list, out of <code>libssl</code>, <code>libcrypto</code>, <code>libm</code>, <code>libpthread</code>, <code>libc</code>, <code>librt</code>, <code>libz</code> and <code>ld-linux-x86-64</code>?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "edited": false, "score": 0, "creation_date": 1471450278, "post_id": 39001513, "comment_id": 65354786, "body": "So what&#39;s the issue? Is it not compiling? Or does it not do anything?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1471450408, "post_id": 39001513, "comment_id": 65354859, "body": "Copy any compilation errors or erroneous output you are getting as <b>text</b> and paste to the body of the question."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1471450518, "post_id": 39001513, "comment_id": 65354916, "body": "Drop a #error in the top of your character.h header (inside the include-guard) and make damn sure character.cpp, when compiled, is pulling in the header you think. It doesn&#39;t look like it, and judging by the <code>#include</code> hyjinx/differences, it seems you may suspect that as well. Your error isn&#39;t the marked line. the original error is in character.cpp, which says your member doesn&#39;t exist. Clearly it does exist in the header you provided here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1471450782, "post_id": 39001513, "comment_id": 65355088, "body": "You are includin a wrong .h file. Check the paths. Don&#39;t include with an absolute path."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1471457859, "post_id": 39001513, "comment_id": 65358964, "body": "You should avoid <code>using namespace std;</code>, especially in header files."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3092240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YZd9r.png?s=128&g=1", "display_name": "GTSpeedster", "link": "https://stackoverflow.com/users/3092240/gtspeedster"}, "is_accepted": false, "score": 0, "last_activity_date": 1471531542, "creation_date": 1471531542, "answer_id": 39021237, "question_id": 39001513, "link": "https://stackoverflow.com/questions/39001513/functions-in-class-one-is-seen-but-the-other-one-is-ignored/39021237#39021237", "title": "functions in class: one is seen, but the other one is ignored", "body": "<p>Thanks for your help guys!, I was really tired last night and didn't noticed that I was linking the wrong path in character.cpp</p>\n"}], "owner": {"reputation": 1, "user_id": 3092240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YZd9r.png?s=128&g=1", "display_name": "GTSpeedster", "link": "https://stackoverflow.com/users/3092240/gtspeedster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1471531542, "creation_date": 1471450153, "last_edit_date": 1471452428, "question_id": 39001513, "link": "https://stackoverflow.com/questions/39001513/functions-in-class-one-is-seen-but-the-other-one-is-ignored", "title": "functions in class: one is seen, but the other one is ignored", "body": "<p>I'm currently working on a little game using SFML and C++, but I have a problem. I have a class Character in character.h with 2 functions inside, but when I try to access these functions in an other file (Game.cpp), one works perfectly while the other acts as if it doesn't even exist. Since this is my first post, and I don't know how to properly showcase my code, so please tell me if I'm not clear enough.\nThanks to all of you and have a good day.</p>\n\n<p>error message: \n<a href=\"https://i.stack.imgur.com/hLU6y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hLU6y.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>/****CHARACTER.H****/\n#ifndef CHARACTER_H\n#define CHARACTER_H\n#include &lt;SFML/Graphics.hpp&gt;\n\nusing namespace std;\n\nclass Character{\n\npublic:\n    Character();\n    ~Character();\n    void initPlayer(string&amp; fileName, sf::IntRect rect);\n    void moveCharacter();\n    sf::Sprite m_sprite;\n\nprivate:\n    sf::VertexArray m_vertices;\n    sf::Texture m_texture;\n\n};\n\n#endif\n\n\n\n\n\n/****CHARACTER.CPP*****/\n#include \"/home/hichem/C++/sfml/Game Engine/character.h\"\n#include \"string\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nCharacter::Character(){\n\n\n}\n\nCharacter::~Character(){\n\n}\n\nvoid Character::initPlayer(string&amp; fileName, sf::IntRect rect){\n    if (!m_texture.loadFromFile(fileName, rect)){\n        cout &lt;&lt; \"failed to load image\" &lt;&lt; endl;\n    }\n    m_sprite.setTexture(m_texture);\n    m_sprite.setPosition(sf::Vector2f(400, 200));\n }\n\nvoid Character::moveCharacter(){\n\n}\n\n\n\n/****GAME.H****/\n#ifndef GAME_H\n#define GAME_H\n#include &lt;SFML/Graphics.hpp&gt;\n#include \"character.h\"\n#include \"tileMap.h\"\n#include \"string\"\n\nclass Game: public sf::Transformable{\n    public:\n        Game();\n        ~Game();\n        void run(sf::RenderWindow &amp;window);\n\n\n    private:\n        void event(sf::RenderWindow &amp;window);\n        void update();\n        void draw(sf::RenderWindow &amp;window);\n        TileMap carte;\n        Character player;\n        const int level_1[128] =\n        {\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n             0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        };\n\n};\n\n#endif // GAME_H\n\n\n\n/****GAME.CPP****/\n#include \"Game.h\"\n\nusing namespace std;\nGame::Game(){\n    string a = \"images/tiles.png\";\n    carte.load(a, sf::Vector2u(50, 50), level_1, 16, 8);\n    string b = \"images/player.png\";\n\n    /*FUNCTION THAT WORKS FROM CHARACTER.H*/\n    player.initPlayer(b, sf::IntRect(0,0,50,50));\n}\n\nGame::~Game(){\n    //dtor\n}\n\nvoid Game::event(sf::RenderWindow &amp;window){\n    sf::Event event;\n    while (window.pollEvent(event)){\n        if (event.type == sf::Event::Closed)\n            window.close();\n        /*FUNCTION THAT DOES NOT WORKS FROM CHARACTER.H*/\n        player.moveCharacter();\n    }\n}\n\nvoid Game::update(){\n\n}\n\nvoid Game::draw(sf::RenderWindow &amp;window){\n    window.clear();\n    window.draw(carte);\n    window.draw(player.m_sprite);\n    window.display();\n}\n\nvoid Game::run(sf::RenderWindow &amp;window){\n    while(window.isOpen()){\n        event(window);\n        update();\n        draw(window);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "http", "boost-asio"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1471452832, "post_id": 39001497, "comment_id": 65356215, "body": "Not able to reproduce it on my mac"}, {"owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1471454551, "post_id": 39001497, "comment_id": 65357160, "body": "Studying more, I find that Chrome is making two connection requests and the other browsers make just one. The first comes with an HTTP header but the second does not. It appears this is a bug in Chrome. The following post relates:  <a href=\"http://stackoverflow.com/questions/4761913/server-socket-receives-2-http-requests-when-i-send-from-chrome-and-receives-one\" title=\"server socket receives 2 http requests when i send from chrome and receives one\">stackoverflow.com/questions/4761913/&hellip;</a>"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1471455157, "post_id": 39001497, "comment_id": 65357488, "body": "I did notice the two requests from Chrome, one for &#39;/&#39; and another for &#39;favicon.ico&#39; and both requests appeared to be fine. Maybe you are using an old version of chrome ?"}, {"owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1471464773, "post_id": 39001497, "comment_id": 65362589, "body": "Yes, Chrome will separately try to fetch /favicon.ico, but that&#39;s unrelated to this."}], "answers": [{"comments": [{"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 1, "creation_date": 1471457880, "post_id": 39002952, "comment_id": 65358975, "body": "The whole idea of ASIO is to avoid the necessity of creating new threads. You just should not read unconditionally. You also should not create a socket every time. And not using new anyway, it sould just be a local variable."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 1, "creation_date": 1471457977, "post_id": 39002952, "comment_id": 65359024, "body": "And static is also not needed here."}, {"owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1471465084, "post_id": 39002952, "comment_id": 65362750, "body": "The &quot;static&quot; is an oopsie here. Thanks."}, {"owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1471465324, "post_id": 39002952, "comment_id": 65362882, "body": "As far as I can tell, even ASIO&#39;s asynchronous methods entail in-thread invocation of your callbacks, which means that one request will be handled at a time if you have only one thread. I haven&#39;t tested to confirm this yet, but I will. So if one request takes a long time and another comes in after the first, it will sit and wait until the first is done. Thus, I don&#39;t think ASIO obviates the need for multithreading.  <a href=\"http://www.boost.org/doc/libs/1_41_0/doc/html/boost_asio/overview/core/threads.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_41_0/doc/html/boost_asio/overview/core/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 1, "creation_date": 1471466372, "post_id": 39002952, "comment_id": 65363401, "body": "@IlyaPopov &quot;\t The whole idea of ASIO is to avoid the necessity of creating new threads&quot;. Certainly not. It kind of does provide you with an abstraction (bare minimal) on top of threads. But you gotta use threads when you have to (as per design) and will certainly be the case when you have to handle different types of asynchronous tasks like timer events, I/O events, blocking events etc."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1471466700, "post_id": 39002952, "comment_id": 65363548, "body": "@Arunmu With ASIO, you don&#39;t <i>necessarily</i> need to create a thread per connection. Of course, there are cases then you do want to create threads, but this will be motivated by other things."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1471466995, "post_id": 39002952, "comment_id": 65363724, "body": "@IlyaPopov Yeah, the requirement of thread per connection is a different story. My comment was strictly based on your first sentence of your first comment, the context of which was not clear until I reread the answer :)"}], "tags": [], "owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1471456430, "last_edit_date": 1495540849, "creation_date": 1471455099, "answer_id": 39002952, "question_id": 39001497, "link": "https://stackoverflow.com/questions/39001497/boostasioread-blocking-in-custom-web-service/39002952#39002952", "title": "boost::asio::read() blocking in custom web service", "body": "<p>It seems this results from a design quirk in Chrome. See this post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4761913/server-socket-receives-2-http-requests-when-i-send-from-chrome-and-receives-one\">server socket receives 2 http requests when I send from chrome and receives one when I send from firefox</a></p>\n\n<p>I see what's happening now. Chrome makes 2 connection requests. The first is for the desired page and contains a proper request HTTP header. The second connection, once accepted, does not contain even a single byte of input data. So my attempt to read that first byte goes unrewarded. Fortunately, the read attempt times out. That's easy enough to recover from with a try/catch.</p>\n\n<p>This appears to be a greedy optimization to speed up Chrome's performance. That is, it holds the next connection open until the browser needs something from the site, whence it sends the HTTP request on that open socket. It then immediately opens a new connection, again in anticipation of a future request. Although I get how this speeds Chrome's experience up, this seems a dubious design because of the added burden it places on the server.</p>\n\n<p>This is a good argument for opening a separate thread to handle each accepted socket. A thread could patiently hang out waiting for the never-forthcoming request while other threads handle other requests. To that end, I wrapped up everything after tcpAcceptor.accept(*socket); in a new thread so the loop can continue waiting for the next request.</p>\n"}], "owner": {"reputation": 169, "user_id": 260588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mP7X.jpg?s=128&g=1", "display_name": "Jim Carnicelli", "link": "https://stackoverflow.com/users/260588/jim-carnicelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1471456430, "creation_date": 1471450105, "question_id": 39001497, "link": "https://stackoverflow.com/questions/39001497/boostasioread-blocking-in-custom-web-service", "title": "boost::asio::read() blocking in custom web service", "body": "<p>I love seeing that there's a cross-platform standard for TCP/IP sockets emerging for C++ in boost. And so far I've been able to find help for all topics I've run into. But now I'm stuck on an odd behavior. I'm developing using Xcode 7.3.1 on an late-2013 iMac.</p>\n\n<p>I'm developing a simple web server for a special purpose. The code below is a pared down version that demonstrates the bad behavior:</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n\nusing namespace std;\nusing namespace boost;\nusing namespace boost::asio;\nusing namespace boost::asio::ip;\n\nint main(int argc, const char * argv[]) {\n\n    static asio::io_service ioService;\n    static tcp::acceptor tcpAcceptor(ioService, tcp::endpoint(tcp::v4(), 2080));\n\n    while (true) {\n\n        // creates a socket\n        tcp::socket* socket = new tcp::socket(ioService);\n\n        // wait and listen\n        tcpAcceptor.accept(*socket);\n\n        asio::streambuf inBuffer;\n        istream headerLineStream(&amp;inBuffer);\n\n        char buffer[1];\n        asio::read(*socket, asio::buffer(buffer, 1));  // &lt;--- Yuck!\n\n        asio::write(*socket, asio::buffer((string) \"HTTP/1.1 200 OK\\r\\n\\r\\nYup!\"));\n\n        socket-&gt;shutdown(asio::ip::tcp::socket::shutdown_both);\n        socket-&gt;close();\n        delete socket;\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I access this service, under a certain set of conditions, the browser will choke for upwards of 20 seconds. If I pause the program running in debug mode, I can see that the asio::read() call is blocking. It's literally waiting for even a single character to appear from the browser. Why is this?</p>\n\n<p>Let me clarify, because what I have to do to reproduce this on my machine is strange. Once I start the program (for debugging), I open the \"page\" from Chrome (as <a href=\"http://localhost:2080/\" rel=\"nofollow\">http://localhost:2080/</a>). I can hit Refresh many times and it works just fine. But then I use Firefox (or Safari) and it hangs for maybe 20 seconds, whence the page shows up as expected. Now get this. If, during that delay in Firefox, I hit Refresh in Chrome, the Firefox page shows up immediately, too. In another experiment, I hit Refresh in Chrome (works fine) and then hit Refresh in both Firefox and Safari. Both of them hang. I hit Refresh in Chrome and all 3 show up immediately.</p>\n\n<p>In a change to this experiment, as soon as I start this program, I hit Refresh in either Firefox or Safari and they work just fine. No matter how many times I refresh. And going back and forth between them. I'm literally holding down CMD-R to rapid-fire refresh these browsers. But as soon as I refresh Chrome on the same page and then try refreshing the other two browsers, they hang again.</p>\n\n<p>Having done web programming since around 1993, I know the HTTP standard well. The most basic workflow is that the browser initiates a TCP connection. As soon as the web server accepts the connection, the client sends an HTTP header. Something like \"GET /\\r\\n\\r\\n\" for the root page (\"/\"). The server typically reads all the header lines and stops until it gets to the first blank line, which signals the end of the headers and beginning of the uploaded content (e.g., POSTed form content), which the web application is free to consume or ignore. The server responds when it is ready with its own HTTP headers, starting typically with \"HTTP/1.1 200 OK\\r\\n\", followed by the actual page content (or binary file contents, etc).</p>\n\n<p>In my app, I'm actually using asio::read_until(*socket, inBuffer, \"\\r\\n\\r\\n\") to read the entire HTTP header. Since that was hanging, I thought maybe those other browsers were sending corrupt headers or something. Hence my trimming down of the sample to just reading a single character (should be the \"G\" in \"GET /\"). One single character. Nope.</p>\n\n<p>As a side note, I know I'm doing this synchronously, but I really wanted a simple, linear demo to show this bad behavior. I'm assuming that's not what's causing this problem, but I know it's possible.</p>\n\n<p>Any thoughts here? In my use case, this is sufferable, since the server does eventually respond, but I'd really rather understand eliminate this bad behavior.</p>\n"}, {"tags": ["c++", "performance", "memory-alignment", "avx", "avx2"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1471534804, "post_id": 39001456, "comment_id": 65395151, "body": "From my experience, ICC is known to (sometimes) lose restrict and aliasing attributes across inlined functions. I have never found a reliable work-around that doesn&#39;t involve manually optimizing. Generally speaking, ICC&#39;s advanced optimizations (i.e. vectorization, loop transforms) don&#39;t play well with zero-overhead abstractions that are zero-overhead with other compilers. I have no idea why, but they seem to only optimize their compiler for straight-line code with only loops. Any time there&#39;s a function call involved (inlined or not), things start to fall apart."}, {"owner": {"reputation": 51, "user_id": 6171832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bee9507e3d46363ab865aedfc6d3549?s=128&d=identicon&r=PG&f=1", "display_name": "NilZ", "link": "https://stackoverflow.com/users/6171832/nilz"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1471623683, "post_id": 39001456, "comment_id": 65436948, "body": "Thanks a lot for the quick reply. Is there an other compiler which supports this forwarding?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1471643339, "post_id": 39001456, "comment_id": 65446082, "body": "No idea. I don&#39;t rely on compilers for high-level optimizations because they are so bad and unreliable at it. I do know that MSVC does a pretty good job at preserving restrict/aliasing across inlined functions. But it&#39;s also terrible with advanced optimizations. GCC isn&#39;t able to utilize restrict as well as MSVC or ICC regardless of inlining. Supposedly they improved that for GCC6, but I haven&#39;t checked."}, {"owner": {"reputation": 4311, "user_id": 1669370, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/E2t7h.jpg?s=128&g=1", "display_name": "Regis Portalez", "link": "https://stackoverflow.com/users/1669370/regis-portalez"}, "edited": false, "score": 0, "creation_date": 1472636408, "post_id": 39001456, "comment_id": 65827946, "body": "did you try clang?"}], "owner": {"reputation": 51, "user_id": 6171832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bee9507e3d46363ab865aedfc6d3549?s=128&d=identicon&r=PG&f=1", "display_name": "NilZ", "link": "https://stackoverflow.com/users/6171832/nilz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1471449983, "creation_date": 1471449983, "question_id": 39001456, "link": "https://stackoverflow.com/questions/39001456/c-how-to-carry-over-alignment-and-restric-attributes-to-a-template-access-fun", "title": "C++: How to carry over alignment and restric attributes to a template access function", "body": "<p>I want to compute a general matrix matrix product</p>\n\n<pre><code>C = C + alpha*A*B\n</code></pre>\n\n<p>Now, the special situation in my context is that I know the number of columns of A (resp. the number of rows of B) at compile time. Therefore, I can hard-code this information, which naturally yields a significant performance boost.</p>\n\n<p>Up to now, I have done this in Fortran, which works, but requires me to re-write the same code over and over again for all possible scenarios. Therefore, I would like to write <em>one</em> C++ version of this function, in which I pass the size information at compile time.</p>\n\n<p>After a bit of trying, I finally arrived at the following solution</p>\n\n<pre><code>template&lt;size_t sizeA2&gt;\nvoid matrixMatrixProduct( double* __restrict__ pC,\n                          double const* __restrict__ pA,\n                          double const* __restrict__ pB,\n                          double alpha,\n                          size_t sizeA1,\n                          size_t sizeB2 )\n{\n\n  size_t outerLoopLimit = sizeA1;\n  size_t innerLoopLimit = sizeB2;\n\n  size_t sizeC2 = sizeB2;\n\n  for ( size_t i = 0; i &lt; outerLoopLimit; ++i )\n  {\n#pragma vector aligned\n#pragma ivdep\n    for ( size_t j = 0; j &lt; innerLoopLimit; ++j )\n    {\n#pragma vector aligned\n#pragma ivdep\n      for ( size_t k = 0; k &lt; sizeA2; ++k )\n      {\n        pC[i * sizeC2 + j] += alpha * pA[i * sizeA2 + k] * pB[k * sizeB2 + j];\n      } // end of k-loop\n    } // end of j-loop\n  } // end of i-loop\n\n}\n</code></pre>\n\n<p>Adding the restrict keyword and the two pragmas, I could convince the Intel Cpp compiler to vectorize the j-loop so that I got a maximum speed of about 19 GFlops on a single core of a Intel(R) Core(TM) i7-4790 CPU @ 3.60GHz, which is in perfect agreement with the Fortran counter-part.</p>\n\n<p>What I now want to do is extend the functionality, such that I can transpose the three matrices A, B, and C individually. To this end, my plan was to add a template access policy which flips the two indices if necessary. I extended the code as follows</p>\n\n<pre><code>template&lt;size_t sizeA2,\n         typename AccessOperatorA = NoTranspose,\n         typename AccessOperatorB = NoTranspose,\n         typename AccessOperatorC = NoTranspose &gt;\nvoid matrixMatrixProduct( double* __restrict__ pC,\n                          double const* __restrict__ pA,\n                          double const* __restrict__ pB,\n                          double alpha,\n                          size_t sizeA1,\n                          size_t sizeB2 )\n{\n\n  size_t outerLoopLimit = sizeA1;\n  size_t innerLoopLimit = sizeB2;\n\n  size_t sizeC2 = sizeB2;\n\n  for ( size_t i = 0; i &lt; outerLoopLimit; ++i )\n  {\n#pragma vector aligned\n#pragma ivdep\n    for ( size_t j = 0; j &lt; innerLoopLimit; ++j )\n    {\n#pragma vector aligned\n#pragma ivdep\n      for ( size_t k = 0; k &lt; sizeA2; ++k )\n      {\n        AccessOperatorC::get( pC, sizeC2,  i, j ) += alpha * AccessOperatorA::get( pA, sizeA2, i, k ) * AccessOperatorB::get( pB, sizeB2, k, j );\n      } // end of k-loop\n    } // end of j-loop\n  } // end of i-loop\n\n}\n</code></pre>\n\n<p>with the NoTranspose access operator being defined as</p>\n\n<pre><code>struct NoTranspose\n{\n  template&lt;typename DataType&gt;\n  static inline DataType&amp; get( DataType* __restrict__ pointer,\n                               size_t size2,\n                               size_t i,\n                               size_t j )\n  {\n    return pointer[i * size2 + j];\n  }\n};\n</code></pre>\n\n<p>In principle, this code compiles and give the correct answers, but at only 60% of the speed!</p>\n\n<p>For my understanding, the problems seems to be that the alignment information is not carried over into the get function of the access template, although the get function is in-lined according the the perf. report. However, the icpc seems to decide to work on xmm registers only, which causes the performance penalty.</p>\n\n<p>Therefore, my question is: how can get the compiler to correctly vetorize the extended code?</p>\n\n<p>Any help is gratefully acknowledged. </p>\n\n<p>For completeness, I add the complete MWE</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n#include &lt;cmath&gt;\n\nstruct NoTranspose\n{\n  template&lt;typename DataType&gt;\n  static inline DataType&amp; get( DataType* __restrict__ pointer,\n                               size_t size2,\n                               size_t i,\n                               size_t j )\n  {\n    return pointer[i * size2 + j];\n  }\n};\n\ntemplate&lt;size_t sizeA2,\n         typename AccessOperatorA = NoTranspose,\n         typename AccessOperatorB = NoTranspose,\n         typename AccessOperatorC = NoTranspose &gt;\nvoid matrixMatrixProduct( double* __restrict__ pC,\n                          double const* __restrict__ pA,\n                          double const* __restrict__ pB,\n                          double alpha,\n                          size_t sizeA1,\n                          size_t sizeB2 )\n{\n\n  size_t outerLoopLimit = sizeA1;\n  size_t innerLoopLimit = sizeB2;\n\n  size_t sizeC2 = sizeB2;\n\n  for ( size_t i = 0; i &lt; outerLoopLimit; ++i )\n  {\n#pragma vector aligned\n#pragma ivdep\n    for ( size_t j = 0; j &lt; innerLoopLimit; ++j )\n    {\n#pragma vector aligned\n#pragma ivdep\n      for ( size_t k = 0; k &lt; sizeA2; ++k )\n      {\n        AccessOperatorC::get( pC, sizeC2,  i, j ) += alpha * AccessOperatorA::get( pA, sizeA2, i, k ) * AccessOperatorB::get( pB, sizeB2, k, j );\n      } // end of k-loop\n    } // end of j-loop\n  } // end of i-loop\n\n}\n\nint main( void )\n{\n\n  std::vector&lt;int&gt; sizesA1 = { 1, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 30, 40, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200, 250, 300, 350, 400, 500, 600, 700, 800, 900, 1000 };\n\n  printf( \"%15s \\t %15s \\t%15s \\t %15s\\n\", \"sizeA1\", \"sizeA2\", \"Time [s]\", \"GFlops\" );\n\n  for ( const auto &amp; sizeA1 : sizesA1 )\n  {\n    int numberOfIterations = 1e6;\n\n    const int sizeA2 = 2;\n\n    size_t sizeB2 = sizeA1;\n\n    size_t sizeC1 = sizeA1;\n    size_t sizeC2 = sizeB2;\n\n    size_t lengthA = sizeA1 * sizeA2;\n    size_t lengthB = sizeA2 * sizeB2;\n    int lengthC = sizeC1 * sizeC2;\n\n    std::vector&lt;double&gt; A1( lengthA, 1.234 );\n    std::vector&lt;double&gt; B1( lengthB, 1.234 );\n    std::vector&lt;double&gt; C1( lengthC, 1.234 );\n    std::vector&lt;double&gt; A2( lengthA, 1.234 );\n    std::vector&lt;double&gt; B2( lengthB, 1.234 );\n    std::vector&lt;double&gt; C2( lengthC, 1.234 );\n\n    double alpha = 1.234;\n\n    auto start = std::chrono::high_resolution_clock::now( );\n    for ( int i = 0; i &lt; numberOfIterations; ++i )\n    {\n      double* pA;\n      double* pB;\n      double* pC;\n\n      //Force cache reload\n      if ( i % 2 )\n      {\n        pA = A1.data( );\n        pB = B1.data( );\n        pC = C1.data( );\n      }\n      else\n      {\n        pA = A2.data( );\n        pB = B2.data( );\n        pC = C2.data( );\n      }\n\n      matrixMatrixProduct&lt;sizeA2&gt;( pC, pA, pB, alpha, sizeA1, sizeB2 );\n\n    }\n    auto end = std::chrono::high_resolution_clock::now( );\n    std::chrono::duration&lt;double&gt; elapsed = end - start;\n\n    double numberOfFlops = 1.0 * numberOfIterations * lengthC * ( 3 + 2 ); //two adds and three mult!\n    double flops = (double) numberOfFlops / ( elapsed.count( ) );\n\n    printf( \"%15d \\t %15d \\t %15g \\t %15e\\n\", sizeA1, sizeA2, elapsed.count( ), flops / ( 1.0e9 ) );\n\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 6891, "user_id": 2204581, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e49d077f4d914cfc9d81299a453fcd2?s=128&d=identicon&r=PG", "display_name": "mrks", "link": "https://stackoverflow.com/users/2204581/mrks"}, "edited": false, "score": 0, "creation_date": 1478819784, "post_id": 39001223, "comment_id": 68316756, "body": "I just started having the same problem after upgrading from gcc 6.1 to 6.2 using brew."}], "owner": {"reputation": 182, "user_id": 3605817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c278ac0b45517a82558f2aa745e93583?s=128&d=identicon&r=PG&f=1", "display_name": "nloveladyallen", "link": "https://stackoverflow.com/users/3605817/nloveladyallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1471449199, "creation_date": 1471449199, "question_id": 39001223, "link": "https://stackoverflow.com/questions/39001223/no-such-file-or-directory-messages-when-using-gdb-with-c-programs", "title": "&quot;No such file or directory&quot; messages when using GDB with C++ programs", "body": "<p>I'm pretty new to using GDB, so sorry if this is a noob question.</p>\n\n<p>When using GDB on any C++ program, I get a large number of \"No such file or directory\" messages. This does not happen with C programs.</p>\n\n<p>Here's what I'm doing:</p>\n\n<pre><code>$ g++ -g hello-world.cpp -o hello-world.o\n$ gdb hello-world.o\nGNU gdb (GDB) 7.11.1\nCopyright (C) 2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-apple-darwin15.5.0\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from hello-world.o...Reading symbols from /Users/noah/c++/hello-world.o.dSYM/Contents/Resources/DWARF/hello-world.o...done.\ndone.\n(gdb) r\nStarting program: /Users/noah/c++/hello-world.o\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libstdc++-v3/src/.libs/compatibility-atomic-c++0x.o': can't open to read symbols: No such file or directory.\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libstdc++-v3/src/.libs/compatibility-c++0x.o': can't open to read symbols: No such file or directory.\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libstdc++-v3/src/.libs/compatibility-chrono.o': can't open to read symbols: No such file or directory.\n(many more messages omitted)\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libgcc/unordtf2_s.o': can't open to read symbols: No such file or directory.\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libgcc/unwind-c_s.o': can't open to read symbols: No such file or directory.\nwarning: `/private/tmp/gcc6-20160515-25034-1nu0tpk/gcc-6.1.0/build/x86_64-apple-darwin15.2.0/libgcc/unwind-dw2_s.o': can't open to read symbols: No such file or directory.\nHello World\n[Inferior 1 (process 2319) exited normally]\n(gdb)\n</code></pre>\n\n<p>I'm using OS X El Capitan, with G++ 6.1.0 and GDB 7.11.1, both installed through Homebrew. GDB is codesigned using <a href=\"https://sourceware.org/gdb/wiki/BuildingOnDarwin\" rel=\"nofollow\">these instructions</a>.</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1471449389, "post_id": 39001211, "comment_id": 65354240, "body": "You&#39;ll need to use the preprocessor if you want to eliminate the repetition of appending the <code>A</code>/<code>W</code> to the function names to generate the appropriate dispatching. There&#39;s no C++ construct that can generate that for you."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1471449402, "post_id": 39001211, "comment_id": 65354248, "body": "do you really need it ? compile you app as unicode and use <code>std::wstring</code> as your string type"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1471449637, "post_id": 39001211, "comment_id": 65354379, "body": "Easier way is to forget the <code>A</code> suffix exists and only use the <code>W</code> versions when dealing with the WINAPI."}, {"owner": {"reputation": 1399, "user_id": 2538382, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5nAgf.png?s=128&g=1", "display_name": "FrogTheFrog", "link": "https://stackoverflow.com/users/2538382/frogthefrog"}, "edited": false, "score": 0, "creation_date": 1471449737, "post_id": 39001211, "comment_id": 65354445, "body": "There are only few places I&#39;ll need this (for debugging purposes), however some workaround would make my job easier"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1471453979, "post_id": 39001211, "comment_id": 65356830, "body": "Templates seem like overkill for this.  Why not define FormatMessageT as two overloaded functions, one that takes <code>char</code> strings and one that takes <code>WCHAR</code> strings?"}, {"owner": {"reputation": 1399, "user_id": 2538382, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5nAgf.png?s=128&g=1", "display_name": "FrogTheFrog", "link": "https://stackoverflow.com/users/2538382/frogthefrog"}, "edited": false, "score": 0, "creation_date": 1471459217, "post_id": 39001211, "comment_id": 65359719, "body": "Best guess is that I was working with templates for hours and forgot how to function normally. Better question is why Microsoft didn&#39;t do it?"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1471463231, "post_id": 39001211, "comment_id": 65361775, "body": "@Helix because the windows API is a set of DLLs to be linked at runtime and C++ sucks at this with its name mangling, thus all API functions are <code>extern &quot;C&quot;</code>-ed. Microsoft&#39;s solution for the simple usecase (<code>#include &lt;Windows.h&gt;</code>) are makros i.e. <code>#define FormatMessage FormatMessageW</code> if <code>_UNICODE</code> is defined."}], "answers": [{"tags": [], "owner": {"reputation": 1399, "user_id": 2538382, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5nAgf.png?s=128&g=1", "display_name": "FrogTheFrog", "link": "https://stackoverflow.com/users/2538382/frogthefrog"}, "is_accepted": true, "score": 0, "last_activity_date": 1471459617, "creation_date": 1471459617, "answer_id": 39004155, "question_id": 39001211, "link": "https://stackoverflow.com/questions/39001211/wrapping-microsofts-w-and-a-functions/39004155#39004155", "title": "Wrapping Microsoft&#39;s &quot;W&quot; and &quot;A&quot; functions", "body": "<p>A person who deleted his answer posted solution which did not work for Microsoft's compiler, however after tinkering around the code I managed to adapt it and make it work. Big thanks to you (W.F or someone similar)!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\ntemplate &lt;bool, class T1, class T2, T1, T2&gt;\nstruct nontype_conditional;\n\ntemplate &lt;class T1, class T2, T1 Foo1, T2 Foo2&gt;\nstruct nontype_conditional&lt;true, T1, T2, Foo1, Foo2&gt; {\n    template&lt;typename ...Args&gt;\n    static auto run(Args&amp;&amp;... args) {\n        return Foo1(std::forward&lt;decltype(args) &amp;&amp; &gt;(args)...);\n    }\n};\n\ntemplate &lt;class T1, class T2, T1 Foo1, T2 Foo2&gt;\nstruct nontype_conditional&lt;false, T1, T2, Foo1, Foo2&gt; {\n    template&lt;typename ...Args&gt;\n    static auto run(Args&amp;&amp;... args) {\n        return Foo2(std::forward&lt;decltype(args) &amp;&amp; &gt;(args)...);\n    }\n};\n\nchar funW(char) {\n    return 'W';\n}\n\nchar funA(wchar_t) {\n    return 'A';\n}\n\nconstexpr bool value = true;\n\nint main() {\n    std::cout &lt;&lt; nontype_conditional&lt;value, decltype(funW)&amp;, decltype(funA)&amp;, funW, funA&gt;::run(value ? 'a' : L'a') &lt;&lt; std::endl;\n\n    std::cin.get();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1399, "user_id": 2538382, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5nAgf.png?s=128&g=1", "display_name": "FrogTheFrog", "link": "https://stackoverflow.com/users/2538382/frogthefrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39004155, "answer_count": 1, "score": 0, "last_activity_date": 1471459617, "creation_date": 1471449181, "question_id": 39001211, "link": "https://stackoverflow.com/questions/39001211/wrapping-microsofts-w-and-a-functions", "title": "Wrapping Microsoft&#39;s &quot;W&quot; and &quot;A&quot; functions", "body": "<p>I'm writing a template function which uses notorious Microsoft's <code>A</code> and <code>W</code> functions. Template argument type is limited to <code>std::string</code> and <code>std::wstring</code>, therefore I use <code>struct</code> wrapper to call required function:</p>\n\n<pre><code>template&lt;typename type&gt;\nstruct formatMessageT;\n\ntemplate&lt;&gt;\nstruct formatMessageT&lt;std::string&gt; {\n    static inline size_t call(DWORD dwFlags, LPCVOID lpSource, DWORD dwMessageId, DWORD dwLanguageId, LPSTR lpBuffer, DWORD nSize, va_list *Arguments) {\n        return FormatMessageA(dwFlags, lpSource, dwMessageId, dwLanguageId, lpBuffer, nSize, Arguments);\n    }\n};\n\ntemplate&lt;&gt;\nstruct formatMessageT&lt;std::wstring&gt; {\n    static inline size_t call(DWORD dwFlags, LPCVOID lpSource, DWORD dwMessageId, DWORD dwLanguageId, LPWSTR lpBuffer, DWORD nSize, va_list *Arguments) {\n        return FormatMessageW(dwFlags, lpSource, dwMessageId, dwLanguageId, lpBuffer, nSize, Arguments);\n    }\n};\n</code></pre>\n\n<p>This, however, is a pain in... Is there a better way to achieve this? I tried to use function template, as seen below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nchar funW(wchar_t) {\n    return 'W';\n}\n\nchar funA(char) {\n    return 'A';\n}\n\ntemplate&lt;typename returnType, typename function, typename ...Args&gt;\nreturnType functionCall(function f, Args ...args) {\n    return f(args...);\n}\n\nint main() {\n    bool dummy = true;\n    std::cout &lt;&lt; functionCall&lt;char&gt;(dummy ? funW : funA, dummy ? L'W' : 'A') &lt;&lt; std::endl;\n\n    std::cin.get();\n\n    return 0;\n}\n</code></pre>\n\n<p>Unfortunately this only works when function arguments types match (given that argument itself also matches):</p>\n\n<pre><code>char funW(char) {\n    return 'W';\n}\n\nchar funA(char) {\n    return 'A';\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char funW(wchar_t) {\n    return 'W';\n}\n\nchar funA(wchar_t) {\n    return 'A';\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471449072, "post_id": 39001126, "comment_id": 65354042, "body": "Please fix the formatting of the code you posted."}, {"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471449120, "post_id": 39001126, "comment_id": 65354077, "body": "@PaulMcKenzie I dont know what you are talking about."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471449214, "post_id": 39001126, "comment_id": 65354129, "body": "Why all the extra whitespace in the function declaration?"}, {"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471449316, "post_id": 39001126, "comment_id": 65354192, "body": "@PaulMcKenzie First few whitespaces are there because it is a space for return type."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1471449571, "post_id": 39001126, "comment_id": 65354343, "body": "Please <a href=\"http://coliru.stacked-crooked.com/a/d70b3cad6acd3a0d\" rel=\"nofollow noreferrer\">see this</a>.  That represents the same program, formatted in a way that most, if not all C++ programmers would expect."}, {"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1471449732, "post_id": 39001126, "comment_id": 65354438, "body": "@PaulMcKenzie Thank you but I think it is a matter of a habit"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1471449800, "post_id": 39001126, "comment_id": 65354482, "body": "@PaulMcKenzie I gotta say, I currently work on a codebase which has code formatting standards similar to the OP. There&#39;s nothing objectively wrong with it (though I don&#39;t like it). Just copy-paste the code in your favorite text viewer and run it through clang-format."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1471450610, "post_id": 39001126, "comment_id": 65354980, "body": "Why do you delete m_Bomb right after creating it? Seems like a job for a destructor function."}], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 0, "creation_date": 1471449677, "post_id": 39001320, "comment_id": 65354404, "body": "Can you tell me how to call <code>thread other_thread</code> in <code>int main()</code> with <code>bomberman . PutBomb()</code> without making <code>PutBomb()</code> <code>static</code>?"}, {"owner": {"reputation": 434, "user_id": 1823963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7101a0d591218488379114ddc1cb4?s=128&d=identicon&r=PG", "display_name": "malchemist", "link": "https://stackoverflow.com/users/1823963/malchemist"}, "reply_to_user": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 1, "creation_date": 1471449778, "post_id": 39001320, "comment_id": 65354471, "body": "Store your thread locally. And join in the main() function.You can make it public or create getter."}], "tags": [], "owner": {"reputation": 434, "user_id": 1823963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7101a0d591218488379114ddc1cb4?s=128&d=identicon&r=PG", "display_name": "malchemist", "link": "https://stackoverflow.com/users/1823963/malchemist"}, "is_accepted": false, "score": 0, "last_activity_date": 1471450144, "last_edit_date": 1471450144, "creation_date": 1471449501, "answer_id": 39001320, "question_id": 39001126, "link": "https://stackoverflow.com/questions/39001126/c-threads-does-not-work-as-i-expect/39001320#39001320", "title": "C++ threads does not work as I expect?", "body": "<p>Because you call <code>join</code> on <code>other_thread</code> immediately after creating <code>other_thread</code>.  The <code>join</code> call blocks the main thread and waits for <code>other_thread</code> to exit.  See docs on std::thread::join at <a href=\"http://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/thread/thread/join</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 0, "creation_date": 1471450607, "post_id": 39001367, "comment_id": 65354975, "body": "Man, perfect ! Thank you very much!"}, {"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 0, "creation_date": 1471460539, "post_id": 39001367, "comment_id": 65360438, "body": "Hmm but it is really weird that when I use it the same way as I used it here in the much larger program, compilation fails with error: <code>error: no type named \u2018type\u2019 in \u2018class std::result_of&lt;void (*(CBomb*))()&gt;\u2019</code>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 0, "creation_date": 1471461221, "post_id": 39001367, "comment_id": 65360753, "body": "@lolofon That sounds like a different, probably unrelated error. Post a new question with your new error. Also make sure you updated your access modifiers: my code moved some of your stuff from <code>private</code> to <code>public</code> to make the code easier to write."}, {"owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "edited": false, "score": 0, "creation_date": 1471523525, "post_id": 39001367, "comment_id": 65386973, "body": "It is hard to post it here. It has multiple files crossing each other.. When I think of how to post it, I will do so."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1471449674, "creation_date": 1471449674, "answer_id": 39001367, "question_id": 39001126, "link": "https://stackoverflow.com/questions/39001126/c-threads-does-not-work-as-i-expect/39001367#39001367", "title": "C++ threads does not work as I expect?", "body": "<p>Your problem is that you're joining the thread immediately after you create it, meaning that you're only using multithreading in a very technical sense: you've definitely created another thread, and it's (probably) going to operate on another CPU core, but the host thread is simply sitting idle while the other thread works.</p>\n\n<p>You need to locally store the <code>thread</code> object so that you can join it at a later point.</p>\n\n<pre><code>class CBomb\n{\npublic:\n    CBomb ( void )\n    : m_Owner ( nullptr ),\n    bomb_thread(&amp;CBomb::Timer, this)\n    {\n    }\n    std::thread bomb_thread; //This needs to be a member of this object. Whether you make it public or not is a matter of your design approach.\nprivate:\n    void Timer ( void )\n    {\n        this_thread::sleep_for( chrono::seconds( 3 ) );\n        cout &lt;&lt; \"The bomb has just detonated.\" &lt;&lt; endl;\n    }\n\n    CBomberman * m_Owner;\n};\n\nclass CBomberman\n{\npublic:\n    CBomberman ( void )\n    : m_Bomb ( nullptr )\n    {\n\n    }\n\n    bool PutBomb ( void )\n    {\n        if( m_Bomb == nullptr )\n        {\n            m_Bomb = new CBomb();//Don't delete the object immediately after creating it. What were you expecting to have happen if you did?\n            return true;\n        }\n        else\n        {\n            cout &lt;&lt; \"The bomb has already been put.\" &lt;&lt; endl;\n            return false;\n        }\n    }\n    CBomb * m_Bomb;\n};\n\nint main()\n{\n    CBomberman bomberman;\n\n    bomberman.PutBomb();\n    cout &lt;&lt; \"Bomberman has just put a bomb. Wait for the boom.\" &lt;&lt; endl;\n    bomberman.m_bomb-&gt;bomb_thread.join(); //If we hit the end before the thread concludes, there could be some errors.\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 6124434, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7e05547e4f5cfb75420d95ab3b967cd4?s=128&d=identicon&r=PG&f=1", "display_name": "scarface", "link": "https://stackoverflow.com/users/6124434/scarface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 39001367, "answer_count": 2, "score": 0, "last_activity_date": 1471450379, "creation_date": 1471448941, "last_edit_date": 1471450379, "question_id": 39001126, "link": "https://stackoverflow.com/questions/39001126/c-threads-does-not-work-as-i-expect", "title": "C++ threads does not work as I expect?", "body": "<p>I am making bigger program where I want to use threads so as first I am trying to find out how threads actually work so I created a simple program and I can not understand why I do not get a message <code>\"Bomberman has just put a bomb. Wait for the boom.\"</code> earlier than <code>\"The bomb has just detonated.\"</code>.</p>\n\n<p>Can anyone instruct me why is it not working as I expect?</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nclass CBomberman;\n\nclass CBomb {\n public:\n  CBomb(void) : m_Owner(nullptr) {\n    thread other_thread(&amp;CBomb::Timer, this);\n    other_thread.join();\n  }\n\n private:\n  void Timer(void) {\n    this_thread::sleep_for(chrono::seconds(3));\n    cout &lt;&lt; \"The bomb has just detonated.\" &lt;&lt; endl;\n  }\n\n  CBomberman* m_Owner;\n};\n\nclass CBomberman {\n public:\n  CBomberman(void) : m_Bomb(nullptr) {}\n\n  bool PutBomb(void) {\n    if (m_Bomb == nullptr) {\n      m_Bomb = new CBomb();\n      delete m_Bomb;\n      return true;\n    } else {\n      cout &lt;&lt; \"The bomb has already been put.\" &lt;&lt; endl;\n      return false;\n    }\n  }\n\n private:\n  CBomb* m_Bomb;\n};\n\nint main() {\n  CBomberman bomberman;\n\n  bomberman.PutBomb();\n  cout &lt;&lt; \"Bomberman has just put a bomb. Wait for the boom.\" &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2012"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1471448871, "post_id": 39000950, "comment_id": 65353927, "body": "Isn&#39;t there a &#39;stop at entry point&#39; option in the project&#39;s debug settings?"}, {"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1471448963, "post_id": 39000950, "comment_id": 65353982, "body": "Hi @barakmanos I can not find it, can you be a little more specific about where this option is located?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1471449224, "post_id": 39000950, "comment_id": 65354138, "body": "Check <a href=\"https://msdn.microsoft.com/en-us/library/f9t8842e.aspx\" rel=\"nofollow noreferrer\">this MSDN page</a>, which states that the functions <code>main</code>, <code>WinMain</code>, and <code>DllMain</code> are the three forms of the user-defined entry point."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1471449337, "post_id": 39000950, "comment_id": 65354207, "body": "Alternatively, just start your debugging process by hitting F10 or F11 rather than F5 (assuming default key bindings). It should step you into you entry point function and wait."}, {"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1471449523, "post_id": 39000950, "comment_id": 65354319, "body": "@WhozCraig make it an answer, please, this is what I was looking for!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1471449722, "post_id": 39000950, "comment_id": 65354429, "body": "@meJustAndrew honestly I liked both of the answers already given, but its your question, so will do. It wasn&#39;t something I do to <i>find</i> entry points; its something I do to knowingly <i>start</i> at the main function (or whatever the config has been setup for using as the startup function)."}, {"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1471450176, "post_id": 39000950, "comment_id": 65354722, "body": "@WhozCraig I understand, but your comment was a directly answer to my question, and it was the easiest thing to do, since one can have a hudge project, and searching for <i>main</i> will return a lot of results. And also to define a main you have to firstly know the type of main your application supports, to declare a simply main or WinMain or even DllMain, recompile the program (which may take a while) and then see where the errors are. This is why this is the answer I was looking for!"}], "answers": [{"comments": [{"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 0, "creation_date": 1471449617, "post_id": 39001222, "comment_id": 65354371, "body": "I just appreciate, some of the things here I already know, but what I am looking for is more like a simple way to do it, and WhozCraig in the comment posted it, but thank you very much!"}, {"owner": {"reputation": 188, "user_id": 3095695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad4d7dffe1c2573a5543f18392461dcf?s=128&d=identicon&r=PG&f=1", "display_name": "Aros", "link": "https://stackoverflow.com/users/3095695/aros"}, "edited": false, "score": 0, "creation_date": 1527582996, "post_id": 39001222, "comment_id": 88168834, "body": "You may have quite a problem searching for a main function in a large project just based on the text. The expression &quot;main&quot; is quite a generic word appearing in comments and other... Offten I do things like searching for &#39;main(&#39;, but: 1) People sometimes make a space in front of the parenthesis 2) some people use macros to define main 3) In fact it is quite often to have multiple main functions but &quot;#ifdef&quot; them to build only in certain targets. This strategy is often used for tests... In this case you may need to go over hundreds of mains until you find the &quot;real main&quot;."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1471449199, "creation_date": 1471449199, "answer_id": 39001222, "question_id": 39000950, "link": "https://stackoverflow.com/questions/39000950/how-to-find-an-applications-entry-point-in-visual-studio-c/39001222#39001222", "title": "How to find an application&#39;s entry point in Visual Studio (C++)", "body": "<p>In C++, a fully compiled program can have only one defined <code>main</code> method. If there's more than one, the compiler will complain about \"multiple definitions of main\" or some other similarly worded message. </p>\n\n<p>So, the simplest option is to do a search for the symbol <code>main</code> (or, if compiling as a Windows Subsystem program, <code>WinMain</code>) and figure out which ones correspond to the \"startup\" project. There shouldn't be that many, even in a relatively large solution.</p>\n"}, {"comments": [{"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 1, "creation_date": 1471449614, "post_id": 39001226, "comment_id": 65354366, "body": "I just appreciate, some of the things here I already know, but what I am looking for is more like a simple way to do it, and WhozCraig in the comment posted it, but thank you very much!"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 0, "creation_date": 1471450434, "post_id": 39001226, "comment_id": 65354870, "body": "@meJustAndrew Right, but in case when debug cannot be started you will be able to use the other approach."}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 5, "last_activity_date": 1471449537, "last_edit_date": 1471449537, "creation_date": 1471449210, "answer_id": 39001226, "question_id": 39000950, "link": "https://stackoverflow.com/questions/39000950/how-to-find-an-applications-entry-point-in-visual-studio-c/39001226#39001226", "title": "How to find an application&#39;s entry point in Visual Studio (C++)", "body": "<p>If you want to find what C++ project is executable than search for <code>&lt;ConfigurationType&gt;Application&lt;/ConfigurationType&gt;</code> in all your <code>*.vcxproj</code> files.</p>\n\n<p>If you are looking for the entry point function inside this application, than search for <code>main</code>, <code>wmain</code> or <code>WinMain</code> functions. </p>\n\n<p>Also entry point can be redefined with <code>/ENTRY</code> parameter, so you can check <code>Configuration Properties &gt; Linker &gt; Advanced &gt; Entry Point</code> project parameter or search for <code>/ENTRY</code> in your <code>*.vcxproj</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 0, "creation_date": 1471450310, "post_id": 39001512, "comment_id": 65354810, "body": "Thank you for the little addition too!"}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 1, "last_activity_date": 1471450142, "creation_date": 1471450142, "answer_id": 39001512, "question_id": 39000950, "link": "https://stackoverflow.com/questions/39000950/how-to-find-an-applications-entry-point-in-visual-studio-c/39001512#39001512", "title": "How to find an application&#39;s entry point in Visual Studio (C++)", "body": "<p>When desiring to <em>stop</em> execution at the top of the main/WinMain function while interactively debugging a process on Windows, I typically just use F10/F11 (assuming default C/C++ key bindings in the Visual Studio IDE) to instruct the debugger to single-step (which starts the process, then performs the step, then breaks). </p>\n\n<p>Note this may not always do what you want. If you want to catch global initializations, object constructions, etc, these are already done before reaching <code>main</code> or <code>WinMain</code>. Those require additional debugging and setting breakpoints in CRT-source code for the <em>real</em> global startup code (which eventually calls your <code>main</code> or <code>WinMain</code>). But if you simply want to break-on-main-entry for a program built with debugging symbols, this is likely the easiest way to do it.</p>\n"}], "owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6086, "favorite_count": 0, "accepted_answer_id": 39001226, "answer_count": 3, "score": 6, "last_activity_date": 1551699611, "creation_date": 1471448433, "last_edit_date": 1551699611, "question_id": 39000950, "link": "https://stackoverflow.com/questions/39000950/how-to-find-an-applications-entry-point-in-visual-studio-c", "title": "How to find an application&#39;s entry point in Visual Studio (C++)", "body": "<p>The question may apply to any programming language written in Visual Studio, but I am more concerned about C++. </p>\n\n<p>Is there a way to easily determine the application entry point in Visual Studio?</p>\n\n<p>For a relatively small application this could be easy, but for large ones, it will be pretty hard. In my particular case I know that the project which is set as startup is the one which has the entry point, but I was unable to find it, even though the application starts and runs well.</p>\n"}, {"tags": ["c++", "ios", "macros"], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 1550948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c938c5a834e683a45a40db9b8d6663?s=128&d=identicon&r=PG", "display_name": "ncke", "link": "https://stackoverflow.com/users/1550948/ncke"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449631, "creation_date": 1471449631, "answer_id": 39001355, "question_id": 39000889, "link": "https://stackoverflow.com/questions/39000889/define-preprocessor-macro-for-ios/39001355#39001355", "title": "Define preprocessor macro for iOS", "body": "<p>Can you define something like</p>\n\n<p><code>IOSBUILD=1</code></p>\n\n<p>In the build settings for the target under 'Preprocessor Macros' (set it for all of the configurations e.g. debug and release).</p>\n\n<p><a href=\"https://i.stack.imgur.com/DSapO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DSapO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then in the C++ code, you can check whether this is an iOS build or not:</p>\n\n<pre><code>#ifdef IOSBUILD\n    // Use the compat version.\n#else\n    // Use the original version.\n#endif\n</code></pre>\n\n<p>That won't upset the other applications, unless they decide to define IOSBUILD too for some reason.</p>\n"}], "owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471449631, "creation_date": 1471448244, "question_id": 39000889, "link": "https://stackoverflow.com/questions/39000889/define-preprocessor-macro-for-ios", "title": "Define preprocessor macro for iOS", "body": "<p>I have cpp files that are linked as headers to my application. These cpp and header files are used with other applications as well. How do i define pre-processor macros for iphones, so when the application builds it uses the function for ios rather the the other for other platforms.  </p>\n\n<p>For example:</p>\n\n<p>How do i define a macro so the connect function uses getaddrinfo_compact when connecting with iOS rather than the simple socket connect function that i used.</p>\n\n<pre><code>bool SocketSender::Connect (const char *host, int port, CApiError &amp;err)\n{\n\nerrno = 0;\nstruct hostent *hostinfo;\n\n//struct in6_addr ipv6addr;\n\n\nhostinfo = gethostbyname(host);\n\nstruct addrinfo hints, *res, *res0;\nint error,result;\nconst char *cause = NULL;\n\nmemset(&amp;hints, 0, sizeof(hints));\nhints.ai_family = AF_UNSPEC;\nhints.ai_socktype = SOCK_STREAM;\n//hints.ai_flags = AI_DEFAULT;\nhints.ai_protocol = 0;\nerror = getaddrinfo_compat(host, boost::to_string(port).c_str(), &amp;hints, &amp;res0);\nif (error) {\n    errx(1, \"%s\", gai_strerror(error));\n    /*NOTREACHED*/\n}\n</code></pre>\n\n<p>getaddrinfo_compact</p>\n\n<pre><code>static int getaddrinfo_compat(\n                          const char * hostname,\n                          const char * servname,\n                          const struct addrinfo * hints,\n                          struct addrinfo ** res\n                          ) {\nint    err;\nint    numericPort;\n\n// If we're given a service name and it's a numeric string, set `numericPort` to that,\n// otherwise it ends up as 0.\n\nnumericPort = servname != NULL ? atoi(servname) : 0;\n\n// Call `getaddrinfo` with our input parameters.\n\nerr = getaddrinfo(hostname, servname, hints, res);\n\n// Post-process the results of `getaddrinfo` to work around &lt;rdar://problem/26365575&gt;.\n\nif ( (err == 0) &amp;&amp; (numericPort != 0) ) {\n    for (const struct addrinfo * addr = *res; addr != NULL; addr = addr-&gt;ai_next) {\n        in_port_t *    portPtr;\n\n        switch (addr-&gt;ai_family) {\n            case AF_INET: {\n                portPtr = &amp;((struct sockaddr_in *) addr-&gt;ai_addr)-&gt;sin_port;\n            } break;\n            case AF_INET6: {\n                portPtr = &amp;((struct sockaddr_in6 *) addr-&gt;ai_addr)-&gt;sin6_port;\n            } break;\n            default: {\n                portPtr = NULL;\n            } break;\n        }\n        if ( (portPtr != NULL) &amp;&amp; (*portPtr == 0) ) {\n            *portPtr = htons(numericPort);  \n        }  \n    }  \n}  \nreturn err;  \n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "stl", "allocator"], "comments": [{"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 1, "creation_date": 1471448369, "post_id": 39000739, "comment_id": 65353592, "body": "Can your BSTRs be a class that frees their memory in their own destructors (CComBstr perhaps, unique_ptr with a custom deleter,  or one of your own)?  vector&#39;s destructor is responsible for destroying each item and deallocating it&#39;s own buffers - not releasing private memory of contained items. vector will destroy Packages which will destroy its members."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1471448565, "post_id": 39000739, "comment_id": 65353721, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 2204, "user_id": 462376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85127042e9effffa43039adc8e8dfae?s=128&d=identicon&r=PG", "display_name": "Heath", "link": "https://stackoverflow.com/users/462376/heath"}, "edited": false, "score": 0, "creation_date": 1471448573, "post_id": 39000739, "comment_id": 65353727, "body": "Just added a note that this structure is &quot;returned&quot; from a COM method using Win32-style array access. Using a bstr_t (I avoid ATL for all its overhead) in the structure would not really work."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 1, "creation_date": 1471449195, "post_id": 39000739, "comment_id": 65354119, "body": "So you are getting an array of structures which you copy into a vector (AddRef()&#39;ing any COM interfaces).  I assume the original array is discarded. if this is so, you are allocating and copying your Packages.  Why not do the same thing using a unique_ptr with a custom deleter? your vector becomes a vector of unique_ptr&lt;Package&gt;...  The custom deleter can free memory and decrement refcounts if needed."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1471527554, "post_id": 39000739, "comment_id": 65389840, "body": "Drop <code>template &lt;class U&gt;</code>. As written, this function can never be called as <code>U</code> can never be deduced. Without it, your approach seems to <a href=\"http://rextester.com/XXG74376\" rel=\"nofollow noreferrer\">work for me</a>, though I must say it still feels pretty sketchy."}, {"owner": {"reputation": 2204, "user_id": 462376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85127042e9effffa43039adc8e8dfae?s=128&d=identicon&r=PG", "display_name": "Heath", "link": "https://stackoverflow.com/users/462376/heath"}, "reply_to_user": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1471543322, "post_id": 39000739, "comment_id": 65400241, "body": "@DavidThomas, these are not COM interfaces (too heavyweight for our partners&#39; needs...though, maybe it&#39;s just easiest for clean-up). I don&#39;t think a unique_ptr would work since the vector wraps a raw array (the method declaration is just Package**), or would it? Seems it wouldn&#39;t since the raw vector data would then require an extra level of indirection for the unique_ptr&#39;s data."}, {"owner": {"reputation": 2204, "user_id": 462376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85127042e9effffa43039adc8e8dfae?s=128&d=identicon&r=PG", "display_name": "Heath", "link": "https://stackoverflow.com/users/462376/heath"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1471543416, "post_id": 39000739, "comment_id": 65400296, "body": "@IgorTandetnik, thanks. I&#39;ll try it. I only added them because it seems any callers would still pass a type argument that I figured wouldn&#39;t compile without a template. Offline, a friend of mine also mentioned that allocate and deallocate are required even though I can just return std::allocator&lt;Package&gt;::allocate(...) so I&#39;ll also give that a try."}], "owner": {"reputation": 2204, "user_id": 462376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85127042e9effffa43039adc8e8dfae?s=128&d=identicon&r=PG", "display_name": "Heath", "link": "https://stackoverflow.com/users/462376/heath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471449068, "creation_date": 1471447753, "last_edit_date": 1471449068, "question_id": 39000739, "link": "https://stackoverflow.com/questions/39000739/customizing-destroy-for-an-stl-vector", "title": "Customizing destroy for an STL vector", "body": "<p>I've read through quite a bit of reference material and a number of posts here on SO, but just can't seem to figure out how to \"override\" <code>destroy</code> for a <code>vector</code> of structures. This structure, <code>Package</code>, contains members of type <code>BSTR</code> that I need to call <code>SysFreeString</code>. I already have an inlined helper function to pass this <code>Package</code> type, but I need to call it.</p>\n\n<p>My vector is declared as:\n</p>\n\n<pre><code>vector&lt;Package, PackageAlloc&gt; packages;\n</code></pre>\n\n<p>I've tried a number of ways based on reading and samples, and with the latest code get an error with the VC++ compiler:</p>\n\n<blockquote>\n  <p>'const _Package *std::_Wrap_alloc::address(const _Package &amp;) const': cannot convert argument 1 from 'std::_Container_proxy' to '_Package &amp;'</p>\n</blockquote>\n\n<p>My allocator is a specialization as declared below. I admit that while I've used STL a lot, allocators are not something I've worked with much.\n</p>\n\n<pre><code>struct PackageAlloc : public allocator&lt;Package&gt;\n{\n    template &lt;class U&gt;\n    void destroy(Package* p)\n    {\n        ReleasePackage(p);\n    }\n\n    template &lt;class U&gt;\n    struct rebind\n    {\n        typedef PackageAlloc other;\n    };\n};\n</code></pre>\n\n<p>I was hoping based on what I was reading from cppreference.com and some discussions here this would work, though most threads are customizing <code>allocate</code> and <code>deallocate</code>. Do those have to be installed? I keep reading about <code>allocator_traits</code> but don't see that it even gets used my MSVCRT 14.0 headers for vector.</p>\n\n<p>More to the point, I was really looking for a working example of how I would customize just <code>destroy</code> or what my implementation is missing that either means my <code>destroy</code> is not called (i.e. it compiles but debugging yields no break) or why MSVC is erring. I don't need to override allocation of memory; I just want to make sure that elements within the vector are properly destroyed.</p>\n\n<p><strong>Edit:</strong> Of note, an array of <code>Package</code> structures is \"returned\" from a Win32-style COM method I own, following the convention of similar methods in our code base and because our immediate partners didn't want to deal with <code>SAFEARRAY</code> and allocation of new objects from an <code>IEnum</code>-style enumerator would be very inefficient (i.e. these are otherwise lightweight object). So while deallocation is left to the caller, I'm trying to provide helper functions and samples (such as this <code>vector</code> implementation) for more easily dealing with potential memory leaks.</p>\n"}, {"tags": ["c++", "recursion", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "edited": false, "score": 0, "creation_date": 1471509023, "post_id": 39000279, "comment_id": 65377608, "body": "Can&#39;t you just invoke make on the top Makefile and specify the particular goal you are interested in (<code>make what-i-want</code>)?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "edited": false, "score": 0, "creation_date": 1471531699, "post_id": 39000279, "comment_id": 65392984, "body": "@RenaudPacalet no because they&#39;re chained. Top level make calls Qmake which generates makefile, calls make on that one, calls qmake from inside that one to generate another makefile then calls make on that one."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471585236, "post_id": 39000279, "comment_id": 65413497, "body": "@Adrian you do know that Make is not designed for recursivity and the only situation where recursive Make works correctly, is if you call Make on a &quot;black box&quot; submodule, meaning, isolated from the rest of the build, clearly not your case ?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 1, "creation_date": 1471614281, "post_id": 39000279, "comment_id": 65430768, "body": "@MarkGaleck what do mean not designed for recursivity?"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632158, "post_id": 39000279, "comment_id": 65441350, "body": "@Adrian if you distribute your Make scripts among subdirectories, use recursive Make invocations on subdirectories whose builds are not isolated, then you cannot have correct behaviour for them.  The correct way to implement distributed makefiles is to use textual include rather than semantic calls. This has been known from the beginning of Make but unfortunately it is not explicitly mentioned in the manual and most engineers who are used to C-type calling paradigm, continue to use it for Make.  See <a href=\"http://aegis.sourceforge.net/auug97.pdf\" rel=\"nofollow noreferrer\">aegis.sourceforge.net/auug97.pdf</a> ."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632285, "post_id": 39000279, "comment_id": 65441413, "body": "@Adrian One correct way to implement distributed makefiles, not by calling but by inclusion, is described in <a href=\"https://evbergen.home.xs4all.nl/nonrecursive-make.html\" rel=\"nofollow noreferrer\">evbergen.home.xs4all.nl/nonrecursive-make.html</a>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632289, "post_id": 39000279, "comment_id": 65441417, "body": "@MarkGaleck why is the behavior incorrect?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 1, "creation_date": 1471632338, "post_id": 39000279, "comment_id": 65441446, "body": "@MarkGaleck I&#39;m using recursive make and it works fine. I get binary equality."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632348, "post_id": 39000279, "comment_id": 65441449, "body": "@Adrian because the Make dependency tree is partitioned into subsets that do not communicate with each other so the partial trees are incomplete.  See the paper."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632391, "post_id": 39000279, "comment_id": 65441471, "body": "@Adrian it is not about binary equality of the results, that is not where the problem lies.  You have to read the paper... at the least the gist of it, is not very complicated."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632397, "post_id": 39000279, "comment_id": 65441478, "body": "@MarkGaleck I know that dependencies cannot be communicated between makes"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632443, "post_id": 39000279, "comment_id": 65441505, "body": "@Adrian well, there you have it...you know it already"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 1, "creation_date": 1471632492, "post_id": 39000279, "comment_id": 65441526, "body": "@MarkGaleck but that&#39;s not my problem and it&#39;s not my question. If my question is unclear let me know and I&#39;ll clarify."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632590, "post_id": 39000279, "comment_id": 65441573, "body": "@Adrian that&#39;s why recursivity by calling, works for &quot;black box&quot; subdirectories - because such a subdirectory, does not to communicate to the parent Make invocation. But if the directory is not isolated, by definition it has to communicate, but it can&#39;t."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632641, "post_id": 39000279, "comment_id": 65441597, "body": "@Adrian I am sorry, I was not answering your question...  I was questioning your method... that&#39;s why I put it in the comments.  I am sorry if I say things that you are not interested in hearing..."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 1, "creation_date": 1471632712, "post_id": 39000279, "comment_id": 65441629, "body": "@MarkGaleck this is about the make &quot;env&quot; variables: when make calls make it passes env variables. When I attempt to execute a make that&#39;s in the middle of the chain, it fails because it doesn&#39;t get the env vars that it normally gets."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632884, "post_id": 39000279, "comment_id": 65441709, "body": "@Adrian and you are saying, you can make the communication up the chain of recursive invocations, work, by using these env variables?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471632919, "post_id": 39000279, "comment_id": 65441724, "body": "@MarkGaleck I don&#39;t know. I&#39;m asking if that&#39;s the only consideration."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471633133, "post_id": 39000279, "comment_id": 65441833, "body": "@Adrian well... let me put it this way, to your question &quot;how can I simulate the normal environment for a given recursive make so that I can call it in isolation&quot;, I always thought the answer was &quot;impossible, due to issues shown in the Miller paper&quot;.  That&#39;s all."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471633192, "post_id": 39000279, "comment_id": 65441866, "body": "@MarkGaleck I&#39;ll read it and get back to you."}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471633285, "post_id": 39000279, "comment_id": 65441906, "body": "@Adrian if you think you have it under control and the Miller paper does not apply in your case, then I am sorry for bothering you.  It is always the case of &quot;don&#39;t do X unless you know what you are doing&quot;, of course.  If you know what you are doing, then...  my comments do not apply and I apologize."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471633331, "post_id": 39000279, "comment_id": 65441934, "body": "@MarkGaleck this was written in 1998. Did make even have parallel abilities at that time?"}, {"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1471633482, "post_id": 39000279, "comment_id": 65442011, "body": "@Adrian of course...  Make is inherently designed for parallel execution, from the beginning.  &#39;-j&#39; option is implemented precisely in order to disable that capability in case people have faulty makefiles, not to enable it."}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 5899976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b705d1e9901d9e444936a345189cca78?s=128&d=identicon&r=PG&f=1", "display_name": "Droid Coder", "link": "https://stackoverflow.com/users/5899976/droid-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1486241508, "last_edit_date": 1486241508, "creation_date": 1486240950, "answer_id": 42045374, "question_id": 39000279, "link": "https://stackoverflow.com/questions/39000279/gnu-recursive-make-how-to-capture-make-variables-to-execute-nested-makefile/42045374#42045374", "title": "GNU recursive make - how to capture make variables to execute nested makefile", "body": "<p>I assume the problem is that you need to find this information before you get a chance to make any changes to the generated makefiles.  Therefore, this solution is focused on shell commands (I'm assuming you're on Linux, since you don't say).</p>\n\n<p>After starting your build, the first time, use something like:</p>\n\n<pre><code>ps -ef | head -1\nps -ef | grep make\n</code></pre>\n\n<p>to find make processes involved in the build.  The PID column lists the Process ID of the make process, while the PPID column lists that of its parent.  Use this information to find the top-level make process.  Then, run:</p>\n\n<pre><code>strings /proc/&lt;pid&gt;/environ | sort &gt; /tmp/make_env\nenv | sort &gt; /tmp/normal_env\ndiff /tmp/normal_env /tmp/make_env\n</code></pre>\n\n<p>This will show you how the make process' environment differs from that of your current shell.</p>\n\n<p>Now, that might not solve your problem, because GNU Make allows variables to be specified as commandline parameters.  So, you should also check how it's being run:</p>\n\n<pre><code>strings /proc/&lt;pid&gt;/cmdline\n</code></pre>\n\n<p>That will print each commandline argument of &lt;pid&gt;, on a separate line.</p>\n\n<p>BTW, when variables are passed to GNU Make via commandline arguments, they're handled by overriding any instance of the same variable, that might be contained within the makefile.</p>\n\n<hr>\n\n<p>Within a makefile, you can see its environment using:</p>\n\n<pre><code>$(info My environment is $(shell env))\n</code></pre>\n\n<p>You can see its commandline options using:</p>\n\n<pre><code>$(info MAKEFLAGS = $(MAKEFLAGS))\n</code></pre>\n\n<p>If you <em>only</em> want to see the overrides, use MAKEOVERRIDES:</p>\n\n<pre><code>$(info MAKEOVERRIDES = $(MAKEOVERRIDES))\n</code></pre>\n\n<p>Finally, the targets can be seen using:</p>\n\n<pre><code>$(info MAKECMDGOALS = $(MAKECMDGOALS))\n</code></pre>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486241508, "creation_date": 1471446358, "question_id": 39000279, "link": "https://stackoverflow.com/questions/39000279/gnu-recursive-make-how-to-capture-make-variables-to-execute-nested-makefile", "title": "GNU recursive make - how to capture make variables to execute nested makefile", "body": "<p>I have a bunch of <code>qmake</code>-generated makefiles each of which call <code>make</code> inside them (recursive <code>make</code>) in a chained manner.</p>\n\n<p>After my build is over, the <code>qmake</code>-generated makefiles are all on disk so you'd think I could just call <code>make</code> on one of them if I wanted to 'replay' one particular makefile. Wrong.</p>\n\n<p>When I try <code>make</code>-ing one, it fails, probably because there's a bunch of (environment) variables that it normally inherits from the calling makefile during the normal build.</p>\n\n<p>Except for the variables, each <code>qmake</code>-generated makefile is pretty self-contained.</p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>How can I simulate the 'normal' environment for a given recursive <code>make</code> so that I can call it in isolation?</p>\n\n<p>I'm thinking I'd have to do something with the <code>--print-data-base</code> output: parse it and then call <code>make</code> with the same vars and values it had during the normal build.</p>\n\n<p><strong>WHY</strong></p>\n\n<p>I'm doing this because I need to modify the compile commands for ONE makefile but it's all controlled by the top-level <code>.conf</code> and I'm getting in way too deep.</p>\n"}, {"tags": ["c++", "qt", "qcad"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471446723, "post_id": 39000272, "comment_id": 65352487, "body": "Who did the <code>#include &lt;stdint.h&gt;</code>? You or the project? Users should not redefine Standard symbols &amp; should update old projects to remove them. As you can edit the headers, commenting out its redefinitions is probably the best you can do unless/until you get a fixed version. ... <b>or</b> maybe this project expects you to compile with pre-C++11 settings to avoid the Standardised <code>int_t</code> types. About &quot;if I comment out both statements in the second definition (In tools.h) I get some warning[s] and an error&quot;, that doesn&#39;t make sense, so probably you accidentally commented out an <code>#endif</code> or something"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471447224, "post_id": 39000272, "comment_id": 65352856, "body": "@underscore_d Not me. I did not do anything in the code except the comment part. And regarding the comment part, see edited please."}], "answers": [{"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1471449709, "post_id": 39000829, "comment_id": 65354419, "body": "Good catch. I forgot to mention that I get the same error on both buildings <code>MSVC2013</code> and <code>MSVC2015</code>. I installed it just for QT Creator to configure it and for me to be able to upgrade easily later. But I am using MSVC2013 to build."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1471457905, "post_id": 39000829, "comment_id": 65358991, "body": "@FirstStep You did build your Qt using MSVC2013 too, right?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471459352, "post_id": 39000829, "comment_id": 65359797, "body": "@KubaOber Correct. When I started the project, I configured as both MSVC2013 and MSVC2015 (select all)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1471461088, "post_id": 39000829, "comment_id": 65360686, "body": "If you built your own Qt, then there&#39;s no such thing as &quot;select all&quot;. You&#39;ll have one installation/build of Qt for each compiler version."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471526416, "post_id": 39000829, "comment_id": 65389007, "body": "@KubaOber see my answer. I do <b>not</b> know why it did &quot;<i>not work</i>&quot; first, now I do <b>not</b> know why &quot;<i>it works</i>&quot; :D"}], "tags": [], "owner": {"reputation": 1505, "user_id": 4118460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31e169d81e1a37c7837dbd8e48b1ea46?s=128&d=identicon&r=PG&f=1", "display_name": "vicrucann", "link": "https://stackoverflow.com/users/4118460/vicrucann"}, "is_accepted": false, "score": 1, "last_activity_date": 1471448037, "creation_date": 1471448037, "answer_id": 39000829, "question_id": 39000272, "link": "https://stackoverflow.com/questions/39000272/file-does-not-exist-dependent-error-issue-in-building-the-open-source-applica/39000829#39000829", "title": "File does not exist - dependent error. Issue in building the open source application QCAD", "body": "<p>From the <a href=\"http://www.qcad.org/en/qcad-documentation/supported-platforms\" rel=\"nofollow\">supported platforms</a>, it only mentions msvc2010 and msvc2013; you are trying to build using msvc2015 which is not supported. Try to change the compiler and see if it works.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471534667, "post_id": 39019305, "comment_id": 65395066, "body": "Short version: QCAD&#39;s build configuration is broken."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471534742, "post_id": 39019305, "comment_id": 65395117, "body": "I just tried checking back the <i>Shadow Build</i> and ReBuild, it still works. I have no idea what is going on or what went wrong.."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471534862, "post_id": 39019305, "comment_id": 65395192, "body": "It works because now your source folder is polluted with junk from the previous build. Of course it will work, but if you ever reinstall the source it&#39;ll stop working again."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471534934, "post_id": 39019305, "comment_id": 65395243, "body": "But should not ReBuild be <i>cleaning</i> junk before Building? and btw, when you first download the source and open it with QT Creator, yes you can &quot;select all&quot; compilers that you have (which I did select all (both) for MSVC 2013 and 15) and configure all files. @KubaOber"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471534982, "post_id": 39019305, "comment_id": 65395277, "body": "It&#39;ll clean junk in your build folder. Which is now a shadow folder, not the source folder."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471535004, "post_id": 39019305, "comment_id": 65395288, "body": "To know that it works you must have an absolutely pristine QCAD source folder, and an empty build folder. It&#39;ll fail the same way it did before."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1471612552, "post_id": 39019305, "comment_id": 65429589, "body": "@KubaOber could you please take a look at this <a href=\"http://www.qcad.org/rsforum/viewtopic.php?f=33&amp;t=4358&amp;p=15834#p15834\" rel=\"nofollow noreferrer\">qcad.org/rsforum/&hellip;</a> Maybe you have some ideas? Thanks in advance"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 0, "last_activity_date": 1471526301, "creation_date": 1471526301, "answer_id": 39019305, "question_id": 39000272, "link": "https://stackoverflow.com/questions/39000272/file-does-not-exist-dependent-error-issue-in-building-the-open-source-applica/39019305#39019305", "title": "File does not exist - dependent error. Issue in building the open source application QCAD", "body": "<p>For some reason, when I un-checked the \"<em>Shadow Build</em>\" in <code>Projects Settings</code> of QT Creator on all: <strong>Debug</strong>, <strong>Profile</strong> and <strong>Release</strong>; and I <strong>ReBuilt All</strong>, It worked like a charm. </p>\n\n<p>It took some time to ReBuild though.</p>\n"}], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1753, "favorite_count": 0, "accepted_answer_id": 39019305, "answer_count": 2, "score": 0, "last_activity_date": 1471526551, "creation_date": 1471446346, "last_edit_date": 1495541315, "question_id": 39000272, "link": "https://stackoverflow.com/questions/39000272/file-does-not-exist-dependent-error-issue-in-building-the-open-source-applica", "title": "File does not exist - dependent error. Issue in building the open source application QCAD", "body": "<p>I am on Windows 10 - 64 bits.</p>\n\n<p><strong>Goal:</strong> </p>\n\n<p>I am trying to build this Open Source application <a href=\"http://www.qcad.org/en/\" rel=\"nofollow noreferrer\">QCAD</a> and following there Instructions in <a href=\"http://www.qcad.org/en/component/content/article/78-qcad/111-qcad-compilation-from-sources\" rel=\"nofollow noreferrer\">Compiling QCAD from Sources</a>. Following \"<em>Windows</em>\" section, I have done this:</p>\n\n<ul>\n<li>Installed <a href=\"https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk\" rel=\"nofollow noreferrer\">MS SDK</a> and <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=49981\" rel=\"nofollow noreferrer\">.Net framework 4</a></li>\n<li>Installed <a href=\"https://download.qt.io/archive/online_installers/2.0/\" rel=\"nofollow noreferrer\">QT Unified Windows x86 2.0.1-1</a> with the MSVC2013 and MSVC2015 compilers</li>\n</ul>\n\n<p><strong>Problem:</strong></p>\n\n<p>Once I build in QT Creator as MSVC2013->Debug->Mainwindow, I get 8 duplicated errors:</p>\n\n<blockquote>\n  <p>D:\\VisualStudio2015\\VC\\include\\stdint.h:17: error: C2371: 'int8_t':\n  redefinition; different basic types</p>\n</blockquote>\n\n<p>If I search for <code>int8_t</code> I find bunch of its usage and couple of its definitions:</p>\n\n<ul>\n<li><p>One in <code>spatialindex\\capi\\sidx_config.h</code>:</p>\n\n<pre><code>#if _MSC_VER &lt;= 1500\ntypedef __int8 int8_t;\n //..\ntypedef unsigned __int8 uint8_t;\n //..\n#endif\n</code></pre></li>\n<li><p>One in <code>spatialindex\\tools\\tools.h</code></p>\n\n<pre><code>#if (defined _WIN32 || defined _WIN64 || defined WIN32 || defined WIN64) &amp;&amp; !defined __GNUC__ &amp;&amp; _MSC_VER!=1800 &amp;&amp; _MSC_VER!=1600\ntypedef __int8 int8_t;\n//..\ntypedef unsigned __int8 uint8_t;\n// ..\n</code></pre></li>\n</ul>\n\n<p>Now if I comment out both statements in the second definition (In <code>tools.h</code>) I get some warnings and an error:</p>\n\n<blockquote>\n  <p>dependent '............\\Q-CAD\\src\\3rdparty\\qt-labs-qtscriptgenerator-5.5.0\\generated_cpp\\com_trolltech_qt_core\\qtscript_Global.cpp' does not exist.</p>\n</blockquote>\n\n<p><strong>Attempts:</strong></p>\n\n<ul>\n<li><p>If I do what <a href=\"http://www.qcad.org/rsforum/viewtopic.php?f=30&amp;t=4002\" rel=\"nofollow noreferrer\">this guy did</a> (He asks about the same error within the post), the dependent error persists.</p></li>\n<li><p>I don't want to change any definitions like the answer in <a href=\"https://stackoverflow.com/questions/16415058/visual-studio-2008-error-c2371-int8-t-redefinition-different-basic-types\">visual studio 2008 error C2371: 'int8_t' : redefinition; different basic types (http_parser.h)</a>.</p></li>\n</ul>\n\n<p>Can you help me accomplish this?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>\"<em>Now if I comment out both statements in the second definition</em>\" I just commented these couple lines in Tools.h: (No accidents occurred and if I un-comment them I get the previous error).</p>\n\n<p><a href=\"https://i.stack.imgur.com/aN5kO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aN5kO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "multithreading", "c++11", "mutex"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1471445967, "post_id": 38999965, "comment_id": 65351934, "body": "I do not understand points 4 and 5."}, {"owner": {"reputation": 569, "user_id": 684275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7760ed11c746f298e046ba0914e0c49f?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/684275/ivan"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1471446216, "post_id": 38999965, "comment_id": 65352121, "body": "The event makes the threads to wake up before the timeout ends."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1471446458, "post_id": 38999965, "comment_id": 65352311, "body": "<i>&quot;they do not share any resources&quot;</i> and <i>&quot;all threads check a variable [..] <code>IsAlive</code>&quot;</i> is incompatible."}, {"owner": {"reputation": 569, "user_id": 684275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7760ed11c746f298e046ba0914e0c49f?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/684275/ivan"}, "edited": false, "score": 0, "creation_date": 1471446538, "post_id": 38999965, "comment_id": 65352359, "body": "This variable is protected by a mutex."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1471446751, "post_id": 38999965, "comment_id": 65352505, "body": "You use a unique lock to protect this variable only with condition variable."}, {"owner": {"reputation": 569, "user_id": 684275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7760ed11c746f298e046ba0914e0c49f?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/684275/ivan"}, "edited": false, "score": 0, "creation_date": 1471446910, "post_id": 38999965, "comment_id": 65352616, "body": "No, there will be two locks: one protects the IsAlive that indicates the thread to continue working and another one, that protects the CV that makes threads to wake up."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1471446931, "post_id": 38999965, "comment_id": 65352630, "body": "<code>std::atomic</code> might be used, but Mike&#39;s answer is better with <code>notify_all</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1471451764, "post_id": 38999965, "comment_id": 65355633, "body": "Read about <code>std::thread::detach</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1471446406, "post_id": 39000171, "comment_id": 65352266, "body": "Note that detaching a thread and returning from main has some dangers - see <a href=\"http://stackoverflow.com/questions/19744250/what-happens-to-a-detached-thread-when-main-exits\" title=\"what happens to a detached thread when main exits\">stackoverflow.com/questions/19744250/&hellip;</a>"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1471446060, "creation_date": 1471446060, "answer_id": 39000171, "question_id": 38999965, "link": "https://stackoverflow.com/questions/38999965/stdcondition-variable-without-a-lock/39000171#39000171", "title": "std::condition_variable without a lock", "body": "<p>In c++11, you should be able to <code>detach()</code> a thread, so that it will be treated as a Daemon thread, which means the thread will be automatically stopped if the app terminates.</p>\n"}, {"tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": true, "score": 3, "last_activity_date": 1471446915, "last_edit_date": 1471446915, "creation_date": 1471446101, "answer_id": 39000184, "question_id": 38999965, "link": "https://stackoverflow.com/questions/38999965/stdcondition-variable-without-a-lock/39000184#39000184", "title": "std::condition_variable without a lock", "body": "<p>yes you can do this using standard c++ mechanisms of condition variables, a mutex and a flag of somekind </p>\n\n<pre><code>// Your class or global variables\nstd::mutex deathLock;\nstd::condition_variable deathCv;\nbool deathTriggered = false;\n\n// Kill Thread runs this code to kill all other threads:\n{\n    std::lock_guard&lt;std::mutex&gt; lock(deathLock);\n    deathTriggered = true;\n}\ndeathCv.notify_all();\n\n// You Worker Threads run this code:\nwhile(true)\n{\n   ... do work\n\n   // Now wait for 1000 milliseconds or until death is triggered:\n   std::unique_lock&lt;std::mutex&gt; lock(deathLock);\n   deathCv.wait_for(lock, std::chrono::milliseconds(1000), [](){return deathTriggered;});\n\n   // Check for death\n   if(deathTriggered)\n   {\n      break;\n   }\n}\n</code></pre>\n\n<p>Note that this runs correctly in the face of death being triggered before entering the condition. You could also use the return value from wait_for but this way is easier to read imo. Also, whilst its not clear, multiple threads sleeping is fine as the wait_for code internally unlocks the unique_lock whilst sleeping and reacquires it to check the condition and also when it returns.</p>\n\n<p>Finally, all the threads do wake up 'at the same time' as whilst they're serialised in checking the bool flag, this is only for a few instructions then they unlock the lock as they break out of the loop. It would be unnoticeable.</p>\n"}], "owner": {"reputation": 569, "user_id": 684275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7760ed11c746f298e046ba0914e0c49f?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/684275/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "accepted_answer_id": 39000184, "answer_count": 2, "score": 3, "last_activity_date": 1471446915, "creation_date": 1471445541, "question_id": 38999965, "link": "https://stackoverflow.com/questions/38999965/stdcondition-variable-without-a-lock", "title": "std::condition_variable without a lock", "body": "<p>I'm trying to synchonise a set of threads. These threads sleep most of the time, waking up to do their scheduled job. I'm using <code>std::thread</code> for them.</p>\n\n<p>Unfortunately, when I terminate the application threads prevent it from exiting. In C# I can make a thread to be <code>background</code> so that it will be termianted on app exit. It seems to me that equavalint feature is not availabe at C++.</p>\n\n<p>So I decided to use a kind of event indicator, and make the threads to wake up when the app exits. Standard C++11 <code>std::condition_variable</code> requires a unique lock, so I cannot use it, as I need both threads to wake up at the same time (they do not share any resources).</p>\n\n<p>Eventually, I decided to use WinApi's <code>CreateEvent</code> + <code>SetEvent</code>+<code>WaitForSingleObject</code> in order to solve the issue.</p>\n\n<p>I there a way to achieve the same behavior using just c++11?</p>\n\n<p>Again, what do I want:</p>\n\n<ol>\n<li>a set of threads are working independently and usually are asleep\nfor a particular period (could be different for different threads;</li>\n<li><p>all threds check a variable that is availabe for all of them whether\nit is a time to stop working (I call this variable <code>IsAliva</code>).\nActually all threads are spinning in loop like this:    </p>\n\n<pre><code>while (IsAlive) {\n  // Do work\n  std::this_thread::sleep_for(...);\n}\n</code></pre></li>\n<li>threads must be able to work simultaneously, not blocking each other;</li>\n<li>when the app is closed and event is risen and it makes the thread to\n wake up right now, no matter the timeout;</li>\n<li>waken up, it checks the\n<code>IsAlive</code> and exits.</li>\n</ol>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1471446110, "post_id": 38999911, "comment_id": 65352062, "body": "Simple way would be to separate work to two different functions, in main thread create threads to run the first half, join all of them and then run second half."}, {"owner": {"reputation": 413, "user_id": 1665631, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/436dbff2763d72993f3cb6977e13dbf6?s=128&d=identicon&r=PG", "display_name": "GregPhil", "link": "https://stackoverflow.com/users/1665631/gregphil"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1471446930, "post_id": 38999911, "comment_id": 65352627, "body": "This would be actually to complicated. My architecture doesn&#39;t allow me the to separate the work."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1471450910, "post_id": 38999911, "comment_id": 65355173, "body": "There&#39;s an actual thread primitive called barrier that is used for this.  I know pthread implements this.  Also, boost implements this."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 1, "creation_date": 1471513562, "post_id": 38999911, "comment_id": 65380471, "body": "The answers to <a href=\"http://stackoverflow.com/questions/24465533/implementing-boostbarrier-in-c11\">this question</a> seem to cover this nicely."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 1665631, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/436dbff2763d72993f3cb6977e13dbf6?s=128&d=identicon&r=PG", "display_name": "GregPhil", "link": "https://stackoverflow.com/users/1665631/gregphil"}, "edited": false, "score": 0, "creation_date": 1471446806, "post_id": 39000281, "comment_id": 65352544, "body": "sounds interesting, is there any documentation/reference how to use omp?"}, {"owner": {"reputation": 474, "user_id": 2543755, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/3sPcI.jpg?s=128&g=1", "display_name": "tnas", "link": "https://stackoverflow.com/users/2543755/tnas"}, "reply_to_user": {"reputation": 413, "user_id": 1665631, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/436dbff2763d72993f3cb6977e13dbf6?s=128&d=identicon&r=PG", "display_name": "GregPhil", "link": "https://stackoverflow.com/users/1665631/gregphil"}, "edited": false, "score": 0, "creation_date": 1471447305, "post_id": 39000281, "comment_id": 65352917, "body": "A good introductory tutorial is here <a href=\"http://bisqwit.iki.fi/story/howto/openmp/\" rel=\"nofollow noreferrer\">openmp tutorial</a> and references are here <a href=\"https://computing.llnl.gov/tutorials/openMP/\" rel=\"nofollow noreferrer\">openmp reference</a>. An excelent forum is here <a href=\"http://openmp.org/forum/\" rel=\"nofollow noreferrer\">openmp forum</a>"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1471447484, "post_id": 39000281, "comment_id": 65353037, "body": "That sounds not portable"}], "tags": [], "owner": {"reputation": 474, "user_id": 2543755, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/3sPcI.jpg?s=128&g=1", "display_name": "tnas", "link": "https://stackoverflow.com/users/2543755/tnas"}, "is_accepted": false, "score": 3, "last_activity_date": 1471446362, "creation_date": 1471446362, "answer_id": 39000281, "question_id": 38999911, "link": "https://stackoverflow.com/questions/38999911/what-is-the-best-way-to-realize-a-synchronization-barrier-between-threads/39000281#39000281", "title": "What is the best way to realize a synchronization barrier between threads", "body": "<p>An option could be the use of OpenMP framework.</p>\n\n<pre><code>#include &lt;omp.h&gt;\n\nvoid func()\n{\n  #pragma omp parallel num_threads(number_of_threads)\n  {\n    operation1();\n\n    #pragma omp barrier\n    // wait till all threads reached this point \n\n    operation2();\n  }\n}\n</code></pre>\n\n<p>Compile the code with -fopenmp</p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 1665631, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/436dbff2763d72993f3cb6977e13dbf6?s=128&d=identicon&r=PG", "display_name": "GregPhil", "link": "https://stackoverflow.com/users/1665631/gregphil"}, "edited": false, "score": 0, "creation_date": 1471514288, "post_id": 39014279, "comment_id": 65380941, "body": "Thx a lot... look straightforward and very promising!"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 4, "creation_date": 1513382820, "post_id": 39014279, "comment_id": 82646892, "body": "With your example implementation of <code>wait</code>; Imagine a barrier for 2 threads - and they both call <code>wait</code>, the thread calling wait for the 2nd count will make progress. But since the thread who called <code>wait</code> for the 1st count is never woken up (<code>notified</code>), it may wait forever in theory."}], "tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": false, "score": 12, "last_activity_date": 1557739362, "last_edit_date": 1557739362, "creation_date": 1471511702, "answer_id": 39014279, "question_id": 38999911, "link": "https://stackoverflow.com/questions/38999911/what-is-the-best-way-to-realize-a-synchronization-barrier-between-threads/39014279#39014279", "title": "What is the best way to realize a synchronization barrier between threads", "body": "<p>You could use <a href=\"http://www.boost.org/doc/libs/1_54_0/doc/html/thread/synchronization.html#thread.synchronization.barriers\" rel=\"noreferrer\">boost::barrier</a><br>\nUnfortunately, the thread barrier concept itself is not part of c++11 or visual c++.<br>\nIn pure c++11 you could use a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"noreferrer\">condition variable</a> and a counter.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;condition_variable&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nclass my_barrier\n{\n\n public:\n    my_barrier(int count)\n     : thread_count(count)\n     , counter(0)\n     , waiting(0)\n    {}\n\n    void wait()\n    {\n        //fence mechanism\n        std::unique_lock&lt;std::mutex&gt; lk(m);\n        ++counter;\n        ++waiting;\n        cv.wait(lk, [&amp;]{return counter &gt;= thread_count;});\n        cv.notify_one();\n        --waiting;\n        if(waiting == 0)\n        {\n           //reset barrier\n           counter = 0;\n        }\n        lk.unlock();\n    }\n\n private:\n      std::mutex m;\n      std::condition_variable cv;\n      int counter;\n      int waiting;\n      int thread_count;\n};\n\nint thread_waiting = 3;\nmy_barrier barrier(3);\n\n\nvoid func1()\n{\n    std::this_thread::sleep_for(std::chrono::seconds(3));\n    barrier.wait();\n    std::cout &lt;&lt; \"I have awakened\" &lt;&lt; std::endl;\n}\n\nvoid func2()\n{\n    barrier.wait();\n    std::cout &lt;&lt; \"He has awakened!!\" &lt;&lt; std::endl;\n}\n\nint main() {\n    std::thread t1(func1);  \n    std::thread t2(func2);\n    std::thread t3(func2);\n    t1.join();\n    t2.join();\n    t3.join();\n}\n</code></pre>\n\n<p>Each thread wait till a predicate is met. The last thread will make the predicate valid, and allow the waiting threads to proceed. If you want to reuse\nthe barrier (for instance call the function multiple times), you need another\nvariable to reset the counter.</p>\n\n<p>This current implementation is limited. A calling <code>func();func();</code> twice may not make threads wait the second time.</p>\n"}, {"tags": [], "owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "is_accepted": false, "score": 0, "last_activity_date": 1559763709, "creation_date": 1559763709, "answer_id": 56466982, "question_id": 38999911, "link": "https://stackoverflow.com/questions/38999911/what-is-the-best-way-to-realize-a-synchronization-barrier-between-threads/56466982#56466982", "title": "What is the best way to realize a synchronization barrier between threads", "body": "<p><strong>Solution</strong>:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;condition_variable&gt;\n\nclass Barrier\n{\n\npublic:\n\n    Barrier(std::size_t nb_threads)\n        : m_mutex(),\n        m_condition(),\n        m_nb_threads(nb_threads)\n    {\n        assert(0u != m_nb_threads);\n    }\n\n    Barrier(const Barrier&amp; barrier) = delete;\n\n    Barrier(Barrier&amp;&amp; barrier) = delete;\n\n    ~Barrier() noexcept\n    {\n        assert(0u == m_nb_threads);\n    }\n\n    Barrier&amp; operator=(const Barrier&amp; barrier) = delete;\n\n    Barrier&amp; operator=(Barrier&amp;&amp; barrier) = delete;\n\n    void Wait()\n    {\n        std::unique_lock&lt; std::mutex &gt; lock(m_mutex);\n\n        assert(0u != m_nb_threads);\n\n        if (0u == --m_nb_threads)\n        {\n            m_condition.notify_all();\n        }\n        else\n        {\n            m_condition.wait(lock, [this]() { return 0u == m_nb_threads; });\n        }\n    }\n\nprivate:\n\n    std::mutex m_mutex;\n\n    std::condition_variable m_condition;\n\n    std::size_t m_nb_threads;\n};\n</code></pre>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nBarrier barrier(2u);\n\nvoid func1()\n{\n    std::this_thread::sleep_for(std::chrono::seconds(3));\n    barrier.Wait();\n    std::cout &lt;&lt; \"t1 awakened\" &lt;&lt; std::endl;\n}\n\nvoid func2()\n{\n    barrier.Wait();\n    std::cout &lt;&lt; \"t2 awakened\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    std::thread t1(func1);  \n    std::thread t2(func2);\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Try It Online</strong>: <a href=\"https://wandbox.org/permlink/fXxNpTAZnHB9HoQ3\" rel=\"nofollow noreferrer\">WandBox</a></p>\n"}], "owner": {"reputation": 413, "user_id": 1665631, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/436dbff2763d72993f3cb6977e13dbf6?s=128&d=identicon&r=PG", "display_name": "GregPhil", "link": "https://stackoverflow.com/users/1665631/gregphil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9020, "favorite_count": 2, "answer_count": 3, "score": 12, "last_activity_date": 1559763709, "creation_date": 1471445409, "last_edit_date": 1557820964, "question_id": 38999911, "link": "https://stackoverflow.com/questions/38999911/what-is-the-best-way-to-realize-a-synchronization-barrier-between-threads", "title": "What is the best way to realize a synchronization barrier between threads", "body": "<p>Having several threads running I need to guaranty that every of my threads reached a certain point before proceeding. I need to implement a kind of barrier. Consider a function <code>func</code> which can be run from several threads:</p>\n\n<pre><code>void func()\n{\n  operation1();\n  // wait till all threads reached this point \n  operation2();\n}\n</code></pre>\n\n<p>What is best way to realise this barrier using C++ 11 and VS12, considering boost if needed.</p>\n"}, {"tags": ["c++", "break"], "comments": [{"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 1, "creation_date": 1471445286, "post_id": 38999850, "comment_id": 65351474, "body": "Consider using <code>goto</code>."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "edited": false, "score": 2, "creation_date": 1471445297, "post_id": 38999850, "comment_id": 65351483, "body": "No, <code>break(2)</code> doesn&#39;t exist; <code>goto</code> is the option"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1471445367, "post_id": 38999850, "comment_id": 65351541, "body": "So much nested code is a reason to refactor"}, {"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471445450, "post_id": 38999850, "comment_id": 65351601, "body": "Can you use goto in the in the for or not?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1471445605, "post_id": 38999850, "comment_id": 65351691, "body": "This is about the only place a <code>goto</code> is acceptable. A function is preferred (imho). A <code>goto</code> is actually better than <code>break(2)</code> would be if it were legal."}, {"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471445843, "post_id": 38999850, "comment_id": 65351854, "body": "do you have to include anything?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1471446260, "post_id": 38999850, "comment_id": 65352156, "body": "I&#39;m tempted to reverse-dupe-close the other question, as this one looks far better."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 4, "creation_date": 1471445715, "post_id": 38999882, "comment_id": 65351769, "body": "Abusing functions or stuffing additional flags inside iteration logic to perform flow control are two good ways to make a mess of your code."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 3, "creation_date": 1471445794, "post_id": 38999882, "comment_id": 65351824, "body": "As opposed to <code>goto</code> or even exceptions?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1471445843, "post_id": 38999882, "comment_id": 65351855, "body": "@Quentin: The approaches I have outlined are very common in C and C++ and would be recognized by most anyone as normal practice.  What, in your opinion, is the better approach?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1471445887, "post_id": 38999882, "comment_id": 65351879, "body": "@LogicStuff, exceptions as a flow of control mechanism!? Better not."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1471445917, "post_id": 38999882, "comment_id": 65351898, "body": "@LogicStuff as opposed to <code>goto</code>, which is the last flow control primitive when the other ones (here <code>break</code>) aren&#39;t enough. Exceptions should not in any way be involved in flow control."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 2, "creation_date": 1471446035, "post_id": 38999882, "comment_id": 65351995, "body": "(I listed two, maybe only one scorned alternatives, It was not a suggestion)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1471446379, "post_id": 38999882, "comment_id": 65352248, "body": "@JohnZwinck Dillydill123&#39;s answer is pretty much the canonical structure of a nested loop break."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 4, "last_activity_date": 1471445610, "last_edit_date": 1471445610, "creation_date": 1471445309, "answer_id": 38999882, "question_id": 38999850, "link": "https://stackoverflow.com/questions/38999850/how-do-you-break-out-of-nested-loops-in-c/38999882#38999882", "title": "How do you break out of nested loops in C++?", "body": "<p>No, there is no <code>break(2)</code> unfortunately (or perhaps fortunately, depending on your views of deep nesting of scopes).</p>\n\n<p>There are two main ways to solve this:</p>\n\n<ol>\n<li>Set a flag before you <code>break</code> which tells the outer loop to stop.</li>\n<li>Put some of your nested loops into functions, so that they can do <code>break</code> but also <code>return</code> to jump out.  For example:</li>\n</ol>\n\n<hr>\n\n<pre><code>// returns true if should be called again, false if not\nbool foo() {\n    for(int j = 6; j &lt; 9; j++) {\n        for(int b = 7; b &lt; 12; b++) {\n            if (something) {\n                break; // one level\n            }\n            if (whatever) {\n                return true; // two levels\n            }\n            if (another) {\n                return false; // three levels\n            }\n        }\n    }\n}\n\nint main() {\n    for(int x = 5; x &lt; 10; x++) {\n        if (!foo()) {\n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471445418, "post_id": 38999890, "comment_id": 65351573, "body": "Can you use goto in the in the for or not?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471445476, "post_id": 38999890, "comment_id": 65351615, "body": "@Ian you can use it everywhere. Don&#39;t reach for it first thing, though."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "reply_to_user": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 1, "creation_date": 1471445578, "post_id": 38999890, "comment_id": 65351676, "body": "@Ian: you can safely <code>goto</code> <i>out</i> of the loop, but beware <code>goto</code> <i>into</i> the loop."}, {"owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "edited": false, "score": 0, "creation_date": 1471445628, "post_id": 38999890, "comment_id": 65351710, "body": "thanks I get it now. :)"}], "tags": [], "owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "is_accepted": false, "score": 9, "last_activity_date": 1471445445, "last_edit_date": 1471445445, "creation_date": 1471445332, "answer_id": 38999890, "question_id": 38999850, "link": "https://stackoverflow.com/questions/38999850/how-do-you-break-out-of-nested-loops-in-c/38999890#38999890", "title": "How do you break out of nested loops in C++?", "body": "<p>You can use <code>goto</code>. It's essentially the same function</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    for(int x = 5; x &lt; 10; x++) {\n        for(int j = 6; j &lt; 9; j++) {\n            for(int b = 7; b &lt; 12; b++) {\n                if (condition)\n                    goto endOfLoop;\n            }\n        }\n    }\n\n    endOfLoop:\n    // Do stuff here\n}\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 5232956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41fb9a8dfd02f871b752a719d4a9395f?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5232956/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6286, "favorite_count": 2, "closed_date": 1471445720, "answer_count": 2, "score": 1, "last_activity_date": 1568649525, "creation_date": 1471445198, "last_edit_date": 1568649525, "question_id": 38999850, "link": "https://stackoverflow.com/questions/38999850/how-do-you-break-out-of-nested-loops-in-c", "closed_reason": "Duplicate", "title": "How do you break out of nested loops in C++?", "body": "<p>I am a beginner in C++, and I am wondering how to break out of nested loops. Is there a <code>break(2)</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    for (int x = 5; x &lt; 10; x++) {\n        for (int j = 6; j &lt; 9; j++) {\n            for (int b = 7; b &lt; 12; b++) {\n                // Some statements\n                // Is break(2) right or wrong\n                // or can I use 'break; break;'?\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "vector", "int"], "comments": [{"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 3, "creation_date": 1471445259, "post_id": 38999823, "comment_id": 65351456, "body": "At least you may use <code>std::copy</code> instead of the nested loop"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471445394, "post_id": 38999823, "comment_id": 65351557, "body": "Isn&#39;t this question for <a href=\"http://codereview.stackexchange.com/\">Code Review</a>?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471445454, "post_id": 38999823, "comment_id": 65351604, "body": "@mvidelgauz Probably not. Code Review expects complete, [theoretically] production level code that can be reviewed, this code snippet is nowhere near complete enough for their standards."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471445506, "post_id": 38999823, "comment_id": 65351637, "body": "Is that a real code or just an example? Because <code>lCells</code> is here a dangling pointer"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1471445567, "post_id": 38999823, "comment_id": 65351673, "body": "@Xirema Thank you for clarification. I am still far from good understanding those <a href=\"http://meta.stackexchange.com/questions/129598/which-computer-science-programming-stack-exchange-do-i-post-in\">possible directions</a>"}, {"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "edited": false, "score": 0, "creation_date": 1471445663, "post_id": 38999823, "comment_id": 65351736, "body": "man, please don&#39;t be pedantic. It&#39;s a simple question I am raising here, please be constructive :)"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1471445836, "post_id": 38999823, "comment_id": 65351851, "body": "@Nabil.G I am fully with you! But I am afraid that here your question will soon be closed by mods as off-topic. I would like to be wrong..."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471445914, "post_id": 38999823, "comment_id": 65351896, "body": "@Nabil.G  The code you showed creates a new vector. It does not create an array. The memory belongs to the vector and depends on the life-time of the vector."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471445995, "post_id": 38999823, "comment_id": 65351955, "body": "@VladfromMoscow: The content of a vector is an array."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471446033, "post_id": 38999823, "comment_id": 65351994, "body": "@BenVoigt The problem is who is the owner of the memory."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471446195, "post_id": 38999823, "comment_id": 65352111, "body": "@Vlad: An array can be owned, too.  Would you be happier if the code used <code>std::unique_ptr&lt;int[]&gt;</code> instead of <code>vector&lt;int&gt;</code>?  Both are arrays stored in a smart pointer, the only real difference is that the vector knows its size and can change it."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471446286, "post_id": 38999823, "comment_id": 65352177, "body": "@BenVoigt I do not see a sense. Either you are creating a vector or you are creating an array."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471446334, "post_id": 38999823, "comment_id": 65352217, "body": "@BenVoigt And the difference is not in the size. The difference is the life-time."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471446336, "post_id": 38999823, "comment_id": 65352218, "body": "@VladfromMoscow: Creating a vector <i>does</i> create an array.  The vector points to the array."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471446342, "post_id": 38999823, "comment_id": 65352223, "body": "@Nabil.G does this array need to own its contents or are you okay with just pointing to the buffer of a vector and doing manual safety checks?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471446440, "post_id": 38999823, "comment_id": 65352300, "body": "@BenVoigt As I said it is an incorrect point of view because the question arises who is the owner of the memory. For example the vector can leave the scope of the array and the memory will be deleted. It is an invalid approach and does not create an array."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471446453, "post_id": 38999823, "comment_id": 65352309, "body": "@wasthishelpful: Because <code>kCells</code> and <code>lCells</code> are in the same scope, <code>kCells</code> will be destroyed after <code>lCells</code> and there is no dangling pointer.  If this isn&#39;t the real code and the pointer is copied to a larger scope, then yes there could be a problem."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471446543, "post_id": 38999823, "comment_id": 65352363, "body": "@VladfromMoscow: So is your complaint actually &quot;<code>lCells</code> is a non-owning pointer&quot;?  Because that has nothing at all to do with vector-vs-array."}, {"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471446705, "post_id": 38999823, "comment_id": 65352470, "body": "@NathanOliver: no it does not need to own its contents."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471446878, "post_id": 38999823, "comment_id": 65352596, "body": "@BenVoigt How do you know <code>kCells</code> will remain &quot;valid&quot; until <code>lCells</code> is destroyed? Any call in the same scope on <code>kCells</code> leading to a reallocation of the vector will be UB. As @VladfromMoscow tries to explain you, the address of a static array and a dynamic array aren&#39;t the same things"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471447067, "post_id": 38999823, "comment_id": 65352745, "body": "@BenVoigt You are mistaken. It has direct relation to a creating an object. Here lCells is an alias for another object that is of its part. It is not a stand-alone object."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471447159, "post_id": 38999823, "comment_id": 65352805, "body": "@BenVoigt Each object is defined by its memory and by its own life-time."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471447780, "post_id": 38999823, "comment_id": 65353218, "body": "@VladfromMoscow: Every non-null pointer is a handle aliasing another object (The pointer is itself an object too).  So are you actually complaining that <code>lCells</code> is a pointer not a statically-dimensioned array (size fixed at compile time)?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471447963, "post_id": 38999823, "comment_id": 65353313, "body": "@BenVoigt There is not even created a dynamically allocated array. There is created a vector. This vector has its own memory and its own life-time."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471448016, "post_id": 38999823, "comment_id": 65353345, "body": "@wasthishelpful: It&#39;s true that the address of a static array has type <code>int (*)[N]</code> and the address of a dynamic array has type <code>int*</code>.  But no one uses the address-of operator on a static array, they just let its name decay to a pointer.  But what was your point?  Static, dynamic, and automatic objects certainly all have different lifetime, but use-after-free has little to do with array-vs-vector."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471448088, "post_id": 38999823, "comment_id": 65353383, "body": "@VladfromMoscow: Of course there is a dynamically allocated array created.  Just like <code>make_unique</code> dynamically allocates an object.  You&#39;re just using a helper to do the allocation instead of saying <code>new</code> yourself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1471450724, "post_id": 38999823, "comment_id": 65355051, "body": "@Nabil.G Why <code>lCells</code>? What&#39;s wrong with using <code>kCells</code>?"}, {"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "edited": false, "score": 0, "creation_date": 1471451333, "post_id": 38999823, "comment_id": 65355415, "body": "@Hurkyl how would you implement it? I did not manage to get it work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1471453855, "post_id": 38999823, "comment_id": 65356770, "body": "@Nabil.G That&#39;s not evident from your question. What doesn&#39;t work? What did you expect the code to do and what did it actually do?"}, {"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471463451, "post_id": 38999823, "comment_id": 65361890, "body": "pretty interesting to get a downvoted question. I have the strong feeling that one needs to be rather careful before raising a question on Stackoverflow. I aimed to have some answer and not generate some endless discussion between &quot;self pro-claimed&quot; experts. Anyhow, the approach I posted does the job. In addition, many thanks to @NathanOliver who  was tried to give a solution."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471524384, "post_id": 38999823, "comment_id": 65387561, "body": "@BenVoigt This statement int* lCells = &amp;kCells[0]; creates nothing. The code snippet creates a vector. There is created neither array."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471531655, "post_id": 38999823, "comment_id": 65392951, "body": "@VladfromMoscow: A vector is a helper object for creating and managing an array.  You can get direct access to that array via <code>vector::data()</code>, you don&#39;t have to use vector iterators to access it."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471531839, "post_id": 38999823, "comment_id": 65393107, "body": "@BenVoigt One more this statement int* lCells = &amp;kCells[0]; creates nothing. There is no conversion from a vector to an array in the code snippet. There is conversion from one vector to another vector."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471532118, "post_id": 38999823, "comment_id": 65393290, "body": "@VladfromMoscow: Of course that statement does create a pointer, and does not create an array.  We agree on that.  But the code most certainly does convert from a vector of vectors to an array.  The array is created by <code>std::vector&lt;int&gt; kCells(pCells.size()*cell_size);</code> (as a side effect of <code>std::vector::vector</code>, this is not a declaration of an array).  <code>int* lCells = &amp;kCells[0];</code> is not creating that array, it is accessing it."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471532483, "post_id": 38999823, "comment_id": 65393541, "body": "@BenVoigt The array does not exist without the vector and moreover can stop ito exist then an element will be added to the vector. It is the same as to say for this code int *p; { int a[N]; p = a; } // where is the array? that we created an array. No we created nothing except the pointer itself.."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1471535389, "post_id": 38999823, "comment_id": 65395518, "body": "@VladfromMoscow: In that snippet you created and destroyed an array.  You have proven yourself that while lifetime may be a concern, the lifetime concern is not caused by using a helper class (whether <code>std::vector&lt;int&gt;</code> or <code>std::unique_ptr&lt;int[]&gt;</code>) for the array.  In fact, the helper class is designed to help solve the lifetime problem.  Notice the big difference between your code and the one in the question -- in your code the pointer is declared first, in the question the pointer is declared after the array is created.  C++ destroys locals in the opposite order of creation..."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471535534, "post_id": 39001366, "comment_id": 65395619, "body": "In the final alternative (manual call to <code>new[]</code> and <code>delete[]</code>) you still have the problem that some piece of code could call <code>delete[]</code> on a copy of your pointer, still killing the array).  So it has all the same potential problems as <code>vector&lt;int&gt;</code> or <code>unique_ptr&lt;int[]&gt;</code>, and none of the benefits."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471535651, "post_id": 39001366, "comment_id": 65395700, "body": "@BenVoigt There is that but you also have that with every other solution so I didn&#39;t think it mattered."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471535850, "post_id": 39001366, "comment_id": 65395817, "body": "I know you know that, but the way you wrote your answer, the two ways using smart pointers you listed the potential problems, and then the most fragile way you didn&#39;t mention any at all.  A skilled programmer is already familiar with the fragility of manual memory management, but many of SO&#39;s readers are not."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471535996, "post_id": 39001366, "comment_id": 65395905, "body": "@BenVoigt Ah.  I added some the caution about having a double delete.  I see where you are coming from now."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1471535954, "last_edit_date": 1471535954, "creation_date": 1471449669, "answer_id": 39001366, "question_id": 38999823, "link": "https://stackoverflow.com/questions/38999823/how-to-convert-vectorvectorint-to-array-c/39001366#39001366", "title": "How to convert vector&lt;vector&lt;int&gt;&gt; to array C++", "body": "<p>A convenient way to get a <code>int*</code> from a 2d vector would be to use a temporary vector to build the buffer and then pointing to that buffer.  The down fall with this approach is that you have to make sure the pointer does not outlive the vector and that the vector is not modified in a way that would cause the pointer to become invalid(typically this is anything that would cause a reallocation or shifting of elements).  If you are okay with that then you can use</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; data; // we assume this is populated\nstd::vector&lt;int&gt; builder;\nbuilder.reserve(data.size() * data[0].size()); // reserve space in builder. not needed but useful if you already now how many elements you need\n\nfor (const auto&amp; row : data)\n    builder.insert(builder.end(), row.begin(), row.end()\n\nint * non_owning_ptr = &amp;builder[0];\n</code></pre>\n\n<p>Now you have a non-owning pointer to the contents of builder and all the pitfalls that comes with.  The pitfalls can be avoided, except for possible invalidation due to modifying the vector, as long as <code>non_owning_ptr</code> does not leave the scope that <code>builder</code> is declared in.  You can pass it to a function in the same scope but you cannot pass it up and out of the current scope.  </p>\n\n<p>Another option is to use a <code>std::unique_ptr&lt;int[]&gt;</code> but you need to know the exactly how many elements you need as you cannot grow the <code>unique_ptr</code>.  This is better than using a raw pointer and <code>new</code> as you do not need to remember to call <code>delete</code> when you are done.  You still have the same scoping issues where you need to make sure the pointer does not outlive the <code>std::unique_ptr</code>.  You also have to make sure you do not do any operation on it that will delete the pointer like calling <code>reset</code>.  Using a <code>unique_ptr</code> you could use</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; data; // we assume this is populated\nauto builder = std::make_unique&lt;int[]&gt;(data.size() * data[0].size());\nint * end = builder.get(); // for std::copy\n\nfor(const auto&amp; row : data)\n{\n    std::copy(row.begin(), row.end(), end);\n    end += row.size();\n}\n\nint * non_owning_ptr = builder.get();\n</code></pre>\n\n<p>The only other way to get an array would be to <code>new</code> up the pointer, copy the data into the new buffer and then <code>delete</code> it when you are done.  This still isn't the greatest since you have to remember to call <code>delete</code> when you are done with the buffer but at least the pointer \"owns\" the data and can be passed wherever.  You also have to make sure whatever you call does not call delete on the pointer otherwise you will have a double delete when you go to delete it.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; data; // we assume this is populated\nint * buffer = new int[data.size() * data[0].size()];\nint * end = buffer; // for std::copy\n\nfor(const auto&amp; row : data)\n{\n    std::copy(row.begin(), row.end(), end);\n    end += row.size();\n}\n\n// use buffer here\n\n// don't forget this when done\ndelete [] buffer;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1471451982, "post_id": 39001483, "comment_id": 65355754, "body": "@Downvoter Could I get clarification on the downvote? If it&#39;s just the mandatory C++ downvote no need to respond."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471535613, "post_id": 39001483, "comment_id": 65395673, "body": "So your solution is to not allow the size to be determined at runtime at all?  That&#39;s not solving any problem, it is making things worse."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471536068, "post_id": 39001483, "comment_id": 65395954, "body": "@BenVoigt That was one of my proposed solutions, and if it&#39;s possible that&#39;d be desirable. But the most desirable solution would be to use a <code>vector&lt;int&gt;</code> rather than a <code>vector&lt;vector&lt;int&gt;&gt;</code> using 2D indexing into the 1D array: <a href=\"http://upcoder.com/2/efficient-vectors-of-vectors\" rel=\"nofollow noreferrer\">upcoder.com/2/efficient-vectors-of-vectors</a>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1471450046, "creation_date": 1471450046, "answer_id": 39001483, "question_id": 38999823, "link": "https://stackoverflow.com/questions/38999823/how-to-convert-vectorvectorint-to-array-c/39001483#39001483", "title": "How to convert vector&lt;vector&lt;int&gt;&gt; to array C++", "body": "<p>C++ provides a lot of better options than what you're doing, listed from best to worst:</p>\n\n<ol>\n<li>Construct your <code>vector&lt;vector&lt;int&gt;&gt;</code> as a <code>vector&lt;int&gt;</code>, doing 2D indexing into a 1D array where necessary, then don't even bother doing the conversion and directly use the <code>vector&lt;int&gt;</code></li>\n<li>Use <code>#define</code>s to establish size the height and width of the array, and use <code>array</code> rather than <code>vector</code> to store the elements</li>\n<li>The worst case is what you've done, made more brutally bad by the fact you do: <code>int* lCells = &amp;kCells[0]</code> meaning <code>lCells</code> is subject to invalidation by any change that would invalidate iterators to <code>kCells</code></li>\n</ol>\n\n<p><strong>1</strong> requires changes on your part external to the code in the question so I won't demonstrate that. <strong>2</strong> can be done like this though, given: <code>#define WIDTH 3</code>, <code>#define HEIGHT 2</code>, and that your input is defined like: <code>array&lt;WIDTH, array&lt;HEIGHT, int&gt;&gt; pCells</code> you can do:</p>\n\n<pre><code>int lCells[WIDTH * HEIGHT];\n\nfor_each(begin(lCells), end(lCells), [i = cbegin(pCells), j = cbegin(pCells)-&gt;cbegin()](auto&amp; it) mutable {\n    if(j == i-&gt;cend()) j = (++i)-&gt;cbegin();\n\n    it = *j++;\n});\n</code></pre>\n\n<p><a href=\"http://ideone.com/OTHfKk\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1471535954, "creation_date": 1471445127, "last_edit_date": 1471449728, "question_id": 38999823, "link": "https://stackoverflow.com/questions/38999823/how-to-convert-vectorvectorint-to-array-c", "title": "How to convert vector&lt;vector&lt;int&gt;&gt; to array C++", "body": "<p>I am wondering whether there is a smarter approach to convert a <code>std::vector&lt;std::vector&lt;int&gt;</code> to an array, given each vector item is of fixed size:</p>\n\n<p>I am currently using:</p>\n\n<pre><code>  unsigned int cell_size = pCells[0].size();\n  std::vector&lt;int&gt; kCells(pCells.size()*cell_size);\n  for (unsigned int i=0; i&lt;pCells.size(); i++){\n     for (unsigned int j=0; j&lt; cell_size; j++){\n    kCells[i*cell_size+j] = pCells[i][j];\n     }\n  }\n  // array\n  int* lCells = &amp;kCells[0];\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1471443705, "post_id": 38999273, "comment_id": 65350207, "body": "Pick one language: C or C++."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471443720, "post_id": 38999273, "comment_id": 65350219, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471443790, "post_id": 38999273, "comment_id": 65350278, "body": "Looks like C, but if it&#39;s really C++ consider using fstream"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471443838, "post_id": 38999273, "comment_id": 65350326, "body": "That code should have caused the compiler to produce warnings, and if not then you need to enable more warnings. The warnings should have made you think a little, like &quot;doesn&#39;t the arguments to <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>fscanf</code></a> need to be pointers?&quot; And &quot;if <code>firstName</code> is a pointer to <code>char</code>, then isn&#39;t <code>firstName[i]</code> a single <code>char</code>?&quot;"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471443896, "post_id": 38999273, "comment_id": 65350372, "body": "And please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471444149, "post_id": 38999400, "comment_id": 65350608, "body": "That&#39;s not going to work very well. A single contiguous array of  102400 bytes is not the same as an array of ten string pointers."}, {"owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471444336, "post_id": 38999400, "comment_id": 65350770, "body": "I agree with you if you use an offset instead of index . In that case you should access like this firstName+offset not firstname[i]"}, {"owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471444524, "post_id": 38999400, "comment_id": 65350907, "body": "Offset is updated as much as string is readed"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1471446021, "post_id": 38999400, "comment_id": 65351975, "body": "No need to use <code>sizeof(char)</code> since that is 1 by definition."}], "tags": [], "owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "is_accepted": false, "score": -1, "last_activity_date": 1471444205, "last_edit_date": 1471444205, "creation_date": 1471443937, "answer_id": 38999400, "question_id": 38999273, "link": "https://stackoverflow.com/questions/38999273/handling-strings-inside-files/38999400#38999400", "title": "Handling strings inside Files", "body": "<p>The error in your code is : firstName[i] is a character not a string but you use it like a string by using %s instead of %c. </p>\n\n<p>you should use a char ** instead of char *. </p>\n\n<p>char **firstName = (char**)malloc(10*sizeof(char)*10240);</p>\n\n<p>I think also that 10240 is too much for firstName. Use 255 or less.  </p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471445881, "post_id": 38999736, "comment_id": 65351875, "body": "Right! (it worked but I was lucky). Fixed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1471445894, "post_id": 38999736, "comment_id": 65351882, "body": "Suggest <code>char **firstName = malloc(sizeof *firstName  * nb_names);</code> to avoid coding errors."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1471446322, "post_id": 38999736, "comment_id": 65352207, "body": "edited. Thanks for your interest."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1471446301, "last_edit_date": 1471446301, "creation_date": 1471444865, "answer_id": 38999736, "question_id": 38999273, "link": "https://stackoverflow.com/questions/38999273/handling-strings-inside-files/38999736#38999736", "title": "Handling strings inside Files", "body": "<p>Pure C code:</p>\n\n<p>You have to allocate the array of arrays first, then allocate each string one by one\nIt's best to scan the strings into temp strings with a big size, and duplicate the strings later.</p>\n\n<pre><code>int i,nb_names = 10;\nchar **firstName = malloc(sizeof *firstName * nb_names);\nchar **lastName = malloc(sizeof *lastName *nb_names);\nchar tempn[1000],templ[1000];\nfor(i = 0; i&lt;nb_names; i++){\n    fscanf(fp,\"%s %s\", tempn,templ);\n    firstName[i] = strdup(tempn);\n    lastName[i] = strdup(templ);\n\n}\n</code></pre>\n\n<p>Note that I have changed <code>for (int i</code> to <code>for (i</code> because it is not C compliant but rather C++ compliant (or C99, not sure).\nFor C++, drop the mallocs and use <code>std::vector</code> and <code>std:string</code> instead.</p>\n\n<p>I'd recommend to use C++ if you can. I answered a lot of C/C++ questions on people trying (and failing) to allocate 2D arrays properly (including me 5 minutes ago damn :)). C++ using C++ library code is much clearer.</p>\n\n<p>Full C++ example, reading from standard input</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nint nb_names = 10;\nvector&lt;string &gt; firstName(nb_names);\nvector&lt;string &gt; lastName(nb_names);\n\nfor(int i = 0; i&lt;nb_names; i++){\n\n    cin &gt;&gt; firstName[i]; \n    cin &gt;&gt; lastName[i];\n\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6726793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd7f21fa0833a8793ef9845a4d00726?s=128&d=identicon&r=PG&f=1", "display_name": "TheDBeetle", "link": "https://stackoverflow.com/users/6726793/thedbeetle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1471670733, "answer_count": 2, "score": -3, "last_activity_date": 1471446301, "creation_date": 1471443587, "last_edit_date": 1471443711, "question_id": 38999273, "link": "https://stackoverflow.com/questions/38999273/handling-strings-inside-files", "closed_reason": "Not suitable for this site", "title": "Handling strings inside Files", "body": "<p>I'm trying to save data from a file into an array but I've had no luck for now. It's easy to save data after it was read from the file in case it's just numbers, but for example if I'm trying to save strings, the program keeps crashing over and over again. I'm using fscanf(); function since the whole .txt file is written in the same format: \"First Name, Last Name\". Now then, I've tried using the for loop in this way: </p>\n\n<pre><code>char *firstName = (char*)malloc(sizeof(char)*10240);\nchar *lastName = (char*)malloc(sizeof(char)*10240);\nfor(int i = 0; i&lt;10; i++){\n    fscanf(fp, \"%s %s\", firstName[i],lastName[i]);\n}\n</code></pre>\n\n<p>And that's where it crashes.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 1, "creation_date": 1471443397, "post_id": 38999125, "comment_id": 65349925, "body": "Sounds like an internal clang function that probably throws <code>bad_alloc</code>. That way you can delegate all your throws to functions, so if you disable exceptions you can handle it in the function."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1471443676, "post_id": 38999125, "comment_id": 65350187, "body": "In C and C++, any identifier beginning with 2 underscores - or any beginning with 1 underscore + a capital letter, or any in the global namespace beginning with 1 underscore - is reserved for use as an implementation (compiler, library, makefile, etc) detail. End-users shouldn&#39;t define such names, call predefined ones, or really worry about them at all."}, {"owner": {"reputation": 1439, "user_id": 1625206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pV16G.png?s=128&g=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/1625206/wintermute"}, "edited": false, "score": 1, "creation_date": 1471443813, "post_id": 38999125, "comment_id": 65350304, "body": "Usually, it&#39;s a macro that defines bad allocation exception throwing routine. As you&#39;ve probably already seen in those open source projects, it either uses std::bad_alloc() or does plain output in case first option is unavailable for some reason"}, {"owner": {"reputation": 1193, "user_id": 174584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Jp9vI.png?s=128&g=1", "display_name": "kvn", "link": "https://stackoverflow.com/users/174584/kvn"}, "edited": false, "score": 0, "creation_date": 1471445374, "post_id": 38999125, "comment_id": 65351550, "body": "The reason I ask, is that the static analyzer seemed to think a block of code was going to return nil and this was a step in the path. The analyzer seemed to think that the function would return and execution would continue. Whereas, as suggested, I would have expected the function to throw. The static analyzer could be wrong in this case, but I wasn&#39;t sure if I was missing something."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1471452044, "post_id": 38999125, "comment_id": 65355788, "body": "@underscore_d -- names that <b>contain</b> two underscores are reserved, not just names that <b>begin with</b> two underscores."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1471452213, "post_id": 38999125, "comment_id": 65355882, "body": "@PeteBecker Important correction, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1570119955, "creation_date": 1570119955, "answer_id": 58223286, "question_id": 38999125, "link": "https://stackoverflow.com/questions/38999125/what-does-throw-bad-alloc-do/58223286#58223286", "title": "What does __throw_bad_alloc() do?", "body": "<p>It's an internal artefact of the implementation, that you as a user don't need to know about.</p>\n\n<p>We know it's internal, as it uses a reserved identifier (names containing consecutive underscores are all reserved), and we might guess from the name that it probably just throws a <code>std::bad_alloc</code> exception.</p>\n\n<p>It may be more complex than simply throwing an exception in the normal way, as it has to function without making any allocations of its own.  It may also have configurable behaviour for use in non-default environments (e.g. where exceptions are disabled).</p>\n"}], "owner": {"reputation": 1193, "user_id": 174584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Jp9vI.png?s=128&g=1", "display_name": "kvn", "link": "https://stackoverflow.com/users/174584/kvn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570119955, "creation_date": 1471443178, "question_id": 38999125, "link": "https://stackoverflow.com/questions/38999125/what-does-throw-bad-alloc-do", "title": "What does __throw_bad_alloc() do?", "body": "<p>I came across this using the static analyzer in Xcode and couldn't find any documentation describing exactly what this function does. I've dome some Google searching without much luck. I've only found references to this function in some open source projects. </p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 104, "user_id": 1158719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e8lUe.jpg?s=128&g=1", "display_name": "Furkanzmc", "link": "https://stackoverflow.com/users/1158719/furkanzmc"}, "reply_to_user": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "edited": false, "score": 0, "creation_date": 1471512710, "post_id": 38999076, "comment_id": 65379895, "body": "You are right, <code>Question</code> is a <code>struct</code>. The problem goes away after changing the forward declaration from <code>class Question;</code> to <code>struct Question</code>. But that raises another question for me, before making that change the same code that raised error did not raise error in another class. I added more explanation in the edit to my question. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 2998, "user_id": 4885801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m1Nbb.png?s=128&g=1", "display_name": "isanae", "link": "https://stackoverflow.com/users/4885801/isanae"}, "is_accepted": true, "score": 6, "last_activity_date": 1471551359, "last_edit_date": 1592644375, "creation_date": 1471542649, "answer_id": 39024593, "question_id": 38999076, "link": "https://stackoverflow.com/questions/38999076/lnk2001-on-vs-2013-msvc-18-but-not-on-vs-2015-msvc-19/39024593#39024593", "title": "LNK2001 on VS 2013 (MSVC 18) but not on VS 2015 (MSVC 19)", "body": "<p>You shouldn't need <code>Question</code>'s definition for this to link properly. The <code>U</code> in <code>@PBUQuestion@</code> and the linker error seem to talk about <code>struct Question</code> instead of <code>class Question</code>, so you have a mismatch between the declaration and definition of <code>Question</code>. If you were to raise your warning level, you'd see that:</p>\n<pre><code>&gt; type a.cpp\nstruct A;\nclass A {};\n\n&gt; cl /Wall a.cpp\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.00.24213.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\na.cpp\na.cpp(2): warning C4099: 'A': type name first seen using 'struct' now seen using 'class'\na.cpp(2): note: see declaration of 'A'\n</code></pre>\n<p>But because your warning level is too low, you don't get that diagnostic.</p>\n<p>Your code seems to be valid from the <a href=\"https://stackoverflow.com/questions/4866425/mixing-class-and-struct\">standard's point of view</a>. From C++11 9.1/2:</p>\n<blockquote>\n<p>A <em>declaration</em> consisting solely of <em>class-key identifier;</em> is either a redeclaration of the name in the current scope or a forward declaration of the identifier as a class name. It introduces the class name into the current scope.</p>\n</blockquote>\n<p>However, Visual C++ mangles the name of a function differently depending on whether a name is a <code>class</code> or a <code>struct</code>:</p>\n<pre><code>&gt; undname ?f@@YAXPAUA@@@Z\nvoid __cdecl f(struct A *)\n\n&gt; undname ?f@@YAXPAVA@@@Z\nvoid __cdecl f(class A *)\n</code></pre>\n<p>Note that <code>struct</code> is mangled as <code>U</code> and <code>class</code> as <code>V</code>. This is <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61339\" rel=\"nofollow noreferrer\">definitely a bug in Visual C++</a>, which shouldn't treat <code>class</code> and <code>struct</code> differently.</p>\n<p>Once this is understood, your error is easy to reproduce:</p>\n<pre><code>&gt; type a.cpp\nclass A;          // declares A as a class\nvoid f(A* a);     // declares f(class A*)\n\nint main()\n{\n    f(nullptr);   // calls f(class A*)\n}\n\n\n&gt; type b.cpp\nstruct A {};      // defines A as a struct, mismatch!\nvoid f(A* a) {}   // defines f(struct A*)!\n\n\n&gt; cl /nologo a.cpp b.cpp\na.cpp\nb.cpp\nGenerating Code...\na.obj : error LNK2019: unresolved external symbol\n    &quot;void __cdecl f(class A *)&quot; (?f@@YAXPAVA@@@Z) referenced\n        in function _main\na.exe : fatal error LNK1120: 1 unresolved externals\n</code></pre>\n<p>So the reason you're having these weird issues is because the behaviour depends on whether a particular <a href=\"https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c\"><em>translation unit</em></a> (basically, a <code>.cpp</code>) sees <code>Question</code> as a <code>class</code> or a <code>struct</code>. This in turn depends on which headers are included.</p>\n<p>Note that you need the mismatch to be in different translation units. Within the same unit, <a href=\"https://msdn.microsoft.com/en-us/library/695x5bes.aspx\" rel=\"nofollow noreferrer\">Visual C++ will use the the <em>class-key</em> from the definition</a>, even if there are different declarations before:</p>\n<blockquote>\n<p>Compiler Warning (level 2) C4099</p>\n<p>'identifier' : type name first seen using 'objecttype1' now seen using 'objecttype2'</p>\n<p>An object declared as a structure is defined as a class, or an object declared as a class is defined as a structure. The compiler uses the type given in the definition.</p>\n</blockquote>\n<p>As for the reason why this wasn't a problem in Visual C++ 2013, I doubt that the mangling scheme changed recently. It sounds like this bug has been present <a href=\"https://stackoverflow.com/a/5713722/4885801\">since at least 6.0</a>. You may have changed the order of includes inadvertently.</p>\n"}], "owner": {"reputation": 104, "user_id": 1158719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e8lUe.jpg?s=128&g=1", "display_name": "Furkanzmc", "link": "https://stackoverflow.com/users/1158719/furkanzmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 39024593, "answer_count": 1, "score": 3, "last_activity_date": 1471551359, "creation_date": 1471443048, "last_edit_date": 1471512577, "question_id": 38999076, "link": "https://stackoverflow.com/questions/38999076/lnk2001-on-vs-2013-msvc-18-but-not-on-vs-2015-msvc-19", "title": "LNK2001 on VS 2013 (MSVC 18) but not on VS 2015 (MSVC 19)", "body": "<p>I was using an earlier version of Cocos2dx to write a game and compiling it with VS 2013. Note that I'm using CMake and Qt Creator with both compiler versions. When Cocos2dx v3.12 came out, I decided to upgrade the lib to that version in my game and started using VS 2015. Then I started getting this error:</p>\n\n<blockquote>\n  <p>QCardManager.cpp.obj:-1: error: LNK2001: unresolved external symbol\n  \"public: static class QCard * __cdecl QCard::create(enum PLAYER,struct\n  Question const *,enum CARD_TYPE,int const &amp;)\"\n  (?create@QCard@@SAPAV1@W4PLAYER@@PBUQuestion@@W4CARD_TYPE@@ABH@Z)</p>\n</blockquote>\n\n<p>And I did not get that error when I was using VS 2013. After a couple of hours of debugging I found out the reason.</p>\n\n<p>Here's the rough decleration of <code>QCard</code>:</p>\n\n<pre><code>#include \"2d/CCSprite.h\"\n#include \"CommonVariables.h\"\n\nclass RandomPostureSprite;\nclass Question;\nnamespace cocos2d\n{\nclass Label;\n}\n\nenum class CARD_TYPE {\n    QUESTION,\n    OPTION\n};\n\nclass QCard : public cocos2d::Sprite\n{\npublic:\n    static QCard *create(PLAYER player, const Question *question, CARD_TYPE type, const int &amp;index);\n}\n</code></pre>\n\n<p>And I had the proper implementation of that function in <code>QCard.cpp</code> file and that file was also properly added to the project.\nSo the problem was the <code>class Question;</code> forward declaration. I included the <code>QuestionParser.h</code> file in <code>QCard.cpp</code> but since I used a forward declaration for <code>QCard</code> in <code>QCard.h</code>, <code>QCardManager.cpp</code> file did not have the implementation for <code>Question</code> and hence the linker error.</p>\n\n<p>Here's my question: I realize that what VS 2015 does should be the expected behaviour. But why is that behaviour happening? The same code compiles with no error on VS 2013 but not on VS 2015. I read the <a href=\"https://msdn.microsoft.com/en-us/library/bb531344.aspx\" rel=\"nofollow\">Breaking Changes in Visual C++ 2015</a> guide and couldn't not see anything that was related.</p>\n\n<p><strong>EDIT 1</strong>:\nTurns out the forward declaration should have been <code>struct Question</code> instead of <code>class Question</code>. When I try to use <code>QCard::create</code> in <code>QCardManager.cpp</code> I get the aforementioned linker error. But not in <code>TimerHUD.cpp</code>, which is in the same directory. I'll post the summary contents of them both. Keep in mind that I'm keeping the declaration of <code>QCard</code> the same with this edit.</p>\n\n<p>The Question struct, which is in <code>QuestionParser.h</code>:</p>\n\n<pre><code>struct Question {\n    Question()\n        : type()\n        , source()\n        , alias()\n        , color(0, 0, 0)\n    {}\n};\n</code></pre>\n\n<p><strong>QCardManager.h</strong></p>\n\n<pre><code>// Cocos2dx\n#include \"math/Vec2.h\"\n#include \"math/CCGeometry.h\"\n// Utilities\n#include \"CommonVariables.h\"\n// Local\n#include \"GameDefinitions.h\"\n#include \"QuestionParser.h\"// This has the Question struct\n\n// Forward declerations\nclass QCard;\nnamespace cocos2d\n{\nclass Layer;\nclass Sprite;\n}\n\nclass QCardManager\n{\n}\n</code></pre>\n\n<p><strong>QCardManager.cpp</strong></p>\n\n<pre><code>#include \"QCardManager.h\"\n// Local\n#include \"QCard.h\"\n#include \"RandomPostureSprite.h\"\n// Utilities\n#include \"GameManager.h\"\n#include \"GameSettings.h\"\n#include \"CocosUtils.h\"\n// Cocos2dx\n#include \"cocos2d.h\"\nusing namespace cocos2d;\n\nQCardManager::QCardManager(PLAYER player, Layer &amp;parent)\n{\n    // This line gives the linker error\n    QCard::create(PLAYER::PLAYER_ONE, nullptr, CARD_TYPE::QUESTION, 1);\n}\n</code></pre>\n\n<p><code>QCardManager</code> raises the linker error. But <code>TimerHUD</code> does not. I'm sharing the contents now.</p>\n\n<p><strong>TimerHUD.h</strong></p>\n\n<pre><code>// Cocos2dx\n#include \"2d/CCNode.h\"\n\nnamespace cocos2d\n{\nclass Sprite;\nclass Label;\n}\n\nclass TimerHUD : public cocos2d::Node\n{\n}\n</code></pre>\n\n<p><strong>TimerHUD.cpp</strong></p>\n\n<pre><code>// Cocos2dx\n#include \"cocos2d.h\"\n#include \"SimpleAudioEngine.h\"\n// Local\n#include \"GameDefinitions.h\"\n// Utilities\n#include \"GameManager.h\"\n#include \"GameSettings.h\"\n#include \"CocosUtils.h\"\n#include \"QCard.h\"\nusing namespace cocos2d;\n\nTimerHUD::TimerHUD()\n{\n    // This does not raise the linker error\n    QCard::create(PLAYER::PLAYER_ONE, nullptr, CARD_TYPE::QUESTION, 1);\n}\n</code></pre>\n"}, {"tags": ["c++", "boost-random"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "edited": false, "score": 0, "creation_date": 1471457109, "post_id": 39000073, "comment_id": 65358528, "body": "Thanks @NathanOliver.  The algorithm used for the default boost::normal_distribution is the Ziggurat algorithm, which is an acceptance/rejection algorithm <a href=\"https://en.wikipedia.org/wiki/Ziggurat_algorithm\" rel=\"nofollow noreferrer\">Wiki article on Ziggurat</a>.  This means that it can take an unknown number of draws.   However, it still is curious to me that the sequences start agreeing after 3 normal draws..."}, {"owner": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "edited": false, "score": 0, "creation_date": 1471458585, "post_id": 39000073, "comment_id": 65359364, "body": "The answer to the question &quot;why do the sequences start to agree&quot; is a bit subtle.  Say the underlying generator gives (u1, u2, u3, ... ), and the shifted gives (u2, u3, u4, ...).  We can&#39;t say how many draws are taken by the Ziggurat, however if after N normal draws, the total number of uniform draws becomes equal, the two series will be identical afterwards.  This happens after 3 in the above case."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "edited": false, "score": 0, "creation_date": 1471458790, "post_id": 39000073, "comment_id": 65359484, "body": "@tompdavis But wouldn&#39;t each Ziggurat take the same number of draws?  Or is it possible that the random number generated affects the number of draws so even though they start off different they can sync back up depending on what values were produced?"}, {"owner": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "edited": false, "score": 0, "creation_date": 1471459161, "post_id": 39000073, "comment_id": 65359690, "body": "the Ziggurat draws a number, and does some manipulations, and if the resulting number is not in the distribution it will draw a new number.  Suppose u1 produces a rejection, then it will use u2, which suppose produces an acceptance.  However, since the second stream starts with u2, it will produce an acceptance.  So in the first case the underlying generator was incremented twice, whereas the second was only incremented once.  In this example the two distributions would produce identical sequences."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "edited": false, "score": 0, "creation_date": 1471459320, "post_id": 39000073, "comment_id": 65359785, "body": "@tompdavis Awesome.  I didn&#39;t know it worked that way.  That information should be in a answer.  Not sure if mine is the place for it.  I can always make it a CW and you can add it in."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 0, "last_activity_date": 1471445828, "creation_date": 1471445828, "answer_id": 39000073, "question_id": 38999057, "link": "https://stackoverflow.com/questions/38999057/behavior-of-discard-for-boost-random-number-generators/39000073#39000073", "title": "Behavior of discard for boost random number generators", "body": "<p>The issue here seems to be that the engine is not being modified correctly or the distrobution is adding doing some extra work.  If we use the engine directly like</p>\n\n<pre><code>int main()\n{\n    boost::mt19937 uGenOne(1);\n\n    boost::mt19937 uGenTwo(1);\n    uGenTwo.discard(1);\n\n    unsigned int M = 10;\n    std::vector&lt;double&gt; variatesOne(M);\n    std::vector&lt;double&gt; variatesTwo(M);\n\n    for (unsigned int m = 0; m &lt; M; ++m) {\n        variatesOne[m] = uGenOne();\n        variatesTwo[m] = uGenTwo();\n    }\n\n    for (unsigned int m = 0; m &lt; M; ++m)\n        std::cout &lt;&lt; std::left &lt;&lt; std::setw(15) &lt;&lt; variatesOne[m] &lt;&lt; variatesTwo[m] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>It produces</p>\n\n<pre><code>1.7911e+09     4.28288e+09\n4.28288e+09    3.09377e+09\n3.09377e+09    4.0053e+09\n4.0053e+09     491263\n491263         5.5029e+08\n5.5029e+08     1.29851e+09\n1.29851e+09    4.29085e+09\n4.29085e+09    6.30312e+08\n6.30312e+08    1.01399e+09\n1.01399e+09    3.96591e+08\n</code></pre>\n\n<p>Which is a 1 shifted sequence as we expect since we discarded the first output.</p>\n\n<p>So you are correct in how discard works.  I am not exactly sure why there is a discrepancy when you do it through the <code>boost::variate_generator</code>.  I cannot see why the first three numbers differ but all of the rest of the output matches.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "is_accepted": false, "score": 0, "last_activity_date": 1471461870, "creation_date": 1471461870, "answer_id": 39004724, "question_id": 38999057, "link": "https://stackoverflow.com/questions/38999057/behavior-of-discard-for-boost-random-number-generators/39004724#39004724", "title": "Behavior of discard for boost random number generators", "body": "<p>Just to add on an important detail that was in the comments of the previous answer.  As @NathanOliver mentioned, the .discard increments the generator, which sends uniforms to the normal distribution, which converts the uniforms to normal distribution.  boost::normal_distribution uses the <a href=\"https://en.wikipedia.org/wiki/Ziggurat_algorithm\" rel=\"nofollow\">Ziggurat algorithm</a> which is an \"acceptance/rejection\" type of algorithm.  It draws a random uniform, manipulates it, and then checks to see if it is in the desired distribution.  If not, it is rejected and a new random uniform.  </p>\n\n<pre><code>for(;;) {\n        std::pair&lt;RealType, int&gt; vals = generate_int_float_pair&lt;RealType, 8&gt;(eng);\n        int i = vals.second;\n        int sign = (i &amp; 1) * 2 - 1;\n        i = i &gt;&gt; 1;\n        RealType x = vals.first * RealType(table_x[i]);\n        if(x &lt; table_x[i + 1]) return x * sign;\n        if(i == 0) return generate_tail(eng) * sign;\n        RealType y = RealType(table_y[i]) + uniform_01&lt;RealType&gt;()(eng) * RealType(table_y[i + 1] - table_y[i]);\n        if (y &lt; f(x)) return x * sign;\n    }\n</code></pre>\n\n<p>The crucial point is that if the last <code>if</code> fails then the <code>for</code> loop is started again and the call to <code>generate_int_float_pair</code> will be triggered again. This means the number of times the underlying generator is incremented is not known.  </p>\n\n<p>The normal sequences will therefore have different numbers, until the point where the sum of rejections in the sub-sequence is the same, at which point the remaining uniform sequence is identical.  This happened at the third position in the example posted in the question.   (It actually is a bit more subtle because the underlying generator can be called once or twice in the Ziggurat algorithm, but the essence is the same - once the sequences get in sync they can never produce different variates).  </p>\n"}], "owner": {"reputation": 15, "user_id": 6697565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Rf3X.jpg?s=128&g=1", "display_name": "tompdavis", "link": "https://stackoverflow.com/users/6697565/tompdavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 39000073, "answer_count": 2, "score": 0, "last_activity_date": 1471461870, "creation_date": 1471443006, "question_id": 38999057, "link": "https://stackoverflow.com/questions/38999057/behavior-of-discard-for-boost-random-number-generators", "title": "Behavior of discard for boost random number generators", "body": "<p>I am wrapping boost random number generators with an adapter class to implement a Monte Carlo routine.  When writing unit tests on the member functions of the class, I assumed that the behavior of .discard(unsigned int N) is to draw N random numbers without storing them, thus advancing the state of the rng.  The boost code is :</p>\n\n<pre><code>void discard(boost::uintmax_t z)\n{\n    if(z &gt; BOOST_RANDOM_MERSENNE_TWISTER_DISCARD_THRESHOLD) {\n        discard_many(z);\n    } else {\n        for(boost::uintmax_t j = 0; j &lt; z; ++j) {\n            (*this)();\n        }\n    }\n}\n</code></pre>\n\n<p>which supports my assumption.  However, I find that the sequence that results from .discard(1) is not one number different than the same sequence without discard.  The code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;random&gt;\n#include &lt;boost/random.hpp&gt;\n\nint main()\n{\n    boost::mt19937 uGenOne(1);\n    boost::variate_generator&lt;boost::mt19937&amp;, boost::normal_distribution&lt;&gt; &gt; distOne(uGenOne, boost::normal_distribution&lt;&gt;());\n\n    boost::mt19937 uGenTwo(1);\n    boost::variate_generator&lt;boost::mt19937&amp;, boost::normal_distribution&lt;&gt; &gt; distTwo(uGenTwo, boost::normal_distribution&lt;&gt;());\n    distTwo.engine().discard(1);\n\n    unsigned int M = 10;\n    std::vector&lt;double&gt; variatesOne(M);\n    std::vector&lt;double&gt; variatesTwo(M);\n\n    for (unsigned int m = 0; m &lt; M; ++m) {\n        variatesOne[m] = distOne();\n        variatesTwo[m] = distTwo();\n    }\n\n    for (unsigned int m = 0; m &lt; M; ++m)\n        std::cout &lt;&lt; std::left &lt;&lt; std::setw(15) &lt;&lt; variatesOne[m] &lt;&lt; variatesTwo[m] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>2.28493        0.538758  \n-0.668627      -0.0017866\n0.00680682     0.619191  \n0.26211        0.26211   \n-0.806832      -0.806832 \n0.751338       0.751338  \n1.50612        1.50612   \n-0.0631903     -0.0631903\n0.785654       0.785654  \n-0.923125      -0.923125\n</code></pre>\n\n<p>Is my interpretation of how .discard operates incorrect?  Why are the two sequences different in the first three outputs, and then identical?  </p>\n\n<p>(This code was compiled on msvc 19.00.23918 and g++ 4.9.2 on cygwin, with identical results).</p>\n"}, {"tags": ["java", "c++", "unicode"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1471442891, "post_id": 38998940, "comment_id": 65349567, "body": "Since C++ didn&#39;t really have native Unicode characters until fairly recently, the support for such characters is woefully inadequate from a language- or standard library-standpoint. There are third-party libraries one can use though."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1471443487, "post_id": 38998940, "comment_id": 65350018, "body": "@JoachimPileborg If you already know about those libraries; why didnt you name one or two?"}, {"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "edited": false, "score": 1, "creation_date": 1471445437, "post_id": 38998940, "comment_id": 65351586, "body": "The open source ICU library is the home of this ."}], "owner": {"reputation": 1923, "user_id": 3661874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c46e7cbea4909e6811a5cb3c9e71384a?s=128&d=identicon&r=PG&f=1", "display_name": "fiveclubs", "link": "https://stackoverflow.com/users/3661874/fiveclubs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471444455, "creation_date": 1471442679, "last_edit_date": 1471444455, "question_id": 38998940, "link": "https://stackoverflow.com/questions/38998940/c-equivalent-of-java-character-class-fields", "title": "C++ Equivalent of Java Character Class Fields", "body": "<p>I have a function in Java that needs to be rewritten in C++ that returns true if a given character fits into one of several punctuation categories. For example:</p>\n\n<pre><code>public static boolean isTargetPunctuationType(char a) {\n    int type = Character.getType(a);\n    return type == Character.COMBINING_SPACE_MARK ||\n           type == Character.END_PUNCTUATION ||\n           type == Character.INITIAL_QUOTE_PUNCTUATION || ...\n}\n</code></pre>\n\n<p>The specific Character types are not important, but I want to know if an equivalent C++ class exists to categorize Unicode characters into different types the same way Java does via its Character class.</p>\n"}, {"tags": ["c++", "compilation", "sdl-2"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1471442271, "post_id": 38998746, "comment_id": 65349033, "body": "#pragma once at the top of the every header file in your project should do the trick"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5741192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6549d01f158b45ea2f79e04550babd5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Paffi", "link": "https://stackoverflow.com/users/5741192/leonardo-paffi"}, "edited": false, "score": 0, "creation_date": 1471442654, "post_id": 38998837, "comment_id": 65349373, "body": "I included &quot;SDL.h&quot; in both Game.h and Character.h. Is it a problem for source health ?"}, {"owner": {"reputation": 15, "user_id": 5741192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6549d01f158b45ea2f79e04550babd5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Paffi", "link": "https://stackoverflow.com/users/5741192/leonardo-paffi"}, "edited": false, "score": 0, "creation_date": 1471443060, "post_id": 38998837, "comment_id": 65349697, "body": "For &quot;source health&quot; I meant not-ill-formed. Thanks for your help."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1471442816, "last_edit_date": 1471442816, "creation_date": 1471442382, "answer_id": 38998837, "question_id": 38998746, "link": "https://stackoverflow.com/questions/38998746/including-a-library-across-multiple-files-in-c/38998837#38998837", "title": "Including a library across multiple files in C++", "body": "<blockquote>\n  <p>Will the compiler include SDL2 just once?</p>\n</blockquote>\n\n<p>If the included header has an <em>include guard</em>, then yes.</p>\n\n<p>If the header contains any definitions, then it <em>must</em> have an include guard or else including it multiple times would make the program ill formed.</p>\n\n<p>I didn't go through all headers of SDL, but I would assume that every one of them uses an include guard.</p>\n\n<blockquote>\n  <p>I included \"SDL.h\" in both Game.h and Character.h. Is it a problem for source health ?</p>\n</blockquote>\n\n<p>I don't know what <em>source health</em> is. If <code>Game.h</code> depends on definitions/declarations in <code>SDL.h</code>, then it must include <code>SDL.h</code>. If <code>Character.h</code> depends on definitions/declarations in <code>SDL.h</code> then it must include <code>SDL.h</code> also. There is nothing wrong with that. It is quite typical.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6542841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e65a8f4a68a633b5ff7228b24089837?s=128&d=identicon&r=PG&f=1", "display_name": "Seamus", "link": "https://stackoverflow.com/users/6542841/seamus"}, "is_accepted": false, "score": 0, "last_activity_date": 1471444107, "creation_date": 1471444107, "answer_id": 38999454, "question_id": 38998746, "link": "https://stackoverflow.com/questions/38998746/including-a-library-across-multiple-files-in-c/38999454#38999454", "title": "Including a library across multiple files in C++", "body": "<p>in the head file,you need add follow code:</p>\n\n<pre><code>#ifndef TEST_H\n#define TEST_H\n// your code\n#endif\n</code></pre>\n\n<p>or </p>\n\n<pre><code>#pragma once\n</code></pre>\n\n<p>This can help you avoiding class include more than once! </p>\n"}], "owner": {"reputation": 15, "user_id": 5741192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6549d01f158b45ea2f79e04550babd5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Paffi", "link": "https://stackoverflow.com/users/5741192/leonardo-paffi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 38998837, "answer_count": 2, "score": 0, "last_activity_date": 1506366361, "creation_date": 1471442166, "last_edit_date": 1506366361, "question_id": 38998746, "link": "https://stackoverflow.com/questions/38998746/including-a-library-across-multiple-files-in-c", "title": "Including a library across multiple files in C++", "body": "<p>I have to create a <code>Character</code> object in a <code>Game</code> class. Both have SDL2 included.</p>\n\n<p>The <code>Game</code> class uses SDL for <code>SDL_BlitSurface</code> and <code>SDL_UpdateWindowSurface</code>, and the <code>Character</code> class uses SDL for <code>SDL_Surface</code>.</p>\n\n<p>Is there a way to avoid redundancy in this include? Will the compiler include SDL2 just once?</p>\n"}, {"tags": ["c++", "3d", "kinect"], "comments": [{"owner": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1471561134, "post_id": 38998592, "comment_id": 65408106, "body": "Have you tried the HD Face Basics c++ example provided by kinect?"}, {"owner": {"reputation": 1712, "user_id": 1062760, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ac830528d90815b0e4f04a771ff46252?s=128&d=identicon&r=PG", "display_name": "Allahjane", "link": "https://stackoverflow.com/users/1062760/allahjane"}, "reply_to_user": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1471678102, "post_id": 38998592, "comment_id": 65452525, "body": "@RafafTahsin It has no info on triangle vertex indices"}, {"owner": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1471679233, "post_id": 38998592, "comment_id": 65452839, "body": "<a href=\"http://vitruviuskinect.com/hd-face/\" rel=\"nofollow noreferrer\">vitruviuskinect.com/hd-face</a> migh help"}, {"owner": {"reputation": 1712, "user_id": 1062760, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ac830528d90815b0e4f04a771ff46252?s=128&d=identicon&r=PG", "display_name": "Allahjane", "link": "https://stackoverflow.com/users/1062760/allahjane"}, "reply_to_user": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1472018398, "post_id": 38998592, "comment_id": 65577607, "body": "@RafafTahsin thats c# api some of whose fields are not present in C++ kinect api at all , Microsoft is trying push its C# down our throats so hard that it basically didn&#39;t even complete kinect C++ API"}, {"owner": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1472021228, "post_id": 38998592, "comment_id": 65578898, "body": "Oh ... bro ... my windows pc is not working for days ... otherwise i&#39;d try it ... :("}], "owner": {"reputation": 1712, "user_id": 1062760, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ac830528d90815b0e4f04a771ff46252?s=128&d=identicon&r=PG", "display_name": "Allahjane", "link": "https://stackoverflow.com/users/1062760/allahjane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471441857, "creation_date": 1471441857, "question_id": 38998592, "link": "https://stackoverflow.com/questions/38998592/kinect2-c-get-indices-for-face-triangle-vertices", "title": "Kinect2 C++ get Indices for Face Triangle vertices", "body": "<p>I want to debug the face mesh generated from kinect 2 sensor's HD face tracking.</p>\n\n<p>I can get the Vertex data using <code>CalculateVerticesForAlignment</code> however I don't know the index for these vertices to form triangles.</p>\n\n<p>I tried to use <code>result = GetFaceModelTriangles(TriangleCount, TraingleIndices)</code> but the resukt it returns is not S_OK and Traingle indices are not a multiple of three meaning <code>GetFaceModelTriangles</code> does not gives the indices.</p>\n\n<p>The C++ KInect API documentation is very poor so I don't know if <code>GetFaceModelTriangles</code> even does what I think it does.</p>\n"}, {"tags": ["c++", "build", "armadillo", "mlpack"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471442909, "post_id": 38998475, "comment_id": 65349581, "body": "How was <code>a.out</code> build? What is in your makefile and/or configuration file(s)?"}, {"owner": {"reputation": 630, "user_id": 1287073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/88e92fad3a8a97c36bb548ec4c16db1f?s=128&d=identicon&r=PG", "display_name": "ricky116", "link": "https://stackoverflow.com/users/1287073/ricky116"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471443200, "post_id": 38998475, "comment_id": 65349781, "body": "The objects are compiled with: <code>CFLAGS= -Lcontrib&#47;armadillo-7.400.1 -L&#47;usr&#47;include -fpermissive -std=c++  11 -O0 -g -Wall</code> and <code>LFLAGS= -larmadillo</code>, using g++. I&#39;ve attached the verbose output of ldd to the question also..."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "is_accepted": false, "score": -1, "last_activity_date": 1471443508, "creation_date": 1471443508, "answer_id": 38999246, "question_id": 38998475, "link": "https://stackoverflow.com/questions/38998475/when-i-include-a-shared-library-my-executable-is-looking-for-two-versions-of-it/38999246#38999246", "title": "When I include a shared library, my executable is looking for two versions of it", "body": "<p>Sometimes linux creates many symbolic link of one dynamic library. I don't know why but no matter as there is no inconvenient for that.  So, you can just create a new symbolic link like this : ln -s path_to_my_so_lib/my_lib.so  /usr/lib/x86_64-linux-gnu/libarmadillo.so.4</p>\n"}, {"tags": [], "owner": {"reputation": 630, "user_id": 1287073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/88e92fad3a8a97c36bb548ec4c16db1f?s=128&d=identicon&r=PG", "display_name": "ricky116", "link": "https://stackoverflow.com/users/1287073/ricky116"}, "is_accepted": false, "score": 0, "last_activity_date": 1471444359, "creation_date": 1471444359, "answer_id": 38999547, "question_id": 38998475, "link": "https://stackoverflow.com/questions/38998475/when-i-include-a-shared-library-my-executable-is-looking-for-two-versions-of-it/38999547#38999547", "title": "When I include a shared library, my executable is looking for two versions of it", "body": "<p>I think I've figured it out, but the results aren't particularly comforting.</p>\n\n<p>I reinstalled <code>mlpack</code> which has a dependency into <code>libarmadillo</code>, and then rebuilt, and the requirement for <code>libarmadillo.so.4</code> is gone.</p>\n\n<p>The process that I think happened is I:</p>\n\n<ul>\n<li>Installed old version of <code>libarmadillo</code></li>\n<li>Installed <code>libmlpack</code> configured with old version</li>\n<li>Realised I needed a newer version of <code>libarmadillo</code>, so uninstalled old <code>libarmadillo</code> and installed a new one.</li>\n<li>Rebuilt mlpack using cmake / make <strong>but did not <code>make install</code></strong></li>\n<li>Made my executable</li>\n<li>Now have an executable which is is pointing to <code>mlpack</code> which requires the old <code>libarmadillo</code>, but it also points to the new <code>libarmadillo</code></li>\n</ul>\n\n<p>Once I <code>make install</code> the rebuilt <code>mlpack</code>, my problems go away. I am surprised that the verbose output of <code>ldd</code> didn't flag any reason as to <strong>why</strong> it was looking for <code>libarmadillo.so.4</code> (namely that there was a dependency from <code>libmlpack</code> on the old library) - should <code>ldd</code> be able to do this?</p>\n"}], "owner": {"reputation": 630, "user_id": 1287073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/88e92fad3a8a97c36bb548ec4c16db1f?s=128&d=identicon&r=PG", "display_name": "ricky116", "link": "https://stackoverflow.com/users/1287073/ricky116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482086454, "creation_date": 1471441585, "last_edit_date": 1482086454, "question_id": 38998475, "link": "https://stackoverflow.com/questions/38998475/when-i-include-a-shared-library-my-executable-is-looking-for-two-versions-of-it", "title": "When I include a shared library, my executable is looking for two versions of it", "body": "<p>When I make my program with <code>-larmadillo</code>, I get an executable which wants two versions of it:</p>\n\n<pre><code>$ ldd ./a.out | grep armadillo \n$ libarmadillo.so.7 =&gt; /usr/lib/x86_64-linux-gnu/libarmadillo.so.7 (0x00007fd5e29a0000)\n$ libarmadillo.so.4 =&gt; not found\n</code></pre>\n\n<p>Can anyone point me in the right direction? This isn't making any sense to me!</p>\n\n<p>Background: I initially installed libarmadillo via <code>sudo apt-get install libarmadillo-dev</code>, then I realised I needed to build it with a specific parameter (64 bit words enabled), so I uninstalled it via <code>sudo apt-get remove libarmadillo-dev</code> then downloaded the latest version, configured and make/make installed it. Presumably I only have one version of libarmadillo on my system - I do not see any old libraries in the usual places.</p>\n\n<p>Thanks </p>\n\n<p>EDIT:</p>\n\n<p>My Makefile is:</p>\n\n<pre><code>CC= g++\nCFLAGS= -Lcontrib/armadillo-7.400.1 -L/usr/include -Lcontrib/mlpack-2.0.1/build/lib -fpermissive -std=c++11 -O0 -g -Wall\nLDFLAGS= -lmlpack -larmadillo\n</code></pre>\n\n<p>The verbose output of ldd is interesting, I think? </p>\n\n<pre><code>$ ldd -v ./a.out | grep armadillo \n$ libarmadillo.so.7 =&gt; /usr/lib/x86_64-linux-gnu/libarmadillo.so.7 (0x00007fd5e29a0000)\n$ libarmadillo.so.4 =&gt; not found\n$ /usr/lib/x86_64-linux-gnu/libarmadillo.so.7:\n</code></pre>\n\n<p>The latter section (which lists dependences for libarmadillo.so.7) is:</p>\n\n<pre><code>/usr/lib/x86_64-linux-gnu/libarmadillo.so.7:\n    ld-linux-x86-64.so.2 (GLIBC_2.3) =&gt; /lib64/ld-linux-x86-64.so.2\n    libc.so.6 (GLIBC_2.2.5) =&gt; /lib/x86_64-linux-gnu/libc.so.6\n</code></pre>\n\n<p>There is no mention of the 'missing' libarmadillo.so.4 in the verbose output, which I find quite strange.</p>\n"}, {"tags": ["c++", "pointers", "inheritance", "casting"], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1471441967, "creation_date": 1471441967, "answer_id": 38998659, "question_id": 38998357, "link": "https://stackoverflow.com/questions/38998357/casting-to-a-ptr-to-ptr-of-derived-class/38998659#38998659", "title": "Casting to a ptr to ptr of derived class", "body": "<blockquote>\n  <p>Why I got an compilation error if I don't specify a casting to <code>Base**</code>?</p>\n</blockquote>\n\n<p>Because <code>Child**</code> is not implicitly convertible to <code>Base**</code>.</p>\n\n<blockquote>\n  <p>Can I use pointer to pointer when I deal with derived class?</p>\n</blockquote>\n\n<p>If by that you mean \"Can I assign <code>Child**</code> to a variable of <code>Base**</code> type\", then the answer is: No, you can not.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4684040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/381a3e3d83d1328b0b00424cb3000bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Avraham", "link": "https://stackoverflow.com/users/4684040/itay-avraham"}, "edited": false, "score": 0, "creation_date": 1471443278, "post_id": 38998780, "comment_id": 65349834, "body": "My program working well when I use SomeFunction((Base**)&amp;c). Which problem may appear at run time? @Wyzard"}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "reply_to_user": {"reputation": 125, "user_id": 4684040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/381a3e3d83d1328b0b00424cb3000bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Avraham", "link": "https://stackoverflow.com/users/4684040/itay-avraham"}, "edited": false, "score": 1, "creation_date": 1471443451, "post_id": 38998780, "comment_id": 65349982, "body": "Right, there&#39;s just no <i>implicit</i> cast.  Your explicit cast overrides the compiler&#39;s type-checking \u2014 just like you can cast a <code>Child1*</code> to a <code>Child2*</code> even though they&#39;re unrelated types.  Casting <code>Child**</code> to <code>Base**</code> should be OK as long as you only assign pointers to compatible types (i.e. don&#39;t do what I did in the example)."}], "tags": [], "owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "is_accepted": true, "score": 8, "last_activity_date": 1471442250, "creation_date": 1471442250, "answer_id": 38998780, "question_id": 38998357, "link": "https://stackoverflow.com/questions/38998357/casting-to-a-ptr-to-ptr-of-derived-class/38998780#38998780", "title": "Casting to a ptr to ptr of derived class", "body": "<p>Although you can implicitly cast <code>Child*</code> to <code>Base*</code>, there's no implicit cast from <code>Child**</code> to <code>Base**</code>, because it could be used to violate type-safety.  Consider:</p>\n\n<pre><code>class Base { };\nclass Child1 : public Base { };\nclass Child2 : public Base { };\n\nint main() {\n    Child1 *c = new Child1();\n    Base **cp = &amp;c;  // If this were allowed...\n    *cp = new Child2();  // ...then this could happen.  (*cp is a Base*)\n}\n</code></pre>\n\n<p><a href=\"https://isocpp.org/wiki/faq/proper-inheritance#derivedptrptr-to-baseptrptr\">More information in the C++ FAQ</a></p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1471442650, "post_id": 38998886, "comment_id": 65349370, "body": "<i>&quot;Child* is not a derived class of Base*&quot;</i> is vacuously true since pointers aren&#39;t class types at all :)"}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 3, "creation_date": 1471442705, "post_id": 38998886, "comment_id": 65349424, "body": "Since the Q&amp;A you link to is a perfect target for this thread to be marked as dupe to, consider next time when you know of such dupe target thread to propose a (possible) dupe target rather than needlessy duplicating the dupe target&#39;s information in the dupe."}], "tags": [], "owner": {"reputation": 1328, "user_id": 2079934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1f4bf373ae0a70c59cef1239401117?s=128&d=identicon&r=PG&f=1", "display_name": "SpamBot", "link": "https://stackoverflow.com/users/2079934/spambot"}, "is_accepted": false, "score": 1, "last_activity_date": 1471442542, "last_edit_date": 1495535318, "creation_date": 1471442542, "answer_id": 38998886, "question_id": 38998357, "link": "https://stackoverflow.com/questions/38998357/casting-to-a-ptr-to-ptr-of-derived-class/38998886#38998886", "title": "Casting to a ptr to ptr of derived class", "body": "<p><code>Child</code> is a derived class of <code>Base</code>, but <code>Child*</code> is not a derived class of <code>Base*</code>.</p>\n\n<p>If the compiler did allow you automatic conversion of pointer-to-pointers, you would get the following bad example (adapted from <a href=\"https://stackoverflow.com/a/2532428/2079934\">https://stackoverflow.com/a/2532428/2079934</a>) running:</p>\n\n<pre><code>Child *c = new Child;\nBase **bb = &amp;c;\n*bb = new Base;\n</code></pre>\n\n<p><code>c</code> now points to a <code>Base</code>, not to a <code>Child</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 4684040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/381a3e3d83d1328b0b00424cb3000bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Avraham", "link": "https://stackoverflow.com/users/4684040/itay-avraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "closed_date": 1471445242, "accepted_answer_id": 38998780, "answer_count": 3, "score": 5, "last_activity_date": 1471453102, "creation_date": 1471441290, "last_edit_date": 1471453102, "question_id": 38998357, "link": "https://stackoverflow.com/questions/38998357/casting-to-a-ptr-to-ptr-of-derived-class", "closed_reason": "Duplicate", "title": "Casting to a ptr to ptr of derived class", "body": "<p>Why do I get a compilation error if I don't specify an explicit cast to Base** ?</p>\n\n<p>Can I use a pointer to pointer when I deal with a derived class?</p>\n\n<pre><code>class Base { };\nclass Child : public Base { };\n\nvoid SomeFunction(Base** ppoObj) {}\nvoid SomeFunction(Base* poObj) {}\n\nint main()\n{   \n    Child *c = new Child();\n\n    // This passed.\n    SomeFunction(c);\n    SomeFunction((Base**)&amp;c);\n\n    // CompilationError\n    SomeFunction(&amp;c);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1471462520, "post_id": 38998116, "comment_id": 65361391, "body": "You may consider taking the pair of iterators, or just an arbitrary container. There is no necessity for a template template parameter I think."}, {"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1471652598, "post_id": 38998116, "comment_id": 65448241, "body": "Can you even have a <code>vector</code> of 2D arrays? Different arrays (can) have different types, right?"}, {"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1471653321, "post_id": 38998116, "comment_id": 65448366, "body": "Could you give some example code of how you would call this function?"}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1472209170, "post_id": 38998116, "comment_id": 65671778, "body": "@IlyaPopov, if I take the pair of iterators, how will I know how many columns i have?"}, {"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1472225989, "post_id": 38998116, "comment_id": 65682428, "body": "@user357269 You&#39;d have to loop through the entire sequence and count. I&#39;m not sure what the type of the iterators would be, though"}], "answers": [{"tags": [], "owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "is_accepted": true, "score": 2, "last_activity_date": 1471659642, "last_edit_date": 1471659642, "creation_date": 1471659280, "answer_id": 39049831, "question_id": 38998116, "link": "https://stackoverflow.com/questions/38998116/whats-the-right-type-for-a-join-rows-function/39049831#39049831", "title": "What&#39;s the right type for a join_rows() function?", "body": "<p>I'm not sure how to declare a vector of arbitrary <code>Array</code>s, but you can implement a function template that combines one or more arguments directly passed to it. This is typically done by calling itself recursively, processing each successive argument:</p>\n\n<pre><code>// end case (one argument): just forward the same array\ntemplate &lt;typename T&gt;\nT&amp;&amp; join_rows(T&amp;&amp; A) {\n    return std::forward&lt;T&gt;(A);\n}\n\n// main function template: two or more arguments\ntemplate &lt;typename S, typename T, typename... R&gt;\nArray&lt;typename S::Scalar, Dynamic, Dynamic&gt; join_rows(const ArrayBase&lt;S&gt;&amp; A,\n                                                      const ArrayBase&lt;T&gt;&amp; B,\n                                                      const ArrayBase&lt;R&gt;&amp;... rest) {\n    Array&lt;typename S::Scalar, Dynamic, Dynamic&gt; C(A.rows(), A.cols()+B.cols());\n    C &lt;&lt; A, B;\n    return join_rows(C, rest...); // call with the first two arguments combined\n}\n</code></pre>\n\n<p>Example to illustrate usage:</p>\n\n<pre><code>int main() {\n    Array&lt;int, 1, 3&gt; arr1 = {1, 2, 3};\n    Array&lt;int, 1, 2&gt; arr2 = {4, 5};\n    Array&lt;int, 1, 4&gt; arr3 = {9, 8, 7, 6};\n\n    cout &lt;&lt; join_rows(arr1, arr2, arr3.reverse()) &lt;&lt; endl; // 1 2 3 4 5 6 7 8 9\n\n    return 0;\n}\n</code></pre>\n\n<p>If you want to restrict the one-argument <code>join_rows</code> to only accept <code>Eigen::Array</code>s, add an <code>std::enable_if</code> checking for an <code>ArrayBase&lt;T&gt;</code> base class:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::enable_if_t&lt;std::is_base_of&lt;ArrayBase&lt;std::decay_t&lt;T&gt;&gt;,std::decay_t&lt;T&gt;&gt;::value, T&amp;&amp;&gt;\njoin_rows(T&amp;&amp; A) {\n    return std::forward&lt;T&gt;(A);\n}\n</code></pre>\n\n<p>For large <code>Array</code>s, there might be more efficient ways to implement this. You could probably return a proxy object that will only allocate one new <code>Array</code> object.</p>\n"}], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 39049831, "answer_count": 1, "score": 4, "last_activity_date": 1471659642, "creation_date": 1471440668, "last_edit_date": 1495541963, "question_id": 38998116, "link": "https://stackoverflow.com/questions/38998116/whats-the-right-type-for-a-join-rows-function", "title": "What&#39;s the right type for a join_rows() function?", "body": "<p>I wrote a function that <a href=\"https://stackoverflow.com/questions/21496157/eigen-how-to-concatenate-matrix-along-a-specific-dimension\">joins the rows of two 2D arrays</a>:</p>\n\n<pre><code>template &lt;typename S, typename T&gt;\nArray&lt;typename S::Scalar, Dynamic, Dynamic&gt; join_rows(const ArrayBase&lt;S&gt; &amp; A, const ArrayBase&lt;T&gt; &amp; B) {\n    Array&lt;typename S::Scalar, Dynamic, Dynamic&gt; C (A.rows(), A.cols()+B.cols());\n    C &lt;&lt; A, B;\n    return C;\n}\n</code></pre>\n\n<p>I would like to write a more general function that can join more than two arrays.</p>\n\n<p>It should be able to work with any iterable container, eg. <code>std::list</code> or <code>std::vector</code>, so I would use a template template paratemeter.</p>\n\n<p>I can easily right the function body with two for loops, that's not the issue, I'm just struggling to figure out what the right type for such a function would be.</p>\n\n<p>(ps. I'm not even sure if my above code has the best type, but it seems to do the job)</p>\n"}, {"tags": ["python", "c++", "c", "dll"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1471442263, "post_id": 38997898, "comment_id": 65349026, "body": "How do you know it didn&#39;t work?"}, {"owner": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1471442416, "post_id": 38997898, "comment_id": 65349169, "body": "I tried activating it the same way above as the tutorial, just replacing the name with a signature from the exports, and I still received an error from python log, says it can&#39;t call the function, &#39;tuple&#39; something...  I&#39;m not working on the same computer I&#39;m typing it, so it&#39;s all from memory, if you need any specific data, tell me"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1471442589, "post_id": 38997898, "comment_id": 65349320, "body": "I think we need details; we&#39;re troubleshooting here."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1471442771, "post_id": 38997898, "comment_id": 65349478, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1076300/extending-python-with-c-c\">Extending Python with C/C++</a>"}, {"owner": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1471444545, "post_id": 38997898, "comment_id": 65350931, "body": "I saw a tool called SWIG, can it do what I need? to call methods from an object reference"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "edited": false, "score": 0, "creation_date": 1471443002, "post_id": 38998526, "comment_id": 65349649, "body": "Is there any solution for calling methods in DLLs?"}, {"owner": {"reputation": 5217, "user_id": 6582873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEx7y.jpg?s=128&g=1", "display_name": "napuzba", "link": "https://stackoverflow.com/users/6582873/napuzba"}, "reply_to_user": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "edited": false, "score": 0, "creation_date": 1471443671, "post_id": 38998526, "comment_id": 65350184, "body": "You can wrap the methods calls with plain c functions calls or use the tools in the answer."}, {"owner": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "edited": false, "score": 0, "creation_date": 1471443906, "post_id": 38998526, "comment_id": 65350385, "body": "thought about that one.. I also saw a tool called SWIG, can it do what I need? to call methods from an object reference"}, {"owner": {"reputation": 5217, "user_id": 6582873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEx7y.jpg?s=128&g=1", "display_name": "napuzba", "link": "https://stackoverflow.com/users/6582873/napuzba"}, "reply_to_user": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "edited": false, "score": 0, "creation_date": 1471446866, "post_id": 38998526, "comment_id": 65352587, "body": "Unlike <code>ctypes</code> which loads the DLL and call its functions in runtime - with those tools you create a new DLL which wraps the methods. you will be able to use the new DLL from python."}], "tags": [], "owner": {"reputation": 5217, "user_id": 6582873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEx7y.jpg?s=128&g=1", "display_name": "napuzba", "link": "https://stackoverflow.com/users/6582873/napuzba"}, "is_accepted": false, "score": 0, "last_activity_date": 1471444312, "last_edit_date": 1471444312, "creation_date": 1471441695, "answer_id": 38998526, "question_id": 38997898, "link": "https://stackoverflow.com/questions/38997898/calling-methods-from-c-c-dll-with-python/38998526#38998526", "title": "Calling methods from C/C++ DLL with Python", "body": "<p>Unfortunately, you can not do that easily and in portable way with <code>ctypes</code>.</p>\n\n<p><code>ctypes</code> is designed to call <strong>functions</strong> in DLLs with <strong>C compatible data</strong> types. </p>\n\n<p>Since there is no <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">standard binary interface</a> for C++, you should know how the compiler which generates the DLL, generates the code (i.e class layout ... ).</p>\n\n<p>A better solution is to create a new DLL which uses the current DLL and wraps the methods as plain c functions. See <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/python/doc/html/index.html\" rel=\"nofollow\">boost.python</a> or <a href=\"http://www.swig.org/\" rel=\"nofollow\">SWIG</a> for more details.</p>\n"}], "owner": {"reputation": 399, "user_id": 2842632, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1195066737/picture?type=large", "display_name": "Ori Frish", "link": "https://stackoverflow.com/users/2842632/ori-frish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2485, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1471444312, "creation_date": 1471440057, "question_id": 38997898, "link": "https://stackoverflow.com/questions/38997898/calling-methods-from-c-c-dll-with-python", "title": "Calling methods from C/C++ DLL with Python", "body": "<p>I do have a tutorial here about calling functions from a c/c++ dll, the example is written here from the <a href=\"https://docs.python.org/3.3/library/ctypes.html#function-prototypes\" rel=\"nofollow\">official tutorial</a>.</p>\n\n<pre><code>WINUSERAPI int WINAPI\nMessageBoxA(\n    HWND hWnd,\n    LPCSTR lpText,\n    LPCSTR lpCaption,\n    UINT uType);\n\nHere is the wrapping with ctypes:\n\n&gt;&gt;&gt;\n&gt;&gt;&gt; from ctypes import c_int, WINFUNCTYPE, windll\n&gt;&gt;&gt; from ctypes.wintypes import HWND, LPCSTR, UINT\n&gt;&gt;&gt; prototype = WINFUNCTYPE(c_int, HWND, LPCSTR, LPCSTR, UINT)\n&gt;&gt;&gt; paramflags = (1, \"hwnd\", 0), (1, \"text\", \"Hi\"), (1, \"caption\", None), (1, \"flags\", 0)\n&gt;&gt;&gt; MessageBox = prototype((\"MessageBoxA\", windll.user32), paramflags)\n&gt;&gt;&gt;\nThe MessageBox foreign function can now be called in these ways:\n\n&gt;&gt;&gt;\n&gt;&gt;&gt; MessageBox()\n&gt;&gt;&gt; MessageBox(text=\"Spam, spam, spam\")\n&gt;&gt;&gt; MessageBox(flags=2, text=\"foo bar\")\n&gt;&gt;&gt;\nA second example demonstrates output parameters. The win32 GetWindowRect function retrieves the dimensions of a specified window by copying them into RECT structure that the caller has to supply. Here is the C declaration:\n\nWINUSERAPI BOOL WINAPI\nGetWindowRect(\n     HWND hWnd,\n     LPRECT lpRect);\nHere is the wrapping with ctypes:\n\n&gt;&gt;&gt;\n&gt;&gt;&gt; from ctypes import POINTER, WINFUNCTYPE, windll, WinError\n&gt;&gt;&gt; from ctypes.wintypes import BOOL, HWND, RECT\n&gt;&gt;&gt; prototype = WINFUNCTYPE(BOOL, HWND, POINTER(RECT))\n&gt;&gt;&gt; paramflags = (1, \"hwnd\"), (2, \"lprect\")\n&gt;&gt;&gt; GetWindowRect = prototype((\"GetWindowRect\", windll.user32), paramflags)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>This example works when the function is external, however, let's assume I have a reference to an object, and I want to call a function from that object with params, how do I do that?</p>\n\n<p>I did saw the log of all function signatures from 'dumpbin -exports', and I tried using the full name of the function, and still it didn't work.</p>\n\n<p>Any other ideas would be blessed.</p>\n"}, {"tags": ["c++", "constexpr", "clang++"], "answers": [{"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1471443665, "post_id": 38998993, "comment_id": 65350180, "body": "The warning is generated at the call site (which <i>isn\u2019t</i> a call site), that\u2019s what makes me suspect that this is a bug: clang seems to think that I will call the function."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1471445048, "post_id": 38998993, "comment_id": 65351301, "body": "A warning isn&#39;t necessarily generated at the call site. Example: <a href=\"https://godbolt.org/g/GbWxNp\" rel=\"nofollow noreferrer\">godbolt.org/g/GbWxNp</a>"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1471445305, "post_id": 38998993, "comment_id": 65351491, "body": "I know, but in this case it is."}], "tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": false, "score": 2, "last_activity_date": 1471442829, "creation_date": 1471442829, "answer_id": 38998993, "question_id": 38997828, "link": "https://stackoverflow.com/questions/38997828/clang-complains-about-undefined-constexpr-function-in-unevaluated-context/38998993#38998993", "title": "Clang complains about undefined constexpr function in unevaluated context", "body": "<blockquote>\n  <p>Is this a bug in clang? Or is it right to complain? If so, is GCC also correct\n  in accepting this code?</p>\n  \n  <p>Furthermore, while writing this question I realised that the clang compilation\n  error can be avoided altogether by removing the <code>constexpr</code> qualifier in front\n  of the member function template. What does the presence of <code>constexpr</code> change\n  here?</p>\n</blockquote>\n\n<p>Compiler warnings are outside the C++ standard. Warnings are issued for valid programs that contain indications of human error. In your particular case, you chose to qualify with a <code>constexpr</code> a function that you did not define. Programs using that class will be valid only if you never call that function. If that's really the case then <code>constexpr</code> is not needed. But what if you intended to call that function (though forgot to provide an implementation for it), but due to some mistake (complex overload resolution, or just a stupid typo) a different function was called?</p>\n\n<p>Thus Clang has its point in issuing the warning. However, it is arguable whether that situation deserves a warning; personally I wouldn't file a bug against GCC.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1471444509, "post_id": 38999542, "comment_id": 65350892, "body": "Yeah, totally agree. The fact that I made these functions <code>constexpr</code> doesn\u2019t make any sense. I was just puzzled that it seemingly changes the way unevaluated context sees them."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 2, "last_activity_date": 1471444345, "creation_date": 1471444345, "answer_id": 38999542, "question_id": 38997828, "link": "https://stackoverflow.com/questions/38997828/clang-complains-about-undefined-constexpr-function-in-unevaluated-context/38999542#38999542", "title": "Clang complains about undefined constexpr function in unevaluated context", "body": "<p>If you aren't intending ever to call a function, there's no point marking it <code>constexpr</code>.</p>\n\n<p><code>constexpr</code> on a function isn't visible to the type system (well, except that pre-C++14 it had the side effect of making a non-static member function <code>const</code>); rather, it's a promise that for at least one combination of template type arguments and function arguments (and object state, for a non-static member function) the body of the function can be <em>evaluated</em> as a constant expression (or an algorithm equivalent to a constant expression). Conversely, the lack of <code>constexpr</code> on a function is an instruction to the compiler not to even attempt to evaluate the function body as a constant expression.</p>\n\n<p>Clang isn't <em>correct</em>, exactly, but it isn't <em>incorrect</em>, either, as you've specifically asked it to reject valid programs (with <code>-Werror</code>). You should take the warning-error as a strong hint that <code>constexpr</code> functions without a definition are a bad idea.</p>\n"}], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 38999542, "answer_count": 2, "score": 6, "last_activity_date": 1471444345, "creation_date": 1471439880, "last_edit_date": 1495541624, "question_id": 38997828, "link": "https://stackoverflow.com/questions/38997828/clang-complains-about-undefined-constexpr-function-in-unevaluated-context", "title": "Clang complains about undefined constexpr function in unevaluated context", "body": "<p>I\u2019m using a simple SFINAE trick to check whether a member function exists, like so:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename C&gt;\nstruct has_size {\n    template &lt;typename T&gt;\n    static constexpr auto check(T*) -&gt;\n        decltype(std::declval&lt;T const&gt;().size(), std::true_type{});\n\n    template &lt;typename&gt;\n    static constexpr auto check(...) -&gt; std::false_type;\n\n    static constexpr bool value = decltype(check&lt;C&gt;(nullptr))::value;\n};\n\n// Usage:\nstatic_assert(has_size&lt;std::vector&lt;int&gt;&gt;::value, \"std::vector&lt;int&gt; has size()\");\n</code></pre>\n\n<p>(I\u2019m aware that <a href=\"https://stackoverflow.com/a/9531274/1968\">there\u2019s a simpler method</a> now, but wasn\u2019t back when I wrote this piece of code.)</p>\n\n<p>This code works on GCC. Clang however issues a warning<sup>1</sup> (all versions up to Apple LLVM 7.3, whichever that is upstream):</p>\n\n<pre><code>decltype.cpp:15:27: error: inline function 'has_size&lt;std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt;::check&lt;std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt; &gt;' is not defined [-Werror,-Wundefined-inline]\n    static constexpr auto check(T*) -&gt;\n                      ^\ndecltype.cpp:22:44: note: used here\n    static constexpr bool value = decltype(check&lt;C&gt;(nullptr))::value;\n</code></pre>\n\n<p>In other word, clang expects the functions to be defined, not just declared, even though they are never called (only in the unevaluated context of <code>decltype</code>).</p>\n\n<p>Is this a bug in clang? Or is it right to complain? If so, is GCC also correct in accepting this code?</p>\n\n<p>Furthermore, while writing this question I realised that the clang compilation error can be avoided altogether by removing the <code>constexpr</code> qualifier in front of the member function template. What does the presence of <code>constexpr</code> change here?</p>\n\n<hr>\n\n<p><sup>1</sup> Which is a problem as I\u2019m compiling with <code>-Werror</code>. There are some warnings that are based on heuristics and therefore have unavoidable false positives, but this isn\u2019t the case here as far as I can see.</p>\n"}, {"tags": ["c++", "linux", "multithreading"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1471440599, "post_id": 38997816, "comment_id": 65347767, "body": "<code>system</code> has nothing to do with kernel sources. It&#39;s in your libc."}, {"owner": {"reputation": 320, "user_id": 2464599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0112e8cdb0581da91f5b54f689f30e5?s=128&d=identicon&r=PG", "display_name": "radix", "link": "https://stackoverflow.com/users/2464599/radix"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1471442291, "post_id": 38997816, "comment_id": 65349053, "body": "True, I&#39;ve changed it"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471444708, "post_id": 38997816, "comment_id": 65351050, "body": "What is your question? Assuming it was &quot;what&#39;s causing the <code>fgetc()</code> to block when reading from the pipe&quot;, has your edit now solved it? If so, it would be better to move that out into an answer and mark it as accepted."}, {"owner": {"reputation": 320, "user_id": 2464599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0112e8cdb0581da91f5b54f689f30e5?s=128&d=identicon&r=PG", "display_name": "radix", "link": "https://stackoverflow.com/users/2464599/radix"}, "edited": false, "score": 0, "creation_date": 1471445081, "post_id": 38997816, "comment_id": 65351330, "body": "I&#39;ve posted the edit so people stop wasting their time for the question for now. It seems that it&#39;s fixed, however I&#39;d like to run some tests to be sure before posting it as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 2464599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0112e8cdb0581da91f5b54f689f30e5?s=128&d=identicon&r=PG", "display_name": "radix", "link": "https://stackoverflow.com/users/2464599/radix"}, "is_accepted": true, "score": 0, "last_activity_date": 1471520583, "creation_date": 1471520583, "answer_id": 39017339, "question_id": 38997816, "link": "https://stackoverflow.com/questions/38997816/threads-and-fork-fgetc-blocks-when-reading-from-popen-pipe/39017339#39017339", "title": "Threads and fork: fgetc() blocks when reading from popen()-pipe", "body": "<p><strong>Bugfix and explanation of unexpected behaviour</strong></p>\n\n<p>Indeed I've missed the relevant point. After adapting the sample program more to the original code example I've seen that the signal handler (which worked in a test program) was the issue. Excerpt:</p>\n\n<pre><code>void MyClass::sig_handler(int sig) {\n    if( m_pid &lt; 1 ) // not the child we're waiting for\n        return;\n\n    pid_t pid;\n    int wstatus;\n\n    while ((pid = waitpid( -1, &amp;wstatus, WNOHANG )) != -1 ) {\n        // error: this returns 0 as long as any children are alive\n        // -&gt; check for \"&gt; 0\" to ignore active child processes\n        if( pid != m_pid )\n            return;\n        // handle stuff here...\n    }\n}\n</code></pre>\n\n<p>I had to replace the following line</p>\n\n<pre><code>while ((pid = waitpid( -1, &amp;wstatus, WNOHANG )) != -1 )\n</code></pre>\n\n<p>with </p>\n\n<pre><code>while ((pid = waitpid( -1, &amp;wstatus, WNOHANG )) &gt; 0 )\n</code></pre>\n\n<p>because the program's other threads <code>fork()</code> children (e.g. with <code>popen()</code>). If those terminate, the signal handler (a static class function) is invoked, too.</p>\n\n<p>As I understand:</p>\n\n<p>In the thread where I invoke <code>fork()</code>, I use a member <code>m_pid</code> with default and reset value <code>-1</code>. It takes the pid from <code>fork()</code>. The sig handler immediately returns if <code>m_pid</code> is -1.</p>\n\n<p>The program blocked at <code>popen()</code> which <code>fork()</code>s (could be any other call that <code>fork()</code>s). Thus the signal handler for SIGCHLD is entered when <code>popen()</code> returns. The check for <code>m_pid</code> is passed as <code>m_pid = fork()</code> has been invoked. <code>waitpid()</code> does not return -1 but the pid of the <code>popen()</code> child, and then keeps checking with return value = 0 until all children have terminated - the one I'm waiting for is still alive! Only then <code>waitpid()</code> returns with <code>-1</code> and the main thread can continue reading with <code>fgetc()</code>.</p>\n\n<p>Man page from <code>waitpid</code>:</p>\n\n<blockquote>\n  <p>if WNOHANG was  specified  and  one  or  more child(ren) specified by pid \n  exist, but have not yet changed state, then 0 is returned.  On error, -1 \n  is returned</p>\n</blockquote>\n\n<p>Because the sig handler checks for <code>m_pid != -1</code>, the problem only occurred when I used <code>fork()</code> in MyClass to set the <code>m_pid</code>.</p>\n\n<p>That's why using <code>system()</code> did not cause the problem. The <code>m_pid</code> is not set to a value != -1, thus the sig handler immediately returns if e.g. a child is <code>popen()</code>ed in the main thread.</p>\n\n<p>The <em>imitation</em> of the <code>system()</code> invocation failed because I've set the  <code>m_pid</code> at <code>fork()</code>, thus the sig handler did not return immediately.</p>\n\n<p>I guess since the sig handler is a <code>static member function</code>, the handler blocks the very thread that <code>fork()</code>ed a child process.</p>\n"}], "owner": {"reputation": 320, "user_id": 2464599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0112e8cdb0581da91f5b54f689f30e5?s=128&d=identicon&r=PG", "display_name": "radix", "link": "https://stackoverflow.com/users/2464599/radix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 39017339, "answer_count": 1, "score": 0, "last_activity_date": 1471520583, "creation_date": 1471439861, "last_edit_date": 1495535320, "question_id": 38997816, "link": "https://stackoverflow.com/questions/38997816/threads-and-fork-fgetc-blocks-when-reading-from-popen-pipe", "title": "Threads and fork: fgetc() blocks when reading from popen()-pipe", "body": "<p>In a multithreaded program (running on ARM) I have</p>\n\n<p><strong>a main thread</strong> which, among other things, periodically checks with <code>popen( \"pidof -s prog\" )</code> whether another program is running. I use the <code>O_CLOEXEC</code> flag for the file descriptor and check whether <code>fgetc()</code> receives anything from the pipe. <em>Setting the file descriptor \"non-blocking\" results in nothing being read and won't help</em>. The same <code>pidof</code> command from the shell command is performing fine.</p>\n\n<p><strong>In another thread</strong>, <code>fork()</code> with an immediate <code>execl()</code> in the child process is used to start an <code>rsync</code> operation whenever a specific event occurs. The parent uses a signal handler to observe the child status, and has the option to kill the child at another specific event. It doesn't matter whether I invoke <code>exec()</code> with <code>rsync</code> or <code>sleep</code> - the result is the same.</p>\n\n<p>The problem is that the <code>fgetc()</code> in the main thread blocks until the child process terminates.</p>\n\n<p><em>I'll try to solve this problem by <code>fork()</code>ing early (at some point where the application is single-threaded, as supposed in <a href=\"https://stackoverflow.com/questions/38891437/multithreaded-program-and-fork-alternative-or-safe-implementation\">another post</a> which I started).</em></p>\n\n<p>But anyway:</p>\n\n<p><strong>I'd like to understand what's causing the <code>fgetc()</code> to block when reading from the pipe.</strong></p>\n\n<p>A few things I've tried so far:</p>\n\n<ul>\n<li>I tried to reproduce the problem with a small example application that does what I've described above and hoped it would show the same erroneous behaviour, but <em>unfortunately</em> it works fine, which is why I do not provide any code here yet. Maybe I'm missing the relevant point.</li>\n<li>Using the same <code>rsync</code> invocation via <code>system()</code> doesn't cause any issues</li>\n<li><p>I've had a look at a <code>system()</code> <a href=\"http://man7.org/tlpi/code/online/dist/procexec/system.c.html\" rel=\"nofollow noreferrer\">implementation</a> and can see that the signals are manipulated before <code>fork()</code>ing:</p>\n\n<ul>\n<li>SIGCHLD is blocked</li>\n<li>SIGINT and SIGQUIT are ignored</li>\n</ul>\n\n<p>I need the signal handler for SIGCHLD, but out of curiousity I tried to do the same as in the code from above (I replaced <code>sigprocmask()</code> with <code>pthread_sigmask()</code> ) - without any success, the behaviour stays the same.</p>\n\n<p>I couldn't find any implementation of <code>system()</code> in the sources provided with my BSP.</p></li>\n</ul>\n\n<p>The program opens other files via <code>fstream</code> - and without O_CLOEXEC (will be a bit <a href=\"http://unix.derkeiler.com/Newsgroups/comp.unix.programmer/2004-01/0361.html\" rel=\"nofollow noreferrer\">cumbersome to change that</a>)</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1471440409, "post_id": 38997717, "comment_id": 65347633, "body": "You can use <code>auto</code> here in C++14 if you want."}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 3, "last_activity_date": 1471439953, "creation_date": 1471439953, "answer_id": 38997856, "question_id": 38997717, "link": "https://stackoverflow.com/questions/38997717/how-to-shorten-typename-syntax-for-template-class/38997856#38997856", "title": "How to shorten typename syntax for template class", "body": "<p>You could introduce a template alias as:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing Node = typename BinarySearchTree&lt;T&gt;::Node;\n\n\ntemplate &lt;class T&gt;\nNode&lt;T&gt; const* BinarySearchTree&lt;T&gt;::find(const T&amp; value) const\n{\n // some code here\n return nullptr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1471440050, "creation_date": 1471440050, "answer_id": 38997892, "question_id": 38997717, "link": "https://stackoverflow.com/questions/38997717/how-to-shorten-typename-syntax-for-template-class/38997892#38997892", "title": "How to shorten typename syntax for template class", "body": "<p>The \"obvious\" solution would be to put the function definitions inline inside the class, which is not always a good idea.</p>\n\n<p>Another might be to use type-aliases with templates and the <code>using</code> keyword (supported from C++11 onward):</p>\n\n<pre><code>template&lt;typename T&gt;\nusing Node = typename BinarySearchTree&lt;T&gt;::Node;\n</code></pre>\n\n<p>Then you can use the (<em>global</em>) type-alias <code>Node</code> like</p>\n\n<pre><code>template &lt;class T&gt;\nconst Node&lt;T&gt;* BinarySearchTree&lt;T&gt;::find(const T&amp; value) const\n{\n    // some code here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": true, "score": 16, "last_activity_date": 1471440409, "creation_date": 1471440409, "answer_id": 38998024, "question_id": 38997717, "link": "https://stackoverflow.com/questions/38997717/how-to-shorten-typename-syntax-for-template-class/38998024#38998024", "title": "How to shorten typename syntax for template class", "body": "<p>Use trailing return types:</p>\n\n<pre><code>template &lt;class T&gt;\nauto BinarySearchTree&lt;T&gt;::find(const T&amp; value) const -&gt; Node* \n{\n // some code here\n}\n</code></pre>\n\n<p>Everything after <code>BinarySearchTree&lt;T&gt;::find</code> is evaluated with the scope of the class.</p>\n\n<p>This allows you to put the definitions outside of your class without using type-aliases to shorten the names.</p>\n"}], "owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 38998024, "answer_count": 3, "score": 1, "last_activity_date": 1471440409, "creation_date": 1471439685, "question_id": 38997717, "link": "https://stackoverflow.com/questions/38997717/how-to-shorten-typename-syntax-for-template-class", "title": "How to shorten typename syntax for template class", "body": "<p>I have a template class with an innter type defined like this:</p>\n\n<pre><code>template &lt;class T&gt;\nclass BinarySearchTree\n{\nprivate:\n    struct Node\n    {\n        T m_value;\n        Node* m_left;\n        Node* m_right;\n\n        Node(const T&amp; value = T(), \n            Node* const left = nullptr,\n            Node* const right = nullptr)\n            : m_value(value)\n            , m_left(left)\n            , m_right(right)\n        {\n\n        }\n    };\n\npublic:\n    const Node* find(const T&amp; value) const;\n};\n\n\ntemplate &lt;class T&gt;\nconst typename BinarySearchTree&lt;T&gt;::Node* BinarySearchTree&lt;T&gt;::find(const T&amp; value) const\n{\n // some code here\n}\n</code></pre>\n\n<p>So there are many functions that return <code>Node*</code> and every time it is very annoying to write <code>typename BinarySearchTree&lt;T&gt;::Node*</code> for function return type outside of the class. Is there a better way?</p>\n"}, {"tags": ["c++", "c++11", "initializer-list"], "comments": [{"owner": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "edited": false, "score": 2, "creation_date": 1471440186, "post_id": 38997703, "comment_id": 65347460, "body": "Do you require using <code>initializer_list</code>, or can it be something else that is initialized using braces?"}, {"owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "reply_to_user": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "edited": false, "score": 0, "creation_date": 1471442028, "post_id": 38997703, "comment_id": 65348866, "body": "it can be smth else using <b>curly</b> braces. Overall, I&#39;m don&#39;t require anything, I&#39;m just curios how one can implement smth similar to aforementioned class and keeping up with c++11 guideline of using <b>{}</b> (curly braces) for all type of initializations."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1471444457, "post_id": 38997703, "comment_id": 65350851, "body": "Uh, just give your class a constructor taking two <code>idx_t</code>s. It would be invoked just fine with <code>MatrixIdx idxIL { 1, 2 };</code> syntax. You are making it way too complicated."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1471449334, "post_id": 38997703, "comment_id": 65354204, "body": "You seem to think using <code>{braces, for, initialisation}</code> means/requires using <code>std::initializer_list</code>. It does not. The two are orthogonal concepts. That <code>{this, syntax}</code> happens to be called a <i>braced init-list</i> is unfortunate but unrelated. A <i>braced init-list</i> is implicitly deduced to an <code>std::initializer_list</code> in appropriate contexts, but it can just as easily be deduced to any other pack of separately typed arguments."}], "answers": [{"comments": [{"owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "edited": false, "score": 0, "creation_date": 1471449615, "post_id": 39001207, "comment_id": 65354367, "body": "Thanks! Also I think it would be fair to point out that <i>Igor Tandetnik</i> post a comment with the same info a bit earlier than you :). Anyway, now it&#39;s obvious to me that  my idea that <b>{}</b> means <code>std::initializer_list</code> was wrong."}, {"owner": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "reply_to_user": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "edited": false, "score": 0, "creation_date": 1471465078, "post_id": 39001207, "comment_id": 65362749, "body": "Yes, @IgorTandetnik should claim credit for this.  Will adjust my post accordingly."}], "tags": [], "owner": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "is_accepted": true, "score": 1, "last_activity_date": 1471465165, "last_edit_date": 1471465165, "creation_date": 1471449168, "answer_id": 39001207, "question_id": 38997703, "link": "https://stackoverflow.com/questions/38997703/initializer-list-for-arrays-with-predefined-sizes/39001207#39001207", "title": "initializer_list for arrays with predefined sizes", "body": "<p><strong>Credit</strong> should go to @IgorTandetnik, who provided the same answer as a comment of the OP.</p>\n\n<hr>\n\n<p>The uniform initialization syntax can be adopted very simply for your situation, just by providing a constructor that accepts two arguments of type <code>idx_t</code>.</p>\n\n<pre><code>class MatrixIdx {\npublic:\n  ...\n  MatrixIdx() : ... {}\n  MatrixIdx(idx_t, idx_t) : ... {}\n};\n</code></pre>\n\n<p>And in your main code:</p>\n\n<pre><code>int main()\n{\n  MatrixIdx mat {}; // Okay\n  MatrixIdx mat {1,2}; // Okay\n  MatrixIdx mat {1,2,3}; // Error - no 3-arg. c'tor for MatrixIdx\n}\n</code></pre>\n"}], "owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 39001207, "answer_count": 1, "score": -1, "last_activity_date": 1471465165, "creation_date": 1471439639, "question_id": 38997703, "link": "https://stackoverflow.com/questions/38997703/initializer-list-for-arrays-with-predefined-sizes", "title": "initializer_list for arrays with predefined sizes", "body": "<p>So let's imagine we want to use c++'s initializer_list for some user-defined type that represents array of predefined size (know at compile time). For example matrix's indexes (row,column):</p>\n\n<pre><code>#include &lt;initializer_list&gt;\n#include &lt;algorithm&gt;\n#include &lt;assert.h&gt;\n\nusing idx_t = unsigned;\n\nclass MatrixIdx {\npublic:\n    MatrixIdx() :\n        _idx { 0, 0 }\n    {}\n\n    // this is how I'm able to use initializer list for now\n    // cons:\n    //     * run-time assertion\n    //     * additional header (algorithm)\n    //     * not in member initializer list (call me perfectionist)\n    //\n    MatrixIdx(std::initializer_list&lt;idx_t&gt; l)\n    {\n        assert(l.size() == 2);\n        std::copy(l.begin(), l.end(), _idx);\n    }\n\n    //I want to achive constructor similiar to this one\n    //Won't compile\n    //\n    //MatrixIdx(std::initializer_list&lt;idx_t&gt; l) :\n        //static_assert(l.size() == 2, \"two elements expected\") //compile time assertion\n        //_idx[0] ( l[0] ),\n        //_idx[1] ( l[1] )\n    //{}\n\n    idx_t row() { return _idx[0]; }\n    void setRow(const idx_t i) { _idx[0] = i; }\n\n    idx_t col() { return _idx[1]; }\n    void setCol(const idx_t i) { _idx[1] = i; }\n\nprivate:\n   idx_t _idx[2];\n};\n\nint main(void)\n{\n    MatrixIdx idx; //default - OKAY\n\n    //MatrixIdx idxIL { 1, 2 }; //this should compile\n\n    //this should emit human-readable compile-time error \n    //MatrixIdx idxILError { 1, 2, 3 };\n\n    return 0;\n}\n</code></pre>\n\n<p>What will be the best possible way to achieve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46031, "user_id": 906773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100001846242483/picture?type=large", "display_name": "Jesse Good", "link": "https://stackoverflow.com/users/906773/jesse-good"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1471439778, "post_id": 38997596, "comment_id": 65347117, "body": "@Holt: Instead of ignoring the warning, the OP would be better understanding that in C++ a string literal can only be assigned to <code>const char*</code> and <code>char*</code> is only for backwards compatibility with C."}], "answers": [{"tags": [], "owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "is_accepted": true, "score": 1, "last_activity_date": 1471439494, "creation_date": 1471439494, "answer_id": 38997653, "question_id": 38997596, "link": "https://stackoverflow.com/questions/38997596/warning-deprecated-conversion-from-string-constant-to-char-when-i-add-a-form/38997653#38997653", "title": "warning: deprecated conversion from string constant to \u2018char*\u2019 when i add a formal parameter in the function def but with no actual parameter", "body": "<p>Adding <code>const</code> solves your problem:</p>\n\n<pre><code>void GetHMACCode(unsigned char* buffer,\n                 long bufferLength,\n                 unsigned char** pResult,\n                 unsigned int &amp;nResultLen,\n                 const char *extra_arg = \"11111111111111111111\") // const added here\n{}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1471440668, "post_id": 38997673, "comment_id": 65347816, "body": "so after this change my code is throwing run time error"}, {"owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1471440723, "post_id": 38997673, "comment_id": 65347859, "body": "undefined reference to `GetHMACCode(unsigned char*, long, unsigned char**, unsigned int&amp;, char const*)&#39; when i call this function without last argument   GetHMACCode(pCRCBufferptr, ncrcDataLength, &amp;pHMAC, nHMACLen);"}, {"owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "reply_to_user": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1471440829, "post_id": 38997673, "comment_id": 65347963, "body": "@user2256825 Have you changed both the declaration in your header and the definition in you implementation file?"}, {"owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1471441032, "post_id": 38997673, "comment_id": 65348141, "body": "The definition and declaration are both  actually in the header file , Changed both now, and is  working fine"}, {"owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "reply_to_user": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1471441232, "post_id": 38997673, "comment_id": 65348282, "body": "Dont forgot to accept an answer if it solved your problem."}], "tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1471439564, "creation_date": 1471439564, "answer_id": 38997673, "question_id": 38997596, "link": "https://stackoverflow.com/questions/38997596/warning-deprecated-conversion-from-string-constant-to-char-when-i-add-a-form/38997673#38997673", "title": "warning: deprecated conversion from string constant to \u2018char*\u2019 when i add a formal parameter in the function def but with no actual parameter", "body": "<p>The warning is about converting the string literal to a non-const char* (<code>char* extra_arg = \"...\"</code>).</p>\n\n<p>Changing the definition of your function to the following should make the warning go away:</p>\n\n<pre><code>void GetHMACCode(unsigned char* buffer,long bufferLength,unsigned char** pResult,unsigned int &amp;nResultLen, const char *extra_arg = \"11111111111111111111\"){}\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1725, "favorite_count": 0, "closed_date": 1471439791, "accepted_answer_id": 38997653, "answer_count": 2, "score": 0, "last_activity_date": 1471439564, "creation_date": 1471439371, "question_id": 38997596, "link": "https://stackoverflow.com/questions/38997596/warning-deprecated-conversion-from-string-constant-to-char-when-i-add-a-form", "closed_reason": "Duplicate", "title": "warning: deprecated conversion from string constant to \u2018char*\u2019 when i add a formal parameter in the function def but with no actual parameter", "body": "<p>The code below doesnt throw any warnings while i compile</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n void GetHMACCode(unsigned char* buffer,long bufferLength,unsigned char** pResult,unsigned int &amp;nResultLen){}\n\n unsigned char *pCRCBufferptr ;\n\n main() {\n unsigned char *pHMAC  = NULL;\n int ncrcDataLength;\n unsigned int nHMACLen = 0;\n GetHMACCode(pCRCBufferptr,ncrcDataLength,&amp;pHMAC,nHMACLen);\n\n }\n</code></pre>\n\n<p>But When i add an extra argument in the function (not in the function call), I get the below warning</p>\n\n<pre><code>myFile.cpp: In function \u2018int main()\u2019:\nmyFile.cpp:11: warning: deprecated conversion from string constant to \u2018char*\u2019\n</code></pre>\n\n<p>Added extra arguement in the function </p>\n\n<pre><code> #include &lt;iostream&gt;\n\n void GetHMACCode(unsigned char* buffer,long bufferLength,unsigned char** pResult,unsigned int &amp;nResultLen,char *extra_arg = \"11111111111111111111\"){}\n\n unsigned char *pCRCBufferptr ;\n\n main() {\n unsigned char *pHMAC  = NULL;\n int ncrcDataLength;\n unsigned int nHMACLen = 0;\n GetHMACCode(pCRCBufferptr,ncrcDataLength,&amp;pHMAC,nHMACLen);\n\n }\n</code></pre>\n\n<p>I am confused why this warnign is being thrown </p>\n\n<p>Thanks\nTejas</p>\n"}, {"tags": ["c++", "wpf", "mfc", "ipc", "interprocess"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1471470808, "post_id": 38997513, "comment_id": 65365382, "body": "Show the actual code which you are using. Don&#39;t just put link. One problem might be that you are sending data from 32bit program to 64bit program"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1471491452, "post_id": 38997513, "comment_id": 65370835, "body": "There are a number of ways to implement <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574.aspx\" rel=\"nofollow noreferrer\">interprocess communication</a>. Using pipes is potentially more appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 1863, "user_id": 1284927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/B4DBf.jpg?s=128&g=1", "display_name": "thomiel", "link": "https://stackoverflow.com/users/1284927/thomiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1471869503, "creation_date": 1471869503, "answer_id": 39079781, "question_id": 38997513, "link": "https://stackoverflow.com/questions/38997513/interprocess-communication-between-mfc-and-wpf/39079781#39079781", "title": "Interprocess communication between MFC and WPF", "body": "<p>Instead of using legacy window-based communication you should consider a more contemporary mechanism like Windows Mailslots:</p>\n\n<p>For C# there is a wrapper here:\n<a href=\"http://www.codeproject.com/Articles/623268/Csharp-wrapper-for-Mailslots\" rel=\"nofollow\">http://www.codeproject.com/Articles/623268/Csharp-wrapper-for-Mailslots</a></p>\n\n<p>Messages can also be accessed via filesystem using <code>\\\\.\\mailslot</code>:</p>\n\n<p><a href=\"https://blog.didierstevens.com/2006/07/13/do-you-have-mailslots-on-your-windows-pc/\" rel=\"nofollow\">https://blog.didierstevens.com/2006/07/13/do-you-have-mailslots-on-your-windows-pc/</a></p>\n"}], "owner": {"reputation": 435, "user_id": 1878801, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1fa2c65c712573fa331e29ed0f59c78f?s=128&d=identicon&r=PG", "display_name": "Shofiqul Alam", "link": "https://stackoverflow.com/users/1878801/shofiqul-alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1471869503, "creation_date": 1471439138, "last_edit_date": 1471441764, "question_id": 38997513, "link": "https://stackoverflow.com/questions/38997513/interprocess-communication-between-mfc-and-wpf", "title": "Interprocess communication between MFC and WPF", "body": "<p>I'm trying to establish a two way communication between a mfc application and a wpf application. I'm taking help from these two articles: \n<a href=\"http://www.codeproject.com/Articles/22402/Interprocess-Communication-Between-NET-and-MFC-Usi\" rel=\"nofollow\">Interprocess Communication Between .NET and MFC Using WM_COPYDATA</a> and <a href=\"http://davidjwalling.com/pro_cs_20100825_001.html\" rel=\"nofollow\">Interprocess Communication Between .NET and MFC Using C# and COPYDATA </a></p>\n\n<p>So far i have managed to send message from wpf to mfc. But now i want mfc application to send the message to wpf application. What do i need to do it to achieve this?</p>\n\n<p>On mfc side, I'm storing the handle as </p>\n\n<p><code>storedHandle = (HWND)intPtr;</code></p>\n\n<p>and later using this handle to send message with the following line: </p>\n\n<p><code>::SendMessage(pFrame-&gt;storedHandle, WM_COPYDATA, 0, 0);</code></p>\n\n<p>But wpf is not receiving is message.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "edited": false, "score": 0, "creation_date": 1471439076, "post_id": 38997429, "comment_id": 65346481, "body": "Please post more code."}, {"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471439126, "post_id": 38997429, "comment_id": 65346545, "body": "This loop is perfectly ok as far as size of <code>name</code> and <code>password</code> arrays is more than <code>max</code>. Probably the error is somewhere else."}, {"owner": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471439254, "post_id": 38997429, "comment_id": 65346646, "body": "but when I comment out this loop the program is working...."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1471439350, "post_id": 38997429, "comment_id": 65346735, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your question is a bit like &quot;Why does the word &#39;cupcake&#39; cause my essay to make no sense? It reads just fine without that word.&quot; We can hardly say without seeing <i>where</i> the work &quot;cupcake&quot; is used."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471439508, "post_id": 38997547, "comment_id": 65346866, "body": "wow it&#39;s works thanks"}, {"owner": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471439524, "post_id": 38997547, "comment_id": 65346881, "body": "can i know why it&#39;s work?"}, {"owner": {"reputation": 50, "user_id": 6726477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4fSYZ.jpg?s=128&g=1", "display_name": "Michael B Hildebrand", "link": "https://stackoverflow.com/users/6726477/michael-b-hildebrand"}, "reply_to_user": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471439692, "post_id": 38997547, "comment_id": 65347031, "body": "You were exceeding the boundaries of the &#39;name&#39; and &#39;password&#39; arrays by 1 element.  A common mistake."}, {"owner": {"reputation": 50, "user_id": 6726477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4fSYZ.jpg?s=128&g=1", "display_name": "Michael B Hildebrand", "link": "https://stackoverflow.com/users/6726477/michael-b-hildebrand"}, "reply_to_user": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471440467, "post_id": 38997547, "comment_id": 65347679, "body": "Hey Weng - can you mark it as the answer? It will be my first one. That was low hanging fruit!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471440700, "post_id": 38997547, "comment_id": 65347840, "body": "@WengHou -- Please do not get into the habit of asking questions with little information as you did, and expect persons to be lucky with guessing what is wrong with the program.  Next time, post the entire context of what you&#39;re trying to accomplish.  We have no idea what <code>name</code> actually is, whether <code>=</code> is causing the issue due to improper copy semantics, or yes, whether you are going out of bounds of an array."}, {"owner": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "edited": false, "score": 0, "creation_date": 1471441268, "post_id": 38997547, "comment_id": 65348309, "body": "Sorry, it&#39;s my first time to ask question in this website.I&#39;ll try to do what you said next time."}], "tags": [], "owner": {"reputation": 50, "user_id": 6726477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4fSYZ.jpg?s=128&g=1", "display_name": "Michael B Hildebrand", "link": "https://stackoverflow.com/users/6726477/michael-b-hildebrand"}, "is_accepted": true, "score": 0, "last_activity_date": 1471439243, "creation_date": 1471439243, "answer_id": 38997547, "question_id": 38997429, "link": "https://stackoverflow.com/questions/38997429/why-this-code-will-cause-my-program-to-be-stop-working/38997547#38997547", "title": "Why this code will cause my program to be stop working?", "body": "<p>Trying changing your code to:</p>\n\n<pre><code>for(user=0; user&lt;max; user++)  // Remove the '=' sign\n{\n     name[user]=name1;\n     password[user]=password1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6726460, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064356190268140/picture?type=large", "display_name": "Weng Hou", "link": "https://stackoverflow.com/users/6726460/weng-hou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1471440733, "accepted_answer_id": 38997547, "answer_count": 1, "score": -3, "last_activity_date": 1471442363, "creation_date": 1471438925, "last_edit_date": 1471442363, "question_id": 38997429, "link": "https://stackoverflow.com/questions/38997429/why-this-code-will-cause-my-program-to-be-stop-working", "closed_reason": "Not suitable for this site", "title": "Why this code will cause my program to be stop working?", "body": "<pre><code>for(user = 0; user &lt;= max; user++)\n{\n    name[user] = name1;\n    password[user] = password1;\n}\n</code></pre>\n\n<p>After the program run to this loop it just stopped working and i need to terminate the program. How can I solve this problem?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471438993, "post_id": 38997427, "comment_id": 65346416, "body": "you can use the setText(...) method of your label to set it after each button click..."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471439081, "post_id": 38997427, "comment_id": 65346485, "body": "@retinotop setText(counter)?"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471439134, "post_id": 38997427, "comment_id": 65346553, "body": "you need to convert your counter to an qstring... cause i think it is an int value...   <a href=\"http://stackoverflow.com/questions/3211771/how-to-convert-int-to-qstring\" title=\"how to convert int to qstring\">stackoverflow.com/questions/3211771/&hellip;</a>"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1471439396, "post_id": 38997427, "comment_id": 65346774, "body": "@ChristopherSchneider done"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1471439694, "post_id": 38997427, "comment_id": 65347033, "body": "@ChristopherSchneider so yea what should I do now?"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471439724, "post_id": 38997427, "comment_id": 65347071, "body": "@retinotop i have added QString::number();     int counter;     QString s = QString::number(); but doesnt work"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471439825, "post_id": 38997427, "comment_id": 65347156, "body": "Can u show also your header? Or better, the label is shown in the gui?!"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471440127, "post_id": 38997427, "comment_id": 65347424, "body": "@retinotop yea the label is shown in the gui, I have just updated it with the header"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471440390, "post_id": 38997427, "comment_id": 65347619, "body": "by the way you are using it like: label-&gt;setText(QString::number(counter));    and the label can show some text?"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471442688, "post_id": 38997427, "comment_id": 65349402, "body": "@retinotop it doesnt run shows some errors."}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471442836, "post_id": 38997427, "comment_id": 65349532, "body": "ok, can you update your code, and add your errors?"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443005, "post_id": 38997427, "comment_id": 65349652, "body": "@retinotop want to dd u on skype cause there are alot fo errors so I can share screen?"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443116, "post_id": 38997427, "comment_id": 65349729, "body": "@xPosed no we can&#39;t share on skype... put your code and the first errors... You need allways take care on the first errors.. mostly all other errors will disappear after fixing the first errors."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443370, "post_id": 38997427, "comment_id": 65349906, "body": "@retinotop I haev just edited the code including the issues."}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443399, "post_id": 38997427, "comment_id": 65349927, "body": "yes first of all you need to include QString --&gt; #include &lt;QString&gt;   ... are you really sure you updated your code?"}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443623, "post_id": 38997427, "comment_id": 65350137, "body": "@retinotop new error message: no matching function for call to &#39;QString::number()&#39;      QString s = QString::number();                                  ^"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443727, "post_id": 38997427, "comment_id": 65350227, "body": "You need to add your src in the cpp and in the header... you just updated the error messages..."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471443995, "post_id": 38997427, "comment_id": 65350462, "body": "@retinotop how? help plz"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471444157, "post_id": 38997427, "comment_id": 65350613, "body": "You need to edit your post on top and change the source code."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 0, "creation_date": 1471444446, "post_id": 38997427, "comment_id": 65350845, "body": "@retinotop updated."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1471444506, "post_id": 38997427, "comment_id": 65350890, "body": "<code>counter</code> needs to be a member of <code>Form</code>.  As it is, its declaration in the constructor is not visible in the slot definition."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1471444711, "post_id": 38997427, "comment_id": 65351054, "body": "@aschepler how? should I create a label and call it counter? and how am I gonna increase the number?"}, {"owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "edited": false, "score": 1, "creation_date": 1471445112, "post_id": 38997427, "comment_id": 65351357, "body": "remove the QString number things in your constructor..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1471445439, "post_id": 38997427, "comment_id": 65351589, "body": "I say next time post the line number of the error including the full text of the error message and the code around the error. The code for the question now only needs the constructor and all the text of the question is not that useful. Since it has nothing to do with the error."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1471445528, "post_id": 38997427, "comment_id": 65351656, "body": "@xPosed You have it right now that <code>int counter=0;</code> is in the class definition."}, {"owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "edited": false, "score": 0, "creation_date": 1471449982, "post_id": 38997427, "comment_id": 65354584, "body": "made it work guys thank you all :)"}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "is_accepted": true, "score": 2, "last_activity_date": 1471471494, "last_edit_date": 1471471494, "creation_date": 1471445156, "answer_id": 38999832, "question_id": 38997427, "link": "https://stackoverflow.com/questions/38997427/how-do-i-display-a-counter-function-in-qt/38999832#38999832", "title": "How do I display a counter function in qt", "body": "<pre><code>#include \"form.h\"\n#include \"ui_form.h\"\n#include &lt;QString&gt;\n#include &lt;QLabel&gt;\n\nForm::Form(QWidget *parent) :\n    QWidget(parent),\n    ui(new Ui::Form)\n{\n    counter = 0;\n    ui-&gt;setupUi(this);\n}\n\nForm::~Form()\n{\n    delete ui;\n}\n\nvoid Form::on_pushButton_clicked()\n{\n    counter++;\n    ui-&gt;label-&gt;setText(QString::number(counter));\n}\n</code></pre>\n\n<p>Initialize your member in the constructor not in the header. And put the definition of your counter member to the private section not to the private slot section.</p>\n"}], "owner": {"reputation": 29, "user_id": 6606030, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MiSo0kgb-uc/AAAAAAAAAAI/AAAAAAAAAIs/qThoCg_pH80/photo.jpg?sz=128", "display_name": "xPosed", "link": "https://stackoverflow.com/users/6606030/xposed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1864, "favorite_count": 0, "accepted_answer_id": 38999832, "answer_count": 1, "score": 1, "last_activity_date": 1471471494, "creation_date": 1471438921, "last_edit_date": 1471444428, "question_id": 38997427, "link": "https://stackoverflow.com/questions/38997427/how-do-i-display-a-counter-function-in-qt", "title": "How do I display a counter function in qt", "body": "<p>I know that in c++ you do int counter and when it does something I want its gonna do c++ and then <code>cout&lt;&lt; counter</code> to show the counter but now I want to do a GUI app which will have 20 buttons and when a button is pressed to do the counter++ and print the counter. I have done it but how do I do it to show the counter in a label?  </p>\n\n<p><strong>code</strong></p>\n\n<pre><code>        #include \"form.h\"\n        #include \"ui_form.h\"\n        #include &lt;QString&gt;\n        #include &lt;QLabel&gt;\n\n        Form::Form(QWidget *parent) :\n            QWidget(parent),\n            ui(new Ui::Form)\n        {\n            QString::number();\n            QString s = QString::number();\n            ui-&gt;setupUi(this);\n\n        }\n\n        Form::~Form()\n        {\n            delete ui;\n        }\n\n        void Form::on_pushButton_clicked()\n        {\n\n            counter++;\n\n            ui-&gt;label-&gt;setText(QString::number(counter));\n        }\n</code></pre>\n\n<p><strong>header</strong>:</p>\n\n<pre><code>                           #ifndef FORM_H\n        #define FORM_H\n\n        #include &lt;QWidget&gt;\n        #include &lt;QString&gt;\n\n        namespace Ui {\n        class Form;\n        }\n\n        class Form : public QWidget\n        {\n            Q_OBJECT\n\n        public:\n            explicit Form(QWidget *parent = 0);\n            ~Form();\n\n        private slots:\n            void on_pushButton_clicked();\n            int counter=0;\n\n        private:\n            Ui::Form *ui;\n        };\n\n        #endif // FORM_H\n</code></pre>\n\n<p>errors I get:</p>\n\n<p>1)</p>\n\n<blockquote>\n  <p>no matching function for call to 'QString::number()'\n       QString::number();</p>\n</blockquote>\n"}, {"tags": ["c++", "c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 2, "creation_date": 1471438409, "post_id": 38997119, "comment_id": 65345929, "body": "@Shubham Question is not about compactness of array members but about storing of strings to which that pointers point."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1471438905, "post_id": 38997119, "comment_id": 65346360, "body": "Notice there are other string literals like <code>&quot;  %d\\n&quot;</code> and <code>&quot;  %s \\n&quot;</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471439908, "post_id": 38997119, "comment_id": 65347237, "body": "Why do you even care? Any access beyond an array is undefined behaviour."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1471443788, "post_id": 38997119, "comment_id": 65350273, "body": "No guarantees at all. Plus the compiler can optimize how string literals are stored, if it detects that you use the same strings several times - this is usually called &quot;string pooling&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 5, "creation_date": 1471438640, "post_id": 38997175, "comment_id": 65346141, "body": "@Debashish There is nothing more to explain. If you want to know the details on specific system, you need to read your linker manual."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 2, "creation_date": 1471438673, "post_id": 38997175, "comment_id": 65346170, "body": "@Debashish: In short, it is not dictated by the language standard (neither C nor C++)."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "edited": false, "score": 3, "creation_date": 1471438778, "post_id": 38997175, "comment_id": 65346262, "body": "@Debashish: In addition, you mind find it interesting to know that if there are two identical literal strings in your code, then the linker might choose to generate only a single copy in the executable image (again, not guaranteed by the standard)."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1471438862, "post_id": 38997175, "comment_id": 65346326, "body": "@barakmanos ...or if you have, e.g. <code>&quot;string&quot;</code> and <code>&quot;larger string&quot;</code>, it might recognise the redundancy and map the former to the equivalent address <i>within</i> the latter. I&#39;m pretty sure I&#39;ve seen this happen. But it is equally as much of an implementation detail and not guaranteed by the language at all."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1471439929, "post_id": 38997175, "comment_id": 65347246, "body": "It&#39;s compiler, not linker."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1471439999, "post_id": 38997175, "comment_id": 65347306, "body": "There is no requirement for a linker in the C standard. And for actual implementations, it is not only the linker (iff there is one) involved."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1471440011, "post_id": 38997175, "comment_id": 65347319, "body": "@EugeneSh.: See my comment above. Compiler, linker, loader, startup-code, etc."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": true, "score": 9, "last_activity_date": 1471439096, "last_edit_date": 1471439096, "creation_date": 1471438314, "answer_id": 38997175, "question_id": 38997119, "link": "https://stackoverflow.com/questions/38997119/storing-of-string-literals-in-consecutive-memory-locations/38997175#38997175", "title": "Storing of string literals in consecutive memory locations", "body": "<p>This is a linker decision - to store string literals tightly or not. There is no guaranties. Or even this may be done by compiler - it may create continuous data section that holds all involved literals. But nevertheless actual layout of that section is still implementation-specific and you shouldn't assume anything about it. </p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471439117, "post_id": 38997477, "comment_id": 65346533, "body": "Interesting, but the question was &quot;is this always true?&quot; not &#39;can you show me another example of this or something else happening&#39;. This seems like a comment, not an answer."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 5, "creation_date": 1471439384, "post_id": 38997477, "comment_id": 65346762, "body": "@underscore_t: I think  an example of the assumption being false is an answer -- it can&#39;t always be true. By the way, Id agree that this might be merely kind of a comment, but I thought the example might be helpful and you can&#39;t put that in  a comment readably"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1471440118, "post_id": 38997477, "comment_id": 65347414, "body": "Your code invokes undefined behaviour. And will fail definitively on IL32P64 systems like Windows. And the array declaration is pretty dangerous, at least error-prone. It relies on a C legacy."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471440509, "post_id": 38997477, "comment_id": 65347717, "body": "@OIaf Good point. Why not just use <code>%p</code>, the designated format specifier for pointers? The pointer conversion here violates aliasing rules, and there&#39;s no need to."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471440904, "post_id": 38997477, "comment_id": 65348028, "body": "@olaf Thaks you&#39;re right, In fact I have first testetd with <code>%p</code> and then changed the <code>printf()</code> to have decimal output like in the question. Well, now it&#39;s a cast to <code>intptr_t</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471441223, "post_id": 38997477, "comment_id": 65348272, "body": "Seems better - <code>C99 says that any pointer type can be cast to uintptr_t (or its underlying type) and back to the original pointer type without loss of information or violation of the strict-aliasing rules.</code> So we logically presume the same for <code>intptr_</code>t. But <code>PRIuPTR</code> is for printing <code>uintptr_t</code>, which might not be well-defined. You probably need to change those both to match up. If you don&#39;t want to use <code>void *</code>, <code>uintptr_t</code> seems most sensible, as I&#39;ve never understood <code>intptr_t</code> for anything other than temporarily stashing a pointer in a <code>int</code>... seeing as RAM addresses cannot be negative!"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471441408, "post_id": 38997477, "comment_id": 65348409, "body": "@underscore_d thanks again, I&#39;ve made it <code>uintptr_t</code> to be sure"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471442687, "post_id": 38997477, "comment_id": 65349398, "body": "@IngoLeonhardt: Printing a pointer via <code>uintptr_t</code> cast is also not defined. Use <code>%p</code>, what is your problem with hexadecimal output? For pointers that is the most clear format. Decimal is close to nonsense."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471442877, "post_id": 38997477, "comment_id": 65349555, "body": "@Olaf as I&#39;ve already answered, I have no problem with hex but wanted to sty close to the original question. And could you pleas explain why the cast is not defined?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471442938, "post_id": 38997477, "comment_id": 65349598, "body": "@IngoLeonhardt: Where did I say <b>the cast</b> is not defined (actually it is not defined how the pointer is converted to the integer, but that is irrelevant for the defined usage). You might want to read about <code>uintptr_t</code> before printing a pointer that way. Long story short: use <code>%p</code> <b>only</b> to print a <b><code>void *</code></b> <b>only</b>."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471443260, "post_id": 38997477, "comment_id": 65349816, "body": "@Olaf I think I&#39;ve got you now. So you mean the two integers printed don&#39;t neccessarily show the string addresses and especially, if they are consecutive or not, right?."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471443628, "post_id": 38997477, "comment_id": 65350142, "body": "@IngoLeonhardt: It is undefined. Just please read the standard!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1471444107, "post_id": 38997477, "comment_id": 65350575, "body": "@Olaf I agree just to use <code>%p</code> for clearest results and avoiding (more) odd conversions, but do you really mean that the standard <code>PRI?PTR</code> macros produce undefined behaviour when printing their corresponding <code>ptr_t</code> types? That sounds rather absurd. Why else would they exist? Surely they just map to the right specifier for the corresponding numeric type and print that. So if the conversion from real pointer to numeric value and back is well-defined, which it is, so must be printing said value. Sure, it&#39;s not required to be intuitive relative to memory layout/order, but I really doubt it&#39;s UB."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1471444870, "post_id": 38997477, "comment_id": 65351175, "body": "Notes: <code>uintptr_t</code> is an optional type.  Using <code>&quot;%p&quot;</code> does not necessarily print in hexadecimal - although that is common.  It is &quot;implementation-defined manner&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471447347, "post_id": 38997477, "comment_id": 65352937, "body": "@underscore_d: I also did not say that! Heck, why does nobody read trhe standard and what is guaranteed for <code>uintptr_t</code>? <b>Only</b> conversion forth and back is guaranteed. No arithmetics, no printing, no usage for later reference. They basically exist for non-portable arithmetic in very low-level functions where you really know what you are doing (and which should secured by platform assertions), and to allow passing a pointer or an integer (kind of &quot;union light&quot;)."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471447990, "post_id": 38997477, "comment_id": 65353328, "body": "@Olaf Don&#39;t pawn this off as me &quot;not reading the standard&quot;. I spend a possibly unhealthy amount of my time absorbing what is and is not standard in this language. I&#39;m still waiting for you to explain why the <code>printf</code> format macros such as <code>PRIuPTR</code> exist in the same standard(!) header file if they invoke undefined behaviour. <a href=\"http://www.cplusplus.com/reference/cinttypes/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cinttypes</a> I&#39;m sure the printed results are likely to be <i>implementation-defined</i> and not necessarily reflect memory layout. But as part of a standard header, they simply cannot be <i>undefined</i> in the sense of common parlance: invoking UB."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471448728, "post_id": 38997477, "comment_id": 65353828, "body": "@underscore_d: And you should read comments carefully. Where exactly did I even mention the macros, less state they invoke UB? Oh, btw.: cplusplus.com does not define the standard (or did that change? Feel free to post the ISO message). Maybe you should read the <b>standard</b>?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471448888, "post_id": 38997477, "comment_id": 65353933, "body": "Well, the fact that Ingo had corrected their answer to avoid obvious UB but you were still posting, vaguely, &quot;It is undefined. Just please read the standard!&quot; could mean a lot of different things. Then you seemed to indicate you were equally against the idea of printing by saying &quot;<b>Only</b> conversion back and forth is guaranteed. No arithmetics, no printing&quot;, which given the use of &quot;guaranteed&quot; and past context sounds like you&#39;re saying something is UB... and the mention of &quot;printing&quot; implies you might&#39;ve been responding to the <code>printf</code> macros. If you&#39;re saying something else, please, clarify."}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 4, "last_activity_date": 1471441320, "last_edit_date": 1471441320, "creation_date": 1471439057, "answer_id": 38997477, "question_id": 38997119, "link": "https://stackoverflow.com/questions/38997119/storing-of-string-literals-in-consecutive-memory-locations/38997477#38997477", "title": "Storing of string literals in consecutive memory locations", "body": "<p>I have an example for you:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;inttypes.h&gt;\n\nchar    *s[] = { \"ball\", \"football\" };\n\nint main( void ) \n{\n    int i;\n\n    for( i=0; i&lt;2; i++ ) {\n        printf( \"%\" PRIuPTR \"\\n\", (uintptr_t)s[i] );\n        // or printf( \"%p\\n\", s[i] ); forr hex output\n    }\n}\n</code></pre>\n\n<p>If I compile and run that program with <code>gcc -O3</code> I get:</p>\n\n<pre><code>4195869\n4195865\n</code></pre>\n\n<p>What happens here is that the optimizer merges both string literal to a single \"football\" so that <code>s[0]</code> becomes <code>s[1] + 4</code>.</p>\n\n<p>That's only one example of what compiler / linker might decide on how to store string literals ...</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471441438, "post_id": 38998316, "comment_id": 65348437, "body": "What do you mean? Addresses of strings within the image are determined at compile time. Adjustment of address for relocation purposes is performed by the loader; the compiler has nothing to do with that."}, {"owner": {"reputation": 13, "user_id": 6219647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e4bae870586038e9216a1786d4f134?s=128&d=identicon&r=PG&f=1", "display_name": "Srestha1", "link": "https://stackoverflow.com/users/6219647/srestha1"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471450076, "post_id": 38998316, "comment_id": 65354654, "body": "yes adjustment of addresses is done when linker when it wants some memory location. and after that loader load that address from hard disk. And that is a phase of compilation. that is why I told it is compiler dependent"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471450627, "post_id": 38998316, "comment_id": 65354989, "body": "How does this relate to string literals and their positioning relative to one another? One would assume that the entire section wherein they are contained might have its address adjusted but that they would stick together relatively. Or do you have a specific answer to the question?"}], "tags": [], "owner": {"reputation": 13, "user_id": 6219647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e4bae870586038e9216a1786d4f134?s=128&d=identicon&r=PG&f=1", "display_name": "Srestha1", "link": "https://stackoverflow.com/users/6219647/srestha1"}, "is_accepted": false, "score": -1, "last_activity_date": 1471441183, "creation_date": 1471441183, "answer_id": 38998316, "question_id": 38997119, "link": "https://stackoverflow.com/questions/38997119/storing-of-string-literals-in-consecutive-memory-locations/38998316#38998316", "title": "Storing of string literals in consecutive memory locations", "body": "<p>It will be totally compiler dependent. Compiler can take any address at the time execution started</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1471444997, "post_id": 38999737, "comment_id": 65351259, "body": "Are not <i>all</i> arrays contiguous within themselves?  Perhaps show your answer as it relates to two or more arrays."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471445220, "post_id": 38999737, "comment_id": 65351419, "body": "What does this mean? What happens to <i>non-<code>static</code></i> arrays? I think you&#39;re thinking of something different, or perhaps drawing inferences from one platform that aren&#39;t Standardised for all."}, {"owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "edited": false, "score": 0, "creation_date": 1471445629, "post_id": 38999737, "comment_id": 65351713, "body": "static keyword assume that your variable is global. it&#39;s mean that the max size of your array is not limited according to the stack size."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1471447466, "post_id": 38999737, "comment_id": 65353024, "body": "What relevance do allocation strategy or available memory have to whether any array is contiguous (A) within itself or (B) relative to other arrays? And does your &quot;contiguous&quot; here refer to A or B, anyway? A is always true. Other users have already noted that B is entirely implementation-defined."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1471601951, "post_id": 38999737, "comment_id": 65422624, "body": "nope, static memory allocation is compiler dependant, and you cannot assume any storage arrangement."}], "tags": [], "owner": {"reputation": 69, "user_id": 5102960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8672fc478c36404202e6e268bcb977a4?s=128&d=identicon&r=PG&f=1", "display_name": "madago", "link": "https://stackoverflow.com/users/5102960/madago"}, "is_accepted": false, "score": -3, "last_activity_date": 1471444868, "creation_date": 1471444868, "answer_id": 38999737, "question_id": 38997119, "link": "https://stackoverflow.com/questions/38997119/storing-of-string-literals-in-consecutive-memory-locations/38999737#38999737", "title": "Storing of string literals in consecutive memory locations", "body": "<p>Only static arrays are contiguous in memory. ex: char s[1024]. </p>\n"}], "owner": {"reputation": 1001, "user_id": 4044050, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Fawzb.jpg?s=128&g=1", "display_name": "Debashish", "link": "https://stackoverflow.com/users/4044050/debashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 38997175, "answer_count": 4, "score": 6, "last_activity_date": 1471444868, "creation_date": 1471438140, "last_edit_date": 1471438562, "question_id": 38997119, "link": "https://stackoverflow.com/questions/38997119/storing-of-string-literals-in-consecutive-memory-locations", "title": "Storing of string literals in consecutive memory locations", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    int main() {\n\n    char *s[] = {\"cricket\",\"tennis\",\"football\"};\n\n    printf(\" String are: \\n\\n\");\n    printf(\"  %s \\n\", *(s));\n    printf(\"  %s \\n\", *(s+1));\n    printf(\"  %s \\n\", *(s+2));\n    printf(\"  \\n\\n\");\n\n    printf(\"  Starting locations of the string are: \\n\\n\");\n\n    printf(\"  %d\\n\",*(s));\n    printf(\"  %d\\n\",*(s+1));\n    printf(\"  %d\\n\",*(s+2));\n    printf(\"  \\n\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>String are: \n\ncricket \ntennis \nfootball \n\n\nStarting locations of the string are: \n\n134514112\n134514120\n134514127\n</code></pre>\n\n<p>s is a array of character pointers. s has three elements and each of them are storing the starting address of the string literals.i.e. s[0] is a pointer pointing to the starting address of \"cricket\". etc..</p>\n\n<p>My question is :</p>\n\n<p>By observing these addresses we can see that second string is stored just after the null character of the first string. All three strings are stored in sequential form. Is this always true ?</p>\n"}, {"tags": ["c++", "static-linking", "dynamic-linking"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1471438054, "post_id": 38996963, "comment_id": 65345680, "body": "Perhaps you didn&#39;t install the library ? usually done with <code>make install</code> , see if you can figure out through its output where it&#39;s installed, so you at least know where the header files and library files are on your disk"}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "edited": false, "score": 0, "creation_date": 1471441542, "post_id": 38996963, "comment_id": 65348520, "body": "Instead of compiling it yourself, BTW, you could use the version provided by Debian: <code>apt install libtorrent-rasterbar-dev</code>"}, {"owner": {"reputation": 658, "user_id": 847499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0c5438bb1f78726e62182ec26518fa25?s=128&d=identicon&r=PG", "display_name": "myk", "link": "https://stackoverflow.com/users/847499/myk"}, "edited": false, "score": 0, "creation_date": 1471442002, "post_id": 38996963, "comment_id": 65348850, "body": "You can use a command like: find / -name session.hpp -print, to find the location on the session.hpp.  Then on g++ command add a parameter of the form -I/path/to/session.hpp."}, {"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1471442084, "post_id": 38996963, "comment_id": 65348905, "body": "okey, that&#39;s what I did Wyzard. But I get an error with Boost now, because I have to link asio and libtorrent I guess... (Updated the question)"}], "answers": [{"comments": [{"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1471443232, "post_id": 38998567, "comment_id": 65349799, "body": "Now I was able to add it in there, but still have some problems. Thanks for the help!"}], "tags": [], "owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "is_accepted": false, "score": 1, "last_activity_date": 1471441804, "creation_date": 1471441804, "answer_id": 38998567, "question_id": 38996963, "link": "https://stackoverflow.com/questions/38996963/build-library-libtorrent-debian-and-link-it-to-program-c/38998567#38998567", "title": "Build library libtorrent debian and link it to program c++", "body": "<p>Sounds like you've compiled the library but not actually installed it anywhere.  An <code>#include</code> directive looks in <code>/usr/include</code> by default, but the libtorrent headers are somewhere in the directory where you built the library.  You'll need to either install the library's files into the system directories, or give the compiler an <code>-I</code> option pointing to the libtorrent build directory.  (You'll probably also need an <code>-L</code> option when linking, for the same reason.)</p>\n"}], "owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488805544, "creation_date": 1471437707, "last_edit_date": 1488805544, "question_id": 38996963, "link": "https://stackoverflow.com/questions/38996963/build-library-libtorrent-debian-and-link-it-to-program-c", "title": "Build library libtorrent debian and link it to program c++", "body": "<p>I always have problems when building libraries and linking them, so I hope someone can give me a hand.</p>\n\n<p>I downloaded libtorrent from <a href=\"http://www.libtorrent.org/\" rel=\"nofollow noreferrer\">here</a> and I've built it like they explain <a href=\"http://file:///home/ubuntuk/workspaces/streamer/Import/libtorrent/docs/building.html\" rel=\"nofollow noreferrer\">here</a> in the <code>building with autotools</code> section (skipping step 1). The building process was successfull I think, but when I did <code>make check</code> the output was:</p>\n\n<pre><code>============================================================================\nTestsuite summary for libtorrent-rasterbar 1.0.5\n============================================================================\n# TOTAL: 0\n# PASS:  0\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre>\n\n<p>Maybe it should say: total X?</p>\n\n<p>I did a little program where I added <code>#include &lt;libtorrent/session.hpp&gt;</code> and when I compile with <code>g++ file.cpp -o file</code> it says <code>libtorrent/session.hpp: No such file or directory</code>.</p>\n\n<p>Should I add some flags to g++ such as <code>-lpthread</code> for other projects and thinks like that?</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE:</strong>\nWhen installing without building using <code>sudo apt-get install libtorrent-rasterbar-dev</code> and compiling my main.cpp file I get this error:</p>\n\n<pre><code>g++ main.cpp -o file\nIn file included from /usr/include/libtorrent/session.hpp:49:0,\n                 from main.cpp:2:\n/usr/include/libtorrent/config.hpp:46:2: error: #error you must define either BOOST_ASIO_SEPARATE_COMPILATION or BOOST_ASIO_DYN_LINK in your project in order for asio's declarations to be correct. If you're linking dynamically against libtorrent, define BOOST_ASIO_DYN_LINK otherwise BOOST_ASIO_SEPARATE_COMPILATION. You can also use pkg-config or boost build, to automatically apply these defines\n#error you must define either BOOST_ASIO_SEPARATE_COMPILATION or BOOST_ASIO_DYN_LINK in your project in \\\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Modified the <code>main.cpp</code> file to add the the following above the libtorrent <code>#include</code> directives:</p>\n\n<pre><code>#ifndef BOOST_ASIO_DYN_LINK\n#define BOOST_ASIO_DYN_LINK\n#endif\n</code></pre>\n\n<p>But then I have this problem:</p>\n\n<pre><code>$ g++ main.cpp\n/tmp/ccM2ItFb.o: In function `main':\nmain.cpp:(.text+0x57): undefined reference to  `libtorrent::default_storage_constructor(libtorrent::file_storage const&amp;, libtorrent::file_storage const*, std::string const&amp;, libtorrent::file_pool&amp;, std::vector&lt;unsigned char, std::allocator&lt;unsigned char&gt; &gt; const&amp;)'\nmain.cpp:(.text+0xb9): undefined reference to `libtorrent::session::~session()'\nmain.cpp:(.text+0x105): undefined reference to `libtorrent::session::~session()'\n/tmp/ccM2ItFb.o: In function `__static_initialization_and_destruction_0(int, int)':\nmain.cpp:(.text+0x162): undefined reference to `boost::system::generic_category()'\nmain.cpp:(.text+0x16e): undefined reference to `boost::system::generic_category()'\nmain.cpp:(.text+0x17a): undefined reference to `boost::system::system_category()'\nmain.cpp:(.text+0x192): undefined reference to `boost::asio::error::get_netdb_category()'\nmain.cpp:(.text+0x19e): undefined reference to `boost::asio::error::get_addrinfo_category()'\nmain.cpp:(.text+0x1aa): undefined reference to `boost::asio::error::get_misc_category()'\n/tmp/ccM2ItFb.o: In function `boost::asio::error::get_system_category()':\nmain.cpp (.text._ZN5boost4asio5error19get_system_categoryEv[_ZN5boost4asio5error19get_system_categoryEv]+0x5): undefined reference to `boost::system::system_category()'\n/tmp/ccM2ItFb.o: In function `libtorrent::session::session(libtorrent::fingerprint const&amp;, int, unsigned int)':\nmain.cpp:(.text._ZN10libtorrent7sessionC2ERKNS_11fingerprintEij[_ZN10libtorrent7sessionC5ERKNS_11fingerprintEij]+0x3c): undefined reference to `libtorrent::rel_clocktime_pools_nolog_resolvecountries_deprecated_dht_ext_()'\nmain.cpp:(.text._ZN10libtorrent7sessionC2ERKNS_11fingerprintEij[_ZN10libtorrent7sessionC5ERKNS_11fingerprintEij]+0x75): undefined reference to `libtorrent::session::init(std::pair&lt;int, int&gt;, char const*, libtorrent::fingerprint const&amp;, int, unsigned int)'\n/tmp/ccM2ItFb.o: In function `void boost::checked_delete&lt;libtorrent::torrent_info const&gt;(libtorrent::torrent_info const*)':\nmain.cpp:(.text._ZN5boost14checked_deleteIKN10libtorrent12torrent_infoEEEvPT_[_ZN5boost14checked_deleteIKN10libtorrent12torrent_infoEEEvPT_]+0x1a): undefined reference to `libtorrent::torrent_info::~torrent_info()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Also tried compiling using: <code>g++ -I /usr/include/ -L /usr/local/lib -lboost_system -lpthread -lboost_thread main.cpp</code> with the same result.</p>\n\n<p><strong>UPDATE 3:</strong></p>\n\n<p>I was able to solve the problem. I had to compile using: \n<code>g++ -I /usr/include/ -L /usr/local/lib -lboost_system -lpthread -lboost_thread main.cpp</code> and add also the link library <code>-ltorrent-rasterbar</code></p>\n"}, {"tags": ["c++", "opengl", "blender", ".obj"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1471436896, "post_id": 38996191, "comment_id": 65344792, "body": "The <code>.obj</code> file doesn&#39;t define normals. Do you define them in some other way?"}, {"owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "edited": false, "score": 0, "creation_date": 1471437263, "post_id": 38996191, "comment_id": 65345032, "body": "Did you check if the vertex and index arrays contains the same information as the file after loading it?"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 3, "creation_date": 1471437293, "post_id": 38996191, "comment_id": 65345057, "body": "Did you note, that indices in the obj-file are from [1, 8], but OpenGL requires them zero-based in [0, 7]?"}, {"owner": {"reputation": 19, "user_id": 6726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163a8d449319dc90fedd7ae8331b4c77?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Schambourg", "link": "https://stackoverflow.com/users/6726149/maxime-schambourg"}, "edited": false, "score": 0, "creation_date": 1471437872, "post_id": 38996191, "comment_id": 65345536, "body": "yeah i forgot to decrement the indices. thanks a LOT!"}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": false, "score": 2, "last_activity_date": 1471440558, "creation_date": 1471440558, "answer_id": 38998073, "question_id": 38996191, "link": "https://stackoverflow.com/questions/38996191/cant-draw-a-correct-cube-when-loading-one-from-obj-file-with-opengl/38998073#38998073", "title": "Can&#39;t draw a correct cube when loading one from .obj file with opengl", "body": "<p>In den obj-file, indices are starting from 1 (range [1, 8], but OpenGL expects them zero-based (range [0, 7]). To solve this, simply subtract 1 from each element in your index list.</p>\n"}], "owner": {"reputation": 19, "user_id": 6726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163a8d449319dc90fedd7ae8331b4c77?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Schambourg", "link": "https://stackoverflow.com/users/6726149/maxime-schambourg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471591575, "creation_date": 1471435605, "last_edit_date": 1471591575, "question_id": 38996191, "link": "https://stackoverflow.com/questions/38996191/cant-draw-a-correct-cube-when-loading-one-from-obj-file-with-opengl", "title": "Can&#39;t draw a correct cube when loading one from .obj file with opengl", "body": "<p>I looked at this problem from every conceivable angle and I don't see what I'm doing wrong so I'm asking you. I have a little C++ program that uses opengl and can draw a cube okay. I tried loading it from an .obj file with this function </p>\n\n<pre><code>    std::vector&lt; unsigned int &gt; vertexIndices, uvIndices;\nstd::vector&lt; glm::vec3 &gt; temp_vertices;\nstd::vector&lt; glm::vec2 &gt; temp_uvs;\n\nFILE* file = fopen(objFile.c_str(), \"r\");\nif (file == NULL) {\n    printf(\"Impossible to open the file !\\n\");\n    return;\n}\n\nwhile (true)\n{\n    char lineHeader[128];\n\n    int res = fscanf(file, \"%s\", lineHeader);\n    if (res == EOF)\n        break;\n\n    if (strcmp(lineHeader, \"v\") == 0)\n    {\n        glm::vec3 vertex;\n        fscanf(file, \"%f %f %f\\n\", &amp;vertex.x, &amp;vertex.y, &amp;vertex.z);\n        temp_vertices.push_back(vertex);\n    }\n    else if (strcmp(lineHeader, \"vt\") == 0)\n    {\n        glm::vec2 uv;\n        fscanf(file, \"%f %f\\n\", &amp;uv.x, &amp;uv.y);\n        temp_uvs.push_back(uv);\n    }\n    else if (strcmp(lineHeader, \"f\") == 0)\n    {\n        unsigned int vertexIndex[3], uvIndex[3];\n        int matches = fscanf(file, \"%d/%d %d/%d %d/%d\", &amp;vertexIndex[0], &amp;uvIndex[0],\n        &amp;vertexIndex[1], &amp;uvIndex[1], &amp;vertexIndex[2], &amp;uvIndex[2]);\n\n        if(matches != 6)\n        {\n\n\n            matches = fscanf(file, \"%d %d\",\n                &amp;vertexIndex[1], &amp;vertexIndex[2]);\n\n            if (matches != 2)\n            {\n                printf(\"File can't be read by our simple parser : ( Try exporting with other options\\n\");\n\n                return;\n            }\n        }\n        else\n        {\n            uvIndices    .push_back(vertexIndex[0]);\n            uvIndices    .push_back(vertexIndex[1]);\n            uvIndices    .push_back(vertexIndex[2]);\n        }\n\n        vertexIndices.push_back(vertexIndex[0]);\n        vertexIndices.push_back(vertexIndex[1]);\n        vertexIndices.push_back(vertexIndex[2]);\n\n    }\n    else if (strcmp(lineHeader, \"mtllib\") == 0)\n    {\n\n        int res = fscanf(file, \"%s\", lineHeader);\n\n        FILE* fileTexture = fopen(lineHeader, \"r\");\n\n        while (true)\n        {\n            char lineHeader2[128];\n\n            int res = fscanf(fileTexture, \"%s\", lineHeader);\n            if (res == EOF)\n                break;\n\n            if (strcmp(lineHeader2, \"map_Kd\") == 0)\n            {\n                char textureFile[128];\n                fscanf(fileTexture, \"%s\", textureFile);\n                m_texture = Texture(textureFile);\n            }\n        }\n\n    }\n}\n\nm_vertices = new float[temp_vertices.size() * 3];\nm_bytesSizeVertices = temp_vertices.size() * 3 * sizeof(float);\n\nfor (int i = 0; i &lt; temp_vertices.size(); i++)\n{\n    m_vertices[i * 3] = temp_vertices[i].x;\n    m_vertices[(i * 3) + 1] = temp_vertices[i].y;\n    m_vertices[(i * 3) + 2] = temp_vertices[i].z;\n}\n\n\nm_indices = new unsigned int[vertexIndices.size()];\nm_bytesSizeIndices = (vertexIndices.size() * sizeof(unsigned int));\n\nfor (int i = 0; i &lt; vertexIndices.size(); i++)\n{\n    m_indices[i] = vertexIndices[i];\n}\n\nm_trianglesNum = vertexIndices.size();\n\n\nif(temp_uvs.size() != 0)\n{\n    m_texCoords = new float[temp_uvs.size() * 2];\n    m_bytesSizeTexCoords = temp_uvs.size() * 2 * sizeof(float);\n\n    for (int i = 0; i &lt; vertexIndices.size(); i++)\n    {\n        m_texCoords[vertexIndices[i] * 2] = temp_uvs[uvIndices[i]].x;\n        m_texCoords[vertexIndices[i] * 2 + 1] = temp_uvs[uvIndices[i]].y;\n    }\n\n    m_texture.load();\n}\nelse\n    m_bytesSizeTexCoords = 0;\n</code></pre>\n\n<p>(sorry for the long post). and when i load this :</p>\n\n<pre><code># Blender v2.76 (sub 0) OBJ File: ''\n# www.blender.org\no Cube\nv 1.000000 -1.000000 -1.000000\nv 1.000000 -1.000000 1.000000\nv -1.000000 -1.000000 1.000000\nv -1.000000 -1.000000 -1.000000\nv 1.000000 1.000000 -0.999999\nv 0.999999 1.000000 1.000001\nv -1.000000 1.000000 1.000000\nv -1.000000 1.000000 -1.000000\ns off\nf 2 3 4\nf 8 7 6\nf 5 6 2\nf 6 7 3\nf 3 7 8\nf 1 4 8\nf 1 2 4\nf 5 8 6\nf 1 5 2\nf 2 6 3\nf 4 3 8\nf 5 1 8\n</code></pre>\n\n<p>it draws this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8WZX5.png\" alt=\"img\"></p>\n\n<p>there's no lighting but there are two faces that are fine and 2 triangles going from the bottom end to the other top corner</p>\n\n<p>I checked the content of the arrays when loading the vbo and every thing looks fine so I'm completely lost here.</p>\n"}, {"tags": ["c++", "visual-studio-2013", "build", "msbuild"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 6726196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec069ebc65d0303bf82595c88213104b?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/6726196/raju"}, "edited": false, "score": 4, "creation_date": 1471436519, "post_id": 38996255, "comment_id": 65344533, "body": "Thanks for a quick response! I had downloaded and installed build tools from the link given by you, but when i want to change platform toolset v140 toolset isn&#39;t showing up in the drop down menu."}, {"owner": {"reputation": 1208, "user_id": 2042691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66639bb0f4365bc25669916b5ef7bac?s=128&d=identicon&r=PG", "display_name": "thewhiteambit", "link": "https://stackoverflow.com/users/2042691/thewhiteambit"}, "edited": false, "score": 2, "creation_date": 1507151211, "post_id": 38996255, "comment_id": 80101922, "body": "It is not possible. Build tools are for backwards compatibility, like VS2017 compiling VS2015. But it is not possible forward so I downvoted your answer."}], "tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1471435770, "last_edit_date": 1495541403, "creation_date": 1471435770, "answer_id": 38996255, "question_id": 38996126, "link": "https://stackoverflow.com/questions/38996126/is-it-possible-to-install-v140-build-tools-in-visual-studio-2013-if-yes-then-ho/38996255#38996255", "title": "is it possible to install v140 build tools in visual studio 2013? if yes then how?", "body": "<p>You can download and install the Visual C++ 2015 build tools from <a href=\"http://landinghub.visualstudio.com/visual-cpp-build-tools\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You can then change your toolset (as described <a href=\"https://stackoverflow.com/questions/31792663/visual-studio-2013-error-ms8020-build-tools-v140-cannot-be-found\">here</a>):</p>\n\n<ul>\n<li>Right click your project, go to Properties.</li>\n<li>Under Configuration Properties, go to General. </li>\n<li>Change your Platform Toolset to one of the\navailable ones.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 280, "user_id": 1919793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42001cbe8b2d5182968355b849a0e5fa?s=128&d=identicon&r=PG", "display_name": "theSparky", "link": "https://stackoverflow.com/users/1919793/thesparky"}, "is_accepted": false, "score": 4, "last_activity_date": 1502893989, "last_edit_date": 1502893989, "creation_date": 1502890194, "answer_id": 45714969, "question_id": 38996126, "link": "https://stackoverflow.com/questions/38996126/is-it-possible-to-install-v140-build-tools-in-visual-studio-2013-if-yes-then-ho/45714969#45714969", "title": "is it possible to install v140 build tools in visual studio 2013? if yes then how?", "body": "<p>I tried to install the build tools, but the installation failed. I asked the same question <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/641fd2f9-d3a3-454f-aeb5-6fe8ea5aad25/build-tools-v140-not-loading-in-visual-studio-2013?forum=msbuild\" rel=\"nofollow noreferrer\">on the MSDN forums</a> and was told that VS is backward compatible but not forward compatible with build tool installs.</p>\n\n<p>So, no&mdash;it is not possible to install v140 of the build tools on VS 2013, as this is an older version of Visual Studio than v140.</p>\n"}, {"tags": [], "owner": {"reputation": 1208, "user_id": 2042691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66639bb0f4365bc25669916b5ef7bac?s=128&d=identicon&r=PG", "display_name": "thewhiteambit", "link": "https://stackoverflow.com/users/2042691/thewhiteambit"}, "is_accepted": false, "score": 1, "last_activity_date": 1507210614, "creation_date": 1507210614, "answer_id": 46587055, "question_id": 38996126, "link": "https://stackoverflow.com/questions/38996126/is-it-possible-to-install-v140-build-tools-in-visual-studio-2013-if-yes-then-ho/46587055#46587055", "title": "is it possible to install v140 build tools in visual studio 2013? if yes then how?", "body": "<p>No, it is not possible!\nIt is that simple, but I am forced to write at least 30 characters.</p>\n"}], "owner": {"reputation": 161, "user_id": 6726196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec069ebc65d0303bf82595c88213104b?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/6726196/raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17999, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1507210614, "creation_date": 1471435432, "question_id": 38996126, "link": "https://stackoverflow.com/questions/38996126/is-it-possible-to-install-v140-build-tools-in-visual-studio-2013-if-yes-then-ho", "title": "is it possible to install v140 build tools in visual studio 2013? if yes then how?", "body": "<p>I want to install v140 build tools in visual studio 2013, as my project has been upgraded to vs 2015. I dont want to install vs 2015. is there a way to install v140 in vs 2013. Thanks</p>\n"}, {"tags": ["c++", "c", "linker", "global-variables", "extern"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1471435071, "post_id": 38995963, "comment_id": 65343535, "body": "Needs, more, commas, to, be, readable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1471435266, "post_id": 38995963, "comment_id": 65343687, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 1203, "user_id": 6105043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9590c13dc07ee5a556e0d9ee36711499?s=128&d=identicon&r=PG", "display_name": "Elijan9", "link": "https://stackoverflow.com/users/6105043/elijan9"}, "edited": false, "score": 0, "creation_date": 1471435315, "post_id": 38995963, "comment_id": 65343721, "body": "You probably need to add <code>extern &quot;C&quot;</code> in your program.cpp, because there you <i>will</i> need it. Also you could move <code>_ReParseHtml DllReParseHtml;</code> to your parser.c rather than your program.cpp"}, {"owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "reply_to_user": {"reputation": 1203, "user_id": 6105043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9590c13dc07ee5a556e0d9ee36711499?s=128&d=identicon&r=PG", "display_name": "Elijan9", "link": "https://stackoverflow.com/users/6105043/elijan9"}, "edited": false, "score": 0, "creation_date": 1471435510, "post_id": 38995963, "comment_id": 65343852, "body": "@Elijan9 i need to use it elsewhere on the project in a few other C files. Thats why i declared like that"}, {"owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1471435779, "post_id": 38995963, "comment_id": 65344031, "body": "@KlasLindb&#228;ck its not the dll. I just have the <code>c++</code> project in which i use some pure C code. In that pure C code i need to access the global variables which is declared in my project. In my post, the global variable is the function that is dynamically loaded from the dll in <code>WinMain</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1471440790, "post_id": 38995963, "comment_id": 65347921, "body": "Did you include the header in your C++ file? If you didn&#39;t, the symbol you defined there is a distinct symbol, with internal linkage."}, {"owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "edited": false, "score": 0, "creation_date": 1471440826, "post_id": 38995963, "comment_id": 65347958, "body": "The header with the <code>extern _ReParseHtml DllReParseHtml;</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6726245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1220ce3ef3e6ad5a6e3032a59a4963e?s=128&d=identicon&r=PG&f=1", "display_name": "BTA", "link": "https://stackoverflow.com/users/6726245/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1471437606, "last_edit_date": 1592644375, "creation_date": 1471437606, "answer_id": 38996929, "question_id": 38995963, "link": "https://stackoverflow.com/questions/38995963/mixed-c-c-sources-doesnt-recognize-extern-variables-on-linkage/38996929#38996929", "title": "Mixed C/C++ sources, doesn&#39;t recognize &#39;extern&#39; variables on linkage", "body": "<p>If I understand you, I do not think your problem comes from the mixing of C and C ++ languages. In fact, a global variable must be declared in a single file without the keyword extern and any other files with that keyword.\nDo not change anything in your file &quot;func_def.h&quot; but make sure the typedef is recognized. Take all the same care with C ++ makes a mangle.\nPlace the beginning of the file directive</p>\n<pre><code>#ifdef __cplusplus\n    extern &quot;C&quot; {\n#endif\n</code></pre>\n<p>and at end of file directive</p>\n<pre><code>#ifdef __cplusplus\n    }\n#endif\n</code></pre>\n<p>In one of your .c files, use the directive</p>\n<h1>define extern</h1>\n<p>This will effectively remove the keyword in a single file.</p>\n<p>Regards: Bernard.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "is_accepted": true, "score": 0, "last_activity_date": 1471462620, "creation_date": 1471462620, "answer_id": 39004927, "question_id": 38995963, "link": "https://stackoverflow.com/questions/38995963/mixed-c-c-sources-doesnt-recognize-extern-variables-on-linkage/39004927#39004927", "title": "Mixed C/C++ sources, doesn&#39;t recognize &#39;extern&#39; variables on linkage", "body": "<p>I solved this problem, by making all the prototype function declarations as in a block \"extern \"C\" { }\" . I had to modify the C code, to the c++ standart, removing some constructions, but at least it helped</p>\n"}], "owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 39004927, "answer_count": 2, "score": -1, "last_activity_date": 1471462620, "creation_date": 1471434973, "question_id": 38995963, "link": "https://stackoverflow.com/questions/38995963/mixed-c-c-sources-doesnt-recognize-extern-variables-on-linkage", "title": "Mixed C/C++ sources, doesn&#39;t recognize &#39;extern&#39; variables on linkage", "body": "<p>I have the C++ project in which i added some pure C gnu library. I was tasked to change some of the functions, that is used there for the ones, that are needed to be loaded dynamically from dll, so what i did is, i declared the prototype, and made an extern variable:</p>\n\n<p>file <strong>prototypes.h</strong>:</p>\n\n<pre><code>typedef char *( __cdecl * _ReParseHtml ) ( DOM * data )\n</code></pre>\n\n<p>file <strong>func_defs.h</strong></p>\n\n<pre><code>extern _ReParseHtml DllReParseHtml;\n</code></pre>\n\n<p>then in my, main file <strong>program.cpp</strong> i declared:</p>\n\n<pre><code>_ReParseHtml DllReParseHtml;\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n    _In_opt_ HINSTANCE hPrevInstance,\n    _In_ LPWSTR    lpCmdLine,\n    _In_ int       nCmdShow)\n{\n    HINSTANCE hDLL = LoadLibrary(\"somelib.dll\");\n    if(hDll != 0){\n         DllReParseHtml = (_ReParseHtml)GetProcAddress(hDLL,\n                                       \"ReParseHtml\");\n         //etc\n    }\n}\n</code></pre>\n\n<p>So now i want to use this in the pure <code>.c</code> file which i added:\n<strong>parser.c</strong>:</p>\n\n<pre><code>#include \"func_defs.h\"  // here is the extern _ReParseHtml DllReParseHtml;\n\n int create_source(char * buf)\n {\n      char * modified = DllReParseHtml(buf);\n      // etc..\n }\n</code></pre>\n\n<p>But i get the error <code>LNK2001 unresolved external symbol DllReParseHtml</code>.</p>\n\n<p>The function in purce C source <code>int create_source(char * buf)</code> from which this functions suppose to be called is not in the <code>extern \"C\" { }</code> block, or anything like that.</p>\n"}, {"tags": ["c++", "cmake", "rpath"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 1, "creation_date": 1471435179, "post_id": 38995798, "comment_id": 65343611, "body": "Is there any reason to provide OpenCV header files in your installation? Using the link you pointed, what have you tried so far (edit your post with a minimal example and what goes wrong)?"}, {"owner": {"reputation": 1, "user_id": 3932477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8068a6cb4ea268b0d942e299e4552f5a?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/3932477/lorenzo"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471437614, "post_id": 38995798, "comment_id": 65345333, "body": "You are right. Only OpenCV dylibs should be delivered. I updated the original post."}], "owner": {"reputation": 1, "user_id": 3932477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8068a6cb4ea268b0d942e299e4552f5a?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/3932477/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471441055, "creation_date": 1471434506, "last_edit_date": 1471437635, "question_id": 38995798, "link": "https://stackoverflow.com/questions/38995798/cmake-search-for-shared-libraries-in-relative-path", "title": "CMake search for shared libraries in relative path", "body": "<p>Is there a way to specify the shared library path from CMakeLists.txt?\nI want to make an executable which uses OpenCV but I don't want the final user to install OpenCV. Instead I would like to deliver a folder containing my executable and the shared libraries it needs. The final structure should be something like</p>\n\n<p>Delivery</p>\n\n<ul>\n<li>MyApp</li>\n<li>OpenCV (folder containing opencv dylibs)</li>\n</ul>\n\n<p>In the end MyApp should search for the shared libs in OpenCV folder.\nI tried to use the info from <a href=\"https://cmake.org/Wiki/CMake_RPATH_handling\" rel=\"nofollow\">https://cmake.org/Wiki/CMake_RPATH_handling</a> but for some reason I don't seem to understand what i really have to do to achieve what I want. </p>\n\n<p>I tried to set CMAKE_INSTALL_RPATH to @loader_path or @executable_path but don't see any change. It still searches for opencv libs in /lib folder.</p>\n\n<p>Running otool -L MyApp results in:</p>\n\n<p>lib/libopencv_imgproc.3.1.dylib (compatibility version 3.1.0, current version 3.1.0)\nlib/libopencv_imgcodecs.3.1.dylib (compatibility version 3.1.0, current version 3.1.0)\nlib/libopencv_highgui.3.1.dylib (compatibility version 3.1.0, current version 3.1.0)\nlib/libopencv_core.3.1.dylib (compatibility version 3.1.0, current version 3.1.0)</p>\n\n<p>/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0)</p>\n\n<p>/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)</p>\n"}, {"tags": ["c++", "debugging", "visual-studio-2013", "enums", "reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1471434230, "post_id": 38995659, "comment_id": 65342980, "body": "Give them different values.  Y and SPECIAL are the same so how is it supposed tell the difference?"}, {"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471434277, "post_id": 38995659, "comment_id": 65343009, "body": "The visual studio debugger just shows you the value you put in (<code>1</code>) and discovers a fancy name for it, if available. How the hell may it guess you meant another name?"}, {"owner": {"reputation": 73, "user_id": 4384343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d143f7b479f04eb82d680112e0b843d5?s=128&d=identicon&r=PG&f=1", "display_name": "Etay", "link": "https://stackoverflow.com/users/4384343/etay"}, "edited": false, "score": 0, "creation_date": 1471434469, "post_id": 38995659, "comment_id": 65343135, "body": "If I use a debugger inside the function after the assignment, the debugger knows its MOTOR::AXES::SPECIAL and not MOTOR::AXES::Y.  I want to use the same value for a purpose."}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1471437349, "post_id": 38995659, "comment_id": 65345108, "body": "Explain why they need to be the same and what your goal is. Maybe there is a completely different solution to your problem that will work good for you."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4384343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d143f7b479f04eb82d680112e0b843d5?s=128&d=identicon&r=PG&f=1", "display_name": "Etay", "link": "https://stackoverflow.com/users/4384343/etay"}, "edited": false, "score": 0, "creation_date": 1471434886, "post_id": 38995835, "comment_id": 65343417, "body": "Peter, Thanks for your answer.  I need to use the same value for them both for a reason:  I didn&#39;t write the entire code but the goal is to distinguish between Axes enumeration as an internal enumeration by the application and external  enumeration determined by the motor protocol.  so in my case(for real) X = 0 Y = 1 ...  X_EXTERNAL = 1  and when I try to convert X to X_EXTERNAL I get Y instead.  understand?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1471438230, "post_id": 38995835, "comment_id": 65345802, "body": "In that case, you still give them all different values and then translate the values.  As in: <code>int GetActualValue( MOTOR::AXES axis )</code>."}], "tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1471435415, "last_edit_date": 1471435415, "creation_date": 1471434598, "answer_id": 38995835, "question_id": 38995659, "link": "https://stackoverflow.com/questions/38995659/differentiate-between-two-equally-valued-differently-named-enum-values/38995835#38995835", "title": "Differentiate between two equally valued, differently named enum values", "body": "<p>Both <code>MOTOR::AXES::Y</code> and <code>MOTOR::AXES::SPECIAL</code> have the same value, so the compiler (or anybody, for that matter) cannot distinguish them everywhere.</p>\n\n<p>You might want to give <code>MOTOR::AXES::SPECIAL</code> a different value, but give it the same treatment as <code>MOTOR::AXES::Y</code> where applicable. This might add some complexity to your program, but that is the cost for the extra \"intelligence\" you want.</p>\n\n<p>Edit:\nAlternatively (based on your comment), you might want to separate your \"normal\" (internal) and \"special\" (external) enums into two separate enums, so they can be distinguished by type. Something like this:</p>\n\n<pre><code>enum AXIS {\n    X.\n    Y\n};\nenum SPECIAL_AXIS {\n    SPECIAL_X = AXIS::Y,\n    SPECIAL_Y = /* a value */\n};\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4384343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d143f7b479f04eb82d680112e0b843d5?s=128&d=identicon&r=PG&f=1", "display_name": "Etay", "link": "https://stackoverflow.com/users/4384343/etay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471436999, "creation_date": 1471434078, "last_edit_date": 1471436999, "question_id": 38995659, "link": "https://stackoverflow.com/questions/38995659/differentiate-between-two-equally-valued-differently-named-enum-values", "title": "Differentiate between two equally valued, differently named enum values", "body": "<p>Short description:</p>\n\n<p>I have an enum with the same value for 2 different enum constants:</p>\n\n<pre><code>namespace MOTOR\n{\n     using AXES = enum : int\n     {\n         X,\n         Y,\n         SPECIAL = 0X01,\n     };\n}\n</code></pre>\n\n<p>so that SPECIAL has the same value as Y (both are 0x01).</p>\n\n<p>I also have a function that does the following:</p>\n\n<pre><code>ErrType CMotorBase::ConvertAxis(MOTOR::AXES&amp; Axis)\n{\n     switch(Axis)\n     {\n          case MOTOR::AXES::X: Axis = MOTOR::AXES::SPECIAL;\n          break;\n     }\n     return NO_ERROR;\n}\n</code></pre>\n\n<p>when I try to use the function like this:</p>\n\n<pre><code>MOTOR::AXES Axis = MOTOR::AXES::X;\nErrType Err = ConvertAxis(Axis);\n...\nother code\n...\n</code></pre>\n\n<p>I expect that when I hit breakpoint on \"other code\", the value of Axis will be\nMOTOR::AXES::SPECIAL on visual studio debugger.</p>\n\n<p>but I get that Axis = MOTOR::AXES::Y; (same value, different constant name)</p>\n\n<p>they both have the same value of course so the \"logic\" is ok, but another programmer will think something went wrong while debugging.</p>\n\n<p>Any idea how to solve it? I want that both value and name will be correct when returning from the function.</p>\n"}, {"tags": ["c++", "constructor", "default"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1471434098, "post_id": 38995603, "comment_id": 65342908, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/default_constructor\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/default_constructor</a>"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1471434382, "post_id": 38995626, "comment_id": 65343087, "body": "Actually it does become the default constructor."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1471434393, "post_id": 38995626, "comment_id": 65343094, "body": "It actually is a default constructor. I quote the standard from memory (so I might be a little off): a default constructor is a constructor that can be called without any parameters."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1471434588, "post_id": 38995626, "comment_id": 65343226, "body": "right. Edited (also added <code>bool</code> type, too much python those days :))"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1471435202, "post_id": 38995626, "comment_id": 65343634, "body": "What about the case in which multiple constructors with are defined, all of which are given default argument values? Is that a semantic error?"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 4, "last_activity_date": 1471434552, "last_edit_date": 1471434552, "creation_date": 1471434003, "answer_id": 38995626, "question_id": 38995603, "link": "https://stackoverflow.com/questions/38995603/will-default-constructor-still-be-created-if-i-explicitly-define-a-constructor-w/38995626#38995626", "title": "Will default constructor still be created if I explicitly define a constructor with arguments?", "body": "<p>No, it won't, that's the point when you want class users to explicitly provide arguments.</p>\n\n<p>However, if you use default values for your parameters, it becomes the default constructor</p>\n\n<pre><code>class Foo\n{\n     Foo(bool flag=false);  // not a default constructor, but acts the same\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 7, "last_activity_date": 1471434156, "creation_date": 1471434156, "answer_id": 38995677, "question_id": 38995603, "link": "https://stackoverflow.com/questions/38995603/will-default-constructor-still-be-created-if-i-explicitly-define-a-constructor-w/38995677#38995677", "title": "Will default constructor still be created if I explicitly define a constructor with arguments?", "body": "<p>No, you have to explicitly provide the default constructor in that case.</p>\n\n<p>Although you can (from C++11 onwards), for a class <code>Foo</code>, use the syntax</p>\n\n<p><code>Foo() = default;</code></p>\n\n<p>within the class declaration which <em>reintroduces</em> the compiler-generated default constructor. (Note you need to put this in the <code>public</code> section for exact equivalence).</p>\n\n<p>Alternatively, if you provide default arguments to all the constructor parameters, then it <em>becomes</em> the default constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1471434202, "post_id": 38995680, "comment_id": 65342966, "body": "Consider <code>= default</code> notation instead."}, {"owner": {"reputation": 36, "user_id": 3605567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4790407929245bd7f1d4a44fb26175d8?s=128&d=identicon&r=PG&f=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/3605567/javi"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1471434371, "post_id": 38995680, "comment_id": 65343075, "body": "That is also an option. But only available since C++11."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1471434546, "post_id": 38995680, "comment_id": 65343195, "body": "I wish people would start asume the latest standard by default. So instead of &quot;This is what you can do. Oh and by the way since c++11 you can also do this&quot; to say &quot;This is what you can do. Before c++11 you had to do this instead&quot;"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1471435289, "post_id": 38995680, "comment_id": 65343706, "body": "@bolov agreed but then why do we have to type <code>-std=c++11</code> each time? It should be by default too (I&#39;m new at C++ 11 but I love it and I&#39;m a quick learner)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1471438613, "post_id": 38995680, "comment_id": 65346119, "body": "@Jean-Fran&#231;oisFabre the default for <code>gcc</code> is <code>gnu++14</code> which is a GNU dialect of -std=c++14. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html</a>"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1471438637, "post_id": 38995680, "comment_id": 65346138, "body": "@bolov unfortunately, there is many, a lot, legacy systems based on c++98. But I totally agree. Another issue, programmers a so used to the old c++ that they don&#39;t even bother looking what&#39;s new in the newest standard..."}], "tags": [], "owner": {"reputation": 36, "user_id": 3605567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4790407929245bd7f1d4a44fb26175d8?s=128&d=identicon&r=PG&f=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/3605567/javi"}, "is_accepted": false, "score": 0, "last_activity_date": 1471434242, "last_edit_date": 1471434242, "creation_date": 1471434168, "answer_id": 38995680, "question_id": 38995603, "link": "https://stackoverflow.com/questions/38995603/will-default-constructor-still-be-created-if-i-explicitly-define-a-constructor-w/38995680#38995680", "title": "Will default constructor still be created if I explicitly define a constructor with arguments?", "body": "<p>No. If you define a constructor, only the constructors that you define are present. If you want to keep the default constructor, you have to redefine it.</p>\n\n<pre><code>class MyClass\n{\n   MyClass(){};\n.\n.\n.\n};\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3027198, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59f56146fd8256425a04f67e49ff5b6f?s=128&d=identicon&r=PG&f=1", "display_name": "user3027198", "link": "https://stackoverflow.com/users/3027198/user3027198"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 38995677, "answer_count": 3, "score": 1, "last_activity_date": 1471434552, "creation_date": 1471433959, "question_id": 38995603, "link": "https://stackoverflow.com/questions/38995603/will-default-constructor-still-be-created-if-i-explicitly-define-a-constructor-w", "title": "Will default constructor still be created if I explicitly define a constructor with arguments?", "body": "<p>Will default constructor still be created if I explicitly define a constructor <strong>with</strong> arguments but no default constructor?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "boost", "struct", "shared-ptr"], "comments": [{"owner": {"reputation": 644, "user_id": 687389, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0ff2b8408e90b460ebd4f8a97f3ed3e0?s=128&d=identicon&r=PG", "display_name": "Unick", "link": "https://stackoverflow.com/users/687389/unick"}, "edited": false, "score": 0, "creation_date": 1471434231, "post_id": 38995599, "comment_id": 65342982, "body": "Looks like code is correct. Do you have compilation errors?"}, {"owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "edited": false, "score": 1, "creation_date": 1471434262, "post_id": 38995599, "comment_id": 65342995, "body": "What do you mean by &quot;I cannot resolve the relationship between these files&quot; ? What exactly is the issue?"}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 644, "user_id": 687389, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0ff2b8408e90b460ebd4f8a97f3ed3e0?s=128&d=identicon&r=PG", "display_name": "Unick", "link": "https://stackoverflow.com/users/687389/unick"}, "edited": false, "score": 0, "creation_date": 1471434463, "post_id": 38995599, "comment_id": 65343132, "body": "@Unick Yes, I got compilation error, which says in b.h : Class A was not declared in this scope."}, {"owner": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "edited": false, "score": 1, "creation_date": 1471434718, "post_id": 38995599, "comment_id": 65343314, "body": "Looks like you are missing ; after classes and structs."}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "edited": false, "score": 0, "creation_date": 1471434877, "post_id": 38995599, "comment_id": 65343410, "body": "@Slava that is not the reason... But it is a typo"}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471434923, "post_id": 38995599, "comment_id": 65343439, "body": "I think you wanted to include <code>a.h</code> in the <code>a.cpp</code> file. Am I right? I know it&#39;s not the solution."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1471434996, "post_id": 38995599, "comment_id": 65343485, "body": "My crystal ball says you have a circular include you&#39;re not showing.  We can&#39;t know for sure unless you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471435004, "post_id": 38995599, "comment_id": 65343493, "body": "@mtb another typo...sorry"}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1471435099, "post_id": 38995599, "comment_id": 65343558, "body": "@MilesBudnek I think this is circular include problem. But I donot have any idea to resolve this..."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1471435175, "post_id": 38995599, "comment_id": 65343609, "body": "Neither do we unless you show us your actual problem."}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 1, "creation_date": 1471435414, "post_id": 38995599, "comment_id": 65343794, "body": "@Johnnylin - now, without include guards, you have twice the <code>a.h</code>"}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471436070, "post_id": 38995599, "comment_id": 65344231, "body": "If I removed the <code>#include &quot;a.h&quot;</code> from the <code>a.cpp</code>, the code above compiled with no problems for me."}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471436895, "post_id": 38995599, "comment_id": 65344791, "body": "@Johnnylin Also, in the <code>b.h</code> you need to have <code>#include &lt;vector&gt;</code>. As I said above, for me the code compiled with no errors after removing the <code>#include &quot;a.h&quot;</code> from the <code>a.cpp</code>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1471436995, "post_id": 38995599, "comment_id": 65344848, "body": "Stop!  You are clearly not copy and pasting your actual code into SO.  You are retyping it &quot;in order to show just the relevant bits&quot;.  (We know this because your original question had typos that wouldn&#39;t have been present in C&amp;P code).  Just showing the relevant bits is very worthwhile (we won&#39;t look at a 10,000 line codebase), but the bits you are leaving out are actually the cause of your problem.  What you need to do, is to write actual a.h, b.h, a.cpp files and compile them.  Then when you get the compilation error, copy and paste those files into your question."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1471437067, "post_id": 38995599, "comment_id": 65344892, "body": "... assuming that the processing of simplifying hasn&#39;t already explained your problem.  (If that happens, edit the question anyway, and then answer it yourself.)"}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1471437301, "post_id": 38995599, "comment_id": 65345060, "body": "As @MartinBonner said, if you want to be helped with your problem, put the code that has the compile error in it, because the code after the changes you made till now to the answer is compiling without errors."}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1471437348, "post_id": 38995599, "comment_id": 65345106, "body": "@MartinBonner I am making a minimal example... wait a second."}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471438332, "post_id": 38995599, "comment_id": 65345880, "body": "@mtb  just updated"}, {"owner": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471438635, "post_id": 38995599, "comment_id": 65346134, "body": "@Johnnylin and the error is still the same? The error is at compile time?  Offtopic: in the <code>b.cpp</code> you need to include <code>&lt;iostream&gt;</code> for <code>std::cout</code>"}, {"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "reply_to_user": {"reputation": 1268, "user_id": 5520058, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27d7165786496b786cfdd0ba295c1692?s=128&d=identicon&r=PG&f=1", "display_name": "mtb", "link": "https://stackoverflow.com/users/5520058/mtb"}, "edited": false, "score": 0, "creation_date": 1471438882, "post_id": 38995599, "comment_id": 65346339, "body": "@mtb not the same, it can compile. But when running got the new error"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "edited": false, "score": 0, "creation_date": 1471440360, "post_id": 38997907, "comment_id": 65347598, "body": "That solved the problem. Thanks. By the way, in the above example, there is no circular including header file problem ?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "edited": false, "score": 0, "creation_date": 1471446546, "post_id": 38997907, "comment_id": 65352367, "body": "@Johnnylin You have no two header files that include each other, so no.  Circular include issues will usually lead to compilation failures, not runtime errors."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 1, "last_activity_date": 1471440102, "creation_date": 1471440102, "answer_id": 38997907, "question_id": 38995599, "link": "https://stackoverflow.com/questions/38995599/boostshared-ptr-of-a-class-as-a-struct-member/38997907#38997907", "title": "boost::shared_ptr of a class as a struct member", "body": "<pre><code>A a_tmp;\na_tmp.somefunction();\n</code></pre>\n\n<p>This will not work.  Since <code>A::someFunction</code> calls <code>shared_from_this</code>, there must exist at least one <code>shared_ptr</code> to any <code>A</code> object on which you call <code>someFunction</code>.  Change this to:</p>\n\n<pre><code>boost::shared_ptr&lt;A&gt; a_tmp(boost::make_shared&lt;A&gt;());\na_tmp-&gt;someFunction();\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 5087524, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-dFSsq8QXF7E/AAAAAAAAAAI/AAAAAAAAABM/GfvSgqHh0cY/photo.jpg?sz=128", "display_name": "Johnnylin", "link": "https://stackoverflow.com/users/5087524/johnnylin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 38997907, "answer_count": 1, "score": 0, "last_activity_date": 1471440102, "creation_date": 1471433948, "last_edit_date": 1471438848, "question_id": 38995599, "link": "https://stackoverflow.com/questions/38995599/boostshared-ptr-of-a-class-as-a-struct-member", "title": "boost::shared_ptr of a class as a struct member", "body": "<p>I have the following files. </p>\n\n<p>a.h:</p>\n\n<pre><code>#ifndef __A__\n#define __A__\n\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/enable_shared_from_this.hpp&gt;\n\nclass A: public boost::enable_shared_from_this&lt;A&gt;{\n\npublic:\n void somefunction();\n\n};\n\n\n#endif\n</code></pre>\n\n<p>a.cpp:</p>\n\n<pre><code>#include \"a.h\"\n#include \"b.h\"\n\nvoid A::somefunction()\n{\n    Node new_node;\n    new_node.id_ = 1;\n    new_node.ptr = shared_from_this();\n    C* c = C::GetInstance();\n    c-&gt;addNode(new_node);\n}\n</code></pre>\n\n<p>b.h:</p>\n\n<pre><code>#ifndef __B__\n#define __B__\n\n#include \"a.h\"\n#include &lt;vector&gt;\n\ntypedef boost::shared_ptr&lt;A&gt; a_ptr;\n\nstruct Node{\n    size_t id_;\n    a_ptr ptr;\n};\n\nclass C {\n\npublic:\n\n    static C *GetInstance(){\n        if(m_pInstance == nullptr){\n            m_pInstance = new C();\n            }\n        return m_pInstance;\n    }\n\n    void addNode(Node&amp; node);\n\n    void show();\nprivate:\n\n    static C* m_pInstance;\n    std::vector&lt;Node&gt; nodes_;\n};\n\n\n#endif\n</code></pre>\n\n<p>b.cpp:</p>\n\n<pre><code>#include \"b.h\"\n#include &lt;iostream&gt;\n\nC* C::m_pInstance = nullptr;\n\nvoid C::addNode(Node&amp; node){\n\n    nodes_.push_back(node);\n\n}\n\nvoid C::show(){\n\n    for(size_t i=0; i&lt; nodes_.size(); i++){\n        if(nodes_[i].ptr != nullptr) \n            std::cout &lt;&lt; nodes_[i].id_ &lt;&lt; \" \" &lt;&lt; \"pointer not null\" &lt;&lt; std::endl;\n    }\n\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"a.h\"\n#include \"b.h\"\n\nint main(){\n\n    A a_tmp;\n    a_tmp.somefunction();\n    C* c_tmp = C::GetInstance();\n    c_tmp-&gt;show();\n\n    return 0;\n}\n</code></pre>\n\n<p>What I want to do is to use a struct to store the pointer of class A instance. But I cannot resolve the relationship between these files. Can someone give me some ideas ?</p>\n\n<p><strong><em>UPDATE:</em></strong></p>\n\n<p>The problem is, when I compile these files. I got </p>\n\n<pre><code>In b.h, error: \u2018A\u2019 was not declared in this scope typedef boost::shared_ptr&lt;A&gt; a_ptr;\n</code></pre>\n\n<p><strong><em>UPDATE:</em></strong></p>\n\n<pre><code>terminate called after throwing an instance of 'boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::bad_weak_ptr&gt; &gt;'\n</code></pre>\n"}, {"tags": ["c++", "oop", "parameters"], "comments": [{"owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "edited": false, "score": 0, "creation_date": 1471434022, "post_id": 38995591, "comment_id": 65342869, "body": "What do you mean with &quot;better&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "edited": false, "score": 0, "creation_date": 1471434731, "post_id": 38995683, "comment_id": 65343319, "body": "If I have in wrapper class 2 public functions      class wrapper     {public:     fun1();     fun2();     } but I want to use only fun1 in function fun is it better to specify with interface"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "edited": false, "score": 0, "creation_date": 1471435329, "post_id": 38995683, "comment_id": 65343731, "body": "@VladimirYanakiev Think about design of <i>interfaces</i> themselves first, not about one particular usage scenario (<code>fun</code>) that you have today"}], "tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": false, "score": 4, "last_activity_date": 1471434178, "creation_date": 1471434178, "answer_id": 38995683, "question_id": 38995591, "link": "https://stackoverflow.com/questions/38995591/passing-interface-or-reference-to-a-function-as-parameter/38995683#38995683", "title": "passing interface or reference to a function as parameter", "body": "<p>If you want your function to only accept instances of the <code>wrapper</code> class, use</p>\n\n<pre><code>fun(wrapper&amp; ob)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fun(const wrapper&amp; ob)\n</code></pre>\n\n<p>if you do not intend to modify it.</p>\n\n<p>If you want your function to accept anything that implements the <code>Interface</code> class (only really useful if there are more classes than just <code>wrapper</code> inheriting from <code>Interface</code>), then use:</p>\n\n<pre><code>fun(Interface&amp; ob)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fun(const Interface&amp; ob)\n</code></pre>\n\n<p>The choice depends on the use-case.</p>\n"}, {"tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": true, "score": 2, "last_activity_date": 1471440056, "last_edit_date": 1495535630, "creation_date": 1471434903, "answer_id": 38995943, "question_id": 38995591, "link": "https://stackoverflow.com/questions/38995591/passing-interface-or-reference-to-a-function-as-parameter/38995943#38995943", "title": "passing interface or reference to a function as parameter", "body": "<p>The <code>Interface</code> approach is better if:</p>\n\n<ol>\n<li>You want to follow <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">Liskov substitution principle</a> and be able in future to replace <code>wrapper</code> with some other class that implements <code>Interface</code></li>\n<li>You want to hide <code>wrapper</code>'s implementation from <code>fun</code>'s user - i.e. you won't need to #include <code>wrapper.h</code> before <code>fun</code> declaration</li>\n<li>and so on.. </li>\n</ol>\n\n<p>It is <em>generally</em> better to go with <code>Interface</code> to abstract implementation from interface, BUT also do not forget about <a href=\"https://stackoverflow.com/questions/28304992/how-can-i-better-learn-to-not-pay-for-what-you-dont-use\">\u201cnot pay for what you don't use\u201d</a> principle, i.e. if you know that you won't need any implementation of <code>Interface</code> other than <code>wrapper</code> soon enough and <code>wrapper.h</code> #inclusion is not a problem for your project than going with <code>Interface</code> will be <a href=\"http://www.collinsdictionary.com/dictionary/english/over-designed\" rel=\"nofollow noreferrer\">over-design</a></p>\n"}], "owner": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1813, "favorite_count": 0, "accepted_answer_id": 38995943, "answer_count": 2, "score": 0, "last_activity_date": 1471440056, "creation_date": 1471433935, "question_id": 38995591, "link": "https://stackoverflow.com/questions/38995591/passing-interface-or-reference-to-a-function-as-parameter", "title": "passing interface or reference to a function as parameter", "body": "<p>I have wrapper class and I have pass its object to a function.</p>\n\n<pre><code>class wrapper\n{\n/// some functionality\n}\n</code></pre>\n\n<p>What will be better to pass as reference to the class  like </p>\n\n<pre><code>fun(wrapper &amp; ob)\n</code></pre>\n\n<p>or to new Interface that is inherited by wrapper like:</p>\n\n<pre><code>class Interface\n{\n}\n ....\nclass wrapper:public Interface\n ...\nfun(Interface&amp; ob)\n</code></pre>\n"}, {"tags": ["c++", "graph", "direct2d", "lineargradientbrush"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 411729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87bfbd10db8da80db793f397010cbac7?s=128&d=identicon&r=PG", "display_name": "CodeIT", "link": "https://stackoverflow.com/users/411729/codeit"}, "is_accepted": false, "score": 1, "last_activity_date": 1474542664, "creation_date": 1474542664, "answer_id": 39637424, "question_id": 38995489, "link": "https://stackoverflow.com/questions/38995489/direct2d-drawing-with-directx11-aligning-rectangles-on-a-display-graph/39637424#39637424", "title": "Direct2D Drawing with DirectX11: Aligning rectangles on a display graph", "body": "<p>Can't this be fixed by setting the appropriate anti alias mode when drawing the rectangles?</p>\n\n<pre><code>pRenderTarget-&gt;SetAntialiasMode(D2D1_ANTIALIAS_MODE_ALIASED);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2906294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb3d251f8ecd096364c85aadc445474?s=128&d=identicon&r=PG&f=1", "display_name": "user2906294", "link": "https://stackoverflow.com/users/2906294/user2906294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474542664, "creation_date": 1471433613, "question_id": 38995489, "link": "https://stackoverflow.com/questions/38995489/direct2d-drawing-with-directx11-aligning-rectangles-on-a-display-graph", "title": "Direct2D Drawing with DirectX11: Aligning rectangles on a display graph", "body": "<p>I'm working on a graphical application in C++ using Direct2d (DirectX11). The application takes in sensor data and displays the input using rectangles that are placed side-by-side across the x-axis (which represents time). Each rectangle is filled with a linear gradient brush that represents multiple sensor readings at the discrete time interval displayed along the y-axis.\nWhen a reading is acquired, the placement for the starting 'x' position of the next rectangle should be exactly where the last one finished i.e. rect1.right should be rect2.left. The start point for each rect is calculated using the pseudocode below:</p>\n\n<pre><code>//find the number of rectangles needed to represent the time scale (rects must be an integer, as we cannot display partial rectangles\nint nNumXRects = fAxisLength/fTimeDivision;\n\n//calculate the X-axis increment for each rectangle\nfloat fXIncrement = fXAxisLineLength/(float)NumXRects;\n\n//Get the next x position\nrect2.left = rect1.right;\nrect2.right = rect2.left + fXIncrement;\n</code></pre>\n\n<p>My problem is that the graph only appears correctly when the value of fXIncrement is exactly a whole number e.g. 3.0f. This obviously restricts the length of the X-Axis to figures that are multiples of the number of rectangles, times the length of each rectangle. This affects the area available to all the other elements of the application.\nIf the value of the increment is anything other that a whole number, small black lines appear between the rectangles which destroys the appearance and makes the data much harder to interpret. I realise why this is happening in principle - we cannot display a fraction of a pixel for instance, but how should this be done properly so that the rectangles will always match up exactly, regardless of the length of the axis? It would seem that Direct2D is perfect for this and should intrinsically cope with mapping fractional values to physical pixels exactly, but I don't know what the correct approach is beyond by current simplistic solution which is to keep the length of the x-axis fixed (meaning I cannot scale properly and other elements do not have enough space in the horizontal). </p>\n\n<p>Any pointers in the right direction would be much appreciated! </p>\n"}, {"tags": ["c++", "validation", "design-patterns"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1471433040, "post_id": 38995182, "comment_id": 65342225, "body": "Not a design pattern, but you may as well throw an exception when <code>inverse()</code> is called on a matrix with a 0 determinant. If the matrix is constructed with constant values (not the case in your rotation matrix with calls to <code>cos</code> and <code>sin</code>), you may compute and test the determinant at compile time"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1471434063, "post_id": 38995182, "comment_id": 65342893, "body": "Is your <code>Matrix</code> an immutable structure? If not, you&#39;re going to have problem with your code..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1471435862, "post_id": 38995182, "comment_id": 65344088, "body": "<code>optional</code> (<code>std::</code> in c++17, else <code>boost::</code>) would be a good replacement to <code>unique_ptr</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1292, "user_id": 3495086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001231896550/picture?type=large", "display_name": "Peter K", "link": "https://stackoverflow.com/users/3495086/peter-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1471433488, "creation_date": 1471433488, "answer_id": 38995439, "question_id": 38995182, "link": "https://stackoverflow.com/questions/38995182/does-a-design-pattern-exist-for-enforcing-rules-on-the-data-of-a-subclass/38995439#38995439", "title": "Does a design pattern exist for enforcing rules on the data of a subclass?", "body": "<p>These constraints should be enforced through the interface, in this case through the constructors and any potentially available mutators (setters). This is very much the pattern you describe.</p>\n\n<p>To prevent future developers from messing with the internals of your class through inheritance, make the relevant data members, i.e. those you want to protect, inaccessible by declaring them <code>private</code>.</p>\n\n<p>Since C++11 you can also declare your class <code>final</code>, so that nobody can inherit from it at all.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1471434125, "creation_date": 1471434125, "answer_id": 38995668, "question_id": 38995182, "link": "https://stackoverflow.com/questions/38995182/does-a-design-pattern-exist-for-enforcing-rules-on-the-data-of-a-subclass/38995668#38995668", "title": "Does a design pattern exist for enforcing rules on the data of a subclass?", "body": "<p><em>is there a way in C++ to prevent (or at least clearly signal to future developers) that the subclass MUST NOT introduce new state</em>? Unfortunately the answer is NO. All the hierarchies in any OO languages use that as a common rule: <em>a subclass can do all what its parent does and can add other methods and attributs</em></p>\n\n<p>The better you can do if you have special requirements, is to write a documentation and clearly state them there.</p>\n"}, {"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1471434765, "post_id": 38995736, "comment_id": 65343345, "body": "Wouldn&#39;t <code>private</code> inheritance be better in C++ for this kind of stuff?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1471435613, "post_id": 38995736, "comment_id": 65343919, "body": "@Holt:Unless you require (private) inheritance, I would prefer composition. See <a href=\"http://stackoverflow.com/questions/7209019/private-inheritance-vs-composition-when-to-use-which\">private-inheritance-vs-composition-when-to-use-which</a>"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1471434344, "creation_date": 1471434344, "answer_id": 38995736, "question_id": 38995182, "link": "https://stackoverflow.com/questions/38995182/does-a-design-pattern-exist-for-enforcing-rules-on-the-data-of-a-subclass/38995736#38995736", "title": "Does a design pattern exist for enforcing rules on the data of a subclass?", "body": "<p>Here, you hit the <a href=\"https://en.wikipedia.org/wiki/Circle-ellipse_problem\" rel=\"nofollow\">circle/ellipse problem</a>:</p>\n\n<p>Better to have to distinct classes  and use composition:</p>\n\n<pre><code>class RotationMatrix {\npublic:\n\n    static RotationMatrix getRotationAroundX(double angle) {\n        return { Matrix(1,          0,           0,\n                        0, cos(angle), -sin(angle),\n                        0, sin(angle), cos(angle))};\n     }\n\n     RotationMatrix inverse() const {\n        return {*Matrix::inverse().get()});\n     }\n\n     const Matrix3x3&amp; AsMatrix() const { return matrix; }\n\n private:\n     static RotationMatrix(const Matrix3x3&amp; matrix) : matrix(matrix) {}\n     Matrix3x3 matrix;\n};\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2606261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1Xk4.png?s=128&g=1", "display_name": "chipilov", "link": "https://stackoverflow.com/users/2606261/chipilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1471434344, "creation_date": 1471432728, "question_id": 38995182, "link": "https://stackoverflow.com/questions/38995182/does-a-design-pattern-exist-for-enforcing-rules-on-the-data-of-a-subclass", "title": "Does a design pattern exist for enforcing rules on the data of a subclass?", "body": "<p>Let's say a class represents a 3x3 matrix and takes 9 arbitrary numbers in its constructor and let that class have an inverse() method. Since NOT all matrices are invertible, the inverse() method returns an optional value (or a nullable pointer) which must be checked by callers at runtime.</p>\n\n<p>However, certain 3x3 matrices are ALWAYS invertible, as long as the values in the matrix follow certain rules, e.g. 3D rotation matrices. We can codify that with a subclass, which does NOT allow direct construction but is constructed by using some special rules, e.g the rotation angle around a Cartesian axis.</p>\n\n<p>The end result is this hierarchy, which should allow a client of the hierarchy to have compile time safety when using the subclass (e.g. a client is guaranteed that object.rotate(rotationMatrix.inverse()) will always work, assuming rotationMatrix is of type RotationMatrix):</p>\n\n<pre><code>class Matrix {\n public:\n  Matrix(double e_0_0, double e_0_1, double e_0_2,\n         double e_1_0, double e_1_1, double e_1_2,\n         double e_2_0, double e_2_1, double e_2_2) {\n      ...\n  }\n\n  std::unique_ptr&lt;Matrix3x3&gt; inverse() const {\n    if (isInvertible) {\n      return std::unique_ptr(new Matrix3x3(...));\n    }\n\n    return std::unique_ptr();\n  }\n}\n\nclass RotationMatrix : public Matrix3x3 {\n public:\n  static RotationMatrix getRotationAroundX(double angle) {\n    return asRotationMatrix(Matrix(1,          0,           0,\n                                   0, cos(angle), -sin(angle),\n                                   0, sin(angle), cos(angle)));\n  }\n\n  RotationMatrix inverse() const {\n    return asRotationMatrix(*Matrix::inverse().get()));\n  }\n\n private:\n  static const RotationMatrix3D&amp; asRotationMatrix(const Matrix3x3&amp; matrix) {\n    return static_cast&lt;const RotationMatrix3D&amp;&gt;(matrix);\n  }\n}\n</code></pre>\n\n<p>So to break down the original question:</p>\n\n<ul>\n<li>is there a pattern other than the one described above to achive this functionality?</li>\n<li>if no other pattern exists, is there a way in C++ to prevent (or at least clearly signal to future developers) that the subclass MUST NOT introduce new state or constructors in order to avoid casting issues (e.g. slicing, etc)?</li>\n</ul>\n"}, {"tags": ["c++", "string", "sizeof"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1471432575, "post_id": 38995059, "comment_id": 65341862, "body": "Are you sure you don&#39;t want <code>arr[0].length()</code> or <code>arr[0].size()</code> if you&#39;re actually after the number of characters in each string?"}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 0, "creation_date": 1471432754, "post_id": 38995059, "comment_id": 65342003, "body": "You could also use <a href=\"http://www.cplusplus.com/reference/cstring/strlen/\" rel=\"nofollow noreferrer\">strlen()</a>"}, {"owner": {"reputation": 99, "user_id": 4197811, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-iqh7uDcli9g/AAAAAAAAAAI/AAAAAAAAAMU/92e_PjDPrEE/photo.jpg?sz=128", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4197811/ankit-gupta"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1471432925, "post_id": 38995059, "comment_id": 65342149, "body": "@CoryKramer I tried it and now it shows their variable lengths. Thanks. But why do all strings are taking equal space here(8 Bytes). Shouldn&#39;t the larger string be taking more space? Any ideas here??"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1471433036, "post_id": 38995059, "comment_id": 65342221, "body": "Please read the <a href=\"https://stackoverflow.com/questions/34560502/why-is-sizeofstdstring-only-eight-bytes\">duplicate link</a> posted above. The size of a <code>std::string</code> does not directly include the size of the underlying character array, rather simply the pointer to that array."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4197811, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-iqh7uDcli9g/AAAAAAAAAAI/AAAAAAAAAMU/92e_PjDPrEE/photo.jpg?sz=128", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4197811/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1471432837, "post_id": 38995115, "comment_id": 65342066, "body": "but even if increase the length of any string to, say 40, it still is showing its size as 8. shouldn&#39;t it increase if the length is increased as it is now taking more space?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1471432879, "post_id": 38995115, "comment_id": 65342105, "body": "Nope. The <code>std::string</code> structure probably has a <i>pointer</i> to the data buffer, and the size of a pointer is not dependent on the buffer that it points to."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1471432570, "creation_date": 1471432570, "answer_id": 38995115, "question_id": 38995059, "link": "https://stackoverflow.com/questions/38995059/why-each-string-of-a-string-array-in-c-has-the-same-size/38995115#38995115", "title": "Why each string of a string array in C++ has the same size?", "body": "<p><code>sizeof(arr[0])</code> gives you the size in bytes of the <code>std::string</code> <strong>object</strong>, based on its static type.</p>\n\n<p>If you want to know the length of the string the object holds, use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/size\" rel=\"nofollow\"><code>std::string::size()</code></a>, like this <code>arr[0].size()</code>;</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 99, "user_id": 4197811, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-iqh7uDcli9g/AAAAAAAAAAI/AAAAAAAAAMU/92e_PjDPrEE/photo.jpg?sz=128", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4197811/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1471433155, "post_id": 38995130, "comment_id": 65342303, "body": "@AnkitGupta: Don&#39;t forget to accept this answer if you&#39;ve found it to be the most useful (which, IMHO, it is)."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1471432599, "creation_date": 1471432599, "answer_id": 38995130, "question_id": 38995059, "link": "https://stackoverflow.com/questions/38995059/why-each-string-of-a-string-array-in-c-has-the-same-size/38995130#38995130", "title": "Why each string of a string array in C++ has the same size?", "body": "<p><code>sizeof(x)</code> gives you the size of object <code>x</code>. That has nothing to do with the size of resources potentially managed by the object. All this tells you that a <code>std::string</code> object consists of 8 bytes; most probably two pointers.</p>\n\n<p>If you want to learn the length of the string, use the string's <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/size\" rel=\"nofollow\">member function <code>size</code></a>:</p>\n\n<pre><code>arr[0].size()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1471432688, "creation_date": 1471432688, "answer_id": 38995164, "question_id": 38995059, "link": "https://stackoverflow.com/questions/38995059/why-each-string-of-a-string-array-in-c-has-the-same-size/38995164#38995164", "title": "Why each string of a string array in C++ has the same size?", "body": "<p><code>sizeof T</code> is a <em>compile-time evaluable</em> operator that returns the size in bytes of the type <code>T</code>.</p>\n\n<p>It does <em>not</em> return the length of the string contained in <code>std::string</code>. If you want that then use <code>size()</code> or <code>length()</code>.</p>\n"}], "owner": {"reputation": 99, "user_id": 4197811, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-iqh7uDcli9g/AAAAAAAAAAI/AAAAAAAAAMU/92e_PjDPrEE/photo.jpg?sz=128", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/4197811/ankit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1471432686, "answer_count": 3, "score": -2, "last_activity_date": 1471432858, "creation_date": 1471432434, "last_edit_date": 1471432858, "question_id": 38995059, "link": "https://stackoverflow.com/questions/38995059/why-each-string-of-a-string-array-in-c-has-the-same-size", "closed_reason": "Duplicate", "title": "Why each string of a string array in C++ has the same size?", "body": "<p>I have an array of strings and I want to know the length of each of its constituent strings. All the strings are of different lengths but the compiler shows all of them to be of equal size. Anyone can explain why is it happening?\nHere's the code:</p>\n\n<pre><code>string arr[] = {\"ACACACZCZCZC\", \"LOQWABCB\", \"PTUTCFEBC\"};\nint n = sizeof(arr)/sizeof(arr[0]);\ncout&lt;&lt;\"number of strings is \"&lt;&lt;n&lt;&lt;endl;\ncout&lt;&lt;\"individual size of strings: str1 = \"&lt;&lt;sizeof(arr[0])&lt;&lt;\", str2 = \"&lt;&lt;sizeof(arr[1])&lt;&lt;\", str3 = \"&lt;&lt;sizeof(arr[2])&lt;&lt;endl;\n</code></pre>\n\n<p>and this results in size of all strings as 8. </p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 1, "creation_date": 1471432363, "post_id": 38994998, "comment_id": 65341689, "body": "How do you measure time? Consider measuring processor time if you&#39;re measuring astronomical since the latter depends on the system load"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1471432369, "post_id": 38994998, "comment_id": 65341695, "body": "Time measurement resolution is limited by scheduling and other factors.  The shorter the thread run time, the more inaccurate your timing will be.  I would take an average of many runs."}, {"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "reply_to_user": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 0, "creation_date": 1471432536, "post_id": 38994998, "comment_id": 65341835, "body": "@alexeykuzmin0  same as in the answer of the question I linked I copy paste. Using QueryPerformanceCounter."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1471432933, "post_id": 38994998, "comment_id": 65342156, "body": "You&#39;re measuring &quot;wall-clock&quot; time, not the time spent in your own process."}, {"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1471433195, "post_id": 38994998, "comment_id": 65342335, "body": "@molbdnilo How should I measure the time spent in my own process ?"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1471513874, "post_id": 38994998, "comment_id": 65380656, "body": "30% variation is not a lot, but a variation from 70 seconds to 100 seconds is gigantic. It means there is room from improvement in whatever thread1 is doing."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 0, "creation_date": 1471432795, "post_id": 38995074, "comment_id": 65342032, "body": "so what your saying is the there is no way I could no exactly how much time it takes to execute my program ? Because in my case it&#39;s really important to know the exact execution time. Thanks"}, {"owner": {"reputation": 6786, "user_id": 1702990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dl7ml.jpg?s=128&g=1", "display_name": "Sinkingpoint", "link": "https://stackoverflow.com/users/1702990/sinkingpoint"}, "reply_to_user": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 1, "creation_date": 1471433021, "post_id": 38995074, "comment_id": 65342211, "body": "There&#39;s no such thing as an &quot;exact execution time&quot; in the general case. You can do multiple runs and take an average, or you can take the time of a single run, but there&#39;s no way to say &quot;This program will take exactly n seconds to run&quot; in the general case."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 0, "creation_date": 1471513700, "post_id": 38995074, "comment_id": 65380552, "body": "@userDS <i>exact execution time</i> is the property of what you call real time operating systems. Windows is not one of them. That said a 30s variation is questionable, except if you access slow resources like disk or network. So investigate. there is something fishy."}, {"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1471514156, "post_id": 38995074, "comment_id": 65380856, "body": "@UmNyobe I write to the disk every time."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 0, "creation_date": 1471514252, "post_id": 38995074, "comment_id": 65380921, "body": "@userDS there you have it. you need all the thread to send data to a single thread which is charge of writing (multiple producer, single consumer). see <a href=\"http://stackoverflow.com/questions/10254147/writing-data-to-disk-in-parallel\" title=\"writing data to disk in parallel\">stackoverflow.com/questions/10254147/&hellip;</a>"}, {"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1471514575, "post_id": 38995074, "comment_id": 65381109, "body": "@UmNyobe you are right thanks. Is there anything that I can do to improve my performance. For ex have one more disk, or write to an external disk, anything ?"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 0, "creation_date": 1471514729, "post_id": 38995074, "comment_id": 65381212, "body": "@userDS multiple thread compute, only one thread write to <b><i>one</i></b> faster disk."}], "tags": [], "owner": {"reputation": 6786, "user_id": 1702990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dl7ml.jpg?s=128&g=1", "display_name": "Sinkingpoint", "link": "https://stackoverflow.com/users/1702990/sinkingpoint"}, "is_accepted": false, "score": 0, "last_activity_date": 1471432487, "creation_date": 1471432487, "answer_id": 38995074, "question_id": 38994998, "link": "https://stackoverflow.com/questions/38994998/execution-time-of-thread-changes/38995074#38995074", "title": "Execution time of thread changes", "body": "<p>Many things can affect an execution time, from system load to memory usage to the stars aligning. You don't specify the order of your execution time, but for lower values a 30% deviation is certainly not unheard of. The main take away is that an execution time on its own basically tells us nothing about the system. </p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "edited": false, "score": 0, "creation_date": 1471503161, "post_id": 38995485, "comment_id": 65374513, "body": "What should I pass as HANDLE   ProcessHandle ? How can I create this handle object ? Thanks"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1471524965, "last_edit_date": 1471524965, "creation_date": 1471433604, "answer_id": 38995485, "question_id": 38994998, "link": "https://stackoverflow.com/questions/38994998/execution-time-of-thread-changes/38995485#38995485", "title": "Execution time of thread changes", "body": "<p><code>QueryPerformanceCounter</code> is a system-wide counter, so your result depends on system load and the particulars of the process scheduling.</p>\n\n<p>You could use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684929(v=vs.85).aspx\" rel=\"nofollow\"><code>QueryProcessCycleTime</code></a>, which returns</p>\n\n<blockquote>\n  <p>The number of CPU clock cycles used by the threads of the process. This value includes cycles spent in both user mode and kernel mode.</p>\n</blockquote>\n\n<p>You can get a handle to the current process using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683179(v=vs.85).aspx\" rel=\"nofollow\"><code>GetCurrentProcess</code></a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 6634077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f7554bb5da7de28256fd026fc60543?s=128&d=identicon&r=PG&f=1", "display_name": "userDS", "link": "https://stackoverflow.com/users/6634077/userds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471524965, "creation_date": 1471432241, "last_edit_date": 1495535319, "question_id": 38994998, "link": "https://stackoverflow.com/questions/38994998/execution-time-of-thread-changes", "title": "Execution time of thread changes", "body": "<p>I'm using this method: <a href=\"https://stackoverflow.com/questions/15720542/measure-execution-time-in-c-on-windows\">Measure execution time in C (on Windows)</a> to measure the execution time of all threads. I'm on Windows and I'm using VC++.</p>\n\n<p>Something like this:</p>\n\n<pre><code>//initialize start, end, frequency\nstd::thread thread1(...); \n// and so on I initialise all the threads\n\nthread1.join();\n//join all threads\n\n//time = (start-end)/frequency\nprintf(time);\n</code></pre>\n\n<p>I run it multiple times and I often get different execution time. I have like 30% variation.(which means I get values between 100s and 70s). I don't understand why ? 30% is not I small variation.</p>\n\n<p>Thanks</p>\n"}]