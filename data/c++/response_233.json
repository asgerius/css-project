[{"tags": ["c++", "arrays", "stack"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1561594720, "last_edit_date": 1561594720, "creation_date": 1561594034, "answer_id": 56782365, "question_id": 56782299, "link": "https://stackoverflow.com/questions/56782299/no-matching-function-call-no-known-conversion/56782365#56782365", "title": "no matching function call, no known conversion", "body": "<p>The error message is self-explanatory.  There is no overloaded version of <code>calc()</code> that matches the parameters you are passing it.  You declared <code>calc()</code> as:</p>\n\n<pre><code>void calc(const string &amp;input, int &amp;stack)\n</code></pre>\n\n<p>The error message is saying that you are passing in a <code>MyStack*</code> pointer where an <code>int</code> is expected instead.</p>\n\n<pre><code>stack.calc(input, &amp;stack); // &lt;-- stack is a MyStack, so &amp;stack is a MyStack*\n</code></pre>\n\n<p>For that matter, your implementation of <code>calc()</code> doesn't even <em>USE</em> the <code>stack</code> parameter at all!  So just remove it altogether:</p>\n\n<pre><code>void calc(const string &amp;input)\n\n...\n\nstack.calc(input);\n</code></pre>\n\n<p>There is no reason for <code>main()</code> to pass in its <code>stack</code> object as a parameter when <code>calc()</code> already has access to the object via its implicit <code>this</code> parameter.</p>\n\n<p>Also, the <code>x</code> and <code>y</code> local variables inside of <code>calc()</code> are not being initialized with any values before they are used to calculate the <code>result</code>.  You probably meant to *parse<code>the</code>input` to extract the values before using them.</p>\n"}], "owner": {"reputation": 39, "user_id": 10158248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dfb7b46b89375b263af55005c77883?s=128&d=identicon&r=PG&f=1", "display_name": "jdgo12", "link": "https://stackoverflow.com/users/10158248/jdgo12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561610817, "creation_date": 1561593425, "last_edit_date": 1561610817, "question_id": 56782299, "link": "https://stackoverflow.com/questions/56782299/no-matching-function-call-no-known-conversion", "title": "no matching function call, no known conversion", "body": "<p>I'm trying to implement a stack using an array. I'm receiving is in main while trying to pass the stack into an argument after the else statement. What am I misunderstanding? Any help would be appreciated! </p>\n\n<p>Error is in main at <code>stack(input, &amp;stack)</code></p>\n\n<blockquote>\n  <p>No matching function call to \u2018calc(std::string&amp;, MyStack*)  </p>\n  \n  <p>No known conversion for argument 2 from \u2018Stack*\u2019 to \u2018int&amp;\u2019.</p>\n</blockquote>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1561593449, "post_id": 56782248, "comment_id": 100119392, "body": "As described in the <a href=\"https://en.cppreference.com/w/c/string/byte/strncpy\" rel=\"nofollow noreferrer\">documentation</a>, the 3rd argument of <code>strncpy</code> means &quot;maximum number of characters to copy&quot;, as in, the maximum size, that can fit inside the <code>pp</code> buffer. In your case, it doesn&#39;t, necessarily, mean that, hence the diagnostic (technically, such invocation would function identically to <code>strcpy</code>). Without <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> one cannot provide detailed answer, as it is unclear how <code>pp</code> is allocated."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1561594926, "post_id": 56782248, "comment_id": 100119630, "body": "I don&#39;t understand why you are using <code>strncpy</code> at all here, unless it&#39;s some brainless project requirement imposed on you from above. <code>len=strlen(src); strncpy(dest,src,len+1);</code> is equivalent to <code>strcpy (dest.src);</code>, except that <code>strncpy</code> pads with nulls."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1561597627, "post_id": 56782248, "comment_id": 100120041, "body": "@TonyK in this case it&#39;s exactly equivalent due to the length given"}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1561597801, "post_id": 56782248, "comment_id": 100120062, "body": "@M.M: in this case, yes. But my statement was more general, and I had to add that caveat to preempt the language lawyers."}], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 3586940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c9c03c81770b24d1a922d741af79c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3586940", "link": "https://stackoverflow.com/users/3586940/user3586940"}, "edited": false, "score": 9, "creation_date": 1561597849, "post_id": 56782476, "comment_id": 100120071, "body": "for anyone reading this in the future you (depending on your use case) may be able to just switch strcpy to memcpy to kill the compile warning."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 715, "user_id": 3586940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c9c03c81770b24d1a922d741af79c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3586940", "link": "https://stackoverflow.com/users/3586940/user3586940"}, "edited": false, "score": 1, "creation_date": 1561598690, "post_id": 56782476, "comment_id": 100120194, "body": "@user3586940: What&#39;s wrong with <code>strcpy</code>, for goodness&#39; sake?"}, {"owner": {"reputation": 715, "user_id": 3586940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c9c03c81770b24d1a922d741af79c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3586940", "link": "https://stackoverflow.com/users/3586940/user3586940"}, "edited": false, "score": 2, "creation_date": 1561599353, "post_id": 56782476, "comment_id": 100120291, "body": "If you know the size of the buffer in advance, memcpy would be faster. If you didn&#39;t know the size of the buffer, then this error would never happen. Hence in this case, I think memcpy is the better solution to this compiler warning."}], "tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": true, "score": 6, "last_activity_date": 1561595264, "creation_date": 1561595264, "answer_id": 56782476, "question_id": 56782248, "link": "https://stackoverflow.com/questions/56782248/gcc-specified-bound-depends-on-the-length-of-the-source-argument/56782476#56782476", "title": "GCC: Specified bound depends on the length of the source argument", "body": "<p>The point is that the length bound passed to <code>strncpy</code> should depend on the size of the destination argument, not the source argument. Otherwise, what is it even for? The compiler correctly recognises that there is no point to using <code>strncpy</code> here, and gives you an informative error message to that effect.</p>\n"}], "owner": {"reputation": 715, "user_id": 3586940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c9c03c81770b24d1a922d741af79c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3586940", "link": "https://stackoverflow.com/users/3586940/user3586940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5347, "favorite_count": 0, "accepted_answer_id": 56782476, "answer_count": 1, "score": 6, "last_activity_date": 1584348752, "creation_date": 1561592990, "last_edit_date": 1561593061, "question_id": 56782248, "link": "https://stackoverflow.com/questions/56782248/gcc-specified-bound-depends-on-the-length-of-the-source-argument", "title": "GCC: Specified bound depends on the length of the source argument", "body": "<p>The following code:</p>\n\n<pre><code>while (node)\n{\n    if (node-&gt;previous== NULL) break;\n    struct Node* prevNode = node-&gt;previous;\n    len = strlen(prevNode-&gt;entity);\n    //pp is a char* fyi\n    pp-=len;\n    strncpy(pp, prevNode-&gt;entity, len+1);\n    *(--pp) = '/';\n    node = prevNode;\n}\n</code></pre>\n\n<p>Generates the following warning/error in GCC (I treat all warnings as errors):</p>\n\n<pre><code>../someFile.C:1116:24: error: 'char* strncpy(char*, const char*, size_t)' specified bound depends on the length of the source argument [-Werror=stringop-overflow=]\n 1116 |                 strncpy(pp, prevNode-&gt;entity, len+1);\n      |                 ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n../someFile.C:1114:29: note: length computed here\n 1114 |                 len = strlen(prevNode-&gt;entity);\n      |                       ~~~~~~^~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>Why is GCC giving me a warning? What is wrong with relieing on the size of a source argument for the buffer size? Can someone give an example of what issues this may cause? Code does what it should I'm just curious why I'm getting a warning. </p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1561593639, "post_id": 56782244, "comment_id": 100119416, "body": "What errors do you get? Please post the exact error message. Also, I am not clear what you mean by &quot;removing&quot; a set of pixels; copy then set them to zero in the original image? Suppress printing in the loop above?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1561594501, "post_id": 56782244, "comment_id": 100119564, "body": "How big is the frame? Where are the pixels in the frame? What do you mean by <i>remove</i>?"}, {"owner": {"reputation": 1609, "user_id": 11530294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wmx8FmXvssw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddovKe67tDYNr2B-3B5bFJOj8cZg/mo/photo.jpg?sz=128", "display_name": "Dr Yuan Shenghai", "link": "https://stackoverflow.com/users/11530294/dr-yuan-shenghai"}, "edited": false, "score": 0, "creation_date": 1561618614, "post_id": 56782244, "comment_id": 100125163, "body": "whats size of frame, channel of frame? remove as in mask the original frame and save the frame(large)? or save the masked content(small)?"}], "owner": {"reputation": 11, "user_id": 7608142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668edfb4e73f416c31cae8c8c65d8bea?s=128&d=identicon&r=PG&f=1", "display_name": "TannnLeeee", "link": "https://stackoverflow.com/users/7608142/tannnleeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561593472, "creation_date": 1561592953, "last_edit_date": 1561593472, "question_id": 56782244, "link": "https://stackoverflow.com/questions/56782244/how-can-i-remove-a-set-of-pixels-from-a-video-with-c", "title": "How can I remove a set of pixels from a video with c++?", "body": "<p>I have code written that will take a video and output each frames pixel values to a text file, but what I\u2019m having a hard time figuring out is out is how to remove a set of pixels (16x16 pixels section) of a video THEN output to a text file. I feel like I\u2019m missing 1-3 lines of code that will do this.</p>\n\n<p>Everything I\u2019ve tried doesn\u2019t compile.</p>\n\n<pre><code>\u200b//get every data value per frame\n\u200b\u200bfor (int r = 0; r &lt; frame.rows; r++)\n\u200b\u200b{\n    for (int c = 0; c &lt; frame.cols; c++)\n    {\n   \u200b\u200b\u200b\u200b     grayValue = frame.at&lt;uchar&gt;(r, c);\n        output &lt;&lt; grayValue &lt;&lt; \" \";\n    }\n  \u200b\u200b\u200b  output &lt;&lt; endl &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I get errors for everything I do. Something needs to be added to this loop to remove a 16x16 px of this video before it exports</p>\n"}, {"tags": ["c++", "file", "loops", "while-loop", "text-files"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1561592814, "creation_date": 1561592814, "answer_id": 56782233, "question_id": 56782183, "link": "https://stackoverflow.com/questions/56782183/why-does-the-second-while-loop-in-my-program-not-work-when-there-is-a-while-loop/56782233#56782233", "title": "Why does the second while loop in my program not work when there is a while loop before it?", "body": "<p>So you consumed all the lines from a file stream.</p>\n\n<p>Then you seeked the stream back to the beginning of the file.</p>\n\n<p>And you started consuming lines again.</p>\n\n<p>What you didn't do is clear the \"end of file\" flag from the stream that was set when it reached the end the first time. With that flag still in place, the stream's useless.</p>\n\n<p>Add <code>file.clear()</code> before <code>file.seekg(...)</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 11705687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c08870e393b7e0d8c82fa7a49996433?s=128&d=identicon&r=PG&f=1", "display_name": "user11705687", "link": "https://stackoverflow.com/users/11705687/user11705687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56782233, "answer_count": 1, "score": 0, "last_activity_date": 1561592814, "creation_date": 1561592226, "question_id": 56782183, "link": "https://stackoverflow.com/questions/56782183/why-does-the-second-while-loop-in-my-program-not-work-when-there-is-a-while-loop", "title": "Why does the second while loop in my program not work when there is a while loop before it?", "body": "<p>Both of the while loops work individually. However, the second while loop in my code won't work when the while loop above it is present. I need both while loops to work together.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main(){\n    string line, line1, line2;\n    int count = 0;\n    int track = 0;\n    int stop;\n    ifstream file (\"ai.txt\");\n    while (getline(file, line2)){\n        count++;\n    }\n    file.seekg (0L, ios :: beg);\n    stop = count - 10;\n    while (getline(file, line)){\n        track++;\n        if (track &gt;= stop){\n            for (int num = 1; num &lt;=10; num++){\n                getline(file,line1);\n                cout &lt;&lt; line1 &lt;&lt; endl;   \n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>The code should output the last ten lines of any text file.</p>\n"}, {"tags": ["c++", "assembly", "compiler-optimization", "noexcept"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1561592738, "post_id": 56782171, "comment_id": 100119270, "body": "In certain cases, it can be a massive change, such as with <code>std::vector&lt;MyType&gt;</code> where if <code>MyType</code>&#39;s move constructor is not <code>noexcept</code>, <code>std::vector</code> has to copy the elements when it resizes, rather than just move them. In other cases, as you&#39;ve seen, it can make no difference. In short, <code>noexcept</code> doesn&#39;t &quot;change the assembly&quot;, but it provides semantic meaning that library code can rely on, which can eventually cause significant changes in the assembly, or no changes in the assembly."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 5, "creation_date": 1561593068, "post_id": 56782171, "comment_id": 100119318, "body": "The body of a <code>noexcept</code> function may also be compiled in a much more optimized way, since local variables won&#39;t need to be destroyed correctly in the case of an exception. See here: <a href=\"https://stackoverflow.com/questions/26079903/noexcept-stack-unwinding-and-performance\" title=\"noexcept stack unwinding and performance\">stackoverflow.com/questions/26079903/&hellip;</a>"}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1561601314, "post_id": 56782171, "comment_id": 100120594, "body": "Your example is too simple, the compiler knew already it is noexcept, without you telling it. Use a more complex example, for example calling a further function that is in another code file, so the compiler cannot see it is for sure noexcept."}, {"owner": {"reputation": 14659, "user_id": 2705055, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b1d5dfaf239229501a184c8858fbc954?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Rosenau", "link": "https://stackoverflow.com/users/2705055/martin-rosenau"}, "edited": false, "score": 1, "creation_date": 1561610193, "post_id": 56782171, "comment_id": 100122227, "body": "Of course the <code>noexcept</code> statement might also result in a different assembly code for the <b>calling</b> function (especially if that function contains a <code>try</code>-<code>catch</code> statement)."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1561644979, "post_id": 56782171, "comment_id": 100140576, "body": "<code>noexcept</code> really only makes a difference when A) there are destructors to run so there are non-trivial items to destruct B) exceptions <i>could</i> be thrown and thus the compiler would have to handle those cases."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 2, "last_activity_date": 1561644677, "creation_date": 1561644677, "answer_id": 56792966, "question_id": 56782171, "link": "https://stackoverflow.com/questions/56782171/how-does-noexcept-in-c-change-the-assembly/56792966#56792966", "title": "How does noexcept in C++ change the assembly?", "body": "<p>Pretty simple examples <a href=\"https://www.godbolt.org/z/MsmafZ\" rel=\"nofollow noreferrer\">can be constructed</a> that involve destructors directly rather than introspection on <code>noexcept</code> status:</p>\n\n<pre><code>void a(int);\nvoid b() noexcept;\nvoid c(int i) {\n  struct A {\n    int i;\n    ~A() {a(i);}\n  } a={i};\n  b();\n  a.i=1;\n}\n</code></pre>\n\n<p>Here, the <code>noexcept</code> allows the initialization of <code>a</code> in the <strong>caller</strong> to be ignored, since the destructor cannot observe it.</p>\n\n<pre><code>struct B {~B();};\nvoid f();\nvoid g() noexcept {\n  B b1;\n  f();\n  B b2;\n}\n</code></pre>\n\n<p>Here, the <code>noexcept</code> allows the omission of frame information needed in case the <strong>callee</strong> throws.  This depends on the (very common) decision to not unwind the stack when calling <code>std::terminate</code>.</p>\n"}], "owner": {"reputation": 5882, "user_id": 1749675, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e281d78eedf8cad94cbe3899ef91dc4?s=128&d=identicon&r=PG", "display_name": "Jonas Stein", "link": "https://stackoverflow.com/users/1749675/jonas-stein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 1, "accepted_answer_id": 56792966, "answer_count": 1, "score": 3, "last_activity_date": 1561644677, "creation_date": 1561592149, "question_id": 56782171, "link": "https://stackoverflow.com/questions/56782171/how-does-noexcept-in-c-change-the-assembly", "title": "How does noexcept in C++ change the assembly?", "body": "<p>How does noexcept in C++ change the assembly? I tried a bit with small functions, in godbolt, but <a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;float+pi()+%0A//noexcept+//+no+difference%0A%7B+return+3.14%3B+%7D%0A%0Aint+main()%7B%0A++++float+b%7B0%7D%3B%0A++++b+%3D+pi()%3B%0A++++return+0%3B%0A%7D&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g83,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),lang:c%2B%2B,libs:!(),options:&#39;&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+8.3+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">the assembly did not change</a>.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>float pi() \n//noexcept // no difference\n{ return 3.14; }\n\nint main(){\n    float b{0};\n    b = pi();\n    return 0;\n}\n</code></pre>\n\n<p>I am looking for a minimal working example, where I can see a change in the assembly due to <code>noexcept</code>.</p>\n"}, {"tags": ["c++", "linux", "terminal", "file-descriptor", "vt100"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1561593796, "post_id": 56782168, "comment_id": 100119444, "body": "Why are you using <code>read</code> instead of <code>fgetc</code>? <code>read</code> with a nonblocking file descriptor will issue the error <code>EAGAIN</code> (either or <code>EWOULDBLOCK</code>) if you are reading from a file other than a socket and the read would block. (which given it would be attempting to read <code>sizeof(input_event)</code> bytes seems likely). I would have to dig further to determine the exact behavior as you have the terminal and file descriptor set. All can be avoided simply by reading with <code>fgetc</code> in non-cannonical mode."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1561619030, "post_id": 56782168, "comment_id": 100125362, "body": "I can&#39;t tell from your question what your desired outcome is: a) discarding typed-in characters, or b) immediately displaying typed-in characters. If b), how does your program attempt to display them?"}, {"owner": {"reputation": 177, "user_id": 6722680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WMnO2.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6722680/michael"}, "reply_to_user": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1561633830, "post_id": 56782168, "comment_id": 100133660, "body": "fgetc seems to work but i cant handle specials keys like &#39;ESC&#39; with it, besides there is no way of checking if a certain character is pressed or not.  @Armali its a) discarding typed-in characters. The program should not display typed keys thats why i turned of echoing but in the background the keys get buffered. and when the program exits those characters got printed. like i have to flush some buffers befor exit."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1561637290, "last_edit_date": 1561637290, "creation_date": 1561636832, "answer_id": 56790518, "question_id": 56782168, "link": "https://stackoverflow.com/questions/56782168/terminal-keeps-buffering-pressed-keys/56790518#56790518", "title": "Terminal keeps buffering pressed keys", "body": "<blockquote>\n  <p>The program should not display typed keys thats why i turned of echoing but in the background the keys get buffered. and when the program exits those characters got printed. like i have to flush some buffers befor exit.</p>\n</blockquote>\n\n<p>This can be accomplished by calling</p>\n\n<pre><code>    tcflush(STDIN_FILENO, TCIFLUSH);\n</code></pre>\n\n<p>just before exiting; see <a href=\"https://linux.die.net/man/3/tcflush\" rel=\"nofollow noreferrer\">tcflush(3) - Linux man page</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 6722680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WMnO2.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6722680/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1561638059, "creation_date": 1561638059, "answer_id": 56790884, "question_id": 56782168, "link": "https://stackoverflow.com/questions/56782168/terminal-keeps-buffering-pressed-keys/56790884#56790884", "title": "Terminal keeps buffering pressed keys", "body": "<p>I've just solve my problem. (<a href=\"https://unix.stackexchange.com/questions/126974/where-do-i-find-ioctl-eviocgrab-documented\">https://unix.stackexchange.com/questions/126974/where-do-i-find-ioctl-eviocgrab-documented</a>)</p>\n\n<p>So I am grabbing all events immediately after my program starts including ENTER</p>\n\n<p>Example: sudo ./clac ENTER</p>\n\n<p>The solution was to add 1000 milliseconds delay at the start and then GRAB the fd events with</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::this_thread::sleep_for(std::chrono::seconds(1));\n\nif (ioctl(kfd, EVIOCGRAB, FD_GRAB) == -1)\n    throw std::runtime_error(\"can not set keyboard fd grab\");\n</code></pre>\n\n<p>And when the program exits UNGRAB the fd with</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (ioctl(kfd, EVIOCGRAB, FD_UNGRAB) == -1)\n    throw std::runtime_error(\"can not set keyboard fd ungrab\");\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 6722680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WMnO2.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6722680/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561638059, "creation_date": 1561592127, "last_edit_date": 1561635260, "question_id": 56782168, "link": "https://stackoverflow.com/questions/56782168/terminal-keeps-buffering-pressed-keys", "title": "Terminal keeps buffering pressed keys", "body": "<p>I'm writing a VT100 terminal engine but input handling is somehow tricky.\nFirst I initialize my tty with no echoing.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>static void init_tty() {\n    if (tcgetattr(STDIN_FILENO, &amp;ctty) != 0)\n        throw std::runtime_error(\"can not get tty attribute\");\n\n    ctty.c_lflag &amp;= ~(FLAG(ICANON) | FLAG(ECHO) | FLAG(ISIG));\n\n    if (tcsetattr(STDIN_FILENO, TCSANOW, &amp;ctty) != 0)\n        throw std::runtime_error(\"can not set tty attribute\");\n}\n</code></pre>\n\n<p>Next I initialize a non-blocking keyboard file descriptor.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>static void init_keyboard(const char *device) {\n    if ((kfd = open(device, FLAG(O_RDONLY) | FLAG(O_SYNC))) == -1)\n        throw std::runtime_error(\"can not open keyboard fd\");\n\n    unsigned flags = fcntl(kfd, F_GETFL, 0);\n\n    flags |= FLAG(O_NONBLOCK);\n\n    if (fcntl(kfd, F_SETFL, flags) == -1)\n        throw std::runtime_error(\"can not set keyboard fd flags\");\n}\n</code></pre>\n\n<p>So far so good. The main loop is just polling events and will break if pressing ESC.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    while (true) {\n        read(kfd, evt, sizeof(input_event));\n\n        if (evt-&gt;type == EV_KEY &amp;&amp; evt-&gt;value == 1 &amp;&amp; evt-&gt;code == KEY_ESC)\n            break;\n    }\n}\n</code></pre>\n\n<p>So I type some characters. Meanwhile my terminal is buffering all characters that I am typing in. After the program exits all characters got displayed.</p>\n\n<p>So here my question: How can I disable terminal output stream buffering while my program is running?</p>\n\n<p>Here is a GIF to illustrate the problem.</p>\n\n<p>Steps:</p>\n\n<ul>\n<li>sudo ./clac</li>\n<li>engine is running but not echoing; typing some characters</li>\n<li>pressing ESC</li>\n<li>typed in characters got displayed; program exit</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/HR6zw.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HR6zw.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "templates", "c++14"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 2, "creation_date": 1561590766, "post_id": 56781981, "comment_id": 100118873, "body": "Why are you taking the address of fact&lt;12&gt; then subtracting i and dereferencing the resulting pointer?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1561590803, "post_id": 56781981, "comment_id": 100118886, "body": "It is not clear what your code is supposed to accomplish, or what &quot;of course i have error&quot; actually results in. Please explain in full sentences what you want to do, and what the problem is."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561590838, "post_id": 56781981, "comment_id": 100118895, "body": "Are you trying to hack your program with pointer arithmetic to &quot;navigate&quot; independent globals?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1561591132, "post_id": 56781981, "comment_id": 100118954, "body": "Turn on the optimizer and watch the smurf hit the fan. Example: <a href=\"https://godbolt.org/z/Rs5H3I\" rel=\"nofollow noreferrer\">godbolt.org/z/Rs5H3I</a>"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1561593327, "post_id": 56781981, "comment_id": 100119364, "body": "Unless you can somehow prove that there exist <code>int</code>s in memory from <code>&amp;fact&lt;12&gt;-11</code> to <code>&amp;fact&lt;12&gt;</code>, then you should assume that you have UB when you dereference such a &quot;wild&quot; pointer."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1561605296, "post_id": 56781981, "comment_id": 100121287, "body": "The &quot;working&quot; approach is certainly UB."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1561591411, "post_id": 56782061, "comment_id": 100119000, "body": "Doing <code>((std::cout &lt;&lt; fact&lt;Is&gt; &lt;&lt; std::endl), ...)</code> inside <code>print_fact</code> also works."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1561591478, "post_id": 56782061, "comment_id": 100119013, "body": "@0x499602D2: Folding expression is C++17, OP tagged C++14."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1561605378, "post_id": 56782061, "comment_id": 100121300, "body": "@0x499602D2 In C++14 you can use the initializer list hack."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1561591270, "last_edit_date": 1561591270, "creation_date": 1561591128, "answer_id": 56782061, "question_id": 56781981, "link": "https://stackoverflow.com/questions/56781981/c-variable-template-this-is-ub/56782061#56782061", "title": "C++ Variable Template. This is UB?", "body": "<p>It is UB. Your pointer arithmetic \"works by chance\" (with UB anything can happen).</p>\n\n<p>You might do, instead, for example:</p>\n\n<pre><code>template &lt;std::size_t ... Is&gt;\nvoid print_fact(std::index_sequence&lt;Is...&gt;)\n{\n    for (int res : {fact&lt;Is&gt;...}) {\n        std::cout &lt;&lt; res &lt;&lt; std::endl;\n    }\n}\n\nint main()\n{\n    print_fact(std::make_index_sequence&lt;12&gt;());\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11214554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46fec93a010e9d65b26b6a1ded54bac5?s=128&d=identicon&r=PG&f=1", "display_name": "gobypin", "link": "https://stackoverflow.com/users/11214554/gobypin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1561594017, "creation_date": 1561590451, "last_edit_date": 1561594017, "question_id": 56781981, "link": "https://stackoverflow.com/questions/56781981/c-variable-template-this-is-ub", "title": "C++ Variable Template. This is UB?", "body": "<p>I created a simple C++14 variable template that calculates factorials (just for learning). Then I want print the first 12 factorials.</p>\n\n<pre><code>template &lt;int n&gt; const int fact = n * fact&lt;n - 1&gt;;\ntemplate &lt;&gt; const int fact&lt;0&gt; = 1;\n</code></pre>\n\n<p>If I replace <code>fact&lt;12&gt;</code> with <code>fact&lt;i&gt;</code> in following snippet, I get an error, because <code>i</code> is not constant.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{   \n    for(int i = 0; i &lt; 12; i++){\n        std::cout &lt;&lt; fact&lt;12&gt; &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>But when I change it to this, I get the expected result.</p>\n\n<pre><code>int main()\n{   \n    for(int i = 0; i &lt; 12; i++){\n        std::cout &lt;&lt; *(&amp;fact&lt;12&gt; - i) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Is this Undefined Behavior? It's working as expected on GCC 8.3. <a href=\"http://coliru.stacked-crooked.com/a/b6e044342dd54188\" rel=\"nofollow noreferrer\">Live example here</a></p>\n"}, {"tags": ["c++", "multithreading", "c++11", "atomic"], "comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1561619530, "post_id": 56781951, "comment_id": 100125621, "body": "I think you misunderstand the use of fences. Related: <a href=\"https://stackoverflow.com/a/56398731/5376789\">stackoverflow.com/a/56398731/5376789</a>"}, {"owner": {"reputation": 299, "user_id": 10213726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d63bca35c340c218268418210be75?s=128&d=identicon&r=PG&f=1", "display_name": "Tootsie", "link": "https://stackoverflow.com/users/10213726/tootsie"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1561641505, "post_id": 56781951, "comment_id": 100138301, "body": "@xskxzr I put the fences in there based on information from <a href=\"https://preshing.com/20130922/acquire-and-release-fences/\" rel=\"nofollow noreferrer\">this article</a>.."}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 9107647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43594ef3d74c11a31be7f9d5ebddc0?s=128&d=identicon&r=PG&f=1", "display_name": "Humphrey Winnebago", "link": "https://stackoverflow.com/users/9107647/humphrey-winnebago"}, "is_accepted": true, "score": 2, "last_activity_date": 1561964345, "creation_date": 1561964345, "answer_id": 56831205, "question_id": 56781951, "link": "https://stackoverflow.com/questions/56781951/is-this-acquire-fence-observed/56831205#56831205", "title": "Is this acquire fence observed?", "body": "<p>You cannot put the fence after the <code>return</code>. Your placement of the acquire fence is unreachable code. <code>std::atomic_thread_fence</code> is a function. Don't treat it as if it were a language feature. If you don't call the function, you don't get the effect. </p>\n\n<p>I compiled your example in MSVC 19.16 (VS 2017 15.9.13) with compiler warning level 4 (<code>/w4</code> flag). I got an \"unreachable code\" warning.</p>\n\n<p>The GCC \"unreachable code\" warning was removed in version 4.5\n<a href=\"https://stackoverflow.com/a/21240321/9107647\">https://stackoverflow.com/a/21240321/9107647</a></p>\n\n<p>Fix (adapted from <a href=\"https://preshing.com/20130922/acquire-and-release-fences/\" rel=\"nofollow noreferrer\">https://preshing.com/20130922/acquire-and-release-fences/</a>):</p>\n\n<pre><code>bool acquire()\n{\n    if (flag.load(std::memory_order_relaxed))\n    {\n        std::atomic_thread_fence(std::memory_order_acquire);\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 10213726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d63bca35c340c218268418210be75?s=128&d=identicon&r=PG&f=1", "display_name": "Tootsie", "link": "https://stackoverflow.com/users/10213726/tootsie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56831205, "answer_count": 1, "score": 0, "last_activity_date": 1561964345, "creation_date": 1561590249, "question_id": 56781951, "link": "https://stackoverflow.com/questions/56781951/is-this-acquire-fence-observed", "title": "Is this acquire fence observed?", "body": "<p>This question is about standalone fences in C++  </p>\n\n<p>In an attempt to encapsulate the use of acquire and release fences, I have written the following code:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;atomic&gt;\n#include &lt;cassert&gt;\n\nclass sync {\n    std::atomic&lt;bool&gt; flag{false};\n\npublic:\n    void release()\n    {\n        std::atomic_thread_fence(std::memory_order_release);\n        flag.store(true, std::memory_order_relaxed);\n    }\n\n    bool acquire()\n    {\n        return flag.load(std::memory_order_relaxed);\n        std::atomic_thread_fence(std::memory_order_acquire); // Is this acquire fence observed by the application ?\n    }\n};\n\nint main()\n{\n    sync s;\n    int data = 0;\n\n    std::thread t1{[&amp;] { data = 12; s.release(); }};\n    std::thread t2{[&amp;] { if (s.acquire()) assert(data==12); }};\n\n    t1.join(); t2.join();\n}\n</code></pre>\n\n<p>I believe that the fences are positioned correctly ('release' before the store and 'acquire' after the load).  </p>\n\n<p>I am not sure if the load/acquire actually works.<br>\nSince the acquire fence is <em>after</em> the load/return statement, I am wondering if it is taken into account at all.  </p>\n\n<p>Is this use of acquire fence correct ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "edited": false, "score": 0, "creation_date": 1561591623, "post_id": 56781947, "comment_id": 100119049, "body": "What permissions do you have for the Sources folder?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1561591628, "post_id": 56781947, "comment_id": 100119050, "body": "Have you only the project file? Does the cpp file you see locked in your project exist on your hard disk nearby the project file? Please list all existing files and folders recursvily which you see in your file system (i.e. not via codeblocks UI)."}, {"owner": {"reputation": 31, "user_id": 11705603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xSmmQbgeDBk/AAAAAAAAAAI/AAAAAAAAC50/x9ZoQg5zg2k/photo.jpg?sz=128", "display_name": "bruno arndt", "link": "https://stackoverflow.com/users/11705603/bruno-arndt"}, "edited": false, "score": 0, "creation_date": 1561778056, "post_id": 56781947, "comment_id": 100183473, "body": "i dont know how to see the permisions, i have the entire folder, the folder &quot;teste&quot; inside him the bin and obj folder, and main.cpp, testes.cbp, testes.layout"}, {"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1600329424, "post_id": 56781947, "comment_id": 113054730, "body": "What does it say in <code>settings -&gt; compiler -&gt; toolchain executables</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 2828454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba3936fe983a9a04cd89ca41ed6bee6?s=128&d=identicon&r=PG&f=1", "display_name": "pglez82", "link": "https://stackoverflow.com/users/2828454/pglez82"}, "is_accepted": false, "score": 0, "last_activity_date": 1600328306, "creation_date": 1600328306, "answer_id": 63933354, "question_id": 56781947, "link": "https://stackoverflow.com/questions/56781947/how-to-fix-no-input-files-in-codeblocks-code-c/63933354#63933354", "title": "how to fix &quot;no input files&quot; in code::blocks code c++", "body": "<p>In my case the problem was that I had no ascii characters in the project path. Once I had fixed this, it worked like charm.</p>\n"}], "owner": {"reputation": 31, "user_id": 11705603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xSmmQbgeDBk/AAAAAAAAAAI/AAAAAAAAC50/x9ZoQg5zg2k/photo.jpg?sz=128", "display_name": "bruno arndt", "link": "https://stackoverflow.com/users/11705603/bruno-arndt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2667, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1600328306, "creation_date": 1561590223, "last_edit_date": 1561593885, "question_id": 56781947, "link": "https://stackoverflow.com/questions/56781947/how-to-fix-no-input-files-in-codeblocks-code-c", "title": "how to fix &quot;no input files&quot; in code::blocks code c++", "body": "<p>I installed <code>code::blocks</code> but I don't know why every project I open shows the message <code>\"error; no input files\"</code>. The name of the .cpp file has an lock, and I want to know how I open a folder of projects in it.</p>\n\n<p>I searched and I couldn't find an answer probably because it is not a common issue.</p>\n\n<p>Here is a screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ucVhK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ucVhK.png\" alt=\"screenshot\"></a> </p>\n\n<p>It's like the project doesn't exist anymore.</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1561589720, "post_id": 56781758, "comment_id": 100118646, "body": "&quot;Trying this out, it doesn&#39;t seem like it works. My use case isn&#39;t quite as simple as this, and so runs into some OOB errors.&quot; You&#39;re doing things right, so the information you omit with these sentences is key to understanding your problem."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561590591, "post_id": 56781758, "comment_id": 100118832, "body": "Works fine <a href=\"http://coliru.stacked-crooked.com/a/13b6393366b606d7\" rel=\"nofollow noreferrer\">Here</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1561590766, "post_id": 56781758, "comment_id": 100118872, "body": "@Richard: Hopefully, we can distinguish user by id/rep with popup/status bar. but still confusing at first. (I don&#39;t even know who receive the notification :-/)"}, {"owner": {"reputation": 239, "user_id": 2582137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zii9C.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/2582137/richard"}, "edited": false, "score": 1, "creation_date": 1561593010, "post_id": 56781758, "comment_id": 100119310, "body": "My issue had to do with nested loops, with the vectors being of uneven length. I forget what the specific issue is now, but I eventually realized that the overhead from parallelization was larger than any actual speedup, so I gave up on using it. Thanks for the sanity check, though."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561596676, "post_id": 56781758, "comment_id": 100119902, "body": "@Jarod42: I got a notification just now. I&#39;m not sure how this works."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1561596757, "post_id": 56781758, "comment_id": 100119914, "body": "@Richard: Could you close the question since it&#39;s essentially unanswerable without said details? Have you tried collapse and nowait where appropriate?"}, {"owner": {"reputation": 239, "user_id": 2582137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zii9C.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/2582137/richard"}, "edited": false, "score": 0, "creation_date": 1561604626, "post_id": 56781758, "comment_id": 100121167, "body": "I haven&#39;t tried collapse or nowait; I&#39;ll give it a try. I can&#39;t close the question because I don&#39;t think I have enough points to."}], "owner": {"reputation": 239, "user_id": 2582137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zii9C.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/2582137/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561589597, "creation_date": 1561588722, "question_id": 56781758, "link": "https://stackoverflow.com/questions/56781758/parallel-vector-array-comparison-in-c", "title": "Parallel vector/array comparison in C++", "body": "<p>Suppose I want to compare two vectors in C++, like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// a and b are both vector&lt;int&gt; of the same length\nfor (int i = 0; i &lt; a.size(); i++) {\n  if (a[i] &gt; b[i]) {\n    foo();\n  }\n}\n</code></pre>\n\n<p>but the sizes of the vectors are quite large, and I want to reduce the time taken to do this comparison by parallelizing this operation, so I (naively) throw a pragma on it:</p>\n\n<pre><code>#pragma omp parallel for\nfor (int i = 0; i &lt; a.size(); i++) {\n  if (a[i] &gt; b[i]) {\n    foo();\n  }\n}\n</code></pre>\n\n<p>Trying this out, it doesn't seem like it works. My use case isn't quite as simple as this, and so runs into some OOB errors.</p>\n\n<p>Ideally, I would want something like:</p>\n\n<pre><code>Thread 1 checks a[0] &gt; b[0] then does foo();\nThread 2 checks a[1] &gt; b[1] then does foo();\netc.\n</code></pre>\n\n<p>And although it might not be as orderly as 0, 1, 2, ... I'd at least want to make sure a thread is not doing a[3] > b[4], or something.</p>\n\n<p>Could someone clarify how to parallelize this loop to do this kind of comparison?</p>\n"}, {"tags": ["c++", "regex", "qt"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1561616504, "post_id": 56781710, "comment_id": 100124154, "body": "What is the &quot;specific pattern&quot; in the separator?"}, {"owner": {"reputation": 83, "user_id": 11700122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86ebecbcd581329d4eaddb3ee5764f6?s=128&d=identicon&r=PG&f=1", "display_name": "emdou", "link": "https://stackoverflow.com/users/11700122/emdou"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561659573, "post_id": 56781710, "comment_id": 100147906, "body": "For now i&#39;m expecting a pattern of numbers separated by a colon ###:###. The haystack in the code section show an example."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1561616595, "post_id": 56781919, "comment_id": 100124181, "body": "A good answer shouldn&#39;t just contain code, it should explain what was wrong in the question and how the solution fixes it."}], "tags": [], "owner": {"reputation": 83, "user_id": 11700122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86ebecbcd581329d4eaddb3ee5764f6?s=128&d=identicon&r=PG&f=1", "display_name": "emdou", "link": "https://stackoverflow.com/users/11700122/emdou"}, "is_accepted": false, "score": 1, "last_activity_date": 1561659408, "last_edit_date": 1561659408, "creation_date": 1561589991, "answer_id": 56781919, "question_id": 56781710, "link": "https://stackoverflow.com/questions/56781710/how-to-extract-json-object-strings-separated-by-specific-pattern/56781919#56781919", "title": "How to extract Json object strings separated by specific pattern?", "body": "<p>The solution was:</p>\n\n<pre><code>/\\d+({.*?})(?:\\d+|$)/\n</code></pre>\n\n<p>First a check for prepending digits with '\\d+', then a group match for everything between curly braces without being greedy thus the '({.*?})', and finally an excluded group match '?:' will stop the preivous group match at either a set of digits '\\d+' or the end of word '$', '(?:\\d+|$)'</p>\n"}], "owner": {"reputation": 83, "user_id": 11700122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86ebecbcd581329d4eaddb3ee5764f6?s=128&d=identicon&r=PG&f=1", "display_name": "emdou", "link": "https://stackoverflow.com/users/11700122/emdou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561659408, "creation_date": 1561588208, "last_edit_date": 1561616529, "question_id": 56781710, "link": "https://stackoverflow.com/questions/56781710/how-to-extract-json-object-strings-separated-by-specific-pattern", "title": "How to extract Json object strings separated by specific pattern?", "body": "<p>So the question is quite straightforward. After a couple of hours browsing threads about regex i still can't come up with one that would handle a string as stated in the code section.</p>\n\n<p>Here are some of the regular expressions I tried (without escaping the backslash for the sake of reading) :</p>\n\n<pre><code>/\\d+({.*?})(?:(|\\d+|$|))/;\n/\\d+({.+})(?:(|\\d+|$|))/;\n/\\d+({.*?})(?:(|\\d+|\\B|))/;\n/\\d+({.+})(?:(|\\d+|\\B|))/;\n/\\d+({.*?})(?:(|\\d+|))/;\n/\\d+({.+})\\d+/;\n/\\d+({.*?})\\d+/;\n</code></pre>\n\n<p>This one is the closest i got to what i except:</p>\n\n<pre><code>/\\d+({.*?})\\d+|\\d+({.*?})/\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QString haystack = \"5:4{\"type\":\"someType\",\"data\":{\"subJson\":123}}\"\\\n                       \"9406:22{\"type\":\"SomeOtherType\",\"data\":{\"subJson\":648,\"data\":{\"subSubJson\":25}}}\"\\\n                       \"125:10{\"last\":79}\";     // The quotes are obviously escaped but reading sake...\n\nQRegularExpression re = QRegularExpression(\"\\\\d+({.*?})\\\\d+|\\\\d+({.*?})\");\nQRegularExpressionMatchIterator i = re.globalMatch(haystack);\n\nQStringList matches;\nwhile (i.hasNext()) {\n    QRegularExpressionMatch match = i.next();\n    QString result = match.captured(1); // Group match\n    matches &lt;&lt; result;\n}\n\nqDebug() &lt;&lt; matches;\n</code></pre>\n\n<p>What I expect:</p>\n\n<pre><code>\"{\"type\":\"someType\",\"data\":{\"subJson\":123}}\"\n\"{\"type\":\"SomeOtherType\",\"data\":{\"subJson\":648,\"data\":{\"subSubJson\":25}}}\"\n\"{\"last\":79}\"\n</code></pre>\n\n<p>What I actually get:</p>\n\n<pre><code>\"{\"type\":\"someType\",\"data\":{\"subJson\":123}}\"\n\"{\"type\":\"SomeOtherType\",\"data\":{\"subJson\":648,\"data\":{\"subSubJson\":25}}}\"\n\"\" //The last one wasn't matched\n</code></pre>\n\n<p>BUT the with the full match I get this:</p>\n\n<pre><code>\"4{\"type\":\"someType\",\"data\":{\"subJson\":123}}9406\"\n\"22{\"type\":\"SomeOtherType\",\"data\":{\"subJson\":648,\"data\":{\"subSubJson\":25}}}125\"\n\"10{\"last\":79}\"\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1561587555, "post_id": 56781602, "comment_id": 100118081, "body": "You&#39;d need <code>std::iterator</code> (but you almost never want an <code>std::iterator</code>, which was only intended to be used as a base class when you were defining iterators, and is now deprecated). Most times you deal with iterators, you want their type to be a template parameter."}, {"owner": {"reputation": 5459, "user_id": 3553031, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b72880023e6290ffd3bf5623ae79bebc?s=128&d=identicon&r=PG&f=1", "display_name": "user3553031", "link": "https://stackoverflow.com/users/3553031/user3553031"}, "edited": false, "score": 0, "creation_date": 1561587644, "post_id": 56781602, "comment_id": 100118115, "body": "This is specifically a C++ question.  Please do not tag C++ questions with &#39;C&#39;."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1561588763, "post_id": 56781602, "comment_id": 100118404, "body": "Why are you wrapping the <code>typedef</code> inside of an <code>extern &quot;C&quot;</code> at all?  Perhaps get rid of that and then use a templated <code>using</code> statement instead of a <code>typedef</code>, eg: <code>#ifdef __cplusplus  template&lt;typename iterator&gt; using it_pair_t = std::pair&lt;iterator, iterator&gt;; #endif</code>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1561588938, "post_id": 56781602, "comment_id": 100118452, "body": "Which iterator do you need? For example, <code>std::vector&lt;int&gt;::iterator</code> and <code>std::map&lt;std::string, double&gt;::iterator</code> are very different things."}], "owner": {"reputation": 11, "user_id": 8755646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a366d5a6f358a8d061ba22ddfe3155b2?s=128&d=identicon&r=PG&f=1", "display_name": "citruscake", "link": "https://stackoverflow.com/users/8755646/citruscake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561588662, "creation_date": 1561587393, "last_edit_date": 1561588662, "question_id": 56781602, "link": "https://stackoverflow.com/questions/56781602/how-do-i-resolve-error-iterator-was-not-declared-in-this-scope", "title": "How do I resolve error: &#39;iterator&#39; was not declared in this scope?", "body": "<p>I have a header file in which I declare <code>typedef std::pair&lt;iterator, iterator&gt; it_pair_t;</code> inside of <code>extern \"C\"</code>. Outside of the <code>extern \"C\"</code>, I include <code>&lt;iterator&gt;</code>.</p>\n\n<p>I have tried moving <code>#include &lt;iterator&gt;</code> into the <code>extern \"C\"</code>. I have also tried using <code>typename</code> instead of <code>typedef</code>.</p>\n\n<pre><code>#ifdef __cplusplus \n#include &lt;iterator&gt;\nextern \"C\" {    \n    typedef std::pair&lt;iterator, iterator&gt; it_pair_t;\n#ifdef __cplusplus\n}\n</code></pre>\n"}, {"tags": ["c++", "unique-ptr", "incomplete-type"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1561586348, "post_id": 56781431, "comment_id": 100117766, "body": "You need a pimpl deleter:  <a href=\"https://stackoverflow.com/questions/9954518\">stackoverflow.com/questions/9954518</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1561586499, "post_id": 56781431, "comment_id": 100117807, "body": "Also, your header guard <code>__AGE_DETECT_H__</code> is a reserved identifier because it has two underscores in it, also because it starts with an underscore at the global (preprocessor) scope."}, {"owner": {"reputation": 794, "user_id": 4943329, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38d5ac66eeaa0a23cfae0183869d621f?s=128&d=identicon&r=PG&f=1", "display_name": "cyrusbehr", "link": "https://stackoverflow.com/users/4943329/cyrusbehr"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1561586720, "post_id": 56781431, "comment_id": 100117852, "body": "@Eljay can you elaborate more on what a pimpl deleter is? From that thread, it looks like my wrapper class needs to have a deleted, which mine does <code>~AgeDetect();</code>"}, {"owner": {"reputation": 794, "user_id": 4943329, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38d5ac66eeaa0a23cfae0183869d621f?s=128&d=identicon&r=PG&f=1", "display_name": "cyrusbehr", "link": "https://stackoverflow.com/users/4943329/cyrusbehr"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1561586859, "post_id": 56781431, "comment_id": 100117897, "body": "@Eljay and thank you for the info about the header guard, I fixed that"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1561586959, "post_id": 56781431, "comment_id": 100117926, "body": "Can it be the assignment to nullptr at the beginning? No easy access to a compiler at the moment"}, {"owner": {"reputation": 794, "user_id": 4943329, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38d5ac66eeaa0a23cfae0183869d621f?s=128&d=identicon&r=PG&f=1", "display_name": "cyrusbehr", "link": "https://stackoverflow.com/users/4943329/cyrusbehr"}, "edited": false, "score": 0, "creation_date": 1561587447, "post_id": 56781431, "comment_id": 100118054, "body": "Can you guys explain why initializing it to <code>nullptr</code> is an issue?"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1561588838, "post_id": 56781431, "comment_id": 100118427, "body": "Look at the answer that duplicates this post <a href=\"https://stackoverflow.com/questions/25850629/unique-ptr-pimpl-forward-declaration-and-complete-definition\" title=\"unique ptr pimpl forward declaration and complete definition\">stackoverflow.com/questions/25850629/&hellip;</a> In particular the section &quot;Why is the complete type required?&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 794, "user_id": 4943329, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38d5ac66eeaa0a23cfae0183869d621f?s=128&d=identicon&r=PG&f=1", "display_name": "cyrusbehr", "link": "https://stackoverflow.com/users/4943329/cyrusbehr"}, "is_accepted": true, "score": 0, "last_activity_date": 1561587369, "creation_date": 1561587369, "answer_id": 56781599, "question_id": 56781431, "link": "https://stackoverflow.com/questions/56781431/unique-ptr-with-forward-declared-incomplete-type-wont-compile/56781599#56781599", "title": "unique_ptr with forward declared incomplete type won&#39;t compile", "body": "<p>As mentioned by CuriouslyRecurringThoughts and Jarod42, the issue was due to the assignment of <code>nullptr</code> to <code>m_ageDetectImplPtr</code> </p>\n\n<p>The following code works</p>\n\n<pre><code>    class AgeDetectImpl;\n    class AgeDetect {\n    public:\n        AgeDetect(std::string token);\n        ~AgeDetect();\n\n        std::string getAge(std::string imagepath);\n        std::string getAge(uint8_t* buffer, size_t rows, size_t cols);\n        std::string getAge(const cv::Mat&amp; image);\n\n    private:\n        std::unique_ptr&lt;AgeDetectImpl&gt; m_ageDetectImplPtr;\n    };\n</code></pre>\n"}], "owner": {"reputation": 794, "user_id": 4943329, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38d5ac66eeaa0a23cfae0183869d621f?s=128&d=identicon&r=PG&f=1", "display_name": "cyrusbehr", "link": "https://stackoverflow.com/users/4943329/cyrusbehr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "closed_date": 1561588571, "accepted_answer_id": 56781599, "answer_count": 1, "score": 2, "last_activity_date": 1561588211, "creation_date": 1561586167, "last_edit_date": 1561586878, "question_id": 56781431, "link": "https://stackoverflow.com/questions/56781431/unique-ptr-with-forward-declared-incomplete-type-wont-compile", "closed_reason": "Duplicate", "title": "unique_ptr with forward declared incomplete type won&#39;t compile", "body": "<p>I am trying to follow the PIMPL idiom for C++. I have thus created a class <code>AgeDetect</code> which will be my user facing interface, and <code>AgeDetectImpl</code> which contains all the implementation. I am forward declaring <code>AgeDetectImpl</code> and using an <code>std::unique_ptr</code> to store it as a private member of <code>AgeDetect</code>. I followed the instructions from <a href=\"https://stackoverflow.com/questions/9954518/stdunique-ptr-with-an-incomplete-type-wont-compile\">this</a> question and have implemented a destructor so I am not sure what the issue is. </p>\n\n<p><code>AgeDetect.h</code></p>\n\n<pre><code>#ifndef AGE_DETECT_H\n#define AGE_DETECT_H\n\n#include &lt;memory&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nclass AgeDetect {\n    class AgeDetectImpl;\n    std::unique_ptr&lt;AgeDetectImpl&gt; m_ageDetectImplPtr = nullptr;\npublic:\n    AgeDetect(std::string token);\n    ~AgeDetect();\n\n    std::string getAge(std::string imagepath);\n    std::string getAge(uint8_t* buffer, size_t rows, size_t cols);\n    std::string getAge(const cv::Mat&amp; image);\n};\n\n\n#endif\n\n</code></pre>\n\n<p><code>AgeDetect.cpp</code></p>\n\n<pre><code>#include \"ageDetect.h\"\n#include \"ageDetectImpl.h\"\n\nAgeDetect::~AgeDetect() = default;\n\nAgeDetect::AgeDetect(std::string token) {\n    //m_ageDetectImplPtr = std::make_unique&lt;AgeDetectImpl&gt;(token);\n    }\n</code></pre>\n\n<p>Error Message</p>\n\n<pre><code> error: invalid application of \u2018sizeof\u2019 to incomplete type \u2018AgeDetect::AgeDetectImpl\u2019\n  static_assert(sizeof(_Tp)&gt;0,\n</code></pre>\n\n<p><strong>Edit</strong>\nFixed header guards</p>\n"}, {"tags": ["c++", "boost-fiber"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1561585698, "post_id": 56781300, "comment_id": 100117580, "body": "Can you do a global search and replace with  //&lt;-  becoming #ifdef DEBUG and  //-&gt; becoming #endif"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 1, "creation_date": 1561586180, "post_id": 56781300, "comment_id": 100117726, "body": "I don&#39;t know of a tool, but for anyone interested in seeing an example... <a href=\"https://github.com/boostorg/fiber/blob/develop/examples/priority.cpp\" rel=\"nofollow noreferrer\">github.com/boostorg/fiber/blob/develop/examples/priority.cpp</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561587124, "post_id": 56781300, "comment_id": 100117967, "body": "I wonder if Goodspeed has their own code generator/pre-preprocessor."}, {"owner": {"reputation": 35, "user_id": 3624179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7cecea6a7d84ff76c9123442993177b?s=128&d=identicon&r=PG&f=1", "display_name": "user3624179", "link": "https://stackoverflow.com/users/3624179/user3624179"}, "edited": false, "score": 0, "creation_date": 1561688024, "post_id": 56781300, "comment_id": 100155042, "body": "I am sure one could do a search and replace, but I bet that there is some tool.  It could be Goodspeed&#39;s own preprocessor.  I just thought there might be something out there that everyone but me was familiar with..."}], "owner": {"reputation": 35, "user_id": 3624179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7cecea6a7d84ff76c9123442993177b?s=128&d=identicon&r=PG&f=1", "display_name": "user3624179", "link": "https://stackoverflow.com/users/3624179/user3624179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561585390, "creation_date": 1561585390, "question_id": 56781300, "link": "https://stackoverflow.com/questions/56781300/c-preprocessor-for-debug-statements", "title": "C++ Preprocessor for Debug Statements", "body": "<p>I have been going through some Boost-Fiber examples and the Boost-Fiber priority scheduler provided by Nat Goodspeed. In his code, he uses the character sequence //&lt;- on the line before debugging code, and //-> on the line following.</p>\n\n<p>I am wondering if there is some sort of C++ preprocessor that either removes this code, or leaves it in depending on the debugging mode.</p>\n\n<p>I would like to use his scheduler, without the debug code, but I didn't want to remove it by hand if something already exists.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "opencv", "pixel"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1561616236, "post_id": 56781279, "comment_id": 100124034, "body": "A video is a raster, i.e. a grid that is H pixels tall and W pixels wide. You can&#39;t <i>&quot;remove&quot;</i> pixels from it because, by definition, you have to store a value at each location in the grid. So, when you <i>&quot;remove&quot;</i> your 16x16 chunk, what will be left in the raster? Black? White? A transparent hole?"}, {"owner": {"reputation": 3803, "user_id": 10699171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0279e27531fe2baa3d7b5896c536c188?s=128&d=identicon&r=PG&f=1", "display_name": "J.D.", "link": "https://stackoverflow.com/users/10699171/j-d"}, "edited": false, "score": 0, "creation_date": 1561616295, "post_id": 56781279, "comment_id": 100124061, "body": "Before outputting the value, check if <code>r</code>and <code>c</code> are inside the frame to be removed."}, {"owner": {"reputation": 2212, "user_id": 1595504, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/45ce3e54b7c852a2cf8fd568b1a573a1?s=128&d=identicon&r=PG", "display_name": "nayab", "link": "https://stackoverflow.com/users/1595504/nayab"}, "edited": false, "score": 0, "creation_date": 1561620120, "post_id": 56781279, "comment_id": 100125950, "body": "What is the size of each frame and which 16x16 grid do you want to write into text file?"}], "owner": {"reputation": 11, "user_id": 7608142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668edfb4e73f416c31cae8c8c65d8bea?s=128&d=identicon&r=PG&f=1", "display_name": "TannnLeeee", "link": "https://stackoverflow.com/users/7608142/tannnleeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561589730, "creation_date": 1561585279, "last_edit_date": 1561589730, "question_id": 56781279, "link": "https://stackoverflow.com/questions/56781279/how-can-i-get-a-16x16-frame-of-pixels-removed-from-a-video-using-c-and-opencv", "title": "How can I get a 16x16 frame of pixels removed from a video using C++ AND OpenCV?", "body": "<p>I have some code typed up and what it performs currently is it will read a video input and export the all the pixel values for each frame to a text file. Where currently stuck and have been ripping my hair out to figure out is how to remove a 16x16 frame of pixels from the video during its export. So what I need to end up with is a text file of all pixel data from each frame, with a 16x16 of pixels removed from each frame of the video. </p>\n\n<p>C++ is completely new to me so a lot of terminologies and ideas out there are really making this hard.</p>\n\n<p>I know that something needs to be in the for loop. I just need it to remove that 16x16 frame of pixels from each frame of the video.</p>\n\n<pre><code>ofstream output(\"Output.txt\");\n\n// for loop to get every frame\nfor (;;)\n{\n    Mat frame;\n\n    capture &gt;&gt; frame;\n\n    if (frame.empty())\n    {\n        break;\n    }\n\n    //convert to gray image\n    cvtColor(frame, frame, CV_BGR2GRAY);\n\n    // pixel value\n    int grayValue;\n\n    //get every data value per frame\n    for (int r = 0; r &lt; frame.rows; r++)\n    {\n\n        for (int c = 0; c &lt; frame.cols; c++)\n        {\n\n            grayValue = frame.at&lt;uchar&gt;(r, c);\n            output &lt;&lt; grayValue &lt;&lt; \" \";\n        }\n        output &lt;&lt; endl &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stdvector", "std-future"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1561585232, "creation_date": 1561585232, "answer_id": 56781269, "question_id": 56781214, "link": "https://stackoverflow.com/questions/56781214/how-to-use-a-range-based-for-loop-with-a-vector-of-futuret/56781269#56781269", "title": "How to use a range-based for loop with a vector of future&lt;T&gt;", "body": "<p><code>get</code>is not <code>const</code>, so you need non-const references:</p>\n\n<pre><code>for (auto&amp; result : results) {\n    sum += result.get();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1561585261, "creation_date": 1561585261, "answer_id": 56781277, "question_id": 56781214, "link": "https://stackoverflow.com/questions/56781214/how-to-use-a-range-based-for-loop-with-a-vector-of-futuret/56781277#56781277", "title": "How to use a range-based for loop with a vector of future&lt;T&gt;", "body": "<p>You need to remove the <code>const</code> from <code>for (const auto&amp; result : results)</code>.  <code>std::future</code> does not provide a const qualified version of <code>get</code> which is what the compiler is trying to call since <code>result</code> is a reference to a <code>const std::future</code>.</p>\n\n<pre><code>for (auto&amp; result : results) {\n    sum += result.get();\n}\n</code></pre>\n\n<p>Does what you want.</p>\n"}], "owner": {"reputation": 1345, "user_id": 1157147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc55cf134872f2e92d248e83eaeda72f?s=128&d=identicon&r=PG", "display_name": "ByteNudger", "link": "https://stackoverflow.com/users/1157147/bytenudger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 56781277, "answer_count": 2, "score": 1, "last_activity_date": 1561585331, "creation_date": 1561584950, "last_edit_date": 1561585331, "question_id": 56781214, "link": "https://stackoverflow.com/questions/56781214/how-to-use-a-range-based-for-loop-with-a-vector-of-futuret", "title": "How to use a range-based for loop with a vector of future&lt;T&gt;", "body": "<p>I have a program that calculates some values in different threads with <code>std::packaged_task&lt;int()&gt;</code>. I store the <code>std::future</code> I get from the packaged tasks via <code>get_future()</code> in a vector (defined as <code>std::vector&lt;std::future&lt;int&gt;&gt;</code>).</p>\n\n<p>When I calculate the sum of all the tasks I use a for loop and it's working:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// set up of the tasks\nstd::vector&lt;std::future&lt;int&gt;&gt; results;\n// store the futures in results\n// each task execute in its own thread\n\nint sum{ 0 };\nfor (auto i = 0; i &lt; results.size; ++i) {\n    sum += results[i].get();\n}\n</code></pre>\n\n<p>But I would rather use a range-based for loop:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// set up of the tasks\nstd::vector&lt;std::future&lt;int&gt;&gt; results;\n// store the futures in results\n// each task execute in its own thread\n\nint sum{ 0 };\nfor (const auto&amp; result : results) {\n    sum += result.get();\n}\n</code></pre>\n\n<p>Currently I get a compile error with clang:</p>\n\n<pre><code>program.cxx:83:16: error: 'this' argument to member function 'get' has type 'const std::function&lt;int&gt;', but function is not marked const\n\n       sum += result.get();\n              ^~~~~~\n/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/9.1.0/../../../../include/c++/9.1.0/future:793:7: note: 'get' declared here\n\n       get()\n       ^\n</code></pre>\n\n<p>Is it possible to use <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">Range-based for loop</a> with a <code>vector</code> of <code>future&lt;int&gt;</code>?</p>\n"}, {"tags": ["c++", "class", "object", "constructor"], "comments": [{"owner": {"reputation": 2977, "user_id": 2231691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c897cef08f82aba800a8e12442aed40?s=128&d=identicon&r=PG", "display_name": "afenster", "link": "https://stackoverflow.com/users/2231691/afenster"}, "edited": false, "score": 1, "creation_date": 1561584891, "post_id": 56781164, "comment_id": 100117342, "body": "Use a different name for your variable: <code>helper *h = new helper();</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561585420, "post_id": 56781164, "comment_id": 100117499, "body": "Avoid <code>using namespace</code> in header. especially when you actually fully qualify types."}], "answers": [{"comments": [{"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "edited": false, "score": 0, "creation_date": 1561585084, "post_id": 56781194, "comment_id": 100117405, "body": "Thanks, this solved the problem. However, there are other classes in the code that use the same name (as I did here) and there is no issue with them. I added this class just like them, but this error came up."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "edited": false, "score": 0, "creation_date": 1561585151, "post_id": 56781194, "comment_id": 100117428, "body": "@HadiGhahremanNezhad, I can&#39;t answer why/how they work without seeing the code."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "edited": false, "score": 0, "creation_date": 1561586513, "post_id": 56781194, "comment_id": 100117811, "body": "@HadiGhahremanNezhad  Maybe the other examples have different capitalization?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1561584879, "creation_date": 1561584879, "answer_id": 56781194, "question_id": 56781164, "link": "https://stackoverflow.com/questions/56781164/c-expected-a-type-specifier-for-class-object/56781194#56781194", "title": "C++ expected a type specifier for class object", "body": "<p>Use a different name for the variable.</p>\n\n<pre><code>helper* obj = new helper;\n</code></pre>\n\n<p>When you use the variable name to be the same as the class name, the class name is shadowed by the variable name.</p>\n"}], "owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 56781194, "answer_count": 1, "score": 0, "last_activity_date": 1561584879, "creation_date": 1561584770, "question_id": 56781164, "link": "https://stackoverflow.com/questions/56781164/c-expected-a-type-specifier-for-class-object", "title": "C++ expected a type specifier for class object", "body": "<p>I am trying to create a class object with the header file, but I keep getting this error in the main function.</p>\n\n<p>This is the header file:</p>\n\n<h3>helper.h</h3>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace cv;\n\nclass helper {\npublic:\n    helper();\n    ~helper();\n\n    void setLabel(cv::Mat&amp; im, const std::string label, const cv::Point &amp; or , const cv::Scalar col);\n};\n</code></pre>\n\n<p>and this is the cpp file:</p>\n\n<h3>helper.cpp</h3>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"helper.h\"\n\nhelper::helper() {\n}\n\nvoid helper::setLabel(cv::Mat&amp; im, const std::string label, const cv::Point &amp; or , const cv::Scalar col)\n{\n    int fontface = cv::FONT_HERSHEY_SIMPLEX;\n    double fontScale = 0.4;\n    int thickness = 1;\n    int baseline = 0;\n\n    cv::Size text = cv::getTextSize(label, fontface, fontScale, thickness, &amp;baseline);\n    cv::putText(im, label, or , fontface, fontScale, col, thickness, CV_AA);\n}\n</code></pre>\n\n<p>Now in <strong>main.cpp</strong> when I try to create an instance:</p>\n\n<h3>main.cpp</h3>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"helper.h\"\nint main(){\n    helper* helper = new helper;\n}\n</code></pre>\n\n<p>It shows this error:</p>\n\n<blockquote>\n  <p>C2061 syntax error: identifier 'helper'</p>\n</blockquote>\n\n<p>How can I define an instance of this class in main? I am using Visual Studio 2015 on windows x64.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qtreeview", "qsortfilterproxymodel"], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "edited": false, "score": 0, "creation_date": 1561629729, "post_id": 56785723, "comment_id": 100131387, "body": "Well that kinda works, but you are forcing a second search/match here, and with different options than the first filtering. I&#39;m wondering about performance issues here."}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "edited": false, "score": 0, "creation_date": 1561630296, "post_id": 56785723, "comment_id": 100131679, "body": "@Salamandar: Another option might to connect to the signals of <code>proxyModels</code>. If the model changes one can get all current indices, which can be separately being checked, if they match by calling <code>filterAcceptRows</code> externally."}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "edited": false, "score": 0, "creation_date": 1561631924, "post_id": 56785723, "comment_id": 100132588, "body": "@Salamandar: I improved my solution. Maybe that should fit your needs."}, {"owner": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "edited": false, "score": 0, "creation_date": 1561633671, "post_id": 56785723, "comment_id": 100133553, "body": "I had to modify it a bit but that works correctly ! I added a &#39;else&#39; in recursivelyFindIndices, to recurse only if the node did not match."}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "edited": false, "score": 0, "creation_date": 1561633718, "post_id": 56785723, "comment_id": 100133586, "body": "@Salamandar: Good to hear. I also learned a lot by solving this problem."}], "tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": true, "score": 0, "last_activity_date": 1561631860, "last_edit_date": 1561631860, "creation_date": 1561619205, "answer_id": 56785723, "question_id": 56781145, "link": "https://stackoverflow.com/questions/56781145/expand-specific-items-in-a-treeview-during-filtering/56785723#56785723", "title": "Expand specific items in a treeview during filtering", "body": "<p>I think, that the following solution might help you a bit. </p>\n\n<p>I consider it a sane way to expand the items, if they are just few children having the name being searched for. An unresolved issue might be the folding of children, if one changes the search field. Type for example <code>C-0-0-0</code> in the search field to understand the behavior of my solution.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QTreeView&gt;\n#include &lt;QDebug&gt;\n#include &lt;QVBoxLayout&gt;\n#include &lt;QLineEdit&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QStandardItemModel&gt;\n#include &lt;QSortFilterProxyModel&gt;\n\n\nint main(int argc, char **args)\n{\n    QApplication app(argc, args);\n    auto frame = new QFrame;\n    frame-&gt;setLayout(new QVBoxLayout);\n    auto model = new QStandardItemModel;\n    for (auto i=0; i&lt;10; i++)\n    {\n        auto item = new QStandardItem(QString(\"A-%1\").arg(i));\n        model-&gt;appendRow(item);\n        for (auto j=0; j&lt;10; j++)\n        {\n            auto item2 = new QStandardItem(QString(\"B-%1-%2\").arg(i).arg(j));\n            item-&gt;appendRow(item2);\n            for (auto k=0; k&lt;10; k++)\n            {\n                auto item3 = new QStandardItem(QString(\"C-%1-%2-%3\").arg(i).arg(j).arg(k));\n                item2-&gt;appendRow(item3);\n            }\n        }\n    }\n\n    auto proxyModel = new QSortFilterProxyModel;\n    proxyModel-&gt;setSourceModel(model);\n    proxyModel-&gt;setRecursiveFilteringEnabled(true);\n    auto view = new QTreeView;\n    view-&gt;setModel(proxyModel);\n    frame-&gt;layout()-&gt;addWidget(view);\n    auto edit = new QLineEdit;\n    frame-&gt;layout()-&gt;addWidget(edit);\n    frame-&gt;show();\n    QObject::connect(edit, &amp;QLineEdit::textChanged, [&amp;](auto test) {\n        proxyModel-&gt;setFilterFixedString(test);\n        Qt::MatchFlags flags;\n        flags.setFlag(Qt::MatchFlag::MatchStartsWith, true);\n        flags.setFlag(Qt::MatchFlag::MatchWrap, true);\n        flags.setFlag(Qt::MatchFlag::MatchRecursive, true);\n        auto indexList=proxyModel-&gt;match(proxyModel-&gt;index(0,0), Qt::ItemDataRole::DisplayRole, test, -1, flags);\n        for (auto index : indexList)\n        {\n            auto expanderIndex = index.parent();\n            while (expanderIndex.isValid())\n            {\n                view-&gt;expand(expanderIndex);\n                expanderIndex = expanderIndex.parent();\n            }\n\n        }\n        qDebug() &lt;&lt; indexList.size();\n    });\n    app.exec();\n}\n</code></pre>\n\n<p><strong>Improved Solution</strong></p>\n\n<p>The following improved solution uses just the found indices by the model without the possible different searching for indices provided by <code>match</code>.</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QTreeView&gt;\n#include &lt;QDebug&gt;\n#include &lt;QVBoxLayout&gt;\n#include &lt;QLineEdit&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QStandardItemModel&gt;\n#include &lt;QSortFilterProxyModel&gt;\n#include \"MyProxyModel.h\"\n\nint main(int argc, char **args)\n{\n    QApplication app(argc, args);\n    auto frame = new QFrame;\n    frame-&gt;setLayout(new QVBoxLayout);\n    auto model = new QStandardItemModel;\n    for (auto i=0; i&lt;10; i++)\n    {\n        auto item = new QStandardItem(QString(\"A-%1\").arg(i));\n        model-&gt;appendRow(item);\n        for (auto j=0; j&lt;10; j++)\n        {\n            auto item2 = new QStandardItem(QString(\"B-%1-%2\").arg(i).arg(j));\n            item-&gt;appendRow(item2);\n            for (auto k=0; k&lt;10; k++)\n            {\n                auto item3 = new QStandardItem(QString(\"C-%1-%2-%3\").arg(i).arg(j).arg(k));\n                item2-&gt;appendRow(item3);\n            }\n        }\n    }\n\n    auto proxyModel = new MyProxyModel;\n    proxyModel-&gt;setSourceModel(model);\n    proxyModel-&gt;setRecursiveFilteringEnabled(true);\n    auto view = new QTreeView;\n    view-&gt;setModel(proxyModel);\n    frame-&gt;layout()-&gt;addWidget(view);\n    auto edit = new QLineEdit;\n    frame-&gt;layout()-&gt;addWidget(edit);\n    frame-&gt;show();\n    QObject::connect(edit, &amp;QLineEdit::textChanged, [&amp;](auto test) {\n        proxyModel-&gt;setFilterFixedString(test);\n        if (test == \"\") return;\n        view-&gt;collapseAll();\n        QList&lt;QModelIndex&gt; acceptedIndices = proxyModel-&gt;findIndices();\n        for (auto index : acceptedIndices)\n        {\n            auto expanderIndex = index.parent();\n            while (expanderIndex.isValid())\n            {\n                view-&gt;expand(expanderIndex);\n                expanderIndex = expanderIndex.parent();\n            }\n\n        }\n        qDebug() &lt;&lt; acceptedIndices.size();\n    });\n    app.exec();\n}\n</code></pre>\n\n<p><strong>MyProxyModel.h</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;QSortFilterProxyModel&gt;\n\nclass MyProxyModel : public QSortFilterProxyModel\n{\n    Q_OBJECT\npublic:\n    QList&lt;QModelIndex&gt; findIndices() const\n    {\n        QList&lt;QModelIndex&gt; ret;\n        for (auto iter=0; iter &lt; rowCount(); iter++)\n        {\n            auto childIndex = index(iter, 0, QModelIndex());\n            ret &lt;&lt; recursivelyFindIndices(childIndex);\n        }\n        return ret;\n    }\n\n\n    bool rowAccepted(int source_row, const QModelIndex&amp; source_parent) const\n    {\n        return filterAcceptsRow(source_row, source_parent);\n    }\nprivate:\n    QList&lt;QModelIndex&gt; recursivelyFindIndices(const QModelIndex&amp; ind) const\n    {\n        QList&lt;QModelIndex&gt; ret;\n        if (rowAccepted(ind.row(), ind.parent()))\n        {\n            ret &lt;&lt; ind;\n        }\n        for (auto iter=0; iter&lt;rowCount(ind); iter++)\n        {\n            ret &lt;&lt; recursivelyFindIndices(index(iter, 0, ind));\n        }\n        return ret;\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 14098759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dMDG7.jpg?s=128&g=1", "display_name": "Yurii A", "link": "https://stackoverflow.com/users/14098759/yurii-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1601049299, "creation_date": 1601049299, "answer_id": 64067499, "question_id": 56781145, "link": "https://stackoverflow.com/questions/56781145/expand-specific-items-in-a-treeview-during-filtering/64067499#64067499", "title": "Expand specific items in a treeview during filtering", "body": "<p>Just a few suggestions to @Aleph0 answer:</p>\n<ol>\n<li><strong>main.cpp</strong> piece:</li>\n</ol>\n<pre class=\"lang-cpp prettyprint-override\"><code>        view-&gt;collapseAll();\n        QList&lt;QModelIndex&gt; acceptedIndices = proxyModel-&gt;findIndices();\n        for (auto index : acceptedIndices)\n        {\n            auto expanderIndex = index.parent();\n            while (expanderIndex.isValid())\n            {\n                view-&gt;expand(expanderIndex);\n                expanderIndex = expanderIndex.parent();\n            }\n\n        }\n</code></pre>\n<p>In order to prevent repeated expanding it may be good to check if <em>expanderIndex</em> was already expanded and stop going up. In worst case scenario it will save you from <strong>O(n^2)</strong> complexity (should be linear instead).</p>\n<ol start=\"2\">\n<li>in a similar fashion, <code>MyProxyModel::findIndices</code> method can be implemented without recursion to speed things up (however, modern compilers should be smart enough to unroll it)</li>\n</ol>\n"}], "owner": {"reputation": 481, "user_id": 3888191, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2243f51b68281954449a68234dd2f0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Salamandar", "link": "https://stackoverflow.com/users/3888191/salamandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "accepted_answer_id": 56785723, "answer_count": 2, "score": 0, "last_activity_date": 1601049299, "creation_date": 1561584665, "question_id": 56781145, "link": "https://stackoverflow.com/questions/56781145/expand-specific-items-in-a-treeview-during-filtering", "title": "Expand specific items in a treeview during filtering", "body": "<p>Let's consider this tree data :</p>\n\n<pre><code>Root\n|-v A1\n| |-- textA\n|\n|-v B1\n| |-- textB\n\n</code></pre>\n\n<p>When searching \"A1\" I want the A1 item NOT expanded (but expandable to see the children):</p>\n\n<pre><code>Root\n|-&gt; A1\n</code></pre>\n\n<p>When searching \"textA\" I want the A1 item expanded (to see the matched child):</p>\n\n<pre><code>Root\n|-v A1\n| |-- textA\n\n</code></pre>\n\n<p>The (standard) filtering provided by QSortFilterProxyModel works fine, but I don't find how to implement the \"expand when needed\" thing.</p>\n\n<p>I tried some stupid code, and it didn't work:</p>\n\n<pre><code>bool MySortFilterProxyModel::filterAcceptsRow(\n  int sourceRow,\n  const QModelIndex &amp;sourceParent\n) const {\n  bool result = QSortFilterProxyModel::filterAcceptsRow(sourceRow, sourceParent);\n\n  if (m_tree) {\n  //   if (result)\n       m_tree-&gt;expand(sourceParent);\n  }\n return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "bazel"], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 1106578, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/641383c410d3f54f924ed7e51995f9ee?s=128&d=identicon&r=PG", "display_name": "oracle3001", "link": "https://stackoverflow.com/users/1106578/oracle3001"}, "edited": false, "score": 0, "creation_date": 1561736726, "post_id": 56805572, "comment_id": 100173878, "body": "Thank you for your detailed response. That explains a lot."}], "tags": [], "owner": {"reputation": 1604, "user_id": 925253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aeb616d1e6529fb0cb8955c5abe4e0?s=128&d=identicon&r=PG", "display_name": "Sebastian &#196;rleryd", "link": "https://stackoverflow.com/users/925253/sebastian-%c3%84rleryd"}, "is_accepted": true, "score": 1, "last_activity_date": 1561719441, "last_edit_date": 1561719441, "creation_date": 1561718852, "answer_id": 56805572, "question_id": 56781141, "link": "https://stackoverflow.com/questions/56781141/bazel-including-all-headers-from-a-directory-when-importing-a-static-library/56805572#56805572", "title": "Bazel - Including all headers from a directory when importing a static library", "body": "<p>What you need is the <code>glob</code> function.</p>\n\n<p>To use it in your above example, you would do something like this</p>\n\n<pre><code>cc_import(\n  name = \"my_test_lib\"\n  static_library = \"lib/my_test_lib/test.lib\"\n  hdrs = glob([\"lib/my_test_lib/include/*.h\"])\n  visibility = [\"//visibility:public\"],\n)\n</code></pre>\n\n<p>which would find all files ending with <code>.h</code> under <code>lib\\my_test_lib\\include</code> and put them in the <code>hdrs</code> attribute of your <code>cc_import</code>.</p>\n\n<p>There's more information about <code>glob</code> in the Bazel documentation: <a href=\"https://docs.bazel.build/versions/master/be/functions.html#glob\" rel=\"nofollow noreferrer\">https://docs.bazel.build/versions/master/be/functions.html#glob</a></p>\n\n<p><em>Note: Always use forward slashes on all platforms in Bazel BUILD files (even on Windows).</em></p>\n\n<p><strong>Multiple glob patterns</strong></p>\n\n<p>It's sometimes useful to put in more than one pattern in the glob, for example like this</p>\n\n<pre><code>cc_import(\n  ...\n  hdrs = glob([\n    \"lib/my_test_lib/include/*.h\",\n    \"lib/my_test_lib/include/*.hpp\",\n    \"lib/my_test_lib/public/*.h\",\n  ]),\n  ...\n)\n</code></pre>\n\n<p><strong>Combining a glob with a hard coded list of files</strong></p>\n\n<p>Another useful thing is combining globs with hard coded paths. You might have a few files you want in there and then a directory you also want to include. You can do this by using the <code>+</code> operator to concatenate the hard coded list of paths with the glob results like this</p>\n\n<pre><code>cc_import(\n  ...\n  hdrs = [\n    \"lib/my_test_lib/some_header.h\",\n  ] + glob([\n    \"lib/my_test_lib/include/*.h\",\n  ]),\n  ...\n)\n</code></pre>\n\n<p><strong>Globbing a directory hierarchy (beware of massive inclusions)</strong></p>\n\n<p>The <code>glob</code> function also support traversing directories and their sub directories when finding files. This can be done using the <code>**</code> glob pattern. So, to for example grab all <code>.h</code> files in the <code>my_test_lib</code> directory, use this glob</p>\n\n<pre><code>cc_import(\n  ...\n  hdrs = glob([\n    \"lib/my_test_lib/**/*.h\",\n  ]),\n  ...\n)\n</code></pre>\n\n<p><em>Beware: This will include all files below the specified directory, as expected. This can go out of hand since it's not explicit what files get included. Might be better to stay away from <code>**</code>.</em></p>\n"}, {"tags": [], "owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "is_accepted": false, "score": 3, "last_activity_date": 1568228504, "creation_date": 1568228504, "answer_id": 57895345, "question_id": 56781141, "link": "https://stackoverflow.com/questions/56781141/bazel-including-all-headers-from-a-directory-when-importing-a-static-library/57895345#57895345", "title": "Bazel - Including all headers from a directory when importing a static library", "body": "<p>[This is a supplement to <a href=\"https://stackoverflow.com/a/56805572/751579\">Sebastian's answer</a>.]\nHere's a trick I just learned (from a colleague) to use with <code>cc_import</code>:</p>\n\n<p>Suppose you don't want your headers exposed \"naked\", but want them all in a subdir prefixed by your library name, so that you refer to them like this:</p>\n\n<pre><code>#include &lt;openjpeg/openjpeg.h&gt;\n</code></pre>\n\n<p>The first step is to have a directory structure that looks like this:</p>\n\n<pre><code>. &lt;library root&gt;\n- include\n  - openjpeg\n    - openjpeg.h\n    - &lt;other header files&gt;\n</code></pre>\n\n<p>But now if you expose these header files via a <code>glob</code>, e.g., <code>glob([\"mylib/include/openjpeg/*.h\"])</code> or some variant like <code>glob([\"mylib/include/**/*.h\"])</code> (or even by naming them explicitly!) they're not actually exposed as <code>#include &lt;openjpeg/openjpeg.h&gt;</code> but instead as <code>#include \"openjpeg.h\"</code> or <code>#include &lt;include/openjpeg/openjpeg.h&gt;</code> or something like that.</p>\n\n<p>The problem is that <code>cc_import</code> unaccountably does <em>not</em> support the <code>includes</code> attribute that <code>cc_library</code> does so you can't just name an include <em>directory</em>.</p>\n\n<p>So, use the standard computer science workaround of <em>adding another level of indirection</em> and use this:</p>\n\n<pre><code>cc_library(name = \"openjpeg\", \n           includes = [\"include\"],\n           deps = [\"openjpeg-internal\"],\n           visibility = [\"//visibility:public\"],\n)\ncc_import(name = \"openjpeg-internal\",\n          hdrs = glob([\"include/**/*.h\"]),\n          static_library = ...,\n          visibility = [\"//visibility:private\"],\n)\n</code></pre>\n"}], "owner": {"reputation": 1020, "user_id": 1106578, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/641383c410d3f54f924ed7e51995f9ee?s=128&d=identicon&r=PG", "display_name": "oracle3001", "link": "https://stackoverflow.com/users/1106578/oracle3001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1181, "favorite_count": 0, "accepted_answer_id": 56805572, "answer_count": 2, "score": 1, "last_activity_date": 1568228504, "creation_date": 1561584643, "last_edit_date": 1561706147, "question_id": 56781141, "link": "https://stackoverflow.com/questions/56781141/bazel-including-all-headers-from-a-directory-when-importing-a-static-library", "title": "Bazel - Including all headers from a directory when importing a static library", "body": "<p>I am a total newbie to Bazel and trying to add a static library to my build.</p>\n\n<p>Lets say as a simple example say I have the following.</p>\n\n<pre><code>cc_import(\n  name = \"my_test_lib\"\n  static_library = \"lib\\my_test_lib\\test.lib\"\n  hdrs = [\"lib\\my_test_lib\\include\\headerA.h\", \n          \"lib\\my_test_lib\\include\\headerB.h\"]\n  visibility = [\"//visibility:public\"],\n)\n</code></pre>\n\n<p>Now this works fine. </p>\n\n<p>However, what if I have a huge number of includes and within the include directory there is a number of subdirectories. Do I have to individually enter each one that my main project depends on, or can I do something like the following to essentially make all headers in this directory / subdirectories available?</p>\n\n<pre><code> hdrs = [ \"lib\\my_test_lib\\include\\*\"]\n</code></pre>\n"}, {"tags": ["c++", "arduino-uno", "arduino-ide"], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7342172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88sV5.jpg?s=128&g=1", "display_name": "Vahid Ranjbar", "link": "https://stackoverflow.com/users/7342172/vahid-ranjbar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563085798, "creation_date": 1563085798, "answer_id": 57025104, "question_id": 56781084, "link": "https://stackoverflow.com/questions/56781084/arduino-uno-serial-monitor-wont-print-entire-output-how-to-fix/57025104#57025104", "title": "Arduino Uno Serial Monitor won&#39;t print entire output; how to fix?", "body": "<p>First, check that the bound rate is in your code and the serial monitor is equal .then check code for your print order is run. Sometimes a runtime error or logical error causes the code to not be executed.</p>\n"}], "owner": {"reputation": 11, "user_id": 8224303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ebb22d466148c5974e58668e94715a?s=128&d=identicon&r=PG&f=1", "display_name": "Bkarimi", "link": "https://stackoverflow.com/users/8224303/bkarimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563085798, "creation_date": 1561584272, "last_edit_date": 1561954971, "question_id": 56781084, "link": "https://stackoverflow.com/questions/56781084/arduino-uno-serial-monitor-wont-print-entire-output-how-to-fix", "title": "Arduino Uno Serial Monitor won&#39;t print entire output; how to fix?", "body": "<p>I'm writing a program for my Arduino to plot user inputted data on a graph and give a best fit line + equation for the line, regression values, and a <em>coefficient</em> of determination (<strong>R^2</strong>) value. The serial monitor for the Arduino won't finish printing the entire output. What is the problem and how do I fix it?</p>\n\n<p>I had read that this may be a memory issue, so I dramatically reduced the amount of dynamic memory being used by using <code>f() macros</code> for all instances of <code>Serial.prints</code> of literal strings in my program. This helped to reduce the amount of memory being used dramatically but ultimately the serial monitor doesn't finish printing the entire output. Additionally, I am aware that a larger Arduino might work better but the constraints of this project require that I use the Arduino Uno model, so I can't change that.</p>\n\n<p>I expect the serial monitor to take in the user's data and then print out an equation for the best fit line, regression error, calculated <code>Y values</code>, and a coefficient of determination value. The serial monitor instead only prints up to the first few chars of the best fit line equation and then stops printing abruptly.</p>\n\n<pre><code>#include &lt;math.h&gt;\n//#include &lt;EEPROM.h&gt;                      \n#define ARDBUFFER 16\n#include &lt;stdarg.h&gt;\n#include &lt;Arduino.h&gt;\n\nconst byte buffSize = 16;\nchar inputSeveral[buffSize]; // schar array for input function below\n                             // space for 16 chars and a terminator\n\nbyte maxChars = 12; // a shorter limit to make it easier to see what happens\n                   //  if too many chars are entered\n\nfloat* px;       // dynamic array for x's (DAQ system values)\nfloat* py;       // dynamic array for y's (calibrated values)\n\n// NOTE: DELAYS TEMPORARY - WHILE LOOPS FOR INPUT NOT WORKING\n// NOTE: USING 86% MEMORY ON ARDUINO UNO \nvoid setup() {\n  Serial.begin(9600);\n  Serial.println(F(\"Starting...\"));\n\n  // Menu select for function to fit against\n  Serial.println(F(\"Select fit: \"));\n  Serial.println(F(\"  (1)Linear - Minimum two points\"));\n  Serial.println(F(\"  (2)Quadratic - Minimum three points\"));\n  Serial.println(F(\"  (3)Exponential - Minimum three points, y != 0\"));  // float check restrictions on exp, log, power\n  Serial.println(F(\"  (4)Logarithmic - Minimum three points, x != 0\"));\n  Serial.println(F(\"  (5)Power - Minimum three points, x != 0\"));\n  Serial.println(F(\"  (0)Exit\"));\n  delay(3000);\n  readSeveralChars();\n  uint8_t fitChoice = atoi(inputSeveral);\n\n  // Exit\n  if (fitChoice == 0)\n  {\n      Serial.print(F(\"Exiting calibration process...\"));\n      delay(2000);\n      exit(0);\n  }\n  // Linear\n  if(fitChoice == 1) { \n    Serial.println(F(\"Fit Chosen: Linear\"));\n\n    Serial.print(F(\"Input total points: \"));   // prompt user\n    delay(2000);                            // delay for input (while (Serial.avaiable()) causes char array to become zero and instantly changes input variable to 0)\n    readSeveralChars();\n    uint8_t totalPoints = atoi(inputSeveral);   // converts char array to int\n    Serial.println(totalPoints);\n    Serial.println(F(\"NOTE - X's are DAQ system values measured, Y's are final unit calibrated values\"));\n\n    // Error and warning checks for minimum points\n    if (totalPoints &lt; 2)\n    {\n        Serial.print(F(\"At least two points needed for linear. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n    }\n    else if (totalPoints == 2)\n    {\n       Serial.println(F(\"WARNING - Minimum points met. Overdefined recommended.\"));\n\n    }\n    delay(3000);\n    px = new float[totalPoints]; // Load x's into array\n    py = new float[totalPoints]; // Load y's into array\n    float rCoeff;\n    for (uint8_t i = 0; i &lt; totalPoints; ++i)       // loop through arrays and fill in values by input\n    {\n      ardprintf(\"Input x%d\", i+1);        // printf for serial, function implemented below\n      delay(2000);\n      readSeveralChars();\n      px[i] = atof(inputSeveral);\n      Serial.println(px[i]);\n      delay(1000);\n\n      ardprintf(\"Input y%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      py[i] = atof(inputSeveral);\n      Serial.println(py[i]);\n      delay(1000);\n    }\n    fabls_linear(totalPoints, px, py); // send inputed points to fabls calculator \n    rCoeff = determinationCoefficient(totalPoints, px, py);\n    Serial.print(F(\"r^2 = \"));\n    Serial.println(rCoeff);\n  }\n  // Quadratic\n  else if (fitChoice == 2) {\n    Serial.println(F(\"Fit Chosen: Quadratic\"));\n\n    Serial.print(F(\"Input total points: \"));\n    delay(2000);\n    readSeveralChars();\n    uint8_t totalPoints = atoi(inputSeveral);\n    Serial.println(totalPoints);\n\n    if (totalPoints &lt; 3)\n    {\n        Serial.print(F(\"At least three points needed for quadratic. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n    }\n    else if (totalPoints == 3)\n    {\n       Serial.println(F(\"WARNING - Minimum points met. Overdefined recommended.\"));\n\n    }\n    delay(3000);\n     px = new float[totalPoints];\n     py = new float[totalPoints];\n     float rCoeff;\n    for (uint8_t i = 0; i &lt; totalPoints; ++i)\n    {\n      ardprintf(\"Input x%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      px[i] = atof(inputSeveral);\n      Serial.println(px[i]);\n      delay(1000);\n\n      ardprintf(\"Input y%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      py[i] = atof(inputSeveral);\n      Serial.println(py[i]);\n      delay(1000);\n    }\n    fabls_quad(totalPoints, px, py);\n    rCoeff = determinationCoefficient(totalPoints, px, py);\n    Serial.print(F(\"r^2 = \"));\n    Serial.println(rCoeff);\n\n  }\n  // Exponential\n  else if (fitChoice == 3) {\n    Serial.println(F(\"Fit Chosen: Exponential\"));\n\n    Serial.print(F(\"Input total points: \"));\n    delay(2000);\n    readSeveralChars();\n    uint8_t totalPoints = atoi(inputSeveral);\n    Serial.println(totalPoints);\n\n    if (totalPoints &lt; 3)\n    {\n        Serial.print(F(\"ERROR - At least three points needed for exponential. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n    }\n    else if (totalPoints == 3)\n    {\n       Serial.println(F(\"WARNING - Minimum points met. Overdefined recommended.\"));\n\n    }\n    delay(3000);\n     px = new float[totalPoints];\n     py = new float[totalPoints];\n     float rCoeff;\n    for (uint8_t i = 0; i &lt; totalPoints; ++i)\n    {\n      ardprintf(\"Input x%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      px[i] = atof(inputSeveral);\n      Serial.println(px[i]);\n      delay(1000);\n\n      ardprintf(\"Input y%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      py[i] = atof(inputSeveral);\n      Serial.println(py[i]);\n      if (py[i] == 0)         // Catch zero point errors\n      {\n          Serial.println(F(\"ERROR - y's cannot be zero for exponential. Restarting calibration process... \"));\n          delay(2000);\n          setup();\n      }\n      delay(1000);\n    }\n    fabls_exp(totalPoints, px, py);\n    rCoeff = determinationCoefficient(totalPoints, px, py);\n    Serial.print(F(\"r^2 = \"));\n    Serial.println(rCoeff);\n\n  }\n  // Logarithmic\n  else if (fitChoice == 4) {\n    Serial.println(F(\"Fit Chosen: Logarithmic\"));\n\n    Serial.print(F(\"Input total points: \"));\n    delay(2000);\n    readSeveralChars();\n    uint8_t totalPoints = atoi(inputSeveral);\n    Serial.println(totalPoints);\n\n    if (totalPoints &lt; 3)\n    {\n        Serial.print(F(\"At least three points needed for logarithmic. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n    }\n    else if (totalPoints == 3)\n    {\n       Serial.println(F(\"WARNING - Minimum points met. Overdefined recommended.\"));\n\n    }\n    delay(3000);\n     px = new float[totalPoints];\n     py = new float[totalPoints];\n     float rCoeff;\n    for (uint8_t i = 0; i &lt; totalPoints; ++i)\n    {\n      ardprintf(\"Input x%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      px[i] = atof(inputSeveral);\n      Serial.println(px[i]);\n      if (px[i] == 0)\n      {\n          Serial.println(F(\"ERROR - x's cannot be zero for logarthimic. Restarting calibration process...\"));\n          delay(2000);\n          setup();\n      }\n      delay(1000);\n\n      ardprintf(\"Input y%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      py[i] = atof(inputSeveral);\n      Serial.println(py[i]);\n      delay(1000);\n    }\n    fabls_log(totalPoints, px, py);\n    rCoeff = determinationCoefficient(totalPoints, px, py);\n    Serial.print(F(\"r^2 = \"));\n    Serial.println(rCoeff);\n  }\n  // Power\n  else if (fitChoice == 5) {\n    Serial.println(F(\"Fit Chosen: Power\"));\n\n    Serial.print(F(\"Input total points: \"));\n    delay(2000);\n    readSeveralChars();\n    uint8_t totalPoints = atoi(inputSeveral);\n    Serial.println(totalPoints);\n\n    if (totalPoints &lt; 3)\n    {\n        Serial.print(F(\"At least three points needed for power. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n    }\n    else if (totalPoints == 3)\n    {\n       Serial.println(F(\"WARNING - Minimum points met. Overdefined recommended.\"));\n\n    }\n    delay(3000);\n     px = new float[totalPoints];\n     py = new float[totalPoints];\n     float rCoeff;\n    for (uint8_t i = 0; i &lt; totalPoints; ++i)\n    {\n      ardprintf(\"Input x%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      px[i] = atof(inputSeveral);\n      Serial.println(px[i]);\n      if (px[i] == 0)\n      {\n        Serial.println(F(\"ERROR - x's cannot be zero for power. Restarting calibration process...\"));\n        delay(2000);\n        setup();\n      }\n      delay(1000);\n\n      ardprintf(\"Input y%d\", i+1);\n      delay(2000);\n      readSeveralChars();\n      py[i] = atof(inputSeveral);\n      Serial.println(py[i]);\n      delay(1000);\n    }\n    fabls_power(totalPoints, px, py);\n    rCoeff = determinationCoefficient(totalPoints, px, py);\n    Serial.print(F(\"r^2 = \"));\n    Serial.println(rCoeff);\n  }\n  // Invalid\n  else {\n    Serial.println(F(\"Invalid choice. Restarting calibration process...\"));\n    delay(2000);\n    setup();  // Restart, jumps backs to beginning\n  }\n\n  // deallocation (move to after EEPROM)\n  delete[] px;\n  delete[] py;\n\n  // LOAD EEPROM\n  // Once input points are given and regression data is returned\n  // prompt user to send new calibration values to EEPROM\n}\n\n\nvoid loop() {\n  // None\n}\n\n\n\n\n// https://forum.arduino.cc/index.php?topic=96292.0\n// Fit Analysis By Least Squares \nfloat alog(float x)\n{  return (x &lt; 0) ? -log(-x) : ((x &gt; 0) ? log(x) : 0);\n}\n\nvoid fabls_linear(unsigned int n,float *px,float *py)\n{  \n   float regressedValueArray[buffSize];\n   byte mask='\\x00',sign,sign2;\n   unsigned int i;\n   int least=-1;\n   float beta,d2,denom,dy,p,percent_error,r=(n-1),x,y,yc;\n   float a1,a2,a3,s,s1,s2,s3,s4,s5,s6,s7,z[5];\n   byte *f = \"%f %f %f %f %f\\n\";\n\n   s1 = s2 = s3 = s4 = s = 0;\n   for (i=0; i&lt;n; i++)\n   {  x = px[i];\n      y = py[i];\n      s1 += x;\n      s2 += x * x;\n      s3 += y;\n      s4 += x * y;\n   }\n   if (denom = n * s2 - s1 * s1)\n   {  a1 = (s3 * s2 - s1 * s4) / denom;\n      a2 = (n  * s4 - s3 * s1) / denom;\n      for (i=0; i&lt;n; i++)\n      {  dy = py[i] - (a2 * px[i] + a1);\n         s += dy * dy;\n      }\n      s = sqrt(s / r);\n      sign = (a1 &lt; 0) ? '-' : '+';\n      Serial.print(F(\"CHECKPOINT #1\"));\n      ardprintf(\"Linear:   y = (%f) x %c %f; s = %f\\n\",a2,sign,fabs(a1),s);\n      Serial.print(F(\"CHECKPOINT #2\"));\n      mask |= '\\x01';\n      z[0] = s;\n   }\n\n   Serial.print(F(\"X\"));\n   Serial.print(F(\"         Y\"));\n   Serial.print(F(\"         Calculated Y\"));\n   Serial.println(F(\"     PercentError%\"));\n   for (unsigned int i = 0; i &lt; n; ++i)\n   {\n      float y = (a2) * px[i] + (a1);\n      // PercentError%=((regressionvalue-calibrationvalue)/calibrationvalue)*100 \n\n      regressedValueArray[i] = y;\n      float error = ((y - py[i])/py[i])*100;\n      ardprintf(\"%f      %f      %f             %f\", px[i], py[i], y, error);\n   }\n   determinationCoefficient(n, py, regressedValueArray);\n}\n\nvoid fabls_quad(unsigned int n,float *px,float *py)\n{  \n   float regressedValueArray[buffSize];\n   byte mask='\\x00',sign,sign2;\n   unsigned int i;\n   int least=-1;\n   float beta,d2,denom,dy,p,percent_error,r=(n-1),x,y,yc;\n   float a1,a2,a3,s,s1,s2,s3,s4,s5,s6,s7,z[5];\n   byte *f = \"%f %f %f %f %f\\n\";\n\n   s1 = s2 = s3 = s4 = s5 = s6 = s7 = s = 0;\n   for (i=0; i&lt;n; i++)\n   {  x = px[i];\n      y = py[i];\n      s1 += x;\n      s2 += x * x;\n      s3 += x * x * x;\n      s4 += x * x * x * x;\n      s5 += y;\n      s6 += x * y;\n      s7 += x * x * y;\n   }\n   if (denom = n  * (s2 * s4 - s3 * s3) -\n               s1 * (s1 * s4 - s2 * s3) +\n               s2 * (s1 * s3 - s2 * s2) )\n   {  a1 = (s5 * (s2 * s4 - s3 * s3) -\n            s6 * (s1 * s4 - s2 * s3) +\n            s7 * (s1 * s3 - s2 * s2)) / denom;\n      a2 = (n  * (s6 * s4 - s3 * s7) -\n            s1 * (s5 * s4 - s7 * s2) +\n            s2 * (s5 * s3 - s6 * s2)) / denom;\n      a3 = (n  * (s2 * s7 - s6 * s3) -\n            s1 * (s1 * s7 - s5 * s3) +\n            s2 * (s1 * s6 - s5 * s2)) / denom;\n      for (i=0; i&lt;n; i++)\n      {  x = px[i];\n         dy = py[i] - (a3 * x * x + a2 * x + a1);\n         s += dy * dy;\n      }\n      s = sqrt(s / r);\n      sign  = (a1 &lt; 0) ? '-' : '+';\n      sign2 = (a2 &lt; 0) ? '-' : '+';\n      ardprintf(\"Quadratic:   y = (%f) x^2 %c (%f) x %c %f; s = %f\\n\",\n             a3,sign2,fabs(a2),sign,fabs(a1),s);\n      mask |= '\\x02';\n      z[1] = s;\n   }\n\n   Serial.print(F(\"X\"));\n   Serial.print(F(\"         Y\"));\n   Serial.print(F(\"         Calculated Y\"));\n   Serial.println(F(\"     PercentError%\"));\n   for (unsigned int i = 0; i &lt; n; ++i)\n   {\n      float y = (a2) * px[i] + (a1);\n      // PercentError%=((regressionvalue-calibrationvalue)/calibrationvalue)*100 \n\n      regressedValueArray[i] = y;\n      float error = ((y - py[i])/py[i])*100;\n      ardprintf(\"%f      %f      %f             %f\", px[i], py[i], y, error);\n   }\n   determinationCoefficient(n, py, regressedValueArray);\n}\n\nvoid fabls_exp(unsigned int n,float *px,float *py)\n{  \n   float regressedValueArray[buffSize];\n   byte mask='\\x00',sign,sign2;\n   unsigned int i;\n   int least=-1;\n   float beta,d2,denom,dy,p,percent_error,r=(n-1),x,y,yc;\n   float a1,a2,a3,s,s1,s2,s3,s4,s5,s6,s7,z[5];\n   byte *f = \"%f %f %f %f %f\\n\";\n\n   s1 = s2 = s3 = s4 = s = 0;\n   for (i=0; i&lt;n; i++)\n   {  x = px[i];\n      y = alog(py[i]);\n      s1 += x;\n      s2 += x * x;\n      s3 += y;\n      s4 += x * y;\n   }\n   if (denom = n * s2 - s1 * s1)\n   {  a1 = (s3 * s2 - s1 * s4) / denom;\n      a2 = (n  * s4 - s3 * s1) / denom;\n      for (i=0; i&lt;n; i++)\n      {  dy = alog(py[i]) - (a2 * px[i] + a1);\n         s += dy * dy;\n      }\n      s = sqrt(s / r);\n      sign = (a1 &lt; 0) ? '-' : '+';\n      ardprintf(\"Exponential: y = exp(%f x %c %f); s = %f\\n\",a2,sign,fabs(a1),s);\n      mask |= '\\x04';\n      z[2] = s;\n   }\n\n   Serial.print(F(\"X\"));\n   Serial.print(F(\"         Y\"));\n   Serial.print(F(\"         Calculated Y\"));\n   Serial.println(F(\"     PercentError%\"));\n   for (unsigned int i = 0; i &lt; n; ++i)\n   {\n      float y = (a2) * px[i] + (a1);\n      // PercentError%=((regressionvalue-calibrationvalue)/calibrationvalue)*100 \n\n      regressedValueArray[i] = y;\n      float error = ((y - py[i])/py[i])*100;\n      ardprintf(\"%f      %f      %f             %f\", px[i], py[i], y, error);\n   }\n   determinationCoefficient(n, py, regressedValueArray);\n}\n\n\n\nvoid fabls_log(unsigned int n,float *px,float *py)\n{  \n   float regressedValueArray[buffSize];\n   byte mask='\\x00',sign,sign2;\n   unsigned int i;\n   int least=-1;\n   float beta,d2,denom,dy,p,percent_error,r=(n-1),x,y,yc;\n   float a1,a2,a3,s,s1,s2,s3,s4,s5,s6,s7,z[5];\n   byte *f = \"%f %f %f %f %f\\n\";\n\n   s1 = s2 = s3 = s4 = s = 0;\n   for (i=0; i&lt;n; i++)\n   {  x = alog(px[i]);\n      y = py[i];\n      s1 += x;\n      s2 += x * x;\n      s3 += y;\n      s4 += x * y;\n   }\n   if (denom = n  * s2 - s1 * s1)\n   {  a1 = (s3 * s2 - s1 * s4) / denom;\n      a2 = (n  * s4 - s3 * s1) / denom;\n      for (i=0; i&lt;n; i++)\n      {  x = alog(px[i]);\n         dy = py[i] - (x * a2 + a1);\n         s += dy * dy;\n      }\n      s = sqrt(s / r);\n      sign = (a1 &lt; 0) ? '-' : '+';\n      ardprintf(\"Logarithmic:   y = (%f) ln(x) %c %f; s = %f\\n\",a2,sign,fabs(a1),s);\n      mask |= '\\x08';\n      z[3] = s;\n   }\n\n   Serial.print(F(\"X\"));\n   Serial.print(F(\"         Y\"));\n   Serial.print(F(\"         Calculated Y\"));\n   Serial.println(F(\"     PercentError%\"));\n   for (unsigned int i = 0; i &lt; n; ++i)\n   {\n      float y = (a2) * px[i] + (a1);\n      // PercentError%=((regressionvalue-calibrationvalue)/calibrationvalue)*100 \n\n      regressedValueArray[i] = y;\n      float error = ((y - py[i])/py[i])*100;\n      ardprintf(\"%f      %f      %f             %f\", px[i], py[i], y, error);\n   }\n   determinationCoefficient(n, py, regressedValueArray);\n}\n\n\n\nvoid fabls_power(unsigned int n,float *px,float *py)\n{  \n   float regressedValueArray[buffSize];\n   byte mask='\\x00',sign,sign2;\n   unsigned int i;\n   int least=-1;\n   float beta,d2,denom,dy,p,percent_error,r=(n-1),x,y,yc;\n   float a1,a2,a3,s,s1,s2,s3,s4,s5,s6,s7,z[5];\n   byte *f = \"%f %f %f %f %f\\n\";\n\n   s1 = s2 = s3 = s4 = s = 0;\n   for (i=0; i&lt;n; i++)\n   {  x = alog(px[i]);\n      y = alog(py[i]);\n      s1 += x;\n      s2 += x * x;\n      s3 += y;\n      s4 += x * y;\n   }\n   if (denom = n  * s2 - s1 * s1)\n   {  a1 = exp((s3 * s2 - s1 * s4) / denom);\n      a2 = (n  * s4 - s3 * s1) / denom;\n      for (i=0; i&lt;n; i++)\n      {  dy = py[i] - a1 * pow(px[i],a2);\n         s += dy * dy;\n      }\n      s = sqrt(s / r);\n      sign = (a1 &lt; 0) ? '-' : '+';\n      ardprintf(\"Power:   y = (%f) x ^ (%f); s = %f\\n\",a1,a2,s);\n      mask |= '\\x10';\n      z[4] = s;\n   }\n\n   Serial.print(F(\"X\"));\n   Serial.print(F(\"         Y\"));\n   Serial.print(F(\"         Calculated Y\"));\n   Serial.println(F(\"     PercentError%\"));\n   for (unsigned int i = 0; i &lt; n; ++i)\n   {\n      float y = (a2) * px[i] + (a1);\n      // PercentError%=((regressionvalue-calibrationvalue)/calibrationvalue)*100 \n\n      regressedValueArray[i] = y;\n      float error = ((y - py[i])/py[i])*100;\n      ardprintf(\"%f      %f      %f             %f\", px[i], py[i], y, error);\n   }\n   determinationCoefficient(n, py, regressedValueArray);\n}\n\n\n\n\nvoid readSeveralChars() {\n\n  // this reads all the characters in the input buffer\n  // if there are too many for the inputSeveral array the extra chars will be lost\n\n  inputSeveral[0] = 0; // makes inputSeveral an empty string with just a terminator\n\n  byte ndx = 0;        // the index position for storing the character\n\n  if (Serial.available() &gt; 0) {\n\n    while (Serial.available() &gt; 0) { // keep going until buffer is empty\n      if (ndx &gt; maxChars - 1) { // -1 because arrays count from 0\n        ndx = maxChars;     // if there are too many chars the extra ones are\n      }                     //   dumped into the last array element which will\n      //   be overwritten by the string terminator\n      inputSeveral[ndx] = Serial.read();\n      ndx ++;\n\n    }\n\n    if (ndx &gt; maxChars) {  // to make sure the terminator is not written beyond the array\n      ndx = maxChars;\n    }\n    inputSeveral[ndx] = 0; // add a zero terminator to mark the end of the string\n  }\n\n\n\n}\n\n\n\n// https://gist.github.com/asheeshr/9004783\n// A printf function for serial communication from Arduino boards\nint ardprintf(char *str, ...)\n{\n  int i, count=0, j=0, flag=0;\n  char temp[ARDBUFFER+1];\n  for(i=0; str[i]!='\\0';i++)  if(str[i]=='%')  count++;\n\n  va_list argv;\n  va_start(argv, count);\n  for(i=0,j=0; str[i]!='\\0';i++)\n  {\n    if(str[i]=='%')\n    {\n      temp[j] = '\\0';\n      Serial.print(temp);\n      j=0;\n      temp[0] = '\\0';\n\n      switch(str[++i])\n      {\n        case 'd': Serial.print(va_arg(argv, int));\n                  break;\n        case 'l': Serial.print(va_arg(argv, long));\n                  break;\n        case 'f': Serial.print(va_arg(argv, float));\n                  break;\n        case 'c': Serial.print((char)va_arg(argv, int));\n                  break;\n        case 's': Serial.print(va_arg(argv, char *));\n                  break;\n        default:  ;\n      };\n    }\n    else \n    {\n      temp[j] = str[i];\n      j = (j+1)%ARDBUFFER;\n      if(j==0) \n      {\n        temp[ARDBUFFER] = '\\0';\n        Serial.print(temp);\n        temp[0]='\\0';\n      }\n    }\n  };\n  Serial.println();\n  return count + 1;\n}\n\n\n// Extra goodness of fit information\nfloat determinationCoefficient(int n, float *y, float *yRegression)\n{\n    float averageY = 0.0f;\n    float squareDiffSumY = 0.0f;\n    float regressDifferenceY = 0.0f;\n    float regressDiffSumY = 0.0f;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n       averageY += y[i];\n    }\n\n    averageY /= n;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        squareDiffSumY += ((y[i] - averageY) * (y[i] - averageY));\n    }\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        regressDiffSumY += ((yRegression[i] - averageY) * (yRegression[i] - averageY));\n    }\n\n    return regressDiffSumY / squareDiffSumY;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "mpi", "visual-studio-2019"], "comments": [{"owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "edited": false, "score": 0, "creation_date": 1561596190, "post_id": 56780537, "comment_id": 100119828, "body": "You cannot have whitespace in the <code>CMAKE_PREFIX_PATH</code> string. Try <code>set(CMAKE_PREFIX_PATH &quot;C:&#47;Program\\ Files&#47;Microsoft\\ MPI&quot;)</code>."}, {"owner": {"reputation": 1086, "user_id": 5228890, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-On5ouMp80l4/AAAAAAAAAAI/AAAAAAAAAAA/pCVMyVtcgDw/photo.jpg?sz=128", "display_name": "Afshin Oroojlooy", "link": "https://stackoverflow.com/users/5228890/afshin-oroojlooy"}, "reply_to_user": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "edited": false, "score": 0, "creation_date": 1561641060, "post_id": 56780537, "comment_id": 100137992, "body": "@kanstar I tried that and still same error."}, {"owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "edited": false, "score": 1, "creation_date": 1561664062, "post_id": 56780537, "comment_id": 100149629, "body": "The path you provide in <code>CMAKE_PREFIX_PATH</code> must contain a file called <code>MPIConfig.cmake</code> or <code>MPI-config.cmake</code>. Otherwise <code>find_package</code> won&#39;t find the package. So make sure to point to the directory where one of those are present."}, {"owner": {"reputation": 1086, "user_id": 5228890, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-On5ouMp80l4/AAAAAAAAAAI/AAAAAAAAAAA/pCVMyVtcgDw/photo.jpg?sz=128", "display_name": "Afshin Oroojlooy", "link": "https://stackoverflow.com/users/5228890/afshin-oroojlooy"}, "reply_to_user": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "edited": false, "score": 0, "creation_date": 1561664985, "post_id": 56780537, "comment_id": 100149951, "body": "@kanstar I checked all directories and neither of them contains either <code>MPIConfig.cmake</code> or <code>MPI-config.cmake</code>. I install <code>MS-MPI v10.0</code> Is there anything that I need to install?"}, {"owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "edited": false, "score": 1, "creation_date": 1561667447, "post_id": 56780537, "comment_id": 100150784, "body": "So, I think MPI is not shipped with a config file. But CMake ships already with a <a href=\"https://github.com/Kitware/CMake/blob/master/Modules/FindMPI.cmake\" rel=\"nofollow noreferrer\"><code>FindMPI.cmake</code></a> file. Read the documentation of the file to get a grasp on what variables are defined."}], "owner": {"reputation": 1086, "user_id": 5228890, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-On5ouMp80l4/AAAAAAAAAAI/AAAAAAAAAAA/pCVMyVtcgDw/photo.jpg?sz=128", "display_name": "Afshin Oroojlooy", "link": "https://stackoverflow.com/users/5228890/afshin-oroojlooy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1562089489, "creation_date": 1561581480, "last_edit_date": 1562089489, "question_id": 56780537, "link": "https://stackoverflow.com/questions/56780537/use-mpi-within-cmake-in-microsoft-visual-studio", "title": "Use MPI within CMake in Microsoft Visual Studio", "body": "<p>I have a <code>C++</code> project that is implemented in Linux with <code>JetBrain CLion</code> IDE. To get the executable, I used <code>CMake</code> which is fully matched with <code>JetBrain CLion</code>. The project uses <code>MPI</code> to handle multi-node processing, and the project works fine in Linux. </p>\n\n<p>Now, I have to get an executable for Windows too. So, I installed the community version of <code>Visual Studio 2019</code> along with <code>Microsft MPI</code> to build my project there too. I found that it might be easier to create the <code>sln</code> file for the project by <code>CMake</code> and then import the project into <code>VS</code>. But, when I tried this approach, I got an error for not finding <code>MPI</code>:</p>\n\n<pre><code>Could NOT find MPI_C (missing: MPI_C_LIB_NAMES MPI_C_HEADER_DIR MPI_C_WORKS) \nCould NOT find MPI_CXX (missing: MPI_CXX_LIB_NAMES MPI_CXX_HEADER_DIR MPI_CXX_WORKS) \nCMake Error at C:/Program Files/CMake/share/cmake-3.15/Modules/FindPackageHandleStandardArgs.cmake:137 (message):\n  Could NOT find MPI (missing: MPI_C_FOUND MPI_CXX_FOUND)\nCall Stack (most recent call first):\n  C:/Program Files/CMake/share/cmake-3.15/Modules/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)\n  C:/Program Files/CMake/share/cmake-3.15/Modules/FindMPI.cmake:1687 (find_package_handle_standard_args)\n  CMakeLists.txt:35 (find_package)\n</code></pre>\n\n<p>The cmake code that works in Linux is:</p>\n\n<pre><code>find_package(MPI REQUIRED)\ninclude_directories(${MPI_INCLUDE_PATH})\nadd_executable(prjt main.cpp)\nadd_subdirectory(sub1)\nadd_subdirectory(sub2)\ntarget_link_libraries(prjt ${MPI_LIBRARIES})\nset_property(TARGET prjt PROPERTY CXX_STANDARD 11)\n</code></pre>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/52637900/using-cmake-microsoft-mpi-and-visual-studio-2017-cannot-find-mpi-h\">[1]</a> and <a href=\"https://stackoverflow.com/questions/23163075/how-to-compile-an-mpi-included-c-program-using-cmake\">[2]</a>, I also tried:</p>\n\n<pre><code>set(CMAKE_PREFIX_PATH \"C:/Program Files/Microsoft MPI\")\nfind_package(MPI REQUIRED)\ninclude_directories(${MPI_INCLUDE_PATH})\nset(CMAKE_C_FLAGS \"${CMAKE_FLAGS} ${MPI_FLAGS}\")\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${MPI_CXX_FLAGS}\")\nset(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} ${MPI_EXE_LINKER_FLAGS}\")\nadd_executable(prjt main.cpp)\nadd_subdirectory(sub1)\nadd_subdirectory(sub2)\ntarget_link_libraries(prjt ${MPI_LIBRARIES})\nset_property(TARGET prjt PROPERTY CXX_STANDARD 11)\n</code></pre>\n\n<p>but still no success. </p>\n\n<p>I also tried to link MPI directly via MSVS, as it is instructed in <a href=\"https://blogs.technet.microsoft.com/windowshpc/2015/02/02/how-to-compile-and-run-a-simple-ms-mpi-program/\" rel=\"nofollow noreferrer\">[3]</a>, but it did not work too. The problem within that approach is that when I call <code>set MSMPI</code>, I only get <code>MSMPI_BIN=C:\\Program Files\\Microsoft MPI\\Bin\\</code> and I do not get the rest of the environment variables. In the <code>Linker</code> of <code>MSVS</code> also I manually added the <code>Microst SDK</code> address. (I also added the other required environment variables as <a href=\"https://www.math.ucla.edu/~mputhawala/PPT.pdf\" rel=\"nofollow noreferrer\">[4]</a> explains)</p>\n\n<p>I appreciate any help or comment.</p>\n"}, {"tags": ["c++", "c++11", "move-semantics"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1561585090, "post_id": 56780518, "comment_id": 100117409, "body": "It&#39;s never UB in either case anyway. Moved froms are still in a valid state."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1561622121, "last_edit_date": 1561622121, "creation_date": 1561586305, "answer_id": 56781451, "question_id": 56780518, "link": "https://stackoverflow.com/questions/56780518/undefined-behaviour-in-initializer-list-order-using-move-semantics/56781451#56781451", "title": "Undefined behaviour in initializer list order using move semantics", "body": "<p>You might see the rule of <a href=\"https://en.cppreference.com/w/cpp/language/eval_order\" rel=\"nofollow noreferrer\">evaluation order</a>.</p>\n\n<blockquote>\n  <p>10) In list-initialization, every value computation and side effect of a given initializer clause is sequenced before every value computation and side effect associated with any initializer clause that follows it in the brace-enclosed comma-separated list of initializers.</p>\n</blockquote>\n\n<p>So for</p>\n\n<pre><code>return { a, bar(std::move(a)) };\n</code></pre>\n\n<p><code>a</code> is firstly evaluated, then <code>bar(std::move(a))</code>.</p>\n\n<blockquote>\n  <p>As a side note, would using <code>return make_pair(a, bar(std::move(a)));</code> instead be different?</p>\n</blockquote>\n\n<p>Yes, this is a function call, and order of evaluation is unspecified. it is not UB by itself, but can lead to UB if one order lead to UB.\nIn your case both orders are fine and give same result.</p>\n\n<p>C++17 adds that restriction moreover:</p>\n\n<blockquote>\n  <p>15) In a function call, value computations and side effects of the initialization of every parameter are indeterminately sequenced with respect to value computations and side effects of any other parameter.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10728479"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 56781451, "answer_count": 1, "score": 0, "last_activity_date": 1561622121, "creation_date": 1561581372, "last_edit_date": 1561584896, "question_id": 56780518, "link": "https://stackoverflow.com/questions/56780518/undefined-behaviour-in-initializer-list-order-using-move-semantics", "title": "Undefined behaviour in initializer list order using move semantics", "body": "<p>Is (1) undefined behavior, or is the first element of the pair always evaluated first?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;array&gt;\n#include &lt;utility&gt;\n\nint bar(std::array&lt;int, 3&gt;&amp;&amp; ) {\n    return 1;\n}\n\nstd::pair&lt;std::array&lt;int, 3&gt;, int&gt; foo() {\n    std::array&lt;int, 3&gt; a;\n    return { a, bar(std::move(a)) };  // (1)\n}\n</code></pre>\n\n<p>As a side note, would using <code>return make_pair(a, bar(std::move(a)));</code> instead be different?</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "race-condition", "memory-corruption"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 10, "creation_date": 1561580930, "post_id": 56780384, "comment_id": 100115871, "body": "It&#39;s undefined behavior, so anything can happen. For example the reading thead might not even see the changes at all, ever. It doesn&#39;t matter that the type involved is a fundamental type or a class type. You need synchronization."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1561582222, "post_id": 56780384, "comment_id": 100116392, "body": "With regard to the reading thread: any reads after the 1st could be optimised out by the compiler because it can prove that the value never changes after the 1st read.  So, for example,  a loop waiting for a value to be set from the writing thread would never exit as the code to re-read the value was optimised out.."}, {"owner": {"reputation": 1628, "user_id": 888576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRapa.gif?s=128&g=1", "display_name": "Jean Davy", "link": "https://stackoverflow.com/users/888576/jean-davy"}, "edited": false, "score": 0, "creation_date": 1561731711, "post_id": 56780384, "comment_id": 100171390, "body": "Same that <a href=\"https://stackoverflow.com/questions/54188/are-c-reads-and-writes-of-an-int-atomic\">Are C++ Reads and Writes of an int Atomic?</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11313931"}, "edited": false, "score": 0, "creation_date": 1561581699, "post_id": 56780541, "comment_id": 100116179, "body": "Is it somehow (sorry for the lack of a better word) standardized by the standard? In practice (on Windows, Mac and Linux) is it actually needed?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1561581974, "post_id": 56780541, "comment_id": 100116284, "body": "@YanB. 0) See update to my answer.  1) Depends on the hardware as much as the OS. 2) Also depends on the compiler. Most modern compilers will agressively exploit theoretical UB and may break your program. 3) On a good compiler, unnecessary synchronization will be compiled out anyway, so it doesn&#39;t cost you anything and may save your ass."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1561594767, "post_id": 56780541, "comment_id": 100119609, "body": "How is DEC Alpha special? How can is break atomicity of word size operations?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1561603360, "post_id": 56780541, "comment_id": 100120943, "body": "I don&#39;t know that Alpha broke atomicity, but it was really weird in other respects, e.g., loads or stores that could move forward in time even before instructions they needed to calculate their address, which nothing later did. Also, early versions had no byte writes, so you pretty much wouldn&#39;t be able to implement modern C++ efficiently on these since modern C++ (since C++11) essentially requires independent byte writes to implement the non-interference part of the memory model."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1561584380, "last_edit_date": 1561584380, "creation_date": 1561581485, "answer_id": 56780541, "question_id": 56780384, "link": "https://stackoverflow.com/questions/56780384/is-it-possible-to-read-half-written-corrupt-primitive-variable-when-using-multi/56780541#56780541", "title": "Is it possible to read half-written, corrupt primitive variable when using multithreading in C++?", "body": "<p>In theory (and also real life), yes. You <em>must</em> synchronise access to variables that are read and written by different threads.</p>\n\n<p>Some hardware architectures may not need the synchronization (in which case a competent compiler should just remove it), but <em>some</em> architectures have very lax guarantees (like DEC Alpha - and others) and synchronization is very much required.</p>\n\n<p>For portable and predictable results across implentations, you <em>must</em> synchronise access to variables. Partial reads/writes <em>can</em> happen (usually at 3-o'clock at night at your most important customer when everyone is on vacation).</p>\n\n<p>Not to mention the fact that lacking synchronization, your program contains a data race, and data races are by definition Undefined Behaviour. And once your program contains UB (<em>anywhere</em>), your compiler no longer has any restrictions on what code it may generate (for <em>all</em> of your program). So even if the hardware guarantees it is safe, the compiler may exploit the presence of theoretical UB to perform optimizations that will break your program - and not necessarily where you expect that breakage to happen.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1561583917, "post_id": 56780621, "comment_id": 100117031, "body": "&quot;In practice, I&#39;m not aware of how this could happen on modern architectures when writing aligned values of primitive types&quot; - I&#39;m fairly sure some modern ARM chips have some very lax requirements/guarantees in this area and may give surprising results without proper synchronization. And then there&#39;s always the huge &quot;it&#39;s UB&quot; elephant in the room, so your compiler may screw you over <i>BIG time</i>, regardless of the hardware."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1561594623, "post_id": 56780621, "comment_id": 100119586, "body": "Half written word size variable <i>probably</i> won&#39;t happen in any case; but the <i>compiler</i> will still assume that the variable was not changed. So the act of writing is OK as long as the value isn&#39;t changed. ;)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1561594715, "post_id": 56780621, "comment_id": 100119598, "body": "@JesperJuhl Can you elaborate? What could possibly happen at the asm level? (What happens in a high level compiled language is another story.) How could any hw screw up writing whole words? Also what special asm instr exists to avoid the screw up?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1561600898, "post_id": 56780621, "comment_id": 100120535, "body": "@JesperJuhl - I am interested in any details if you have them. ARM has a weak memory model, and arguably POWER is even weaker, but none of them split writes, as far as I know. Even going back further, machines which split writes of machine word sized values were basically non-existent. For larger values it can happen, e.g., 64-bit values on 32-bit machines or somewhat famously, 128-bit values on 64-bit AMD machines (but only in very specific scenarios)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1561603220, "post_id": 56780621, "comment_id": 100120918, "body": "About the UB elephant, I think I covered it well? Fully two of the three paragraphs were about &quot;don&#39;t do this, because UB&quot;. I&#39;m always going to put in the other part of answer which is &quot;what happens IRL on real compilers&quot; because that&#39;s how I roll and without that it wouldn&#39;t add anything to the existing answer that was there."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": true, "score": 6, "last_activity_date": 1561604104, "last_edit_date": 1561604104, "creation_date": 1561581872, "answer_id": 56780621, "question_id": 56780384, "link": "https://stackoverflow.com/questions/56780384/is-it-possible-to-read-half-written-corrupt-primitive-variable-when-using-multi/56780621#56780621", "title": "Is it possible to read half-written, corrupt primitive variable when using multithreading in C++?", "body": "<p>By the wording of the standard yes: accessing the same non-<code>atomic</code> object from more than one thread, where at least one access is a write, is undefined behavior. So not only could you see \"half-written\" or \"corrupt\" primitive data, <em>other</em> things are possible such as corruption of unrelated data, infinite loops, your computer becoming sentient and building a time machine and traveling to the past to convince your ancestors never to pursue the activities that would lead to your birth, segmentation faults, noxious gases being emitted from your USB ports, etc.</p>\n\n<p><em>In practice</em>, I'm not aware of how this could happen on <em>modern</em> architectures when writing aligned values of primitive types, other than \"wide\" primitive types that aren't natively supported by the hardware (e.g., some multi-socket AMD machines fail to write aligned 128-bit values atomically). Compilers will generally emit full-width loads and stores, so I don't know of a realistic scenario where you'd be tripped up by e.g. a compiler transforming a 32-bit store into two 16-bit stores, although it is <em>perfectly within its rights to</em>. </p>\n\n<p>That doesn't mean you should do it: the compiler can make <em>other</em> assumptions that can trip you up: e.g., that the value never changes and hence it doesn't need to be re-read at all. More importantly, what you may want is <code>std::atomic</code> in concert with <code>std::memory_order_relaxed</code> in key places which often has zero or almost zero performance implications. It's a sharp tool though.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11313931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "closed_date": 1561635025, "accepted_answer_id": 56780621, "answer_count": 2, "score": 3, "last_activity_date": 1561604104, "creation_date": 1561580775, "last_edit_date": 1561582319, "question_id": 56780384, "link": "https://stackoverflow.com/questions/56780384/is-it-possible-to-read-half-written-corrupt-primitive-variable-when-using-multi", "closed_reason": "Needs more focus", "title": "Is it possible to read half-written, corrupt primitive variable when using multithreading in C++?", "body": "<p>If on one thread I would be writing to a primitive-type variable, such as <code>int</code>, and the other would be reading it, would there be a possibility of reading partially modified data, as with more complex data types?</p>\n\n<p>If yes, then would my only rescue be either <code>atomic</code> or <code>mutex</code> or is there a solution with less performance overhead?</p>\n"}, {"tags": ["c++", "ios", "xcode", "unity3d"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1561584848, "post_id": 56780358, "comment_id": 100117333, "body": "Step 1) Fix all warnings."}, {"owner": {"reputation": 379, "user_id": 4889133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3eb127067fb91e7bf340d28f3d59da79?s=128&d=identicon&r=PG&f=1", "display_name": "lawrencehagman", "link": "https://stackoverflow.com/users/4889133/lawrencehagman"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1561685376, "post_id": 56780358, "comment_id": 100154629, "body": "That was part of the question. How do I fix warnings from native unity code? Or does this mean there is a version conflict with Xcode and unity. Sorry to speculate so much... perhaps by &quot;fix&quot; you mean something other than rewriting unity code."}], "owner": {"reputation": 379, "user_id": 4889133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3eb127067fb91e7bf340d28f3d59da79?s=128&d=identicon&r=PG&f=1", "display_name": "lawrencehagman", "link": "https://stackoverflow.com/users/4889133/lawrencehagman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562097490, "creation_date": 1561580653, "last_edit_date": 1562097490, "question_id": 56780358, "link": "https://stackoverflow.com/questions/56780358/xcode-10-2-1-hangs-when-building-unity-2019-1-2-project", "title": "Xcode 10.2.1 hangs when building unity 2019.1.2 project", "body": "<p>I'm attempting to do an iOS build for a unity project for the first time and have been able to export from unity without any errors. </p>\n\n<p>When I \"Run\" project in Xcode it starts but then hangs. I've noticed thousands of warnings \"Code will never be executed\" with GenericMethods.cpp but no exceptions. I'm also getting tens of thousands of warnings from UnityRendering.h saying \"This function declaration is not a prototype\".</p>\n\n<p>The files seems to be part of the Native code base so I'm not sure what to do or if so many warnings can cause the freeze.</p>\n\n<p>Im setup as a developer in Xcode and am using \"automatic signing\" with the Team option selected. I don't think this is a profile issue since it would probably throw an error.</p>\n\n<p>I've tried other suggestions of removing ProceduralToolkit (which is not in this unity version) as well as using command line Xcode to build.</p>\n\n<p>Archiving the project hangs at 600 of 616.</p>\n\n<p>Here's one example of the warnings in the unity code:</p>\n\n<p>Classes>Unity/UnityRendering.h </p>\n\n<p><a href=\"https://ibb.co/XY4VpVS\" rel=\"nofollow noreferrer\"><img src=\"https://i.ibb.co/XY4VpVS/Screen-Shot-2019-07-02-at-12-46-44-PM.png\" alt=\"Screen-Shot-2019-07-02-at-12-46-44-PM\"></a></p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561580449, "post_id": 56780261, "comment_id": 100115638, "body": "What&#39;s the version number of a binary built?"}, {"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561580663, "post_id": 56780261, "comment_id": 100115740, "body": "I mean the file version number"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561580829, "post_id": 56780261, "comment_id": 100115825, "body": "There&#39;s no such thing like a <i>&quot;file vwrsion number&quot;</i> unless you introduce some repository database like SVN or such."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1561580879, "post_id": 56780261, "comment_id": 100115848, "body": "Do you mean the <code>soname</code> (including version) of a shared library?   A generic ELF executable does not contain any standardized &quot;version number&quot; of the executable AFAIK. But, you can embed whatever info you like in a custom ELF header or section, for <i>your own</i> use - just don&#39;t expect anyone else to pay it any attention."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1561582030, "post_id": 56780261, "comment_id": 100116311, "body": "Back in the day, people used the <code>rcs</code> versioning system and put strings in each <code>.c</code> file, like <code>static char const rcsid[] = &quot;$Id: f.c,v 5.4 1993&#47;11&#47;09 17:40:15 eggert Exp $&quot;;</code>. These strings could later be extracted with <code>ident binary</code> to get a list of all the object files used to build the binary. I think that practise stopped last millennia."}], "answers": [{"comments": [{"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 0, "creation_date": 1561582471, "post_id": 56780372, "comment_id": 100116501, "body": "Thanks for the info. Seems like a lot of hassle for something small. I think it might be easier if the program outputs the version when you run with a &#39;--version&#39; flag. Ideally I shouldn&#39;t have to run the program at all."}], "tags": [], "owner": {"reputation": 939, "user_id": 1005533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ae3da561bd8b1dbf8e0330cc73ecbd78?s=128&d=identicon&r=PG", "display_name": "zapredelom", "link": "https://stackoverflow.com/users/1005533/zapredelom"}, "is_accepted": false, "score": 0, "last_activity_date": 1561580723, "creation_date": 1561580723, "answer_id": 56780372, "question_id": 56780261, "link": "https://stackoverflow.com/questions/56780261/any-way-to-set-version-of-a-binary-built-with-g/56780372#56780372", "title": "Any way to set version of a binary built with g++?", "body": "<p>there is no such thing as ELF file version in Linux environment but this answer can help you to make workaround about it <a href=\"https://stackoverflow.com/questions/16349557/does-gcc-have-any-options-to-add-version-info-in-elf-binary-file\">Does gcc have any options to add version info in ELF binary file?</a></p>\n"}], "owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561580723, "creation_date": 1561580226, "question_id": 56780261, "link": "https://stackoverflow.com/questions/56780261/any-way-to-set-version-of-a-binary-built-with-g", "title": "Any way to set version of a binary built with g++?", "body": "<p>Is there any way you can set the version number of a binary built with g++ on Linux? I know on Windows this is quite easy in the project settings of Visual Studio but can you do it on Linux? I'm using eclipse as my IDE.</p>\n"}, {"tags": ["c++", "string", "concatenation", "concat", "string-concatenation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1561579644, "post_id": 56780127, "comment_id": 100115331, "body": "Whenever possible use <code>std::wstring</code> as it takes care of buffer allocation and release. Option 2 and 3 have the potential for overflow if you&#39;re using user data, which is super bad."}, {"owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1561579778, "post_id": 56780127, "comment_id": 100115392, "body": "but what about speed? is std::wstring slower than the other ones? Speed is very important for my usecase"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1561579837, "post_id": 56780127, "comment_id": 100115412, "body": "The only way to know for certain is to profile it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1561579941, "post_id": 56780127, "comment_id": 100115443, "body": "Speed doesn&#39;t matter if you&#39;re leaking memory all over the place or have massive buffer overflow bugs. That being said, as Nathan hints, profile it. Test under the most extreme conditions you can to learn more about the performance characteristics. Speed can be &quot;important&quot; but that doesn&#39;t mean  you need the absolute fastest solution, you just need something acceptably fast and <code>wstring</code> is good at what it does. Faster solutions may be UTF ignorant and can cause all kinds of problems."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1561580132, "post_id": 56780127, "comment_id": 100115518, "body": "... and you need to profile your final code, of course. Switching between <code>LPCWSTR</code> and <code>wstring</code> forth and back might not be necessary at all if you stick to <code>wstring</code> throughout; and you would have the benefit of move semantics and safer memory management. Note, for example, that <code>LPCWSTR result = stdResult.c_str();</code> may easily lead to UB once <code>stdResult</code> is manipulated afterwards or goes out of scope."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1561584967, "post_id": 56780127, "comment_id": 100117363, "body": "it depends what are you doing how you use result string. Versions 2 and 3 are turbo fast since they do not allocate on heap. Also it is possible to create C++ class which will be as fast as no heap version and will be more flexible then C versions."}, {"owner": {"reputation": 10736, "user_id": 1062992, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2d3849786559e53d889305a3a7dff85e?s=128&d=identicon&r=PG&f=1", "display_name": "egerardus", "link": "https://stackoverflow.com/users/1062992/egerardus"}, "edited": false, "score": 0, "creation_date": 1561596772, "post_id": 56780127, "comment_id": 100119919, "body": "@SinOfficial Try not to take a downvote as personal criticism, though I did not downvote I am pretty sure that the downvotes are not because you do not know the answer but because the question asks for an opinion. A question asking for an opinion <a href=\"https://stackoverflow.com/help/closed-questions\">violates the type of question that is wanted on this site</a>, there are other sites that appreciate questions asking for opinions."}, {"owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "reply_to_user": {"reputation": 10736, "user_id": 1062992, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2d3849786559e53d889305a3a7dff85e?s=128&d=identicon&r=PG&f=1", "display_name": "egerardus", "link": "https://stackoverflow.com/users/1062992/egerardus"}, "edited": false, "score": 0, "creation_date": 1561641957, "post_id": 56780127, "comment_id": 100138590, "body": "@Geronimo So speed and security are considered subjective opinions? If you only read the title of the question it sounds like a opinionated question but if you read the whole question it is clear that speed and security is asked for, which is defenetly not asking for opinions."}, {"owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "edited": false, "score": 0, "creation_date": 1561665820, "post_id": 56780127, "comment_id": 100150237, "body": "I edited the title to make it more clear that speed and security are the properties of the methods that i want to know"}, {"owner": {"reputation": 10736, "user_id": 1062992, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2d3849786559e53d889305a3a7dff85e?s=128&d=identicon&r=PG&f=1", "display_name": "egerardus", "link": "https://stackoverflow.com/users/1062992/egerardus"}, "edited": false, "score": 0, "creation_date": 1561703233, "post_id": 56780127, "comment_id": 100158153, "body": "@SinOfficial not bad, I would suggest losing the word &quot;recommended&quot; in the text also. It invites a discussion and argument which is more of a forum type posting as opposed to Q&amp;A which allows for a definite answer. The question is now <code>on hold</code> which means it will get reviewed again and the <code>close</code> can get overturned."}, {"owner": {"reputation": 10736, "user_id": 1062992, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2d3849786559e53d889305a3a7dff85e?s=128&d=identicon&r=PG&f=1", "display_name": "egerardus", "link": "https://stackoverflow.com/users/1062992/egerardus"}, "edited": false, "score": 0, "creation_date": 1561703504, "post_id": 56780127, "comment_id": 100158242, "body": "@SinOfficial Gonna propose a change to the Q that I would consider passable, you can always roll it back if you don&#39;t like it."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1561580275, "post_id": 56780241, "comment_id": 100115566, "body": "<code>std::wstring</code> has <code>reserve</code> so you can work around the risk of reallocation."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561580312, "post_id": 56780241, "comment_id": 100115581, "body": "Yes, I &#39;m trying to indicate him that his problem is the memory allocation issue, not the copying speed."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1561580391, "post_id": 56780241, "comment_id": 100115617, "body": "and <code>wstring</code> maintains a <code>length</code>, with might be an advantage compared to the speed of <code>wcscat</code>"}, {"owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "edited": false, "score": 0, "creation_date": 1561583917, "post_id": 56780241, "comment_id": 100117032, "body": "My application currently uses method 3 and i dont know if it is worth replacing it with 1 or 2. I dont know if std::wstring is worth the (potential) speed loss because due to the origin of the strings it is impossible for the buffer to overflow and my application is working with audio data and every milisecond is worth gold."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "edited": false, "score": 0, "creation_date": 1561586733, "post_id": 56780241, "comment_id": 100117855, "body": "@SinOfficial I&#39;m a professional audio developer and I had never issues with STL, working with ASIO buffers with super low latency and VSTs. You can cope with std::wstring, speed is too high for PC audio nowadays. Even if that means recording from 32 channels."}, {"owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "edited": false, "score": 0, "creation_date": 1561588234, "post_id": 56780241, "comment_id": 100118270, "body": "@Michael Chourdakis Im trying to optimize every line of my code to get the lowest latency possible, especially because im using a FFT. But i think probably right, it wont make such a big difference anyways. Thanks for your answer to this question."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561588321, "post_id": 56780241, "comment_id": 100118300, "body": "FFT is enough fast for considering all these."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": true, "score": 4, "last_activity_date": 1561580402, "last_edit_date": 1561580402, "creation_date": 1561580121, "answer_id": 56780241, "question_id": 56780127, "link": "https://stackoverflow.com/questions/56780127/fastest-and-or-safest-way-to-concatenate-two-wide-strings-in-c/56780241#56780241", "title": "Fastest and/or safest way to concatenate two wide strings in c++?", "body": "<p>The examples are not proper.\nFor example, in your <code>wcscat</code> variation, there is no additional memory allocation, so it is as rapid as it will ever get.</p>\n\n<p>When doing a <code>+=</code> on a <code>std::wstring</code>, speed mostly depends on whether <code>std::wstring</code> will have to reallocate.</p>\n\n<p>Therefore, your problem reduces to the memory allocation issue. If there is memory allocated already, then <code>wstring</code> should perform as fast as you would need.</p>\n\n<p>The other issue is what others have noticed already, that you want <em>reasonable</em> speed and <em>maximum</em> safety. If you plan on too many concatenations and your profiler shows significant speed issues, then you can implement your own allocator. </p>\n"}], "owner": {"reputation": 455, "user_id": 7350348, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HKc0Qhh_oB4/AAAAAAAAAAI/AAAAAAAAAV8/jyI88Absc8c/photo.jpg?sz=128", "display_name": "SinOfficial", "link": "https://stackoverflow.com/users/7350348/sinofficial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "closed_date": 1561597146, "accepted_answer_id": 56780241, "answer_count": 1, "score": 1, "last_activity_date": 1561703694, "creation_date": 1561579520, "last_edit_date": 1561703694, "question_id": 56780127, "link": "https://stackoverflow.com/questions/56780127/fastest-and-or-safest-way-to-concatenate-two-wide-strings-in-c", "closed_reason": "Opinion-based", "title": "Fastest and/or safest way to concatenate two wide strings in c++?", "body": "<p>Is one of the following wide string concatenation methods faster and/or safer than the other?</p>\n\n<p>1) std::wstring</p>\n\n<pre><code>LPCWSTR str1 = L\"string 1,\";\nLPCWSTR str2 = L\"string 2\";\n\nstd::wstring stdResult = std::wstring(str1) + str2;\nLPCWSTR result = stdResult.c_str();\n</code></pre>\n\n<p>2) wcscpy_s, wcscat_s</p>\n\n<pre><code>WCHAR buf[128];\n\nLPCWSTR str1 = L\"string 1,\";\nLPCWSTR str2 = L\"string 2\";\n\nwcscpy_s(buf, str1);\nwcscat_s(buf, str2);\nLPCWSTR result = buf;\n</code></pre>\n\n<p>3) _snwprintf_s </p>\n\n<pre><code>WCHAR buf[128];\n\nLPCWSTR str1 = L\"string 1,\";\nLPCWSTR str2 = L\"string 2\";\n\n_snwprintf_s(buf, _TRUNCATE, L\"%s%s\", str1, str2);\nLPCWSTR result = buf;\n</code></pre>\n\n<p>or is there a faster/safer method?</p>\n\n<p>Of these, what is the best option in terms of:</p>\n\n<ul>\n<li>Speed</li>\n<li>Security</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "vector", "export-to-csv", "stdvector"], "comments": [{"owner": {"reputation": 333, "user_id": 9987237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c29e3310153a9b89ddeaed06c8d1ce9?s=128&d=identicon&r=PG&f=1", "display_name": "Mance Rayder", "link": "https://stackoverflow.com/users/9987237/mance-rayder"}, "edited": false, "score": 0, "creation_date": 1561580500, "post_id": 56780058, "comment_id": 100115665, "body": "What do you mean by &quot;a series of vectors&quot;? What have you tried so far?"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1561582595, "post_id": 56780058, "comment_id": 100116544, "body": "unless the question is <code>is there a way to solve the halting problem?</code>, the answer is almost always <code>yes</code>. What have you tried? Do you know how vector indexing works?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11705205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhPGHKhPi04/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfDPDAhTSs6gsdNKwapOt-dGcjEQw/photo.jpg?sz=128", "display_name": "Khushimia", "link": "https://stackoverflow.com/users/11705205/khushimia"}, "is_accepted": true, "score": 2, "last_activity_date": 1561582739, "creation_date": 1561582739, "answer_id": 56780814, "question_id": 56780058, "link": "https://stackoverflow.com/questions/56780058/c-vectors-forming-the-columns-of-a-csv-file/56780814#56780814", "title": "C++ : Vectors forming the columns of a CSV file?", "body": "<pre><code>#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    // series of vectors could be put in another collection\n    vector&lt;double&gt; col1 = { 0, 1, 2 };\n    vector&lt;double&gt; col2 = { 3, 4, 5 };\n    vector&lt;double&gt; col3 = { 6, 7, 8 };\n\n    ofstream csvfile(\"series_vectors.csv\");\n    if (csvfile.is_open())\n    {\n        // it is possible that the vectors are not of the same size\n        // if you get the maximum, then you may need to fill in empty fields \n        //     for some of the columns\n        int num_of_rows = min({ col1.size(), col2.size(), col3.size() });\n        for (int i = 0; i &lt; num_of_rows; i++)\n        {\n            csvfile &lt;&lt; col1[i] &lt;&lt; \",\" &lt;&lt; col2[i] &lt;&lt; \",\" &lt;&lt; col3[i] &lt;&lt; endl;\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"File could not be opened\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11705178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0534f5b24766905c88f29858e86c6b63?s=128&d=identicon&r=PG", "display_name": "gb4", "link": "https://stackoverflow.com/users/11705178/gb4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1561623243, "accepted_answer_id": 56780814, "answer_count": 1, "score": -3, "last_activity_date": 1561582739, "creation_date": 1561578704, "question_id": 56780058, "link": "https://stackoverflow.com/questions/56780058/c-vectors-forming-the-columns-of-a-csv-file", "closed_reason": "Needs more focus", "title": "C++ : Vectors forming the columns of a CSV file?", "body": "<p>Is there a way to take a series of vectors in C++ and output a CSV file where the columns of the CSV file are the elements of the vectors respectively? So column 1 would be the elements of say the first vector of doubles for examples, etc. </p>\n"}, {"tags": ["c++", "gcc", "c++17", "std-filesystem", "gcc9"], "comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1561578371, "post_id": 56779977, "comment_id": 100115130, "body": "I don&#39;t see anything wrong with the code you posted.  Maybe there&#39;s something wrong with the way you&#39;re creating and managing your <code>FileBrowser</code> objects?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1561579516, "post_id": 56779977, "comment_id": 100115288, "body": "maybe related: <a href=\"https://stackoverflow.com/questions/56615841/passing-stdfilesystempath-to-a-function-segfaults\" title=\"passing stdfilesystempath to a function segfaults\">stackoverflow.com/questions/56615841/&hellip;</a>"}, {"owner": {"reputation": 59, "user_id": 11704740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed2583419d5fd55a5b44af2e029b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Miami", "link": "https://stackoverflow.com/users/11704740/miami"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1561584201, "post_id": 56779977, "comment_id": 100117128, "body": "@NathanOliver I mentioned the segfault issue from that post in the second paragraph. I&#39;m already using g++-9 as a workaround for that problem."}], "answers": [{"comments": [{"owner": {"reputation": 18619, "user_id": 131926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804b29a5834d3055e11455b9e41e5515?s=128&d=identicon&r=PG", "display_name": "Steven Sudit", "link": "https://stackoverflow.com/users/131926/steven-sudit"}, "edited": false, "score": 0, "creation_date": 1561675009, "post_id": 56798856, "comment_id": 100153003, "body": "Off-hand, I&#39;d think the two would be equivalent, so maybe something else is wrong here and your change &quot;fixes&quot; it  by coincidence."}, {"owner": {"reputation": 18619, "user_id": 131926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804b29a5834d3055e11455b9e41e5515?s=128&d=identicon&r=PG", "display_name": "Steven Sudit", "link": "https://stackoverflow.com/users/131926/steven-sudit"}, "edited": false, "score": 0, "creation_date": 1561675093, "post_id": 56798856, "comment_id": 100153028, "body": "I just noticed that there are comments that look like valgrind output. Perhaps valgrind is right."}], "tags": [], "owner": {"reputation": 59, "user_id": 11704740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed2583419d5fd55a5b44af2e029b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Miami", "link": "https://stackoverflow.com/users/11704740/miami"}, "is_accepted": true, "score": 0, "last_activity_date": 1561672272, "creation_date": 1561672272, "answer_id": 56798856, "question_id": 56779977, "link": "https://stackoverflow.com/questions/56779977/c-double-free-when-using-stdfilesystempath-in-a-vector/56798856#56798856", "title": "c++ - double free when using std::filesystem::path in a vector", "body": "<p>I found a solution for the problem. Updating <code>currentPath</code> with the <code>assign(...)</code> function instead of the assignment operator <code>=</code> seems to fix the problem.</p>\n"}], "owner": {"reputation": 59, "user_id": 11704740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ed2583419d5fd55a5b44af2e029b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Miami", "link": "https://stackoverflow.com/users/11704740/miami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 56798856, "answer_count": 1, "score": 2, "last_activity_date": 1561672272, "creation_date": 1561578106, "question_id": 56779977, "link": "https://stackoverflow.com/questions/56779977/c-double-free-when-using-stdfilesystempath-in-a-vector", "title": "c++ - double free when using std::filesystem::path in a vector", "body": "<p>I'm working on a bare-bones file browser using <a href=\"https://github.com/ocornut/imgui\" rel=\"nofollow noreferrer\">DearImgui</a>. For this i'm using std::filesystem with g++-9 and am currently testing on Kubuntu 19.04. For the most part the program works as expected. A button is used to descend into the parent directory and a child directory can be opened by double clicking on it. Most of the time i can navigate through the entire filesystem without issues, however certain combinations of commands cause the program to abort. The exact error message varies but is always related to a double free error.</p>\n\n<p>Before adding std::filesystem to my application i was using g++-8 (Ubuntu 8.3.0-6ubuntu1). However the program kept segfaulting after calling something filesystem related. This appears to be a known issue and should be fixed with 8.3.0-7 <a href=\"https://bugs.launchpad.net/ubuntu/+source/gcc-8/+bug/1824721\" rel=\"nofollow noreferrer\">(source)</a>. In the meantime i decided to use g++-9 (Ubuntu 9.1.0-2ubuntu2~19.04). I am not sure if this might be the cause of my problem.</p>\n\n<p>Here is the code that causes the abort:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace fs = std::filesystem;\nstruct FileBrowser {\n\n    fs::path currentPath = fs::current_path();\n    std::vector&lt;fs::path&gt; files;\n\n    void UpdateFiles() {\n        files.clear();\n        for (auto&amp; entry : fs::directory_iterator(currentPath))\n            files.push_back(entry.path()); // Leak_DefinitelyLost\n    }\n\n    void DrawContent() {\n        if (BackButtonPressed &amp;&amp; currentPath.has_parent()) {\n            currentPath = currentPath.parent_path(); // Jump depends on uninitialised value\n            UpdateFiles();\n        }\n\n        static bool invalidate = false;\n        for (auto&amp; entry : files) {\n            if (ClickedOnThisEntry &amp;&amp; fs::is_directory(entry)) {\n                currentPath = entry; // InvalidRead\n                invalidate = true;\n            }\n        }\n        if (invalidate) {\n            UpdateFiles();\n            invalidate = true;\n        }\n    }\n\n};\n</code></pre>\n\n<p>When running the program with Valgrind it reports a leak when updating the path vector and an uninitialised condition. <strong>The main error seems to be the Invalid Read when trying to copy the selected path into the current path.</strong></p>\n\n<p>A reproducable example would require SDL2 and imgui. I can post one if somebody is interested.</p>\n\n<p>What's interesting is that when i run the program in gdb and trigger an abort i can no longer use my mouse to click on anything (even unrelated applications like firefox). I can still use the keyboard and kill gdb through the command line. Something like that has not happened before in this project and i can't reproduce it in an unrelated part of the program. This could be caused by Imgui but i doubt it.</p>\n"}, {"tags": ["python", "c++", "algorithm"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1561578123, "post_id": 56779960, "comment_id": 100115025, "body": "There are already a lot of posts here on this specific problem. In facy tou can make it <i>O(n)</i>."}, {"owner": {"reputation": 11, "user_id": 11705111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0175b274c9d0fdfd35b9a7e98a29ad84?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Taylor", "link": "https://stackoverflow.com/users/11705111/ross-taylor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1561578235, "post_id": 56779960, "comment_id": 100115073, "body": "i want to do it in O(log n) not O(n)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1561578294, "post_id": 56779960, "comment_id": 100115098, "body": "what is <i>m</i> here? Furthermore I mean <i>O(n)</i> to find the minimum, not <i>log(n)</i> for a single query."}, {"owner": {"reputation": 11, "user_id": 11705111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0175b274c9d0fdfd35b9a7e98a29ad84?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Taylor", "link": "https://stackoverflow.com/users/11705111/ross-taylor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1561578436, "post_id": 56779960, "comment_id": 100115154, "body": "m is the number of queries and n is number of array elements, a query can update array element by arr[i]*=val and another type of query needs to print the index where minimum abs diff occurs"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "edited": false, "score": 0, "creation_date": 1561587063, "post_id": 56779960, "comment_id": 100117951, "body": "When are these m update queries being done? Every time after you return the minimum abs difference index?"}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "reply_to_user": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "edited": false, "score": 0, "creation_date": 1561612554, "post_id": 56779960, "comment_id": 100122817, "body": "@JuanCarlosRamirez Can you show me other posts on this same question ?"}], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561612883, "post_id": 56782467, "comment_id": 100122924, "body": "Your solution is good, but the value of elements in the array is too big, if we take log of it, we&#39;ll have to deal with precision problem of 18 digits, even while comparing, it will take a toll on us :"}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561615446, "post_id": 56782467, "comment_id": 100123748, "body": "example...log10(29867969678)= 10.475205701760142 , but in C++, it gives....log10(29867969678)= 10.4752  ...It means all our calculations of ternary search will go wrong :("}, {"owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "reply_to_user": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561615489, "post_id": 56782467, "comment_id": 100123768, "body": "Then you can try by using log10^9()"}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561615942, "post_id": 56782467, "comment_id": 100123928, "body": "What is log 10^9() may I ask ? I typed it in the gcc. compiler and it showed error :p"}, {"owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "reply_to_user": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561616273, "post_id": 56782467, "comment_id": 100124054, "body": "I don&#39;t have any idea too :("}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 1, "creation_date": 1561616346, "post_id": 56782467, "comment_id": 100124085, "body": "I am searching extensively on the internet on how to deal with log precision stuff....as soon as I GET IT. I&#39;ll  tell you and then you can update your answer."}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561625378, "post_id": 56782467, "comment_id": 100128769, "body": "can you tell me how can I do binary search/ternary search to get &#39;x&#39; in log(n)  time ? You may assume I&#39;ve all the prefix and suffix sums precomputed :-)"}, {"owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "reply_to_user": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 1, "creation_date": 1561626186, "post_id": 56782467, "comment_id": 100129276, "body": "Binary search will not work here . Use ternary search on x only! In ternary search you will have two key index mid1 and mid2 . Based on the result of mid1 and mid2 find the most feasible one."}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561630175, "post_id": 56782467, "comment_id": 100131618, "body": "@mahbubsceju Sadly, I&#39;ve realized that ternary search will not work as our array is not sorted...even though th prefix array is always sorted...ternary search simply does not work as the absolute difference can be anything for every indice....say our array is :-  1 1 1 2 3 1 ......For x=0; y=absolute-difference=7, for x=1, y=5, for x=2,y=4,....for x=3,y=1....for x=4,y=7....so y={7,5,4,1,7} .... so you can see that y increases at few places...and decrease at other places, it is independent of the indices, so ternary search won&#39;t be fruitful :("}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561632567, "post_id": 56782467, "comment_id": 100132941, "body": "Contradicting my own words, I&#39;ve reached a simple solution which uses binary search :-)"}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "reply_to_user": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561674632, "post_id": 56782467, "comment_id": 100152922, "body": "I don&#39;t see how either ternary or binary search, or a segment tree are helpful here. Could you please explain the full algorithm? (No need for code, just a specific description of how the update and finding the requested minimum would be achieved.) (cc @Guhfggehlthon)"}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561696758, "post_id": 56782467, "comment_id": 100156363, "body": "After taking log, all you gotta do is find 2-subarrays with min. Absolute difference. That is:- (a(i)+...a(x))-((a(x+1)+....a(n)) ."}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1561696796, "post_id": 56782467, "comment_id": 100156376, "body": "So on the prefix array, just do binary search for x/2, where x=sum of prefix array :-)"}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "reply_to_user": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1562246900, "post_id": 56782467, "comment_id": 100324960, "body": "@Guhfggehlthon we can only binary search on sorted arrays. The prefix sum array is not guaranteed to be sorted if elements can be negative."}, {"owner": {"reputation": 265, "user_id": 9582357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Firex Firexo", "link": "https://stackoverflow.com/users/9582357/firex-firexo"}, "edited": false, "score": 0, "creation_date": 1562354968, "post_id": 56782467, "comment_id": 100361286, "body": "@mahbubcseju Can you desrive the solution to this problem:- <a href=\"https://stackoverflow.com/questions/56908323/how-can-i-solve-this-dynamic-programming-problem\" title=\"how can i solve this dynamic programming problem\">stackoverflow.com/questions/56908323/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1842, "user_id": 8695011, "user_type": "registered", "profile_image": "https://graph.facebook.com/886368414871996/picture?type=large", "display_name": "mahbubcseju", "link": "https://stackoverflow.com/users/8695011/mahbubcseju"}, "is_accepted": false, "score": 1, "last_activity_date": 1561595634, "last_edit_date": 1561595634, "creation_date": 1561595215, "answer_id": 56782467, "question_id": 56779960, "link": "https://stackoverflow.com/questions/56779960/get-the-element-for-which-the-absolute-difference-between-left-half-product-and/56782467#56782467", "title": "Get the element for which the absolute difference between left half product and right half product is minimum", "body": "<p><strong>The only approach comes in my mind:</strong></p>\n\n<p>Multiplication of such a big number is hard.</p>\n\n<p>we can covert this as </p>\n\n<blockquote>\n  <p>log10(A[1]<em>A[2]</em>...*A[x])- log10(A[x+1]<em>A[x+2]</em>..*A[n])<br>\n  log10(A[1])+log10(A[2])+..+log10(A[x])-log10(A[x+1])+log10(A[x+2])+..+log10(A[n])</p>\n</blockquote>\n\n<p>Now these result are storable in double.</p>\n\n<p>As abs((A[1]<em>A[2]</em>...*A[x])- (A[x+1]<em>A[x+2]</em>..*A[n])) should be minimized,\n  this equation will follow the rules of ternary search.</p>\n\n<p>So in each iternation of ternary search we need the result of </p>\n\n<blockquote>\n  <p>log(A[1])+log(A[2])+..+log(A[x])<br>\n      and<br>\n       log(A[x+1])+log(A[x+2])+..+log(A[n])</p>\n</blockquote>\n\n<p>As  there is some update, we need a data structure for finding them with lower \ncomplexity like segment tree.</p>\n\n<p>So overall complexity will be log(n)*log(n)  for each query.</p>\n"}], "owner": {"reputation": 11, "user_id": 11705111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0175b274c9d0fdfd35b9a7e98a29ad84?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Taylor", "link": "https://stackoverflow.com/users/11705111/ross-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1561595634, "creation_date": 1561578018, "last_edit_date": 1561580597, "question_id": 56779960, "link": "https://stackoverflow.com/questions/56779960/get-the-element-for-which-the-absolute-difference-between-left-half-product-and", "title": "Get the element for which the absolute difference between left half product and right half product is minimum", "body": "<p>I want to find the element in a given array (n elements) such that the absolute difference between the left half product and the right half product is minimum </p>\n\n<pre><code>(abs(arr[0]*arr[1]*...arr[x]-arr[x+1]*arr[x+2]...arr[n]))\n</code></pre>\n\n<p>the question also updates the values of the array regularly 'm' times. I want to get answers of all queries in O(m log n).</p>\n\n<p>I have tried an approach which takes O(n*m) time and it is not working due to TLE error.</p>\n"}, {"tags": ["c++", "visual-c++", "arguments", "parameter-passing"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1561579919, "post_id": 56779870, "comment_id": 100115436, "body": "Look at the other parameter and its argument."}], "answers": [{"tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": true, "score": 2, "last_activity_date": 1561625303, "last_edit_date": 1561625303, "creation_date": 1561579938, "answer_id": 56780198, "question_id": 56779870, "link": "https://stackoverflow.com/questions/56779870/passing-through-subclass-as-parameter-using-this/56780198#56780198", "title": "Passing through subclass as parameter using this", "body": "<p>Well, the error is quite clear to me. <code>new Hand()</code> returns <code>Hand*</code>, not a <code>Hand</code> required by the <code>StandAction</code>constructor. So you probably want <code>new StandAction(this,Hand());</code></p>\n\n<p>Please don't use <code>new</code>, use <code>std::unique_ptr&lt;T&gt;</code> and return <code>std::unique_ptr&lt;Action&gt;</code> by value. It's good practice to only use raw pointers for a non-owning relationship unless you know what you are doing. </p>\n\n<p><strong>EDIT:</strong> Using <code>unique_ptr</code>:</p>\n\n<pre><code>std::unique_ptr&lt;Action&gt; Gambler::GetAction(int input) {\n    std::unique_ptr&lt;Action&gt; action;\n    switch (input) {\n    case 1:\n        action = std::make_unique&lt;StandAction&gt;(this, Hand());\n        break;\n    default:\n        break;\n    }\n    return action;\n}\n</code></pre>\n\n<p>Since you are casting <code>StandAction*</code> to <code>Action*</code> in both cases, make sure that <code>Action::~Action()</code> is virtual.</p>\n"}], "owner": {"reputation": 25, "user_id": 11653520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bqBajK-j2U0/AAAAAAAAAAI/AAAAAAAAAEw/QviBCPRfHro/photo.jpg?sz=128", "display_name": "PlaZinumia", "link": "https://stackoverflow.com/users/11653520/plazinumia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56780198, "answer_count": 1, "score": 0, "last_activity_date": 1561625303, "creation_date": 1561577578, "question_id": 56779870, "link": "https://stackoverflow.com/questions/56779870/passing-through-subclass-as-parameter-using-this", "title": "Passing through subclass as parameter using this", "body": "<p>I'm trying to send a class as a parameter to a constructor using <code>this</code> and I'm doing this in two different classes <code>CasinoDealer</code> and <code>Gambler</code>, so on the receiver end <code>StandAction</code> I have a constructor who is taking 2 arguments <code>performer</code> and <code>hand</code>.</p>\n\n<p>Performer is the class, but I have the argument as a base class whom <code>CasinoDealer</code> and <code>Gambler</code> both are inheriting; <code>Player</code> base class.</p>\n\n<p>I thought since the <code>Gambler</code> class or the <code>CasinoDealer</code> class were inheriting the <code>Player</code> base class, I could send the class using <code>this</code>, and the receiving end have <code>Player* performer</code> as the argument, and know which class who created the object, but apparently this doesn't work, so how would I do this?</p>\n\n<p>I left out some includes, and unimportant functions like that to minimize code posted.</p>\n\n<p>Gambler.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Action* Gambler::GetAction(int input) {\n    Action* action = nullptr;\n    switch (input) {\n    case 1:\n        action = new StandAction(this, new Hand());\n        break;\n    default:\n        break;\n    }\n    return action;\n}\n</code></pre>\n\n<p>Player.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Player {\npublic:\n    virtual Action* DecideNextMove() = 0;\n};\n\n</code></pre>\n\n<p>StandAction.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class StandAction : public Action {\npublic:\n    StandAction(Player* performer, Hand hand);\n    void Execute();\n};\n</code></pre>\n\n<p>StandAction.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>StandAction::StandAction(Player* performer, Hand hand) : Action(performer, hand) {\n\n}\n</code></pre>\n\n<p>It's complaining about no instance of constructor is matching argument list. I thought if the class I sent inherited <code>Player</code> it would be fine to pass as an argument, and have <code>Player* performer</code> on the receiver end.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>C++ no instance of constructor matches the argument list\n            argument types are: (Gambler *, Hand *)\n</code></pre>\n"}, {"tags": ["c++", "pointers", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1561577514, "post_id": 56779812, "comment_id": 100114747, "body": "You issue may stem from the non-standard header file <code>bits&#47;stdc++.h</code>.  Use standard headers not compiler specific."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561577545, "post_id": 56779812, "comment_id": 100114756, "body": "Getting myself back on topic, one of the best ways to debug linked lists is by drawing pictures. Draw the list. Then step by step perform all of the operations in the function you wish to debug on the list. When you find yourself drawing something silly, you just found a bug."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1561577560, "post_id": 56779812, "comment_id": 100114765, "body": "With <code>ListNode* A</code> you have a pointer, but without reserved memory for its contents. So, <code>A=NULL</code> should be <code>A= new ListNode()</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1561577573, "post_id": 56779812, "comment_id": 100114769, "body": "So, what are the results of your debugging session?"}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 2, "creation_date": 1561577616, "post_id": 56779812, "comment_id": 100114782, "body": "Easy fix: your loop iterates until <code>temp</code> is <code>NULL</code>. Then, you try to access the the <code>next</code> pointer in that location. You should iterate until <code>temp-&gt;next</code> is <code>NULL</code>, since that will be the tail of the list."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "edited": false, "score": 0, "creation_date": 1561577674, "post_id": 56779812, "comment_id": 100114807, "body": "Debugging: I get a segmentation fault at Line 20 : temp-&gt;next = addTo;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1561577777, "post_id": 56779812, "comment_id": 100114848, "body": "Great start. The next thing to do is use the debugger to  display all of the variables involved in that line. If you find something nasty like <code>temp</code> being null, work your way back through the code to see why it is null."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 0, "creation_date": 1561577954, "post_id": 56779812, "comment_id": 100114932, "body": "@anonmess close, but think on what happens if <code>temp</code> starts null."}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561578044, "post_id": 56779812, "comment_id": 100114984, "body": "@user4581301 ah good point, I always forget about that in a situation like this, since I always include a check first to see if <code>head</code> is <code>NULL</code>."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "reply_to_user": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 0, "creation_date": 1561578049, "post_id": 56779812, "comment_id": 100114987, "body": "@anonmess I tried that fix and I don&#39;t get the Seg fault anymore and now I understand why, but I still have the head node printed with some value."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561578091, "post_id": 56779812, "comment_id": 100115011, "body": "Something that will help later is knowing that you can pass an object through a pointer to be able to change the object, but sometimes you need to change the pointer itself and have to pass a pointer (or a reference) to the pointer."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1561578146, "post_id": 56779812, "comment_id": 100115036, "body": "@user4581301, Yes I got temp with a value 0x0 which I guess is NULL."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 0, "creation_date": 1561578242, "post_id": 56779812, "comment_id": 100115080, "body": "Yes 0x0 is NULL. @anonmess explained how to fix this problem."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561578266, "post_id": 56779812, "comment_id": 100115089, "body": "@user4581301 Thanks. Can you tell me more about what you&#39;re hinting at? Also, I fixed the seg fault with all of your help, but the head node&#39;s data is still getting printed."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1561578359, "post_id": 56779812, "comment_id": 100115122, "body": "Your code does not allow replacing head."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "edited": false, "score": 0, "creation_date": 1561578418, "post_id": 56779812, "comment_id": 100115150, "body": "I want the head to be just a pointer to the node where I want to start storing the data from. I don&#39;t want any data in head node. I am not sure if I&#39;m making complete sense here but isn&#39;t it how the abstract data structure is?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1561578476, "post_id": 56779812, "comment_id": 100115162, "body": "change <code>void Insert(int x , ListNode* head)</code> to <code>void Insert(int x , ListNode*&amp; head)</code> and head can be changed."}, {"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1561580132, "post_id": 56779812, "comment_id": 100115517, "body": "@drescherjm Thanks. I got the approach now."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "edited": false, "score": 0, "creation_date": 1561579790, "post_id": 56780114, "comment_id": 100115398, "body": "Great answer. Thanks a lot!"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "edited": false, "score": 0, "creation_date": 1561580432, "post_id": 56780114, "comment_id": 100115636, "body": "@Viktor If that answer your question, you could accept the answer by ticking the right mark on it."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 4, "last_activity_date": 1561580803, "last_edit_date": 1592644375, "creation_date": 1561579442, "answer_id": 56780114, "question_id": 56779812, "link": "https://stackoverflow.com/questions/56779812/seg-fault-linked-list-node-insertion-function-c/56780114#56780114", "title": "Seg Fault: Linked List Node Insertion Function [C++]", "body": "<h1>Problem 1:</h1>\n<pre><code>while(temp != NULL)\ntemp = temp-&gt;next;\n\ntemp-&gt;next = addTo;\n</code></pre>\n<p>Guarantees that <code>temp</code> will be <code>NULL</code> when <code>while(temp != NULL)</code> exits. that means there is no <code>temp</code> to get the <code>next</code> from.</p>\n<p>Rather than solve this here, I'm going to move on to problem 2 and kill two birds with one stone.</p>\n<h1>Problem 2:</h1>\n<pre><code>void Insert(int x , ListNode* head)\n</code></pre>\n<p>leaves you with no way to update the caller if <code>head</code> is changed in the <code>Insert</code> function. You can change the object pointed at by <code>head</code>, but <code>head</code> itself is just a copy of an address. If you change this copy to point at another address, the caller does not know.</p>\n<p>This means every time you call <code>Insert(&lt;number&gt;, A);</code>, <code>A</code> will always be <code>NULL</code>.</p>\n<h1>Solution:</h1>\n<p>Pass <code>head</code> into <code>Insert</code> by reference so that it can be updated.</p>\n<pre><code>void Insert(int x , ListNode*&amp; head)\n                             ^ reference to pointer\n</code></pre>\n<p><code>head</code>'s job is to point at the first item in the list. This makes means it does the same thing as any <code>next</code> pointer: It points at  the next item. The only difference is the name. We can get rid of this difference by adding an extra indirection, a pointer to <code>head</code>.</p>\n<pre><code>ListNode ** temp = &amp;head;\n</code></pre>\n<p>Note that we cannot use a reference (<code>ListNode *&amp; temp</code>) here because once you initialize a reference to refer to an object, it cannot be changed to refer to a different object. A pointer you can change, allowing us to iterate through the list and always point <code>temp</code> at the next <code>next</code>.</p>\n<p>Now <code>head</code> or any <code>next</code> is simply <code>temp</code>. This makes <code>head</code> exactly the same as every other <code>next</code> variable and no special cases are required.</p>\n<pre><code>void Insert(int x , ListNode*&amp; head)   \n{\n    ListNode* addTo = new ListNode(); \n    addTo-&gt;data = x;\n    addTo-&gt;next = NULL; // consider making a smarter ListNode constructor that makes \n                        // it impossible to forget to set next.\n\n    ListNode ** temp = &amp;head; // we can now manipulate the address in head through temp\n                  \n    while(*temp != NULL) // note the dereference to get the pointed at pointer\n                         // temp won't be null, but it could be pointing at a pointer \n                         // that is null, and that is the end of the list\n    { // I always use the optional braces. They prevent confusion.\n        temp = &amp;(*temp)-&gt;next; //get pointer to the next next pointer\n                               // we can now manipulate it exactly the same as head. \n    }\n    // we exit the loop with a pointer to the next pointer that we wish to point at \n    // the new list item regardless of whether it's head or the next of some later\n    // link in the list\n    *temp = addTo; // update the pointed at pointer with the new Node.\n}\n</code></pre>\n<p>The Community Addition the first answer of <a href=\"https://stackoverflow.com/questions/22121257/how-do-i-properly-delete-nodes-of-linked-list-in-c\">How do I properly delete nodes of linked list in C++</a> demonstrates how to use the same pointer-to-pointer trick to make removing nodes easy.</p>\n"}], "owner": {"reputation": 65, "user_id": 9077678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8caeff95b8e0002c5d7a923394aee3?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9077678/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56780114, "answer_count": 1, "score": -1, "last_activity_date": 1561580803, "creation_date": 1561577276, "last_edit_date": 1561580165, "question_id": 56779812, "link": "https://stackoverflow.com/questions/56779812/seg-fault-linked-list-node-insertion-function-c", "title": "Seg Fault: Linked List Node Insertion Function [C++]", "body": "<p>I have created a function called 'Insert' for inserting a new node in a Linked List. It takes the value and the head node for insertion.\nWhen I manually add the nodes myself, the program runs as expected however \nI get a segmentation fault when I use the function for adding a node.</p>\n\n<p>I am able to make the function work with a couple of little tweaks but there's another catch, I lose the head node's property of just being a pointer, it now contains some garbage data in it which gets printed when I print the LinkedList.</p>\n\n<p>The tweak I perform is:</p>\n\n<pre><code>Change Line 26 to: A-&gt;next = NULL;\nChange Line 17 to: while(temp-&gt;next != NULL)\n</code></pre>\n\n<p>The 'segmentation fault' occurs at Line 20 (when the tweak is not done):</p>\n\n<pre><code>Line 20 -----&gt;  temp-&gt;next = addTo;\n</code></pre>\n\n<p>I've already tried passing the arguments by reference, using global variables for the head node and checking the logic of the function.\nThe logic works for manually adding a node.</p>\n\n<p>I have attached the complete code below:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nstruct ListNode {\nint data;\nListNode *next;\n};\n\nvoid Insert(int x , ListNode* head)\n{\n    ListNode* addTo = new ListNode();\n    addTo-&gt;data = x;\n    addTo-&gt;next = NULL;\n\n    ListNode* temp;\n    temp = head;\n    while(temp != NULL)\n    temp = temp-&gt;next;\n\n    temp-&gt;next = addTo;\n}\n\nint main()\n{\n    ListNode* A;\n    A = NULL;\n\n    //Inserting A Node Manually\n    // ListNode* first = new ListNode();\n    // first-&gt;data = 9;\n    // first-&gt;next = NULL;\n    // while(A != NULL)\n    // A = A-&gt;next;\n    //     A = first;\n\n    //Inserting using Insert function.\n   Insert(2,A);Insert(3,A);Insert(6,A);Insert(7,A);\n\n    //Printing\n    ListNode* temp = A;\n    while(temp != NULL)\n    {\n        cout &lt;&lt; temp-&gt;data &lt;&lt; \" \";\n        temp = temp-&gt;next;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I expected the node to be added to the list as the logic seems to be correct, however I am getting a segmentation fault. </p>\n\n<p>Any help/insight into this would help a lot.</p>\n\n<p>Thank You.</p>\n"}, {"tags": ["c++", "c++11", "move", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 2, "creation_date": 1561576833, "post_id": 56779682, "comment_id": 100114468, "body": "std::unique_ptr cannot be duplicated in any way. If it&#39;s moved, ownership is passed. Use shared_ptr instead."}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 4, "creation_date": 1561576846, "post_id": 56779682, "comment_id": 100114476, "body": "Inner could store a reference or a (raw) pointer to the vector in outer rather than its own copy.  (As presumably all the Inner instances are own by an Outer, this does not seem risky.  Of course, be careful copying Outer objects..."}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 11663962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e738fd7dc3717eb7528a25ddba2c65e0?s=128&d=identicon&r=PG&f=1", "display_name": "SPD", "link": "https://stackoverflow.com/users/11663962/spd"}, "is_accepted": false, "score": 1, "last_activity_date": 1561580574, "creation_date": 1561580574, "answer_id": 56780342, "question_id": 56779682, "link": "https://stackoverflow.com/questions/56779682/pass-c-vector-of-unique-ptrt-without-passing-ownership/56780342#56780342", "title": "Pass C++ vector of unique_ptr&lt;T&gt; without passing ownership", "body": "<p>If Inner is supposed to access the same vector but not own it, why not let Inner keep a reference to the vector in Outer given the fact that they have the same life cycle?</p>\n\n<pre><code>class Inner\n{\n    public:\n    Inner(Elements&amp; vec):_vec(vec) {}\n    ~Inner() = default;\n\n    private:\n\n    Elements&amp; _vec;  // This is a reference to vector of unique_ptr, no ownership\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 3, "last_activity_date": 1561581257, "last_edit_date": 1561581257, "creation_date": 1561580915, "answer_id": 56780418, "question_id": 56779682, "link": "https://stackoverflow.com/questions/56779682/pass-c-vector-of-unique-ptrt-without-passing-ownership/56780418#56780418", "title": "Pass C++ vector of unique_ptr&lt;T&gt; without passing ownership", "body": "<p>You cannot have two <code>std::unique_ptr</code>s pointing to the same object.  <code>unique_ptr</code> implies <em>unique</em> ownership.</p>\n\n<p>If you need ownership to be shared, use <code>std::shared_ptr</code>s instead.  In your example, it should be a drop-in replacement, just change the <code>using</code> declaration:</p>\n\n<pre><code>using Elements = std::vector&lt;std::shared_ptr&lt;Element&gt;&gt;;\n</code></pre>\n\n<hr>\n\n<p>If you don't want <code>Inner</code> objects to own the objects pointed to by its <code>_vec</code> member, then it should be a vector of raw pointers:</p>\n\n<pre><code>class Outer\n{\n    void call()\n    {\n        std::vector&lt;Element*&gt; observer;\n        std::transform(_vec.begin(), _vec.end(), std::back_inserter(observer),\n                       [](std::unique_ptr&lt;Element&gt;&amp; el) { return el.get(); });\n        _inner.aMethod(observer);\n    }\n\n    //...\n};\n\nclass Inner\n{\n    // ...\n\n    void aMethod(std::vector&lt;Element*&gt; vec)\n    {\n        _vec = std::move(vec);\n    }\n\nprivate:\n    std::vector&lt;Element*&gt; _vec;\n};\n</code></pre>\n\n<p>Of course, doing this would mean that you run the risk of leaving <code>_vec</code>'s elements dangling if <code>Outer</code> frees any of the <code>Element</code>s it owns without updating any <code>Inner</code> objects that are pointing to them.  You could partially mitigate that risk by storing a pointer to the <code>Outer</code> object instead of storing pointers directly to the <code>Element</code>s:</p>\n\n<pre><code>class Outer\n{\n    void call()\n    {\n        _inner.aMethod(this);\n    }\n\n    //...\n};\n\nclass Inner\n{\n    // ...\n\n    void aMethod(Outer* outer)\n    {\n        outer_ = outer;\n    }\n\nprivate:\n    Outer* outer_;\n};\n</code></pre>\n\n<p><code>Inner</code> would then only access its <code>Element</code>s via the <code>Outer</code> object (you could make <code>Inner</code> a <code>friend</code> of <code>Outer</code> if necessary).  This still leaves the possibility that an <code>Inner</code> object could outlive the <code>Outer</code> object it points to, but it does reduce the risk somewhat.</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 56780418, "answer_count": 2, "score": 1, "last_activity_date": 1561581257, "creation_date": 1561576598, "question_id": 56779682, "link": "https://stackoverflow.com/questions/56779682/pass-c-vector-of-unique-ptrt-without-passing-ownership", "title": "Pass C++ vector of unique_ptr&lt;T&gt; without passing ownership", "body": "<p>I have a class <code>Outer</code> which contains an <code>Inner</code> member and <strong>owns</strong> a vector of unique_ptr elements:</p>\n\n<pre><code>using Elements = std::vector&lt;std::unique_ptr&lt;Element&gt;&gt;;\n\nclass Outer\n{\n    void call()\n    {\n        _inner.aMethod(_vec);\n    }\n\n    Inner _inner;\n    Elements _vec;   // This should remain the owner of each Element\n};\n</code></pre>\n\n<p><code>Inner</code> receives the vector of unique_ptr elements and it transfers ownership to it's own vector class member:</p>\n\n<pre><code>class Inner\n{\n    public:\n    Inner() = default;\n    ~Inner() = default;\n\n    void aMethod(Elements&amp; vec)\n    {\n        _vec = std::move(vec);\n    }\n\n    private:\n\n    Elements _vec;  // This is a vector of unique_ptr but I don't want this class to own the memory\n};\n</code></pre>\n\n<p>I stupidly used <code>std::move()</code> because otherwise the compiler complained I was trying to call a deleted function (probably the copy constructor) on each vector element. </p>\n\n<p>I have an illegal memory access and I believe it is because both classes think they own the vector elements and one has tried to delete an already-deleted <code>Element</code>.</p>\n\n<p>How do I have <code>Outer</code> owning the memory and just pass the elements to <code>Inner</code> to use (not take ownership)?</p>\n"}, {"tags": ["c++", "stl"], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1561577754, "post_id": 56779779, "comment_id": 100114835, "body": "It&#39;s worth considering that switching to <code>std::sort</code> sacrifices a few guaranties. <code>std::list::sort</code> preserves all iterators and pointers/references to elements, so for some applications switching might not be possible. Edit : There aren&#39;t many real world use cases for <code>std::list</code> anymore, but a requirement to always preserve iterators is the basis for most of them in my experience. So it&#39;s likely to be an obstacle (if <code>std::list</code> was the right choice in the first place)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561578031, "post_id": 56779779, "comment_id": 100114973, "body": "@Fran&#231;oisAndrieux: Yup--might also depend on <code>std::list.sort()</code> being stable, in which case you&#39;d need to use <code>std::stable_sort</code> instead of <code>std::sort</code> if you switched to a <code>deque</code>."}, {"owner": {"reputation": 43, "user_id": 10244215, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QeNORMHaRkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oaSzVOscNQiYHOK4_-oKv3To6Sqw/mo/photo.jpg?sz=128", "display_name": "236379 ktr.et.cse.16", "link": "https://stackoverflow.com/users/10244215/236379-ktr-et-cse-16"}, "edited": false, "score": 0, "creation_date": 1561584944, "post_id": 56779779, "comment_id": 100117357, "body": "Thanks, I am also pushing elements into the list after calculations so thats y i need to sort it each time to get top 2 least elements.  Is there a better approach to achieve it via another container or logic?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1561585661, "post_id": 56779779, "comment_id": 100117568, "body": "To be able to add arbitrary elements, then retrieve the N largest (or smallest, depending on the sorting order you choose) you probably want a priority queue. Even with a list, if you&#39;re only inserting a few elements, inserting them in order may be faster than inserting then sorting."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1561578156, "last_edit_date": 1561578156, "creation_date": 1561577131, "answer_id": 56779779, "question_id": 56779659, "link": "https://stackoverflow.com/questions/56779659/time-complexity-for-list-stl-with-sort-in-a-while-loop/56779779#56779779", "title": "time complexity for list stl with sort in a while loop", "body": "<p>Each invocation of <code>list.sort()</code> has O(N log N) complexity<sup>1</sup>. It might be faster for a sorted list--but then again, it could also be slower (the standard doesn't guarantee anything in either direction for this case). It's typically implemented as a merge sort, which usually isn't affected much (if at all) by pre-existing order.</p>\n\n<p>In this case, you're invoking it O(N) times, so your overall complexity is O(N<sup>2</sup> log N).</p>\n\n<p>As already noted in the comments, as long as you only remove items from the front of the list, the list will remain sorted, so there's no need to re-sort at each iteration.</p>\n\n<p>In addition, I'd note that if you're only removing elements from the beginning, you might want to consider using a <code>std::deque</code> instead of <code>std::list</code>. Although you'll get the same computational complexity either way, there's a good chance you'll see a substantial improvement in real-life speed moving from a <code>list</code> to a <code>deque</code>. You may not be able to substitute a <code>deque</code> for a <code>list</code> in your case (e.g., <code>deque</code> doesn't provide the same iterator stability that <code>list</code> does), but in some cases it can be done.</p>\n\n<hr>\n\n<ol>\n<li>In case you care, the precise wording from the standard (\u00a7[list.ops]/32) is: \"<em>Complexity</em>: Approximately <em>N log N</em> comparisons, where <code>N == size()</code>.\"</li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 10244215, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QeNORMHaRkA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oaSzVOscNQiYHOK4_-oKv3To6Sqw/mo/photo.jpg?sz=128", "display_name": "236379 ktr.et.cse.16", "link": "https://stackoverflow.com/users/10244215/236379-ktr-et-cse-16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 56779779, "answer_count": 1, "score": -2, "last_activity_date": 1561578156, "creation_date": 1561576472, "last_edit_date": 1561576569, "question_id": 56779659, "link": "https://stackoverflow.com/questions/56779659/time-complexity-for-list-stl-with-sort-in-a-while-loop", "title": "time complexity for list stl with sort in a while loop", "body": "<p>What is time complexity for following code  : </p>\n\n<pre><code>while(!list.empty()) {\n    list.sort();\n    a = list.front();\n    list.pop_front(); \n    b = list.front();\n    list.pop_front();\n    /** do something calculations*/\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1561577490, "post_id": 56779724, "comment_id": 100114736, "body": "Thank you for the answer. But I <a href=\"https://godbolt.org/z/SEL7Ih\" rel=\"nofollow noreferrer\">can&#39;t get this template to work</a> as the single constructor."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1561577574, "post_id": 56779724, "comment_id": 100114770, "body": "@wally yes, it will not work when you pass a braced-init-list. For that reason you may indeed want to keep both constructors, or use a single by-value constructor."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1561577958, "post_id": 56779724, "comment_id": 100114935, "body": "Ok, the single by-value constructor <a href=\"https://godbolt.org/z/Vjpc0V\" rel=\"nofollow noreferrer\">does compile</a>. But won&#39;t this &#39;hollow out&#39;  <code>Mymap m</code> and render it less useful later in the program?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1561577999, "post_id": 56779724, "comment_id": 100114959, "body": "@wally if you pass in an lvalue, a copy is made and then the constructor moves from the copy, so the original argument is not affected"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1561578077, "post_id": 56779724, "comment_id": 100115003, "body": "Ah yes, of course. I should have thought a bit more before typing."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1561578569, "post_id": 56779724, "comment_id": 100115176, "body": "I see we would get a copy even of r-values? So yes, we can have a single constructor, but no, we can&#39;t have perfect forwarding in that case?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1561578735, "post_id": 56779724, "comment_id": 100115185, "body": "@wally if the argument is an rvalue, then it gets moved into the parameter. So the move constructor is called twice in total."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1561586122, "post_id": 56779724, "comment_id": 100117711, "body": "It looks like pass-by-value <a href=\"https://coliru.stacked-crooked.com/a/be38b7d5f9309c1e\" rel=\"nofollow noreferrer\">creates a copy</a> and then performs a move?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1561586151, "post_id": 56779724, "comment_id": 100117717, "body": "@wally That&#39;s what I said in one of my previous comments."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 3, "last_activity_date": 1561576826, "creation_date": 1561576826, "answer_id": 56779724, "question_id": 56779630, "link": "https://stackoverflow.com/questions/56779630/template-converting-constructor-with-perfect-forwarding/56779724#56779724", "title": "Template converting constructor with perfect forwarding", "body": "<p>If <code>Mymap</code> is inexpensive to move, then pass by value is often preferred:</p>\n\n<pre><code>A(Mymap n) : n_(std::move(n)) {}\n</code></pre>\n\n<p>Otherwise, you have to fall back on the ugly solution:</p>\n\n<pre><code>template &lt;class T, class = std::enable_if_t&lt;std::is_same_v&lt;Mymap, std::decay_t&lt;T&gt;&gt;&gt;&gt;\nA(T&amp;&amp; n) : n_(std::forward&lt;T&gt;(n)) {}\n</code></pre>\n\n<p>(Arguably, <code>std::remove_cvref_t</code> fits the intent better than <code>std::decay_t</code>. You can use it starting in C++20.)</p>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 56779724, "answer_count": 1, "score": 2, "last_activity_date": 1561576826, "creation_date": 1561576354, "question_id": 56779630, "link": "https://stackoverflow.com/questions/56779630/template-converting-constructor-with-perfect-forwarding", "title": "Template converting constructor with perfect forwarding", "body": "<p>It is possible to replace the two constructors in this program with a single template constructor with perfect forwarding?</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;unordered_set&gt;\n#include &lt;string&gt;\n\nusing Mymap = std::unordered_map&lt;std::string, std::unordered_set&lt;std::string&gt;&gt;;\n\nclass A {\n    Mymap n_;\npublic:\n    A(Mymap&amp;&amp; n) \n        : n_{std::move(n)} \n    {}\n\n    A(Mymap&amp; n) \n        : n_{n} \n    {}\n\n    // doesn't compile\n    //template &lt;typename T&gt;\n    //A(T&lt;Mymap::value_type&gt;&amp;&amp; n)\n    //    : n_{std::forward(n)}\n    //{}\n};\n\nint main() {\n    A a1{{{\"C\", {\"A\", \"B\"}}}};\n\n    Mymap m{{{\"C\", {\"A\", \"B\"}}}};\n    A a2{m};\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "c++17", "std"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1561576355, "post_id": 56779605, "comment_id": 100114297, "body": "Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please?"}, {"owner": {"reputation": 110, "user_id": 6738889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbffd0818b9124d2482fd2d0bbb42fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Giacomelli", "link": "https://stackoverflow.com/users/6738889/felipe-giacomelli"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1561577860, "post_id": 56779605, "comment_id": 100114893, "body": "Of course. An (almost) minimal example has been provided - it compiles with g++ 9.1"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1561578368, "post_id": 56779605, "comment_id": 100115126, "body": "Adding <code>-fsanitize=undefined</code> stops it from crashing for me :-) Valgrind (without <code>-fsanitize=undefined</code>) gives <a href=\"https://pastebin.com/QWp977sB\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1561580349, "post_id": 56779605, "comment_id": 100115600, "body": "Filed <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=91007\" rel=\"nofollow noreferrer\">91007</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1561580796, "post_id": 56779605, "comment_id": 100115806, "body": "@Barry Nice, that&#39;s what I call a minimal example :-)"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1561588662, "post_id": 56779605, "comment_id": 100118380, "body": "Aside: the <code>-g</code> flag is completely irrelevant, all that matters is the optimisation flags. Enabling debug info in &quot;release&quot; builds still works with GCC and doesn&#39;t affect the generated code at all."}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1561580079, "post_id": 56780162, "comment_id": 100115496, "body": "A godbolt-version shows the same thing: <a href=\"https://godbolt.org/z/EKIk_f\" rel=\"nofollow noreferrer\">godbolt.org/z/EKIk_f</a> and when changing to g++ 8.3, it looks alright: <a href=\"https://godbolt.org/z/Nkgz2I\" rel=\"nofollow noreferrer\">godbolt.org/z/Nkgz2I</a>"}, {"owner": {"reputation": 110, "user_id": 6738889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbffd0818b9124d2482fd2d0bbb42fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Giacomelli", "link": "https://stackoverflow.com/users/6738889/felipe-giacomelli"}, "edited": false, "score": 0, "creation_date": 1561580405, "post_id": 56780162, "comment_id": 100115621, "body": "Thank you for your answer! Should one always pass <code>-fsanitize=undefined</code> to gcc/g++ in order to prevent similar issues?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 110, "user_id": 6738889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbffd0818b9124d2482fd2d0bbb42fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Giacomelli", "link": "https://stackoverflow.com/users/6738889/felipe-giacomelli"}, "edited": false, "score": 1, "creation_date": 1561580694, "post_id": 56780162, "comment_id": 100115758, "body": "@FelipeGiacomelli I always use it when developing. It&#39;s supposed to help me find bugs in <i>my</i> code, not hide bugs in the toolchain :-) So, no, don&#39;t count on it to fix issues like this. It&#39;s not what it&#39;s there for and the fact that it had this effect is a bit strange."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1561579722, "creation_date": 1561579722, "answer_id": 56780162, "question_id": 56779605, "link": "https://stackoverflow.com/questions/56779605/problem-with-stdstable-sort-after-g-9-1-update/56780162#56780162", "title": "Problem with std::stable_sort after g++ 9.1 update", "body": "<p>The first \"<code>b</code>\" that, when compiled with g++ 9.1.1, is passed into the lambda has <code>size()==0</code> which should be impossible. clang++ 8.0.0 runs it without problems using the same compilation flags and does not show anything strange when running <code>valgrind</code>.</p>\n\n<p>I'd say it's a bug in g++. Code with debug output in the lambda function:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename InputIt&gt;\nvoid print2D(InputIt cbegin, InputIt cend, const std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message;\n    for(auto i = cbegin; i != cend; ++i) {\n        for(auto j : *i) {\n            std::cout &lt;&lt; \"\\t\" &lt;&lt; std::setw(3) &lt;&lt; std::right &lt;&lt; j;\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n\nint main() {\n    size_t index = 1;\n    std::vector&lt;std::vector&lt;int&gt;&gt; conns{\n        {0, 2, 0, 1},       {0, 2, 1, 2},      {0, 1, 2, 5},     {0, 1, 5, 8},\n        {0, 3, 8, 7},       {0, 3, 7, 6},      {0, 0, 6, 3},     {0, 0, 3, 0},\n        {1, 4, 3, 4, 9},    {1, 4, 3, 9, 6},   {1, 4, 4, 7, 9},  {1, 4, 6, 9, 7},\n        {1, 4, 1, 2, 10},   {1, 4, 1, 10, 4},  {1, 4, 2, 5, 10}, {1, 4, 4, 10, 5},\n        {2, 4, 4, 5, 8, 7}, {2, 4, 0, 1, 4, 3}};\n\n    print2D(conns.cbegin(), conns.cend(), \"\\n\\n\\tbefore\\n\");\n\n    std::stable_sort(conns.begin(), conns.end(), [=](const auto&amp; a, const auto&amp; b) {\n        std::cout &lt;&lt; index &lt;&lt; \"\\ta.size=\" &lt;&lt; a.size() &lt;&lt; \" b.size=\" &lt;&lt; b.size() &lt;&lt; \"\\n\";\n        return a[index] &lt; b[index];\n    });\n\n    print2D(conns.cbegin(), conns.cend(), \"\\n\\n\\tafter\\n\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   before\n     0    2     0   1\n     0    2     1   2\n     0    1     2   5\n     0    1     5   8\n     0    3     8   7\n     0    3     7   6\n     0    0     6   3\n     0    0     3   0\n     1    4     3   4    9\n     1    4     3   9    6\n     1    4     4   7    9\n     1    4     6   9    7\n     1    4     1   2   10\n     1    4     1  10    4\n     1    4     2   5   10\n     1    4     4  10    5\n     2    4     4   5    8      7\n     2    4     0   1    4      3\n\n1  a.size=4 b.size=0\nSegmentation fault (core dumped)\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 6738889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbffd0818b9124d2482fd2d0bbb42fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Giacomelli", "link": "https://stackoverflow.com/users/6738889/felipe-giacomelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 56780162, "answer_count": 1, "score": 5, "last_activity_date": 1561579722, "creation_date": 1561576213, "last_edit_date": 1561577656, "question_id": 56779605, "link": "https://stackoverflow.com/questions/56779605/problem-with-stdstable-sort-after-g-9-1-update", "title": "Problem with std::stable_sort after g++ 9.1 update", "body": "<p>After updating from gcc/g++ <strong>8.1</strong> to <strong>9.1</strong> and recompiling my code, most of its tests failed. Hence, a little digging was made and I have found out that <a href=\"https://en.cppreference.com/w/cpp/algorithm/stable_sort\" rel=\"noreferrer\"><code>std::stable_sort</code></a> was the problem.</p>\n\n<p>As it turns out, most calls of my calls to <code>std::stable_sort</code> were not necessary, that is, calling <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"noreferrer\"><code>std::sort</code></a> would be enough. Thus, I have done the substitution where it was possible, and the tests regarding these pieces of code succeed again.</p>\n\n<p>Now, I have only one call to <code>std::stable_sort</code></p>\n\n<pre><code>void MshReader::determinePhysicalEntitiesRange() {\n    // conns is not empty\n\n    std::stable_sort(this-&gt;conns.begin(), this-&gt;conns.end(), \n        [=](const auto&amp; a, const auto&amp; b){\n            return a[this-&gt;index] &lt; b[this-&gt;index];\n        }\n    );\n\n    // acess some values of conns\n}\n</code></pre>\n\n<p>Where <em>conns</em> is a <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> that stores element connectivities. The sorting is done based on column <em>index</em>, its value is assigned in the class header, and all <code>std::vector&lt;int&gt;</code> in <em>conns</em> have that entry.</p>\n\n<p>Another fact worth mentioning is that, on <strong>debug</strong> builds (compiler flag \"-g\" is used, \"-O3\" is NOT) <strong>all tests succeed</strong>.</p>\n\n<p>Also, on <strong>release</strong> builds (flag \"-O3\" is used, \"-g\" is NOT), by printing the values of <em>conns</em> before and after the call to <code>std::stable_sort</code>, I have discovered that <em>conns</em> is ruined.</p>\n\n<p>Before</p>\n\n<pre><code>row:\n  0:    0   2   0   1\n  1:    0   2   1   2\n  2:    0   1   2   5\n  3:    0   1   5   8\n  4:    0   3   8   7\n  5:    0   3   7   6\n  6:    0   0   6   3\n  7:    0   0   3   0\n  8:    1   4   3   4   9\n  9:    1   4   3   9   6\n 10:    1   4   4   7   9\n 11:    1   4   6   9   7\n 12:    1   4   1   2  10\n 13:    1   4   1  10   4\n 14:    1   4   2   5  10\n 15:    1   4   4  10   5\n 16:    2   4   4   5   8   7\n 17:    2   4   0   1   4   3\n</code></pre>\n\n<p>After</p>\n\n<pre><code>row:\n  0:    0   0   6   3\n  1:    0   0   3   0\n  2:    0   1   2   5\n  3:    0   1   5   8\n  4:    0   2   1   2 // there were two rows with column 'index' = 2\n  5:    0   3   8   7\n  6:    0   3   7   6\n  7:    1   4   2   5  10  10  10  10 // this entry was previously on row 14; extra '10's\n  8:    1   4   3   4   9\n  9:    1   4   3   9   6\n 10:    1   4   4   7   9\n 11:    1   4   6   9   7\n 12:    1   4   1   2  10\n 13:    1   4   1  10   4\n 14:    1   4   2   5  10\n 15:    1   4   4  10   5\n 16:    2   4   4   5   8   7\n 17:    2   4   0   1   4   3\n</code></pre>\n\n<p>On <strong>debug</strong> builds, <code>std::stable_sort</code> outputs the expected result. Besides that, <code>c++17</code> is being used (compiler flag \"-std=c++17\").</p>\n\n<p>Therefore,</p>\n\n<ul>\n<li><p>Is something wrong with my call to <code>std::stable_sort</code>?</p></li>\n<li><p>Which changes on g++ led to this behavior?</p></li>\n<li><p>Why this behavior only appears in <strong>release</strong> builds?</p></li>\n</ul>\n\n<p><strong>Minimal Example</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;typename InputIt&gt;\nvoid print2D(InputIt cbegin, InputIt cend, std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message;\n    for (auto i = cbegin; i != cend; ++i) {\n        for (auto j = i-&gt;cbegin(); j != i-&gt;cend(); ++j) {\n            std::cout &lt;&lt; \"\\t\" &lt;&lt; std::setw(3) &lt;&lt; std::right &lt;&lt; *j;\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nint main() {\n    int index = 1;\n    std::vector&lt;std::vector&lt;int&gt;&gt; conns{{0,2,0,1},{0,2,1,2},{0,1,2,5},{0,1,5,8},{0,3,8,7},{0,3,7,6},{0,0,6,3},{0,0,3,0},{1,4,3,4,9},{1,4,3,9,6},{1,4,4,7,9},{1,4,6,9,7},{1,4,1,2,10},{1,4,1,10,4},{1,4,2,5,10},{1,4,4,10,5},{2,4,4,5,8,7},{2,4,0,1,4,3}};\n\n    print2D(conns.cbegin(), conns.cend(), \"\\n\\n\\tbefore\\n\");\n\n    std::stable_sort(conns.begin(), conns.end(), \n        [=](const auto&amp; a, const auto&amp; b){\n            return a[index] &lt; b[index];\n        }\n    );\n\n    print2D(conns.cbegin(), conns.cend(), \"\\n\\n\\tafter\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>If the above is compiled with</p>\n\n<pre><code>    g++ -o main main.cpp -m64 -std=c++17 -O3\n</code></pre>\n\n<p>It outputs <code>segmentation fault (core dumped)</code>. However, if the flag \"-O3\" is not employed, the expected results is obtained.</p>\n"}, {"tags": ["c++", "pointers", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11046540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Bah7DxNlVk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPkadYLda7fUc9vy1aFN13-RE13qQ/mo/photo.jpg?sz=128", "display_name": "CNH2719", "link": "https://stackoverflow.com/users/11046540/cnh2719"}, "edited": false, "score": 0, "creation_date": 1561576498, "post_id": 56779561, "comment_id": 100114345, "body": "It ended up being <code>(*l_iterator).GetTaxGroupId()</code>. I had know idea I had to put parenthesis. Thank you!"}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "reply_to_user": {"reputation": 9, "user_id": 11046540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Bah7DxNlVk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPkadYLda7fUc9vy1aFN13-RE13qQ/mo/photo.jpg?sz=128", "display_name": "CNH2719", "link": "https://stackoverflow.com/users/11046540/cnh2719"}, "edited": false, "score": 0, "creation_date": 1561576704, "post_id": 56779561, "comment_id": 100114419, "body": "@ChristopherNguyenHoang No problem, the order of operations on pointers can be confusing."}], "tags": [], "owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "is_accepted": false, "score": 0, "last_activity_date": 1561576033, "creation_date": 1561576033, "answer_id": 56779561, "question_id": 56779497, "link": "https://stackoverflow.com/questions/56779497/how-can-i-retrieve-a-specific-member-from-a-class-with-a-getter-inside-of-a-func/56779561#56779561", "title": "How can I retrieve a specific member from a class with a getter inside of a function that uses an iterator inside of a loop?", "body": "<p>Without testing, since you don't provide a compilable program, it's likely that you should put parentheses around the initial dereferencing, <code>(*l_iterator)-&gt;GetTaxGroupId()</code>, so that the compiler knows you're trying to access a member of a <code>CTaxGroup</code>, not a member of an iterator.</p>\n"}], "owner": {"reputation": 9, "user_id": 11046540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Bah7DxNlVk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPkadYLda7fUc9vy1aFN13-RE13qQ/mo/photo.jpg?sz=128", "display_name": "CNH2719", "link": "https://stackoverflow.com/users/11046540/cnh2719"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561576033, "creation_date": 1561575793, "question_id": 56779497, "link": "https://stackoverflow.com/questions/56779497/how-can-i-retrieve-a-specific-member-from-a-class-with-a-getter-inside-of-a-func", "title": "How can I retrieve a specific member from a class with a getter inside of a function that uses an iterator inside of a loop?", "body": "<p>I'm trying to make a function that returns a class (CTaxGroup) by taking as parameter a TaxGroupId. </p>\n\n<p>The function will loop through a vector with an iterator. </p>\n\n<pre><code>int m_TaxGroupId;\n\nCTaxGroup CTaxGroupVector::FetchTaxGroup(int TaxGroupId)\n{\n    CTaxGroup l_TaxGroup;\n    std::vector&lt;CTaxGroup&gt;::iterator l_iterator =m_TaxGroupVector.begin();\n    for(l_iterator; l_iterator != m_TaxGroupVector.end(); l_iterator++)\n    {\n        int l_TaxGroupId = *l_iterator-&gt;GetTaxGroupId();\n        if(l_TaxGroupId == TaxGroupId)\n        {\n            l_TaxGroup = *l_iterator;\n        }\n    }\n    return l_TaxGroup;\n}\n\nstd::vector&lt;CTaxGroup&gt; CTaxGroupVector::GetTaxGroupVector()\n{\n    return m_TaxGroupVector;\n}\n</code></pre>\n\n<p>At line 7, I get an error from my IDE (RAD Studio XE4) which states :\n\"E2062 Invalid indirection\".</p>\n\n<p>I know that it was something to do with the pointer, but I'm not sure what is my error. </p>\n\n<p>I'm expecting that line 7 would return me an integer.</p>\n"}, {"tags": ["c++", "c++11", "stl"], "comments": [{"owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "edited": false, "score": 0, "creation_date": 1561576087, "post_id": 56779399, "comment_id": 100114203, "body": "Do you compile with -std=c++11 flag or what?"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "reply_to_user": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "edited": false, "score": 0, "creation_date": 1561576748, "post_id": 56779399, "comment_id": 100114434, "body": "@Boki I tested with <code>-std=c++11</code> and <code>-std=c++98</code>."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1561575546, "creation_date": 1561575546, "answer_id": 56779442, "question_id": 56779399, "link": "https://stackoverflow.com/questions/56779399/why-does-make-pairint-int-fail-in-c-11/56779442#56779442", "title": "Why does make_pair&lt;int,int&gt; fail in C++ 11?", "body": "<p>You are not supposed to pass type arguments to <code>make_pair</code>; it is intended to deduce its arguments.  If you want to make something that creates exactly of a type, just do <code>std::pair&lt;int, int&gt;</code>.</p>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> rvalue references and perfect forwarding was added; <code>make_pair&lt;int,int&gt;</code> has signature <code>(int&amp;&amp;, int&amp;&amp;)</code>.  These are both rvalue references, and cannot bind to an lvalue (like <code>u</code>).</p>\n\n<p><code>make_pair&lt;int, int&amp;&gt;(0, u)</code> would compile, and produce a <code>pair&lt;int, int&gt;</code>, because <code>make_pair</code> creates a pair of value-types.</p>\n\n<p>Without rvalue references in <a href=\"/questions/tagged/c%2b%2b03\" class=\"post-tag\" title=\"show questions tagged &#39;c++03&#39;\" rel=\"tag\">c++03</a>, this problem cannot happen.  Probably <code>make_pair</code> was <code>make_pair( A const&amp;, B const&amp; )</code> instead of <code>make_pair( A&amp;&amp;, B&amp;&amp; )</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 7, "last_activity_date": 1561575629, "creation_date": 1561575629, "answer_id": 56779460, "question_id": 56779399, "link": "https://stackoverflow.com/questions/56779399/why-does-make-pairint-int-fail-in-c-11/56779460#56779460", "title": "Why does make_pair&lt;int,int&gt; fail in C++ 11?", "body": "<p>Before c++11 there was</p>\n\n<pre><code>template&lt; class T1, class T2 &gt;\nstd::pair&lt;T1,T2&gt; make_pair( T1 t, T2 u );\n</code></pre>\n\n<p>you defined T1 and T2 to be: <code>int</code>, so <code>int</code> can take Lvalues and Rvalues.</p>\n\n<p>Since c++11 you have</p>\n\n<pre><code>template&lt; class T1, class T2 &gt;\nstd::pair&lt;V1,V2&gt; make_pair( T1&amp;&amp; t, T2&amp;&amp; u );\n</code></pre>\n\n<p>because <code>T2</code> was defined as <code>int</code>, so <code>int&amp;&amp;</code> as second parameter can take only Rvalues. But <code>u</code> is Lvalue.</p>\n"}, {"comments": [{"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1561616676, "post_id": 56779890, "comment_id": 100124214, "body": "You version compiles with <code>-std=c++98</code>. So you could always have instantiated the pair with the constructor. Why was <code>make_pair</code> required?"}, {"owner": {"reputation": 229, "user_id": 11097431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsEDJ.jpg?s=128&g=1", "display_name": "Aman Raj", "link": "https://stackoverflow.com/users/11097431/aman-raj"}, "reply_to_user": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1561648999, "post_id": 56779890, "comment_id": 100143092, "body": "Using <code>make_pair</code> you can use curly braces to simply add elements without typing whole thing. See this <a href=\"https://stackoverflow.com/questions/9270563/what-is-the-purpose-of-stdmake-pair-vs-the-constructor-of-stdpair\">link</a>"}], "tags": [], "owner": {"reputation": 229, "user_id": 11097431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsEDJ.jpg?s=128&g=1", "display_name": "Aman Raj", "link": "https://stackoverflow.com/users/11097431/aman-raj"}, "is_accepted": true, "score": 2, "last_activity_date": 1561579594, "last_edit_date": 1561579594, "creation_date": 1561577667, "answer_id": 56779890, "question_id": 56779399, "link": "https://stackoverflow.com/questions/56779399/why-does-make-pairint-int-fail-in-c-11/56779890#56779890", "title": "Why does make_pair&lt;int,int&gt; fail in C++ 11?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/utility/pair/make_pair\" rel=\"nofollow noreferrer\">std::make_pair</a> has changed between <code>c++03</code> and <code>c++11</code>.</p>\n\n<p>Your code fails as <code>std::make_pair</code> expects <code>T&amp;&amp;</code> and <code>U&amp;&amp;</code>, where <code>T</code> and <code>U</code> are template type parameters.\nLike</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T, typename U&gt;\nstd::pair&lt;V1,V2&gt; make_pair(T&amp;&amp; argT, U&amp;&amp; argU);\n</code></pre>\n\n<p>Still if you want to specify both of these parameter use <code>pair&lt;int, int&gt;</code></p>\n\n<p>Example -</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\nusing namespace std;\n\nint main() {\n    int u = 1;\n    pair&lt;int, int&gt; p = pair&lt;int, int&gt;(0, u);\n    cout &lt;&lt; p.first &lt;&lt; \" \" &lt;&lt; p.second &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>You can refer here for more details - <a href=\"http://www.cplusplus.com/reference/utility/make_pair/\" rel=\"nofollow noreferrer\">utility-make_pair</a></p>\n"}], "owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "closed_date": 1561581576, "accepted_answer_id": 56779890, "answer_count": 3, "score": 3, "last_activity_date": 1561579594, "creation_date": 1561575320, "question_id": 56779399, "link": "https://stackoverflow.com/questions/56779399/why-does-make-pairint-int-fail-in-c-11", "closed_reason": "Duplicate", "title": "Why does make_pair&lt;int,int&gt; fail in C++ 11?", "body": "<p>The following piece of code works fine when compiling as C++ 98, but it fails as C++&nbsp;11. Why?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\nint main()\n{\n    int u = 1;\n    pair&lt;int, int&gt; p = make_pair&lt;int, int&gt;(0, u);\n    cout &lt;&lt; p.first &lt;&lt; \" \" &lt;&lt; p.second &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The error message from g++ (Debian 8.3.0-6) 8.3.0 is:</p>\n\n<pre><code>foo.cpp: In function \u2018int main()\u2019:\nfoo.cpp:9:45: error: no matching function for call to \u2018make_pair&lt;int, int&gt;(int, int&amp;)\u2019\n  pair&lt;int, int&gt; p = make_pair&lt;int, int&gt;(0, u);\n                                             ^\n</code></pre>\n\n<p>I'm aware that I can compile this simply by removing the template specifier from <code>make_pair</code> and letting the compiler decide the types on its own. But I'm interested in understanding what changes from C++&nbsp;98 to C++&nbsp;11 that makes this code no longer compliant.</p>\n"}, {"tags": ["c++", "c", "casting"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 7, "creation_date": 1561575287, "post_id": 56779365, "comment_id": 100113861, "body": "There is no &quot;C/C++&quot; language: please pick one."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1561575296, "post_id": 56779365, "comment_id": 100113864, "body": "No.............. A function returns the type you stated in the function prototype, e.g. <code>ReturnType foo();</code>"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 2, "creation_date": 1561575518, "post_id": 56779365, "comment_id": 100113961, "body": "<code>return ... ? static_cast&lt;int&gt;(value) : static_cast&lt;unsigned&gt;(value);</code>. All you need after that is a <code>variant&lt;int, unsigned&gt;</code> for the return type"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1561575544, "post_id": 56779365, "comment_id": 100113971, "body": "What is the type of <code>value</code>?"}, {"owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "edited": false, "score": 2, "creation_date": 1561581348, "post_id": 56779365, "comment_id": 100116041, "body": "What do you want to achieve? what is the problem you are trying to solve with variant return type"}, {"owner": {"reputation": 311, "user_id": 11630848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aff2511098597fa8ce472473a042b2?s=128&d=identicon&r=PG&f=1", "display_name": "amlucas", "link": "https://stackoverflow.com/users/11630848/amlucas"}, "edited": false, "score": 1, "creation_date": 1561582013, "post_id": 56779365, "comment_id": 100116306, "body": "I would return a std::variant&lt;int, unsigned int&gt;"}, {"owner": {"reputation": 573, "user_id": 7851474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/H6UTi.png?s=128&g=1", "display_name": "guigoz", "link": "https://stackoverflow.com/users/7851474/guigoz"}, "reply_to_user": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "edited": false, "score": 0, "creation_date": 1561612635, "post_id": 56779365, "comment_id": 100122844, "body": "@Eliyahu Machluf I&#39;m trying to change the range of a value, eg (unsigned char)144 ==144, but (char)144 ==-112"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1561613363, "post_id": 56779365, "comment_id": 100123073, "body": "@guigoz I think it&#39;s a bit unclear what you are trying to achieve. Perhaps you could edit the code so it shows a complete function and shows how you want to call it. BTW: <code>char</code> isn&#39;t always signed..."}, {"owner": {"reputation": 573, "user_id": 7851474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/H6UTi.png?s=128&g=1", "display_name": "guigoz", "link": "https://stackoverflow.com/users/7851474/guigoz"}, "edited": false, "score": 0, "creation_date": 1561619381, "post_id": 56779365, "comment_id": 100125548, "body": "0b10010000 can be either 144 or -122 when casted, that&#39;s what I want to achieve"}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "edited": false, "score": 1, "creation_date": 1561576245, "post_id": 56779513, "comment_id": 100114267, "body": "How about <code>auto</code> return type with C++14?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 2, "creation_date": 1561576771, "post_id": 56779513, "comment_id": 100114444, "body": "What about returning a single type that could contain either types? For example, in C++17, you can have <code>std::variant&lt;int, unsigned&gt;</code>"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "edited": false, "score": 4, "creation_date": 1561580698, "post_id": 56779513, "comment_id": 100115762, "body": "@scrutari Return type deduction is done at compile time."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "reply_to_user": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "edited": false, "score": 0, "creation_date": 1561584791, "post_id": 56779513, "comment_id": 100117311, "body": "@scrutari Based on the argument types it still results into exactly 1 type at compile time. With<code>if constexpr</code> you can change that type, though that is still a compile time feature"}, {"owner": {"reputation": 573, "user_id": 7851474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/H6UTi.png?s=128&g=1", "display_name": "guigoz", "link": "https://stackoverflow.com/users/7851474/guigoz"}, "edited": false, "score": 0, "creation_date": 1561612256, "post_id": 56779513, "comment_id": 100122727, "body": "Actually what is needed is to change the interpretation of value, not to change te return type of the function"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1561575842, "creation_date": 1561575842, "answer_id": 56779513, "question_id": 56779365, "link": "https://stackoverflow.com/questions/56779365/how-to-choose-dynamicly-in-c-c-the-type-to-cast-to/56779513#56779513", "title": "How to choose dynamicly in C/C++ the type to cast to?", "body": "<p>No, in both C and C++ the return type of a function is fixed, i.e. it will always return the same type. Even if you try to cast as part of the <code>return</code> statement, the returned value will implicit be converted to the return type of the function - if possible. If an implicit conversion ain't possible, you'll get a compile error.</p>\n\n<p>So</p>\n\n<pre><code>returntype foo(...) {.... return x;}\n</code></pre>\n\n<p>will always return a value of type <code>returntype</code></p>\n\n<p>In C++ you can use templates to \"change\" return type but once the template definition is solved it's the same story. Cast won't change the real return type.</p>\n"}], "owner": {"reputation": 573, "user_id": 7851474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/H6UTi.png?s=128&g=1", "display_name": "guigoz", "link": "https://stackoverflow.com/users/7851474/guigoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1561612808, "creation_date": 1561575153, "last_edit_date": 1561612808, "question_id": 56779365, "link": "https://stackoverflow.com/questions/56779365/how-to-choose-dynamicly-in-c-c-the-type-to-cast-to", "title": "How to choose dynamicly in C/C++ the type to cast to?", "body": "<p>Is there a way to do</p>\n\n<pre><code>if(...)\n  return (char)value;\n\nreturn (unsigned char)value;\n</code></pre>\n\n<p>by moving the check into the cast to get something like</p>\n\n<pre><code>return (???)value;\n</code></pre>\n\n<p>The goal is to interprete the content of value differently\neg: (unsigned char)144=>144 and (char)144=>-112</p>\n"}, {"tags": ["c++", "visual-studio-2010", "lazy-initialization"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1561575177, "post_id": 56779300, "comment_id": 100113802, "body": "The root problem is that 2010 was a LONG time ago."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1561575255, "post_id": 56779300, "comment_id": 100113846, "body": "MSVS 2010 is not known for it&#39;s C++11 compliance (heck, 2013 and 2015 had compliance issues as well).  If you don&#39;t have to support MSVS 2010, I would suggest dumping it."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1561575424, "post_id": 56779300, "comment_id": 100113922, "body": "I&#39;m asking for a fix because I can&#39;t dump it. Nobody uses VS2010 because it&#39;s a fun and rewarding past time. :)"}], "owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561575078, "creation_date": 1561574833, "last_edit_date": 1561575078, "question_id": 56779300, "link": "https://stackoverflow.com/questions/56779300/why-does-vs2010-generate-a-syntax-error-for-the-following-code", "title": "Why does VS2010 generate a syntax error for the following code", "body": "<p>The following code compiles fine under VS2013 and upwards as well as GCC</p>\n\n<p><a href=\"https://godbolt.org/z/-nKXB-\" rel=\"nofollow noreferrer\">https://godbolt.org/z/-nKXB-</a></p>\n\n<pre><code>#include \"boost/thread/once.hpp\"\n#include \"boost/optional.hpp\"\n#include &lt;functional&gt;\n/// A class to encapsulate lazy initialization of an object.\n/// All instances of Lazy are thread safe and the factory\n/// is guaranteed only to be called once. However if you\n/// use this for member initialization DO NOT capture\n/// this in the lambda. See LazyMember for an alternative\ntemplate &lt;typename T&gt;\nclass Lazy {\n    mutable boost::once_flag _once;\n    mutable boost::optional&lt;T&gt; _data;\n    typedef std::function&lt;T()&gt; FactoryFn;\n    FactoryFn _factory;\n    void Init() const { boost::call_once([&amp;]() { _data = _factory(); }, _once); }\npublic:\n    Lazy(FactoryFn factory):\n        _once(BOOST_ONCE_INIT),\n        _factory(factory)\n        {\n\n        }\n\n    T&amp; Value() {\n        Init();\n        return *_data;\n    }\n}; \n\n</code></pre>\n\n<p>to be used like</p>\n\n<pre><code>Lazy&lt;int&gt; i([]{return 10;}); // Pretend lambda is an expensive op\n// and then some time later.\nreturn i.Value()\n</code></pre>\n\n<p>Testing on VS2010 I get </p>\n\n<pre><code>1&gt;Lazy.hpp(26):\nerror C2059: syntax error : ')' 1&gt;       \nLazy.hpp(37)\n: see reference to class template instantiation 'mw::Lazy&lt;T&gt;' being\ncompiled\n1&gt;Lazy.hpp(26):\nerror C2059: syntax error : ','\n1&gt;Lazy.hpp(28):\nerror C2334: unexpected token(s) preceding '{'; skipping apparent\nfunction body\n</code></pre>\n\n<p>A work around seems to be. </p>\n\n<pre><code>/// A class to encapsulate lazy initialization of an object.\n/// All instances of Lazy are thread safe and the factory\n/// is guaranteed only to be called once. However if you\n/// use this for member initialization DO NOT capture\n/// this in the lambda. See LazyMember for an alternative\ntemplate &lt;typename T&gt;\nclass Lazy {\n    mutable boost::once_flag _once;\n    mutable boost::optional&lt;T&gt; _data;\n    typedef std::function&lt;T()&gt; FactoryFn;\n    FactoryFn _factory;\n    void Init() const { boost::call_once([&amp;]() { _data = _factory(); }, _once); }\npublic:\n    Lazy(FactoryFn factory):\n        _factory(factory)\n        {\n          _once = BOOST_ONCE_INIT;\n        }\n\n    T&amp; Value() {\n        Init();\n        return *_data;\n    }\n\n}; \n</code></pre>\n\n<p>But what is the root problem?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "lldb"], "answers": [{"comments": [{"owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "edited": false, "score": 0, "creation_date": 1561585751, "post_id": 56781331, "comment_id": 100117596, "body": "Thanks for the reply! Godspeed on the new script! Having to use Android Studio makes me a sad sad panda!"}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 1, "last_activity_date": 1561585566, "creation_date": 1561585566, "answer_id": 56781331, "question_id": 56779299, "link": "https://stackoverflow.com/questions/56779299/how-can-i-do-command-line-debugging-using-android-ndk/56781331#56781331", "title": "How can I do command line debugging using Android NDK", "body": "<p><code>ndk-gdb</code> doesn't know how to do it out of the box right now. You can set up some symlinks in a gradle project to make the directory layout match a standalone ndk-build project which will let <code>ndk-gdb</code> work. See <a href=\"https://android.googlesource.com/platform/ndk/+/refs/heads/master/samples/NdkGdbSample/\" rel=\"nofollow noreferrer\">https://android.googlesource.com/platform/ndk/+/refs/heads/master/samples/NdkGdbSample/</a> for an example.</p>\n\n<p><code>ndk-gdb</code> doesn't work at all with CMake though.</p>\n\n<p>See <a href=\"https://github.com/android-ndk/ndk/issues/1024\" rel=\"nofollow noreferrer\">https://github.com/android-ndk/ndk/issues/1024</a> (I assume that's actually you that filed it). I don't know when we'll be able to do it, but what's described there is essentially what we'll do. We'll keep the existing script, get it to work with gradle projects, and (eventually) switch it to lldb under the covers.</p>\n\n<p>Using Android Studio is your best bet for native debugging on Android right now.</p>\n"}], "owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 56781331, "answer_count": 1, "score": 0, "last_activity_date": 1561585566, "creation_date": 1561574830, "question_id": 56779299, "link": "https://stackoverflow.com/questions/56779299/how-can-i-do-command-line-debugging-using-android-ndk", "title": "How can I do command line debugging using Android NDK", "body": "<p>I am trying to debug a C++ Android application using Android NDK r20.</p>\n\n<p>The project used to use the old way of building using ndk-build and the android.mk file.</p>\n\n<p>Now the project is migrated to using gradle and cmake. Because of this, the ndk-gdb script no longer works, since it uses the old build system which expects an android.mk file.</p>\n\n<p>So how am I supposed to debug from the command line using the latest ndk along with a gradle/cmake build system? Is there a new script that is provided?</p>\n"}, {"tags": ["c++", "textures", "sprite", "sfml"], "comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 1, "creation_date": 1561574780, "post_id": 56779263, "comment_id": 100113635, "body": "<code>s.setScale(OI[i].Xpoz,OI[i].Ypoz);</code> why positions were used instead of scale values?"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 10848935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d56f245f110026eb3630524201262ca?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10848935/yuriy"}, "is_accepted": false, "score": 0, "last_activity_date": 1564902562, "creation_date": 1564902562, "answer_id": 57344577, "question_id": 56779263, "link": "https://stackoverflow.com/questions/56779263/why-that-code-dont-draw-sprites-c-sfml/57344577#57344577", "title": "Why that code don&#39;t draw sprites C++ SFML", "body": "<p>When you call <code>s.setTexture(t)</code> sprite s remembers texture t by pointer/reference. So, when your code exit from for loop <code>sf::Texture t</code> is destroyed (C++ destroy scope variables when exiting some scope) and pointer/reference in sprite class points to deleted memory locations, which cause SFML to have error while drawing your sprites. The solution to this problem is the global array for textures which you use. I also recommend adding the global array for sf::Sprites, because it makes your code safer. Here is how it may be implemented:</p>\n\n<pre><code>//In the global scope\nsf::Texture textures[1000];\nsf::Sprite sprites[1000];\n//void draw() new for loop\nfor(int i=0;i&lt;free;i++)\n{\n    textures[i].loadFromFile(OI[i].texPath);\n    sprites[i].setTexture(s);\n    //Set other parameters\n    okno.draw(s);\n    sf::Text text;\n    text.setFont(font);\n    text.setCharacterSize(48);\n    text.setColor(sf::Color::Black);\n    text.setPosition(s.getPosition());\n    text.setString(IntToString(i));\n\n    okno.draw(text);\n}\n\n</code></pre>\n\n<p>By the way, there are some more improvements to your code. Texture loading operation is a heavy operation, so if paths to textures are immutable, I will recommend you adding some method for loading them at once. Also, creating text class may be a heavy operation, so it is good to add global array of <code>sf::Text</code> classes you use</p>\n"}], "owner": {"reputation": 21, "user_id": 11704897, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HlJz-DAUXCw/AAAAAAAAAAI/AAAAAAAAABY/B0ME1GIHxIQ/photo.jpg?sz=128", "display_name": "Rafal Fuchs", "link": "https://stackoverflow.com/users/11704897/rafal-fuchs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564902562, "creation_date": 1561574665, "question_id": 56779263, "link": "https://stackoverflow.com/questions/56779263/why-that-code-dont-draw-sprites-c-sfml", "title": "Why that code don&#39;t draw sprites C++ SFML", "body": "<p>I wanted to draw sprites on screen having only information about it in my struct and next draw text on it</p>\n\n<p>Information are good \nX and Y scale=1\nPath is good and point to graphic \nposition and rotation =0;</p>\n\n<p>int free have a good number</p>\n\n<p>But Text works \nso i don't know why Sprite don't  </p>\n\n<p>I tried commenting code with drawing and making text don't work</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct ObjectInfo\n{\n    float Xpoz,Ypoz;\n    std::string TexPath;\n    float Xscale,Yscale;\n    float Rotation;\n\n};\nObjectInfo OI[1000];\n\nint free;\n\nvoid Draw()\n{\n    for(int i=0;i&lt;free;i++)\n    {\n        sf::Texture t;\n        t.loadFromFile(OI[i].TexPath);\n        sf::Sprite s;\n        s.setTexture(t);\n        s.setPosition(OI[i].Xpoz,OI[i].Ypoz);\n        s.setScale(OI[i].Xpoz,OI[i].Ypoz);\n        s.setRotation(OI[i].Rotation);\n\n        okno.draw(s);\n\n        sf::Text text;\n        text.setFont(font);\n        text.setCharacterSize(48);\n        text.setColor(sf::Color::Black);\n        text.setPosition(s.getPosition());\n        text.setString(IntToString(i));\n\n        okno.draw(text);\n    }\n}\n\n</code></pre>\n\n<p>I expected that sprites and Text display\nbut only text display</p>\n"}, {"tags": ["android", "python", "c++", "android-ndk", "android-sdk-2.3"], "answers": [{"comments": [{"owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "edited": false, "score": 0, "creation_date": 1561582075, "post_id": 56780545, "comment_id": 100116333, "body": "that worked. But now it is only providing result for one stackframe deep, whereas the tombstone list many stack frames. I guess that is a separate issue outside the scope of this specific question though."}, {"owner": {"reputation": 420, "user_id": 3738870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190425893cffeaa9db58f472ef15b111?s=128&d=identicon&r=PG&f=1", "display_name": "user3738870", "link": "https://stackoverflow.com/users/3738870/user3738870"}, "edited": false, "score": 0, "creation_date": 1572214238, "post_id": 56780545, "comment_id": 103481877, "body": "I couldn&#39;t use the patch on Windows (it said error: corrupt patch at line 6), but manually applying the changes did help."}, {"owner": {"reputation": 166, "user_id": 10897880, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tMlicAA0uZI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ3LW-UimvrMqaC5WVpK7ePDK7OVA/mo/photo.jpg?sz=128", "display_name": "Elliott Hughes", "link": "https://stackoverflow.com/users/10897880/elliott-hughes"}, "edited": false, "score": 0, "creation_date": 1572303769, "post_id": 56780545, "comment_id": 103511409, "body": "sorry it took so long, but NDK r21 beta 1 is out now, btw: <a href=\"https://github.com/android/ndk/wiki\" rel=\"nofollow noreferrer\">github.com/android/ndk/wiki</a>"}], "tags": [], "owner": {"reputation": 166, "user_id": 10897880, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tMlicAA0uZI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ3LW-UimvrMqaC5WVpK7ePDK7OVA/mo/photo.jpg?sz=128", "display_name": "Elliott Hughes", "link": "https://stackoverflow.com/users/10897880/elliott-hughes"}, "is_accepted": true, "score": 4, "last_activity_date": 1561581524, "creation_date": 1561581524, "answer_id": 56780545, "question_id": 56779125, "link": "https://stackoverflow.com/questions/56779125/how-do-i-use-ndk-stack-using-android-ndk-r20/56780545#56780545", "title": "How do I use ndk-stack using Android NDK r20?", "body": "<p>cferris fixed this the other day: <a href=\"https://android-review.googlesource.com/c/platform/ndk/+/977970\" rel=\"nofollow noreferrer\">https://android-review.googlesource.com/c/platform/ndk/+/977970</a></p>\n\n<p>here's the patch you'll need to apply locally (or wait for NDK r21):</p>\n\n<pre><code>diff --git a/ndk-stack.py b/ndk-stack.py\nindex 93aa0297..f1bb4cd6 100755\n--- a/ndk-stack.py\n+++ b/ndk-stack.py\n@@ -32,6 +32,10 @@ def find_llvm_symbolizer():\n\n     Returns: An absolute path to llvm-symbolizer(1).\"\"\"\n\n+    llvm_symbolizer = 'llvm-symbolizer'\n+    if os.name == 'nt':\n+        # Windows has to include the exe or it won't be found.\n+        llvm_symbolizer += '.exe'\n     # ndk-stack is installed to $NDK/prebuilt/&lt;platform&gt;/bin, so from\n     # `~/Downloads/android-ndk-r18/prebuilt/linux-x86_64/bin/ndk-stack`...\n     # ...get `/usr/enh/Downloads/android-ndk-r18/`:\n@@ -42,14 +46,14 @@ def find_llvm_symbolizer():\n     # And from there construct the llvm-symbolizer path.\n     llvm_bin = os.path.join(ndk_root, 'toolchains', 'llvm', 'prebuilt', arch,\n                             'bin')\n-    path = os.path.join(llvm_bin, 'llvm-symbolizer')\n+    path = os.path.join(llvm_bin, llvm_symbolizer)\n     if os.path.exists(path):\n         return path\n\n     # Okay, maybe we're a standalone toolchain? (https://github.com/android-ndk\n/ndk/issues/931)\n     # In that case, llvm-symbolizer and ndk-stack are conveniently in\n     # the same directory...\n-    return os.path.abspath(os.path.join(ndk_bin, 'llvm-symbolizer'))\n+    return os.path.abspath(os.path.join(ndk_bin, llvm_symbolizer))\n\n\n def main():\n\n</code></pre>\n\n<p>basically \"you need to add .exe to the two places where llvm-symbolizer is mentioned\". (i introduced this bug because i didn't think you needed to explicitly say \"blah.exe\".)</p>\n"}], "owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 56780545, "answer_count": 1, "score": 1, "last_activity_date": 1561581524, "creation_date": 1561574065, "question_id": 56779125, "link": "https://stackoverflow.com/questions/56779125/how-do-i-use-ndk-stack-using-android-ndk-r20", "title": "How do I use ndk-stack using Android NDK r20?", "body": "<p>I am trying to use ndk-stack command provided with the ndk.</p>\n\n<p>Unfortunately when I run it, the script crashes.</p>\n\n<p>The command I am running on windows is is...</p>\n\n<p>ndk-stack.cmd -sym build/intermediates/cmake/debug/obj/armeabi-v7a -dump stack.txt</p>\n\n<p>stack.txt file contains the the tombstone from logcat.</p>\n\n<p>The error I am receiving is....</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"C:\\Android\\android-ndk-r20\\prebuilt\\windows-x86_64\\bin\\ndk-stack.py\",\n  line 134, in \n      main()   File \"C:\\Android\\android-ndk-r20\\prebuilt\\windows-x86_64\\bin\\ndk-stack.py\",\n  line 83, in main\n      proc = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE)   File\n  \"C:\\Android\\android-ndk-r20\\prebuilt\\windows-x86_64\\lib\\python2.7/subprocess.py\",\n  line 711, in <strong>init</strong>\n      errread, errwrite)   File \"C:\\Android\\android-ndk-r20\\prebuilt\\windows-x86_64\\lib\\python2.7/subprocess.py\",\n  line 948, in _execute_child\n      startupinfo) WindowsError: [Error 2] The system cannot find the file specified [Finished in 0.1s]</p>\n</blockquote>\n"}, {"tags": ["c++", "normal-distribution"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 1, "creation_date": 1561581383, "post_id": 56779016, "comment_id": 100116052, "body": "How did you determine that it works fine?"}, {"owner": {"reputation": 9, "user_id": 9869552, "user_type": "registered", "profile_image": "https://graph.facebook.com/2200016590220043/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/9869552/mario"}, "edited": false, "score": 0, "creation_date": 1561615840, "post_id": 56779016, "comment_id": 100123899, "body": "I made a histogram from 10000 samples, its enough for my needs"}], "answers": [{"tags": [], "owner": {"reputation": 217, "user_id": 11535440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70129a52d225a277e2fdc5a6f017adfb?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Favakeh", "link": "https://stackoverflow.com/users/11535440/zach-favakeh"}, "is_accepted": false, "score": 3, "last_activity_date": 1561583113, "creation_date": 1561583113, "answer_id": 56780883, "question_id": 56779016, "link": "https://stackoverflow.com/questions/56779016/kind-of-normal-distribution-generator/56780883#56780883", "title": "Kind of normal distribution generator", "body": "<p>This looks like a <a href=\"https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform\" rel=\"nofollow noreferrer\">Box-Mueller transform</a> to transform uniform RVs to a normal one</p>\n"}], "owner": {"reputation": 9, "user_id": 9869552, "user_type": "registered", "profile_image": "https://graph.facebook.com/2200016590220043/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/9869552/mario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561583113, "creation_date": 1561573627, "last_edit_date": 1561581079, "question_id": 56779016, "link": "https://stackoverflow.com/questions/56779016/kind-of-normal-distribution-generator", "title": "Kind of normal distribution generator", "body": "<p>I have one question. I need for documentation kind of this normal distribution generator. I found it and works fine. What is it? This isnt a reversing of distribution, or Monte Carlo method. I dont know this method.</p>\n\n<pre><code>double Class::  normal(const double mean, const double std)\n{\n    static const double pii = 3.1415927;\n    static const double r_max = RAND_MAX + 1;\n    return std * sqrt(-2 * log((rand() + 1) / r_max))*sin(2      *pii*rand() / r_max) + mean;\n}\n</code></pre>\n"}, {"tags": ["c++", "post-increment"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1561573637, "post_id": 56779000, "comment_id": 100113115, "body": "Why don&#39;t you try it?"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1561573652, "post_id": 56779000, "comment_id": 100113119, "body": "I don&#39;t want to found facetious but why not try running it? That&#39;s how to learn as a beginner."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1561573711, "post_id": 56779000, "comment_id": 100113150, "body": "<a href=\"http://coliru.stacked-crooked.com/a/d86b0767833c7555\" rel=\"nofollow noreferrer\">Not executed at all, can&#39;t compile</a>. The result of a post increment operation doesn&#39;t result in a <i>lvalue</i>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1561573801, "post_id": 56779000, "comment_id": 100113189, "body": "I&#39;d agree with that &quot;Just try it!&quot; if not for Undefined behaviour and compiler extensions. Sometimes &quot;Just trying it&quot; is inconsistent and outright wrong."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561573878, "post_id": 56779000, "comment_id": 100113224, "body": "To previous commentators, trying it yourself is a terrible way of learning C++. You cannot deduce, just from the behavior, if the code is well formed or if it contains UB. C++ cannot be learned by trial and error."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1561573893, "post_id": 56779000, "comment_id": 100113235, "body": "Some handy reading to help you parse the error message  in the code link @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  provided: <a href=\"https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\">What are rvalues, lvalues, xvalues, glvalues, and prvalues?</a>"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561574038, "post_id": 56779000, "comment_id": 100113303, "body": "The idea of trying it yourself was not meant for him to learn C++, nor an implication to learn by trial and error. It was just a note on how this question is pointless here."}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 5, "last_activity_date": 1561574142, "last_edit_date": 1561574142, "creation_date": 1561573850, "answer_id": 56779071, "question_id": 56779000, "link": "https://stackoverflow.com/questions/56779000/how-is-the-following-expression-be-executed/56779071#56779071", "title": "How is the following expression be executed?", "body": "<p>This is not legal C++ code.</p>\n\n<p>The statement</p>\n\n<pre><code>a++ = b;\n</code></pre>\n\n<p>is not legal. Intuitively, you can only place something on the left-hand side of an assignment expression if it represents an <em>object</em>, not a <em>value</em>. For example, we can't write</p>\n\n<pre><code>x + y = z;\n</code></pre>\n\n<p>because <code>x + y</code> is a value, not an object. The same principle is at play in your code: the expression <code>a++</code> is not something that can be written to, as it means \"change <code>a</code> by adding one to it, then produce the value that <code>a</code> used to have.\"</p>\n\n<p>The comments on your question talk about the formal terms that are used to describe what I'm referring to here as \"values\" and \"something can be written to.\" These are formally called <em>lvalues</em>, <em>rvalues</em>, <em>prvalues</em>, etc., and it might be worth looking into these to learn more about what sorts of assignment statements are legal.</p>\n"}], "owner": {"reputation": 17, "user_id": 9591574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2019bf7a864fdbc1fbe427fe1a913f01?s=128&d=identicon&r=PG&f=1", "display_name": "Yatharth", "link": "https://stackoverflow.com/users/9591574/yatharth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 56779071, "answer_count": 1, "score": -5, "last_activity_date": 1573856559, "creation_date": 1561573558, "last_edit_date": 1573856559, "question_id": 56779000, "link": "https://stackoverflow.com/questions/56779000/how-is-the-following-expression-be-executed", "title": "How is the following expression be executed?", "body": "<p>What is the output of the following program?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int a = 2, b = 4;\n    a++ = b;\n    cout &lt;&lt; a &lt;&lt; b;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "inner-classes"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561572519, "post_id": 56778720, "comment_id": 100112601, "body": "Instead of <code>Node</code> use <code>Tree&lt;T&gt;::Node</code>. You need to be explicit about inherited nested classes."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11704751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-at9oyrwtkxo/AAAAAAAAAAI/AAAAAAAAAAw/nePQz-DXQMI/photo.jpg?sz=128", "display_name": "Ezra Dweck", "link": "https://stackoverflow.com/users/11704751/ezra-dweck"}, "edited": false, "score": 0, "creation_date": 1561572799, "post_id": 56778760, "comment_id": 100112724, "body": "Thanks, that worked for the base class data member (root) but the Tree&lt;T&gt;:: didnt fix the problem with Node"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 19, "user_id": 11704751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-at9oyrwtkxo/AAAAAAAAAAI/AAAAAAAAAAw/nePQz-DXQMI/photo.jpg?sz=128", "display_name": "Ezra Dweck", "link": "https://stackoverflow.com/users/11704751/ezra-dweck"}, "edited": false, "score": 1, "creation_date": 1561572886, "post_id": 56778760, "comment_id": 100112770, "body": "@EzraDweck, I forgot <code>typename</code>. Corrected the answer."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 4, "last_activity_date": 1561573785, "last_edit_date": 1561573785, "creation_date": 1561572549, "answer_id": 56778760, "question_id": 56778720, "link": "https://stackoverflow.com/questions/56778720/derived-class-not-inheriting-data-members-from-base-class/56778760#56778760", "title": "Derived class not inheriting data members from Base class", "body": "<p>When the base class depends on a template parameter, its scope <a href=\"http://eel.is/c++draft/temp.dep#4\" rel=\"nofollow noreferrer\">is not examined</a> [temp.dep/4]:</p>\n\n<blockquote>\n  <p>In the definition of a class or class template, the scope of a dependent base class is not examined during unqualified name lookup either at the point of definition of the class template or member or during an instantiation of the class template or member.</p>\n</blockquote>\n\n<p>Use <code>this-&gt;</code> to refer to base class data members and <code>Tree&lt;T&gt;::</code> to refer to member types:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid SearchTree&lt;T&gt;::foo() {\n    typename Tree&lt;T&gt;::Node * node = NULL;\n    this-&gt;root = node;\n}\n</code></pre>\n\n<p><code>Tree&lt;T&gt;::Node</code> is a dependent type, so it should be prefixed with the <code>typename</code> keyword.</p>\n\n<p>Alternatively, you can introduce names with <code>using</code> declaration:</p>\n\n<pre><code>template&lt;class T&gt;\nclass SearchTree : public Tree&lt;T&gt; {\npublic:\n    void foo();\n\nprotected:\n    using typename Tree&lt;T&gt;::Node;\n    using Tree&lt;T&gt;::root;\n};\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11704751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-at9oyrwtkxo/AAAAAAAAAAI/AAAAAAAAAAw/nePQz-DXQMI/photo.jpg?sz=128", "display_name": "Ezra Dweck", "link": "https://stackoverflow.com/users/11704751/ezra-dweck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1561572609, "answer_count": 1, "score": 1, "last_activity_date": 1561573860, "creation_date": 1561572342, "last_edit_date": 1561573860, "question_id": 56778720, "link": "https://stackoverflow.com/questions/56778720/derived-class-not-inheriting-data-members-from-base-class", "closed_reason": "Duplicate", "title": "Derived class not inheriting data members from Base class", "body": "<p>I'm trying to make a Binary Search Tree class that inherits from a Tree class but the compiler says that the data members of the Tree class aren't inherited in the BST class.</p>\n\n<h2>Tree.h</h2>\n\n<pre><code>template &lt;class T&gt;\nclass Tree {\nprotected:\n    class Node {\n    public:\n        T value;\n        Node * left;\n        Node * right;\n    };\n    Node * root;\npublic:\n    Tree() : root(NULL) { }\n};\n</code></pre>\n\n<h2>BST.h</h2>\n\n<pre><code>template &lt;class T&gt;\nclass SearchTree : public Tree&lt;T&gt; {\npublic:\n    void foo();\n};\n\ntemplate &lt;class T&gt;\nvoid SearchTree&lt;T&gt;::foo() {\n    Node * node = NULL;    //error- Unknown type name 'Node'\n    root = node;    //error- Use of undeclared identifier 'root'\n}\n</code></pre>\n\n<p>I expect to be able to access Node and root from the base class \"Tree\". Why is the compiler saying they are undeclared and unknown?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1561572589, "post_id": 56778702, "comment_id": 100112632, "body": "Try printing the top-left 4 pixels, i.e. the first two columns of the first two rows."}, {"owner": {"reputation": 1430, "user_id": 5739619, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dc9137cd10cc63c14d4c774bc81ef98a?s=128&d=identicon&r=PG&f=1", "display_name": "user5739619", "link": "https://stackoverflow.com/users/5739619/user5739619"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1561573054, "post_id": 56778702, "comment_id": 100112838, "body": "I modified the post. Printing the top-left 4 pixels match what I get in Matlab, but when I print out some other pixels, the values don&#39;t match"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1561581463, "post_id": 56778702, "comment_id": 100116085, "body": "I believe in Matlab - first index is row while second is column. In openCV it should be the opposite, first index is column while second is the row."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1561584253, "post_id": 56778702, "comment_id": 100117146, "body": "in opencv, first index is row, second is column."}], "owner": {"reputation": 1430, "user_id": 5739619, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dc9137cd10cc63c14d4c774bc81ef98a?s=128&d=identicon&r=PG&f=1", "display_name": "user5739619", "link": "https://stackoverflow.com/users/5739619/user5739619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561573010, "creation_date": 1561572288, "last_edit_date": 1561573010, "question_id": 56778702, "link": "https://stackoverflow.com/questions/56778702/opencv-convertto-from-bmp-image-to-double-cv-64fc1-not-giving-same-values-as-in", "title": "OpenCV convertTo from bmp image to double/CV_64FC1 not giving same values as in Matlab", "body": "<p>In OpenCV C++, I tried</p>\n\n<pre><code>cv::Mat mat=cv::imread(\"input.bmp\");\nmat.convertTo(mat, CV_64FC1, 1.0/255.0);\nfor (int i=0; i&lt;2; i++) {\n    std::cout&lt;&lt;\"\\n\";\n    for (int j=0; j&lt;2; j++) {\n        std::cout&lt;&lt;mat.at&lt;double&gt;(i,j)&lt;&lt; \" \";\n    }   \n}\n</code></pre>\n\n<p>The values match what I get in Matlab, but if I try:</p>\n\n<pre><code>for (int i=314; i&lt;316; i++) {\n    std::cout&lt;&lt;\"\\n\";\n    for (int j=350; j&lt;352; j++) {\n        std::cout&lt;&lt;mat.at&lt;double&gt;(i,j)&lt;&lt; \" \";\n    }   \n}\n</code></pre>\n\n<p>The values I get are </p>\n\n<pre><code>.165 .189 \n.274 .208\n</code></pre>\n\n<p>While in Matlab, if I do</p>\n\n<pre><code>im=imread(\"input.bmp\")\nim2double(im(315:316,351:352))\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>.294 .310\n.317 .294\n</code></pre>\n\n<p>why is this?</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "visual-studio-2010"], "answers": [{"tags": [], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "is_accepted": false, "score": 0, "last_activity_date": 1570554801, "last_edit_date": 1570554801, "creation_date": 1561569995, "answer_id": 56778190, "question_id": 56778189, "link": "https://stackoverflow.com/questions/56778189/vcxproj-cannot-be-opened-because-its-project-type-vcxproj-is-not-supported/56778190#56778190", "title": "&#39;vcxproj&#39; cannot be opened because its project type (.vcxproj) is not supported", "body": "<p>I tried various things but ultimately the problem was that I had installed only C# in Visual Studio 2010 and I had to go back and install C++ as well. That fixed the issue.</p>\n\n<p>I did try <a href=\"https://blogs.msdn.microsoft.com/jenss/2009/09/25/problems-opening-your-project-files-in-visual-studio/\" rel=\"nofollow noreferrer\">this</a> but it didn't work for me (run <code>devenv.exe /ResetSkipPkgs</code> on VS2010 command line).</p>\n\n<p>Here is another <a href=\"https://social.msdn.microsoft.com/Forums/en-US/52bc04f9-f086-4adf-ac17-b0ea9f433c39/vbproj-is-not-supported-by-this-version-of-visual-studio?forum=vbide\" rel=\"nofollow noreferrer\">reference</a> which I tried but didn't work for me (it adds <code>devenv /setup</code> to the above).</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570554801, "creation_date": 1561569995, "last_edit_date": 1561570997, "question_id": 56778189, "link": "https://stackoverflow.com/questions/56778189/vcxproj-cannot-be-opened-because-its-project-type-vcxproj-is-not-supported", "title": "&#39;vcxproj&#39; cannot be opened because its project type (.vcxproj) is not supported", "body": "<p>I am getting this error when a open a VS2010 sln file in the same version of \nVisual Studio (VS2010).</p>\n\n<p>I installed all windows updates and service packs in hope to resolve the issue but no luck.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ug6Yk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ug6Yk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "python-3.x", "python-3.6", "cpython"], "comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1561582237, "post_id": 56778186, "comment_id": 100116402, "body": "I assume &quot;another virtual environment&quot; means some special  <code>PYTHONHOME</code>/<code>PYTHONPATH</code> (<a href=\"https://docs.python.org/3/using/cmdline.html#envvar-PYTHONHOME\" rel=\"nofollow noreferrer\">docs.python.org/3/using/cmdline.html#envvar-PYTHONHOME</a>)  and not a completely different Python-version (which can be only choosen at compile time), in this case you have to set them prior to calling the resulting exe. Or set it in the exe using <code>Py_SetPath</code> (<a href=\"https://docs.python.org/3/c-api/init.html#c.Py_SetPath\" rel=\"nofollow noreferrer\">docs.python.org/3/c-api/init.html#c.Py_SetPath</a>) / <code>Py_SetPythonHome</code>  (<a href=\"https://docs.python.org/3/c-api/init.html#c.Py_SetPythonHome\" rel=\"nofollow noreferrer\">docs.python.org/3/c-api/init.html#c.Py_SetPythonHome</a>). It is unclear what you want to do and what is your exact problem."}, {"owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1561583035, "post_id": 56778186, "comment_id": 100116694, "body": "thx for the answer, i updated the question to add an example. Hope it will be clearer... Also i found this issue in bug python bug tracker <a href=\"https://bugs.python.org/issue22213\" rel=\"nofollow noreferrer\">bugs.python.org/issue22213</a> i think it&#39;s same issue."}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1561588400, "post_id": 56778186, "comment_id": 100118321, "body": "You can try use <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/venv.html</a>"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1561625393, "post_id": 56778186, "comment_id": 100128780, "body": "Given the description in the bug report it is a not yet resolved issue (and with proposed workarounds only for linux). I don&#39;t know what you do with the embeded Python, but probably just setting the right python-path after initialization of the interpreter could be enough."}, {"owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "edited": false, "score": 0, "creation_date": 1561633735, "post_id": 56778186, "comment_id": 100133591, "body": "creating the environment with virtualenv instead of venv and using <code>Py_SetPythome</code> worked fine. It looks that the pep proposal was implement in 3.8. Thx for your help"}], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "is_accepted": true, "score": 1, "last_activity_date": 1561634432, "creation_date": 1561634432, "answer_id": 56789923, "question_id": 56778186, "link": "https://stackoverflow.com/questions/56778186/embed-python-environment-in-c-application/56789923#56789923", "title": "embed python environment in c++ application", "body": "<p>As stated in comments, embedded python 3.6 and virtual environment created with venv seem incompatible (<a href=\"https://bugs.python.org/issue22213\" rel=\"nofollow noreferrer\">bugs.python.org/issue22213</a>)</p>\n\n<p>I managed to make it work using <code>virtualenv</code> instead and by calling <code>Py_SetPythonHome</code> prior <code>Py_Initialize</code>. \nSee more details on the <a href=\"https://www.python.org/dev/peps/pep-0432/#id42\" rel=\"nofollow noreferrer\">python startup sequence</a></p>\n\n<blockquote>\n  <p><strong>Locating Python and the standard library</strong> </p>\n  \n  <p>The location of the Python\n  binary and the standard library is influenced by several elements. The\n  algorithm used to perform the calculation is not documented anywhere\n  other than in the source code. Even that description is\n  incomplete, as it failed to be updated for the virtual environment\n  support added in Python 3.3 (detailed in PEP 405).</p>\n  \n  <p>These calculations\n  are affected by the following function calls (made prior to calling\n  Py_Initialize()) and environment variables:</p>\n  \n  <ul>\n  <li><code>Py_SetPythonHome()</code></li>\n  <li><code>Py_SetProgramName()</code> </li>\n  <li><code>PYTHONHOME</code></li>\n  </ul>\n  \n  <p>The filesystem is also inspected for\n  pyvenv.cfg files (see PEP 405) or, failing that, a <code>lib/os.py</code> (Windows)\n  or <code>lib/python$VERSION/os.py</code> file.</p>\n  \n  <p>The build time settings for <code>PREFIX</code>\n  and <code>EXEC_PREFIX</code> are also relevant, as are some registry settings on\n  Windows. The hardcoded fallbacks are based on the layout of the\n  CPython source tree and build output when working in a source\n  checkout.</p>\n</blockquote>\n\n<p>The implementation of <a href=\"https://www.python.org/dev/peps/pep-0587/\" rel=\"nofollow noreferrer\">pep 587</a> in later versions should facilitate all this!</p>\n"}], "owner": {"reputation": 757, "user_id": 3746418, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fe6300bcee878367d73bd66ed8a1bfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand", "link": "https://stackoverflow.com/users/3746418/bertrand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "accepted_answer_id": 56789923, "answer_count": 1, "score": 1, "last_activity_date": 1561634432, "creation_date": 1561569992, "last_edit_date": 1561582786, "question_id": 56778186, "link": "https://stackoverflow.com/questions/56778186/embed-python-environment-in-c-application", "title": "embed python environment in c++ application", "body": "<p>Using the c-python api I try to embed python 3.6 into a c++ application.\nHowever instead of using the system install i'd like to use a virtual environment.\nI didn't find any documentation on the way to do that.\nSome related documentation mention </p>\n\n<pre><code>py_SetProgramName\n</code></pre>\n\n<p>or </p>\n\n<pre><code>py_SetPythonHome\n</code></pre>\n\n<p>Also when reading c-python code i can see the use of  <code>pvenv.cfg</code> or <code>._pth</code> files, but none of these solution seem to work.</p>\n\n<p>Any idea what's the right way to use virtual environment from c api?</p>\n\n<p>EDIT</p>\n\n<p>Let's take a concrete example. I have python installed in</p>\n\n<pre><code>c:\\python36\n</code></pre>\n\n<p>For my c++ application I created a virtual env using the command <code>python -m venv c:\\my_cpp_app\\python_venv\\</code> in:</p>\n\n<pre><code>c:\\my_cpp_app\\python_venv\\\n</code></pre>\n\n<p>Using the c-python api I'd like to make my cpp application use the virtual environment located in <code>python_venv</code> instead of <code>c:\\python36\\</code></p>\n"}, {"tags": ["c++", "arrays", "dynamic", "types", "casting"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1561569932, "post_id": 56778151, "comment_id": 100111482, "body": "<code>content[i] == 0</code> compares a <code>char</code> and an <code>int</code>. What specifically is giving you said error?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561570148, "post_id": 56778151, "comment_id": 100111590, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as required here please! (<a href=\"https://stackoverflow.com/posts/56778151/edit\">Edit</a> your question)"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1561570644, "post_id": 56778151, "comment_id": 100111819, "body": "<code>content[i] == 0</code> is correct, so whatever problem you are having, it&#39;s not that. There&#39;s some other issue with your code and you&#39;re only making things worse by trying to fix the wrong thing (common newbie situation). Posting a complete program illustrating your problem instead of just snippetts would help."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1561570698, "post_id": 56778151, "comment_id": 100111841, "body": "Perhaps <a href=\"https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c-or-c\">this question</a> helps?"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1561570278, "post_id": 56778239, "comment_id": 100111643, "body": "\\0 is not the same as &quot;0&quot;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561570374, "post_id": 56778239, "comment_id": 100111682, "body": "Raw <code>char*</code> pointers aren&#39;t really compared like this. OP would need to use <code>strcmp()</code> to do that."}], "tags": [], "owner": {"reputation": 57, "user_id": 11704489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432cbd6fb8010702b84e91527da5a1fb?s=128&d=identicon&r=PG&f=1", "display_name": "Xander", "link": "https://stackoverflow.com/users/11704489/xander"}, "is_accepted": false, "score": -4, "last_activity_date": 1561570292, "last_edit_date": 1561570292, "creation_date": 1561570172, "answer_id": 56778239, "question_id": 56778151, "link": "https://stackoverflow.com/questions/56778151/comparing-a-char-in-a-dynamic-array-with-a-char/56778239#56778239", "title": "comparing a char in a dynamic array with a char", "body": "<p>Try <code>\"0\"</code> in you if-statement, since then you would be comparing the same types</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 4, "last_activity_date": 1561584021, "last_edit_date": 1561584021, "creation_date": 1561570880, "answer_id": 56778405, "question_id": 56778151, "link": "https://stackoverflow.com/questions/56778151/comparing-a-char-in-a-dynamic-array-with-a-char/56778405#56778405", "title": "comparing a char in a dynamic array with a char", "body": "<p>in </p>\n\n<pre><code>if (content[i] == \"\\0\")\n</code></pre>\n\n<p>the <code>\"\\0\"</code> is a string literal, a <code>const char [2]</code> in this case. This <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">decays</a> to a pointer, resulting in a <code>const char *</code> being compared with a <code>char</code> and the compiler error.</p>\n\n<p>You want </p>\n\n<pre><code>if (content[i] == '\\0')\n</code></pre>\n\n<p>to get a null as a character. That said, integers can compare against <code>char</code>, so <code>if (content[i] == 0)</code> is valid, but (my opinion) less clear than explicitly making a null character.</p>\n\n<p>Further reading: <a href=\"https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c-or-c\">Single quotes vs. double quotes in C or C++</a> (<a href=\"https://stackoverflow.com/users/962089/chris\">chris</a> provided the link)</p>\n"}], "owner": {"reputation": 49, "user_id": 8276872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46fe3344e779842246709012c8f4e31?s=128&d=identicon&r=PG&f=1", "display_name": "MineII CrafterII", "link": "https://stackoverflow.com/users/8276872/mineii-crafterii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 56778405, "answer_count": 2, "score": -1, "last_activity_date": 1561584021, "creation_date": 1561569842, "last_edit_date": 1561573428, "question_id": 56778151, "link": "https://stackoverflow.com/questions/56778151/comparing-a-char-in-a-dynamic-array-with-a-char", "title": "comparing a char in a dynamic array with a char", "body": "<p>I want to print a dynamic char array which has \\0 characters before the actual end.\nI am printing it by using <code>cout</code> for every index.</p>\n\n<pre><code>for (int i = 0; i &lt; size; i++) {\n\n        std::cout &lt;&lt; content[i];\n}\n</code></pre>\n\n<p>But when I come by a \\0 character I want to detect it, so I'm using:</p>\n\n<pre><code>if (content[i] == 0) {\n     std::cout \"zero\";\n}\n</code></pre>\n\n<p>I tried to do </p>\n\n<pre><code>if (content[i] == \"\\0\") {\n     std::cout \"zero\";\n}\n</code></pre>\n\n<p>But I can't do that comparison because you apparently cannot compare a <code>const char*</code> and a <code>char</code>.</p>\n\n<p>What did I do wrong? How do I make this comparison?</p>\n\n<p><code>char</code> array btw:</p>\n\n<pre><code>char * content = new char[size];\nfile.seekg(0);\nfile.read(content, size);\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1561570876, "post_id": 56778142, "comment_id": 100111928, "body": "@JeJo For the record, you can type <code>[mcve]</code>, <code>[mvce]</code>, <code>[reprex]</code> or <code>[repro]</code> to get a link like this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1561571267, "post_id": 56778142, "comment_id": 100112084, "body": "I&#39;m just speculating here, but what happens if you actually try referencing <code>CppMethodNative</code> for some specific specialization (say, <code>CppMethodNative&lt;int&gt;</code>) in <code>main</code>? I&#39;m guessing that will fail, and that what&#39;s happening here is that the compiler can confirm that the first is <i>never</i> valid, but the second <i>might</i> be if you had a specialization of <code>CppMethod</code> that did turn out to be a literal type?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561571329, "post_id": 56778142, "comment_id": 100112107, "body": "@MaxLanghof Can confirm it does not work with clang 8.0 <a href=\"https://godbolt.org/z/_xrtOf\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 2, "creation_date": 1561571665, "post_id": 56778503, "comment_id": 100112245, "body": "@JeJo To be clear, GCC is not wrong in giving no diagnostic here."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1561571768, "last_edit_date": 1561571768, "creation_date": 1561571364, "answer_id": 56778503, "question_id": 56778142, "link": "https://stackoverflow.com/questions/56778142/stdfunction-literal-types-and-templates/56778503#56778503", "title": "std::function, literal types and templates", "body": "<p><em>Edit: Yakk's answer is more complete - one has to of course consider the theoretical possibility of <code>std::function</code> specializations!</em></p>\n\n<p><code>constexpr</code> means \"there is at least one set of arguments for which this function produces a constant expression\". If no such arguments exist, the program is ill-formed, <em>no diagnostic required</em>. This means it is up to the compiler whether it completely ignores this issue, whether it only complains at instantiation-time or whether it already barks at the declaration.</p>\n\n<p><code>clang</code> is evidently <a href=\"https://godbolt.org/z/VOy66x\" rel=\"nofollow noreferrer\">smart/eager enough</a> to realize that a function template with a non-literal return type can never be <code>constexpr</code>. <code>gcc</code> does not seem to bother checking this - it's not required to. Your program is still wrong though - <code>std::function</code> is not a literal type and can thus never be returned from a <code>constexpr</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1561644085, "last_edit_date": 1592644375, "creation_date": 1561571669, "answer_id": 56778556, "question_id": 56778142, "link": "https://stackoverflow.com/questions/56778142/stdfunction-literal-types-and-templates/56778556#56778556", "title": "std::function, literal types and templates", "body": "<blockquote>\n<p>To my surprise, first declaration cause compiler error Constexpr function's return type is not a literal type, but second works just fine.</p>\n<p>Why does this happen? Is it related to the fact that second function's return type is template?</p>\n</blockquote>\n<p>Yes.  In the first case, the compiler can prove that that specific specialization of <code>std::function</code> is not a literal type.</p>\n<p>In the second case, it must know <code>T</code> before it knows if the specific specialization of <code>std::function</code> is a literal type.</p>\n<pre><code>template&lt;class T&gt;\nstruct example {\n  virtual T get() const {return {};}\n  ~example() {}\n};\ntemplate&lt;&gt;\nstruct example&lt;int&gt; {};\n\n#if 0\ntemplate&lt;class F&gt;\nconstexpr example&lt;double&gt; test( F ) { return {}; }\n#endif\n\ntemplate&lt;class T, class F&gt;\nconstexpr example&lt;T&gt; test2( F ) { return {}; }\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/8cd700b8bb25b69e\" rel=\"noreferrer\">Live example</a></p>\n<p><code>test</code> is illegal; <code>test2</code> is fine.  In fact, <code>test2&lt;int&gt;( 3.14 )</code> is a legal <code>constexpr</code> call.</p>\n<p>Now, <code>std::function</code> has <strong>no such specialization</strong>, but that is not something the compiler is required to prove; doing so in general requires solving the halting problem, which is something C++ standard tries to avoid asking compilers to do.</p>\n<p>As mentioned by @MaxLanghof, this kind of error results in an &quot;ill-formed, no diagnostic required&quot; program.  The compiler is not forced to detect that your <code>constexpr</code> function cannot be <code>constexpr</code>, but if you do that the compiler is free to do anything, including generate an error message (or worse things).</p>\n<p>So GCC is not wrong to omit the error, and clang is not wrong to emit an error.  Clang's error emission is, in a sense, a higher QoI than gcc's omission.</p>\n"}], "owner": {"reputation": 1257, "user_id": 5697743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00199350bd70257e700ff327d4944efb?s=128&d=identicon&r=PG", "display_name": "val is still with Monica", "link": "https://stackoverflow.com/users/5697743/val-is-still-with-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 56778556, "answer_count": 2, "score": 3, "last_activity_date": 1561644085, "creation_date": 1561569794, "last_edit_date": 1561571778, "question_id": 56778142, "link": "https://stackoverflow.com/questions/56778142/stdfunction-literal-types-and-templates", "title": "std::function, literal types and templates", "body": "<p>I'm working on C++17 project which among others have these definitions (in my namespace, of course):</p>\n\n<pre><code>using CppFunction = std::function&lt;int(StatePtr&amp;)&gt;;\n\ntemplate&lt;typename T&gt;\nusing CppMethod = std::function&lt;int(T*, StatePtr&amp;)&gt;;\n</code></pre>\n\n<p>Now I declare some functions:</p>\n\n<pre><code>template&lt;typename... Targs, typename F&gt;\nconstexpr CppFunction CppFunctionNative(F func);\n\ntemplate&lt;typename... Targs, typename F, typename T = (deducing class from F here) &gt;\nconstexpr CppMethod&lt;T&gt; CppMethodNative(F func);\n</code></pre>\n\n<p>To my surprise, first declaration cause compiler error <code>Constexpr function's return type is not a literal type</code>, but second works just fine.</p>\n\n<p>Why does this happen? Is it related to the fact that second function's return type is template?</p>\n\n<p>UPD: simplified standalone example:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nusing CppFunction = std::function&lt;int(int&amp;)&gt;;\n\ntemplate&lt;typename T&gt;\nusing CppMethod = std::function&lt;int(T*, int&amp;)&gt;;\n\n// Clang will complain\ntemplate&lt;typename F&gt;\nconstexpr CppFunction CppFunctionNative(F func) {};\n\n// Clang will not complain\ntemplate&lt;typename F, typename T = /*(deducing class from F here)*/char &gt;\nconstexpr CppMethod&lt;T&gt; CppMethodNative(F func) {};\n\n// main() function doesn't matter\nint main() {\n    CppFunctionNative(0);\n    CppMethodNative(0);\n    return 0;\n};\n</code></pre>\n\n<p>Interestingly enough, <a href=\"https://onlinegdb.com/rkHnAQ-lB\" rel=\"nofollow noreferrer\">OnlineGDB</a> and offline GCC 8.3.0 doesn't complain about this, but my Clang 8 does.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1561568399, "post_id": 56777740, "comment_id": 100110790, "body": "What is going on with the <code>next()</code> part? Are you trying to scan from offset 4? That&#39;s the last element in the array."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1561569547, "post_id": 56777740, "comment_id": 100111293, "body": "@tadman The OP is trying to go backwards."}, {"owner": {"reputation": 11, "user_id": 6443385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vvP8J.jpg?s=128&g=1", "display_name": "taichouvik", "link": "https://stackoverflow.com/users/6443385/taichouvik"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1561661025, "post_id": 56777740, "comment_id": 100148491, "body": "@tadman there is some more code which makes &#39;i&#39; iterate towards zero while everything towards right of &#39;i&#39; becomes decreasing. I omitted that part because I was just concerned with this particular behavior sorry!"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561569553, "post_id": 56777849, "comment_id": 100111297, "body": "Presumably reverse iterators can help here"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1561568571, "creation_date": 1561568571, "answer_id": 56777849, "question_id": 56777740, "link": "https://stackoverflow.com/questions/56777740/lower-bound-function-not-working-properly/56777849#56777849", "title": "lower_bound function not working properly?", "body": "<p>You're not supposed to use the reference to <code>std::greater</code>.</p>\n\n<p>The <code>std::lower_bound</code> function uses a comparison operator to work out whether the element you're searching for is greater than or lower than the elements in the collection. The function presumes that the comparison operator is for less-than, i.e. <code>std::less</code>, and if you provide <code>std::greater</code> instead, the algorithm will get confused and evaluate items in reverse order.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6443385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vvP8J.jpg?s=128&g=1", "display_name": "taichouvik", "link": "https://stackoverflow.com/users/6443385/taichouvik"}, "edited": false, "score": 0, "creation_date": 1561660782, "post_id": 56778199, "comment_id": 100148387, "body": "Hey what do i use if i need to find an element which is equal to or greater than a given key in a decreasing array? For an increasing array this can be done by lower_bound (implicit comparator) therefore i had mistakenly assumed that just using std::greater with lower_bound will do the trick (being grossly wrong with the basic concepts!)."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1561570415, "last_edit_date": 1592644375, "creation_date": 1561570032, "answer_id": 56778199, "question_id": 56777740, "link": "https://stackoverflow.com/questions/56777740/lower-bound-function-not-working-properly/56778199#56778199", "title": "lower_bound function not working properly?", "body": "<blockquote>\n<p>I am using lower_bound to search for element greater than or equal to key in the range [back,end) of a vector which may contain decreasing elements in the given range. So ,I also have to use the greater() functor.</p>\n<pre><code>vector&lt;int&gt;v={1,2,3,4,5};\n</code></pre>\n</blockquote>\n<p><code>std::lower_bound</code> requires that the input range is sorted according to the comparison object argument. Your vector is not sorted with the <code>std::greater</code>. If it was, then the greatest value would be first.</p>\n<p>If your vector is sorted such that least value is first, then you must use <code>std::less</code> (which is the default, so does not need to be specified explicitly).</p>\n<hr />\n<p>That said, <code>next(v.begin(),3+1)</code> is an iterator to the last element of the array, so the range <code>[next(v.begin(),3+1), v.end()[</code> contains exactly one element, whose value is 5. So this range of a single element is in fact sorted according to all possible comparison functions, so using <code>std::greater</code> is technically not a problem.</p>\n<p>So, <code>std::lower_bound</code> returns the iterator to the first value that does not satisfy the comparison (i.e. is not less than when using <code>std::less</code> or is not greater than when using <code>std::greater</code>). Otherwise it returns iterator to the end of the range, which in your case is one past the last element of the array.</p>\n<p>You've given v[3] i.e the value 4 as the compared value. The range that contains the value 5 does not contain any elements that are not greater than 4, and therefore <code>std::lower_bound</code> returns the iterator to the end of the range. You indirect through this iterator, and the behaviour of the program is undefined.</p>\n<p>If you don't use <code>std::greater</code> i.e. you implicitly use <code>std::less</code>, then the range that contains value 5 does contain an element that is not less than 4. Namely the one element whose value is 5. Thus <code>std::lower_bound</code> returns iterator to that element, and indirection through that iterator produces the value 5.</p>\n<hr />\n"}], "owner": {"reputation": 11, "user_id": 6443385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vvP8J.jpg?s=128&g=1", "display_name": "taichouvik", "link": "https://stackoverflow.com/users/6443385/taichouvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 56778199, "answer_count": 2, "score": -2, "last_activity_date": 1561570415, "creation_date": 1561568185, "question_id": 56777740, "link": "https://stackoverflow.com/questions/56777740/lower-bound-function-not-working-properly", "title": "lower_bound function not working properly?", "body": "<p>I am using lower_bound to search for element greater than or equal to key in the range [back,end) of a vector which may contain decreasing elements in the given range. So ,I also have to use the greater() functor. The value returned should be the last element itself(for the given range), but the function returns 0. Why?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>vector&lt;int&gt;v={1,2,3,4,5};\nint i=3;\ncout&lt;&lt;*lower_bound(next(v.begin(),i+1),v.end(),v[i],greater&lt;int&gt;());\n</code></pre>\n\n<p>expected output : 5</p>\n\n<p>if i remove the greater() code, it works fine.</p>\n"}, {"tags": ["c++", "qt", "widget", "qframe"], "answers": [{"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 0, "last_activity_date": 1561590751, "creation_date": 1561590751, "answer_id": 56782023, "question_id": 56777727, "link": "https://stackoverflow.com/questions/56777727/customized-widget-like-qframe-in-qt/56782023#56782023", "title": "Customized Widget like QFrame in Qt", "body": "<p>You don't need to worry about widgets painting outside your widget's border. Widget painting is automatically clipped by its parent, so Qt handles that for you.</p>\n\n<p>What I believe you want is to add an empty QWidget into your vertical layout. That widget will serve as the container widget for anything that subclasses want to add. You can either expose that widget to callers so that they can place their own layouts on it (and those layouts will contain any child widgets in any layout desired), or you can add a new method--say \"setContainerLayout\"--where the caller can build a layout and apply it to the container widget. </p>\n\n<p>When you place the container widget into your internal layout, you will probably want to experiment with the layout margins to keep the container within your border.</p>\n"}], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 635, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561590751, "creation_date": 1561568143, "question_id": 56777727, "link": "https://stackoverflow.com/questions/56777727/customized-widget-like-qframe-in-qt", "title": "Customized Widget like QFrame in Qt", "body": "<p>I have written my own class in <code>Qt creator</code> (<code>C++</code>). I want to achieve something similar to the picture given below (see the Label \"Options\" at the top left of the <code>border</code>) (Even if well-known classes exist, you can mention those classes name but I still want to try out my custom class to learn more about Qt):</p>\n\n<p><a href=\"https://i.stack.imgur.com/0KStV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0KStV.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have achieved the same thing by writing my own class:</p>\n\n<p><code>widget.h</code></p>\n\n<pre><code>#ifndef WIDGET_H\n#define WIDGET_H\n\n#include &lt;QWidget&gt;\n#include &lt;QFrame&gt;\n#include &lt;QLabel&gt;\n\nclass Widget: public QFrame {\nQ_OBJECT\n\npublic:\n    void resizeEvent(QResizeEvent *event) override;\n    void paintEvent(QPaintEvent *event) override;\n\npublic:\n    Widget(QWidget *parent = nullptr);\n    ~Widget(void) override;\n\nprivate:\n    QLabel *label_ = nullptr;\n};\n\n#endif // WIDGET_H\n</code></pre>\n\n<p><code>widget.cpp</code></p>\n\n<pre><code>#include \"widget.h\"\n\n#include &lt;QDebug&gt;\n#include &lt;QHBoxLayout&gt;\n#include &lt;QResizeEvent&gt;\n\n#include &lt;QPainter&gt;\n#include &lt;QPaintEvent&gt;\n\n#include &lt;QString&gt;\n\nWidget::Widget(QWidget *parent): QFrame(parent)\n{\n    qDebug() &lt;&lt; \"Creating Widget\";\n\n    label_ = new QLabel;\n    label_-&gt;setText(tr(\"Size: 0\"));\n\n    QHBoxLayout *hlayout = new QHBoxLayout;\n    hlayout-&gt;addStretch(1);\n    hlayout-&gt;addWidget(label_);\n    hlayout-&gt;addStretch(1);\n\n    QHBoxLayout *vlayout = new QHBoxLayout;\n    vlayout-&gt;addStretch(1);\n    vlayout-&gt;addLayout(hlayout);\n    vlayout-&gt;addStretch(1);\n\n    setLayout(vlayout);\n    setFrameStyle(2);\n}\n\nWidget::~Widget(void)\n{\n\n}\n\nvoid Widget::resizeEvent(QResizeEvent *event)\n{\n    QString text = QString(\"Size: %1 . %2\").arg(event-&gt;size().width()).arg(event-&gt;size().height());\n    qDebug() &lt;&lt; \"Resize Event: Old: \" &lt;&lt; event-&gt;oldSize() &lt;&lt; \" New: \" &lt;&lt; event-&gt;size() &lt;&lt; \" Text: \" &lt;&lt; text;\n    label_-&gt;setText(text);\n}\n\nvoid Widget::paintEvent(QPaintEvent *event)\n{\n    Q_UNUSED(event);\n\n    qDebug() &lt;&lt; \"Paint Evemt\";\n\n    QPainter painter(this);\n    painter.setPen(QColor(\"Red\"));\n//    painter.setBrush(QColor(\"Red\"));\n    int width = size().width();\n    int height = size().height();\n\n    double factor = 1.0 / 10.0;\n    QLine third = QLine(int(width * (1 - factor)), int(height * factor), int(width * (1 - factor)), int(height * (1 - factor)));\n\n    QString text(\"Hello Sir\");\n    QRect textRect = QFontMetrics(painter.font()).boundingRect(text);\n\n    qDebug() &lt;&lt; textRect;\n\n    painter.drawLine(int(width * factor) + textRect.width(), int(height * factor), int(width * (1 - factor)), int(height * factor));\n    painter.drawLine(int(width * factor), int(height * factor), int(width * (factor)), int(height * (1 - factor)));\n    painter.drawLine(third);\n    painter.drawLine(int(width * factor), int(height * (1 - factor)), int(width * (1 - factor)), int(height * (1 - factor)));\n\n    painter.drawText(QPoint(int(width * factor), int(height * factor + textRect.height() / 2)), text);\n}\n</code></pre>\n\n<p>My widget is shown below (Please ignore the centered <code>QLabel</code>, it is used for debugging and learning purposes):</p>\n\n<p><a href=\"https://i.stack.imgur.com/dlSTk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dlSTk.png\" alt=\"enter image description here\"></a></p>\n\n<p>I will define functions like <code>setHeader(QString)</code> to set the <code>text</code> on the top-left corner of the border. </p>\n\n<p>Now, I have to extend my class to have following provisions:</p>\n\n<ol>\n<li><p>I don't want that anything draws on or beyond my border and it's header. This class of mine will be used later to add many widgets inside it (will be subclassed). How to achieve this? How to stop or restrict any painting or drawing of widgets that will be contained inside my custom widget?</p></li>\n<li><p>I want to verify my implementation that I have achieved so far. Am I using standard methods of <code>Qt</code>? Can I further improve it?</p></li>\n</ol>\n"}, {"tags": ["c++", "stdvector"], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1561568677, "post_id": 56777856, "comment_id": 100110904, "body": "You&#39;d fail to compile if compiled by Turbo C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1561568774, "post_id": 56777856, "comment_id": 100110944, "body": "@SombreroChicken That&#39;s not saying much"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 7, "last_activity_date": 1561568678, "last_edit_date": 1561568678, "creation_date": 1561568584, "answer_id": 56777856, "question_id": 56777658, "link": "https://stackoverflow.com/questions/56777658/why-vectorerase-cant-work-on-class-element-with-const/56777856#56777856", "title": "Why vector::erase can&#39;t work on class element with const", "body": "<p>Certain operations on a vector require the elements to be copy- or move-assignable [<a href=\"https://en.cppreference.com/w/cpp/named_req/MoveAssignable\" rel=\"noreferrer\">ref</a>].</p>\n\n<p>In this case, you're seeing the implementation of the <code>.erase</code> function fail to compile because it needs to know how to shuffle elements around in the container [<a href=\"https://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"noreferrer\">ref</a>] (even though your particular example would merely have resulted in an empty vector).</p>\n\n<p>When you make a member <code>const</code>, you prevent that.</p>\n\n<p>You can't have that <code>const</code>.</p>\n"}], "owner": {"reputation": 139, "user_id": 8965461, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4G3fbr-Gsk8/AAAAAAAAAAI/AAAAAAAAAOs/Ttw2oR65Kms/photo.jpg?sz=128", "display_name": "nullptr", "link": "https://stackoverflow.com/users/8965461/nullptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 56777856, "answer_count": 1, "score": 0, "last_activity_date": 1561569835, "creation_date": 1561567845, "last_edit_date": 1561569835, "question_id": 56777658, "link": "https://stackoverflow.com/questions/56777658/why-vectorerase-cant-work-on-class-element-with-const", "title": "Why vector::erase can&#39;t work on class element with const", "body": "<p>I tried to erase the element of the vector that stores the class containing the const member, but I failed and got an error.</p>\n\n<p>When I remove the constant modifier, the program compiles normally.</p>\n\n<pre><code>class C\n{\npublic:\n    const int i;\n    C(int i = 1):i(i){};\n};\n\n\nint main()\n{\n    vector&lt;C&gt; v;\n    C c;\n    v.push_back(c);\n    v.erase(v.begin());\n    return 0;\n}\n\nerror C2280: 'C &amp;C::operator =(const C &amp;)': attempting to reference a deleted function\nm.cpp(151): note: compiler has generated 'C::operator =' here\nm.cpp(151): note: 'C &amp;C::operator =(const C &amp;)': function was implicitly deleted because 'C' has a data member 'C::i' of const-qualified non-class type\nm.cpp(146): note: see declaration of 'C::i'\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1561567577, "post_id": 56777409, "comment_id": 100110437, "body": "There&#39;s no <code>cout</code> in this code. Also double-buffering is a technique for graphical output, not text. If the console blinks and flickers it&#39;s a function of the console."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11117421"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1561568058, "post_id": 56777409, "comment_id": 100110647, "body": "I thought the following was obvious because cout is such a common thing it was implied, if you are a beginner I written example code to show this: <code>std::cout &lt;&lt; &quot;test&quot; &lt;&lt; std::endl; ClearScreen();</code> It is a manageable function of the console thus why I am asking how to do it."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1561568078, "creation_date": 1561568078, "answer_id": 56777710, "question_id": 56777409, "link": "https://stackoverflow.com/questions/56777409/specific-double-buffering-with-this-code/56777710#56777710", "title": "&#39;Specific&#39; Double buffering with this code?", "body": "<p>The basic idea is to call <code>CreateConsoleScreenBuffer</code> to create an off-screen buffer. Then clear/fill it as needed by passing the handle to that screen buffer when you do your calls to <code>FillConsoleOutputCharacter</code>, <code>FillConsoleOutputAttribute</code>, etc. When it's ready for the user to view, call <code>SetConsoleActiveScreenBuffer</code> to make it the active buffer for the console.</p>\n\n<p>Note that in most cases you won't want to create a new screen buffer every time you clear the screen--rather you'll probably want to create two screen buffers when you start your program, and alternate between the two as you write and display output.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11117421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 56777710, "answer_count": 1, "score": 1, "last_activity_date": 1561568078, "creation_date": 1561566791, "last_edit_date": 1561567135, "question_id": 56777409, "link": "https://stackoverflow.com/questions/56777409/specific-double-buffering-with-this-code", "title": "&#39;Specific&#39; Double buffering with this code?", "body": "<p>For this code I am trying to implement double buffering so that it does not blink when updating the <code>std::cout</code> on my console window in windows 10. What is the best way to implement this into my current code? I am looking at <a href=\"https://docs.microsoft.com/en-us/windows/console/reading-and-writing-blocks-of-characters-and-attributes\" rel=\"nofollow noreferrer\">some Microsoft documentation</a> but I can't figure out a way to merge it so to speak?</p>\n\n<pre><code>void ClearScreen()\n{\n    HANDLE                     hStdOut;\n    CONSOLE_SCREEN_BUFFER_INFO csbi;\n    DWORD                      count;\n    DWORD                      cellCount;\n    COORD                      homeCoords = { 0, 0 };\n\n    homeCoords.X = 0;\n    homeCoords.Y = 0;\n\n    hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n    if (hStdOut == INVALID_HANDLE_VALUE) return;\n\n    /* Get the number of cells in the current buffer */\n    if (!GetConsoleScreenBufferInfo(hStdOut, &amp;csbi)) return;\n    cellCount = csbi.dwSize.X * csbi.dwSize.Y;\n\n    /* Fill the entire buffer with spaces */\n    if (!FillConsoleOutputCharacter(\n        hStdOut,\n        (TCHAR) ' ',\n        cellCount,\n        homeCoords,\n        &amp;count\n    )) return;\n\n    /* Fill the entire buffer with the current colors and attributes */\n    if (!FillConsoleOutputAttribute(\n        hStdOut,\n        csbi.wAttributes,\n        cellCount,\n        homeCoords,\n        &amp;count\n    )) return;\n\n    /* Move the cursor home */\n    SetConsoleCursorPosition(hStdOut, homeCoords);\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "function", "getline"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1561566501, "post_id": 56777303, "comment_id": 100109979, "body": "If you don&#39;t mind me asking, what book are you using?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1561566524, "post_id": 56777303, "comment_id": 100109989, "body": "One names your variable declared in <code>main()</code>, the other names the parameter of <code>displayMessage()</code>. There&#39;s no <i>&quot;transformation&quot;</i>. Isn&#39;t that working the same in Python?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1561566588, "post_id": 56777303, "comment_id": 100110015, "body": "Consider reading text-books from start to finish, not from arbitrary place. Or, alternatively, choose one from the community moderated list of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ books</a>. The variable names are only meant for the reader, and are not preserved in the compiled code."}, {"owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1561566640, "post_id": 56777303, "comment_id": 100110041, "body": "@NathanOliver I&#39;m taking an online C++ course from a university. The textbook they use is Paul Deitel, Harvey Deitel, C++: How to Program"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1561566967, "post_id": 56777303, "comment_id": 100110203, "body": "there is no <i>transformed</i> variable, is just name of variable/parameter, and both are typed <i>string</i> so not even type conversion. The names you use is only <i>syntactic sugar</i>. You also have var in Python. If you replace all <i>courseName</i> by <i>turlututu</i> in the source you will have the same result"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1561567279, "post_id": 56777303, "comment_id": 100110324, "body": "I&#39;ve read said textbook and I don&#39;t remember this terminology being in there. Granted it&#39;s been a good while."}, {"owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "edited": false, "score": 0, "creation_date": 1561567514, "post_id": 56777303, "comment_id": 100110413, "body": "Thank you all for your help &amp; patience. Hopefully I&#39;ll come up with better questions in the future when I get better at this."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561568080, "post_id": 56777303, "comment_id": 100110658, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I think in Python it is always like passing by reference"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1561568132, "post_id": 56777303, "comment_id": 100110678, "body": "@Ayxan How does that affect the naming?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1561578896, "post_id": 56777303, "comment_id": 100115205, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 it doesn&#39;t. Naming is exactly like in C++; functions have different scopes. But &quot;transforms&quot; may be more accurate Python&#39;s case because nothing is copied unless you specifically do copying"}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 2, "last_activity_date": 1561567167, "creation_date": 1561567167, "answer_id": 56777498, "question_id": 56777303, "link": "https://stackoverflow.com/questions/56777303/how-does-a-c-string-class-transforms-a-variable-to-another-variable/56777498#56777498", "title": "How does a C++ string class transforms a variable to another variable?", "body": "<p>A function parameter can have any name.</p>\n\n<pre><code>int display_int(int the_int) { cout &lt;&lt; the_int &lt;&lt; endl; }\n</code></pre>\n\n<p>You can call this function in any of the following ways:</p>\n\n<pre><code>display_int(5);\nint hardyharhar = 42069;\ndisplay_int(hardyharhar);\ndisplay_int(999-333);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "edited": false, "score": 0, "creation_date": 1561567463, "post_id": 56777504, "comment_id": 100110393, "body": "That gives my answer, thank you. There&#39;s a good possibility that I misunderstood the concept rather than the book being wrong."}, {"owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 1, "creation_date": 1561568643, "post_id": 56777504, "comment_id": 100110886, "body": "@JeJo Thank you for the prompt."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1561567191, "creation_date": 1561567191, "answer_id": 56777504, "question_id": 56777303, "link": "https://stackoverflow.com/questions/56777303/how-does-a-c-string-class-transforms-a-variable-to-another-variable/56777504#56777504", "title": "How does a C++ string class transforms a variable to another variable?", "body": "<p>If <code>courseName</code> was a reference (<code>std::string&amp;</code>) then it would be correct to say that in line 17, <code>courseName</code> is <em>bound</em> to <code>nameOfCourse</code> (in other words, for the duration of that <code>displayMessage</code> call, <code>courseName</code> would be just another name for <code>nameOfCourse</code>). </p>\n\n<p>But 1. that is called \"reference binding\", not \"variable transformation\", and 2. that's not what is happening here - <code>nameOfCourse</code> is <em>copied</em> to <code>courseName</code> when <code>displayMessage</code> is called: The copy constructor of <code>std::string</code> is used to create a copy of <code>nameOfCourse</code>.</p>\n\n<p>Variables (and/or variable names) are not \"transformed\" in C++ (especially not in the context of calling by value), so unless there is a translation/transcription/general communication problem interfering here, the book is simply wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "edited": false, "score": 0, "creation_date": 1561568429, "post_id": 56777696, "comment_id": 100110804, "body": "Thank you for a very detailed explanation!"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1561568815, "post_id": 56777696, "comment_id": 100110965, "body": "Thanks! Hope  some of it was useful!"}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 3, "last_activity_date": 1561568014, "creation_date": 1561568014, "answer_id": 56777696, "question_id": 56777303, "link": "https://stackoverflow.com/questions/56777303/how-does-a-c-string-class-transforms-a-variable-to-another-variable/56777696#56777696", "title": "How does a C++ string class transforms a variable to another variable?", "body": "<p>Let's break apart this code to understand what it's doing:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt; //program uses C++ standard string class\nusing namespace std;\n\n// Gradebook class definition\nclass GradeBook \npublic: \n    void displayMessage( string courseName ) \n    {\n        cout &lt;&lt; \"Welcome to the Grade Book for\\n\" &lt;&lt; courseName &lt;&lt; \"!\" \n            &lt;&lt; endl;\n    }\n};\n\nint main()\n{\n    string nameOfCourse;\n    GradeBook myGradeBook; \n    // prompt for and input course name\n    cout &lt;&lt; \"Please enter the course name: \" &lt;&lt; endl;\n    getline( cin, nameOfCourse );  \n    cout &lt;&lt; endl; \n    myGradeBook.displayMessage( nameOfCourse ); \n}\n</code></pre>\n\n<p>Starting in the <code>main()</code> method, when your program runs the following things happen:</p>\n\n<pre><code>int main()\n{\n    string nameOfCourse;\n</code></pre>\n\n<p>At this point, the program has begun, and it's initialized a variable of type <code>string</code>. This invokes the default constructor for <code>string</code>, which creates a string with size 0 (so an empty string). </p>\n\n<p>In order to create the string, the program allocates space for the string on the program's stack. This space is what the default constructor uses when initializing the string. </p>\n\n<p>Once the program is running, the names chosen for the variables don't matter at all, and nowhere does it keep track of what you named a variable. </p>\n\n<pre><code>    GradeBook myGradeBook;\n</code></pre>\n\n<p>Here, you declare that a <code>GradeBook</code> object exists. Because <code>GradeBook</code> is empty, in an optimized program nothing actually happens. It's never \"created\", because there's nothing to create. The compiler might direct the program to assign <code>GradeBook</code> an address based on the current stack location, but because your code doesn't use the address of <code>myGradeBook</code> anywhere, that might not happen, either. </p>\n\n<pre><code>    cout &lt;&lt; \"Please enter the course name: \" &lt;&lt; endl; \n</code></pre>\n\n<p>The first part (<code>cout &lt;&lt; \"Please enter the course name: \"</code>) sends that message to standard output. The <code>&lt;&lt; endl</code> portion adds a newline, and flushes the buffer used by standard output. <code>endl</code> is actually a function, and so this would be equivalent to writing <code>endl(cout &lt;&lt; \"Please enter the course name: \")</code>. </p>\n\n<pre><code>    getline(cin, nameOfCourse);\n</code></pre>\n\n<p>This reads data from standard input until the line ends. It puts that data in <code>nameOfCourse</code>. In order to put that data in <code>nameOfCourse</code>, the program modifies the memory location it assigned to <code>nameOfCourse</code> by calling the appropriate <code>string</code> member functions (probably the <code>append</code> member function, which appends text to a string). </p>\n\n<pre><code>    cout &lt;&lt; endl; \n</code></pre>\n\n<p>Adds a newline and flushes the buffer again. </p>\n\n<pre><code>    myGradeBook.displayMessage( nameOfCourse ); \n</code></pre>\n\n<p>The following things happen in order to call <code>displayMessage</code>:\n- If there's any data in the registers, the program saves it to the stack (so that the registers are freed up)\n- The program makes space on the stack for <code>courseName</code>\n- The program calls the <code>string</code> type's copy constructor, creating a new string in the space allocated for <code>courseName</code>\n- The program jumps to the location where the machine code for <code>displayMessage</code> begins\n- <code>displayMessage</code> runs\n- <code>displayMessage</code> returns\n- the <code>main()</code> method resumes</p>\n\n<p>At that point, the program exits because there's nothing else to do. </p>\n"}], "owner": {"reputation": 53, "user_id": 11704311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378e4a45e0230205e4049f97f1502e26?s=128&d=identicon&r=PG&f=1", "display_name": "ozengnr", "link": "https://stackoverflow.com/users/11704311/ozengnr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56777504, "answer_count": 3, "score": 2, "last_activity_date": 1561568014, "creation_date": 1561566387, "last_edit_date": 1561567887, "question_id": 56777303, "link": "https://stackoverflow.com/questions/56777303/how-does-a-c-string-class-transforms-a-variable-to-another-variable", "title": "How does a C++ string class transforms a variable to another variable?", "body": "<p>Just started coding in C++. I want to understand how  class of C++ works when I want to define a variable and put it out with a different name.</p>\n\n<p>Apologies if the question doesn't make sense. The code I have is from a well-known textbook. I'm not getting any error messages; I'm just trying to understand how  works in C++. I have some experience in Python and this process confused me. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt; //program uses C++ standard string class\nusing namespace std;\n\n// Gradebook class definition\nclass GradeBook \npublic: \n    void displayMessage( string courseName ) \n    {\n        cout &lt;&lt; \"Welcome to the Grade Book for\\n\" &lt;&lt; courseName &lt;&lt; \"!\" \n            &lt;&lt; endl;\n    }\n};\n\nint main()\n{\n    string nameOfCourse;\n    GradeBook myGradeBook; \n    // prompt for and input course name\n    cout &lt;&lt; \"Please enter the course name: \" &lt;&lt; endl;\n    getline( cin, nameOfCourse );  \n    cout &lt;&lt; endl; \n    myGradeBook.displayMessage( nameOfCourse ); \n}\n</code></pre>\n\n<p>The output comes out fine.</p>\n\n<p>Notice two variables: <code>courseName</code> and <code>nameOfCourse</code>. The textbook says that <code>courseName</code> variable transformed into <code>nameOfCourse</code> variable on line 17, where it goes: </p>\n\n<pre><code>        string nameOfCourse;\n</code></pre>\n\n<p>Can you help me understand how this transformation occurs?</p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader", "blending"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1561567074, "post_id": 56777277, "comment_id": 100110240, "body": "<code>rgba</code> doesn&#39;t fit in a vec3."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 9383692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Scott", "link": "https://stackoverflow.com/users/9383692/scott"}, "edited": false, "score": 0, "creation_date": 1561620414, "post_id": 56777385, "comment_id": 100126112, "body": "Thank you for answering. This code was very intuitive and easy to understand."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11313931"}, "is_accepted": false, "score": 2, "last_activity_date": 1561567128, "last_edit_date": 1561567128, "creation_date": 1561566703, "answer_id": 56777385, "question_id": 56777277, "link": "https://stackoverflow.com/questions/56777277/render-a-texture-decal-with-an-alpha-value/56777385#56777385", "title": "Render a texture (decal) with an alpha value?", "body": "<ol>\n<li><p><code>DecalTex</code> should be a  <code>vec4</code>, not a <code>vec3</code>. Otherwise the alpha\nvalue will not be stored.</p></li>\n<li><p>You will also have to change the line at the end to: <code>color =\nvec4(BGTex, 1.0) + DecalTex * DecalTex.a</code> As currently it sets the alpha component\nto 0.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 9383692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Scott", "link": "https://stackoverflow.com/users/9383692/scott"}, "edited": false, "score": 0, "creation_date": 1561620327, "post_id": 56777579, "comment_id": 100126064, "body": "Thank you for the detailed explanation.It also became clear why glBlendFunc and glBlendEquation are not necessary."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1561569551, "last_edit_date": 1561569551, "creation_date": 1561567477, "answer_id": 56777579, "question_id": 56777277, "link": "https://stackoverflow.com/questions/56777277/render-a-texture-decal-with-an-alpha-value/56777579#56777579", "title": "Render a texture (decal) with an alpha value?", "body": "<p>The <code>DecalTex</code> has an alpha channel. The alpha channel is \"weight\", which indicates the intensity of the <code>DecalTex</code>. If the alpha channel is 1, then the color of <code>DecalTex</code> has to be used, if the alpha channel is 0, then the color of <code>BGTex</code> has to be used.<br>\nUse <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/mix.xhtml\" rel=\"nofollow noreferrer\"><code>mix</code></a> to mix the color of <code>BGTex</code> and <code>DecalTex</code> dependent on the alpha channel of <code>DecalTex</code>. Of course the type of the <code>DecalTex</code> has to be <code>vec4</code>:  </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>vec3 BGTex     = texture( background, UV ).rgb;\nvec4 DecalTex  = texture(decal, decalCoord.xy).rgba;\n\ncolor = vec4(mix(BGTex.rgb, DecalTex.rgb, DecalTex.a), 1.0);\n</code></pre>\n\n<p>Note, <code>mix</code> linear interpolates between the 2 values:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>mix(x, y, a) = x * (1\u2212a) + y * a\n</code></pre>\n\n<p>This is similar the operation which is performed by the blending function and equation:</p>\n\n<blockquote>\n<pre><code>glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\nglBlendEquation(GL_FUNC_ADD);\n</code></pre>\n</blockquote>\n\n<p>But <a href=\"https://www.khronos.org/opengl/wiki/Blending\" rel=\"nofollow noreferrer\">Blending</a> is applied to the fragment shader output and the current value in the framebuffer.<br>\nYou don't need any blending at all, because the textures are \"blended\" in the fragment shader and the result is put in the framebuffer. Since the alpha channel of the fragment shader output is >= 1.0, the output is completely \"opaque\".   </p>\n"}], "owner": {"reputation": 127, "user_id": 9383692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Scott", "link": "https://stackoverflow.com/users/9383692/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 56777579, "answer_count": 2, "score": 0, "last_activity_date": 1562492077, "creation_date": 1561566267, "last_edit_date": 1562492077, "question_id": 56777277, "link": "https://stackoverflow.com/questions/56777277/render-a-texture-decal-with-an-alpha-value", "title": "Render a texture (decal) with an alpha value?", "body": "<p>I tried to draw two textures of decals and background, but only the alpha part of the decals becomes white.</p>\n\n<p>I simply tried the following.</p>\n\n<ul>\n<li>Draw 2 textures (background &amp; decals)</li>\n<li>Add glBlendFunc to apply decals alpha value</li>\n</ul>\n\n<pre><code>#version 330 core\n\nin vec2 UV;\n\nout vec3 color;\n\nuniform sampler2D background;\n\nin      vec3      decalCoord;\nuniform sampler2D decal;\n\nvoid main(){\n\n    vec3 BGTex     = texture( background, UV ).rgb;\n    vec3 DecalTex  = texture(decal, decalCoord.xy).rgba;\n\n    color = \n    vec4(BGTex,1.0) +   // Background texture is DDS DXT1 (I wonder if DXT1 is the cause?)\n    vec4(DecalTex,0.0); // Decal texture is DDS DXT3 for alpha\n\n}\n</code></pre>\n\n<pre><code>// Set below...\nglEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\nglBlendEquation(GL_FUNC_ADD);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fIsZI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fIsZI.png\" alt=\"enter image description here\"></a></p>\n\n<p>I was able to draw normally but there are the following problems.\n\u00a0 -The alpha part of the decals can not be made transparent.</p>\n\n<p>Is this a problem that can be solved within the fragmentshader?\nIn that case, how should I rewrite the code?</p>\n\n<p>The texture is DDS, one of which is DXT1 type (Background. Because this texture doesn't need alpha) and the other is DXT3 type (Decal). Is this also the cause?(Both need to be the DXT3 type?)</p>\n\n<p>Also, should I look for another way to put on the decals?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1561566105, "post_id": 56777176, "comment_id": 100109771, "body": "<a href=\"https://stackoverflow.com/questions/55927739/using-statement-and-protected-constructor\">This</a> answers question 1.  Not sure if there is a general solution for question 2."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1561566107, "post_id": 56777176, "comment_id": 100109773, "body": "Why do you want to make the constructor protected? If it is to prevent construction of <code>C</code> objects then make the destructor for C pure virtual, which it should be anyway."}, {"owner": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561566872, "post_id": 56777176, "comment_id": 100110162, "body": "@NeilButterworth: Well, if nothing else it seems that <i>semantically</i> the accessibility of a member should tell you where it can be called from.  Also, I&#39;ve heard that introducing the first virtual member to a class incurs some costs and should be avoided where possible, although that may be out of date nowadays."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1561568361, "post_id": 56777176, "comment_id": 100110772, "body": "If you have derivation, you almost always  need a base class destructor - most often, this will be pure virtual."}], "answers": [{"comments": [{"owner": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 1, "creation_date": 1561566388, "post_id": 56777274, "comment_id": 100109933, "body": "Do you have any idea what the rationale for this is?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 2, "creation_date": 1561566403, "post_id": 56777274, "comment_id": 100109938, "body": "Sorry, no clue. This is news to me!"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 4, "creation_date": 1561567404, "post_id": 56777274, "comment_id": 100110373, "body": "I think rationale is based on that <code>C</code> can have many overloaded constructors with different accessibility. Since with <code>using C::C;</code> you can&#39;t select only some of constructors this would level out accessibility of all constructors. This doesn&#39;t sound like a good idea, most people will expect unchanged accessibility of inheriting constructors."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 12, "last_activity_date": 1561566253, "creation_date": 1561566253, "answer_id": 56777274, "question_id": 56777176, "link": "https://stackoverflow.com/questions/56777176/is-there-any-way-to-increase-visibility-with-a-using-declaration/56777274#56777274", "title": "Is there any way to increase visibility with a using declaration?", "body": "<p>This is a subtle one. In C++, employing the <code>using</code> keyword on a base class constructor is called <em>inheriting constructors</em> and works differently than what a <code>using</code> keyword typically does. Specifically, note that</p>\n\n<blockquote>\n  <p>If overload resolution selects an inherited constructor, it is accessible if it would be accessible when used to construct an object of the corresponding base class: <em>the accessibility of the using-declaration that introduced it is ignored.</em></p>\n</blockquote>\n\n<p>(Emphasis mine. <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"noreferrer\">Source</a>)</p>\n\n<p>In other words, the fact that you've included the <code>using</code> declaration in a <code>public</code> section doesn't actually make those constructors public.</p>\n\n<p>I believe that, in this case, you may have to define your own constructors to match the base type constructors.</p>\n"}, {"comments": [{"owner": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561567470, "post_id": 56777547, "comment_id": 100110396, "body": "What do you mean by &quot;explicitly redeclaring it in a derived class with the different access modifier&quot;?"}, {"owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "reply_to_user": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561568316, "post_id": 56777547, "comment_id": 100110751, "body": "@DanielMcLaury simply, for example if you have protected function in base class with signature int func(int), you can redeclare it in derived class as public and do whatever you want in it(among others invoke base protected func), that way you basically change access modifier of member function in base class. Same is true if function is virtual in base etc."}, {"owner": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561568407, "post_id": 56777547, "comment_id": 100110793, "body": "Are you saying I can redeclare it without redefining it?  If so, how?"}, {"owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "reply_to_user": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561568549, "post_id": 56777547, "comment_id": 100110856, "body": "@DanielMcLaury, you need to define it, as well, of course. But from new definition you can call base implementation, and that way change acces modifier."}, {"owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "reply_to_user": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "edited": false, "score": 0, "creation_date": 1561569316, "post_id": 56777547, "comment_id": 100111180, "body": "@DanielMcLaury also, if you want to use inherited implementation, you can use using directive in public section of derived class and that way change modifier w/o redefining it. Put in public section simply using C::func. And that feature is not applicable for constructors."}], "tags": [], "owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "is_accepted": false, "score": 0, "last_activity_date": 1561567355, "creation_date": 1561567355, "answer_id": 56777547, "question_id": 56777176, "link": "https://stackoverflow.com/questions/56777176/is-there-any-way-to-increase-visibility-with-a-using-declaration/56777547#56777547", "title": "Is there any way to increase visibility with a using declaration?", "body": "<p>statement using C::C; is not about increasing visibility, but, about since c++11 \nfeature called inheriting constructors, making constructor of base class C invoking when derived D is constructed. You cant change access modifier of constructor that way. But, you can change access modifier, of any function by explicitly redeclaring it in a derived class with the different access modifier.</p>\n"}], "owner": {"reputation": 2885, "user_id": 2462437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83d2b5873df1156f07a07814e3721d02?s=128&d=identicon&r=PG", "display_name": "Daniel McLaury", "link": "https://stackoverflow.com/users/2462437/daniel-mclaury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 2, "accepted_answer_id": 56777274, "answer_count": 2, "score": 11, "last_activity_date": 1561567355, "creation_date": 1561565809, "question_id": 56777176, "link": "https://stackoverflow.com/questions/56777176/is-there-any-way-to-increase-visibility-with-a-using-declaration", "title": "Is there any way to increase visibility with a using declaration?", "body": "<p>The following code doesn't compile:</p>\n\n<pre><code>class C\n{\n    private:\n\n        int m_x;\n\n    protected:\n\n        C(int t_x) : m_x(t_x) { }\n\n};\n\nclass D : public C\n{\n    public:\n\n        using C::C;\n\n};\n\nint main(int argc, char **argv)\n{\n  D o(0);\n}\n</code></pre>\n\n<p>The compiler's objection is that the constructor for C is declared <code>protected</code>, meaning that I can't access it from <code>main</code>.  In other words, it seems like the <code>using</code> declaration drags the original visibility of the identifier with it, despite the fact that it lives in the <code>public</code> block.</p>\n\n<p>Two questions:</p>\n\n<ol>\n<li>Why does this happen?  (Both in terms of the rules for how this works, and the rationale for making those rules).</li>\n<li>Is there any way I can get around this without explicitly writing a constructor for <code>D</code>?</li>\n</ol>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 11, "creation_date": 1561564316, "post_id": 56776700, "comment_id": 100108865, "body": "What value does <code>a.display()</code> return, since it is declared as returning <code>int</code>?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 5, "creation_date": 1561565533, "post_id": 56776700, "comment_id": 100109504, "body": "<a href=\"https://wandbox.org/permlink/gSU8FnxgamOSOsmQ\" rel=\"nofollow noreferrer\">do not ignore wrnings</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1561566424, "post_id": 56776700, "comment_id": 100109951, "body": "<a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\" title=\"why should i not include bits stdc h\">stackoverflow.com/questions/31816095/&hellip;</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1561570686, "post_id": 56776700, "comment_id": 100111834, "body": "If <code>#include&lt;bits&#47;stdc++.h&gt;</code> works, pretty sure you are not using visual studio"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "is_accepted": false, "score": 0, "last_activity_date": 1561564604, "creation_date": 1561564604, "answer_id": 56776840, "question_id": 56776700, "link": "https://stackoverflow.com/questions/56776700/why-the-garbage-values-is-coming-after-account-balance/56776840#56776840", "title": "Why the garbage values is coming after account balance", "body": "<p>You are inserting to std::cout, among others, result returned from function display\nwhich should be int, but, considering that your function has no return statement everything is possible, basically you are sending undefined value to ostream cout, and that is what garbage is by definition.</p>\n"}, {"tags": [], "owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "is_accepted": true, "score": 1, "last_activity_date": 1561570725, "last_edit_date": 1561570725, "creation_date": 1561565085, "answer_id": 56776978, "question_id": 56776700, "link": "https://stackoverflow.com/questions/56776700/why-the-garbage-values-is-coming-after-account-balance/56776978#56776978", "title": "Why the garbage values is coming after account balance", "body": "<p>The function <code>display()</code> should return <code>void</code> in this case. Your version has in its signature that it returns <code>int</code>, but then you don't return anything. This leads to undefined behavior. </p>\n\n<p>Also it is bad practice to use <code>using namespace std</code> and <code>#include&lt;bits/stdc++.h&gt;</code>.</p>\n\n<p>Read up here <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is &quot;using namespace std;&quot; considered bad practice?</a></p>\n\n<p>And here <a href=\"https://stackoverflow.com/questions/25311011/how-does-include-bits-stdc-h-work-in-c\">How does #include &lt;bits/stdc++.h&gt; work in C++?</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Bankaccount\n{\npublic:\n    int accnumber, accbalance;\n\n    void display()\n    {\n        std::cout &lt;&lt; \"Account number is: \" &lt;&lt; accnumber &lt;&lt; \"\\n\";\n        std::cout &lt;&lt; \"Account balance is: \" &lt;&lt; accbalance &lt;&lt; \"\\n\";\n    }\n};\n\nint main()\n{\n    Bankaccount a;\n    Bankaccount b;\n\n    a.accnumber = 123456;\n    a.accbalance =50;\n\n    b.accnumber = 67890;\n    b.accbalance = 2000;\n    std::cout&lt;&lt;\"Account details of A\\n\\n\";\n    a.display();                             // this is how to use display\n\n    std::cout&lt;&lt;\"\\nAccount details of B\\n\\n\";\n    b.display();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1561571413, "last_edit_date": 1561571413, "creation_date": 1561565374, "answer_id": 56777061, "question_id": 56776700, "link": "https://stackoverflow.com/questions/56776700/why-the-garbage-values-is-coming-after-account-balance/56777061#56777061", "title": "Why the garbage values is coming after account balance", "body": "<p>Your <code>int display()</code> function doesn't return an <code>int</code> so you'll have undefined behaviour after that function has been called. If it had returned an <code>int</code>, that number had been printed, but I suspect that's not what you wanted.</p>\n\n<p>The garbage you see is an <code>int</code> picked from the stack (because <code>display()</code> was supposed to put an <code>int</code> there). It was put the for a reason by some other function, but now it's gone, so anything can happen. To avoid this, you could declare your function <code>void display()</code> - but then you wouldn't be able to stream it, which is what it looks like you want to do.</p>\n\n<p>If you want to be able to stream your objects, you need to define streaming operators to do the job. I've replaced your <code>display()</code> function with an out stream operator (<code>operator&lt;&lt;</code>) here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n//#include&lt;bits/stdc++.h&gt; // non-portable, don't use it\n\n// using namespace std; // brings in too much in the namespace\nusing std::cout; // prefer this or just write std::cout everywhere\n\nclass Bankaccount {\npublic:\n    int accnumber, accbalance;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Bankaccount&amp; ba) {\n        return os &lt;&lt; \"Account number is : \" &lt;&lt; ba.accnumber\n                  &lt;&lt; \"\\nAccount balance is: \" &lt;&lt; ba.accbalance &lt;&lt; \"\\n\";\n    }\n};\n\nint main() {\n    Bankaccount a;\n    Bankaccount b;\n\n    a.accnumber = 123456;\n    a.accbalance = 50;\n\n    b.accnumber = 67890;\n    b.accbalance = 2000;\n    // std::endl is approx. the same as \"\\n\" + std::flush. You don't need flushing.\n    cout &lt;&lt; \"Account details of A\\n\\n\" &lt;&lt; a &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"\\nAccount details of B\\n\\n\" &lt;&lt; b &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1561565764, "creation_date": 1561565764, "answer_id": 56777166, "question_id": 56776700, "link": "https://stackoverflow.com/questions/56776700/why-the-garbage-values-is-coming-after-account-balance/56777166#56777166", "title": "Why the garbage values is coming after account balance", "body": "<p>Most probably this is what you wanted to achieve:<br>\n<a href=\"https://wandbox.org/permlink/bpPth9WutHaiU5jQ\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/bpPth9WutHaiU5jQ</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nclass Bankaccount {\npublic:\n    int accnumber, accbalance;\n    std::ostream&amp; display(std::ostream&amp; out) const\n    {\n        out &lt;&lt; \"Account number is: \" &lt;&lt; accnumber;\n        return out &lt;&lt; \"\\nAccount balance is: \" &lt;&lt; accbalance;\n    }\n};\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Bankaccount&amp; acc)\n{\n    return acc.display(out);\n}\n\nint main()\n{\n    Bankaccount a;\n    Bankaccount b;\n\n    a.accnumber = 123456;\n    a.accbalance = 50;\n\n    b.accnumber = 67890;\n    b.accbalance = 2000;\n    cout &lt;&lt; \"Account details of A\\n\" &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; \"\\nAccount details of B\\n\" &lt;&lt; b &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10469544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nrYM.jpg?s=128&g=1", "display_name": "deba98", "link": "https://stackoverflow.com/users/10469544/deba98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 56776978, "answer_count": 4, "score": -1, "last_activity_date": 1561571413, "creation_date": 1561564143, "last_edit_date": 1561570696, "question_id": 56776700, "link": "https://stackoverflow.com/questions/56776700/why-the-garbage-values-is-coming-after-account-balance", "title": "Why the garbage values is coming after account balance", "body": "<p>When I am executing this, a garbage value is coming with account balance info. Can anyone help me why?</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nclass Bankaccount\n{\n  public:\n  int accnumber,accbalance;\n  int display()\n    {\n    cout&lt;&lt;\"Account number is: \"&lt;&lt;accnumber;\n    cout&lt;&lt;\"\\nAccount balance is: \"&lt;&lt;accbalance;\n    }\n};\nint main() {\nBankaccount a;\nBankaccount b;\n\na.accnumber = 123456;\na.accbalance =50;\n\nb.accnumber = 67890;\nb.accbalance = 2000;\ncout&lt;&lt;\"Account details of A\\n\\n\"&lt;&lt;a.display()&lt;&lt;endl;\ncout&lt;&lt;\"\\nAccount details of B\\n\\n\"&lt;&lt;b.display();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "boolean", "equality"], "comments": [{"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1561563276, "post_id": 56776375, "comment_id": 100108253, "body": "Use boolean conversions instead of writing direct value: <a href=\"http://eel.is/c++draft/conv.bool#1\" rel=\"nofollow noreferrer\">eel.is/c++draft/conv.bool#1</a>"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 3, "creation_date": 1561563446, "post_id": 56776375, "comment_id": 100108350, "body": "@AnatolyS Since the OP is writing to the bool through a cast, I\u2019m not sure that\u2019s applicable."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1561563620, "post_id": 56776375, "comment_id": 100108459, "body": "It\u2019s undefined to write <i>anything</i> that\u2019s not a <code>bool</code> into a <code>bool</code>, including 0 and 1."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1561563741, "post_id": 56776375, "comment_id": 100108543, "body": "@molbdnilo Every memcpy bool-&gt;bool writes 1 or 0 <i>as chars</i>, so that cannot be. Obviously I can use any other memory location as a source, it doesn&#39;t have to be a bool at all. The question here is which limits the standard imposes on the value range of the chars written. (That the code is not <i>kosher</i> is not in question.) Btw, this question arises with bools because other integer values do not have bit patterns which are out-of-range. Comparable issues may arise with floats though."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1561564169, "post_id": 56776375, "comment_id": 100108791, "body": "@PeterA.Schneider sizeof(bool) is implementation defined, why do you decide that you have right to write to bool via char pointer? you have one legal way is to use boolean conversions to change bool variable."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561566710, "post_id": 56776375, "comment_id": 100110073, "body": "My answer on the dupe specifically addresses the standard wording portion."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561567164, "post_id": 56776375, "comment_id": 100110277, "body": "@LightnessRacesinOrbit Thanks for the pointer, I did not find it (or any other). While the standard quote is close it is not quite on the spot because after writing into the bool&#39;s memory it is not uninitialized any longer, so it is not &quot;described by this document as &#39;undefined&#39;&quot;, at least not because it is uninitialized (it is initialized). The question is more concerned with the range of applicable values."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561568843, "post_id": 56776375, "comment_id": 100110979, "body": "@PeterA.Schneider It&#39;s exactly on the spot. An uninitialised <code>bool</code> is just one case of a <code>bool</code> that does not have a well-defined and congruous bit representation. Your approach is another way to get that outcome. There&#39;s really not much scope for splitting hairs here; you cannot arbitrarily pick a bit representation for a <code>bool</code> object, and doing so has undefined behaviour; end of story!"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1561563299, "post_id": 56776409, "comment_id": 100108264, "body": "They are assigning to a <code>char&amp;</code> that refers to the same address as the <code>bool</code>. The integer is converted to a <code>char</code>, which has different conversion sequence."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1561563450, "post_id": 56776409, "comment_id": 100108353, "body": "<code>*(char *)&amp;b = 1; *(char *)&amp;b = 0; &#47;&#47; Also not OK</code> (although they will <i>probably</i> work)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561564808, "post_id": 56776409, "comment_id": 100109116, "body": "I have heard your opinion. Now can you justify it with the standard? ;-)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561564856, "post_id": 56776409, "comment_id": 100109138, "body": "@PeterA.Schneider, which parts? The OK parts or the &quot;Not OK&quot; parts?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561565159, "post_id": 56776409, "comment_id": 100109309, "body": "@I&#39;m aware of narrowing conversions, so I&#39;m more interested in the answer to my question, which are the &quot;Not OK&quot; parts. So far you have given zero rationale. I actually think that (provided that 1 and 0 are the internal representations of bools, and that bools have the size 1) <code>*(char *)&amp;b = 1;</code> is perfectly OK. It&#39;s equivalent to <code>bool dest, src=true; memcpy(&amp;dest, &amp;src, 1)</code> provided memcpy is not an intrinsic."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561567439, "post_id": 56776409, "comment_id": 100110386, "body": "OK, one step further. Now show me where in the standard writing 2 in a bool memory is described as undefined. (It is <i>not</i> UB due to un-initialization because it <i>is</i> initialized.)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1561567872, "post_id": 56776409, "comment_id": 100110565, "body": "@PeterA.Schneider, anything that is not explicitly defined as &quot;well defined&quot; is undefined behavior. See <a href=\"https://timsong-cpp.github.io/cppwp/n3337/defns.undefined\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/n3337/defns.undefined</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1561568024, "last_edit_date": 1561568024, "creation_date": 1561563215, "answer_id": 56776409, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar/56776409#56776409", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p>It's OK to assign values other than <code>true</code> and <code>false</code> to a variable of type <code>bool</code>.</p>\n\n<p>The RHS is converted to a <code>bool</code> by using the standard conversion sequence to <code>true</code>/<code>false</code> before the value is assigned.</p>\n\n<p>However, what you are trying to do is not OK.</p>\n\n<pre><code>*(char *)&amp;b = 2;  // Not OK\n*(char *)&amp;b = 3;  // Not OK\n</code></pre>\n\n<p>Even assigning 1 and 0 by using that mechanism is not OK.</p>\n\n<pre><code>*(char *)&amp;b = 1;  // Not OK\n*(char *)&amp;b = 0;  // Not OK\n</code></pre>\n\n<p>The following statements are OK.</p>\n\n<pre><code>b = 2; // OK\nb = 3; // OK\n</code></pre>\n\n<h3>Update, in response to OP's comment.</h3>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/n3337/basic.types#basic.fundamental-6\" rel=\"nofollow noreferrer\">the standard/basic.types#basic.fundamental-6</a>:</p>\n\n<blockquote>\n  <p>Values of type bool are either <code>true</code> or <code>false</code>.</p>\n</blockquote>\n\n<p>The standard does not mandate that <code>true</code> be represented as <code>1</code> and/or <code>false</code> be represented as <code>0</code>. An implementation can choose a representation that best suits their needs.</p>\n\n<p>The <a href=\"https://timsong-cpp.github.io/cppwp/n3337/basic.types#footnote-47\" rel=\"nofollow noreferrer\">standard goes on to say this</a> about value of <code>bool</code> types:</p>\n\n<blockquote>\n  <p>Using a <code>bool</code> value in ways described by this International Standard as \u201cundefined,\u201d such as by examining the value of an uninitialized automatic object, might cause it to behave as if it is neither <code>true</code> nor <code>false</code>.</p>\n</blockquote>\n\n<p>Storing the value <code>char(1)</code> or <code>char(0)</code> in its memory location indirectly does not guarantee that the values will be properly converted to <code>true</code>/<code>false</code>. Since theose value may not represent either <code>true</code> or <code>false</code> in an implementation, accessing those values would lead to undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1561565048, "post_id": 56776444, "comment_id": 100109249, "body": "The strict aliasing rule is what comes to everybody&#39;s mind but it simply does not apply to aliasing through char pointers, for obvious legacy and efficiency reasons. A little less obvious is that (afaics) the byte source of a byte copy into a POD does not need to be an object of the same type. In fact, it does not need to be an object at all, as when one uses <code>memset()</code>. So what we are discussing here is the value range a byte may have when it is copied into a bool. Is it defined? Implementation defined? What happens when it is exceeded?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1561566761, "post_id": 56776444, "comment_id": 100110104, "body": "Aliasing has nothing to do with this. You can alias with a <code>char*</code>. The problem is in using that power to write &quot;wrong&quot; bit values to an object of type <code>T</code> (here, <code>bool</code>)."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 3, "last_activity_date": 1561563308, "creation_date": 1561563308, "answer_id": 56776444, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar/56776444#56776444", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p><strong>No. This is not OK.</strong></p>\n\n<p>Writting arbitrary data in a bool is much UB (see <a href=\"https://stackoverflow.com/q/98650/5470596\">What is the strict aliasing rule?</a>) and similar to <a href=\"https://stackoverflow.com/q/54120862/5470596\">Does the C++ standard allow for an uninitialized bool to crash a program?</a></p>\n\n<pre><code>*(char *)&amp;b = 2;\n</code></pre>\n\n<p>This type punning hack invoke UB. According to your compiler implementation for <code>bool</code> and the optimization it is allowed to do, you could have <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">demons flying off your nose</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1561563432, "post_id": 56776450, "comment_id": 100108341, "body": "<code>thanks to the strict aliasing rule</code> Aren&#39;t all types are allowed to be aliased by <code>char</code>?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1561563587, "post_id": 56776450, "comment_id": 100108441, "body": "@eerorika Yes, but that only really makes a difference if you&#39;re copying in from a different <code>char*</code>-reinterpreted <code>bool</code>. The compiler isn&#39;t required to use any particular size or bit representation for the type."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1561563666, "post_id": 56776450, "comment_id": 100108483, "body": "But that means that I <i>can</i> legally write to the object through a char pointer. The strict aliasing rule simply does not apply, in order to permit <code>memcpy()</code>."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561563701, "post_id": 56776450, "comment_id": 100108511, "body": "@PeterA.Schneider That&#39;s a good point. I&#39;ll edit the reasoning."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561564664, "post_id": 56776450, "comment_id": 100109032, "body": "@Sneftel I do not believe that there is such a source type requirement for the bytes copied into a POD. For example, one could simply copy from an array of 0-value bytes into a POD, effectively doing a memset(ptr, 0, size). Sure, copying between the same types is a common pattern, but it is no requirement."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1561567081, "post_id": 56776450, "comment_id": 100110243, "body": "No, that&#39;s not what I mean. Other than looking at the but pattern of some other <code>bool</code>, there&#39;s no way to determine what the valid bit patterns of a <code>bool</code> are. All zeroes is <i>probably</i> the bit pattern of <code>false</code>, but that&#39;s not guaranteed."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 1, "last_activity_date": 1561563732, "last_edit_date": 1561563732, "creation_date": 1561563337, "answer_id": 56776450, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar/56776450#56776450", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p>Writing <em>any</em> integer values into a <code>bool</code> through a pointer to a type other than <code>bool</code> is undefined behavior, because those may not match the compiler's representation of the type. And yes, writing something other than 0 or 1 will absolutely break things: compilers often rely on the exact internal representation of boolean <code>true</code>.</p>\n\n<p>But <code>bool b = 3</code> is fine, and just sets <code>b</code> to <code>true</code> (the rule for converting from integer types to <code>bool</code> is, any nonzero value becomes <code>true</code> and zero becomes <code>false</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561564404, "post_id": 56776730, "comment_id": 100108903, "body": "OK, I assured that sizeof(bool) == 1."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561564595, "post_id": 56776730, "comment_id": 100108990, "body": "@PeterA.Schneider I hope my answer addressed your questions. You may still end up with a trap representation in C++17 since you may be writing a bit pattern that is not a valid <code>bool</code> value."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1561565450, "post_id": 56776730, "comment_id": 100109462, "body": "@eerorika Not in gcc 8.3 and VS 2017 (bool is a byte)."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561566083, "post_id": 56776730, "comment_id": 100109765, "body": "@PeterA.Schneider yeah, I now notice that I misread the standard. 1 byte is OK on all systems, and indeed even typical. Just not guaranteed."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561567849, "post_id": 56776730, "comment_id": 100110552, "body": "This is, I think, the best answer so far. Interestingly the standard (at least the amendment) is specifically discussing traps; I can assure you there weren&#39;t any ;-). I suppose that indeed bits 2..8 are padding bits, so the general padding bit discussion does apply. The amendment wording <i>Each set of values for any padding bits in the object representation <b>are alternative representations</b> of the value specified by the value representation</i> seems to suggest to me that I <i>could indeed</i> legally write arbitrary values into the bool, and only the &quot;value bits&quot; (probably just bit 1) are relevant"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561568085, "post_id": 56776730, "comment_id": 100110660, "body": "@PeterA.Schneider Yes, the intent of the changes was to prohibit integer types from having trap representations. However, it doesn&#39;t say that bit 0 of <code>bool</code> is the value bit and the other bits are padding bits. Since it says <code>bool</code> has the same object representation and value representation as some other integer type, that means <code>bool</code> has as many padding bits as that other type. Also, the implementation is free to do something strange like saying that the value 0 of the underlying type is interpreted as <code>true</code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561568790, "post_id": 56776730, "comment_id": 100110954, "body": "Oh, I missed the &quot;same  value representation&quot; part. In other words, no padding bits in a bool on my system. The wording is strange."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 2, "last_activity_date": 1561564265, "creation_date": 1561564265, "answer_id": 56776730, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar/56776730#56776730", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p>Consider:</p>\n\n<pre><code>bool b;\nb = char{2};     // 1\n(char&amp;)b = 2;    // 2\n*(char*)&amp;b = 2;  // 3\n</code></pre>\n\n<p>Here, lines 2 and 3 have the same meaning, but 1 has a different meaning. In line 1, since the value being assigned to the <code>bool</code> object is nonzero, the result is guaranteed to be <code>true</code>. However, in lines 2 and 3, the object representation of the <code>bool</code> object is being written to directly.</p>\n\n<p>It is indeed legal to write to an object of any non-<code>const</code> type through an lvalue of type <code>char</code>, but:</p>\n\n<p>In C++17, the standard does not specify the representation of <code>bool</code> objects. The <code>bool</code> type may have padding bits, and may even be larger than <code>char</code>. Thus, any attempt to write directly to a <code>bool</code> value in this way may yield an invalid (or \"trap\") object representation, which means that subsequently reading that value will yield undefined behaviour. Implementations may (but are not required by the standard to) define the representation of <code>bool</code> objects.</p>\n\n<p>In C++20, my understanding is that thanks to <a href=\"http://wg21.link/p1236r1\" rel=\"nofollow noreferrer\">P1236R1</a>, there are no longer any trap representations, but the representation of <code>bool</code> is still not completely specified. The <code>bool</code> object may still be larger than <code>char</code>, so if you write to only the first byte of it, it can still contain an indeterminate value, yielding UB when accessed. If <code>bool</code> is 1 byte (which is likely), then the result is unspecified---it must yield some valid value of the underlying type (which will most likely be <code>char</code> or its signed or unsigned cousin) but the mapping of such values to <code>true</code> and <code>false</code> remains unspecified.</p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 0, "last_activity_date": 1561566539, "creation_date": 1561566539, "answer_id": 56777334, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar/56777334#56777334", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p>In general, it's perfectly find to assign values other than 0 or 1 to a bool:</p>\n\n<blockquote>\n  <p>7.3.14 Boolean conversions\n  [conv.bool]\n  1 A prvalue of arithmetic, unscoped enumeration, pointer, or pointer-to-member type can be converted to a prvalue of type bool. A zero value, null pointer value, or null member pointer value is converted to false; any other value is converted to true.</p>\n</blockquote>\n\n<p>But your casting is another question entirely.</p>\n\n<p>Be careful thinking it's ok to write to types through pointers to something else.  You can get very surprising results, and the optimizer is allowed to assume certain such things are not done.  I don't know all the rules for it, but the optimizer doesn't always follow writes through pointers to different types (it is allowed to do all sorts of things in the presence of undefined behavior!)  But beware, code like this:</p>\n\n<pre><code>bool f()\n{\n    bool a = true;\n    bool b = true;\n    *reinterpret_cast&lt;char*&gt;(&amp;a) = 1;\n    *reinterpret_cast&lt;char*&gt;(&amp;b) = 2;\n    return a == b;\n}\n</code></pre>\n\n<p>Live: <a href=\"https://godbolt.org/z/hJnuSi\" rel=\"nofollow noreferrer\">https://godbolt.org/z/hJnuSi</a></p>\n\n<p>With optimizations:\ng++:  ->  <code>true</code> (but the value is actually 2)\nclang: -> <code>false</code></p>\n\n<pre><code>main() {\n    std::cout &lt;&lt; f() &lt;&lt; \"\\n\";  // g++ prints 2!!!\n}\n</code></pre>\n\n<p>Though f() returns a bool, g++ actually prints out <code>2</code> in main here.  Probably not expected.  </p>\n"}], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 3, "closed_date": 1561566595, "answer_count": 5, "score": 2, "last_activity_date": 1561568024, "creation_date": 1561563068, "last_edit_date": 1561566978, "question_id": 56776375, "link": "https://stackoverflow.com/questions/56776375/is-it-ub-to-write-values-other-than-0-or-1-in-a-bool-if-yes-how-do-they-compar", "closed_reason": "Duplicate", "title": "Is it UB to write values other than 0 or 1 in a bool? If yes, how do they compare?", "body": "<p>Consider the program below.</p>\n\n<p>All comparisons are true with a recent gcc but only the value 1 compares equal with the Visual Studio commandline compiler v. 19.16.27031.1 for x86.</p>\n\n<p>I believe that it's generally OK to write into PODs through char pointers; but <strong>is there wording in the standard about writing funny values into bool variables? If it is allowed, is there wording about the behavior in comparisons?</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid f()\n{\n   if(sizeof(bool) != 1)\n   {\n      cout &lt;&lt; \"sizeof(bool) != 1\\n\";\n      return;\n   }\n\n  bool b;\n\n  *(char *)&amp;b = 1;\n  if(b == true) { cout &lt;&lt; (int) *(char *)&amp;b  &lt;&lt; \" is true\\n\"; }\n\n  *(char *)&amp;b = 2;\n  if(b == true) { cout &lt;&lt; (int) *(char *)&amp;b  &lt;&lt; \" is true\\n\"; }\n\n  *(char *)&amp;b = 3;\n  if(b == true) { cout &lt;&lt; (int) *(char *)&amp;b  &lt;&lt; \" is true\\n\"; }\n}\n\nint main()\n{\n    f();\n}\n</code></pre>\n\n<p>P.S. gcc 8.3 uses a <code>test</code> instruction to effectively check for non-zero while gcc 9.1 explicitly compares with 1, making only that comparison true. Perhaps this <a href=\"https://gcc.godbolt.org/z/-MkVqo\" rel=\"nofollow noreferrer\">godbolt link</a> works.</p>\n"}, {"tags": ["c++", "mbedtls", "openthread"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1561563344, "post_id": 56776355, "comment_id": 100108297, "body": "this error occurs during the <b>link</b>, you missed to specify the lib defining <code>mbedtls_pk_write_pubkey_pem</code>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1561563664, "post_id": 56776355, "comment_id": 100108481, "body": "The lib you missed to specify can can be <code>libmbedcrypto.a</code> / <code>libmbedcrypto.so</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1561564208, "creation_date": 1561564208, "answer_id": 56776718, "question_id": 56776355, "link": "https://stackoverflow.com/questions/56776355/how-can-i-resolve-undefined-reference-errors-when-using-openthread-with-mbedtl/56776718#56776718", "title": "How can I resolve &quot;undefined reference&quot; errors when using openthread with mbedtls?", "body": "<p>You have an error during the <strong>link</strong>, the symbol <code>mbedtls_pk_write_pubkey_pem</code> is not defined, that means you missed to specify the lib defining it. Looking on the web it seems you need to link with <em>mbedcrypto</em>, so add <em>libmbedcrypto.a</em> or <em>-lmbedcrypto</em> (and may be use the option <code>-L</code> to specify the path)</p>\n\n<p>It seems you also use X509, if you have missing symbols <code>*X509*</code> link with <em>mbedx509</em>, so add <em>libmbedx509.a</em> or <em>-lmbedx509</em> (and may be use the option <code>-L</code> to specify the path)</p>\n"}], "owner": {"reputation": 1, "user_id": 6369965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5468738383a60b66be9e2a3030bf25?s=128&d=identicon&r=PG&f=1", "display_name": "Silver4029", "link": "https://stackoverflow.com/users/6369965/silver4029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 0, "closed_date": 1561569294, "answer_count": 1, "score": -1, "last_activity_date": 1561585258, "creation_date": 1561563008, "last_edit_date": 1561585258, "question_id": 56776355, "link": "https://stackoverflow.com/questions/56776355/how-can-i-resolve-undefined-reference-errors-when-using-openthread-with-mbedtl", "closed_reason": "Duplicate", "title": "How can I resolve &quot;undefined reference&quot; errors when using openthread with mbedtls?", "body": "<p>I'm working on an implementation of an EST(Enrollment over Secure Transport)-client over CoAPs for the <a href=\"https://github.com/openthread/openthread\" rel=\"nofollow noreferrer\">OpenThread</a> stack. For this, i want to write a CSR (Certificate Signing Request) by using mbedTLS, which is part of the stack as a third party software. My problem now is that i get some \"undefined reference\" error from the linker when i build the code (i'm using GCC on an Ubuntu 18.04.2 LTS machine). </p>\n\n<p>As there are multiple functions for which the error occurs, i will provide code for just one example. here is my source file:</p>\n\n<p>openthread/src/core/crypto/ecp.cpp:</p>\n\n<pre><code>#include \"ecp.hpp\"\n\n#include &lt;mbedtls/ctr_drbg.h&gt;\n#include &lt;mbedtls/ecp.h&gt;\n#include &lt;mbedtls/pk.h&gt;\n\n#include \"common/code_utils.hpp\"\n#include \"common/debug.hpp\"\n#include \"common/random.hpp\"\n\n#include \"openthread/entropy.h\"\n#include \"openthread/random_crypto.h\"\n\nnamespace ot {\nnamespace Crypto {\n\n#if OPENTHREAD_ENABLE_EST_CLIENT &amp;&amp; OPENTHREAD_ENABLE_APPLICATION_COAP_SECURE\n\notError Ecp::KeyPairGeneration(const uint8_t *aPersonalSeed,\n                               uint32_t       aPersonalSeedLength,\n                               uint8_t *      aPrivateKey,\n                               uint32_t *     aPrivateKeyLength,\n                               uint8_t *      aPublicKey,\n                               uint32_t *     aPublicKeyLength)\n{\n    otError error = OT_ERROR_NONE;\n    mbedtls_pk_context keypair;\n\n    OT_UNUSED_VARIABLE(aPersonalSeed);\n    OT_UNUSED_VARIABLE(aPersonalSeedLength);\n\n    mbedtls_pk_init(&amp;keypair);\n\n    // Generate keypair\n    VerifyOrExit(mbedtls_pk_setup(&amp;keypair, mbedtls_pk_info_from_type(MBEDTLS_PK_ECKEY)),\n                 error = OT_ERROR_FAILED);\n\n    VerifyOrExit(mbedtls_ecp_group_load(&amp;mbedtls_pk_ec(keypair)-&gt;grp, MBEDTLS_ECP_DP_SECP256R1) == 0,\n                 error = OT_ERROR_FAILED);\n\n    VerifyOrExit(mbedtls_ecp_gen_keypair(&amp;mbedtls_pk_ec(keypair)-&gt;grp, &amp;mbedtls_pk_ec(keypair)-&gt;d,\n                                         &amp;mbedtls_pk_ec(keypair)-&gt;Q, mbedtls_ctr_drbg_random,\n                                         Random::Crypto::MbedTlsContextGet()) == 0,\n                 error = OT_ERROR_FAILED);\n\n    VerifyOrExit(mbedtls_pk_write_pubkey_pem(&amp;keypair, (unsigned char*)aPublicKey,\n                                             *aPublicKeyLength) == 0,\n                 error = OT_ERROR_INVALID_ARGS);\n\n    VerifyOrExit(mbedtls_pk_write_key_pem(&amp;keypair, (unsigned char*)aPrivateKey,\n                                          *aPrivateKeyLength) == 0,\n                 error = OT_ERROR_INVALID_ARGS);\n\nexit:\n    mbedtls_pk_free(&amp;keypair);\n\n    return error;\n}\n\n#endif // OPENTHREAD_ENABLE_EST_CLIENT\n\n} // namespace Crypto\n} // namespace ot\n\n</code></pre>\n\n<p>my header file:</p>\n\n<p>openthread/src/core/crypto/ecp.hpp</p>\n\n<pre><code>\n#ifndef ECP_HPP_\n#define ECP_HPP_\n\n#include \"openthread-core-config.h\"\n\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;openthread/error.h&gt;\n\nnamespace ot {\nnamespace Crypto {\n\n/**\n * @addtogroup core-security\n *\n * @{\n *\n */\n\n/**\n * This class implements elliptic curve key generation.\n *\n */\nclass Ecp\n{\npublic:\n    /**\n     * This method generate a Elliptic Curve key pair.\n     *\n     * @param[in]       aPersonalSeed       An additional seed for the entropy. Can be NULL.\n     * @param[in]       aPersonalSeedLengh  The length of the @p aPersonalSeed.\n     * @param[out]      aPrivateKey         An output buffer where the private key should be stored.\n     * @param[inout]    aPrivateKeyLength   The length of the @p aPrivateKey buffer.\n     * @param[out]      aPublicKey          An output buffer where the private key should be stored.\n     * @param[inout]    aPublicKeyLength    The length of the @p aPublicKey buffer.\n     *\n     * @retval  OT_ERROR_NONE       EC key pairs has been created successfully.\n     *          OT_ERROR_NO_BUFS    Key buffers are too small or mbedtls heap too small.\n     */\n    static otError KeyPairGeneration(const uint8_t *aPersonalSeed,\n                                     uint32_t       aPersonalSeedLength,\n                                     uint8_t *      aPrivateKey,\n                                     uint32_t *     aPrivateKeyLength,\n                                     uint8_t *      aPublicKey,\n                                     uint32_t *     aPublicKeyLength);\n};\n\n/**\n * @}\n *\n */\n\n} // namespace Crypto\n} // namespace ot\n\n#endif // ECP_HPP_\n</code></pre>\n\n<p>The functions which cause the error are here mbedtls_pk_write_pubkey_pem and mbedtls_pk_write_key_pem.</p>\n\n<p>Here is also a part of the console output:</p>\n\n<pre><code>Making all in apps\nMaking all in cli\n  CC       ot_cli_ftd-main.o\n  CC       ot_cli_mtd-main.o\n  CCLD     ot-cli-ftd\n  CCLD     ot-cli-mtd\n/opt/gcc-arm-none-eabi-8-2018-q4-major/bin/../lib/gcc/arm-none-eabi/8.2.1/../../../../arm-none-eabi/bin/ld: ../../../src/core/libopenthread-mtd.a(libopenthread_mtd_a-ecp.o): in function `ot::Crypto::Ecp::KeyPairGeneration(unsigned char const*, unsigned long, unsigned char*, unsigned long*, unsigned char*, unsigned long*)':\n/home/scnm/eclipse-workspace/openthread/examples/../src/core/crypto/ecp.cpp:79: undefined reference to `mbedtls_pk_write_pubkey_pem'\n/opt/gcc-arm-none-eabi-8-2018-q4-major/bin/../lib/gcc/arm-none-eabi/8.2.1/../../../../arm-none-eabi/bin/ld: /home/scnm/eclipse-workspace/openthread/examples/../src/core/crypto/ecp.cpp:83: undefined reference to `mbedtls_pk_write_key_pem'\ncollect2: error: ld returned 1 exit status\nMakefile:1249: recipe for target 'ot-cli-mtd' failed\nmake[5]: *** [ot-cli-mtd] Error 1\n</code></pre>\n\n<p>I first thougth it was because i was missing some #define to actually use these functions, but i compared it with other OpenThread code which uses mbedtls and i can't see what i did wrong. As far as i've understood it, i have to modify the \"openthread/third_party/mbedtls/mbedtls-config.h\" file so that these funtions are build, so this is what i did:</p>\n\n<pre><code>#ifndef MBEDTLS_CONFIG_H\n#define MBEDTLS_CONFIG_H\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;openthread/config.h&gt;\n#include &lt;openthread/platform/logging.h&gt;\n#include &lt;openthread/platform/memory.h&gt;\n\n#define MBEDTLS_PLATFORM_SNPRINTF_MACRO snprintf\n\n#define MBEDTLS_AES_C\n#define MBEDTLS_AES_ROM_TABLES\n#define MBEDTLS_ASN1_PARSE_C\n#define MBEDTLS_ASN1_WRITE_C\n#define MBEDTLS_BIGNUM_C\n#define MBEDTLS_CCM_C\n#define MBEDTLS_CIPHER_C\n#define MBEDTLS_CMAC_C\n#define MBEDTLS_CTR_DRBG_C\n#define MBEDTLS_ECJPAKE_C\n#define MBEDTLS_ECP_C\n#define MBEDTLS_ECP_DP_SECP256R1_ENABLED\n#define MBEDTLS_ECP_NIST_OPTIM\n#define MBEDTLS_ENTROPY_C\n#define MBEDTLS_HAVE_ASM\n#define MBEDTLS_HMAC_DRBG_C\n#define MBEDTLS_KEY_EXCHANGE_ECJPAKE_ENABLED\n#define MBEDTLS_MD_C\n#define MBEDTLS_NO_DEFAULT_ENTROPY_SOURCES\n#define MBEDTLS_NO_PLATFORM_ENTROPY\n#define MBEDTLS_PK_C\n#define MBEDTLS_PK_PARSE_C\n#define MBEDTLS_PLATFORM_C\n#define MBEDTLS_PLATFORM_MEMORY\n#define MBEDTLS_PLATFORM_NO_STD_FUNCTIONS\n#define MBEDTLS_SHA256_C\n#define MBEDTLS_SHA256_SMALLER\n#define MBEDTLS_SSL_CLI_C\n#define MBEDTLS_SSL_DTLS_ANTI_REPLAY\n#define MBEDTLS_SSL_DTLS_HELLO_VERIFY\n#define MBEDTLS_SSL_EXPORT_KEYS\n#define MBEDTLS_SSL_MAX_FRAGMENT_LENGTH\n#define MBEDTLS_SSL_PROTO_TLS1_2\n#define MBEDTLS_SSL_PROTO_DTLS\n#define MBEDTLS_SSL_TLS_C\n\n#if OPENTHREAD_ENABLE_BORDER_AGENT || OPENTHREAD_ENABLE_COMMISSIONER || OPENTHREAD_ENABLE_APPLICATION_COAP_SECURE\n#define MBEDTLS_SSL_COOKIE_C\n#define MBEDTLS_SSL_SRV_C\n#endif\n\n#if OPENTHREAD_ENABLE_APPLICATION_COAP_SECURE\n#define MBEDTLS_KEY_EXCHANGE_PSK_ENABLED\n#define MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED\n#if OPENTHREAD_ENABLE_EST_CLIENT\n#define MBEDTLS_PEM_WRITE_C\n#define MBEDTLS_PK_WRITE_C\n#define MBEDTLS_X509_CSR_WRITE_C\n#define MBEDTLS_X509_CREATE_C\n#endif\n#endif\n\n#ifdef MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED\n#define MBEDTLS_BASE64_C\n#define MBEDTLS_ECDH_C\n#define MBEDTLS_ECDSA_C\n#define MBEDTLS_OID_C\n#define MBEDTLS_PEM_PARSE_C\n#define MBEDTLS_X509_USE_C\n#define MBEDTLS_X509_CRT_PARSE_C\n#define MBEDTLS_X509_USE_C\n#define MBEDTLS_X509_CRT_PARSE_C\n#endif\n\n#if OPENTHREAD_ENABLE_ECDSA\n#define MBEDTLS_BASE64_C\n#define MBEDTLS_ECDH_C\n#define MBEDTLS_ECDSA_C\n#define MBEDTLS_OID_C\n#define MBEDTLS_PEM_PARSE_C\n#endif\n\n#define MBEDTLS_MPI_WINDOW_SIZE            1 /**&lt; Maximum windows size used. */\n#define MBEDTLS_MPI_MAX_SIZE              32 /**&lt; Maximum number of bytes for usable MPIs. */\n#define MBEDTLS_ECP_MAX_BITS             256 /**&lt; Maximum bit size of groups */\n#define MBEDTLS_ECP_WINDOW_SIZE            2 /**&lt; Maximum window size used */\n#define MBEDTLS_ECP_FIXED_POINT_OPTIM      0 /**&lt; Enable fixed-point speed-up */\n#define MBEDTLS_ENTROPY_MAX_SOURCES        1 /**&lt; Maximum number of sources supported */\n\n#if OPENTHREAD_ENABLE_MULTIPLE_INSTANCES\n#define MBEDTLS_PLATFORM_STD_CALLOC      otPlatCAlloc /**&lt; Default allocator to use, can be undefined */\n#define MBEDTLS_PLATFORM_STD_FREE        otPlatFree /**&lt; Default free to use, can be undefined */\n#else\n#define MBEDTLS_MEMORY_BUFFER_ALLOC_C\n#endif\n\n#if OPENTHREAD_ENABLE_APPLICATION_COAP_SECURE\n#define MBEDTLS_SSL_MAX_CONTENT_LEN      900 /**&lt; Maxium fragment length in bytes */\n#else\n#define MBEDTLS_SSL_MAX_CONTENT_LEN      768 /**&lt; Maxium fragment length in bytes */\n#endif\n\n#define MBEDTLS_SSL_CIPHERSUITES         MBEDTLS_TLS_ECJPAKE_WITH_AES_128_CCM_8\n\n#if defined(MBEDTLS_USER_CONFIG_FILE)\n#include MBEDTLS_USER_CONFIG_FILE\n#endif\n\n#if defined(MBEDTLS_ECP_ALT) &amp;&amp; !defined(MBEDTLS_ECP_RESTARTABLE)\ntypedef void mbedtls_ecp_restart_ctx;\n#endif\n\n#include \"mbedtls/check_config.h\"\n\n#endif /* MBEDTLS_CONFIG_H */\n</code></pre>\n\n<p>It resolved the \"not defined in this scope\" errors i've had before, but instead i have now the above described errors.</p>\n\n<p>Here is what i've edited in the common-switch file:</p>\n\n<p>openthread/examples/common-switches.mk</p>\n\n<pre><code>ECDSA               ?= 0\n// my code begin\nEST_CLIENT          ?= 0\n// my code end\nJAM_DETECTION       ?= 0\n</code></pre>\n\n<pre><code>ifeq ($(ECDSA),1)\nconfigure_OPTIONS              += --enable-ecdsa\nendif\n\n// my code begin\nifeq ($(EST_CLIENT),1)\nconfigure_OPTIONS              += --enable-est-client --enable-application-coap-secure\nendif\n// my code end\n\nifeq ($(JAM_DETECTION),1)\nconfigure_OPTIONS              += --enable-jam-detection\nendif\n</code></pre>\n\n<p>and her what i've added to configure:</p>\n\n<p>openthread/configure.ac</p>\n\n<pre><code>#\n# EST Client\n#\n\nAC_ARG_ENABLE(est_client,\n    [AS_HELP_STRING([--enable-est-client],[Enable EST client support @&lt;:@default=no@:&gt;@.])],\n    [\n        case \"${enableval}\" in\n\n        no|yes)\n            enable_est_client=${enableval}\n            ;;\n\n        *)\n            AC_MSG_ERROR([Invalid value ${enable_est_client} for --enable-est-client])\n            ;;\n        esac\n    ],\n    [enable_est_client=no])\n\nif test \"$enable_est_client\" = \"yes\"; then\n    OPENTHREAD_ENABLE_EST_CLIENT=1\nelse\n    OPENTHREAD_ENABLE_EST_CLIENT=0\nfi\n\nAC_SUBST(OPENTHREAD_ENABLE_EST_CLIENT)\nAM_CONDITIONAL([OPENTHREAD_ENABLE_EST_CLIENT], [test \"${enable_est_client}\" = \"yes\"])\nAC_DEFINE_UNQUOTED([OPENTHREAD_ENABLE_EST_CLIENT],[${OPENTHREAD_ENABLE_EST_CLIENT}],[Define to 1 if you want to enable EST Client])\n</code></pre>\n\n<pre><code>  OpenThread DNS Client support             : ${enable_dns_client}\n// my code begin\n  OpenThread EST Client support             : ${enable_est_client}\n// my code end\n  OpenThread SNTP Client support            : ${enable_sntp_client}\n</code></pre>\n\n<p>I've also edited the makefile:</p>\n\n<p>openthread/src/core/Makefile.am</p>\n\n<pre><code>    crypto/ecdsa.hpp                  \\\n    crypto/ecp.hpp                    \\\n    crypto/hmac_sha256.hpp            \\\n</code></pre>\n\n<pre><code>    crypto/ecdsa.cpp                  \\\n    crypto/ecp.cpp                    \\\n    crypto/hmac_sha256.cpp            \\\n</code></pre>\n\n<p>My build command is \"make -f examples/Makefile-nrf52840 EST_CLIENT=1\".</p>\n\n<p>I think once this problem is solved, i can solve the others by myself as the root of the problem seems to be the same.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "xcode", "include", "clang", "libclang"], "comments": [{"owner": {"reputation": 119, "user_id": 1324891, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/53c9f39430594eed13b2323225ac4168?s=128&d=identicon&r=PG&f=1", "display_name": "bc888", "link": "https://stackoverflow.com/users/1324891/bc888"}, "edited": false, "score": 0, "creation_date": 1561563042, "post_id": 56776349, "comment_id": 100108124, "body": "This only fails on angle brackets."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1561568493, "post_id": 56776349, "comment_id": 100110826, "body": "Is your tool is compiling but fails to analyse itself or your code don&#39;t compile at all? You got me quite confused here."}, {"owner": {"reputation": 119, "user_id": 1324891, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/53c9f39430594eed13b2323225ac4168?s=128&d=identicon&r=PG&f=1", "display_name": "bc888", "link": "https://stackoverflow.com/users/1324891/bc888"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1561579439, "post_id": 56776349, "comment_id": 100115260, "body": "My code compiles,  it&#39;s only when I run my code."}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 2947760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODMpa.jpg?s=128&g=1", "display_name": "Alexandr Kirilov", "link": "https://stackoverflow.com/users/2947760/alexandr-kirilov"}, "is_accepted": false, "score": 0, "last_activity_date": 1561813358, "creation_date": 1561813358, "answer_id": 56817763, "question_id": 56776349, "link": "https://stackoverflow.com/questions/56776349/libclang-not-finding-headers-in-brackets-on-mac-with-xcode/56817763#56817763", "title": "libclang not finding headers in &lt;&gt; brackets on Mac with Xcode", "body": "<p>I've got the same issue. I am trying to add CPP to iOS Objective-C. It's not working. I found that this is about next \"pain\" from Apple because they do not use standard C++ library anymore. I've tried everything that mentioned on this site but haven't found any solution:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Grui2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Grui2.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/9uUuR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9uUuR.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/G9iAa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G9iAa.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 119, "user_id": 1324891, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/53c9f39430594eed13b2323225ac4168?s=128&d=identicon&r=PG&f=1", "display_name": "bc888", "link": "https://stackoverflow.com/users/1324891/bc888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561813358, "creation_date": 1561562992, "last_edit_date": 1561583430, "question_id": 56776349, "link": "https://stackoverflow.com/questions/56776349/libclang-not-finding-headers-in-brackets-on-mac-with-xcode", "title": "libclang not finding headers in &lt;&gt; brackets on Mac with Xcode", "body": "<p>Edit:</p>\n\n<p>This program compiles. It's only when run does it fail to find iostream.  I'm using the libclang.dylib that is bundled with Xcode.</p>\n\n<p>I've written a small tool to begin working with libclang.  I'm trying to parse TranslationUnits.   The following program is saved in the file tool.cpp.   Once compiled and run, it tries to parse tool.cpp as a TU.  It's failing to get a clean run with default headers as it cannot find iostream on my Mac.  After several attempts to supply arguments that point to the file, it still doesn't work.  Any ideas?</p>\n\n<pre><code> #include \"tool.h\"\n #include &lt;iostream&gt;\n\n int main(int argc, char* argv[]) {\n     CXIndex index = clang_createIndex(0,0);\n\n\n     const char *args[] = {\n     \"-I/usr/include\",\n     \"-I/usr/local/include\",\n     \"-I.\",\n     \"-I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\",\n\n\n\n\n\n     //Should be here\n     \"-I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\"\n     }\n\n ;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>tool.cpp 6:10: 'iostream' file not found\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 2, "creation_date": 1561563209, "post_id": 56776348, "comment_id": 100108221, "body": "Seems pretty clear that <code>p-&gt;next</code> is a pointer an <code>k</code> is an integer. If you showed how <code>node</code> is declared it could be helpful."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561563221, "post_id": 56776348, "comment_id": 100108232, "body": "<code>if (p-&gt;next == k)</code> <code>p-&gt;next</code> is a pointer, <code>k</code> is an integer. What are you expecting this to do?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1561563266, "post_id": 56776348, "comment_id": 100108249, "body": "You should be using <code>if (p-&gt;data == k)</code>. Replace <code>data</code> with the actual name of the member that contains the value of the node."}, {"owner": {"reputation": 1, "user_id": 11224549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb05210897ae82ecb5130d23175bad21?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/11224549/saleem"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1561735529, "post_id": 56776348, "comment_id": 100173331, "body": "@FedericoklezCulloca i need to found search element in the code            class sll { struct list { int data; struct list *next; }*head; public: typedef struct list node; sll(); void search(); }; sll::sll() { head=NULL; }"}, {"owner": {"reputation": 1, "user_id": 11224549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb05210897ae82ecb5130d23175bad21?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/11224549/saleem"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561735632, "post_id": 56776348, "comment_id": 100173376, "body": "@Barmar  i need to found search element in the code class sll { struct list { int data; struct list *next; }*head; public: typedef struct list node; sll(); void search(); }; sll::sll() { head=NULL; }"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1561737512, "post_id": 56776348, "comment_id": 100174202, "body": "So what&#39;s the problem? Doesn&#39;t <code>if (p-&gt;data == k)</code> work?"}], "owner": {"reputation": 1, "user_id": 11224549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb05210897ae82ecb5130d23175bad21?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/11224549/saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561563212, "creation_date": 1561562991, "last_edit_date": 1561563212, "question_id": 56776348, "link": "https://stackoverflow.com/questions/56776348/sl-cpp-in-member-function-int-sllsearch-sl-cpp12215-error-iso-c-fo", "title": "SL.cpp: In member function \u2018int sll::search()\u2019: SL.cpp:122:15: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]", "body": "<pre><code>int sll:: search(){\n    node *p;\n    int f=0,k;\n    p=head;\n    cout&lt;&lt;\"Enter the element you want to found\";\n    cin&gt;&gt;k;\n    while(p!=NULL)\n    {\n\n        if(p-&gt;next == k)\n        {\n            f=1;\n            cout&lt;&lt;\"Element found\";\n        }\n        else\n        {\n            p=p-&gt;next;\n        }}\n    if(f==0)\n    {\n        cout&lt;&lt;\"Element not found\";\n    }\n    return(0);\n}\n</code></pre>\n\n<blockquote>\n  <p>SL.cpp: In member function \u2018int sll::search()\u2019:\n  SL.cpp:122:15: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]\n   if(p->next == k)</p>\n</blockquote>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 0, "creation_date": 1561570000, "post_id": 56776080, "comment_id": 100111519, "body": "I&#39;m having trouble understanding what your exact problem is. Are you asking how to have the user select a <code>UUserWidget</code> subclass and then instantiate it at runtime? I&#39;m not sure what <code>UUserWidget</code> has to do with getting a list of all <code>UClass</code> subclasses."}, {"owner": {"reputation": 91, "user_id": 10559263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a146d01376b36729c77f63897940f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuuki", "link": "https://stackoverflow.com/users/10559263/yuuki"}, "reply_to_user": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 1, "creation_date": 1561570694, "post_id": 56776080, "comment_id": 100111836, "body": "@Ruzihm I just want to get a list of UClasses so I can put it in a widget ComboBox, I thought that if I get an UUserWidget from &quot;classesWidget&quot; then I could get the values of UClasses (they should be inside a PanelBox), but what I really need is to get the list, it doesn&#39;t need to be an UUserWidget, that question was because I found that method."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1561586306, "post_id": 56776080, "comment_id": 100117755, "body": "TSubClassOf will get you an asset picker for free, there\u2019s also a property view widget in the engine meant to replicate the same behaviour, though I forget the name."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 10559263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a146d01376b36729c77f63897940f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuuki", "link": "https://stackoverflow.com/users/10559263/yuuki"}, "is_accepted": true, "score": 1, "last_activity_date": 1563441729, "creation_date": 1563441729, "answer_id": 57091181, "question_id": 56776080, "link": "https://stackoverflow.com/questions/56776080/how-can-i-get-a-list-of-all-uclasses-in-the-project-blueprint-and-c/57091181#57091181", "title": "How can I get a List of all UClasses in the project (Blueprint and C++)", "body": "<p>I finally just put a TObjectIterator so I can get every class I want:</p>\n\n<pre><code>    for (TObjectIterator&lt;UClass&gt; It; It; ++It)\n    {\n        if (It-&gt;IsChildOf(AActor::StaticClass()) || It-&gt;IsChildOf(APawn::StaticClass()) || It-&gt;IsChildOf(ACharacter::StaticClass()))\n        {\n            actorClasses.Add(*It);\n        }\n        else if (It-&gt;IsChildOf(USceneComponent::StaticClass()))\n        {\n            componentClasses.Add(*It);\n        }\n        else if (It-&gt;IsChildOf(UUserWidget::StaticClass()))\n        {\n            widgets.Add(*It);\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 10559263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02a146d01376b36729c77f63897940f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yuuki", "link": "https://stackoverflow.com/users/10559263/yuuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 1, "accepted_answer_id": 57091181, "answer_count": 1, "score": 2, "last_activity_date": 1563441729, "creation_date": 1561562133, "last_edit_date": 1561570918, "question_id": 56776080, "link": "https://stackoverflow.com/questions/56776080/how-can-i-get-a-list-of-all-uclasses-in-the-project-blueprint-and-c", "title": "How can I get a List of all UClasses in the project (Blueprint and C++)", "body": "<p>I want to get a list of all UClasses.</p>\n\n<p>I tried to search in ClassViewer but it gives me a SWidget so I don't know how can I get an UUserWidget* from it.</p>\n\n<pre><code> FClassViewerModule&amp; ClassViewerModule = FModuleManager::LoadModuleChecked&lt;FClassViewerModule&gt;(\"ClassViewer\");\n FClassViewerInitializationOptions initClassViewer = FClassViewerInitializationOptions();\n FOnClassPicked onClassPicked = FOnClassPicked();\n TSharedRef&lt;SWidget&gt; classesWidget = ClassViewerModule.CreateClassViewer(initClassViewer, onClassPicked);\n</code></pre>\n\n<p>If I can't get an UUserWidget* from that SWidget then, is there another way to get a list of all UClasses that are currently created in the project?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I just want to get a list of UClasses so I can put it in a widget ComboBox, I thought that if I get an UUserWidget from \"classesWidget\" then I could get the values of UClasses (they should be inside a PanelBox), but what I really need is to get the list, it doesn't need to be an UUserWidget, that question was because I found that method.</p>\n"}, {"tags": ["c++", "qt", "qvariant", "qpointer"], "answers": [{"tags": [], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "is_accepted": false, "score": 0, "last_activity_date": 1561561462, "creation_date": 1561561462, "answer_id": 56775873, "question_id": 56775872, "link": "https://stackoverflow.com/questions/56775872/store-qpointer-into-a-qvariant/56775873#56775873", "title": "Store QPointer into a QVariant", "body": "<p>After some more research, it is possible by using <code>QVariant::fromValue()</code> and <code>QVariant::value()</code>.</p>\n\n<p>Example code:</p>\n\n<pre><code>    QTcpSocket *ob = new QTcpSocket();\n    qDebug(\"%p\", ob);\n    QPointer&lt;QTcpSocket&gt; qp(ob);\n    QVariant qv = QVariant::fromValue(qp);\n    qp = qv.value&lt;QPointer&lt;QTcpSocket&gt; &gt;();\n    qDebug(\"%p\", qp.data());\n    delete ob;\n    qDebug(\"%p\", qp.data());\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>0x137c070\n0x137c070\n0x0\n</code></pre>\n"}], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561561462, "creation_date": 1561561462, "question_id": 56775872, "link": "https://stackoverflow.com/questions/56775872/store-qpointer-into-a-qvariant", "title": "Store QPointer into a QVariant", "body": "<p>Can I store a <code>QPointer</code>, for example a <code>QPointer&lt;QTcpSocket&gt;</code> inside a <code>QVariant</code> and later extract it from it?</p>\n\n<p>I tried with:</p>\n\n<pre><code>    QObject *ob = new QObject();\n    QPointer&lt;QObject&gt; qp(ob);\n    QVariant qv(qp);\n</code></pre>\n\n<p>But I got an error - <code>QVariant::QVariant(void*)' is private</code>.</p>\n"}, {"tags": ["c++", "git"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1561561135, "post_id": 56775657, "comment_id": 100107009, "body": "I don&#39;t think so. Git is language agnostic. It has no way of knowing your intent in C++. I&#39;ll wait for somebody more knowledgeable than me to prove me wrong :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561561935, "post_id": 56775657, "comment_id": 100107500, "body": "If case list is long enough, you might separate new cases with 3 lines or more (size of diff context)."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1561563015, "post_id": 56775657, "comment_id": 100108113, "body": "I assume in reality youir cases are not sequential numbers? :-)"}, {"owner": {"reputation": 3079, "user_id": 1226655, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yyz1i.png?s=128&g=1", "display_name": "IDDQD", "link": "https://stackoverflow.com/users/1226655/iddqd"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1561564548, "post_id": 56775657, "comment_id": 100108965, "body": "@GemTaylor No, just text. XD"}], "answers": [{"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1561565392, "creation_date": 1561565392, "answer_id": 56777067, "question_id": 56775657, "link": "https://stackoverflow.com/questions/56775657/remove-minimize-git-merge-conflicts/56777067#56777067", "title": "Remove/minimize Git merge conflicts", "body": "<p>One way would be to do an immediate check-in/promotion with a marker label after creating the named test branch. </p>\n\n<p>The creation of the marker label may be as trivial as a comment, or a pair of comments, so would avoid needing a test cycle before promotion. Perhaps use the branch name to \"decorate\" the comment. By immediately, I do mean it! So long as 2 new test branches are not both created simultaneously in this small window, they now each have a space to actually write their code that should be conflict free.</p>\n\n<p>You could do the same with the test body, if you have issues with people simultaneously appending tests in existing files: Create a comment block denoting the start and end of their test. So long as they write between the lines a conflict is avoided. This does mean they have to choose which test module they want to append to straight away, of course.</p>\n"}, {"tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": false, "score": 0, "last_activity_date": 1561565979, "creation_date": 1561565979, "answer_id": 56777212, "question_id": 56775657, "link": "https://stackoverflow.com/questions/56775657/remove-minimize-git-merge-conflicts/56777212#56777212", "title": "Remove/minimize Git merge conflicts", "body": "<p>The short answer is no.  As <a href=\"https://stackoverflow.com/questions/56775657/remove-minimize-git-merge-conflicts#comment100107009_56775657\">R Sahu noted in a comment</a>, Git has no idea about the <em>semantics</em> of the text it is merging.  It merely treats it as a set of lines.  If, while merging two different change-sets, the lines overlap or abut, you get a merge conflict.  For instance, given:</p>\n\n<pre><code>      case OLD_CASE_1:\n      case OLD_CASE_2:\n+     case NEW_CASE_1:\n          return true;\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>      case OLD_CASE_1:\n      case OLD_CASE_2:\n+     case NEW_CASE_2:\n          return true;\n</code></pre>\n\n<p>Git would in general declare a conflict here.  Were this Go code, rather than C++, Git would be \"more right\" about this being a true conflict, since Go has no automatic fall-through (or equivalently, has the C++ equivalent of a default <code>break;</code> in front of each <code>case</code>), i.e., in C++ the semantics would be to return true <em>only</em> for the one new case, and no longer for <code>OLD_CASE_2</code>.</p>\n\n<p>Now, if you're in a group that prefers to <em>rebase</em> pull requests, your automatic rebasing will tend to go smoothly <em>if</em> the <code>NEW_CASE_1</code> PR is accepted and merged first <em>and</em> you build your second PR <em>on</em> the first one <em>and</em> you rebase each of your remaining PRs on the accepted PRs in order.  This is more complicated, and prone to a lot more re-work if your PRs must be accepted in some other order for some reason, but sometimes it's pretty nice.  Whether you and/or your group want to do this is a much bigger question, though.</p>\n"}], "owner": {"reputation": 3079, "user_id": 1226655, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yyz1i.png?s=128&g=1", "display_name": "IDDQD", "link": "https://stackoverflow.com/users/1226655/iddqd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561565979, "creation_date": 1561560847, "question_id": 56775657, "link": "https://stackoverflow.com/questions/56775657/remove-minimize-git-merge-conflicts", "title": "Remove/minimize Git merge conflicts", "body": "<p>I am trying to think of a way to completely remove or minimize Git merge conflicts for the following scenario:</p>\n\n<pre><code>switch(value)\n{\n    case OLD_CASE_1:\n    case OLD_CASE_2:\n    case NEW_CASE_1:\n    case NEW_CASE_2:\n    case NEW_CASE_3:\n    case NEW_CASE_4:\n        return true;\n    default:\n        return false;\n}\n</code></pre>\n\n<p>For each of the new cases, I create a branch where I add just the case specific to that branch. (Eg. <code>feature/new-case-x</code> contains just <code>case NEW_CASE_X:</code>).</p>\n\n<p>At the end of the day, I submit 4 pull requests. As soon as any one of them is merged, the others will enter a conflict state. Since the case order doesn't matter to me, is there a way I can minimize or completely get rid of conflicts? Thank you.</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "machine-learning"], "comments": [{"owner": {"reputation": 1458, "user_id": 6436977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6A0LS.jpg?s=128&g=1", "display_name": "T A", "link": "https://stackoverflow.com/users/6436977/t-a"}, "edited": false, "score": 0, "creation_date": 1561615486, "post_id": 56775637, "comment_id": 100123765, "body": "Find a feature descriptor that works for your application and definitely use SVM instead of a NN. SVM works fine even with a small training set if you choose your training features well."}], "answers": [{"tags": [], "owner": {"reputation": 1354, "user_id": 9424793, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nrSWs-qlE-g/AAAAAAAAAAI/AAAAAAAAAbA/sABgxYZLXyw/photo.jpg?sz=128", "display_name": "Andr&#233; Pacheco", "link": "https://stackoverflow.com/users/9424793/andr%c3%a9-pacheco"}, "is_accepted": true, "score": 0, "last_activity_date": 1561570094, "creation_date": 1561570094, "answer_id": 56778221, "question_id": 56775637, "link": "https://stackoverflow.com/questions/56775637/classification-with-machine-learning-and-a-small-database/56778221#56778221", "title": "Classification with machine learning and a small database", "body": "<p>As we know, the most important thing that ML approaches need to work properly is data. So, I'd say your 1st and 2nd conditions are conflicting with each other. In addition, your 3rd condition is adding more complexity in the problem. You can solve it including more data from different angles and illumination conditions. But again, it's conflicting with condition 2.</p>\n\n<p>Even so, if you'd like to follow the ML path, I'd recommend you to use a pre-trained model, a strong data augmentation and, maybe, an ensemble of models to help increase the detection. As the problem is not that hard, it should work.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56778221, "answer_count": 1, "score": -2, "last_activity_date": 1561570094, "creation_date": 1561560785, "question_id": 56775637, "link": "https://stackoverflow.com/questions/56775637/classification-with-machine-learning-and-a-small-database", "title": "Classification with machine learning and a small database", "body": "<p>I want to create a valve detection and classification like this video : <a href=\"https://www.youtube.com/watch?v=VY92fqmSdfA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=VY92fqmSdfA</a> \nto detect the positions <strong>Open</strong> and <strong>close</strong> and <strong>intermediate</strong> of the valve.</p>\n\n<p>I have done some research and I have found some methods to resolve this problem, but i have some conditions to respect to resolve this problem : </p>\n\n<p><strong>Condition 1 :</strong> Use machine learning in the application, I can't use simple methods like Template matching,...</p>\n\n<p><strong>Condition 2 :</strong> Use a small database (Minimum 10 images by classe, maximum 40 images by classe)</p>\n\n<p><strong>Condition 3 :</strong> detect the position of the valve if the camera position changes, so I can't use only colors to detect the valve handle.</p>\n\n<p>I want to use HOG (Histogram oriented gradient) + SVM/ANN but HOG needs a lot of images to train SVM/ANN.</p>\n\n<p>I dont know if I can resolve this problem respecting this conditions?</p>\n"}, {"tags": ["c++", "stream", "cout"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1561560822, "post_id": 56775514, "comment_id": 100106806, "body": "I&#39;m curious. Why should your program care whether <code>cout</code> and <code>cerr</code> end up writing to the same destination or not?"}, {"owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "edited": false, "score": 0, "creation_date": 1561560903, "post_id": 56775514, "comment_id": 100106856, "body": "I have no idea about C++ standard library way to do that, but what about OS-specific API? On Windows, you can use <code>GetStdHandle</code> with <code>GetFileNameFromHandle</code> to get actual file names for both standard error and standard output; for sure, there are similar Linux functionality."}, {"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1561561811, "post_id": 56775514, "comment_id": 100107431, "body": "@RSahu The program itself doesn&#39;t care - we and our users care. For our end-user use cases, we want to be sure that messages indicating what error has occurred end up in both stderr and stdout (because depending on how our users have or have not set up output redirection they may or may not see it in one or the other.) We could just print things once to each (effectively what we&#39;re doing currently), but if stdout and stderr go to the same location, it would be clearer and more user friendly if we could reformat things to remove the redundant printing."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1561561823, "post_id": 56775514, "comment_id": 100107439, "body": "This should absolutely not be the care of your program. Duplicating error information to all streams is a total antipattern and you&#39;ve discovered why it doesn&#39;t work."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1561561831, "post_id": 56775514, "comment_id": 100107443, "body": "I also do not really understand your use case, if the caller of your program decides to have redundant information, then just let them. I mean stdout and stderr are seperate for a reason, if one deliberately decides to merge them, then you just get what you asked for... nevertheless it is an interesting question"}], "answers": [{"comments": [{"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 0, "creation_date": 1561562672, "post_id": 56776154, "comment_id": 100107906, "body": "No, what I&#39;m wanting to do is get reasonably formatted error messages in the default case, without requiring my end users to jump through extra hoops."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 0, "creation_date": 1561562795, "post_id": 56776154, "comment_id": 100107981, "body": "@R.M., That&#39;s always the right thing to do. That should not preclude you from allowing the user to make choices."}, {"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 0, "creation_date": 1561563305, "post_id": 56776154, "comment_id": 100108269, "body": "I&#39;m not precluding adding an option to specify where users want error info. However, that still leaves the question of what to do when they don&#39;t specify such an option. In such cases, the preferred behavior leads us back to the original question: printing one thing to stdout &amp; stderr when they are different streams, but printing a differently formatted thing (not just a concatenation) when they&#39;re the same destination."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 0, "creation_date": 1561563770, "post_id": 56776154, "comment_id": 100108559, "body": "@R.M., the default behaviour should be to print error message to <code>stderr</code>/<code>std::cerr</code> only. All other output should go to <code>stdout</code>/<code>std::cout</code>. Adding more fine grained logic in your code does not make sense to me."}, {"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 0, "creation_date": 1561564648, "post_id": 56776154, "comment_id": 100109024, "body": "While I agree in an abstract, theoretical sense, with our particular program, with our particular end-users, and with their particular use cases, printing error messages to both stdout &amp; stderr is definitely the preferred behavior. While from an abstract theoretical sense it might be nice to tell our end users &quot;<i>Tough shit. Error messages default to stderr. Suck it up and deal.</i>&quot; that doesn&#39;t work out well in practice."}, {"owner": {"reputation": 999, "user_id": 2332068, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4eba55ee9da651e61d9e1ca8a6890ae8?s=128&d=identicon&r=PG", "display_name": "Sam Liddicott", "link": "https://stackoverflow.com/users/2332068/sam-liddicott"}, "edited": false, "score": 0, "creation_date": 1582033892, "post_id": 56776154, "comment_id": 106631191, "body": "also, don&#39;t forget /dev/tty where it is available. That isn&#39;t very likely to be redirectable to a file; so it&#39;s one way to make sure the user sees the error IF that is what you want to do."}, {"owner": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "edited": false, "score": 0, "creation_date": 1590523512, "post_id": 56776154, "comment_id": 109710685, "body": "Regardless of whether OP&#39;s use case is XY, I would still like an answer to the question, because I have a case that I do not think is XY: I need my logs writes to be atomic for greppability, so I need my stdout and stderr writes to share a mutex if they go to the same place -- but I want to use separate mutexes if they don&#39;t, to avoid the performance hit and deadlock hazard."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1561562353, "creation_date": 1561562353, "answer_id": 56776154, "question_id": 56775514, "link": "https://stackoverflow.com/questions/56775514/how-to-determine-if-cout-and-cerr-go-to-the-same-place/56776154#56776154", "title": "How to determine if cout and cerr go to the same place", "body": "<p>This is another case of the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>.</p>\n\n<p>What you are really trying to accomplish is:</p>\n\n<blockquote>\n  <p>For our end-user use cases, we want to be sure that messages indicating what error has occurred end up in both stderr and stdout (because depending on how our users have or have not set up output redirection they may or may not see it in one or the other.) We could just print things once to each (effectively what we're doing currently), but if stdout and stderr go to the same location, it would be clearer and more user friendly if we could reformat things to remove the redundant printing.</p>\n</blockquote>\n\n<p>Given that objective, a cleaner mechanism would be to allow the user to specify where they would like the error messages to go to. E.g.</p>\n\n<pre><code>the-program --error-destination \"stdout\"\nthe-program --error-destination \"stderr\"\nthe-program --error-destination \"stdout,stderr\"\nthe-program --error-destination \"/tmp/errro-messages.txt\"\nthe-program --error-destination \"stdout,/tmp/errro-messages.txt\"\n</code></pre>\n\n<p>With the understanding that \"stdout\" and \"stderr\" are special destinations. Anything else is a file.</p>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": -1, "last_activity_date": 1561565909, "creation_date": 1561565909, "answer_id": 56777197, "question_id": 56775514, "link": "https://stackoverflow.com/questions/56775514/how-to-determine-if-cout-and-cerr-go-to-the-same-place/56777197#56777197", "title": "How to determine if cout and cerr go to the same place", "body": "<p>If you really want to know on <strong>linux</strong>, <code>/proc/self/fd</code> will reveal all! Try <code>ls -l /proc/self/fd</code> today...</p>\n\n<p>Also, if you really want to emit an error to the console, having determined the redirects have stolen your output, then you could always send it to <code>/dev/tty</code>. Don't bother with <code>/dev/stderr</code> as that is just a link to <code>/proc/self/fd/2</code>! The one issue with this is if your program is detached from the console with <code>hup</code> or similar then you can't use <code>/dev/tty</code> obviously.</p>\n"}], "owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1561565909, "creation_date": 1561560384, "last_edit_date": 1561565114, "question_id": 56775514, "link": "https://stackoverflow.com/questions/56775514/how-to-determine-if-cout-and-cerr-go-to-the-same-place", "title": "How to determine if cout and cerr go to the same place", "body": "<p>Is there a way in C++ to tell if std::cout and std::cerr are pointing to the same destination?</p>\n\n<p>That is, I'd like to be able to distinguish when the program is launched like </p>\n\n<p><code>program</code> or <code>program &gt; log 2&gt;&amp;1</code> or <code>program &amp;&gt; log</code> </p>\n\n<p>versus </p>\n\n<p><code>program &gt; log</code> or <code>program 2&gt; errors</code> or <code>program &gt; log 2&gt; errors</code></p>\n\n<p><em>(The use case is a situation where we'd like error information to be printed to both stdout and stderr when they are separate, but want to print a slightly differently formatted output (not just a concatenation) if they both go to the same destination. -- Yes, I'm aware this isn't ideal, and isn't the officially recommended way to do things, and shouldn't be looked on as a standard way of doing things. But please just trust me, though, that we've taken time to think things through, and for our particular use case this is the best option.)</em></p>\n\n<p>For our purposes, we can assume that nothing has been done with cout/cerr redirection within the program itself (just the typical shell-level command line redirection), so if there's C-level functionality which looks at stdout/stderr directly (rather than the std::cout and std::cerr streams proper), that would likely work too.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1561559299, "post_id": 56775116, "comment_id": 100105810, "body": "What would this even mean? Variant and tuple are really different things. Why are you going from one to the other?"}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1561559633, "post_id": 56775116, "comment_id": 100106016, "body": "@Barry Variant contains a tuple element. see EDIT1."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1561559650, "post_id": 56775116, "comment_id": 100106026, "body": "@Barry I don&#39;t believe OP wants to convert from one to the other. Rather, they seem to simply want to access a tuple element using an index that is not known at compile time, using an <code>std::variant</code> to account for the various possible types that element might have."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561559961, "post_id": 56775116, "comment_id": 100106226, "body": "@Fran&#231;oisAndrieux Yes, I missed the <code>not</code> sorry."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1561561966, "post_id": 56775116, "comment_id": 100107523, "body": "Your <code>Set</code> function looks toxic.  The variant knows which is engaged.  Either index matches the one engaged (ok), or it doesn&#39;t (which means what, crash?  UB?  Throw?)"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1561560516, "post_id": 56775452, "comment_id": 100106593, "body": "Is <code>I</code> implicitly a <code>constexpr</code>? I&#39;ve never seen a function argument used as a template argument before."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561560564, "post_id": 56775452, "comment_id": 100106627, "body": "@Fran&#231;oisAndrieux <code>I</code> is an <code>integral_constant&lt;size_t, K&gt;</code> for some <code>K</code>, that type&#39;s conversion to <code>size_t</code> is a constant expression."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1561560778, "post_id": 56775452, "comment_id": 100106767, "body": "That makes sense. I never considered that <code>integral_constant</code> was implicitly convertible to it&#39;s <code>value_type</code>, I always used the <code>value</code> member."}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561561504, "post_id": 56775452, "comment_id": 100107243, "body": "The maximum template parameter in <code>mp_with_index</code> source code is 15. Does this mean that this code would not compile with Tuple or Variant containing 16 or more elements?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 2, "creation_date": 1561562355, "post_id": 56775452, "comment_id": 100107736, "body": "@AlexeyStarinsky That is incorrect. There is no such maximum."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561569350, "post_id": 56775452, "comment_id": 100111203, "body": "@Barry: No? I&#39;m seeing some evidence that there is. <a href=\"https://www.boost.org/doc/libs/1_70_0/boost/mp11/detail/mp_with_index.hpp\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_70_0/boost/mp11/detail/mp_with_index.hp&zwnj;&#8203;p</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561569704, "post_id": 56775452, "comment_id": 100111372, "body": "@LightnessRacesinOrbit There is no maximum (modulo template instantiation limits, which probably gets you to around 2000)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561569918, "post_id": 56775452, "comment_id": 100111471, "body": "@Barry What&#39;s going on with those overloads then?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561570004, "post_id": 56775452, "comment_id": 100111521, "body": "@LightnessRacesinOrbit There are specializations for 0 thru 16 and then the primary to handle &gt; 16."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1561563049, "last_edit_date": 1561563049, "creation_date": 1561560161, "answer_id": 56775452, "question_id": 56775116, "link": "https://stackoverflow.com/questions/56775116/get-a-stdtuple-element-as-stdvariant/56775452#56775452", "title": "Get a std::tuple element as std::variant", "body": "<p>I'm going to continue my theme of recommending Boost.Mp11 for all metaprogramming things, because there is always a function for that. In this case, we want <a href=\"https://www.boost.org/doc/libs/develop/libs/mp11/doc/html/mp11.html#mp_with_indexni_f\" rel=\"nofollow noreferrer\"><code>mp_with_index</code></a>. That function lifts a runtime index into a compile-time index.</p>\n\n<pre><code>Variant Get(Tuple const&amp; val, size_t index)\n{\n    return mp_with_index&lt;std::tuple_size_v&lt;Tuple&gt;&gt;(\n        index,\n        [&amp;](auto I){ return Variant(std::get&lt;I&gt;(val)); }\n        );\n}\n</code></pre>\n\n<p>Given that in the OP, the indices of the Tuple and the Variant don't even line up, the <code>Set</code> needs to actually visit the <code>Variant</code> rather than relying on the index. I'm using <code>is_assignable</code> here as the constraint, but that can be adjusted to as fitting for the problem (e.g. maybe it should be <code>is_same</code>).</p>\n\n<pre><code>void Set(Tuple&amp; val, size_t index, Variant const&amp; elem_v)\n{\n    mp_with_index&lt;std::tuple_size_v&lt;Tuple&gt;&gt;(\n        index,\n        [&amp;](auto I){\n            std::visit([&amp;](auto const&amp; alt){\n                if constexpr (std::is_assignable_v&lt;\n                        std::tuple_element_t&lt;Tuple, I&gt;,\n                        decltype(alt)&gt;)\n                {\n                    std::get&lt;I&gt;(val) = alt;\n                } else {\n                    throw /* something */;\n                }\n            }, elem_v);\n        });\n}\n</code></pre>\n\n<p>If you require that every type in the <code>Tuple</code> appears exactly once in the <code>Variant</code>, and you want to directly only assign from that type without doing any conversions, this can be simplified to:</p>\n\n<pre><code>void Set(Tuple&amp; val, size_t index, Variant const&amp; elem_v)\n{\n    mp_with_index&lt;std::tuple_size_v&lt;Tuple&gt;&gt;(\n        index,\n        [&amp;](auto I){\n            using T = std::tuple_element_t&lt;Tuple, I&gt;;\n            std::get&lt;I&gt;(val) = std::get&lt;T&gt;(elem_v);\n        });\n}\n</code></pre>\n\n<p>which will throw if the variant is not engaged with that type.</p>\n"}, {"comments": [{"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561561614, "post_id": 56775541, "comment_id": 100107304, "body": "why recursive functions but not fold expressions?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 1, "creation_date": 1561561909, "post_id": 56775541, "comment_id": 100107486, "body": "@AlexeyStarinsky Because I am more familiar with these ;) I am not sure you would gain anything using fold expressions vs. these kind of compile-time recursions with optimization enabled."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 1, "creation_date": 1561562319, "post_id": 56775541, "comment_id": 100107717, "body": "@AlexeyStarinsky Looking at other answers, I find that, in this case, fold expressions create messy codes, not that simple to understand, while with the availability of <code>if constexpr</code>, the recursive version are quite straightforward. But maybe there is a very nice implementation using fold expression somewhere ;)"}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561562682, "post_id": 56775541, "comment_id": 100107912, "body": "yes, probably the recursion looks better than fake lambdas with fold expressions."}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561567165, "post_id": 56775541, "comment_id": 100110279, "body": "Did you compiled this? see <a href=\"https://wandbox.org/permlink/nzVOagQjwOKf45kY\" rel=\"nofollow noreferrer\">wandbox.org/permlink/nzVOagQjwOKf45kY</a>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561568000, "post_id": 56775541, "comment_id": 100110621, "body": "@AlexeyStarinsky I copy paste your example and forgot to fix the 5, you need to change it to 4. You also need to change <code>&quot;xyz&quot;</code> to <code>std::string{&quot;xyz&quot;}</code> or use the <code>s</code> literal because <code>&quot;xyz&quot;</code> will fill the variant with a <code>bool</code> value. See <a href=\"https://wandbox.org/permlink/JzRpvP4RqYYWmfyE\" rel=\"nofollow noreferrer\">wandbox.org/permlink/JzRpvP4RqYYWmfyE</a>"}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 3, "last_activity_date": 1561568116, "last_edit_date": 1561568116, "creation_date": 1561560459, "answer_id": 56775541, "question_id": 56775116, "link": "https://stackoverflow.com/questions/56775116/get-a-stdtuple-element-as-stdvariant/56775541#56775541", "title": "Get a std::tuple element as std::variant", "body": "<p>Here are possible implementations of a <code>get_runtime</code> and <code>set_runtime</code> functions that rely on recursion to try to match the runtime index to a compile time one:</p>\n\n<pre><code>template &lt;class Variant, class Tuple, std::size_t Index = 0&gt;\nVariant get_runtime(Tuple &amp;&amp;tuple, std::size_t index) {\n    if constexpr (Index == std::tuple_size_v&lt;std::decay_t&lt;Tuple&gt;&gt;) {\n        throw \"Index out of range for tuple\";\n    }\n    else {\n        if (index == Index) {\n            return Variant{std::get&lt;Index&gt;(tuple)};\n        }\n        return get_runtime&lt;Variant, Tuple, Index + 1&gt;(\n            std::forward&lt;Tuple&gt;(tuple), index);\n    }\n}\n\n\ntemplate &lt;class Tuple, class Variant, std::size_t Index = 0&gt;\nvoid set_runtime(Tuple &amp;tuple, std::size_t index, Variant const&amp; variant) {\n    if constexpr (Index == std::tuple_size_v&lt;std::decay_t&lt;Tuple&gt;&gt;) {\n        throw \"Index out of range for tuple\";\n    }\n    else {\n        if (index == Index) {\n            // Note: You should check here that variant holds the correct type\n            // before assigning.\n            std::get&lt;Index&gt;(tuple) = \n                std::get&lt;std::tuple_element_t&lt;Index, Tuple&gt;&gt;(variant);\n        }\n        else {\n            set_runtime&lt;Tuple, Variant, Index + 1&gt;(tuple, index, variant);\n        }\n    }\n}\n</code></pre>\n\n<p>You can use them like your <code>Get</code> and <code>Set</code>:</p>\n\n<pre><code>using Variant = std::variant&lt;bool, char, int, float, double, std::string&gt;;\nusing Tuple = std::tuple&lt;char, int, int, double, std::string&gt;;\n\nTuple t = std::make_tuple(1, 2, 3, 5.0, \"abc\");\nVariant v = get_runtime&lt;Variant&gt;(t, 1);\nassert(std::get&lt;int&gt;(v) == 2);\nset_runtime(t, 4, Variant(\"xyz\"));\nassert(std::get&lt;4&gt;(t) == std::string(\"xyz\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": false, "score": 1, "last_activity_date": 1561562584, "last_edit_date": 1561562584, "creation_date": 1561562083, "answer_id": 56776074, "question_id": 56775116, "link": "https://stackoverflow.com/questions/56775116/get-a-stdtuple-element-as-stdvariant/56776074#56776074", "title": "Get a std::tuple element as std::variant", "body": "<pre><code>template &lt;size_t... I&gt;\nVariant GetHelper(const Tuple&amp; val, size_t index, std::index_sequence&lt;I...&gt;)\n{\n    Variant value;\n    int temp[] = {\n        ([&amp;]\n        {\n            if (index == I)\n                value = std::get&lt;I&gt;(val);\n        }(), 0)... };\n    return value;\n}\n\nVariant Get(const Tuple&amp; val, size_t index)\n{\n    return GetHelper(val, index, std::make_index_sequence&lt;std::tuple_size_v&lt;Tuple&gt;&gt;{});\n}\n\ntemplate &lt;size_t... I&gt;\nvoid SetHelper(Tuple&amp; val, size_t index, Variant elem_v, std::index_sequence&lt;I...&gt;)\n{\n    int temp[] = {\n        ([&amp;]\n        {\n            using type = std::tuple_element_t&lt;I, Tuple&gt;;\n            if (index == I)\n                std::get&lt;I&gt;(val) = std::get&lt;type&gt;(elem_v);\n        }(), 0)... };\n}\n\nvoid Set(Tuple&amp; val, size_t index, Variant elem_v)\n{\n    SetHelper(val, index, elem_v, std::make_index_sequence&lt;std::tuple_size_v&lt;Tuple&gt;&gt;{});\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>Use <code>std::index_sequence</code> to get access to every tuple element via compile time constant index <code>I</code>. Create a lambda for each index, that performs the desired action if the index matches, and call it immediately (note the <code>()</code> right after the lambdas). Use the syntax <code>int temp[] = { (some_void_func(), 0)... }</code> to actually call every lambda (you cannot use the unpacking syntax <code>...</code> on void functions directly, hence this trick to assign it to an int array). </p>\n\n<p>Alternatively, you can make your lambdas return some dummy int. Then you can call them via unpacking directly.</p>\n"}, {"comments": [{"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561562834, "post_id": 56776264, "comment_id": 100108008, "body": "variant knows the index of the type, but not the index of the element in tuple."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561562894, "post_id": 56776264, "comment_id": 100108043, "body": "@AlexeyStarinsky They correspond exactly, don&#39;t they?  Oh, they don&#39;t.  Ok."}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561562955, "post_id": 56776264, "comment_id": 100108080, "body": "no, there can be multiple elements of the same type in the tuple, for example."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561562986, "post_id": 56776264, "comment_id": 100108096, "body": "@AlexeyStarinsky What happens if your code requests that a <code>std::string</code> be copied over an <code>int</code>?  (or what is supposed to happen)"}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561563088, "post_id": 56776264, "comment_id": 100108151, "body": "if you are asking about something like <code>Set(t, 1, Variant(&quot;xyz&quot;));</code> - it is a type mismatch (there should be an exception or probably a conversion)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1561563462, "post_id": 56776264, "comment_id": 100108364, "body": "@AlexeyStarinsky I made <code>Set</code> return <code>false</code> in that case.  There is no conversion from string to integer in C++."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1561564310, "last_edit_date": 1561564310, "creation_date": 1561562721, "answer_id": 56776264, "question_id": 56775116, "link": "https://stackoverflow.com/questions/56775116/get-a-stdtuple-element-as-stdvariant/56776264#56776264", "title": "Get a std::tuple element as std::variant", "body": "<p>First, some machinery.</p>\n\n<p><code>alternative</code> is a variant of integral constants, which are stateless.  We can then use visit on them to convert a bounded runtime value to a compile time value.</p>\n\n<pre><code>template&lt;class T, T...Is&gt;\nusing alternative = std::variant&lt; std::integral_constant&lt;T, Is&gt;... &gt;;\n\ntemplate&lt;class List&gt;\nstruct alternative_from_sequence;\ntemplate&lt;class T, T...Is&gt;\nstruct alternative_from_sequence&lt; std::integer_sequence&lt;T,Is...&gt; &gt; {\n  using type=alternative&lt;T, Is...&gt;;\n};\ntemplate&lt;class T, T Max&gt;\nusing make_alternative = typename alternative_from_sequence&lt;\n  std::make_integer_sequence&lt;T, Max&gt;\n&gt;::type;\n\ntemplate&lt;class T, T Max, T Cur=Max-1&gt;\nmake_alternative&lt;T, Max&gt; get_alternative( T value, std::integral_constant&lt; T, Max &gt; ={} ) {\n  if(Cur == 0 || value == Cur) {\n    return std::integral_constant&lt;T, Cur&gt;{};\n  }\n  if constexpr (Cur &gt; 0)\n  {\n    return get_alternative&lt;T, Max, Cur-1&gt;( value );\n  }\n}\ntemplate&lt;class...Ts&gt;\nauto get_alternative( std::variant&lt;Ts...&gt; const&amp; v ) {\n    return get_alternative&lt;std::size_t, sizeof...(Ts) &gt;( v.index() );\n}\n</code></pre>\n\n<p>now your actual problem.  This <code>Get</code> requires you pass your <code>Variant</code> type:</p>\n\n<pre><code>template&lt;class Variant, class...Ts&gt;\nVariant Get(std::tuple&lt;Ts...&gt; const &amp; val, size_t index) {\n  auto which = get_alternative&lt;std::size_t, sizeof...(Ts)&gt;( index );\n  return std::visit( [&amp;val]( auto i )-&gt;Variant {\n    return std::get&lt;i&gt;(val);\n  }, which );\n}\n</code></pre>\n\n<p>Your <code>Set</code> function seems toxic; if the types don't match, there is no practical recourse.  I'll add a return value that states if the assignment failed:</p>\n\n<pre><code>template&lt;class...Ts, class...Vs&gt;\nbool Set(\n  std::tuple&lt;Ts...&gt; &amp; val,\n  std::size_t index,\n  const std::variant&lt;Vs...&gt;&amp; elem_v\n) {\n  auto tuple_which = get_alternative&lt;std::size_t, sizeof...(Ts)&gt;( index );\n  auto variant_which = get_alternative( elem_v );\n  return std::visit( [&amp;val, &amp;elem_v](auto tuple_i, auto variant_i) {\n    using variant_type = std::variant_alternative_t&lt;variant_i, std::variant&lt;Vs...&gt;&gt;;\n    using tuple_type = std::tuple_element_t&lt; tuple_i, std::tuple&lt;Ts...&gt; &gt;;\n\n    if constexpr (!std::is_assignable&lt;tuple_type&amp;, variant_type const&amp;&gt;{}) {\n      return false;\n    } else {\n      std::get&lt;tuple_i&gt;(val) = std::get&lt;variant_i&gt;(elem_v);\n      return true;\n    }\n  }, tuple_which, variant_which );\n}\n</code></pre>\n\n<p>This <code>Set</code> returns false if the types are not assignable.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9ca44f8a2b08c158\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}], "owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 56775452, "answer_count": 4, "score": 5, "last_activity_date": 1561568116, "creation_date": 1561559116, "last_edit_date": 1561560181, "question_id": 56775116, "link": "https://stackoverflow.com/questions/56775116/get-a-stdtuple-element-as-stdvariant", "title": "Get a std::tuple element as std::variant", "body": "<p>Given a variant type:</p>\n\n<pre><code>using Variant = std::variant&lt;bool, char, int, float, double, std::string&gt;;\n</code></pre>\n\n<p>and a tuple type containing elements restricted to this variant types (duplicates and omissions are possible, but no additional types):</p>\n\n<pre><code>using Tuple = std::tuple&lt;char, int, int, double, std::string&gt;;\n</code></pre>\n\n<p>How to implement methods that gets and sets a tuple element by a given index as Variant at runtime:</p>\n\n<pre><code>Variant Get(const Tuple &amp; val, size_t index);\nvoid Set(Tuple &amp; val, size_t index, const Variant &amp; elem_v);\n</code></pre>\n\n<p>I have two implementations in my code, but I have an impression that there can be a better one. My first implementation uses <code>std::function</code> and the second builds an array of some <code>Accessor</code> pointers that imposes restrictions on moving and copying my object (because its address changes). I wonder if someone knows the right way to implement this.</p>\n\n<p><strong>EDIT1:</strong></p>\n\n<p>The following example probably clarifies what I mean:</p>\n\n<pre><code>Tuple t = std::make_tuple(1, 2, 3, 5.0 \"abc\");\nVariant v = Get(t, 1);\nassert(std::get&lt;int&gt;(v) == 2);\nSet(t, 5, Variant(\"xyz\"));\nassert(std::get&lt;5&gt;(t) == std::string(\"xyz\"));\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 2, "creation_date": 1561558998, "post_id": 56774997, "comment_id": 100105618, "body": "You can call <code>setText</code> on label, <code>label1-&gt;setText(QString(&quot;words: %1&quot;).arg(123));</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 1, "last_activity_date": 1561591229, "creation_date": 1561591229, "answer_id": 56782071, "question_id": 56774997, "link": "https://stackoverflow.com/questions/56774997/how-to-write-output-to-the-statusbar-next-to-specific-label-in-qt/56782071#56782071", "title": "How to write output to the statusBar next to specific label in Qt", "body": "<p>I haven't used the widget support in the QStatus bar, but do you need to do more than just format the string you're trying to display?</p>\n\n<pre><code>ui-&gt;statusBar-&gt;showMessage (\"words: %1 characters: %2\").arg (counter).arg (char_counter);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1151, "user_id": 736241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677762b49516998fbaf54c5d6d1dd202?s=128&d=identicon&r=PG", "display_name": "Dariusz Scharsig", "link": "https://stackoverflow.com/users/736241/dariusz-scharsig"}, "is_accepted": false, "score": 0, "last_activity_date": 1563797017, "last_edit_date": 1563797017, "creation_date": 1563796521, "answer_id": 57145535, "question_id": 56774997, "link": "https://stackoverflow.com/questions/56774997/how-to-write-output-to-the-statusbar-next-to-specific-label-in-qt/57145535#57145535", "title": "How to write output to the statusBar next to specific label in Qt", "body": "<p>You have some conceptual problems here.</p>\n\n<p>If you set a QWidget to be a permanent widget within the QStatusBar, it will usually show on the far right side of the statusbar. A temporary message (like the one you want to display using showMessage()) will never be shown above it. Usually that's not a problem, since the permanent widgets are shown on the far right side, and temporary messages are shown on the far left side.</p>\n\n<p>Here's the kicker, you added a stretch factor to your permanent label widget:</p>\n\n<pre><code>ui-&gt;statusBar-&gt;addPermanentWidget(ui-&gt;label1, 1);\n</code></pre>\n\n<p>I mean the \"<em>1</em>\" you used as a second parameter. Lose it. You don't need it. But you still won't be satisfied with your result, since it will look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/D2zzA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D2zzA.png\" alt=\"Screenshot1\"></a></p>\n\n<p>What you want is something like this, I assume:</p>\n\n<p><a href=\"https://i.stack.imgur.com/J7A4r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J7A4r.png\" alt=\"enter image description here\"></a></p>\n\n<p>You have several options to accomplish this:</p>\n\n<ol>\n<li>The counter is an own widget itself and is added permanently to the status bar like the \"Words:\" label after it.</li>\n<li>You display the counter as part of the words label, using QString::arg() for example.</li>\n<li>You create QLabel subclass that displays the static text followed by the counter with a nice setter method to change the word count. This is basically option #2 but a bit more luxurious.</li>\n</ol>\n\n<p>Probably there are more things you could do but those should get you on the right track.</p>\n\n<h2>Code examples</h2>\n\n<h3>1</h3>\n\n<p>In the <em>slot</em> that gets called each time the count changes you do this:</p>\n\n<pre><code>// Assuming that 'wordCount' contains the current word count:\nui-&gt;label1-&gt;setText( QString( \"Words: %1\" ).arg( wordCount );\n</code></pre>\n\n<h3>2</h3>\n\n<pre><code>// In your setup code:\nQLabel* wordsLabel = new QLabel( QString( \"Words:\" ) );\nm_wordCountLabel = new QLabel( QString::number( 0 ) ); // initial\n\nstatusBar()-&gt;addPermanentWidget( wordsLabel );\nstatusBar()-&gt;addPermanentWidget( m_wordCountLabel );\n\n// Inside your update word count slot:\nm_wordCountLabel-&gt;setText( QString::number( wordCount ) );\n</code></pre>\n\n<h3>3</h3>\n\n<pre><code>// In your setup code\nm_wordCountIndicator = new MyWordCountIndicator;\nstatusBar()-&gt;addPermanentWidget( m_wordCountIndicator );\n\n// Inside your update word count slot:\nm_wordCountIndicator-&gt;setWordCount( wordCount );\n</code></pre>\n\n<p>In this approach you could actually give your <strong>WordCountIndicator</strong>, which basically subclasses <em>QLabel</em> a Slot to change the text. Now you could directly connect it to a signal that gets emitted everytime the word count changes (if you have such a thing). As stated before, there are several approaches, each with its pros and cons.</p>\n\n<p>P.S.: I've notived you're \"abusing\" the UI file to create your label to display in the QStatusBar. That is somewhat bad practice. It still works, the moment you set the widget as a permanent widget in the status bar, it will be reparented to the QStatusBar instance. In your case I would humbly suggest creating your indicator labels directly in your code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8544907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563797017, "creation_date": 1561558703, "last_edit_date": 1563787153, "question_id": 56774997, "link": "https://stackoverflow.com/questions/56774997/how-to-write-output-to-the-statusbar-next-to-specific-label-in-qt", "title": "How to write output to the statusBar next to specific label in Qt", "body": "<p>I'm creating a notepad like application in Qt Creator and I want to have a text statistics written to the statusBar (fe. word, character count). In a form of <strong>\"words: 14 characters: 80\"</strong></p>\n\n<p>Currently I'm able to display the number of words as int with:</p>\n\n<pre><code>ui-&gt;statusBar-&gt;showMessage(QString::number(counter));\n</code></pre>\n\n<p>but when I wanted to add a label \"words:\" before the counter with:</p>\n\n<pre><code>ui-&gt;statusBar-&gt;addPermanentWidget(ui-&gt;label1, 1);\n</code></pre>\n\n<p>it ignores the counter and the label shows \"above\" it, hiding the counter.</p>\n\n<p>The goal is to have 4 kinds of counters in the statusBar.\nI'm currently looking for a widget that would allow me to print a static string like \"words: \" and a counter next to it.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-debugging"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561559043, "post_id": 56774891, "comment_id": 100105649, "body": "What question marks? I see none."}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561560053, "post_id": 56774891, "comment_id": 100106282, "body": "I mean, in the &quot;Memory&quot; debug window, I only see question marks where I expect some information."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1561561385, "post_id": 56774891, "comment_id": 100107171, "body": "If I remember right, dump window shows question marks if it is requested to dump contents of non-accessable addresses. (I mean addresses which are not part of associated memory range of process i.e. would cause access violation.)"}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 3, "last_activity_date": 1561571690, "creation_date": 1561571690, "answer_id": 56778563, "question_id": 56774891, "link": "https://stackoverflow.com/questions/56774891/visual-studios-memory-window-only-contains-question-marks/56778563#56778563", "title": "Visual studio&#39;s memory window only contains question marks", "body": "<p>You're doing postmortem debugging.  Generally, crash dumps don't capture all the memory in use by the process.  If you try to inspect memory that wasn't included in the dump, you'll see question marks.</p>\n\n<p>If you're doing live debugging, question marks mean the address isn't mapped into the process space.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 56778563, "answer_count": 1, "score": 0, "last_activity_date": 1561571690, "creation_date": 1561558365, "question_id": 56774891, "link": "https://stackoverflow.com/questions/56774891/visual-studios-memory-window-only-contains-question-marks", "title": "Visual studio&#39;s memory window only contains question marks", "body": "<p>I'm working on the crash dump of a standard C++ program.</p>\n\n<p>I'm having a problem with following piece of code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>_variant_t* pvarTemp;\npvarTemp = &lt;static_cast&gt;&lt;_variant_t*&gt; (pointer_array-&gt;GetAt(i));\nif (!pvarTemp) continue;\npvarTemp-&gt;Clear();\n</code></pre>\n\n<p>As I presume something's going wrong in memory, I decided to have a look at the memory window (menu \"Debug\", \"Windows\", \"Memory\", \"Memory 1\"), where I entered the memory address of <code>pvarTemp</code>, but I only saw some question marks.</p>\n\n<p>The crash dump itself is just a small crashdump, hereby <code>PYKD</code>'s <code>targetSystem().desc</code> result (in Windgb):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>0:049&gt; !py\nPython 2.7.10 (default, May 23 2015, 09:40:32) [MSC v.1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; print targetSystem().desc\nUser mini dump: C:\\Temp_Folder\\CRASH.DMP\n</code></pre>\n\n<p>My question is: what's the reason of the question marks?</p>\n\n<ol>\n<li>The reason for having the question marks also is the reason for the application to crash.</li>\n<li>As I'm working with a small crashdump, the memory addresses, mentioned in the dump, might not be trustworthy, so the question marks are normal behaviour.</li>\n</ol>\n\n<p>Which one of the two is correct?</p>\n"}, {"tags": ["c++", "constructor", "primitive-types", "default-constructor", "implicit-constructor"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1561558765, "post_id": 56774843, "comment_id": 100105455, "body": "You cannot detect type members automatically (i.e. you cannot iterate over the members of a type). Also you can use aggregate initialization to fully initialize types that contain uninitialized pods."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561559778, "post_id": 56774843, "comment_id": 100106119, "body": "You probably want to do it with static analyser, clang tooling might help."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1561560038, "post_id": 56774843, "comment_id": 100106268, "body": "@MaximEgorushkin just from a typename? Now I&#39;m curious."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1561562722, "post_id": 56774843, "comment_id": 100107935, "body": "@Timo It is possible to iterate over members of a class that supports aggregate initialization with <a href=\"https://github.com/apolukhin/magic_get\" rel=\"nofollow noreferrer\">github.com/apolukhin/magic_get</a> . Unfortunately, it chokes on <code>std::string</code> members. Otherwise it would be almost trivial to iterate over all members and tell whether any is POD."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1561569556, "post_id": 56774843, "comment_id": 100111301, "body": "@MaximEgorushkin wow that is genius. I get the idea behind it but I don&#39;t understand how the member counting works. And how can an aggregate initialization be performed (in order to receive the member types) without having to explicitly write it out for each possible member count (like <code>T{m1, m2, m3}</code>, <code>mX</code> beeing the detectors)?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1561569692, "post_id": 56774843, "comment_id": 100111365, "body": "@Timo See the author&#39;s talk with full details: <a href=\"https://youtu.be/UlNUNxLtBI0\" rel=\"nofollow noreferrer\">Better C++14 reflections - Antony Polukhin - Meeting C++ 2018</a>."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1561627337, "post_id": 56776501, "comment_id": 100129906, "body": "<code>-Wuninitialized</code> is included in <code>-Wall</code>. One should always start with <code>-Wall -Wextra -Werror</code>. +1"}, {"owner": {"reputation": 3, "user_id": 11703484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZGWdMG424c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regNviEXvRg7iwElWQQECjupIljiw/photo.jpg?sz=128", "display_name": "Eran Bentov", "link": "https://stackoverflow.com/users/11703484/eran-bentov"}, "edited": false, "score": 0, "creation_date": 1561881161, "post_id": 56776501, "comment_id": 100199189, "body": "Using -Wuninitialized, I don&#39;t get warnings for classes without a constructor that have POD members, and don&#39;t get warnings for constructors which don&#39;t initialize some of their POD members. Also, the IDE I&#39;m working with (eclipse) has warnings about constructors that don&#39;t init POD members, but doesn&#39;t have warnings about classes without constructors. Any ideas?"}, {"owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "reply_to_user": {"reputation": 3, "user_id": 11703484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZGWdMG424c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regNviEXvRg7iwElWQQECjupIljiw/photo.jpg?sz=128", "display_name": "Eran Bentov", "link": "https://stackoverflow.com/users/11703484/eran-bentov"}, "edited": false, "score": 0, "creation_date": 1561968895, "post_id": 56776501, "comment_id": 100216172, "body": "@EranBentov gcc 5.4.0 gives me warnings for uninitialised POD members of classes. Note that it gives that warning when the member is used, not when the constructor does not initialise it. There is no requirement that the constructor should initialise all its members. Which compiler and version are you using?"}, {"owner": {"reputation": 3, "user_id": 11703484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZGWdMG424c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regNviEXvRg7iwElWQQECjupIljiw/photo.jpg?sz=128", "display_name": "Eran Bentov", "link": "https://stackoverflow.com/users/11703484/eran-bentov"}, "edited": false, "score": 0, "creation_date": 1562153688, "post_id": 56776501, "comment_id": 100286943, "body": "I&#39;m using gcc 4.8.5"}, {"owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "reply_to_user": {"reputation": 3, "user_id": 11703484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZGWdMG424c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regNviEXvRg7iwElWQQECjupIljiw/photo.jpg?sz=128", "display_name": "Eran Bentov", "link": "https://stackoverflow.com/users/11703484/eran-bentov"}, "edited": false, "score": 0, "creation_date": 1562241986, "post_id": 56776501, "comment_id": 100322116, "body": "@EranBentov that is pretty old, from 2015. I would recommend using a newer gcc. Even my 5.4.0 is very old, but I am kinda stuck with it for now unfortunately. The most recent version is gcc 9.1. There have been many improvements in the warning and error messages, many things get much easier!"}], "tags": [], "owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "is_accepted": true, "score": 2, "last_activity_date": 1561563555, "creation_date": 1561563555, "answer_id": 56776501, "question_id": 56774843, "link": "https://stackoverflow.com/questions/56774843/how-can-i-detect-whether-a-class-has-an-implicit-constructor-and-primitive-membe/56776501#56776501", "title": "How can I detect whether a class has an implicit constructor AND primitive members in c++?", "body": "<p>Firstly, it seems to me like a broken design to expect from the user of a class to care about its member initialisation. You should make sure in the class itself that all its members are initialised, not somewhere else where it is used.</p>\n\n<p>What you are looking for does not exist, and if it would, it would not even help you. The existence of an explicit constructor does not guarantee that a data member is initialised. On the other hand, with C++11 it is even possible to initialise data members without explicitly writing a constructor (using the brace syntax in the class declaration). Also you just seem to care about uninitialised POD members, but what about uninitialised non-POD members?</p>\n\n<p>That said, compiler can generate warnings about uninitialised values, but often you have to enable this warning (e.g. -Wuninitialized option for gcc). Most compilers allow to force treating warnings as an error. In combination this can give you the desired effect even without specifically writing code to test for it, and it would also work for any uninitialised values, not only those in classes. Maybe this is the solution you are looking for.</p>\n"}], "owner": {"reputation": 3, "user_id": 11703484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZGWdMG424c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3regNviEXvRg7iwElWQQECjupIljiw/photo.jpg?sz=128", "display_name": "Eran Bentov", "link": "https://stackoverflow.com/users/11703484/eran-bentov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 56776501, "answer_count": 1, "score": 0, "last_activity_date": 1561563555, "creation_date": 1561558210, "question_id": 56774843, "link": "https://stackoverflow.com/questions/56774843/how-can-i-detect-whether-a-class-has-an-implicit-constructor-and-primitive-membe", "title": "How can I detect whether a class has an implicit constructor AND primitive members in c++?", "body": "<p>I want to detect during compile time (static assertion) whether a class meets both the following conditions:</p>\n\n<ul>\n<li>Has an implicit default constructor (i.e., no user-defined default constructor).</li>\n<li>Has at least one data member which is a pod (i.e., a member whose default initialization is to assume whatever random bytes was in its memory address).\n[I hope I used the term pod correctly here]</li>\n</ul>\n\n<p>The idea is to avoid working with objects with uninitialized members. I know there are different methods to do this during coding, but I also want a mechanism to detect this during compilation.\nI tried using different std/boost functions, such as is_trivially_constructible, is_pod, but none of these provide the exact terms I need.</p>\n\n<p>For example, let's say I have the following classes:</p>\n\n<pre><code>struct A\n{\n  int a;\n}\n\nstruct B\n{\n  int* b;\n}\n\nstruct C\n{\n  bool c;\n  std::string c_str_; \n}\n\nstruct D\n{\n  D();\n  float d; \n}\n\nstruct E\n{\n  std::string e;\n}\n</code></pre>\n\n<p>Assuming the function I need is called \"has_primitive_and_implicit_ctor\", I would like the output for each call to be as in the comments:</p>\n\n<pre><code>has_primitive_and_implicit_ctor&lt;A&gt;(); //true - A has at least one pod type member (int)\nhas_primitive_and_implicit_ctor&lt;B&gt;(); //true - A has at least one pod type member (pointer)\nhas_primitive_and_implicit_ctor&lt;C&gt;(); //true - A has at least one pod type member (bool), even though there is one non-pod member\nhas_primitive_and_implicit_ctor&lt;D&gt;(); //false - has a pod member(float), but a user defined ctor\nhas_primitive_and_implicit_ctor&lt;E&gt;(); //false - doesn't have a default ctor but has no pod members\n</code></pre>\n"}, {"tags": ["c++", "qt", "byte", "endianness"], "comments": [{"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1561558536, "post_id": 56774839, "comment_id": 100105296, "body": "<code>strlen</code> from <a href=\"https://en.cppreference.com/w/cpp/string/byte/strlen\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/strlen</a> : <i>Returns the length of the given byte string, that is, the number of characters in a character array whose first element is pointed to by str up to and <b>not including the first null character. The behavior is undefined if there is no null character in the character array pointed to by str.</b></i>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1561594107, "post_id": 56774839, "comment_id": 100119503, "body": "<a href=\"https://stackoverflow.com/q/33938611/995714\">Why does strlen() return strange result when array doesn&#39;t contain null terminator?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1561562932, "post_id": 56775236, "comment_id": 100108071, "body": "Except when there are no null values in the array, the behaviour is undefined, because <code>strlen</code> requires the input to be a null terminated array."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1561594028, "post_id": 56775236, "comment_id": 100119487, "body": "wrong. <code>char</code> is often a signed type and right shift on a signed type is often arithmetic shift, so shifting values between 128 and 255 will not produce 0 in that case"}, {"owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1561616315, "post_id": 56775236, "comment_id": 100124070, "body": "@phuclv I came to this conclusion after testing and debugging the code. So, it is not wrong."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1561616599, "post_id": 56775236, "comment_id": 100124183, "body": "debugging helps you know what happens in that specific case, not everything the standard allows. In this case you&#39;re lucky because xi &lt; 32768 so the result isn&#39;t negative"}, {"owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "edited": false, "score": 0, "creation_date": 1561617154, "post_id": 56775236, "comment_id": 100124414, "body": "@eeroika Yes, exactly. I forgot to mention about it, will modify the answer. Thanks for that."}, {"owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1561617521, "post_id": 56775236, "comment_id": 100124601, "body": "@phuclv I was talking about this specific case, but yes, it won&#39;t produce 0 when xi&gt;32768."}, {"owner": {"reputation": 1, "user_id": 11062756, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OjVHx0q5cdQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPA82hGKRr-lgXPNXxQj6qlgB-opw/mo/photo.jpg?sz=128", "display_name": "devHolz", "link": "https://stackoverflow.com/users/11062756/devholz"}, "edited": false, "score": 0, "creation_date": 1561622578, "post_id": 56775236, "comment_id": 100127194, "body": "@xeco Thank you for your answer. Can you suggest me a method to overcome this problem caused by the shift?"}], "tags": [], "owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "is_accepted": false, "score": 1, "last_activity_date": 1561617230, "last_edit_date": 1561617230, "creation_date": 1561559515, "answer_id": 56775236, "question_id": 56774839, "link": "https://stackoverflow.com/questions/56774839/how-to-use-low-byte-and-high-byte-of-int16-t-value/56775236#56775236", "title": "How to use low byte and high byte of int16_t value?", "body": "<p>The underlying issue is in the <code>command[2] = xi &gt;&gt; 8;</code> section.</p>\n\n<p>When you shift 8-bit right the 3rd element of the array, it becomes 0 as an <code>int</code>(null terminator). After that operation, <code>strlen</code> returns 2 because the 3rd element is a null terminator. Since after 256, shifting 8-bit right doesn't make the value 0, <code>strlen</code> works as expected. However, the behaviour is undefined, because <code>strlen</code> expects your string to be null terminated.</p>\n"}], "owner": {"reputation": 1, "user_id": 11062756, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OjVHx0q5cdQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPA82hGKRr-lgXPNXxQj6qlgB-opw/mo/photo.jpg?sz=128", "display_name": "devHolz", "link": "https://stackoverflow.com/users/11062756/devholz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "closed_date": 1561630851, "answer_count": 1, "score": -1, "last_activity_date": 1561626246, "creation_date": 1561558201, "last_edit_date": 1561626246, "question_id": 56774839, "link": "https://stackoverflow.com/questions/56774839/how-to-use-low-byte-and-high-byte-of-int16-t-value", "closed_reason": "Duplicate", "title": "How to use low byte and high byte of int16_t value?", "body": "<p>I use Qt serial to send a command through a serial port. The command contains a a signed 16 bit integer (xx) that can range from -4096 to 4096 with the high byte send first. The command is created as follows:</p>\n\n<pre><code>int16_t xi = 0;\n\nfor (int i=0; i&lt;280; i++){\n    xi = i;\n\n    // index =     0   1   2  3   4   5\n    // command = {'A','w','x','x','L','H'}\n    unsigned char command[6] = {'A','w','x','x','L','H'};\n\n    command[2] = xi &gt;&gt; 8;\n    command[3] = xi &amp; 0xFF;\n\n    int len = strlen((char*)command);\n    qDebug()&lt;&lt;\"strlen: \"&lt;&lt;len;\n}\n</code></pre>\n\n<p>The command works fine for all values except between 0 and 256. I don't understand why I get a string with a length of 2 for values between 0 and 256? What I'm doing wrong? Any help is appreciated.</p>\n\n<p><strong>Edit:</strong> How could I change <code>command[2] = xi &gt;&gt; 8;</code> (or some other part) to avoid truncation and to get the full command for all integers between -4096 and 4096?</p>\n"}, {"tags": ["c++", "vst", "adobe-premiere"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561560263, "post_id": 56774824, "comment_id": 100106421, "body": "I can perhaps test your plugin and check if it shows correct data as a plugin in my host. Does it work in Steinberg tools?"}, {"owner": {"reputation": 1, "user_id": 11703612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce3a6ec5e546316156d08f3568ccc2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rintern", "link": "https://stackoverflow.com/users/11703612/rintern"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561561016, "post_id": 56774824, "comment_id": 100106929, "body": "Well, I never heard of tools before so I quickly checked, and as I understand it allows plug-in to work with external hardware of different UR series ? Actually I don&#39;t plan to use the plug-in with anything except to visualize it in Premiere Pro. The plug-in doesn&#39;t do anything to the output, it just give some informations about the ambisonic sound. Well it doesn&#39;t at the moment but it is supposed to... It works with mono or stereo, it just doesn&#39;t with ambisonic"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561561091, "post_id": 56774824, "comment_id": 100106976, "body": "Do you bypass the sound correctly then?"}, {"owner": {"reputation": 1, "user_id": 11703612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce3a6ec5e546316156d08f3568ccc2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rintern", "link": "https://stackoverflow.com/users/11703612/rintern"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1561561213, "post_id": 56774824, "comment_id": 100107065, "body": "As well as the examples of the SDK"}], "owner": {"reputation": 1, "user_id": 11703612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce3a6ec5e546316156d08f3568ccc2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rintern", "link": "https://stackoverflow.com/users/11703612/rintern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561647793, "creation_date": 1561558152, "last_edit_date": 1561647793, "question_id": 56774824, "link": "https://stackoverflow.com/questions/56774824/how-vst-plug-ins-access-the-audio-of-premiere-pro", "title": "How VST plug-ins access the audio of premiere pro?", "body": "<p>I am currently developing a VST3 plug-in to improve my 360 video editing workflow in Premiere Pro. I started developing from the helloWorldWithGui example and the Again example of the VST sdk.\nThe plug-in is supposed to be an effect that I put on ambisonic audio, and that treat the different channels of this audio file. </p>\n\n<p>However I have a problem. When I want to get the number of channels of my adaptative audio (representing the ambisonic audio), my plug-in doesn't read the expected number of channels. </p>\n\n<p>I use the method plugProcessor::process (processData&amp; data) to process my audio as the sdk examples suggest, and I try to read the number of channels with data.inputs[0].numChannels. </p>\n\n<p>The result expected is 4 as I am working with adaptative audio of 4 channels in Premiere Pro. \nBut the result that I get is that there is only 1 channel.</p>\n\n<p>If I put the effect on a mono, a stereo or a 5.1 file in Premiere Pro, I get the good number being 1 for mono, 2 for stereo etc. But when I use my effect on an adaptative audio file with 4 channels (representing a 1st order ambisonic), the plug-in thinks that it corresponds to only 1 channel. \nI do need to have access to the 4 different channels of an ambisonic audio in order for my plug-in to work, so as the plug-in only identify 1 channel for the audio it is a problem. </p>\n\n<p>I am guessing the problem is specific to adaptative audio in Premiere, but I don't have any idea on how to resolve that problem. Do any of you have an idea ? Or is enough familiar with VST plug-ins to guess where I did a mistake ? </p>\n\n<p>I did a lot of test, on different files, with different plug-ins integrated in the VST sdk, and it really seems to be specific to adaptative audio in Premiere. Is it just that Premiere doesn't support VST3 plug-ins for adaptative audio ?</p>\n\n<p>Thanks a lot !!</p>\n\n<p>Edit : Problem solved. The problem was the busArrangements of the plug-in.</p>\n"}, {"tags": ["c++", "linux", "compiler-errors", "include", "raspbian"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1561564630, "post_id": 56774634, "comment_id": 100109014, "body": "Well, are you going to (1) state where you installed OpenNI, and (2) show your compile and link command with errors? Or are you going to keep us guessing?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7141599"}, "edited": false, "score": 0, "creation_date": 1561561884, "post_id": 56775477, "comment_id": 100107472, "body": "I tried that, but I get nothing when I do the  <i>find</i> command."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1561561985, "post_id": 56775477, "comment_id": 100107536, "body": "Maybe try with <code>-iname</code> instead of <code>-name</code>: it will ignore file case"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7141599"}, "edited": false, "score": 0, "creation_date": 1561649469, "post_id": 56775477, "comment_id": 100143406, "body": "I already managed to figure it out with your suggestions. I was missing some paths, so I added them and it worked. Thanks for your help. @Mathieu"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1561561958, "last_edit_date": 1561561958, "creation_date": 1561560281, "answer_id": 56775477, "question_id": 56774634, "link": "https://stackoverflow.com/questions/56774634/no-such-file-or-directory-when-i-try-to-include-openni-h/56775477#56775477", "title": "No such file or directory when I try to include OpenNI.h", "body": "<p>Your missing to tell your compiler where it can find the <code>OpenNI.h</code> file.</p>\n\n<p>Find where is <code>OpenNI.h</code> installed with:</p>\n\n<pre><code>find / -iname OpenNI.h 2&gt; /dev/null\n</code></pre>\n\n<p>Will gives you something like <code>/path/to/header/OpenNI.h</code></p>\n\n<p>Then add this path to your compilation instruction:</p>\n\n<pre><code>gcc -I/path/to/header -c file-using-open-ni.c \n</code></pre>\n\n<hr>\n\n<p>You will have the same problem on linking, do the same with file libOpenNI2.so</p>\n\n<pre><code>find / -iname OpenNI.h 2&gt; /dev/null\n</code></pre>\n\n<p>gives you <code>/path/to/library</code></p>\n\n<p>you can link with:</p>\n\n<pre><code>gcc file-using-open-ni.o  -L /path/to/library -lOpenNI2 \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7141599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561561958, "creation_date": 1561557590, "last_edit_date": 1561561263, "question_id": 56774634, "link": "https://stackoverflow.com/questions/56774634/no-such-file-or-directory-when-i-try-to-include-openni-h", "title": "No such file or directory when I try to include OpenNI.h", "body": "<p>I'm trying to compile a cpp file, but the compiler can't find the include directory. </p>\n\n<p>I get the error when I do:</p>\n\n<pre><code>#include &lt;OpenNI.h&gt;\n</code></pre>\n\n<p>I already installed OpenNI and its dependencies, and I'm working with a RaspberryPi 3, with the Raspbian OS.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "edited": false, "score": 3, "creation_date": 1561557665, "post_id": 56774589, "comment_id": 100104702, "body": "I think you need to show some code of the <i>specific</i> problem you have. Normally handles and pointers can be transfered through C# as <code>IntPtr</code>. Are you asking how to obtain the <code>FILE*</code> handle in the first place? Which method exactly do you want to use?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1561558380, "post_id": 56774589, "comment_id": 100105170, "body": "Just the same tool you already want to use, you&#39;ll have to pinvoke fopen() and fclose() to manage the FILE*.  If you have no idea what runtime library you need to use then talking to the library owner is always the best idea."}, {"owner": {"reputation": 53, "user_id": 11657285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fvqfJ.png?s=128&g=1", "display_name": "RookieCPP", "link": "https://stackoverflow.com/users/11657285/rookiecpp"}, "reply_to_user": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "edited": false, "score": 0, "creation_date": 1561558788, "post_id": 56774589, "comment_id": 100105473, "body": "@Ren&#233; Vogt , For example library libbde(<a href=\"https://github.com/libyal/libbde\" rel=\"nofollow noreferrer\">github.com/libyal/libbde</a>) provides .DLL library, which contains function:     LIBBDE_EXTERN     int libbde_notify_set_stream( FILE *stream, libbde_error_t **error ); How I can use the function in C#?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1561560727, "post_id": 56774589, "comment_id": 100106736, "body": "That function that takes a <code>FILE*</code> assumes the caller is using the exact same compiler that was used to create the DLL.  The internals of <code>FILE</code> will differ between compIlers, so I don&#39;t see how you&#39;re going to get around that fact using C#.  There needs to be an indirect way of calling that function  without explicitly using <code>FILE *</code>"}, {"owner": {"reputation": 53, "user_id": 11657285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fvqfJ.png?s=128&g=1", "display_name": "RookieCPP", "link": "https://stackoverflow.com/users/11657285/rookiecpp"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1561561012, "post_id": 56774589, "comment_id": 100106925, "body": "@PaulMcKenzie, agree, but may be exist .net tools to solve this problem or replace the type... :("}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1561561559, "post_id": 56774589, "comment_id": 100107272, "body": "Forget it.  Functions taking a FILE*, are designed to work only for C++ and C, and for the specific compiler /build options.  Again, unless you factor the usage of FILE out, you cannot reliably use C# for this."}], "owner": {"reputation": 53, "user_id": 11657285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fvqfJ.png?s=128&g=1", "display_name": "RookieCPP", "link": "https://stackoverflow.com/users/11657285/rookiecpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1561557462, "creation_date": 1561557462, "question_id": 56774589, "link": "https://stackoverflow.com/questions/56774589/c-and-c-library-file-type", "title": "C # and C ++ Library (FILE * Type)", "body": "<p>There is a project in C# and a library written in C++. In this library, the FILE * type is used in functions. If I import the library in C#, how can I use these functions? Are there any .NET tools to solve the problem?</p>\n"}, {"tags": ["c++", "if-statement", "arduino", "logic"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1561558389, "post_id": 56774537, "comment_id": 100105175, "body": "As I understand, <code>||</code> should be <code>&amp;&amp;</code>: <code>if ((leftPWM &lt; 240) || (rightPWM &lt; 240))</code> -&gt; <code>if ((leftPWM &lt; 240) &amp;&amp; (rightPWM &lt; 240))</code>"}, {"owner": {"reputation": 2494, "user_id": 963514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5407c3c95467f5ab674769618b37f496?s=128&d=identicon&r=PG", "display_name": "Systembolaget", "link": "https://stackoverflow.com/users/963514/systembolaget"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1561564682, "post_id": 56774537, "comment_id": 100109046, "body": "You provided the correct answer, much appreciated!"}], "owner": {"reputation": 2494, "user_id": 963514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5407c3c95467f5ab674769618b37f496?s=128&d=identicon&r=PG", "display_name": "Systembolaget", "link": "https://stackoverflow.com/users/963514/systembolaget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561557300, "creation_date": 1561557300, "question_id": 56774537, "link": "https://stackoverflow.com/questions/56774537/stop-variables-from-rolling-over-across-a-range-of-values-arduino-c-and-joyst", "title": "Stop variables from rolling over across a range of values (Arduino C++ and joystick)", "body": "<p>I am PWM-controlling two CC-PSUs that control one LED each (one warm CCT, one cold CCT) in a range from 16 to 240, using a joystick as user interface. When the light comes on or is switched off and then on again, the default PWM value for both is 128. The PWM generator is an Adafruit Metro Mini (Arduino), but it's rather a code logic issue here.</p>\n\n<p>What works with the code below is to blend between warm (left) and cold (right) <strong><em>or</em></strong> between bright (up) and dark (down), if the joystick is tilted strictly left/right (x) <strong><em>or</em></strong> strictly up/down (y). In those two cases, the PWM values don't roll over as per the if-statements, even if the joystick is kept tilted. It is acting like a \"+\"-shifter, if it were mechanically constrained. So far, so good.</p>\n\n<p>However, if one has, for example, tilted the joystick left for slightly warmer light (PWM 176/80) and then wants it brighter from there and tilts the joystick up (and keeps it tilted), the PWM values do not \"stop\" at 240/144 (they should). The same goes for any other quadrant.</p>\n\n<p>How would I have to enhance/change the if-statements to \"stop\" the PWM values from incrementing/decrementing as desired?</p>\n\n<p>I hope the PWM value matrix below visualises the problem better than I can explain it verbally.</p>\n\n<pre><code>void changeBrightness()\n{\n  if (lightOn)\n  {\n    readJoystick();\n    if (joyX &lt; triggerLow) // Joystick tilted left\n    {\n      if ((leftPWM &lt; 240) || (rightPWM &gt; 16))\n      {\n        leftPWM += deltaPWM;\n        rightPWM -= deltaPWM;\n        setPWM(leftPWM, rightPWM);\n      }\n    }\n    if (joyX &gt; triggerHigh) // Joystick tilted right\n    {\n      if ((leftPWM &gt; 16) || (rightPWM &lt; 240))\n      {\n        leftPWM -= deltaPWM;\n        rightPWM += deltaPWM;\n        setPWM(leftPWM, rightPWM);\n      }\n    }\n    if (joyY &gt; triggerHigh) // Joystick tilted up\n    {\n      if ((leftPWM &lt; 240) || (rightPWM &lt; 240))\n      {\n\n        leftPWM += deltaPWM;\n        rightPWM += deltaPWM;\n        setPWM(leftPWM, rightPWM);\n      }\n    }\n    if (joyY &lt; triggerLow) // Joystick tilted down\n    {\n      if ((leftPWM &gt; 16) || (rightPWM &gt; 16))\n      {\n        leftPWM -= deltaPWM;\n        rightPWM -= deltaPWM;\n        setPWM(leftPWM, rightPWM);\n      }\n    }\n  }\n  else\n  {\n    setPWM(0, 0); // Turn the light off\n  }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/7QgVm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7QgVm.png\" alt=\"PWM value matrix\"></a></p>\n"}, {"tags": ["c++", "list", "c++11", "mingw", "thread-local-storage"], "comments": [{"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 1, "creation_date": 1561557699, "post_id": 56774528, "comment_id": 100104728, "body": "Should be MinGW, cause every other compiler works fine for me"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1561558406, "post_id": 56774528, "comment_id": 100105193, "body": "Did you try printing the address of each <code>instance</code>? Your code seems correct in any case."}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561559696, "post_id": 56774528, "comment_id": 100106054, "body": "@MaxLanghof yes, every instance has different address"}], "answers": [{"comments": [{"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 0, "creation_date": 1561621183, "post_id": 56777429, "comment_id": 100126510, "body": "I tried it. static makes no difference in this case."}, {"owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "edited": false, "score": 3, "creation_date": 1561626616, "post_id": 56777429, "comment_id": 100129496, "body": "A quick search on mingw-w64&#39;s bugtrackers seems to confirm it&#39;s a compiler problem: <a href=\"https://sourceforge.net/p/mingw-w64/bugs/527/\" rel=\"nofollow noreferrer\">thread_local stl object&#39;s destructor causing crash</a> / <a href=\"https://sourceforge.net/p/mingw-w64/bugs/727/\" rel=\"nofollow noreferrer\">Crash during destruction of thread_local objects</a>"}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1561566898, "creation_date": 1561566898, "answer_id": 56777429, "question_id": 56774528, "link": "https://stackoverflow.com/questions/56774528/list-destructor-causing-crash-in-thread-local-singleton-class/56777429#56777429", "title": "List destructor causing crash in thread-local singleton class", "body": "<p>The only possible reason is the implementation of <code>thread_local</code> on your compiler. The local variable is not (implied) <code>static</code>. Try adding <code>static</code> to the (local) variable:</p>\n\n<pre><code>static thread_local tls_list_test instance;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577981584, "creation_date": 1577981584, "answer_id": 59566472, "question_id": 56774528, "link": "https://stackoverflow.com/questions/56774528/list-destructor-causing-crash-in-thread-local-singleton-class/59566472#59566472", "title": "List destructor causing crash in thread-local singleton class", "body": "<p>There was a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=91757\" rel=\"nofollow noreferrer\">bug</a> in all gcc versions prior to 8.4 in handling function local <code>thread_local</code>. </p>\n\n<p>Use a newer gcc version or use a class static or namespace scoped <code>thread_local</code> instead.</p>\n"}], "owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1577981584, "creation_date": 1561557265, "last_edit_date": 1577980983, "question_id": 56774528, "link": "https://stackoverflow.com/questions/56774528/list-destructor-causing-crash-in-thread-local-singleton-class", "title": "List destructor causing crash in thread-local singleton class", "body": "<p>I've tried to create thread-local singleton class with member of <code>std::list</code> type. During tests with multiple threads, I've encountered segfault caused by <code>std::list</code> destructor (more precisely, <code>_M_clear()</code> method invoked by destructor). It happens even without performing any operations on mentioned list.</p>\n\n<p>Any ideas, what can be problem here?</p>\n\n<p>Below is minimal example to repreduce this error:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;thread&gt;\n\nclass tls_list_test\n{\nprivate:\n    std::list&lt;int&gt; test_list;\n\n    tls_list_test() = default;\n\n    ~tls_list_test() = default;\n\npublic:\n    static tls_list_test&amp; get_instance()\n    {\n        thread_local tls_list_test instance;\n        return instance;\n    }\n};\n\nint main()\n{\n    std::list&lt;std::thread&gt; threads;\n\n    for (int i = 0; i &lt; 3; ++i)\n    {\n        std::thread thread([]()\n           {\n               auto&amp; instance = tls_list_test::get_instance();\n           });\n        threads.push_back(std::move(thread));\n    }\n\n    for (auto&amp; thread : threads)\n    {\n        thread.join();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Code in <code>std::list</code> causing segfault:</p>\n\n<pre><code>  template&lt;typename _Tp, typename _Alloc&gt;\n    void\n    _List_base&lt;_Tp, _Alloc&gt;::\n    _M_clear() _GLIBCXX_NOEXCEPT\n    {\n      typedef _List_node&lt;_Tp&gt;  _Node;\n      __detail::_List_node_base* __cur = _M_impl._M_node._M_next;\n      while (__cur != &amp;_M_impl._M_node)\n    {\n      _Node* __tmp = static_cast&lt;_Node*&gt;(__cur);\n      __cur = __tmp-&gt;_M_next; // &lt;- SEGFAULT on this line\n      _Tp* __val = __tmp-&gt;_M_valptr();\n#if __cplusplus &gt;= 201103L\n      _Node_alloc_traits::destroy(_M_get_Node_allocator(), __val);\n#else\n      _Tp_alloc_type(_M_get_Node_allocator()).destroy(__val);\n#endif\n      _M_put_node(__tmp);\n    }\n    }\n</code></pre>\n\n<p>GDB Variables:</p>\n\n<pre><code>Signal = SIGSEGV (Segmentation fault)\n__tmp = {std::__cxx11::_List_base&lt;int, std::allocator&gt;::_Node * | 0xfeeefeeefeeefeee} 0xfeeefeeefeeefeee\n__val = {int * | 0x2ee4448} 0x2ee4448\nthis = {std::__cxx11::_List_base&lt;int, std::allocator&gt; * const | 0x2ee5be8} 0x2ee5be8\n__cur = {std::__detail::_List_node_base * | 0xfeeefeeefeeefeee} 0xfeeefeeefeeefeee\n</code></pre>\n\n<p>G++ version:</p>\n\n<p><code>g++ (x86_64-posix-seh-rev0, Built by MinGW-W64 project) 8.1.0</code></p>\n"}, {"tags": ["c++", "templates", "containers"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1561557171, "post_id": 56774405, "comment_id": 100104395, "body": "<code>However, when you want to do the &#39;get&#39;, you need to have T as well for the base class.</code> That problem won&#39;t go away. If I say <code>person.get(...)</code> what type would the return value have? You may be interested in <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a>, but you need to figure out how this class should be used (<code>person.get&lt;int&gt;(...)</code>?) and how both you and the compiler can know what type <code>get</code> should return before thinking about the implementation. You might also find inspiration by looking for &quot;C++ heterogeneous container&quot; in your favorite search engine."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561557947, "post_id": 56774405, "comment_id": 100104886, "body": "In particular: <a href=\"https://www.boost.org/doc/libs/1_55_0/doc/html/variant/tutorial.html#variant.tutorial.advanced\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_55_0/doc/html/variant/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/251403/how-do-you-make-a-heterogeneous-boostmap\" title=\"how do you make a heterogeneous boostmap\">stackoverflow.com/questions/251403/&hellip;</a>, <a href=\"https://isocpp.org/wiki/faq/containers#heterogeneous-containers\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/containers#heterogeneous-containers</a>"}, {"owner": {"reputation": 191, "user_id": 5507357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893062d65d4942e4dd83cc63ab5f13e6?s=128&d=identicon&r=PG&f=1", "display_name": "Maaike", "link": "https://stackoverflow.com/users/5507357/maaike"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561559849, "post_id": 56774405, "comment_id": 100106165, "body": "Person does actually know about Animal and Plant, because it has member variables of this types. It would also be ok to add a shared pointer of these members to SomeClass. However, I don&#39;t know this on beforehand for all template parameters, some have 1 or more classes as members, some have none."}, {"owner": {"reputation": 191, "user_id": 5507357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893062d65d4942e4dd83cc63ab5f13e6?s=128&d=identicon&r=PG&f=1", "display_name": "Maaike", "link": "https://stackoverflow.com/users/5507357/maaike"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561562945, "post_id": 56774405, "comment_id": 100108077, "body": "Thank you for your comment and pointing me in a search direction. Next thing is I will try to make it work with boost::any and/or boost::variant. I hope that will do the trick. I know the types, so that should not be the problem."}, {"owner": {"reputation": 191, "user_id": 5507357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893062d65d4942e4dd83cc63ab5f13e6?s=128&d=identicon&r=PG&f=1", "display_name": "Maaike", "link": "https://stackoverflow.com/users/5507357/maaike"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561580803, "post_id": 56774405, "comment_id": 100115809, "body": "Or maybe a combination of variadic templates and tuple. Hmm..."}], "owner": {"reputation": 191, "user_id": 5507357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893062d65d4942e4dd83cc63ab5f13e6?s=128&d=identicon&r=PG&f=1", "display_name": "Maaike", "link": "https://stackoverflow.com/users/5507357/maaike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561556917, "creation_date": 1561556917, "question_id": 56774405, "link": "https://stackoverflow.com/questions/56774405/c-map-with-template-with-different-types", "title": "C++ Map with template with different types", "body": "<p>I am using Google Protobuf and I want to use the created classes in a 'base' class. I created a template for this, but I want to add references to other classes within it (which can be a reference to 1 class, or more classes). Example:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass SomeClass\n{\n    public:\n        std::shared_ptr&lt;T&gt; get(int id)\n        {\n            // Of course this contains more checks, but that is not important for the example.\n            items.find(id).second();\n        }\n\n        void add (std::shared_ptr&lt;T&gt; item)\n        {\n            items.emplace(item.id(), item)\n        }\n\n    private: \n        std::map&lt;int, T&gt; items;\n}\n</code></pre>\n\n<p>This works ok. But now I want to add a map or vector or whtvr with SomeClass items in it, but the T here is different every time. So I want to be able to do:</p>\n\n<pre><code>SomeClass&lt;Person&gt; person;\nSomeClass&lt;Animal&gt; animal;\nSomeClass&lt;Plant&gt; plant;\nperson.add(animal);\nperson.add(plant);\n</code></pre>\n\n<p>The add function should look something like this:</p>\n\n<pre><code>\nprivate: \n    std::vector&lt;SomeClass&lt;???&gt;&gt; someContainer;\n\npublic:\n    void add(SomeClass&lt;???&gt; item)\n    {\n        someContainer.push_back(item);\n    }\n</code></pre>\n\n<p>Maybe good to know: T is a google protobuf Message.</p>\n\n<p>I tried to add a class where SomeClass derives from. However, when you want to do the 'get', you need to have T as well for the base class. And then it starts over again.</p>\n\n<p>Is there a way to do this? </p>\n"}, {"tags": ["c++", "openssl", "des", "tripledes"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 8436917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yUuvQL44b4w/AAAAAAAAAAI/AAAAAAAAARU/wDx-W1CC1vk/photo.jpg?sz=128", "display_name": "Lucas Martins", "link": "https://stackoverflow.com/users/8436917/lucas-martins"}, "is_accepted": true, "score": 3, "last_activity_date": 1561574335, "creation_date": 1561574335, "answer_id": 56779180, "question_id": 56774274, "link": "https://stackoverflow.com/questions/56774274/openssl-3des-with-c/56779180#56779180", "title": "openssl 3des with c++", "body": "<p>3DES uses three keys. The python function you are using probably derives three keys from the key argument you pass, probably splitting it in three parts.</p>\n\n<p>To use the OpenSSL function, you have to generate 3 keys with 8 bytes each (or a 24 bytes key split in 3).</p>\n\n<p>I adapted the code I found <a href=\"http://www.firmcodes.com/triple-des-cbc-mode-encryption-example-c-programming-openssl/\" rel=\"nofollow noreferrer\">here</a> to use ECB instead of CBC. But, for security reasons, you should consider using CBC, or even AES encryption instead of 3DES.</p>\n\n<p>The example only shows how to use the <code>DES_ecb3_encrypt</code> function with hard coded keys. In a final solution, you have to generate your own keys, using a good RNG.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;openssl/des.h&gt;\n\n/* Triple DES key for Encryption and Decryption */\nDES_cblock Key1 = { 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11 };\nDES_cblock Key2 = { 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22 };\nDES_cblock Key3 = { 0x33, 0x33, 0x33, 0x33, 0x33, 0x33, 0x33, 0x33 };\nDES_key_schedule SchKey1,SchKey2,SchKey3;\n\n/* Print Encrypted and Decrypted data packets */\nvoid print_data(const char *tittle, const void* data, int len);\n\nint main()\n{\n    /* Input data to encrypt */\n    DES_cblock input_data = {0x01, 0x02, 0x03, 0x04, 0x05, 0x6, 0x7, 0x8};\n\n    /* Check for Weak key generation */\n    if ( -2 == (DES_set_key_checked(&amp;Key1, &amp;SchKey1) || DES_set_key_checked(&amp;Key2, &amp;SchKey2) || DES_set_key_checked(&amp;Key3, &amp;SchKey3)))\n    {\n        printf(\" Weak key ....\\n\");\n        return 1;\n    }\n\n    /* Buffers for Encryption and Decryption */\n    DES_cblock cipher;\n    DES_cblock text;\n\n    /* Triple-DES ECB Encryption */\n    DES_ecb3_encrypt(&amp;input_data, &amp;cipher, &amp;SchKey1, &amp;SchKey2, &amp;SchKey3, DES_ENCRYPT);\n\n    /* Triple-DES ECB Decryption */\n    DES_ecb3_encrypt(&amp;cipher, &amp;text, &amp;SchKey1, &amp;SchKey2, &amp;SchKey3, DES_DECRYPT);\n\n    /* Printing and Verifying */\n    print_data(\"\\n Original \", (const void*) input_data, sizeof(input_data));\n    print_data(\"\\n Encrypted\", (const void*) cipher, sizeof(input_data));\n    print_data(\"\\n Decrypted\", (const void*) text, sizeof(input_data));\n\n    return 0;\n}\nvoid print_data(const char *tittle, const void* data, int len)\n{\n    printf(\"%s : \",tittle);\n    const unsigned char * p = (const unsigned char*)data;\n    int i = 0;\n\n    for (; i&lt;len;++i)\n        printf(\"%02X \", *p++);\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p><a href=\"https://www.openssl.org/docs/man1.0.2/man3/DES_ecb3_encrypt.html\" rel=\"nofollow noreferrer\">OpenSSL reference</a>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void DES_ecb3_encrypt(const_DES_cblock *input, DES_cblock *output, \n        DES_key_schedule *ks1, DES_key_schedule *ks2, \n        DES_key_schedule *ks3, int enc);\n</code></pre>\n\n<blockquote>\n  <p>DES_ecb3_encrypt() encrypts/decrypts the input block by using three-key Triple-DES encryption in ECB mode. This involves encrypting the input with ks1, decrypting with the key schedule ks2, and then encrypting with ks3. This routine greatly reduces the chances of brute force breaking of DES and has the advantage of if ks1, ks2 and ks3 are the same, it is equivalent to just encryption using ECB mode and ks1 as the key.</p>\n</blockquote>\n"}], "owner": {"reputation": 3712, "user_id": 5565834, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/99g7k.jpg?s=128&g=1", "display_name": "Ammar Hussein", "link": "https://stackoverflow.com/users/5565834/ammar-hussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3291, "favorite_count": 0, "accepted_answer_id": 56779180, "answer_count": 1, "score": 3, "last_activity_date": 1561574335, "creation_date": 1561556485, "question_id": 56774274, "link": "https://stackoverflow.com/questions/56774274/openssl-3des-with-c", "title": "openssl 3des with c++", "body": "<p>I want to use the <code>openssl</code> library in <code>C++</code> to decrypt data.</p>\n\n<p>I have the key and IV and the encoded base64 string.</p>\n\n<p>I couldn't make it through the documentation, all decryption methods in the header file (<code>openssl/des.h</code>) take 3 keys.</p>\n\n<p>I've managed to achieve the result with the following python code.</p>\n\n<pre><code>from pyDes import *\nimport base64\n\nkey = base64.b64decode(\"****\")\niv = base64.b64decode(\"***\")\nenc = base64.b64decode(\"******\")\nencryptor = triple_des(key, CBC, iv)\nplain = encryptor.decrypt(enc)\nprint(plain.decode(\"utf-8\"))\n</code></pre>\n\n<p>I want to get the same result using C++ code and OpenSSL library.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1561556161, "post_id": 56774074, "comment_id": 100103721, "body": "If it were a function, it would be a lot easier for you to write the tests. Looking."}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1561556292, "post_id": 56774074, "comment_id": 100103805, "body": "Same happen in case of Function .... the problem is with output don&#39;t know i am right or Wrong .. but i also tried with function got the same error in output"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1561556296, "post_id": 56774074, "comment_id": 100103812, "body": "<code>for(int j=0;i&lt;s.size();j++)</code> -&gt; <code>for(int j=0;j&lt;s.size();j++)</code>. You are checking <code>i</code> instead of <code>j</code> in the termination criterion. Voting to close as typo. But this is something that you could&#39;ve found easily with <a href=\"https://godbolt.org/z/5m03WM\" rel=\"nofollow noreferrer\">some debugging</a> or even easier by stepping through your code in a debugger."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1561556419, "post_id": 56774074, "comment_id": 100103883, "body": "This doesn&#39;t produce the output you claim."}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "edited": false, "score": 0, "creation_date": 1561556476, "post_id": 56774074, "comment_id": 100103918, "body": "For Input: 2 2 5 Your Output is: 1 1  1 1 1 10 10   output is still incorrect ..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561556540, "post_id": 56774074, "comment_id": 100103957, "body": "Please edit your comments instead of adding new ones when you want to amend them. (You can do that for 5 minutes after posting them)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1561556576, "post_id": 56774074, "comment_id": 100103980, "body": "For clarification you should <a href=\"https://stackoverflow.com/posts/56774074/edit\">edit</a>  your question and not post tons of comments"}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "edited": false, "score": 0, "creation_date": 1561556624, "post_id": 56774074, "comment_id": 100104016, "body": "@ Kenny Ostrom ..its giving output but the output is incorrect and i tried my best to find the mistake in my implementation .. if you are able to detect then please correct the above Implementation"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1561556702, "post_id": 56774074, "comment_id": 100104058, "body": "I feel urge to flag this as duplicate of <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1561557142, "post_id": 56774074, "comment_id": 100104379, "body": "@Jabberwocky  . I already edited my Post i only want to know why my implementation is not producing correct output.. Even my Logic is correct .. Help me about their is something wrong with my logic or with y output"}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1561557148, "post_id": 56774074, "comment_id": 100104385, "body": "@Yksisarvinen ... I already edited my Post i only want to know why my implementation is not producing correct output.. Even my Logic is correct .. Help me about their is something wrong with my logic or with y output"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1561557388, "post_id": 56774074, "comment_id": 100104525, "body": "It would help a lot if you could describe what the program is supposed to do instead of making  people guess from an example."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1561557503, "post_id": 56774074, "comment_id": 100104599, "body": "<code>j&lt;s.size()</code> is not a very good condition when you&#39;re modifying <code>s</code> inside the loop..."}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1561557640, "post_id": 56774074, "comment_id": 100104686, "body": "@molbdnilo hey i edited my question. yes but both loops work separately regarding j&lt;s.size()"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1561557685, "post_id": 56774074, "comment_id": 100104713, "body": "Reread molbdnilo&#39;s last comment."}, {"owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1561557865, "post_id": 56774074, "comment_id": 100104840, "body": "@Kenny Ostrom if it&#39;s  creating the problem then then in output i supposed to segmentation Fault but it&#39;s Working Fine and See again my implementation popping loop is different and pushing loop is different .. i think it&#39;s the only advantage of Vector"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1561558348, "post_id": 56774074, "comment_id": 100105153, "body": "@sanjjeevdutt There are no situations where you are <i>supposed</i> to get a segmentation fault."}, {"owner": {"reputation": 745, "user_id": 3960947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14plP.png?s=128&g=1", "display_name": "G-Man Says &#39;Reinstate Monica&#39;", "link": "https://stackoverflow.com/users/3960947/g-man-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1561558924, "post_id": 56774074, "comment_id": 100105563, "body": "(1)\u202fPlease post code that compiles.\u2002 The code you posted is missing a <code>;</code> and a <code>}</code>.\u2003(2)\u202fPlease tell us what output you are getting.\u2002 Are you getting <b><i>no</b> output?</i>\u2002 You seem to be saying that your output is <code>Your Output is:</code> \u2014 is that what you\u2019re saying?\u2003(3)\u202fThe biggest problem in your code has been pointed out in a comment, above."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1561558767, "creation_date": 1561558767, "answer_id": 56775019, "question_id": 56774074, "link": "https://stackoverflow.com/questions/56774074/conversion-of-decimal-to-binary-number-with-all-the-test-cases/56775019#56775019", "title": "Conversion of Decimal to Binary number with all the test Cases", "body": "<p>The problem is here:</p>\n\n<pre><code>for(int j=0;j&lt;s.size();j++)\n{\n    cout&lt;&lt;s.top();\n    s.pop();\n}\n</code></pre>\n\n<p>Suppose <code>s</code> has four elements.<br>\nOn the first iteration, <code>j</code> is 0 and <code>s.size()</code> is 4.<br>\nOn the second, <code>j</code> is 1 and <code>s.size()</code> is 3.<br>\nOn the third, <code>j</code> is 2 and <code>s.size()</code> is 2, so the loop terminates.<br>\nThat's two iterations instead of four.</p>\n\n<p>Instead of counting the times you're going to pop, just pop until the stack is empty:</p>\n\n<pre><code>while (!s.empty())\n{\n    cout &lt;&lt; s.top();\n    s.pop();\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10988945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NVSuhHBw4UU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN3p2dlcnl40MVVM5X2S62ayIwNbg/mo/photo.jpg?sz=128", "display_name": "sanjjeev dutt", "link": "https://stackoverflow.com/users/10988945/sanjjeev-dutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 56775019, "answer_count": 1, "score": -2, "last_activity_date": 1561558767, "creation_date": 1561555873, "last_edit_date": 1561557517, "question_id": 56774074, "link": "https://stackoverflow.com/questions/56774074/conversion-of-decimal-to-binary-number-with-all-the-test-cases", "title": "Conversion of Decimal to Binary number with all the test Cases", "body": "<p>Here's my Implementation i take the number and put it into the stack by doing mathematical calculation ... but it's not producing correct output even my logic regarding the problem is correct ... \nPlease detect what is wrong in my implementation. It's competitive programming Question asked by two companies in my College . So, please help me to correct the implementation.... \n<strong>I only want to know what is wrong with my implementation .....</strong></p>\n\n<p><strong>Actual Question:\nInput:\nThe first line of input contains an integer T denoting the number of test cases. There will be a single line for each testcase which contains N.\nOutput:\nPrint all binary numbers with decimal values from 1 to N in a single line.\nConstraints:\n1 \u2264 T \u2264 106\n1 \u2264 N \u2264 106</strong></p>\n\n<p>Example:\nInput:\n2\n2\n5</p>\n\n<p>Output:\n1 10\n1 10 11 100 101</p>\n\n<p>Explanation:\nTestcase 1: Binary numbers from 1 to 2 are 1 and 10.</p>\n\n<p>This is the Required Output \nInput:\n2\n2\n5</p>\n\n<p>Output:\n1 10\n1 10 11 100 101</p>\n\n<p>And my output is :\nFor Input:\n1\n3\nYour Output is:</p>\n\n<p>Can any one here tell me the reason of incorrect output ..</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;stack&gt; \n#include &lt;queue&gt; \nusing namespace std;\nint main()\n{\n    int T ;\n    cin&gt;&gt;T;\n    while(T--)\n    {\n        int  n;\n        cin&gt;&gt;n;\n        for(int i=1;i&lt;=n;i++)\n        {   \n            stack &lt;int &gt; s;\n            int num=i;\n            while(num&gt;0)\n            {  \n                s.push(num%2);\n                num=num/2 ;\n            }\n            for(int j=0;j&lt;s.size();j++)\n            {\n                cout&lt;&lt;s.top();\n                s.pop();\n            }\n            cout&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\nreturn 0 \n</code></pre>\n\n<p>This is the Required Output </p>\n\n<pre><code>Input:\n2\n2\n5\n\nOutput:\n1 10\n1 10 11 100 101\n</code></pre>\n\n<p>And my output is :</p>\n\n<pre><code>For Input:\n1\n3\nYour Output is:\n</code></pre>\n\n<p>Can any one here tell me the reason of incorrect output ..</p>\n"}, {"tags": ["c++", "winapi", "ioctl", "virtual-disk"], "comments": [{"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1561620411, "post_id": 56774073, "comment_id": 100126109, "body": "Hi S\u0131dd\u0131k A&#231;\u0131l, I can reproduce this issue and find a workaround. Please check my answer to see if it helps."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1561621771, "post_id": 56774073, "comment_id": 100126779, "body": "Hi there, that one is a correct solution two. But, can you please add that defining layout_information_ex on heap is the way people do this generally? Since, there can be any number of partitions, instead of redefining it every time, allocating space for layout and extra partitions suffices."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1561622043, "post_id": 56774073, "comment_id": 100126918, "body": "Hi S\u0131dd\u0131k A&#231;\u0131l, I&#39;ll consult the related engineer to find out the best practice of this issue. For the heap solution you can share it as an answer."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "reply_to_user": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1561622247, "post_id": 56774073, "comment_id": 100127035, "body": "I added the solution to the question body. Looking forward to your update."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1561622337, "post_id": 56774073, "comment_id": 100127084, "body": "I&#39;ll update here if there is any progress."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1561685951, "post_id": 56774073, "comment_id": 100154727, "body": "I don&#39;t get it. I would expect writing the new partition table onto the disk with a WriteFile() on the handle."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "edited": false, "score": 0, "creation_date": 1561686886, "post_id": 56774073, "comment_id": 100154874, "body": "No. The IOCTL works just fine. There is not need to manipulate the partition table. The error was me creatimg this variable on stack which caused it to get 192 bytes. However, an extra partition holds 144 bytes of memory. So if you index second or third partition entry, you are overwritinf you own stack which causes a huge mess. The solution is to allocate a space of size = sizeof(layoutinfostruct) + (partition_count-1)* sizeof(partitioninfostruct). Then pass it onto the input of ioctl"}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1562814529, "post_id": 56774073, "comment_id": 100497784, "body": "@S\u0131dd\u0131kA&#231;\u0131l I update my answer and provide the suggested way for this issue. You can check it."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "edited": false, "score": 0, "creation_date": 1561606750, "post_id": 56783346, "comment_id": 100121529, "body": "This was my first though actually. But, this code messes up your stack probably. See the <a href=\"https://godbolt.org/z/p08ANv\" rel=\"nofollow noreferrer\">Compiler explorer link</a>. It nearly overwrites everything you have previously defined on your stack which in my case overwrites device handles and stuff as soon as I execute <code>testInfo.element[1] = element1</code>."}, {"owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "edited": false, "score": 0, "creation_date": 1561607834, "post_id": 56783346, "comment_id": 100121743, "body": "I finally allocated my layout struct on heap to save my variables on stack. And, ran into ERROR_ARITHMETIC_OVERFLOW exception possibly due to sum of partition lengths being larger than device capacity or I am missing something about MBR layout."}], "tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": false, "score": 0, "last_activity_date": 1562815374, "last_edit_date": 1562815374, "creation_date": 1561604839, "answer_id": 56783346, "question_id": 56774073, "link": "https://stackoverflow.com/questions/56774073/c-winapi-create-multiple-partitions-on-mounted-vhd/56783346#56783346", "title": "C++ WINAPI Create Multiple Partitions on Mounted VHD", "body": "<blockquote>\n  <p>It says in the documentation is that PartitionEntry is an array of\n  variable size(No, it is not it is an array of size 1.)</p>\n</blockquote>\n\n<p>\"Some Windows structures are variable-sized,\nbeginning with a fixed header, followed by\na variable-sized array. When these structures\nare declared,\nthey often declare an array of size 1 where the\nvariable-sized array should be.\" Refer to <a href=\"https://devblogs.microsoft.com/oldnewthing/?p=38043\" rel=\"nofollow noreferrer\">@Raymond blog</a>.</p>\n\n<p>Here <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winioctl/ns-winioctl-_drive_layout_information_ex\" rel=\"nofollow noreferrer\">DRIVE_LAYOUT_INFORMATION_EX structure</a> is an example:</p>\n\n<pre><code>typedef struct _DRIVE_LAYOUT_INFORMATION_EX {\n  DWORD                    PartitionStyle;\n  DWORD                    PartitionCount;\n  union {\n    DRIVE_LAYOUT_INFORMATION_MBR Mbr;\n    DRIVE_LAYOUT_INFORMATION_GPT Gpt;\n  } DUMMYUNIONNAME;\n  PARTITION_INFORMATION_EX PartitionEntry[1];\n} DRIVE_LAYOUT_INFORMATION_EX, *PDRIVE_LAYOUT_INFORMATION_EX;\n</code></pre>\n\n<p>With this declaration, you would allocate memory for one such\nvariable-sized DRIVE_LAYOUT_INFORMATION_EX structure like this:</p>\n\n<pre><code>PDRIVE_LAYOUT_INFORMATION_EX driver_layout_info = (PDRIVE_LAYOUT_INFORMATION_EX)malloc(FIELD_OFFSET(DRIVE_LAYOUT_INFORMATION_EX, PartitionEntry[NumberOfPartitions]));\n</code></pre>\n\n<p>You would initialize the structure like this (Use 2 partitions as example):</p>\n\n<pre><code>DWORD NumberOfPartitions = 2;\nLARGE_INTEGER partition_size;\npartition_size.QuadPart = 0xF00;\n\nPARTITION_INFORMATION_MBR mbr_info;\nmbr_info.BootIndicator = TRUE;\nmbr_info.HiddenSectors = 32256 / 512;\nmbr_info.PartitionType = PARTITION_FAT32;\nmbr_info.RecognizedPartition = TRUE;\n\nPDRIVE_LAYOUT_INFORMATION_EX driver_layout_info = (PDRIVE_LAYOUT_INFORMATION_EX)malloc(FIELD_OFFSET(DRIVE_LAYOUT_INFORMATION_EX, PartitionEntry[NumberOfPartitions]));\nfor (DWORD Index = 0; Index &lt; NumberOfPartitions ; Index++) {\n\n    driver_layout_info-&gt;PartitionEntry[Index].PartitionStyle = PARTITION_STYLE_MBR;\n    driver_layout_info-&gt;PartitionEntry[Index].PartitionNumber = Index + 1;\n    driver_layout_info-&gt;PartitionEntry[Index].RewritePartition = TRUE;\n    driver_layout_info-&gt;PartitionEntry[Index].PartitionLength.QuadPart = partition_size.QuadPart / 2 * 4096;\n    driver_layout_info-&gt;PartitionEntry[Index].Mbr = mbr_info;\n}\n\ndriver_layout_info-&gt;Mbr.Signature = sign;\ndriver_layout_info-&gt;PartitionCount = 1;\ndriver_layout_info-&gt;PartitionStyle = PARTITION_STYLE_MBR;\n\ndriver_layout_info-&gt;PartitionEntry[0].StartingOffset.QuadPart = 32256;\ndriver_layout_info-&gt;PartitionEntry[1].StartingOffset.QuadPart = 32256 + driver_layout_info-&gt;PartitionEntry-&gt;StartingOffset.QuadPart;\n\nDWORD driver_layout_ex_len = sizeof(DRIVE_LAYOUT_INFORMATION_EX) + sizeof(PARTITION_INFORMATION_EX);\n</code></pre>\n\n<p>Call <code>free(driver_layout_info);</code> after you use completely.</p>\n"}], "owner": {"reputation": 778, "user_id": 11666391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP4xeWwe3UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzodOndRLVZTTsHfxE4wYA-10kGw/mo/photo.jpg?sz=128", "display_name": "S\u0131dd\u0131k A&#231;\u0131l", "link": "https://stackoverflow.com/users/11666391/s%c4%b1dd%c4%b1k-a%c3%a7%c4%b1l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562815374, "creation_date": 1561555869, "last_edit_date": 1561684367, "question_id": 56774073, "link": "https://stackoverflow.com/questions/56774073/c-winapi-create-multiple-partitions-on-mounted-vhd", "title": "C++ WINAPI Create Multiple Partitions on Mounted VHD", "body": "<p>I managed to create a VHD and attached it. Afterwards, I created a disk(IOCTL CREATE_DISK) and set its layout using IOCTL_DISK_SET_DRIVE_LAYOUT_EX. Now, when I examine disk through Disk Management. I have a 14MB with a 7 MB partition, expectedly.</p>\n\n<pre><code>int sign = 80001;\nCREATE_DISK disk;\ndisk.Mbr.Signature = sign;\ndisk.PartitionStyle = PARTITION_STYLE_MBR;\n\nauto res = DeviceIoControl(device_handle, IOCTL_DISK_CREATE_DISK, &amp;disk, sizeof(disk), NULL, 0, NULL, NULL);\nres = DeviceIoControl(device_handle, IOCTL_DISK_UPDATE_PROPERTIES, 0, 0, NULL, 0, NULL, NULL);\n\nLARGE_INTEGER partition_size;\npartition_size.QuadPart = 0xF00;\nDWORD driver_layout_ex_len = sizeof(DRIVE_LAYOUT_INFORMATION_EX);\nDRIVE_LAYOUT_INFORMATION_EX driver_layout_info;\nmemset(&amp;driver_layout_info, 0, sizeof(DRIVE_LAYOUT_INFORMATION_EX));\n\ndriver_layout_info.Mbr.Signature = sign;\ndriver_layout_info.PartitionCount = 1;\ndriver_layout_info.PartitionStyle = PARTITION_STYLE_MBR;\n\nPARTITION_INFORMATION_EX part_info;\nPARTITION_INFORMATION_MBR mbr_info;\npart_info.StartingOffset.QuadPart = 32256;\npart_info.RewritePartition = TRUE;\npart_info.PartitionLength.QuadPart = partition_size.QuadPart/2 * 4096;\npart_info.PartitionNumber = 1;\npart_info.PartitionStyle = PARTITION_STYLE_MBR;\n\nmbr_info.BootIndicator = TRUE;\nmbr_info.HiddenSectors = 32256 / 512;\nmbr_info.PartitionType = PARTITION_FAT32;\nmbr_info.RecognizedPartition = 1;\npart_info.Mbr = mbr_info;\ndriver_layout_info.PartitionEntry[0] = part_info;\nauto res_layout = DeviceIoControl(device_handle, IOCTL_DISK_SET_DRIVE_LAYOUT_EX, &amp;driver_layout_info, sizeof(driver_layout_info), NULL, 0, NULL, NULL);\n</code></pre>\n\n<p>Now, how do I partitionize this disk into two partitions? I want to create another partition out of the unpartitioned part of the disk(the other half basically). It says in the documentation is that PartitionEntry is an array of variable size(No, it is not it is an array of size 1.) Do I call set layout IOCTL for every partition I want to create? If so, how do you go about that? Is multi-partitioning possible through WINAPI interface?</p>\n\n<p>P.S: I am aware that people usually invoke diskpart for this line of work. </p>\n\n<p>Edit:\nAdding second partition two layout was messing my stack up so I took another route (heap).</p>\n\n<pre><code>DWORD driver_layout_ex_len = sizeof(DRIVE_LAYOUT_INFORMATION_EX) + sizeof(PARTITION_INFORMATION_EX); // one layout+partition + partition\nPDRIVE_LAYOUT_INFORMATION_EX driver_layout_info = (PDRIVE_LAYOUT_INFORMATION_EX) std::calloc(1, driver_layout_ex_len);\n\ndriver_layout_info-&gt;Mbr.Signature = sign;\ndriver_layout_info-&gt;PartitionCount = 2;\ndriver_layout_info-&gt;PartitionStyle = PARTITION_STYLE_MBR;\n// omitted here..\nPARTITION_INFORMATION_EX part_info2;\npart_info2.StartingOffset.QuadPart = 32256 + part_info.PartitionLength.QuadPart;\npart_info2.RewritePartition = TRUE;\npart_info2.PartitionLength.QuadPart = partition_size.QuadPart / 2 * 4096;\npart_info2.PartitionNumber = 2;\npart_info2.PartitionStyle = PARTITION_STYLE_MBR;\n\npart_info2.Mbr = mbr_info;\n\n\ndriver_layout_info-&gt;PartitionEntry[0] = part_info;\ndriver_layout_info-&gt;PartitionEntry[1] = part_info2;\nauto res_layout = DeviceIoControl(device_handle, IOCTL_DISK_SET_DRIVE_LAYOUT_EX, driver_layout_info, driver_layout_ex_len, NULL, 0, NULL, NULL);\nauto res_err = GetLastError(); \n</code></pre>\n\n<p>Since it was overriding my <code>device_handle</code> I could not IOCTL at all. This improvement eliminated that. Do not forget to pass driver_layout_info instead of &amp;driver_layout_info after this change.</p>\n"}, {"tags": ["c++", "stl", "shared-memory", "multimap", "allocator"], "comments": [{"owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "edited": false, "score": 0, "creation_date": 1561555975, "post_id": 56773850, "comment_id": 100103592, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11373796/custom-memory-allocator-for-stl-map\" title=\"custom memory allocator for stl map\">stackoverflow.com/questions/11373796/&hellip;</a>"}, {"owner": {"reputation": 174, "user_id": 7864073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55335cd7a5d96cbb99bcea2206c7cd6a?s=128&d=identicon&r=PG&f=1", "display_name": "xeco", "link": "https://stackoverflow.com/users/7864073/xeco"}, "edited": false, "score": 4, "creation_date": 1561556021, "post_id": 56773850, "comment_id": 100103619, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11373796/custom-memory-allocator-for-stl-map\">Custom Memory Allocator for STL map</a>"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "is_accepted": false, "score": 0, "last_activity_date": 1561561140, "creation_date": 1561561140, "answer_id": 56775763, "question_id": 56773850, "link": "https://stackoverflow.com/questions/56773850/custom-allocator-for-stl-map-in-c/56775763#56775763", "title": "custom allocator for stl map in c++", "body": "<p>I will not give here any implementation, rather to give you some directions.\nIf your shared memory abstraction or region, for example start at adress void* shMemAddr and if you decide that your stl container to use shared memory,\nwhat needs to be done is to make container allocate memory starting at shMemAddr and further, until there is available memory to allocate in your shared pool. You can implement that using any allocation strategy, for example using malloc or placement new. Further, to be available for your container to use your allocator you need to provide your allocator as template argument, for multimap it would be multimap::allocator_type\nclass Alloc = allocator > as fourth template argument, after less as compare function,and, for example, if you store in your multimap pairs of int,double as key,value pairs, it would likely be something like this</p>\n\n<pre><code>multimap&lt;int,double,less&lt;int&gt;,CustomAlloc&lt;pair&lt;int,double&gt;&gt;&gt;\n</code></pre>\n\n<p>Now, your CustomAlloc allocator need to satisfies concept of Allocators which encapsulate specific lowlevel memory management, especially, if shared memory is resource to be allocate in, you need to arrange proper allocation of memory in a multithreaded enviornment. That means that, first, you need some structure for evidence of used memory. It can be some chained data structure, for example, and implementations like that is pretty common, so you need to keep invariants of that structure consistent. What that means is if your structure for book keeping of used(or free) memory need to be updated after succesfull allocation or deallocation it needs to be done atomicaly, so thread which possibly try to allocate memory see only structure in states before CustomAllocator allocation job is started or after allocation job is finished. For example, your first choice to do that could be using mutex to protect data, avoid races and keep invariants. This is just directions, and considering write your own allocators is not very hard, I hope this will help as good starting point. </p>\n"}], "owner": {"reputation": 1, "user_id": 11703424, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20V276lBFQc/AAAAAAAAAAI/AAAAAAAAAKA/EXBujmznMio/photo.jpg?sz=128", "display_name": "Bhagyashree Sahoo", "link": "https://stackoverflow.com/users/11703424/bhagyashree-sahoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561561140, "creation_date": 1561555308, "question_id": 56773850, "link": "https://stackoverflow.com/questions/56773850/custom-allocator-for-stl-map-in-c", "title": "custom allocator for stl map in c++", "body": "<p>I want to create a custom allocator for a multimap that will allocate the elements in shared memory.I came across boost.interprocess but found it quite complicated to implement.Is there any other workaround ?</p>\n"}, {"tags": ["c++", "qt", "memory-leaks", "qlist"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1561554695, "post_id": 56773619, "comment_id": 100102722, "body": "How did you find out you have a memory leak?"}, {"owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "edited": false, "score": 1, "creation_date": 1561554738, "post_id": 56773619, "comment_id": 100102751, "body": "Also, depending on your case, it might be a good idea to just give a <code>parent</code> to your <code>QPushButton</code>s"}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561554792, "post_id": 56773619, "comment_id": 100102783, "body": "@MaxLanghof as you see in my code , I pushed about <code>5000</code> pointers in the <code>qlist</code> and removed them immediately and I repeated it several times then I realize theres memory leak..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1561554872, "post_id": 56773619, "comment_id": 100102844, "body": "Again: How did you see the memory leak? Did you just see memory usage increasing? Or was there some actual tool that told you there were leaked allocations at program exit?"}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561554937, "post_id": 56773619, "comment_id": 100102900, "body": "@MaxLanghof I checked the memory usage increasing in windows task manager when I clear the list"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "edited": false, "score": 0, "creation_date": 1561554944, "post_id": 56773619, "comment_id": 100102905, "body": "if you set the parent like @ThomasKowalski mentioned there will memory will be reclaimed when the parent is freed. That may or may not be what you need depending on your situation. You may want  to store a shared pointer instead."}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 3, "creation_date": 1561555303, "post_id": 56773619, "comment_id": 100103138, "body": "Your test for the leak seems to be flawed. Just because the memory usage in the task manager doesn&#39;t go down immediately after you clear the list, doesn&#39;t mean there is a memory leak."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1561555530, "post_id": 56773619, "comment_id": 100103319, "body": "Releasing memory to the OS likely will not happen after a small delete. Remember that the OS gives your c++ process memory in pages (several KB) at a time not a few bytes at a time. This may help a little: <a href=\"https://blogs.msdn.microsoft.com/tims/2010/10/28/pdc10-mysteries-of-windows-memory-management-revealed-part-one/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/tims/2010/10/28/&hellip;</a>"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1561620596, "post_id": 56773619, "comment_id": 100126212, "body": "As QPushButton is a QObject derived, you should delete it with QObject::deleteLater() method. In your case, I will prefer QSharedPointer to store the QPushButton pointer."}], "owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1561563933, "creation_date": 1561554584, "question_id": 56773619, "link": "https://stackoverflow.com/questions/56773619/cannot-prevent-of-memory-leak-when-remove-qlist-items-with-qdeleteall", "title": "Cannot prevent of memory leak when remove QList items with qDeleteAll()", "body": "<p>I defined a <code>QList &lt;QPushButton*&gt;</code> and I want to assign this list to a <code>QTableWidget</code> later. But the main problem is just here that when I want to remove all the <code>QList</code> items, it give me memory leak event when use of <code>qDeleteAll()</code> :</p>\n\n<pre><code>// Add QPushButton* pointers to the QList\nfor (int i = 0; i &lt; 5000; i++)\n{\n    btnList.push_back(new QPushButton(\"delete\"));\n}\n</code></pre>\n\n<p>BTW, Except the first method to push pointers, Also I tried this :</p>\n\n<pre><code>// Add QPushButton* pointers to the QList with second approach\nfor (int i = 0; i &lt; 5000; i++)\n{\n    QPushButton *btn = new QPushButton(\"delete\");\n    btnList.push_back(btn);\n}\n</code></pre>\n\n<p>I tried with two approaches to <code>delete</code> QList pointers :</p>\n\n<ol>\n<li><p>Use of <code>takeAt</code> method to get the pointer and <code>delete</code> the pointer :</p>\n\n<pre><code>for (int i = 0; i &lt; 5000; i++)\n{\n    delete btnList.takeAt(0);\n}\nbtnList.clear();\n</code></pre></li>\n<li><p>Use of <code>qDeleteAll</code> then <code>clear</code> method :</p>\n\n<pre><code>// Delete all items\nqDeleteAll(btnList);\nbtnList.clear();\n</code></pre></li>\n</ol>\n\n<p>But The memory leak still exist. I used of <code>msvc2015</code> compiler on <em>Visual Studio</em></p>\n\n<p><a href=\"https://stackoverflow.com/questions/11555630/qlist-and-delete\">Also about my problem I found this link but it didnt help ed meThis link </a></p>\n"}, {"tags": ["c++", "macos", "gnu-make", "atom-editor", "header-files"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1561554749, "post_id": 56773326, "comment_id": 100102759, "body": "Does macos have the concept of <code>&#47;usr&#47;local&#47;include</code> like linux? <a href=\"https://www.linuxquestions.org/questions/linux-software-2/please-difference-between-usr-include-and-usr-local-include-818767/\" rel=\"nofollow noreferrer\">linuxquestions.org/questions/linux-software-2/&hellip;</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1561555115, "post_id": 56773326, "comment_id": 100103008, "body": "I guess this largely depends on what you&#39;re using to do the build.  CMake; VS; Makefile; commandline; xcode ...."}, {"owner": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "edited": false, "score": 0, "creation_date": 1561556703, "post_id": 56773326, "comment_id": 100104059, "body": "macos does have that concept. yes. Is it fine if I just add the folder of header files to that?"}, {"owner": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1561556869, "post_id": 56773326, "comment_id": 100104173, "body": "@UKMonkey, I use Makefile and commandline. If it helps, I also use Atom"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1561557599, "post_id": 56773326, "comment_id": 100104656, "body": "@AkileshKannan you want to update your question/tags with that"}, {"owner": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1561558444, "post_id": 56773326, "comment_id": 100105225, "body": "@UKMonkey I&#39;ve updated the tags!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "edited": false, "score": 0, "creation_date": 1561560318, "post_id": 56774754, "comment_id": 100106455, "body": "I&#39;ve edited my question. Sorry for the inconvenience!"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "edited": false, "score": 0, "creation_date": 1561560450, "post_id": 56774754, "comment_id": 100106547, "body": "@AkileshKannan there&#39;s some gcc comments too"}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1561560542, "last_edit_date": 1561560542, "creation_date": 1561557942, "answer_id": 56774754, "question_id": 56773326, "link": "https://stackoverflow.com/questions/56773326/how-do-i-add-user-downloaded-header-files-to-the-list-of-header-files-that-is-pr/56774754#56774754", "title": "How do I add user downloaded header files to the list of header files that is present by default in the system?", "body": "<p>Makefiles wrap other compilers;  Xcode uses clang; so I'm going to assume you're using that for now.</p>\n\n<p>You want to locate your rule for generating .o objects; and add (from <a href=\"https://clang.llvm.org/docs/CommandGuide/clang.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/CommandGuide/clang.html</a>) the argument \n<code>-I&lt;dir&gt;</code> as many times as required to add all your paths.</p>\n\n<p>gcc is basically the same args <a href=\"https://linux.die.net/man/1/g++\" rel=\"nofollow noreferrer\">https://linux.die.net/man/1/g++</a> ...<code>-Idir</code>  to impact &lt;> and \"\" lookups <code>-iquotedir</code> to impact \"\" lookups only; and then <code>-Ldir</code> to impact link paths</p>\n"}], "owner": {"reputation": 1, "user_id": 11513761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2958e5d8c3e1e89405860e5edaaba54?s=128&d=identicon&r=PG&f=1", "display_name": "Akilesh Kannan", "link": "https://stackoverflow.com/users/11513761/akilesh-kannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561560542, "creation_date": 1561553618, "last_edit_date": 1561560285, "question_id": 56773326, "link": "https://stackoverflow.com/questions/56773326/how-do-i-add-user-downloaded-header-files-to-the-list-of-header-files-that-is-pr", "title": "How do I add user downloaded header files to the list of header files that is present by default in the system?", "body": "<p>I have some header files (.h and .cpp files) which I downloaded from the internet. Want to add them to the list of header files that is already there in the system by default.</p>\n\n<p>I know that I can add them to the directory in which my code is present, which uses these header files. I've been doing that for most of my projects. But it is taking up a lot of unnecessary space.</p>\n\n<p>I want to know if there's any way in which I can make these header files, which I downloaded from the internet as standard header files like <code>stdlib.h</code>, <code>iostream</code> etc.</p>\n\n<p><strong>EDIT</strong>: What I want to exactly do is this: I have downloaded <a href=\"https://stanford.edu/~stepp/cppdoc/\" rel=\"nofollow noreferrer\">the stanford cpp library</a>, which has some very useful functions. I want to use them. But I don't want to copy and paste the include files in my project directory every time. Is there a way to make them as standard header files like <code>stdlib.h</code> or <code>iostream</code>? I use a Macbook. For code-editing, I use Atom. For running and compiling the program, I use the command-line -- <code>g++</code> is my compiler. I am familiar with Makefiles (GNU Make).  </p>\n"}, {"tags": ["c++", "qt", "qt5.9", "qtwebsockets"], "comments": [{"owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 1, "creation_date": 1561553680, "post_id": 56773258, "comment_id": 100102115, "body": "As the error says, remove the <code>&amp;</code> in front of <code>websocket</code> in the connect"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1561553727, "post_id": 56773258, "comment_id": 100102150, "body": "use <code>connect(webSocket, QOverload&lt;QAbstractSocket::SocketError&gt;::of(&amp;QWebSocket::err&zwnj;&#8203;or), this, &amp;CustomPritner::OnWebSocketError);</code>"}, {"owner": {"reputation": 63, "user_id": 4142559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-djiGuIqIrPs/AAAAAAAAAAI/AAAAAAAAABM/zY8ZKiAOmR0/photo.jpg?sz=128", "display_name": "ionut george soran", "link": "https://stackoverflow.com/users/4142559/ionut-george-soran"}, "edited": false, "score": 0, "creation_date": 1561554678, "post_id": 56773258, "comment_id": 100102710, "body": "I can&#39;t use &quot;this&quot; keyword in the main function context"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1561554894, "post_id": 56773258, "comment_id": 100102861, "body": "@ionutgeorgesoran then use <code>connect(webSocket, QOverload&lt;QAbstractSocket::SocketError&gt;::of(&amp;QWebSocket::err&zwnj;&#8203;or), cp, &amp;CustomPritner::OnWebSocketError);</code>"}, {"owner": {"reputation": 63, "user_id": 4142559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-djiGuIqIrPs/AAAAAAAAAAI/AAAAAAAAABM/zY8ZKiAOmR0/photo.jpg?sz=128", "display_name": "ionut george soran", "link": "https://stackoverflow.com/users/4142559/ionut-george-soran"}, "edited": false, "score": 0, "creation_date": 1561555313, "post_id": 56773258, "comment_id": 100103149, "body": "Yes, this is exactly what I needed thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "is_accepted": true, "score": 2, "last_activity_date": 1561554039, "creation_date": 1561554039, "answer_id": 56773437, "question_id": 56773258, "link": "https://stackoverflow.com/questions/56773258/why-cant-i-connect-qwebsocketerror-signal-to-a-lambda-or-any-other-slot-type/56773437#56773437", "title": "Why can&#39;t I connect QWebsocket::error SIGNAL to a lambda or any other SLOT type with identical signature? QT5.9", "body": "<p>When using the <code>SIGNAL</code> and <code>SLOT</code> macros you must not name the arguments, just their types.</p>\n\n<p>This is wrong:</p>\n\n<pre><code>QObject::connect(websocket, SIGNAL(error(QAbstractSocket::SocketError error)),cp, SLOT(OnWebSocketError(QAbstractSocket::SocketError error)));\n</code></pre>\n\n<p>This is correct:</p>\n\n<pre><code>QObject::connect(websocket, SIGNAL(error(QAbstractSocket::SocketError)),cp, SLOT(OnWebSocketError(QAbstractSocket::SocketError)));\n</code></pre>\n\n<p>Also it's best to not use the macros but the new syntax accepting function pointers, this way it does some compile time checks.</p>\n\n<pre><code>QObject::connect(websocket, &amp;QWebSocket::error, cp, &amp;CustomPritner::OnWebSocketError);\n</code></pre>\n\n<p>Remember that you must always use <code>QObject*</code> as arguments otherwise it won't compile.</p>\n"}], "owner": {"reputation": 63, "user_id": 4142559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-djiGuIqIrPs/AAAAAAAAAAI/AAAAAAAAABM/zY8ZKiAOmR0/photo.jpg?sz=128", "display_name": "ionut george soran", "link": "https://stackoverflow.com/users/4142559/ionut-george-soran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "closed_date": 1561554262, "accepted_answer_id": 56773437, "answer_count": 1, "score": 2, "last_activity_date": 1561554039, "creation_date": 1561553403, "question_id": 56773258, "link": "https://stackoverflow.com/questions/56773258/why-cant-i-connect-qwebsocketerror-signal-to-a-lambda-or-any-other-slot-type", "closed_reason": "Duplicate", "title": "Why can&#39;t I connect QWebsocket::error SIGNAL to a lambda or any other SLOT type with identical signature? QT5.9", "body": "<p>I'm trying to build a simple program that implements a QWebSocket, however, what I first tried to do is check if the connection is enabled. It didn't throw any exception since I never connected the error signal but I could check on my cloud server if any connection attempt had been made and saw that a connection never happened. So I tried to implement the error signal to see what the cause of the problem is, but I can't seem to make the signal connect to my printing function. I mean I always get a compile time error. If someone has any idea on how I should approach this, please say it!</p>\n\n<p>I've tried like this also. I don't get any compile time errors however I get this runtime error:</p>\n\n<pre><code>QObject::connect(websocket, SIGNAL(error(QAbstractSocket::SocketError error)),cp, SLOT(OnWebSocketError(QAbstractSocket::SocketError error)));\n</code></pre>\n\n<p>Below are 3 images to illustrate the problem:</p>\n\n<p>Main file:\n<img src=\"https://i.imgur.com/jieWGpG.jpg\" alt=\"image 1\"></p>\n\n<p>The error message:\n<img src=\"https://i.imgur.com/sywq9bb.jpg\" alt=\"image 2\"></p>\n\n<p>CustomPrinter class:\n<img src=\"https://i.imgur.com/8D8BoHs.png\" alt=\"image 3\"></p>\n\n<p>Also ignote the \"qDebug()&lt;&lt;\"\"&lt;error();\" line it's commented now.</p>\n\n<p>THis is the error I'm getting\"</p>\n\n<pre><code>QObject::connect: No such signal QWebSocket::error(QAbstractSocket::SocketError error) in ../Websocket1/main.cpp:14\"\n</code></pre>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1561553547, "post_id": 56773234, "comment_id": 100102041, "body": "<code>std::vector&lt;std::vector&lt;float&gt;&gt;</code>... should it be <code>std::vector&lt;Point3D&gt;</code> or <code>std::vector&lt;std::array&lt;float, 3&gt;&gt;</code>. It would take less memory and indirection."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1561553717, "post_id": 56773234, "comment_id": 100102140, "body": "If you have 3D points, don&#39;t use a (dynamically sized) <code>std::vector</code> to represent the points.  (Your first loop does <code>data.size()</code> memory allocations, and your points are not necessarily located together.) Use a struct or a tuple or a <code>std::array</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1561553827, "post_id": 56773234, "comment_id": 100102209, "body": "<a href=\"https://en.wikipedia.org/wiki/Sweep_line_algorithm\" rel=\"nofollow noreferrer\">Sweep_line_algorithm</a> might help."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561554786, "post_id": 56773234, "comment_id": 100102780, "body": "Why is <code>i</code> an <code>unsigned long int</code> while <code>j</code> is a (signed) <code>long int</code>?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1561555446, "post_id": 56773234, "comment_id": 100103257, "body": "This problem is to broad. Optimizations for particles interacting by gravity is quite complex problem. Sweep line algorithm is not very helpful here. For example split space into a buckets. For each bucket calculate center of mass and mass of particle in it. Now each particle interacts with particles in same and neighbor buckets and interaction with other particles are counted using mas and place of other buckets. This should speed up things a lot without loosing to much of a precision (if parameters are properly provided). Strategy for selecting buckets is also complex problem."}, {"owner": {"reputation": 2457, "user_id": 467858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6b92556de1237a88d764e56d993b04e?s=128&d=identicon&r=PG", "display_name": "LiMar", "link": "https://stackoverflow.com/users/467858/limar"}, "edited": false, "score": 1, "creation_date": 1561565098, "post_id": 56773234, "comment_id": 100109279, "body": "profiling shows that big performance penalty is paid for push_back operations... Even commenting out the loop with indices[i].push_back(i) gives significant time saving. I&#39;m wondering if working with memory mapped file or other external cache would help."}], "owner": {"reputation": 154, "user_id": 4854204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XLfNG.jpg?s=128&g=1", "display_name": "abolfazl taghribi", "link": "https://stackoverflow.com/users/4854204/abolfazl-taghribi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1561553465, "creation_date": 1561553305, "last_edit_date": 1561553465, "question_id": 56773234, "link": "https://stackoverflow.com/questions/56773234/fast-rangesearch-implementation-in-c", "title": "Fast rangesearch implementation in C++", "body": "<p>I'm going to implement the same function as rangesearch in matlab. The problem is the data is really big(6.7million 3D points). I read <a href=\"https://stackoverflow.com/questions/19253405/pairwise-distance-calculation-in-c\">Pairwise Distance Calculation in c++</a> and improve my code but it is not fast enough yet. Since computing distance matrix is Ram consuming for this amount of data it is not applicable. I put my code here. Let me know if there is a way to make it faster.I'm not sure does parallelization helps here or not. The data is sorted on 1st dimension and I want to make sure that for every point the first neighbour is the point itself.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;long int&gt;&gt; rangesearch(std::vector&lt;std::vector&lt;float&gt;&gt; &amp;data, float radius) {\n    float distmat = 0;\n    float xdist = 0;\n    std::vector&lt;std::vector&lt;long int&gt;&gt; indices(data.size());\n\n    //This make sure that the first neighbour of each point is itself.\n    for (unsigned long int i = 0; i &lt; data.size(); i++) {\n        indices[i].push_back(i);\n    }\n\n    // instead of computing sqrt() of distance, compute the 2nd power of radius once and compare it again and again which is faster\n    radius = std::pow(radius, 2);\n\n    for (unsigned long int i = 0; i &lt; data.size(); i++) {\n        for (long int j = i + 1; j &lt; data.size(); j++) {\n\n            xdist = std::pow(data[i][0] - data[j][0], 2);\n            distmat = xdist + std::pow(data[i][1] - data[j][1], 2) + std::pow(data[i][2] - data[j][2], 2);\n\n            if (distmat &lt;= radius) {\n                indices[i].push_back(j);\n                indices[j].push_back(i);\n            }\n\n            //This is just to make the preprocessing faster. Data should be sorted based on X cordinates.\n            //Then if the distance for x cordinate is bigger than radius it means that it will be even bigger\n            // for the rest of the point so there is no need to check all of them and skip the rest!\n            if (xdist &gt; radius)\n                break;\n        }\n    }\n    return indices;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "unordered-map", "initializer-list", "unordered-set"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1561553002, "post_id": 56773086, "comment_id": 100101710, "body": "Maybe you should use a <code>const</code> reference, instead"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1561553247, "creation_date": 1561553247, "answer_id": 56773219, "question_id": 56773086, "link": "https://stackoverflow.com/questions/56773086/how-to-initialize-unordered-mapstring-unordered-setstring-members-using-ini/56773219#56773219", "title": "How to initialize unordered_map&lt;string, unordered_set&lt;string&gt;&gt; members using initializer list?", "body": "<p>Temporary cannot bind to non-const (lvalue) reference.</p>\n\n<p>You might change constructor to</p>\n\n<pre><code>A(const unordered_map&lt;string, unordered_set&lt;string&gt;&gt;&amp; n) : n_{n} {}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>A(unordered_map&lt;string, unordered_set&lt;string&gt;&gt;&amp;&amp; n) : n_{std::move(n)} {}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>A(unordered_map&lt;string, unordered_set&lt;string&gt;&gt; n) : n_{std::move(n)} {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 7, "last_activity_date": 1561557299, "last_edit_date": 1561557299, "creation_date": 1561553337, "answer_id": 56773240, "question_id": 56773086, "link": "https://stackoverflow.com/questions/56773086/how-to-initialize-unordered-mapstring-unordered-setstring-members-using-ini/56773240#56773240", "title": "How to initialize unordered_map&lt;string, unordered_set&lt;string&gt;&gt; members using initializer list?", "body": "<p>You need to add one more <code>{}</code> for it. And note that temporary can't be bound to lvalue-reference to non-const. (They could be bound to lvalue-references to const or rvalue-references.) e.g.</p>\n\n<pre><code>class A {\n    unordered_map&lt;string, unordered_set&lt;string&gt;&gt; n_;\n  public:\n    A(const unordered_map&lt;string, unordered_set&lt;string&gt;&gt;&amp; n) : n_{n} {}\n    //^^^^^\n};\n\nint main() {\n    A a{{{\"C\", {\"A\", \"B\"}}}};\n    //          ^^^  ^^^     elements of unordered_set\n    //         ^^^^^^^^^^    for the unordered_set\n    //   ^^^^^^^^^^^^^^^^^   elements (std::pair) of unordered_map (only one here)\n    //  ^^^^^^^^^^^^^^^^^^^  for the unordered_map\n    // ^^^^^^^^^^^^^^^^^^^^^ for A\n\n    return 0;\n}\n</code></pre>\n\n<p>I guess you might miss the <code>{}</code> for the elements (<code>std::pair</code>) of the <code>unordered_map</code>; in a similar fashion, if you want to make the <code>unordered_map</code> containing two elements, you can write it as</p>\n\n<pre><code>A b{{{\"C\", {\"A\", \"B\"}}, {\"F\", {\"D\", \"E\"}}}};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/0WD3IqNB2R7NUwVg\" rel=\"nofollow noreferrer\">LIVE</a></p>\n"}, {"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": false, "score": 4, "last_activity_date": 1561568149, "last_edit_date": 1561568149, "creation_date": 1561553506, "answer_id": 56773289, "question_id": 56773086, "link": "https://stackoverflow.com/questions/56773086/how-to-initialize-unordered-mapstring-unordered-setstring-members-using-ini/56773289#56773289", "title": "How to initialize unordered_map&lt;string, unordered_set&lt;string&gt;&gt; members using initializer list?", "body": "<blockquote>\n  <p>I want to be able to use the constructor with that syntax</p>\n</blockquote>\n\n<p>You can provide an <em><a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">std::initializer_list</a></em> constructor to do the job</p>\n\n<pre><code>#include &lt;initializer_list&gt;\n\nclass A\n{\n    using MapType = std::unordered_map&lt;std::string, std::unordered_set&lt;std::string&gt;&gt;;\n    MapType n_;\npublic:\n    A(std::initializer_list&lt;MapType::value_type&gt; n) : n_{ n } {}\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ \n};\n</code></pre>\n\n<p>which has the advantage that <strong>list initialization does not require an extra pair of <code>{}</code></strong>. \nFor example maps with two entries:</p>\n\n<pre><code>A a{\n    {\"C\", {\"A\", \"B\"}},\n    {\"D\", {\"E\", \"F\"}},\n}; // do not require extra braces now!\n</code></pre>\n\n<h2>(<a href=\"https://wandbox.org/permlink/I6np9EyrsZaeWw5l\" rel=\"nofollow noreferrer\">See Live</a>)</h2>\n"}, {"tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 3, "last_activity_date": 1561553512, "creation_date": 1561553512, "answer_id": 56773290, "question_id": 56773086, "link": "https://stackoverflow.com/questions/56773086/how-to-initialize-unordered-mapstring-unordered-setstring-members-using-ini/56773290#56773290", "title": "How to initialize unordered_map&lt;string, unordered_set&lt;string&gt;&gt; members using initializer list?", "body": "<p>On top of Jarod's (correct) answer, you are missing one set of curly braces:</p>\n\n<pre><code>int main() {\n    A a{{{\"C\", {\"A\", \"B\"}}}};\n    return 0;\n}\n</code></pre>\n\n<p>From the innermost ones:</p>\n\n<p>You need to initialize <code>std::unordered_set</code>:</p>\n\n<pre><code>{\"A\", \"B\"}\n</code></pre>\n\n<p>Use that set in instance of <code>std::pair</code></p>\n\n<pre><code>{\"C\", {\"A\", \"B\"}}\n</code></pre>\n\n<p>Use that pair to initialize <code>std::unordered_map</code>:</p>\n\n<pre><code>{{\"C\", {\"A\", \"B\"}}}\n</code></pre>\n\n<p>Use that map to initialize an object of <code>A</code>:</p>\n\n<pre><code>A a{{{\"C\", {\"A\", \"B\"}}}};\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 5451105, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d770b80f020b374829aafe06bff62e40?s=128&d=identicon&r=PG&f=1", "display_name": "Mano Mini", "link": "https://stackoverflow.com/users/5451105/mano-mini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 56773240, "answer_count": 4, "score": 3, "last_activity_date": 1561568149, "creation_date": 1561552850, "last_edit_date": 1561567993, "question_id": 56773086, "link": "https://stackoverflow.com/questions/56773086/how-to-initialize-unordered-mapstring-unordered-setstring-members-using-ini", "title": "How to initialize unordered_map&lt;string, unordered_set&lt;string&gt;&gt; members using initializer list?", "body": "<p>I have this class</p>\n\n<pre><code>class A {\n    unordered_map&lt;string, unordered_set&lt;string&gt;&gt; n_;\n  public:\n    A(unordered_map&lt;string, unordered_set&lt;string&gt;&gt;&amp; n) : n_{n} {}\n};\n</code></pre>\n\n<p>And I want to be able to use the constructor with that syntax</p>\n\n<pre><code>int main() {\n    A a{{\"C\", {\"A\", \"B\"}}};\n    return 0;\n}\n</code></pre>\n\n<p>But in the way it's written now, I'm getting error</p>\n\n<pre><code>error: no matching function for call to `\u2018A::A(&lt;brace-enclosed initializer list&gt;)\u2019 A a{{\"C\", {\"A\", \"B\"}}};`\n</code></pre>\n\n<p>How can it be fixed?</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1561552926, "post_id": 56773053, "comment_id": 100101651, "body": "The contents of your <code>.build.sh</code> would be instrumental in forming an answer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1561562651, "post_id": 56773053, "comment_id": 100107891, "body": "What you have posted is/are not error messages.  rather they are bits and pieces of what would be output.  Please copy/paste the actual output into your question"}], "owner": {"reputation": 83, "user_id": 8745586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f0ae5bd1dfe81800529736fdd0e10b?s=128&d=identicon&r=PG", "display_name": "Shiva", "link": "https://stackoverflow.com/users/8745586/shiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561552736, "creation_date": 1561552736, "question_id": 56773053, "link": "https://stackoverflow.com/questions/56773053/getting-an-error-while-running-build-sh-file-in-cross-compiler-dir", "title": "getting an error while running .build.sh file in cross compiler dir", "body": "<p>Here is my console log while running .build.sh command in crosscompiler dir.</p>\n\n<p>version of gcc, g++ and clang is here.</p>\n\n<p>bnr@AM-PC-07:~/osxcross$ gcc --version\ngcc (Ubuntu 8.3.0-6ubuntu1~18.04.1) 8.3.0\nCopyright (C) 2018 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n\n<p>bnr@AM-PC-07:~/osxcross$ clang --version\nclang version 6.0.0-1ubuntu2 (tags/RELEASE_600/final)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\nInstalledDir: /usr/bin\nbnr@AM-PC-07:~/osxcross$ g++ --version\ng++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n\n<p>Here is my error log</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.10/Modules/CMakeTestCXXCompiler.cmake:45 (message):\nThe C++ compiler\n\n\"/usr/bin/clang++\"\n\nis not able to compile a simple test program.\n\nIt fails with the following output:\n\nChange Dir: /home/bnr/osxcross/build/apple-libtapi/build/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_5f536/fast\"\n/usr/bin/make -f CMakeFiles/cmTC_5f536.dir/build.make CMakeFiles/cmTC_5f536.dir/build\n</code></pre>\n"}, {"tags": ["c++", "tensorflow", "protocol-buffers", "tensor"], "comments": [{"owner": {"reputation": 302, "user_id": 8860943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1df6f91b2c54cf7e8c9141057ced2456?s=128&d=identicon&r=PG&f=1", "display_name": "GinoC", "link": "https://stackoverflow.com/users/8860943/ginoc"}, "edited": false, "score": 0, "creation_date": 1592519252, "post_id": 56772722, "comment_id": 110463303, "body": "Same here. Did you find a solution? Thx"}, {"owner": {"reputation": 343, "user_id": 4526565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aLKy_6eIZy0/AAAAAAAAAAI/AAAAAAAAACw/u40lUtWv1Yg/photo.jpg?sz=128", "display_name": "Yousif H", "link": "https://stackoverflow.com/users/4526565/yousif-h"}, "reply_to_user": {"reputation": 302, "user_id": 8860943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1df6f91b2c54cf7e8c9141057ced2456?s=128&d=identicon&r=PG&f=1", "display_name": "GinoC", "link": "https://stackoverflow.com/users/8860943/ginoc"}, "edited": false, "score": 0, "creation_date": 1592667541, "post_id": 56772722, "comment_id": 110509583, "body": "I can\u2019t really recall right now, but I guess it was a problem with versions incompatibility. Try to build and execute everything inside nvidia-docker to avoid running into problems with the system environment. Once I\u2019m back from vacation and you still face this problem, I\u2019ll try to post a solution for this question."}], "owner": {"reputation": 343, "user_id": 4526565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aLKy_6eIZy0/AAAAAAAAAAI/AAAAAAAAACw/u40lUtWv1Yg/photo.jpg?sz=128", "display_name": "Yousif H", "link": "https://stackoverflow.com/users/4526565/yousif-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1561551720, "creation_date": 1561551720, "question_id": 56772722, "link": "https://stackoverflow.com/questions/56772722/libprotobuf-error-when-accessing-the-output-tensor-in-tensorflow-c-api", "title": "libprotobuf ERROR when accessing the output tensor in Tensorflow C++ API", "body": "<p>I'm using tensorflow C++ API for inference. I was able to build a standalone tensorflow library, loading the optimized graph, and feeding an image.</p>\n\n<p>I'm able to print the tensor using the following code:</p>\n\n<pre><code>    // run the image through the model.\n    std::vector&lt;Tensor&gt; outputs;\n    Status run_status = session-&gt;Run({{input_layer, resized_tensor}}, {output_layer}, {}, &amp;outputs);\n    if (!run_status.ok()) {\n        LOG(ERROR) &lt;&lt; \"Running model failed: \" &lt;&lt; run_status;\n        return -1;\n    }\n\n      std::cout &lt;&lt; outputs[0].DebugString() &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>and then I get the following output:</p>\n\n<pre><code>Tensor&lt;type: float shape: [1,480,720,3] values: [[[58.4225044 79.0690613 94.4875641]]]...&gt;\n</code></pre>\n\n<p>but after adding this line:</p>\n\n<pre><code>cv::Mat rotMatrix(outputs[0].dim_size(1), outputs[0].dim_size(2), CV_32FC1, outputs[0].flat&lt;float&gt;().data());\n</code></pre>\n\n<p>or this line:</p>\n\n<pre><code>float *p = outputs[0].flat&lt;float&gt;().data();\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>2019-06-26 14:19:29.040705: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\n[libprotobuf ERROR external/com_google_protobuf/src/google/protobuf/descriptor_database.cc:118] File already exists in database: google/protobuf/any.proto\n[libprotobuf FATAL external/com_google_protobuf/src/google/protobuf/descriptor.cc:1367] CHECK failed: GeneratedDatabase()-&gt;Add(encoded_file_descriptor, size): \nterminate called after throwing an instance of 'google::protobuf::FatalException'\n  what():  CHECK failed: GeneratedDatabase()-&gt;Add(encoded_file_descriptor, size): \nAborted (core dumped)\n</code></pre>\n\n<p>I tried it using bazel, qmake, and cmake and built protocol buffer again from source but without any help.. </p>\n"}, {"tags": ["c++", "bitwise-not"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1561551591, "post_id": 56772643, "comment_id": 100100746, "body": "The <code>~</code> operator simply inverts all bits of the operand."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1561551614, "post_id": 56772643, "comment_id": 100100763, "body": "<code>~</code> flips all the bits. In two&#39;s complement, <code>-1</code> is when all the bits are set. So when you flip all the bits, all the bits are reset, which gives you <code>0</code>. This is the cast to <code>false</code> for your <code>for</code> loop."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1561551642, "post_id": 56772643, "comment_id": 100100775, "body": "@StoryTeller: The answer to this question is not found <i>anywhere</i> on that page."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561551650, "post_id": 56772643, "comment_id": 100100781, "body": "Also two answers in the comments section. Sigh."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1561551689, "post_id": 56772643, "comment_id": 100100803, "body": "@Blaze: Not if <code>i</code> is unsigned."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1561551703, "post_id": 56772643, "comment_id": 100100817, "body": "This is an obfuscated way to write the test <code>i != -1</code> in a very implementation dependent way."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1561551739, "post_id": 56772643, "comment_id": 100100844, "body": "Is this part of an exercise? Nobody should ever write code like this in real world programs."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561551749, "post_id": 56772643, "comment_id": 100100853, "body": "@LightnessRacesinOrbit - So you hypothesize <code>~</code> is not explained on that page at all? Interesting."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1561552102, "post_id": 56772643, "comment_id": 100101085, "body": "Before C++20, they are not portably equivalent since some platforms may have 1s complement <code>int</code> (although I&#39;m not aware of such a platform which supports modern C++).  C++20 requires <code>int</code> to be 2s complement, so now they are equivalent."}, {"owner": {"reputation": 73, "user_id": 11703096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7cb40d9ca94009e481b3a0ba871c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Hossam Kamil", "link": "https://stackoverflow.com/users/11703096/hossam-kamil"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1561552133, "post_id": 56772643, "comment_id": 100101110, "body": "@Jabberwocky In competitive programming, you will see more than that."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1561552609, "post_id": 56772643, "comment_id": 100101431, "body": "@HossamKamil Aren&#39;t optimisers allowed in competitive programming?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1561554146, "post_id": 56772643, "comment_id": 100102408, "body": "I guess it helps in <a href=\"https://codegolf.stackexchange.com/\">code golf</a>..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1561555477, "post_id": 56772643, "comment_id": 100103279, "body": "@StoryTeller None of it talks about != -1 or whether the two are equivalent."}], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 3, "creation_date": 1561551933, "post_id": 56772752, "comment_id": 100100957, "body": "You should mention that the integer representation is implementation dependent... There are no guarantees <code>-1</code> is represented with all bits set to 1."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1561552020, "post_id": 56772752, "comment_id": 100101027, "body": "It&#39;s represented like that in a 2&#39;s complement system. C++ (still) supports other number representations (though those aren&#39;t common anymore). I suggest you expand on that point a bit."}], "tags": [], "owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "is_accepted": false, "score": 5, "last_activity_date": 1561551839, "creation_date": 1561551839, "answer_id": 56772752, "question_id": 56772643, "link": "https://stackoverflow.com/questions/56772643/is-i-really-equivalent-to-i-1/56772752#56772752", "title": "Is ~i really equivalent to i != -1?", "body": "<p><code>~i</code> is bitwise NOT operator. I.e. it inverts every bit in <code>i</code>.\n-1 is represented binary as every bit of number being set to 1, inverting every bit to 0 gets you 0. And when checking integer in place where <code>bool</code> is expected 0 is treated as <code>false</code> and any other number as <code>true</code>.</p>\n\n<p>So, in this particular case yes, <code>~i</code> is equivalent with <code>i != -1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561555689, "post_id": 56772846, "comment_id": 100103424, "body": "N.B. <a href=\"https://stackoverflow.com/a/56589637/560648\">stackoverflow.com/a/56589637/560648</a> Different operation I know but almost certainly the same applies. That is, guaranteed as-if-it-were-two&#39;s-complement from C++20, and pretty-much-implied-to-be-required-anyway before that"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561556049, "post_id": 56772846, "comment_id": 100103637, "body": "@LightnessRacesinOrbit What do you mean by &quot;pretty-much-implied-to-be-required-anyway&quot;? There&#39;s no requirement for operations to behave as-if-it-were-two&#39;s-complement other than operations on fixed width integers until C++20."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561557060, "post_id": 56772846, "comment_id": 100104320, "body": "Please click on the link provided"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561558202, "post_id": 56772846, "comment_id": 100105050, "body": "@LightnessRacesinOrbit Can you be more specific. I cannot find the part that explains it. Except for the quote from <code>[basic.fundamental]</code>, which has the wording from C++20 that doesn&#39;t apply to pre C++20."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561559075, "post_id": 56772846, "comment_id": 100105672, "body": "There are two large paragraphs explaining the C++11 behaviour. You can find them beginning with the text &quot;In C++11, &quot;"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561559168, "post_id": 56772846, "comment_id": 100105737, "body": "@LightnessRacesinOrbit And which part of it explains &quot;pretty-much-implied-to-be-required-as-if-it-were-two&#39;s-comp&zwnj;&#8203;lement&quot;?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561561757, "post_id": 56772846, "comment_id": 100107395, "body": "The part that gives the definition of how signed integers were required to work?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561561968, "post_id": 56772846, "comment_id": 100107524, "body": "@LightnessRacesinOrbit The one that applies equally well to most signed number representations that I know of, rather than only to 2&#39;s complement?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 14, "last_activity_date": 1561552436, "last_edit_date": 1561552436, "creation_date": 1561552125, "answer_id": 56772846, "question_id": 56772643, "link": "https://stackoverflow.com/questions/56772643/is-i-really-equivalent-to-i-1/56772846#56772846", "title": "Is ~i really equivalent to i != -1?", "body": "<p><code>~</code> is the bitwise NOT operator. <code>~i</code> is 0 if and only if <code>i</code> has 1 in all its bits. Whether -1 has all bits 1 depends on how signed numbers are represented on the system. In two's complement representation, -1 is represented with all bits 1, so on such systems <code>~(-1) == 0</code>. Neither in one's complement, nor in sign-and-magnitude does that hold true.</p>\n\n<p>Therefore, the answer is no; not on all systems. That said, two's complement is fairly ubiquitous in modern machines (everything made since the 90's), and on such systems, the answer is yes. Regardless of the sign representation however, <code>i != -1</code> is much more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "is_accepted": false, "score": 0, "last_activity_date": 1561553715, "creation_date": 1561553715, "answer_id": 56773350, "question_id": 56772643, "link": "https://stackoverflow.com/questions/56772643/is-i-really-equivalent-to-i-1/56773350#56773350", "title": "Is ~i really equivalent to i != -1?", "body": "<p>Because your i variable from for loop is of type int, which is defined as signed integer, and as such in twos complement, its binary representation of value -1 is all bits set, what means all bits are 1. On other side, bitwise negation of all ones is all zeros, and that is what you need, loop to execute until i>=0 or i!=-1, since you decrementing i. In that context of bitwise operations on sign values on system has twos complement binary representation of int, yes, it is the same.</p>\n"}], "owner": {"reputation": 73, "user_id": 11703096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7cb40d9ca94009e481b3a0ba871c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Hossam Kamil", "link": "https://stackoverflow.com/users/11703096/hossam-kamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 56772846, "answer_count": 3, "score": 7, "last_activity_date": 1561553715, "creation_date": 1561551483, "last_edit_date": 1561552258, "question_id": 56772643, "link": "https://stackoverflow.com/questions/56772643/is-i-really-equivalent-to-i-1", "title": "Is ~i really equivalent to i != -1?", "body": "<p>How does <code>~i</code> work in C++? </p>\n\n<p>I just noticed it is equivalent to <code>i != -1</code>, but I'm not certain about that. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int arr[3] {1, 2, 3};\nint n = 3;\nfor (int i = n - 1; ~i; i--) {\n    cout &lt;&lt; arr[i] &lt;&lt; ' ';\n}\n</code></pre>\n\n<p>It printed the array in reverse.</p>\n"}, {"tags": ["c++", "language-lawyer", "template-specialization", "template-argument-deduction", "function-templates"], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1561553082, "post_id": 56773052, "comment_id": 100101757, "body": "Thanks for the clarification. I am not a native speaker and these subtleties sometimes still make problems to me."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1561553137, "post_id": 56773052, "comment_id": 100101797, "body": "@DanielLangr oh yeah me too, I know the feeling - it sucks :("}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 3, "last_activity_date": 1561552734, "creation_date": 1561552734, "answer_id": 56773052, "question_id": 56772479, "link": "https://stackoverflow.com/questions/56772479/is-deduction-of-multiple-template-arguments-in-an-explicit-specialization-of-a-f/56773052#56773052", "title": "Is deduction of multiple template arguments in an explicit specialization of a function template allowed?", "body": "<p>The \"a\" at the start refers to <em>any</em> not to <em>one</em>.</p>\n\n<blockquote>\n  <p>A[ny] trailing <em>template-argument</em> can be left unspecified in the <em>template-id</em> naming an explicit function template specialization provided it can be deduced from the function argument type.</p>\n</blockquote>\n\n<p>Here's a sentence that I just made up:</p>\n\n<blockquote>\n  <p>A function parameter's type <em>T</em> is adjusted to <em>const T</em> before prior analysis.</p>\n</blockquote>\n\n<p>This doesn't mean that only one of the many parameters is adjusted, but every one of them; if any, since it could also be that there are no parameters.</p>\n\n<p>The \"a\" refers in a more general sense to any one thing.</p>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1561553045, "post_id": 56773081, "comment_id": 100101733, "body": "Thanks for the clarification. I am not a native speaker and these subtleties sometimes still make problems to me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1561553469, "post_id": 56773081, "comment_id": 100101996, "body": "@DanielLangr No worries.  I&#39;m a native speaker and it still gives me trouble from time to time.  English is wacky."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1561553408, "last_edit_date": 1561553408, "creation_date": 1561552823, "answer_id": 56773081, "question_id": 56772479, "link": "https://stackoverflow.com/questions/56772479/is-deduction-of-multiple-template-arguments-in-an-explicit-specialization-of-a-f/56773081#56773081", "title": "Is deduction of multiple template arguments in an explicit specialization of a function template allowed?", "body": "<p>The quote does not indicate only a single parameter can be left off.</p>\n\n<blockquote>\n  <p>A trailing template-argument can be left unspecified in the template-id naming an explicit function template specialization provided it can be deduced from the function argument type.</p>\n</blockquote>\n\n<p>Means that a(any) parameter is allowed to be left off if it can be deduced.  So in</p>\n\n<pre><code>template&lt;&gt;\nvoid f(int, double*) { }\n</code></pre>\n\n<p>We don't need to specifiy <code>T1</code> because it can be deduced from <code>int</code>, and we don't need to specify <code>T2</code> because it can be deducedfrom <code>double*</code>.</p>\n\n<p>If the standard only allowed a single parameter to not  be specified it would word it like</p>\n\n<blockquote>\n  <p>A single trailing template-argument can be left unspecified in the template-id naming an explicit function template specialization provided it can be deduced from the function argument type.</p>\n</blockquote>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56773052, "answer_count": 2, "score": 2, "last_activity_date": 1561553408, "creation_date": 1561550963, "question_id": 56772479, "link": "https://stackoverflow.com/questions/56772479/is-deduction-of-multiple-template-arguments-in-an-explicit-specialization-of-a-f", "title": "Is deduction of multiple template arguments in an explicit specialization of a function template allowed?", "body": "<p>The following quote from <a href=\"http://eel.is/c++draft/temp.expl.spec#11\" rel=\"nofollow noreferrer\">[temp.expl.spec.11]</a>:</p>\n\n<blockquote>\n  <p><strong>A trailing <em>template-argument</em></strong> can be left unspecified in the <em>template-id</em> naming an explicit function template specialization provided <strong>it</strong> can be deduced from the function argument type. </p>\n</blockquote>\n\n<p>indicates that only a <strong>single</strong> trailing template argument may be deduced. Which would make the following exemplary code incorrect:</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nvoid f(T1, T2*);  \n\ntemplate&lt;&gt;\nvoid f(int, double*) { }\n\nint main()\n{\n    auto d = 2.0;\n    f(1, &amp;d);\n}\n</code></pre>\n\n<p>However, the code compiles fine with GCC and Clang. Do these compilers apply some non-standard language extension, or is the deduction supported for <strong>multiple trailing arguments</strong>?</p>\n\n<p>If the latter is true, why the sentence is not formed as follows?</p>\n\n<blockquote>\n  <p><strong>Trailing <em>template-arguments</em></strong> can be left unspecified in the <em>template-id</em> naming an explicit function template specialization provided <strong>they</strong> can be deduced from the function argument type<strong>s</strong>. </p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1561550883, "post_id": 56772422, "comment_id": 100100307, "body": "It&#39;s a floating point literal. <a href=\"https://en.cppreference.com/w/cpp/language/floating_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/floating_literal</a> More specifically, in documentation, it&#39;s (2) without the optional exponent and suffix."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1561551273, "post_id": 56772422, "comment_id": 100100545, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division\">What is the behavior of integer division?</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1561551539, "post_id": 56772422, "comment_id": 100100710, "body": "What <code>&amp;</code> before <code>maxdist</code> are you talking about? Why and where do you expect the <code>&amp;</code> to be??"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1561553376, "post_id": 56772422, "comment_id": 100101942, "body": "Is this one of those &quot;online&quot; judge tests?  If so, some advice on the type of questions -- if the question <b>requires</b> you to give floating point results -- <b>don&#39;t take the test and waste your time</b>.  The reason is that floating point is not exact -- the answer you give may not match perfectly with the answer the &quot;judge&quot; is looking for.  Your particular problem probably doesn&#39;t require any floating point calculations anyway."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1561554204, "post_id": 56772422, "comment_id": 100102443, "body": "Off topic but... please also see <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">&quot;Why should I not #include &lt;bits/stdc++.h&gt;? &quot;</a> and <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">&quot;Why is \u201cusing namespace std;\u201d considered bad practice? &quot;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 11702997, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eEc1TaqXDp8/AAAAAAAAAAI/AAAAAAAADFM/XyFPSVJAYiM/photo.jpg?sz=128", "display_name": "Varun Gokhale", "link": "https://stackoverflow.com/users/11702997/varun-gokhale"}, "is_accepted": false, "score": 0, "last_activity_date": 1561565145, "creation_date": 1561565145, "answer_id": 56776996, "question_id": 56772422, "link": "https://stackoverflow.com/questions/56772422/what-does-the-dot-mean-in-the-printf-function/56776996#56776996", "title": "What does the dot mean in the printf function", "body": "<p>\"%.10f\" - means floating value of the variable upto 10 decimal places and \".\" means the decimal point after which any number followed by f will decide how many decimal places the answer would go.</p>\n"}], "owner": {"reputation": 1, "user_id": 11451154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785fb8e7ec15556b9b6eabd69b544060?s=128&d=identicon&r=PG&f=1", "display_name": "Yerkebulan", "link": "https://stackoverflow.com/users/11451154/yerkebulan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561565145, "creation_date": 1561550755, "last_edit_date": 1561551371, "question_id": 56772422, "link": "https://stackoverflow.com/questions/56772422/what-does-the-dot-mean-in-the-printf-function", "title": "What does the dot mean in the printf function", "body": "<p>I'm solving this problem:</p>\n\n<blockquote>\n  <p>Vanya walks late t night along a straight street of length l, lit by n lanterns. Consider the coordinate system with the beginning of the street corresponding to the point 0, and its end corresponding to the point l. Then the i-th lantern is at the point ai. The lantern lights all points of the street that are at the distance of at most d from it, where d is some positive number, common for all lanterns.</p>\n  \n  <p>Vanya wonders: what is the minimum light radius d should the lanterns have to light the whole street?</p>\n</blockquote>\n\n<p>In some test it gives WA expected: ** *'22258199.50000*00', <strong>found:</strong> <em>'22258200.0000000'</em></p>\n\n<p>but in some tests where answer is not integer, my code output correct answer. (i.e. it can output double)</p>\n\n<p>when I saw the solution there was <code>\"printf(\"%.10f\", maxdist/2.)\"</code> instead <code>\"cout &lt;&lt; (double)maxdist/2\"</code> </p>\n\n<p>questions:</p>\n\n<ul>\n<li>why doesn't my code work?</li>\n<li>What means the dot at the end of \"<code>maxdist/2.</code>\"?</li>\n<li>Why there is no <code>\"&amp;</code>\" before variable <code>maxdist</code>?</li>\n</ul>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n#define all(x) (x).begin(), (x).end()\nint main(){\n    int n, l;\n    cin &gt;&gt; n &gt;&gt; l;\n    vector&lt;int&gt; v;\n    for(int i = 0; i &lt; n; i++){\n        int x;\n        cin &gt;&gt; x;\n        v.pb(x);\n    }\n    sort(all(v));\n    int maxdist = 2*max(v[0], l-v[n-1]);\n    for(int i = 0; i &lt; n-1; i++){\n        maxdist = max(maxdist, v[i+1] - v[i]);\n    }\n    cout &lt;&lt; (double)maxdist/2;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "tracking"], "comments": [{"owner": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "edited": false, "score": 0, "creation_date": 1561551293, "post_id": 56772347, "comment_id": 100100558, "body": "For what operating system?"}], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 1891266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed20378bcbcf07ccc4969c6bf9874b?s=128&d=identicon&r=PG", "display_name": "vcp", "link": "https://stackoverflow.com/users/1891266/vcp"}, "is_accepted": false, "score": 0, "last_activity_date": 1561553295, "creation_date": 1561553295, "answer_id": 56773230, "question_id": 56772347, "link": "https://stackoverflow.com/questions/56772347/how-to-capture-the-screen-with-opencv/56773230#56773230", "title": "How to capture the screen with OpenCV?", "body": "<p>You might want to consider using Qt as it offers APIs to second part of your problem: See <a href=\"https://doc.qt.io/qt-5/qtwidgets-desktop-screenshot-example.html\" rel=\"nofollow noreferrer\">this example</a>.</p>\n\n<p>If you want to detect if user has launched a new application then you will have to write a Windows (assuming MS Windows OS) service to track it and then launch screen capture application.</p>\n"}], "owner": {"reputation": 11, "user_id": 11698990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/742ab8e9d481c4ab57d86cbc89c7a1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Gszegosz", "link": "https://stackoverflow.com/users/11698990/gszegosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561553295, "creation_date": 1561550503, "question_id": 56772347, "link": "https://stackoverflow.com/questions/56772347/how-to-capture-the-screen-with-opencv", "title": "How to capture the screen with OpenCV?", "body": "<p>I need to make a program that checks if something appear on screen. First step was to make a screen capture. I was searching a lot and only found capturing video with webcam.</p>\n"}, {"tags": ["c++", "postgresql", "singleton", "libpq"], "comments": [{"owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1563548501, "post_id": 56772344, "comment_id": 100748887, "body": "Maybe related to <a href=\"https://isocpp.org/wiki/faq/ctors#construct-on-first-use-v2\" rel=\"nofollow noreferrer\">this FAQ</a>."}], "owner": {"reputation": 57, "user_id": 6942647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420c0eabbc4e280b5bde29213bcbba52?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Galdin", "link": "https://stackoverflow.com/users/6942647/ilya-galdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1561551049, "creation_date": 1561550496, "last_edit_date": 1561551049, "question_id": 56772344, "link": "https://stackoverflow.com/questions/56772344/segmentation-fault-when-call-pqfinish-inside-singletone-pattern", "title": "Segmentation fault when call PQfinish inside singletone pattern", "body": "<p>I'm create singletone class, and want to add inside PGconn object.</p>\n\n<p>This class, in the past, will provide connections to DB.</p>\n\n<pre><code>// postgresql\n#include &lt;libpq-fe.h&gt;\n//==============================================================================\nclass TestST\n{\npublic:\n  static TestST&amp; getInstance()\n  {\n    static TestST test;\n    return test;\n  }\n  bool createConnection()\n  {\n    mConn.reset( PQsetdbLogin(\"localhost\", \"5432\", NULL, NULL,\n                             \"test_db\", \"user_app\",\n                             \"passwd\"),\n                 &amp;PQfinish); // [SIGSEGV when delete] passing a reference to the destroy function\n    return true;\n  }\n\nprivate:\n  TestST()\n  {\n\n  }\nprivate:\n  std::shared_ptr&lt;PGconn&gt; mConn; // smart pointer to postgres connetion object\n};\n\n//==============================================================================\nint main(int argc, char** argv)\n{\n  TestST::getInstance().createConnection(); // create singletone and connection\n\n  return 0;\n}\n//==============================================================================\n</code></pre>\n\n<p>When singletone is deleted, function PQfinish calls signal Segmentation fault.\nIf I move the initialization of mConn to the constructor - it's work.\nIf I build and run on windows (MSVC) - it's work.</p>\n\n<p>postgres version 9.6.9; OS - Debian 9; gcc version 6.3.0</p>\n"}, {"tags": ["c++", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 353, "user_id": 1027013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c5c1f16b9199934a06193895f9150c5?s=128&d=identicon&r=PG", "display_name": "datjko", "link": "https://stackoverflow.com/users/1027013/datjko"}, "edited": false, "score": 0, "creation_date": 1561579013, "post_id": 56772107, "comment_id": 100115216, "body": "pcl casts all coordinates to floats. If your ply has large coordinates in text or double binary format then all of them may suffer from significant loss of precision after casting to floats."}, {"owner": {"reputation": 11, "user_id": 11498548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qsS_jdwkUJo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5bj3_Ay593vKGncj-HDOMW7kHvw/mo/photo.jpg?sz=128", "display_name": "H Motamednia", "link": "https://stackoverflow.com/users/11498548/h-motamednia"}, "reply_to_user": {"reputation": 353, "user_id": 1027013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c5c1f16b9199934a06193895f9150c5?s=128&d=identicon&r=PG", "display_name": "datjko", "link": "https://stackoverflow.com/users/1027013/datjko"}, "edited": false, "score": 0, "creation_date": 1561583100, "post_id": 56772107, "comment_id": 100116718, "body": "I don&#39;t think this is the reason , as I converted the ply file to xyz file and check the vertices coordinates."}], "owner": {"reputation": 11, "user_id": 11498548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qsS_jdwkUJo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5bj3_Ay593vKGncj-HDOMW7kHvw/mo/photo.jpg?sz=128", "display_name": "H Motamednia", "link": "https://stackoverflow.com/users/11498548/h-motamednia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561549754, "creation_date": 1561549754, "question_id": 56772107, "link": "https://stackoverflow.com/questions/56772107/point-cloud-view-point-changed-after-loading-and-rewriting-the-point-cloud", "title": "Point cloud view point changed after loading and rewriting the point cloud", "body": "<p>I just simply load and rewrite a ply file using <a href=\"http://www.pointclouds.org\" rel=\"nofollow noreferrer\">pcl</a>.</p>\n\n<pre><code>void main (int argc, char** argv)\n{\n    // Fetch point cloud filename in arguments | Works with PCD and PLY files\n    std::vector&lt;int&gt; filenames;\n    bool file_is_pcd = false;\n\n    filenames = pcl::console::parse_file_extension_argument (argc, argv, \".ply\");\n\n    if (filenames.size () != 1)  {\n        filenames = pcl::console::parse_file_extension_argument (argc, argv, \".pcd\");\n\n        if (filenames.size () != 1) {\n            showHelp (argv[0]);\n            return -1;\n        } else {\n            file_is_pcd = true;\n        }\n    }\n\n    // Load file | Works with PCD and PLY files\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr source_cloud (new pcl::PointCloud&lt;pcl::PointXYZRGB&gt; ());\n\n    if (file_is_pcd) {\n        if (pcl::io::loadPCDFile (argv[filenames[0]], *source_cloud) &lt; 0)  {\n            std::cout &lt;&lt; \"Error loading point cloud \" &lt;&lt; argv[filenames[0]] &lt;&lt; std::endl &lt;&lt; std::endl;\n            showHelp (argv[0]);\n            return -1;\n        }\n    } else {\n        if (pcl::io::loadPLYFile (argv[filenames[0]], *source_cloud) &lt; 0)  {\n            std::cout &lt;&lt; \"Error loading point cloud \" &lt;&lt; argv[filenames[0]] &lt;&lt; std::endl &lt;&lt; std::endl;\n            showHelp (argv[0]);\n            return -1;\n        }\n    }\n\n    pcl::io::savePLYFileBinary(\"gt_2.ply\", *source_cloud);\n}\n</code></pre>\n\n<p>But when I checked the ply file after rewriting ,the initial \nview point of point cloud has been changed. I mean the point cloud transformed. I used plyv tool in <a href=\"https://github.com/roboception/cvkit\" rel=\"nofollow noreferrer\">cvkit</a> to view ply files.</p>\n"}, {"tags": ["c++", "runtime-error", "size"], "comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 1, "creation_date": 1561549997, "post_id": 56772049, "comment_id": 100099791, "body": "Your code iterates only over <code>size()</code> - 1 elements (meaning it misses the last element of the vector. ) Is this what you actually want, or did you actually intend to iterate over the whole vector?"}], "answers": [{"comments": [{"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 3, "creation_date": 1561549862, "post_id": 56772087, "comment_id": 100099716, "body": "note that it&#39;s not literally <code>0 - 1</code> but either <code>0u - 1</code>, <code>0ul - 1</code> or <code>0ull - 1</code> (implementation-dependant)."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 2, "creation_date": 1561550031, "post_id": 56772087, "comment_id": 100099818, "body": "@StackDanny This site needs a way to mark expressions as pure math to disambiguate from programming language expresions :)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1561550358, "post_id": 56772087, "comment_id": 100099974, "body": "Note that whatever &quot;two&#39;s complement&quot; says doesn&#39;t affect what the result of <code>std::size_t(0) - 1</code>, because unsigned types don&#39;t have a sign representation. Standard specifies that the result is congruent modulo the maximum representable value + 1 (or 2**bits). -1 is congruent with X - 1 modulo X."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561551411, "post_id": 56772087, "comment_id": 100100625, "body": "Indeed, two&#39;s complement has nothing to do with this."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1561551463, "post_id": 56772087, "comment_id": 100100659, "body": "@eerorika that could be a nice feature-request on meta stackoverflow."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 13, "last_activity_date": 1561549804, "last_edit_date": 1561549804, "creation_date": 1561549678, "answer_id": 56772087, "question_id": 56772049, "link": "https://stackoverflow.com/questions/56772049/difference-between-i-1-vec-size-and-i-vec-size-1/56772087#56772087", "title": "difference between i + 1 &lt; vec.size() and i &lt; vec.size() - 1", "body": "<p>The method <code>std::vector::size</code> returns a <code>std::size_t</code> which is unsigned. So if it is empty, you will get <code>0 - 1</code>, but represented as an unsigned number, that will underflow and become <code>18446744073709551615</code> according to <a href=\"https://stackoverflow.com/questions/2711522/what-happens-if-i-assign-a-negative-value-to-an-unsigned-variable\">two's complement</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 4, "last_activity_date": 1561551070, "last_edit_date": 1561551070, "creation_date": 1561550332, "answer_id": 56772286, "question_id": 56772049, "link": "https://stackoverflow.com/questions/56772049/difference-between-i-1-vec-size-and-i-vec-size-1/56772286#56772286", "title": "difference between i + 1 &lt; vec.size() and i &lt; vec.size() - 1", "body": "<p>Sidenote. It's not a good idea to compare signed and unsigned numbers. In C++20 we will have a new function <code>std::ssize</code> that returns a signed type. Then your example written as</p>\n\n<pre><code> for (std::ptrdiff_t i = 0; i &lt; std::ssize(vec) - 1; ++i)\n {\n     //some code\n }\n</code></pre>\n\n<p>will be perfectly valid. </p>\n\n<p>Note also how <code>i</code> is declared to be an <a href=\"https://en.cppreference.com/w/cpp/types/ptrdiff_t\" rel=\"nofollow noreferrer\"><code>std::ptrdiff_t</code></a> (a signed integer type) to indicate array indexing.</p>\n"}], "owner": {"reputation": 59, "user_id": 11702901, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Va7aEhnTF9k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfgkENTYhTgnSaIQeEb5_pGF0dRJA/mo/photo.jpg?sz=128", "display_name": "Aryant Shukla", "link": "https://stackoverflow.com/users/11702901/aryant-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1561552289, "creation_date": 1561549527, "last_edit_date": 1561552289, "question_id": 56772049, "link": "https://stackoverflow.com/questions/56772049/difference-between-i-1-vec-size-and-i-vec-size-1", "title": "difference between i + 1 &lt; vec.size() and i &lt; vec.size() - 1", "body": "<p>while programming I found out that my code was giving runtime error when I was using condition <code>i &lt; vec.size() - 1</code> but was working fine for <code>i + 1&lt; vec.size()</code>.\nhere <code>vec</code> was an empty <code>std::vector</code>.</p>\n\n<pre><code>//giving error\nvector&lt;int&gt; vec;\nfor (int i = 0; i &lt; vec.size() - 1; i++)\n{\n    //some code\n}\n//not giving error\nvector&lt;int&gt; vec;\nfor (int i = 0; i + 1 &lt; vec.size(); i++)\n{\n    //some code\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-specialization"], "answers": [{"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 6, "last_activity_date": 1561550291, "last_edit_date": 1561550291, "creation_date": 1561549209, "answer_id": 56771973, "question_id": 56771691, "link": "https://stackoverflow.com/questions/56771691/empty-angle-brackets-after-a-functions-name-in-explicit-specialization/56771973#56771973", "title": "Empty angle-brackets after a function&#39;s name in explicit specialization", "body": "<p>In your case,</p>\n\n<pre><code>template&lt;&gt; void f&lt;&gt;(int*);\n</code></pre>\n\n<p>is an explicit specialization of </p>\n\n<pre><code>template&lt;class T&gt; void f(T*); \n</code></pre>\n\n<p>base template. It's the same as</p>\n\n<pre><code>template&lt;&gt; void f&lt;int&gt;(int*);\n</code></pre>\n\n<p>just the template argument is deduced.</p>\n\n<hr>\n\n<p>You can even write:</p>\n\n<pre><code>template&lt;&gt; void f(int*);\n</code></pre>\n\n<p>with the same effect. A similar case is presented on <a href=\"https://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">cppreference</a>, see section <strong>Explicit specializations of function templates</strong>, where there is written:</p>\n\n<blockquote>\n  <p>When specializing a function template, its template arguments can be omitted if template argument deduction can provide them from the function arguments.</p>\n</blockquote>\n\n<p>The relevant part of the C++ Standard: <a href=\"http://eel.is/c++draft/temp.expl.spec#11\" rel=\"nofollow noreferrer\">http://eel.is/c++draft/temp.expl.spec#11</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 2, "last_activity_date": 1561549376, "creation_date": 1561549376, "answer_id": 56772009, "question_id": 56771691, "link": "https://stackoverflow.com/questions/56771691/empty-angle-brackets-after-a-functions-name-in-explicit-specialization/56772009#56772009", "title": "Empty angle-brackets after a function&#39;s name in explicit specialization", "body": "<p>A missing template argument will be deduced by the compiler if you don't provide it. In this particular case it will be deduced to <code>int*</code> because the second template is more specialized (but both are the candidates). So</p>\n\n<pre><code>template&lt;&gt; void f&lt;&gt;(int*)\n</code></pre>\n\n<p>will become</p>\n\n<pre><code>template&lt;&gt; void f&lt;int&gt;(int*)\n</code></pre>\n\n<p>after type deduction.</p>\n"}], "owner": {"reputation": 437, "user_id": 11535065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d96873cd2481b71144c919655ffa2c?s=128&d=identicon&r=PG&f=1", "display_name": "beginpluses", "link": "https://stackoverflow.com/users/11535065/beginpluses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1561550291, "creation_date": 1561548243, "last_edit_date": 1561548476, "question_id": 56771691, "link": "https://stackoverflow.com/questions/56771691/empty-angle-brackets-after-a-functions-name-in-explicit-specialization", "title": "Empty angle-brackets after a function&#39;s name in explicit specialization", "body": "<p>Here is a code from the article <a href=\"http://gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">Why not specialize function templates?</a></p>\n\n<pre><code>template&lt;class T&gt;\nvoid f(T);                     // (1)\ntemplate&lt;class T&gt;\nvoid f(T*);                   // (2)\ntemplate&lt;&gt;\nvoid f&lt;&gt;(int*);             // (3)\n</code></pre>\n\n<p>My question is about the last declaration. What does that syntax mean? When we want to fully specialize a function template, e.g. (1), for some type we usually write:</p>\n\n<pre><code>template&lt;&gt;\nvoid f&lt;int&gt;(int);\n</code></pre>\n\n<p>i.e. we put that type into the angle-brackets after the function' name.</p>\n\n<p>So what does the syntax (3) means?</p>\n"}, {"tags": ["c++", "c++-cli"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1561548618, "post_id": 56771624, "comment_id": 100098949, "body": "No.  Once you change an array, it is not possible to get back the original array unless you somehow know all the operations done, and are able to undo the effects of each one, in correct (usually reverse) order.  Computers are not magical, so don&#39;t do that sort of thing unless you code specific logic that is needed.   A common approach is that, before calling the function, code creates a copy of the array and, after the function returns, copy the elements of the copy back to the original."}], "answers": [{"comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 35, "user_id": 10883017, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-owPbsT17KIk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-xM7lEhx6vSGiG1nbEocfyzQcvg/mo/photo.jpg?sz=128", "display_name": "user10883017", "link": "https://stackoverflow.com/users/10883017/user10883017"}, "edited": false, "score": 0, "creation_date": 1561627796, "post_id": 56771928, "comment_id": 100130192, "body": "You&#39;re most welcome - of course you can refactor that copy back to just after the <code>switch</code> statement."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1561549806, "last_edit_date": 1561549806, "creation_date": 1561549028, "answer_id": 56771928, "question_id": 56771624, "link": "https://stackoverflow.com/questions/56771624/how-to-set-the-previous-array-value-before-entering-the-function/56771928#56771928", "title": "How to set the previous array value before entering the function?", "body": "<blockquote>\n  <p>When a variable has been processed in a function, the array value of the variable changes forever. can you set the variable value back to normal?</p>\n</blockquote>\n\n<p>Simply copy them before calling any functions: </p>\n\n<pre><code>std::vector&lt;int&gt;(arr_size) arr_copy;\nstd::copy(std::begin(arr), std::end(arr), std::begin(arr_copy));\n\nswitch (select)\n{\ncase 1:\n  system(\"clear\");\n  cout &lt;&lt; \"Selection Sort\\n\\n\";\n  cout &lt;&lt; \"Random data : \";\n  printArray(arr, arr_size);\n  selectionSort(arr, arr_size);\n  cout &lt;&lt; \"Sorted data : \";\n  printArray(arr, arr_size);\n</code></pre>\n\n<p>and then copy them back afterwards:</p>\n\n<pre><code>  std::copy(std::begin(arr_copy), std::end(arr_copy), std::begin(arr));\n  break;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10883017, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-owPbsT17KIk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-xM7lEhx6vSGiG1nbEocfyzQcvg/mo/photo.jpg?sz=128", "display_name": "user10883017", "link": "https://stackoverflow.com/users/10883017/user10883017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56771928, "answer_count": 1, "score": 1, "last_activity_date": 1561549806, "creation_date": 1561547944, "last_edit_date": 1561548032, "question_id": 56771624, "link": "https://stackoverflow.com/questions/56771624/how-to-set-the-previous-array-value-before-entering-the-function", "title": "How to set the previous array value before entering the function?", "body": "<p>When a variable has been processed in a function, the array value of the variable changes forever. can you set the variable value back to normal? in this case I use a function to sort random data from an array. There's my code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid swap(int *xp, int *yp)\n{\n  int temp = *xp;\n  *xp = *yp;\n  *yp = temp;\n}\n\nvoid selectionSort(int arr[], int n)\n{\n  int i, j, min_idx;\n\n  for (i = 0; i &lt; n - 1; i++)\n  {\n    min_idx = i;\n    for (j = i + 1; j &lt; n; j++)\n    {\n      if (arr[j] &lt; arr[min_idx])\n      {\n        min_idx = j;\n      }\n    }\n    swap(&amp;arr[min_idx], &amp;arr[i]);\n  }\n}\n\nvoid insertionSort(int arr[], int n)\n{\n  int i, key, j;\n  for (i = 1; i &lt; n; i++)\n  {\n    key = arr[i];\n    j = i - 1;\n\n    while (j &gt;= 0 &amp;&amp; arr[j] &gt; key)\n    {\n      arr[j + 1] = arr[j];\n      j = j - 1;\n    }\n    arr[j + 1] = key;\n  }\n}\n\nvoid bubbleSort(int arr[], int n)\n{\n  int i, j;\n  for (i = 0; i &lt; n - 1; i++)\n  {\n    for (j = 0; j &lt; n - i - 1; j++)\n    {\n      if (arr[j] &gt; arr[j + 1])\n      {\n        swap(&amp;arr[j], &amp;arr[j + 1]);\n      }\n    }\n  }\n}\n\nint partition(int arr[], int low, int high)\n{\n  int pivot = arr[high];\n  int i = (low - 1);\n\n  for (int j = low; j &lt;= high - 1; j++)\n  {\n    if (arr[j] &lt;= pivot)\n    {\n      i++;\n      swap(&amp;arr[i], &amp;arr[j]);\n    }\n  }\n  swap(&amp;arr[i + 1], &amp;arr[high]);\n  return (i + 1);\n}\n\nvoid quickSort(int arr[], int low, int high)\n{\n  if (low &lt; high)\n  {\n    int pi = partition(arr, low, high);\n\n    quickSort(arr, low, pi - 1);\n    quickSort(arr, pi + 1, high);\n  }\n}\n\nvoid printArray(int arr[], int size)\n{\n  int i;\n  for (i = 0; i &lt; size; i++)\n  {\n    cout &lt;&lt; arr[i] &lt;&lt; \" \";\n  }\n  cout &lt;&lt; endl;\n}\n\nvoid merge(int arr[], int l, int m, int r)\n{\n  int i, j, k;\n  int n1 = m - l + 1;\n  int n2 = r - m;\n\n  int L[n1], R[n2];\n\n  for (i = 0; i &lt; n1; i++)\n  {\n    L[i] = arr[l + i];\n  }\n  for (j = 0; j &lt; n2; j++)\n  {\n    R[j] = arr[m + 1 + j];\n  }\n\n  i = 0;\n  j = 0;\n  k = l;\n\n  while (i &lt; n1 &amp;&amp; j &lt; n2)\n  {\n    if (L[i] &lt;= R[j])\n    {\n      arr[k] = L[i];\n      i++;\n    }\n    else\n    {\n      arr[k] = R[j];\n      j++;\n    }\n    k++;\n  }\n\n  while (i &lt; n1)\n  {\n    arr[k] = L[i];\n    i++;\n    k++;\n  }\n\n  while (j &lt; n2)\n  {\n    arr[k] = R[j];\n    j++;\n    k++;\n  }\n}\n\nvoid mergeSort(int arr[], int l, int r)\n{\n  if (l &lt; r)\n  {\n    int m = l + (r - l) / 2;\n\n    mergeSort(arr, l, m);\n    mergeSort(arr, m + 1, r);\n\n    merge(arr, l, m, r);\n  }\n}\n\nint main()\n{\n  int select;\n  char req;\n\n  int arr[] = {20, 45, 30, 25, 15, 50, 100, 55, 10, 25};\n  int arr_size = sizeof(arr) / sizeof(arr[0]);\n\n  do\n  {\n    system(\"clear\");\n    cout &lt;&lt; \"--- Sorting Menu ---\\n\\n\";\n    cout &lt;&lt; \"1. Selection Sort\\n\";\n    cout &lt;&lt; \"2. Insertion Sort\\n\";\n    cout &lt;&lt; \"3. Bubble Sort\\n\";\n    cout &lt;&lt; \"4. Quick Sort\\n\";\n    cout &lt;&lt; \"5. Merge Sort\\n\\n\";\n    cout &lt;&lt; \"Choose (1/2/3/4/5) : \";\n    cin &gt;&gt; select;\n\n    switch (select)\n    {\n    case 1:\n      system(\"clear\");\n      cout &lt;&lt; \"Selection Sort\\n\\n\";\n      cout &lt;&lt; \"Random data : \";\n      printArray(arr, arr_size);\n      selectionSort(arr, arr_size);\n      cout &lt;&lt; \"Sorted data : \";\n      printArray(arr, arr_size);\n      break;\n    case 2:\n      system(\"clear\");\n      cout &lt;&lt; \"Insertion Sort\\n\\n\";\n      cout &lt;&lt; \"Random data : \";\n      printArray(arr, arr_size);\n      insertionSort(arr, arr_size);\n      cout &lt;&lt; \"Sorted data : \";\n      printArray(arr, arr_size);\n      break;\n    case 3:\n      system(\"clear\");\n      cout &lt;&lt; \"Bubble Sort\\n\\n\";\n      cout &lt;&lt; \"Random data : \";\n      printArray(arr, arr_size);\n      bubbleSort(arr, arr_size);\n      cout &lt;&lt; \"Sorted data : \";\n      printArray(arr, arr_size);\n      break;\n    case 4:\n      system(\"clear\");\n      cout &lt;&lt; \"Quick Sort\\n\\n\";\n      cout &lt;&lt; \"Random data : \";\n      printArray(arr, arr_size);\n      quickSort(arr, 0, arr_size - 1);\n      cout &lt;&lt; \"Sorted data : \";\n      printArray(arr, arr_size);\n      break;\n    case 5:\n      system(\"clear\");\n      cout &lt;&lt; \"Merge Sort\\n\\n\";\n      cout &lt;&lt; \"Random data : \";\n      printArray(arr, arr_size);\n      mergeSort(arr, 0, arr_size - 1);\n      cout &lt;&lt; \"Sorted data : \";\n      printArray(arr, arr_size);\n      break;\n    default:\n      break;\n    }\n    cout &lt;&lt; endl\n         &lt;&lt; endl;\n    cout &lt;&lt; \"Back to menu ? (Y/n) : \";\n    cin &gt;&gt; req;\n    if (req != 'Y' || req != 'y')\n    {\n      system(\"clear\");\n      cout &lt;&lt; \"Exit from this program...\\n\\n\";\n    }\n  } while (req == 'Y' || req == 'y');\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 3, "creation_date": 1561548261, "post_id": 56771601, "comment_id": 100098721, "body": "Given that output, <code>getline</code> clearly fails (thus printing <code>...</code>). Are you <i>sure</i> the file isn&#39;t empty?"}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1561548327, "post_id": 56771601, "comment_id": 100098753, "body": "Can you please share your csv file?"}, {"owner": {"reputation": 798, "user_id": 1801351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4OJlQ.png?s=128&g=1", "display_name": "mrzrm", "link": "https://stackoverflow.com/users/1801351/mrzrm"}, "edited": false, "score": 0, "creation_date": 1561548348, "post_id": 56771601, "comment_id": 100098766, "body": "<code>std::</code> is missing from <code>getline</code>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1561548518, "post_id": 56771601, "comment_id": 100098892, "body": "Unless the first line <i>is</i> <code>...</code> of course. Anyway, showing the file - and making certain it is in your current working directory when the program runs - would be helpful."}, {"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 1, "creation_date": 1561549270, "post_id": 56771601, "comment_id": 100099343, "body": "just guessing here but is there a chance you have a second file named file.csv in the directory you&#39;re executing the code from?"}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1561549466, "post_id": 56771601, "comment_id": 100099471, "body": "So, I used your data and created my csv file, and worked just fine. Take a look at this <a href=\"https://gist.github.com/EsdrasXavier/af396273c07bce8e105739e701486176\" rel=\"nofollow noreferrer\">code</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1561549514, "post_id": 56771601, "comment_id": 100099495, "body": "Worked on my machine.  You may want to use <code>getcwd</code> to confirm the current working directory is what you expect it to be."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1561549547, "post_id": 56771601, "comment_id": 100099513, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that is a full program with <code>#include</code> directives and all other little things intact."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 798, "user_id": 1801351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4OJlQ.png?s=128&g=1", "display_name": "mrzrm", "link": "https://stackoverflow.com/users/1801351/mrzrm"}, "edited": false, "score": 2, "creation_date": 1561549952, "post_id": 56771601, "comment_id": 100099764, "body": "@mrzrm it isn&#39;t, <code>getline</code> is found through ADL since its arguments are from namespace <code>std</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1561550164, "post_id": 56771601, "comment_id": 100099889, "body": "for testing you could also write the file in the same code. Your code looks fine, so even with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> I guess it will be difficult to diagnose your problem, from what you write it seems like the file is actually empty"}, {"owner": {"reputation": 43, "user_id": 11662901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53736557462391f82862160f25877a6b?s=128&d=identicon&r=PG&f=1", "display_name": "Arik", "link": "https://stackoverflow.com/users/11662901/arik"}, "reply_to_user": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1561550229, "post_id": 56771601, "comment_id": 100099917, "body": "@EsdrasXavier I tried your code, and it outputs &quot;File opened,&quot; then &quot;Failed to read file&quot;... I have included both iostream and fstream."}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1561550942, "post_id": 56771601, "comment_id": 100100329, "body": "@Arik That&#39;s pretty weird lol. Could you maybe try with anoter file? Maybe write a txt file, also I forgot to put into my code, you should always close the file with <b>csvFile.close();</b>"}, {"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 1, "creation_date": 1561551936, "post_id": 56771601, "comment_id": 100100960, "body": "this example works on linux compiled with gcc, can you tell us more about your usage conditions, the code is not the problem here... maybe your compiler/standard library has some problems, or maybe there&#39;s something else you missed"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1561552411, "post_id": 56771601, "comment_id": 100101292, "body": "The output you&#39;re seeing is exactly what I would expect if <code>file.csv</code> was empty.  As per an earlier comment by @xception , are you sure you don&#39;t have multiple files named <code>file.csv</code> in different directories?"}], "answers": [{"comments": [{"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1561553249, "post_id": 56773156, "comment_id": 100101871, "body": "are you maybe using windows and have the thing about hiding file extensions enabled?"}, {"owner": {"reputation": 43, "user_id": 11662901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53736557462391f82862160f25877a6b?s=128&d=identicon&r=PG&f=1", "display_name": "Arik", "link": "https://stackoverflow.com/users/11662901/arik"}, "reply_to_user": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 0, "creation_date": 1561557769, "post_id": 56773156, "comment_id": 100104772, "body": "I was using visual studio code on mac. What had happened was that the first couple times I built the project, new, empty files were created in the build folder, part of my main workspace. After deleting the files I had in the directory, the code was still opening blank files, which led me to search through the folders. I have since deleted the extra files, and wrote the full file path when passing it in to open, to avoid repeat situations like this."}], "tags": [], "owner": {"reputation": 43, "user_id": 11662901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53736557462391f82862160f25877a6b?s=128&d=identicon&r=PG&f=1", "display_name": "Arik", "link": "https://stackoverflow.com/users/11662901/arik"}, "is_accepted": true, "score": 1, "last_activity_date": 1561553075, "creation_date": 1561553075, "answer_id": 56773156, "question_id": 56771601, "link": "https://stackoverflow.com/questions/56771601/is-open-returns-true-but-getline-only-returns-empty-strings/56773156#56773156", "title": "is_open returns true, but getline only returns empty strings", "body": "<p>I found the issue, something is wrong with the file itself I was using. I tried reading from another file using the same methods, and it worked without issues. Thank you to everyone who commented trying to help!</p>\n"}], "owner": {"reputation": 43, "user_id": 11662901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53736557462391f82862160f25877a6b?s=128&d=identicon&r=PG&f=1", "display_name": "Arik", "link": "https://stackoverflow.com/users/11662901/arik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56773156, "answer_count": 1, "score": 0, "last_activity_date": 1561553075, "creation_date": 1561547863, "last_edit_date": 1561549275, "question_id": 56771601, "link": "https://stackoverflow.com/questions/56771601/is-open-returns-true-but-getline-only-returns-empty-strings", "title": "is_open returns true, but getline only returns empty strings", "body": "<p>I am attempting to read from a .csv file in c++. After calling myfile.open(file), is_open returns true, but getline is only returning empty strings. </p>\n\n<p>I have attempted using vectors to read the lines and then writing the vector data to a variable to read, but that has also returned only empty strings. </p>\n\n<pre><code>std::ifstream csvFile;\nstd::string line = \"!\", temp= \"...\";\n\ncsvFile.open(\"file.csv\");\nif(csvFile.is_open()) {\n    std::cout &lt;&lt; \"open\\n\";\n    std::cout &lt;&lt; line &lt;&lt; \"\\n\";\n    if(getline(csvFile, line)) {\n        std:: cout &lt;&lt; line &lt;&lt; \"\\n\";\n    } else {\n        std::cout &lt;&lt; temp &lt;&lt; \"\\n\";\n    }\n}\nelse {\n    std:: cout &lt;&lt; \"not opening\\n\";\n}\nstd:: cout &lt;&lt; line;\n</code></pre>\n\n<p>My output is as follows after running.</p>\n\n<pre><code>[ctest] open\n[ctest] !\n[ctest] ...\n[ctest] \n</code></pre>\n\n<p>As shown, the getline() return only an empty string, although the file itself is not empty.</p>\n\n<p>These are the first 20 or so lines of the csv file, and I have made sure that the file is in the current working directory.</p>\n\n<p>Alpha002</p>\n\n<p>16:55:54 13/6/2019</p>\n\n<p>428,1.61,-1.31,-0.13,0,0</p>\n\n<p>448,1.61,-1.47,-0.13,0,0</p>\n\n<p>468,1.68,-1.07,-0.44,0,0</p>\n\n<p>488,1.61,-1.39,-0.76,0,0</p>\n\n<p>508,1.61,-1.47,-0.68,0,0</p>\n\n<p>3528,1.61,-1.55,-0.36,0,0</p>\n\n<p>3548,1.61,-1.31,-0.28,0,0</p>\n\n<p>3568,1.68,-1.15,-0.36,0,0</p>\n\n<p>3588,1.68,-1.63,-0.76,0,0</p>\n\n<p>3608,1.68,-0.76,-0.68,0,0</p>\n\n<p>3628,1.68,-1.15,-0.21,0,0</p>\n\n<p>3648,1.68,-0.76,-0.28,0,0</p>\n\n<p>3668,1.68,-1.39,-0.13,0,0</p>\n\n<p>3688,1.68,-1.07,-0.21,0,0</p>\n\n<p>3708,1.61,-1.47,0.03,0,0</p>\n\n<p>I am not sure how to proceed from here, as i cannot find any issues apart from that, any advice is appreciated!</p>\n"}, {"tags": ["c#", "c++", "unsafe"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1561547717, "post_id": 56771549, "comment_id": 100098405, "body": "Your C++ code leaks memory big time btw."}, {"owner": {"reputation": 6724, "user_id": 4685428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de2eda4db020c2b1541f877424225d73?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Andreev", "link": "https://stackoverflow.com/users/4685428/aleks-andreev"}, "edited": false, "score": 1, "creation_date": 1561548135, "post_id": 56771549, "comment_id": 100098640, "body": "Sounds like <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>. Please explain why do you need this in c#. What is your actual goal?"}, {"owner": {"reputation": 3164, "user_id": 5167831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1VTr.jpg?s=128&g=1", "display_name": "Maurits van Beusekom", "link": "https://stackoverflow.com/users/5167831/maurits-van-beusekom"}, "edited": false, "score": 0, "creation_date": 1561548197, "post_id": 56771549, "comment_id": 100098681, "body": "@bbQsauce, I have reformatted your code. In general it is easier to surround code blocks using three back ticks, this way it is easier to see where the codeblock starts and ends."}, {"owner": {"reputation": 1, "user_id": 11702732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70e4ac1243bc773cf2b3fd2fe7e8a33?s=128&d=identicon&r=PG&f=1", "display_name": "bbQsauce", "link": "https://stackoverflow.com/users/11702732/bbqsauce"}, "reply_to_user": {"reputation": 6724, "user_id": 4685428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de2eda4db020c2b1541f877424225d73?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Andreev", "link": "https://stackoverflow.com/users/4685428/aleks-andreev"}, "edited": false, "score": 0, "creation_date": 1561549550, "post_id": 56771549, "comment_id": 100099516, "body": "@AleksAndreev I have a framework built-in function that i cannot modify or access, that wants an array of ints. However i have an array of structs that hold the ints inside. I would like to avoid having to cycle through the array to copy the whole data since it&#39;s huge in size (60-100k elements) and then pass the array to the function."}, {"owner": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1561550332, "post_id": 56771549, "comment_id": 100099965, "body": "Put your use of <code>unsafe</code> aside. Attack the problem in the obvious way first (i.e. copy the data). Is it fast <b>enough</b>? How long does it take? Honestly, the simple and safe way is always the best to try <b>first</b>. If it is fast enough - boom, stop right there. No point overcomplicating things unnecessarily. <code>unsafe</code> code is <b>much</b> harder to reason about."}, {"owner": {"reputation": 1, "user_id": 11702732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70e4ac1243bc773cf2b3fd2fe7e8a33?s=128&d=identicon&r=PG&f=1", "display_name": "bbQsauce", "link": "https://stackoverflow.com/users/11702732/bbqsauce"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1561553208, "post_id": 56771549, "comment_id": 100101836, "body": "@mjwills it&#39;s not fast enough, that&#39;s why i&#39;m trying to optimize it."}, {"owner": {"reputation": 1, "user_id": 11702732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70e4ac1243bc773cf2b3fd2fe7e8a33?s=128&d=identicon&r=PG&f=1", "display_name": "bbQsauce", "link": "https://stackoverflow.com/users/11702732/bbqsauce"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1561553453, "post_id": 56771549, "comment_id": 100101994, "body": "@mjwills this is the code ` <code>for (int i = 0; i &lt; vertices.Length; i++)          {             verticesList.Add(vertices[i].a);             verticesList.Add(vertices[i].b);             verticesList.Add(vertices[i].c);         } </code>"}, {"owner": {"reputation": 1, "user_id": 11702732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70e4ac1243bc773cf2b3fd2fe7e8a33?s=128&d=identicon&r=PG&f=1", "display_name": "bbQsauce", "link": "https://stackoverflow.com/users/11702732/bbqsauce"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1561554343, "post_id": 56771549, "comment_id": 100102517, "body": "@mjwills takes around 2-5ms depending on the length. Vertices usually holds between 40k and 120k elements.  Since it&#39;s a realtime application (game) i need it to be as fast as possible, this potentially needs to run every frame."}], "answers": [{"tags": [], "owner": {"reputation": 6724, "user_id": 4685428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de2eda4db020c2b1541f877424225d73?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Andreev", "link": "https://stackoverflow.com/users/4685428/aleks-andreev"}, "is_accepted": false, "score": 0, "last_activity_date": 1561564565, "creation_date": 1561564565, "answer_id": 56776823, "question_id": 56771549, "link": "https://stackoverflow.com/questions/56771549/how-to-change-array-address-in-c-unsafe/56776823#56776823", "title": "How to change array address in c# unsafe", "body": "<p>Instead of doing unsafe casting consider implementing a wrapper for array: custom class with indexer that will convert part of inner array to struct and vice versa. Take a look at this class:</p>\n\n<pre><code>public class ArrayWrapper&lt;T&gt; where T : struct\n{\n    public ArrayWrapper(int structsCount)\n    {\n        var fields = typeof(T)\n            .GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);\n\n        // do some check\n        if (fields.Any(f =&gt; f.FieldType != typeof(int)))\n            throw new Exception(\"Only int fields allowed\");\n        if (fields.Any(f =&gt; f.IsPrivate))\n            throw new Exception(\"Only public fields allowed\");\n\n        InnerArray = new int[structsCount * fields.Length];\n\n        copyFromArrayToStruct = CopyFromArrayToStructMethodBuilder(fields);\n        copyFromStructToArray = CopyFromStructToArrayMethodBuilder(fields);\n    }\n\n    public int[] InnerArray { get; }\n\n    private readonly Func&lt;int, T&gt; copyFromArrayToStruct;\n    private readonly Action&lt;int, T&gt; copyFromStructToArray;\n    public T this[int index]\n    {\n        get =&gt; copyFromArrayToStruct(index);\n        set =&gt; copyFromStructToArray(index, value);\n    }\n\n    private Func&lt;int, T&gt; CopyFromArrayToStructMethodBuilder(FieldInfo[] fields)\n    {\n        var index = Expression.Parameter(typeof(int), \"i\");\n\n        var actualOffset = Expression.Multiply(index, Expression.Constant(fields.Length));\n        var result = Expression.Variable(typeof(T), \"result\");\n        var lines = new List&lt;Expression&gt; {Expression.Assign(result, Expression.New(typeof(T)))};\n\n        for (var i = 0; i &lt; fields.Length; ++i)\n        {\n            var fieldInfo = fields[i];\n            var left = Expression.Field(result, fieldInfo);\n            var right = Expression.ArrayIndex(\n                Expression.Constant(InnerArray),\n                Expression.Add(actualOffset, Expression.Constant(i)));\n\n            var assignment = Expression.Assign(left, right);\n            lines.Add(assignment);\n        }\n\n        lines.Add(result);\n\n        var lambda = Expression.Lambda&lt;Func&lt;int, T&gt;&gt;(Expression.Block(new []{result}, lines), index);\n        return lambda.Compile();\n    }\n\n    private Action&lt;int, T&gt; CopyFromStructToArrayMethodBuilder(FieldInfo[] fields)\n    {\n        var index = Expression.Parameter(typeof(int), \"i\");\n        var value = Expression.Parameter(typeof(T), \"value\");\n\n        var actualOffset = Expression.Multiply(index, Expression.Constant(fields.Length));\n        var lines = new List&lt;Expression&gt;();\n\n        for (var i = 0; i &lt; fields.Length; ++i)\n        {\n            var fieldInfo = fields[i];\n            var left = Expression.ArrayAccess(Expression.Constant(InnerArray),\n                Expression.Add(actualOffset, Expression.Constant(i)));\n            var right = Expression.Field(value, fieldInfo);\n\n            var assignment = Expression.Assign(left, right);\n            lines.Add(assignment);\n        }\n\n        var lambda = Expression.Lambda&lt;Action&lt;int, T&gt;&gt;(Expression.Block(lines), index, value);\n        return lambda.Compile();\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var array = new ArrayWrapper&lt;MyStruct&gt;(4);\n\nvar test = array[0]; // get part of array as a structure\ntest.a = 10;\ntest.b = 42;\narray[0] = test; // put modified data back to array\n</code></pre>\n\n<p>This wrapper actually do data copy, but only for parts of array you really want to modify. Also it can be simplified if you prefer to hard code your struct fields than use code generation. Here is live <a href=\"https://dotnetfiddle.net/pppZO5\" rel=\"nofollow noreferrer\">demo</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11702732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70e4ac1243bc773cf2b3fd2fe7e8a33?s=128&d=identicon&r=PG&f=1", "display_name": "bbQsauce", "link": "https://stackoverflow.com/users/11702732/bbqsauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561564565, "creation_date": 1561547673, "last_edit_date": 1561549733, "question_id": 56771549, "link": "https://stackoverflow.com/questions/56771549/how-to-change-array-address-in-c-unsafe", "title": "How to change array address in c# unsafe", "body": "<p>I have an array of structs that i need to change into an array of ints, without having to manually copy it.</p>\n\n<p>I tried getting the array address but without results.</p>\n\n<p>This is the equivalent C++ of what i'm trying to do:</p>\n\n<pre><code>struct MyStruct\n{\n    public int a;\n    public int b;\n} \nMyStruct* structs = new MyStruct[3];\nint* ints;\n\nints = (int*)structs; //works\n</code></pre>\n\n<p>This is the code:</p>\n\n<pre><code>MyStruct[] structs = new MyStruct[3];\nint[] ints = new int[6];\n\nints = (int[])structs; //error\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>MyStruct[] structs = new MyStruct[3];\nint[] ints = new int[6];\n\nfixed(int* ptr = ints)\n{\n    ptr = (int*)&amp;structs; //error\n}\n</code></pre>\n\n<p>Seems like no matter what i try, i can't modify an array pointer. I can read it, but i cannot modify it. is there a way?</p>\n"}]