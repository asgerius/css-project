[{"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 2, "creation_date": 1448495977, "post_id": 33928465, "comment_id": 55617973, "body": "Well, if it&#39;s a <i>singleton</i> you don&#39;t ever need to have a <i>shared</i> pointer"}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1448496089, "post_id": 33928465, "comment_id": 55618006, "body": "Think of a singleton as a global variable with a delayed construction."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1448496216, "post_id": 33928465, "comment_id": 55618034, "body": "Withholding my opinion on the use of <code>shared_ptr</code>, you should not be using <code>NULL</code>. Use <code>nullptr</code> if you need a null value, but with smart pointers (and raw pointers), <code>if (!device)</code> is fine."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448496795, "post_id": 33928465, "comment_id": 55618172, "body": "This should probably return <code>weak_ptr</code> rather than <code>shared_ptr</code>.  Or use <code>unique_ptr</code> and return reference."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1448497915, "post_id": 33928465, "comment_id": 55618435, "body": "<a href=\"http://stackoverflow.com/a/271104/315052\">Singleton does not require pointers.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1448496144, "creation_date": 1448496144, "answer_id": 33928547, "question_id": 33928465, "link": "https://stackoverflow.com/questions/33928465/passing-constructor-to-shared-pointer/33928547#33928547", "title": "Passing constructor to shared pointer", "body": "<p>You're not passing the constructor. In fact, there is currently no way to pass a constructor in C++. You're assigning a temporary <code>DeviceHandle</code> object to <code>device</code>. However, <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator%3D\" rel=\"nofollow\">some documentation</a> makes it apparent that there is no assignment operator taking a <code>T</code>. For that matter, it also doesn't have an assignment operator that would take a function-like thing (like a constructor).</p>\n\n<p>Instead, smart pointers have <code>reset</code>:</p>\n\n<pre><code>device.reset(new DeviceHandle());\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448496144, "creation_date": 1448495644, "question_id": 33928465, "link": "https://stackoverflow.com/questions/33928465/passing-constructor-to-shared-pointer", "title": "Passing constructor to shared pointer", "body": "<p>Thanks to anyone willing to help:</p>\n\n<p>I am trying to create a Singleton class in C++ and I am new to the language. My scrum team methods say we should only use shared pointers. However, when I am trying to pass constructor into my Singleton object (shared pointer) I am getting error such as \"binary '=' : no operator found which takes a right hand operand...\". Basically non-compatible type conversion. Providing necessary code below: </p>\n\n<pre><code>//Singleton getter class\nstd::shared_ptr&lt;LibMouse3d::LibCoreMouse3d::DeviceHandle&gt; LibMouse3d::LibCoreMouse3d::DeviceHandle::getInstance(){\n\n    if(device == NULL){\n\n        //trying pass constructor into shared pointer object\n        device = LibMouse3d::LibCoreMouse3d::DeviceHandle();\n    }\n\n    return device;\n}\n</code></pre>\n\n<p>This is my constructor:</p>\n\n<pre><code>LibMouse3d::LibCoreMouse3d::DeviceHandle::DeviceHandle() {\n\n    this-&gt;InitDevice();\n}\n</code></pre>\n\n<p>And the object in header file</p>\n\n<pre><code>//singleton object - device\nstd::shared_ptr&lt;DeviceHandle&gt; device;\n</code></pre>\n\n<p>Thanks for any effort and sorry if I forgot something or added non-relevant info. This is my first question here, I could not google myself into answer for some time and I don't want my scrum master to be worried about my progress.</p>\n"}, {"tags": ["c++", "node.js", "node-gyp", "node.js-addon", "node.js-nan"], "answers": [{"comments": [{"owner": {"reputation": 7916, "user_id": 530543, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/sKsEE.jpg?s=128&g=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/530543/rohan"}, "edited": false, "score": 0, "creation_date": 1448576891, "post_id": 33928738, "comment_id": 55654513, "body": "Changed the callback to static and its member and its working now! Thank you."}, {"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 0, "creation_date": 1492641283, "post_id": 33928738, "comment_id": 74069027, "body": "Note that <a href=\"https://sourceware.org/libffi/\" rel=\"nofollow noreferrer\">libffi</a> supports generating such thunks cross-platform \u2013 even on iOS(!).  It also supports generating thunks with almost-arbitrary signatures."}], "tags": [], "owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "is_accepted": true, "score": 1, "last_activity_date": 1448497500, "last_edit_date": 1495535462, "creation_date": 1448497500, "answer_id": 33928738, "question_id": 33928322, "link": "https://stackoverflow.com/questions/33928322/setwindowshookex-in-a-node-js-module-using-node-nan/33928738#33928738", "title": "SetWindowsHookEx in a node.js module using node-nan", "body": "<p><strong>For Problem #1</strong>, you correctly identified the <code>const</code> qualifier as the problem. </p>\n\n<p>The reason you can assign to the <code>const</code> member variable after declaring it is because of the placement of <code>const</code> in <code>const AsyncProgressWorker::ExecutionProgress *executionProgress</code>. This is a variable pointer to a constant AsyncProgressWorker::ExecutionProgress. This means you can change the pointer's value (for instance, re-assign it as in your example above), but you cannot change the data it points to. <a href=\"https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\">The top answer of this question</a> has a very good explanation of this concept.</p>\n\n<p><strong>For problem #2</strong>, the error is caused by trying to pass a member function of your class as a function callback. This is simply not possible (well, without a workaround...see below) - a member method is not the same as a function, which is what <code>SetWindowsHookEx</code> is expecting. You could make your callback function <code>static</code>, but then would not be able to access the <code>_hook</code> member.</p>\n\n<p><a href=\"http://www.codeguru.com/cpp/misc/misc/assemblylanguage/article.php/c12667/Thunking-in-Win32.htm\" rel=\"nofollow noreferrer\">Here is an external page</a> with a (very hack-y) workaround for this exact problem. It should allow you to use <code>SetWindowsHookEx</code> in the way you're currently trying to use it. However, I would recommend re-thinking the way your application is hooking and instead see if there is a way to register a single global function or static member function as your callback for your application.</p>\n\n<p>Unrelated to your question: unless you've omitted code in your sample, you never unhook the hook that is set in <code>SetWindowsHookEx</code>. Take a look at the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644993(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN for <code>UnhookWindowsHookEx</code></a>.</p>\n"}], "owner": {"reputation": 7916, "user_id": 530543, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/sKsEE.jpg?s=128&g=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/530543/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 1, "accepted_answer_id": 33928738, "answer_count": 1, "score": 1, "last_activity_date": 1474605446, "creation_date": 1448494761, "last_edit_date": 1592644375, "question_id": 33928322, "link": "https://stackoverflow.com/questions/33928322/setwindowshookex-in-a-node-js-module-using-node-nan", "title": "SetWindowsHookEx in a node.js module using node-nan", "body": "<p>I'm trying to create an Electron node.js application that can perform certain functions using global keybindings. The global keybindings API in Electron doesn't work in games unfortunately so I need to create a native node module that listens to these low level key events.</p>\n<p>So i'm using node-gyp to compile the project with visual studio 2015 and nan to provide the communication between node and c++. I've managed to get both aspects of the project working seperately(the low level key bindings and the node.js&lt;--&gt;nan communication) but I'm having trouble combining them. I also admit I have very little experience with c++(I haven't written a single c++ program).</p>\n<pre><code>#include &quot;node_modules/nan/nan.h&quot;\n\nusing namespace std;\nusing namespace Nan;\n\nHHOOK _hook;\nKBDLLHOOKSTRUCT kbdStruct;\n\nclass KeyboardEventWorker : public AsyncProgressWorker {\n public:\n  KeyboardEventWorker(Callback *callback, Callback *progress)\n    : AsyncProgressWorker(callback), progress(progress) {}\n  ~KeyboardEventWorker() {}\n  \n  LRESULT CALLBACK HookCallback(int nCode,WPARAM wParam,LPARAM lParam) {  \n    executionProgress-&gt;Send(reinterpret_cast&lt;const char*&gt;(nCode), sizeof(nCode));\n    return CallNextHookEx(_hook, nCode, wParam, lParam);\n  }\n  \n  void Execute (const AsyncProgressWorker::ExecutionProgress&amp; progress) {\n    executionProgress = &amp;progress; //PROBLEM #1\n        _hook = SetWindowsHookEx(13, HookCallback, NULL, 0); //PROBLEM #2\n    \n    SleepEx(INFINITE, true);\n  }\n\n\n  void HandleProgressCallback(const char *data, size_t size) {\n    HandleScope scope;\n    \n    v8::Local&lt;v8::Value&gt; argv[] = {\n        New&lt;v8::Integer&gt;(*reinterpret_cast&lt;int*&gt;(const_cast&lt;char*&gt;(data)))\n    };\n    progress-&gt;Call(1, argv);\n  }\n  \n  private:\n    Callback *progress;\n    AsyncProgressWorker::ExecutionProgress *executionProgress;\n};\n\nNAN_METHOD(DoProgress) {\n  Callback *progress = new Callback(info[0].As&lt;v8::Function&gt;());\n  Callback *callback = new Callback(info[1].As&lt;v8::Function&gt;());\n  AsyncQueueWorker(new KeyboardEventWorker(callback, progress));\n}\n\nNAN_MODULE_INIT(Init) {\n  Set(target\n    , New&lt;v8::String&gt;(&quot;init&quot;).ToLocalChecked()\n    , New&lt;v8::FunctionTemplate&gt;(DoProgress)-&gt;GetFunction());\n}\n\nNODE_MODULE(asyncprogressworker, Init)\n</code></pre>\n<p>Problem #1: To be able to send back messages to node.js, I'l need to copy the pointer of AsyncProgressWorker::ExecutionProgress and make it available to the entire class so when HookCallback triggers it can send a message to node.js.</p>\n<p>The compiler doesn't like this</p>\n<blockquote>\n<p>..\\binding.cc(21): error C2440: '=': cannot convert from 'const\nNan::AsyncProgressWorker::ExecutionProgress *' to 'Nan:\n:AsyncProgressWorker::ExecutionProgress *'\n[C:\\Users\\eksrow\\gdrive\\projects\\vscode\\node-native-hello-world\\build\\bindin\ng.vcxproj].</p>\n<p>..\\binding.cc(21): note: Conversion loses qualifiers</p>\n</blockquote>\n<p>Formatted:</p>\n<blockquote>\n<p>'const Nan::AsyncProgressWorker::ExecutionProgress *'</p>\n<p>'Nan::AsyncProgressWorker::ExecutionProgress *'</p>\n</blockquote>\n<p>This one I managed to solve by adding the keyword const to private member *executionProgress;. But I don't understand why that would fix it, const variables aren't supposed to be changed once they are set. Why does this compile?</p>\n<p>Problem #2: This one is very peculiar:</p>\n<blockquote>\n<p>..\\binding.cc(22): error C3867: 'KeyboardEventWorker::HookCallback':\nnon-standard syntax; use '&amp;' to create a pointer t o member\n[C:\\Users\\eksrow\\gdrive\\projects\\vscode\\node-native-hello-world\\build\\binding.vcxproj]</p>\n</blockquote>\n<p>I've looked up many examples online and they all have the same syntax regarding this:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/11180773/setwindowshookex-for-wh-mouse?lq=1\">SetWindowsHookEx #1</a></li>\n<li><a href=\"https://stackoverflow.com/a/22267909/530543\">SetWindowsHookEx #2</a></li>\n</ol>\n<p>I can't see the difference between my code and theirs regarding that line.</p>\n<p>If I do what the compiler says and add an ampersand to that line, it gives a completely different error:</p>\n<blockquote>\n<p>..\\binding.cc(22): error C2276: '&amp;': illegal operation on bound member\nfunction expression [C:\\Users\\eksrow\\gdrive\\proj\nects\\vscode\\node-native-hello-world\\build\\binding.vcxproj]\n..\\binding.cc(22): error C2660: 'SetWindowsHookExA': function does not\ntake 3 arguments [C:\\Users\\eksrow\\gdrive\\project\ns\\vscode\\node-native-hello-world\\build\\binding.vcxproj]</p>\n</blockquote>\n"}, {"tags": ["c++", "winapi", "visual-studio-2015"], "answers": [{"tags": [], "owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "is_accepted": true, "score": 3, "last_activity_date": 1448495153, "creation_date": 1448495153, "answer_id": 33928389, "question_id": 33928199, "link": "https://stackoverflow.com/questions/33928199/change-default-code-visual-studio-2015-community/33928389#33928389", "title": "Change default code Visual Studio 2015 Community", "body": "<p>From <a href=\"https://msdn.microsoft.com/en-us/library/ms185319.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms185319.aspx</a> :  </p>\n\n<blockquote>\n  <p>Locate the .zip file that contains the template. By default, this file is located in<br>\n  \\My Documents\\Visual Studio Version\\My Exported\n  Templates\\</p>\n  \n  <p>Extract the .zip file.</p>\n  \n  <p>Modify or delete the current template files, or add new files to the\n  template.</p>\n  \n  <p>Open, modify, and save the .vstemplate XML file to handle updated\n  behavior or new files. For more information about the .vstemplate\n  schema, see Visual Studio Template Schema Reference. For more\n  information about what you can parameterize in the source files, see\n  Template Parameters</p>\n  \n  <p>Select the files in your template, right-click, click Send To, and \n  then click Compressed (zipped) Folder. The files that you selected are\n  compressed into a .zip file.</p>\n  \n  <p>Put the new .zip file in the same directory as the old .zip file.</p>\n  \n  <p>Delete the extracted template files and the old template .zip file.</p>\n  \n  <p>Start (as administrator) an instance of the Developer Command Prompt\n  (on the start menu, under Visual Studio 2010 / Visual Studio Tools /\n  Developer Command Prompt).</p>\n  \n  <p>Run the following command: devenv /installvstemplates.  </p>\n</blockquote>\n\n<p>The other mentioned things can be changed too.</p>\n"}, {"comments": [{"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1448500921, "post_id": 33929081, "comment_id": 55619180, "body": "I know that Unicode is very important, but I am making a simple project right now, so it doesn&#39;t make sense to write <code>wchar_t *</code> instead of <code>char *</code> and <code>L&quot;string&quot;</code> instead of <code>&quot;string&quot;</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1448542546, "post_id": 33929081, "comment_id": 55637590, "body": "No, it really does not make sense to use ANSI. Is it really that hard to find the <code>L</code> key on your keyboard?"}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": false, "score": 4, "last_activity_date": 1448500305, "creation_date": 1448500305, "answer_id": 33929081, "question_id": 33928199, "link": "https://stackoverflow.com/questions/33928199/change-default-code-visual-studio-2015-community/33929081#33929081", "title": "Change default code Visual Studio 2015 Community", "body": "<p>You should not want to use the <code>A</code> versions instead of <code>W</code> versions of functions in 2015. Not every code page has every character you'll want to use, you may wind up not using solely English in the future in some major project, and virtually all the data we communicate on the Internet is in some form of Unicode. For Windows programs, you will have to embrace wide strings and UTF-16; Microsoft has yet to invent the time machine that will let us use UTF-8 directly in APIs. (Microsoft's adoption of Unicode predated UTF-8.) The <code>A</code> functions do not work with UTF-8 because UTF-8 is not a valid process code page (it is only valid in the character set conversion functions).</p>\n\n<p>If you really want to avoid using UTF-16 as much as possible, you will need to convert between UTF-8 and UTF-16 at every API call point. Not using either UTF-8 or UTF-16 for text, though, is no longer recommended. In fact, it's a great thing that VS2015, according to your code sample above, dropped the <code>TCHAR</code> madness of prior versions that continues to confuse beginning Windows programmers (<em>especially</em> here on Stack Overflow) to this day.</p>\n"}], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 33928389, "answer_count": 2, "score": 0, "last_activity_date": 1448500305, "creation_date": 1448494064, "last_edit_date": 1448494790, "question_id": 33928199, "link": "https://stackoverflow.com/questions/33928199/change-default-code-visual-studio-2015-community", "title": "Change default code Visual Studio 2015 Community", "body": "<p>How can I change the code that VS automatically generates for a Win32 Project? Instead of this:</p>\n\n<pre><code>// testproj.cpp : Defines the entry point for the application.\n//\n\n#include \"stdafx.h\"\n#include \"testproj.h\"\n\n#define MAX_LOADSTRING 100\n\n// Global Variables:\nHINSTANCE hInst;                                // current instance\nWCHAR szTitle[MAX_LOADSTRING];                  // The title bar text\nWCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name\n\n// Forward declarations of functions included in this code module:\nATOM                MyRegisterClass(HINSTANCE hInstance);\nBOOL                InitInstance(HINSTANCE, int);\nLRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);\nINT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                     _In_opt_ HINSTANCE hPrevInstance,\n                     _In_ LPWSTR    lpCmdLine,\n                     _In_ int       nCmdShow)\n{\n    UNREFERENCED_PARAMETER(hPrevInstance);\n    UNREFERENCED_PARAMETER(lpCmdLine);\n\n    // TODO: Place code here.\n\n    // Initialize global strings\n    LoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);\n    LoadStringW(hInstance, IDC_TESTPROJ, szWindowClass, MAX_LOADSTRING);\n    MyRegisterClass(hInstance);\n\n    // Perform application initialization:\n    if (!InitInstance (hInstance, nCmdShow))\n    {\n        return FALSE;\n    }\n\n    HACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_TESTPROJ));\n\n    MSG msg;\n\n    // Main message loop:\n    while (GetMessage(&amp;msg, nullptr, 0, 0))\n    {\n        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;msg))\n        {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n\n    return (int) msg.wParam;\n}\n\n\n\n//\n//  FUNCTION: MyRegisterClass()\n//\n//  PURPOSE: Registers the window class.\n//\nATOM MyRegisterClass(HINSTANCE hInstance)\n{\n    WNDCLASSEXW wcex;\n\n    wcex.cbSize = sizeof(WNDCLASSEX);\n\n    wcex.style          = CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc    = WndProc;\n    wcex.cbClsExtra     = 0;\n    wcex.cbWndExtra     = 0;\n    wcex.hInstance      = hInstance;\n    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_TESTPROJ));\n    wcex.hCursor        = LoadCursor(nullptr, IDC_ARROW);\n    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);\n    wcex.lpszMenuName   = MAKEINTRESOURCEW(IDC_TESTPROJ);\n    wcex.lpszClassName  = szWindowClass;\n    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));\n\n    return RegisterClassExW(&amp;wcex);\n}\n\n//\n//   FUNCTION: InitInstance(HINSTANCE, int)\n//\n//   PURPOSE: Saves instance handle and creates main window\n//\n//   COMMENTS:\n//\n//        In this function, we save the instance handle in a global variable and\n//        create and display the main program window.\n//\nBOOL InitInstance(HINSTANCE hInstance, int nCmdShow)\n{\n   hInst = hInstance; // Store instance handle in our global variable\n\n   HWND hWnd = CreateWindowW(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,\n      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\n\n   if (!hWnd)\n   {\n      return FALSE;\n   }\n\n   ShowWindow(hWnd, nCmdShow);\n   UpdateWindow(hWnd);\n\n   return TRUE;\n}\n\n//\n//  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)\n//\n//  PURPOSE:  Processes messages for the main window.\n//\n//  WM_COMMAND  - process the application menu\n//  WM_PAINT    - Paint the main window\n//  WM_DESTROY  - post a quit message and return\n//\n//\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n    case WM_COMMAND:\n        {\n            int wmId = LOWORD(wParam);\n            // Parse the menu selections:\n            switch (wmId)\n            {\n            case IDM_ABOUT:\n                DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n                break;\n            case IDM_EXIT:\n                DestroyWindow(hWnd);\n                break;\n            default:\n                return DefWindowProc(hWnd, message, wParam, lParam);\n            }\n        }\n        break;\n    case WM_PAINT:\n        {\n            PAINTSTRUCT ps;\n            HDC hdc = BeginPaint(hWnd, &amp;ps);\n            // TODO: Add any drawing code that uses hdc here...\n            EndPaint(hWnd, &amp;ps);\n        }\n        break;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n}\n\n// Message handler for about box.\nINT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    UNREFERENCED_PARAMETER(lParam);\n    switch (message)\n    {\n    case WM_INITDIALOG:\n        return (INT_PTR)TRUE;\n\n    case WM_COMMAND:\n        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)\n        {\n            EndDialog(hDlg, LOWORD(wParam));\n            return (INT_PTR)TRUE;\n        }\n        break;\n    }\n    return (INT_PTR)FALSE;\n}\n</code></pre>\n\n<p>I want it to auto generate some other code. How could I do this?</p>\n\n<p>Edit: Also, how do I get VS to not generate precompiled headers for globally (I know how to change it for every project, but that is annoying). And how do I get it to use the <code>A</code> versions of the Win32 by default and not the <code>W</code>?</p>\n"}, {"tags": ["c++", "qt", "qml", "qt-creator", "qt-quick"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4347973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a162526a8081dd0f69c4a15800c44b1?s=128&d=identicon&r=PG", "display_name": "Bea Lam", "link": "https://stackoverflow.com/users/4347973/bea-lam"}, "is_accepted": false, "score": 1, "last_activity_date": 1449121622, "creation_date": 1449121622, "answer_id": 34058739, "question_id": 33928167, "link": "https://stackoverflow.com/questions/33928167/repeater-element-in-top-level-qml-file-causes-binding-loop-in-qtquick-1-1-qtcre/34058739#34058739", "title": "Repeater element in top level qml file causes binding loop in QtQuick 1.1 (QtCreator 3.5.1)", "body": "<p>I can't see any reason for a binding loop being created by the simple code you have shown. If the binding loop is just reported by the Analyzer, and not in actual console output by the application, I suspect it is a bug in the Analyzer in the way it determines binding loops, rather than in the code itself.</p>\n"}], "owner": {"reputation": 31, "user_id": 5606262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3knkHMv0k-o/AAAAAAAAAAI/AAAAAAAACo0/LpV6hR-ZjEg/photo.jpg?sz=128", "display_name": "Samantha Downs", "link": "https://stackoverflow.com/users/5606262/samantha-downs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1449121622, "creation_date": 1448493880, "last_edit_date": 1448869889, "question_id": 33928167, "link": "https://stackoverflow.com/questions/33928167/repeater-element-in-top-level-qml-file-causes-binding-loop-in-qtquick-1-1-qtcre", "title": "Repeater element in top level qml file causes binding loop in QtQuick 1.1 (QtCreator 3.5.1)", "body": "<p>I have been trying to track down some binding loops in a Qt 4.8.4 (QtQuick 1.1) application at work. I did some experimentation and found the following basic example results in a binding loop detected by the QML Analyzer in QtCreator 3.5.1:</p>\n\n<pre><code>import QtQuick 1.1\n\nRectangle {\n    Repeater {\n        model: 1000\n        Text { text: \"I'm item \" + index }\n    }\n}\n</code></pre>\n\n<p>If I move the Repeater element out to another qml file called Multiple.qml which contains:</p>\n\n<pre><code>import QtQuick 1.1\n\nRepeater {\n    model: 1000\n    Text { text: \"I'm item \" + index }\n}\n</code></pre>\n\n<p>and change my main.qml to the following, the binding loop goes away:</p>\n\n<pre><code>import QtQuick 1.1\n\nRectangle {\n    Multiple {}\n}\n</code></pre>\n\n<p>The 1000 iterations is not a realistic example. I used it to scale up some of the time deltas in the QML Profiler. The issue occurs with any number of iterations >= 1.</p>\n\n<p>The Analyzer events output also claims that \"create\" has been called for the top main.qml 1001 times (number of Repeater iterations + 1), however analysis with massif seems to indicate that memory usage does not increase when the binding loop is detected. It does appear to be eating up additional time according to the Analyzer output. On my machine, the main.qml create is 71 ms vs 124 ms.</p>\n\n<p>I did some further experimentation. If I put the Repeater element into another QML file and instantiate it using Qt.creatComponent(\"MyComp.qml\" and <code>&lt;component&gt;.createObject()</code> from the main qml file, I also get a binding loop. If MyComp.qml uses Multiple {} instead, the binding loop goes away.</p>\n\n<p>I have also tried a more recent version of Qt 5.5.0 - same issue.</p>\n\n<p>Is this expected behaviour? Could it be a bug in QtCreator itself? I had a search through the QtCreator Jira and couldn't find any related issues.</p>\n"}, {"tags": ["c++", "overloading", "accessor", "brackets", "mutators"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448493741, "post_id": 33928044, "comment_id": 55617293, "body": "<code>const</code> (i.e. following the function declaration) for the class instance is the culprit."}], "answers": [{"comments": [{"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1448494317, "post_id": 33928063, "comment_id": 55617485, "body": "oooooh ok... I thought that it was contextual. tyvm :) I understood these as &quot;getters and setters,&quot; where #1 would be used to get, and #2 to set. Here the compiler uses #1 for getting data from const instances, and #2 to both get AND set data for mutable instances. #epiphany"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 5, "last_activity_date": 1448493232, "creation_date": 1448493232, "answer_id": 33928063, "question_id": 33928044, "link": "https://stackoverflow.com/questions/33928044/bracket-overload-for-assignment-and-retrieval-const-reference/33928063#33928063", "title": "Bracket Overload for Assignment and Retrieval; const, reference", "body": "<p>It invokes the first one for any constant instance (like <code>const Cheese</code> or <code>const Cheese&amp;</code>) and the second one for mutable instances.</p>\n"}, {"comments": [{"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1448519276, "post_id": 33929153, "comment_id": 55624119, "body": "So then, what would the instance usage look like? With this proxy, would <b>cout &lt;&lt; cheddar[1] &lt;&lt; endl;</b> be correct for getting? <b>cheddar[2] = 100;</b> for setting?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1448521839, "post_id": 33929153, "comment_id": 55625221, "body": "Yes--you&#39;d use it just as if the <code>operator[]</code> was doing things directly. The one place it makes a big difference is if you were depending on a user-defined conversion happening implicitly (this already uses an implicit, user-defined conversion, and only one is allowed in an expression)."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1448500824, "creation_date": 1448500824, "answer_id": 33929153, "question_id": 33928044, "link": "https://stackoverflow.com/questions/33928044/bracket-overload-for-assignment-and-retrieval-const-reference/33929153#33929153", "title": "Bracket Overload for Assignment and Retrieval; const, reference", "body": "<p>In case you care about a way you <em>can</em> get roughly the effect you seem to want (specifically, to have one function executed to get the value, and other code to set the value, dependably), there is a way to do that.</p>\n\n<p>The usual way is to return a proxy instead of returning the value (or a reference to it) directly. The proxy overloads <code>operator T</code> and <code>operator=</code>.</p>\n\n<pre><code>template &lt;class T&gt;\nclass Proxy { \n    T value;\npublic:\n    Proxy(T v) : value(v) {}\n\n    // used only to get value\n    operator T() const { return value; } \n\n    // used only to set value\n    Proxy &amp;operator=(T new_value) { \n        value = new_value;\n        return *this;\n    }\n};\n</code></pre>\n\n<p>Then your overload just returns an instance of this:</p>\n\n<pre><code>Proxy&lt;Cheese &amp;&gt; operator[](int i) { return Proxy&lt;int&gt;(weight[i]); }\nProxy&lt;Cheese const &amp;&gt; operator[](int i) const { return Proxy&lt;int&gt;(weight[i]); }\n</code></pre>\n\n<p>Note that in the second case, <code>T</code> has the type <code>Cheese const &amp;</code> and <code>operator=</code> isn't a <code>const</code> member function, so you won't be able to use <code>operator=</code> in this case (which is exactly what you normally want).</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 33928063, "answer_count": 2, "score": 1, "last_activity_date": 1448518655, "creation_date": 1448493104, "last_edit_date": 1448518655, "question_id": 33928044, "link": "https://stackoverflow.com/questions/33928044/bracket-overload-for-assignment-and-retrieval-const-reference", "title": "Bracket Overload for Assignment and Retrieval; const, reference", "body": "<p>Regarding overloading brackets in C++, my compiler is using the mutator method for access. Can anyone tell me why?</p>\n\n<pre><code>1. const int &amp; Cheese::operator [] (int i)const { return weight[i]; } //accessor\n2. int &amp; Cheese::operator [] (int i) { return weight[i]; } //mutator\n</code></pre>\n\n<p>For example, the cout command below is using the mutator function definition--#2 above--to access the data.</p>\n\n<pre><code>Cheese cheddar;\ncout &lt;&lt; cheddar[2] &lt;&lt; endl;\n</code></pre>\n\n<p>Why is this not using the first function--the accessor--to get the data? I would think that, since the cout is simply a retrieval, it would fire on the first. </p>\n\n<p>How does the compiler know which of these to invoke?</p>\n\n<p>EDIT: For completeness, by mutator, I mean used as a \"setter,\" like so:</p>\n\n<pre><code>cheddar[2] = 100;\n</code></pre>\n\n<p>Both together would be as follows:</p>\n\n<pre><code>cheddar[2] = cheddar[1];\n</code></pre>\n\n<p>Where the rhs is just a \"getter.\" It simply retrieves the value of <em>cheddar[1]</em>, does not change anything, and thus can be const. In contrast, the lhs bracket overload <em>cheddar[2]</em> functions as a \"setter;\" the value can be changed, and function return value can't be const.</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1448493023, "post_id": 33927997, "comment_id": 55617050, "body": "You should fix the indentation that probably occurred when copying+pasting into StackOverflow to make the code easier to read. Also note that <a href=\"http://www.stroustrup.com/bs_faq2.html#void-main\" rel=\"nofollow noreferrer\"><code>void main</code> <b>is not</b> valid C++</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1448493139, "post_id": 33927997, "comment_id": 55617093, "body": "You are using <code>*data</code> when it is a <code>nullptr</code>. That will fail before you reach the struct. Oh, and you have two variables called <code>data</code>. Not going to work either."}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 3, "creation_date": 1448493505, "post_id": 33927997, "comment_id": 55617218, "body": "Are you condemned to a manual memory management? Since it&#39;s a homework you could be. But if not, simply use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> of <code>vector</code>s of <code>int</code> (or simply a <code>std::vector&lt;int&gt;</code> and don&#39;t bother."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1448494416, "post_id": 33927997, "comment_id": 55617519, "body": "Why did you make your array have 5 columns but only provide 4 values for each row?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1448494477, "post_id": 33927997, "comment_id": 55617539, "body": "This whole idea is awful; even if you don&#39;t want to use container classes you should just have <code>int exams[NG];</code> in each <code>StudentRecord</code> rather than using a pointer"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1448494900, "post_id": 33928209, "comment_id": 55617666, "body": "@immibis: It&#39;s not an array of arrays, but it is one of several ways of implementing the concept of a 2D array."}, {"owner": {"reputation": 1311, "user_id": 1313573, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/81d7723fddd8e8c52e072e2e7828bebb?s=128&d=identicon&r=PG&f=1", "display_name": "jtedit", "link": "https://stackoverflow.com/users/1313573/jtedit"}, "edited": false, "score": 0, "creation_date": 1448495426, "post_id": 33928209, "comment_id": 55617813, "body": "edited the answer a bit to avoid ambiguity, I realize an array of pointers is not the same as a stack allocated 2D array."}], "tags": [], "owner": {"reputation": 1311, "user_id": 1313573, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/81d7723fddd8e8c52e072e2e7828bebb?s=128&d=identicon&r=PG&f=1", "display_name": "jtedit", "link": "https://stackoverflow.com/users/1313573/jtedit"}, "is_accepted": false, "score": 0, "last_activity_date": 1448495342, "last_edit_date": 1448495342, "creation_date": 1448494119, "answer_id": 33928209, "question_id": 33927997, "link": "https://stackoverflow.com/questions/33927997/how-to-dynamically-allocate-an-2d-array-to-a-struct/33928209#33928209", "title": "How to dynamically allocate an 2d array to a struct", "body": "<p>There's a number of problems with your current code.</p>\n\n<pre><code>StudentRecords *data = nullptr; //here you set data to nullptr\n(*data).examsptr = new int[][NG]; //then you dereference nullptr, BAD\n\nint *data = new int[NG*NG]; //then you declare another variable with the same name, BAD\n</code></pre>\n\n<p>You should rename one of your variables and set student records to an actual instance of StudentRecords.</p>\n\n<p>You can't dynamically allocate a 2D array in one step like 'new int[rows][cols]'. Instead you either need to allocate a 1D array with rows*cols elements and do maths to convert a row and col into an index of the 1D array or you need to allocate an array of pointers, where each pointer points to an array holding the data. To hold the array of pointers you need a pointer to a pointer, so you need to make examsptr an int**.</p>\n\n<p>You then need to allocate the arrays that are pointed at by the array of pointers in a loop.</p>\n\n<p>EG:</p>\n\n<pre><code>//cant be nullptr if you want to dereference it\nStudentRecords *data = new StudentRecords(); \n\n//data-&gt; is shorthand for (*data).\n//allocates array of pointers, length NG\ndata-&gt;examsptr = new int*[NG]\n\n//now make the 2nd dimension of arrays\nfor(int i = 0; i &lt; NG; ++i){\n    data-&gt;examsptr[i] = new int[NG];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5495554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbac171cdaf25cff1626500d7842acb9?s=128&d=identicon&r=PG&f=1", "display_name": "camhavel", "link": "https://stackoverflow.com/users/5495554/camhavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448495342, "creation_date": 1448492826, "last_edit_date": 1448493198, "question_id": 33927997, "link": "https://stackoverflow.com/questions/33927997/how-to-dynamically-allocate-an-2d-array-to-a-struct", "title": "How to dynamically allocate an 2d array to a struct", "body": "<p>I'm trying to dynamically allocate an array on the heap using a structure that has a pointer to an array and a string. Here's my code. </p>\n\n<pre><code>    struct StudentRecords\n  {\n     string names;\n     int* examsptr;\n  };\n\n\n    void main()\n  {\n\n\nconst int NG = 5;\n\nstring names[] =  { \"Amy Adams\", \"Bob Barr\", \"Carla Carr\",\n                     \"Dan Dobbs\", \"Elena Evans\"\n                   };\n\nint exams[][NG] = \n{ \n    { 98,87,93,88 },\n    { 78,86,82,91 },\n    { 66,71,85,94 },\n    { 72,63,77,69 },\n    { 91,83,76,60 }\n};\n\nStudentRecords *data = nullptr;\n(*data).examsptr = new int[][NG];\n\nint *data = new int[NG*NG];\n</code></pre>\n"}, {"tags": ["c++", "timeout", "stringstream", "sstream"], "comments": [{"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1448493381, "post_id": 33927987, "comment_id": 55617179, "body": "What do you mean by &#39;timeout&#39;? If your code is running slow, I suspect it is because of all the std::strings you are creating. A std::stringstream is a stream just like any other, and you should treat it as such. You don&#39;t need to keep creating a str()ing or resetting the stream&#39;s str()ing."}, {"owner": {"reputation": 31, "user_id": 5598007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153328486882399/picture?type=large", "display_name": "Yang-Yang Feng", "link": "https://stackoverflow.com/users/5598007/yang-yang-feng"}, "reply_to_user": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1448758577, "post_id": 33927987, "comment_id": 55712804, "body": "What do you mean by this? I don&#39;t really understand how a stream works. I think ideally I could write something that just uses stream member functions that read in the list, ignoring the commas, and stopping at the end of the list. How do I do this?"}, {"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1448762266, "post_id": 33927987, "comment_id": 55713548, "body": "You are constantly modifying the stream by creating and destroying new strings. You don&#39;t need to do that. See below for code to demonstrate."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5598007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153328486882399/picture?type=large", "display_name": "Yang-Yang Feng", "link": "https://stackoverflow.com/users/5598007/yang-yang-feng"}, "edited": false, "score": 0, "creation_date": 1448752956, "post_id": 33929149, "comment_id": 55711635, "body": "I see, thanks alot. I&#39;m new to coding so the debugging tip is very helpful.  You say that my function implementation could be improved, and I&#39;m sure of this. I don&#39;t think I really understand how sstreams or streams in general work. Given an understanding of sstreams, what would be an elegant implementation?"}], "tags": [], "owner": {"reputation": 6962, "user_id": 3271687, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/25c0a4cbbfdcc44075d2f8631ad353b9?s=128&d=identicon&r=PG&f=1", "display_name": "yolenoyer", "link": "https://stackoverflow.com/users/3271687/yolenoyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1448501754, "last_edit_date": 1448501754, "creation_date": 1448500787, "answer_id": 33929149, "question_id": 33927987, "link": "https://stackoverflow.com/questions/33927987/why-am-i-getting-a-timeoutusing-sstream-to-parse-list-of-integers-separated-by/33929149#33929149", "title": "Why am I getting a timeout(using sstream to parse list of integers separated by commas)?", "body": "<p>Your function implementation could be really improved, but following your logic, if you replace the second <code>while</code> line:</p>\n\n<pre><code>        while (!ispunct(list_initial.str()[0])){ //get to next int in list\n</code></pre>\n\n<p>by this one, adding a length check:</p>\n\n<pre><code>        while (list_initial.str().size() &amp;&amp; !ispunct(list_initial.str()[0])){ //get to next int in list\n</code></pre>\n\n<p>, then is runs, works well and exits well.</p>\n\n<h2>Explanations</h2>\n\n<p>This loop was never breaking, because at the end of the process, <code>ispunct()</code> function was never recognizing its parameter, <code>!list_initial.str()[0]</code>, as something true : the string <code>list_initial.str()</code> is empty at this moment, then the <code>0</code> index doesn't exist.<br>\nPlease look at the doc on <a href=\"http://www.cplusplus.com/reference/string/string/operator%5B%5D/\" rel=\"nofollow\">cplusplus.com</a>:</p>\n\n<blockquote>\n  <p>If pos is equal to the string length, the const-version never throws exceptions (no-throw guarantee).<br>\n    Otherwise, it causes undefined behavior.</p>\n</blockquote>\n\n<p>Your program was freezing because it didn't found the right condition which could have leaded to leaving the above loop.</p>\n\n<h2>Advices</h2>\n\n<p>One important thing to talk about your question is : <strong>why didn't you find the answer yourself ?</strong> One answer for this question is the following : you didn't try to debug your code.</p>\n\n<p>To answer your question, I just debugged your code, and found quickly the problem just by adding this kind of lines around your code, to see what happened:</p>\n\n<pre><code>cout &lt;&lt; \"list_initial: \" &lt;&lt; list_initial.str() &lt;&lt; endl;\n</code></pre>\n\n<p>An example for your code, with debug statements added::</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nvector&lt;int&gt; parseInts(string str) {\n    cout &lt;&lt; \"begin parseInts()\" &lt;&lt; endl;  // ######  DEBUG  ######\n\n    int a; //will use this to hold the value of the 1st int in the sstream\n    stringstream list_initial; //will iterate over this sstream\n    list_initial.str(str); //set sstream to represent input str\n    vector&lt;int&gt; list_final; //will return this final vector for output in main\n\n    cout &lt;&lt; \"begin while 1\" &lt;&lt; endl;  // ######  DEBUG  ######\n    while (!list_initial.str().empty()){ //stop iterating at end of string\n        list_initial &gt;&gt; a; //store leading int value in a\n        list_final.push_back(a); //add a to end of vector\n\n        cout &lt;&lt; \"a: \" &lt;&lt; a &lt;&lt; endl;  // ######  DEBUG  ######\n        cout &lt;&lt; \"begin while 2\" &lt;&lt; endl;  // ######  DEBUG  ######\n        while (!ispunct(list_initial.str()[0])){ //get to next int in list\n\n            cout &lt;&lt; \"list_initial: \" &lt;&lt; list_initial.str() &lt;&lt; endl;  // ######  DEBUG  ######\n\n            list_initial.str(list_initial.str().erase(0,1));\n        };\n        cout &lt;&lt; \"endwhile 2\" &lt;&lt; endl;  // ######  DEBUG  ######\n\n        list_initial.str(list_initial.str().erase(0,1)); //erase leading comma\n    };\n    cout &lt;&lt; \"endwhile 1\" &lt;&lt; endl;  // ######  DEBUG  ######\n\n    cout &lt;&lt; \"end parseInts()\" &lt;&lt; endl;  // ######  DEBUG  ######\n\n    return list_final;   \n};\n\nint main() {\n    string str;\n    cin &gt;&gt; str;\n    vector&lt;int&gt; integers = parseInts(str);\n\n    cout &lt;&lt; \"begin for\" &lt;&lt; endl;  // ######  DEBUG  ######\n    for(int i = 0; i &lt; integers.size(); i++) {\n        cout &lt;&lt; integers[i] &lt;&lt; \"\\n\";\n    }\n    cout &lt;&lt; \"end for\" &lt;&lt; endl;  // ######  DEBUG  ######\n\n    return 0;\n}\n</code></pre>\n\n<p>This (very basic) debugging technic permits you to quickly find out a bug in your code; just add some <code>cout &lt;&lt; ... &lt;&lt; endl;</code> lines inside the code to point out some important informations, i.e.: \"Which loop is causing freezing?\", or \"What is the content of this variable at this moment?\".</p>\n\n<p>If you put <code>cout &lt;&lt; \"Entering While loop 1\" &lt;&lt; endl;</code> before, and <code>cout &lt;&lt; \"Exiting While loop 1\" &lt;&lt; endl;</code> after each suspected loop, you may learn many things about what happens during the execution of your program.</p>\n\n<p>With this debugging lines added, you can easily find out that the second loop is looping forever; then you can narrow your bug investigation to this loop.</p>\n"}, {"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1448762442, "creation_date": 1448762442, "answer_id": 33978581, "question_id": 33927987, "link": "https://stackoverflow.com/questions/33927987/why-am-i-getting-a-timeoutusing-sstream-to-parse-list-of-integers-separated-by/33978581#33978581", "title": "Why am I getting a timeout(using sstream to parse list of integers separated by commas)?", "body": "<p>A stream is an abstract file. It is just a bunch of text that can be understood by things like, for example, <code>cin &gt;&gt; n</code> to convert numbers to integers.</p>\n\n<p>Here's an idea of how to use a stream:</p>\n\n<pre><code>#include &lt;cctype&gt;\n#include &lt;ciso646&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nvector&lt;int&gt; parse_ints( const string&amp; s )\n{\n  vector&lt;int&gt; ints;     // resulting list of ints\n  istringstream ss(s);  // stream of ints separated by (non-digits)\n  int n;                // each int extracted from the stream\n\n  // while input an int\n  while (ss &gt;&gt; n)\n  {\n    // save the int\n    ints.push_back(n);\n\n    // skip to next digit\n    while (ss and !isdigit(ss.peek())) ss.get();\n  }\n\n  return ints;\n}\n\nint main()\n{\n  vector&lt;int&gt; xs = parse_ints( \"2, 3 ,5; 7 : 11.13\\t17abc21\" );\n  for (int x : xs)\n    cout &lt;&lt; x &lt;&lt; \" \";\n  cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>2 3 5 7 11 13 17 21\n</code></pre>\n\n<p>Notice how we can simply skip characters we aren't interested in? In this particular case, we skip <em>all</em> non-digit characters.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 31, "user_id": 5598007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153328486882399/picture?type=large", "display_name": "Yang-Yang Feng", "link": "https://stackoverflow.com/users/5598007/yang-yang-feng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1448762442, "creation_date": 1448492796, "question_id": 33927987, "link": "https://stackoverflow.com/questions/33927987/why-am-i-getting-a-timeoutusing-sstream-to-parse-list-of-integers-separated-by", "title": "Why am I getting a timeout(using sstream to parse list of integers separated by commas)?", "body": "<p>I am given an input string of n integers, separated by commas (e.g. \"23,4,56\"). I need to set a stringstream to represent this string and then use it to scan each integer into a vector. The elements of the vector (the integers in the list) will end up being output line by line. I am given the main(), and am simply responsible for writing parseInts(string str). For some reason, I keep getting a timeout. I'm guessing it's something in my while loops, specifically concerning how I am manipulating my sstream with str(), but I can't figure out exactly what is going on. I am new to sstream and C++ so any help would be appreciated! </p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nvector&lt;int&gt; parseInts(string str) {\n    int a; //will use this to hold the value of the 1st int in the sstream\n    stringstream list_initial; //will iterate over this sstream\n    list_initial.str(str); //set sstream to represent input str\n    vector&lt;int&gt; list_final; //will return this final vector for output in main\n    while (!list_initial.str().empty()){ //stop iterating at end of string\n        list_initial&gt;&gt;a; //store leading int value in a\n        list_final.push_back(a); //add a to end of vector\n        while (!ispunct(list_initial.str()[0])){ //get to next int in list\n            list_initial.str(list_initial.str().erase(0,1));\n        };\n        list_initial.str(list_initial.str().erase(0,1)); //erase leading comma\n    };\n    return list_final;   \n};\n\nint main() {\n    string str;\n    cin &gt;&gt; str;\n    vector&lt;int&gt; integers = parseInts(str);\n    for(int i = 0; i &lt; integers.size(); i++) {\n        cout &lt;&lt; integers[i] &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "for-loop", "macros"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448492467, "post_id": 33927891, "comment_id": 55616804, "body": "All the text in your post is wrong .. the question would be improved by deleting that and just asking your question"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1448492500, "post_id": 33927891, "comment_id": 55616819, "body": "What if the array is called x?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448492538, "post_id": 33927891, "comment_id": 55616844, "body": "You need <code>#include &lt;iterator&gt;</code> to fix the error about <code>begin</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448492552, "post_id": 33927891, "comment_id": 55616851, "body": "Macros are rarely <i>safe</i>, they&#39;re just providing simple text processing. Check the results compiling your code just using the cpp preprocessor."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448492625, "post_id": 33927891, "comment_id": 55616871, "body": "Macros like this should at least use the <a href=\"http://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros\">do...while(0) trick</a> or similar"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448492702, "post_id": 33927891, "comment_id": 55616903, "body": "<code>show(1,2)</code> won&#39;t work either (the comma is grammatically an argument separator there , not part of an argument) so this macro is awkward to use even if implemented better"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448493617, "post_id": 33927891, "comment_id": 55617254, "body": "@M.M I&#39;m not seeing the problem there. The same thing would happen with a function."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1448493857, "post_id": 33927891, "comment_id": 55617322, "body": "@immibis You could make the function accept variadic template"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1448492643, "post_id": 33927918, "comment_id": 55616877, "body": "This is useful info but doesn&#39;t answer the question"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448492748, "post_id": 33927918, "comment_id": 55616929, "body": "@M.M Agree with you, and usually I don&#39;t respond with these kind of answers, yet now I am still tempted to leave it here since many people have no idea you can actually pass the array by reference. The absolutely correct answer to the question per se is NO, macros are not safe, some reasons being mentioned in the comments."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1448493150, "post_id": 33927918, "comment_id": 55617098, "body": "Yes, this does answer the question. In the last sentence. It goes further and corrects the incorrect premise of the question, which makes it strictly superior to an answer which just answers the question."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1448493216, "post_id": 33927918, "comment_id": 55617127, "body": "@vsoftco I&#39;m not that much into macro functions, but I just couldn&#39;t resist to ask :) I didn&#39;t know the one you presented above, nor about passing array by reference. Thanks for your answer."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 10, "last_activity_date": 1448493066, "last_edit_date": 1448493066, "creation_date": 1448492451, "answer_id": 33927918, "question_id": 33927891, "link": "https://stackoverflow.com/questions/33927891/is-this-macro-for-writing-out-any-array-content-100-safe-c11/33927918#33927918", "title": "Is this macro for writing out any array content 100 % safe? c++11", "body": "<p>You <em>can</em> have a 100% C++ template function instead, in which the array <em>does not</em> decay to a pointer, by passing the array by reference and having its size and type deduced:</p>\n\n<pre><code>template&lt;typename T, size_t N&gt;\nvoid print_arr(const T(&amp;arr)[N])\n{\n    for(auto&amp;&amp; elem: arr)\n        std::cout &lt;&lt; elem;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/04a52938f4af4075\" rel=\"noreferrer\"><kbd>Live on Coliru</kbd></a></p>\n\n<p>A macro is rarely safe, so prefer using (if can) a proper function, which is type checked etc.</p>\n"}], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 33927918, "answer_count": 1, "score": -1, "last_activity_date": 1448493066, "creation_date": 1448492296, "question_id": 33927891, "link": "https://stackoverflow.com/questions/33927891/is-this-macro-for-writing-out-any-array-content-100-safe-c11", "title": "Is this macro for writing out any array content 100 % safe? c++11", "body": "<p>I know C++ doesn't get well macro-functions, but I found this.</p>\n\n<pre><code>#define show(array)              \\\n    for (auto&amp; x : (array))      \\\n    std::cout &lt;&lt; x &lt;&lt; std::endl; \\\n</code></pre>\n\n<p>We can't have inline function alternative to this macro, because array is sent to function as a pointer, so it's impossible.\nWith this, even if we try to apply something indecent, it will just result in compile-time error (if object isn't iterable), and it's obvious one:</p>\n\n<pre><code>'begin' was not declared in this scope: show(5);\n</code></pre>\n\n<p>Then my question - is this absolutely safe? Can it result in creating a \"bad situation\"?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1448492017, "post_id": 33927808, "comment_id": 55616638, "body": "OT: <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\" title=\"what are the rules about using an underscore in a c identifier\">stackoverflow.com/questions/228783/&hellip;</a>"}, {"owner": {"reputation": 67, "user_id": 2312493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4687f5afda037519b52a9e9f2a6f0095?s=128&d=identicon&r=PG", "display_name": "MolerC", "link": "https://stackoverflow.com/users/2312493/molerc"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1448492246, "post_id": 33927808, "comment_id": 55616721, "body": "so is the error because of the extra __ in front of the define statement"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1448492399, "post_id": 33927808, "comment_id": 55616774, "body": "Unlikely, it was just a remark. You also can&#39;t have <code>__</code> at the end either btw."}], "answers": [{"tags": [], "owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": true, "score": 0, "last_activity_date": 1448492419, "creation_date": 1448492419, "answer_id": 33927912, "question_id": 33927808, "link": "https://stackoverflow.com/questions/33927808/identifier-uses-undefined-class-after-including-the-header/33927912#33927912", "title": "identifier uses undefined class after including the header", "body": "<p>You cannot define variables with an undefined (forward-declared) type because the compiler does not know how large they should be or how to call their constructor/destructor.</p>\n\n<p>Moreover what you did won't work, each .cpp will have its own copy of the variables. What you want is <code>extern LTexture gTileTexture;</code> and putting the definition in one .cpp.</p>\n"}], "owner": {"reputation": 67, "user_id": 2312493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4687f5afda037519b52a9e9f2a6f0095?s=128&d=identicon&r=PG", "display_name": "MolerC", "link": "https://stackoverflow.com/users/2312493/molerc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 33927912, "answer_count": 1, "score": 0, "last_activity_date": 1448500158, "creation_date": 1448491883, "last_edit_date": 1448500158, "question_id": 33927808, "link": "https://stackoverflow.com/questions/33927808/identifier-uses-undefined-class-after-including-the-header", "title": "identifier uses undefined class after including the header", "body": "<p>I have a program with several classes and ive linked them all together in one main header:</p>\n\n<pre><code>#ifndef __MAIN_H_INCLUDED__\n#define __MAIN_H_INCLUDED__\n\n//Using SDL, SDL_image, standard IO, strings, and file streams\n\n#include &lt;SDL.h&gt;\n#include &lt;SDL_image.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include \"ltexture.h\"\n#include \"tile.h\"\n#include \"player.h\"\n#include \"enemy.h\"\n#include \"egg.h\"\n</code></pre>\n\n<p>I then have a link to main.h in each of those header files. Everything links together except when i try to declare </p>\n\n<pre><code>class LTexture;\nLTexture gTileTexture;\nLTexture gPlayerSpriteSheetTexture;\nLTexture gEnemySpriteSheetTexture;\nLTexture gEggSpriteSheetTexture;\n</code></pre>\n\n<p>I get that each of them uses an undefined class \"LTexture\". I know im using forward declaration and include at the same time but this way gave me the least errors, just using include or forward declarations gave even more errors. The reason im declaring these in the header is because they're used in each of the other classes.</p>\n\n<p>The texture class im just using from lazyfoo's tutorial</p>\n\n<pre><code>#ifndef __LTEXTURE_H_INCLUDED__\n#define __LTEXTURE_H_INCLUDED__\n\n#include \"main.h\"\n\nclass LTexture\n{\npublic:\n    //Initializes variables\n    LTexture();\n\n    //Deallocates memory\n    ~LTexture();\n\n    //Loads image at specified path\n    bool loadFromFile(std::string path);\n\n    //Creates image from font string\n    bool loadFromRenderedText(std::string textureText, SDL_Color textColor);\n\n    //Deallocates texture\n    void free();\n\n    //Set color modulation\n    void setColor(Uint8 red, Uint8 green, Uint8 blue);\n\n    //Set blending\n    void setBlendMode(SDL_BlendMode blending);\n\n    //Set alpha modulation\n    void setAlpha(Uint8 alpha);\n\n    //Renders texture at given point\n    void render(int x, int y, SDL_Rect* clip = NULL, double angle = 0.0, SDL_Point* center = NULL, SDL_RendererFlip flip = SDL_FLIP_NONE);\n\n//Gets image dimensions\nint getWidth();\nint getHeight();\n\nprivate:\n    //The actual hardware texture\n    SDL_Texture* mTexture;\n\n    //Image dimensions\n    int mWidth;\n    int mHeight;\n};\n\n#endif\n</code></pre>\n\n<p>Why is LTexture undefined if i have it linked to a working texture class</p>\n\n<p>i tried placing all the extern definitions in one cpp and what i found is that it removes the errors from just that one cpp. So i split all the definitions to the specific class that they are needed however they're still needed in more than one and declaring them twice causes errors too. So is it a problem with how i linked headers? The way i set up my headers is each cpp references its header then the header references main.h. With main.h referencing every other header</p>\n"}, {"tags": ["c++", "data-structures", "stl", "containers", "priority-queue"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1448498116, "post_id": 33927414, "comment_id": 55618485, "body": "I don&#39;t like your  <code>vector&lt;T&gt;</code>. I want to use my own <code>vector&lt;T, MyAlloc&lt;T&gt;&gt;</code>. Why do you want to disallow that?"}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1448492033, "post_id": 33927460, "comment_id": 55616647, "body": "It&#39;s also worth mentioning that priority queues are actually binary heaps, and the latter are usually implemented in a contiguous storage, such as an array or <code>std::vector</code>."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 6, "last_activity_date": 1448490163, "creation_date": 1448490163, "answer_id": 33927460, "question_id": 33927414, "link": "https://stackoverflow.com/questions/33927414/whats-the-use-of-passing-a-container-to-priority-queue/33927460#33927460", "title": "What&#39;s the use of passing a container to priority_queue", "body": "<p><code>std::priority_queue</code> is a container adaptor. It doesn't actually know how to store the elements you put in it; it delegates that to a real container such as <code>std::vector</code>. It's rare that you'll want to use something other than <code>std::vector</code> as the underlying container, but you could use <code>std::deque</code> if you want to.</p>\n\n<p><code>std::vector</code> is the default, but since this is the second template argument, if you want to use a non-default value for the third template argument, you're forced to specify the second one, just like with function arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1448494996, "post_id": 33927513, "comment_id": 55617696, "body": "The reason is that the comparator used is the one that comes with the container -- there&#39;s no sense in keeping two comparators around and ignoring one of them."}], "tags": [], "owner": {"reputation": 427, "user_id": 5597039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dcc1c47e995b8d65e5eb78e9ab6c67?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cano", "link": "https://stackoverflow.com/users/5597039/nick-cano"}, "is_accepted": true, "score": 2, "last_activity_date": 1448820128, "last_edit_date": 1448820128, "creation_date": 1448490380, "answer_id": 33927513, "question_id": 33927414, "link": "https://stackoverflow.com/questions/33927414/whats-the-use-of-passing-a-container-to-priority-queue/33927513#33927513", "title": "What&#39;s the use of passing a container to priority_queue", "body": "<p>You're simply passing it the underlying container type which, by default, is <code>std::vector&lt;T&gt;</code>. If you want to retain the default behavior then you're correct in saying you can always pass <code>std::vector&lt;T&gt;</code>. You can also use <code>std::deque&lt;T&gt;</code>, or any custom container that exposes the following functions:</p>\n\n<ul>\n<li>empty()</li>\n<li>size()</li>\n<li>front()</li>\n<li>push_back()</li>\n<li>pop_back()</li>\n</ul>\n\n<p>But why must you specify a container before you can specify a comparator? Well, it just has to do with how the parameters are defined. <code>container</code> and <code>compare</code> are both default parameters, and <code>container</code> just happens to come first. Because of the way C++ works, you just have to pass all the parameters leading up to <code>compare</code> before you can pass it, meaning you have to also pass <code>container</code>. AFAIK it has nothing to do with <code>compare</code> needing to know anything about <code>container</code>.</p>\n"}], "owner": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 33927513, "answer_count": 2, "score": 1, "last_activity_date": 1448820128, "creation_date": 1448489961, "question_id": 33927414, "link": "https://stackoverflow.com/questions/33927414/whats-the-use-of-passing-a-container-to-priority-queue", "title": "What&#39;s the use of passing a container to priority_queue", "body": "<p>Every time you want to use a custom compare function for a priority_queue you have to pass it a container too. It seems to me, you should always pass a <code>vector&lt;T&gt;</code> to it. Now at first I thought this is some kind of redundancy, but it shouldn't be the case. What's the use of passing a container to a <code>priority_queue</code> and how can I make use of it?</p>\n"}, {"tags": ["c++", "ssl", "openssl", "boost-asio"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1448489892, "post_id": 33927364, "comment_id": 55615770, "body": "Yes, you can put both server and client code in the same binary. But there&#39;s no reason to use TCP and SSL. You can just use an anonymous socketpair."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1448492103, "post_id": 33927364, "comment_id": 55616661, "body": "I don&#39;t see how this question is &quot;too broad&quot; its a simple yes/no answer and the answer is yes. I can see this being relevant in some applications like  P2P networks."}], "answers": [{"comments": [{"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 2, "creation_date": 1448491118, "post_id": 33927605, "comment_id": 55616271, "body": "It&#39;s like driving the bread to the grocery store and back before making a sandwich :)"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1448555922, "post_id": 33927605, "comment_id": 55645990, "body": "For #4, I have seen some multiplayer games use this approach.  If the application protocol is processed at a discrete time steps, then the overhead of TCP may have no effect.  For these particular cases, one could argue that introducing branching logic creates technical debt at little gain."}], "tags": [], "owner": {"reputation": 12251, "user_id": 1199684, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d997a71f1df34149c9166926baad0d37?s=128&d=identicon&r=PG", "display_name": "bytecode77", "link": "https://stackoverflow.com/users/1199684/bytecode77"}, "is_accepted": true, "score": 0, "last_activity_date": 1448490846, "creation_date": 1448490846, "answer_id": 33927605, "question_id": 33927364, "link": "https://stackoverflow.com/questions/33927364/can-a-single-application-can-be-server-and-the-client-and-query-itself/33927605#33927605", "title": "Can a single application can be server and the client and query itself", "body": "<p>You can have a TCP server and client within the same program for communication.</p>\n\n<p>But it's not recommended:</p>\n\n<ol>\n<li>This will alert the Windows firewall even with default settings, because of the TCP server</li>\n<li>This makes your application more prone to eavesdropping.</li>\n<li>The performance will never be as good + see #4:</li>\n<li>Why would you communicate using TCP within your own application instead of using function parameters? It's like talking to yourself when shopping for groceries. </li>\n</ol>\n"}], "owner": {"reputation": 91, "user_id": 5442264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da433338eb030698def67e6ccfd0525?s=128&d=identicon&r=PG&f=1", "display_name": "The Bluff", "link": "https://stackoverflow.com/users/5442264/the-bluff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 33927605, "answer_count": 1, "score": -1, "last_activity_date": 1448490853, "creation_date": 1448489754, "last_edit_date": 1448490853, "question_id": 33927364, "link": "https://stackoverflow.com/questions/33927364/can-a-single-application-can-be-server-and-the-client-and-query-itself", "title": "Can a single application can be server and the client and query itself", "body": "<p>Can a single program be at the same time a server, a client and query itself over TCP (and ssl)?\nI'm working on a project where I need a configuration like that.\nI need to use the Boost Asio lib and OpenSSL.</p>\n"}, {"tags": ["c++", "macos", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1448531957, "post_id": 33927294, "comment_id": 55630947, "body": "If you want to install non-Apple packages, such as <code>OpenCV</code> or <code>ImageMagick</code> or <code>ffmpeg</code> or <code>gnuplot</code> or <code>parallel</code> or <code>pandoc</code> or <code>p7zip</code>, on a Mac, you really will do yourself a favour by installing <code>homebrew</code> from <a href=\"http://brew.sh\" rel=\"nofollow noreferrer\">brew.sh</a> as your Package Manager to download, install, update and remove packages. Then <code>OpenCV</code> is as easy as <code>brew install opencv</code> and you are finished."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5560196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6113723b6ad4e879bc897082b0a985e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby L.", "link": "https://stackoverflow.com/users/5560196/bobby-l"}, "edited": false, "score": 0, "creation_date": 1448510960, "post_id": 33928769, "comment_id": 55621509, "body": "I am getting an error: <code>&#39;opencv2&#47;opencv.hpp&#39; file not found</code>. How must my installed opencv-3.0.0 directory be arranged on my computer? Where do I find the headers and libraries? I also noticed that my <code>&#47;usr&#47;local&#47;</code> directory is empty."}, {"owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "reply_to_user": {"reputation": 63, "user_id": 5560196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6113723b6ad4e879bc897082b0a985e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby L.", "link": "https://stackoverflow.com/users/5560196/bobby-l"}, "edited": false, "score": 0, "creation_date": 1448531478, "post_id": 33928769, "comment_id": 55630628, "body": "When you followed the tutorial and created the SharedLibs folder, then used <code>make</code> then <code>make install</code>, what folder did you use ? If you&#39;re not sure, go back to CMake and scroll down until you find the <code>CMAKE_INSTALL_PREFIX</code> section. This should be path the compiled shared libraries and headers will have been copied after compilation."}, {"owner": {"reputation": 180, "user_id": 3361398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8784f4abf8762e222711db1d9a0dfaee?s=128&d=identicon&r=PG&f=1", "display_name": "docPhil", "link": "https://stackoverflow.com/users/3361398/docphil"}, "edited": false, "score": 0, "creation_date": 1448531779, "post_id": 33928769, "comment_id": 55630848, "body": "Have you tried using finder to locate it? It might not have installed correctly. You&#39;ll probably find several versions of it left over from the build process. The one you want is probably in /opt or /usr. Personally I find it easier to install opencv using mac port rather than build it myself. Also opencv3 has different header file layouts to 2.4 see <a href=\"http://docs.opencv.org/master/db/dfa/tutorial_transition_guide.html\" rel=\"nofollow noreferrer\">docs.opencv.org/master/db/dfa/tutorial_transition_guide.html</a>"}, {"owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "reply_to_user": {"reputation": 63, "user_id": 5560196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6113723b6ad4e879bc897082b0a985e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby L.", "link": "https://stackoverflow.com/users/5560196/bobby-l"}, "edited": false, "score": 0, "creation_date": 1448532838, "post_id": 33928769, "comment_id": 55631537, "body": "@BobbyL. If you run <code>pkg-config --libs --cflags opencv</code> in Terminal, what output do you get ?"}, {"owner": {"reputation": 63, "user_id": 5560196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6113723b6ad4e879bc897082b0a985e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby L.", "link": "https://stackoverflow.com/users/5560196/bobby-l"}, "edited": false, "score": 0, "creation_date": 1448552553, "post_id": 33928769, "comment_id": 55643968, "body": "works! Should <code>g++ main.cpp </code>pkg-config --libs --cflags opencv` -o main` contain all OpenCV 3 header files? For example: <code>&lt;opencv2&#47;highgui&#47;highgui.hpp&gt;</code>"}, {"owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "edited": false, "score": 0, "creation_date": 1448554164, "post_id": 33928769, "comment_id": 55644949, "body": "Awesome! the --cflags should figure out which <b>folder</b> contain the headers files needed (without worrying which files are actually needed) and your .cpp file only needs to worry about what header <b>files</b> it needs to access (without worrying about the folder)"}], "tags": [], "owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "is_accepted": true, "score": 3, "last_activity_date": 1448497802, "creation_date": 1448497802, "answer_id": 33928769, "question_id": 33927294, "link": "https://stackoverflow.com/questions/33927294/running-opencv-3-in-mac-terminal/33928769#33928769", "title": "Running OpenCV 3 in Mac Terminal", "body": "<p>You haven't specified:</p>\n\n<ol>\n<li>the include path (header search path) using <code>-I\"/path/to/your/include\"</code></li>\n<li>the path to the libraries using -L\"/path/to/libraries\"</li>\n<li>which libraries to link against, in this case core and highgui: -lopencv_core -lopencv_highgui</li>\n</ol>\n\n<p>I have opencv headers in <code>/opt/local/include</code> and libraries in <code>/opt/local/lib</code>,\nso to compile a basic program like this:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main( int argc, char** argv )\n{\n        Mat src = Mat(Size(320,240),CV_64F);;\n        namedWindow(\"test\");\n\n        cout &lt;&lt; \"press any key to close\" &lt;&lt; endl;\n\n        while(true){\n                randn(src,0,1.0);\n                imshow(\"test\",src);\n                if(waitKey() &gt; 0) break;\n        }\n}\n</code></pre>\n\n<p>I compiled like so:</p>\n\n<pre><code>g++ main.cpp -I\"/opt/local/include/\" -L\"/opt/local/lib/\" -lopencv_core -lopencv_highgui -o main\n</code></pre>\n\n<p>Then ran <code>./main</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/agEmF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/agEmF.png\" alt=\"opencv test\"></a></p>\n\n<p>Bare in mind you might have opencv installed in the <code>/usr/local</code> folder not <code>/opt/local</code> depending how you compiled/installed OpenCV.</p>\n\n<p>Also, you might have pkg-config installed which can come in handy when you need to link against more libraries. </p>\n\n<p>For example, you can run:</p>\n\n<pre><code>pkg-config --libs --cflags opencv\n</code></pre>\n\n<p>which in my case outputs:</p>\n\n<pre><code>-I/opt/local/include/opencv -I/opt/local/include -L/opt/local/lib -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_nonfree -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_superres -lopencv_ts -lopencv_video -lopencv_videostab \n</code></pre>\n\n<p>but in your case, it should output your particular OpenCV paths.</p>\n\n<p>This would simplify compiling to this:</p>\n\n<pre><code>g++ main.cpp `pkg-config --libs --cflags opencv` -o main\n</code></pre>\n\n<p>The guide you linked to uses <code>cmake</code> which generates Makefiles for you.\nThat's another nice options. Also, based on the same guide, you should have XCode installed which you can use to create a Command Line Tool and point the Header Search Paths and Library Search Paths.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PyAJX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PyAJX.png\" alt=\"Xcode Command Line Tool project creation\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6439324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8849d69cbfdc57d801acdfa229f43cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Hui Xu", "link": "https://stackoverflow.com/users/6439324/hui-xu"}, "is_accepted": false, "score": 0, "last_activity_date": 1465917582, "last_edit_date": 1465917582, "creation_date": 1465914120, "answer_id": 37814741, "question_id": 33927294, "link": "https://stackoverflow.com/questions/33927294/running-opencv-3-in-mac-terminal/37814741#37814741", "title": "Running OpenCV 3 in Mac Terminal", "body": "<p>I create a similar file that maybe can help you.</p>\n\n<p>First I use:</p>\n\n<pre><code>sudo brew install opencv\n</code></pre>\n\n<p>Then I install the <code>opencv.3.0</code> according to the hint given by the terminal. Then in the <code>.cpp</code> file which needs the API from <code>opencv</code>, I use:</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n</code></pre>\n\n<p>As my only include file about <code>opencv</code>. Actually, at that project I use <code>highgui</code>, <code>core</code>, and <code>imgprog</code>. But no worries here, I will show you how to solve them in linking part.</p>\n\n<p>After you finish your project, you are going to compile your project on the terminal.</p>\n\n<p>Because I also used the JNI interface, so I still need to link the <strong>jni.h</strong>.</p>\n\n<p>Here we go:</p>\n\n<pre><code>g++   xxxx.cpp xxx.cpp -lstdc++ -fPIC -shared (to create a shared object)  \n-I/absolute path/ (we can use -I  to be followed with  the absolute path of the library you need to use )\n-I/Users/yuanzhan/Downloads/OpenCV-2.0.0/src/\n-I /Users/yuanzhan/Downloads/OpenCV-2.0.0/include/opencv/ -I/usr/local/Cellar/opencv3/3.1.0_3/lib   -lopencv_core (open the library for use if you use the API fro here)-lopencv_highgui -lopencv_imgproc -L.(i put the cv2. on local otherwise you can add the absolute path here) -lcv2(use the package)  -v -o libopenCvSDK.so(generate my .so package).\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5560196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6113723b6ad4e879bc897082b0a985e?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby L.", "link": "https://stackoverflow.com/users/5560196/bobby-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2363, "favorite_count": 1, "accepted_answer_id": 33928769, "answer_count": 2, "score": 1, "last_activity_date": 1465917582, "creation_date": 1448489506, "question_id": 33927294, "link": "https://stackoverflow.com/questions/33927294/running-opencv-3-in-mac-terminal", "title": "Running OpenCV 3 in Mac Terminal", "body": "<p>For the past week, I have been trying to run some simple OpenCV programs using the terminal. I have tried many tutorials and recommendations from various forums with little success. The problem arises when trying to link the OpenCV header files to my OpenCV main program. For a simple c++ program I would simply execute <code>g++ main.cpp header.hpp</code> to generate the program executeable. How do I go about linking the necessary OpenCV header files such as <code>&lt;opencv2/highgui/highgui.hpp&gt;</code> &amp; <code>&lt;opencv2/core/core.hpp&gt;</code>?  </p>\n\n<p>For example, when attempted to execute the sample program from <a href=\"http://docs.opencv.org/2.4/doc/tutorials/introduction/display_image/display_image.html\" rel=\"nofollow\">http://docs.opencv.org/2.4/doc/tutorials/introduction/display_image/display_image.html</a> the following occurs:</p>\n\n<blockquote>\n  <p>Desktop Robert$ g++ loadIMG.cpp\n  Undefined symbols for architecture x86_64:\n  \"cv::namedWindow(cv::String const&amp;, int)\", referenced from:\n     _main in loadIMG-54c517.o\n  \"cv::Mat::deallocate()\", referenced from:\n     cv::Mat::release() in loadIMG-54c517.o\n  \"cv::Mat::copySize(cv::Mat const&amp;)\", referenced from:\n     cv::Mat::operator=(cv::Mat const&amp;) in loadIMG-54c517.o\n  \"cv::String::deallocate()\", referenced from:\n     cv::String::~String() in loadIMG-54c517.o\n  \"cv::String::allocate(unsigned long)\", referenced from:\n     cv::String::String(char const*) in loadIMG-54c517.o\n  \"cv::imread(cv::String const&amp;, int)\", referenced from:\n     _main in loadIMG-54c517.o\n  \"cv::imshow(cv::String const&amp;, cv::_InputArray const&amp;)\", referenced from:\n     _main in loadIMG-54c517.o\n  \"cv::waitKey(int)\", referenced from:\n     _main in loadIMG-54c517.o\n  \"cv::fastFree(void*)\", referenced from:\n      cv::Mat::~Mat() in loadIMG-54c517.o\n  ld: symbol(s) not found for architecture x86_64\n  clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>\n</blockquote>\n\n<p>Please note: OpenCV has already been built using the following tutorial: <a href=\"http://blogs.wcode.org/2014/10/howto-install-build-and-use-opencv-macosx-10-10/\" rel=\"nofollow\">http://blogs.wcode.org/2014/10/howto-install-build-and-use-opencv-macosx-10-10/</a></p>\n\n<p>Any help or direction would be appreciated. Thank you.</p>\n"}, {"tags": ["c++", "windows", "parsing", "regional-settings"], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 1, "last_activity_date": 1448489706, "creation_date": 1448489706, "answer_id": 33927350, "question_id": 33927190, "link": "https://stackoverflow.com/questions/33927190/why-is-tcstod-using-my-windows-region-settings-when-parsing-a-string/33927350#33927350", "title": "Why is _tcstod using my windows region settings when parsing a string?", "body": "<p><strong>Why is _tcstod using my windows region settings when parsing a string?</strong></p>\n\n<p>Because it is supposed to.</p>\n\n<p><strong>Is there some way for me to parse the float value from the string while being agnostic to my Region settings?</strong></p>\n\n<p>Of course. The simplest way, in C++, is to use a stringstream and imbue it with a default or \"C\" locale.</p>\n"}], "owner": {"reputation": 11, "user_id": 5606126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24a00588ad500219ce0917194f290ba?s=128&d=identicon&r=PG&f=1", "display_name": "user5606126", "link": "https://stackoverflow.com/users/5606126/user5606126"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448489706, "creation_date": 1448488962, "question_id": 33927190, "link": "https://stackoverflow.com/questions/33927190/why-is-tcstod-using-my-windows-region-settings-when-parsing-a-string", "title": "Why is _tcstod using my windows region settings when parsing a string?", "body": "<p>Windows-related C++ question!</p>\n\n<p>I'm trying to use _tcstod( ) to parse a string to obtain a float value. Normally, if I call </p>\n\n<pre><code>wchar_t* endPtr;\nfloat result = static_cast&lt;float&gt;(_tcstod( \"12.345678\", &amp;endPtr));\n</code></pre>\n\n<p>I get a float value of 12.345678 and endPtr behaves as expected. This actually misbehaves if I change my regional decimal delimiter in the Windows Region and Language settings. Specifically, if I change the decimal delimiter from \".\" to \",\", suddenly _tcstod only returns a value of 12 rather than the whole thing. Anything after the . is chopped off.</p>\n\n<p>Is there some way for me to parse the float value from the string while being agnostic to my Region settings?</p>\n"}, {"tags": ["c++", "string", "char"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448488886, "post_id": 33927127, "comment_id": 55615334, "body": "The answer to the the question in your first paragraph is: not within the C program, you would have to assign a font to your terminal which used different glyphs for 97 etc.    I&#39;m not sure what the code sample has to do with the question"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448488931, "post_id": 33927127, "comment_id": 55615353, "body": "Can you explain what your overall goal is here"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448489394, "post_id": 33927127, "comment_id": 55615552, "body": "Closest you should have is <code>if(letter2[0] == letter)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1448490166, "last_edit_date": 1448490166, "creation_date": 1448489498, "answer_id": 33927293, "question_id": 33927127, "link": "https://stackoverflow.com/questions/33927127/can-i-convert-char-symbol-to-string/33927293#33927293", "title": "Can i convert char symbol to string", "body": "<p>First of all you could use an object of type std::string as letter. for example</p>\n\n<pre><code>std::string letter( 1, rand() % range + min );\n</code></pre>\n\n<p>Secondly you could use a character array as for example</p>\n\n<pre><code>char letter[2] = { char( rand() % range + min ), '\\0' };\n</code></pre>\n\n<p>Or you could leave as is but the condition could look like</p>\n\n<pre><code>if ( letter2.size() == 1 &amp;&amp; letter2[0] == letter )\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5604984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80490699e22ce181625dceab9944ba73?s=128&d=identicon&r=PG&f=1", "display_name": "AdminBenni", "link": "https://stackoverflow.com/users/5604984/adminbenni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 33927293, "answer_count": 1, "score": 1, "last_activity_date": 1448527522, "creation_date": 1448488722, "last_edit_date": 1448527522, "question_id": 33927127, "link": "https://stackoverflow.com/questions/33927127/can-i-convert-char-symbol-to-string", "title": "Can i convert char symbol to string", "body": "<p>Is there way to convert the symbol that char displays when you run the program like how 97 char is equal to \"a\" when you run the program into a string?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;windows.h&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\n\n\nusing namespace std;\n\nint main()\n{\nint max = 122, min = 97;\nint range = max - min + 1;\nsrand (time(0));\nchar letter = rand() % range + min;\ncout &lt;&lt; letter &lt;&lt; endl;\nstring letter2;\ncin &gt;&gt; letter2;\nif(letter2 == letter)\n{\ncout &lt;&lt; letter2 &lt;&lt; endl;\n}\n}\n</code></pre>\n\n<p>This is the code I tried but it didn't work.\nThanks in advance.</p>\n"}, {"tags": ["c#", "c++", "com", "vb6", "regfreecom"], "comments": [{"owner": {"reputation": 9256, "user_id": 17776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6ba26f0f56f887d9e01c48e5ef040f75?s=128&d=identicon&r=PG", "display_name": "jac", "link": "https://stackoverflow.com/users/17776/jac"}, "edited": false, "score": 0, "creation_date": 1448504708, "post_id": 33926756, "comment_id": 55620053, "body": "Have you tried sxstrace? Also, here is a similar question and answer, <a href=\"http://stackoverflow.com/questions/21924248/how-to-use-embedded-registration-free-manifest-for-activex-component-from-manage\" title=\"how to use embedded registration free manifest for activex component from manage\">stackoverflow.com/questions/21924248/&hellip;</a>."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 9256, "user_id": 17776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6ba26f0f56f887d9e01c48e5ef040f75?s=128&d=identicon&r=PG", "display_name": "jac", "link": "https://stackoverflow.com/users/17776/jac"}, "edited": false, "score": 1, "creation_date": 1448507296, "post_id": 33926756, "comment_id": 55620665, "body": "Yes I&#39;ve used sxstrace. I got past all the problems it reported and now when I run it, the log is empty. The other question you linked to appears to talk about C# client whereas I want a C# COM server."}, {"owner": {"reputation": 7399, "user_id": 800524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02839e8311c198171b66b57d1d0cc023?s=128&d=identicon&r=PG", "display_name": "acelent", "link": "https://stackoverflow.com/users/800524/acelent"}, "edited": false, "score": 0, "creation_date": 1448619265, "post_id": 33926756, "comment_id": 55667992, "body": "You should declare <code>IClass1</code> in your assembly manifest as well."}, {"owner": {"reputation": 7399, "user_id": 800524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02839e8311c198171b66b57d1d0cc023?s=128&d=identicon&r=PG", "display_name": "acelent", "link": "https://stackoverflow.com/users/800524/acelent"}, "edited": false, "score": 0, "creation_date": 1448620906, "post_id": 33926756, "comment_id": 55668994, "body": "Also, you seem to have added the necessary <code>file</code> element, so it seems like a solution to <a href=\"http://stackoverflow.com/q/33837803/800524\">a previous question</a>.  Perhaps you should answer your own question and mark it as accepted."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1448631043, "post_id": 33926756, "comment_id": 55674601, "body": "BTW, I have reproduced this problem in C++ in two completely separate/different environments on two versions of Visual Studio. The newer one recreated from the info above was on Windows 10, VS Express 2012 and .NET 4.5. There are no manifest files for the C++ test, so I don&#39;t know what I could be missing."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "reply_to_user": {"reputation": 7399, "user_id": 800524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02839e8311c198171b66b57d1d0cc023?s=128&d=identicon&r=PG", "display_name": "acelent", "link": "https://stackoverflow.com/users/800524/acelent"}, "edited": false, "score": 0, "creation_date": 1448631772, "post_id": 33926756, "comment_id": 55675009, "body": "@PauloMadeira I don&#39;t think adding the file element had any discernible effect so I don&#39;t think I have answers to either of my questions yet. Declaring IClass1 would make no difference in the C++ client because there are no explicitly created manifests in this case. The manifest is created and embedded implicitly, so I don&#39;t know what could be missing. It must be something in the .NET COM server DLL?"}], "answers": [{"comments": [{"owner": {"reputation": 1858, "user_id": 1040437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0c2cea78a2e9da9add2f8988d0f45700?s=128&d=identicon&r=PG", "display_name": "John Zabroski", "link": "https://stackoverflow.com/users/1040437/john-zabroski"}, "edited": false, "score": 0, "creation_date": 1572638731, "post_id": 34076433, "comment_id": 103633663, "body": "@BlueMonkMN You do Minnesota proud."}, {"owner": {"reputation": 1858, "user_id": 1040437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0c2cea78a2e9da9add2f8988d0f45700?s=128&d=identicon&r=PG", "display_name": "John Zabroski", "link": "https://stackoverflow.com/users/1040437/john-zabroski"}, "edited": false, "score": 0, "creation_date": 1572639009, "post_id": 34076433, "comment_id": 103633770, "body": "In my case, I was debugging an Excel add-in that had gotten registered under two different CLSID&#39;s, and the old CLSID was winning out over the new CLSID. The CLSID was configured using a non-deterministic algorithm, and made deterministic it by annotating my C# type with a <code>Guid</code> and using <code>[ComRegisterFunction]</code> attribute on <code>public static void RegisterFunction(Type type) { Registry.ClassesRoot.CreateSubKey(GetSubKeyName(type)); }</code> where GetSubKeyName is defined as <code>private static string GetSubKeyName(Type type) {return &quot;CLSID\\\\{&quot; + type.GUID.ToString().ToUpper() + &quot;}\\\\Programmable&quot;; }</code>"}], "tags": [], "owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "is_accepted": true, "score": 15, "last_activity_date": 1457048312, "last_edit_date": 1457048312, "creation_date": 1449177940, "answer_id": 34076433, "question_id": 33926756, "link": "https://stackoverflow.com/questions/33926756/managed-reg-free-com-server-wont-activate/34076433#34076433", "title": "Managed Reg-Free COM Server Won&#39;t Activate", "body": "<p>After many trials working through various samples with Microsoft support, I have identified <em>many</em> pitfalls that arise in attempting to implement a managed COM server with an unmanaged C++ COM client. Here are the key pieces of information that I recall, which can be applied to the sample code in the question to make sure it works.</p>\n\n<ol>\n<li>The client should not use the Isolated COM settings in the C++ project. My memory is fading, but Microsoft support tells me this is for something else -- I think for developing an isolated COM interface to an un-managed COM server instead of a managed COM server. Although this is not at all clear from its description at <a href=\"https://msdn.microsoft.com/en-us/library/zzbcs3x5(v=vs.120).aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/zzbcs3x5(v=vs.120).aspx</a>.</li>\n<li>The client may select \"Yes\" or \"No\" for the \"Embed Manifest\" setting, but if \"Yes\" is selected, then the manifest that includes the dependent assembly information must be provided as an input manifest file. If the embedded manifest does not contain dependent assembly information, then any external manifest file would be ignored. Also, make sure that the configuration (Debug, for example) being edited matches the configuration being tested!\n<a href=\"https://i.stack.imgur.com/5iblX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5iblX.png\" alt=\"enter image description here\"></a></li>\n<li>If the COM server is signed with a key (is strongly named), then the assemblyIdentity element in both the client manifest and the server manifest <em>must</em> contain a publicKeyToken, otherwise HRESULT error 0x80131040 will occur during CoCreateInstance.</li>\n<li>Embedding the RT_MANIFEST resource as a Win32 resource in managed code is not easy with Visual Studio 2013 because C# and VB.NET projects tend to want to embed resources as managed .NET resources, not Win32 resources (you can verify this by opening the DLL output file with the resource viewer and notice that .NET executables generally get a version resource and not much else, even if the project has a manifest file included). One way to get around this is to create a RC file like this:</li>\n</ol>\n\n<p>-</p>\n\n<pre><code>#define RT_MANIFEST 24\n#define MANIFEST_RESOURCE_ID 1\nMANIFEST_RESOURCE_ID RT_MANIFEST ClassLibrary1.manifest\n</code></pre>\n\n<p>Then add a pre-build step like this:</p>\n\n<pre><code>\"C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86\\rc.exe\"  \"$(ProjectDir)ClassLibrary1.rc\"\n</code></pre>\n\n<p>Then in the project settings \"Application\" tab, change the \"Resources\" to use ClassLibrary1.res instead of \"Icon and manifest\". But this comes with problems: firstly, the path to RC.EXE is not easy to define without hard-coding it; secondly, the version information from AssemblyInfoCommon will be ignored because the resources in the RC file totally replace all Win32 resources that would be generated by the .NET compiler.</p>\n\n<p>Another possibility is to simply keep the server COM DLL manifest file separate and not embed it as a resource. I have read that this may not be reliable, but it works on Windows 7 Enterprise 64-bit SP1.</p>\n\n<ol start=\"5\">\n<li>To ensure that the unmanaged client loads the proper .NET runtime, it needs a config file (<code>ConsoleApplication1.exe.config</code>) that defines how to load .NET. For .NET 4.5, I have seen this work: </li>\n</ol>\n\n<p>-</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;supportedRuntime version=\"v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>While for .NET 3.5, it seems useLegacyV2RuntimeActivationPolicy needs to be switched:</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"false\"&gt;\n    &lt;supportedRuntime version=\"v3.5\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<ol start=\"6\">\n<li><p>It's important to check that all the framework and CLR versions are in sync. And it's important to understand that the CLR versions are not the same as the framework versions. For example, if you want to build a managed COM server on .NET 3.5, the CLR version (runtimeVersion) should be \"2.0.50727\", but the .NET version (supportedRuntime) should be \"v3.5\".</p></li>\n<li><p>Make sure that the COM server's .NET Framework target version matches the client's supportedRuntime. If it is being built from the command line, it may not be picking up the framework version from the Visual Studio project file (for example, if you are running the C# of VB.NET compiler directly instead of calling MSBuild), make sure that the build is targeting the right version of the framework.</p></li>\n</ol>\n\n<p>I have not validated all the above yet, but intend to walk through this whole process soon to verify that I caught everything. Here is what I ended up with that I haven't mentioned yet:</p>\n\n<p><strong>ConsoleApplication1.exe.manifest</strong> (in source directory, gets copied or embeded into output directory at build time)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n\n&lt;assemblyIdentity\n            type = \"win32\"\n            name = \"ConsoleApplication1\"\n            version = \"1.0.0.0\" /&gt;\n&lt;dependency&gt;\n            &lt;dependentAssembly&gt;\n                        &lt;assemblyIdentity\n                                    type=\"win32\"\n                                    name=\"ClassLibrary1\"\n                                    version=\"1.0.0.0\"\n                                    publicKeyToken=\"541b4aff0f04b60a\"/&gt;\n            &lt;/dependentAssembly&gt;\n&lt;/dependency&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p><strong>ClassLibrary1.manifest</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;assembly manifestVersion=\"1.0\" xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n   &lt;assemblyIdentity type=\"win32\" name=\"ClassLibrary1\" version=\"1.0.0.0\" publicKeyToken=\"541b4aff0f04b60a\" /&gt;\n   &lt;clrClass clsid=\"{81723475-B5E3-4FA0-A3FE-6DE66CEE211C}\" progid=\"ClassLibrary1.Class1\" threadingModel=\"both\" name=\"ClassLibrary1.Class1\" runtimeVersion=\"v2.0.50727\"&gt;&lt;/clrClass&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Now to go through and validate every detail with full error message info etc.</p>\n\n<p>I start by creating a single solution containing two projects with all default values and the code shown in the question. I begin with no manifest files nor any of the project settings mentioned in the question, and will explicitly call out when I am making these changes in the process below. These are the steps and errors that are on the path to making this project work.</p>\n\n<ol>\n<li>Error: \"Class1: Undeclared identifier\". Need to run a Developer Command Prompt and execute the following command line in order to get a TLB file that the C++ code can import: <code>tlbexp ClassLibrary1.dll</code></li>\n<li>Move the TLB file into the ConsoleApplication1 project directory and re-build. Same Error.</li>\n<li>Replace the angle brackets on <code>#import &lt;ClassLibrary1.tlb&gt; raw_interfaces_only</code> with quotes, so it reads <code>#import \"ClassLibrary1.tlb\" raw_interfaces_only</code>. Rebuild: Success.</li>\n<li>At this point, if we run we get <code>Error 80040154</code> (Class not registered) because we have not registered the component nor set up registration-free COM.</li>\n<li>Knowing that trying to set up Isolated COM in the client would present <code>Error  800401f9</code> we'll skip that and just try to create a client manifest. Create a new text file with the following content, and save it as ConsoleApplication1.exe.manifest in the ConsoleApplication1 project directory:</li>\n</ol>\n\n<p>-</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n   &lt;assemblyIdentity type=\"win32\" name=\"ConsoleApplication1\" version=\"1.0.0.0\" /&gt;\n   &lt;dependency&gt;\n   &lt;dependentAssembly&gt;\n   &lt;assemblyIdentity name=\"ClassLibrary1\" version=\"1.0.0.0\" /&gt;\n   &lt;/dependentAssembly&gt;\n   &lt;/dependency&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<ol start=\"6\">\n<li>At this point it appears the steps mentioned earlier in this solution are a little over-complicated. You can simply include the manifest file in the project by showing hidden files, and using the \"Include In Project\" command on the manifest file.</li>\n<li>Running at this point would present the error message \"The application has failed to start because its side-by-side configuration is incorrect. Please see the application event log or use the command line sxstrace.exe tool for more detail.\" This is partly because we haven't put ClassLibrary1.dll anywhere where ConsoleApplication1.exe can find it. The parsed sxstrace output at this point looks like this:</li>\n</ol>\n\n<p>-</p>\n\n<pre><code>INFO: Parsing Manifest File C:\\Users\\bmarty\\Documents\\Visual Studio 2013\\Projects\\RegFreeCOM\\Debug\\ConsoleApplication1.exe.\n    INFO: Manifest Definition Identity is ConsoleApplication1,type=\"win32\",version=\"1.0.0.0\".\n    INFO: Reference: ClassLibrary1,version=\"1.0.0.0\"\nINFO: Resolving reference ClassLibrary1,version=\"1.0.0.0\".\n    INFO: Resolving reference for ProcessorArchitecture ClassLibrary1,version=\"1.0.0.0\".\n        INFO: Resolving reference for culture Neutral.\n            INFO: Applying Binding Policy.\n                INFO: No binding policy redirect found.\n            INFO: Begin assembly probing.\n                INFO: Did not find the assembly in WinSxS.\n                INFO: Attempt to probe manifest at C:\\Users\\bmarty\\Documents\\Visual Studio 2013\\Projects\\RegFreeCOM\\Debug\\ClassLibrary1.DLL.\n                INFO: Attempt to probe manifest at C:\\Users\\bmarty\\Documents\\Visual Studio 2013\\Projects\\RegFreeCOM\\Debug\\ClassLibrary1.MANIFEST.\n                INFO: Attempt to probe manifest at C:\\Users\\bmarty\\Documents\\Visual Studio 2013\\Projects\\RegFreeCOM\\Debug\\ClassLibrary1\\ClassLibrary1.DLL.\n                INFO: Attempt to probe manifest at C:\\Users\\bmarty\\Documents\\Visual Studio 2013\\Projects\\RegFreeCOM\\Debug\\ClassLibrary1\\ClassLibrary1.MANIFEST.\n                INFO: Did not find manifest for culture Neutral.\n            INFO: End assembly probing.\n    ERROR: Cannot resolve reference ClassLibrary1,version=\"1.0.0.0\".\nERROR: Activation Context generation failed.\nEnd Activation Context Generation.\n</code></pre>\n\n<ol start=\"8\">\n<li>Copying the ClassLibrary1.dll file into the same directory as ConsoleApplication1.exe doesn't change anything because we haven't provided any manifest for the file by which the COM dependency can be identified. So the next step is to create a manifest for ClassLibrary1. One version of ClassLibrary1.manifest is already present in the question. Let's try that one by creating a text file with that content and saving it in the ClassLibrary1 project directory as ClassLibrary1.manifest. To include it in the project, let's try the same simple \"Include in Project\" command (again, turning on the visibility of hidden files to make that possible). Now what happens when copying the new ClassLibrary1.dll to the directory with ConsoleApplication1.exe and running?</li>\n<li>The same error and sxstrace results occur because a manifest file in a managed DLL does not get embedded as a Win32 resource, as you can verify by opening the DLL file with Visual Studio, which shows the file's Win32 resources. It shows the version resource and nothing else. So let's exclude the manifest from the ClassLibrary1 and just copy the manifest file over to ConsoleApplication1.exe's location as an external file instead.</li>\n<li>Success! The program runs and completes normally. But what if we want to use a component built with a different version of .NET framework. Or maybe your test isn't working at this point because your Visual Studio defaulted to a different version? Right now I see that my ClassLibrary1 project defaulted to .NET 3.5. What happens if I change it to 4.0, rebuild, copy and run again?</li>\n<li>Error 8013101b occurs. That corresponds (according to a google search) to COR_E_NEWER_RUNTIME which also means \"A module specified in the manifest was not found.\" This happens when, for example, an EXE that loaded .NET 2.0 is trying to reference a DLL built with .NET 4.0. So now we have to tell the un-managed client EXE which version of the .NET framework to load as it resolves its COM reference. This is done with a config file named ConsoleApplication1.exe.config. Just create a new text file and save it with that name in the ConsoleApplication1.exe directory. It has the following content:</li>\n</ol>\n\n<p>-</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;supportedRuntime version=\"v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>The same error would still occur if useLegacyV2RuntimeActivationPolicy were excluded in this case. Unfortunately, I don't fully understand why, but I suspect it has something to do with the newer v4.0 runtime activation policy defaulting to loading CLR v2.0 if the executable being loaded does not explicitly reference .NET 4.0 (which un-managed code does not because it doesn't explicitly reference .NET period).</p>\n\n<ol start=\"12\">\n<li>Success again! But wait, there's more. What if your COM dll is signed with a key (has a strong name)? Let's add a key to ClassLibrary1, configure it to be used in signing the DLL on the project's \"Signing\" tab, and see what happens when we copy the updated DLL to ConsoleApplication1.exe's directory.</li>\n<li>Now we get Error 80131040 (\"The located assembly's manifest definition does not match the assembly reference\"). And sxstrace, and fuslogvw are frustratingly unhelpful here in yielding <em>any</em> information about what is going on. Fortunately, I now know, in this particular reg-free-com scenario, it's caused by the lack of the publicKeyToken attribute on the assemblyIdentity elements describing ClassLibrary1 (in both manifest files). But how do you get the publicKeyToken value? Run <code>sn -T ClassLibrary1.dll</code> from a developer command prompt. After updating ClassLibrary1.manifest and ConsoleApplication1.exe.manifest, remember to rebuild ConsoleApplication1.exe if the manifest is embedded, and to copy ClassLibrary1.manifest to the ConsoleApplication1.exe directory. Run again and?</li>\n<li>I went through a few more gyrations of error solving with the help of sxstrace, but that was due to stupid errors. For the benefit of others who make stupid errors, here are some more things to be aware of if you're getting sxstrace errors: a) make sure you're using the attribute <code>publicKeyToken</code> and not some other ridiculous name like <code>privateKeyToken</code>; b) Make sure that all the attributes you specified in the assemblyIdentity on the server side manifest match those on the client side manifest, and that you don't have <code>type=\"win32\"</code> specified on one but not the other.</li>\n<li>Success! The output is <code>B Inserted obby</code></li>\n</ol>\n\n<p>I should also note that the VB6 client also works by using the following files along with the VB6 client:</p>\n\n<p><strong>Project1.exe.config:</strong></p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n    &lt;supportedRuntime version=\"v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Project1.exe.manifest:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n   &lt;assemblyIdentity type=\"win32\" name=\"Project1\" version=\"1.0.0.0\" /&gt;\n   &lt;dependency&gt;\n   &lt;dependentAssembly&gt;\n   &lt;assemblyIdentity name=\"ClassLibrary1\" version=\"1.0.0.0\" publicKeyToken=\"541b4aff0f04b60a\" /&gt;\n   &lt;/dependentAssembly&gt;\n   &lt;/dependency&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p>However, there does seem to be a tendency to report \"ActiveX Component Can't Create Object\" (Runtime error 429) in rare cases when the executable is built and run before creating the configuration and manifest files. Rebuilding the EXE file seems to fix it, but then I can't get the problem to come back, so it's hard to identify a specific cause.</p>\n\n<p>I thought I was a reasonably good problem solver, but something about the numerous moving parts and numerous unhelpful error codes and error messages reported in reg-free com configuration problems makes this nearly impossible to figure out without some solid experience, inside knowledge or Microsoft source code. Hopefully this answer will help others acquire similar experience. Please extend this answer if you learn more!</p>\n\n<h1>Addendum 1</h1>\n\n<p>The managed COM server's manifest <em>can</em> be properly and easily embedded if you use the \"Add\"->\"New Item...\" command on the project to add an \"Application Manifest File\". This adds a file called app.manifest to the project. But the real tricky part is that it does so in a way that cannot be replicated any other way via the Visual Studio UI, except through one screwy work-around. Since the \"Manifest\" field on the \"Application\" tab of the project settings window is disabled for \"Class Library\" type projects, the manifest, which would normally be set here, cannot be set for a class library. But you can temporarily change the project to a Windows Application, change the Manifest selection here, then restore it to a Class Library. The setting will stick so the selected manifest gets properly embedded. You can verify the setting in a text editor by viewing the project file. Look for:</p>\n\n<pre><code>&lt;PropertyGroup&gt;\n  &lt;ApplicationManifest&gt;app.manifest&lt;/ApplicationManifest&gt;\n&lt;/PropertyGroup&gt;\n</code></pre>\n\n<h1>Addendum 2</h1>\n\n<p>Error 0x80131040 can still occur with all the above precautions taken. To help narrow down the cause of this, it helps to use the fusion log viewer to see more information about what is happening as assemblies are being loaded and resolved. Google \"Fuslogvw\" for more information about how to view this log (fuslogvw.exe is a utility provided when Visual Studio is installed). It's also important to realize that this application, by default, apparently does not show any information until you configure it to log information to files, reproduce the problem, then restart the application to read the log files after they are produced. And, according to MSDN documentation, it's also important to remember to run this utility as administrator.</p>\n\n<p>Once you've passed all the hurdles to running fuslogvw.exe, you may see something like this in the log:</p>\n\n<pre><code>WRN: Comparing the assembly name resulted in the mismatch: Major Version\nERR: The assembly reference did not match the assembly definition found.\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n</code></pre>\n\n<p>Despite the fact that the COM server's manifest file listed the version as 1.0.0.0, that is not the (only) version used when binding from a COM client reference to the server. My client EXE file was trying to reference 1.0.0.0, which exactly matched the version in the COM server's manifest file, but it did not match the .NET version of the DLL. After correcting both the client and server manifest files to reflect the version actually in the .NET server DLL, then error 0x80131040 went away, and fuslogvw.exe was the key to identifying that as the source of the problem.</p>\n\n<p>If the Client manifest is in sync with the actual .NET DLL version, but the server DLL's manifest file does not reflect this version, a different error will occur:</p>\n\n<blockquote>\n  <p>The application has failed to start because its side-by-side\n  configuration is incorrect. Please see the application event log or\n  use the command-line sxstrace.exe tool for more detail.</p>\n</blockquote>\n\n<h1>Addendum 3</h1>\n\n<p>Error 0xc0150002 or the following message may be reported:</p>\n\n<blockquote>\n  <p>The application was unable to start correctly (0xc0150002), Click OK\n  to close the application.</p>\n</blockquote>\n\n<p>I have seen this occur in a case where the client manifest was embedded in an unmanaged DLL rather than an unmanaged EXE, <em>and</em> the manifest's <code>assemblyIdentity</code> element did not exactly match the server's <code>assemblyIdentity</code>. The client had an extra <code>processorArchitecture=\"x86\"</code> in it that the server did not specify, causing a mismatch. Unfortunately I don't know how to learn this without luckily thinking to check the manifest files to see that they match (or reading this article). That error doesn't clearly point to a manifest file being the source of the problem, so you just have to be aware that there's a possible correlation between that error message and this cause.</p>\n\n<h1>Addendum 4</h1>\n\n<p>I have seen external manifest files get completely ignored yielding a completely empty sxstrace log, even when the executables involved have no embedded manifests. This can apparently happen as a result of the activation context cache (a problem documented at <a href=\"http://csi-windows.com/blog/all/27-csi-news-general/245-find-out-why-your-external-manifest-is-being-ignored\" rel=\"noreferrer\">http://csi-windows.com/blog/all/27-csi-news-general/245-find-out-why-your-external-manifest-is-being-ignored</a>). To work around this problem you can use the following command to touch the date stamp of the file whose manifest is being ignored:</p>\n\n<pre><code>copy /b myfile.exe+,,\n</code></pre>\n\n<h1>Addendum 5</h1>\n\n<p>I have seen another hard-to-explain Class Not Registered error (<code>0x80040154</code> - <code>REGDB_E_CLASSNOTREG</code>) that occurs when calling CoCreateInstance under the following conditions:</p>\n\n<ol>\n<li>An CPP file contains a constructor for a class that is instantiated in global scope so dynamic initialization will call the constructor during <code>DllMain</code> if the <code>/clr</code> switch is <strong>not</strong> applied to the CPP file, or during <code>.cctor</code> if the <code>/clr</code> switch <strong>is</strong> applied to the file.</li>\n<li>The DLL has an embedded manifest to make it be able to reference the COM class being created via Reg-Free COM.</li>\n<li>The COM DLL is implemented in managed code (with a COM-Callable Wrapper aka CCW) in .NET 2.0.</li>\n<li>The EXE that loaded the DLL does <strong>not</strong> have a Reg-Free Manifest referencing the created COM class.</li>\n<li>The COM DLL is <strong>not</strong> registered with <code>regasm</code>.</li>\n<li>The CPP file calling <code>CoCreateInstance</code> has the <code>/clr</code> switch applied to the C++ compiler settings.</li>\n</ol>\n\n<p>If any of the last 3 conditions are altered, the problem goes away. (Additionally, if the last condition is altered, you may get a loader lock due to #1 -- read about loader lock and it's relation to CLR at <a href=\"https://msdn.microsoft.com/en-us/library/ms173266.aspx\" rel=\"noreferrer\" title=\"Initialization of Mixed Assemblies\">Initialization of Mixed Assemblies</a>). So if you are encountering a Class Not Registered error in similar circumstances, consider whether you can alter any of those last 3 conditions to resolve the error.\n<strong>Note:</strong> I'm having a hard time nailing down the behavior of #6. It seems the effect of switching this also depends the state of #1. It looks like calling the constructor (including its <code>CoCreateInstance</code>) after the DLL is fully loaded still causes Class Not Registered whereas calling the constructor during the DLL initialization will succeed if the <code>/clr</code> switch is not specified. My solution for the time being is to re-code the client CPP file in managed C++ since it was a relatively simple interface class between the COM component and the rest of the un-managed code. So now there's no more COM in this client, just a .NET reference.</p>\n"}, {"comments": [{"owner": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "reply_to_user": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1510028877, "post_id": 47078217, "comment_id": 81249679, "body": "@BlueMonkMN No. Every time a clean build was taken and an external manifest file for client exe was copied to debug folder using post build event. So Addendum 4 was met implicitly."}, {"owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1510061466, "post_id": 47078217, "comment_id": 81267858, "body": "Is it possible the activation context was cached by some action that happened before the copy, and followed the copied file based on a checksum or signature or something, and so did not get refreshed in the new location? It would be interesting to know if the cache was involved somehow because it seems odd that there would be <i>no</i> activation context."}, {"owner": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "reply_to_user": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "edited": false, "score": 0, "creation_date": 1510127700, "post_id": 47078217, "comment_id": 81297714, "body": "I don&#39;t know whether activation context is getting cached or not. But even if it is getting cached, I don&#39;t expect <code>class not registered</code> message during <code>CreateInstance</code>.  When call to <code>CreateActCtx</code> is commented, it still continues to report this message. I think my problem closely matches to what you explained in Addendum 5. In that, conditions 2 and 5 are true and rest of them are false in my scenario."}], "tags": [], "owner": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "is_accepted": false, "score": 1, "last_activity_date": 1509634294, "creation_date": 1509634294, "answer_id": 47078217, "question_id": 33926756, "link": "https://stackoverflow.com/questions/33926756/managed-reg-free-com-server-wont-activate/47078217#47078217", "title": "Managed Reg-Free COM Server Won&#39;t Activate", "body": "<p>To all my frustrations, BlueMonkMN's explanation was really useful but yet I encountered the <code>Class not registered</code> message.</p>\n\n<p>I have a .NET 4.6 COM interop Dll and a C++ client which makes use of Registration Free COM by the means of Windows SxS technology. Assembly manifest was embedded inside the COM Dll and the application manifest was put outside, as a separate .manifest file.   </p>\n\n<p>Everything was working as advertised but it started getting the <code>Class not registered</code> message during <code>CreateInstance</code> when any one of the following happens.</p>\n\n<ul>\n<li>Copy the interop COM Dll along with C++ client executable and the\nmanifest file to some other directory.</li>\n<li>Make non COM related changes to C++ client and then rebuild the\napplication.</li>\n</ul>\n\n<p>In this situation, to add insult to injury, <code>sxstrace</code> log was empty, application event log (<code>eventvwr</code>) didn't report any SideBySide error and the Assembly Binding Log Viewer (<code>FUSLOGVW.exe</code>) didn't show anything from the C++ client application.  </p>\n\n<p>Let me add another Addendum to BlueMonkMN's answer ablove.</p>\n\n<h1>Addendum 6</h1>\n\n<p>What I understand from my so far experiments is that, in such a case, the Activation Context for the C++ client application is not getting created.</p>\n\n<p>In such a situation one need to create the Activation context by themselves. </p>\n\n<p>Following code is put inside the C++ client application, after a call to <code>CoInitialize(0);</code> and before making any call to <code>CreateInstance</code>.</p>\n\n<pre><code>ACTCTX context;\nmemset(&amp;context, 0, sizeof(context));\n\ncontext.cbSize = sizeof(context);\ncontext.lpSource = L\"CPPClient.exe.manifest\";\ncontext.lpAssemblyDirectory = L\"D:\\\\code\\\\vs2017\\\\CPPClient\\\\Debug\";\ncontext.dwFlags = ACTCTX_FLAG_ASSEMBLY_DIRECTORY_VALID; \n\nHANDLE hActCtx = CreateActCtx(&amp;context);\n\nULONG_PTR cookie = 0;\nBOOL result = ActivateActCtx(hActCtx, &amp;cookie);\n\n//Rest of the code goes here.\n</code></pre>\n\n<p>As a cleanup measure, following piece of code is put just before a call to <code>CoUninitialize();</code></p>\n\n<pre><code>DeactivateActCtx(0, cookie);\nReleaseActCtx(hActCtx);\n</code></pre>\n\n<p>Now it sounds good. Side by Side is working very well. If anything goes wrong, then it can be seen in sxstrace or in application event log or in Assembly Binding Log Viewer.</p>\n"}], "owner": {"reputation": 23367, "user_id": 78162, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1497a61bc7f673e30f224a3df61a6742?s=128&d=identicon&r=PG", "display_name": "BlueMonkMN", "link": "https://stackoverflow.com/users/78162/bluemonkmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2382, "favorite_count": 7, "accepted_answer_id": 34076433, "answer_count": 2, "score": 11, "last_activity_date": 1509634294, "creation_date": 1448487089, "question_id": 33926756, "link": "https://stackoverflow.com/questions/33926756/managed-reg-free-com-server-wont-activate", "title": "Managed Reg-Free COM Server Won&#39;t Activate", "body": "<p>I started with a very sophisticated system of clients and servers with COM references and other things, and I've cut down and down until I realized I can't even get Microsoft sample code to work for registration free COM activation of a managed COM server written in C#.</p>\n\n<p>Server code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Runtime.InteropServices.ComTypes;\nusing System.Runtime.InteropServices;\nusing System.ComponentModel;\n\nnamespace ClassLibrary1\n{\n   [Guid(\"A7AC6D8C-FF17-4D2C-A3B1-2C8690A8EA04\")\n   ,ComVisible(true)]\n   public interface IClass1\n   {\n      [DispId(1)]\n      string DummyFunction(string inputValue);\n   }\n\n   [Guid(\"81723475-B5E3-4FA0-A3FE-6DE66CEE211C\"),\n   ClassInterface(ClassInterfaceType.None),\n   ComDefaultInterface(typeof(IClass1)),\n   ComVisible(true)]\n   public class Class1 : IClass1\n   {\n      public string DummyFunction(string inputValue)\n      {\n         return inputValue.Substring(0, 1) + \" Inserted \" + inputValue.Substring(1);\n      }\n   }\n}\n</code></pre>\n\n<p>Client VB6 Code:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>Dim c As ClassLibrary1.Class1\nSet c = New Class1\nMsgBox c.DummyFunction(\"Ben\")\n</code></pre>\n\n<p>Client C++ Code:</p>\n\n<p></p>\n\n<pre><code>#include \"stdafx.h\"\n\n#import &lt;ClassLibrary1.tlb&gt; raw_interfaces_only\n\nusing namespace ClassLibrary1;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n   IClass1Ptr p;\n\n   HRESULT hr = CoInitializeEx(NULL, COINIT_MULTITHREADED);\n   hr = CoCreateInstance(__uuidof(Class1), NULL, CLSCTX_INPROC_SERVER, __uuidof(IClass1), (void **)&amp;p);\n   if (FAILED(hr))\n   {\n      _tprintf_s(_T(\"Error %x\\n\"), hr);\n      CoUninitialize();\n      return 1;\n   }\n   _bstr_t b = _T(\"Bobby\");\n   BSTR b2;\n   p-&gt;DummyFunction(b, &amp;b2);\n   wprintf_s(L\"%s\\n\", b2);\n   p-&gt;Release();\n   CoUninitialize();\n    return 0;\n}\n</code></pre>\n\n<p>Both of the clients work fine when I remove all Reg-Free COM code and register the ClassLibrary1.dll with regasm /codebase.</p>\n\n<p>Then I unregister ClassLibrary1, and try to introduce Reg-Free COM for the VB6 client with the file Project1.exe.manifest:</p>\n\n\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n   &lt;assemblyIdentity type=\"win32\" name=\"Project1\" version=\"1.0.0.0\" /&gt;\n   &lt;dependency&gt;\n   &lt;dependentAssembly&gt;\n   &lt;assemblyIdentity name=\"ClassLibrary1\" version=\"1.0.0.0\" /&gt;\n   &lt;/dependentAssembly&gt;\n   &lt;/dependency&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p>And ClassLibrary1.manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;assembly manifestVersion=\"1.0\" xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n   &lt;assemblyIdentity version=\"1.0.0.0\" name=\"ClassLibrary1\" /&gt;\n   &lt;clrClass clsid=\"{81723475-B5E3-4FA0-A3FE-6DE66CEE211C}\" name=\"ClassLibrary1.Class1\" tlbid=\"{F8A2D334-5BBB-4007-8308-A1417052E6D6}\"&gt;&lt;/clrClass&gt;\n   &lt;file name=\"ClassLibrary1.dll\" &gt;&lt;/file&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p>Now I get Error 429 (ActiveX Component can't create object) sometimes, and (inexplicably) an automation error other times:</p>\n\n<blockquote>\n  <p>Run-time error '-2146234304 (80131040)':\n  Automation Error</p>\n</blockquote>\n\n<p>then I try to introduce COM Isolation into the C++ client:\n<a href=\"https://i.stack.imgur.com/RPqGG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RPqGG.png\" alt=\"Isolated COM Type Library=F:\\Lib\\ClassLibrary1.tlb - Component File Name=ClassLibrary1.dll\"></a></p>\n\n<p>Now when I run the C++ client, the output is merely</p>\n\n<blockquote>\n  <p>Error 800401f9</p>\n</blockquote>\n"}, {"tags": ["c++", "windows", "createprocess"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 2, "creation_date": 1448487089, "post_id": 33926708, "comment_id": 55614429, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1902681/expand-file-names-that-have-environment-variables-in-their-path\">expand file names that have environment variables in their path</a>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1448487391, "post_id": 33926708, "comment_id": 55614567, "body": "You should probably use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>SHGetKnownFolderPath</code></a> to retrieve the path to AppData and then append the rest of your path to that."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1448488446, "post_id": 33926708, "comment_id": 55615106, "body": "Alternatively, you can use the <code>ExpandEnvironmentStrings()</code> function."}, {"owner": {"reputation": 103, "user_id": 3650573, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cdc8fa869f63699de4d23bf9dc2f005?s=128&d=identicon&r=PG&f=1", "display_name": "Nico Neill", "link": "https://stackoverflow.com/users/3650573/nico-neill"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1448488641, "post_id": 33926708, "comment_id": 55615209, "body": "@Praetorian, SHGetKnownFolderPath seems fine. If you can post the code, I can accept your answer."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1448489408, "post_id": 33926708, "comment_id": 55615561, "body": "Nah, feeling too lazy to write and verify the code :) Feel free to post your own answer."}, {"owner": {"reputation": 103, "user_id": 3650573, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cdc8fa869f63699de4d23bf9dc2f005?s=128&d=identicon&r=PG&f=1", "display_name": "Nico Neill", "link": "https://stackoverflow.com/users/3650573/nico-neill"}, "edited": false, "score": 0, "creation_date": 1448489689, "post_id": 33926708, "comment_id": 55615681, "body": "Thank anyway. Just figured out <code>SHGetKnownFolderPath</code> is not compatible with XP. I think I will have a look for  <code>ExpandEnvironmentStrings</code>"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 2, "creation_date": 1448497093, "post_id": 33926708, "comment_id": 55618256, "body": "On XP, you can use the deprecated <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762181(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SHGetFolderPath</a>.  The call would look something like this: <code>SHGetFolderPath(0, CSIDL_APPDATA, NULL, SHGFP_TYPE_CURRENT, my_dest_tchar_buffer);</code>"}], "owner": {"reputation": 103, "user_id": 3650573, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cdc8fa869f63699de4d23bf9dc2f005?s=128&d=identicon&r=PG&f=1", "display_name": "Nico Neill", "link": "https://stackoverflow.com/users/3650573/nico-neill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1448489442, "creation_date": 1448486920, "last_edit_date": 1448489442, "question_id": 33926708, "link": "https://stackoverflow.com/questions/33926708/localappdata-usage-in-createprocess", "title": "%LOCALAPPDATA% usage in CreateProcess", "body": "<p>I am trying to code an executable that will call an exe file when run.</p>\n\n<p>The windows location of the file is:</p>\n\n<pre><code>\"C:\\\\Users\\\\User1\\\\AppData\\\\Local\\\\Apptest\\\\Application\\\\apptest.exe\"\n</code></pre>\n\n<p>Because it is located inside Local App Data folder for the user profile, it needs to be called with <code>%LOCALAPPDATA%</code>  short-cut because I will share the execurable with others.</p>\n\n<p>The below code calls above path via a short-cut:</p>\n\n<pre><code>\"%LOCALAPPDATA%\\\\Apptest\\\\Application\\\\apptest.exe\"\n</code></pre>\n\n<p>but it does not work.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;io.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;shellapi.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;time.h&gt;\n#include &lt;iostream&gt;\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow){\n\n    STARTUPINFO siStartupInfo;\n    PROCESS_INFORMATION piProcessInfo;\n    memset(&amp;siStartupInfo, 0, sizeof(siStartupInfo));\n    memset(&amp;piProcessInfo, 0, sizeof(piProcessInfo));\n    siStartupInfo.cb = sizeof(siStartupInfo);\n\n\n    if (CreateProcess(_T(\"%LOCALAPPDATA%\\\\Apptest\\\\Application\\\\apptest.exe\") ,NULL, NULL, NULL, TRUE, CREATE_NO_WINDOW, NULL, NULL, &amp;siStartupInfo, &amp;piProcessInfo)){\n        WaitForSingleObject(piProcessInfo.hProcess, INFINITE);\n        CloseHandle(piProcessInfo.hProcess);\n        CloseHandle(piProcessInfo.hThread);\n    }\n    else {\n        MessageBox(0, TEXT(\"Can not start program\"), TEXT(\"AppTest\"), MB_OK);\n        exit(0);// Shutdown on fail\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>How is <code>%LOCALAPPDATA%</code> short-cut is used in <code>CreateProcess</code>?</p>\n"}, {"tags": ["c++", "search", "fstream", "seekg"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1448486662, "post_id": 33926595, "comment_id": 55614215, "body": "This middle? <code>middle = (first + lineNumbers) &#47; 2;</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448490339, "post_id": 33926595, "comment_id": 55615961, "body": "@rafa Your entire approach is flawed.  The big mistake is that you&#39;re using <code>seekg</code> on a file opened in text mode.  You can&#39;t use such functions reliably when you&#39;ve opened a file this way.  The <code>seekg</code> works as you would expect on files opened in binary <code>ios:binary</code> mode.  The reason why your code is doomed for failure is that in text mode, translations are done for line end-of-line and EOF, which you do not know about and would not want to keep track of (you would lose your sanity if you tried).  If you&#39;re going to do this, open the file in binary mode and work it out from there."}, {"owner": {"reputation": 47, "user_id": 3293466, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1432183074/picture?type=large", "display_name": "rafa", "link": "https://stackoverflow.com/users/3293466/rafa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448492161, "post_id": 33926595, "comment_id": 55616684, "body": "@PaulMcKenzie Your solution was correct and has allowed me to progress. Now, I have an issue with Armstrong-Jones Mike. When middle is set to 4, it instead reads &#39;73&#39; from the last line for the last name, and Mike on the correct line for the first line. Because of this, it shows as unable to find the correct record"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448492850, "post_id": 33926595, "comment_id": 55616973, "body": "@rafa I posted my suggestion to you as the answer to the <code>seekg</code> issue.  So you&#39;re saying there is a further issue?  If so, then maybe another question should be posted?  Also, how did you come up with the magic number of 57?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1448493090, "post_id": 33926595, "comment_id": 55617073, "body": "doesnt your stream.ignore skip characters till it reaches \\n. ie it will never read the first line"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448493285, "post_id": 33926595, "comment_id": 55617148, "body": "@rafa - You have to include in the line count the end-of-line character sequence (carriage return / line feed for Windows, line feed for Linux).  Your 57 is off by 1 or 2 bytes.  It probably should be 58 or 59."}, {"owner": {"reputation": 47, "user_id": 3293466, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1432183074/picture?type=large", "display_name": "rafa", "link": "https://stackoverflow.com/users/3293466/rafa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448493639, "post_id": 33926595, "comment_id": 55617262, "body": "@PaulMcKenzie You were right. I added 1 to make it 58 and it works as expected. Thanks for all of guidance everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3293466, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1432183074/picture?type=large", "display_name": "rafa", "link": "https://stackoverflow.com/users/3293466/rafa"}, "edited": false, "score": 0, "creation_date": 1448489849, "post_id": 33926955, "comment_id": 55615748, "body": "It should not go that far. When middle is 0, seekg should take it to the first line which is the correct record I&#39;m looking for. On the second loop, when LineNumbers is still 1, middle is 0 but incorrectly reading the name. It should be the first record, but instead, it reads record 2, which is Anderson Bob"}], "tags": [], "owner": {"reputation": 1379, "user_id": 2715565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ccc8eae17dbde0b7815bba58ffa7c5?s=128&d=identicon&r=PG", "display_name": "Faisal Memon", "link": "https://stackoverflow.com/users/2715565/faisal-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1448487975, "creation_date": 1448487975, "answer_id": 33926955, "question_id": 33926595, "link": "https://stackoverflow.com/questions/33926595/text-file-binary-search/33926955#33926955", "title": "Text File Binary Search", "body": "<p>LineNumbers is being modified by your loop going from 4, to 1, to -1.  The -1 makes your loop terminate too early so you don't pick up the first entry properly.</p>\n\n<p>It seems like a homework problem, so I hope you can use this to direct yourself towards an answer.</p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1448493420, "last_edit_date": 1448493420, "creation_date": 1448492800, "answer_id": 33927989, "question_id": 33926595, "link": "https://stackoverflow.com/questions/33926595/text-file-binary-search/33927989#33927989", "title": "Text File Binary Search", "body": "<p>When using functions such as <code>seekg</code>, it is always best to open the file in <code>binary mode</code>, not text mode as your code is doing now.  In other words, you should be doing this:</p>\n\n<pre><code>cardNumbers.open(fileName, std::ios::in | std::ios::binary);\n</code></pre>\n\n<p>The reason is that opening a file in text mode will allow end-of-line translations to be done.  This renders functions such as <code>seekg</code>, <code>tellg</code>, etc. anything between unstable (or lucky to work) at best, and in the worst case, useless for text processing.</p>\n\n<p>When a file is opened in binary mode, the <code>seekg</code> and other family of functions  work as expected, since there are no end-of-line translations being done.  You will actually seek to the byte offset in the file that you specify, and not be thrown off by end-of-line translations.</p>\n\n<p>Also, once you do this, the length of the data in the line includes not only the visible text, but also the invisible characters that make up the end-of-line sequence.  So your hand calculation of 57 is not going to be correct in binary mode -- it should be 58 or 59, depending on whether you are using Linux / Unix, or Windows, respectively.</p>\n"}], "owner": {"reputation": 47, "user_id": 3293466, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1432183074/picture?type=large", "display_name": "rafa", "link": "https://stackoverflow.com/users/3293466/rafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1023, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1448493420, "creation_date": 1448486366, "question_id": 33926595, "link": "https://stackoverflow.com/questions/33926595/text-file-binary-search", "title": "Text File Binary Search", "body": "<p>I have a test file that looks like this:</p>\n\n<pre><code>Ampersand           Gregorina           5465874526370945\nAnderson            Bob                 4235838387422002\nAnderson            Petunia             4235473838457294\nAphid               Bumbellina          8392489357392473\nArmstrong-Jones     Mike                8238742438632892\n</code></pre>\n\n<p>And code that looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nclass CardSearch\n{\nprotected:\n    std::ifstream cardNumbers;\n\npublic:\n    CardSearch(std::string fileName)\n    {\n        cardNumbers.open(fileName, std::ios::in);\n\n        if (!cardNumbers.is_open())\n        {\n            std::cout &lt;&lt; \"Unable to open: \" &lt;&lt; fileName;\n        }\n        return;\n    }\n\n    std::string Find(std::string lastName, std::string firstName)\n    {\n        // Creating string variables to hold first and last name\n        // as well as card number. Also creating bools to decide whether\n        // or not the person has been found or if the last name is the only\n        // identifier for a found person\n        std::string lN;\n        std::string fN;\n        std::string creditNumber;\n        bool foundPerson = false;\n\n        // By using the seekg and tellg functions, we can find our place\n        // in the file and also calculate the amount of lines within the file\n        cardNumbers.seekg(0, std::ios::beg);\n        cardNumbers.clear();\n        std::streamsize first = cardNumbers.tellg();\n        cardNumbers.ignore(std::numeric_limits&lt;std::streamsize&gt;::max());\n        cardNumbers.clear();\n        std::streamsize last = cardNumbers.tellg();\n        cardNumbers.seekg(0, std::ios::beg);\n        std::streamsize lineNumbers = (last / 57);\n        std::streamsize middle;\n\n        while (first &lt;= lineNumbers)\n        {\n            middle = (first + lineNumbers) / 2;\n            // middle * 57 takes us to the beginning of the correct line\n            cardNumbers.seekg(middle * 57, std::ios::beg);\n            cardNumbers.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\n            cardNumbers &gt;&gt; lN &gt;&gt; fN;\n\n            if (lN &lt; lastName)\n            {\n                first = middle + 1;\n            }\n            else if (lN &gt; lastName)\n            {\n                lineNumbers = middle - 1;\n            }\n            else\n            {\n                if (fN &lt; firstName)\n                {\n                    first = middle + 1;\n                }\n                else if (fN &gt; firstName)\n                {\n                    lineNumbers = middle - 1;\n                }\n                else if (fN == firstName)\n                {\n                    foundPerson = true;\n                    break;\n                }\n            }\n        }\n\n        if (foundPerson)\n        {\n            // When a person is found, we seek to the correct line position and \n            // offset by another 40 characters to receive the card number\n            cardNumbers.seekg((middle * 57) + 40, std::ios::beg);\n            std::cout &lt;&lt; lN &lt;&lt; \", \" &lt;&lt; fN &lt;&lt; \" \";\n            cardNumbers &gt;&gt; creditNumber;\n            return creditNumber;\n        }\n        return \"Unable to find person.\\n\";\n    }\n};\n\nint main()\n{\n    CardSearch CS(\"C:/Users/Rafael/Desktop/StolenNumbers.txt\");\n    std::string S = CS.Find(\"Ampersand\", \"Gregorina\");\n    std::cout &lt;&lt; S;\n\n    std::cin.ignore();\n    std::cin.get();\n\n    return 0;\n}\n</code></pre>\n\n<p>I am able to retrieve all but the first record in the list. It seems as though the seekg is seeking to the correct position but cardNumbers is not reading the correct information. When 'middle' is set to 0, the seekg should seek to the 0th line, (middle * 57), read in Ampersand Gregorina and make a comparison. Instead, it remains reading Anderson Bob. </p>\n\n<p>Any ideas as to why this may be happening?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 572, "user_id": 1243333, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a82685522447fffacac3fde99cec46af?s=128&d=identicon&r=PG", "display_name": "Supervisor", "link": "https://stackoverflow.com/users/1243333/supervisor"}, "is_accepted": true, "score": 2, "last_activity_date": 1448490605, "creation_date": 1448490605, "answer_id": 33927554, "question_id": 33926369, "link": "https://stackoverflow.com/questions/33926369/template-typed-method-gtesting/33927554#33927554", "title": "Template Typed Method GTesting", "body": "<p>Figured it out.</p>\n\n<p>'templatize' the fixture:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct testFixture\n  : public base\n  , public ::testing::Test {\n  using base::printVal;\n  void printVal() {\n    base::printVal&lt;T&gt;();\n  }\n};\n</code></pre>\n\n<p>And then proceed as normal:</p>\n\n<pre><code>typedef ::testing::Types&lt;A, B, C&gt; MyTypes;\nTYPED_TEST_CASE(testFixture, MyTypes);\n\nTYPED_TEST(testFixture, typedTest) {\n  this-&gt;template printVal&lt;TypeParam&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 572, "user_id": 1243333, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a82685522447fffacac3fde99cec46af?s=128&d=identicon&r=PG", "display_name": "Supervisor", "link": "https://stackoverflow.com/users/1243333/supervisor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 33927554, "answer_count": 1, "score": 2, "last_activity_date": 1480991460, "creation_date": 1448485412, "last_edit_date": 1480991460, "question_id": 33926369, "link": "https://stackoverflow.com/questions/33926369/template-typed-method-gtesting", "title": "Template Typed Method GTesting", "body": "<p>This is what I have:</p>\n\n<pre><code>/* Can't change 'base' struct. */\nstruct base {\n  public:\n    template&lt;typename T&gt;\n    void printVal() {\n      std::cout &lt;&lt; T::x &lt;&lt; std::endl;\n    }\n};\n\nstruct testFixture\n  : public base\n  , public ::testing::Test {\n  using base::printVal;\n};\n\nTEST_F(testFixture, testF) {\n  printVal&lt;A&gt;();\n  printVal&lt;B&gt;();\n  printVal&lt;C&gt;();\n}\n</code></pre>\n\n<p>Which works fine. But, I want to use typed tests so the code looks something more like this:</p>\n\n<pre><code>/* Same base class as above. */\nstruct testFixture\n  : public base\n  , public ::testing::Test {\n  using base::printVal;\n};\n\ntypedef ::testing::Types&lt;A, B, C&gt; MyTypes;\nTYPED_TEST_CASE(testFixture, MyTypes);\n\nTYPED_TEST(testFixture, typedTest) { \n  printVal&lt;TypeParam&gt;();\n}\n</code></pre>\n\n<p>Of course, since 'testFixture' is not a templated struct/class, this will not work, and I get this error:</p>\n\n<pre><code>test2.cpp:31:12: error: unknown template name 'testFixture'\nTYPED_TEST(testFixture, typedTest) {\n</code></pre>\n\n<p>Is there a way I can get this type of functionality using googletest?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448486406, "post_id": 33926345, "comment_id": 55614098, "body": "A first error is: You have to rotate while your mesh is on the origin, so to be clear, you have to rotate prior to translate. There should be another error in the rest of your code, could you show more context?"}, {"owner": {"reputation": 93, "user_id": 4152547, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/CurCz.png?s=128&g=1", "display_name": "Java_NewBie", "link": "https://stackoverflow.com/users/4152547/java-newbie"}, "reply_to_user": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448487150, "post_id": 33926345, "comment_id": 55614464, "body": "hi, check out now. its a lot messy, please dont mind"}, {"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448487726, "post_id": 33926345, "comment_id": 55614750, "body": "You have to reorganize transformations. Because your arrows have to be rotated (always on (0,0,0)) You need to compute a <code>x</code> and a <code>y</code> that you increment between passes. =&gt; 1: for (rows...) 2: LoadIdentity 3:  compute absolute x and y (in world space) 4: rotate 5: translate(x,y,0) 6: draw"}, {"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448487975, "post_id": 33926345, "comment_id": 55614885, "body": "I dont know if it&#39;s very clear for you. For now, you use opengl matrix stack to hold translations, what you need is an absolute x and y in world space and to reload identity matrice for each arrow, to be able to rotate it on the origin"}, {"owner": {"reputation": 5944, "user_id": 739912, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ecb4e59183a439d978bb0598c94eee04?s=128&d=identicon&r=PG", "display_name": "Felix K.", "link": "https://stackoverflow.com/users/739912/felix-k"}, "edited": false, "score": 0, "creation_date": 1448488188, "post_id": 33926345, "comment_id": 55614975, "body": "First start stopping using deprecated functionality! :-)"}, {"owner": {"reputation": 93, "user_id": 4152547, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/CurCz.png?s=128&g=1", "display_name": "Java_NewBie", "link": "https://stackoverflow.com/users/4152547/java-newbie"}, "edited": false, "score": 0, "creation_date": 1448488785, "post_id": 33926345, "comment_id": 55615281, "body": "i get that all arrows are rotation from one point, but how do i change it ?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 1, "creation_date": 1450908721, "post_id": 33926345, "comment_id": 56630832, "body": "Did my answer help you?"}], "answers": [{"comments": [{"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448492266, "post_id": 33926940, "comment_id": 55616728, "body": "and what if you rotate first, it&#39;s seems strange to me that it is working this way..."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448492912, "post_id": 33926940, "comment_id": 55617008, "body": "@j-p: it mean you rotate coord axis than they points to other positions  (vector) than (1, 0) and (0, 1) and when you translate objects it will be translated through this new axis."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448493218, "post_id": 33926940, "comment_id": 55617128, "body": "@j-p: axis orientation will lost previous basis (|_) became for example (\\/) (sory for lost orthogonality), and new object will be translared consider new origin orientation."}, {"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448495251, "post_id": 33926940, "comment_id": 55617768, "body": "@Mykola: Opengl use row-major storage for matrices, I missed it...I use col-major (opentk) most of the time...(<a href=\"http://www.opentk.com/node/2794\" rel=\"nofollow noreferrer\">opentk.com/node/2794</a>)"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448495771, "post_id": 33926940, "comment_id": 55617924, "body": "@j-p: OpenGL transformations use tranposed matrices as standard matrix representation. The only way to use row major matrices is to call <code>glLoadTransposeMatrix</code> or <code>glMultTransposeMatrix</code>."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448496082, "post_id": 33926940, "comment_id": 55618003, "body": "@j-p: I agree with you about openTK example as in shader you may use any kind of matrix respresentation, because you decide how to multiply vectors to matrix, in fixed pipeline you simply cannot do that thing."}, {"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1448497905, "post_id": 33926940, "comment_id": 55618430, "body": "@Mykola: my bad, it&#39;s the opposite, gl use col major and tk row major, sorry"}], "tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 2, "last_activity_date": 1448489439, "last_edit_date": 1448489439, "creation_date": 1448487918, "answer_id": 33926940, "question_id": 33926345, "link": "https://stackoverflow.com/questions/33926345/open-gl-rotation/33926940#33926940", "title": "Open GL Rotation", "body": "<p>Try to draw your arrow in one rutine lets call it <code>DrawArrow</code> I suggest it size must be between <code>[-1.0f; 1.0f]</code> than place it at the proper position using affine transform first of all translation secondly rotation.</p>\n\n<pre><code>void DrawArrow(void)\n{\n    float x1 = 0;\n    float x2 = -0.05;\n    float x3 = -0.1;\n    float x4 = 0.1;\n    float x5 = 0.05;\n\n    float y1 = -0.15;\n    float y2 = 0;\n    float y3 = 0.15;\n\n\n    glBegin(GL_LINE_STRIP);//start drawing a line loop\n\n        glColor3f(1.0, 0.0, 0.0);\n        glVertex3f(x1, y1, 0.0f);\n        glVertex3f(x2, y2, 0.0f);\n        glVertex3f(x3, y2, 0.0f); // drawing a arrow\n        glVertex3f(x1, y3, 0.0f);\n        glVertex3f(x4, y2, 0.0f);\n        glVertex3f(x5, y2, 0.0f);\n        glVertex3f(x1, y1, 0.0f);\n\n    glEnd();//\n}\n</code></pre>\n\n<p>Than your array drawing function like this (you may correct inacurrances):</p>\n\n<pre><code>void drawArrows(void) {\n    float y1 = 2.0;\n\n\n    int count2 = 0;\n    for (float col = 0; col &lt; 10; col++) {\n        y1 -= 0.5;\n\n        float x1 = -2.25;\n\n        for (float rows = 0; rows &lt; 10; rows++) {\n\n            glPushMatrix(); \n\n            glTranslatef(x1, y1, 0.0);\n\n            float m = (windx[count2] * windx[count2]) + (windy[count2] * windy[count2]);\n            float rotator = sqrt(m);\n            glRotatef(rotator-50, 0.0, 0.0, 1.0);\n\n            DrawArrow();\n\n            x1 += .5;\n\n            count2 ++;\n            glPopMatrix();\n        }\n    }\n}\n</code></pre>\n\n<p>I have made some tests the result will be like this (with constant rotator).</p>\n\n<p><a href=\"https://i.stack.imgur.com/FzrrE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FzrrE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 93, "user_id": 4152547, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/CurCz.png?s=128&g=1", "display_name": "Java_NewBie", "link": "https://stackoverflow.com/users/4152547/java-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450036845, "creation_date": 1448485337, "last_edit_date": 1450036845, "question_id": 33926345, "link": "https://stackoverflow.com/questions/33926345/open-gl-rotation", "title": "Open GL Rotation", "body": "<p>i'm trying to draw 100 arrows in a grid and trying to rotate each arrow according to the size of the input i read. But here when i try to rotate one arrow, all the arrows rotate at once with it. whats wrong with it ? </p>\n\n<pre><code>void drawArrow(void) {\n\n    float y1 = 2.0;\n    float y2 = 2.15;\n    float y3 = 2.4;\n\n\n    int count2 = 0;\n    for (float col = 0; col &lt; 10; col++) {\n        y1 -= 0.5;\n\n        y2 -= 0.5;\n        y3 -= 0.5;\n\n\n        float x1 = -2.25;\n        float x2 = -2.20;\n        float x3 = -2.15;\n        float x4 = -2.35;\n        float x5 = -2.30;\n\n        for (float rows = 0; rows &lt; 10; rows++) {\n\n            glPushMatrix(); \n\n\n            glTranslatef(-0.35 + 0.5 - 0.1, 0.4 - 0.01 + 0.1, 0.0);\n\n            float m = (windx[count2] * windx[count2]) + (windy[count2] * windy[count2]);\n            float rotator = sqrt(m);\n            glRotatef(rotator-50, 0.0, 0.0, 1.0);\n\n            glBegin(GL_LINE_STRIP);//start drawing a line loop\n\n            glColor3f(1.0, 0.0, 0.0);\n            glVertex3f(x1, y1, 0.0f);\n            glVertex3f(x2, y2, 0.0f);\n            glVertex3f(x3, y2, 0.0f); // drawing a arrow\n            glVertex3f(x1, y3, 0.0f);\n            glVertex3f(x4, y2, 0.0f);\n            glVertex3f(x5, y2, 0.0f);\n            glVertex3f(x1, y1, 0.0f);\n\n            x1 += .5;\n            x2 += .5;\n            x3 += .5;\n            x4 += .5;\n            x5 += .5;\n            count2 ++;\n            glEnd();//end drawing of line loop \n            glPopMatrix();\n        }\n}\n\nint main(int argc, char **argv) {\n\n    glMatrixMode(GL_PROJECTION);\n    glutInit(&amp;argc, argv); // Initialize GLUT  \n    glutInitDisplayMode(GLUT_SINGLE); // Set up a basic display buffer (only single buffered for now)  \n    glutInitWindowSize(1000, 800); // Set the width and height of the window  \n    glutInitWindowPosition(100, 100); // Set the position of the window  \n    glutCreateWindow(\"Weather Analysis\"); // Set the title for the window  \n    readDataFile();             //Read Data From File\n    glutKeyboardFunc(keyboard);\n    glutDisplayFunc(display); // Tell GLUT to use the method \"display\" for rendering  \n\n    glutReshapeFunc(reshape); // Tell GLUT to use the method \"reshape\" for reshaping  \n\n\n\n    glutMainLoop(); // Enter GLUT's main loop \n    void reshape(int width, int height) {\n    glViewport(0, 0, (GLsizei)width, (GLsizei)height); // Set our viewport to the size of our window  \n    glMatrixMode(GL_PROJECTION); // Switch to the projection matrix so that we can manipulate how our scene is viewed  \n    glLoadIdentity(); // Reset the projection matrix to the identity matrix so that we don't get any artifacts (cleaning up)  \n    gluPerspective(60, (GLfloat)width / (GLfloat)height, 1.0, 100.0); // Set the Field of view angle (in degrees), the aspect ratio of our window, and the new and far planes  \n    glMatrixMode(GL_MODELVIEW); // Switch back to the model view matrix, so that we can start drawing shapes correctly  \n}\n\nvoid display(void) {\n    glClearColor(0.0f, 0.0f, 0.0f, 1.0f); // Clear the background of our window to red  \n    glClear(GL_COLOR_BUFFER_BIT); //Clear the colour buffer (more buffers later on)  \n    glLoadIdentity(); // Load the Identity Matrix to reset our drawing locations  \n\n    glTranslatef(0.0f, 0.5f, -6.0f);\n\n    renderPrimitive(); // Render the primitive  \n    drawArrow();\n    glFlush(); // Flush \n}\n</code></pre>\n\n<p>and ALSO i dont know what to enter in the GLtranslatef method. Im really a beginner, sorry.<a href=\"https://i.stack.imgur.com/GF37b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GF37b.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "boost-hana"], "answers": [{"tags": [], "owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "is_accepted": false, "score": 4, "last_activity_date": 1448492566, "last_edit_date": 1448492566, "creation_date": 1448491751, "answer_id": 33927783, "question_id": 33926237, "link": "https://stackoverflow.com/questions/33926237/filtering-a-tuple-in-boost-hana/33927783#33927783", "title": "Filtering a tuple in boost hana", "body": "<p>The problem is the <code>T&amp;&amp;</code>, I think it deduces the type to be of type <code>T&amp;</code> which means that <code>hana::type_c&lt;T&gt; != hana::type_c&lt;T&amp;&gt;</code> The fix is to leave the <code>&amp;&amp;</code> because they are unnecessary.</p>\n\n<pre><code>template&lt;class... Ts, class T&gt;\nconstexpr auto contains(T){\n  auto types = hana::tuple_t&lt;Ts...&gt;;\n  return hana::find(types, hana::type_c&lt;T&gt;) != hana::nothing;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1567, "user_id": 800347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Buq1.jpg?s=128&g=1", "display_name": "Jason Rice", "link": "https://stackoverflow.com/users/800347/jason-rice"}, "is_accepted": false, "score": 2, "last_activity_date": 1448494175, "creation_date": 1448494175, "answer_id": 33928224, "question_id": 33926237, "link": "https://stackoverflow.com/questions/33926237/filtering-a-tuple-in-boost-hana/33928224#33928224", "title": "Filtering a tuple in boost hana", "body": "<p>Just to add to your answer, your <code>ht1</code> was calling <code>contains</code> with <code>t</code> an lvalue. The following demonstrates <code>T&amp;&amp;</code> in the case of passing an rvalue and an lvalue:</p>\n\n<pre><code>#include&lt;boost/hana.hpp&gt;\n\nnamespace hana = boost::hana;\n\ntemplate&lt;class T&gt;\nvoid test1(T&amp;&amp;) {\n  static_assert(hana::type_c&lt;T&gt; == hana::type_c&lt;int&gt;, \"\");\n}\n\nint main() {\n  static_assert(hana::type_c&lt;int&gt; != hana::type_c&lt;int&amp;&amp;&gt;, \"\");\n  test1(5);\n  int x = 5;\n  test1(x); //fails\n}\n</code></pre>\n\n<p>clang output:</p>\n\n<pre><code>main.cpp:7:3: error: static_assert failed \"\"\n  static_assert(hana::type_c&lt;T&gt; == hana::type_c&lt;int&gt;, \"\");\n  ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nmain.cpp:14:3: note: in instantiation of function template specialization 'test1&lt;int &amp;&gt;' requested here\n  test1(x); //fails\n  ^\n1 error generated.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": true, "score": 5, "last_activity_date": 1448499214, "last_edit_date": 1495542348, "creation_date": 1448499214, "answer_id": 33928961, "question_id": 33926237, "link": "https://stackoverflow.com/questions/33926237/filtering-a-tuple-in-boost-hana/33928961#33928961", "title": "Filtering a tuple in boost hana", "body": "<p>The problem here actually has nothing to do with Hana, it has to do with the way universal references are deduced. Just to clear up things, <code>hana::type_c&lt;T&gt; == hana::type_c&lt;U&gt;</code> is precisely equivalent to <code>std::is_same&lt;T, U&gt;{}</code>. There is no reference or cv-qualifier removing when comparing <code>hana::type</code>s. You can look at various articles (like <a href=\"https://stackoverflow.com/a/20371167/627587\">this</a> or <a href=\"http://eli.thegreenplace.net/2014/perfect-forwarding-and-universal-references-in-c/\" rel=\"nofollow noreferrer\">this</a>) for these rules.</p>\n\n<p>Now, let me go through your code and modify some things, with comments. First,</p>\n\n<pre><code>  auto types = hana::to&lt;hana::tuple_tag&gt;(hana::tuple_t&lt;Ts...&gt;);\n</code></pre>\n\n<p>is redundant, because you're already creating a <code>hana::tuple</code> with <code>hana::tuple_t</code>. Hence, <code>hana::tuple_t&lt;T...&gt;</code> only is sufficient. Secondly, there's this line:</p>\n\n<pre><code>  return hana::bool_c&lt;hana::find(types, hana::type_c&lt;T&gt;) != hana::nothing&gt;;\n</code></pre>\n\n<p>Instead of checking <code>hana::find(...) != hana::nothing</code>, I would instead use <code>hana::contains</code>, which expresses your intent better and might be more optimized too. In general, and especially with a metaprogramming library with Hana, don't try to reason as to what will be faster. Just state your intent as clearly as possible and hope for me to do my job properly on the implementation side :-). Hence, you'll end up with </p>\n\n<pre><code>return hana::bool_c&lt;hana::contains(types, hana::type_c&lt;T&gt;)&gt;;\n</code></pre>\n\n<p>Now, that <code>hana::bool_c&lt;...&gt;</code> really is redundant, because <code>hana::contains</code> already returns a boolean <code>integral_constant</code>. Hence, the above is equivalent to the simpler</p>\n\n<pre><code>return hana::contains(types, hana::type_c&lt;T&gt;);\n</code></pre>\n\n<p>Finally, putting all the bits together and simplifying, you get</p>\n\n<pre><code>template&lt;class... Ts, class T&gt;\nconstexpr auto contains(T&amp;&amp;){\n  return hana::contains(hana::tuple_t&lt;Ts...&gt;, hana::type_c&lt;T&gt;);\n}\n</code></pre>\n\n<p>I'm personally not a fan of taking the <code>T&amp;&amp;</code> as an argument, when all you want is actually the type of that object. Indeed, that forces you to actually provide an <strong>object</strong> to <code>contains</code> function, which might be unwieldy in some circumstances (what if you don't have an object around?). Furthermore, it can be confusing to be comparing values with types:</p>\n\n<pre><code>contains&lt;int, char, double&gt;(3.5) // wtf, 3.5 is not in [int, char, double]!\n</code></pre>\n\n<p>Instead, I would write the following if it was my own code:</p>\n\n<pre><code>template&lt;class... Ts, class T&gt;\nconstexpr auto contains(T type){\n  return hana::contains(hana::tuple_t&lt;Ts...&gt;, type);\n}\n\n// and then use it like\ncontains&lt;int, char, double&gt;(hana::type_c&lt;double&gt;)\n</code></pre>\n\n<p>But that is part of the interface of your function, and I guess you are a better judge than I to know what your needs are in terms of interface.</p>\n"}], "owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 1, "accepted_answer_id": 33928961, "answer_count": 3, "score": 3, "last_activity_date": 1448499214, "creation_date": 1448484882, "question_id": 33926237, "link": "https://stackoverflow.com/questions/33926237/filtering-a-tuple-in-boost-hana", "title": "Filtering a tuple in boost hana", "body": "<pre><code>template&lt;class... Ts, class T&gt;\nconstexpr auto contains(T&amp;&amp;){\n  auto types = hana::to&lt;hana::tuple_tag&gt;(hana::tuple_t&lt;Ts...&gt;);\n  return hana::bool_c&lt;hana::find(types, hana::type_c&lt;T&gt;) != hana::nothing&gt;;\n}\n\nauto ht = hana::make_tuple(1,2,3,'c');\n\nauto ht1 = hana::filter(ht, [](auto t){\n  return contains&lt;int,float,double&gt;(t);\n});\n//prints 0\nstd::cout &lt;&lt; hana::size(ht1) &lt;&lt; std::endl;\n</code></pre>\n\n<p>I am not sure if I am using boost hana correctly but <code>contains</code> seems to work.</p>\n\n<pre><code>std::cout &lt;&lt; contains&lt;int,float,double&gt;(5) &lt;&lt; std::endl;   // 1\nstd::cout &lt;&lt; contains&lt;int,float,double&gt;('c') &lt;&lt; std::endl; // 0\nstd::cout &lt;&lt; contains&lt;int,float,double&gt;(5.0f) &lt;&lt; std::endl; // 1\n</code></pre>\n\n<p>Why is the size of <code>ht1</code> 0?</p>\n"}, {"tags": ["c++", "member-function-pointers"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1448484712, "post_id": 33926100, "comment_id": 55613248, "body": "I haven&#39;t tried compiling it myself because you didn&#39;t post enough code to make it compilable but the error looks like the compiler is confused and needs parenthesis: <code>std::cout &lt;&lt; (this-&gt;*arr_ptr_fun[0])();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1448485475, "post_id": 33926193, "comment_id": 55613595, "body": "Thanks, that solver in-class usage, but what about other scopes? e.g. this: friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Complex&amp; c)  {      os &lt;&lt; (c.*arr_ptr_fun[0])();      return os; }  error: invalid use of non-static data member &#39;Complex::arr_ptr_fun&#39; double (Complex::*arr_ptr_fun[4])(void) const;"}, {"owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "reply_to_user": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 1, "creation_date": 1448485905, "post_id": 33926193, "comment_id": 55613828, "body": "@Steve, I believe that&#39;s because arr_ptr_fun is not a static member variable. You&#39;ll need to reference the member in <code>c</code>. Try this: <code>os &lt;&lt; (c.*(c.arr_ptr_fun[0]))();</code>. That being said, if <code>arr_ptr_fun</code> is the same for every instance of <code>Complex</code>, then there&#39;s no problem making it static."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1448486452, "post_id": 33926193, "comment_id": 55614116, "body": "Wow, that worked, but how come? Use variable name twice? If I had array of objects, I would have to write (arr[0].*(arr[0].arr_ptr_fun[0]))() ?"}, {"owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "reply_to_user": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1448486633, "post_id": 33926193, "comment_id": 55614199, "body": "@Steve, <code>arr_ptr_fun</code> is an instance member of <code>Complex</code>, so you&#39;ll need an instance of <code>Complex</code>, in this case <code>c</code> to get the array. If you have an array of Complex objects, then yes you&#39;ll have to do that. Alternatively, if you make <code>arr_ptr_fun</code> static in <code>Complex</code>, then you can get away with <code>(arr[0].*(Complex::arr_ptr_fun[0]))()</code>. Of course, that assumes that <code>arr_ptr_fun</code> will always be <code>[&amp;Complex::fun1, &amp;Complex::fun2, &amp;Complex::fun3, &amp;Complex::fun4]</code>."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1448487300, "post_id": 33926193, "comment_id": 55614529, "body": "Thanks million times :) I had to understand this. I had a class that cointains  array of 10 Complex, and I tried to make &lt;&lt; write all 4 funcions of each object, and now I got it working:  friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const tab_complex&amp; tc) { for (auto&amp;&amp; x : tc.tab_c) for (auto&amp;&amp; y : x.tab_wsk_fun) os &lt;&lt; (x.*y)() &lt;&lt; std::endl; return os;}"}], "tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 6, "last_activity_date": 1448484698, "creation_date": 1448484698, "answer_id": 33926193, "question_id": 33926100, "link": "https://stackoverflow.com/questions/33926100/array-of-pointers-to-class-method-error-c11/33926193#33926193", "title": "array of pointers to class method error c++11", "body": "<p>You need to surround the member function pointer in parenthesis,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::cout &lt;&lt; (this-&gt;*arr_ptr_fun[0])();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "is_accepted": false, "score": 4, "last_activity_date": 1448487562, "last_edit_date": 1448487562, "creation_date": 1448485894, "answer_id": 33926471, "question_id": 33926100, "link": "https://stackoverflow.com/questions/33926100/array-of-pointers-to-class-method-error-c11/33926471#33926471", "title": "array of pointers to class method error c++11", "body": "<p>The answer given by @Aldehir is the correct answer to your specific question. However, if you are using C++11 (or later) then it might be a lot more convenient to use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/mem_fn\" rel=\"nofollow\"><code>std::mem_fn</code></a> to wrap calls to member functions. Using <code>std::mem_fn</code> you can eliminate the issues associated with <code>.*</code> and <code>-&gt;*</code>. Here is an <a href=\"http://coliru.stacked-crooked.com/a/606b3d7ef041364c\" rel=\"nofollow\">example</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;array&gt;\n\nclass Complex\n{\npublic:\n    double fun1() const {return 1;}\n    double fun2() const {return 2;}\n    double fun3() const {return 3;}\n    double fun4() const {return 4;}\n\n    using MemFun = decltype(std::mem_fn(&amp;Complex::fun1)) ;\n    static const std::array&lt;MemFun, 4&gt; arr_ptr_fun ;\n} ;\n\nconst std::array&lt;Complex::MemFun, 4&gt; Complex::arr_ptr_fun {{\n    std::mem_fn(&amp;Complex::fun1),\n    std::mem_fn(&amp;Complex::fun2),\n    std::mem_fn(&amp;Complex::fun3),\n    std::mem_fn(&amp;Complex::fun4)\n}} ;\n\nint main()\n{\n    //\n    // Call all the member functions using object my_foo.\n    //\n    Complex my_foo ;\n    for(auto func: Complex::arr_ptr_fun) \n    {\n        std::cout &lt;&lt; func(my_foo) &lt;&lt; std::endl;\n    }\n    //\n    // The same as above but using array indexing. \n    //\n    for(size_t i=0; i&lt;Complex::arr_ptr_fun.size(); ++i)\n    {\n        std::cout &lt;&lt; Complex::arr_ptr_fun[i](my_foo) &lt;&lt; std::endl ;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 1, "accepted_answer_id": 33926193, "answer_count": 2, "score": 3, "last_activity_date": 1475696878, "creation_date": 1448484297, "last_edit_date": 1475696878, "question_id": 33926100, "link": "https://stackoverflow.com/questions/33926100/array-of-pointers-to-class-method-error-c11", "title": "array of pointers to class method error c++11", "body": "<p>I got a small \"problem\" with array of pointers to class method.</p>\n\n<p>In short:\nMy class Complex has four functions - <code>double funX(void)</code>:</p>\n\n<pre><code>double fun1(void) const {...}\ndouble fun2(void) const {...}\n...\n</code></pre>\n\n<p>Then I have and array of pointers to member functions of above recipe.</p>\n\n<pre><code>double (Complex::*arr_ptr_fun[4])(void) const;\n</code></pre>\n\n<p>I initialize this array in constructor initializer list:</p>\n\n<pre><code>... : re(_re), im(_im), arr_ptr_fun{&amp;fun1,&amp;fun2,&amp;fun3,&amp;fun4} { /*EMPTY*/ }\n</code></pre>\n\n<p>When I try to call any of these 4 functions via this array e.g.:</p>\n\n<pre><code>std::cout &lt;&lt; this-&gt;*arr_ptr_fun[0]();\n</code></pre>\n\n<p>I get an error I do not understand:</p>\n\n<pre><code>error: must use '.*' or '-&gt;*' to call pointer-to-member function in '((const Complex*)this)-&gt;Complex::arr_ptr_fun[0] (...)', e.g. '(... -&gt;* ((const Complex*)this)-&gt;Complex::arr_ptr_fun[0]) (...)'\n     double fun4(void) const {std::cout &lt;&lt; this-&gt;*arr_ptr_fun[0](); return sqrt(fun3());}\n</code></pre>\n\n<p>Use <code>.*</code> or <code>-&gt;*</code> via which pointer...? (<code>chaos *</code> Universe pointer?)</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "templates", "c++11", "list-initialization"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448485206, "post_id": 33926029, "comment_id": 55613461, "body": "do you want to allow shorter lists, e.g. <code>Vector&lt;3&gt; a = { 1,2 };</code> ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448485286, "post_id": 33926029, "comment_id": 55613503, "body": "afaik initializer list can normally only be used for initialization not for assignment, thus I would anser (the only question I could find) with no."}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448485338, "post_id": 33926029, "comment_id": 55613529, "body": "@M.M I wasn&#39;t too sure. Would a user expect to be able to do that like they can with built in arrays or containers? I personally would like to force the list to be the exact same size."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448485456, "post_id": 33926029, "comment_id": 55613587, "body": "It seems like you&#39;ve really got 2 questions, (1) how to enforce length for initialization, (2) how to enforce length for assignment operator. Is that right?"}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448485574, "post_id": 33926029, "comment_id": 55613650, "body": "@M.M Yeah, but maybe the solution to one hints at the solution for the other."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1448485974, "post_id": 33926029, "comment_id": 55613867, "body": "Inside your variadic template thingy... Any reason this won&#39;t work: <code>static_assert(sizeof...(args) - 1 &lt; Size, &quot;Boom&quot;);</code>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1448488221, "post_id": 33926029, "comment_id": 55614995, "body": "Taking your quote to the letter, the &quot;source&quot; in your failing example <i>is</i> a constant expression... There&#39;s just an extra level of indirection..."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1448487417, "post_id": 33926665, "comment_id": 55614578, "body": "Copy-construction doesn&#39;t seem to work with this solution, e.g. <code>vector&lt;int, 3&gt; w(v);</code>."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448487847, "post_id": 33926665, "comment_id": 55614818, "body": "@M.M right, I figured that out (see edit) by looking at your answer :/. It seems there&#39;s no obvious/elegant/simplistic way out of that. It&#39;s either one or the other.... Wait, I can&#39;t seem to get the copy constructor selected over the variadic template (and I thought non-template functions were selected over template functions :o)... <a href=\"http://coliru.stacked-crooked.com/a/cc994313c1291e30\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/cc994313c1291e30</a>"}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448506741, "post_id": 33926665, "comment_id": 55620542, "body": "After template argument deduction we have as viable functions the non-template copy constructor <code>Vector(const Vector&amp;)</code> and the variadic member template constructor <code>Vector(U&amp;&amp;)</code> but with <code>U</code> replaced by <code>Vector&amp;</code> giving <code>Vector(Vector&amp;)</code> by reference collapsing. Since <code>Vector(Vector&amp;)</code> doesn&#39;t require low-level const conversion it is selected (non-template functions aren&#39;t selected if there is a template with a better match)."}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448506766, "post_id": 33926665, "comment_id": 55620549, "body": "A solution would be to use <code>const U&amp;</code> or <code>const U&amp;&amp;</code> or even just <code>U</code>, I don&#39;t think it&#39;s important to carry on the const or lvalue/rvalue property of my arguments. I guess by using <code>U&amp;&amp;</code> and preserving const and lvalue/rvalue properties you require no conversions and risk that function becoming a better match in overload resolution than the ordinary copy-control."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448507376, "post_id": 33926665, "comment_id": 55620681, "body": "This needs an <code>enable_if</code>; as written it&#39;s too greedy. (It also creates an implicit conversion from everything.)"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1448535690, "post_id": 33926665, "comment_id": 55633404, "body": "I&#39;m forwarding greediness to the initialization of <code>std::array</code>, really, so &quot;implicit conversion from everything&quot; only works as long as the &quot;everything&quot; is compatible with the brace initialization of <code>std::array</code> and <code>T</code>. I think I fixed the shortcomings now, @M.M. Not sure if this solution is &quot;neater&quot; than yours. It does avoid the arg-expansion trick though."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448535789, "post_id": 33926665, "comment_id": 55633457, "body": "It&#39;s still constructible from every combination of two or more arguments as far as <code>std::is_constructible</code> is concerned. The member initializer list doesn&#39;t SFINAE."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448560644, "post_id": 33926665, "comment_id": 55648348, "body": "@T.C. That would be a failing in the trait, as it clearly isn&#39;t constructible from everything. I think this version satisfies all concerns the problem presents. If not, I&#39;ll be glad to think on concrete improvements!"}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448563294, "post_id": 33926665, "comment_id": 55649403, "body": "@T.C. Something like <code>typename = typename enable_if&lt;is_convertible&lt;U, double&gt;::value&gt;::type...</code> along with <code>typename = typename enable_if&lt;sizeof...(U) == N&gt;::type</code> inside the template parameter list, but there seems to be a restriction on expanding packs declared in the same list ([14.1]/15 of N3337)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448598875, "post_id": 33926665, "comment_id": 55659204, "body": "@AntiElephant That&#39;s not valid syntax. You want something along the lines of <code>typename = typename enable_if&lt;std::conjunction_v&lt;std::is_convertible&lt;U, double&gt;...&gt;&gt;::type</code> (<code>conjunction_v</code> is C++17 but readily implementable in C++14 (or C++11 with <code>::value</code> instead of <code>_v</code>))."}], "tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": true, "score": 5, "last_activity_date": 1448535635, "last_edit_date": 1448535635, "creation_date": 1448486678, "answer_id": 33926665, "question_id": 33926029, "link": "https://stackoverflow.com/questions/33926029/compile-time-error-if-brace-closed-list-is-the-wrong-size-for-class-constructor/33926665#33926665", "title": "Compile time error if brace-closed list is the wrong size for class constructor", "body": "<p>You can make your constructor a variadic template so that any condition can be used:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cstddef&gt;\n\ntemplate&lt;typename T, std::size_t N&gt;\nclass vector\n{\npublic:\n    vector(T&amp;&amp; value)\n    : data{static_cast&lt;T&gt;(value)}\n    {}\n    template&lt;typename U&gt;\n    vector(const vector&lt;U,N&gt;&amp; v)\n    {\n      std::copy(begin(v.data), end(v.data),\n                begin(data));\n    }\n    template&lt;typename U&gt;\n    vector(const vector&lt;U,N&gt;&amp; v)\n    {\n        std::copy(begin(v.data), end(v.data),\n                  begin(data));\n    }\n    template&lt;typename... U,\n             typename = typename std::enable_if&lt;sizeof...(U)-1&gt;::type&gt;\n    vector(U&amp;&amp;... values)\n    : data{static_cast&lt;T&gt;(values)...}\n    {\n        static_assert(sizeof...(values) == N, \"wrong size\");\n    }\n    std::array&lt;T,N&gt; data;\n};\n\nint main()\n{\n    vector&lt;int, 3&gt; v = {1,2,3};\n    vector&lt;double, 4&gt; vv = {5,4,3,2};\n\n    vv = {1,2,3,4};\n\n    //vector&lt;float, 3&gt; vf = {1,2,3,4}; // fails to compile\n    vector&lt;float,3&gt; vf = v;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/504427107b6d17fb\" rel=\"nofollow\">Live example on coliru</a>.</p>\n\n<p>It gets you a custom error message, easily adaptable/extensible condition for failure, and gets rid of the \"narrowing conversion\" problem by effectively forwarding the initialization to the <code>std::array</code> initializer like you wanted to do in the first place. Oh, and you get assignment for free.</p>\n\n<p>As @M.M mentions, this solution ruins copy construction, unfortunately. You can solve it by adding an <code>enable_if</code> on the variadic arguments \"array\" size as shown above. Of course you need to be careful to not ruin assignment/copy-construction and single-element vectors, which is remedied by adding two extra constructors for these special cases.</p>\n"}, {"comments": [{"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448489077, "post_id": 33926711, "comment_id": 55615409, "body": "Nice solution. Although I&#39;m not all too familiar with syntax when it comes to unpacking. It seems odd that just something like <code>vhelp(args)... ;</code> isn&#39;t also valid syntax and it is indeed necessary to create a temporary array (isn&#39;t unpacking just the same as writing <code>vhelp(a1), vhelp(a2), vhelp(a3), ...</code>?)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448489237, "post_id": 33926711, "comment_id": 55615502, "body": "@AntiElephant unfortunately there is no syntax for directly calling a function once for each member of the pack; that&#39;s what&#39;s achieved by the comma operator hack.  I guess there would be a technical reason why they didn&#39;t make <code>f(args)...;</code> be possible"}, {"owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448492777, "post_id": 33926711, "comment_id": 55616945, "body": "It can be done in certain contexts. Like passing the expansion to a function. <a href=\"http://coliru.stacked-crooked.com/a/3288f60d506227f7\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3288f60d506227f7</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "edited": false, "score": 0, "creation_date": 1448492843, "post_id": 33926711, "comment_id": 55616970, "body": "@AntiElephant looks like another hack..:)"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 5, "last_activity_date": 1448487738, "last_edit_date": 1495541745, "creation_date": 1448486932, "answer_id": 33926711, "question_id": 33926029, "link": "https://stackoverflow.com/questions/33926029/compile-time-error-if-brace-closed-list-is-the-wrong-size-for-class-constructor/33926711#33926711", "title": "Compile time error if brace-closed list is the wrong size for class constructor", "body": "<p>This code seems to work, for both constructor and assignment-operator:</p>\n\n<pre><code>#include &lt;array&gt;\n\ntemplate&lt;size_t N&gt;\nstruct Vector\n{\n    Vector() = default;\n\n    template&lt;typename...Args&gt;\n    Vector(double d, Args... args)\n    {\n        static_assert(sizeof...(args) == N-1, \"wrong args count\");\n\n        size_t idx = 0;\n        auto vhelp = [&amp;](double d) { x[idx++] = d; };\n        vhelp(d);\n        double tmp[] { (vhelp(args), 1.0)... };\n    }\n\n    Vector &amp;operator=(Vector const &amp;other) = default;\n\nprivate:\n    std::array&lt;double, N&gt; x = {};\n};\n\nint main()\n{\n    Vector&lt;5&gt; v = { 1,2,3,4,5 };\n    v = { 3,4,5,6,7 };\n\n    Vector&lt;1&gt; w = { 1,2 };  // error\n}\n</code></pre>\n\n<p>The assignment operator works because the constructor is implicit, so <code>v = bla</code> attempts to convert <code>bla</code> to match the only definition of <code>operator=</code>. </p>\n\n<p>I made the first argument <code>double d</code> instead of just using all variadic args, to avoid the issue where all-variadic-args constructor catches calls that were supposed to be copy-construction.</p>\n\n<p>The line involving <code>double tmp[]</code> uses what I call the <a href=\"https://stackoverflow.com/questions/33620783/int-a-functioncalla1-a2-0-voida-what-does-this-syntax-do-mea/\">variadic template comma operator hack</a>. This hack has many uses, but here it lets us avoid the narrowing-conversion issue that <code>double tmp[] { args... };</code> has.  </p>\n\n<p>(TBH though, incorporating rubvenvb's idea and using <code>double tmp[] { static_cast&lt;double&gt;(args)... };</code> would be simpler)</p>\n"}], "owner": {"reputation": 1058, "user_id": 3348786, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/81dfe78a5a5efc504c9cb01ffb412391?s=128&d=identicon&r=PG&f=1", "display_name": "AntiElephant", "link": "https://stackoverflow.com/users/3348786/antielephant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 33926665, "answer_count": 2, "score": 9, "last_activity_date": 1448535635, "creation_date": 1448483993, "last_edit_date": 1592644375, "question_id": 33926029, "link": "https://stackoverflow.com/questions/33926029/compile-time-error-if-brace-closed-list-is-the-wrong-size-for-class-constructor", "title": "Compile time error if brace-closed list is the wrong size for class constructor", "body": "<p>I'm trying to write a class based around mathematical vectors:</p>\n<pre><code>template &lt;unsigned N&gt; class Vector{\npublic:\n    Vector() = default;\n    Vector(std::initializer_list&lt;double&gt; li) { *this = li;}\n    Vector&amp; operator=(std::initializer_list&lt;double&gt;);\n\nprivate:\n    std::array&lt;double, N&gt; x = {}\n}\n\ntemplate &lt;unsigned N&gt; inline Vector&lt;N&gt;&amp; Vector&lt;N&gt;::operator=(std::initializer_list&lt;double&gt; li){\n     if(N != li.size()) throw std::length_error(&quot;Attempt to initialise Vector with an initializer_list of different size.&quot;);\n     std::copy(li.begin(), li.end(), x.begin());\n     return *this;\n}\n</code></pre>\n<p>I want to be able to write code like this;</p>\n<pre><code>Vector&lt;3&gt; a = {1,2,3};\na = {3,5,1};\n</code></pre>\n<p>It would be natural for a user to expect to write code like that, right? However I want <em>compile</em>-time errors to occur if I use the wrong-sized initializer list, much like <code>std::array</code> does.</p>\n<pre><code> std::array&lt;double, 3&gt; a = {2,4,2,4} //compile time error\n Vector&lt;3&gt; a = {3,5,1,5} //run-time error as of right now\n</code></pre>\n<p>My first idea was to use <code>std::array</code> as the constructor/operator parameter so implicit conversions would occur and then the constructor would hijack, from <code>std::array</code>, the compile time errors. Except of course I could only write code like this:</p>\n<pre><code>Vector&lt;3&gt; a({2,3,2}); //fine\nVector&lt;3&gt; b = {2,4,2}; //error, requires two user-defined conversions (list -&gt; array&lt;double,3&gt; -&gt; Vector&lt;3&gt;) \n</code></pre>\n<p>I thought maybe to use a Variadic member template:</p>\n<pre><code>template &lt;typename... Args&gt; Vector(Args... li): x({li...}){\n    static_assert(sizeof...(li) == N);\n}\n</code></pre>\n<p>It has to be <code>typename...</code> rather than <code>double...</code> because nontype parameters must be integral types. But then I run in to a narrowing conversion error</p>\n<pre><code>Vector&lt;2&gt; a = {3,2} //error: narrowing conversion of 'li#0' from 'int' to 'double' inside { } [-Wnarrowing]|\n //error: narrowing conversion of 'li#1' from 'int' to 'double' inside { } [-Wnarrowing]|\n</code></pre>\n<p>Presumably for violating [8.5.4]/7</p>\n<blockquote>\n<p>A narrowing conversion is an implicit conversion</p>\n<p>\u2014 from an integer type or unscoped enumeration type to a floating-point type, except where the source is a <strong>constant expression</strong> and the actual value after conversion will fit into the target type and will produce the original value when converted back to the original type, or</p>\n</blockquote>\n<p>The parameters from expanding <code>li...</code> aren't constant expressions and hence produce the narrowing conversion error. As far as I'm aware it wouldn't even be possible to make function parameters as constant expressions (nor would it make much sense?). So I'm not sure how to carry on down that route. Obviously <code>Vector&lt;2&gt; a = {2.,3.}</code> works fine but this puts a burden on the user to remember only to supply floating-point literals.</p>\n"}, {"tags": ["c++", "string", "winapi"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1448482978, "post_id": 33925709, "comment_id": 55612370, "body": "What is the type for <code>compare</code>?  Is it a function pointer?  An std::string?  A C-Style string?  A Windows String?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1448483049, "post_id": 33925709, "comment_id": 55612404, "body": "To add to what Thomas is asking, what type is pe32.szExeFile? Also, post the actual compiler error."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1448483203, "post_id": 33925709, "comment_id": 55612488, "body": "Not all string types have <code>operator==()</code> overloaded, especially C-Style strings."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1448484043, "post_id": 33925709, "comment_id": 55612915, "body": "What is <code>string</code>? Is it <code>std::string</code>?"}, {"owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1448484076, "post_id": 33925709, "comment_id": 55612939, "body": "@ThomasMatthews Type of compare is string. and type of processName is string too."}, {"owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1448484144, "post_id": 33925709, "comment_id": 55612969, "body": "@MrEricSir Error : no operator &quot;==&quot; matches to these operandes. for if (pe32.szExeFile == processName) section."}, {"owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1448484266, "post_id": 33925709, "comment_id": 55613039, "body": "@immibis yes. it is std:String"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1448485188, "post_id": 33925709, "comment_id": 55613449, "body": "Why don&#39;t you do some debugging. That would be so much easier than using SO as a proxy debugger. All you need to do is inspect your program&#39;s state. The inability to debug is by far the most glaring weakness of beginners. Make it your mission to learn how to debug."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1448485242, "post_id": 33925709, "comment_id": 55613480, "body": "@the_milad What type is pe32.szExeFile?"}, {"owner": {"reputation": 534, "user_id": 1658553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/280298c43af4665231798d4e82e3c450?s=128&d=identicon&r=PG", "display_name": "Chris R.", "link": "https://stackoverflow.com/users/1658553/chris-r"}, "edited": false, "score": 1, "creation_date": 1448485434, "post_id": 33925709, "comment_id": 55613578, "body": "I looked it up, pe32.szExeFile is a WCHAR[260], so if you change your parameter to a wstring, it should compile fine."}], "answers": [{"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1448487704, "post_id": 33926526, "comment_id": 55614728, "body": "Using multibyte characters is the wrong fix. You really need to be using Unicode. Unicode is the native type for all the Windows NT APIs and multibyte has to do a lot of conversion. Also there are continuing rumors that Microsoft will remove multibyte support from some future version of Visual Studio although old apps will of course keep working. Although I have to check, I believe Microsoft&#39;s newest framework for Universal apps <i>requires</i> Unicode and not MBCS."}, {"owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1448488166, "post_id": 33926526, "comment_id": 55614966, "body": "So what should i do dear to fix this problem? @ZanLynx"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1448488883, "post_id": 33926526, "comment_id": 55615332, "body": "I think someone else had the right answer to use <code>std::wstring</code> which holds UTF-16 Unicode points on Windows. The <code>szExeFile</code> is declared as <code>TCHAR     szExeFile[MAX_PATH]</code> so <code>TCHAR</code> will be defined as <code>wchar</code> if you put the compiler setting back to Unicode instead of MBCS."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1448489160, "post_id": 33926526, "comment_id": 55615460, "body": "Oh and <code>wchar</code> string constants use a capital <code>L</code> in front like this: <code>L&quot;wide string with Unicode like Japanese: \u65b0\u5546\u54c1\u60c5\u5831&quot;</code>"}], "tags": [], "owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "is_accepted": false, "score": -2, "last_activity_date": 1448486096, "creation_date": 1448486096, "answer_id": 33926526, "question_id": 33925709, "link": "https://stackoverflow.com/questions/33925709/string-comparsion-in-win32-c/33926526#33926526", "title": "String comparsion in win32 C++", "body": "<p>I solved it. I go to properties section of the project in Visual studio and changed the parameter of Charachter Set to Multi-byte charachter set and now everything works fine. </p>\n"}], "owner": {"reputation": 170, "user_id": 3970215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52f435adcbf4b73dbf24bca03ceb2dec?s=128&d=identicon&r=PG&f=1", "display_name": "Adonaim", "link": "https://stackoverflow.com/users/3970215/adonaim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1448487667, "creation_date": 1448482711, "question_id": 33925709, "link": "https://stackoverflow.com/questions/33925709/string-comparsion-in-win32-c", "title": "String comparsion in win32 C++", "body": "<p>I want to write a simple programm that if SbieCtrl.exe process is running in my machine, My program report it in output. But my code doesn't work. I put my code in the following :</p>\n\n<p>My Class Code :</p>\n\n<pre><code>    bool processTools(string processName) {\n\n    HANDLE hProcessSnap;\n    PROCESSENTRY32 pe32;\n    hProcessSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);\n\n    if (hProcessSnap == INVALID_HANDLE_VALUE) {\n        procRunning = false;\n    }\n    else {\n        pe32.dwSize = sizeof(PROCESSENTRY32);\n        if (Process32First(hProcessSnap, &amp;pe32)) { \n            if (pe32.szExeFile == processName) {\n                procRunning = true;\n            }\n            else {\n                while (Process32Next(hProcessSnap, &amp;pe32)) {\n                    compare = pe32.szExeFile;\n                    if (compare == processName) {\n                        procRunning = true;\n                        break;\n                    }\n                }\n            }\n            CloseHandle(hProcessSnap);\n        }\n    }\n\n    return procRunning;\n}\n</code></pre>\n\n<p>My Object Code: </p>\n\n<pre><code>class Sandboxie : Base {\npublic:\n    int SandboxieProcess() {\n        if (processTools(\"SbieCtrl.exe\")) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n};\n</code></pre>\n\n<p>Why this code doesn't work. I has several error like comparsion in \"if (pe32.szExeFile == processName)\" section. </p>\n"}, {"tags": ["c++", "linux", "ipc", "semaphore"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1448482640, "post_id": 33925670, "comment_id": 55612217, "body": "Looks more like C than C++, but as you explicitly asked about C++: Do not add C tag for C++ questions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1448482689, "post_id": 33925670, "comment_id": 55612242, "body": "Either the processes run simultanously or they run in a specific order. You cannot have both."}, {"owner": {"reputation": 119, "user_id": 3809998, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1767021881/picture?type=large", "display_name": "Shoxik", "link": "https://stackoverflow.com/users/3809998/shoxik"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1448483029, "post_id": 33925670, "comment_id": 55612395, "body": "sorry for my mistake I meant in order :) and all my code runs in c++ but this is example of my code not all my code :) the rest of my code is not important right now"}], "answers": [{"tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 1, "last_activity_date": 1448497074, "creation_date": 1448497074, "answer_id": 33928673, "question_id": 33925670, "link": "https://stackoverflow.com/questions/33925670/ipc-rmid-not-work-on-linux-with-c/33928673#33928673", "title": "IPC_RMID not work on linux with C++", "body": "<p>You have two <code>semid</code>s. One in global scope, another local to <code>main</code> (which shadows global, you should see a warning). <code>createSem</code> only knows about global one, and initializes it. <code>semctl</code> is called directly by <code>main</code>, and is passed the local one, which is garbage.</p>\n"}], "owner": {"reputation": 119, "user_id": 3809998, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1767021881/picture?type=large", "display_name": "Shoxik", "link": "https://stackoverflow.com/users/3809998/shoxik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448497074, "creation_date": 1448482562, "last_edit_date": 1448483129, "question_id": 33925670, "link": "https://stackoverflow.com/questions/33925670/ipc-rmid-not-work-on-linux-with-c", "title": "IPC_RMID not work on linux with C++", "body": "<p>I'm trying to solve my school project in C++. I have to create 15 processes and they have to run in order what means that processes run in this order 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 0. It work but when I try to remove semaphore from the memory I am getting error from semctl. On the end I use \"semctl(semid, 0, IPC_RMID, 0\" but I get error 22 which means EINVAL but it doesn't make sense and I try to remove semaphore from parrent process so I should have privileges to do that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/sem.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/wait.h&gt;\n\nunion semun {\n            int val;\n            struct semid_ds *buf;\n            ushort *array;\n                 };\nstruct sembuf sops[1];\nint semid;\n\n int wait_sem(int index, int pid){\n       fprintf(stderr, \"\\n------- Proces %d do operation wait (-1) on semaphore %d\\n\",pid, index);\n                  sops[0].sem_num = index;\n                  sops[0].sem_op = -1;\n                  sops[0].sem_flg = 0 ;\n     if  (semop(semid, sops, 1)&lt;0){\n             perror(\"semop fail wait\");\n             return 1;\n         }\n         else\n             return 0;\n  }\n\n int signal_sem(int index, int pid){\n      fprintf(stderr, \"\\n++++++ Proces %d vykonava operaciu signal (1) na semafore %d\\n\",pid,index);\n            sops[0].sem_num = index;\n            sops[0].sem_op = 1;\n            sops[0].sem_flg = 0;\n     if  (semop(semid, sops, 1)&lt;0){\n            perror(\"semop fail signal\");\n            return 1;\n         }\n         else\n            return 0;\n  }\n\n void createSem(key_t paKey, int paSemFlg, int paNsems)\n {\n     printf (\"uid=%d euid=%d\\n\", (int) getuid (), (int) geteuid ());\n     (semid = semget(paKey, paNsems, paSemFlg));\n\n\n     for (int i = 0; i &lt; paNsems; ++i) {\n         semctl(semid, i, SETVAL, 0);\n     }\n }\n\n void kic()\n {\n     printf(\"\\naaaaaaaaaaaaaa\\n\");\n }\n\n int  main() {\n\n          key_t key = 1234;\n          int semflg = IPC_CREAT | 0666;\n          int nsems = 15;\n          int semid;\n          fprintf(stderr, \"%d=\", sops);\n          createSem(IPC_PRIVATE, semflg, nsems);\n        if (semid == -1) {\n            perror(\"semget: semget failed\");\n        return 1;\n        }\n        else\n            fprintf(stderr, \"semget: semget sucess: semid = %d, parrent pid %d\\n\", semid, getpid());\n\n\n   int PROCESS_ID = 0;\n   pid_t PID;\n\n   for (int i = 1; i &lt; nsems; i++) {\n       PID = fork();\n       if(PID == 0)\n       {\n           PROCESS_ID = i;\n           break;\n       }\n   }\n\n   if(PID == -1)\n   {\n       printf(\"\\nPID ERROR\");\n   }\n\n   if(PID != 0) //parrent\n   {\n       printf(\"\\n\\nparrent with ID %d\", PROCESS_ID);\n       signal_sem(PROCESS_ID+1, PROCESS_ID);\n       wait_sem(PROCESS_ID, PROCESS_ID);\n       printf (\"uid=%d euid=%d\\n\", (int) getuid (), (int) geteuid ());\n       printf(\"\\nEND %d\\n\", getpid());\n       int s;\n       wait(&amp;s);\n\n       if((semctl(semid, 0, IPC_RMID, 0))==-1)\n       {\n           int a = errno;\n           printf(\"\\nERROR IPC_RMID %d\\n\", a);\n       }\n   }\n\n   if(PID == 0)//child\n   {\n       if(wait_sem(PROCESS_ID, PROCESS_ID) == 0){\n           printf(\"\\nI am child with ID %d\", PROCESS_ID);\n           int ID_NEXT_PROCESS = 1+PROCESS_ID;\n           if(ID_NEXT_PROCESS == nsems)\n               ID_NEXT_PROCESS = 0;\n           signal_sem(ID_NEXT_PROCESS, PROCESS_ID);\n           return 0;\n       }\n\n   }\n    return 0;\n  }\n</code></pre>\n"}, {"tags": ["c++", "linux", "debugging", "gdb", "global-variables"], "comments": [{"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 1, "creation_date": 1448487323, "post_id": 33925628, "comment_id": 55614541, "body": "You ran gdb on the library itself.  Is the program running?  Writing to memory only works if there is an inferior running, or maybe if you did <code>set write on</code>."}, {"owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "reply_to_user": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 0, "creation_date": 1448574581, "post_id": 33925628, "comment_id": 55653831, "body": "Thanks Tom.  You are correct.  See my response to Vladimir below."}], "answers": [{"comments": [{"owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "edited": false, "score": 0, "creation_date": 1448574536, "post_id": 33933007, "comment_id": 55653813, "body": "Vladimir, thanks!  This was my problem - I was starting gdb without a process.  I should have started gdb with --pid=&lt;pid&gt;.  I suppose I could have tried using a fake program as you suggested, but I already have a running program that uses the library.  So starting gdb against the process of the running program did the trick!  Thanks!"}], "tags": [], "owner": {"reputation": 1617, "user_id": 2277408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cfjxc.jpg?s=128&g=1", "display_name": "Vladimir Kunschikov", "link": "https://stackoverflow.com/users/2277408/vladimir-kunschikov"}, "is_accepted": true, "score": 0, "last_activity_date": 1448536544, "last_edit_date": 1448536544, "creation_date": 1448523666, "answer_id": 33933007, "question_id": 33925628, "link": "https://stackoverflow.com/questions/33925628/modifying-global-variables-from-gdb/33933007#33933007", "title": "Modifying global variables from gdb", "body": "<p>You are debugging without process.\n Just create some faked hello-world and link it to the forementioned library:</p>\n\n<pre><code>#g++  -ggdb hello.cc   -lmylib\n#gdb ./a.out\n#gdb&gt; b main\n#gdb&gt; r\n#gdb&gt;p globalVar1\n#gdb&gt; set globalVar1\n...\n</code></pre>\n"}], "owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 33933007, "answer_count": 1, "score": 0, "last_activity_date": 1448536544, "creation_date": 1448482405, "last_edit_date": 1448484827, "question_id": 33925628, "link": "https://stackoverflow.com/questions/33925628/modifying-global-variables-from-gdb", "title": "Modifying global variables from gdb", "body": "<p>Using GDB, I'm trying to modify a global variable.  The global variable is defined in a shared library - not sure if that makes any difference.  But I get an error \"Cannot access member\".  Here is what I am doing:</p>\n\n<pre><code>$ gdb /usr/lib/libmylib.so\nGNU gdb (GDB) Red Hat Enterprise Linux (7.2-56.el6)\n...\n\n(gdb) p GlobalVar1\n$1 = 0\n\n(gdb) info variable GlobalVar1\nAll variables matching regular expression \"GlobalVar1\":\n\nFile src/file.cc:\nstatic volatile int GlobalVar1;\n\nNon-debugging symbols:\n0x00000000007d2f08  GlobalVar1\n(gdb) \n\n(gdb) info address GlobalVar1\nSymbol \"GlobalVar1\" is static storage at address 0x7d2f08.\n\n(gdb) set var GlobalVar1=1\nCannot access memory at address 0x7d2f08\n</code></pre>\n\n<p>Any ideas why this is failing?</p>\n"}, {"tags": ["c++", "segmentation-fault", "iostream", "multiple-inheritance", "istream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1448481758, "post_id": 33925407, "comment_id": 55611752, "body": "Before asking for efficiency, fix your code to get it working please. Also videos aren&#39;t a good replacement for books or decent tutorials IMHO."}, {"owner": {"reputation": 1, "user_id": 5605603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ad1464c755a01f3bcb6ee36a295d92?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Progm", "link": "https://stackoverflow.com/users/5605603/samuel-progm"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1448481818, "post_id": 33925407, "comment_id": 55611774, "body": "I did say that it was not working. &quot;I am getting segmentation errors too&quot;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1448481970, "post_id": 33925407, "comment_id": 55611844, "body": "<i>&quot;I am getting segmentation errors too&quot;.</i> Then your code isn&#39;t <b>working</b> , period. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and show your debugging efforts explaining your problems in detail."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1448482483, "post_id": 33925407, "comment_id": 55612129, "body": "1. You&#39;re most likely passing invalid pointers to that function. Don&#39;t pass a pointer. 2. A sequence of <code>&gt;&gt;</code> extractions doesn&#39;t &quot;rewind&quot; when it fails \u2013 all you get is a stream in a failure state, stuck in the position where it failed. 3. Ignore YouTube videos. Invest in a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">decent book</a>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1448483608, "post_id": 33925407, "comment_id": 55612681, "body": "Please fix the code indentation in your question, it&#39;s silly to expect anyone to waste their time trying to understand it if you can&#39;t even be bothered to format it properly. the site shows you a preview of what you&#39;re editing before you submit it, so there is no excuse for posting something so illegible."}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 5530296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0SDbSJmRQiA/AAAAAAAAAAI/AAAAAAAAADI/QhLDyPIH4EM/photo.jpg?sz=128", "display_name": "WingedPanther73", "link": "https://stackoverflow.com/users/5530296/wingedpanther73"}, "is_accepted": false, "score": 1, "last_activity_date": 1448483275, "creation_date": 1448483275, "answer_id": 33925850, "question_id": 33925407, "link": "https://stackoverflow.com/questions/33925407/making-c-code-more-efficient-and-else-if-statement-not-working/33925850#33925850", "title": "Making C++ code more efficient and else if statement not working", "body": "<p>I think your problem is you're trying to input your values WHILE testing them. Think about what each input statement (inside your if condition) really does. It reads until it gets an error. Then, after reading the only line in the file, you go to the next line and attempt to read the NEXT (nonexistent) line.</p>\n\n<p>What you probably need to do is read the entire line into a single string, and then process it from there. Of course, that means detecting key words and their positions in your string to extract the appropriate substrings and go from there.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1448534808, "creation_date": 1448534808, "answer_id": 33936612, "question_id": 33925407, "link": "https://stackoverflow.com/questions/33925407/making-c-code-more-efficient-and-else-if-statement-not-working/33936612#33936612", "title": "Making C++ code more efficient and else if statement not working", "body": "<p>If the first <code>if</code> fails it means an error happened reading from the stream, and the stream will be in the <code>fail</code> state. After that you can't read anything else (unless you reset the state) so the next two <code>if</code> conditions will also fail i.e. you can never get into the <code>else if</code> blocks.</p>\n\n<p>You probably want something like this pseudocode instead:</p>\n\n<pre><code>read whole line into a string\nsplit the string into whitespace-separated words\nif (number of words == 8)\n{\n  parse words\n  create Workers\n}\nelse if (number of words == 10)\n{\n  parse words\n  create AreaManagers\n}\nelse if (number of words == 12)\n{\n  parse words\n  create RegionalManagers\n}\n</code></pre>\n\n<p>The next problem is here:</p>\n\n<pre><code> *workers = AreaMangers(name, age, title, areas); // Segmentation error\n</code></pre>\n\n<p>You assign an object of type <code>AreaManagers</code> to an object of type <code>Workers</code>, which won't do what you probably expect. You can't change the type of <code>*workers</code> by assigning something different to it. Maybe you want to do something like:</p>\n\n<pre><code> workers = new AreaManagers(name, age, title, areas);\n</code></pre>\n\n<p>but now you have dynamically-allocated memory and need to free it correctly, so it would be better to use a smart pointer such as <code>shared_ptr&lt;Workers&gt;</code> instead of a <code>Workers*</code></p>\n\n<p>Finally, the fact your assignments cause a segmentation fault is not good, you should test copying the type in isolation and make sure it is correct, don't only do it as part of a complicated <code>if-else</code> statement that doesn't work.</p>\n"}], "owner": {"reputation": 1, "user_id": 5605603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ad1464c755a01f3bcb6ee36a295d92?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Progm", "link": "https://stackoverflow.com/users/5605603/samuel-progm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1448535593, "answer_count": 2, "score": -3, "last_activity_date": 1448534808, "creation_date": 1448481648, "question_id": 33925407, "link": "https://stackoverflow.com/questions/33925407/making-c-code-more-efficient-and-else-if-statement-not-working", "closed_reason": "Not suitable for this site", "title": "Making C++ code more efficient and else if statement not working", "body": "<p>I am trying to read in a few values from a text file, and store them in memory.</p>\n\n<p>This is what the file can store or look like</p>\n\n<p>Example 1 - A file storing the cashier's name, age and job title</p>\n\n<p><code>* Cashier Name: Bill  Age: 25  Job Title: Cashier *</code></p>\n\n<p>Example 2 - A file storing the cashier's name, age and job title</p>\n\n<p><code>* Cashier Name: Mark  Age: 37  Job Title: Manager *</code></p>\n\n<p>Example 3 - A file storing the cashier's name, age, job title, and areas covered</p>\n\n<p><code>* Cashier Name: Sam   Age: 45  Job Title: Area Manager  Areas Covered: Manchester, Liverpool *</code></p>\n\n<p>Example 4 - A file storing the cashier's name, age, job title, areas covered, and the type of people this individual manages</p>\n\n<p><code>* Cashier Name: Dave  Age: 50  Job Title: Regional Manager  Areas Covered: Derby, Manchester, Liverpool  Manages: Area Managers *</code></p>\n\n<p>Basically, I am trying to implement a small program that can store cashier names, their age and job titles on to a <code>.txt</code> file and then to retrieve those values into memory. I can retrieve values for the first and second examples, however I am having some difficulty retrieving and storing the values for the third and fourth examples. My <code>if, else if, else</code> block doesn't seem to work and is not efficient (i.e. can the code be reused)?</p>\n\n<p>This is my code</p>\n\n<pre><code>    istream&amp; inputWorkers(istream&amp; is, Workers * &amp; workers)\n    {\n       char d1, d2;\n       string cashName, name, cashAge, cashTitle, title, cashAreas, areas, cashManages, manages;\n       int age;\n       if(is &gt;&gt; d1 &gt;&gt; cashName &gt;&gt; name &gt;&gt; cashAge &gt;&gt; age &gt;&gt; cashTitle &gt;&gt; title &gt;&gt; d2)\n   {\n      *workers = Workers(name, age, title); // Segmentation error\n   } \n   else if(is &gt;&gt; d1 &gt;&gt; cashName &gt;&gt; name &gt;&gt; cashAge &gt;&gt; age &gt;&gt; cashTitle &gt;&gt; title &gt;&gt; cashAreas &gt;&gt; areas &gt;&gt; d2)\n  {\n     *workers = AreaMangers(name, age, title, areas); // Segmentation error\n  }\n   else if(is &gt;&gt; d1 &gt;&gt; cashName &gt;&gt; name &gt;&gt; cashAge &gt;&gt; age &gt;&gt; cashTitle &gt;&gt; title &gt;&gt; cashAreas &gt;&gt; areas &gt;&gt; cashManages &gt;&gt; manages &gt;&gt; d2)\n  {\n     *workers = RegionalMangers(name, age, title, areas, manages); // Segmentation error\n  }\n    else\n    {\n    return is.setstate(badbit);\n    }\n    return is;\n    }\n</code></pre>\n\n<p>I am getting segmentation errors too, and I don't know why. I was trying to follow YouTube videos and read articles. Any help will be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "class", "templates"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1448481946, "post_id": 33925399, "comment_id": 55611829, "body": "You may use <code>template &lt;typename U&gt; friend class foo;</code> inside <code>foo</code>"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1448482175, "post_id": 33925399, "comment_id": 55611971, "body": "@Dieter L&#252;cking So simple... Never would have thought"}], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 5475431, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/432a142ff6bc266e25d4724431d867ff?s=128&d=identicon&r=PG&f=1", "display_name": "Mauri", "link": "https://stackoverflow.com/users/5475431/mauri"}, "is_accepted": false, "score": 1, "last_activity_date": 1448483163, "creation_date": 1448483163, "answer_id": 33925819, "question_id": 33925399, "link": "https://stackoverflow.com/questions/33925399/accessing-private-member-variables-inside-public-member-function/33925819#33925819", "title": "Accessing private member variables inside public member function", "body": "<p>you can define the second type as fried like:</p>\n\n<pre><code>template&lt;class T&gt;\nclass foo\n{\nprivate:\n    T var;\n\npublic:\n    foo(T v) : var(v) {}\n\n    template&lt;class Type&gt;\n    void myfun(foo&lt;Type&gt;&amp; rhs)\n    {\n        auto i = rhs.var; //BOOM\n    }\n\n    template&lt;class Type&gt; \n      friend class foo;\n};\n</code></pre>\n\n<p><a href=\"http://cpp.sh/4kn4\" rel=\"nofollow\">live example</a></p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1448483390, "post_id": 33925820, "comment_id": 55612574, "body": "You can even remove the <code>U</code>, <code>template &lt;typename&gt; friend class foo;</code>"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 4, "last_activity_date": 1448483904, "last_edit_date": 1448483904, "creation_date": 1448483168, "answer_id": 33925820, "question_id": 33925399, "link": "https://stackoverflow.com/questions/33925399/accessing-private-member-variables-inside-public-member-function/33925820#33925820", "title": "Accessing private member variables inside public member function", "body": "<h2>Suggested Solutions</h2>\n\n<p>You could either provide a public accessor to your private member variable:</p>\n\n<pre><code>template&lt;class T&gt;\nclass foo {\n  T var;\npublic:\n  foo(T v) : var(v) {}\n  T getVar() const { return var; }\n  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  template&lt;class Type&gt;\n  void myfun(foo&lt;Type&gt;&amp; rhs) {\n    auto i = rhs.getVar();\n                 ^^^^^^^^\n  }\n};\n</code></pre>\n\n<p>Or as already Dieter mentioned in the comments you could make your template class a friend:</p>\n\n<pre><code>template&lt;class T&gt;\nclass foo {\n  T var;\n  template &lt;class&gt; friend class foo;\n  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npublic:\n  foo(T v) : var(v) {}\n  template&lt;class Type&gt;\n  void myfun(foo&lt;Type&gt;&amp; rhs) {\n    auto i = rhs.var;\n  }\n};\n</code></pre>\n\n<h2>Overview</h2>\n\n<p>The reason why the template member function <code>myfun</code> is not granted access to private member variable <code>var</code> of class template foo is that the compiler interprets <code>class foo&lt;Type&gt;</code> and <code>class foo&lt;T&gt;</code> as completely different class types, even though they would originate from the same template class definition. Thus, as being different class types the one cannot access the private members of the other. </p>\n"}], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 33925820, "answer_count": 2, "score": 3, "last_activity_date": 1448483904, "creation_date": 1448481596, "question_id": 33925399, "link": "https://stackoverflow.com/questions/33925399/accessing-private-member-variables-inside-public-member-function", "title": "Accessing private member variables inside public member function", "body": "<p>In function <code>myfun</code> is there a way to access <code>rhs.var</code> without writing a public function which returns <code>var</code>? Also, as I understand, this happens because <code>rhs</code> could be a different type... Is this correct?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt;\nclass foo\n{\nprivate:\n    T var;\n\npublic:\n    foo(T v) : var(v) {}\n\n    template&lt;class Type&gt;\n    void myfun(foo&lt;Type&gt;&amp; rhs)\n    {\n        auto i = rhs.var; //BOOM\n    }\n};\n\nint main()\n{\n    foo&lt;int&gt; a = 5;\n    foo&lt;double&gt; b = 2.2;\n\n    a.myfun(b);\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "unresolved-external"], "comments": [{"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1448481745, "post_id": 33925392, "comment_id": 55611746, "body": "you are not allocating the columns of the matrix!"}, {"owner": {"reputation": 534, "user_id": 1658553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/280298c43af4665231798d4e82e3c450?s=128&d=identicon&r=PG", "display_name": "Chris R.", "link": "https://stackoverflow.com/users/1658553/chris-r"}, "edited": false, "score": 0, "creation_date": 1448481867, "post_id": 33925392, "comment_id": 55611793, "body": "Looks like your *.cpp is not compiled before the link phase."}, {"owner": {"reputation": 177, "user_id": 2666926, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1465425610/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/2666926/nick"}, "reply_to_user": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1448512338, "post_id": 33925392, "comment_id": 55621891, "body": "@simpel01 I&#39;m not sure what you mean.  Could you clarify?"}], "answers": [{"tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": true, "score": 2, "last_activity_date": 1448481916, "creation_date": 1448481916, "answer_id": 33925480, "question_id": 33925392, "link": "https://stackoverflow.com/questions/33925392/c-error-in-object-construction-unresolved-external-symbol/33925480#33925480", "title": "C++ Error in object construction. Unresolved External Symbol", "body": "<p>In the .cpp file you should put the <em>definition</em> of the method which has been <em>declared</em> in the header (.h) file. Therefore your .cpp file should look like:</p>\n\n<pre><code>Matrix::Matrix(int numRows, int numCols) { }\n</code></pre>\n\n<p>What you are doing is replicate the class definition in the .cpp file so that why you get the linking error.</p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 2666926, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1465425610/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/2666926/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1448482002, "creation_date": 1448482002, "answer_id": 33925502, "question_id": 33925392, "link": "https://stackoverflow.com/questions/33925392/c-error-in-object-construction-unresolved-external-symbol/33925502#33925502", "title": "C++ Error in object construction. Unresolved External Symbol", "body": "<p>Maybe I should have posted my entire code so one of you could tell me that I :</p>\n\n<p><strong>A</strong>. Will receive an error for redefining the class in my *.cpp file, and</p>\n\n<p><strong>B</strong>.  Needed to <code>include</code> my *.h file in the *.cpp file so it knows where to get the class declaration.  I'm sorry for wasting your time with this.</p>\n"}], "owner": {"reputation": 177, "user_id": 2666926, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1465425610/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/2666926/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33925480, "answer_count": 2, "score": 0, "last_activity_date": 1448482002, "creation_date": 1448481566, "question_id": 33925392, "link": "https://stackoverflow.com/questions/33925392/c-error-in-object-construction-unresolved-external-symbol", "title": "C++ Error in object construction. Unresolved External Symbol", "body": "<p>I have three files, a main.cpp file meant for testing my functions, a header file for the class, and the cpp file where my objects and members are declared.</p>\n\n<p>I am trying to construct my object <code>Matrix</code> in the main file and receiving error: <code>Error: LNK2019   unresolved external symbol \"public: __thiscall Matrix::Matrix(int,int)\" (??0Matrix@@QAE@HH@Z) referenced in function _main  Matrix Project</code>.</p>\n\n<p>I can only assume this mean there is something wrong with my constructor.  I am using it as follows and neither of them work:</p>\n\n<pre><code>    Matrix* matrix = new Matrix(2, 3);\n    Matrix test = Matrix(2, 3);\n</code></pre>\n\n<p>The constructor is declared in the *.h file as follows:</p>\n\n<pre><code>Matrix(int numRows, int numCols);\n</code></pre>\n\n<p>And then declared in the *.cpp file as follows:</p>\n\n<pre><code>public:\n    Matrix(int numRows, int numCols) {\n        rows = numRows;\n        cols = numCols;\n        arr = new double*[numCols];\n        for (int i = 0; i &lt; numRows; ++i) {\n            for (int x = 0; x &lt; numCols; ++x) {\n                arr[i][x] = 0;\n            }\n        }\n    }\n</code></pre>\n\n<p>Any help is appreciated.  I'm sure I'm missing something silly.</p>\n\n<p>Thank you in advance!</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>For the sake of information, I figured I'd say that the variables <code>rows</code>, <code>cols</code>, and <code>arr</code> are all declared above the constructor as <code>private</code> members of the class.</p>\n"}, {"tags": ["c++", "stack", "stm32", "freertos"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1448481970, "post_id": 33925322, "comment_id": 55611845, "body": "I&#39;m not familiar with the environment, but perhaps you can either ignore the linker&#39;s stack, or split up the linker&#39;s stack into the task&#39;s stacks. When I&#39;ve worked on embedded apps, there wasn&#39;t a linker stack, just initialized data (where a copy is made in the read only part) and uninitialized data. The task, interrupt, ... , stacks were allocated from ram space at startup."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5605763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c120d1a04ad893e600bfec81b647fb9b?s=128&d=identicon&r=PG&f=1", "display_name": "Jinsuk", "link": "https://stackoverflow.com/users/5605763/jinsuk"}, "edited": false, "score": 0, "creation_date": 1448550270, "post_id": 33928688, "comment_id": 55642558, "body": "Thanks! That is very helpful."}], "tags": [], "owner": {"reputation": 1353, "user_id": 4309016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LhCj8.jpg?s=128&g=1", "display_name": "Krystian Sakowski", "link": "https://stackoverflow.com/users/4309016/krystian-sakowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1448497603, "last_edit_date": 1448497603, "creation_date": 1448497162, "answer_id": 33928688, "question_id": 33925322, "link": "https://stackoverflow.com/questions/33925322/freertos-stm32-linker-stack-size-vs-task-stack-size/33928688#33928688", "title": "FreeRTOS STM32 linker stack size vs task stack size", "body": "<p>First of all you have to understand that when you create task in FreeRTOS memory (TCB and Stack) for this task is allocated on FreeRTOS heap which size is defined in FreeRTOSConfig.h.</p>\n\n<p>The linker heap is the C library heap, not the FreeRTOS heap. The linker stack is normally only used for your startup code, and in some ports, for the interrupt stack. It is NOT used by any of the tasks.</p>\n\n<p>For example imagine that you have FreeRTOS based system with one custom thread called DEMO. Your heap layout might look like schema below. The most important lesson from this picture for you is that each task stack is unrelated to the stack defined in the linker. Task stack is allocated on the FreeRTOS heap which is unrelated to the heap defined in the linker as I have already mentioned!</p>\n\n<pre><code>Example Heap Layout:\n\n+-------------------+ &lt;----------+\n|                   |            |\n| FREE HEAP MEMORY  |             FREE SPACE\n|                   |            |\n+-------------------+ &lt;----------+\n| TIMER TASK TCB    |            |\n+-------------------+            |\n| TIMER TASK STACK  |            |\n+-------------------+            |\n| IDLE TASK TCB     |            |\n+-------------------+            |\n| IDLE TASK STACK   |             ALLOCATED SPACE\n+-------------------+            |\n| DEMO TASK TCB     |            |\n+-------------------+            |\n| DEMO TASK STACK   |            |\n+-------------------+            |\n| MUTEXES, SETS ETC.|            |\n+-------------------+ &lt;----------+\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5605763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c120d1a04ad893e600bfec81b647fb9b?s=128&d=identicon&r=PG&f=1", "display_name": "Jinsuk", "link": "https://stackoverflow.com/users/5605763/jinsuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2255, "favorite_count": 1, "accepted_answer_id": 33928688, "answer_count": 1, "score": 2, "last_activity_date": 1448497603, "creation_date": 1448481320, "question_id": 33925322, "link": "https://stackoverflow.com/questions/33925322/freertos-stm32-linker-stack-size-vs-task-stack-size", "title": "FreeRTOS STM32 linker stack size vs task stack size", "body": "<p>I am running FreeRTOS on STM32F103 and using IAR workbench. I am trying to understand the relationship between 'general stack size set by the linker' and 'stack size for each task in FreeRTOS'. For instance, when the FreeRTOS creates tasks, does it use the stack defined by linker or define its own in the free RAM? I am trying to determine stack size for the project. I understand that I can use waterMark function call to determine stack of each task. Thoughts?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1448481528, "post_id": 33925319, "comment_id": 55611649, "body": "<i>It has some problems that I am not able to solve.</i> - How can we solve them if we dont know what they are?"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1448481588, "post_id": 33925319, "comment_id": 55611675, "body": "What is the <a href=\"https://stackoverflow.com/questions/tagged/visual\">visual</a> tag for? This doesn&#39;t even seem to be a valid tag."}, {"owner": {"reputation": 13, "user_id": 5471351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0fa73687cf35169ae847f3ac29e168?s=128&d=identicon&r=PG&f=1", "display_name": "Senior Jelly", "link": "https://stackoverflow.com/users/5471351/senior-jelly"}, "edited": false, "score": 0, "creation_date": 1448482005, "post_id": 33925319, "comment_id": 55611862, "body": "Because it is a visual C++"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1448482291, "post_id": 33925319, "comment_id": 55612027, "body": "Then you should use the <a href=\"https://stackoverflow.com/questions/tagged/visual-c%2b%2b\">visual-c++</a> tag."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1448483109, "last_edit_date": 1495540760, "creation_date": 1448482193, "answer_id": 33925556, "question_id": 33925319, "link": "https://stackoverflow.com/questions/33925319/c-find-in-file-a-specific-string-which-contains-name/33925556#33925556", "title": "C++ find in file a specific string which contains name", "body": "<p>The function <code>ShowFile</code> can be improved.</p>\n\n<p><strong>Suggestion 1</strong></p>\n\n<p>If you would like the function to return the name of the file (<code>file.smth</code>) by the second argument, change it to <code>std::string&amp;</code>.</p>\n\n<pre><code>//bool ShowFile(char * FileName, char * Name)\nbool ShowFile(char * FileName, std::string&amp; Name)\n</code></pre>\n\n<p>As the function stands right now, you are changing <code>Name</code> in the function to point to a local variable. But that has no impact on the calling function. The line</p>\n\n<pre><code>Name = AttName;\n</code></pre>\n\n<p>is completely useless.</p>\n\n<p><strong>Suggestion 2</strong></p>\n\n<p>You haven't added any code to read the data from the file. The line </p>\n\n<pre><code>int a = sscanf_s(\"Content-Disposition: attachment; filename=\\\"%[^\\\"]\\\"\", AttName,_countof(AttName));\n</code></pre>\n\n<p>has the format specification as the first argument, not the string from which to read the data. It is missing the source string. </p>\n\n<p>You need to add code to read lines of text and try to extract <code>AttName</code> from those lines.</p>\n\n<p><strong>Suggestion 3</strong></p>\n\n<p>Don't use <code>while (!feof(file))</code>. See <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>.</p>\n\n<p>You need something like:</p>\n\n<pre><code>char line[200];\nwhile ( fgets(line, sizeof(line), file) )\n{\n    char AttName[100];\n    int a = sscanf_s(line, \"Content-Disposition: attachment; filename=\\\"%[^\\\"]\\\"\", AttName,_countof(AttName));\n    ...\n}\n</code></pre>\n\n<p><strong>Suggestion 4</strong></p>\n\n<p>Always check the returned value of <code>scanf</code> family of functions to make sure that the function was able to assign data to the variables. Don't assume it succeeded.</p>\n\n<pre><code>int a = sscanf_s(line, \"Content-Disposition: attachment; filename=\\\"%[^\\\"]\\\"\", AttName,_countof(AttName));\n// Name = AttName;\nif ( a == 1 )\n{\n   Name = AttName;\n}\n</code></pre>\n\n<p><strong>Suggestion 5</strong></p>\n\n<p>Add a flag to indicate that <code>Name</code> was successfully read.</p>\n\n<p><strong>Revised function</strong></p>\n\n<pre><code>bool ShowFile(char * FileName, std::string&amp; Name)\n{\n    bool status = false;\n    FILE* file;\n    if (fopen_s(&amp;file, FileName, \"rt\") != 0) { return false; }\n    char line[200];\n    while (fgets(line, sizeof(line), file))\n    {\n        char AttName[100];\n        int a = sscanf_s(line, \"Content-Disposition: attachment; filename=\\\"%[^\\\"]\\\"\", AttName,_countof(AttName));\n        if ( a == 1 )\n        {\n           Name = AttName;\n\n           // Got what we are looking for.\n           // Set the status and break out of the loop.\n           // There is no need to look for Name any more.\n           status = true;\n           break;\n        }\n    }\n    fclose(file);\n\n    return status;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5471351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0fa73687cf35169ae847f3ac29e168?s=128&d=identicon&r=PG&f=1", "display_name": "Senior Jelly", "link": "https://stackoverflow.com/users/5471351/senior-jelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448484526, "creation_date": 1448481301, "last_edit_date": 1448484526, "question_id": 33925319, "link": "https://stackoverflow.com/questions/33925319/c-find-in-file-a-specific-string-which-contains-name", "title": "C++ find in file a specific string which contains name", "body": "<p>So my goal is to create a console app using visual C++ lang which opens a file ( in my case it is a MIME file) and finds a certain string. In my case it sounds - Content-Disposition: attachment; filename=\"file.smth\".\nAnd then the app shows the file.smth\nSo here is what I have done. It has some problems that I am not able to find.When I run a console app It gets stuck at finding a filename. </p>\n\n<pre><code>#include \"stdafx.h\" \n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n\n\nbool ShowFile(char * FileName, char * Name)\n{\n    FILE* file;\n    if (fopen_s(&amp;file, FileName, \"rt\") != 0) { return false; }\n    while (!feof(file))\n    {\n        char AttName[100];\n        int a = sscanf_s(\"Content-Disposition: attachment; filename=\\\"%[^\\\"]\\\"\", AttName,_countof(AttName));\n        Name = AttName;\n    }\n    fclose(file);\n    return true;\n}\n\n\nint main(int argc, char* argv[])\n{\n    char FileName[100];\n    if (argc == 2) strcpy_s(FileName, _countof(FileName), argv[1]);\n    else {\n        printf(\"Source file name: \"); gets_s(FileName, _countof(FileName));\n    }\n    char Name[100];\n    ShowFile(FileName, Name);\n    printf(\"%s \\n\", Name);\n    system(\"pause\");\n    return 0;\n}    \n</code></pre>\n\n<p>Thank you for your attention!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1448484164, "post_id": 33925298, "comment_id": 55612981, "body": "Why does <code>int *ptr; *ptr = 5;</code> result in a segmentation fault, even though the stars match?"}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1448481514, "creation_date": 1448481514, "answer_id": 33925379, "question_id": 33925298, "link": "https://stackoverflow.com/questions/33925298/pointers-acting-weird/33925379#33925379", "title": "Pointers acting weird", "body": "<p>Mind that <code>niz</code> is completely <strong>uninitialized</strong>.</p>\n\n<p>Let's take <code>*niz</code>, for example. It dereferences the address at <code>niz[0]</code>. <code>niz[0]</code> is uninitialized however, so it's undefined behavior.<br>\nYou don't need to think through anything beyond that to figure out why it's giving a segmentation fault.</p>\n\n<p>Both programs yield undefined behavior. An unlucky coincidence the first one runs fine.</p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 3260936, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1816836258/picture?type=large", "display_name": "nhrnjic6", "link": "https://stackoverflow.com/users/3260936/nhrnjic6"}, "edited": false, "score": 0, "creation_date": 1448482178, "post_id": 33925500, "comment_id": 55611973, "body": "well compiler tricked me into believing that it could work that way. thanks for clearing it up for me"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 161, "user_id": 3260936, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1816836258/picture?type=large", "display_name": "nhrnjic6", "link": "https://stackoverflow.com/users/3260936/nhrnjic6"}, "edited": false, "score": 1, "creation_date": 1448484201, "post_id": 33925500, "comment_id": 55613004, "body": "@nhrnjic6 Not everything that compiles works, and making sure your program works isn&#39;t the compiler&#39;s job."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 161, "user_id": 3260936, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1816836258/picture?type=large", "display_name": "nhrnjic6", "link": "https://stackoverflow.com/users/3260936/nhrnjic6"}, "edited": false, "score": 0, "creation_date": 1448485197, "post_id": 33925500, "comment_id": 55613453, "body": "@nhrnjic6: The compiler didn&#39;t trick you. It never made any promises that it would prove the correctness of your program. You were just making blind assumptions and then started basing your world view on those assumptions."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 3, "last_activity_date": 1448481998, "creation_date": 1448481998, "answer_id": 33925500, "question_id": 33925298, "link": "https://stackoverflow.com/questions/33925298/pointers-acting-weird/33925500#33925500", "title": "Pointers acting weird", "body": "<p>You dont insert valid addresses into your array so both are Undefined Behaviour, ie. under gcc run fine, but under clang caused segfault. To make it run you need to insert real addresses:</p>\n\n<pre><code>int main(){\n  int * niz1 = new int(6);\n  int ** niz2 = &amp;niz1;\n  int *** niz3 = &amp;niz2 ;\n\n  int **** niz[6];\n\n  niz[0] = &amp;niz3;\n\n  std::cout &lt;&lt; ****niz[0];\n}\n</code></pre>\n\n<p>whooah, its the first time I coded level four pointers</p>\n"}], "owner": {"reputation": 161, "user_id": 3260936, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1816836258/picture?type=large", "display_name": "nhrnjic6", "link": "https://stackoverflow.com/users/3260936/nhrnjic6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 33925500, "answer_count": 2, "score": 0, "last_activity_date": 1448481998, "creation_date": 1448481201, "question_id": 33925298, "link": "https://stackoverflow.com/questions/33925298/pointers-acting-weird", "title": "Pointers acting weird", "body": "<p>Note that we had this as school practise problem, not sure if I will ever use it in real life. </p>\n\n<p>So this works : </p>\n\n<pre><code>int main(){\n\n  int *** niz[6];\n\n  **niz[0] = new int(6);\n\n  cout &lt;&lt; ***niz[0];\n\n}\n</code></pre>\n\n<p>but this doesen't : </p>\n\n<pre><code>int main(){\n\n  int **** niz[6];\n\n  ***niz[0] = new int(6);\n\n  cout &lt;&lt; ****niz[0];\n\n}\n</code></pre>\n\n<p>it results in segmen. fault. Why is that, stars match ?</p>\n\n<p>But </p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 0, "creation_date": 1448484031, "post_id": 33925149, "comment_id": 55612906, "body": "Do you want the item of the ListView to be the view to which you can add widgets?"}, {"owner": {"reputation": 1173, "user_id": 1795062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a533fe765a4e0fba03d11589fb9f91af?s=128&d=identicon&r=PG", "display_name": "aso", "link": "https://stackoverflow.com/users/1795062/aso"}, "reply_to_user": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 0, "creation_date": 1448485526, "post_id": 33925149, "comment_id": 55613626, "body": "@AlexanderTyapkov my goal is possibility to add my custom widget to ListView and good way to interact with embedded buttons etc. inside it. This is easy using QListWidget, but I&#39;ll lose model architecture, which is very useful. Currently, I can use delegate to edit value on double click, but I don&#39;t know how display my widget all time."}, {"owner": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 0, "creation_date": 1448487538, "post_id": 33925149, "comment_id": 55614637, "body": "Ok, lets imagine that you want each item in the ListView to look like StackOverflow question with rating. You can inherit from ItemDelegate and reimplement paint() method where you will actually draw what you want(without layouting, just simple drawing) . Then you will also reimplement editorEvent from where you will emit singals based on clicked position. That can be possible solution of your problem."}, {"owner": {"reputation": 1173, "user_id": 1795062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a533fe765a4e0fba03d11589fb9f91af?s=128&d=identicon&r=PG", "display_name": "aso", "link": "https://stackoverflow.com/users/1795062/aso"}, "reply_to_user": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 0, "creation_date": 1448488048, "post_id": 33925149, "comment_id": 55614915, "body": "@AlexanderTyapkov yes, but my problem is that I don&#39;t know how to draw Qt&#39;s UI elements inside paint() method, only primitives. I want to use QLabel, QButton etc."}, {"owner": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 1, "creation_date": 1448488622, "post_id": 33925149, "comment_id": 55615194, "body": "Have a look at the example with progress bar. You can also draw some controls within paint function <a href=\"http://doc.qt.io/qt-5/qabstractitemdelegate.html#details\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qabstractitemdelegate.html#details</a>"}, {"owner": {"reputation": 1173, "user_id": 1795062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a533fe765a4e0fba03d11589fb9f91af?s=128&d=identicon&r=PG", "display_name": "aso", "link": "https://stackoverflow.com/users/1795062/aso"}, "reply_to_user": {"reputation": 4348, "user_id": 709897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/259193e111ed96b75994558e5cff2d52?s=128&d=identicon&r=PG", "display_name": "Alexander Tyapkov", "link": "https://stackoverflow.com/users/709897/alexander-tyapkov"}, "edited": false, "score": 0, "creation_date": 1448489746, "post_id": 33925149, "comment_id": 55615703, "body": "@AlexanderTyapkov thanks for this link, I don&#39;t know how, but I didn&#39;t find it. I&#39;ll try it."}], "owner": {"reputation": 1173, "user_id": 1795062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a533fe765a4e0fba03d11589fb9f91af?s=128&d=identicon&r=PG", "display_name": "aso", "link": "https://stackoverflow.com/users/1795062/aso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448480601, "creation_date": 1448480601, "question_id": 33925149, "link": "https://stackoverflow.com/questions/33925149/draw-more-than-one-widget-in-qlistview-item", "title": "Draw more than one widget in QListView item", "body": "<p>I created my own data model based on <code>QAbstractListModel</code> and connected it with QListView by simple <code>ui-&gt;listView-&gt;setModel(prodModel)</code> - it works fine.</p>\n\n<p>Now I want to create custom view in QListView for each item. For example, I want to reach that every data row from model will be shown in style like Stack Overflow (question with rating). I want to use Qt widgets and <strong>arrange</strong> it on my own idea - using layouts etc.</p>\n\n<p>Unfortunately, a Qt's guide about model/view doesn't have described how to use <code>QItemDelegate</code> to show my widgets - I'm not interested about editing data in view (but I want to interact like click - ideally if I could click and get signal/sth in each widget in my custom view).</p>\n\n<p>I found some examples, but they describe drawing only one widget (QProgressBar) without any layouts.</p>\n\n<p>Any help will be appreciable, thanks!</p>\n"}, {"tags": ["c++", "operating-system", "critical-section"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1448480484, "post_id": 33925014, "comment_id": 55611139, "body": "you should add a bit more context"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1448480656, "post_id": 33925014, "comment_id": 55611244, "body": "We have no idea what problem Peterson is trying to solve or what criteria is third in some list we&#39;ve never seen."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448480920, "post_id": 33925014, "comment_id": 55611360, "body": "Sorry , Perterson&#39;s solution or algoruthm is a famous  concurrent programming algorithm for mutual exclusion that allows two processes to share a single-use resource without conflict, using only shared memory for communication.  i was looking for an answer from someone that is familiar with this problem , because i&#39;ve searched for an answer about this in my textbook about operating systems and i haven&#39;t found aan answer.  the criteria i&#39;m referring to is : No process running outside its critical region may block any process."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1448481323, "post_id": 33925014, "comment_id": 55611553, "body": "Why do you care whether the person who answers your question is familiar with the problem or not? That&#39;s also kind of rude to all the people not familiar with the problem who read your question and are just left baffled. (I was able to find the context using a search engine, but why make people go through that? If it&#39;s such a famous problem, it should be easy to find a link to it, no?)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1448481324, "post_id": 33925014, "comment_id": 55611554, "body": "any relevant information about the question should be added to the question, not in comments. I have edited your question by adding your comment to the end of it. You can <a href=\"https://stackoverflow.com/posts/33925014/edit\">edit</a> it yourself if you wish to reformulate"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448482387, "post_id": 33925243, "comment_id": 55612083, "body": "Consider this example :  process 0 calls enter_region routine , which itself is not part of the critical region .  after executing the statement       interested[process]=TRUE; a clock interrupt ocurs and the scheduler &quot;gives&quot; the CPU to process 1 . Process 1 also call enter_region   it sets interested[1] to TRUE and turn to 1 .  when it reaches theloop turn=1 dhe interested[0]=1 so process 1 will be negated access to the critical region even though process 0 isn&#39;t in its critical region . process 0 will too be negated access .Process 1 will enter the critical region at the third round ."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448483217, "post_id": 33925243, "comment_id": 55612494, "body": "If a thread is guaranteed to be the next one to return from <code>enter_region</code>, then it has entered the critical region because it has already prevented any other thread from getting the region before it. If you consider the thread to have entered the critical region as soon as it set <code>interested[1]</code> to <code>TRUE</code>, there is no problem. The situation is the same as if the thread stopped running right as <code>enter_region</code> returned, which no algorithm could avoid (nor does it need to)."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448483912, "post_id": 33925243, "comment_id": 55612827, "body": "enter_region isn&#39;t part of the critical region , or am I wrong?  the critical region it&#39;s the block of code after the procedure enter_region i&#39;m not claiming that process 1 will enter the CR the third round arbitrarily , but in that example following the algorithm that&#39;s what will happen. if the procedure enter_region was indivisible , meaning that it cannot be interrupted ,just like operations in a semaphore,there wouldn&#39;t be any problem , but i haven&#39;t found this condition anywhere.  Thats why i asked the question in the first place."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448484115, "post_id": 33925243, "comment_id": 55612958, "body": "If that were true, you wouldn&#39;t be in the critical region right as <code>enter_region</code> returns, which can&#39;t possibly be right. The purpose of <code>enter_region</code> is for you to call it outside the critical region and for it to return inside it. Somewhere inside that function, the transition happens. It&#39;s the same with sempahores. What if the kernel decides to switch threads right as the acquire operation completes but before it can return to the caller?"}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448484655, "post_id": 33925243, "comment_id": 55613223, "body": "i&#39;m not understanding you ,  are you saying that enter_region is part of the CR region or that it isn&#39;t ? a CR is a part of code that handles the shared memory . that being said there is no shared memory in the enter_region procedure so enter_region is not part of the critical region . I&#39;m not stating this . this comes from my text book"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448484777, "post_id": 33925243, "comment_id": 55613274, "body": "First, the <code>interested[N]</code> array must be shared memory or the algorithm won&#39;t work. Second, I&#39;m saying that the purpose of <code>enter_region</code> is for you to call it outside the CR and it returns inside it (hence its name). So the transition occurs somewhere inside that function."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448484896, "post_id": 33925243, "comment_id": 55613320, "body": "Also think about what you&#39;re saying. Imagine this code :<code>enter_region(); func_1_that_deals_with_shared_memory(); printf(&quot;foo\\n&quot;); func_2_that_deals_with_shared_memory(); exit_region();</code> Are you really arguing that the <code>printf</code> is outside the CR because it doesn&#39;t deal with shared memory?!"}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448485298, "post_id": 33925243, "comment_id": 55613509, "body": "the array isn&#39;t shared memory because each process use different indexes of the array ,they  never use the same data . the transition may also be after the return . The purpose of enter-region is to ensure a safe entrance in the CR ."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448485594, "post_id": 33925243, "comment_id": 55613660, "body": "i&#39;m arguing ,that just enter region is outside the CR"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448486252, "post_id": 33925243, "comment_id": 55614026, "body": "<code>interested[other]</code> is accessed. And, in any event, as I showed, that would make any implementation impossible."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448486447, "post_id": 33925243, "comment_id": 55614113, "body": "it&#39;s read , not written .  also if you consider enter_region as part of the CR then in this example both processes are in the critical region in the first place"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448486610, "post_id": 33925243, "comment_id": 55614188, "body": "We need to switch to a forum or something. SO is not appropriate for this conversation. (Or ask another question.) I&#39;m kind of baffled though why you continue to mis-state my position. How many times do I have to say, &quot;the purpose of enter_region is for you to call it outside the CR and it returns inside it&quot; and &quot; the transition occurs somewhere inside that function&quot;?"}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448487109, "post_id": 33925243, "comment_id": 55614438, "body": "look , i&#39;m just saying that the transition doesn&#39;y occur inside the function because if it was this the case then the two processes would be in their critical region at the same time breaching the first criteria .  Understand? if you don&#39;t it&#39;s useless to continue this conversation"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448487274, "post_id": 33925243, "comment_id": 55614513, "body": "They wouldn&#39;t be. One would be in the function before the transition and one would be in the function after. Of course you&#39;d be right if two threads/processes could be in the function after the transition. But that can&#39;t be. The transition occurs as soon as the thread/process is guaranteed to be the next one to return from <code>enter_region</code> no matter what any other thread/process does. Also, shared memory is defined as memory that can be written by one thread/process and read by another, which is precisely how the <code>interested</code> array is used."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448487613, "post_id": 33925243, "comment_id": 55614681, "body": "in my example both processes wait at the loop at the end for their entire processor time , so if the transition occurs inside the function , as you state , both processes are after the transition or if the transition occurs after the return , both of them are before the transition and they&#39;re blocking each other .  Either way one criteria is breached."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448487844, "post_id": 33925243, "comment_id": 55614815, "body": "There must be some process that is guaranteed to return from <code>enter_region</code> next. That process is in the CR and that&#39;s the one that&#39;s blocking the other two. If you could find a situation where there was at least one thread in <code>enter_region</code> and it could happen that no thread ever gets the CR even though no thread holds it, then you&#39;d have found a problem. And, as I explained before, your argument would apply to any conceivable algorithm. All that has to happen is that a thread/process reaches the point where it blocks others then it gets de-scheduled. That even happens with semaphores."}, {"owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448487980, "post_id": 33925243, "comment_id": 55614887, "body": "Tell me which process is guaranteed to return? You&#39;re not answering,  you&#39;re avoiding the question.  I&#39;m not saying that this solution is not right,  ofcourse peterson knew a thing or two more than me.  I was just lookin for an explanation."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "edited": false, "score": 0, "creation_date": 1448488525, "post_id": 33925243, "comment_id": 55615150, "body": "For one of them, <code>turn == process</code> will be false, since <code>turn</code> is the same in both and <code>process</code> isn&#39;t. That one is guaranteed to return. That one is blocking the other."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1448480947, "creation_date": 1448480947, "answer_id": 33925243, "question_id": 33925014, "link": "https://stackoverflow.com/questions/33925014/dont-agree-with-petersons-solution/33925243#33925243", "title": "Don&#39;t agree with Peterson&#39;s solution", "body": "<p>A process that wants to enter the critical section must be blocked by a process that has not yet fully released it. That's the explicit purpose of the mutual exclusion algorithm.</p>\n\n<p>The third criterion is that no process running outside the critical section may block other processes. Process one doesn't block other processes, and it can only be blocked by a process that hasn't yet released the critical section. So the third criterion is not violated.</p>\n\n<p>If you still disagree, explain either how process one blocks other processes or how process one could be blocked by a process running outside its critical section.</p>\n"}], "owner": {"reputation": 1, "user_id": 5605728, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200954593984487/picture?type=large", "display_name": "Amarildo Likmeta", "link": "https://stackoverflow.com/users/5605728/amarildo-likmeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1448481694, "creation_date": 1448480071, "last_edit_date": 1448481410, "question_id": 33925014, "link": "https://stackoverflow.com/questions/33925014/dont-agree-with-petersons-solution", "title": "Don&#39;t agree with Peterson&#39;s solution", "body": "<pre><code>#define FALSE 0\n#define TRUE 1\n#define N 2\n\nint turn;\nint interested[N];\n\nvoid enter_region(int process) {\n  int other;\n  other = 1 - process;\n  interested[process] == TRUE;\n  turn = process; // set flag\n  while (turn == process &amp;&amp; interested[other] == TRUE)\n}\nvoid leave_region(int process) { interested[process] = FALSE; }\n</code></pre>\n\n<p>wouldn't it be a violation of the third criteria of critical regions if a clock interrupt ocurred after process 0 executed the statement </p>\n\n<pre><code>interested[process]==TRUE; \n</code></pre>\n\n<p>because process one would wait in the while loop in his whole processor time being blocked from processor 0 .</p>\n\n<hr>\n\n<p>Perterson's solution or algoruthm is a famous concurrent programming algorithm for mutual exclusion that allows two processes to share a single-use resource without conflict, using only shared memory for communication.</p>\n\n<p>the criteria i'm referring to is : No process running outside its critical region may block any process.</p>\n"}, {"tags": ["c++", "linked-list", "singly-linked-list", "nested-class"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1448480008, "post_id": 33924974, "comment_id": 55610897, "body": "twitter is a console application?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480032, "post_id": 33924974, "comment_id": 55610908, "body": "@tobi303 Thought the exact same thing. :P Apparently there are people not using a HTML renderer but just reading the tags and all..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480082, "post_id": 33924974, "comment_id": 55610928, "body": "There is no <code>User::followed</code> in your code"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1448480228, "post_id": 33924974, "comment_id": 55610998, "body": "I don&#39;t see any <i>nested</i> class here, there is no class declaration or definition inside <code>class User</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448480304, "post_id": 33924974, "comment_id": 55611035, "body": "@MervePia Where&#39;s <code>UserList</code> nested in <code>User</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480313, "post_id": 33924974, "comment_id": 55611044, "body": "You definitely do not show us the line that causes the error. Now you fixed the typo but in the code you show you are never trying to acces <code>User::followed</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480472, "post_id": 33924974, "comment_id": 55611134, "body": "well I thought you fixed the typo, but you didnt ...."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1448480485, "post_id": 33924974, "comment_id": 55611141, "body": "BTW, you could use <code>if (name == temp-&gt;userName)</code> instead of using the <code>compare</code> method; less typing."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480555, "post_id": 33924974, "comment_id": 55611182, "body": "Lets assume the error is <code>User::following</code> is private. Then it is still hard to tell how to fix without knowing where the last code snippet is placed. In main?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1448480560, "post_id": 33924974, "comment_id": 55611187, "body": "Posting <code>UserList</code> declaration would help."}, {"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448480655, "post_id": 33924974, "comment_id": 55611243, "body": "I corrected &quot;follower&quot; as a &quot;followed&quot;.But I think this is not the problem. errors coming from if line"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448480780, "post_id": 33924974, "comment_id": 55611304, "body": "&quot;within this context&quot; which context? Where is this if line?"}, {"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448480951, "post_id": 33924974, "comment_id": 55611382, "body": "tobi303  error line:  if(users.findUser(user1name).following-&gt;checkUser(user2name)&zwnj;&#8203;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448481165, "post_id": 33924974, "comment_id": 55611493, "body": "and this line is where in your code?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448481217, "post_id": 33924974, "comment_id": 55611515, "body": "@MervePia That&#39;s a train-wreck, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. Otherwise it&#39;s not possible to diagnose your problems."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448481250, "post_id": 33924974, "comment_id": 55611523, "body": "sorry, I must have missed the line &quot;//main.cpp in main()&quot;. Shouldnt <code>checkUser(username)</code> be a method of <code>UserList</code>?"}, {"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448481306, "post_id": 33924974, "comment_id": 55611544, "body": "First, I try to find user1,then I try to look user1&#39;s following list for user2. Is findUser returning type wrong? Or is if statements condition wrong?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448481374, "post_id": 33924974, "comment_id": 55611573, "body": "Argh forget my last comment... The point is: you cannot access private members outside of the class. Expection: You can access them inside a class that is declared as friend. But you cannot access it in the main."}, {"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448481401, "post_id": 33924974, "comment_id": 55611591, "body": "checkUser() is in UserList. I added UserList.h to my question"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448481470, "post_id": 33924974, "comment_id": 55611624, "body": "The code with the error should be encapsulated in the <code>UserList</code> class, this will make the error disappear."}, {"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448481792, "post_id": 33924974, "comment_id": 55611762, "body": "oww, how can I encapsulate ? should I write a function which will be return UserLists in User object?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448482335, "post_id": 33925423, "comment_id": 55612052, "body": "oh I get it! I&#39;m trying now"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "edited": false, "score": 0, "creation_date": 1448482618, "post_id": 33925423, "comment_id": 55612204, "body": "@MervePia there are some other smaller issues with your code, e.g. why do you store pointers to the lists? I see no need to do so. And another minor thing: having <code>followedNumber</code> and <code>followingNumber</code> as members of <code>User</code> forces you to write unnecessary code because you will have to keep this numbers up to date. Instead provide a <code>size()</code> method for <code>UserList</code> that will serve the same purpose."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 0, "last_activity_date": 1448482135, "last_edit_date": 1448482135, "creation_date": 1448481720, "answer_id": 33925423, "question_id": 33924974, "link": "https://stackoverflow.com/questions/33924974/access-friend-classs-private-member/33925423#33925423", "title": "Access friend class&#39;s private member", "body": "<p>In general you should not put logic of your classes in the <code>main</code>. Your issue can be solved for example by adding a method to <code>User</code> that tries to add another user instead of doing this in the <code>main</code>. Something like this:</p>\n\n<pre><code>User::FollowOther(std::string other){\n    if(this-&gt;following-&gt;checkUser(other)) {\n        cout&lt;&lt;\"Err: The user '\"&lt;&lt; userName &lt;&lt; \"' has already followed '\"&lt;&lt;other&lt;&lt;\"'!\"&lt;&lt;endl;\n    }\n    /*...*/\n} \n</code></pre>\n\n<p>The error you got is because <code>User::following</code> is private in <code>User</code>. Private members can only be accessed from within the class. The exception is: You can access private members from within a different class that is declared as friend. But you cannot access private members in the <code>main</code>. Btw, I am not at all a fan of declaring friends, because it breaks encapsulation and makes the relation between classes less obvious, but thats just my personal opinion.</p>\n"}], "owner": {"reputation": 3, "user_id": 4185235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8lLcJ6_jG3Q/AAAAAAAAAAI/AAAAAAAAAAA/lsaaB8SXCns/photo.jpg?sz=128", "display_name": "Merve Pia", "link": "https://stackoverflow.com/users/4185235/merve-pia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33925423, "answer_count": 1, "score": -1, "last_activity_date": 1448487979, "creation_date": 1448479933, "last_edit_date": 1448487979, "question_id": 33924974, "link": "https://stackoverflow.com/questions/33924974/access-friend-classs-private-member", "title": "Access friend class&#39;s private member", "body": "<p>I'm trying to write a console application like Twitter. User and UserList classes including each other. I'm trying to access to following user's followers. UserList class is used for linked list.</p>\n\n<pre><code>//User.h\n\n#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass UserList;\nclass User\n{\n   friend class UserList;\nprivate:\n   string userName;\n   string personalComment;\n   UserList *followed;\n   UserList *following;\n   int followedNumber;\n   int followingNumber;\n   //TWEET\n   UserList *blocked;\n   User* next;\npublic:\n   User();\n   User(string&amp;,string&amp;);\n};\n\n//UserList.h\n#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nclass User;\n\nclass UserList{\nprivate:\n    User *root;\npublic:\n    UserList();\n    ~UserList();\n    void addUser(string&amp;,string&amp;);\n    bool checkUser(string&amp;);\n    User&amp; findUser(string&amp;);\n    void printList();\n};\n</code></pre>\n\n<p>Firstly, I wrote a function to find following user.</p>\n\n<pre><code>//userList.cpp\nUser&amp; UserList::findUser(string&amp; name)\n{\n   User *temp=root;\n   while(temp!=NULL)\n   {\n       if(!name.compare(temp-&gt;userName))\n       {\n            return temp;\n       }\n       temp= temp-&gt;next;\n    }\n    temp= temp-&gt;next;\n    return temp;\n}\n</code></pre>\n\n<p>For example user1 wants to follow user2. I want to check does user1 already follow user2.( checkUser(username) looks for a user in a list and return bool)</p>\n\n<pre><code>//main.cpp in main()\nif(users.findUser(user1name).following-&gt;checkUser(user2name))\n{\n            cout&lt;&lt;\"Err: The user '\"&lt;&lt; user1name &lt;&lt; \"' has already followed '\"&lt;&lt;user2name&lt;&lt;\"'!\"&lt;&lt;endl;\n} \n</code></pre>\n\n<p>But there is a \"UserList* User::following is private\" error and \"within this context\"</p>\n\n<p>How can I access this user's lists?</p>\n"}, {"tags": ["c++", "templates", "matrix", "operator-overloading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1448480454, "post_id": 33924957, "comment_id": 55611123, "body": "Side note: You should consider consecutive memory and represent the matrix as an array of T having the size n*m to avoid n allocations."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1448480504, "post_id": 33924957, "comment_id": 55611151, "body": "Are you certain that both Matrices, that you are adding are of the same size? If not, you are entering the wild and dangerous place called Undefined Behavior."}, {"owner": {"reputation": 506, "user_id": 4671661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b70a2f468a470921e60d486358c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Saris", "link": "https://stackoverflow.com/users/4671661/saris"}, "edited": false, "score": 0, "creation_date": 1448481468, "post_id": 33924957, "comment_id": 55611621, "body": "@DieterL&#252;cking I knew I could do it using single dimension array but I wanted to try this way. Anyway thanks for suggestion."}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 4671661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b70a2f468a470921e60d486358c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Saris", "link": "https://stackoverflow.com/users/4671661/saris"}, "edited": false, "score": 0, "creation_date": 1448480901, "post_id": 33925129, "comment_id": 55611348, "body": "1) you are right I didn&#39;t notice that but in my case it doesn&#39;t change anything because I am testing it on matrixes of same dimensions. 2) I tried but something crashed then so backed to this code. 4) it is just principle of the task, not my idea :). 5) I know, but as I said, I am working on same size matrices. 6) performance isn&#39;t the key here. It is training excercise."}], "tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": false, "score": 0, "last_activity_date": 1448480516, "creation_date": 1448480516, "answer_id": 33925129, "question_id": 33924957, "link": "https://stackoverflow.com/questions/33924957/matrix-template-addition-operator-overloading/33925129#33925129", "title": "Matrix template addition operator overloading", "body": "<p>Several comments:</p>\n\n<p>1) (probably the source of your problem), the upper-bound of the <code>j</code> iterator in the <code>operator&lt;&lt;</code> method is wrong, it should be:</p>\n\n<pre><code>for(unsigned j=0; j&lt;t.m; j++)\n</code></pre>\n\n<p>2) The constructor <code>Matrix&lt;T&gt;(int row, int column, const T&amp; value)</code> should be calling the <code>init</code> method and not reimplement it.</p>\n\n<p>3) <code>init</code> should be private</p>\n\n<p>4) It makes no sense to provide a default constructor which creates a 2x2 matrix! The default constructor should create an empty matrix 0x0!</p>\n\n<p>5) Before summing the matrices you should check whether they are compatible for such operation.</p>\n\n<p>6) I hope you are not looking for performance because the way you laid down the matrix in memory is not cache friendly and not going to be fast!</p>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 4671661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b70a2f468a470921e60d486358c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Saris", "link": "https://stackoverflow.com/users/4671661/saris"}, "edited": false, "score": 0, "creation_date": 1448481291, "post_id": 33925200, "comment_id": 55611538, "body": "That was the point :). Thank you very much. I forgot about return type :)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 506, "user_id": 4671661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b70a2f468a470921e60d486358c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Saris", "link": "https://stackoverflow.com/users/4671661/saris"}, "edited": false, "score": 0, "creation_date": 1448481530, "post_id": 33925200, "comment_id": 55611650, "body": "@Saris, you are welcome. I am glad I was able to help."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1448480794, "creation_date": 1448480794, "answer_id": 33925200, "question_id": 33924957, "link": "https://stackoverflow.com/questions/33924957/matrix-template-addition-operator-overloading/33925200#33925200", "title": "Matrix template addition operator overloading", "body": "<p>I suspect the problem is caused by the return value of the <code>operator+()</code> function. You are returning a reference to an object that is local to the function.</p>\n\n<pre><code>template &lt;typename T&gt;\nMatrix&lt;T&gt;&amp; Matrix&lt;T&gt;::operator+(const Matrix&lt;T&gt;&amp; rhs) {\n    int rows = n;\n    int columns = m;\n    Matrix result(rows,columns,0);\n\n    for (unsigned i = 0; i &lt; rows; i++)\n        for (unsigned j = 0; j &lt; columns; j++)\n            result.arr[i][j] = (*this).arr[i][j] + rhs.arr[i][j];\n\n    // Returning a reference to a function local object.\n    // The reference will be a dangling reference when the function returns.\n    return result;\n}\n</code></pre>\n\n<p>Change the return type to be an object.</p>\n\n<pre><code>template &lt;typename T&gt;\nMatrix&lt;T&gt; Matrix&lt;T&gt;::operator+(const Matrix&lt;T&gt;&amp; rhs) {\n    int rows = n;\n    int columns = m;\n    Matrix result(rows,columns,0);\n\n    for (unsigned i = 0; i &lt; rows; i++)\n        for (unsigned j = 0; j &lt; columns; j++)\n            result.arr[i][j] = (*this).arr[i][j] + rhs.arr[i][j];\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 506, "user_id": 4671661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b70a2f468a470921e60d486358c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Saris", "link": "https://stackoverflow.com/users/4671661/saris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1030, "favorite_count": 0, "accepted_answer_id": 33925200, "answer_count": 2, "score": 1, "last_activity_date": 1448480794, "creation_date": 1448479858, "question_id": 33924957, "link": "https://stackoverflow.com/questions/33924957/matrix-template-addition-operator-overloading", "title": "Matrix template addition operator overloading", "body": "<p>I have a task to write a template Matrix class with some specific functions.  <code>operator=</code>, <code>copy constructor</code> and <code>parameter constructor</code> work fine I think.\nThere is a problem with <code>operator+</code>. For example when I add 2 matrixes filled only with number 5 I got strange numbers in whole <code>row 1</code> and whole <code>column m</code> without element in last row. Something like that (o - okay, x - wrong result).</p>\n\n<pre><code>xxxx\nooox\nooox\noooo\n</code></pre>\n\n<h2>header file</h2>\n\n<pre><code>template &lt;typename T&gt; class Matrix {\n    int n, m;  //dimensions\n    T** arr;\n\npublic:\n    Matrix();\n    Matrix(int row, int column, const T&amp; value);\n    Matrix(const Matrix&lt;T&gt;&amp; copy);\n    ~Matrix();\n    void init(int row, int column, T** ar);\n\n    template &lt;typename O&gt;\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Matrix&lt;O&gt;&amp; t);\n\n    Matrix&lt;T&gt;&amp; operator=(const Matrix&lt;T&gt;&amp; rhs);\n    Matrix&lt;T&gt;&amp; operator+=(const Matrix&lt;T&gt;&amp; rhs);\n    Matrix&lt;T&gt;&amp; operator+(const Matrix&lt;T&gt;&amp; rhs);\n};\n</code></pre>\n\n<h2>cpp file</h2>\n\n<pre><code>template &lt;typename T&gt;\nvoid Matrix&lt;T&gt;::init(int row, int column, T** a) {\n    n = row;\n    m = column;\n    arr = new int *[n];\n    for (unsigned i = 0; i &lt; n; i++)\n        arr[i] = new int[m];\n    if (a) {\n        for (unsigned i = 0; i &lt; n; i++)\n            for (unsigned j = 0; j &lt; m; j++)\n                arr[i][j] = a[i][j];\n    }\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;::Matrix() {\n    init(2,2, arr);\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;::Matrix(int row, int column, const T&amp; value) {\n    n = row;\n    m = column;\n\n    arr = new int *[n];\n    for (unsigned i=0; i &lt; n; i++)\n        arr[i] = new int[m];\n\n    for(unsigned i=0; i&lt;n; i++)\n        for(unsigned j=0; j&lt;m; j++)\n            arr[i][j] = value;\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;::Matrix(const Matrix&lt;T&gt;&amp; mat_copy) {\n    n = mat_copy.n;\n    m = mat_copy.m;\n    init(mat_copy.n, mat_copy.m, mat_copy.arr);\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;::~Matrix() {\n    for(unsigned i=0; i&lt;n; i++)\n        delete[] arr[i];\n    delete[] arr;\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;&amp; Matrix&lt;T&gt;::operator=(const Matrix&lt;T&gt;&amp; T1) {\n    if(this == &amp;T1) return *this;\n    for(unsigned i=0; i&lt;n; i++)\n        delete [] arr[i];\n    delete  [] arr;\n    init(T1.n, T1.m, T1.arr);\n\n    return *this;\n }\n\n template &lt;typename T&gt;\n std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Matrix&lt;T&gt;&amp; t) {\n     for(unsigned i=0; i&lt;t.n; i++) {\n        std::cout &lt;&lt; std::endl;\n        for(unsigned j=0; j&lt;t.n; j++)\n            out &lt;&lt; t.arr[i][j] &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n    return out;\n}\n\ntemplate &lt;typename T&gt;\nMatrix&lt;T&gt;&amp; Matrix&lt;T&gt;::operator+(const Matrix&lt;T&gt;&amp; rhs) {\n    int rows = n;\n    int columns = m;\n    Matrix result(rows,columns,0);\n\n    for (unsigned i = 0; i &lt; rows; i++)\n        for (unsigned j = 0; j &lt; columns; j++)\n            result.arr[i][j] = (*this).arr[i][j] + rhs.arr[i][j];\n\n    return result;\n}\n</code></pre>\n\n<p>Any ideas how to fix that? I would be grateful for your help and advices with improving it because probably there will be some mistakes.</p>\n\n<p>I use the newest CLion release with updated cygwin compiler.</p>\n"}, {"tags": ["java", "c++", "import", "jython", "swig"], "answers": [{"tags": [], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "is_accepted": true, "score": 0, "last_activity_date": 1448646640, "creation_date": 1448646640, "answer_id": 33962593, "question_id": 33924835, "link": "https://stackoverflow.com/questions/33924835/jython-import-of-java-package-created-by-swig-fails-to-link/33962593#33962593", "title": "Jython import of Java package created by Swig fails to link", "body": "<p>On one of the Java classes, the BinaryLoader, there was a method called void load_binary() that is called in a static section of that class:</p>\n\n<pre><code>public class BinaryLoader\n{\n    static\n        { load_binaries(); }\n\n    public static void load_binaries()\n    {\n        // Deep inside here is a call to actually load the shared library. Using\n        load_shared_library_from_jar(\"PROJECT\");\n    }\n ... // more details here\n }\n</code></pre>\n\n<p>Our Java code using the native API called this method as the class was loaded. Our JRuby code called this when the class was 'touched', just using the Constant's name, the name of the class, invoked the static section. To clarify here is a sample from our docs and live Ruby scripts that does this:</p>\n\n<pre><code># Tells Jruby to load the Java Interopability layer.\nrequire 'java'\n\n# Loads the PROJECT Java tools.\nrequire 'PROJECT.jar'\n\n# Shorten the PROJECT tool names from their obnoxiously long Java name.\nmodule PROJECT\n    include_package \"com.whatever.project\"\nend\n\n# Let Ruby know the BinaryLoader exists and it will have PROJECT load all the system binaries.\nPROJECT::BinaryLoader\n</code></pre>\n\n<p>Apparently requiring the JarFile is enough to make all the Native symbols and Java classes available in Ruby and the binary isn't loaded until the last line which is just an expressions that resolves to the name of the class and force the static section to run. The actual method call would have looked like: PROJECT::BinaryLoader.load_binaries</p>\n\n<p>In Jython the static section was never invoked even when calling other static methods on the BinaryLoader class. I forced it to call the method manually by importing the minimum of Java and Native symbols to call the method:</p>\n\n<pre><code># Tells Jython to load the python system Interopability tools.\nimport sys\n\n# When searching for python symbols, this Java jar should be search also.\nsys.path.append('PROJECT.jar')\n\n# Load just enough the have the JVM Know how to load the native PROJECT libraries\nfrom com.whatever.project import PROJECT\nfrom com.whatever.project import BinaryLoader\n\n# Load any native binaries that are required\nBinaryLoader.load_binaries()\n\n# After this line is run in any given script then PROJECT can be used.\nfrom com.whatever.project import *\n</code></pre>\n\n<p>Clearly the native binaries were simply not loaded as had been thought. Anything that loaded these would have been an acceptable solution.</p>\n\n<p>This works around Jython not invoking the static section, by doing the work it should have as early as possible. This seems like a bug in Jython, but it might be that guarantees on static load order are not strongly enforced in Java. Either way because this incompatibility we will likely be removing the static section to prevent future Java ad Ruby Devs from adding something that could fail to load in Python.</p>\n"}], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 33962593, "answer_count": 1, "score": 0, "last_activity_date": 1448647641, "creation_date": 1448479418, "last_edit_date": 1448647641, "question_id": 33924835, "link": "https://stackoverflow.com/questions/33924835/jython-import-of-java-package-created-by-swig-fails-to-link", "title": "Jython import of Java package created by Swig fails to link", "body": "<p>I am working on application that has components written in several languages. I am trying to get functionality that works fine in Java working in Jython. There is some native/C++ functionality that Java access via the JNI and is wrapped by SWIG.</p>\n\n<p>Whenever I try to import all of the classes in the project I get errors that PROJECTJNI cannot be linked. Here is my minimum case to produce:</p>\n\n<pre><code>import sys\nsys.path.append('PROJECT.jar')\nfrom com.whatever.project import *\n</code></pre>\n\n<p>Here is the error message when this is executed:</p>\n\n<pre><code>$ jython Bootstrap.py\n\"my\" variable $jythonHome masks earlier declaration in same scope at /usr/bin/jython line 15.\nTraceback (most recent call last):\n  File \"Bootstrap.py\", line 9, in &lt;module&gt;\n    from com.whatever.project import *\njava.lang.UnsatisfiedLinkError: com.whatever.project.PROJECTJNI.swig_module_init()V\n        at com.whatever.project.PROJECTJNI.swig_module_init(Native Method)\n        at com.whatever.project.PROJECTJNI.&lt;clinit&gt;(PROJECTJNI.java:974)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:278)\n        at org.python.core.Py.loadAndInitClass(Py.java:909)\n        at org.python.core.Py.findClassInternal(Py.java:844)\n        at org.python.core.Py.findClass(Py.java:869)\n        at org.python.core.packagecache.PackageManager.basicDoDir(PackageManager.java:107)\n        at org.python.core.packagecache.SysPackageManager.doDir(SysPackageManager.java:138)\n        at org.python.core.PyJavaPackage.fillDir(PyJavaPackage.java:123)\n        at org.python.core.imp.importAll(imp.java:1051)\n        at org.python.core.imp.importAll(imp.java:1039)\n        at org.python.pycode._pyx0.f$0(Bootstrap.py:9)\n        at org.python.pycode._pyx0.call_function(Bootstrap.py)\n        at org.python.core.PyTableCode.call(PyTableCode.java:165)\n        at org.python.core.PyCode.call(PyCode.java:18)\n        at org.python.core.Py.runCode(Py.java:1275)\n        at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235)\n        at org.python.util.jython.run(jython.java:247)\n        at org.python.util.jython.main(jython.java:129)\n\njava.lang.UnsatisfiedLinkError: java.lang.UnsatisfiedLinkError: com.whatever.project.PROJECTJNI.swig_module_init()V\n</code></pre>\n\n<p>The line 15 thing shows up on any time we invoke jython, we had been ignoring it.</p>\n\n<p>We can get the classes from the Java Project to work by simply loading them one at a time:</p>\n\n<pre><code>com.whatever.project import Class1\ncom.whatever.project import Class2\n...\ncom.whatever.project import Class50\n</code></pre>\n\n<p>This is highly impractical because even for short python script we might need a dozen classes. Many of them are exceptions that we are catching which have unique types. So anything that robustly handles errors might need a huge number of classes.</p>\n\n<p>As per the <a href=\"http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html#hiding-module-names\" rel=\"nofollow\">jython documentation</a> I should be able to hide PROJECTJNI so it is not loaded by doing something like this, but I found the docs less than perfectly clear. Here is what I attempted:</p>\n\n<pre><code>import com.whatever.project\n__all__ = dir(com.whatever.project)\n__all__.remove('PROJECTJNI')\nfrom com.whatever.project import *\n</code></pre>\n\n<p>But this fails with errors and still clearly trying to load PROJECTJNI.</p>\n\n<p>I also tried to fix the native executable so it could be linked against correctl. I learned another group using JRuby had no issue including everything, so I decided to check the source and the binary. I found void swig_module_init() in the file Project_wrap.cpp that Swig created. It was hidden behind a macro, but it was there, and objdump confirms:</p>\n\n<pre><code>$objdump libPROJECT.so -t |grep PROJECTJNI |grep init\n000000000051a900 l     O .data  00000000000009d0              _ZZ59Java_com_whatever_project_PROJECTJNI_swig_1module_1initE7methods\n0000000000263f66 g     F .text  00000000000000d1              Java_com_whatever_project_PROJECTJNI_swig_1module_1init\n</code></pre>\n\n<p>Am I doing something wrong with any of my troubleshooting steps? Is the a bug in Jython? Is there a simple Python workaround to make it skip loading PROJECTJNI?</p>\n\n<p>Anything that lets me skip linking this or makes this link correctly will be accepted.</p>\n"}, {"tags": ["c++", "winapi", "cpu-usage"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448480103, "post_id": 33924794, "comment_id": 55610940, "body": "How much difference do you get? Sampling error, or &quot;completely different&quot;?"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448481709, "post_id": 33924794, "comment_id": 55611730, "body": "@MatsPetersson a constanly lower measurement by a factor of around 1.5 to 2. The test code is doing spurious wakeups from a timer and working for short regular periods of time. Maybe the tools actually sample at high time interval and are wrong? I&#39;ll try to make a complete example."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1486520687, "post_id": 33924794, "comment_id": 71377089, "body": "@RudolfsBundulis: Hey, I&#39;m curious if you got it figured out? I&#39;m dealing with the same issue. Want to exchange ideas if you&#39;re still on it?"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1486558093, "post_id": 33924794, "comment_id": 71395717, "body": "@c00000fd If honestly this was very long age, I don&#39;t remember if I came to a fix or no. This code was basically to test H.264 encoding for a paper in the university but I do not remember if I discarded the CPU measurements in the end or no. The code is available at <a href=\"https://github.com/rubu/AIEEE2015/blob/master/Shared/TestRun.hpp\" rel=\"nofollow noreferrer\">github.com/rubu/AIEEE2015/blob/master/Shared/TestRun.hpp</a>, so you can simply try if it works better than what is pasted here or has the same issue:D Sorry for that:)"}], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 5587116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38831e401c063170856df08692ad9655?s=128&d=identicon&r=PG&f=1", "display_name": "MikeL", "link": "https://stackoverflow.com/users/5587116/mikel"}, "is_accepted": false, "score": 1, "last_activity_date": 1448488090, "creation_date": 1448488090, "answer_id": 33926984, "question_id": 33924794, "link": "https://stackoverflow.com/questions/33924794/correctly-measure-cpu-usage-with-hyperthreading/33926984#33926984", "title": "Correctly measure CPU usage with HyperThreading?", "body": "<p>Here are a few links I've used in the past and a good article on why GetThreadTimes is wrong (I wouldn't use it as a reliable source of data):</p>\n\n<p><a href=\"http://blog.kalmbachnet.de/?postid=28\" rel=\"nofollow\">http://blog.kalmbachnet.de/?postid=28</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa392397(VS.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/aa392397(VS.85).aspx</a></p>\n\n<p><a href=\"http://www.drdobbs.com/windows/win32-performance-measurement-options/184416651\" rel=\"nofollow\">http://www.drdobbs.com/windows/win32-performance-measurement-options/184416651</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa394279(VS.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/aa394279(VS.85).aspx</a></p>\n\n<p>You seem well on your way and knowledgeable those links should get you going in the right direction at least.   </p>\n"}], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448488090, "creation_date": 1448479238, "question_id": 33924794, "link": "https://stackoverflow.com/questions/33924794/correctly-measure-cpu-usage-with-hyperthreading", "title": "Correctly measure CPU usage with HyperThreading?", "body": "<p>I know there are several answers here on SO on how to measure CPU usage with either of two approaches:</p>\n\n<ul>\n<li>By using the performance counters (PDH API)</li>\n<li>By using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683223(v=vs.85).aspx\" rel=\"nofollow\">GetProcessTimes()</a> and dividing that against either wall time or times from <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683223(v=vs.85).aspx\" rel=\"nofollow\">GetSystemTimes()</a></li>\n</ul>\n\n<p>For some days now I am miserably failing to perform CPU usage measurements of my program with either of these - with both mechanisms I get a CPU usage that is smaller than displayed in Task Manager or Process Explorer. Is there some magic how these tools do this and is this related to HyperThreading being enabled? I will perform my tests on a CPU without HyperThreding but if anyone can point out what am I missing here I would be very thankful.</p>\n\n<p>To illustrate what I have tried, here is the code that does PDH based measruements:</p>\n\n<pre><code>class CCpuUsageMonitor\n{\npublic:\n    CCpuUsageMonitor(const wchar_t* pProcessName)\n    {\n\n        GetSystemInfo(&amp;m_SystemInfo);\n        auto nStatus = PdhOpenQuery(NULL, NULL, &amp;m_hPdhQuery);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n        nStatus = PdhAddCounter(m_hPdhQuery, L\"\\\\Processor(_Total)\\\\% Processor Time\", NULL, &amp;m_hPdhCpuUsageCounter);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n        wchar_t pCounterPath[PDH_MAX_COUNTER_PATH];\n        StringCbPrintf(pCounterPath, PDH_MAX_COUNTER_PATH, L\"\\\\Process(%s)\\\\%% Processor Time\", pProcessName);\n        nStatus = PdhAddCounter(m_hPdhQuery, pCounterPath, NULL, &amp;m_hPhdProcessCpuUsageCounter);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n    }\n\n    ~CCpuUsageMonitor()\n    {\n        PdhCloseQuery(&amp;m_hPdhQuery);\n    }\n\n    void CollectSample()\n    {\n        auto nStatus = PdhCollectQueryData(m_hPdhQuery);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n    }\n\n    double GetCpuUsage()\n    {\n        DWORD nType;\n        PDH_FMT_COUNTERVALUE CounterValue;\n        auto nStatus = PdhGetFormattedCounterValue(m_hPdhCpuUsageCounter, PDH_FMT_DOUBLE | PDH_FMT_NOCAP100, &amp;nType, &amp;CounterValue);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n        return CounterValue.doubleValue;\n    }\n\n    double GetProcessCpuUsage()\n    {\n        DWORD nType;\n        PDH_FMT_COUNTERVALUE CounterValue;\n        auto nStatus = PdhGetFormattedCounterValue(m_hPhdProcessCpuUsageCounter, PDH_FMT_DOUBLE | PDH_FMT_NOCAP100, &amp;nType, &amp;CounterValue);\n        _ASSERT(nStatus == ERROR_SUCCESS);\n        return CounterValue.doubleValue / m_SystemInfo.dwNumberOfProcessors;\n    }\n\nprivate:\n    SYSTEM_INFO m_SystemInfo;\n    HANDLE m_hPdhQuery;\n    HANDLE m_hPdhCpuUsageCounter;\n    HANDLE m_hPhdProcessCpuUsageCounter;\n};\n</code></pre>\n\n<p>With the second approach I basically take two snapshots of process times via <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683223(v=vs.85).aspx\" rel=\"nofollow\">GetProcessTimes()</a> before and after my code runs, substract and divide against wall time multiplied by the number of processors.</p>\n"}, {"tags": ["c++", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5605600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f3bf100d42ef7e60b9747425102c05?s=128&d=identicon&r=PG&f=1", "display_name": "MCF", "link": "https://stackoverflow.com/users/5605600/mcf"}, "edited": false, "score": 0, "creation_date": 1448571885, "post_id": 33927729, "comment_id": 55652772, "body": "Thanks a lot :D!. I did things you said. And now it works perfectly thank you."}, {"owner": {"reputation": 1311, "user_id": 1313573, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/81d7723fddd8e8c52e072e2e7828bebb?s=128&d=identicon&r=PG&f=1", "display_name": "jtedit", "link": "https://stackoverflow.com/users/1313573/jtedit"}, "reply_to_user": {"reputation": 3, "user_id": 5605600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f3bf100d42ef7e60b9747425102c05?s=128&d=identicon&r=PG&f=1", "display_name": "MCF", "link": "https://stackoverflow.com/users/5605600/mcf"}, "edited": false, "score": 0, "creation_date": 1448622761, "post_id": 33927729, "comment_id": 55670064, "body": "No problem, once your question has been answered you should mark an answer as accepted, it helps to keep stack overflow organised."}], "tags": [], "owner": {"reputation": 1311, "user_id": 1313573, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/81d7723fddd8e8c52e072e2e7828bebb?s=128&d=identicon&r=PG&f=1", "display_name": "jtedit", "link": "https://stackoverflow.com/users/1313573/jtedit"}, "is_accepted": true, "score": 0, "last_activity_date": 1448491470, "creation_date": 1448491470, "answer_id": 33927729, "question_id": 33924728, "link": "https://stackoverflow.com/questions/33924728/collision-with-more-than-1-object-sdl-2-0-c/33927729#33927729", "title": "Collision with more than 1 Object SDL 2.0-C++", "body": "<p>The problem with your code is that each call to Player.Collision overwrites the \"falling\" variable.</p>\n\n<pre><code>Player.Collision(Block1); //this call calculates a falling value\nPlayer.Collision(Block2); //...then this call overwrites falling with a new value\n</code></pre>\n\n<p>So effectively your code is only testing if the player is colliding with Block2, so collisions with Block1 are ignored.</p>\n\n<p>Currently your Collision function is:</p>\n\n<pre><code>bool Player::Collision(Block &amp;p)\n{\n    if(PlayerPos.x + PlayerPos.w &lt;= p.BlockPos.x || PlayerPos.x &gt;= p.BlockPos.x + p.BlockPos.w ||\n        PlayerPos.y + PlayerPos.h &lt;= p.BlockPos.y || PlayerPos.y &gt;= p.BlockPos.y + p.BlockPos.h)\n    {\n        falling = 0;\n        return true;\n    }\n    else\n        falling = 1;\n        return false;\n}\n</code></pre>\n\n<p>Firstly, your \"return false;\" is not actually part of the else, as you don't have {}. In this particular case it makes no difference as the else is exited and then the return happens but your indentation would suggest you expect the \"return false;\" line to be executed as part of the else block so you should put:</p>\n\n<pre><code>else\n{\n    falling = 1;\n    return false;\n}\n</code></pre>\n\n<p>Next you want to say if you have already detected a collision (eg, with Block1) then don't set falling to 1, to do this add an if statement.</p>\n\n<pre><code>else\n{\n    if(falling != 0) //if we haven't already detected a collision this frame\n    {\n        falling = 1;\n    }\n    return false;\n}\n</code></pre>\n\n<p>You will however need to set falling back to 1 at the start of each frame, otherwise if a collision is detected on one frame then the player will never fall on subsequent frames, even if they are not colliding with a block.</p>\n\n<p>As a side note, your Player.Update code modifies the player's y position if falling == 0, this seems counter intuitive as usually 0 is false and 1 is true, hence you seem to be saying if not falling then update y, where as it should be if falling update y. Personally I would use a bool rather than an int to hold the value of falling, and then say if(falling) update y, this would make your code clearer.</p>\n"}], "owner": {"reputation": 3, "user_id": 5605600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f3bf100d42ef7e60b9747425102c05?s=128&d=identicon&r=PG&f=1", "display_name": "MCF", "link": "https://stackoverflow.com/users/5605600/mcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 33927729, "answer_count": 1, "score": 0, "last_activity_date": 1448491470, "creation_date": 1448478996, "question_id": 33924728, "link": "https://stackoverflow.com/questions/33924728/collision-with-more-than-1-object-sdl-2-0-c", "title": "Collision with more than 1 Object SDL 2.0-C++", "body": "<p>I'am new there. I've been learning classes and tried to make a very simple platform game. But I have problem now. I've wanted to set Class \"Player\" to collide with 2 objects of Class \"Block\" But Collision do not work for one of them.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SDL.h&gt;\n#include &lt;SDL_image.h&gt;\n#undef main\n\nclass Block\n{\nprivate:\n    SDL_Texture *BlockTexture;\npublic:\n    Block(SDL_Renderer *renderTarget, std::string filePath, int xPos, int yPos, int Width, int Height);\n    ~Block();\n    void Draw(SDL_Renderer *renderTarget);\n    SDL_Rect BlockPos;\n};\nBlock::Block(SDL_Renderer *renderTarget, std::string filePath, int xPos, int yPos, int Width, int Height)\n{\n    SDL_Surface *surface = IMG_Load(filePath.c_str());\n    {\n        BlockTexture = SDL_CreateTextureFromSurface(renderTarget, surface);\n    }\n    SDL_FreeSurface(surface);\n\n    BlockPos.x = xPos;\n    BlockPos.y = yPos;\n    BlockPos.w = Width;\n    BlockPos.h = Height;\n}\nBlock::~Block()\n{\n    SDL_DestroyTexture(BlockTexture);\n}\nvoid Block::Draw(SDL_Renderer *renderTarget)\n{\n    SDL_RenderCopy(renderTarget, BlockTexture, NULL, &amp;BlockPos);\n}\nclass Player\n{\nprivate:\n    SDL_Texture *Texture;\n    float moveSpeed;\n    float jumpSpeed;\n    int falling = 0;\n    SDL_Scancode keys [3];\npublic:\n    SDL_Rect PlayerPos;\n    Player(SDL_Renderer *renderTarget, std::string filePath, int PosX, int PosY,     int Width, int Height);\n    ~Player();\n\n    void Update(float delta, const Uint8 *Keystate);\n    void Draw(SDL_Renderer *renderTarget);\n\n    bool Collision(Block &amp;p);\n};\nPlayer::Player(SDL_Renderer *renderTarget, std::string filePath, int PosX, int     PosY, int Width, int Height)\n{\n    SDL_Surface *surface = IMG_Load(filePath.c_str());\n    {\n        Texture = SDL_CreateTextureFromSurface(renderTarget, surface);\n    }\n    SDL_FreeSurface(surface);\n\n    PlayerPos.x = PosX;\n    PlayerPos.y = PosY;\n    PlayerPos.w = Width;\n    PlayerPos.h = Height;\n\n    keys[0] = SDL_SCANCODE_UP;\n    keys[1] = SDL_SCANCODE_LEFT;\n    keys[2] = SDL_SCANCODE_RIGHT;\n\n    moveSpeed = 200.f;\n    jumpSpeed = 100.f;\n}\nPlayer::~Player()\n{\n    SDL_DestroyTexture(Texture);\n}\nvoid Player::Update(float delta, const Uint8 *KeyState)\n{\n    if(KeyState[keys[0]])\n    {\n        PlayerPos.y -= moveSpeed * delta;\n    }\n    if(KeyState[keys[1]])\n    {\n        PlayerPos.x -= (moveSpeed / 2) * delta;\n    }\n    if(KeyState[keys[2]])\n    {\n        PlayerPos.x += moveSpeed * delta;\n    }\n    if(falling == 0)\n    {\n        PlayerPos.y += jumpSpeed * delta;\n    }\n}\nvoid Player::Draw(SDL_Renderer *renderTarget)\n{\n    SDL_RenderCopy(renderTarget, Texture, NULL, &amp;PlayerPos);\n}\nbool Player::Collision(Block &amp;p)\n{\n    if(PlayerPos.x + PlayerPos.w &lt;= p.BlockPos.x || PlayerPos.x &gt;= p.BlockPos.x + p.BlockPos.w ||\n        PlayerPos.y + PlayerPos.h &lt;= p.BlockPos.y || PlayerPos.y &gt;= p.BlockPos.y + p.BlockPos.h)\n    {\n        falling = 0;\n        return true;\n    }\n    else\n        falling = 1;\n        return false;\n}\nSDL_Texture *LoadTexture(std::string filePath, SDL_Renderer *Renderer)\n{\n    SDL_Texture *texture = NULL;\n    SDL_Surface *surface = IMG_Load(filePath.c_str());\n    {\n        texture = SDL_CreateTextureFromSurface(Renderer, surface);\n    }\n    SDL_FreeSurface(surface);\n    return texture;\n}\nint main(int argc, char *argv[])\n{\n    SDL_Init(SDL_INIT_EVERYTHING);\n\n    SDL_Window *window = SDL_CreateWindow(\"Platform\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);\n    SDL_Renderer *renderTarget = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);\n\n    int imgFlags = IMG_INIT_PNG;\n\n    int currentTime = 0;\n    int previousTime = 0;\n    float delta = 0;\n\n    const Uint8 *Keystate;\n\n    Player Player(renderTarget, \"BlockP.png\", 100, 100, 50, 50);\n\n    Block Block1(renderTarget, \"Block.png\", 0, 500, 800, 100);\n    Block Block2(renderTarget, \"Block.png\", 100, 300, 300, 50);\n\n    bool isRunning = true;\n    SDL_Event ev;\n\n    while(isRunning)\n    {\n        Keystate = SDL_GetKeyboardState(NULL);\n\n        Player.Collision(Block1);\n        Player.Collision(Block2);\n\n        previousTime = currentTime;\n        currentTime = SDL_GetTicks();\n        delta = (currentTime - previousTime) / 1000.0f;\n\n        Player.Update(delta, Keystate);\n\n        while(SDL_PollEvent(&amp;ev) != 0)\n        {\n            if(ev.type == SDL_QUIT)\n                isRunning = false;\n        }\n        SDL_RenderClear(renderTarget);\n\n        Player.Draw(renderTarget);\n\n        Block1.Draw(renderTarget);\n        Block2.Draw(renderTarget);\n\n        SDL_RenderPresent(renderTarget);\n    }\n    SDL_DestroyWindow(window);\n    SDL_DestroyRenderer(renderTarget);\n    window = NULL;\n    renderTarget = NULL;\n\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 1, "creation_date": 1448481490, "post_id": 33924714, "comment_id": 55611633, "body": "Your code is undefined behavior.  Arrays of samplers are special in OpenGL. You cannot use a non-uniform expression like something derived from an vertex attribute as an index. I&#39;ve explained that in more detail in <a href=\"http://stackoverflow.com/questions/27972661/glsl-data-distortion/27973129#27973129\">this answer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 0, "last_activity_date": 1448484182, "creation_date": 1448484182, "answer_id": 33926072, "question_id": 33924714, "link": "https://stackoverflow.com/questions/33924714/my-sprites-are-switching-between-textures-opengl/33926072#33926072", "title": "my sprites are switching between textures opengl", "body": "<p>It is hard for me to see where your problem is coming from, the only thing I can suggest is taking a look at an Image2d class object constructor that I have. Now, my source depends on outside classes such as a <code>ShaderManager</code> class that relies heavily on template types and a <code>Batch</code> class and a <code>BatchManager</code> class to send over the vertices to the video card. Also this <code>Image2d</code> is an inherited object. However, this may serve as some help to you in tracking down your own problem. There are two different constructors for different versions of the implementation depending on which version of OpenGL and GLSL is being used. If I remember correctly version 2 uses the BatchManager to send the vertices to the video card where version 1 doesn't which can be seen within the <code>render()</code> method.</p>\n\n<p><strong>Image2d v1.0</strong></p>\n\n<pre><code>// ----------------------------------------------------------------------------\n// Image2d()\nImage2d::Image2d( float fWidth, float fHeight, TextureInfo::FilterQuality filterQuality, bool generateMipMap, const std::string&amp; strTextureFilename, const std::string&amp; strId ) :\nVisualMko( glm::uvec2(), strId ),\nm_vboTexture( 0 ),\nm_vboPosition( 0 ),\nm_vboIndices( 0 ),\nm_vao( 0 ) {\n\n    if ( fWidth &lt;= 0 || fHeight &lt;= 0 ) {\n        std::ostringstream strStream;\n        strStream &lt;&lt; __FUNCTION__ &lt;&lt; \" Invalid image size (\" &lt;&lt; fWidth &lt;&lt; \",\" &lt;&lt; fHeight &lt;&lt; \") must be more then 0 in each dimension.\";\n        throw ExceptionHandler( strStream );\n    }\n\n    // Save TextureId\n    TextureFileReader textureFileReader( strTextureFilename );\n    m_textureInfo = textureFileReader.getOrCreateTextureInfo( filterQuality, generateMipMap, false );\n\n    // Define Texture Co-Ordinates\n    std::vector&lt;float&gt; vTextureCoordinates;\n    vTextureCoordinates.push_back( 0.0f );\n    vTextureCoordinates.push_back( 1.0f );\n\n    vTextureCoordinates.push_back( 0 );\n    vTextureCoordinates.push_back( 0 );\n\n    vTextureCoordinates.push_back( 1.0f );\n    vTextureCoordinates.push_back( 1.0f );\n\n    vTextureCoordinates.push_back( 1.0f );\n    vTextureCoordinates.push_back( 0 );\n\n    // Define Vertex Positions (x,y,z)\n    std::vector&lt;float&gt; vVertexPositions;\n    vVertexPositions.push_back( 0 );\n    vVertexPositions.push_back( fHeight );\n    vVertexPositions.push_back( 0 );\n\n    vVertexPositions.push_back( 0 );\n    vVertexPositions.push_back( 0 );\n    vVertexPositions.push_back( 0 );\n\n    vVertexPositions.push_back( fWidth );\n    vVertexPositions.push_back( fHeight );\n    vVertexPositions.push_back( 0 );\n\n    vVertexPositions.push_back( fWidth );\n    vVertexPositions.push_back( 0 );\n    vVertexPositions.push_back( 0 );\n\n    // Define 2 Triangle Faces\n    std::vector&lt;unsigned char&gt; vIndices;\n    vIndices.push_back( 0 );\n    vIndices.push_back( 1 );\n    vIndices.push_back( 2 );\n    vIndices.push_back( 3 );\n\n    // Create Vertex Array Object\n    glGenVertexArrays( 1, &amp;m_vao );\n    glBindVertexArray( m_vao ); // Start Array\n\n    m_pShaderManager-&gt;setAttribute( A_COLOR, COLOR_WHITE );\n\n    // Create Position Buffer And Store On Video Card\n    glGenBuffers( 1, &amp; m_vboPosition );\n    glBindBuffer( GL_ARRAY_BUFFER, m_vboPosition );\n    glBufferData( GL_ARRAY_BUFFER, vVertexPositions.size() * sizeof( vVertexPositions[0] ), &amp;vVertexPositions[0], GL_STATIC_DRAW );\n    m_pShaderManager-&gt;enableAttribute( A_POSITION );\n\n    // Create Texture Coordinate Buffer\n    glGenBuffers( 1, &amp;m_vboTexture );\n    glBindBuffer( GL_ARRAY_BUFFER, m_vboTexture );\n    glBufferData( GL_ARRAY_BUFFER, vTextureCoordinates.size() * sizeof( vTextureCoordinates[0] ), &amp;vTextureCoordinates[0], GL_STATIC_DRAW );\n    m_pShaderManager-&gt;enableAttribute( A_TEXTURE_COORD0 );\n\n    // Create Index Buffer\n    glGenBuffers( 1, &amp;m_vboIndices );\n    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, m_vboIndices );\n    glBufferData( GL_ELEMENT_ARRAY_BUFFER, vIndices.size() * sizeof( vIndices[0] ), &amp;vIndices[0], GL_STATIC_DRAW );\n\n    glBindVertexArray( 0 ); // Stop Array\n\n    // Disable Attribute Pointers\n    m_pShaderManager-&gt;disableAttribute( A_POSITION );\n    m_pShaderManager-&gt;disableAttribute( A_TEXTURE_COORD0 );\n\n    // THIS MUST BE AFTER Vertex Array Buffer Is Unbound!\n    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 ); // Stop Buffer Index\n    glBindBuffer( GL_ARRAY_BUFFER, 0 ); // Stop Buffer\n\n    // We have a Valid Image2d Save Filename\n    m_strFilename = strTextureFilename;\n\n} // Image2D - v1.0\n</code></pre>\n\n<p><strong>Image2D - v2.0</strong></p>\n\n<pre><code>// ----------------------------------------------------------------------------\n// Image2d()\nImage2d::Image2d( const glm::uvec2&amp; origin, const glm::uvec2&amp; size, const std::string&amp; strTextureFilename, const std::string&amp; strId ) :\nVisualMko( size, strId ),\nm_vboTexture( 0 ),\nm_vboPosition( 0 ),\nm_vboIndices( 0 ),\nm_vao( 0 ) {\n\n    m_version = 2;\n\n    TextureFileReader textureFileReader( strTextureFilename );\n    m_textureInfo = textureFileReader.getOrCreateTextureInfo( TextureInfo::FILTER_NONE, false, false );\n    m_config.uTextureId = m_textureInfo.uTextureId;\n\n    if ( 0 == m_textureInfo.size.x || 0 == m_textureInfo.size.y ) {\n        std::ostringstream strStream;\n        strStream &lt;&lt; __FUNCTION__ &lt;&lt; \"size of \" &lt;&lt; strTextureFilename &lt;&lt; \" is invalid \" &lt;&lt; m_textureInfo.size;\n        throw ExceptionHandler( strStream );\n    }\n\n    // Verify Image Fits Inside Texture\n    if ( m_textureInfo.size.x &lt; size.x + origin.x || m_textureInfo.size.y &lt; size.y + origin.y ) {\n        std::ostringstream strStream;\n        strStream &lt;&lt; __FUNCTION__ &lt;&lt; \" \" &lt;&lt; strTextureFilename &lt;&lt; \" size is \" &lt;&lt; m_textureInfo.size\n            &lt;&lt; \" which is too small for an image that is \" &lt;&lt; size\n            &lt;&lt; \" pixels in size, with an origin point set at \" &lt;&lt; origin ;\n        throw ExceptionHandler( strStream );\n    }\n\n    glm::vec2 textureCoordScaleFactor( 1.0f / static_cast&lt;float&gt;( m_textureInfo.size.x ),\n        1.0f / static_cast&lt;float&gt;( m_textureInfo.size.y ) );\n\n    glm::vec2 textureCoordBottomLeft = glm::vec2( textureCoordScaleFactor.x * origin.x,\n                                                  textureCoordScaleFactor.y * ( m_textureInfo.size.y - origin.y - size.y ) );\n    glm::vec2 textureCoordTopRight   = glm::vec2( textureCoordScaleFactor.x * ( origin.x + size.x ),\n                                                  textureCoordScaleFactor.y * ( m_textureInfo.size.y - origin.y ) );\n\n    // Set Colors And Texture Coordinates (Position Will Be Updated In Render Function)\n    m_vVertices.push_back( GuiVertex( glm::vec2(), COLOR_WHITE, glm::vec2( textureCoordBottomLeft.x, textureCoordTopRight.y ) ) );\n    m_vVertices.push_back( GuiVertex( glm::vec2(), COLOR_WHITE, glm::vec2( textureCoordBottomLeft.x, textureCoordBottomLeft.y ) ) );\n    m_vVertices.push_back( GuiVertex( glm::vec2(), COLOR_WHITE, glm::vec2( textureCoordTopRight.x,   textureCoordTopRight.y ) ) );\n    m_vVertices.push_back( GuiVertex( glm::vec2(), COLOR_WHITE, glm::vec2( textureCoordTopRight.x,   textureCoordBottomLeft.y ) ) );\n\n} // Image2d - v2.0\n</code></pre>\n\n<p>and here is my <code>render()</code> method</p>\n\n<pre><code>// ----------------------------------------------------------------------------\n// render()\nvoid Image2d::render() {\n    if ( 1 == m_version ) {\n        m_pShaderManager-&gt;setTexture( 0, U_TEXTURE0_SAMPLER_2D, m_textureInfo.uTextureId );\n\n        glBindVertexArray( m_vao );\n        glDrawElements( GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_BYTE, nullptr );\n        glBindVertexArray( 0 );\n    } else {\n        // Version 2.0\n        // Update Vertices\n        if ( m_transformMatrix.updateTranslation || m_transformMatrix.updateScale || m_transformMatrix.updateRotation ) {\n            m_transformMatrix.updateTranslation = m_transformMatrix.updateScale = m_transformMatrix.updateRotation = false;\n\n            // Order Of Operations Matter Here!\n            glm::mat4 matrix; // Identity\n\n            if ( m_transformMatrix.hasTranslation ) {\n                matrix[3][0] = m_transformMatrix.translation.x;\n                matrix[3][1] = m_transformMatrix.translation.y;\n            }\n\n            if ( m_transformMatrix.hasRotation ) {\n                matrix = glm::rotate( matrix, m_transformMatrix.fRotationAngleRadians, glm::vec3( 0.0f, 0.0f, -1.0f ) );\n            }\n\n            if ( m_transformMatrix.hasScale ) {\n                matrix = matrix * glm::mat4( m_transformMatrix.scale.x,                       0.0f, 0.0f, 0.0f,\n                                                                   0.0f, m_transformMatrix.scale.y, 0.0f, 0.0f,\n                                                                   0.0f,                      0.0f, 1.0f, 0.0f,\n                                                                   0.0f,                      0.0f, 0.0f, 1.0f );\n            }\n\n            // Center Offset\n            if ( m_offsetPosition.x != 0 || m_offsetPosition.y != 0 ) {\n                matrix = glm::translate( matrix, glm::vec3( -m_offsetPosition.x, -m_offsetPosition.y, 0.0f ) );\n            }\n\n            // Apply Transformation To All 4 Vertices\n            m_vVertices[0].position = glm::vec2( matrix * glm::vec4(        0,        0, 0, 1.0f ) );\n            m_vVertices[1].position = glm::vec2( matrix * glm::vec4(        0, m_size.y, 0, 1.0f ) );\n            m_vVertices[2].position = glm::vec2( matrix * glm::vec4( m_size.x,        0, 0, 1.0f ) );\n            m_vVertices[3].position = glm::vec2( matrix * glm::vec4( m_size.x, m_size.y, 0, 1.0f ) );\n        }\n        renderBatch();\n    }\n} // render\n</code></pre>\n\n<p>Make sure that the sizes you are specifying in your <code>glBufferData(GL_ARRAY_BUFFER, RENDERER_BUFFER_SIZE, 0, GL_DYNAMIC_DRAW);\n</code> is accurate. Also make sure that you are stopping your your VertexArray at the appropriate time as well as disabling your Attribute Pointers. Everything that you bound must be unbound, and for some types Order does matter!</p>\n"}], "owner": {"reputation": 1, "user_id": 4369905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae6ec53679d2288fbeecb15f8d6ed8d?s=128&d=identicon&r=PG&f=1", "display_name": "arkeyon", "link": "https://stackoverflow.com/users/4369905/arkeyon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485725381, "creation_date": 1448478953, "last_edit_date": 1485725381, "question_id": 33924714, "link": "https://stackoverflow.com/questions/33924714/my-sprites-are-switching-between-textures-opengl", "title": "my sprites are switching between textures opengl", "body": "<p>I'm drawing sprites that are all in a buffer using glDrawElements.\nTo tell sprites what texture to be in the fragment shader I have uniform sampler2D textures[32]; each vertex has an index, which is passed to the fragment shader from the vertex shader:</p>\n\n<pre><code>color = texture(textures[index], fs_in.uv);\n</code></pre>\n\n<p>when I try draw my sprites with more than 1 texture active it gets the wrong textures in the top right corner</p>\n\n<p><a href=\"http://puu.sh/lyr5j/d8c2cf6c8f.png\" rel=\"nofollow noreferrer\">http://puu.sh/lyr5j/d8c2cf6c8f.png</a></p>\n\n<p>I have no clue why this is happening have tried texture parameters</p>\n\n<p>I cant seem to find anyone who has had a similar problem.</p>\n\n<p>This is my renderer's init function (I am purposly passing the texid as float since I have heard ints don't work well (also tried))</p>\n\n<p>glGenBuffers(1, &amp;m_VDBO);\n            glGenVertexArrays(1, &amp;m_VAO);</p>\n\n<pre><code>        glBindVertexArray(m_VAO);\n        glBindBuffer(GL_ARRAY_BUFFER, m_VDBO);\n        glBufferData(GL_ARRAY_BUFFER, RENDERER_BUFFER_SIZE, 0, GL_DYNAMIC_DRAW);\n\n        glEnableVertexAttribArray(SHADER_VERTEX_INDEX);\n        glEnableVertexAttribArray(SHADER_UV_INDEX);\n        glEnableVertexAttribArray(SHADER_COLOR_INDEX);\n        glEnableVertexAttribArray(SHADER_TEXID_INDEX);\n\n        glVertexAttribPointer(SHADER_VERTEX_INDEX, 3, GL_FLOAT, GL_FALSE, RENDERER_VERTEX_SIZE, (const void *) offsetof(VertexData, VertexData::vertex));\n        glVertexAttribPointer(SHADER_UV_INDEX, 2, GL_FLOAT, GL_FALSE, RENDERER_VERTEX_SIZE, (const void *) offsetof(VertexData, VertexData::uv));\n        glVertexAttribPointer(SHADER_COLOR_INDEX, 4, GL_UNSIGNED_BYTE, GL_TRUE, RENDERER_VERTEX_SIZE, (const void *) offsetof(VertexData, VertexData::color));\n        glVertexAttribPointer(SHADER_TEXID_INDEX, 1, GL_FLOAT, GL_FALSE, RENDERER_VERTEX_SIZE, (const void *)offsetof(VertexData, VertexData::texID));\n\n        glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n        const GLushort modelindices[] = { 0, 1, 2, 2, 3, 0 };\n        GLuint indices[RENDERER_INDICES_SIZE];\n\n        for (int i = 0; i &lt; RENDERER_INDICES_SIZE; i += 6)\n        {\n            for (int o = 0; o &lt; 6; o++)\n            {\n                indices[i + o] = modelindices[o] + (i / 6 * 4);\n            }\n        }\n\n        glGenBuffers(1, &amp;m_IBO);\n        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, m_IBO);\n        glBufferData(GL_ELEMENT_ARRAY_BUFFER, RENDERER_INDICES_SIZE * sizeof(GLuint), indices, GL_STATIC_DRAW);\n        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n\n        glBindVertexArray(0);\n</code></pre>\n\n<p>the flush function</p>\n\n<pre><code>            glBindVertexArray(m_VAO);\n        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, m_IBO);\n\n        for (int i = 0; i &lt; m_TextureSlots.size(); i++)\n        {\n            glActiveTexture(GL_TEXTURE0 + i);\n            glBindTexture(GL_TEXTURE_2D, m_TextureSlots[i]);\n        }\n\n        glDrawElements(GL_TRIANGLES, m_IndexCount, GL_UNSIGNED_INT, 0);\n\n        m_TextureSlots.clear();\n        m_IndexCount = 0;\n\n        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n        glBindVertexArray(0);\n</code></pre>\n"}, {"tags": ["c++", "exception-handling", "shared-libraries", "typeid", "itanium-abi"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1531274312, "post_id": 33924706, "comment_id": 89530215, "body": "Are the static members inside classes in the dlopen-ed modules merged with the static members inside classes with the same source level name?"}], "answers": [{"comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1448479913, "post_id": 33924819, "comment_id": 55610854, "body": "Why is that an ODR violation? I thought that is why we have header files, to define the class in whatever obj file we need in the programm. How else do you want to define an interface?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1448480489, "post_id": 33924819, "comment_id": 55611145, "body": "You have one header but multiple definition: one in your application and one in your library. There should be <i>one</i> definition, either in your program or in your library. Not both. One soltuion would be to place common classes in one shared library and use dynamic linking for them."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1448481397, "post_id": 33924819, "comment_id": 55611588, "body": "@gui all member functions were inline. So I don&#39;t see a violation here. But since this is shared library madness, and the C++ Standard does not know about shared libraries, I think we could not even say that it would be an ODR violation even if the functions were noninline. Normally linux elf shared objects support multiple definitions being present."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1448482127, "post_id": 33924819, "comment_id": 55611943, "body": "@\u1405JohannesSchaub-litb\u140a, it is an ODR violation alright. Your class IS defined in two places. And inline or non-inline has no bearing hear. Such violation (as produced by <code>dlopen</code>ing something) is a known cause of the very subtle and hard to trace bugs. Yours trully only recently dealed with production coredump of a similar nature - global static object defined in both application and one of the shared libraries it <code>dlopen</code>ed."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1448489258, "post_id": 33924819, "comment_id": 55615513, "body": "Those objects are different to implementation-defined hidden objects. The Standard does not permit the user to issue typeinfo structure definitions, or specify their linkage; therefore it&#39;s up to the implementation to handle this case or not."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1531276546, "post_id": 33924819, "comment_id": 89530689, "body": "The ODR only guaranties that the all definitions of an entity are somewhat equivalent. How does it apply to <code>dlopen</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1531317363, "post_id": 33924819, "comment_id": 89552236, "body": "@curiousguy ODR guarantees nothing, it demands. Btw, would you have any idea on the downvote?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1531407658, "post_id": 33924819, "comment_id": 89594398, "body": "@curiousguy <a href=\"https://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/definition</a> (scroll to One Definition Rule)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1532786850, "post_id": 33924819, "comment_id": 90110223, "body": "I have search, no mention of <code>dlopen</code> in that definition."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533062750, "post_id": 33924819, "comment_id": 90205736, "body": "@curiousguy, yes, because dlopen is not part of C++ standard. But it has to follow the same rules as static libraries."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533064732, "post_id": 33924819, "comment_id": 90206613, "body": "@SergeyA Source?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533065352, "post_id": 33924819, "comment_id": 90206904, "body": "@curiousguy the source was provided. There will be no other single source. You just need to know what dlopen is, to apply standard wording to it&#39;s effect."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533065609, "post_id": 33924819, "comment_id": 90207032, "body": "@SergeyA So there is no relevant source"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533066999, "post_id": 33924819, "comment_id": 90207680, "body": "@curiousguy your craving for &quot;source&quot; is weird. If I go there to the cppreference page and add a wording about this being applicable to dlopen calls, would it be source enough for you? At some point, you need to start understanding things, rather than just demanding a single-statement &quot;source&quot;. In this case, you are looking at two interconnecting systems - posix for dlopen, C++ for ODR. Neither will talk about the other, so you have to make connection yourself."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533067059, "post_id": 33924819, "comment_id": 90207710, "body": "Unix like system allow replacing std functions like <code>malloc</code>. Is that ODR approved?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1533067203, "post_id": 33924819, "comment_id": 90207775, "body": "@curiousguy it is ODR-agnostic. ODR doesn&#39;t care about that fact, since you do not end up with more than one definition of <code>malloc</code> in the program."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1533067485, "post_id": 33924819, "comment_id": 90207933, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177131/discussion-between-curiousguy-and-sergeya\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1448479375, "creation_date": 1448479375, "answer_id": 33924819, "question_id": 33924706, "link": "https://stackoverflow.com/questions/33924706/why-can-i-catch-an-object-or-dynamic-cast-even-if-its-stdtype-info-object-is-d/33924819#33924819", "title": "Why can I catch an object or dynamic_cast even if its std::type_info object is different?", "body": "<p><em>defined the same class both in a program and in a shared library that I dlopen from the program</em> - congratulations on violating One Definition Rule. In the land of undefined behavior anything can happen, you should know.</p>\n"}, {"comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1448489651, "post_id": 33927219, "comment_id": 55615666, "body": "thanks. hmm, from what I read, it seems to indicate that the address has to be the same (note the iff): &quot;Therefore, except for direct or indirect pointers to incomplete types, the equality and inequality operators can be written as address comparisons when operating on those type_info objects: two type_info structures describe the same type if and only if they are the same structure (at the same address).&quot;"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1448570670, "post_id": 33927219, "comment_id": 55652252, "body": "<a href=\"http://stackoverflow.com/questions/5044993/typeinfo-shared-libraries-and-dlopen-without-rtld-global?rq=1\" title=\"typeinfo shared libraries and dlopen without rtld global\">stackoverflow.com/questions/5044993/&hellip;</a> Seems to disagree with your answer."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1448742172, "post_id": 33927219, "comment_id": 55708376, "body": "Without the RTLD_GLOBAL flag, the modules are effectively two distinct programs, and so the restriction does not apply, as it only considers one program. You can see other violations of the specification here, like having two definitions of the same function."}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1448489754, "last_edit_date": 1448489754, "creation_date": 1448489182, "answer_id": 33927219, "question_id": 33924706, "link": "https://stackoverflow.com/questions/33924706/why-can-i-catch-an-object-or-dynamic-cast-even-if-its-stdtype-info-object-is-d/33927219#33927219", "title": "Why can I catch an object or dynamic_cast even if its std::type_info object is different?", "body": "<p>The Itanium ABI explicitly states to compare type_info objects for classes by <em>mangled name</em>, which is indeed the hypothesized implementation in your question.</p>\n\n<p><a href=\"https://refspecs.linuxbase.org/cxxabi-1.86.html#rtti\" rel=\"nofollow\">https://refspecs.linuxbase.org/cxxabi-1.86.html#rtti</a></p>\n\n<p>I would imagine that the rationale here is to support exactly the behaviour that you have observed.</p>\n\n<p>typeinfo descriptors are also defined to have \"vague linkage\", which is lovely. However, the definition used requires that they are placed in COMDAT groups. COMDAT groups are required to be deduplicated by the linker, at least as part of static linking. I am unable currently to determine if they are also required to be deduplicated for dynamic linking, but it seems logical.</p>\n\n<p>So in summary, the answer to your question is, \"It's handled because the ABI authors foresaw this situation and ensured it was handled\".</p>\n"}], "owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1531271302, "creation_date": 1448478916, "last_edit_date": 1531271302, "question_id": 33924706, "link": "https://stackoverflow.com/questions/33924706/why-can-i-catch-an-object-or-dynamic-cast-even-if-its-stdtype-info-object-is-d", "title": "Why can I catch an object or dynamic_cast even if its std::type_info object is different?", "body": "<p>I was conducting an experiment and defined the same class both in a program and in a shared library that I dlopen from the program and made sure the program has no entry for the type info object in its dynsym table. Then I throw an object of that class from within the shared library and try to catch it using the same class type.</p>\n\n<p>I expected that the implementation on linux and gcc would not catch the exception because the type info objects of both classes in the program and shared library differs, and therefore a match would only be possible if the runtime would do a string comparison of the mangled class names.</p>\n\n<p>Still it matches, and I can even do dynamic downcasts to classes defined in the shared library. Can anyone please explain how the implementation works in this case, please?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Based on what the Itanium ABI states, the observed behavior would seem to be nonconforming. What am I missing here?</p>\n\n<blockquote>\n  <p>Therefore, except for direct or indirect pointers to incomplete types, the equality and inequality operators can be written as address comparisons when operating on those type_info objects: two type_info structures describe the same type if and only if they are the same structure (at the same address).</p>\n</blockquote>\n\n<p>As the two typeinfo had different addresses, the structures described therefore represent different types. Therefore the cast should have failed and the exception should not have been caught.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1448478644, "post_id": 33924558, "comment_id": 55610165, "body": "<code>&quot;^D&quot;</code> isn&#39;t a thing, you probably meant to check for <code>cin.eof()</code> which is triggered by pressing CTRL-D. But that&#39;s OS specific."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1448478839, "post_id": 33924558, "comment_id": 55610284, "body": "Typing <code>Ctrl-D</code> (in linux) should cause the loop to end, no need to test for it explicitly (if that&#39;s what you are doing)."}, {"owner": {"reputation": 317, "user_id": 5437096, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5451a6d95d6a10cd7f178ed88c8a9da4?s=128&d=identicon&r=PG&f=1", "display_name": "Antithesis", "link": "https://stackoverflow.com/users/5437096/antithesis"}, "edited": false, "score": 0, "creation_date": 1448478985, "post_id": 33924558, "comment_id": 55610359, "body": "What I&#39;m trying to achieve. I want the stdin to terminate and the program to run on two successive presses of enter"}, {"owner": {"reputation": 317, "user_id": 5437096, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5451a6d95d6a10cd7f178ed88c8a9da4?s=128&d=identicon&r=PG&f=1", "display_name": "Antithesis", "link": "https://stackoverflow.com/users/5437096/antithesis"}, "edited": false, "score": 0, "creation_date": 1448479042, "post_id": 33924558, "comment_id": 55610404, "body": "IF there&#39;s no more input line the program should run is what I want to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4718629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZMe5.png?s=128&g=1", "display_name": "Kamal Sadek", "link": "https://stackoverflow.com/users/4718629/kamal-sadek"}, "is_accepted": false, "score": 2, "last_activity_date": 1448479128, "creation_date": 1448479128, "answer_id": 33924765, "question_id": 33924558, "link": "https://stackoverflow.com/questions/33924558/reading-multi-line-inputs-in-c/33924765#33924765", "title": "Reading multi line inputs in C++", "body": "<p>If you really want the loop to stop with two Enter's, you can change the conditional to</p>\n\n<pre><code>if(line == \"\" &amp;&amp; v.size() &gt;= 1 &amp;&amp; v.back() == \"\") break;\n</code></pre>\n\n<p>Which should check if the current keystroke and the previous one were Enter's. The <code>v.size() &gt;= 1</code> is just to check whether v has any elements in it, and to stop a Segfault if it doesn't have any other elements.</p>\n\n<p>Do note that the last element in the array will be an empty string, and if you want to get rid of that, just write</p>\n\n<pre><code>v.pop_back();\n</code></pre>\n\n<p>outside of the first loop, which gets rid of the last element.</p>\n"}, {"comments": [{"owner": {"reputation": 2205, "user_id": 4851927, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/12dac37ac54f43197df820b2fc26fe6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Acharya", "link": "https://stackoverflow.com/users/4851927/ankit-acharya"}, "edited": false, "score": 0, "creation_date": 1448480068, "post_id": 33924789, "comment_id": 55610919, "body": "this is the best solution to the problem"}], "tags": [], "owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "is_accepted": false, "score": 8, "last_activity_date": 1448479225, "creation_date": 1448479225, "answer_id": 33924789, "question_id": 33924558, "link": "https://stackoverflow.com/questions/33924558/reading-multi-line-inputs-in-c/33924789#33924789", "title": "Reading multi line inputs in C++", "body": "<p>I would test to see if the string is empty.  If so, break.  Like this:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\nstring line;\nvector&lt;string&gt; v;\n\nwhile(std::getline(cin, line)){\n    if (line.empty()){\n        break;\n    }\n    v.push_back(line);\n}\n\nvector&lt;string&gt;::iterator it;\n\nfor (it = v.begin(); it != v.end(); it++){\n    cout &lt;&lt; *it &lt;&lt; '\\n';\n}\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 5437096, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5451a6d95d6a10cd7f178ed88c8a9da4?s=128&d=identicon&r=PG&f=1", "display_name": "Antithesis", "link": "https://stackoverflow.com/users/5437096/antithesis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9841, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1575735356, "creation_date": 1448478420, "question_id": 33924558, "link": "https://stackoverflow.com/questions/33924558/reading-multi-line-inputs-in-c", "title": "Reading multi line inputs in C++", "body": "<p>I'm trying to read multiple lines of input from the command line in C++ and store them into an array. This is my code.</p>\n\n<pre><code>std::string line;\n    int in;\n    std::vector&lt;std::string&gt; v;\n\n    while(std::getline(std::cin, line)){\n        if(line == \"^D\") break;\n        v.push_back(line);\n    }\n    for(auto it = v.begin(); it != v.end(); it++){\n        std::cout&lt;&lt;*it&lt;&lt;std::endl;\n\n    }\n</code></pre>\n\n<p>The stdin goes into an infinite loop and I can't seem to figure out how to prevent that. Basically the behavior targeted is that two consecutive press of enter without any input should terminate the stdin loop and run the program.</p>\n"}, {"tags": ["c++", "templates", "matrix", "constructor"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1448478749, "post_id": 33924536, "comment_id": 55610232, "body": "No, you can&#39;t alleviate this problem - <code>std::vector</code> has exactly the same issue,"}, {"owner": {"reputation": 802, "user_id": 5158590, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcea160384d274a012fa104bbcd36c36?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Blinov", "link": "https://stackoverflow.com/users/5158590/maxim-blinov"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448479242, "post_id": 33924536, "comment_id": 55610499, "body": "Is it worth sticking to using templates and dealing with the lack of dynamic instantiation, or just bearing with the syntax, in your opinion?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448479364, "post_id": 33924536, "comment_id": 55610568, "body": "what is the endgoal? Do you need dynamic instantiation or not? This is something which is articulated as requirements to your library, I have no idea what those are."}], "answers": [{"tags": [], "owner": {"reputation": 946, "user_id": 5578212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b2e666a70e0b85e72eacc80ce332adb?s=128&d=identicon&r=PG&f=1", "display_name": "Joan Esteban", "link": "https://stackoverflow.com/users/5578212/joan-esteban"}, "is_accepted": false, "score": 1, "last_activity_date": 1448482140, "creation_date": 1448482140, "answer_id": 33925541, "question_id": 33924536, "link": "https://stackoverflow.com/questions/33924536/separating-stdinitializer-list-from-parenthesis-enclosed-arguments-in-ctor-inv/33925541#33925541", "title": "Separating std::initializer_list from parenthesis-enclosed arguments in Ctor invocation", "body": "<p>I undestrand that you try to avoid use a template, I suggest to define operator= (it's not exactly what you looking for but may be useful)</p>\n\n<pre><code> Mat &amp;operator=(std::initialize_list&lt;int&gt; c);\n</code></pre>\n\n<p>So you can instance you class:</p>\n\n<pre><code> Mat A(2,2);\n A={1,2,3,4};\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 5158590, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcea160384d274a012fa104bbcd36c36?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Blinov", "link": "https://stackoverflow.com/users/5158590/maxim-blinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448482140, "creation_date": 1448478347, "question_id": 33924536, "link": "https://stackoverflow.com/questions/33924536/separating-stdinitializer-list-from-parenthesis-enclosed-arguments-in-ctor-inv", "title": "Separating std::initializer_list from parenthesis-enclosed arguments in Ctor invocation", "body": "<p>I am writing a simple library in which ease of use and stability is a priority. For example, in my <code>Mat</code> (Matrix) class, the current constructor signature is</p>\n\n<p><code>Mat&lt;ushort rows, ushort cols&gt; A(std::initializer_list&lt;double&gt;);</code></p>\n\n<p>And in practice is very easily readable and understandable:</p>\n\n<p><code>Mat&lt;2, 2&gt; A{1, 2, 3, 4};</code></p>\n\n<p>This seemed like a good idea at first as I could perform <code>static_assert</code> calls to check if an attempt was made to instantiate the Matrix with 0 for the column or row template parameter, but obviously means that I cannot dynamically instantiate Matrix objects.</p>\n\n<p>Ideally, I want to have something along the lines of </p>\n\n<p><code>Mat(uchar rows, uchar cols, std::initializer_list&lt;double&gt;)</code></p>\n\n<p><em>in such a way</em> that I could instantiate the said object by writing the following:</p>\n\n<p><code>Mat A(2, 2) {1, 2, 3, 4};</code></p>\n\n<p>I'm not sure how to go about this however, as the initializer list must be enclosed within the parenthesis argument list, which doesn't look nearly as clean:</p>\n\n<p><code>Mat A(2, 2, {1, 2, 3, 4});</code></p>\n"}, {"tags": ["c++", "file-io", "hex", "emulation", "hexdump"], "comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448479200, "post_id": 33924532, "comment_id": 55610470, "body": "Maybe the fact that character 0c is ASCII for form feed has something to do with your output"}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1448479356, "post_id": 33924532, "comment_id": 55610562, "body": "I was thinking the same but &#39;08&#39; is represents backspace however when &#39;08&#39; is read from the file, it still shows the correct output. Although you may still be right in which case I ask: How can I force &#39;0c&#39; to be printed? Source: <a href=\"https://en.wikipedia.org/wiki/Escape_sequences_in_C#Table_of_escape_sequences\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448479770, "post_id": 33924532, "comment_id": 55610775, "body": "Have you tryed to use inf.get(input) instead?"}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448480601, "post_id": 33924532, "comment_id": 55611206, "body": "Now it seems to be working although now the output looks like this: 6a 02 6b 0c 6c 3f 6d 0c ffffffa2 ffffffea ffffffda. It adds 6 &#39;f&#39;s in front of some hex values."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448484471, "post_id": 33924532, "comment_id": 55613137, "body": "It seems something happens when you add the extra space after 8 bytes. Have you edited the program someway differently from what posted?"}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448485561, "post_id": 33924532, "comment_id": 55613643, "body": "I had to change input from being a unsigned to char to get inf.get(input) to work. Other than that I didn&#39;t change anything."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448532276, "post_id": 33924532, "comment_id": 55631175, "body": "I&#39;ve edited my answer. Please, check it to see if it works."}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448592547, "post_id": 33924532, "comment_id": 55657983, "body": "@Bob__ I can&#39;t get it to work, I get the error: <code>no matching function for call to &#39;std::basic_ifstream&lt;char&gt;::get(char)&#39;</code>. No matter what I do, when I call &#39;inf.get(input)&#39;, input has to be char otherwise it won&#39;t work (maybe I&#39;m doing something wrong?)."}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1448597982, "post_id": 33924532, "comment_id": 55659018, "body": "@Bob__ I finally figured it out! I have to cast input to char&amp; instead of char so the code looks like this <code>inf.get((char&amp;)input)</code>. Which confuses since a char is an acceptable argument for the get function. I&#39;ll mark your answer as correct since your answer helped me the most in finding out the solution."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "edited": false, "score": 0, "creation_date": 1448481545, "post_id": 33925228, "comment_id": 55611655, "body": "When I make it unsigned I get the following error: no matching function for call to &#39;std::basic_ifstream&lt;char&gt;::get(unsigned char&amp;)&#39; I&#39;m not really sure how to fix it. EDIT: I read your answer wrong, I thought you wanted me to make input into an unsigned char. However making input into an unsigned int gives me a similar error."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1448480899, "creation_date": 1448480899, "answer_id": 33925228, "question_id": 33924532, "link": "https://stackoverflow.com/questions/33924532/reading-file-in-hex-gives-wrong-output-skips-some-hex-values/33925228#33925228", "title": "Reading file in hex gives wrong output (skips some hex values)", "body": "<p>You are using <code>(signed) int</code> as your variable.  When a <code>signed int</code> is negative and printed in hex, it will be preceded by one or more <code>F</code> digits.  </p>\n\n<p>I highly recommend using <code>unsigned int</code> for your values.  </p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "edited": false, "score": 0, "creation_date": 1448481637, "post_id": 33925324, "comment_id": 55611700, "body": "I tried casting input to an unsigned int but the &#39;f&#39;s are still being printed."}, {"owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "edited": false, "score": 0, "creation_date": 1448486096, "post_id": 33925324, "comment_id": 55613941, "body": "I think the problem may be that some hex values are read (or stored) as negative. I made a temporary solution using a stringstream to only print out the last 2 characters."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1448532195, "last_edit_date": 1448532195, "creation_date": 1448481332, "answer_id": 33925324, "question_id": 33924532, "link": "https://stackoverflow.com/questions/33924532/reading-file-in-hex-gives-wrong-output-skips-some-hex-values/33925324#33925324", "title": "Reading file in hex gives wrong output (skips some hex values)", "body": "<p>Operator>> reads formatted data (char in your case) from the input stream, so a char with value 12 (0c in hex) is considered as ASCII form feed and ignored ( as a value of 32 or 0x20 would be considered a space ).\nChar are also signed values and an hex value of a2 (which is decimal 162) would be stored as a negative value. Promoting that value to an int would keep the sign and due to complementation, when printed as unsigned you'll get the ffff's.</p>\n\n<p>keep the</p>\n\n<pre><code>unsigned char input;\n</code></pre>\n\n<p>then to read the values use</p>\n\n<pre><code>inf.get(static_cast&lt;char&gt;(input))\n</code></pre>\n\n<p>and to print</p>\n\n<pre><code>cout &lt;&lt; hex &lt;&lt; setw(2) &lt;&lt; setfill('0') &lt;&lt; static_cast&lt;unsigned int&gt;(input) &lt;&lt; \" \";\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 4857630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sXf4lN0_bMI/AAAAAAAAAAI/AAAAAAAAAFc/soYxWOqEJwk/photo.jpg?sz=128", "display_name": "Monsterjamp", "link": "https://stackoverflow.com/users/4857630/monsterjamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 33925324, "answer_count": 2, "score": 2, "last_activity_date": 1448598796, "creation_date": 1448478339, "last_edit_date": 1448598796, "question_id": 33924532, "link": "https://stackoverflow.com/questions/33924532/reading-file-in-hex-gives-wrong-output-skips-some-hex-values", "title": "Reading file in hex gives wrong output (skips some hex values)", "body": "<p>I'm trying to read/print out the hex instructions from the Chip8 version of Pong (which can be downloaded <a href=\"http://www.zophar.net/pdroms/chip8/chip-8-games-pack.html\" rel=\"nofollow\">here</a>).<br>\nHere is the code I am using to read in ROM:  </p>\n\n<pre><code>//Open ROM\nstring dir = \"Test/PONG\";\nifstream inf(dir.c_str(), ios::binary);\n\nunsigned char input;\nfor(int i = 0; inf &gt;&gt; input; i++) {\n    //Each loop prints 1 bytes\n    //New line every 16 bytes and print line number\n    if(i%16 == 0) {\n        cout &lt;&lt; endl;\n        cout &lt;&lt; setw(7) &lt;&lt; setfill('0') &lt;&lt; i &lt;&lt; \" \";\n    }\n    //2 extra spaces after 8 bytes\n    else if(i%8 == 0)\n        cout &lt;&lt; \"  \";\n    cout &lt;&lt; hex &lt;&lt; setw(2) &lt;&lt; setfill('0') &lt;&lt; (int)input &lt;&lt; \" \";\n}\ncout &lt;&lt; endl;\n</code></pre>\n\n<p>And here's part of the output:</p>\n\n<pre><code>0000000 6a 02 6b 6c 3f 6d a2 ea   da b6 dc d6 6e 00 22 d4  \n0000010 66 03 68 02 60 60 f0 15   f0 07 30 00 12 1a c7 17  \n0000020 77 08 69 ff a2 f0 d6 71   a2 ea da b6 dc d6 60 01  \n</code></pre>\n\n<p>...</p>\n\n<p>And here's the output that I believe is correct which I got from running the command \"hexdump -C PONG\" in the terminal:</p>\n\n<pre><code>00000000  6a 02 6b 0c 6c 3f 6d 0c  a2 ea da b6 dc d6 6e 00  \n00000010  22 d4 66 03 68 02 60 60  f0 15 f0 07 30 00 12 1a  \n00000020  c7 17 77 08 69 ff a2 f0  d6 71 a2 ea da b6 dc d6  \n</code></pre>\n\n<p>...</p>\n\n<p>On the first line of hex values, you can see the value '0c' twice in terminal but the output of the code skips printing '0c'. I'm not sure why my code is skipping '0c'. Am I reading the file improperly? Is the command \"hexdump\" providing the wrong output? What can I change about the way I read the file?  </p>\n\n<p>EDIT: Using inf.get(input) is able to read in '0c' however it also outputs some hex values differently.<br>\nFor example:</p>\n\n<pre><code>6a 02 6b 0c 6c 3f 6d 0c ffffffa2 ffffffea ffffffda ffffffb6 ffffffdc ffffffd6 6e 00 22 ffffffd4 66 03 68 02 60 60 fffffff0\n</code></pre>\n\n<p>EDIT 2: The 'f's are printed since some hex values are read as negative numbers. <strike>So I made an if statement that checks if input is negative, if it is negative I multiply it by -1 then print the hex value. </strike></p>\n\n<p>EDIT 3: I decided to use a stringstream to only print out the last 2 characters for negative hex values:</p>\n\n<pre><code>stringstream convert;\nif((int)input &lt; 0) {\n     convert &lt;&lt; hex &lt;&lt; (int)input;\n     cout &lt;&lt; convert.str().substr(6,8) &lt;&lt; \" \";\n     convert.str(\"\");\n}\n</code></pre>\n\n<p>EDIT 4: The hex '0c' represents the escape sequence '\\f' and is therefore ignored when printing. Using <code>inf.get(input)</code> instead of <code>inf &gt;&gt; input</code> stores characters into input as unformatted characters (I think). However the <code>get()</code> function can't take a <code>unsigned char</code> as an argument. So I have to cast input to <code>char&amp;</code>.<br>\nIn conclusion, I had to change <code>inf &gt;&gt; input</code> to <code>inf.get((char&amp;)input)</code>.  </p>\n\n<p>Source: <a href=\"http://www.cplusplus.com/reference/istream/istream/get/\" rel=\"nofollow\">http://www.cplusplus.com/reference/istream/istream/get/</a>   </p>\n"}, {"tags": ["c++", "inheritance", "priority-queue"], "comments": [{"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1448478678, "post_id": 33924499, "comment_id": 55610190, "body": "check -&gt; <a href=\"http://stackoverflow.com/questions/23997104/priority-queue-with-pointers-and-comparator-c\" title=\"priority queue with pointers and comparator c\">stackoverflow.com/questions/23997104/&hellip;</a>"}, {"owner": {"reputation": 515, "user_id": 2747970, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/jjPlM.png?s=128&g=1", "display_name": "Jameshobbs", "link": "https://stackoverflow.com/users/2747970/jameshobbs"}, "reply_to_user": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1448478905, "post_id": 33924499, "comment_id": 55610321, "body": "The AbsData operator is being called by the std lib priority_queue, so the comparison is being done correctly for the pointers. It is just not calling the child&#39;s compare function... Only sticking to the AbsData compare function."}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1448478990, "post_id": 33924499, "comment_id": 55610364, "body": "When you create your FFTData objects, how are you doing so?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1448479038, "post_id": 33924499, "comment_id": 55610398, "body": "@ChaseHenslee, doesn&#39;t matter. OP doesn&#39;t call right overload."}, {"owner": {"reputation": 3688, "user_id": 842793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcnr6.png?s=128&g=1", "display_name": "Chase Henslee", "link": "https://stackoverflow.com/users/842793/chase-henslee"}, "edited": false, "score": 0, "creation_date": 1448479580, "post_id": 33924499, "comment_id": 55610663, "body": "TIL how the function operator works."}], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 2747970, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/jjPlM.png?s=128&g=1", "display_name": "Jameshobbs", "link": "https://stackoverflow.com/users/2747970/jameshobbs"}, "edited": false, "score": 0, "creation_date": 1448479824, "post_id": 33924716, "comment_id": 55610798, "body": "I will see what I can do with smart pointers. I&#39;m more familiar with C and do not have much experience in C++. I read about them and they seem like a nice way to manage the memory and worry less about leaks. Thanks for the suggestion."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1448479158, "last_edit_date": 1448479158, "creation_date": 1448478975, "answer_id": 33924716, "question_id": 33924499, "link": "https://stackoverflow.com/questions/33924499/calling-virtual-compare-for-priority-in-c/33924716#33924716", "title": "Calling virtual compare for priority in C++", "body": "<p>You are calling <code>return this-&gt;compare(p1, p2);</code> from the instance of your AbsData comparator. It is not of the derived class!</p>\n\n<p>To fix the problem, call compare on one of the pointers passed to it. Better yet, do not mix comparator and data. Create an independent comparator class.</p>\n\n<p>You have another improvment pending in your code - do away with raw pointers, switch to the smart ones.</p>\n"}], "owner": {"reputation": 515, "user_id": 2747970, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/jjPlM.png?s=128&g=1", "display_name": "Jameshobbs", "link": "https://stackoverflow.com/users/2747970/jameshobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 33924716, "answer_count": 1, "score": 1, "last_activity_date": 1448479158, "creation_date": 1448478201, "question_id": 33924499, "link": "https://stackoverflow.com/questions/33924499/calling-virtual-compare-for-priority-in-c", "title": "Calling virtual compare for priority in C++", "body": "<p>I am trying to create an abstract class for representing data and have a compare function setup. My priority queue stores pointers to these abstract data classes.</p>\n\n<p>The abstract data class implements the () operator to do the initial comparison, but then calls a virtual compare function to do custom comparisons.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>class AbsData {\n\npublic:\n    AbsData() {\n        order = 0;\n    }\n\n    AbsData(int order) {\n        this-&gt;order = order;\n    }\n\n    virtual ~AbsData() {}\n\n    bool operator()(const AbsData* p1, const AbsData* p2) const {\n        if (p1 &amp;&amp; !p2)\n            return false;\n\n        if (!p1 &amp;&amp; p2)\n            return true;\n\n        if (!p1 &amp;&amp; !p2)\n            return true;\n\n        return this-&gt;compare(p1, p2);\n    }\n\n    virtual bool compare(const AbsData *p1, const AbsData *p2) const {\n        return p1-&gt;getOrder() &gt; p2-&gt;getOrder();\n    }\n\n    int getOrder() const\n    {\n        return order;\n    }\n\nprivate:\n    int order;\n\n};\n</code></pre>\n\n<p>I then use this abstract data class to represent other types of data:</p>\n\n<pre><code>class FFTData : public AbsData {\n\npublic:\n    FFTData(ImageStitching::FFTWImageTile * tile, int order) : AbsData(order)\n    {\n        this-&gt;tile = tile;\n    }\n\n    ImageStitching::FFTWImageTile * getTile() const {\n        return this-&gt;tile;\n    }\n\n\n    // Should override the virtual compare\n    bool compare(const AbsData *p1, const AbsData *p2) const {\n        return p1-&gt;getOrder() &lt; p2-&gt;getOrder();\n    }\n\nprivate:\n    ImageStitching::FFTWImageTile * tile;\n};\n</code></pre>\n\n<p>I define my priority queue like this:</p>\n\n<pre><code>std::priority_queue&lt;AbsData *, std::vector&lt;AbsData *&gt;, AbsData&gt; queue;\n</code></pre>\n\n<p>What am I missing from this setup? It will not call the FFTData's <code>compare</code> function.</p>\n\n<p>NOTE: this is just testing the functionality, so although at this time the FFTData compare function essentially should inverse the ordering of non NULL AbsData pointers, eventually it will add more functionality.</p>\n"}, {"tags": ["c++", "windows", "floating-point"], "comments": [{"owner": {"reputation": 2205, "user_id": 4851927, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/12dac37ac54f43197df820b2fc26fe6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Acharya", "link": "https://stackoverflow.com/users/4851927/ankit-acharya"}, "edited": false, "score": 0, "creation_date": 1448478111, "post_id": 33924390, "comment_id": 55609851, "body": "put your complete code please"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448478121, "post_id": 33924390, "comment_id": 55609856, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the behaviour you&#39;re concerned of."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1448478182, "post_id": 33924390, "comment_id": 55609900, "body": "<a href=\"http://cpp.sh/2l3z\" rel=\"nofollow noreferrer\">lnA - lnC is -0.756, not 2</a>."}, {"owner": {"reputation": 162, "user_id": 5347436, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/37a8ac846838c8b39e8b1b8ea49301bc?s=128&d=identicon&r=PG&f=1", "display_name": "MacGruber", "link": "https://stackoverflow.com/users/5347436/macgruber"}, "edited": false, "score": 0, "creation_date": 1448478444, "post_id": 33924390, "comment_id": 55610055, "body": "What is <code>lnA - lnC == 2</code>? You use it in a <code>if</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1448478465, "post_id": 33924390, "comment_id": 55610064, "body": "These questions need to be accompanied with information on <i>how</i> you&#39;re determining the value is <code>2</code>.  Maybe your output statement is wrong (<code>printf</code> with wrong format specifier, for example), maybe you&#39;re converting / casting incorrectly somewhere, maybe your debugger is off, etc  Just posting 3 lines of valid declarations and calculations doesn&#39;t give this information."}, {"owner": {"reputation": 2205, "user_id": 4851927, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/12dac37ac54f43197df820b2fc26fe6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Acharya", "link": "https://stackoverflow.com/users/4851927/ankit-acharya"}, "edited": false, "score": 0, "creation_date": 1448479029, "post_id": 33924390, "comment_id": 55610390, "body": "moreover the value of lnC is correct if u use <code>float</code> instead of <code>double</code> but <code>lnC-lnA != 2</code>"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448479734, "post_id": 33924390, "comment_id": 55610755, "body": "We need a COMPLETE program, that produces this exact result. My suspicion is that you have been mixing what you post here and an implementation using <code>float</code> instead of <code>double</code> - at least, that will reproduce exactly the results you are seeing."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448480002, "post_id": 33924390, "comment_id": 55610893, "body": "Double check that your &quot;big application&quot; is actually using <code>double</code>! (pun not intended!)"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1448480459, "post_id": 33924390, "comment_id": 55611126, "body": "And watch for <code>#define double float</code> or similar."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1448484698, "post_id": 33924390, "comment_id": 55613244, "body": "If you can&#39;t find a <code>#define</code> that explains the problem, the next troubleshooting step is to make a copy of your application and start tearing bits out.  For example, does it happen if you call the function in question directly from main(), or only later on?  What if you leave out all the modules other than the one containing the code?  What if you copy the code <i>into</i> the main function?  It can take time, but you should eventually be able to narrow down a specific cause by process of elimination."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1448484835, "post_id": 33924390, "comment_id": 55613299, "body": "Oh, and it might conceivably be related to the compiler settings rather than the code itself."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448491564, "post_id": 33924390, "comment_id": 55616442, "body": "There is a further possible explanation (but quite unlikely, IMO), and that is that the code is using x87 instructions, and somehow the FP control word has been set to &quot;round to 32-bit&quot; (either as a bug in the compiler or from some code in the overall project that is doing that)"}, {"owner": {"reputation": 609, "user_id": 3043937, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8952b81a481e8d38aaf139162c30e465?s=128&d=identicon&r=PG", "display_name": "CptanPanic", "link": "https://stackoverflow.com/users/3043937/cptanpanic"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448557733, "post_id": 33924390, "comment_id": 55647004, "body": "@MatsPetersson I am away from work for the holiday, but I will check on Monday.  But I think this is the most correct answer.  This application uses Direct3d/Ogre and by searching for this term, it seems that the DirectX by default sets the FP control word to force everything to be floats.  Looks like if I pass D3DCREATE_FPU_PRESERVE to DirectX it will leave this alone."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1448572198, "post_id": 33924390, "comment_id": 55652903, "body": "@CptanPanic: I added a reflection on FP control register values in my previous discussion on floating point values."}], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1448478672, "post_id": 33924590, "comment_id": 55610184, "body": "It doesn&#39;t help him/her unless you explain why doubles work in the place of a float."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1448478732, "post_id": 33924590, "comment_id": 55610222, "body": "I don&#39;t see any information where <code>float</code> is used? [other than the generic term &quot;floating point&quot;]"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1448478756, "post_id": 33924590, "comment_id": 55610241, "body": "And I said it wasn&#39;t an answer, so don&#39;t downvote it for that reason, please!"}, {"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1448478789, "post_id": 33924590, "comment_id": 55610261, "body": "You are absolutely correct.  I got my answers from two different issues crossed.  I apologize for that."}, {"owner": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 1, "creation_date": 1448478875, "post_id": 33924590, "comment_id": 55610305, "body": "If it&#39;s not an answer you could edit it and make it a community wiki answer to avoid downvotes."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1448480433, "post_id": 33924590, "comment_id": 55611115, "body": "@WaiHaLee: I have &quot;upgraded&quot; my non-answer into at least a bit more explanation of what I think is happening. We still don&#39;t have a reproducible example from the OP, so it&#39;s still a bit of a guess as to what is going on."}, {"owner": {"reputation": 609, "user_id": 3043937, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8952b81a481e8d38aaf139162c30e465?s=128&d=identicon&r=PG", "display_name": "CptanPanic", "link": "https://stackoverflow.com/users/3043937/cptanpanic"}, "edited": false, "score": 0, "creation_date": 1456172987, "post_id": 33924590, "comment_id": 58814547, "body": "Sorry for late response, but it turned out it was the x87 issue.  It turned out that ogre was setting round to 32bit flag in directX."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 5, "last_activity_date": 1448572148, "last_edit_date": 1448572148, "creation_date": 1448478520, "answer_id": 33924590, "question_id": 33924390, "link": "https://stackoverflow.com/questions/33924390/why-doesnt-adding-these-floats-add-up/33924590#33924590", "title": "Why doesn&#39;t adding these floats add up?", "body": "<p>After some investigation, I have come to the conclusion that your code is PROBABLY confusing <code>float</code> and <code>double</code> (or viewing the output of code that is different from what you actually posted). </p>\n\n<p>This works for me:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    double lnA = 1448481410.0;\n    double lnB = 0.75599998235702515;\n    double lnC = lnA + lnB;\n\n    std::cout &lt;&lt; std::fixed &lt;&lt; \"A:\" &lt;&lt; lnA &lt;&lt; \" B:\" &lt;&lt; lnB &lt;&lt; \" C:\" &lt;&lt; lnC &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>$ ./a.out\nA:1448481410.000000 B:0.756000 C:1448481410.756000\n</code></pre>\n\n<p>Now, as Soulsabr said in a comment, if we use <code>float</code> instead of <code>double</code>, the result is different:</p>\n\n<p>Only these lines changed:</p>\n\n<pre><code>float lnA = 1448481410.0;\nfloat lnB = 0.75599998235702515; \nfloat lnC = lnA + lnB;\n\n\n$ ./a.out\nA:1448481408.000000 B:0.756000 C:1448481408.000000\n</code></pre>\n\n<p>This is because the number of bits in a <code>float</code>, in typical systems, is 32 bits, which is split as 8 bits of exponent, one bit of sign, and 23 bits [plus one hidden] for the mantissa. so the value is <code>S * M * 2^E</code>, where <code>S</code> is the sign, <code>M</code> is the mantissa, and <code>E</code> is the exponent. The size of <code>M</code> is 23 bits, so it can be used to describe values up to about 8 Million precisely. We can shift the value using E, but no matter what value we pick, the smallest value that can change within the number is the next larger integer of x/8 million of the actual value. So 14 million becomes +/- 2 in the smallest value that \"makes a difference\". Adding 1 or less will have no effect at all.</p>\n\n<p>The <code>double</code> code \"works\" because a 64-bit double has a 53-bit mantissa, which allows the value to be +/- 1/2^53 of the actual value, which is a MUCH bigger value, and allows for more precise calculaton. But take a big enough and small enough value, and we get the same problem if they are far enough apart. It's just a matter of how floating point values work. You only have so many bits. There are \"big math\" libraries that allow greater number of bits, (\"infinite\", subject to memory being available), but of course, with larger values, the calculation speed goes down, and for most things 1/2^53 of the value is \"good enough\".</p>\n\n<p>Edit (based on comment by OP):</p>\n\n<p>A similar effect to the \"use float\" can happen if, when using x87 instructions, the FPU is set to \"round to 32 bits\", which means that even though the calculation is made with 64-bit floating point values, the intermediate results are rounded to 32-bit precision. Per comment above, this seems to be a particular software product that does some \"Magic\" to achieve this, and there is a simple workaround.</p>\n"}], "owner": {"reputation": 609, "user_id": 3043937, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8952b81a481e8d38aaf139162c30e465?s=128&d=identicon&r=PG", "display_name": "CptanPanic", "link": "https://stackoverflow.com/users/3043937/cptanpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "accepted_answer_id": 33924590, "answer_count": 1, "score": -4, "last_activity_date": 1448572148, "creation_date": 1448477770, "last_edit_date": 1448479700, "question_id": 33924390, "link": "https://stackoverflow.com/questions/33924390/why-doesnt-adding-these-floats-add-up", "title": "Why doesn&#39;t adding these floats add up?", "body": "<p>I know that these floating point questions are probably the most asked question here at stack overflow, but I can't find something that looks like mine.  In windows (visual studio) compiled as 32 bit if I do:</p>\n\n<pre><code>double lnA = 1448481410.0;\ndouble lnB = 0.75599998235702515;\ndouble lnC = lnA + lnB; \n</code></pre>\n\n<p>I get lnC = 1448481408.0000000.  I can understand a small difference because of the floating point representation, but I don't understand why lnA - lnC == 2?</p>\n\n<p>UPDATED: \nSo here is the actual output using Visual Studio 2010:  This is a MFC application which is why I am using TRACE.</p>\n\n<pre><code>double lnA = 1448481410.0;\ndouble lnB = 0.75599998235702515;\ndouble lnC = lnA + lnB;\n\nTRACE(\"A = %f B = %f C = %f A - C = %f\\n\",lnA, lnB, lnC, lnA - lnC);\n</code></pre>\n\n<p>A = 1448481410.000000 B = 0.756000 C = 1448481408.000000 A - C = 2.000000</p>\n\n<p>UPDATE2: In trying to make a minimal complete example such as below, I do not see the same problem.  Only when it is part of my large application.  Any ideas?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    double lnA = 1448481410.0;\n    double lnB = 0.75599998235702515;\n    double lnC = lnA + lnB;\n\n    std::cout &lt;&lt; \"A: \" &lt;&lt; lnA &lt;&lt; \"B: \" &lt;&lt; lnB  &lt;&lt; \"C: \" &lt;&lt; \"Diff: \" &lt;&lt; lnA - lnC &lt;&lt; std::endl;\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "coding-style", "rename"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1448477566, "post_id": 33924291, "comment_id": 55609529, "body": "I consider that as useless code obfuscation (you may put a comment <code>&#47;&#47;all_things are good now</code> instead)."}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 1, "creation_date": 1448478033, "post_id": 33924291, "comment_id": 55609808, "body": "Well, nobody stops you from doing this. However, if you care about performance you may want to reconsider. By doing that you are introducing some additional aliasing that the compiler may have hard time figuring out. As a consequence it may not be able to apply same optimizations."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1448478140, "post_id": 33924291, "comment_id": 55609870, "body": "@DieterL&#252;cking thanks. it may be the only solution. However, I was seeking a code-based way to do it. mmmm commenting is part of the syntax so maybe you are right :)"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 2, "creation_date": 1448478156, "post_id": 33924291, "comment_id": 55609885, "body": "I would just name it good_things to start with since that&#39;s what it&#39;s supposed to hold. Then you can add comments like <code>&#47;&#47; inserting all things</code> <code>&#47;&#47; filtering to remove bad things</code>."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1448478172, "post_id": 33924291, "comment_id": 55609890, "body": "@simpel01 I did not think about optimization ambiguity for the compiler.. good points thanks"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1448478349, "post_id": 33924291, "comment_id": 55610001, "body": "If the responsibility of a variable changes in the middle of a function, you&#39;re doing something wrong. Consider splitting the two parts into separate functions. (Single Responsibility Principle)"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1448478482, "post_id": 33924291, "comment_id": 55610073, "body": "@zenith it is something similar to Mohmmad Elghawi comment. Some kind of getting all objects then filtering them. After that, working with the filtered object but I see it hard to name it all_things while it was filtered. In same time, I can not name it good_things before filtering"}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 2, "creation_date": 1448479033, "post_id": 33924291, "comment_id": 55610392, "body": "I would do something like <code>good_things = filter(std::move(all_things), ...)</code> or similiar, where <code>filter</code> accepts this vector by value(so the caller can opt to copy or move). Or maybe something that accepts two iterators to the sequence being filtered, and one iterator to the beginning of where I want to place the results."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1448488741, "post_id": 33924291, "comment_id": 55615256, "body": "@C&#225;ssioRenan due to the absence of direct solution ,yours seems to be the best way. You may  past it as an answer so I can accept. Thanks"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1449014622, "post_id": 33924291, "comment_id": 55820523, "body": "You might be kind of prioritizing the things that won&#39;t be to your best interest in the future. When you come back to old functions years later, often the tripping points beyond the logic are the number of states/variables involved. Keeping track of which state is what involves a mental overhead. If you start introducing new ones solely for the documenting purpose of renaming things in the middle of a function, it might actually do more harm in the long run than good."}], "answers": [{"tags": [], "owner": {"reputation": 2360, "user_id": 4819357, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M-St3cpKcOs/AAAAAAAAAAI/AAAAAAAAAIg/HqtjEfI3EFE/photo.jpg?sz=128", "display_name": "AndreyS Scherbakov", "link": "https://stackoverflow.com/users/4819357/andreys-scherbakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1448552574, "creation_date": 1448552574, "answer_id": 33942429, "question_id": 33924291, "link": "https://stackoverflow.com/questions/33924291/rename-variables-in-the-middle-of-the-scope/33942429#33942429", "title": "rename variables in the middle of the scope", "body": "<p>I think if you definitely want to keep track of goodness bit it's better to write something like the following</p>\n\n<pre><code>template &lt;class T&gt; struct MaybeGood {\n   T obj;\n   bool good;\n   MaybeGood (const T&amp; o, bool g) : obj(o), good(g) {}\n   MaybeGood (bool g) : good(g) {}\n};\n............\nwhile(condition){\n    MaybeGood&lt;std::vector&lt;big_type&gt; &gt; obj(false);\n    //work with obj.obj to make it good\n    obj.good = true; //both for debugging and for the readability\n    //enjoy the object :-)\n}\n</code></pre>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1448552574, "creation_date": 1448477414, "last_edit_date": 1448478545, "question_id": 33924291, "link": "https://stackoverflow.com/questions/33924291/rename-variables-in-the-middle-of-the-scope", "title": "rename variables in the middle of the scope", "body": "<p>I want to change a variable name in middle of its scope for readability issue.</p>\n\n<p>For example:</p>\n\n<pre><code>while(condition){\n    std::vector&lt;big_type&gt; all_things;\n    //some operation like pop_back is happing on all_things\n    //now all_things contains just the good_things\n    auto&amp; good_things=all_things;\n    //do some operation on good_things which is actually on all_things\n}\n</code></pre>\n\n<p>I am doing this because I can not afford copying this vector.</p>\n\n<p>Is this the right way to do it? I am afraid now that my will to make it more readable resulted in less readability. Any other suggestions?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The problem is like : getting all objects then filtering them. After that, working with the filtered object but I see it hard to name it all_things while it was filtered. In same time, I can not name it good_things before filtering. So, I was seeking a way of variable renaming.</p>\n"}, {"tags": ["c++", "cuda", "char"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1448477689, "post_id": 33924275, "comment_id": 55609599, "body": "what is the reason? - you did not initialize it. Is there any way to avoid this? - Yes, initialize it."}, {"owner": {"reputation": 367, "user_id": 3629315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffeb67d23dc652db3504e108c30787fb?s=128&d=identicon&r=PG&f=1", "display_name": "MoDzeus", "link": "https://stackoverflow.com/users/3629315/modzeus"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448477715, "post_id": 33924275, "comment_id": 55609613, "body": "So is there a short way to initialize it with spaces?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448477765, "post_id": 33924275, "comment_id": 55609644, "body": "<a href=\"https://www.google.de/search?q=init+char+array&amp;ie=utf-8&amp;oe=utf-8&amp;gws_rd=cr&amp;ei=NgRWVsacJorSU4L0vJgL\" rel=\"nofollow noreferrer\">google.de/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1448477957, "post_id": 33924275, "comment_id": 55609771, "body": "<code>cout &lt;&lt; new char[50] &lt;&lt; endl;</code> Huh? You&#39;re after leaking memory the hard way?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1448478152, "post_id": 33924275, "comment_id": 55609881, "body": "@Schizo, Yes, use <code>std::string</code> and use the constructor taking a size and fill character."}], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1448525712, "post_id": 33924314, "comment_id": 55626994, "body": "@Downvoter Reason for downvote? Did I forget anything?"}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 2, "last_activity_date": 1448477971, "last_edit_date": 1448477971, "creation_date": 1448477467, "answer_id": 33924314, "question_id": 33924275, "link": "https://stackoverflow.com/questions/33924275/why-uninitialized-char-array-is-filled-with-random-symbols/33924314#33924314", "title": "Why uninitialized char array is filled with random symbols?", "body": "<blockquote>\n  <p><strong>what is the reason behind this output?</strong></p>\n</blockquote>\n\n<p>The values in an automatic variable are <strong>indeterminate</strong>. The standard doesn't specify it, so it might be spaces as you said, it might be random content.</p>\n\n<blockquote>\n  <p>[...] sometimes not fully filled and I left with junk [...]</p>\n</blockquote>\n\n<p>Strings in C are null-terminated, so any routine dedicated to printing a string will loop as long as no null byte is encountered. In uninitialized memory, this null byte occurs randomly (or not at all). These weird, trailing characters are a result of that.</p>\n\n<blockquote>\n  <p><strong>is there any way to avoid this?</strong></p>\n</blockquote>\n\n<p>Yes. Initialize it.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1448477606, "last_edit_date": 1448477606, "creation_date": 1448477478, "answer_id": 33924318, "question_id": 33924275, "link": "https://stackoverflow.com/questions/33924275/why-uninitialized-char-array-is-filled-with-random-symbols/33924318#33924318", "title": "Why uninitialized char array is filled with random symbols?", "body": "<p>No, there is no way to avoid it. C++ does not initialize automatic variables of built-in types (such as arrays of built-in types in your case) automatically, you need to initialize them yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 5597039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dcc1c47e995b8d65e5eb78e9ab6c67?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cano", "link": "https://stackoverflow.com/users/5597039/nick-cano"}, "is_accepted": false, "score": 1, "last_activity_date": 1448478766, "last_edit_date": 1448478766, "creation_date": 1448478535, "answer_id": 33924593, "question_id": 33924275, "link": "https://stackoverflow.com/questions/33924275/why-uninitialized-char-array-is-filled-with-random-symbols/33924593#33924593", "title": "Why uninitialized char array is filled with random symbols?", "body": "<p><em>(will assume x86 in this post)</em></p>\n\n<blockquote>\n  <p>what is the reason behind this output?</p>\n</blockquote>\n\n<p>Here's roughly what happens, in assembly, when you do <code>char x[50];</code>:</p>\n\n<pre><code>ADD ESP, 0x34 ; 52 bytes\n</code></pre>\n\n<p>Essentially, the stack is moved up by 0x34 bytes (must be divisible by 4). Then, that space on the stack <em>becomes</em> <code>x</code>. There's no cleaning, no changes or pushes or pops, just this space becoming <code>x</code>. Anything that was there before (abandoned params, return addresses, variables from previous function calls) will be in <code>x</code>.</p>\n\n<p>Here's roughly what happens when you do <code>new char[50]</code>:</p>\n\n<pre><code>1. Control gets passed to the allocator\n2. The allocator looks for any heap of sufficient size (readas: an already allocated but uncommited heap)\n3. If 2 fails, the allocator makes a new heap\n4. The allocator takes the heap (either the found or allocated one) and commits it\n5. The address of that heap is returned to your code where it is used as a char*\n</code></pre>\n\n<p>The same as with a stack, you get whatever data is there. Some programs or systems may have allocators that zero out heaps when they are allocated or committed, where others may only zero when allocated but not committed, and some may not zero at all. Depending on the allocator, you may get clean memory or you may get re-used and dirty memory. This is why the values here can be non-zero and aren't predictable.</p>\n\n<blockquote>\n  <p>is there any way to avoid this?</p>\n</blockquote>\n\n<p>In the case of heap memory, you can overload the <code>new</code> and <code>delete</code> operators in C++ and always zero newly allocated memory. You can see examples of overloading these operators <a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow\">here</a>. As for memory on the stack, you just have to live with zeroing it out every time.</p>\n\n<pre><code>ZeroMemory(myArray, sizeof(myarray));\n</code></pre>\n\n<p>Alternatively, for both methods, you could stay away from naked arrays and use std::vector or other wrappers that take care of initialization for you. You'll still want to make sure to initialize integers and other numeric or pointer data-types, though.</p>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 3629315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffeb67d23dc652db3504e108c30787fb?s=128&d=identicon&r=PG&f=1", "display_name": "MoDzeus", "link": "https://stackoverflow.com/users/3629315/modzeus"}, "edited": false, "score": 0, "creation_date": 1448489504, "post_id": 33927165, "comment_id": 55615603, "body": "I understand all the fuss about memory leakage, but that was just demonstration. :) I should&#39;ve never posted that line with <code>new</code> operator..."}], "tags": [], "owner": {"reputation": 44, "user_id": 5587116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38831e401c063170856df08692ad9655?s=128&d=identicon&r=PG&f=1", "display_name": "MikeL", "link": "https://stackoverflow.com/users/5587116/mikel"}, "is_accepted": false, "score": 0, "last_activity_date": 1448488868, "creation_date": 1448488868, "answer_id": 33927165, "question_id": 33924275, "link": "https://stackoverflow.com/questions/33924275/why-uninitialized-char-array-is-filled-with-random-symbols/33927165#33927165", "title": "Why uninitialized char array is filled with random symbols?", "body": "<p>Why are you having issues with this code?</p>\n\n<pre><code>char x[50];\ncout &lt;&lt; new char[50] &lt;&lt; endl;\ncout &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n\n<p>You're leaking memory with the 'new char[50] without a corresponding delete.</p>\n\n<p>Also, uninitialized memory is undefined as others have said and in most cases you get garbage within that memory block.  A better method is to initialize it:</p>\n\n<pre><code>char x[50] = {};\nchar* y = new char[50]();\n</code></pre>\n\n<p>Then just remember to call delete on y later to free the memory.  Yes, the OS will do it for you, but this is never a way to write good programs though.</p>\n"}], "owner": {"reputation": 367, "user_id": 3629315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffeb67d23dc652db3504e108c30787fb?s=128&d=identicon&r=PG&f=1", "display_name": "MoDzeus", "link": "https://stackoverflow.com/users/3629315/modzeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 0, "accepted_answer_id": 33924314, "answer_count": 4, "score": -4, "last_activity_date": 1448532679, "creation_date": 1448477373, "last_edit_date": 1448532679, "question_id": 33924275, "link": "https://stackoverflow.com/questions/33924275/why-uninitialized-char-array-is-filled-with-random-symbols", "title": "Why uninitialized char array is filled with random symbols?", "body": "<p>I have a this fragment of code in <strong>C++</strong>:</p>\n\n<pre><code>char x[50];\ncout &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n\n<p>which outputs some random symbols as seen here:\n<a href=\"https://i.stack.imgur.com/bnHK4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bnHK4.png\" alt=\"enter image description here\"></a></p>\n\n<p>So my first question: what is the reason behind this output? Shouldn't it be spaces or at least same symbols?</p>\n\n<p>The reason I am concerned with this is that I am writing program in CUDA and I'm doing some character manipulations inside <code>__global__</code> function, hence the use of <code>string</code> gives a \"calling host function is not allowed\" error.\nBut if I am using \"big enough\" char array (each chunk of text I am operating with differs in size, meaning that it will not always utilize char array fully) it's sometimes not fully filled and I left with junk like in the picture below hanging at the end of text:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yzayX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzayX.png\" alt=\"enter image description here\"></a></p>\n\n<p>So my second question: is there any way to avoid this?</p>\n"}, {"tags": ["c++", "add", "unsigned-long-long-int", "long-long"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1448477363, "post_id": 33924189, "comment_id": 55609414, "body": "You have a simple case of overflow here. Those numvers do not fit 64bit integers."}, {"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448477756, "post_id": 33924189, "comment_id": 55609638, "body": "@SergeyA okay. I think that is my mistake. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "edited": false, "score": 0, "creation_date": 1448477734, "post_id": 33924326, "comment_id": 55609625, "body": "Thanks Chris. I think that is my mistake. Thank you :)"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 2, "last_activity_date": 1448477971, "last_edit_date": 1448477971, "creation_date": 1448477507, "answer_id": 33924326, "question_id": 33924189, "link": "https://stackoverflow.com/questions/33924189/unsigned-long-long-wrong-given-value-after-add/33924326#33924326", "title": "Unsigned long long wrong given value after add", "body": "<p>All unsigned arithmetic in C (and C++) occurs modulo 2<sup>k</sup> for some k.  In your case, you are getting the result modulo 2<sup>64</sup>, implying that unsigned long long is 64 bits on your platform.</p>\n\n<p>If you want to do arithmetic with integers larger than the largest supported type on your platform, you'll need to use a multiprecision library such as <a href=\"https://gmplib.org/\" rel=\"nofollow\">GMP</a></p>\n"}], "owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 33924326, "answer_count": 1, "score": 0, "last_activity_date": 1448477971, "creation_date": 1448477068, "question_id": 33924189, "link": "https://stackoverflow.com/questions/33924189/unsigned-long-long-wrong-given-value-after-add", "title": "Unsigned long long wrong given value after add", "body": "<p>I have two strings to add. Strings is HEX values. I convert strings to long long, add and after I back to string. But this operation no working good.</p>\n\n<p>Code:</p>\n\n<pre><code>unsigned long long FirstNum = std::strtoull(FirstString.c_str(), NULL, 16);\nunsigned long long SecondNum = std::strtoull(SecondString.c_str(), NULL, 16);\nunsigned long long Num = FirstNum + SecondNum;\nstd::cout &lt;&lt; \"  \" &lt;&lt; FirstNum &lt;&lt; \"\\n+ \" &lt;&lt; SecondNum &lt;&lt; \"\\n= \" &lt;&lt; Num &lt;&lt; \"\\n\\n\";\n</code></pre>\n\n<p>I received</p>\n\n<pre><code>  13285923899203179534\n+ 8063907133566997305\n= 2903086959060625223\n</code></pre>\n\n<p>Anyone can explain me this magic? How can I fix it?</p>\n\n<p>Back to hex value by</p>\n\n<pre><code>std::stringstream Stream;\nStream &lt;&lt; std::hex &lt;&lt; Num;\nreturn Stream.str();\n</code></pre>\n"}, {"tags": ["c++", "matlab", "simulink", "mex"], "comments": [{"owner": {"reputation": 4299, "user_id": 156525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b540a59cb2b0902d0410fa84f437379b?s=128&d=identicon&r=PG", "display_name": "Navan", "link": "https://stackoverflow.com/users/156525/navan"}, "edited": false, "score": 0, "creation_date": 1448900824, "post_id": 33924144, "comment_id": 55762134, "body": "How to you use std::vector in your code?"}], "owner": {"reputation": 11, "user_id": 5605516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55729c98f18d1d0b2e35464778982420?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyK", "link": "https://stackoverflow.com/users/5605516/johnnyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1448640014, "creation_date": 1448476865, "last_edit_date": 1448640014, "question_id": 33924144, "link": "https://stackoverflow.com/questions/33924144/lnk2019-unresolved-external-symbol-when-using-vector", "title": "LNK2019 unresolved external symbol when using vector", "body": "<p>I am creating an s-function for MATLAB/Simulink that is coded in C++. When I attempt to generate the executable from MATLAB using the mex command I get a linker error:</p>\n\n<p>heatTran1D_convWalls_sfun.obj : error LNK2019: unresolved external symbol \"class std::vector > ...</p>\n\n<p>The Microsoft C++ 2010 compiler is being used. I am using the vector class within the code in numerous places. The following lines are included at the top of my source file:</p>\n\n<pre><code>#define S_FUNCTION_NAME  heatTran1D_convWalls_sfun\n#define S_FUNCTION_LEVEL 2\n#include \"simstruc.h\"\n#include &lt;math.h&gt;\n#include &lt;vector&gt;\nusing namespace std;\n</code></pre>\n\n<p>Is it correct that this error indicates that the library containing the vector class cannot be found. If so what library contains the vector class in it and where might I find it on my computer so that I can provide MATLAB with it's location in the mex command. If this is not the issue please let me know your thoughts on what might be the problem and how to resolve it.</p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["c++", "mysql", "qtableview"], "comments": [{"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1448485986, "post_id": 33924029, "comment_id": 55613875, "body": "I think the conn-&gt;connClose() should be removed"}, {"owner": {"reputation": 81, "user_id": 4618902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rxUCWPY-QfU/AAAAAAAAAAI/AAAAAAAAHm0/oohTkkXba6M/photo.jpg?sz=128", "display_name": "Luis Gama", "link": "https://stackoverflow.com/users/4618902/luis-gama"}, "reply_to_user": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1448491531, "post_id": 33924029, "comment_id": 55616423, "body": "Yes!!!!! you are 100%  right."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1448546997, "post_id": 33924029, "comment_id": 55640474, "body": "I have posted the answer so if other people will try to find the solution they will find it. please accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "is_accepted": true, "score": 1, "last_activity_date": 1448546943, "creation_date": 1448546943, "answer_id": 33940752, "question_id": 33924029, "link": "https://stackoverflow.com/questions/33924029/can%c2%b4t-display-data-qsqlquerymodel-in-a-c-qtableview-from-mysql-database/33940752#33940752", "title": "Can&#180;t display data QSqlQueryModel in a C++ QTableView from MySql Database", "body": "<p>This piece of code that you have put there to debug is redundant and in partcular the conn->connClose() il closing the DB before the tableView could use it to fetch the data. </p>\n\n<pre><code>while(qry-&gt;next()){\n    QString usuario = qry-&gt;value(0).toString();\n    qDebug() &lt;&lt; \"id:\" &lt;&lt; usuario;\n}\nconn.connClose(); &lt;---- remove this line!!!\nqDebug() &lt;&lt; (modal-&gt;rowCount());\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4618902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rxUCWPY-QfU/AAAAAAAAAAI/AAAAAAAAHm0/oohTkkXba6M/photo.jpg?sz=128", "display_name": "Luis Gama", "link": "https://stackoverflow.com/users/4618902/luis-gama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 33940752, "answer_count": 1, "score": 0, "last_activity_date": 1448546943, "creation_date": 1448476468, "last_edit_date": 1448476620, "question_id": 33924029, "link": "https://stackoverflow.com/questions/33924029/can%c2%b4t-display-data-qsqlquerymodel-in-a-c-qtableview-from-mysql-database", "title": "Can&#180;t display data QSqlQueryModel in a C++ QTableView from MySql Database", "body": "<p>I don\u00b4t know what\u00b4s happening with this exemple.</p>\n\n<p>My connection is ok.</p>\n\n<p>The query results is ok ( see application output below )...but my qtableview is empty.</p>\n\n<p><a href=\"http://i.stack.imgur.com/YaEh5.jpg\" rel=\"nofollow\">results screen with 9 empty lines</a></p>\n\n<p>The application output shows 9 lines and these lines are the correct results from my table. The rowCount = 9...but the tableview is completely empty.</p>\n\n<pre><code>#include \"pedidos.h\"\n#include \"ui_pedidos.h\"\n\nPedidos::Pedidos(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::Pedidos)\n{\n    ui-&gt;setupUi(this);\n\n    Login conn;\n\n    if(!conn.connOpen())\n       ui-&gt;label_pedidos_conn-&gt;setText(\"Falha na conex\u00e3o ao Database\");\n    else\n       ui-&gt;label_pedidos_conn-&gt;setText(\"Database Ok\");\n\n}\n\nPedidos::~Pedidos()\n{\n    delete ui;\n}\n\nvoid Pedidos::on_pushButton_load_pedidos_clicked()\n{\n    Login conn;\n    QSqlQueryModel *modal=new QSqlQueryModel();\n    QTableView *view = new QTableView;\n\n    conn.connOpen();\n\n    QSqlQuery *qry=new QSqlQuery(conn.mydb);\n\n    qry-&gt;prepare(\"SELECT id_pedido,id_user FROM pedido WHERE status=0\");\n    qry-&gt;exec();\n    modal-&gt;setQuery(*qry);\n\n    modal-&gt;setHeaderData(0, Qt::Horizontal, \"Pedido\");\n    modal-&gt;setHeaderData(1, Qt::Horizontal, \"Usu\u00e1rio\");\n\n    ui-&gt;tableView_pedidos-&gt;setModel(modal); // empty\n\n    view-&gt;setModel(modal);  // second window\n    view-&gt;show();           // doesn\u00b4t work too ( empty )\n\n    while(qry-&gt;next()){\n\n        QString usuario = qry-&gt;value(0).toString();\n        qDebug() &lt;&lt; \"id:\" &lt;&lt; usuario;\n    }\n\n    conn.connClose();\n    qDebug() &lt;&lt; (modal-&gt;rowCount());\n\n}\n</code></pre>\n\n<p>My Application Output is here:</p>\n\n<pre><code>QSqlDatabasePrivate::addDatabase: duplicate connection name 'qt_sql_default_connection', old connection removed.\nDatabase Ok\nname: \"124\"\nname: \"125\"\nname: \"126\"\nname: \"127\"\nname: \"128\"\nname: \"129\"\nname: \"131\"\nname: \"225\"\nname: \"308\"\nQSqlDatabasePrivate::removeDatabase: connection 'qt_sql_default_connection' is still in use, all queries will cease to work.\n9\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "computer-vision", "camera-calibration"], "comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1448476636, "post_id": 33924017, "comment_id": 55609008, "body": "Yes. Generally the top-left first corner of the checkerboard is set to be (0,0,0) in XYZ."}, {"owner": {"reputation": 43, "user_id": 4374856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6787be3aecf49e6a242e9f6f2f0dfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Ragesam", "link": "https://stackoverflow.com/users/4374856/ragesam"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1449825480, "post_id": 33924017, "comment_id": 56183905, "body": "@AnderBiguri , Sorry for the late reply had been busy working on harris corner detection algorithm, I get what you mean but i&#39;m stuck with the part where I have the harris corners with subpixel accuracy with a bit of false corners, what I am doing is defining a 400*250 matrix with values of 255 at (0,0) ,(50,50), (0,50), (50,0).... and so on as my world co-ordinates (X,Y,Z=0) and using normalized cross correlation to find point correspondences by using the self defined matrix as template and the one generated by the harris corner algorithm as the Image(720 x 1280)...is my logic wrong here?"}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1449825726, "post_id": 33924017, "comment_id": 56184051, "body": "The code is too complex to be able to understand in a single comment."}, {"owner": {"reputation": 43, "user_id": 4374856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6787be3aecf49e6a242e9f6f2f0dfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Ragesam", "link": "https://stackoverflow.com/users/4374856/ragesam"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1450023238, "post_id": 33924017, "comment_id": 56247962, "body": "@AnderBiguri , I have edited the question and provided the code snippet for calculating pt. correspondences based on normalized cross correlation calculations, I hope this can be of some help. Thanks :)"}], "owner": {"reputation": 43, "user_id": 4374856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6787be3aecf49e6a242e9f6f2f0dfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Ragesam", "link": "https://stackoverflow.com/users/4374856/ragesam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449829758, "creation_date": 1448476426, "last_edit_date": 1449829758, "question_id": 33924017, "link": "https://stackoverflow.com/questions/33924017/3d-2d-point-correspondences-for-homography-matrix-computation-in-camera-calibrat", "title": "3D-2D Point correspondences for Homography matrix computation in camera calibration", "body": "<p>I have been trying to understand the concepts behind camera calibration but have been stuck for a while now. I plan on implementing Zhang's camera calibration algorithm (without using Opencv library functions). Now as per my understanding in order to compute camera intrinsic parameters I need to compute the Homography matrix 'H' (H = K [R | t]) which requires 3D-2D point correspondences for it's computation (since each pt. correspondence results in 2 eqs. we would need at least 6 for the 12 unknowns) followed by SVD of the matrix in order to get the camera matrix 'K'. Now the part which has been hard for me is to get these 3D-2D pt. correspondences. Please correct me if i am wrong here but does it mean I need to find the corners using Harris corner detection algorithm leading to the chessboard corners in pixel coordinates and I set the origin (0,0) for the 3D physical point as some point on the chessboard pattern leading to a pt. correspondence where I have let's say some (x',y') as image coordinates in pixels and (X,Y) as physical coordinates with for example the origin at the center of the board?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Below is a code snippet for calculating normalized cross correlation in order to get point correspondences between image corner coordinates (found by harris corner detection algo.) and self defined world corner coordinates.</p>\n\n<pre><code>void ncc(Mat &amp;img, vector&lt; vector&lt;Point3f&gt; &gt;phy_corners, vector&lt; vector&lt;Point2f&gt; &gt;img_corners)\n{\n\n    float ncc       = 0;\n    Size window;\n    window.width    = 5;\n    window.height   = 5;\n    int pad_y       = (window.width - 1)  + img.cols;\n    int pad_x       = (window.height - 1) + img.rows;\n    int idx_y       = (window.height - 1) / 2;\n    int idx_x       = (window.width - 1)  / 2;\n\n    Mat T           = Mat::zeros(5*50+2, 8*50+2 , CV_32FC1);\n    Mat I           = Mat::zeros(pad_x, pad_y, CV_32FC1);\n    Mat NCC         = Mat::zeros(img.size(), CV_32FC1);\n\n    double numer    = 0.0, denom = 0.0;\n    double _I       = 0.0, _T = 0.0;\n\n    // Defining an image with original world corners in world coordinates \"This image will be used as a template for Norm-cross-correl.\"\n    for(int i = 0; i &lt; phy_corners[0].size(); ++i){\n            T.at&lt;float&gt;(phy_corners[0][i].x , phy_corners[0][i].y) = 255;\n    }\n\n    // Defining an image with Harris detected corners in image coordinates \"This image will be used for Norm-cross-correl.\"\n    for(int i = 0; i &lt; img_corners[0].size(); ++i){\n            I.at&lt;float&gt;(img_corners[0][i].y , img_corners[0][i].x) = 255;\n    }\n\n\n    /******** NCC-COMPUTATION *******/\n\n    for (int i = idx_y; i &lt; (img.rows - idx_y); ++i){\n            for (int j = idx_x ; j &lt; (img.cols - idx_x); ++j){\n\n                    for (int k = -idx_y; k &lt;= idx_y; ++k){\n                            for (int l = -idx_x; l &lt;= idx_x; ++l){\n\n                                    _I += I.at&lt;float&gt;(i+k, j+l);\n                                    _T += T.at&lt;float&gt;(idx_y+k, idx_x+l);\n\n                            }\n                    }\n\n                    _I /= (window.width * window.height);\n                    _T /= (window.width * window.height);\n\n                    for (int k = -idx_y; k &lt;= idx_y; ++k){\n                            for (int l = -idx_x; l &lt;= idx_x; ++l){\n\n                                    numer += (I.at&lt;float&gt;(i+k,j+l) - _I)*(T.at&lt;float&gt;(idx_y + k,idx_x + l) - _T);\n\n                                    denom += pow((I.at&lt;float&gt;(i+k,j+l) - _I), 2)*pow((T.at&lt;float&gt;(idx_y + k,idx_x + l) - _T),2);\n                                    denom = sqrt(denom);\n                            }\n                    }\n\n                    NCC.at&lt;double&gt;(i-idx_y,j-idx_x) = (numer) / (denom) ;\n\n            }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "clang-static-analyzer"], "answers": [{"tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 1, "last_activity_date": 1448476849, "creation_date": 1448476849, "answer_id": 33924139, "question_id": 33923993, "link": "https://stackoverflow.com/questions/33923993/whats-a-garbage-value-for-clang-check/33924139#33924139", "title": "What&#39;s a garbage value for clang-check", "body": "<p>This looks like <a href=\"https://llvm.org/bugs/show_bug.cgi?id=22833\" rel=\"nofollow\">bug 22833</a>, which is fixed in trunk:</p>\n\n<blockquote>\n  <p>Giving a lambda capture parameter an explicit value (new feature in C++14) causes the analyzer to believe that value is undefined.</p>\n</blockquote>\n\n<p>As a workaround, you could try hoisting the init-capture outside the lambda:</p>\n\n<pre><code>  auto const size = dft.size();\n  auto it = find_if(begin(dft), end(dft),\n                    [size](const std::complex&lt;double&gt; &amp;a) {\n    return (std::abs(a) / size) &gt; 10;\n  });\n</code></pre>\n"}], "owner": {"reputation": 658, "user_id": 4161244, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/80ba8dd588e2b3d9cd382b33b7759615?s=128&d=identicon&r=PG&f=1", "display_name": "Brahim", "link": "https://stackoverflow.com/users/4161244/brahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 33924139, "answer_count": 1, "score": 4, "last_activity_date": 1448477062, "creation_date": 1448476328, "last_edit_date": 1448477062, "question_id": 33923993, "link": "https://stackoverflow.com/questions/33923993/whats-a-garbage-value-for-clang-check", "title": "What&#39;s a garbage value for clang-check", "body": "<p>I have got the following warning:</p>\n\n<pre><code>test.cpp:14:25: warning: The right operand of '/' is a garbage value\n    return (std::abs(a) / size) &gt; 10;\n                        ^ ~~~~\n</code></pre>\n\n<p>for this piece of code:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;complex&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\ndouble\npitchDetect(const std::vector&lt;std::complex&lt;double&gt;&gt; &amp;dft,\n                              unsigned int samplingRate) noexcept {\n  if (dft.empty())\n    return 0.0;\n  auto it = find_if(begin(dft), end(dft),\n                    [size = dft.size()](const std::complex&lt;double&gt; &amp;a) {\n    return (std::abs(a) / size) &gt; 10;\n  });\n  return 0.0;\n}\n</code></pre>\n\n<p>I don't understand what the problem is!</p>\n"}, {"tags": ["c++", "c++11", "compiler-errors"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1448476348, "post_id": 33923896, "comment_id": 55608862, "body": "Side note: std::pair is quite useless here, you should make a <code>struct Show { Time start, Time finish };</code>"}, {"owner": {"reputation": 338, "user_id": 1053783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc3cd67dcdc3c9929265ad059b3811c?s=128&d=identicon&r=PG", "display_name": "Arkady", "link": "https://stackoverflow.com/users/1053783/arkady"}, "edited": false, "score": 0, "creation_date": 1448476678, "post_id": 33923896, "comment_id": 55609033, "body": "@DieterL&#252;cking Well, that does actually fix the error (and it compiles once I return <code>main()</code> and <code>operator&lt;(Show...)</code> to the source code). But do you (or anyone else) know why? Thanks muchly,"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 1, "creation_date": 1448488839, "post_id": 33923896, "comment_id": 55615310, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/adl#Notes\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/adl#Notes</a> <code>Name lookup rules make it impractical to declare operators in global or user-defined namespace that operate on types from the std namespace</code>  with more detail in <a href=\"http://en.cppreference.com/w/cpp/language/dependent_name#Lookup_rules\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/dependent_name#Lookup_rul&zwnj;&#8203;es</a>"}, {"owner": {"reputation": 338, "user_id": 1053783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc3cd67dcdc3c9929265ad059b3811c?s=128&d=identicon&r=PG", "display_name": "Arkady", "link": "https://stackoverflow.com/users/1053783/arkady"}, "reply_to_user": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1448494633, "post_id": 33923896, "comment_id": 55617590, "body": "@Cubbi Thanks! That was really useful. Any chance you could copy that comment into an actual answer, so I can give you credit for the solution?"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 1, "creation_date": 1448503653, "post_id": 33923896, "comment_id": 55619787, "body": "There&#39;s been a lot of duplicates of this question on SO, although they are hard to search for since it&#39;s a different overloaded operator each time. I&#39;ll pick one that was already used to mark other questions as duplicates."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1448476896, "creation_date": 1448476896, "answer_id": 33924156, "question_id": 33923896, "link": "https://stackoverflow.com/questions/33923896/error-c2679-using-a-custom-extraction-operator/33924156#33924156", "title": "Error C2679 using a custom extraction operator", "body": "<p>Looks like ADL lookup is failing you in this case. You are relying on ADL lookup to find your overload for <code>istream</code> and <code>pair</code> (which is not in namespace std::), and it can not be found. Likely has to do with <code>istream_iterator</code> templates (not saying much, I know!). It all works well when using <code>stream &gt;&gt; show;</code> instead of istream_iterator algorithm - so you probably can do a simple loop if you are not fixed on using iterator + copy.</p>\n\n<p>One dreaded way of fixing it would be to define <code>operator &gt;&gt;</code> in namespace <code>std</code>, but this technique is frowned upon for a good reason. There should be other way to help ADL here, but I am not sure how to do this.</p>\n"}], "owner": {"reputation": 338, "user_id": 1053783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc3cd67dcdc3c9929265ad059b3811c?s=128&d=identicon&r=PG", "display_name": "Arkady", "link": "https://stackoverflow.com/users/1053783/arkady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "closed_date": 1448503663, "answer_count": 1, "score": 0, "last_activity_date": 1448476896, "creation_date": 1448476003, "question_id": 33923896, "link": "https://stackoverflow.com/questions/33923896/error-c2679-using-a-custom-extraction-operator", "closed_reason": "Duplicate", "title": "Error C2679 using a custom extraction operator", "body": "<p>I have a custom type, currently placeheld by a std::pair. (It will have more data on it before I'm through...) and am reading it in from a file.</p>\n\n<p>I have cut my code down to:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\n#include &lt;istream&gt;\n\nusing namespace std;\n\n// Show duration isn't an issue, so I can treat all times as integers in the range 0-2400.\nusing Time = uint16_t;\nusing Show = pair&lt;Time,Time&gt;; // Placeholder type, for now. This will probably end up as some sort of a std::tuple.\n\n// Build a Show object from its component pieces.\ninline Show make_show(Time start, Time finish)\n{\n    return make_pair(start, finish);\n}\n\ninline Time&amp; start(Show&amp; show)\n{\n    return show.first;\n}\n\ninline Time&amp; finish(Show&amp; show)\n{\n    return show.second;\n}\n\n// Get a Show object from a stream.\ninline istream&amp; operator&gt;&gt;(istream&amp; is, Show&amp; show)\n{\n    is &gt;&gt; start(show) &gt;&gt; finish(show);\n    return is;\n}\n\n// Get a vector (sorted by start time) of all the shows in an EOF terminated stream\nvector&lt;Show&gt; readShows(istream&amp; stream)\n{\n    auto result = vector&lt;Show&gt;{};\n    // main.cpp, line 58 is the next line.\n    copy(istream_iterator&lt;Show&gt;(stream), istream_iterator&lt;Show&gt;(), back_inserter(result));\n    sort(begin(result), end(result));\n    return result;\n}\n</code></pre>\n\n<p>However, when I compile this I get an error. In essence the error is complaining that when it tries to create an <code>istream_iterator&lt;Show&gt;</code> object it cannot find a suitable <code>operator&gt;&gt;</code>: \"<code>error C2679: binary '&gt;&gt;' : no operator found which takes a right-hand operand of type 'Show' (or there is no acceptable conversion)</code>\".</p>\n\n<p>This is confusing me, since I <em>do</em> have a function with the signature <code>istream&amp; operator&gt;&gt;(istream&amp; is, Show&amp; show)</code> declared higher up in the program.</p>\n\n<p>This error can be reproduced by compiling with the default Windows compiler in Visual Studio 2013, or by compiling under Clang (which gives \"<code>error : invalid operands to binary expression ('istream_type' (aka 'basic_istream&lt;char, std::char_traits&lt;char&gt; &gt;') and 'std::pair&lt;Time, Time&gt;')</code>\" - basically the same error with different wording.)</p>\n\n<p>Any help would be welcome.</p>\n\n<p>The full error is given here:</p>\n\n<pre><code>1&gt;------ Build started: Project: ScratchSpace, Configuration: Debug Win32 ------\n1&gt;  main.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\iterator(256): error C2679: binary '&gt;&gt;' : no operator found which takes a right-hand operand of type 'Show' (or there is no acceptable conversion)\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(485): could be 'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(std::basic_streambuf&lt;char,std::char_traits&lt;char&gt;&gt; *)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(466): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(void *&amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(448): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(long double &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(430): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(double &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(411): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(float &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(392): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(unsigned __int64 &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(373): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(__int64 &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(353): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(unsigned long &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(335): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(long &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(317): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(unsigned int &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(291): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(int &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(272): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(unsigned short &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(237): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(short &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(218): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(std::_Bool &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(211): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(std::ios_base &amp;(__cdecl *)(std::ios_base &amp;))'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(204): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(std::basic_ios&lt;char,std::char_traits&lt;char&gt;&gt; &amp;(__cdecl *)(std::basic_ios&lt;char,std::char_traits&lt;char&gt;&gt; &amp;))'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(198): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &gt;&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;(__cdecl *)(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;))'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(1103): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &gt;&gt;&lt;char,std::char_traits&lt;char&gt;,_Ty&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;&amp;,_Ty &amp;)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=Show\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(1093): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &gt;&gt;&lt;std::char_traits&lt;char&gt;&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,unsigned char &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(1086): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &gt;&gt;&lt;std::char_traits&lt;char&gt;&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,unsigned char *)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(1079): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &gt;&gt;&lt;std::char_traits&lt;char&gt;&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,signed char &amp;)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\istream(1072): or       'std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::operator &gt;&gt;&lt;std::char_traits&lt;char&gt;&gt;(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,signed char *)'\n1&gt;          while trying to match the argument list '(std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;, Show)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\iterator(255) : while compiling class template member function 'void std::istream_iterator&lt;Show,char,std::char_traits&lt;char&gt;,ptrdiff_t&gt;::_Getval(void)'\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\iterator(222) : see reference to function template instantiation 'void std::istream_iterator&lt;Show,char,std::char_traits&lt;char&gt;,ptrdiff_t&gt;::_Getval(void)' being compiled\n1&gt;          c:\\users\\gbenglisha\\documents\\visual studio 2013\\projects\\scratchspace\\scratchspace\\main.cpp(58) : see reference to class template instantiation       'std::istream_iterator&lt;Show,char,std::char_traits&lt;char&gt;,ptrdiff_t&gt;' being compiled\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c++", "list", "file", "line", "push-back"], "comments": [{"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 2, "creation_date": 1448476417, "post_id": 33923863, "comment_id": 55608904, "body": "You parse the line where it says <code>Code here</code>. But seriously, you need to explain what does calling <code>Task</code> like that means - what are A and B, objects? strings? macro definitions?"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1448480039, "post_id": 33923863, "comment_id": 55610911, "body": "@Leeor It seems the question boils down to: I have formatted text in a file, and need to split out parts of each line so I can call <code>Task</code> on each line."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1448481521, "post_id": 33923863, "comment_id": 55611647, "body": "@GlennTeitelbaum, possible, but until he changes the question, I assume it&#39;s worse, and he wishes to chose objects by their names (otherwise the correct call is for example <code>Task(&quot;B&quot;, 4, &quot;A&quot;)</code>)"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1448481826, "post_id": 33923863, "comment_id": 55611776, "body": "@Leeor seems that the first parameter is a single char, and the third is some mystical <code>task</code>, so yes, some help from OP is needed on that.  There are two parts then to this question, parsing and translating, I can help on the first, and cleverly left the second as an exercize for the reader"}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1448482083, "post_id": 33923863, "comment_id": 55611910, "body": "@GlennTeitelbaum, Ah, missed the signature."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1465228909, "post_id": 33924761, "comment_id": 62802386, "body": "There is a recursive capture in here. I didn&#39;t think that C++ supported that?"}], "tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 1, "last_activity_date": 1448479547, "last_edit_date": 1448479547, "creation_date": 1448479104, "answer_id": 33924761, "question_id": 33923863, "link": "https://stackoverflow.com/questions/33923863/how-do-i-parse-a-line-into-pieces-and-ignore-parts-of-it/33924761#33924761", "title": "How do I parse a line into pieces and ignore parts of it?", "body": "<p>You can use a regular expression to parse out the pieces you need and then pass them to <code>Task</code></p>\n\n<p>In c++ that is done using <code>std::regex</code></p>\n\n<p>The code below will help you understand how to parse out the pieces, applying them to test is a simple step from there, but best done by you to make sure the concept is clear.</p>\n\n<p>First we will need a regular expression that grabs each piece, this is called a capture group and all that is needed is to use parenthesis</p>\n\n<p>If we break down what you have - it is:</p>\n\n<p>Something, an open paren we dont want, Something, a close paren we dont want, a comma we don't want, and Something</p>\n\n<p>in simple regex that would be:</p>\n\n<pre><code>(.*)\\((.*)\\),(.*)\n</code></pre>\n\n<p>But things are never so simple</p>\n\n<p>The first Something ends with the open paren, so we want everything but that first open paren: <code>([^(])</code> the ^ means not, the square bracket <code>[]</code> means every character</p>\n\n<p>The second Something ends with the close paren, so we have <code>([^)])</code></p>\n\n<p>The third something excludes the optional comma, but we can use <code>(.*)</code> and then group the , in an optional <code>*</code> <em>(There is likely a better way to do this)</em></p>\n\n<p>We also need to double escape the <code>\\</code> once for the compiler and once for regex</p>\n\n<p>We also need to allow for people entering random spaces in there so we add <code>*</code> in all breaks</p>\n\n<p>This leads to our regex:</p>\n\n<pre><code>*([^(]*) *\\\\( *([^)]*) *\\\\) *(, *(.*))*\n</code></pre>\n\n<p>Then we search and if found it will be in the result and we can iterate it to get the pieces.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n\nint main()\n{\n        // std::string seq = \"A(4),B\";\n        std::string seq = \"A(4)\";\n\n        try {\n                std::regex rgx(\" *([^(]*) *\\\\( *([^)]*) *\\\\) *(, *(.*))*\");\n                std::smatch result;\n                if(std::regex_search(seq, result, rgx))\n                {\n                        std::cout &lt;&lt; \"Size=\" &lt;&lt; result.size() &lt;&lt; std::endl;\n                        for(size_t i=0; i&lt;result.size(); ++i)\n                        {\n                                std::cout &lt;&lt; result[i] &lt;&lt; std::endl;\n                        }\n                }\n                else\n                {\n                        std::cout &lt;&lt; \"NO MATCH\" &lt;&lt; std::endl;\n                }\n        } catch (std::regex_error&amp; e) {\n\n                std::cout &lt;&lt; \"BAD REGEX\" &lt;&lt; std::endl;\n        }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1465307160, "creation_date": 1465307160, "answer_id": 37681211, "question_id": 33923863, "link": "https://stackoverflow.com/questions/33923863/how-do-i-parse-a-line-into-pieces-and-ignore-parts-of-it/37681211#37681211", "title": "How do I parse a line into pieces and ignore parts of it?", "body": "<p>What you're actually looking to do here is create an <a href=\"http://en.cppreference.com/w/cpp/language/operators#Stream_extraction_and_insertion\" rel=\"nofollow\">extraction operator</a> for your <code>Tache</code> object. I'm going to assume that your code looks something like this:</p>\n\n<pre><code>typedef char Task;\n\nstruct Tache {\n    char step;\n    int duration;\n    list&lt;Task&gt; precedentTask;\n};\n</code></pre>\n\n<p>Your extraction operator will be a method of <code>Tache</code>. It's brute force implementation will look something like this:</p>\n\n<pre><code>istream&amp; operator&gt;&gt;(istream&amp; lhs, Tache&amp; rhs) {\n    string line;\n\n    getline(lhs, line, '\\n');\n\n    stringstream ss(line);\n\n    ss &gt;&gt; rhs.step;\n    ss.ignore(numeric_limits&lt;streamsize&gt;::max(), '(');\n    ss &gt;&gt; rhs.duration;\n    ss.ignore(numeric_limits&lt;streamsize&gt;::max(), ')');\n\n    const regex re(\"\\\\s*,\\\\s*([a-zA-Z])\");\n    string precedentTasks;\n\n    getline(ss, precedentTasks);\n\n    rhs.precedentTask.clear();\n\n    transform(sregex_token_iterator(cbegin(precedentTasks), cend(precedentTasks), re, 1), sregex_token_iterator(), back_insert_iterator&lt;list&lt;Task&gt;&gt;(rhs.precedentTask), [](const string&amp; i) {\n        return i.front();\n    });\n\n    return lhs;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/2lTOvR\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 57, "user_id": 5601815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/823a7c9c5408ba210bcc1389053fbbca?s=128&d=identicon&r=PG&f=1", "display_name": "DrD4rk", "link": "https://stackoverflow.com/users/5601815/drd4rk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1465307160, "creation_date": 1448475884, "last_edit_date": 1465228768, "question_id": 33923863, "link": "https://stackoverflow.com/questions/33923863/how-do-i-parse-a-line-into-pieces-and-ignore-parts-of-it", "title": "How do I parse a line into pieces and ignore parts of it?", "body": "<p>I am sorry. I wasn't clair previously. I have a file that include data in the following format</p>\n\n<blockquote>\n  <p>A(3)<br></p>\n  \n  <p>B(4),A<br>\n  <br>\n  C(2),A<br>\n  <br>\n  E(5),A<br>\n  <br>\n  G(3),A<br>\n  <br>\n  J(8),B,H<br>\n  <br>\n  H(7),C,E,G<br>\n  <br>\n  I(6),G<br>\n  <br>\n  F(5),H<br>\n  <br>\n  ...</p>\n</blockquote>\n\n<p>These data represent a graph. </p>\n\n<p>I will use the critical path method to calculate how to get through this text file. </p>\n\n<p>the char is the step\nthe int is the length of each task \nthe other char is step that come before the first char</p>\n\n<p>So I have created the class Task to read the file and its constructor have the following parameters</p>\n\n<pre><code>    Tache::Tache(char step2, int duration, list&lt;Task*&gt; precedentTask)\n\n    {\n\n          this-&gt;step = step2;\n          this -&gt; duration = duration; \n          for(list&lt;Task*&gt;::iterator it = this-&gt; precedentTask.begin(); it != this-&gt; precedentTask.end(); it++)\n         {\n              this-&gt; precedentTask.push_back(*it);\n         }\n   }\n</code></pre>\n\n<p>In the main I added </p>\n\n<pre><code>string line;\nlist&lt;Task&gt; *allTaches = new list&lt;Task&gt;();\n\n  while(getline(file, line, ','))\n {\n       //I want to be able to receive the parse line from the file and add it like\n     //allTaches.push_back(line)\n     //But the format needs to look like (Char, duration, &lt;a list of&gt; PrecedentChar)           \n     //when I do \n     cout&lt;&lt; line &lt;&lt; Lendl;\n    it prints \n    A(3)\n    B(4)\n    A\n    C(2)\n    A\n    E(5)\n    A \n }\n</code></pre>\n\n<p>So I am not sure to know what to do really.</p>\n"}, {"tags": ["c++", "opengl", "glew", "freeglut"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1448479324, "post_id": 33923786, "comment_id": 55610543, "body": "First of all give us glGetString(GL_VERSION); value. | You asked about GLEW. There is small tutorial somewhere on the site. Another option is too look right inside the header, you can find all import information there."}, {"owner": {"reputation": 43, "user_id": 3874012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac9987db2d3db91789f99947754ef683?s=128&d=identicon&r=PG&f=1", "display_name": "spliblib", "link": "https://stackoverflow.com/users/3874012/spliblib"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1448479911, "post_id": 33923786, "comment_id": 55610852, "body": "glGetString returns 4.4.13283 Core Profile Context 14.501.1002.0 when I load a 4.4 profile (and the same with 4.3 when I lask for a 4.3 context version). I can&#39;t get a 4.5 profile loaded."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1448480476, "post_id": 33923786, "comment_id": 55611136, "body": "Ok, thanks. I&#39;m just trying to understand if you&#39;re successfully switched to better of two videocards or not. I expected vendor name to be in that string, but it&#39;s not here. Then, can you also tell us glGetString(GL_VENDOR); , please?"}, {"owner": {"reputation": 43, "user_id": 3874012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac9987db2d3db91789f99947754ef683?s=128&d=identicon&r=PG&f=1", "display_name": "spliblib", "link": "https://stackoverflow.com/users/3874012/spliblib"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1448481587, "post_id": 33923786, "comment_id": 55611674, "body": "ATI Technologies, inc."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1448484543, "post_id": 33923786, "comment_id": 55613168, "body": "Then I have no idea what&#39;s wrong."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1448485179, "post_id": 33923786, "comment_id": 55613444, "body": "Dunno if that is just a copy&amp;paste error, but there is a semicolon missing after the second input of the VS."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 3874012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac9987db2d3db91789f99947754ef683?s=128&d=identicon&r=PG&f=1", "display_name": "spliblib", "link": "https://stackoverflow.com/users/3874012/spliblib"}, "is_accepted": true, "score": 0, "last_activity_date": 1448485411, "creation_date": 1448485411, "answer_id": 33926368, "question_id": 33923786, "link": "https://stackoverflow.com/questions/33923786/opengl-extension-issue/33926368#33926368", "title": "OpenGL extension issue", "body": "<p>Ah, it seems I've found the problem.</p>\n\n<p>There's a semi-colon missing in the vertex shader (sigh) and an 'out' attribute missing.\nI had two near-identical vertex shaders, and it seems I was debugging the wrong one part of the time, which didn't help.</p>\n\n<p>The errors are really unintuitive and in this case seem not to help much though. Ah well.</p>\n"}], "owner": {"reputation": 43, "user_id": 3874012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac9987db2d3db91789f99947754ef683?s=128&d=identicon&r=PG&f=1", "display_name": "spliblib", "link": "https://stackoverflow.com/users/3874012/spliblib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 33926368, "answer_count": 1, "score": 2, "last_activity_date": 1448485411, "creation_date": 1448475641, "last_edit_date": 1448485087, "question_id": 33923786, "link": "https://stackoverflow.com/questions/33923786/opengl-extension-issue", "title": "OpenGL extension issue", "body": "<p>I've been trying to learn the basics of Opengl, following this series of tutorials :</p>\n\n<p><a href=\"http://in2gpu.com/2014/12/21/change-triangle-color-opengl-4-5/\" rel=\"nofollow\">http://in2gpu.com/2014/12/21/change-triangle-color-opengl-4-5/</a></p>\n\n<p>I am therefore using freeglut and glew (version 1.13).</p>\n\n<p>I had no issue with the first few tutorials, until the vertex shader started using explicit locations for attributes. </p>\n\n<p>When compiling the shaders, I would get an 'error : GL_ARB_explicit_attrib_location not supported in this version', even though the context I had asked for was 4.0.</p>\n\n<p>Looking at my graphics card, I realised that I had two and was using the less powerful Intel one when I had a Radeon R9 M295x that supported OpenGL 4.5.</p>\n\n<p>I then switched the context to Opengl 4.3, and this time got this error : \n'error #5 : Extension : explicit location is not supported in this version'.</p>\n\n<p>What am I understanding incorrectly ? I thought I could use GL_ARB_explicit_attrib_location with 3.3 or above. Why can't I in the first case ? </p>\n\n<p>And what does the second error mean ? I can't find any relevant information.</p>\n\n<p>Here's the context creation :</p>\n\n<pre><code>glutInit(&amp;argc, argv);\nglutInitContextVersion(4,3);\nglutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);\nglutInitWindowPosition(500, 500);//optional\nglutInitWindowSize(800, 600); //optional\nglutCreateWindow(\"OpenGL First Window\");\n\nglewExperimental = GL_TRUE;\n\nGLenum err = glewInit();\n</code></pre>\n\n<p>Here's the vao and vbo binding (vertex contains position and color) :</p>\n\n<pre><code>std::vector&lt;Vertex&gt; vertices;\nvertices.push_back(Vertex(Vec3f(0.25, -0.25, 0.0), Vec4f(1,0,0,1)));\nvertices.push_back(Vertex(Vec3f(-0.25, -0.25, 0.0), Vec4f(0, 1, 0, 1)));\nvertices.push_back(Vertex(Vec3f(0.25, 0.25, 0.0), Vec4f(0, 0, 1, 1)));\n\nglGenBuffers(1, &amp;vbo);\nglBindBuffer(GL_ARRAY_BUFFER, vbo);\nglBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * 3, &amp;vertices[0], GL_STATIC_DRAW);\nglEnableVertexAttribArray(0);\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)0);\nglEnableVertexAttribArray(1);\nglVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)12);\n</code></pre>\n\n<p>and here's the vertex shader : </p>\n\n<pre><code>#version 430 core\n\n// Input vertex data, different for all executions of this shader.\nlayout(location = 0) in vec3 in_position;\nlayout(location = 1) in vec4 in_color\n\nout vec4 color;\n\nvoid main(){\n\ncolor = in_color; \ngl_Position = vec4(in_position,1);\n\n}\n</code></pre>\n\n<p>On a sidenote, where on earth is the documentation for glew ? Can't seem to find it on the website or in the zip folder, and typing a few keywords doesn't seem to yield any results.</p>\n\n<p>Edit : A pointer to a workaround if I simply cannot use this extension would be interesting as well. I don't yet fully understand everything there is to understand about linking attributes.</p>\n\n<p>Edit #2 : The other strange thing is that the fragment shader I'm using apparently compiles with no issues :</p>\n\n<pre><code>#version 430 core\n\nlayout(location = 0) out vec4 out_color; // location specified\n\nin vec4 color;\n\nvoid main()\n{\n    out_color =color;\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "sensors", "throttling", "tps"], "comments": [{"owner": {"reputation": 112, "user_id": 5459414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZA6c.png?s=128&g=1", "display_name": "3dz9j56", "link": "https://stackoverflow.com/users/5459414/3dz9j56"}, "edited": false, "score": 1, "creation_date": 1448475832, "post_id": 33923782, "comment_id": 55608574, "body": "You say, it should only turn the fuel solenoid on, if the voltage increases by 0.1 V. But in which time? If for example the voltage increases over 10 seconds, should this also trigger? I think, you can do that by differentiate the voltage. But you have to decide which change should trigger the fuel solenoid."}, {"owner": {"reputation": 127, "user_id": 5516658, "user_type": "registered", "profile_image": "https://graph.facebook.com/700007703467603/picture?type=large", "display_name": "Paulo Lima", "link": "https://stackoverflow.com/users/5516658/paulo-lima"}, "edited": false, "score": 1, "creation_date": 1448476151, "post_id": 33923782, "comment_id": 55608758, "body": "Can&#39;t you save the voltage in a variable? <code>int myVolt = 0.54</code> And then, do this? <code>TPSvoltage &gt;= myVolt  &amp;&amp; TPSvoltage &lt; (myVolt + 0.10) </code>"}, {"owner": {"reputation": 23, "user_id": 354779, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/068d036e350e1f095063fa12da54e4a5?s=128&d=identicon&r=PG", "display_name": "Daniel Ricany", "link": "https://stackoverflow.com/users/354779/daniel-ricany"}, "edited": false, "score": 0, "creation_date": 1448479961, "post_id": 33923782, "comment_id": 55610872, "body": "3dz9j56, It would only need to turn the solenoid on if the TPS voltage increased by .10 within 0.3 seconds.  Paulo Lima, wouldn&#39;t that basically be the same thing as what I have above except that I wouldn&#39;t have to type out each voltage number?"}, {"owner": {"reputation": 127, "user_id": 5516658, "user_type": "registered", "profile_image": "https://graph.facebook.com/700007703467603/picture?type=large", "display_name": "Paulo Lima", "link": "https://stackoverflow.com/users/5516658/paulo-lima"}, "edited": false, "score": 0, "creation_date": 1448532906, "post_id": 33923782, "comment_id": 55631581, "body": "@DanielRicany well, I though the problem was you didn&#39;t knew the sum exactly. I guess I didn&#39;t understand the problem very well."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5596272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sCuos.jpg?s=128&g=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/5596272/gaurav"}, "is_accepted": false, "score": 3, "last_activity_date": 1448476113, "creation_date": 1448476113, "answer_id": 33923928, "question_id": 33923782, "link": "https://stackoverflow.com/questions/33923782/assist-me-with-if-statement-c-if-a-value-increases-by-0-10-do-this/33923928#33923928", "title": "Assist me with if statement c++: If a value increases by 0.10, do this:", "body": "<p>I think you should use 2 variables instead of only 1.\nthe first will hold the current value u are having and the 2nd will store the updated one, and then inside \"if\" statement if the difference of two variables is 0.10 you said then you can write the code for it, and else it will skip the code.\nHope it would work for u.</p>\n"}], "owner": {"reputation": 23, "user_id": 354779, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/068d036e350e1f095063fa12da54e4a5?s=128&d=identicon&r=PG", "display_name": "Daniel Ricany", "link": "https://stackoverflow.com/users/354779/daniel-ricany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1448476113, "creation_date": 1448475621, "question_id": 33923782, "link": "https://stackoverflow.com/questions/33923782/assist-me-with-if-statement-c-if-a-value-increases-by-0-10-do-this", "title": "Assist me with if statement c++: If a value increases by 0.10, do this:", "body": "<p>I'm using an Arduino and I am trying to make a fuel solenoid inject fuel when the throttle position sensor voltage increases by 0.10. I'll give you a little back ground on how the system works on the engine.</p>\n\n<ul>\n<li><p>The throttle position sensor measures the position essentially of how far you are pushing down the gas pedal on a car.</p></li>\n<li><p>The throttle position sensor voltage is 0.54 volts when the gas pedal is not being touched by my foot.</p></li>\n<li><p>When I push the gas pedal, the throttle position sensor voltage increases the further I push the pedal.</p></li>\n<li><p>When I am maintaining a steady speed, my foot is still on the pedal, and although not accelerating, the throttle position sensor voltage is still HIGHER than 0.54 volts, but it is not varying, it is fixed at one voltage because my foot is steady.</p></li>\n<li><p>When I apply more pressure to the gas pedal, the throttle position sensor voltage increases and the engine requires more fuel when the throttle position sensor voltage increases by .10 or more. It only needs more fuel for half a second.</p></li>\n</ul>\n\n<p>So essentially, I cannot have something like the following:</p>\n\n<pre><code>if (TPSvoltage &gt;= 0.54 &amp;&amp; TPSvoltage &lt; 0.64){\n\n  digitalWrite(fuelSolenoid, HIGH);   // turn the fuel solenoid on (HIGH is the voltage level)\n  Serial.println(\"Fuel Solenoid Turned on\");\n  delay(500);              // wait for half a second\n  digitalWrite(fuelSolenoid, LOW);    // turn the fuel solenoid off by making the voltage LOW\n  Serial.println(\"Fuel Solenoid Turned off\");\n  delay(1);        // delay in between reads for stability\n}\n</code></pre>\n\n<p>I need something where if only it increases by 0.10 volts regardless of the current throttle position sensor voltage, it will turn the fuel solenoid on.</p>\n\n<p>Can someone please help me figure out this code?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475364, "post_id": 33923670, "comment_id": 55608301, "body": "&#39;Doesn&#39;t work&#39; doesn&#39;t explain the issue."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475658, "post_id": 33923670, "comment_id": 55608465, "body": "@SergeyA ?? I believe I explained my issue well enough. Not once did I use the phrase &#39;doesn&#39;t work&#39;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475866, "post_id": 33923670, "comment_id": 55608593, "body": "Now you did. Words &#39;(Debug Assertion Failed! Expression: map/set iterator not dereferencable)&#39; were not there before the edit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1448475977, "post_id": 33923670, "comment_id": 55608661, "body": "GCC with libstdc++ makes the program abort in debug mode (compile with <code>-D_GLIBCXX_DEBUG</code>) too."}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 1, "creation_date": 1448475978, "post_id": 33923670, "comment_id": 55608662, "body": "What happens if <code>i</code> becomes <code>ret._data.cend()</code> in the <code>while</code> loop? You are seeing this in debug but not release because it is a &quot;Debug Assertion&quot;, as the error says."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1448478989, "post_id": 33923670, "comment_id": 55610362, "body": "<code>(*i).first</code> is just <code>i-&gt;first</code>."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1448475976, "creation_date": 1448475976, "answer_id": 33923888, "question_id": 33923670, "link": "https://stackoverflow.com/questions/33923670/gcc-and-clang-give-thumbs-up-visual-studio-trips-logic-error/33923888#33923888", "title": "GCC and Clang give thumbs up - Visual Studio trips. Logic error?", "body": "<p>Your code has a bug there.</p>\n\n<pre><code>   while ((*i).first == power)\n    {\n        sum += (*i).second;\n        ++i;\n    }\n</code></pre>\n\n<p>is not checking for boundaries of your map. </p>\n"}], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 33923888, "answer_count": 1, "score": 0, "last_activity_date": 1448475976, "creation_date": 1448475263, "last_edit_date": 1448475582, "question_id": 33923670, "link": "https://stackoverflow.com/questions/33923670/gcc-and-clang-give-thumbs-up-visual-studio-trips-logic-error", "title": "GCC and Clang give thumbs up - Visual Studio trips. Logic error?", "body": "<p>Couldn't break this into a smaller example... So I'm using an <code>std::multimap</code> to store some values... It's a simple polynomial class. </p>\n\n<p>The problem is the last function, which multiplies two polynomials. As it multiplies them, it produces a polynomial with multiple terms, which can be summed together <code>(2x^2 + 3x^2  =&gt;  5x^2)</code>. </p>\n\n<p>So I try to do that and Visual Studio complains <code>(Debug Assertion Failed! Expression: map/set iterator not dereferencable)</code>. Tested and worked fine with Clang and GCC. Also, it works perfectly with Visual Studio in Release mode, so I thought this might be an error on my part or something with the logic! So my question is this: is the following code valid and correct? If not, how should I go about improving it? Don't comment too much on the other parts, please.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n#include &lt;map&gt;\n#include &lt;iterator&gt;\n#include &lt;initializer_list&gt;\n\n//DIRTY YET SO BEAUTIFUL HACK       //don't judge the macro :P\n#define EXPAND_PACK(FUN) \\\n        using type = int[]; \\\n        type{ 0, ((FUN), void(), 0)... }\n\ntemplate&lt;class T&gt;\nclass polynomial\n{\nprivate:\n    struct _custom_compare //for std::multimap to sort properly\n    {\n        bool operator()(const std::size_t&amp; a, const std::size_t&amp; b) const\n        {\n            return a &gt; b;\n        }\n    };\n\nprivate:\n    std::multimap&lt;std::size_t, T, _custom_compare&gt; _data;\n\npublic:\n    template&lt;class... Args&gt;\n    polynomial(Args&amp;&amp;... pack)\n    {\n        std::size_t power = sizeof...(pack)-1;\n\n        EXPAND_PACK(_data.emplace(power--, pack));\n    }\n\n    auto operator*(const polynomial &amp;rhs) const { return _multiply(rhs); }\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const polynomial&amp; poly)\n    {\n        //implementation of this not important\n    }\n\nprivate:\n    auto _multiply(polynomial rhs) const\n    {\n        polynomial lhs(*this);\n\n        polynomial&lt;decltype((*_data.cbegin()).second + (*rhs._data.cbegin()).second)&gt; ret;\n\n        for (const auto&amp; i : lhs._data)\n        {\n            for (const auto&amp; j : rhs._data)\n                ret._data.emplace(i.first + j.first, i.second * j.second);\n        }\n\n        decltype(ret) new_ret;\n        std::size_t power = (*ret._data.cbegin()).first;\n\n        decltype((*ret._data.cbegin()).second + (*ret._data.begin()).second) sum = 0;\n\n        //POINT OF INTEREST HERE!!\n        for (auto i = ret._data.cbegin(); i != ret._data.cend(); )\n        {\n            while ((*i).first == power)\n            {\n                sum += (*i).second;\n                ++i;\n            }\n\n            new_ret._data.emplace(power, sum);\n            sum = 0;\n            --power;\n        }\n\n        return new_ret;\n    }\n};\n\nint main()\n{\n    polynomial&lt;int&gt; p(3, 4);\n    polynomial&lt;int&gt; p2(5, 8, 4);\n\n    std::cout &lt;&lt; p * p2;\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda", "thrust"], "answers": [{"comments": [{"owner": {"reputation": 12642, "user_id": 499699, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kbSI9.jpg?s=128&g=1", "display_name": "&#198;lex", "link": "https://stackoverflow.com/users/499699/%c3%86lex"}, "edited": false, "score": 0, "creation_date": 1448484818, "post_id": 33925959, "comment_id": 55613290, "body": "Thank you very much! I hadn&#39;t seen that, but my understanding is that most of thrust functors work with the same <code>struct-operator()()</code> pattern? In any case, many thanks."}, {"owner": {"reputation": 354, "user_id": 607102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8959c1702ab20b4c16f06f674d6a94e6?s=128&d=identicon&r=PG", "display_name": "deathly809", "link": "https://stackoverflow.com/users/607102/deathly809"}, "reply_to_user": {"reputation": 12642, "user_id": 499699, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kbSI9.jpg?s=128&g=1", "display_name": "&#198;lex", "link": "https://stackoverflow.com/users/499699/%c3%86lex"}, "edited": false, "score": 0, "creation_date": 1448485399, "post_id": 33925959, "comment_id": 55613560, "body": "The patterns are similar.  Depending on the thrust function and the number of arguments it requires (C++ allows overloaded functions) it will require your functor to have a certain number of arguments."}], "tags": [], "owner": {"reputation": 354, "user_id": 607102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8959c1702ab20b4c16f06f674d6a94e6?s=128&d=identicon&r=PG", "display_name": "deathly809", "link": "https://stackoverflow.com/users/607102/deathly809"}, "is_accepted": true, "score": 1, "last_activity_date": 1448483743, "creation_date": 1448483743, "answer_id": 33925959, "question_id": 33923645, "link": "https://stackoverflow.com/questions/33923645/thrustdevice-vector-use-thrustreplace-or-thrusttransform-with-custom-funct/33925959#33925959", "title": "thrust::device_vector use thrust::replace or thrust::transform with custom functor/predicate", "body": "<p>In the \"Thrust Quick Start Guide\" on page 8-9 there is an example on how to create your own functions for transform.</p>\n\n<p>I came up with a solution, but notice this will not run on the host side because you use CUDA intrinsics.  </p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/transform.h&gt;\n#include &lt;thrust/sequence.h&gt;\n#include &lt;thrust/copy.h&gt;\n#include &lt;thrust/fill.h&gt;\n#include &lt;thrust/replace.h&gt;\n#include &lt;thrust/functional.h&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct sigmoid_function\n{\n\n  float _skew;\n\n  sigmoid_function(float skew) : _skew(skew) { /*Empty */ }\n\n  typedef T argument_type;\n\n  typedef T result_type;\n\n  __device__ T operator()(const T &amp;x) const {\n\n    float x_neg = __fmul_rz( -1.f, x );\n    float exp_val = __expf( x_neg );\n    float denom = __fadd_rz( 1.f, __expf(-exp_val) );\n    float output  = __fdividef( 1.f, denom );\n\n    if ( _skew != 0.0 )\n        return __fadd_rz( output, _skew );\n    else\n        return output;\n  }\n};\n\nint main(void) {\n    // allocate three device_vectors with 10 elements\n    thrust::device_vector&lt;float&gt; X(10);\n\n    // initialize X to 0,1,2,3, ....\n    thrust::sequence(X.begin(), X.end());\n\n    // Before\n    thrust::copy(X.begin(),X.end(),std::ostream_iterator&lt;float&gt;(std::cout, \"\\n\"));\n\n    // Apply\n    thrust::transform(X.begin(), X.end(), X.begin(), sigmoid_function&lt;float&gt;(0.1));\n\n    // After\n    thrust::copy(X.begin(),X.end(),std::ostream_iterator&lt;float&gt;(std::cout, \"\\n\"));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 12642, "user_id": 499699, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kbSI9.jpg?s=128&g=1", "display_name": "&#198;lex", "link": "https://stackoverflow.com/users/499699/%c3%86lex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 33925959, "answer_count": 1, "score": 1, "last_activity_date": 1448483743, "creation_date": 1448475180, "question_id": 33923645, "link": "https://stackoverflow.com/questions/33923645/thrustdevice-vector-use-thrustreplace-or-thrusttransform-with-custom-funct", "title": "thrust::device_vector use thrust::replace or thrust::transform with custom functor/predicate", "body": "<p>I use a cuda kernel to do a sigmoid activation on a thrust vector:</p>\n\n<pre><code>thrust::device_vector&lt;float&gt; output = input;\nfloat * output_ptr = thrust::raw_pointer_cast( output.data() );\nsigmoid_activation&lt;&lt;&lt;num_blocks_x,block_threads_x&gt;&gt;&gt;( output_ptr );\n</code></pre>\n\n<p>where my kernel is:</p>\n\n<pre><code>__device__ float sigmoid_function( float input, float skew )\n{\n    // -X: Neg X\n    float x_neg = __fmul_rz( -1.f, input );\n    // Y: exponential value\n    float exp_val = __expf( x_neg );\n    // 1 + exp^(-X)\n    float denom = __fadd_rz( 1.f, e_to_x_neg );\n     // 1 / 1 + exp^(-X)\n    float output  = __fdividef( 1.f, denom );\n\n    if ( skew != 0.0 )\n        return _fadd_rz( output, skew );\n    else\n        return output;\n}\n\n__global__ void sigmoid_activation( float * input float skew )\n{\n    // Iterate Input vector\n    int x = blockIdx.x * blockDim.x + threadIdx.x;\n    // Update value\n    input[x]  = sigmoid_function( input[x], skew );  \n}\n</code></pre>\n\n<p>How can I use thrust::replace with a functor / predicate to do the same?</p>\n\n<p>The examples I have seen are too simplistic to demonstrate such use:</p>\n\n<pre><code>thrust::replace(Y.begin(), Y.end(), 1, 10);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>thrust::transform(X.begin(), X.end(), Y.begin(),thrust::negate&lt;int&gt;());\n</code></pre>\n"}, {"tags": ["c++", "c++11", "cmake", "mingw-w64", "clion"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1448475236, "post_id": 33923609, "comment_id": 55608226, "body": "Doesn&#39;t -m64 do the trick?"}, {"owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475341, "post_id": 33923609, "comment_id": 55608285, "body": "mmm i dont know where should i put it?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475403, "post_id": 33923609, "comment_id": 55608317, "body": "As an argument to your compiler invocation string. Somewhere in CMake definitions."}, {"owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475476, "post_id": 33923609, "comment_id": 55608356, "body": "ill check it in about an hour and tell you"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1448477274, "post_id": 33923609, "comment_id": 55609360, "body": "If you can compile and run your application on some POSIX system, try using <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>. You might have some <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leak</a>.If possible, compile it with <a href=\"http://gcc.gnu.org/gcc-5/\" rel=\"nofollow noreferrer\">GCC 5</a> and use some <code>-fsanitize=</code> options during the debugging phase (in addition of <code>-Wall -Wextra -g</code>)"}, {"owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448487763, "post_id": 33923609, "comment_id": 55614769, "body": "@SergeyA you where right, it worked! &#39;-m64&#39; did the trick, now I discovered that I need to change the toolchain from i686 to x86_64. Thanks!"}, {"owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1448487939, "post_id": 33923609, "comment_id": 55614864, "body": "@BasileStarynkevitch thanks for your advice, I&#39;ll check that. I kinda expected the huge memory consumption since Im working on an algorithm that builds HUGE graph with bilions of nodes"}, {"owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449102844, "post_id": 33923609, "comment_id": 55865573, "body": "@SergeyA do you want to post your answer so I will accept it?"}], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 4683659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d113f636969daae858e1510b438541c?s=128&d=identicon&r=PG", "display_name": "John Drouhard", "link": "https://stackoverflow.com/users/4683659/john-drouhard"}, "edited": false, "score": 1, "creation_date": 1448477230, "post_id": 33923842, "comment_id": 55609331, "body": "Could you please post the relevant content from that blog into your answer in case the blog disappears?"}], "tags": [], "owner": {"reputation": 982, "user_id": 3907990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSNNW.jpg?s=128&g=1", "display_name": "MarkusAtCvlabDotDe", "link": "https://stackoverflow.com/users/3907990/markusatcvlabdotde"}, "is_accepted": false, "score": 3, "last_activity_date": 1448574686, "last_edit_date": 1448574686, "creation_date": 1448475832, "answer_id": 33923842, "question_id": 33923609, "link": "https://stackoverflow.com/questions/33923609/compile-c-as-64bit-with-clion/33923842#33923842", "title": "Compile C++ as 64Bit with CLion", "body": "<p>You have to tell CLion to use MinGW-w64 to build your CMake project.</p>\n\n<p>You dont have to change your CMake project configuration. It would be counterproductive limiting your CMake project by a fixed machine architecture, if you can instead easily tell your compiler which architecture to build for or use an appropriate compiler (<code>MinGW-w64</code>).</p>\n\n<p>This post shows you how to do that:</p>\n\n<p><a href=\"https://dev.my-gate.net/2014/09/15/how-to-use-mingw-w64-with-clion/\" rel=\"nofollow noreferrer\">https://dev.my-gate.net/2014/09/15/how-to-use-mingw-w64-with-clion/</a></p>\n\n<p>Excerpt from this post:</p>\n\n<blockquote>\n  <p>Here are the few steps to make it work:</p>\n  \n  <ol>\n  <li>Get your MinGW-w64 compiler installed somewhere. </li>\n  <li>Create a file with the path [MinGW-w64 dir]/include/_mingw.h and the content shown below. </li>\n  <li>Point CLion to your [MinGW-w64 dir] and watch how CLion\n  recognizes your MinGW setup.\n  <a href=\"https://i.stack.imgur.com/WWcui.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WWcui.png\" alt=\"Image screenshoted from this post\"></a></li>\n  </ol>\n</blockquote>\n\n<p>After building your executable, you can check its architecture with the unix command <code>file</code>, which should be available to you since you are using mingw.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1449104055, "creation_date": 1449104055, "answer_id": 34055981, "question_id": 33923609, "link": "https://stackoverflow.com/questions/33923609/compile-c-as-64bit-with-clion/34055981#34055981", "title": "Compile C++ as 64Bit with CLion", "body": "<p>As suggested by OP, posting my comment as an answer: for this you need to pass -m64 option to compiler/linker.</p>\n"}], "owner": {"reputation": 3115, "user_id": 1726419, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ND8zs.jpg?s=128&g=1", "display_name": "yossico", "link": "https://stackoverflow.com/users/1726419/yossico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5460, "favorite_count": 0, "accepted_answer_id": 34055981, "answer_count": 2, "score": 1, "last_activity_date": 1449104055, "creation_date": 1448475041, "last_edit_date": 1495535457, "question_id": 33923609, "link": "https://stackoverflow.com/questions/33923609/compile-c-as-64bit-with-clion", "title": "Compile C++ as 64Bit with CLion", "body": "<p>I have a c++ application that runs a memory-consuming algorithm.</p>\n\n<p>It crushes with error : <strong>terminate called after throwing an instance of 'std::bad_alloc'</strong> after the allocated memory reaches about 2GB.</p>\n\n<p>I want to compile it as 64Bit so it could allocate more memory from my 64Bit/8GB Ram machine.</p>\n\n<p>How it can be done?</p>\n\n<p>Im working with CLion, building with CMake and using mingw version:\n<strong>mingw-w64\\i686-4.8.3-posix-dwarf-rt_v3-rev2</strong>\nbtw - the wingw is installed under <code>C:\\Program Files (x86)\\mingw-w64</code> is this related to the issue?</p>\n\n<p>I've been looking here:\n<a href=\"https://stackoverflow.com/questions/5272825/detecting-64bit-compile-in-c\">Detecting 64bit compile in C</a>\nand (not suprisingly) I can see that my application does not have the <code>__x86_64__</code></p>\n"}, {"tags": ["c++", "multithreading", "qt", "audio", "qtmultimedia"], "answers": [{"comments": [{"owner": {"reputation": 1810, "user_id": 457584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DSjhB.jpg?s=128&g=1", "display_name": "Paul Masri-Stone", "link": "https://stackoverflow.com/users/457584/paul-masri-stone"}, "edited": false, "score": 0, "creation_date": 1448626282, "post_id": 33924687, "comment_id": 55671911, "body": "Thanks for the advice. Totally what I didn&#39;t want to hear, having invested some time in Qt, but totally useful to hear it at this point before I head down the rabbit hole."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 1810, "user_id": 457584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DSjhB.jpg?s=128&g=1", "display_name": "Paul Masri-Stone", "link": "https://stackoverflow.com/users/457584/paul-masri-stone"}, "edited": false, "score": 0, "creation_date": 1448626668, "post_id": 33924687, "comment_id": 55672121, "body": "Your time invested in Qt is not lost, as Qt is a big application framework, it just doesn&#39;t really do much when it comes down to low latency audio in particular. Building and using RTAudio is easy, as is wrapping it in a <code>QIODevice</code> for better compatibility with Qt&#39;s design paradigm i.e. signals and slots, even based programming and whatnot."}, {"owner": {"reputation": 1810, "user_id": 457584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DSjhB.jpg?s=128&g=1", "display_name": "Paul Masri-Stone", "link": "https://stackoverflow.com/users/457584/paul-masri-stone"}, "edited": false, "score": 0, "creation_date": 1497442467, "post_id": 33924687, "comment_id": 76079489, "body": "As a follow-up to my original question and this answer, I subclassed <code>QThread</code> and put my synth into the thread it creates (using rtAudio for audio output). With the thread priority set to <code>QThread::TimeCriticalPriority</code> and my own producer-consumer non-blocking signalling to send control changes to the synth, I have had no problems using buffer lengths down to 3ms across iOS, Windows &amp; MacOS."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 4, "last_activity_date": 1454976213, "last_edit_date": 1454976213, "creation_date": 1448478838, "answer_id": 33924687, "question_id": 33923542, "link": "https://stackoverflow.com/questions/33923542/what-is-the-best-multithreading-approach-to-low-latency-audio-synthesis-in-qt/33924687#33924687", "title": "What is the best multithreading approach to low-latency audio synthesis in Qt?", "body": "<p>Qt will be zero help in your endeavor, and quite possibly - obstructive. Low latency audio is a least priority, especially on windows, where it still uses the antiquated MME API. It won't get any better no matter how many threads you throw at it.</p>\n\n<p>I recommend you download and build a 3rd party library, I've had very good results with RTAudio, which supports a number of low latency backends on different platforms. You can still use Qt for the GUI. You can easily wrap RTAudio in a <code>QIODevice</code> if you want.</p>\n\n<p>And yes, it goes without saying that you should not use the main / GUI thread for the synthesis.</p>\n"}, {"comments": [{"owner": {"reputation": 1810, "user_id": 457584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DSjhB.jpg?s=128&g=1", "display_name": "Paul Masri-Stone", "link": "https://stackoverflow.com/users/457584/paul-masri-stone"}, "edited": false, "score": 0, "creation_date": 1448626478, "post_id": 33928114, "comment_id": 55672023, "body": "Thanks for the advice and the extra detail. Thanks to Ross Bencina&#39;s excellent article <a href=\"http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing\" rel=\"nofollow noreferrer\">rossbencina.com/code/&hellip;</a> I understood the priority inversion issue and the need to avoid locks/mutexes. I love Qt&#39;s GUI and the ability to prototype them using QML &amp; JavaScript but the audio has got to be right so I&#39;m taking your advice and checking out Juce."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1448627475, "post_id": 33928114, "comment_id": 55672584, "body": "Keep in mind Juce is not free for closed source applications, and the cheapest license will cost you 50 bucks a month, that&#39;s 600$ annual and you can&#39;t pay for less than a full year, if you are willing to pay might as well get the pro license for a one time 1000$ payment. The Projucer is cool, but QML is faster to work with. Juce has many audio specific stuff built in when it comes to IO, GUI and whatnot, which Qt does not, but the Qt APIs are a little better to work with."}, {"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1448636686, "post_id": 33928114, "comment_id": 55677694, "body": "If the OP wants is developing software commercially, this is an excellent deal - and remember that QT isn&#39;t free either for this use."}], "tags": [], "owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "is_accepted": false, "score": 2, "last_activity_date": 1448493519, "creation_date": 1448493519, "answer_id": 33928114, "question_id": 33923542, "link": "https://stackoverflow.com/questions/33923542/what-is-the-best-multithreading-approach-to-low-latency-audio-synthesis-in-qt/33928114#33928114", "title": "What is the best multithreading approach to low-latency audio synthesis in Qt?", "body": "<p>Let's outline few more of the problems.  As others have said, Qt brings little to the party. Low latency audio is not something its multimedia framework is designed for.</p>\n\n<h2>Architecture:</h2>\n\n<p>Commercial soft-synths are invariably written as plug-ins for other audio software.   The advantage of this approach is that the architecture of the plug-in is quite constrainted and somebody else has solved many of the hard threading and performance problems.  Steinberg's <a href=\"https://www.steinberg.net/en/products/vst.html\" rel=\"nofollow\">VST</a> and Apple's <a href=\"https://developer.apple.com/library/mac/documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/Introduction/Introduction.html\" rel=\"nofollow\">Audio Units</a> being two obvious examples.  Both are these are capable of tacking latencies in the order of milliseconds.</p>\n\n<h2>Real-time characteristics</h2>\n\n<p>When considering real-time systems, the worst-case-latency. In the case of audio, it's duration of the sample buffer in wall-time plus whatever overhead is required to accommodate the worst-case delay in getting scheduled by the operating system to perform and complete the processing.</p>\n\n<h2>Threading:</h2>\n\n<p>When writing a synthesis plug-in, you are really only concerned with two things: </p>\n\n<ul>\n<li>Implementing a render handler - which is called by the host when it needs samples generated by the synth, and which is generally called in a real-time (or at least elevated) thread priority. </li>\n<li>Implementing an event handler - which is called in a lower priority thread.  The complication is that this should cannot cause a <a href=\"https://en.wikipedia.org/wiki/Priority_inversion\" rel=\"nofollow\">priority inversion</a> in the render thread - with which it inevitably shares some data structures. You need lockless data structures for this.</li>\n</ul>\n\n<p>Somewhere you must manage modulation of soft-synth parameters and parameter automation - possibly in another thread.</p>\n\n<p>Naturally, plug-ins often also have UI, but this runs at the lowest priority on the UI thread, and should be totally decoupled from the render handler, via the event handler.</p>\n\n<h2>Host applications</h2>\n\n<p>If you insist on writing the host application as well, you would be wise to do what almost everyone else in the industry does, and use <a href=\"http://www.steinberg.net/en/company/developers.html\" rel=\"nofollow\">Steinberg's ASIO</a> layer.</p>\n\n<p>However, you might also checkout <a href=\"http://www.juce.com\" rel=\"nofollow\">Juce</a> - which amongst other things includes a plug-in host using ASIO, example plug-ins, and just about everything else you need to solve your problem.</p>\n"}], "owner": {"reputation": 1810, "user_id": 457584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DSjhB.jpg?s=128&g=1", "display_name": "Paul Masri-Stone", "link": "https://stackoverflow.com/users/457584/paul-masri-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "closed_date": 1448505326, "answer_count": 2, "score": 0, "last_activity_date": 1497442878, "creation_date": 1448474868, "last_edit_date": 1497442878, "question_id": 33923542, "link": "https://stackoverflow.com/questions/33923542/what-is-the-best-multithreading-approach-to-low-latency-audio-synthesis-in-qt", "closed_reason": "Opinion-based", "title": "What is the best multithreading approach to low-latency audio synthesis in Qt?", "body": "<p>I am creating a soft-synth using Qt. That means getting low-latency audio (buffer size around 5-10ms) so that it is responsive to the UI controls.</p>\n\n<p>The components of the soft-synth are:</p>\n\n<ul>\n<li>Main window, which handles the UI</li>\n<li>Synthesis engine, which is a subclass of QIODevice</li>\n<li>QAudioOutput, which is the Qt Multimedia low latency audio output class</li>\n</ul>\n\n<p>I have based this on my own hacked version of the <a href=\"http://doc.qt.io/qt-5/qtmultimedia-spectrum-example.html\" rel=\"nofollow noreferrer\">spectrum example</a> to generate a basic wavetable synth using pull mode.</p>\n\n<p>In practice I find I get glitches if the buffer is less than around 100ms. That's way too long for good responsiveness.</p>\n\n<p>The solution appears to be multithreading, but I'm unclear how to structure this within Qt. My instinct is to put the synth engine into its own thread but I'm unclear</p>\n\n<ol>\n<li>How to do this given that it is a subclass of QIODevice already</li>\n<li>Whether this will interfere with QAudioOutput (which is in a thread of its own anyway?)</li>\n</ol>\n"}, {"tags": ["c++", "g++"], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 1550099, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9ded3d2fd5a0674be303522a7f32e1e6?s=128&d=identicon&r=PG&f=1", "display_name": "spurra", "link": "https://stackoverflow.com/users/1550099/spurra"}, "edited": false, "score": 0, "creation_date": 1448477781, "post_id": 33924123, "comment_id": 55609655, "body": "If I understood correctly I have to link against libc++ correct? So I should be able to specify &#39;g++-5 -stdlib=libc++ source.c&#39;? If I do that, I get the error: &quot;error: unrecognized command line option &#39;-stdlib=libc++&#39;&quot;  I have the following folders:  /usr/lib/libc++.1.dylib /usr/lib/libc++.dylib /usr/lib/libc++abi.dylib"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 907, "user_id": 1550099, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9ded3d2fd5a0674be303522a7f32e1e6?s=128&d=identicon&r=PG&f=1", "display_name": "spurra", "link": "https://stackoverflow.com/users/1550099/spurra"}, "edited": false, "score": 1, "creation_date": 1448478034, "post_id": 33924123, "comment_id": 55609809, "body": "AFIIR the path the the standard library is set in gcc at build time. I&#39;m not an expert on this. I&#39;ll ask my colleague in the morning"}, {"owner": {"reputation": 907, "user_id": 1550099, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9ded3d2fd5a0674be303522a7f32e1e6?s=128&d=identicon&r=PG&f=1", "display_name": "spurra", "link": "https://stackoverflow.com/users/1550099/spurra"}, "edited": false, "score": 0, "creation_date": 1448553854, "post_id": 33924123, "comment_id": 55644771, "body": "Never mind, I upgraded and updated brew and reinstalled gcc-5. It all works now."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 907, "user_id": 1550099, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9ded3d2fd5a0674be303522a7f32e1e6?s=128&d=identicon&r=PG&f=1", "display_name": "spurra", "link": "https://stackoverflow.com/users/1550099/spurra"}, "edited": false, "score": 1, "creation_date": 1448560470, "post_id": 33924123, "comment_id": 55648286, "body": "ah I misunderstood and thought you had built it from scratch. Given the circumstances I would have reinstalled it too :-)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1448476804, "creation_date": 1448476804, "answer_id": 33924123, "question_id": 33923353, "link": "https://stackoverflow.com/questions/33923353/compiling-with-g-5-on-os-x-undefined-symbols-for-architecture-x86-64/33924123#33924123", "title": "Compiling with g++-5 on OS X - Undefined symbols for architecture x86_64", "body": "<p>The symbols you're missing are in libc++.</p>\n\n<p>the namespace <code>std::__1::...</code> gives it away. This was done so that we would not accidentally link programs compiled for <code>libstdc++</code> against <code>libc++</code>. In <code>libstdc++</code> the symbols would be named <code>std::...</code>.</p>\n\n<p>So either:</p>\n\n<ol>\n<li>gcc has been built to link against libc++ by default, or</li>\n<li>you have specified -stdlib=libc++ on the command line</li>\n</ol>\n\n<p>and</p>\n\n<p>either:</p>\n\n<ol>\n<li>libc++ is not where the compiler thinks it should be, or</li>\n<li>you did not build/download/install libc++</li>\n</ol>\n"}], "owner": {"reputation": 907, "user_id": 1550099, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9ded3d2fd5a0674be303522a7f32e1e6?s=128&d=identicon&r=PG&f=1", "display_name": "spurra", "link": "https://stackoverflow.com/users/1550099/spurra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448476804, "creation_date": 1448474151, "question_id": 33923353, "link": "https://stackoverflow.com/questions/33923353/compiling-with-g-5-on-os-x-undefined-symbols-for-architecture-x86-64", "title": "Compiling with g++-5 on OS X - Undefined symbols for architecture x86_64", "body": "<p>I am attempting to compile a simple program:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I compile it using g++-5, that is g++ version 5.2.0 installed with homebrew on OS X. When I run it, I get the following error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"std::__1::locale::use_facet(std::__1::locale::id&amp;) const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::ios_base::getloc() const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::__init(unsigned long, char)\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in ccLztVVH.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::~basic_string()\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in ccLztVVH.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::put(char)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::flush()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::sentry(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::~sentry()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::cout\", referenced from:\n      _main in ccLztVVH.o\n  \"std::__1::ctype&lt;char&gt;::id\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::locale::~locale()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::endl&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;) in ccLztVVH.o\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::ios_base::__set_badbit_and_consider_rethrow()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\n  \"std::__1::ios_base::clear(unsigned int)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::__put_character_sequence&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*, unsigned long) in ccLztVVH.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I tried running it with the -m64 and -m32 flags, to no avail. Does anybody know how I can solve this problem?</p>\n"}, {"tags": ["c++", "function", "pass-by-reference", "main"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1448474365, "post_id": 33923338, "comment_id": 55607743, "body": "The compiler is correct. Where do you think x is defined?"}, {"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 1, "creation_date": 1448476870, "post_id": 33923338, "comment_id": 55609141, "body": "Don Scott, below, is absolutely correct.  You may want to study up on scope and how it affects your objects."}], "answers": [{"comments": [{"owner": {"reputation": 2588, "user_id": 1086521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a470ba3deab88f231acc05615474763b?s=128&d=identicon&r=PG", "display_name": "Don Scott", "link": "https://stackoverflow.com/users/1086521/don-scott"}, "edited": false, "score": 0, "creation_date": 1448474575, "post_id": 33923417, "comment_id": 55607856, "body": "Ironically, the compiler isn&#39;t even getting to this function.   Look at <code>main</code>...  The OP needs to review scoping."}, {"owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "reply_to_user": {"reputation": 2588, "user_id": 1086521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a470ba3deab88f231acc05615474763b?s=128&d=identicon&r=PG", "display_name": "Don Scott", "link": "https://stackoverflow.com/users/1086521/don-scott"}, "edited": false, "score": 0, "creation_date": 1448474753, "post_id": 33923417, "comment_id": 55607983, "body": "Ah, right, I guess that&#39;s the source of his &quot;error&quot;, although based on the original version of print_on_circle, The while loop is going to do nothing, as the calculated x,y values will not be used when dividing by sqrt()"}], "tags": [], "owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1448474389, "creation_date": 1448474389, "answer_id": 33923417, "question_id": 33923338, "link": "https://stackoverflow.com/questions/33923338/variables-out-of-scope-in-main-when-called-by-reference-by-a-function-in-c/33923417#33923417", "title": "Variables out of scope in main when called by reference by a function in C++", "body": "<p>Because you defined x in the do-while loop, so you cannot use it outside the loop, since those definitions hide the parameters x and y.  Define it before the loop:</p>\n\n<pre><code>void point_on_circle(double&amp; x, double&amp; y)\n{\n    double r;\n\n    do\n    {\n        x = unif(-1.,1.);\n        y = unif(-1.,1.);\n        r = x*x + y*y;\n    }while (r &gt;=1.0);\n\n    x = x / sqrt(r);\n    y = y / sqrt(r);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2588, "user_id": 1086521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a470ba3deab88f231acc05615474763b?s=128&d=identicon&r=PG", "display_name": "Don Scott", "link": "https://stackoverflow.com/users/1086521/don-scott"}, "is_accepted": false, "score": 2, "last_activity_date": 1448474423, "creation_date": 1448474423, "answer_id": 33923427, "question_id": 33923338, "link": "https://stackoverflow.com/questions/33923338/variables-out-of-scope-in-main-when-called-by-reference-by-a-function-in-c/33923427#33923427", "title": "Variables out of scope in main when called by reference by a function in C++", "body": "<p><strong>In your main method you did not declare a variable called <code>x</code> nor <code>y</code>.</strong>  Moreover, you also have scoping issues in your <code>point_on_circle(double&amp; x, double&amp; y)</code> function with the variable <code>r</code>.  </p>\n\n<p><strong><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_variable_scope.htm\" rel=\"nofollow\">Please review C++ scoping.</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "edited": false, "score": 0, "creation_date": 1448475462, "post_id": 33923584, "comment_id": 55608346, "body": "Thanks for the explanation. Yes I understand that the errors are those you recalle, however, my question was exactly: how can I declare x and y inside the main? x and y have been determined by the function, suppose x=a and y=b. Now, if I just declare &quot;double x&quot; &quot;double y&quot; in the main, I simply lose the values a and b stored in x and y, right? My problem is that I would like to keep them."}, {"owner": {"reputation": 94, "user_id": 5530296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0SDbSJmRQiA/AAAAAAAAAAI/AAAAAAAAADI/QhLDyPIH4EM/photo.jpg?sz=128", "display_name": "WingedPanther73", "link": "https://stackoverflow.com/users/5530296/wingedpanther73"}, "reply_to_user": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "edited": false, "score": 0, "creation_date": 1448475511, "post_id": 33923584, "comment_id": 55608379, "body": "Ah, but with your main, x and y haven&#39;t been determined by anything.&#39;  <code>int main()   {     double x,y;     point_on_circle(x,y);     cout &lt;&lt; &quot;Pair of points on the circle found is &quot; &lt;&lt; x &lt;&lt; &quot; and &quot; &lt;&lt; y &lt;&lt; endl;    cout &lt;&lt; &quot;Let&#39;s verify: x^2+y^2=&quot; &lt;&lt; x*x+y*y &lt;&lt; endl;    return 0;   }   </code>"}, {"owner": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "edited": false, "score": 0, "creation_date": 1448476155, "post_id": 33923584, "comment_id": 55608759, "body": "Yes, now it works perfectly, thank you! It was exactly what I wanted to ask, how to call in the main variables x and y that have been determined by a function without losing the values already determined for those variables in the function. You got what I wanted to ask, I just needed to add the declaration of the variable <i>plus</i> the declaration of the function itself, which is I was missing. You figured that out. Thank you again."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1448476857, "post_id": 33923584, "comment_id": 55609133, "body": "The code by WingedPanther73 above does not pick a point uniformly in the unit circle.  There will be more points selected by the above algorithm near the diagonals than there will be points selected near the axis, as the area of the points in the source-square mapping near the diagonals is larger than the area of the points in the source-square mapping near the axis."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1448478596, "post_id": 33923584, "comment_id": 55610141, "body": "just edit out the bad math, and this is a good answer for the programming issues.  For the math, how about r=1.0, angle=unif(0, 2*pi) and use sin and cos to convert that to x,y?"}, {"owner": {"reputation": 94, "user_id": 5530296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0SDbSJmRQiA/AAAAAAAAAAI/AAAAAAAAADI/QhLDyPIH4EM/photo.jpg?sz=128", "display_name": "WingedPanther73", "link": "https://stackoverflow.com/users/5530296/wingedpanther73"}, "edited": false, "score": 0, "creation_date": 1448482856, "post_id": 33923584, "comment_id": 55612313, "body": "I based the math on what was in the original question. My guess is he&#39;s a student learning how to call functions. Changing the implementation of unif could &quot;solve&quot; the problem of even distribution."}, {"owner": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1450361680, "post_id": 33923584, "comment_id": 56414737, "body": "@Yak wrong. The algorithm works perfectly to find uniformly generated points in the unit circle. Also, I don&#39;t understand what is &quot;the area of the points&quot; that you mention."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "edited": false, "score": 0, "creation_date": 1450367069, "post_id": 33923584, "comment_id": 56418426, "body": "@RandomGuy The algorithm first picks a point uniformly from the unit square.  Then it projects that point onto the unit circle.  The points in a wedge of the square, of angle theta, with the wedge&#39;s &quot;sharp corner&quot; at the origin, are projected onto an arc of the unit circle of angle theta by the projection.  The area of this wedge (as a fraction of the original square) give you the probability that the point is on that particular arc.  The area of the wedge is larger when pointed at the corners than when pointed at the middle of the face of the square.  Do I need to mspaint it?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "edited": false, "score": 0, "creation_date": 1450367247, "post_id": 33923584, "comment_id": 56418570, "body": "@RandomGuy Note that the above algorithm (by Panther) is different than your algorithm.  Yours does not have that particular flaw, due to your <code>while</code> loop.  Panther fails to discard points outside the unit circle, and hence screws up the probabilities."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1450367315, "post_id": 33923584, "comment_id": 56418621, "body": "@WingedPanther73 Nobody who posted in the comments before you will notice your comments unless you target them at someone.  Use @ user name to &quot;ping&quot; that username with a notification that you are responding to them."}], "tags": [], "owner": {"reputation": 94, "user_id": 5530296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0SDbSJmRQiA/AAAAAAAAAAI/AAAAAAAAADI/QhLDyPIH4EM/photo.jpg?sz=128", "display_name": "WingedPanther73", "link": "https://stackoverflow.com/users/5530296/wingedpanther73"}, "is_accepted": false, "score": -1, "last_activity_date": 1448474980, "creation_date": 1448474980, "answer_id": 33923584, "question_id": 33923338, "link": "https://stackoverflow.com/questions/33923338/variables-out-of-scope-in-main-when-called-by-reference-by-a-function-in-c/33923584#33923584", "title": "Variables out of scope in main when called by reference by a function in C++", "body": "<p>You have a few issues.\n1) you need to declare x and y inside main.\n2) you never, ever actually call point_on_circle. At all. \n3) finally, as others noted, you mask parameters x and y in your do loop. </p>\n\n<p>With all of that said, it looks like you're attempting to find a random point on the unit circle. with that in mind, I would remove the do loop entirely and just do this:</p>\n\n<pre><code>void point_on_circle(double&amp; x, double&amp; y)\n{\n    double r;\n    x = unif(-1.,1.);\n    y = unif(-1.,1.);\n    r = x*x + y*y;\n    x = x / sqrt(r);\n    y = y / sqrt(r);\n}\n</code></pre>\n\n<p>It gives the exact same result while avoiding a (potential) endless loop, and certainly avoids useless extra processing.</p>\n"}], "owner": {"reputation": 103, "user_id": 5567351, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93cfbb360023cbeb85b850d170228a16?s=128&d=identicon&r=PG&f=1", "display_name": "RandomGuy", "link": "https://stackoverflow.com/users/5567351/randomguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1448474980, "creation_date": 1448474106, "question_id": 33923338, "link": "https://stackoverflow.com/questions/33923338/variables-out-of-scope-in-main-when-called-by-reference-by-a-function-in-c", "title": "Variables out of scope in main when called by reference by a function in C++", "body": "<p>I have made the following code, whose output should generate a point uniformly at random on the unit circle centered at the origin:</p>\n\n<pre><code>#include \"unif.h\"\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nvoid point_on_circle(double&amp; x, double&amp; y)\n{\n double r;\n\ndo\n    {\n    double x = unif(-1.,1.);\n    double y = unif(-1.,1.);\n    double r = x*x + y*y;\n    }\n    while (r &gt;=1.0);\n\n    x = x / sqrt(r);\n    y = y / sqrt(r);\n}\n\nint main()\n{\n\n cout &lt;&lt; \"Pair of points on the circle found is \" &lt;&lt; x &lt;&lt; \" and \" &lt;&lt; y &lt;&lt; endl;\n cout &lt;&lt; \"Let's verify: x^2+y^2=\" &lt;&lt; x*x+y*y &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The header \"unif.h\" is just a file that contains a function void unif(double x, double y), that produces uniformly random numbers in the interval (x,y), and it works perfectly (already tested). \nThe problem is that when I build the program then it gives me (of course) the error in the main: </p>\n\n<p>\"error: 'x' was not declared in this scope\" </p>\n\n<p>which is clear since of course x is defined outside the main and never defined in main(). I cannot figure out how to tell the compiler that the values of x and y found by the function point_on_circle should be \"carried\" inside the main. How could I fix this code? \nThanks in advance</p>\n"}, {"tags": ["c++", "c", "private-members"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 7, "creation_date": 1448473853, "post_id": 33923238, "comment_id": 55607414, "body": "You made a good design decision."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 1, "creation_date": 1448473932, "post_id": 33923238, "comment_id": 55607463, "body": "Related: <a href=\"http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197\" rel=\"nofollow noreferrer\">drdobbs.com/cpp/how-non-member-functions-improve-encapsu/&hellip;</a>"}, {"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 5, "creation_date": 1448474004, "post_id": 33923238, "comment_id": 55607503, "body": "It wouldn&#39;t hurt if you posted a simplified code sample. Certainly the cognitive load required to read this would be smaller."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1448474147, "post_id": 33923238, "comment_id": 55607605, "body": "Whack it in a lambda and leave it private to the function itself until such time as it&#39;s needed outside?"}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1448474331, "post_id": 33923238, "comment_id": 55607725, "body": "@Leushenko Wouldn&#39;t this decrease performance? This is in a function that is called every frame in a video and is heavy in performance (detecting parts of faces)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474398, "post_id": 33923238, "comment_id": 55607765, "body": "@Jonathan., lambdas have no impact on performance. They are simply ad-hoc defined functions. They might affect program size, though."}], "answers": [{"comments": [{"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 1, "creation_date": 1448474062, "post_id": 33923304, "comment_id": 55607546, "body": "But I will have to add it to the class definition in the header (although private this seems like exposing implementation details too much)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1448474143, "post_id": 33923304, "comment_id": 55607602, "body": "Not true. The article by Sott Meyers in DDJ mentioned in one of the comments is worth a read."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474189, "post_id": 33923304, "comment_id": 55607637, "body": "@Jonathan. If it&#39;s important to you, it can be avoided by other techniques (see pimpl)"}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1448474233, "post_id": 33923304, "comment_id": 55607663, "body": "@RSahu Well, I&#39;m entitled to my own opinion, even in front of Scott Meyers, don&#39;t I?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1448474323, "post_id": 33923304, "comment_id": 55607716, "body": "@SomeWittyUsername, we all are. If you haven&#39;t read the article, please do. It might change your opinion. I happen to agree with Scott Meyers&#39; assessments."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474339, "post_id": 33923304, "comment_id": 55607732, "body": "We are not gender studies majors, we are software developers, so it should rarely be about difference of opinions. There are defined benefits of prefering free-standing functions to class members."}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474409, "post_id": 33923304, "comment_id": 55607770, "body": "Actually turns out I do need to access instance variables, so I&#39;ve had to make it a member function, and add it to the header. (coming from objective-c, putting a private method in a public header makes me want to cry)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474460, "post_id": 33923304, "comment_id": 55607791, "body": "@Jonathan, don&#39;t cry. I have a solution for you. It is called pimpl. I hate pimpl, of course. But you might fall in love with it."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474500, "post_id": 33923304, "comment_id": 55607812, "body": "@SergeyA It&#39;s funny that everyone addresses Meyers&#39; article but no one addresses my actual answer."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474531, "post_id": 33923304, "comment_id": 55607831, "body": "@Jonathan. Assuming it&#39;s not a lot of class state you could always pass the state to the non-member function."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474555, "post_id": 33923304, "comment_id": 55607847, "body": "@SomeWittyUsername, which part of your answer remained unadressed?"}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474566, "post_id": 33923304, "comment_id": 55607852, "body": "@SergeyA, I&#39;ve seen pimpl, and fell in hate with it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474620, "post_id": 33923304, "comment_id": 55607883, "body": "@Jonathan., OK. So you do not want to use pimpl, and you do not want to declare your private functions in the class header. Looks like C++ is not for you! :)"}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474632, "post_id": 33923304, "comment_id": 55607893, "body": "@SomeWittyUsername, at the top I said I didn&#39;t like the idea of putting it in the class definition in the header"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474679, "post_id": 33923304, "comment_id": 55607926, "body": "@SomeWittyUsername, you are suggesting to put a function into the class (as static member, I see) and we do believe in the generic case it is better to be left free-standing. What&#39;s not addressed?"}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474693, "post_id": 33923304, "comment_id": 55607938, "body": "@SergeyA, I really like a lot of C++, it is just this that I dislike severely. (though if I had a choice I&#39;d be writing this in objective-c)"}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 1, "creation_date": 1448474736, "post_id": 33923304, "comment_id": 55607972, "body": "@Jonathan. So you shouldn&#39;t like private functions at all. That&#39;s the way C++ natively works."}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1448474761, "post_id": 33923304, "comment_id": 55607985, "body": "@JamesAdkison, I thought about that, but it&#39;s about 5 different instance variables. I guess passing the instance (this) as the first parameter (like it is behind the scenes with member functions, wouldn&#39;t be a nice idea?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474770, "post_id": 33923304, "comment_id": 55607991, "body": "@Jonathan. on many accounts, C++ is not a true OO language (now feed me to the wolves), which actually makes it a perfect choice for me. I specifically enjoy it&#39;s non-OO."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474896, "post_id": 33923304, "comment_id": 55608044, "body": "@SergeyA  I gave at least 2 reasons for keeping it in class. &quot;Believe&quot; is not a valid contr-argument. Appealing to authority (Meyers) also isn&#39;t a valid argument"}, {"owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448474909, "post_id": 33923304, "comment_id": 55608052, "body": "@SergeyA, actually before I started doing anything in C++ I wrote a compiler (uni group project) for a custom language that would be how I wanted a language to be, and then when I got to C++ found there were quite a lot of things in it that I had liked. Just telling the world about private implementation is not good. An equivalent to objective-c extensions and I&#39;d be completely in love with C++."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "edited": false, "score": 0, "creation_date": 1448474962, "post_id": 33923304, "comment_id": 55608075, "body": "@Jonathan. Passing the class instance is fine but obviously the non-member function won&#39;t have access to non-public state/functions (i.e., you&#39;d have to declare it a friend of the class which may not be appealing to you)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448475115, "post_id": 33923304, "comment_id": 55608158, "body": "Putting a function which has nothing to do with the class into the class ensures all users of the class need to recompile their code when the new function is added (even if they never call it!), and relink when implemtation changed. On the other hand, free-standing function the separate .cpp is not even pulled unless used. To me this is an immediate benefit."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448487854, "post_id": 33923304, "comment_id": 55614821, "body": "@SergeyA I don&#39;t see major differences here. The function is definitely used in class (otherwise there is no justification putting it there) - it&#39;s called by some other in-class function (e.g., to do some generic math that doesn&#39;t depend on class properties but rather on input). See the original question, it&#39;s just a factoring out a piece of common code."}], "tags": [], "owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "is_accepted": false, "score": 0, "last_activity_date": 1448474397, "last_edit_date": 1448474397, "creation_date": 1448473995, "answer_id": 33923304, "question_id": 33923238, "link": "https://stackoverflow.com/questions/33923238/private-c-member-function-vs-c-function/33923304#33923304", "title": "Private C++ member function vs C function", "body": "<p>Yes. Putting the function in class defines scope and context of it. This makes maintenance easier and also will allow you to extend its functionality in the future without significant code rewriting. Actually, in such cases I usually prefer making the function static in the class, i.e., meeting somewhere in the middle.</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4718629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZMe5.png?s=128&g=1", "display_name": "Kamal Sadek", "link": "https://stackoverflow.com/users/4718629/kamal-sadek"}, "is_accepted": false, "score": 4, "last_activity_date": 1448474510, "creation_date": 1448474510, "answer_id": 33923454, "question_id": 33923238, "link": "https://stackoverflow.com/questions/33923238/private-c-member-function-vs-c-function/33923454#33923454", "title": "Private C++ member function vs C function", "body": "<p>Well, if it's any addition to the argument, the newest <a href=\"https://github.com/isocpp/CppCoreGuidelines\" rel=\"nofollow\">CppCoreGuidelines</a> say that you should \"<a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#-c5-place-helper-functions-in-the-same-namespace-as-the-class-they-support\" rel=\"nofollow\">C.5: Place helper functions in the same namespace as the class they support</a>\". So they shouldn't be a part of the actual class, but part of the namespace that they reside in.</p>\n"}, {"tags": [], "owner": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "is_accepted": false, "score": 1, "last_activity_date": 1448474779, "creation_date": 1448474779, "answer_id": 33923521, "question_id": 33923238, "link": "https://stackoverflow.com/questions/33923238/private-c-member-function-vs-c-function/33923521#33923521", "title": "Private C++ member function vs C function", "body": "<p>If you add it to the class then it becomes part of the classes signature.\nAs such making changes to the function signature would change the class signature. Given it would be a private function it is not likely that you would gain much by exposing it in that way.</p>\n\n<p>If though it needs to access internals of the class then having as part of the class would likely simplify its implementation.</p>\n\n<p>If it does not need to access the internals you can make add it to an anonymous namespace within the cpp file. That way the function symbol will not be exposed anywhere that is is not needed.</p>\n"}, {"tags": [], "owner": {"reputation": 5459, "user_id": 1734730, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L8dDj.jpg?s=128&g=1", "display_name": "Nathan Cooper", "link": "https://stackoverflow.com/users/1734730/nathan-cooper"}, "is_accepted": false, "score": 1, "last_activity_date": 1449672189, "last_edit_date": 1491982277, "creation_date": 1448474797, "answer_id": 33923528, "question_id": 33923238, "link": "https://stackoverflow.com/questions/33923238/private-c-member-function-vs-c-function/33923528#33923528", "title": "Private C++ member function vs C function", "body": "<p>(Sort of an extended comment)</p>\n\n<p>You've declared a free function in the .cpp file.\nThis a good design decision as other answers point out. The clearest thing you can have is a method only visible from that .cpp file that can't see or change state. I might be tempted to put it in the same namespace as the class as per the CppCoreGuidelines. </p>\n\n<p>Equivilently, you could have declared a <code>private static</code> member function in your header file. This is <code>static</code> in the C#/Java sense rather than in either of the C senses (<a href=\"https://softwareengineering.stackexchange.com/questions/141871/false-friends-keyword-static-in-c-compared-to-c-c-and-java\">C++ has all of these meanings</a>). However, I don't see the benifit as the only thing you gain is unnecessary recompilations.</p>\n"}], "owner": {"reputation": 51650, "user_id": 191463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f3b9829c592fd7617525afc56118a629?s=128&d=identicon&r=PG", "display_name": "Jonathan.", "link": "https://stackoverflow.com/users/191463/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1449672189, "creation_date": 1448473746, "question_id": 33923238, "link": "https://stackoverflow.com/questions/33923238/private-c-member-function-vs-c-function", "title": "Private C++ member function vs C function", "body": "<p>I have a C++ class, and in one of the member functions there is a duplicate section of code. So I've extracted this out into a function, however only this member function will call this new function. At the moment it's just a c function defined in the cpp file and not declared anyway else. </p>\n\n<p>Is there any advantage to making this a private C++ member function, the code in the function itself doesn't use any instead variables of the class.</p>\n"}, {"tags": ["c++", "regex", "pcre"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1448640304, "post_id": 33923192, "comment_id": 55679729, "body": "Just a FYI. The title states <code>backreferences</code>, but backreferences are constructs in the regular expression that refer to captured data. On the replacement side, capture buffers are just variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1448640979, "post_id": 33923192, "comment_id": 55680047, "body": "Also, I noticed in your code (<a href=\"http://rextester.com/FKH42412\" rel=\"nofollow noreferrer\">this one</a>) that your regex contains 4 capture groups. Yet, you are trying to substitute <code>$1234</code>. That is capture group number <code>1,234</code> not capture group 1,2,3,4. For a real test, programmatically create a regex with about 10,000 capture groups. Set an appropriate subject string. Then try to do a substitution using $1234."}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1448648415, "post_id": 33923192, "comment_id": 55683282, "body": "@sln I had to test for various scenerios, the example code is just one of them. I have tested with $1111 with more than 1111 captured groups and it gave correct result. Anyway, the question is <a href=\"http://stackoverflow.com/a/33928343/3744681\">solved</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 1, "creation_date": 1448479602, "post_id": 33923416, "comment_id": 55610679, "body": "<code>${112}</code> and <code>${1111}</code> worked, may be <code>$9999</code> (4, 9s) exists too. I am starting to think that there is no limit...."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1448482233, "post_id": 33923416, "comment_id": 55611998, "body": "Could you please let me know how you test? I have just tried to use <code>&#39;${100}&#39;</code> in the replacement pattern, and <a href=\"http://ideone.com/RZXbGu\" rel=\"nofollow noreferrer\">it returned as a literal <code>${100}</code></a>."}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1448482393, "post_id": 33923416, "comment_id": 55612086, "body": "I think so.. PHP uses pcre. And the max size of pattern in pcre depends on the configuration on which it was built. That&#39;s 10million match, 10 million recursive match and 250 nested parentheses by default conf... It&#39;s literally unlimited..:D"}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1448482494, "post_id": 33923416, "comment_id": 55612139, "body": "I am doing it with c++ program with the original pcre (pcre2) library.. the code is pretty long. though i can add it to the post if you want.."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 1, "creation_date": 1448482984, "post_id": 33923416, "comment_id": 55612373, "body": "Well, it would be great. I will try to run the tests on my end, too."}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1448483649, "post_id": 33923416, "comment_id": 55612695, "body": "done, added a link to rextester. you will need to link it with pcre2 library to build it..."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 2, "creation_date": 1448506514, "post_id": 33923416, "comment_id": 55620500, "body": "Note that the replacement limit in PHP is due to PHP&#39;s implementation of <code>preg_replace</code> (<a href=\"https://github.com/php/php-src/blob/master/ext/pcre/php_pcre.c#L974\" rel=\"nofollow noreferrer\">preg_get_backref</a> specifically), not PCRE&#39;s limitation. Anyway, the part about PHP totally derails from the question, which asks for the limitation in PCRE library. I suggest removing it altogether and post them in a separate Q&amp;A."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1469684692, "last_edit_date": 1592644375, "creation_date": 1448474387, "answer_id": 33923416, "question_id": 33923192, "link": "https://stackoverflow.com/questions/33923192/how-many-captured-groups-are-supported-by-pcre2-substitute-function/33923416#33923416", "title": "How many captured groups are supported by pcre2_substitute() function?", "body": "<h1>PCRE2 package</h1>\n<p>It is written in <em>pcre2-10.20\\README</em> that <em>PCRE2 has a counter that limits the depth of nesting of parentheses in a pattern. This limits the amount of system stack that a pattern uses when it is compiled. The default is 250, but you can change it by setting, for  example, <code>--with-parens-nest-limit=500</code></em> and <em>PCRE2 has a counter that can be set to limit the amount of resources it uses when matching a pattern. If the limit is exceeded during a match, the match fails. The default is ten million. You can change the default by setting, for example, <code>--with-match-limit=500000</code></em>.</p>\n<p>So, it seems that the number of backreferences</p>\n<ul>\n<li>is NOT hardcoded into PCRE2</li>\n<li>is most probably dependant on the size if the <em>match limit</em> or <em>match limit recursion</em> parameters.</li>\n</ul>\n<p>Since you are building the library yourself, you can increase that even further.</p>\n<h1>PCRE Online reference</h1>\n<p>From <a href=\"http://www.regular-expressions.info/backref.html\" rel=\"nofollow noreferrer\">regular-expressions.info</a>:</p>\n<blockquote>\n<p>Most regex flavors support up to <strong>99</strong> capturing groups and double-digit backreferences. So <code>\\99</code> is a valid backreference if your regex has 99 capturing groups.</p>\n</blockquote>\n<p>And <a href=\"http://www.regular-expressions.info/refcapture.html\" rel=\"nofollow noreferrer\"><em>Regular Expression Reference: Capturing Groups and Backreferences</em> page</a>:</p>\n<blockquote>\n<p>Backreference <code>\\1</code> through <code>\\9</code>   <br/>\nBackreference  <code>\\10</code> through <code>\\99</code></p>\n</blockquote>\n<p>Note that by &quot;most&quot; the author must be referring to the major regex engines (PHP, JavaScript, Python, .NET), as opposed to, POSIX BRE, POSIX ERE, GNU BRE, GNU ERE regex flavors that only support backreferences up to <code>\\9</code>.</p>\n<p>However, in pcre.txt, there is a line.</p>\n<blockquote>\n<p><code>\\ddd</code> \u00a0\u00a0\u00a0   character with octal code ddd, or backreference</p>\n</blockquote>\n<p>So, it is possible to have 999 groups according to this document.</p>\n"}, {"comments": [{"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1448877465, "post_id": 33928343, "comment_id": 55747238, "body": "@sln Good point. Added a brief example and reference the first time it&#39;s mentioned."}], "tags": [], "owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "is_accepted": true, "score": 3, "last_activity_date": 1448877458, "last_edit_date": 1448877458, "creation_date": 1448494918, "answer_id": 33928343, "question_id": 33923192, "link": "https://stackoverflow.com/questions/33923192/how-many-captured-groups-are-supported-by-pcre2-substitute-function/33928343#33928343", "title": "How many captured groups are supported by pcre2_substitute() function?", "body": "<p>The maximum number of capturing groups is <strong>65,535</strong>. And this is also the maximum group number that can be backreferenced in the pattern or in the replacement.</p>\n\n<p>However, generally speaking, a match will probably reach another limit before allowing that big amount of groups: e.g. the maximum length of the subject string, or the number of times <code>match()</code> is called internally (in total, or recursively), though match limits can be increased. For detailed information about match limits, see \"<a href=\"http://www.pcre.org/current/doc/html/pcre2api.html#matchcontext\" rel=\"nofollow\">The match context</a>\" in <strong><a href=\"http://www.pcre.org/current/doc/html/pcre2api.html\" rel=\"nofollow\">pcre2api</a></strong>.</p>\n\n<hr>\n\n<h2>From <a href=\"http://www.pcre.org/current/doc/html/pcre2limits.html\" rel=\"nofollow\">pcre2limits man page</a></h2>\n\n<blockquote>\n  <p>There is no limit to the number of parenthesized subpatterns, \n  but there can be no more than 65,535 capturing subpatterns.</p>\n  \n  <p>There is, however, a limit to the depth of nesting of parenthesized \n  subpatterns of all kinds. This is imposed in order to limit the amount of \n  system stack used at compile time. The limit can be specified when PCRE2 \n  is built; the default is 250.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The maximum number of named subpatterns is 10,000.</p>\n</blockquote>\n\n<p><sup>By Philip Hazel. Last updated: 25 November 2014. - *As of PCRE2 version 10.20</sup></p>\n\n<hr>\n\n<h3>Size limitations in <a href=\"http://www.pcre.org/original/doc/html/pcrelimits.html\" rel=\"nofollow\">PCRE</a> and <a href=\"http://www.pcre.org/current/doc/html/pcre2limits.html\" rel=\"nofollow\">PCRE2</a></h3>\n\n<p>PCRE and PCRE2 have the same limits:</p>\n\n<ul>\n<li><p>All values in repeating <strong>quantifiers</strong> are limited to 65,535.</p></li>\n<li><p>Unlimited number of <strong>parenthesized subpatterns</strong><br>\n(though it's limited to the depth of nesting of parenthesized subpatterns of all kinds).</p></li>\n<li><p>65,535 <strong>capturing subpatterns</strong>.</p></li>\n<li><p>10,000 <strong>named subpatterns</strong>.</p></li>\n<li><p>The default maximum <strong>depth of nested parentheses</strong> is 250<br>\n(value of <code>PCRE2_CONFIG_PARENSLIMIT</code>).</p></li>\n<li><p>The maximum length of <strong>names</strong> for named subpattern is 32 code units.<br>\n<sup>A char is represented by 1+ <a href=\"http://unicode.org/glossary/#code_unit\" rel=\"nofollow\">code units</a> (depending on encoding). E.g. in UTF-8 \"\u00c7\" has 2 code units: 0xC3 0x87</sup></p></li>\n<li><p>There is no limit to the number of <strong>backward references</strong>.</p></li>\n<li><p>The limit to the number of <strong>forward references</strong> to subsequent subpatterns is around 200,000.</p></li>\n<li><p>Names used in <strong>control verbs</strong> are limited to 255 (8-bit) and 65,535 (16 or 32-bit).</p></li>\n<li><p>The default value for <code>PCRE2_CONFIG_MATCHLIMIT</code> is 10,000,000 (10m).</p></li>\n<li><p>The default value for <code>PCRE2_CONFIG_RECURSIONLIMIT</code> is 10,000,000 (10m).<br>\n(<em>this limit only applies if it's set smaller than <code>MATCH_LIMIT</code></em>).</p></li>\n<li><p>The maximum length of a <strong>compiled pattern</strong> is 64K code units if compiled with the default internal linkage size of 2 (see the <a href=\"http://www.pcre.org/current/doc/html/pcre2build.html\" rel=\"nofollow\">pcre2build documentation</a> for details).</p></li>\n<li><p>The maximum length of a <strong>subject string</strong> is the largest positive number that an integer variable can hold (may be ~1.8E+19). However, the available stack space may limit the size of a subject string that can be processed by certain patterns.<br>\nThe maximum length (in code units) of a subject string is one less than the largest number a <code>PCRE2_SIZE</code> variable can hold. <code>PCRE2_SIZE</code> is an unsigned integer type, usually defined as <code>size_t</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 2, "accepted_answer_id": 33928343, "answer_count": 2, "score": 4, "last_activity_date": 1469684692, "creation_date": 1448473579, "last_edit_date": 1448704885, "question_id": 33923192, "link": "https://stackoverflow.com/questions/33923192/how-many-captured-groups-are-supported-by-pcre2-substitute-function", "title": "How many captured groups are supported by pcre2_substitute() function?", "body": "<p>I am using <code>pcre2_substitute()</code> function in my c++ project to perform regex replace:</p>\n\n<pre><code>int ret=pcre2_substitute(\n  re,                    /*Points to the compiled pattern*/\n  subject,               /*Points to the subject string*/\n  subject_length,        /*Length of the subject string*/\n  0,                     /*Offset in the subject at which to start matching*/\n  rplopts,               /*Option bits*/\n  0,                     /*Points to a match data block, or is NULL*/\n  0,                     /*Points to a match context, or is NULL*/\n  replace,               /*Points to the replacement string*/\n  replace_length,        /*Length of the replacement string*/\n  output,                /*Points to the output buffer*/\n  &amp;outlengthptr          /*Points to the length of the output buffer*/\n);\n</code></pre>\n\n<p><a href=\"http://www.pcre.org/current/doc/html/pcre2_substitute.html\" rel=\"nofollow\">This is the man page of the function</a>. It doesn't say how many captured groups are possible. I have tested that <code>$01</code>, <code>${6}</code>, <code>$12</code> works, but what is the limit?</p>\n\n<p>I checked if there's a digit limit like the C++ <code>std::regex</code>, but there isn't. <code>$000000000000001</code> works as <code>$1</code> while in <code>std::regex</code> it would mean <code>$00</code> and the rest would be treated as string.</p>\n\n<p>The code I am using for testing is <a href=\"http://rextester.com/FKH42412\" rel=\"nofollow\">this one</a>.\nYou will need <a href=\"http://www.pcre.org/current/doc/html/pcre2.html\" rel=\"nofollow\">pcre2</a> library to run this code.</p>\n"}, {"tags": ["c++", "node.js", "node-modules", "node.js-addon"], "comments": [{"owner": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 1, "creation_date": 1448473891, "post_id": 33923106, "comment_id": 55607433, "body": "I worked on a c++ project that used chromium embedded framework where I would write native C++ functions and bind them to global &quot;window&quot; object to call them from anywhere. Not sure if that helps. Just wanted to share."}, {"owner": {"reputation": 12401, "user_id": 74660, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ff7369fbbbf4d667d32a9747d8f8cc69?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/74660/lucas"}, "reply_to_user": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 0, "creation_date": 1448474085, "post_id": 33923106, "comment_id": 55607562, "body": "@Sreekar: Thanks for the quick response. What is a global window object? I tried to make the javascript-function global inside the C++-Module, but I couldn&#39;t figure out how ..."}, {"owner": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 0, "creation_date": 1448474343, "post_id": 33923106, "comment_id": 55607734, "body": "I&#39;m not aware of native programming with NodeJS. The global window object is the &quot;window&quot; object which represent browser window. (<a href=\"http://www.w3schools.com/jsref/obj_window.asp\" rel=\"nofollow noreferrer\">w3schools.com/jsref/obj_window.asp</a>). If I want to call any JS function in the current JS context, I can call it using an inbuilt CEF function. All JS functions and objects were available to me using <i>V8Context</i> object."}, {"owner": {"reputation": 12401, "user_id": 74660, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ff7369fbbbf4d667d32a9747d8f8cc69?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/74660/lucas"}, "reply_to_user": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 0, "creation_date": 1448474487, "post_id": 33923106, "comment_id": 55607804, "body": "@Sreekar: Ah, thanks very interesting! Yeah, I think I need something like that, but for node."}, {"owner": {"reputation": 9285, "user_id": 1218408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YqwCY.png?s=128&g=1", "display_name": "ZachB", "link": "https://stackoverflow.com/users/1218408/zachb"}, "edited": false, "score": 1, "creation_date": 1474583107, "post_id": 33923106, "comment_id": 66602971, "body": "Checkout how the streaming methods (e.g. streamPNG, streamPDF) are implemented in <a href=\"https://github.com/Automattic/node-canvas/blob/master/src/Canvas.cc#L449\" rel=\"nofollow noreferrer\">node-canvas</a>. <a href=\"https://github.com/nodejs/nan/blob/master/doc/node_misc.md#api_nan_make_callback\" rel=\"nofollow noreferrer\">Nan::MakeCallback</a> or <a href=\"https://github.com/nodejs/nan/blob/master/doc/maybe_types.md#api_nan_call\" rel=\"nofollow noreferrer\">Nan::Call</a> are probably of use to you."}], "owner": {"reputation": 12401, "user_id": 74660, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ff7369fbbbf4d667d32a9747d8f8cc69?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/74660/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1474582692, "creation_date": 1448473291, "last_edit_date": 1474582692, "question_id": 33923106, "link": "https://stackoverflow.com/questions/33923106/invoke-javascript-callback-repeatedly-from-c-module-in-node-js", "title": "Invoke javascript callback repeatedly from C++ module in node.js", "body": "<p>So I am writing a node.js module in C++ which processes data from a camera. I want to invoke a callback function in my <code>app.js</code> file whenever new data is available. </p>\n\n<p><strong>What I have at the moment</strong></p>\n\n<p>Right now I have in my node javascript file (<code>app.js</code>) the following code. Every second it calls a function in my C++-Module and returns the number of frames that have been processed so far:</p>\n\n<pre><code>setInterval(function () {\n        var counter = MyCPPModule.NumberOfFrames();\n        console.log(counter);\n    }, 1000);\n</code></pre>\n\n<p>In my C++ file I have the following functions.</p>\n\n<p><strong>1.)</strong> I have a function to get the number of frames - the function that gets called from javascript as above- , where <code>frameCounter</code> refers to a global variable. </p>\n\n<pre><code>void NumberOfFrames(const FunctionCallbackInfo&lt;Value&gt;&amp; args) {\n    Isolate* isolate = Isolate::GetCurrent();\n    HandleScope scope(isolate);\n    Local&lt;Integer&gt; retval = v8::Integer::New(isolate, frameCounter);\n    args.GetReturnValue().Set(retval);\n}\n</code></pre>\n\n<p><strong>2.)</strong> And I have a C++-callback function in the C++ module that gets triggered whenever a new frame is available (just to be clear, this callback is independent of node.js and has nothing directly to do with node.js-callbacks).</p>\n\n<pre><code>void NewFrameAvailable(char** imageBuffer, /* more arguments */)\n{\n// ... \n     frameCounter++;  // increment global variable\n// ...\n}\n</code></pre>\n\n<p>All of this works fine. </p>\n\n<p><strong>What I would like to accomplish</strong></p>\n\n<p>Instead of registering a function with <code>setInterval</code> in my javascript code. I would like to somehow register a function with my C++ module that gets called repeatedly whenever a new frame is available from the camera. It should behave like <code>setInterval</code>, but instead of being triggered every second, it gets triggered when a frame is available. </p>\n\n<p>The code that I am hoping for on the javascript-side would be something like:</p>\n\n<pre><code>MyCPPModule.setMyFrameInterval(function (msg) {\n        console.log(msg);\n    });\n</code></pre>\n\n<p>Inside the C++ Module I would like to do something like:</p>\n\n<pre><code>void NewFrameAvailable(char** imageBuffer, /* more arguments */)\n{ \n    // ... \n    frameCounter++;  // increment global variable\n    Local&lt;Function&gt; cb = /* WHAT DO I DO HERE*/ ;\n    Isolate*isolate = /* WHAT DO I DO HERE */;\n    const unsigned argc = 1;\n    Local&lt;Value&gt; argv[argc] = { String::NewFromUtf8(isolate, std::to_string(frameCounter)) };\n    cb-&gt;Call(Null(isolate), argc, argv);\n    // ...\n}\n</code></pre>\n\n<p>and a function that registers the javascipt-callback with <code>setMyFrameInterval</code>:  </p>\n\n<pre><code>void setMyFrameInterval(const FunctionCallbackInfo&lt;Value&gt;&amp; args) {\n    Local&lt;Function&gt; cb = Local&lt;Function&gt;::Cast(args[0]); // make this somehow global? \n    Isolate*isolate = args.GetIsolate()\n    //...\n} \n</code></pre>\n\n<p>So, how can I invoke the javascript callback from <code>NewFrameAvailable</code> (the C++ callback function which gets triggered when frames are available). I think I basically have to make the javascript function somehow globally available in the <code>setMyFrameInterval</code> function so that it is also known to the <code>newFrameAvailable</code> function. How do I do this?</p>\n"}, {"tags": ["c++", "procedural-generation"], "comments": [{"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448474331, "post_id": 33923074, "comment_id": 55607726, "body": "Aren&#39;t the feature points supposed to be generated once per &quot;image&quot;? I think you are generating the feature points for each point, you need to generate the feature points once (constructor of <code>WorleyNoise</code> for example) and then use those points for determining the color of every point in image. If you need another image, then you need to re-generate the feature points."}, {"owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448476355, "post_id": 33923074, "comment_id": 55608869, "body": "I&#39;m honestly not sure now. When I insert the point should I save them to a list then cycle through them and call the distance function for their surrounding points?"}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448482340, "post_id": 33923074, "comment_id": 55612054, "body": "I think so. If the feature points remain the same for the whole image, then you would get those nice Voronoi-diagram-like shapes, instead of the random points. You don&#39;t need to cycle through all the points though, that is what your program does, cycles through only the points that are in the same cell as the point that you are looking at or the 8 neighboring cells."}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448482509, "post_id": 33923074, "comment_id": 55612150, "body": "Looking at your code more carefully, I think your random number generator is repeatable (has a constant seed), so it is supposed to generate the same feature points every time for every cell (the seed is based on cell coordinate). So, I don&#39;t know exactly what is wrong that the feature points don&#39;t stay the same. I&#39;ll look a bit more though to see if I can find anything."}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448483353, "post_id": 33923074, "comment_id": 55612563, "body": "Have you tried scaling the image? So, the three lines that you calculate cube location <code>int evalX = ( int ) floorf( input.m_x );</code>, what happens if you change those to <code>int evalX = ( int ) floorf( input.m_x &#47; scale);</code> where <code>scale</code> is a number larger than 1, let&#39;s say <code>10.0</code> or <code>100.0</code>."}, {"owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448486604, "post_id": 33923074, "comment_id": 55614185, "body": "Changing the scale will just cause the image to be all white. There is no noise at all."}, {"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1448487771, "post_id": 33923074, "comment_id": 55614775, "body": "<code>pngwriter</code> is expecting values in [0,1] range for the color. I think you&#39;ll need to scale your coordinates down as @triple_r said and then scale your distance result down to get something more in the proper range."}, {"owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "edited": false, "score": 0, "creation_date": 1448490973, "post_id": 33923074, "comment_id": 55616211, "body": "I ran a test to see the distribution of values. On a 200x200 pixel picture only about 10 values were not 0 or 1 exactly."}], "owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448473182, "creation_date": 1448473182, "question_id": 33923074, "link": "https://stackoverflow.com/questions/33923074/worley-noise-not-producing-correct-output", "title": "Worley Noise Not Producing Correct Output", "body": "<p>I am attempting to create a Worley Noise function. I looked around and read the original paper by Steven Worley and wrote my implementation. The output does not appear to be correct though. I expect to see something like this.</p>\n\n<p><a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Worley.jpg/200px-Worley.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Worley.jpg/200px-Worley.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But it outputs this. </p>\n\n<p><a href=\"https://i.stack.imgur.com/jleVE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jleVE.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm not sure what I am doing wrong. I have looked online at other peoples programs and I do it the same way. Here is the code.</p>\n\n<pre><code>float WorleyNoise::noise( Vector3 input ) {\n    unsigned int lastRandom;\n    unsigned int numberFeaturePoints;\n\n    Vector3 randomDiff;\n    Vector3 featurePoint;\n\n    int cubeX;\n    int cubeY;\n    int cubeZ;\n\n    float distanceArray[ 3 ];\n    for ( int i = 0; i &lt; 3; i++ ) {\n        distanceArray[ i ] = 6666.0f;\n    }\n\n    int evalX = ( int ) floorf( input.m_x );\n    int evalY = ( int ) floorf( input.m_y );\n    int evalZ = ( int ) floorf( input.m_z );\n\n    for ( int i = -1; i &lt; 2; ++i ) {\n        for ( int j = -1; j &lt; 2; ++j ) {\n            for ( int k = -1; k &lt; 2; ++k ) {\n                cubeX = evalX + i;\n                cubeY = evalY + j;\n                cubeZ = evalZ + k;\n\n                lastRandom = lcg_random( hash( ( unsigned int ) ( cubeX + m_seed ), ( unsigned int ) cubeY, ( unsigned int ) cubeZ ) );\n                numberFeaturePoints = lookup( lastRandom );\n\n                for ( unsigned int l = 0; l &lt; numberFeaturePoints; ++l ) {\n                    lastRandom = lcg_random( lastRandom );\n                    randomDiff.m_x = ( float ) lastRandom / 0x100000000;\n\n                    lastRandom = lcg_random( lastRandom );\n                    randomDiff.m_y = ( float ) lastRandom / 0x100000000;\n\n                    lastRandom = lcg_random( lastRandom );\n                    randomDiff.m_z = ( float ) lastRandom / 0x100000000;\n\n                    featurePoint.m_x = randomDiff.m_x + ( float ) cubeX;\n                    featurePoint.m_y = randomDiff.m_y + ( float ) cubeY;\n                    featurePoint.m_z = randomDiff.m_z + ( float ) cubeZ;\n\n                    insert( distanceArray, euclidian_distance( input, featurePoint ) );\n                }\n            }\n        }\n    }\n\n    return Utility::clampf( combine_function_1( distanceArray ), 0.0f, 1.0f );\n}\n\nunsigned int WorleyNoise::hash( unsigned int i, unsigned int j, unsigned int k ) {\n    return ( unsigned int ) ( ( ( ( ( ( OFFSET_BASIS ^ ( unsigned int ) i ) * FNV_PRIME ) ^ ( unsigned int ) j ) * FNV_PRIME ) ^ ( unsigned int ) k ) * FNV_PRIME );\n}\n\nunsigned int WorleyNoise::lcg_random( unsigned int last ) {\n    return ( unsigned int ) ( ( 1103515245 * last + 12345 ) % 0x100000000 );\n}\n\n void WorleyNoise::insert( float arr[] , float value ) {\n    float temp = 0.0f;\n\n    for ( int i = 2; i &gt;= 0; i-- ) {\n        if ( value &gt; arr[ i ] ) {\n            break;\n        }\n\n        temp = arr[ i ];\n        arr[ i ] = value;\n        if ( i + 1 &lt; 3 ) {\n            arr[ i + 1 ] = temp;\n        }\n    }\n}\n\n unsigned int WorleyNoise::lookup( unsigned int value ) {\n    value = value &amp; 0xffffffff;\n    if ( value &lt; 393325350 )\n        return 1;\n    if ( value &lt; 1022645910 )\n        return 2;\n    if ( value &lt; 1861739990 )\n        return 3;\n    if ( value &lt; 2700834071 )\n         return 4;\n    if ( value &lt; 3372109335 )\n         return 5;\n    if ( value &lt; 3819626178 )\n         return 6;\n    if ( value &lt; 4075350088 )\n        return 7;\n    if ( value &lt; 4203212043 )\n        return 8;\n    return 9;\n}\n\nfloat WorleyNoise::euclidian_distance( Vector3 p1, Vector3 p2 ) {\n    return ( p1.m_x - p2.m_x ) * ( p1.m_x - p2.m_x ) + ( p1.m_y - p2.m_y ) * ( p1.m_y - p2.m_y ) + ( p1.m_z - p2.m_z ) *  ( p1.m_z - p2.m_z );\n}\n\nfloat WorleyNoise::combine_function_1( float arr[] ) {\n    return arr[ 0 ];\n}\n</code></pre>\n\n<p>I then output the results like so with <a href=\"http://pngwriter.sourceforge.net/\" rel=\"nofollow noreferrer\">pngwriter</a>.</p>\n\n<pre><code>void WorleyNoise::to_png( const std::string &amp;file, unsigned int width, unsigned int height ) {\n    pngwriter png( width, height, 0, file.c_str() );\n\n    for ( unsigned int i = 0; i &lt; width; i++ ) {\n        for ( unsigned int j = 0; j &lt; height; j++ ) {\n            float value = noise( Vector3( i, j, 0 ) );\n\n            png.plot( i, j, ( double ) value, ( double ) value, ( double ) value );\n        }\n    }\n\n    png.close();\n}\n</code></pre>\n\n<p>So what is going wrong here? I've looked all over, especially at <a href=\"https://aftbit.com/cell-noise-2/\" rel=\"nofollow noreferrer\">this tutorial</a> and cannot figure out why it does not output correctly. Any help is greatly appreciated, thanks.</p>\n"}, {"tags": ["c++", "sockets", "tcp"], "comments": [{"owner": {"reputation": 5517, "user_id": 1227469, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d8fc267b1c19301d8baf672ebf9eb7b?s=128&d=identicon&r=PG", "display_name": "JBentley", "link": "https://stackoverflow.com/users/1227469/jbentley"}, "edited": false, "score": 4, "creation_date": 1448498740, "post_id": 33922962, "comment_id": 55618628, "body": "You got an answer to your original question. Attempting to implement that answer caused you to get new errors. You should not deface your post by adding the errors, which make no sense in the context of the original question which is still in the post. Instead, post a new question for the errors. I&#39;ve edited the question back to how it was to preserve the integrity of the answer"}], "answers": [{"comments": [{"owner": {"reputation": 1055, "user_id": 1139998, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/851a571ebb29bf6ba212d2b387f3a286?s=128&d=identicon&r=PG", "display_name": "ZZZ", "link": "https://stackoverflow.com/users/1139998/zzz"}, "edited": false, "score": 0, "creation_date": 1448498514, "post_id": 33923088, "comment_id": 55618584, "body": "After implementing your suggestion, I got some errors. Please look at my update."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1448473213, "creation_date": 1448473213, "answer_id": 33923088, "question_id": 33922962, "link": "https://stackoverflow.com/questions/33922962/c-multi-client-tcp-server/33923088#33923088", "title": "C++ Multi-Client TCP Server", "body": "<p>Yor <code>connFd</code> is a global variable, which you access from your main thread and all handling threads. This will not do! Imagine that - you've accepted the first connection and set the variable to the receiving socket. You've spawn the handling thread, which started reading. Next thing you know, another connection is coming along and you are receiving it as well! This very moment <code>connFd</code> points to the new connection, so the thread which is already using it will suddenly switch to the new connection! Of course it is not good.</p>\n\n<p>The way to fix this problem is to pass the connection to the thread in such a way that is is not shared across threads. And easiest way of doing so is to use C++ thread class.</p>\n\n<p>For example, this is code fragment illustrating the above idea:</p>\n\n<pre><code>void handle_connection(int fd) {\n   ... &lt;your task1 code&gt;\n}\n\n... \nstd::vector&lt;std::thread&gt; threads;\n...\nint conn = accept(listenFd, (struct sockaddr *)&amp;clntAdd, &amp;len);\nthreads.push_back(std::thread(&amp;handle_connection, conn));\n...\n\n... (in the end)\nfor (auto&amp;&amp; t : threads)\n    t.join();\n</code></pre>\n"}], "owner": {"reputation": 1055, "user_id": 1139998, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/851a571ebb29bf6ba212d2b387f3a286?s=128&d=identicon&r=PG", "display_name": "ZZZ", "link": "https://stackoverflow.com/users/1139998/zzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6596, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1448498859, "creation_date": 1448472806, "last_edit_date": 1448498859, "question_id": 33922962, "link": "https://stackoverflow.com/questions/33922962/c-multi-client-tcp-server", "title": "C++ Multi-Client TCP Server", "body": "<p>I want to make a server and client program with TCP protocol using C++. The server must be able to handle multiple client at once. But the problem is for example, after starting the server, I run 2 clients with the server 's IP address and port as parameters. Next, both clients are sending data to server. At first, both clients could send data to server and the server was able read the data. But, once the server has received data from the second client, it seems that it stopped receiving from the first client. Do you have any solution?</p>\n\n<p>Here is the server code</p>\n\n<pre><code>using namespace std;\n\nvoid *task1(void *);\n\nstatic int connFd;\nvoid error(const char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\nint main(int argc, char* argv[])\n{\n    int pId, portNo, listenFd;\n    socklen_t len; //store size of the address\n    bool loop = false;\nstruct sockaddr_in svrAdd, clntAdd;\n\npthread_t threadA[3];\n\nif (argc &lt; 2)\n{\n    cerr &lt;&lt; \"Syntam : ./server &lt;port&gt;\" &lt;&lt; endl;\n    return 0;\n}\n\nportNo = atoi(argv[1]);\n\nif((portNo &gt; 65535) || (portNo &lt; 2000))\n{\n    cerr &lt;&lt; \"Please enter a port number between 2000 - 65535\" &lt;&lt; endl;\n    return 0;\n}\n\n//create socket\nlistenFd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n\nif(listenFd &lt; 0)\n{\n    cerr &lt;&lt; \"Cannot open socket\" &lt;&lt; endl;\n    return 0;\n}\n\nbzero((char*) &amp;svrAdd, sizeof(svrAdd));\n\nsvrAdd.sin_family = AF_INET;\nsvrAdd.sin_addr.s_addr = INADDR_ANY;\nsvrAdd.sin_port = htons(portNo);\n\n//bind socket\nif(bind(listenFd, (struct sockaddr *)&amp;svrAdd, sizeof(svrAdd)) &lt; 0)\n{\n    cerr &lt;&lt; \"Cannot bind\" &lt;&lt; endl;\n    return 0;\n}\n\n    listen(listenFd, 5);\n\n    int noThread = 0;\n\n    while (noThread &lt; 3)\n    {\n        socklen_t len = sizeof(clntAdd);\n        cout &lt;&lt; \"Listening\" &lt;&lt; endl;\n\n    //this is where client connects. svr will hang in this mode until           client conn\n        connFd = accept(listenFd, (struct sockaddr *)&amp;clntAdd, &amp;len);\n\n        if (connFd &lt; 0)\n        {\n            cerr &lt;&lt; \"Cannot accept connection\" &lt;&lt; endl;\n            return 0;\n        }\n        else   \n        {\n            cout &lt;&lt; \"Connection successful\" &lt;&lt; endl;\n        }\n\n        pthread_create(&amp;threadA[noThread], NULL, task1, NULL); \n\n        noThread++;\n    }\n\n    for(int i = 0; i &lt; 3; i++)\n    {\n        pthread_join(threadA[i], NULL);\n    }  \n}\n\nvoid *task1 (void *dummyPt)\n{\n    cout &lt;&lt; \"Thread No: \" &lt;&lt; pthread_self() &lt;&lt; endl;\n    char test[256];\n    bzero(test, 256);\n    bool loop = false;\n    while(!loop)\n    {       \n        bzero(test, 256);     \n        int n = read(connFd, test, 255);\n        if (n &lt; 0) error(\"ERROR reading from socket\");\n        printf(\"Here is the message: %s\\n\",test);            \n    }\n    cout &lt;&lt; \"\\nClosing thread and conn\" &lt;&lt; endl;\n    close(connFd);\n}\n</code></pre>\n\n<p>And the client code</p>\n\n<pre><code>using namespace std;\n\nint main (int argc, char* argv[])\n{\n    int listenFd, portNo;\n    bool loop = false;\n    struct sockaddr_in svrAdd;\n    struct hostent *server;\n\n    if(argc &lt; 3)\n    {\n        cerr&lt;&lt;\"Syntax : ./client &lt;host name&gt; &lt;port&gt;\"&lt;&lt;endl;\n        return 0;\n    }\n\n    portNo = atoi(argv[2]);\n\n    if((portNo &gt; 65535) || (portNo &lt; 2000))\n    {\n        cerr&lt;&lt;\"Please enter port number between 2000 - 65535\"&lt;&lt;endl;\n        return 0;\n    }       \n\n    //create client skt\n    listenFd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n\n    if(listenFd &lt; 0)\n    {   \n        cerr &lt;&lt; \"Cannot open socket\" &lt;&lt; endl;\n        return 0;\n    }\n\n    server = gethostbyname(argv[1]);\n\n    if(server == NULL)\n    {\n        cerr &lt;&lt; \"Host does not exist\" &lt;&lt; endl;\n        return 0;\n    }\n\n    bzero((char *) &amp;svrAdd, sizeof(svrAdd));\n    svrAdd.sin_family = AF_INET;\n\n    bcopy((char *) server -&gt; h_addr, (char *) &amp;svrAdd.sin_addr.s_addr, server -&gt; h_length);\n\n    svrAdd.sin_port = htons(portNo);\n\n    int checker = connect(listenFd,(struct sockaddr *) &amp;svrAdd, sizeof(svrAdd));\n\n    if (checker &lt; 0)\n    {\n        cerr &lt;&lt; \"Cannot connect!\" &lt;&lt; endl;\n        return 0;\n    }\n\n    //send stuff to server\n    for(;;)\n    {\n        char s[300];\n        //cin.clear();\n        //cin.ignore(256, '\\n');\n        cout &lt;&lt; \"Enter stuff: \";\n        bzero(s, 300);\n        cin.getline(s, 300);\n\n        write(listenFd, s, strlen(s));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 2, "creation_date": 1448472746, "post_id": 33922870, "comment_id": 55606785, "body": "you shouldn&#39;t swap buffers in-between <code>glBegin</code> and <code>glEnd</code>"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1448489547, "post_id": 33922870, "comment_id": 55615628, "body": "@Java_NewBie: Did my answer help you?"}], "answers": [{"comments": [{"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1448485323, "post_id": 33922930, "comment_id": 55613522, "body": "@Java_NewBie: Did my answer help you?"}], "tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 0, "last_activity_date": 1448472720, "creation_date": 1448472720, "answer_id": 33922930, "question_id": 33922870, "link": "https://stackoverflow.com/questions/33922870/opengl-squares-and-arrows/33922930#33922930", "title": "OpenGL Squares and Arrows", "body": "<p>Why did you swap buffers before <code>glEnd()</code> call:</p>\n\n<pre><code>int count = 1;\nfor (float y = 1; y &lt; 11; y++) {\n    y1 = y1 - 0.51;\n    y2 = y2 - 0.51;\n\n    float x2 = -2.0;\n    for (float x1 = -2.5; x1 &lt; 2.5; x1 = x1 + 0.51) {\n\n        glColor3f(windy[count], 1.0, 0.0);\n        glVertex2f(x1, y1);\n        glVertex2f(x1, y2);\n        glVertex2f(x2, y2);\n        glVertex2f(x2, y1);\n        count = count + 1;\n        x2 = x2 + 0.51;\n    }\n}\n\n//glutSwapBuffers(); // wrong place\nglEnd(); //End the glBegin Function\nglutSwapBuffers(); // Must be after draw operation\n</code></pre>\n\n<p>to draw arrow on the top of the shape must be even more:</p>\n\n<pre><code>int count = 1;\nfor (float y = 1; y &lt; 11; y++) {\n    y1 = y1 - 0.51;\n    y2 = y2 - 0.51;\n\n    float x2 = -2.0;\n    for (float x1 = -2.5; x1 &lt; 2.5; x1 = x1 + 0.51) {\n\n        glColor3f(windy[count], 1.0, 0.0);\n        glVertex2f(x1, y1);\n        glVertex2f(x1, y2);\n        glVertex2f(x2, y2);\n        glVertex2f(x2, y1);\n        count = count + 1;\n        x2 = x2 + 0.51;\n    }\n}\n\n//glutSwapBuffers(); // wrong place\nglEnd(); //End the glBegin Function\n\n// draw arrow\nglBegin(GL_LINE_LOOP);//start drawing a line loop\n        glVertex3f(-1.0f, 0.0f, 0.0f);//left of window\n        glVertex3f(0.0f, -1.0f, 0.0f);//bottom of window\n        glVertex3f(1.0f, 0.0f, 0.0f);//right of window\n        glVertex3f(0.0f, 1.0f, 0.0f);//top of window\n        glEnd();//end drawing of line loo\n\n\n// atlast we can swap our buffers\nglutSwapBuffers(); // Must be after draw operation\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4152547, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/CurCz.png?s=128&g=1", "display_name": "Java_NewBie", "link": "https://stackoverflow.com/users/4152547/java-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1448472720, "creation_date": 1448472520, "question_id": 33922870, "link": "https://stackoverflow.com/questions/33922870/opengl-squares-and-arrows", "title": "OpenGL Squares and Arrows", "body": "<p>i'm trying to create a square and on top of it  i'm creating an arrow. its like a 2D meter something similar to that. But i don't know how to create the arrow on top of the square.</p>\n\n<pre><code>int count = 1;\nfor (float y = 1; y &lt; 11; y++) {\n    y1 = y1 - 0.51;\n    y2 = y2 - 0.51;\n\n    float x2 = -2.0;\n    for (float x1 = -2.5; x1 &lt; 2.5; x1 = x1 + 0.51) {\n\n        glColor3f(windy[count], 1.0, 0.0);\n        glVertex2f(x1, y1);\n        glVertex2f(x1, y2);\n        glVertex2f(x2, y2);\n        glVertex2f(x2, y1);\n        count = count + 1;\n        x2 = x2 + 0.51;\n\n\n\n    }\n}\n\nglutSwapBuffers();\nglEnd(); //End the glBegin Function\n</code></pre>\n\n<p>And this is what i want to be on top of it.</p>\n\n<pre><code>glBegin(GL_LINE_LOOP);//start drawing a line loop\n        glVertex3f(-1.0f, 0.0f, 0.0f);//left of window\n        glVertex3f(0.0f, -1.0f, 0.0f);//bottom of window\n        glVertex3f(1.0f, 0.0f, 0.0f);//right of window\n        glVertex3f(0.0f, 1.0f, 0.0f);//top of window\n        glEnd();//end drawing of line loop\n</code></pre>\n"}, {"tags": ["c++", "user-interface", "opengl", "glut"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1448484936, "post_id": 33922765, "comment_id": 55613332, "body": "You should also provide the source code for the <code>loadSquare</code> function."}, {"owner": {"reputation": 175, "user_id": 4800907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd1b91ac79e7940bb3e2ed92fb043ec?s=128&d=identicon&r=PG&f=1", "display_name": "walzer91", "link": "https://stackoverflow.com/users/4800907/walzer91"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1448534524, "post_id": 33922765, "comment_id": 55632583, "body": "Thank you for your suggestion, I&#39;ve just added the code. Any idea?"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4800907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd1b91ac79e7940bb3e2ed92fb043ec?s=128&d=identicon&r=PG&f=1", "display_name": "walzer91", "link": "https://stackoverflow.com/users/4800907/walzer91"}, "edited": false, "score": 0, "creation_date": 1448614356, "post_id": 33945499, "comment_id": 55664909, "body": "Thank you so much! Your solution works perfectly with my project! I didn&#39;t know what glutBitmapCharacter() used to call internally, thanks even for your explanation!"}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 3, "last_activity_date": 1448564633, "creation_date": 1448564633, "answer_id": 33945499, "question_id": 33922765, "link": "https://stackoverflow.com/questions/33922765/opengl-text-changes-when-i-load-textures/33945499#33945499", "title": "openGL, text changes when I load textures", "body": "<p>You should disable <code>GL_TEXTURE_2D</code> before you draw the bitmap font. </p>\n\n<p>Internally, <code>glutBitmapCharacter()</code> uses <code>glBitmap</code>. This function maps the bitmap to a rectangle to the screen and generates a fragment for every framebuffer pixel in that rectangle where the bitmap is 1. Those fragments get the associated data from the values associated with the current raster position.</p>\n\n<p>The generated fragments are processed like every other fragment (i.e. the ones generated by drawing primitives like lines or triangles). So stuff like texturing, lighting, fog, blending and so on will also affect everything drawn by <code>glBitmap</code>. Due to the fact that all fragments generated by a single bitmap get the same associated data, they all will get the same texture coordinate. Since you left texturing on, the GL textures all of these fragments with the very same sample from the texture, so that they all appear in the same color.</p>\n"}], "owner": {"reputation": 175, "user_id": 4800907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd1b91ac79e7940bb3e2ed92fb043ec?s=128&d=identicon&r=PG&f=1", "display_name": "walzer91", "link": "https://stackoverflow.com/users/4800907/walzer91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 33945499, "answer_count": 1, "score": 0, "last_activity_date": 1448564633, "creation_date": 1448472223, "last_edit_date": 1448534618, "question_id": 33922765, "link": "https://stackoverflow.com/questions/33922765/opengl-text-changes-when-i-load-textures", "title": "openGL, text changes when I load textures", "body": "<p>I'm developing a C++ application and I need to use an interface made in openGL. I have a grey background, some squared textures over the background and some text written next to the textures. The text is yellow but when I click with mouse on the window or I change the textures, the text turns grey (a different grey from the background) and I don't know why! Here is the code and screenshots:</p>\n\n<pre><code>int main(int argc, char** argv){\n    [...]\n    glEnable(GL_DEPTH_TEST); \n    glDepthFunc(GL_LEQUAL);  \n    glShadeModel(GL_FLAT);   \n    glEnable(GL_BLEND);\n    glEnable(GL_POINT_SMOOTH);\n\n    // Render the scene\n    glutDisplayFunc(display);   \n    glutReshapeFunc(reshape);   \n\n    // Turn the flow of control over to GLUT \n    glutMainLoop();\n\n    [...]\n}\n\nvoid display(void){\n    glClearColor(0.2f, 0.2f, 0.2f, 0.5f); //Background color\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    // Set up viewing transformation, looking down -Z axis\n    glLoadIdentity();\n    gluLookAt(posx, 0, -g_fViewDistance, 0, 0, -1, 0, 1, 0); \n\n    // Render the scene\n    glMatrixMode(GL_COLOR);\n    glColor3f(1.0f, 1.0f, 0.0f); // Textcolor\n\n    drawOnScreen(); // Draw text on screen\n    glMatrixMode(GL_MODELVIEW);\n\n    loadSquare(); // Load texture\n    glutSwapBuffers();\n}\n\nvoid reshape(GLint width, GLint height){\n    interface-&gt;setWindowWidth(width);\n    interface-&gt;setWindowHeight(height);\n    glViewport(0, 0, g_Width, g_Height);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(65.0, (float)g_Width / g_Height, g_nearPlane, g_farPlane);\n    glMatrixMode(GL_MODELVIEW);\n}\n\nvoid printStringOnVideo(void* font, char* s){\n    if (s &amp;&amp; strlen(s)) {\n        while (*s) {\n            glutBitmapCharacter(font, *s);\n            s++;\n        }\n    }\n}\n\nvoid drawOnScreen(){\n    GLfloat x, y;\n    // Draw the strings, according to the current mode and font. \n    x = 2.90f;\n    y = 0.80f;\n    glRasterPos2f(x, y);\n    int len;\n    char s[] = { 'H', 'E', 'L', 'L', 'O', '\\0' };\n    len = (int)strlen(s);\n    printStringOnVideo(GLUT_BITMAP_TIMES_ROMAN_24, s);\n}\n</code></pre>\n\n<p>The loadSquare() function applies texture to squares. Its main feature is calling the class method for loading textures on squares:</p>\n\n<pre><code>void P300Square::setTexture(bool func){\n// Se func = 0 allora carico la texture, viceversa il flash\n\nstring tmp = \"\";\n\nif (func == false)\n    tmp = texturePath;\nelse\n    tmp = textureFlashPath;\n\nGLuint texture = SOIL_load_OGL_texture\n    (\n    tmp.c_str(),\n    SOIL_LOAD_AUTO,\n    SOIL_CREATE_NEW_ID,\n    SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT\n    );\nglEnable(GL_TEXTURE_2D);\nglBindTexture(GL_TEXTURE_2D, texture);\nglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\nglTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\nglColor3ub(50, 50, 50);\n\n\nglEnable(GL_BLEND);\nglBegin(GL_QUADS);\nglColor4f(0.5f, 0.0, 0.0f, 0.8f);\n// Top Left\nglTexCoord2f(0, 1);\nglVertex2f(u, v);\n// Top Right\nglTexCoord2f(1, 1);\nglVertex2f(u + size, v);\n// Bottom Right\nglTexCoord2f(1, 0);\nglVertex2f(u + size, v + size);\n// Bottom Left\nglTexCoord2f(0, 0);\nglVertex2f(u, v + size);\n\nglEnd();\nglDisable(GL_BLEND);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vIkdf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vIkdf.jpg\" alt=\"Text on application startup\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tN77N.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tN77N.jpg\" alt=\"Text after clicking\"></a></p>\n\n<p>Can please someone help me? Thank you!</p>\n"}, {"tags": ["c++", "getline"], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1448472562, "post_id": 33922830, "comment_id": 55606683, "body": "Also note that you probably won&#39;t see this behavior when testing <code>junk1</code> by itself, because if stdout goes to a terminal it will be line-buffered by default. Piping the output results in full buffering."}, {"owner": {"reputation": 65, "user_id": 5605234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88dd7c499c5dd33d5a7949375201cafd?s=128&d=identicon&r=PG&f=1", "display_name": "Sinbad", "link": "https://stackoverflow.com/users/5605234/sinbad"}, "edited": false, "score": 0, "creation_date": 1448481124, "post_id": 33922830, "comment_id": 55611468, "body": "Excellent answers and that fixed it.  I totally forgot about buffered output.  Thanks!!!"}], "tags": [], "owner": {"reputation": 2222, "user_id": 2339551, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48e00397ce26346f40c9f76d86e6e7f4?s=128&d=identicon&r=PG", "display_name": "lodo", "link": "https://stackoverflow.com/users/2339551/lodo"}, "is_accepted": true, "score": 3, "last_activity_date": 1448472482, "last_edit_date": 1448472482, "creation_date": 1448472397, "answer_id": 33922830, "question_id": 33922740, "link": "https://stackoverflow.com/questions/33922740/c-getline-does-not-seem-to-recognize-newlines-in-input-piped-to-stdin/33922830#33922830", "title": "c++ getline does not seem to recognize newlines in input piped to stdin", "body": "<p>This is probably caused by <code>stdout</code> in <code>junk1.c</code> being buffered: all writes to it (by <code>printf</code> or any other means) are collected in an in-memory buffer, and only written to <code>stdout</code> when the program exits.</p>\n\n<p>To force <code>stdout</code> to actually write what it has in the buffer, you have to use <code>flush</code> (in your case, you should use it after every <code>printf</code>).</p>\n"}], "owner": {"reputation": 65, "user_id": 5605234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88dd7c499c5dd33d5a7949375201cafd?s=128&d=identicon&r=PG&f=1", "display_name": "Sinbad", "link": "https://stackoverflow.com/users/5605234/sinbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 33922830, "answer_count": 1, "score": 5, "last_activity_date": 1448472482, "creation_date": 1448472132, "question_id": 33922740, "link": "https://stackoverflow.com/questions/33922740/c-getline-does-not-seem-to-recognize-newlines-in-input-piped-to-stdin", "title": "c++ getline does not seem to recognize newlines in input piped to stdin", "body": "<p>This code:</p>\n\n<p>$ cat junk.cpp</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint\nmain(int argc, char **argv)\n{\n    string line;\n\n    while(getline(cin, line)) \n    {\n        cout &lt;&lt; line &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>works fine if I run it, then type \"hi\" and \"there\n\n<p>$ junk\nhi\nhi\nthere\nthere</p>\n\n<p>So far so good.</p>\n\n<p>But I have another program:</p>\n\n<p>$ cat junk1.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint\nmain(int argc, char **argv)\n{\n    int i = 4;\n\n    while(i--)\n    {\n        printf(\"abc\\n\");\n        sleep(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This one outputs 4 lines of \"abc\\n\" and sleeps after each line.</p>\n\n<p>So if I do this:</p>\n\n<p>junk1 | junk</p>\n\n<p>I would expect to see each line of \"abc\" followed by a 1 second sleep, but instead I see 4 seconds of sleep followed by all 4 \"abc\" lines at the end.</p>\n\n<p>Apparently getline() is buffering all output from junk1, and only proceding when junk1 terminates.</p>\n\n<p>This is not the behavior I need, because I want to pipe the stdout from a program that runs forever and produces voluminous output, to a program like junk.cpp.</p>\n\n<p>Any idea what is going on here?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "windows", "visual-c++", "keypress", "hotkeys"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4142790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2911b1cbf15eafb3a33f1ac08bd3a607?s=128&d=identicon&r=PG&f=1", "display_name": "pomodo01", "link": "https://stackoverflow.com/users/4142790/pomodo01"}, "edited": false, "score": 0, "creation_date": 1448474280, "post_id": 33923133, "comment_id": 55607690, "body": "Okay I can learn about hook but can this put pressed key or just listen? It is other program that have hotkey, I want to my program press it."}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "reply_to_user": {"reputation": 3, "user_id": 4142790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2911b1cbf15eafb3a33f1ac08bd3a607?s=128&d=identicon&r=PG&f=1", "display_name": "pomodo01", "link": "https://stackoverflow.com/users/4142790/pomodo01"}, "edited": false, "score": 0, "creation_date": 1448542275, "post_id": 33923133, "comment_id": 55637418, "body": "Seems I got it. You want to simulate keystroke, so that external program takes the screenshot, right? Well, it&#39;s not the hotkey you have problems with then.   By the way, consider the following:    * Taking sreenshot from your own code is pretty easy  *  You might combine your own hotkey with some kind of pipe call to the mentioned program  But anyway,the solution to what you want right now is <a href=\"https://batchloaf.wordpress.com/2012/04/17/simulating-a-keystroke-in-win32-c-or-c-using-sendinput\" rel=\"nofollow noreferrer\">SendInput()</a>. Yeah, you&#39;ve tried it, but that <i>should</i> work if properly implemented."}], "tags": [], "owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "is_accepted": false, "score": 1, "last_activity_date": 1448473379, "creation_date": 1448473379, "answer_id": 33923133, "question_id": 33922657, "link": "https://stackoverflow.com/questions/33922657/simulate-global-hotkey/33923133#33923133", "title": "Simulate global hotkey", "body": "<p>Maybe keyboard hook will solve the problem?</p>\n\n<ul>\n<li><a href=\"http://www.codeguru.com/cpp/w-p/system/keyboard/article.php/c5699/Hooking-the-Keyboard.htm\" rel=\"nofollow\">example 1</a></li>\n<li><a href=\"https://code.msdn.microsoft.com/windowsapps/CppWindowsHook-06957865\" rel=\"nofollow\">example 2</a></li>\n<li><a href=\"http://www.codeproject.com/Articles/1264/KeyBoard-Hooks\" rel=\"nofollow\">example 3</a></li>\n</ul>\n\n<p>Not perfect but they are pretty global</p>\n"}, {"tags": [], "owner": {"reputation": 7786, "user_id": 999884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuL5q.jpg?s=128&g=1", "display_name": "Software_Designer", "link": "https://stackoverflow.com/users/999884/software-designer"}, "is_accepted": false, "score": 0, "last_activity_date": 1503469240, "last_edit_date": 1503469240, "creation_date": 1473843547, "answer_id": 39486404, "question_id": 33922657, "link": "https://stackoverflow.com/questions/33922657/simulate-global-hotkey/39486404#39486404", "title": "Simulate global hotkey", "body": "<p><a href=\"https://i.stack.imgur.com/WFjCr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WFjCr.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Here is a source code for a global hotkey . It has been set to listen for a <kbd>CTRL</kbd> + <kbd>y</kbd> key combination. Once <kbd>CTRL</kbd> + <kbd>y</kbd> is triggered it grabs a screenshot. </p>\n\n<p>To close the global hotkey, simply press <kbd>CTRL</kbd> + <kbd>q</kbd>. </p>\n\n<p>To hide the console window and keep the hotkey running in the background press <kbd>CTRL</kbd> + <kbd>w</kbd>.</p>\n\n<pre><code>#define _WIN32_WINNT 0x0400\n#pragma comment( lib, \"user32.lib\" )\n\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\nHHOOK hKeyboardHook;\n__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam);\nvoid MessageLoop();\nDWORD WINAPI my_HotKey(LPVOID lpParm);\nint toggleVisibility = 1;\n\nint screenResolutionX = GetSystemMetrics(SM_CXSCREEN);\nint screenResolutionY = GetSystemMetrics(SM_CYSCREEN);\nPOINT startCoord,endCoord;\nvoid grabScreenshot(POINT a, POINT b);\n\n/*********************************************\n***                                        ***\n***                                        ***\n**********************************************/\n\n\nint main(int argc, char** argv){\n\n    /* uncomment to hide console window */\n    //ShowWindow(FindWindowA(\"ConsoleWindowClass\", NULL), false);\n\n    HANDLE hThread;\n    DWORD dwThread;\n\n    printf(\"\\n  s c r e e n s h o t   H O T K E Y    \\n\\n\");\n    printf(\"press  CTRL-y  for  screenshot \\n\");\n    printf(\"press  CTRL-w  to hide or make console window visible  \\n\");\n    printf(\"press  CTRL-q  to quit  \\n\");\n    printf(\"\\n\\n\");\n\n    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)   my_HotKey, (LPVOID) argv[0], NULL, &amp;dwThread);\n\n    if (hThread) return WaitForSingleObject(hThread,INFINITE);\n    else return 1;\n\n}\n\n/*********************************************\n***                                        ***\n***                                        ***\n**********************************************/\n\n\n__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam){\n    DWORD SHIFT_key=0;\n    DWORD CTRL_key=0;\n    DWORD ALT_key=0;\n\n\n    if  ( (nCode == HC_ACTION) &amp;&amp;   ((wParam == WM_SYSKEYDOWN) ||  (wParam == WM_KEYDOWN) ) ) {\n        KBDLLHOOKSTRUCT hooked_key =    *((KBDLLHOOKSTRUCT*)lParam);\n        DWORD dwMsg = 1;\n        dwMsg += hooked_key.scanCode &lt;&lt; 16;\n        dwMsg += hooked_key.flags &lt;&lt; 24;\n        char lpszKeyName[1024] = {0};\n\n        int i = GetKeyNameText(dwMsg,   (lpszKeyName+1),0xFF) + 1;\n\n        int key = hooked_key.vkCode;\n\n        SHIFT_key = GetAsyncKeyState(VK_SHIFT);\n        CTRL_key  = GetAsyncKeyState(VK_CONTROL);\n        ALT_key   = GetAsyncKeyState(VK_MENU);\n\n        //printf(\"%c\",key);\n\n        if ( (key &gt;= 'A') &amp;&amp; (key &lt;= 'Z') || (key &gt;= 'a') &amp;&amp; (key &lt;= 'z') || (key &gt;= '0') &amp;&amp; (key &lt;= '9') ) {\n\n            if  (GetAsyncKeyState(VK_SHIFT)&gt;= 0) key +=32;\n\n            /*********************************************\n            ***   Hotkey scope                         ***\n            ***   do stuff here                        ***\n            **********************************************/\n\n            if ( (CTRL_key !=0) &amp;&amp; (key == 'y') || (key == 'Y') ) {\n\n               CTRL_key=0;\n\n               // grab a screenshot\n\n                startCoord.x=0;\n                startCoord.y=0;\n\n                endCoord.x=screenResolutionX;\n                endCoord.y=screenResolutionY;\n\n                ShowWindow(FindWindowA(\"ConsoleWindowClass\", NULL), false);\n                Sleep(1000);\n                grabScreenshot(startCoord,endCoord);\n\n                ShowWindow(FindWindowA(\"ConsoleWindowClass\", NULL), true);\n\n                printf(\"\\nThe Screenshot is in the Clipboard  \\n\\n\");\n            }\n\n            //******************************************************\n\n            if ( (CTRL_key !=0) &amp;&amp; (key == 'q') ||  (key == 'Q') ) {\n                MessageBox(NULL, \"\\n\\n\\n\\nShutting down\\n\\nPress  OK   to close\\n\\n\", \"                                     H O T K E Y                                            \", MB_OK);\n               PostQuitMessage(0);\n            }\n\n            //******************************************************\n\n            if ( (CTRL_key !=0) &amp;&amp; (key == 'w') ||  (key == 'W') ) {\n\n                toggleVisibility = - toggleVisibility;\n\n                if (toggleVisibility &gt;0 ) {\n                    ShowWindow(FindWindowA(\"ConsoleWindowClass\", NULL), true);\n                }\n                else{\n                    ShowWindow(FindWindowA(\"ConsoleWindowClass\", NULL), false);\n                }\n            }\n\n            SHIFT_key = 0;CTRL_key = 0; ALT_key = 0;\n        }\n    }\n    return CallNextHookEx(hKeyboardHook,    nCode,wParam,lParam);\n}\n\n\n/*********************************************\n***                                        ***\n***                                        ***\n**********************************************/\n\nvoid MessageLoop(){\n\n    MSG message;\n    while (GetMessage(&amp;message,NULL,0,0)){\n        TranslateMessage( &amp;message );\n        DispatchMessage( &amp;message );\n    }\n}\n\n/*********************************************\n***                                        ***\n***                                        ***\n**********************************************/\n\n\nDWORD WINAPI my_HotKey(LPVOID lpParm){\n    HINSTANCE hInstance = GetModuleHandle(NULL);\n    if (!hInstance) hInstance = LoadLibrary((LPCSTR) lpParm);\n    if (!hInstance) return 1;\n\n    hKeyboardHook = SetWindowsHookEx (  WH_KEYBOARD_LL, (HOOKPROC) KeyboardEvent,   hInstance,  NULL    );\n    MessageLoop();\n    UnhookWindowsHookEx(hKeyboardHook);\n    return 0;\n}\n\n\n/*********************************************\n***                                        ***\n***                                        ***\n**********************************************/\n\n\nvoid grabScreenshot(POINT a, POINT b){\n\n    // copy screen to bitmap\n    HDC     hScreen = GetDC(NULL);\n    HDC     hDC     = CreateCompatibleDC(hScreen);\n    HBITMAP hBitmap = CreateCompatibleBitmap(hScreen, abs(b.x-a.x), abs(b.y-a.y));\n    HGDIOBJ old_obj = SelectObject(hDC, hBitmap);\n    BOOL    bRet    = BitBlt(hDC, 0, 0, abs(b.x-a.x), abs(b.y-a.y), hScreen, a.x, a.y, SRCCOPY);\n\n    // save bitmap to clipboard\n    OpenClipboard(NULL);\n    EmptyClipboard();\n    SetClipboardData(CF_BITMAP, hBitmap);\n    CloseClipboard();\n\n    // clean up\n    SelectObject(hDC, old_obj);\n    DeleteDC(hDC);\n    ReleaseDC(NULL, hScreen);\n    DeleteObject(hBitmap);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4142790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2911b1cbf15eafb3a33f1ac08bd3a607?s=128&d=identicon&r=PG&f=1", "display_name": "pomodo01", "link": "https://stackoverflow.com/users/4142790/pomodo01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1503469240, "creation_date": 1448471881, "last_edit_date": 1449837332, "question_id": 33922657, "link": "https://stackoverflow.com/questions/33922657/simulate-global-hotkey", "title": "Simulate global hotkey", "body": "<p>Hi I am using visual c++ I have a working program EXCEPT for one thing I want it be able to use separate screenshot program. I have separate screenshot program installed it program have a registered hotkey to take a screenshot, I want my program to do it.</p>\n\n<p>I tried keybd_event and SendInput with FindWindow and it works fine with notepad but it screenshot program runs minimized or hidden and I know about problem with SetForegroundWindow.</p>\n\n<p>Is there a way to make it like to windows system I just pressed on keyboard for all windows like real hotkey? It screenshot program works fine with real hotkey.</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1448472215, "post_id": 33922602, "comment_id": 55606436, "body": "You can not save persistent data in a dll"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448472395, "post_id": 33922602, "comment_id": 55606572, "body": "Sounds like a XY-problem for me, what are you trying to achieve actually? And no, it&#39;s not possible to do this with a DLL. The DLL just contains code, that is linked to executable programs at runtime."}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1448473002, "post_id": 33922602, "comment_id": 55606931, "body": "You&#39;ll loose all the data as soon as the dll is unloaded. But you can try to use shared memory, I suspect you are just trying to exchange data, not actually store it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1448473940, "post_id": 33922602, "comment_id": 55607469, "body": "And the reason, that data saving into a .txt/binary/etc. file wouldn&#39;t work, is?"}, {"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1448474183, "post_id": 33922602, "comment_id": 55607633, "body": "@DieterL&#252;cking your comment is the answer, you should post it as an answer yea?"}, {"owner": {"reputation": 118, "user_id": 5422086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abaaa3a3a733cc84b277edb386f4bdfb?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfMazes", "link": "https://stackoverflow.com/users/5422086/kingofmazes"}, "reply_to_user": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 0, "creation_date": 1448526913, "post_id": 33922602, "comment_id": 55627637, "body": "@MasterAler I&#39;m not trying to exchange data but I really mean that the dll will store some type of data and in a next time, another application (or the same application) will load the dll, read the data that is stored and used it."}, {"owner": {"reputation": 118, "user_id": 5422086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abaaa3a3a733cc84b277edb386f4bdfb?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfMazes", "link": "https://stackoverflow.com/users/5422086/kingofmazes"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1448526919, "post_id": 33922602, "comment_id": 55627642, "body": "@AlgirdasPreid\u017eius the data will contains sensible data and in a txt or in a binary the data will be more readable than stored in some type of dll or other."}, {"owner": {"reputation": 118, "user_id": 5422086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abaaa3a3a733cc84b277edb386f4bdfb?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfMazes", "link": "https://stackoverflow.com/users/5422086/kingofmazes"}, "edited": false, "score": 0, "creation_date": 1448526931, "post_id": 33922602, "comment_id": 55627646, "body": "But as  @DieterL&#252;cking says is not possible so i will find another method to do it. Thank you all guys"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1448527658, "post_id": 33922602, "comment_id": 55628059, "body": "@KingOfMazes Data stored in binary file is as readable as it would be if it were stored in a .dll file."}], "answers": [{"comments": [{"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1448489448, "post_id": 33923413, "comment_id": 55615576, "body": "Not applicable here, but you can distribute static data in a DLL like language string resources."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 2, "last_activity_date": 1448474379, "creation_date": 1448474379, "answer_id": 33923413, "question_id": 33922602, "link": "https://stackoverflow.com/questions/33922602/save-data-into-dll/33923413#33923413", "title": "Save data into dll", "body": "<p>You can not save persistent data in a dll.</p>\n"}], "owner": {"reputation": 118, "user_id": 5422086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abaaa3a3a733cc84b277edb386f4bdfb?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfMazes", "link": "https://stackoverflow.com/users/5422086/kingofmazes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448474379, "creation_date": 1448471722, "question_id": 33922602, "link": "https://stackoverflow.com/questions/33922602/save-data-into-dll", "title": "Save data into dll", "body": "<p>i'm looking for some advice for \"how I can store data into a dll\" .</p>\n\n<p>I want to do something like a database, but using a dll. Is it possible?</p>\n\n<p>My scenario is:</p>\n\n<p>An application load my dll, store a particular type of data and release it.\nAnother application, load the dll, read the data that the previous application has stored into it and use it. </p>\n\n<p>The data type that I want to save is sensible one.</p>\n\n<p>Any suggest?</p>\n"}, {"tags": ["c++", "class", "header", "project"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1448471692, "post_id": 33922557, "comment_id": 55606098, "body": "Your program isn&#39;t wrong - it&#39;s related to your command. Apparently <code>-main.cpp</code> is parsed as an <i>option</i>, not a <i>value</i> by <code>cl.exe</code>."}, {"owner": {"reputation": 25, "user_id": 5356778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fee09b649f1b005bec9c4057b5f6c7?s=128&d=identicon&r=PG&f=1", "display_name": "Arquon", "link": "https://stackoverflow.com/users/5356778/arquon"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1448472164, "post_id": 33922557, "comment_id": 55606399, "body": "I tried replacing main.cpp with another source file now, but now there are other errors: LNK2019: unresolved external symbols; and there are many of them."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1448472812, "post_id": 33922557, "comment_id": 55606820, "body": "@Arquon One question -- since you&#39;re using Visual Studio, why are you using the command-line instead of the IDE to build your program?  And even if you wanted to use the command-line, the IDE tells you what the command-line should be (in the Project Settings)."}, {"owner": {"reputation": 25, "user_id": 5356778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fee09b649f1b005bec9c4057b5f6c7?s=128&d=identicon&r=PG&f=1", "display_name": "Arquon", "link": "https://stackoverflow.com/users/5356778/arquon"}, "edited": false, "score": 0, "creation_date": 1448474932, "post_id": 33922557, "comment_id": 55608065, "body": "Im not using Visual Studio, im using its compiler. Im using CodeBlocks."}], "owner": {"reputation": 25, "user_id": 5356778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fee09b649f1b005bec9c4057b5f6c7?s=128&d=identicon&r=PG&f=1", "display_name": "Arquon", "link": "https://stackoverflow.com/users/5356778/arquon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448474050, "creation_date": 1448471613, "last_edit_date": 1592644375, "question_id": 33922557, "link": "https://stackoverflow.com/questions/33922557/receiving-weird-errors-while-trying-to-use-classes-in-project", "title": "Receiving weird errors while trying to use classes in project", "body": "<p>I am trying to use classes in a project and I am receiving this error:</p>\n<blockquote>\n<p>cl.exe /nologo /W3  /Zi /D_DEBUG    /I&quot;C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0A\\include&quot; /I&quot;C:\\Program Files\\Microsoft Visual Studio 10.0\\VC\\include&quot; /c -.cpp /Foobj\\Debug-.obj</p>\n<p>cl : Command line warning D9002 : ignoring unknown option 'main.cpp'</p>\n<p>cl : Command line error D8003 : missing source filename</p>\n</blockquote>\n<p>Not sure what to do to fix this, all of my project files are in one directory though. My files:</p>\n<p>main.cpp:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &quot;grum.h&quot;\nusing namespace std;\nint main ()\n{\n     grum gru;\n     return 0;\n}\n</code></pre>\n<p>Class.cpp:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &quot;grum.h&quot;\nusing namespace std;\ngrum::grum()\n{\n    cout &lt;&lt; &quot;testing&quot; &lt;&lt; endl;\n}\n</code></pre>\n<p>Header:</p>\n<pre><code>#ifndef GRUM_H\n#define GRUM_H\nclass grum\n{\npublic:\n    grum();\n};\n#endif // GRUM_H\n</code></pre>\n<p>This code was simply supposed to print out &quot;testing&quot;.</p>\n"}, {"tags": ["c++", "qt", "sockets", "user-interface", "deployment"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1448474765, "post_id": 33922411, "comment_id": 55607989, "body": "Why not just use websockets?"}, {"owner": {"reputation": 1645, "user_id": 3185053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11b8d49ad90679f612c889e1bca7a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Wagner", "link": "https://stackoverflow.com/users/3185053/sebastian-wagner"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1448489989, "post_id": 33922411, "comment_id": 55615807, "body": "@MrEricSir web sockets solve a different problem: providing a two way communication between browser and server. I would like to know how I can use a browser  as a UI locally"}], "owner": {"reputation": 1645, "user_id": 3185053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11b8d49ad90679f612c889e1bca7a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Wagner", "link": "https://stackoverflow.com/users/3185053/sebastian-wagner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448471139, "creation_date": 1448471139, "question_id": 33922411, "link": "https://stackoverflow.com/questions/33922411/qtwebengine-to-access-a-named-pipe-or-unix-domain-socket", "title": "QtWebEngine to access a named pipe or unix domain socket", "body": "<p>Is there a way to use the <code>QtWebEnginge</code> to connect to a Windows named pipe or a UNIX domain socket? I have three main reasons for this configuration:</p>\n\n<ol>\n<li>A user interface to one service / daemon that can be accessed from different system users.</li>\n<li>We already have a HTML user interface</li>\n<li>It is unnecessary to open a TCP Port that can also be accessed from other machines. </li>\n</ol>\n\n<p>This is the <code>socat</code> version:</p>\n\n<pre><code>echo -e \"GET / HTTP/1.1\\r\\n\" | socat unix-connect:/tmp/td-socket STDIO | head\nHTTP/1.1 200 OK\nContent-Type: text/html\nConnection: close\nDate: Wed, 25 Nov 2015 16:43:47 GMT\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n</code></pre>\n\n<p>Is there a way to hack the <code>QtWebEngine</code> to access a named pipe / unix domain socket? I couldn't find an interface for this, especially as the <code>QtWebEngine</code> doesn't use the <code>QNetworkAccessManager</code> in the background.</p>\n\n<p>As an alternative, is there a way to deploy (or use) a (bundled) browser in a Desktop app that can access this on Windows (or possibly Linux)?</p>\n\n<p>It is unfortunately not enough to just load a HTML page into the engine as the UI depends on JS calls to load data from the server.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 1405, "user_id": 2349936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36cec8ca0d1aad3dc77934cb65b41b13?s=128&d=identicon&r=PG&f=1", "display_name": "Tacet", "link": "https://stackoverflow.com/users/2349936/tacet"}, "edited": false, "score": 2, "creation_date": 1448471117, "post_id": 33922306, "comment_id": 55605752, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22055495/algorithm-to-merge-multiple-sorted-sequences-into-one-sorted-sequence-in-c\">Algorithm to merge multiple sorted sequences into one sorted sequence in C++</a>"}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448471780, "post_id": 33922339, "comment_id": 55606156, "body": "How is a simple merge supposed to be sufficient? The elements are already in one big array with the 4 parts being sorted internally. Merging would essentially create a copy of the big array."}, {"owner": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448472825, "post_id": 33922339, "comment_id": 55606831, "body": "Could you explain why a simple merge is sufficient?"}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448473842, "post_id": 33922339, "comment_id": 55607407, "body": "@Jonas You do a merge operation in-place 3 times - merge 1st part and 2nd part, merge 3rd part and 4th part, then merge the two resulting chunks."}, {"owner": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448474841, "post_id": 33922339, "comment_id": 55608017, "body": "How does that ensure that the big array is sorted? A merge is simply the the act of joining two separate parts together. The way the problem is described you are given 4 sorted arrays which has to be turned into 1 big sorted array. You are given no guarantees about the ordering of the 4 parts."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448474977, "post_id": 33922339, "comment_id": 55608083, "body": "@Jonas yes, that&#39;s correct. The merge operation in a merge sort requires the input arrays be sorted, not that one is ordered before the other one."}, {"owner": {"reputation": 461, "user_id": 1368726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82708ee751f0eb035214259d35bb1fac?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/1368726/jonas"}, "edited": false, "score": 0, "creation_date": 1448478865, "post_id": 33922339, "comment_id": 55610298, "body": "Ah, I misunderstood your answer as you just specified &quot;the merge operations&quot;, meaning the merge part of a merge sort. My interpretation was that you just specified an arbitrary merge, the &quot;the&quot; being the only hint to a specific method of merging."}], "tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": true, "score": 3, "last_activity_date": 1448472094, "last_edit_date": 1448472094, "creation_date": 1448470901, "answer_id": 33922339, "question_id": 33922306, "link": "https://stackoverflow.com/questions/33922306/how-to-sort-a-big-array-consists-of-four-sorted-parts-preferably-by-merge-sort/33922339#33922339", "title": "How to sort a big array consists of four sorted parts, preferably by merge sort algorithm?", "body": "<p>You don't need to do a merge sort. You just need to do the merge operations in-place 3 times (1st part merge 2nd part; 3rd part merge 4th part; then merge those two). Note that merge is an O(n) operation, which is what makes a merge sort work. So this algorithm will be O(n) + O(n) + O(n) = O(n).</p>\n\n<p>O(n) is optimal since you will need to access each element at least once no matter what. (So the problem, and this algorithm, are Omega(n) and Theta(n) as well, for what it's worth.)</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1448482500, "last_edit_date": 1448482500, "creation_date": 1448480737, "answer_id": 33925184, "question_id": 33922306, "link": "https://stackoverflow.com/questions/33922306/how-to-sort-a-big-array-consists-of-four-sorted-parts-preferably-by-merge-sort/33925184#33925184", "title": "How to sort a big array consists of four sorted parts, preferably by merge sort algorithm?", "body": "<p>You can use a regular bottom up merge, but since you have 4 sorted groups with 25 elements each, initialize the bottom up merge sort run size (width) to 25. You can follow the code in the wiki example, except use std::swap(A, B) after each pass instead of the copy back loop. Since 100 is a multiple of n, you don't need the min checks.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation</a></p>\n\n<p>Something like this:</p>\n\n<pre><code>#define n 100\n// array A[] has the items to sort; array B[] is a work array\n// in this case data ends up back in A[]\nvoid BottomUpMergeSort(int A[], int B[], int n)\n{\n    for (int width = 25; width &lt; n; width = 2 * width){\n        for (int i = 0; i &lt; n; i = i + 2 * width)\n            BottomUpMerge(A, i, i+width, i+2*width, B);\n        std::swap(A, B);\n    }\n}\n\nvoid BottomUpMerge(int A[], int iLeft, int iRight, int iEnd, int B[])\n{\n    int i0 = iLeft;\n    int i1 = iRight;\n    int j;\n    for (j = iLeft; j &lt; iEnd; j++){\n        if (i0 &lt; iRight &amp;&amp; (i1 &gt;= iEnd || A[i0] &lt;= A[i1]))\n          B[j] = A[i0++];\n        else\n          B[j] = A[i1++];\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3308, "user_id": 289684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0cf554b2f6c7b75ded2918fcb3d74f?s=128&d=identicon&r=PG", "display_name": "Ha.", "link": "https://stackoverflow.com/users/289684/ha"}, "is_accepted": false, "score": 2, "last_activity_date": 1448482003, "creation_date": 1448482003, "answer_id": 33925503, "question_id": 33922306, "link": "https://stackoverflow.com/questions/33922306/how-to-sort-a-big-array-consists-of-four-sorted-parts-preferably-by-merge-sort/33925503#33925503", "title": "How to sort a big array consists of four sorted parts, preferably by merge sort algorithm?", "body": "<p>You need to use <a href=\"http://en.cppreference.com/w/cpp/algorithm/inplace_merge\" rel=\"nofollow\">std::inplace_merge</a></p>\n\n<pre><code>std::vector&lt;int&gt; data(100);\n// fill data array\nauto it1 = data.begin();\nauto it2 = data.begin() + 25;\nauto it3 = data.begin() + 50;\nauto it4 = data.begin() + 75;\nauto it5 = data.begin() + 100;\nstd::inplace_merge(it1, it2, it3); // merge it1-it2 and it2-it3\nstd::inplace_merge(it3, it4, it5); // merge it3-it4 and it4-it5\nstd::inplace_merge(it1, it3, it5); // merge it1-it3 and it3-it5\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5227935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e40c62f5bf2d25d16c6edec5fac48c89?s=128&d=identicon&r=PG&f=1", "display_name": "PeterCZ", "link": "https://stackoverflow.com/users/5227935/petercz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 33922339, "answer_count": 3, "score": 0, "last_activity_date": 1448488060, "creation_date": 1448470806, "question_id": 33922306, "link": "https://stackoverflow.com/questions/33922306/how-to-sort-a-big-array-consists-of-four-sorted-parts-preferably-by-merge-sort", "title": "How to sort a big array consists of four sorted parts, preferably by merge sort algorithm?", "body": "<p>I have 4 sorted parts in one big array. For example big array has a 100 items and sorted parts are on indexes: 0-24, 25-49, 50-74, 75-99.</p>\n\n<p>What is the best way to sort the whole array? I really prefer a Merge sort algorithm.</p>\n\n<p>Thank you very much for some ideas.</p>\n"}, {"tags": ["c++", "arrays", "equality", "inequality"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448471095, "post_id": 33922287, "comment_id": 55605735, "body": "You are missing the <code>{}</code> braces in your <code>else</code> branch, that&#39;s why <code>cout &lt;&lt;&quot;not&quot; &lt;&lt; endl;</code> is always printed."}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1448471098, "post_id": 33922287, "comment_id": 55605738, "body": "well for your <code>==</code> overload, you never set your <code>retstat = true</code> in your if block so it will never return true. you also reinitialize it every single tile (you dont need to have the <code>bool</code> before you call it in your else block. I would suggest declaring it outside the for loop as <code>true</code>"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1448471165, "post_id": 33922287, "comment_id": 55605781, "body": "for your second code, you dont return anything..."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1448471694, "post_id": 33922287, "comment_id": 55606101, "body": "Tip: <code>a != b</code> is (should be) equivalent to <code>!(a == b)</code>; <code>a == b</code> to <code>!(a != b)</code>, so you can reuse one operator to implement the other."}], "answers": [{"tags": [], "owner": {"reputation": 519, "user_id": 5534341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3bjF.jpg?s=128&g=1", "display_name": "Jerome", "link": "https://stackoverflow.com/users/5534341/jerome"}, "is_accepted": false, "score": 0, "last_activity_date": 1448471102, "creation_date": 1448471102, "answer_id": 33922403, "question_id": 33922287, "link": "https://stackoverflow.com/questions/33922287/equality-inequality-of-two-arrays/33922403#33922403", "title": "Equality &amp; Inequality of two arrays", "body": "<p>Your operator== are wrong, you have 2 <code>retstat</code>, you never affect it with true, you test only the 1st.\nReview your code, and first test if the two set have the same size.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1448471823, "post_id": 33922535, "comment_id": 55606183, "body": "As a side note: Don&#39;t use the term STL for the C++ standard library."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 1, "last_activity_date": 1448471863, "last_edit_date": 1448471863, "creation_date": 1448471544, "answer_id": 33922535, "question_id": 33922287, "link": "https://stackoverflow.com/questions/33922287/equality-inequality-of-two-arrays/33922535#33922535", "title": "Equality &amp; Inequality of two arrays", "body": "<p>First of all, don't use names that are reserved by the C++ standard library (i.e., <code>set</code>). </p>\n\n<p>Secondly, your for loop returns in the first loop (i.e., is wrong), also you reinitialize your \"found\" flag in the body of your loop. </p>\n\n<p>Thirdly, pass your object in your overloaded operator by reference. </p>\n\n<p>Fourthly, make your overloaded operators free functions in order to be symmetrical and make them friend of your class to be able to have access to its private members.</p>\n\n<p>Last but not least. If you want to compare two arrays for equality use <a href=\"http://en.cppreference.com/w/cpp/algorithm/equal\" rel=\"nofollow\"><code>std::equal</code></a>:</p>\n\n<pre><code>bool Set::operator==(Set const &amp;B) {\n  return std::equal(set, set + pSize, B.set, B.set + B.pSize);\n}\n\nbool Set::operator!=(Set const &amp;B) {\n  return !std::equal(set, set + pSize, B.set, B.set + B.pSize);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5605174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd98c5320c2d36e4bf386ac760af8628?s=128&d=identicon&r=PG&f=1", "display_name": "Jane D.", "link": "https://stackoverflow.com/users/5605174/jane-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1448471863, "creation_date": 1448470747, "question_id": 33922287, "link": "https://stackoverflow.com/questions/33922287/equality-inequality-of-two-arrays", "title": "Equality &amp; Inequality of two arrays", "body": "<p>For an assignment I have to overload several operators and use them in regards to two sets. I have my class, Set, which has two objects, A and B, both of which are set arrays. I am attempting to overload an equality and inequality function that will compare the elements in each set and output whether or not they are equal. The function should take the object Set B as an argument, and will compare Set A and Set B. While my program does compile, it continually outputs that my sets are not equal, both when I input two equal sets, and when I input two sets that are not equal. I've tried tweaking my functions around for hours but I haven't had any luck. Any help is much appreciated!</p>\n\n<pre><code> bool Set::operator==(Set B){\n\n\n    for (int i=0; i &lt; pSize; i++){\n\n            bool retstat = false;\n\n            if(set[i] == B.set[i]){\n\n                    cout &lt;&lt;\"equal\" &lt;&lt; endl;\n            }\n            else\n                    bool retstat = false;\n                    cout &lt;&lt;\"not\" &lt;&lt; endl;\n\n            return (retstat);\n    }\n\n\n}\n\n\n\n\nbool Set::operator!=(Set B){\n\n    bool retstat = false;\n\n    for(int i=0; i &lt; pSize; i++){\n\n            if(set[i] != B.set[i]){\n                    retstat = true;\n                    cout &lt;&lt;\"not equal\" &lt;&lt; endl;\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "opencv", "imread"], "comments": [{"owner": {"reputation": 3288, "user_id": 4904417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-84goel1xiec/AAAAAAAAAAI/AAAAAAAAAFQ/25O08gmolWs/photo.jpg?sz=128", "display_name": "Angie Quijano", "link": "https://stackoverflow.com/users/4904417/angie-quijano"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1448471970, "post_id": 33922284, "comment_id": 55606284, "body": "Hi, thanks for your suggestion but I have already tried that, but that I obtain from <code>QFileInfo(&quot;qrc.... &quot;).filePath()</code> is always the same path: &quot;:/TempIcons/logo.png&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": false, "score": 2, "last_activity_date": 1456183950, "last_edit_date": 1456183950, "creation_date": 1448472728, "answer_id": 33922939, "question_id": 33922284, "link": "https://stackoverflow.com/questions/33922284/read-an-image-from-a-qrc-using-imread-of-opencv/33922939#33922939", "title": "Read an image from a qrc using imread() of OpenCV", "body": "<p>The problem here is that <code>imread()</code> loads an image from a file.</p>\n\n<p>In contrast, Qt's resource system compiles the data from images <a href=\"http://doc.qt.io/qt-5/resources.html\" rel=\"nofollow\">directly into the program's executable</a>. Qt's <code>QFile</code> operations know that when they are provided a path starting with \":/\", it refers to the embedded resources, rather than on disk.</p>\n\n<p>Therefore, I don't think you will be able to use <code>imread()</code> to directly access a file that has been placed in Qt's resources.</p>\n"}, {"comments": [{"owner": {"reputation": 3288, "user_id": 4904417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-84goel1xiec/AAAAAAAAAAI/AAAAAAAAAFQ/25O08gmolWs/photo.jpg?sz=128", "display_name": "Angie Quijano", "link": "https://stackoverflow.com/users/4904417/angie-quijano"}, "edited": false, "score": 0, "creation_date": 1448477963, "post_id": 33923407, "comment_id": 55609775, "body": "Hello @Miki. The code you provide is very useful. I tested times and results that convert from <code>QImage</code> to <code>Mat</code>takes almost the same time that using your code."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 3288, "user_id": 4904417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-84goel1xiec/AAAAAAAAAAI/AAAAAAAAAFQ/25O08gmolWs/photo.jpg?sz=128", "display_name": "Angie Quijano", "link": "https://stackoverflow.com/users/4904417/angie-quijano"}, "edited": false, "score": 0, "creation_date": 1448478088, "post_id": 33923407, "comment_id": 55609843, "body": "@AngieQuijano gald it helped! Consider in the QImage to Mat test also the time that QImage takes to load the image. I&#39;m checking this right now, so I can update the answer with more details."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 3288, "user_id": 4904417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-84goel1xiec/AAAAAAAAAAI/AAAAAAAAAFQ/25O08gmolWs/photo.jpg?sz=128", "display_name": "Angie Quijano", "link": "https://stackoverflow.com/users/4904417/angie-quijano"}, "edited": false, "score": 2, "creation_date": 1448479914, "post_id": 33923407, "comment_id": 55610855, "body": "@AngieQuijano, I run some test. Loading a <code>QImage</code> and convert to <code>Mat</code> is 10 times slower than using this function. Updated the answer with results and test code."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 1, "creation_date": 1448529981, "post_id": 33923407, "comment_id": 55629594, "body": "Great answer @Miki. Naturally, loading from the Qt&#39;s resource is going to be much quicker than from a file on disk due to the IO read overhead."}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 9, "last_activity_date": 1448480518, "last_edit_date": 1448480518, "creation_date": 1448474352, "answer_id": 33923407, "question_id": 33922284, "link": "https://stackoverflow.com/questions/33922284/read-an-image-from-a-qrc-using-imread-of-opencv/33923407#33923407", "title": "Read an image from a qrc using imread() of OpenCV", "body": "<p>As @TheDarkKnight pointed out, <code>imread</code> is not aware of Qt resources. You can however write your own <em>loader</em>,  that uses <code>QFile</code> to retrieve the binary data from the resource, and uses <code>imdecode</code> (as done internally by <code>imread</code>) to read the image:</p>\n\n<pre><code>Mat loadFromQrc(QString qrc, int flag = IMREAD_COLOR)\n{\n    //double tic = double(getTickCount());\n\n    QFile file(qrc);\n    Mat m;\n    if(file.open(QIODevice::ReadOnly))\n    {\n        qint64 sz = file.size();\n        std::vector&lt;uchar&gt; buf(sz);\n        file.read((char*)buf.data(), sz);\n        m = imdecode(buf, flag);\n    }\n\n    //double toc = (double(getTickCount()) - tic) * 1000.0 / getTickFrequency();\n    //qDebug() &lt;&lt; \"OpenCV loading time: \" &lt;&lt; toc;\n\n    return m;\n}\n</code></pre>\n\n<p>You can call it like:</p>\n\n<pre><code>Mat m = loadFromQrc(\"qrc_path\");\n</code></pre>\n\n<p>or specifying a flag:</p>\n\n<pre><code>Mat m = loadFromQrc(\"qrc_path\", IMREAD_GRAYSCALE);\n</code></pre>\n\n<hr>\n\n<p><strong>Performance</strong></p>\n\n<p>I tried loading the image with <code>loadFromQrc</code>, and loading the <code>QImage</code> and converting to <code>Mat</code> using <a href=\"http://asmaloney.com/2013/11/code/converting-between-cvmat-and-qimage-or-qpixmap/\" rel=\"noreferrer\">this</a> code, both with and without cloning. <code>loadFromQrc</code> results to be 10 time faster then loading a <code>QImage</code> and convert it to <code>Mat</code>.</p>\n\n<p>Results in ms:</p>\n\n<pre><code>Load Mat                :  4.85965\nQImage to Mat (no clone):  49.3999\nQImage to Mat (clone)   :  49.8497\n</code></pre>\n\n<p>Test code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;QDebug&gt;\n#include &lt;QtWidgets&gt;\n\n#include &lt;opencv2/opencv.hpp&gt;\nusing namespace cv;\n\nMat loadFromQrc(QString qrc, int flag = IMREAD_COLOR)\n{\n    QFile file(qrc);\n    Mat m;\n    if(file.open(QIODevice::ReadOnly))\n    {\n        qint64 sz = file.size();\n\n        std::vector&lt;uchar&gt; buf(sz);\n        file.read((char*)buf.data(), sz);\n        m = imdecode(buf, flag);\n    }\n    return m;\n}\n\ncv::Mat QImageToCvMat( const QImage &amp;inImage, bool inCloneImageData = true )\n{\n    switch ( inImage.format() )\n    {\n    // 8-bit, 4 channel\n    case QImage::Format_RGB32:\n    {\n        cv::Mat  mat( inImage.height(), inImage.width(), CV_8UC4, const_cast&lt;uchar*&gt;(inImage.bits()), inImage.bytesPerLine() );\n\n        return (inCloneImageData ? mat.clone() : mat);\n    }\n\n        // 8-bit, 3 channel\n    case QImage::Format_RGB888:\n    {\n        if ( !inCloneImageData )\n            qWarning() &lt;&lt; \"ASM::QImageToCvMat() - Conversion requires cloning since we use a temporary QImage\";\n\n        QImage   swapped = inImage.rgbSwapped();\n\n        return cv::Mat( swapped.height(), swapped.width(), CV_8UC3, const_cast&lt;uchar*&gt;(swapped.bits()), swapped.bytesPerLine() ).clone();\n    }\n\n        // 8-bit, 1 channel\n    case QImage::Format_Indexed8:\n    {\n        cv::Mat  mat( inImage.height(), inImage.width(), CV_8UC1, const_cast&lt;uchar*&gt;(inImage.bits()), inImage.bytesPerLine() );\n\n        return (inCloneImageData ? mat.clone() : mat);\n    }\n\n    default:\n        qWarning() &lt;&lt; \"ASM::QImageToCvMat() - QImage format not handled in switch:\" &lt;&lt; inImage.format();\n        break;\n    }\n\n    return cv::Mat();\n}\n\nint main(int argc, char *argv[])\n{\n    QString url = \"...\";\n\n    {\n        double tic = double(getTickCount());\n\n        Mat m1 = loadFromQrc(url);\n\n        double toc = (double(getTickCount()) - tic) * 1000.0 / getTickFrequency();\n        qDebug() &lt;&lt; \"Load Mat: \" &lt;&lt; toc;\n\n        if(m1.data != NULL)\n        {\n            imshow(\"m1\", m1);\n            waitKey(1);\n        }\n    }\n\n\n//    {\n//        double tic = double(getTickCount());\n\n//        QImage img;\n//        img.load(url);\n//        Mat m2 = QImageToCvMat(img, false);\n\n//        double toc = (double(getTickCount()) - tic) * 1000.0 / getTickFrequency();\n//        qDebug() &lt;&lt; \"QImage to Mat (no clone): \" &lt;&lt; toc;\n\n//        if(m2.data != NULL)\n//        {\n//            imshow(\"m2\", m2);\n//            waitKey(1);\n//        }\n//    }\n\n\n//    {\n//        double tic = double(getTickCount());\n\n//        QImage img;\n//        img.load(url);\n//        Mat m3 = QImageToCvMat(img, true);\n\n//        double toc = (double(getTickCount()) - tic) * 1000.0 / getTickFrequency();\n//        qDebug() &lt;&lt; \"QImage to Mat (clone): \" &lt;&lt; toc;\n\n//        if(m3.data != NULL)\n//        {\n//            imshow(\"m3\", m3);\n//            waitKey(1);\n//        }\n//    }\n\n    waitKey();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3288, "user_id": 4904417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-84goel1xiec/AAAAAAAAAAI/AAAAAAAAAFQ/25O08gmolWs/photo.jpg?sz=128", "display_name": "Angie Quijano", "link": "https://stackoverflow.com/users/4904417/angie-quijano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2296, "favorite_count": 1, "accepted_answer_id": 33923407, "answer_count": 2, "score": 6, "last_activity_date": 1456183950, "creation_date": 1448470743, "question_id": 33922284, "link": "https://stackoverflow.com/questions/33922284/read-an-image-from-a-qrc-using-imread-of-opencv", "title": "Read an image from a qrc using imread() of OpenCV", "body": "<p>I want to read an image from a <em>qrc</em> using <code>imread()</code> of OpenCV in this way:</p>\n\n<pre><code>Mat img = imread(\":/TempIcons/logo.png\");\n</code></pre>\n\n<p>but the final <code>img</code> size is [0x0]. I have also tried:</p>\n\n<pre><code>Mat img = imread(\"qrc://TempIcons/logo.png\");\n</code></pre>\n\n<p>but the size I get is the same. I don't want to load the image in a <code>QImage</code> to then transform it in a <code>cv::Mat</code>. Is there a way to do this in a easy way?. If it is, how can I do it?.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448470364, "post_id": 33922111, "comment_id": 55605273, "body": "the file is called <code>for.h</code> ?"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1448470464, "post_id": 33922111, "comment_id": 55605339, "body": "@tobi303 added file name"}, {"owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "edited": false, "score": 0, "creation_date": 1448470494, "post_id": 33922111, "comment_id": 55605360, "body": "Is <a href=\"http://stackoverflow.com/a/3399167/3854322\">this answer</a> of any help?"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "edited": false, "score": 0, "creation_date": 1448471250, "post_id": 33922111, "comment_id": 55605827, "body": "@DeepBlackDwarf Wow! That was it. I didn&#39;t have USERPROFILE environment variable and I created it and set it to c:\\Users\\my.name and now I can add the file."}, {"owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "edited": false, "score": 1, "creation_date": 1448525972, "post_id": 33922111, "comment_id": 55627117, "body": "@zadane Glad it helped. Consider marking your question as dupe, or posting and answer and accept it in order to help future readers :)"}, {"owner": {"reputation": 1433, "user_id": 3499424, "user_type": "registered", "profile_image": "https://graph.facebook.com/1267452563/picture?type=large", "display_name": "John Neuhaus", "link": "https://stackoverflow.com/users/3499424/john-neuhaus"}, "reply_to_user": {"reputation": 1540, "user_id": 2192409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qrL0w.png?s=128&g=1", "display_name": "Tdorno", "link": "https://stackoverflow.com/users/2192409/tdorno"}, "edited": false, "score": 0, "creation_date": 1505492694, "post_id": 33922111, "comment_id": 79451756, "body": "@Tdorno That is nowhere near a duplicate. Different version, different repro, different root cause, different solution."}, {"owner": {"reputation": 1540, "user_id": 2192409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qrL0w.png?s=128&g=1", "display_name": "Tdorno", "link": "https://stackoverflow.com/users/2192409/tdorno"}, "reply_to_user": {"reputation": 1433, "user_id": 3499424, "user_type": "registered", "profile_image": "https://graph.facebook.com/1267452563/picture?type=large", "display_name": "John Neuhaus", "link": "https://stackoverflow.com/users/3499424/john-neuhaus"}, "edited": false, "score": 0, "creation_date": 1505510045, "post_id": 33922111, "comment_id": 79459321, "body": "@JohnNeuhaus Thanks, if you feel the need to necro anything else (1 year later) then please hit me up."}, {"owner": {"reputation": 326, "user_id": 4975230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NQ8VO.jpg?s=128&g=1", "display_name": "jrh", "link": "https://stackoverflow.com/users/4975230/jrh"}, "edited": false, "score": 0, "creation_date": 1548093148, "post_id": 33922111, "comment_id": 95411158, "body": "I seemed to get this when I tried to install VS 2013 after I installed VS 2015 and VS 2017."}], "answers": [{"tags": [], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "is_accepted": true, "score": 2, "last_activity_date": 1457066715, "last_edit_date": 1495541960, "creation_date": 1451315134, "answer_id": 34495903, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/34495903#34495903", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>The <a href=\"https://stackoverflow.com/questions/3397659/visual-studio-gone-bonkers-the-directory-name-is-invalid-error-when-trying-to/3399167#3399167\">link</a> in the comment section by BlackDwarf fixed the problem even though that was was for C# but applies.</p>\n\n<p>I didn't have USERPROFILE environment variable so I created it and set it to c:\\Users\\my.name and now I can add the file</p>\n"}, {"tags": [], "owner": {"reputation": 1433, "user_id": 3499424, "user_type": "registered", "profile_image": "https://graph.facebook.com/1267452563/picture?type=large", "display_name": "John Neuhaus", "link": "https://stackoverflow.com/users/3499424/john-neuhaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1505492575, "creation_date": 1505492575, "answer_id": 46243921, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/46243921#46243921", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>If the environment variable route doesn't work for you, check the integrity of your project file next.</p>\n\n<p>I had this problem in 2017, and it was due to a double entry in the vcxproj from a manual editing error. Our vcxproj file had the following in it:</p>\n\n<p><code>&lt;ClInclude Include=\"XXXX.h\" /&gt;\n&lt;ClCompile Include=\"XXXX.h\" /&gt;</code></p>\n\n<p>In 2017 we got exactly the error you described when trying to add an existing file, a slightly different one when adding new, and strange crashes elsewhere.  Opening the solution in 2015 logged the exact problem and failed to load the project.  We removed the double entry and all the mysterious problems vanished.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 2535386, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/TFBeI.jpg?s=128&g=1", "display_name": "coolhandle01", "link": "https://stackoverflow.com/users/2535386/coolhandle01"}, "edited": false, "score": 0, "creation_date": 1525271851, "post_id": 46446889, "comment_id": 87292815, "body": "VS could do with not automatically checking these out unless they <i>actually change</i> ..."}, {"owner": {"reputation": 11900, "user_id": 558892, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7889628f70248130adcbf4802e00c8d8?s=128&d=identicon&r=PG", "display_name": "Deqing", "link": "https://stackoverflow.com/users/558892/deqing"}, "edited": false, "score": 0, "creation_date": 1531267810, "post_id": 46446889, "comment_id": 89528900, "body": "Same here. Someone accidentally added an extra line <code>&lt;&#47;item&gt;</code> to the .filters file."}], "tags": [], "owner": {"reputation": 2396, "user_id": 254041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QNiuN.jpg?s=128&g=1", "display_name": "habakuk", "link": "https://stackoverflow.com/users/254041/habakuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1506512242, "creation_date": 1506512242, "answer_id": 46446889, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/46446889#46446889", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>I had the same problem and it was because of merge errors in the file <code>ProjectName.vcxproj.filters</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2535386, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/TFBeI.jpg?s=128&g=1", "display_name": "coolhandle01", "link": "https://stackoverflow.com/users/2535386/coolhandle01"}, "is_accepted": false, "score": 0, "last_activity_date": 1525271815, "creation_date": 1525271815, "answer_id": 50137292, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/50137292#50137292", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>The answers here led me to check my vcxproj when I experienced the OP's problem.\nIt turns out I had two filters with the same name in my Project.vcxproj.filters, something like </p>\n\n<pre><code>&lt;Project&gt;\n  &lt;Common&gt;\n  ...\n  ...\n  &lt;Stuff&gt;\n     &lt;Common&gt;\n</code></pre>\n\n<p>And I was trying to add files to the second Common. </p>\n\n<p>To fix it, I had to ..</p>\n\n<ul>\n<li>edit the vcxproj manually in {favoured text editor} and remove the second filter I'd added with a duplicate name. </li>\n<li>Unload/Reload the project from the solution in VS(2017), and add a filter with a unique name. All good - I can add files to my new filter.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 1792865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hPbEy.jpg?s=128&g=1", "display_name": "Dmytro", "link": "https://stackoverflow.com/users/1792865/dmytro"}, "is_accepted": false, "score": 1, "last_activity_date": 1542893844, "creation_date": 1542893844, "answer_id": 53432222, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/53432222#53432222", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>I use VS 2013 Express and had the same error.</p>\n\n<p>Solved by removing <code>VCTargetsPath</code> environment variable, I added it some time ago, don't remember why :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3320542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf8deb757c4d4c75f2c34d73fbfbe25?s=128&d=identicon&r=PG&f=1", "display_name": "Adam H.", "link": "https://stackoverflow.com/users/3320542/adam-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1551397108, "creation_date": 1551397108, "answer_id": 54935947, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015/54935947#54935947", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>I had the same issue, but the solution had nothing to do with \"Environment Variables\" for me.  What I did:  Close Visual Studio 2017.  Reopen my project.  Suddenly I had two copies of the \"Helper.cpp\" and \"Helper.h\" that I was trying to add already as part of the solution files.  Clicking on each I saw that one of the files was invalid, probably because I had deleted that version of the file in that file location.  I deleted the invalid files, checked to make sure that the files had the correct code I wanted in them, built the solution and everything ran fine.</p>\n\n<p>Not sure why closing and reopening VS fixed the problem, but glad it did.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5177, "favorite_count": 3, "accepted_answer_id": 34495903, "answer_count": 6, "score": 8, "last_activity_date": 1551397108, "creation_date": 1448470261, "last_edit_date": 1513964238, "question_id": 33922111, "link": "https://stackoverflow.com/questions/33922111/the-desired-name-for-file-is-invalid-visual-studio-2015", "title": "The desired name for &lt;file&gt; is invalid - visual studio 2015", "body": "<p>This is pretty crazy, I am only adding an existing .h file to VS2015 C++ project but it would complain:</p>\n\n<blockquote>\n  <p>The desired name for c:\\code\\usbview\\USBdevices.h is invalid</p>\n</blockquote>\n\n<p>I was able to add this file to project when it had its own .sln file. However, I created a new empty .sln file and wanted to add this and other project and that's how this issue kicked in. It wouldn't add this project to new solution giving a similar weird error about the files I added.</p>\n\n<p>I then add the base project to that solution file and tried to add this .h and .cpp files there but it adds the .cpp but gives this error for .h file.</p>\n\n<p>This is very weird, I changed the files names but the same error.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "dll", "kernel", "named-pipes"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1448471038, "post_id": 33922025, "comment_id": 55605699, "body": "Which platform are you running your application on?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1448478960, "post_id": 33922025, "comment_id": 55610347, "body": "Very similar:  <a href=\"http://stackoverflow.com/questions/17842981/the-procedure-entry-point-gettickcount64-could-not-be-located-in-the-dynamic-l?rq=1\" title=\"the procedure entry point gettickcount64 could not be located in the dynamic l\">stackoverflow.com/questions/17842981/&hellip;</a>"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1448479386, "post_id": 33922025, "comment_id": 55610575, "body": "To your comment about the service pack: it won&#39;t fix this specific problem, but it is worth noting that VS 2012, VS 2013, and VS 2015 target Windows 7 Service Pack 1, not Windows 7 RTM. With VS 2015, the C++ REDIST package will fail to install on Windows 7 RTM. Windows 7 RTM is out of it&#39;s <a href=\"http://windows.microsoft.com/en-us/windows/lifecycle\" rel=\"nofollow noreferrer\">lifecycle</a> so Windows 7 Service Pack 1 is mandatory."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 6, "last_activity_date": 1448472698, "creation_date": 1448472698, "answer_id": 33922922, "question_id": 33922025, "link": "https://stackoverflow.com/questions/33922025/getoverlappedresultex-could-not-be-located-in-kernel32-dll/33922922#33922922", "title": "GetOverlappedResultEx could not be located in kernel32.dll", "body": "<p>The message means that some part of the code depends on GetOverlappedResultEx, a function it expects exists in the system DLL kernel32.dll.  (The 32 in kernel32.dll refers to the 32-bit version of the Windows API, which is the same even for 64-bit programs.)</p>\n\n<p>To figure out what's going on, search MSDN for the function.  On that page, you can see that <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh448542(v=vs.85).aspx\" rel=\"noreferrer\">GetOverlappedResultEx</a> should indeed come from kernel32.dll, but it wasn't added to the API before Windows 8.  You're likely trying to run the program on an older version of Windows.</p>\n\n<p>Your options are to run the program on a newer version of Windows or to modify the code to not rely on this particular function.</p>\n"}, {"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 3, "last_activity_date": 1448477474, "last_edit_date": 1448477474, "creation_date": 1448477079, "answer_id": 33924193, "question_id": 33922025, "link": "https://stackoverflow.com/questions/33922025/getoverlappedresultex-could-not-be-located-in-kernel32-dll/33924193#33924193", "title": "GetOverlappedResultEx could not be located in kernel32.dll", "body": "<p>If you are targeting Windows 7 as your minimum, then you should set <code>_WIN32_WINNT</code> to <code>0x0601</code> as a Preprocessor Define. The Windows 8 SDK or later defaults to the 'newest' rather than the 'oldest' setting for this primary header control which with VS 2012 is <code>0x0602</code> (Windows 8). A number of API headers rely on this define to control platform-specific behavior to support 'down-level' versions of the OS. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383745.aspx\" rel=\"nofollow\">Using Windows Headers</a>.</p>\n\n<p><code>GetOverlappedResultEx</code> is only supported on Windows 8 or later. If you want to be compatible with Windows 7, then you need to stick with <code>GetOverlappedResult</code>.</p>\n\n<p>For Windows 8 Store, Windows phone 8, and universal Windows apps you need to use <code>GetOverlappedResultEx</code>. Therefore, if you are writing code that is being reused for both these platforms, you go back to our friend <code>_WIN32_WINNT</code>. For example, in <code>WaveBankReader.cpp</code> in <a href=\"https://github.com/Microsoft/DirectXTK\" rel=\"nofollow\">DirectX Tool Kit</a> I used the following to support Windows Vista or later for Windows desktop, Windows 8 Store, Windows phone 8, and universal Windows apps:</p>\n\n<pre><code>#if (_WIN32_WINNT &gt;= _WIN32_WINNT_WIN8)\n    BOOL result = GetOverlappedResultEx( hFile.get(), &amp;request, &amp;bytes, INFINITE, FALSE );\n#else\n    if ( wait  )\n        (void)WaitForSingleObject( m_event.get(), INFINITE );\n\n    BOOL result = GetOverlappedResult( hFile.get(), &amp;request, &amp;bytes, FALSE );\n#endif\n</code></pre>\n\n<blockquote>\n  <p>I have the explicit call to <code>WaitForSingleObject</code> in the \"down-level\" case based on a variable that is set if the previous <code>ReadFile</code> failed with an <code>ERROR_IO_PENDING</code>. <code>GetOverlappedResultEx</code> handles this case.</p>\n</blockquote>\n\n<p>See <a href=\"http://blogs.msdn.com/b/chuckw/archive/2012/09/17/dual-use-coding-techniques-for-games.aspx\" rel=\"nofollow\">Dual-use Coding Techniques</a></p>\n"}], "owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10860, "favorite_count": 0, "accepted_answer_id": 33922922, "answer_count": 2, "score": 4, "last_activity_date": 1448477474, "creation_date": 1448470006, "last_edit_date": 1448475565, "question_id": 33922025, "link": "https://stackoverflow.com/questions/33922025/getoverlappedresultex-could-not-be-located-in-kernel32-dll", "title": "GetOverlappedResultEx could not be located in kernel32.dll", "body": "<p>I am trying to create an application which uses a dll for pipe communication and run into this error, when I started using this function <code>GetOverlappedResultEx</code>. Whenever I run the executable that uses my dll, I get this error message ...Does anyone know what is the meaning of it? I am building 64 bit dlls! I am using C++ on visual studio 2012. Do I need to install any service pack? \nEdit:  I am using Windows 7 Computer</p>\n\n<p><a href=\"https://i.stack.imgur.com/jpsjn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jpsjn.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "winapi", "opengl"], "answers": [{"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1448471493, "creation_date": 1448471493, "answer_id": 33922518, "question_id": 33921905, "link": "https://stackoverflow.com/questions/33921905/opengl-load-texture-without-or-with-static-device-context/33922518#33922518", "title": "OpenGL load texture without or with static device context?", "body": "<blockquote>\n  <p>Is it possible to create dummy static DC and make it current when loading textures?</p>\n</blockquote>\n\n<p>Sort of. As long as the visual formats of the device contexts are compatible with each other, you can bind a OpenGL render context created for this visual format to any of these device contexts.</p>\n\n<p>So you can perfectly fine create a window, with a DC that's never shown on the screen (always kept hidden, size of 0\u00d70) and use that for background OpenGL operations. You can also create a secondary OpenGL context, have it share its namespace with the primary context, make it current on the hidden window on a separate worker thread, so that you can asynchronously perform OpenGL operations (like loading textures) while the main context is used for other things.</p>\n"}], "owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 33922518, "answer_count": 1, "score": 1, "last_activity_date": 1448471493, "creation_date": 1448469618, "question_id": 33921905, "link": "https://stackoverflow.com/questions/33921905/opengl-load-texture-without-or-with-static-device-context", "title": "OpenGL load texture without or with static device context?", "body": "<p>I want to create opengl 2d library, where textures as well as windows are encapsulated as objects. Is it possible to create dummy static DC and make it current when loading textures? All of the windows would have same <code>PIXELFORMATDESCRIPTOR</code> as the static one. This way, users of the library would not have to create window prior to loading textures or passing windows as parameters to textures.</p>\n"}, {"tags": ["c++", "templates", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1448470647, "post_id": 33921852, "comment_id": 55605457, "body": "tested a little. This works: <a href=\"http://ideone.com/tX3JcU\" rel=\"nofollow noreferrer\">ideone.com/tX3JcU</a>"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1448470665, "post_id": 33921852, "comment_id": 55605467, "body": "ADL isn&#39;t triggered when using explicit template arguments."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1448473996, "post_id": 33921852, "comment_id": 55607498, "body": "@0x499602D2: A little more complicated: except if there is a visible function template of the same name: <a href=\"http://coliru.stacked-crooked.com/a/15b614250f6ad61c\" rel=\"nofollow noreferrer\">Demo</a>."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1448474813, "post_id": 33922414, "comment_id": 55608005, "body": "I&#39;m guessing the <code>U&#47;]*u</code> is your hand falling asleep on the keyboard?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1448474914, "post_id": 33922414, "comment_id": 55608056, "body": "@Barry fat phone fingers."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1448474998, "post_id": 33922414, "comment_id": 55608097, "body": "I&#39;m impressed you can type all of that on your phone!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1448475405, "last_edit_date": 1448475405, "creation_date": 1448471150, "answer_id": 33922414, "question_id": 33921852, "link": "https://stackoverflow.com/questions/33921852/argument-dependent-lookup-not-considered/33922414#33922414", "title": "argument dependent lookup not considered", "body": "<p>Template functions with explicit template arguments are not found via ADL.  Maybe a parsing problem, do not know why.</p>\n\n<p>Another example is <code>std::get</code>.  You cannot <code>get&lt;3&gt;(some_tuple)</code> without a using statement.</p>\n\n<p>You can work around this by passing the arguments you would pass as template args as tag types.  You can also do a one-two step external function plus internal ADL tag dispatched lookup (so the public function has to be qualified, but customization points of the internal tag-based ADL can be done).</p>\n\n<pre><code>// tag utilities:\ntemplate&lt;class T&gt;struct tag_t{using type=T;constexpr tag_t(){};};\ntemplate&lt;class T&gt;constexpr tag_t&lt;T&gt; tag={};\n\nnamespace some{\n  template&lt;class T, class U&gt;\n  T* dynamic(tag_t&lt;T&gt;, U* u){\n    return dynamic_cast&lt;T&gt;(u);\n  }\n  struct bob{};\n}\n</code></pre>\n\n<p>Now <code>dynamic(tag&lt;int&gt;,new some::bob{})</code> will find <code>dynamic</code> via ADL.</p>\n\n<p>I do not have chapter and verse from the standard for you.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448478038, "post_id": 33922442, "comment_id": 55609811, "body": "<code>dynamicCast&lt;Test::Derived&gt;</code> <b>is</b> an <i>unqualified-id</i>, <b>if</b> <code>dynamicCast</code> is a <i>template-name</i>. A <code>template&lt;int&gt; void dynamicCast() = delete;</code> that is picked up by normal unqualified lookup is sufficient to make ADL work."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1448481379, "post_id": 33922442, "comment_id": 55611577, "body": "@T.C. you&#39;re right of course, my std::fu is slow today."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1448482137, "last_edit_date": 1448482137, "creation_date": 1448471260, "answer_id": 33922442, "question_id": 33921852, "link": "https://stackoverflow.com/questions/33921852/argument-dependent-lookup-not-considered/33922442#33922442", "title": "argument dependent lookup not considered", "body": "<p>In order to even understand that you have a function call with a template, and not a bunch of <code>&lt;</code> and <code>&gt;</code> operators, the compiler must know you have a function template; and in order to understand that, it must know what namespace to look it up in. And in order to know that, it must understand the namespaces of the function arguments. And in order to understand <em>that</em> it must know there <em>are</em> function arguments around. Which, as we have seen, depends on knowing that there's a function call to begin with. Which the compiler doesn't know until it finds a template declaration. See the problem?</p>\n\n<p>Because of that, ADL is only ever considered if the postfix-expression in the function call is an <em>unqualified-id</em>. Which <code>dynamicCast&lt;Test::Derived&gt;</code> is <s>not</s> <strong>&lt;edit></strong> only if <code>dynamicCast</code> is known to be a <em>template-name</em>, which is determined during normal unqualified lookup, which doesn't look into the namespace where the template is declared. </p>\n\n<p>As @T.C. observed, one can declare an unrelated function template named <code>dynamicCast</code> in the global namespace in order to make ADL work.</p>\n\n<p><strong>&lt;/edit></strong> </p>\n\n<p>In a better world we would have an option to write <code>template foo&lt;whatever&gt;</code> in any context and disambiguate the angle brackets. Maybe in C++20.</p>\n"}], "owner": {"reputation": 2821, "user_id": 491807, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/792f50329d18efa9753eb4a635fe1476?s=128&d=identicon&r=PG", "display_name": "Jos&#233;", "link": "https://stackoverflow.com/users/491807/jos%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "closed_date": 1448470733, "answer_count": 2, "score": 4, "last_activity_date": 1448482137, "creation_date": 1448469489, "last_edit_date": 1448469659, "question_id": 33921852, "link": "https://stackoverflow.com/questions/33921852/argument-dependent-lookup-not-considered", "closed_reason": "Duplicate", "title": "argument dependent lookup not considered", "body": "<p>Why argument dependent lookup doesn't consider <code>Foo::dynamicCast</code>, shouldn't it consider namespace Foo because the Base class is in this namespace?</p>\n\n<pre><code>#include &lt;memory&gt;\nusing namespace std;\n\nnamespace Foo\n{\n\ntemplate&lt;typename P, typename T&gt; P*\ndynamicCast(T* t)\n{\n    return dynamic_cast&lt;P*&gt;(t);\n}\n\nclass Base\n{\npublic:\n    virtual ~Base() = default;\n};\n\n}\n\nnamespace Test\n{\n\nclass Derived : public Foo::Base\n{\n};\n\n}\n\nshared_ptr&lt;Foo::Base&gt; b = make_shared&lt;Test::Derived&gt;();\nauto d = dynamicCast&lt;Test::Derived&gt;(b.get());\n</code></pre>\n"}, {"tags": ["c++", "struct", "unions", "assignment-operator"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1448469482, "post_id": 33921710, "comment_id": 55604665, "body": "You are using <a href=\"https://en.wikipedia.org/wiki/C%2B%2B11#Unrestricted_unions\" rel=\"nofollow noreferrer\">Unrestricted_unions</a> (which is not trivial)."}, {"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1448470668, "post_id": 33921710, "comment_id": 55605470, "body": "I do not have access to VS2015. But, if you define a non-default copy assignment operator for <code>Rect()</code> then the program compiles using <code>clang++</code> but not with <code>g++</code>. Examples: <a href=\"https://goo.gl/dCcIJc\" rel=\"nofollow noreferrer\">clang++</a> and <a href=\"http://ideone.com/tFUnFt\" rel=\"nofollow noreferrer\">g++</a>. Does this work with VS2015?"}, {"owner": {"reputation": 305, "user_id": 871495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ab768e231301c71407f72849cfa097b0?s=128&d=identicon&r=PG", "display_name": "Gustav-Gans", "link": "https://stackoverflow.com/users/871495/gustav-gans"}, "edited": false, "score": 0, "creation_date": 1448487440, "post_id": 33921710, "comment_id": 55614587, "body": "thanks for your replies Yes I think that the problem was using the default copy and assignment operators. Maybe there is a problem generating them automatically when using these (unrestricted) union construct.  When I replace them with non-default copy and assignment operators, there is no problem."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462231138, "post_id": 36987534, "comment_id": 61540313, "body": "Objects with constructor <i>can</i> be used in a union There&#39;s an example in [class.union]/3 of C++14. I guess you refer to the rule that if the object has a <i>non-trivial</i> constructor then the union (or the class containing the union if it&#39;s an anonymous union) must have a user-provided constructor."}], "tags": [], "owner": {"reputation": 121, "user_id": 2012862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45de6b38f344faed683b979e7e2aee8d?s=128&d=identicon&r=PG", "display_name": "zapatero", "link": "https://stackoverflow.com/users/2012862/zapatero"}, "is_accepted": false, "score": 1, "last_activity_date": 1462226534, "last_edit_date": 1462226534, "creation_date": 1462207844, "answer_id": 36987534, "question_id": 33921710, "link": "https://stackoverflow.com/questions/33921710/c2280-attempting-to-reference-a-deleted-function-union-struct-copy-construct/36987534#36987534", "title": "C2280: attempting to reference a deleted function (union, struct, copy constructor)", "body": "<p>The error is from the union placing the memory usage of the floats <code>p1x, ... p2y</code> on top of the allocation for the Vector objects.</p>\n\n<p>g++ would give a more explicit error message informing that an object with a constructor cannot be used in a union.</p>\n\n<p>I'm surprised VS does not report an error on the use of an object in a union directly. It would be interesting to see what happens if you declare the Vectors AFTER the floats in your union.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 5, "last_activity_date": 1462230973, "last_edit_date": 1495542336, "creation_date": 1462230973, "answer_id": 36993074, "question_id": 33921710, "link": "https://stackoverflow.com/questions/33921710/c2280-attempting-to-reference-a-deleted-function-union-struct-copy-construct/36993074#36993074", "title": "C2280: attempting to reference a deleted function (union, struct, copy constructor)", "body": "<p>Repeating the error message:</p>\n\n<blockquote>\n  <p><code>main.cpp(56): error C2280: 'Rect &amp;Rect::operator =(const Rect &amp;)': attempting to reference a deleted function</code></p>\n</blockquote>\n\n<p>This is fairly clear: the member function <code>operator=</code> with parameter <code>const Rect &amp;</code> has been <code>delete</code>d, but your code tries to call it on the line <code>test = Rect();</code>.</p>\n\n<p>You then say:</p>\n\n<blockquote>\n  <p>The compiler tries to tell me that, the copy constructor of class Rect is a deleted function</p>\n</blockquote>\n\n<p>However, you misread the error.  The error is about the function <code>operator =</code>, which is called <em>copy assignment operator</em>.  This is a different function to <em>copy constructor</em>, which would look like <code>Rect::Rect(const Rect &amp;)</code>.</p>\n\n<hr>\n\n<p>You say that you tried adding:</p>\n\n<blockquote>\n  <p><code>Rect&amp; operator=(const Rect&amp;) = default;</code></p>\n</blockquote>\n\n<p>However this would make no difference. The compiler-generated <code>operator=</code> function is <code>delete</code>d because it is not possible for the compiler to generate one (explanation for this comes below); writing <code>= default;</code> does not change this.  You have to actually write your own body for <code>operator=</code> which performs the actions that you want to occur when an assignment happens.</p>\n\n<hr>\n\n<p>In Standard C++ it is not permitted to have an anonymous struct, let alone an anonymous struct inside an anonymous union. So you are really out on your own here. The rules your compiler is using regarding <code>operator=</code>, copy constructor, etc. are not covered by any Standard.</p>\n\n<p>A version of your <code>Rect</code> that is compilable in Standard C might look like:</p>\n\n<pre><code>class Rect\n{\npublic:\n    struct S1 {\n        Vector p1, p2;\n        S1(Vector p1, Vector p2): p1(p1), p2(p2) {} \n    };\n    struct S2 {\n        float p1x, p1y, p2x, p2y;\n    };\n\n    union {\n        struct S1 s1;\n        struct S2 s2;\n    };\n\n    Rect() : s1({0, 0}, {0, 0}) {}\n    Rect(Vector p1,  Vector p2) : s1(p1, p2) {}\n};\n</code></pre>\n\n<p>So far, so good. For this class, the implicitly-declared <code>operator=</code> is <em>defined as deleted</em>. To see why , we first have to look at the implicitly-declared special functions for the anonymous union, because the behaviour of implicitly-declared function for a class depends on the behaviour of the same operation for each of its members.</p>\n\n<p>The relevant rule here for the union is C++14 [class.union]/1:</p>\n\n<blockquote>\n  <p>If any non-static data member of a union has a non-trivial default constructor , copy constructor, move constructor, copy assignment operator, move assignment operator, or destructor, the corresponding member function of the union must be user-provided or it will be implicitly <code>delete</code>d for the union.</p>\n</blockquote>\n\n<p><code>Vector</code> has a non-trivial <code>operator=</code>, because you write your own body for it. Therefore <code>S1</code> has non-trivial <code>operator=</code>, because it has a member with non-trivial <code>operator=</code>, and so according to the above quote, the implicitly-declared <code>operator=</code> for the union is <code>delete</code>d.</p>\n\n<p>Note that there is no error about the copy-constructor: <code>Vector</code> <em>does</em> have a trivial copy-constructor, so the union does too.</p>\n\n<hr>\n\n<p>To fix this error you could do one of two things:</p>\n\n<ul>\n<li>Change <code>Vector::operator=</code> to be trivial, either by removing your definition entirely, or making it <code>= default;</code></li>\n<li>Write <code>operator=</code> for the <code>Rect</code> class</li>\n</ul>\n\n<p>Now, how would you write your own <code>operator=</code>?  Do you do <code>s1 = other.s1;</code>, or do you do <code>s2 = other.s2;</code> ? The compiler can't know that on its own, which is the reason behind the implicitly-declared <code>operator=</code> being deleted.</p>\n\n<p>Now, it seems you overlooked (either accidentally or deliberately) the rule about active members in C++:</p>\n\n<blockquote>\n  <p>In a union, at most one of the non-static data members can be active at any time</p>\n</blockquote>\n\n<p>This means that if <code>s1</code> is the last member set, then you'd have to do <code>s1 = other.s1;</code>.  Or if <code>s2</code> is the last member set, you'd have to do <code>s2 = other.s2;</code>.  </p>\n\n<p>The copy-constructor doesn't run into this problem because it is <em>trivial</em>: the compiler can generate a bit-wise copy and that will correctly implement the copy regardless of which member was active. But since your <code>operator=</code> is non-trivial, that would not be possible. </p>\n\n<p>For example, imagine if you actually had a union of <code>std::string</code> and <code>std::vector</code> - bitwise copy doesn't work for either of those and you need to know which one is active in order to perform the copy.</p>\n\n<hr>\n\n<p>Reiterating: <strong>In standard C++ it is not permitted to read a member of a union other than the one most recently written to</strong>. You can't use unions for aliasing.  C++ has other language tools to achieve what you might do in C with union aliasing, <a href=\"https://stackoverflow.com/questions/2253878/why-does-c-disallow-anonymous-structs-and-unions\">see here for more discussion</a>.</p>\n\n<p>Based on the choice of members for your anonymous structs I suspect that this is what you intended to do.  If you really want to go ahead with this approach, relying on your compiler implementing union aliasing as a non-standard extension, then my advice would be to use the defaulted <code>operator=</code> for your <code>Vector</code> class.  </p>\n"}], "owner": {"reputation": 305, "user_id": 871495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ab768e231301c71407f72849cfa097b0?s=128&d=identicon&r=PG", "display_name": "Gustav-Gans", "link": "https://stackoverflow.com/users/871495/gustav-gans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12534, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1462230973, "creation_date": 1448469074, "last_edit_date": 1592644375, "question_id": 33921710, "link": "https://stackoverflow.com/questions/33921710/c2280-attempting-to-reference-a-deleted-function-union-struct-copy-construct", "title": "C2280: attempting to reference a deleted function (union, struct, copy constructor)", "body": "<p>I have a problem with misleading error messages, when I try to compile the following minimal sample in Visual Studio 2015:</p>\n<pre><code>class Vector\n{\n    float x;\n    float y;\n\npublic:\n\n    Vector(float x, float y) : x(x), y(y) {}\n    Vector&amp; operator = (const Vector&amp; v) { x = v.x; y = v.y; return *this; }\n    //Vector(Vector&amp;&amp;) = default;\n};\n\n\nclass Rect\n{\npublic:\n    union {\n        struct {\n            Vector p1, p2;\n        };\n\n        struct {\n            float p1x, p1y, p2x, p2y;\n        };\n    };\n\n    Rect() : p1(0,0),  p2(0,0) {}\n    Rect(Vector&amp; p1,  Vector&amp; p2) : p1(p1), p2(p2) {}\n\n    /*Rect(const Rect&amp;) = default;\n    Rect&amp; operator=(const Rect&amp;) = default;\n    Rect&amp; operator=(Rect&amp;&amp;) = default;\n    Rect(Rect&amp;&amp;) = default;*/\n};\n\n\nint main()\n{\n    Rect test = Rect();\n    test = Rect();\n    return 0;\n}\n</code></pre>\n<p>I got the following error messages:</p>\n<blockquote>\n<p>1&gt;...main.cpp(56): error C2280: 'Rect &amp;Rect::operator =(const Rect &amp;)': attempting to reference a deleted function</p>\n<p>1&gt;...main.cpp(50): note: compiler has generated 'Rect::operator =' here</p>\n</blockquote>\n<p>The compiler tries to tell me that, the copy constructor of class Rect is a deleted function. So I tried to add all kinds of additional (copy) constructors and assignment operators like shown below but without success:</p>\n<pre><code>Rect(const Rect&amp;) = default;\nRect&amp; operator=(const Rect&amp;) = default;\nRect&amp; operator=(Rect&amp;&amp;) = default;\nRect(Rect&amp;&amp;) = default;\n</code></pre>\n<p>I recognized that the error actually is not caused in the Rect class. When I comment the line</p>\n<pre><code>Vector&amp; operator = (const Vector&amp; v) { x = v.x; y = v.y; return *this; }\n</code></pre>\n<p>the error disappiers and when I want to keep this line, I have to add the following line:</p>\n<pre><code>Vector(Vector&amp;&amp;) = default;\n</code></pre>\n<p>However, this problem seems to show up only if I am using unions and structs inside my Rect class.\nSo I do not know, where my error is actually caused or if just the error message points to the wrong class.</p>\n"}, {"tags": ["c++", "set", "output", "a-star"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 1, "creation_date": 1448469086, "post_id": 33921632, "comment_id": 55604396, "body": "You need to overload the extraction operator (&lt;&lt;) for type <code>Location</code>."}, {"owner": {"reputation": 23, "user_id": 4819649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1061163983898203/picture?type=large", "display_name": "Niall Clarke", "link": "https://stackoverflow.com/users/4819649/niall-clarke"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1448469408, "post_id": 33921632, "comment_id": 55604599, "body": "how exactly would i do that?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1448469468, "post_id": 33921632, "comment_id": 55604650, "body": "@NiallClarke Show how Location is defined and how you are going to output it"}, {"owner": {"reputation": 23, "user_id": 4819649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1061163983898203/picture?type=large", "display_name": "Niall Clarke", "link": "https://stackoverflow.com/users/4819649/niall-clarke"}, "edited": false, "score": 0, "creation_date": 1448469583, "post_id": 33921632, "comment_id": 55604741, "body": "this is how it is defined struct Location { \tint f, g, h; };"}, {"owner": {"reputation": 23, "user_id": 4819649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1061163983898203/picture?type=large", "display_name": "Niall Clarke", "link": "https://stackoverflow.com/users/4819649/niall-clarke"}, "edited": false, "score": 0, "creation_date": 1448469618, "post_id": 33921632, "comment_id": 55604767, "body": "how i plan on outputting it  for (it = myset.begin(); it != myset.end(); ++it)             {                 cout &lt;&lt; &#39; &#39; &lt;&lt; *it;             }"}], "answers": [{"tags": [], "owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "is_accepted": true, "score": 0, "last_activity_date": 1448470556, "creation_date": 1448470556, "answer_id": 33922210, "question_id": 33921632, "link": "https://stackoverflow.com/questions/33921632/how-to-output-a-set-containing-a-struct-location-for/33922210#33922210", "title": "How to output a set containing a Struct Location for", "body": "<blockquote>\n  <p>\"Error 1 error C2679: binary '&lt;&lt;' : no operator found which takes a\n  right-hand operand of type 'const Location' (or there is no acceptable\n  conversion)\"</p>\n</blockquote>\n\n<p>If you read the error carefully you will see that you are trying to pass an object of type 'const Location' as a parameter to the extraction operator which you do inside your for loop.</p>\n\n<pre><code>for (it = myset.begin(); it != myset.end(); ++it)\n{\n    cout &lt;&lt; ' ' &lt;&lt; *it;\n}\n</code></pre>\n\n<p>The problem is that the compiler cannot find any overload (or acceptable conversion) that accepts that type. This means that you most definitely have not defined it.</p>\n\n<p><strong>Solution.</strong></p>\n\n<p>The solution is simple, you must define an appropriate overload for the &lt;&lt; operator. The following example is one of many ways you can do this.</p>\n\n<pre><code>struct Location\n{\n    int f, g, h;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Location&amp; l)\n    {\n        os &lt;&lt; l.f &lt;&lt; ' ' &lt;&lt; l.g &lt;&lt; ' ' &lt;&lt; l.h;\n        return os;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4819649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1061163983898203/picture?type=large", "display_name": "Niall Clarke", "link": "https://stackoverflow.com/users/4819649/niall-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 33922210, "answer_count": 1, "score": 0, "last_activity_date": 1448470556, "creation_date": 1448468893, "question_id": 33921632, "link": "https://stackoverflow.com/questions/33921632/how-to-output-a-set-containing-a-struct-location-for", "title": "How to output a set containing a Struct Location for", "body": "<p>This is the start of a basic A* algorithm, how do I output whats inside the set? What i have so far doesn't work and I get this error </p>\n\n<p>\"Error  1   error C2679: binary '&lt;&lt;' : no operator found which takes a right-hand operand of type 'const Location' (or there is no acceptable conversion)\"</p>\n\n<pre><code>void astar(Location Start_Location, Location End_Location)\n{\n    Location Current_Location;\n    Current_Location.g = 1;\n    Start_Location.g = 1;\n\n    int position = 0;\n    bool found = false;\n\n    Start_Location.g = 0;\n    Start_Location.h = (abs(Start.x - End.x) + abs(Start.y - End.y));\n    Start_Location.f = Start_Location.g + Start_Location.h;\n\n    std::set&lt;Location&gt; myset;\n    std::set&lt;Location&gt;::iterator it;\n\n    myset.insert(it, Start_Location);\n\n    current_Coord.x = End.x;\n    current_Coord.y = End.y;\n\n    /*while (!myset.empty())\n    {*/\n        Current_Location.h = (abs(current_Coord.x - End.x) + abs(current_Coord.y - End.y));\n        Current_Location.f = Current_Location.g + Current_Location.h;\n\n        //calculates f around current node\n            Current_Location.h = (abs(current_Coord.x - End.x) + abs((current_Coord.y - 1) - End.y));\n            Current_Location.f = Current_Location.g + Current_Location.h;\n            myset.insert(it, Current_Location);\n\n            Current_Location.h = (abs(current_Coord.x - End.x) + abs((current_Coord.y + 1) - End.y));\n            Current_Location.f = Current_Location.g + Current_Location.h;\n            myset.insert(it, Current_Location);\n\n            Current_Location.h = (abs((current_Coord.x - 1) - End.x) + abs(current_Coord.y - End.y));\n            Current_Location.f = Current_Location.g + Current_Location.h;\n            myset.insert(it, Current_Location);\n\n            Current_Location.h = (abs((current_Coord.x + 1) - End.x) + abs(current_Coord.y - End.y));\n            Current_Location.f = Current_Location.g + Current_Location.h;\n            myset.insert(it, Current_Location);\n\n\n            for (it = myset.begin(); it != myset.end(); ++it)\n            {\n                cout &lt;&lt; ' ' &lt;&lt; *it;\n            }\n\n    //}\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "inline", "header-files", "member-functions"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1448469054, "post_id": 33921619, "comment_id": 55604371, "body": "Inline functions should be defined inside a header file, and not in a separate file."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1448469207, "post_id": 33921619, "comment_id": 55604469, "body": "[OT]: <code>(void)</code> is not required in C++."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1448469284, "post_id": 33921619, "comment_id": 55604514, "body": "@Jarod42 I&#39;m aware it&#39;s not required, but Visual Studio seems to put it there by default (when it autogenerates code for you) so I was just being consistent."}], "answers": [{"comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448469519, "post_id": 33921716, "comment_id": 55604695, "body": "I&#39;m also not a language lawyer.  My slightly different spin on what you said is that a function that is declared and defined <code>inline</code> in the module where it is defined doesn&#39;t need to be exported by that module for use in other modules.  There is a compile time option in ICC, that I always use (I wish it were part of the language standard) saying that declaring a function <code>inline</code> <b>and</b> using it <b>and</b> not defining it is a compile time reported error, rather than just a possible link time error."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448469610, "post_id": 33921716, "comment_id": 55604757, "body": "@JSF, I think, this is more or less what I tried to say. However, not <b>doesn&#39;t need to be exported</b>, but <b>will not be exported</b>."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448469970, "post_id": 33921716, "comment_id": 55605000, "body": "I won&#39;t claim to know whether the compilers I&#39;ve used were <b>wrong</b>, but I certainly know they often export the definition of a function declared and defined <code>inline</code>.  So when something changes (often with no connection to that function) making the compiler decide not to export it, less experienced programmers get confused."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448470328, "post_id": 33921716, "comment_id": 55605251, "body": "@JSF, no. inline functions can not be exported, that would be a clear violation of one definition rule. They are either obliterated as functions altogether - by trully inlining them - or declared with local linkage."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448470671, "post_id": 33921716, "comment_id": 55605472, "body": "Maybe I&#39;m using the word &quot;exported&quot; incorrectly (or at least differently than you are).  a.cpp declares <code>inline f()</code> and uses it and doesn&#39;t define it.  b.cpp declares <code>inline f()</code> and uses it and does define it. At link time, the copy of <code>f()</code> defined in b.cpp might or might not be available for the use by a.obj.  That availability then changes in a later build due to factors that seem to have no connection to <code>f()</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1448470925, "post_id": 33921716, "comment_id": 55605630, "body": "@JSF, what you seem to be telling seems to be exact replica of original OP question, and it shows that it f() is not available during linktime exactly because it is not exported."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1448469324, "last_edit_date": 1448469324, "creation_date": 1448469098, "answer_id": 33921716, "question_id": 33921619, "link": "https://stackoverflow.com/questions/33921619/why-does-inlining-my-accessors-break-my-code/33921716#33921716", "title": "Why does inlining my accessors break my code?", "body": "<p>I am not a language lawyer, so I can't tell if the compiler behaviour is legitimate or not. Yet, I can <strong>explain</strong> what is happening.</p>\n\n<p>When you are marking your functions <code>inline</code>, you are <strong>not</strong> hinting the compiler that it can inline this function. Since over 10 years compilers do not need your hint here. They know when to inline. Instead, what you do, you indicate the function definition to be local for every translation unit it is included in. For this definition should be available.</p>\n\n<p>Effectively what you said is that <code>name()</code> definition should be local for every <code>.cpp</code> file, but you didn't make it available for every <code>.cpp</code> file! I still believe the compiler could give a warning here.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448469202, "post_id": 33921725, "comment_id": 55604464, "body": "It does not &#39;shut down&#39; the rule. It is ensuring adherence with the rule."}, {"owner": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1448469261, "post_id": 33921725, "comment_id": 55604497, "body": "I don&#39;t like getting into too many technical details when providing an answer to non-crazy questions, but you&#39;re right."}], "tags": [], "owner": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "is_accepted": false, "score": 1, "last_activity_date": 1448469309, "last_edit_date": 1448469309, "creation_date": 1448469123, "answer_id": 33921725, "question_id": 33921619, "link": "https://stackoverflow.com/questions/33921619/why-does-inlining-my-accessors-break-my-code/33921725#33921725", "title": "Why does inlining my accessors break my code?", "body": "<p>You need to define the function body in the header if you want to use the <code>inline</code> keyword. <code>inline</code> also does more than just give a hint to the compiler: it more or less shuts down the \"one definition\" rule* about functions being defined once and only once.</p>\n\n<p>Furthermore, if you define class member functions inside the headers, ala</p>\n\n<pre><code>class Foo {\n    int bar() { return 5; }\n};\n</code></pre>\n\n<p>they get \"inlined\" by default, so there's no reason to type the keyword out :-)</p>\n\n<p>* Technically not, but for simplicity you can think of it as behaving that way. See the comment below by SergeyA.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 33921716, "answer_count": 2, "score": 9, "last_activity_date": 1448469324, "creation_date": 1448468844, "question_id": 33921619, "link": "https://stackoverflow.com/questions/33921619/why-does-inlining-my-accessors-break-my-code", "title": "Why does inlining my accessors break my code?", "body": "<p>I am experiencing a strange issue where attempting to <code>inline</code> the accessors for my \"Person\" class causes the code to fail to compile.</p>\n\n<p>The following code will compile and run successfully (Using Visual Studio 2012):</p>\n\n<p><strong>Person.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Person\n{\npublic:\n    Person(string name, int age = 0);\n    ~Person(void);\n\n    // Accessors\n    string name(void) const;\n    int    age (void) const;\n\nprivate:\n    string m_name;\n    int    m_age;\n};\n</code></pre>\n\n<p><strong>Person.cpp</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Person.h\"\n\n\nPerson::Person(string name, int age) :\n    m_name(name),\n    m_age (age )\n{}\n\n\nPerson::~Person(void) {}\n\nstring Person::name(void) const\n{\n    return m_name;\n}\n\nint Person::age(void) const\n{\n    return m_age;\n}\n</code></pre>\n\n<p><strong>header_test.cpp</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Person.h\"\n\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    Person p(\"Joe\");\n\n    cout &lt;&lt; p.name() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>If I change my accessors to be defined as</em></strong> <code>inline</code> <strong><em>functions the code breaks.</em></strong></p>\n\n<p><em>Inlining the accessors in Person.h</em></p>\n\n<pre><code>// Accessors\ninline string name(void) const;\ninline int    age (void) const;\n</code></pre>\n\n<p><em>Inlining the accessors in Person.cpp</em></p>\n\n<pre><code>inline string Person::name(void) const\n{\n    return m_name;\n}\n\ninline int Person::age(void) const\n{\n    return m_age;\n}\n</code></pre>\n\n<p>Doing this produces the following errors:</p>\n\n<blockquote>\n  <p>1>header_test.obj : error LNK2019: unresolved external symbol \"public: class std::basic_string,class std::allocator > __thiscall Person::name(void)const \" (?name@Person@@QBE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function _wmain</p>\n  \n  <p>1>fatal error LNK1120: 1 unresolved externals</p>\n</blockquote>\n\n<p><em>God that error message is cryptic...  Thank you for all of that oh so useful information Microsoft/Visual Studio!</em></p>\n\n<hr>\n\n<p>I know the <code>inline</code> keyword is just a \"hint\" to the compiler and probably has no real value here, but it still shouldn't break the code!</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["c++", "pointers", "visual-studio-2013", "intellisense"], "comments": [{"owner": {"reputation": 1067, "user_id": 3133454, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPrS4.jpg?s=128&g=1", "display_name": "ThisHandleNotInUse", "link": "https://stackoverflow.com/users/3133454/thishandlenotinuse"}, "edited": false, "score": 2, "creation_date": 1448469394, "post_id": 33921493, "comment_id": 55604583, "body": "&quot;my IDE automatically converting a dot operator to an arrow when accessing members through a pointer to an object.&quot;  Dear lord what a horrible thing to put in an IDE - blurring the distinction in the coder&#39;s mind between an object and pointer...   You will probably need to write a custom extension for Visual Studio to parse and implement this for you which is a major pain in the butt..."}, {"owner": {"reputation": 850, "user_id": 2324316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99bdc93b3fdd9a41fcbd08b728c02ece?s=128&d=identicon&r=PG", "display_name": "Kyle G.", "link": "https://stackoverflow.com/users/2324316/kyle-g"}, "reply_to_user": {"reputation": 1067, "user_id": 3133454, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPrS4.jpg?s=128&g=1", "display_name": "ThisHandleNotInUse", "link": "https://stackoverflow.com/users/3133454/thishandlenotinuse"}, "edited": false, "score": 1, "creation_date": 1448469561, "post_id": 33921493, "comment_id": 55604722, "body": "@ThisHandleNotInUse Hahaha, I agree that it could certainly cause problems for someone learning the language, but for my case it&#39;s simply a matter of wanting to avoid some finger acrobatics. Definitely not important enough to bother writing a custom extension, though."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1448470255, "post_id": 33921493, "comment_id": 55605205, "body": "Visual Assist does this for me (on top of many other benefits). Although it is not free software. <a href=\"http://www.wholetomato.com/\" rel=\"nofollow noreferrer\">wholetomato.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1244, "user_id": 6053907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74c527b9736547b1be600cad630083ef?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/6053907/gam"}, "edited": false, "score": 0, "creation_date": 1460441185, "post_id": 33923473, "comment_id": 60729514, "body": "Hi. There&#39;s one problem with this feature. It doesn&#39;t work on smart pointers. Visual Assist fixed this by adding a feature &quot;Convert dot to-&gt; if operator -&gt; is overloaded&quot;, please do the same. Thanks:)"}, {"owner": {"reputation": 412, "user_id": 1276551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQjRq.jpg?s=128&g=1", "display_name": "Lukasz Mendakiewicz", "link": "https://stackoverflow.com/users/1276551/lukasz-mendakiewicz"}, "reply_to_user": {"reputation": 1244, "user_id": 6053907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74c527b9736547b1be600cad630083ef?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/6053907/gam"}, "edited": false, "score": 1, "creation_date": 1460568852, "post_id": 33923473, "comment_id": 60808201, "body": "@Phantom We intentionally do not trigger the feature if there are members available through dot, but the extra option you are suggesting overriding that may be a good idea. I will add it to our backlog. Thanks!"}, {"owner": {"reputation": 436, "user_id": 1673293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8383e2e41d51836d3dc52f8a2173460?s=128&d=identicon&r=PG", "display_name": "Neptilo", "link": "https://stackoverflow.com/users/1673293/neptilo"}, "edited": false, "score": 0, "creation_date": 1497434355, "post_id": 33923473, "comment_id": 76073442, "body": "It doesn&#39;t seem to work inside lambda functions. Also, why not replace the dot as soon as it is pressed (at least if no members are available through dot)?"}], "tags": [], "owner": {"reputation": 412, "user_id": 1276551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQjRq.jpg?s=128&g=1", "display_name": "Lukasz Mendakiewicz", "link": "https://stackoverflow.com/users/1276551/lukasz-mendakiewicz"}, "is_accepted": true, "score": 4, "last_activity_date": 1448474597, "creation_date": 1448474597, "answer_id": 33923473, "question_id": 33921493, "link": "https://stackoverflow.com/questions/33921493/intellisense-auto-conversion-dot-to-arrow/33923473#33923473", "title": "Intellisense Auto-Conversion (dot to arrow)", "body": "<p>This cannot be enabled in Visual Studio 2013 out-of-the-box, however we did add this feature (in Experimental status) in Visual Studio 2015 Update 1 RC.</p>\n\n<p>It can be enabled in Tools --> Options --> Text Editor --> C/C++ --> Experimental (or do Ctrl+Q for Quick Launch and type in \"experimental\") as \"Member List Dot-To-Arrow\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/tNxA1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tNxA1.png\" alt=\"Experimental options page where the feature can be enabled\"></a></p>\n\n<p>This is how it looks like in action:</p>\n\n<p><a href=\"https://i.stack.imgur.com/z0pYg.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z0pYg.gif\" alt=\"Video demonstrating the feature\"></a></p>\n\n<p>Since this is \"Experimental\", feedback is most welcome :).</p>\n\n<p>Source: <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/11/03/introducing-the-experimental-page-for-c-c-editor-tools.aspx\" rel=\"nofollow noreferrer\">http://blogs.msdn.com/b/vcblog/archive/2015/11/03/introducing-the-experimental-page-for-c-c-editor-tools.aspx</a></p>\n"}], "owner": {"reputation": 850, "user_id": 2324316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99bdc93b3fdd9a41fcbd08b728c02ece?s=128&d=identicon&r=PG", "display_name": "Kyle G.", "link": "https://stackoverflow.com/users/2324316/kyle-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3717, "favorite_count": 1, "accepted_answer_id": 33923473, "answer_count": 1, "score": 2, "last_activity_date": 1534393278, "creation_date": 1448468522, "last_edit_date": 1534393278, "question_id": 33921493, "link": "https://stackoverflow.com/questions/33921493/intellisense-auto-conversion-dot-to-arrow", "title": "Intellisense Auto-Conversion (dot to arrow)", "body": "<p>After having worked with Eclipse CDT for quite some time, I've become accustomed to my IDE automatically converting a dot operator to an arrow when accessing members through a pointer to an object.</p>\n\n<p>Is it possible to do this with Intellisense in Visual Studio 2013?</p>\n"}, {"tags": ["c++", "ostringstream"], "comments": [{"owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "edited": false, "score": 0, "creation_date": 1448468432, "post_id": 33921446, "comment_id": 55603952, "body": "I have seen several similar questions at StackOverflow, but after browsing some time, I haven&#39;t found any one addressing this specific case. However, if I&#39;m wrong I will be more than happy to know and mark this question as duplicated:)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1448468802, "post_id": 33921446, "comment_id": 55604190, "body": "Can you post the code that reproduces the problem? I <a href=\"http://coliru.stacked-crooked.com/a/8e357439dbb71c2e\" rel=\"nofollow noreferrer\">cannot reproduce it</a>."}, {"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1448469178, "post_id": 33921446, "comment_id": 55604451, "body": "Works for me. See <a href=\"http://ideone.com/3OJc5U\" rel=\"nofollow noreferrer\">this</a>. Maybe a compiler/platform issue?"}, {"owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "edited": false, "score": 0, "creation_date": 1448470148, "post_id": 33921446, "comment_id": 55605134, "body": "Question post include a code snippet, but it lack of context... I have tried to reproduce using a small program (just main() and cout as stream) and the problems is not reproducible, as some reader has suggested. I&#39;m reseraching on it and hope to update my original post (or answering myself :) when found what could be going on..."}], "answers": [{"tags": [], "owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1448529481, "last_edit_date": 1495542658, "creation_date": 1448529481, "answer_id": 33934624, "question_id": 33921446, "link": "https://stackoverflow.com/questions/33921446/ostringstream-to-print-float-numbers-in-fixed-notation-avoiding-scentific-notati/33934624#33934624", "title": "ostringstream to print float numbers in fixed notation avoiding scentific notation", "body": "<p>At the end, the problem was not in the C++ program that generates the float number (that as some users have report, it is ok) but in the program that I use to beautify the output of the C++ program. Thus this question is solved (although <a href=\"https://stackoverflow.com/questions/33934548/how-to-avoid-real-numbers-conversions-in-mjson-tool\">a new one about the beautifier</a> opens).</p>\n"}], "owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448529481, "creation_date": 1448468419, "question_id": 33921446, "link": "https://stackoverflow.com/questions/33921446/ostringstream-to-print-float-numbers-in-fixed-notation-avoiding-scentific-notati", "title": "ostringstream to print float numbers in fixed notation avoiding scentific notation", "body": "<p>I'm using the following code to print float number (<code>value</code> is of type <code>float</code>):</p>\n\n<pre><code>std::ostringstream ss;\nss &lt;&lt; std::fixed &lt;&lt; std::setprecision(9) &lt;&lt; value;\n</code></pre>\n\n<p>which works fine most the cases. However, when <code>value</code> is very small I'm getting things like:</p>\n\n<pre><code>2.98e-07\n</code></pre>\n\n<p>while I'd would expect the following (fixed notation with 9 decimal numbers):</p>\n\n<pre><code>0.0000000289\n</code></pre>\n\n<p>Thus, what is the way of using std::ostringstream to achive this, please?</p>\n"}, {"tags": ["c++", "opencv", "camera"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 4440213, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9b1503be3e40e2265148a0f671d57dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Piiinkyy", "link": "https://stackoverflow.com/users/4440213/piiinkyy"}, "edited": false, "score": 0, "creation_date": 1448518407, "post_id": 33923635, "comment_id": 55623826, "body": "Thanks! WaitKey did worked for me! I have tried the other method, by calling a C++ &quot;Sleep&quot; function in the loop which works as well but I believe it is not really efficient. I could not determine the problem with the camera (most probably due to my computer)."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 327, "user_id": 4440213, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9b1503be3e40e2265148a0f671d57dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Piiinkyy", "link": "https://stackoverflow.com/users/4440213/piiinkyy"}, "edited": false, "score": 0, "creation_date": 1448521484, "post_id": 33923635, "comment_id": 55625086, "body": "cv::waitKey Must work. otherwise, you have something wrong in your code or in linking to OpenCV or something else I do know."}], "tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": true, "score": 0, "last_activity_date": 1448475131, "creation_date": 1448475131, "answer_id": 33923635, "question_id": 33921412, "link": "https://stackoverflow.com/questions/33921412/opencv-set-fps-to-camera-not-working/33923635#33923635", "title": "OpenCV set FPS to camera not working", "body": "<p>Setting the frame rate does not always work. Sometimes the camera simply does not respond to this change. However, you can do something to solve your problem in a tricky way. Measure the time that it takes to processing a frame then subtract it from 1000 mSec (1000 - Elapsce_Time) and make it wait for this time <code>cv::waitKey(1000-Elapsce_Time)</code>. Finally, this is not a very way to do it. You should search for the actual problem with the camera and try to solve it.</p>\n"}], "owner": {"reputation": 327, "user_id": 4440213, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9b1503be3e40e2265148a0f671d57dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Piiinkyy", "link": "https://stackoverflow.com/users/4440213/piiinkyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "accepted_answer_id": 33923635, "answer_count": 1, "score": 3, "last_activity_date": 1448518076, "creation_date": 1448468331, "last_edit_date": 1448518076, "question_id": 33921412, "link": "https://stackoverflow.com/questions/33921412/opencv-set-fps-to-camera-not-working", "title": "OpenCV set FPS to camera not working", "body": "<p>I am currently doing real-time face evaluation and is trying to set the FPS of the Camera of my computer to 1 frame per second, followed by calling the cascade functions only once per second. (Currently using a While(true) loop) This is due to the limitation of my GPU.</p>\n\n<p>I have tried to set the FPS of the camera by using </p>\n\n<pre><code>VideoCapture cap(0); \ncap.set(CV_CAP_PROP_FPS, 1);\nnamedWindow(\"webcam\",CV_WINDOW_AUTOSIZE);\n</code></pre>\n\n<p>but it is not working. The camera still process at a relative high FPS.</p>\n\n<p>For the cascade function calling, I am doing it as below:</p>\n\n<pre><code>while ( true ){\n\n        cap &gt;&gt; frame;\n        vector&lt;Rect&gt; faces;\n        face_cascade.detectMultiScale( frame, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );\n\n        // Draw circles on the detected faces\n        for( int i = 0; i &lt; faces.size(); i++ )\n        {\n            Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );\n            cout&lt;&lt;\"Face location: \"&lt;&lt;faces[i].x&lt;&lt;\",\"&lt;&lt;faces[i].x + faces[i].width&lt;&lt;\",\"&lt;&lt;faces[i].y&lt;&lt;\",\"&lt;&lt;faces[i].y + faces[i].height;\n            ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 );\n        }\n\n        waitKey(30);  \n       if ( !frame.data ){ \n            cerr &lt;&lt; \"Cannot acquire frame from the webcam \" &lt;&lt; endl;\n            break;\n       } \n       imshow(\"webcam\", frame); \n    }\n</code></pre>\n\n<p>I need the camera to go for only 1 frame per second, followed by calling the cascade functions once per second.</p>\n\n<p>Edit: I have tried to display the FPS of the camera by using</p>\n\n<pre><code>        int FPS = cap.get(CV_CAP_PROP_FPS);\n</code></pre>\n\n<p>It did show that FPS is currently at 1, but it seems that the camera is still moving at a relative high frame rate. </p>\n"}, {"tags": ["c++", "multithreading", "boost", "server", "assertion"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1448468036, "post_id": 33921211, "comment_id": 55603703, "body": "Sounds like a threading issue. You should protect operations on <code>clientMap</code> with a mutex."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1448468725, "post_id": 33921211, "comment_id": 55604131, "body": "<code>clientMap[clientName]</code> would create default (empty) <code>shared_ptr</code> if key is not in map... You may use <code>clientMap.at(clientName)</code> instead..."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1448490697, "post_id": 33921211, "comment_id": 55616105, "body": "This is not what &quot;simple, selfcontained&quot; means. Likely your shared pointers expire before you last use them (a close would remove pending async operations, meaning no binds hold refs anymore and objects gets deleted.)"}], "answers": [{"comments": [{"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1448548908, "post_id": 33940980, "comment_id": 55641660, "body": "You can accept your own answer (so the Q i marked as answered), and please remvoe the &quot;fixed by now&quot; from the title. In the future, consider reducing the problem to something smaller, each line of code you post reduces the likelihood someone will look at your code. good luck!"}], "tags": [], "owner": {"reputation": 39, "user_id": 5467481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7d5e29881f31fa9eb16a7d7643e2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Scorp", "link": "https://stackoverflow.com/users/5467481/scorp"}, "is_accepted": false, "score": 0, "last_activity_date": 1448547727, "creation_date": 1448547727, "answer_id": 33940980, "question_id": 33921211, "link": "https://stackoverflow.com/questions/33921211/fixed-terrible-mistake-assertion-px-0-failed-in-a-chat-server-using-b/33940980#33940980", "title": "Fixed (terrible mistake)! &quot;Assertion `px != 0&#39; failed.&quot; in a chat server using boost, std::map and multithreading", "body": "<p>I'm really sorry for wasting your time. Today I realized that such a terribly stupid thing had happened. The first version of the programs consisted only of server.cpp and client.cpp (and, of course, a makefile). In the makefile I compile the server and the client resulting in execute files \"server\" and \"client\". Since I switched to OOP version, the new execute files, produced by the makefile, have been \"serverMain\" and \"client\". However, I've been still calling \"server\" all the time until this morning, so it has been the old non-OOP version giving that weird assertion fail.</p>\n\n<p>I'll keep the code here in case another errors occur. Thank you very much for the help.</p>\n"}], "owner": {"reputation": 39, "user_id": 5467481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7d5e29881f31fa9eb16a7d7643e2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Scorp", "link": "https://stackoverflow.com/users/5467481/scorp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2880, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448552368, "creation_date": 1448467662, "last_edit_date": 1448552368, "question_id": 33921211, "link": "https://stackoverflow.com/questions/33921211/fixed-terrible-mistake-assertion-px-0-failed-in-a-chat-server-using-b", "title": "Fixed (terrible mistake)! &quot;Assertion `px != 0&#39; failed.&quot; in a chat server using boost, std::map and multithreading", "body": "<p>I'm back with a new problem. I have to make a new version of the synchronous chat server using OOP. And I store the sockets in an std::map, in which the keys are the names of the clients and the values are shared pointers to ip::tcp::socket. Since I did it that way, I've been encountering the following problem:</p>\n\n<p>I start the server and several clients. They write to each other successfully. However, if I close one of the connections, the server gets aborted that way:</p>\n\n<pre><code>server: /sapmnt/HOME/i322722/usr/boost/include/boost/smart_ptr/shared_ptr.hpp:687: \ntypename boost::detail::sp_member_access&lt;T&gt;::type\nboost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = \nboost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;; typename \nboost::detail::sp_member_access&lt;T&gt;::type = \nboost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;*]: Assertion `px != 0' failed.\n</code></pre>\n\n<p>As I read about that assertion fail, it's something about uninitialized shared pointer. But I cannot find something like that in my code. Here's the codes:</p>\n\n<p>server.h:</p>\n\n<pre><code>#ifndef SERVER_H_INCLUDED__ \n#define SERVER_H_INCLUDED__\n\n#include&lt;string&gt;\n\n#include&lt;boost/asio.hpp&gt;\n#include&lt;boost/asio/ip/tcp.hpp&gt;\n\n#include \"common.h\"\n\ntypedef boost::shared_ptr&lt;boost::asio::ip::tcp::socket&gt; socket_ptr;\n\nclass Server\n{\n    boost::asio::io_service&amp; service;\n    boost::asio::ip::tcp::acceptor acceptor;\n\n    boost::mutex mtx;\npublic:\n    Server(boost::asio::io_service&amp; serv);\n    void start();\n\nprivate:\n    void identify(socket_ptr sock);\n    void writeMessage(const std::string&amp; clientName, std::string&amp; message);\n    void notification(const std::string&amp; clientName, const std::string headOfMsg, const std::string tailOfMsg);\n    void disconnectClient(const std::string&amp; clientName);\n    bool readMessage(socket_ptr sock, std::string&amp; message);\n    void processLoop(const std::string&amp; clientName);\n};\n\n\n#endif\n</code></pre>\n\n<p>server.cpp:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;list&gt;\n\n#include&lt;boost/thread.hpp&gt;\n#include&lt;boost/bind.hpp&gt;\n#include&lt;boost/asio.hpp&gt;\n#include&lt;boost/asio/ip/tcp.hpp&gt;\n#include&lt;boost/interprocess/smart_ptr/unique_ptr.hpp&gt;\n\n#include \"common.h\"\n#include \"server.h\"\n\nusing namespace std;\nusing namespace boost::asio;\nusing namespace boost::asio::ip;\n\nconst string waitingMsg(\"Waiting for clients...\\n\");\nconst string totalClientsMsg(\"Total clients: \");\nconst int EOF_ERROR_CODE = 2;\n\nmap &lt;string, socket_ptr&gt; clientMap;\n\nServer::Server(io_service&amp; serv) : service(serv), acceptor(service, ip::tcp::endpoint(ip::tcp::v4(), PORT_NO))\n{\n}\n\nvoid Server::start()\n{\n    cout &lt;&lt; waitingMsg;\n    while (true)\n    {\n        socket_ptr sock(new tcp::socket(service));\n\n        boost::system::error_code error;\n        acceptor.accept(*sock, error);\n        if (error)\n        {\n            cerr &lt;&lt; \"Error on accepting: \" &lt;&lt; error.message() &lt;&lt; endl;\n            cout &lt;&lt; waitingMsg;\n            continue;\n        }\n\n        boost::shared_ptr &lt;boost::thread&gt; p (new boost::thread(boost::bind(&amp;Server::identify, this, sock)));\n    }\n}\n\nvoid Server::writeMessage(const string&amp; clientName, string&amp; message)\n{\n    mtx.lock();\n    boost::system::error_code error;\n    message.append(1, '\\n');\n    for(auto&amp; cliSock : clientMap)\n    {\n        if (cliSock.second-&gt;is_open() &amp;&amp; cliSock.first != clientName)\n        {\n            cliSock.second-&gt;write_some(buffer(message), error);\n            if (error)\n            {\n                cerr &lt;&lt; errorWritingMsg &lt;&lt; error.message() &lt;&lt; endl;\n            }\n        }\n    }\n    mtx.unlock();\n}\n\nvoid Server::notification(const string&amp; clientName, const string headOfMsg, const string tailOfMsg)\n{\n    string serviceMsg = headOfMsg + clientName + tailOfMsg;\n    cout &lt;&lt; serviceMsg &lt;&lt; totalClientsMsg &lt;&lt; clientMap.size() &lt;&lt; endl;\n\n    writeMessage(clientName, serviceMsg);\n\n    cout &lt;&lt; waitingMsg;\n}\n\nvoid Server::disconnectClient(const string&amp; clientName)\n{\n    mtx.lock();\n\n    boost::system::error_code error;\n    clientMap[clientName]-&gt;shutdown(tcp::socket::shutdown_both, error);\n    if (error)\n    {\n        cerr &lt;&lt; \"Error on shutting: \" &lt;&lt; error.message() &lt;&lt; endl;\n    }\n    clientMap[clientName]-&gt;close(error);\n    if(error)\n    {\n        cerr &lt;&lt; \"Error on closing: \" &lt;&lt; error.message() &lt;&lt; endl;\n    }\n\n    clientMap.erase(clientName);\n    mtx.unlock();\n\n    notification(clientName, \"\", \" disconnected. \");\n}\n\nbool Server::readMessage(socket_ptr sock, string&amp; message)\n{\n    mtx.lock();\n    boost::asio::streambuf buff;\n    boost::system::error_code error;\n    size_t bytes_transferred = boost::asio::read_until(*sock, buff, '\\n', error);\n    if(error)\n    {\n        if (error.value() != EOF_ERROR_CODE)\n        {\n            cerr &lt;&lt; errorReadingMsg &lt;&lt; error.message() &lt;&lt; endl;\n        }\n        return false;\n    }\n\n    buff.commit(bytes_transferred);\n    istream istrm(&amp;buff);\n\n    getline(istrm, message);\n    mtx.unlock();\n    if(message + \"\\n\" == \"exit\\n\")\n    {\n        return false;\n    }\n    return true;\n}\n\nvoid Server::processLoop(const string&amp; clientName)\n{\n    while (true)\n    {\n        {\n            string message = \"\";\n            if (!readMessage(clientMap[clientName], message))\n            {\n                disconnectClient(clientName);\n                return;\n            }\n\n            message.insert(0, clientName + \": \");\n\n            writeMessage(clientName, message);\n        }\n    }\n}\n\nvoid Server::identify(socket_ptr sock)\n{\n    mtx.lock();\n    sock-&gt;write_some(buffer(\"Please, enter your name:\\n\"));\n    mtx.unlock();\n\n    string name = \"\";\n\n    boost::system::error_code error;\n    bool occupied;\n\n    do\n    {\n        if (!readMessage(sock, name))\n        {\n            return;\n        }\n\n        occupied = false;\n\n        if (clientMap.find(name) != clientMap.end())\n        {\n            occupied = true;\n        }\n\n        if (occupied)\n        {\n            mtx.lock();\n            sock-&gt;write_some(buffer(\"This name is already in use! Please, enter another name:\\n\"), error);\n            mtx.unlock();\n\n            if (error)\n            {\n                cerr &lt;&lt; errorWritingMsg &lt;&lt; error.message() &lt;&lt; endl;\n            }\n        }\n    }\n    while (occupied);\n\n    mtx.lock();\n    clientMap.emplace(name, sock);\n    mtx.unlock();\n\n    notification(name, \"New client: \", \" joined. \");\n    processLoop(name);\n}\n</code></pre>\n\n<p>client.cpp:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\n#include&lt;boost/thread.hpp&gt;\n#include&lt;boost/bind.hpp&gt;\n#include&lt;boost/asio.hpp&gt;\n#include&lt;boost/asio/ip/tcp.hpp&gt;\n#include&lt;boost/algorithm/string.hpp&gt;\n\n#include \"common.h\"\n\nusing namespace std;\nusing namespace boost::asio;\nusing namespace boost::asio::ip;\n\nio_service service;\ntcp::endpoint ep(ip::address::from_string(IP), PORT_NO);\n\nvoid displayLoop(socket_ptr sock)\n{\n    while(true)\n    {\n        {\n            boost::asio::streambuf buff;\n\n            boost::system::error_code error;\n            size_t bytes_transferred = boost::asio::read_until(*sock, buff, '\\n', error);\n            if (error)\n            {\n                cerr &lt;&lt; errorReadingMsg &lt;&lt; error.message() &lt;&lt; endl;\n                continue;\n            }\n\n            buff.commit(bytes_transferred);\n            istream istrm(&amp;buff);\n            string message = \"\";\n            getline(istrm, message);\n            buff.consume(buff.size());\n\n            cout &lt;&lt; message &lt;&lt; endl;\n        }\n    }\n}\n\nvoid writeLoop(socket_ptr sock)\n{\n    string message = \"\";\n\n    while(true)\n    {\n        getline(cin, message);\n\n            message += '\\n';\n\n            boost::system::error_code error;\n            sock-&gt;write_some(buffer(message), error);\n\n            if (error)\n            {\n                cerr &lt;&lt; errorWritingMsg &lt;&lt; error.message() &lt;&lt; endl;\n                continue;\n            }\n\n            if(message == \"exit\\n\")\n            {\n                exit(0);\n            }\n\n        message.clear();\n    }\n}\n\n\nint main(int argc, char* argv[])\n{\n    boost::thread_group threads;\n    socket_ptr sock(new tcp::socket(service));\n    boost::system::error_code error;\n    sock-&gt;connect(ep, error);\n    if (error)\n    {\n        cerr &lt;&lt; \"Error on connecting: \" &lt;&lt; error.message() &lt;&lt; endl;\n        return -1;\n    }\n\n    cout &lt;&lt; \"Type \\\"exit\\\" to quit.\\n\";\n\n    threads.create_thread(boost::bind(displayLoop, sock));\n    threads.create_thread(boost::bind(writeLoop, sock));\n\n    threads.join_all();\n\n    return 0;\n}\n</code></pre>\n\n<p>common.h:</p>\n\n<pre><code>#ifndef COMMON_H_INCLUDED__ \n#define COMMON_H_INCLUDED__\n\n#include&lt;string&gt;\n\ntypedef boost::shared_ptr&lt;boost::asio::ip::tcp::socket&gt; socket_ptr;\n\nconst unsigned PORT_NO = 30001;\nconst std::string IP = \"127.0.0.1\";\n\nconst std::string errorWritingMsg(\"Error on writing: \");\nconst std::string errorReadingMsg(\"Error on reading: \");\n\nconst std::string exitLower = \"exit\\n\";\nconst std::string exitCapInit = \"Exit\\n\";\nconst std::string exitCaps = \"EXIT\\n\";\n\n#endif\n</code></pre>\n\n<p>serverMain.cpp:</p>\n\n<pre><code>#include&lt;boost/asio.hpp&gt;\n\n#include \"common.h\"\n#include \"server.h\"\n\nusing namespace std;\nusing namespace boost::asio;\nusing namespace boost::asio::ip;\n\nint main(int argc, char *argv[])\n{\n    boost::asio::io_service service;\n    Server server(service);\n\n    server.start();\n    return 0;\n}\n</code></pre>\n\n<p>makefile:</p>\n\n<pre><code>all: serverMain client\n\nlibraries = -lboost_thread -lboost_system \n\nserver.o: server.cpp\n    g++ -I/sapmnt/HOME/i322722/usr/boost/include/ $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib/ -c server.cpp -std=c++11 -lrt -ggdb\n\nserverMain.o: serverMain.cpp\n    g++ -I/sapmnt/HOME/i322722/usr/boost/include/ $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib/ -c serverMain.cpp -std=c++11 -lrt -ggdb\n\nclient.o: client.cpp\n    g++ -I/sapmnt/HOME/i322722/usr/boost/include/ $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib/ -c client.cpp -std=c++11 -lrt\n\nserver.o: server.cpp\n    g++ -c server.cpp -lpthread $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib -std=c++11 -lrt -ggdb\n\nserverMain: serverMain.o server.o\n    g++ -o serverMain serverMain.o server.o -lpthread $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib -std=c++11 -lrt -ggdb\n\nclient: client.o\n    g++ -o client client.o -lpthread $(libraries) -L/sapmnt/HOME/i322722/usr/boost/lib -std=c++11 -lrt\n\nclean:\n    rm *.o serverMain client\n</code></pre>\n\n<p>The problem does not occur everytime I close a connection (sometimes if I want to close the first established connection, it's OK, however, the next one fails), but most of the times I have it. I think several times it occured while joining of new client but I'm not 100 % sure about that.</p>\n\n<p>I think the problem is related to std::map and, more exactly, to the function</p>\n\n<pre><code>Server::disconnectClient(...) \n</code></pre>\n\n<p>in <em>server.cpp</em> but I'm not sure. Prior to intruduce this structure, everything worked fine, but there were separated std::lists for the sockets and for the names, which was bad. I have no idea where exactly is the problem and how to fix it. Every kind of help will be appreciated.</p>\n"}, {"tags": ["c++", "linux", "i2c"], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 6373817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/olKA7.jpg?s=128&g=1", "display_name": "srpatch", "link": "https://stackoverflow.com/users/6373817/srpatch"}, "is_accepted": false, "score": 0, "last_activity_date": 1524784047, "last_edit_date": 1524784047, "creation_date": 1524769366, "answer_id": 50050253, "question_id": 33921195, "link": "https://stackoverflow.com/questions/33921195/i2c-smbus-functios-dont-exsit-on-centos7-i2c-dev-h/50050253#50050253", "title": "i2c_smbus_* functios don&#39;t exsit on centos7 i2c-dev.h", "body": "<p>Copy i2c-smbus.ko  in /lib/modules/4.8.28-release/kernel/drivers/i2c/i2c-smbus.ko</p>\n\n<pre><code>yum install libi2c-dev\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 3613008, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5888e3d84aa232a371a8dd4d0f145a18?s=128&d=identicon&r=PG&f=1", "display_name": "The_Reaper", "link": "https://stackoverflow.com/users/3613008/the-reaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524784047, "creation_date": 1448467627, "question_id": 33921195, "link": "https://stackoverflow.com/questions/33921195/i2c-smbus-functios-dont-exsit-on-centos7-i2c-dev-h", "title": "i2c_smbus_* functios don&#39;t exsit on centos7 i2c-dev.h", "body": "<p>I nedd to manage a SMBus device from a Linux C++ program.</p>\n\n<p>I can open the device (/dev/i2c-0), but I shaw that all i2c_smbus* functions (i2c_smbus_write_word_data, i2c_smbus_read_word_data etc..) are not declared in any i2c header.</p>\n\n<p>i2c Documentation said that these functions are declared in linux/i2c-dev.h header but in my centos7 are not there.</p>\n\n<p>I was looking for them in all headers but are not defined in any file. </p>\n\n<p>Any idea about why are not defined there and where are they?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;linux/i2c-dev.h&gt;\n#include &lt;linux/i2c.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/io.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\nint main() {\n    cout &lt;&lt; \"!!!Hello World!!!\" &lt;&lt; endl; // prints !!!Hello World!!!\n\n    int Address = 0x39; //Slave addr \n\n     char i2c_dev_node_path[] = \"/dev/i2c-0\";\n\n     int ret_val = 0;\n     /* Open the device node for the I2C adapter of bus 0 */\n     i2c_dev_node = open(i2c_dev_node_path, O_RDWR);\n     if (i2c_dev_node &lt; 0)\n     {       \n         cout &lt;&lt; \"EROR Unable to open device node.\" &lt;&lt; endl;\n         return -1;\n     }\n\n\n     int i2c_dev_address = 0x39;\n\n     ret_val = ioctl(i2c_dev_node,I2C_SLAVE,i2c_dev_address);\n     if (ret_val &lt; 0)\n     {\n         perror(\"Could not set I2C_SLAVE.\");\n         cout &lt;&lt; \"EROR Could not set I2C_SLAVE.\" &lt;&lt; endl;\n         return -1;\n     }\n\n     cout &lt;&lt; \"ALL OK!!!!!\" &lt;&lt; endl;\n\n\n   int retVal = i2c_smbus_read_word_data ( i2c_dev_node , 0xac );\n\n}\n</code></pre>\n"}, {"tags": ["c++", "casting", "operators", "unsigned-long-long-int"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 1, "creation_date": 1448467866, "post_id": 33921058, "comment_id": 55603601, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5563000/implicit-type-conversion-rules-in-c-operators\">Implicit type conversion rules in C++ operators</a>"}, {"owner": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1448468114, "post_id": 33921058, "comment_id": 55603755, "body": "My question is not pertaining to the typecasting, but the incorrect results."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 1, "creation_date": 1448468138, "post_id": 33921058, "comment_id": 55603768, "body": "Why are you calling <code>2**63-1</code> FLT_MAX??  That is far less than the max magnitude of a float and far more than the max precision of a float.  Your &quot;wrong&quot; answer consists of casting <code>2**62-1</code> to a <code>float</code> which results in <code>2**62</code>  There is no float representation of <code>2**62-1</code> but there is a float representation for <code>2**62</code>"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 2, "creation_date": 1448468375, "post_id": 33921058, "comment_id": 55603912, "body": "@TMKelleher You asked why an unsigned long long int would be cast to a float."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1448468378, "post_id": 33921058, "comment_id": 55603915, "body": "You made two mistakes: The first one involves implicit type conversion (<code>4611686018427387903</code> is first converted to a <code>float</code> before any operation), the second involves the way values are stored into a float - Unlike integer types, if a float can store the exact value of <code>X</code>, it does not mean it can extactly store any integer value between <code>0</code> and <code>X</code>. It is not possible to store <code>4611686018427387903</code> exactly in a <code>float</code>, so you get the closest value which is <code>4611686018427387904</code>, which is why your <code>* 1</code> operation is wrong (same reasoning for the other operations)."}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "edited": false, "score": 0, "creation_date": 1448469952, "post_id": 33921614, "comment_id": 55604988, "body": "If I am understanding you the first number should become something like <code>4.611686018427387904E18</code> and <code>10</code> becomes <code>0.000000000000000001E18</code> which may end up being <code>0</code> if the number is small enough.  So that would mean that <code>4611686018427387904 + 1</code> should equal <code>4611686018427387904</code> due to the loss of the <code>1</code> due to precision. Alas that is still not the case."}, {"owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "reply_to_user": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "edited": false, "score": 0, "creation_date": 1448470558, "post_id": 33921614, "comment_id": 55605396, "body": "@TMKelleher  Even casting to float can cause the issue. Just try to output: <code>(double) (461168601)</code>"}, {"owner": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "edited": false, "score": 0, "creation_date": 1448471627, "post_id": 33921614, "comment_id": 55606061, "body": "That makes sense, but why would I get the same problems when I use the number <code>230584000</code> where casting to a <code>float</code> returns the same number? <code>230584000 + 10 = 230584016</code> <code>230584000 - 10 = 230583984</code> <code>230584000 * 1 = 230584000</code> <code>230584000 &#47; 1 = 230584000</code> <code>230584000 + 1 = 230584000</code> <code>230584000 - 1 = 230584000</code>"}], "tags": [], "owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1448469319, "last_edit_date": 1448469319, "creation_date": 1448468823, "answer_id": 33921614, "question_id": 33921058, "link": "https://stackoverflow.com/questions/33921058/math-error-with-primitive-operators/33921614#33921614", "title": "Math Error with Primitive Operators", "body": "<p>The error is caused by the too big difference between <code>4611686018427387904</code> and <code>1</code> or <code>10</code>. You should never sum numbers with a such difference, because actual difference between two closest floating point numbers grows with exponent value.</p>\n\n<p>When two floating point numbers are added, the first of all they are aligned to the same exponent value (the bigger one), so before operation you have e.g. <code>1e10</code> and <code>1e-10</code> and after alignment you have <code>1e10</code> and <code>0e10</code> the result is <code>1e10</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1448474718, "creation_date": 1448474718, "answer_id": 33923506, "question_id": 33921058, "link": "https://stackoverflow.com/questions/33921058/math-error-with-primitive-operators/33923506#33923506", "title": "Math Error with Primitive Operators", "body": "<p>Dug around some and found <a href=\"http://www.cprogramming.com/tutorial/floating_point/understanding_floating_point_representation.html\" rel=\"nofollow\">this article</a>.</p>\n\n<blockquote>\n  <p>Casting opens up its own can of worms. You have to be careful, because your float might not have enough precision to preserve an entire integer. A 32-bit integer can represent any 9-digit decimal number, but a 32-bit float only offers about 7 digits of precision. So if you have large integers, making this conversion will clobber them. Thankfully, doubles have enough precision to preserve a whole 32-bit integer (notice, again, the analogy between floating point precision and integer dynamic range). Also, there is some overhead associated with converting between numeric types, going from float to int or between float and double.</p>\n</blockquote>\n\n<p>So, essentially once the whole part of a number reaches about more than seven digits, the <code>float</code> begins to shift the number to keep the whole part of the number about seven digits. When this shifting of the decimal place occurs, the number begins to reach the floating point inaccuracy.</p>\n"}], "owner": {"reputation": 566, "user_id": 5407843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YrjUv.png?s=128&g=1", "display_name": "tkellehe", "link": "https://stackoverflow.com/users/5407843/tkellehe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33923506, "answer_count": 2, "score": 0, "last_activity_date": 1448491526, "creation_date": 1448467270, "last_edit_date": 1448491526, "question_id": 33921058, "link": "https://stackoverflow.com/questions/33921058/math-error-with-primitive-operators", "title": "Math Error with Primitive Operators", "body": "<p>I am having an issue with primitive types using built in operators. All of my operators work for all datatypes except for <code>float</code> and <code>(un)signed long long int</code>.</p>\n\n<p>Why is it wrong even when multiplying by one? Also, why does <code>+10</code> and <code>-10</code> give the same number as <code>+1</code>, <code>-1</code>, <code>/1</code>, and <code>*1</code>.</p>\n\n<p>The number <code>461168601</code> was chosen because it fits within the max <code>float</code> and max <code>signed long long int</code>.</p>\n\n<p>Ran the following code and got the following output:</p>\n\n<pre><code>fmax  : 340282346638528859811704183484516925440\nimax  : 9223372036854775807\ni     : 461168601\nf     : 10\nf2    : 1\n\n461168601 / 10 = 46116860\n461168601 + 10 = 461168608\n461168601 - 10 = 461168608\n\n461168601 * 1 = 461168608\n461168601 / 1 = 461168608\n461168601 + 1 = 461168608\n461168601 - 1 = 461168608\n</code></pre>\n\n<p>The following code can be ran <a href=\"http://cpp.sh/8ozw\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;limits&gt;\n\n#define fmax std::numeric_limits&lt;float&gt;::max()\n#define imax std::numeric_limits&lt;signed long long int&gt;::max()\n\nint main()\n{\n\n    signed long long int i    = 461168601;\n    float f = 10;\n    float f2 = 1;\n    std::cout &lt;&lt; std::setprecision(40);\n    std::cout &lt;&lt;\"fmax  : \" &lt;&lt; fmax  &lt;&lt; std::endl;\n    std::cout &lt;&lt;\"imax  : \" &lt;&lt; imax  &lt;&lt; std::endl;\n    std::cout &lt;&lt;\"i     : \" &lt;&lt; i    &lt;&lt; std::endl;\n    std::cout &lt;&lt;\"f     : \" &lt;&lt; f    &lt;&lt; std::endl;\n    std::cout &lt;&lt;\"f2    : \" &lt;&lt; f2   &lt;&lt; std::endl;\n    std::cout &lt;&lt;std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" / \" &lt;&lt; f &lt;&lt; \" = \" &lt;&lt; i / f &lt;&lt; std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" + \" &lt;&lt; f &lt;&lt; \" = \" &lt;&lt; i + f &lt;&lt; std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" - \" &lt;&lt; f &lt;&lt; \" = \" &lt;&lt; i - f &lt;&lt; std::endl;\n    std::cout &lt;&lt;std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" * \" &lt;&lt; f2 &lt;&lt; \" = \" &lt;&lt;i * f2 &lt;&lt; std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" / \" &lt;&lt; f2 &lt;&lt; \" = \" &lt;&lt; i / f2 &lt;&lt; std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" + \" &lt;&lt; f2 &lt;&lt; \" = \" &lt;&lt; i + f2 &lt;&lt; std::endl;\n    std::cout &lt;&lt; i &lt;&lt; \" - \" &lt;&lt; f2 &lt;&lt; \" = \" &lt;&lt; i - f2 &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1448467317, "post_id": 33921032, "comment_id": 55603235, "body": "Well, technically, <code>sizeof(A)</code> isn&#39;t particularly &quot;dynamic&quot;, since it&#39;s known to the compiler. Right?"}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1448467621, "post_id": 33921032, "comment_id": 55603424, "body": "If it really were dynamic information the compiler wouldn&#39;t know it. So no, the compiler can\u2019t output dynamic information, but there are tricks to make it print the static size of a type."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1448468352, "post_id": 33921032, "comment_id": 55603895, "body": "There is a proposal to allow constant expression <code>char const*</code>s instead of just string literals for the static assertion error message. Once that&#39;s accepted, you can compose own error messages and include formatted numbers, e.g. via <a href=\"https://github.com/Arcoth/Constainer/blob/master/StaticPrintf.hxx\" rel=\"nofollow noreferrer\">Constainer&#39;s printf</a>."}], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1448467657, "answer_count": 0, "score": 6, "last_activity_date": 1448467201, "creation_date": 1448467201, "question_id": 33921032, "link": "https://stackoverflow.com/questions/33921032/c-output-dynamic-information-to-the-log-at-compile-time", "closed_reason": "Duplicate", "title": "C++ : output dynamic information to the log at compile-time", "body": "<p>Is it possible to output dynamic information to the compiler output during compilation?</p>\n\n<p>A more concrete example (C++11):</p>\n\n<pre><code>static_assert(sizeof(A) == 4, \"Wrong size of A\");\n</code></pre>\n\n<p>I would like to output the value of <code>sizeof(A)</code> when the assertion fails (or even always), but the message in <a href=\"http://en.cppreference.com/w/cpp/language/static_assert\"><code>static_assert</code></a> can't contain any dynamic information.</p>\n\n<p>Is there any way to output the value of <code>sizeof(A)</code> to the compiler log?</p>\n"}, {"tags": ["php", "c++", "visual-studio", "visual-studio-2012", "visual-studio-2015"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1448467521, "post_id": 33920873, "comment_id": 55603355, "body": "That last line is saying the static jansson library has MS C runtime functions defined in it.  There should be a way to compile that library so it doesn&#39;t pull in the C runtime functions.  But I&#39;m not sure how.  Or you could try to use a DLL of that library if it exists."}], "owner": {"reputation": 93, "user_id": 2245664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e9a7f4c51d0c8a0df3a771fe65b1b7c?s=128&d=identicon&r=PG", "display_name": "Eudaimonium", "link": "https://stackoverflow.com/users/2245664/eudaimonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1448466688, "creation_date": 1448466688, "question_id": 33920873, "link": "https://stackoverflow.com/questions/33920873/switching-platform-toolet-from-v140-to-v110-in-visual-studio-2015", "title": "Switching platform toolet from v140 to v110 in Visual Studio 2015", "body": "<p>I'm porting a source code for a PHP extension that was originally written for UNIX environment.</p>\n\n<p>I have resolved all library dependencies and compiled it successfuly, however the EasyPHP server that we use for testing refuses to load the DLL module.</p>\n\n<p>I have assumed it's because I've compiled the DLL using Visual Studio 2015 (v140) platform toolset while original PHP the server uses v11 source, as far as I know.</p>\n\n<p>However, changing the project from v140 to Visual Studio 2012 (v110) toolset produces the following errors:</p>\n\n<pre><code>LNK1120 5 unresolved externals  DINAPIS_PHP_MATH    \n\nLNK2001 unresolved external symbol __imp____stdio_common_vsprintf   DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(dump.obj)\n\nLNK2001 unresolved external symbol __imp____stdio_common_vsprintf   DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(error.obj)\n\nLNK2019 unresolved external symbol __imp____acrt_iob_func referenced in function _json_loadf    DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(load.obj)\n\nLNK2019 unresolved external symbol __imp____stdio_common_vsprintf referenced in function __vsnprintf_l  DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(load.obj)\n\nLNK2019 unresolved external symbol __imp__strtoll referenced in function _lex_scan_number   DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(load.obj)\n\nLNK2001 unresolved external symbol __imp____stdio_common_vsprintf   DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(strconv.obj)\n\nLNK2019 unresolved external symbol __imp___dclass referenced in function _json_real DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(value.obj)\n\nLNK2019 unresolved external symbol __ltod3 referenced in function _json_number_value    DINAPIS_PHP_MATH    D:\\[...]\\jansson_d.lib(value.obj)\n\nLNK2005 _sprintf already defined in jansson_d.lib(dump.obj) DINAPIS_PHP_MATH    D:\\Projects\\Dinapis PHP Math\\php-extension-win\\DINAPIS_PHP_MATH\\DINAPIS_PHP_MATH\\MSVCRTD.lib(MSVCR110D.dll)\n</code></pre>\n\n<p>As you can see, this \"jansson\" library produces all the problems and has given me headaches with original porting as well. </p>\n\n<p>So what is v110 toolset missing that produces these errors, when v140 compiles fine? How to solve it?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "macos", "compiler-errors", "g++", "command-line-tool"], "comments": [{"owner": {"reputation": 1050, "user_id": 2514756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9TPkc.jpg?s=128&g=1", "display_name": "Ra1nWarden", "link": "https://stackoverflow.com/users/2514756/ra1nwarden"}, "edited": false, "score": 0, "creation_date": 1448466906, "post_id": 33920854, "comment_id": 55602936, "body": "Make sure your input method is English if you typed the above code."}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "edited": false, "score": 0, "creation_date": 1448467191, "post_id": 33920888, "comment_id": 55603143, "body": "I was typing the code in text edit but I wasn&#39;t aware of the double quote character problem. I&#39;ll try it again in atom. As for the for the g++ clang discrepancy, I tried both on someone else&#39;s mac and both worked. So that probably isn&#39;t the problem."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "edited": false, "score": 0, "creation_date": 1448467330, "post_id": 33920888, "comment_id": 55603245, "body": "If English is not your first language, then you probably know more about how these issues can occur than I do.  The clang remark was not related to the issue, as such, but you need to be aware that you aren&#39;t actually using a GNU product (type <code>g++ --version</code>, for example)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "edited": false, "score": 0, "creation_date": 1448467757, "post_id": 33920888, "comment_id": 55603510, "body": "@OrrenRavid Don&#39;t write code in TextEdit, or anything else that is meant for writing &quot;normal&quot; text. Use a (programmer&#39;s) text editor - there are many to choose from - or an IDE like XCode."}, {"owner": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "edited": false, "score": 0, "creation_date": 1448467788, "post_id": 33920888, "comment_id": 55603527, "body": "Thanks that&#39;s good to know. I will try to resolve my problem using a different text editor and choose this answer once the problem is resolved."}, {"owner": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "edited": false, "score": 0, "creation_date": 1448477830, "post_id": 33920888, "comment_id": 55609691, "body": "That appeared to be the problem. I switched to a &quot;atom&quot; a text editor for programming languages and it compiled correctly."}], "tags": [], "owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "is_accepted": true, "score": 3, "last_activity_date": 1448466735, "creation_date": 1448466735, "answer_id": 33920888, "question_id": 33920854, "link": "https://stackoverflow.com/questions/33920854/g-compiler-giving-strange-errors-in-terminal/33920888#33920888", "title": "g++ Compiler Giving Strange Errors in Terminal", "body": "<p>You aren't using double quote characters:</p>\n\n<pre><code>\u201cHello World\u201d\n</code></pre>\n\n<p>is not the same as:</p>\n\n<pre><code>\"Hello World\"\n</code></pre>\n\n<p>I guess this is due to a copy-and-paste from PDF or something, as programs like Word like to change \"\" to \u201c\u201d.</p>\n\n<p>Also if you are using the Xcode Command Line tools, you are actually using clang and not g++.</p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 4600559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FibN2yhT5FQ/AAAAAAAAAAI/AAAAAAAABqM/-buis4ZzQAA/photo.jpg?sz=128", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/4600559/vasiliy"}, "is_accepted": false, "score": 0, "last_activity_date": 1448469658, "last_edit_date": 1495540319, "creation_date": 1448469658, "answer_id": 33921920, "question_id": 33920854, "link": "https://stackoverflow.com/questions/33920854/g-compiler-giving-strange-errors-in-terminal/33921920#33921920", "title": "g++ Compiler Giving Strange Errors in Terminal", "body": "<p>There might be an \"U.S. International - PC\" input method set on your mac (assuming you are on mac) and that has accented characters which result in '\u201c' being inserted when you expected '\"'. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/11876485/how-to-disable-typing-special-characters-when-pressing-option-key-in-mac-os-x\">enter link description here</a></p>\n"}], "owner": {"reputation": 498, "user_id": 2643689, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/42866f7fe1c0675a90a9f82267728899?s=128&d=identicon&r=PG", "display_name": "Orren Ravid", "link": "https://stackoverflow.com/users/2643689/orren-ravid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 33920888, "answer_count": 2, "score": 1, "last_activity_date": 1448469658, "creation_date": 1448466636, "question_id": 33920854, "link": "https://stackoverflow.com/questions/33920854/g-compiler-giving-strange-errors-in-terminal", "title": "g++ Compiler Giving Strange Errors in Terminal", "body": "<p>I recently installed xcode command line tools on my Mac. Its OS is version 10.9.5. To test out the g++ compiler I created a simple \"hello world\" c++ program, called it program.cpp and put it on my desktop:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    cout&lt;&lt;\u201cHello World\u201d;\n    return 0;\n}\n</code></pre>\n\n<p>Then I intended to create a compiled version of program.cpp, opened terminal, changed my directory to the desktop and typed the following command:</p>\n\n<pre><code>g++ -o program program.cpp\n</code></pre>\n\n<p>I received the following compilation errors:</p>\n\n<pre><code>program.cpp:7:11: error: non-ASCII characters are not allowed outside of\n      literals and identifiers\n    cout&lt;&lt;\u201cHello World\u201d;\n          ^\nprogram.cpp:7:14: error: use of undeclared identifier 'Hello'\n    cout&lt;&lt;\u201cHello World\u201d;\n           ^\nprogram.cpp:7:25: error: non-ASCII characters are not allowed outside of\n      literals and identifiers\n    cout&lt;&lt;\u201cHello World\u201d;\n                      ^\n3 errors generated.\n</code></pre>\n\n<p>Is this a problem with the command line tools or something else? Any help would be appreciated.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5604824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8962b93f96eff5ac221ed1c8a1c2e12?s=128&d=identicon&r=PG&f=1", "display_name": "mnib", "link": "https://stackoverflow.com/users/5604824/mnib"}, "edited": false, "score": 0, "creation_date": 1448467195, "post_id": 33920870, "comment_id": 55603146, "body": "Well, thank you sir. It solves the problem and makes sense."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 0, "last_activity_date": 1448467255, "last_edit_date": 1448467255, "creation_date": 1448466674, "answer_id": 33920870, "question_id": 33920820, "link": "https://stackoverflow.com/questions/33920820/c-struct-and-expected-primary-expression-error/33920870#33920870", "title": "c++ struct and &quot;expected primary-expression&quot; error", "body": "<ol>\n<li><p><code>test&amp; info</code> is a <strong>definition</strong>. If you pass something to a function, you write an <strong>expression</strong> like <code>info</code>. It is <strong>automatically</strong> passed by reference because you specified <code>info</code> as a reference in the formal parameter list.</p>\n\n<p>You also wrote</p>\n\n<pre><code>mytable[i] = info;\n</code></pre>\n\n<p>and <strong>not</strong></p>\n\n<pre><code>mytable[i] = test &amp; info;\n</code></pre>\n\n<p>didn't ya?</p>\n\n<p>Use <code>insertdata(info);</code> instead.</p></li>\n<li><p>Same goes for arrays. Use <code>doitnow(test)</code> instead.</p></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 5604824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8962b93f96eff5ac221ed1c8a1c2e12?s=128&d=identicon&r=PG&f=1", "display_name": "mnib", "link": "https://stackoverflow.com/users/5604824/mnib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2195, "favorite_count": 0, "accepted_answer_id": 33920870, "answer_count": 1, "score": 1, "last_activity_date": 1448467255, "creation_date": 1448466528, "question_id": 33920820, "link": "https://stackoverflow.com/questions/33920820/c-struct-and-expected-primary-expression-error", "title": "c++ struct and &quot;expected primary-expression&quot; error", "body": "<p>It's easier to explain with some code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct test {\n    int one;\n    int two;\n};\n\nvoid insertdata(test &amp; info)\n{\n    cin &gt;&gt; info.one;\n    cin &gt;&gt; info.two;\n}\n\nint doitnow(test mytable[])\n{\n    test info;\n    int i = 0;\n\n    for (i=0; i&lt;3; i++) {\n        insertdata(test &amp; info);\n        mytable[i] = info;\n    }\n\n    return i;\n}\n\nint main()\n{\n    int total;\n    test mytable[10];\n\n    total = doitnow(test mytable[]);\n    cout &lt;&lt; total;\n}\n</code></pre>\n\n<p>So, I need to pass info by reference to the function insertdata, I need to use that function in doitnow to fill up a table and I need to show in the main function the number of items inserted in doitnow. I keep getting errors when I try to call functions:</p>\n\n<pre><code>teste.cpp: In function \u2018int doitnow(test*)\u2019:\nteste.cpp:21:29: error: expected primary-expression before \u2018&amp;\u2019 token\ninsertdata(test &amp; info);\n\nteste.cpp: In function \u2018int main()\u2019:\nteste.cpp:33:30: error: expected primary-expression before \u2018mytable\u2019\ntotal = doitnow(test mytable[]);\n</code></pre>\n\n<p>So, probably it's an obvious mistake but I'm a beginner at this.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c#", "c++", "callback", "swig"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5600764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f3cf04071df03b67192278447e7869?s=128&d=identicon&r=PG&f=1", "display_name": "R. Mckakish", "link": "https://stackoverflow.com/users/5600764/r-mckakish"}, "is_accepted": false, "score": 0, "last_activity_date": 1448467221, "creation_date": 1448467221, "answer_id": 33921038, "question_id": 33920808, "link": "https://stackoverflow.com/questions/33920808/how-can-i-use-c11-style-callbacks-in-c-with-swig/33921038#33921038", "title": "how can i use c++11 style callbacks in c# with swig", "body": "<p>You can define the following delegate to use:</p>\n\n<pre><code>delegate void OnCounterChange(int channel, int value);\n</code></pre>\n\n<p>and this would be the callback:</p>\n\n<pre><code>OnCounterChange onCounterChange;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5604840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983de83e862acb9e4c8c74bb30969d20?s=128&d=identicon&r=PG&f=1", "display_name": "Romke", "link": "https://stackoverflow.com/users/5604840/romke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448467227, "creation_date": 1448466484, "last_edit_date": 1448467227, "question_id": 33920808, "link": "https://stackoverflow.com/questions/33920808/how-can-i-use-c11-style-callbacks-in-c-with-swig", "title": "how can i use c++11 style callbacks in c# with swig", "body": "<p>I'm having the following c++ callback code:</p>\n\n<pre><code>std::function&lt;void(unsigned int channel, int value)&gt; onCounterChange;\n</code></pre>\n\n<p>What do i need to add to my .i file to use this in C# ?</p>\n"}, {"tags": ["android", "c++", "boost"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1448466474, "post_id": 33920756, "comment_id": 55602605, "body": "It means you didn&#39;t build your application with RTTI support. Should be a flag to compiler. Most likely, your toolchain emited -fno-rtti to gcc, since RTTI is enabled in gcc by default."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1448535074, "post_id": 33920756, "comment_id": 55632956, "body": "@SergeyA Whoa, lot&#39;s of things for me to google. I have no idea what you&#39;re talking about right now."}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2345, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1448466363, "creation_date": 1448466363, "question_id": 33920756, "link": "https://stackoverflow.com/questions/33920756/what-does-rtti-symbol-not-found-for-class-warning-mean", "title": "What does &#39;RTTI symbol not found for class&#39; warning mean?", "body": "<p>I am making native application for android. It's written in C++, compiled using GCC 4.9 and using Boost 1.59 and Qt libraries. I see these pink warnings in the QtCreator console:</p>\n\n<pre><code>RTTI symbol not found for class 'boost::signals2::signal&lt;void (), boost::signals2::optional_last_value&lt;void&gt;, int, std::less&lt;int&gt;, boost::function&lt;void ()&gt;, boost::function&lt;void (boost::signals2::connection const&amp;)&gt;, boost::signals2::mutex&gt;'\nRTTI symbol not found for class 'boost::signals2::signal&lt;void (), boost::signals2::optional_last_value&lt;void&gt;, int, std::less&lt;int&gt;, boost::function&lt;void ()&gt;, boost::function&lt;void (boost::signals2::connection const&amp;)&gt;, boost::signals2::mutex&gt;'\nRTTI symbol not found for class 'boost::signals2::signal&lt;void (), boost::signals2::optional_last_value&lt;void&gt;, int, std::less&lt;int&gt;, boost::function&lt;void ()&gt;, boost::function&lt;void (boost::signals2::connection const&amp;)&gt;, boost::signals2::mutex&gt;'\n</code></pre>\n\n<p>The application is running on Android phone.</p>\n\n<p>This is disturbing because I also have segfault crashes coming from <code>signals2</code> library. What does that warning exactly mean and where does it come from?</p>\n"}, {"tags": ["c++", "audio"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1448465916, "post_id": 33920551, "comment_id": 55602172, "body": "<a href=\"http://www.portaudio.com/\" rel=\"nofollow noreferrer\">portaudio</a>, <a href=\"https://libav.org/\" rel=\"nofollow noreferrer\">libav</a>."}], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 5587116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38831e401c063170856df08692ad9655?s=128&d=identicon&r=PG&f=1", "display_name": "MikeL", "link": "https://stackoverflow.com/users/5587116/mikel"}, "is_accepted": false, "score": 0, "last_activity_date": 1448490793, "creation_date": 1448490793, "answer_id": 33927590, "question_id": 33920551, "link": "https://stackoverflow.com/questions/33920551/play-audio-files-for-a-particular-time-interval-in-c/33927590#33927590", "title": "play audio files for a particular time interval in c++", "body": "<p>C++ itself has no knowledge of sound/audio, you'll have to use a 3rd party library written for this sort of thing.  XAudio in windows I believe, may have a new name now (used to be DirectSound), or other Miles Sound System, etc.</p>\n"}], "owner": {"reputation": 27, "user_id": 5487335, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92a7d1de647b31f32e41c557b3b8c04b?s=128&d=identicon&r=PG&f=1", "display_name": "Biruntha G", "link": "https://stackoverflow.com/users/5487335/biruntha-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448490793, "creation_date": 1448465785, "question_id": 33920551, "link": "https://stackoverflow.com/questions/33920551/play-audio-files-for-a-particular-time-interval-in-c", "title": "play audio files for a particular time interval in c++", "body": "<p>I want to play mp3/wav file of a particular time interval. That means if an audio file is 30 minutes long then i want to play from 10 minutes to 20 minutes (or 15min to 30min) of that file in c++ like audio slicing. but i just want to play. is it possible? can anyone guide me?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1448466222, "post_id": 33920507, "comment_id": 55602408, "body": "Why do you need this 3d image? OpenCV support for N-dimensional images isn&#39;t that great. You can do this but it&#39;s not very easy to work with. Are you sure a <code>std::vector&lt;Mat1b&gt;</code> isn&#39;t enough?"}, {"owner": {"reputation": 77, "user_id": 5589772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/908c5e52f31b79c9cdcf8e6387eaa06f?s=128&d=identicon&r=PG&f=1", "display_name": "Junyan Liu", "link": "https://stackoverflow.com/users/5589772/junyan-liu"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1448809772, "post_id": 33920507, "comment_id": 55724058, "body": "Wow could you tell me how to use std::vector&lt;Mat1b&gt;? I need this because I would like to make 10 mat a loop. like :    for (i=0;i&lt;10;i++){ do something with Mat (:,:,i);}.....Is there any ways to do this?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1448809843, "post_id": 33920507, "comment_id": 55724088, "body": "Check <a href=\"http://stackoverflow.com/a/32733223/5008845\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2112, "user_id": 1984090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359b34d7152e74bb71de54571ba1f8f0?s=128&d=identicon&r=PG", "display_name": "Tobias Senst", "link": "https://stackoverflow.com/users/1984090/tobias-senst"}, "is_accepted": false, "score": -1, "last_activity_date": 1448487061, "creation_date": 1448487061, "answer_id": 33926748, "question_id": 33920507, "link": "https://stackoverflow.com/questions/33920507/how-to-combines-2d-mat-into-a-3d-one/33926748#33926748", "title": "How to combines 2D mat into a 3D one?", "body": "<p>You have to convert the double type matirces into uchar matrices first, which can be done as follows:</p>\n\n<pre><code>cv::Mat img1u;\nimg1.convertTo(img1u);\nm.at&lt;double&gt;(m.rows,m.cols,1)=img1u;\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5589772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/908c5e52f31b79c9cdcf8e6387eaa06f?s=128&d=identicon&r=PG&f=1", "display_name": "Junyan Liu", "link": "https://stackoverflow.com/users/5589772/junyan-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448487061, "creation_date": 1448465671, "last_edit_date": 1448467363, "question_id": 33920507, "link": "https://stackoverflow.com/questions/33920507/how-to-combines-2d-mat-into-a-3d-one", "title": "How to combines 2D mat into a 3D one?", "body": "<p>Here is my problem, I have 8 mat grayscale images with 100*100,\nI would like to combine them together into a 3d matrix like 100*100*8;</p>\n\n<p>Here is my code: (8  mat  are named from <code>img1</code> to <code>img8</code> with same size 100*100 and pixel value is <code>double</code>)</p>\n\n<pre><code>int sz[3] = {img1.rows,img1.cols,8};\nMat m(3,sz, CV_8UC1, Scalar::all(0));\nm.at&lt;double&gt;(m.rows,m.cols,1)=img1;\n</code></pre>\n\n<p>I think this code can put img1 into the 1st plane of 3d matrix 100*100*8, but then I got a error:</p>\n\n<blockquote>\n  <p>The type cannot convert from MAT to double.</p>\n</blockquote>\n\n<p>How could I fix this problem?</p>\n"}, {"tags": ["c++", "linux", "makefile"], "comments": [{"owner": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "edited": false, "score": 2, "creation_date": 1448465365, "post_id": 33920337, "comment_id": 55601773, "body": "If you&#39;re only coding in C++, you might want to try CMake instead of make, the advantage will be that it&#39;s also compatible with Windows and OS X"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1448465400, "post_id": 33920337, "comment_id": 55601796, "body": "1) Off-topic 2) There are other build systems, e.g. SCons. 3) There are IDEs in Linux, too."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "edited": false, "score": 0, "creation_date": 1448465527, "post_id": 33920337, "comment_id": 55601878, "body": "@oLen, make is compatible with Windows the same - called nmake."}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 2, "creation_date": 1448465654, "post_id": 33920337, "comment_id": 55601961, "body": "Having used both, I&#39;d enthusiastically second the recommendation to go with CMake for C/C++.  However, if you want to learn <code>make</code> specifically (particularly for projects in other languages or systems - I&#39;ve used it for anything from LaTeX to Lilypad to ImageMagick) then the official documentation is quite accessible: <a href=\"http://www.gnu.org/software/make/manual/make.html\" rel=\"nofollow noreferrer\">gnu.org/software/make/manual/make.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 3798657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHD3g.png?s=128&g=1", "display_name": "rubicks", "link": "https://stackoverflow.com/users/3798657/rubicks"}, "is_accepted": false, "score": 0, "last_activity_date": 1448465763, "creation_date": 1448465763, "answer_id": 33920542, "question_id": 33920337, "link": "https://stackoverflow.com/questions/33920337/compiling-simple-c-projects-using-make/33920542#33920542", "title": "Compiling simple C++ projects using make", "body": "<p>A <code>Makefile</code> of the form</p>\n\n<pre><code>main: CXXFLAGS = -Wall\nmain: main.o BuisnessCard.o Tell.o\n\nmain_debug: CXXFLAGS = -Wall -g\nmain_debug: main.o BuisnessCard.o Tell.o\n</code></pre>\n\n<p>should get you close to what you want.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3261737/makefile-change-variable-value-depending-on-a-target\">Makefile - change variable value depending on a target</a></li>\n<li><a href=\"https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html\" rel=\"nofollow\">https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 559, "user_id": 5084792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f393ccd206d09760ccc7acd09d1c3a6?s=128&d=identicon&r=PG", "display_name": "bowl", "link": "https://stackoverflow.com/users/5084792/bowl"}, "edited": false, "score": 1, "creation_date": 1448470461, "post_id": 33920554, "comment_id": 55605334, "body": "Thank you for your time. This is, what I was looking for."}], "tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": true, "score": 1, "last_activity_date": 1448466617, "last_edit_date": 1448466617, "creation_date": 1448465788, "answer_id": 33920554, "question_id": 33920337, "link": "https://stackoverflow.com/questions/33920337/compiling-simple-c-projects-using-make/33920554#33920554", "title": "Compiling simple C++ projects using make", "body": "<p>If you are interested in make, I recommend reading this <a href=\"https://www.gnu.org/software/make/manual/make.html#Introduction\" rel=\"nofollow\">introduction to GNU make</a>. Here's a simple (and not very robust) example of a makefile for your program:</p>\n\n<pre><code>main: main.cpp BuisnessCard.h BuisnessCard.cpp Tell.h Tell.cpp\n    c++ $^\n</code></pre>\n\n<p>Although knowing the basics of make may be useful, I'd recommend using a more high-level tool such as <a href=\"https://cmake.org/\" rel=\"nofollow\">CMake</a> to manage your build configuration. Here's a similar CMake config:</p>\n\n<pre><code>project(MYPROJECT)\nadd_executable(main main.cpp BuisnessCard.h BuisnessCard.cpp Tell.h Tell.cpp)\n</code></pre>\n\n<p>The advantage of CMake is that it can generate portable Makefiles or project files for various IDEs. It also allows writing platform checks for installed compilers, libraries, etc.</p>\n\n<p>It's also easy to switch between different build configurations with <code>CMAKE_BUILD_TYPE</code>, for example to use debug configuration you can run</p>\n\n<pre><code>cmake -DCMAKE_BUILD_TYPE=Debug .\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 5084792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f393ccd206d09760ccc7acd09d1c3a6?s=128&d=identicon&r=PG", "display_name": "bowl", "link": "https://stackoverflow.com/users/5084792/bowl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "closed_date": 1448466489, "accepted_answer_id": 33920554, "answer_count": 2, "score": 0, "last_activity_date": 1448466617, "creation_date": 1448465265, "last_edit_date": 1495540760, "question_id": 33920337, "link": "https://stackoverflow.com/questions/33920337/compiling-simple-c-projects-using-make", "closed_reason": "Not suitable for this site", "title": "Compiling simple C++ projects using make", "body": "<p>I want to switch completely from using Windows to Linux (Ubuntu). Last issue that prevents me from transition is necessity to code in C++. On Windows I use Visual Studio. On Linux, I am currently struggling with understanding how make works.  </p>\n\n<p>I need set of simple instructions and tips. Provided I have five files: <em>main.cpp</em>, <em>BuisnessCard.h</em>, <em>BuisnessCard.cpp</em>, <em>Tell.h</em>, <em>Tell.cpp</em>. Please, tell me, how to create Makefile, so it will complete following tasks for me:<br>\n1) When I type <code>make main</code>  I'd like it to create \"executable\" file ./main, which will include code from <em>BuisnessCard.h</em> and <em>Tell.h</em> (and of course. according .cpp files).<br>\n2) When I type <code>make main_debug</code>, it'll perform same action, but with different compile options (called <em>flags</em>?)  </p>\n\n<p>Could anyone answer my questions or provide links to elemental tutorials? I have already tried: <a href=\"http://mrbook.org/blog/tutorials/make/\" rel=\"nofollow noreferrer\">MRBook's tutorial</a> and <a href=\"https://stackoverflow.com/questions/2481269/how-to-make-a-simple-c-makefile\" title=\"Stackoverflow post\">this SO post</a>, but it is a bit too advanced already, while I don't seem to get the basics.</p>\n"}, {"tags": ["c++", "double"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1448465293, "post_id": 33920303, "comment_id": 55601720, "body": "Sorry for the edit. However, what do you mean?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1448466089, "post_id": 33920303, "comment_id": 55602306, "body": "What type is <code>x[i]</code>?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1448466295, "post_id": 33920303, "comment_id": 55602469, "body": "Subtract 5 from the next digit, e.g. for 2.446 to be printed with %.2f as 2.44, subtract 0.005. And 2.441 - 0.005 = 2.436, which will be rounded up to 2.44 when printed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1448466308, "post_id": 33920303, "comment_id": 55602484, "body": "<code>printf(&quot;%.2f&quot;, (double) x[i]);</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1448466343, "post_id": 33920303, "comment_id": 55602512, "body": "@chux, that will round."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1448466423, "post_id": 33920303, "comment_id": 55602573, "body": "@Paul OgilvieYes it will round.  That is how I understand OP&#39;s question."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1448468448, "last_edit_date": 1448468448, "creation_date": 1448468095, "answer_id": 33921333, "question_id": 33920303, "link": "https://stackoverflow.com/questions/33920303/c-conclusion-of-the-rounded-double/33921333#33921333", "title": "C. Conclusion of the rounded double", "body": "<p>In C++, the effect of the <code>precision</code> property of an output stream depends on the stream's setting of the <code>floatfield</code> format flag.  Your C++ example sets that flag to <code>fixed</code>, which seems to correspond to the <code>%f</code> field descriptor in <code>printf()</code>.  I say \"seems to\" because I'm having trouble finding any documentation that requires exact correspondence, but I would anticipate that in practice they do correspond exactly.</p>\n\n<p>In a C <code>printf()</code> format, the precision is a property of each output field.  It is expressed in the field descriptor between a decimal point and the conversion specifier (<code>f</code> here), possibly with a length modifier between.  Supposing that <code>x</code> is an array of either <code>double</code> or <code>float</code>, the C analog of your C++ statement is therefore either</p>\n\n<pre><code>printf(\"%.2f\\n\", x[i]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fprintf(stdout, \"%.2f\\n\", x[i]);\n</code></pre>\n\n<p>(these are equivalent).  These differ from the C++, however, in that the floating-point format and precision are not retained as persistent properties of <code>stdout</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5604445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae12974b89645afa7dfe7744c6115fce?s=128&d=identicon&r=PG&f=1", "display_name": "Olfy", "link": "https://stackoverflow.com/users/5604445/olfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33921333, "answer_count": 1, "score": 0, "last_activity_date": 1448469771, "creation_date": 1448465159, "last_edit_date": 1448469771, "question_id": 33920303, "link": "https://stackoverflow.com/questions/33920303/c-conclusion-of-the-rounded-double", "title": "C. Conclusion of the rounded double", "body": "<p>How to remove rounded to the 2nd sign double? I found only option with in C++:</p>\n\n<pre><code>cout&lt;&lt;fixed&lt;&lt;setprecision(2)&lt;&lt;x[i]&lt;&lt;endl;\n</code></pre>\n\n<p>But in that case it isn't clear how to make that that in C would be as:</p>\n\n<pre><code>printf(\"%.7hi\"x[i]);\nprintf(\"    \");\n</code></pre>\n\n<p>That is, without transition to the next line and only 7 symbols.</p>\n"}]