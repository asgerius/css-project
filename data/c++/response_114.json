[{"tags": ["c++", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1489628176, "post_id": 42822926, "comment_id": 72758856, "body": "Probably all your items got consumed by one thread because the thread finished processing them all before the next thread even got a chance to wake up."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1489628171, "creation_date": 1489628171, "answer_id": 42823801, "question_id": 42822926, "link": "https://stackoverflow.com/questions/42822926/having-set-amount-of-thread-to-work-as-consumers/42823801#42823801", "title": "Having set amount of thread to work as consumers", "body": "<p>The current version of <code>consumer</code> can only read one value before exiting. In order to read more, it must loop, and this leads to  your second version of <code>consumer</code> which has two problems:</p>\n\n<ol>\n<li>Consumption here is so quick that the first thread into the queue can consume the whole queue within its timeslice (or however CPU is being allocated). Insert a yield or a sleep to force the OS to switch tasks.</li>\n<li>The mutex is not unlocked so no other threads are able to get in.</li>\n</ol>\n\n<p>Fortunately you aren't creating the threads until you need them and they terminate after the queue is empty so the whole deal with <code>conditional_variable</code> can go out the window.</p>\n\n<pre><code>void consumer(int i)\n{\n    unique_lock&lt;mutex&gt; l(m);\n    while (!q.empty())\n    {\n        int tmp = q.front();\n        q.pop();\n        cout &lt;&lt; i &lt;&lt; \" got \" &lt;&lt; tmp &lt;&lt; endl;\n        // note: In the real world, locking around a cout is gross. cout is slow, \n        // so you want the unlock up one line. But...! This allows multiple threads\n        // to write to the consle at the same time and that makes your output \n        // look like it was tossed into a blender, so we'll take the performance hit\n        l.unlock(); // let other threads have a turn\n        this_thread::yield();\n        l.lock(); // lock again so the queue can be safely inspected\n    }\n}\n</code></pre>\n\n<p>If you need to go with the threadpool approach, things get a little messier and the condition variable makes a return. </p>\n\n<pre><code>void consumer(int i)\n{\n    while (true)\n    {\n        unique_lock&lt;mutex&gt; l(m);\n        if (q.empty())\n        {\n            cnd.wait(l);\n        }\n        if (!q.empty()) // OK. We got out of the conditional wait, but have \n                        // other threads sucked the queue dry? Better check.\n        {\n            int tmp = q.front();\n            q.pop();\n            cout &lt;&lt; i &lt;&lt; \" got \" &lt;&lt; tmp &lt;&lt; endl;\n        }\n        l.unlock();\n        this_thread::yield();\n    }\n}\n</code></pre>\n\n<p>An <code>atomic&lt;bool&gt; terminated</code> may be helpful to allow an orderly shutdown <code>while (true)</code> does not allow for.</p>\n"}, {"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 0, "last_activity_date": 1489628854, "creation_date": 1489628854, "answer_id": 42823898, "question_id": 42822926, "link": "https://stackoverflow.com/questions/42822926/having-set-amount-of-thread-to-work-as-consumers/42823898#42823898", "title": "Having set amount of thread to work as consumers", "body": "<p>In general, without going into code details, a threadpool is created and the threads are put in a wait state (waiting on one or more events / signals, or in your case <code>condition_variable cnd;</code>) - I'm used to work with events, so I'll use that in the following text, but a <code>condition_variable</code> should work in a similar way.</p>\n\n<p>When a task is added to the queue, a task-event is set/fired and one ore more threads wake up (depending on the event (single / multi)).</p>\n\n<p>When a thread wakes up, it checks (with a lock) if there is a task available, if available, executes the task and when finished checks again (!) if there are more tasks waiting. (because when you add 8 tasks in one go, 5 threads become active, so they need to check if there are more tasks after finishing their first one.</p>\n\n<p>If there are no jobs left, the thread goes back in the wait state (waiting for a next job, or a quit event).</p>\n\n<p>When quitting the application, another, say quit-event, is set for all threads (you can't just wait for the threads to finish, because the threads themselves are waiting on an event to do some work) -- or you could fire the same event, and first set a <code>volatile variable</code>, which the threads should then first check on any event to see if they need to quit, or do another job. Then you can wait for the threads to 'come home'.</p>\n\n<p>A lock should be held as short as possible.</p>\n\n<p>As for your code:</p>\n\n<pre><code>void producer( int i ){\n    unique_lock&lt;mutex&gt; l(m);\n    q.push(i);\n    if( q.size() )\n        cnd.notify_all();\n}\n</code></pre>\n\n<p>Here the lock is held longer than needed (and perhaps too long). You also just pushed a value, so <code>q</code> will not be empty (no need to check). Since you only add one item (task), only one thread should be woken up (so <code>notify_one()</code> should be fine here).</p>\n\n<p>So you should: <code>lock, push, unlock, notify</code> - instead of <code>unlock</code>, you can place the <code>lock</code> and <code>push</code> inside brackets, which will trigger an <code>unlock</code> in the <code>unique_lock&lt;&gt;</code> destructor.</p>\n\n<pre><code>void consumer(int i ){\n    unique_lock&lt;mutex&gt; l(m);    \n        while( q.empty() ){\n                cnd.wait(l );\n            }\n        if( q.empty())\n            return;\n        cout &lt;&lt; \"IM AWAKE :\" &lt;&lt; i  &lt;&lt; endl;\n        int tmp = q.front();\n        q.pop();\n        l.unlock();\n        cout &lt;&lt; \"Producer got \" &lt;&lt; tmp &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Here you should <code>lock, check queue, pop if there is a task, unlock</code>, if no task, put the thread in a wait state again, else do work with the popped value (after unlocking), and then check again if there is more work to do. Normally it is not a good idea to call <code>cout</code> while the data is locked.. but for a small test you could get away with it, especially because <code>cout</code> needs to be synchronized too (but it would be cleaner to synchronize <code>cout</code> on its own, separate from your data lock).</p>\n\n<pre><code>void printQueue(){\n    while( ! q.empty()){\n        int tmp = q.front();\n        q.pop();\n        cout &lt;&lt; \"Queue got \" &lt;&lt; tmp &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Make sure your data is locked here too! (although it's only called from main after the threads have finished, the function is in your class, and the data should be locked).</p>\n"}], "owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1489628854, "creation_date": 1489622165, "last_edit_date": 1489623670, "question_id": 42822926, "link": "https://stackoverflow.com/questions/42822926/having-set-amount-of-thread-to-work-as-consumers", "title": "Having set amount of thread to work as consumers", "body": "<p>I have created a producer / consumer code as following</p>\n\n<pre><code>class CTest{\npublic:\n    void producer( int i ){\n        unique_lock&lt;mutex&gt; l(m);\n        q.push(i);\n        if( q.size() )\n            cnd.notify_all();\n    }\n\n    void consumer(int i ){\n        unique_lock&lt;mutex&gt; l(m);    \n            while( q.empty() ){\n                    cnd.wait(l );\n                }\n            if( q.empty())\n                return;\n            cout &lt;&lt; \"IM AWAKE :\" &lt;&lt; i  &lt;&lt; endl;\n            int tmp = q.front();\n            q.pop();\n            l.unlock();\n            cout &lt;&lt; \"Producer got \" &lt;&lt; tmp &lt;&lt; endl;\n        }\n\n\n\n    void ConsumerInit( int threads ){\n        for( int i = 0; i &lt; threads; i++ ){\n            thrs.push_back(thread(&amp;CTest::consumer, this ,i));\n        }\n\n    }\n    void waitForTHreads(){\n        for( auto &amp;a : thrs )\n            a.join();\n    }\n    void printQueue(){\n        while( ! q.empty()){\n            int tmp = q.front();\n            q.pop();\n            cout &lt;&lt; \"Queue got \" &lt;&lt; tmp &lt;&lt; endl;\n        }\n    }\nprivate:\n    queue&lt;int&gt; q;\n    vector&lt;thread&gt; thrs;\n    mutex m;\n    condition_variable cnd;\n};\n</code></pre>\n\n<p>and main</p>\n\n<pre><code>int main(){\n    int x;   \n    CTest t;\n    int counter = 0;\n    while( cin &gt;&gt; x ){\n        if( x == 0 ){\n            cout &lt;&lt; \"yay\" &lt;&lt; endl;;\n            break;\n        }\n        if( x == 1)\n            t.producer(counter++);\n        if( x == 2 )\n            t.ConsumerInit(5);\n    }   \n    t.waitForTHreads();\n    t.printQueue();\n    return 0;\n}\n</code></pre>\n\n<p>What this code does it , when user inputs \"1\" it will add number to the queue ,when user inputs \"2\" , 5 threads are spawned to retrieve data from queue and print it. However my problem is as followng , when i input\n6 numbers , only 5 of them are printed due to fact that only 5 threads are spawned , what i want to do is thread to retrieve a data from queue , print int, and then again waiting if it can print another data. This way all N > 5 numbers would pri printed with just 5 threads.</p>\n\n<p>My question is , what is standard way how to achieve this? I read few documens but didnt fint/cannot think of good solution. How are problems like this solved?</p>\n\n<p>when i try to create simple thread pool :</p>\n\n<pre><code>void consumer(int i ){\n    while(true){\n        {\n            unique_lock&lt;mutex&gt; l(m);    \n            while( q.empty() ){\n                    cnd.wait(l );\n                }\n            if( q.empty())\n                return;\n            cout &lt;&lt; \"IM AWAKE :\" &lt;&lt; i  &lt;&lt; endl;\n            int tmp = q.front();\n            q.pop();\n\n            cout &lt;&lt; \"Producer \" &lt;&lt; i &lt;&lt; \" got \" &lt;&lt; tmp &lt;&lt; endl;\n        }   //consumer(i);\n    }\n}\n</code></pre>\n\n<p>and input N number all numbers are processed by one thread.\nThanks for help!</p>\n"}, {"tags": ["c++", "dictionary", "iterator", "binary-search-tree"], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 2, "last_activity_date": 1489622307, "creation_date": 1489622307, "answer_id": 42822955, "question_id": 42822909, "link": "https://stackoverflow.com/questions/42822909/does-c-stdmap-and-stdset-erase-copy-values-and-thus-invalidate-iterators/42822955#42822955", "title": "Does C++ std::map and std::set erase copy values and thus invalidate iterators", "body": "<p>The erase operations of the node-based containers (maps, sets, lists) invalidate only iterators and references to the element that was erased, but not any other iterators.</p>\n\n<p>When you erase by value, this is usually straight-forward, but when you erase by iterator, this does require care in the common case of iterating over the entire container in a loop. To wit:</p>\n\n<pre><code>for (auto it = my_set.begin(); it != my_set.end(); )\n{\n     if (should_we_erase(it)) { my_set.erase(it++); }\n     else                     { ++it;               }\n}\n</code></pre>\n\n<p>Pay close attention how we make sure to <em>not</em> use the iterator after we erased it! In the erasing branch, we first set <code>it</code> to a new valid iterator one further via the post-increment, and then erase at the original iterator (which is the value of the post-increment expression). Alternatively, we can write this as <code>it = my_set.erase(it);</code>, since the <code>erase</code> operation returns the next (valid) iterator. A very common novice mistake is to put <code>++it</code> int he loop header, which then ends up performing arithmetic on the invalid iterator.</p>\n\n<p>By contrast, vector and deque invalidate a lot more iterators and references during a lot more operations.</p>\n\n<p>The invalidation of iterators and references is well documented as part of the standard library specification, and any self-respecting documentation or tutorial will make it very clear when and how something is invalidated.</p>\n"}], "owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489622307, "creation_date": 1489622057, "question_id": 42822909, "link": "https://stackoverflow.com/questions/42822909/does-c-stdmap-and-stdset-erase-copy-values-and-thus-invalidate-iterators", "title": "Does C++ std::map and std::set erase copy values and thus invalidate iterators", "body": "<p>I'm considering the implementation of removal in binary search tree.  I know that std::map and std::set are usually implemented as an RBTree.  But regardless, if it is some BST then when erasing/removing a node that has 2 children we generally swap it with its successor (or predecessor).  Many textbooks show this as just copying over the successor's key and value.  But this copy is not transparent.  For example, if the value is another container to which I have outstanding iterators, then removing some OTHER key,value could now invalidate the iterators I have to a container that I have not explicitly changed.  Rather than copying key,value we could just relink the successor node into the tree where the node is that should be deleted. This would maintain the state of the node.</p>\n\n<p>Suppose I have a map of vectors:</p>\n\n<pre><code>std::map&lt;int, vector&lt;int&gt; &gt; mymap;\n// Add root\nmymap.insert(make_pair(2, vector&lt;int&gt;()));\n// Add left child\nmymap.insert(make_pair(1, vector&lt;int&gt;()));\n// Add right child\nmymap.insert(make_pair(3, vector&lt;int&gt;()));\nmymap[3].push_back(10);\n// I get an iterator to the vector stored in the node with key=3\nvector&lt;int&gt;::iterator it = mymap[3].begin();\n\n// I now remove element 2 from the map.  \nmymap.erase(2);\n\n// If the successor's (i.e. 3's) key,value were *copied* to 2's node\n// and then 3's node was deleted this would invalid iterators \nvector&lt;int&gt;::iterator it2 = mymap[3].begin();\n\n// These could/should be different if remove copied the successor\ncout &lt;&lt; &amp;*it &lt;&lt; \" \" &lt;&lt; &amp;*it2 &lt;&lt; endl;\n</code></pre>\n\n<p>Certainly the node containing 3 could just be \"relinked\" within the tree in place of 2's node and 2's node deleted. This would maintain the correct state of the key,value.  </p>\n\n<p>I coded up this test case and it appeared to relink rather than copy.  Is that behavior defined anywhere?  </p>\n\n<p>Similarly if I have a vector of vectors (i.e. vector > and I hold an iterator to an element in one of the \"inner\" vectors but then the outer vector resizes due to insertion of another vector then my iterator is invalid even though I haven't technically modified that inner vector.   Is that \"transitive\" property of invalidation spelled out somewhere or is it \"obvious\"/\"implied\" and I'm just slow to the game?</p>\n"}, {"tags": ["c++", "linux", "linker", "g++", "libstdc++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489622489, "post_id": 42822885, "comment_id": 72757471, "body": "&quot; It&#39;s virtually impossible to find the already compiled libstdc++.a&quot; ehh, no. That&#39;s easy (for any given distro). But damn, you seem to be jumping through hoops to solve probldms you shouldn&#39;t have.. things are usually not this hard (unless ylu are simply &quot;doing it wrong&quot;)."}, {"owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "edited": false, "score": 0, "creation_date": 1489636404, "post_id": 42822885, "comment_id": 72761001, "body": "error message shows the answer. <a href=\"https://stackoverflow.com/questions/6045809/link-error-undefined-reference-to-gxx-personality-v0-and-g\" title=\"link error undefined reference to gxx personality v0 and g\">stackoverflow.com/questions/6045809/&hellip;</a>"}, {"owner": {"reputation": 563, "user_id": 3043260, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e2093d2edd4eec76dd31883ca8b97572?s=128&d=identicon&r=PG&f=1", "display_name": "natiiix", "link": "https://stackoverflow.com/users/3043260/natiiix"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489654163, "post_id": 42822885, "comment_id": 72768309, "body": "@jesper How is that easy? Link me the library for i686-elf please if you can find it. I couldn&#39;t find anything at all for at least an hour."}, {"owner": {"reputation": 563, "user_id": 3043260, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e2093d2edd4eec76dd31883ca8b97572?s=128&d=identicon&r=PG&f=1", "display_name": "natiiix", "link": "https://stackoverflow.com/users/3043260/natiiix"}, "reply_to_user": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "edited": false, "score": 0, "creation_date": 1489654260, "post_id": 42822885, "comment_id": 72768369, "body": "@sailfish009 No it doesn&#39;t, it says literally nothing. I can&#39;t get libstdc++ to work thus I can&#39;t possibly link it."}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 3043260, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e2093d2edd4eec76dd31883ca8b97572?s=128&d=identicon&r=PG&f=1", "display_name": "natiiix", "link": "https://stackoverflow.com/users/3043260/natiiix"}, "edited": false, "score": 0, "creation_date": 1489673383, "post_id": 42829555, "comment_id": 72781931, "body": "Not only I don&#39;t need those libraries, I don&#39;t even want any of them. I just want support for c++ features, such as the keywords new / delete, object destructor ~class(), etc. Anyways, I have no idea how to make this work with the standard g++. It always link against their x86_64-linux version. <code>g++ -m32 -static -march=i386 -T ${BASH_SOURCE%&#47;*}&#47;..&#47;src&#47;linker.ld -o ${BASH_SOURCE%&#47;*}&#47;..&#47;bin&#47;kokos.bin -nostdlib -ffreestanding -O2 ${BASH_SOURCE%&#47;*}&#47;..&#47;obj&#47;*.o -lgcc -lc -lgcc_eh</code> still produces errors caused by the the missing C library. Can&#39;t I just implement those functions myself and use those?"}], "tags": [], "owner": {"reputation": 71, "user_id": 7707841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sKzNgt73hCM/AAAAAAAAAAI/AAAAAAAAAAA/EfsWnhDeuAI/photo.jpg?sz=128", "display_name": "segfault", "link": "https://stackoverflow.com/users/7707841/segfault"}, "is_accepted": false, "score": 0, "last_activity_date": 1489655307, "creation_date": 1489655307, "answer_id": 42829555, "question_id": 42822885, "link": "https://stackoverflow.com/questions/42822885/cross-compile-and-link-libstdc-for-i686-elf-using-g-on-ubuntu-16-04/42829555#42829555", "title": "Cross-compile and link libstdc++ for i686-elf (using g++ on Ubuntu 16.04)", "body": "<p>It is not clear from your post what exact result you want to get. Below there are few observations that may help you to figure out what your real problems are.</p>\n\n<ol>\n<li>First, if you need 32-bit code to be compiled on your (I guess) 64-bit Ubuntu host, you do not need a cross toolchain, just compile it with <code>-m32</code>.</li>\n<li>If you want your code to be <strong>optimized</strong> for specific CPU variant, just use appropriate <code>-march=</code>, <code>-mcpu=</code> and <code>-mtune=</code> options.</li>\n<li>If you need your 32-bit program to be statically linked with C++ libraries, then on Ubuntu you just need to install a package libstdc++-6-dev:i386. Run <code>sudo apt-get install libstdc++-6-dev:i386</code>, it will also install all necessary dependencies. Then just compile your program with <code>gcc -m32 -static</code>.</li>\n<li>If you need to use standard libraries <strong>optimized</strong> for specific CPU, rather than for generic i386 then you need to build them manually. This is true not only for libstdc++, but also for libc (IIRC, Ubuntu 16.04 still uses generic <code>-march=i386</code> option to build libc, Ubuntu 16.10 uses <code>-march=i686</code>).</li>\n<li>You got the undefined references from your link output because you are using <code>-nostdlib</code> and <code>-lstdc++</code> but not <code>-lc</code>. <code>libstdc++</code> uses the functions from standard C library,so you need it.</li>\n<li>As you develop an OS kernel and you need a freestanding environment, I suppose that you really <strong>do not need</strong> standard libraries. In that case refer to C++ standard, clause 17.6.1.3, to find which standard headers you may use in your application. You have to use <code>-lsupc++ -lgcc</code> on your compiler command line and additionally you need <code>-lgcc_eh</code> if you use exception handling (and <code>libgcc_eh.a</code> is where <code>__gxx_personality_v0</code> comes from). Do not use <code>-lstdc++</code> in a freestanding environment!</li>\n</ol>\n\n<p>Hope this helps a bit and have a good luck!</p>\n"}], "owner": {"reputation": 563, "user_id": 3043260, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e2093d2edd4eec76dd31883ca8b97572?s=128&d=identicon&r=PG&f=1", "display_name": "natiiix", "link": "https://stackoverflow.com/users/3043260/natiiix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489655307, "creation_date": 1489621921, "question_id": 42822885, "link": "https://stackoverflow.com/questions/42822885/cross-compile-and-link-libstdc-for-i686-elf-using-g-on-ubuntu-16-04", "title": "Cross-compile and link libstdc++ for i686-elf (using g++ on Ubuntu 16.04)", "body": "<p>Believe me I've spent quite some time Googling without much of an outcome.</p>\n\n<p>I'm writing a very basic OS as a fun project. It, for obvious reasons, needs to be compiled into a standalone form (i686-elf in my case). However I've decided that pure C isn't enough for me and that I'd love to use C++. So I've written a bit of code and it seemed to work, so I went on and all of sudden I kept getting the same error despite no obvious problem with the code.</p>\n\n<p><code>./sh/../obj/class_string.o:(.eh_frame+0x4f): undefined reference to __gxx_personality_v0'\n./sh/../obj/kernel.o:(.eh_frame+0x13): undefined reference to __gxx_personality_v0'\n/home/natiiix/crosscompiler/out/path/bin/../lib/gcc/i686-elf/6.1.0/libgcc.a(unwind-dw2.o): In function read_encoded_value_with_base':\n/home/natiiix/crosscompiler/out/src/build-gcc/i686-elf/libgcc/../../../gcc-6.1.0/libgcc/unwind-pe.h:257: undefined reference to abort'</code></p>\n\n<p>After a bit of Googling I've figured out the problem must be that my g++ cross-compiler lacks c++ libs, which turned out to be true. It indeed contains just libgcc and libgcov. So I've figured out I'd get them somehow, but it turned out to be quite a difficult task to do. It's virtually impossible to find the already compiled libstdc++.a. So I had to compile it myself and as I'm not particularly familiar with makefile it definitely wasn't easy to figure out.</p>\n\n<p>Finally I've found a bash script that somewhat allowed me to do what I needed. It downloads gcc 6.1.0, binutils, configures both and runs make, make install. That would be really nice if it actually worked. The compiler itself works like a charm as far as I can tell at least, but the library won't work no matter what I do since, at least I suspect, it is being built for a different target platform for some reason. It appears that libstdc++ simply cannot be built for i686-elf or something along the lines.</p>\n\n<p>gccbuild.sh:</p>\n\n<pre><code>#!/bin/bash\n\nset -e\n\nif [ \"$#\" -ne 1 ]; then\n  echo \"Supply one parameter: the target to use!!\"\n  exit 1\nfi\n\nsudo apt install libgmp3-dev libmpfr-dev libisl-dev libcloog-isl-dev libmpc-dev texinfo -y\n\ncd \"$(dirname \"$0\")\"\n\nrm -rfv out/\nmkdir out/\ncd out/\n\nrm -rfv path/\nmkdir path/\nrm -rfv src/\nmkdir src/\ncd src/\n\nwget ftp://ftp.gnu.org/gnu/binutils/binutils-2.26.tar.gz\nwget ftp://ftp.gnu.org/gnu/gcc/gcc-6.1.0/gcc-6.1.0.tar.gz\n\ntar -xvzf binutils-2.26.tar.gz\ntar -xvzf gcc-6.1.0.tar.gz\n\nexport PREFIX=\"$(pwd)/../path/\"\nexport TARGET=$1\nexport PATH=\"$PREFIX/bin:$PATH\"\n\nrm -rfv build-binutils/\nmkdir build-binutils/\ncd build-binutils/\n../binutils-2.26/configure --target=$TARGET --prefix=\"$PREFIX\" --disable-nls --disable-werror\nmake\nmake install\n\ncd ..\n\nrm -rfv build-gcc/\nmkdir build-gcc/\ncd build-gcc/\n\n../gcc-6.1.0/configure --target=$TARGET --prefix=\"$PREFIX\" --disable-nls --enable-languages=c,c++ --without-headers\n\nmake all-gcc\nmake all-target-libgcc\n\nmake install-gcc\nmake install-target-libgcc\n\n../gcc-6.1.0/libstdc++-v3/configure --host=$TARGET --target=$TARGET --prefix=\"$PREFIX\" --disable-nls --enable-languages=c,c++ --disable-libstdcxx-threads\n\nmake\nmake install\n</code></pre>\n\n<p>My compile / link script (so that you can see the g++ arguments):</p>\n\n<pre><code>${BASH_SOURCE%/*}/../../crosscompiler/out/path/bin/i686-elf-g++ -c ${BASH_SOURCE%/*}/../src/*.cpp --std=c++11 -ffreestanding -O2 -Wall -Wextra\necho moving object files from active directory to obj/\n\nmv *.o ${BASH_SOURCE%/*}/../obj/\n\n${BASH_SOURCE%/*}/../../crosscompiler/out/path/bin/i686-elf-g++ -T ${BASH_SOURCE%/*}/../src/linker.ld -o ${BASH_SOURCE%/*}/../bin/kokos.bin -ffreestanding -O2 -nostdlib ${BASH_SOURCE%/*}/../obj/*.o -lgcc -lstdc++ -lsupc++\n</code></pre>\n\n<p>When I try to link those libraries (versions of libstdc++ and libsupc++ that appear to be elf32-i386, which is as close as they get to the i686-elf) I stop getting the <code>undefined reference to __gxx_personality_v0</code>, but I still get a handful of undefined references to what appear to be C functions. (abort, strlen, malloc, free)</p>\n\n<p>The whole problem can be avoided by not using templates, class destructors and some more c++ specific stuff (ironically classes alone seem to work just fine for the most part), but it doesn't seem like a very good solution to me. I'd rather have access to such things.</p>\n\n<p>Could someone please explain to me what have I done wrong?</p>\n"}, {"tags": ["c++", "multithreading", "knn"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1489624979, "post_id": 42822957, "comment_id": 72758102, "body": "Sorry the question may not be clear enough. It&#39;s always 1-nn. It&#39;s about if it&#39;s correct to run 1-nn on (for example) 4 non-overlapped parts of the training set and then comparing 4 locally nearest neighbours to pick out 1 globally nearest neighbours."}, {"owner": {"reputation": 1056, "user_id": 7114235, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sa3UNIHu3Jg/AAAAAAAAAAI/AAAAAAAAAAA/396mqY0J8nQ/photo.jpg?sz=128", "display_name": "rrobby86", "link": "https://stackoverflow.com/users/7114235/rrobby86"}, "reply_to_user": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1489656240, "post_id": 42822957, "comment_id": 72769617, "body": "Ok, this is fine, as in the end you get the &quot;best&quot; point of the training set as if you iterated through them in a single batch"}, {"owner": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1489701310, "post_id": 42822957, "comment_id": 72799489, "body": "I thought that as well. However, my multithreaded machine learning program shows the greatest accuracy when running the training set as a whole with 1 thread. The accuracy decreases as I increase the number of running threads (each thread runs on a different part of the training set). That&#39;s why I started doubting myself."}, {"owner": {"reputation": 1056, "user_id": 7114235, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sa3UNIHu3Jg/AAAAAAAAAAI/AAAAAAAAAAA/396mqY0J8nQ/photo.jpg?sz=128", "display_name": "rrobby86", "link": "https://stackoverflow.com/users/7114235/rrobby86"}, "reply_to_user": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1489736002, "post_id": 42822957, "comment_id": 72810336, "body": "That sounds strange... Maybe it depends from some specific aspect of the implementation (I was thinking about the use of indexing structures, but should not be a problem)."}, {"owner": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1490008748, "post_id": 42822957, "comment_id": 72903952, "body": "One more thing, I used mlpack library for the implementation. I divided the training set into few parts and run each part through mlpack 1-nn algorithms to get local nearest neighbours."}, {"owner": {"reputation": 1056, "user_id": 7114235, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sa3UNIHu3Jg/AAAAAAAAAAI/AAAAAAAAAAA/396mqY0J8nQ/photo.jpg?sz=128", "display_name": "rrobby86", "link": "https://stackoverflow.com/users/7114235/rrobby86"}, "reply_to_user": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "edited": false, "score": 0, "creation_date": 1490016274, "post_id": 42822957, "comment_id": 72909203, "body": "I don&#39;t know mlpack, but should not matter which implementation you use IMHO."}], "tags": [], "owner": {"reputation": 1056, "user_id": 7114235, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sa3UNIHu3Jg/AAAAAAAAAAI/AAAAAAAAAAA/396mqY0J8nQ/photo.jpg?sz=128", "display_name": "rrobby86", "link": "https://stackoverflow.com/users/7114235/rrobby86"}, "is_accepted": false, "score": 0, "last_activity_date": 1489622311, "creation_date": 1489622311, "answer_id": 42822957, "question_id": 42822855, "link": "https://stackoverflow.com/questions/42822855/k-nearest-neighbours-in-multithread-program/42822957#42822957", "title": "k nearest neighbours in multithread program", "body": "<p>I hope I understood the problem...</p>\n\n<p>If you want to classify considering only the nearest point (1-nn), this would be OK.</p>\n\n<p>However, to perform <em>k</em>-nn classification, considering the nearest point of each of <em>k</em> groups is <strong>not</strong> the same as considering the <em>k</em> nearest points, unless they happen to be in different groups. You should at least keep <em>k</em> points for each of the <em>n</em> groups and then pick the nearest <em>k</em> points among the <em>n*k</em> selected.</p>\n"}], "owner": {"reputation": 1, "user_id": 7718014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e7f650df39aca68bc466d00ec1a9ce?s=128&d=identicon&r=PG&f=1", "display_name": "gunner308", "link": "https://stackoverflow.com/users/7718014/gunner308"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489624668, "creation_date": 1489621749, "last_edit_date": 1489624668, "question_id": 42822855, "link": "https://stackoverflow.com/questions/42822855/k-nearest-neighbours-in-multithread-program", "title": "k nearest neighbours in multithread program", "body": "<p>Given a training set and a test point T, which needs to be classified.\nIf I divide the training set into n parts, then run knn algorithm (k=1) on each part. After that I compare results from each part. Would it give me the same results as if I run 1-nn through the whole training set?\nFor example:\nn = 4. Divide training set into 4 parts\nAfter run 1-nn algorithm on 4 parts of the training set, I've got point A from part 1, point B from part 2, C from part 3 and D from part 4. After that, can I compare distance from T to A, B, C and D to work out which class T belongs to?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489621944, "post_id": 42822833, "comment_id": 72757307, "body": "Install an event filter. Or just override the mouse event handlers that qt provides."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1489621973, "post_id": 42822833, "comment_id": 72757313, "body": "Expecting us to go elsewhere to see what you&#39;re asking is unreasonable. Please read <a href=\"http://stackoverflow.com/help/mcve\">How to Create a Minimal, Complete and Verifiable Example</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489622067, "post_id": 42822833, "comment_id": 72757339, "body": "Please add a <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a>."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1489622391, "post_id": 42822833, "comment_id": 72757437, "body": "I didn&#39;t say Google it. Read the links I posted, which clearly say that the <b>relevant portions of your code</b> must be <b>here, in the question itself</b>, not off-site at an external location. When people point you to information in the <a href=\"https://stackoverflow.com/help\">help center</a> pages, it&#39;s because <b>you  should read them</b>."}, {"owner": {"reputation": 56, "user_id": 7451930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fbb1db4833769004712070ef636737?s=128&d=identicon&r=PG&f=1", "display_name": "MrInvisible", "link": "https://stackoverflow.com/users/7451930/mrinvisible"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1489623497, "post_id": 42822833, "comment_id": 72757703, "body": "@KenWhite I misunderstood your comment, thats why i removed comment i edited post a little bit, but i posted pastebin because i dont really know what is relevant and what is not. When you are new to something problem can be somewhere where you least expect it, and i didnt think its smart to post a whole code."}, {"owner": {"reputation": 56, "user_id": 7451930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fbb1db4833769004712070ef636737?s=128&d=identicon&r=PG&f=1", "display_name": "MrInvisible", "link": "https://stackoverflow.com/users/7451930/mrinvisible"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489623582, "post_id": 42822833, "comment_id": 72757732, "body": "@JesperJuhl Which ones do i need to override? I think that is main problem :/"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489623939, "post_id": 42822833, "comment_id": 72757847, "body": "Have you tried reading the documentation? I could tell you, but I&#39;m not going to; read the docs."}, {"owner": {"reputation": 56, "user_id": 7451930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fbb1db4833769004712070ef636737?s=128&d=identicon&r=PG&f=1", "display_name": "MrInvisible", "link": "https://stackoverflow.com/users/7451930/mrinvisible"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489624325, "post_id": 42822833, "comment_id": 72757956, "body": "@JesperJuhl Read it, but i didn&#39;t get it which ones I need(they are kinda complicated for a new guy). mostly that is what i&#39;m asking."}], "answers": [{"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 0, "last_activity_date": 1489625563, "creation_date": 1489625563, "answer_id": 42823402, "question_id": 42822833, "link": "https://stackoverflow.com/questions/42822833/how-to-get-qt-mouse-position-all-the-time/42823402#42823402", "title": "how to get Qt Mouse Position all the time", "body": "<p>You can install an event filter on your <code>QApplication</code> object, examine the received events for mouse movement events, convert the resulting position into your scene, and then use it to orient your rectangle. </p>\n\n<p>Look at <code>QObject::installEventFilter</code>. Event filters are pretty easy to use. When a mouse event is received by an object, its coordinates are in that object's coordinate space, so you'll need to convert from that to your graphics scene coordinates. There will probably be several conversions to get that because you'll need to map the received position to your <code>QGraphicsView</code> using mapTo and then map the result of that to your scene using <code>QGraphicsView::mapToScene</code>.</p>\n\n<p>This should get you pretty close. Let me know if you need more help.</p>\n"}], "owner": {"reputation": 56, "user_id": 7451930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fbb1db4833769004712070ef636737?s=128&d=identicon&r=PG&f=1", "display_name": "MrInvisible", "link": "https://stackoverflow.com/users/7451930/mrinvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1489625563, "creation_date": 1489621627, "last_edit_date": 1489623227, "question_id": 42822833, "link": "https://stackoverflow.com/questions/42822833/how-to-get-qt-mouse-position-all-the-time", "title": "how to get Qt Mouse Position all the time", "body": "<p>So I have been struggling with this question for quite some time. I have tried many things, none of them seem to work.\nSo, I want to make a game in Qt, and one of the things I need is that player(QRectItem for now) rotate always to the mouse position. I just need to get readings of that position all the time, so not when i click or when I drag, all the time.\nHow can I do that?\nI set</p>\n\n<pre><code>    this-&gt;setMouseTracking(true);\n</code></pre>\n\n<p>on a class that inherits for QGraphicsView class, also I have set focus on it.\nDont know if the problem is with overriding functions(dont know which one to override) or with focus.</p>\n\n<pre><code>void Game::mouseMoveEvent(QGraphicsSceneMouseEvent *event)\n{\n    qDebug() &lt;&lt; QCursor::pos();\n}\n</code></pre>\n\n<p>Did this but it does not work at all.\nBtw, I am noob it Qt, this is my first project.\nThanks in advance! :)</p>\n\n<p>P.S.\nI have really done research, but if I have somehow missed topic with same or similar question that can solve this problem, just paste it and accept my apologies. :)</p>\n\n<p>EDITED</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1489619552, "post_id": 42822434, "comment_id": 72756509, "body": "google for &quot;register metatype&quot;"}, {"owner": {"reputation": 1, "user_id": 7714861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weiwGfvDMt4/AAAAAAAAAAI/AAAAAAAAAFk/HtElM2OBDQI/photo.jpg?sz=128", "display_name": "Doron Feinstein", "link": "https://stackoverflow.com/users/7714861/doron-feinstein"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1489714174, "post_id": 42822434, "comment_id": 72803450, "body": "I have added: Q_DECLARE_METATYPE(ccc::SomeType); But it made no difference."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1489715307, "post_id": 42822434, "comment_id": 72803738, "body": "Literally the first result from googling the exact keywords gives you the exact solution to your problem, which is only 5 lines, yet you won&#39;t read the whole thing?"}, {"owner": {"reputation": 1, "user_id": 7714861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weiwGfvDMt4/AAAAAAAAAAI/AAAAAAAAAFk/HtElM2OBDQI/photo.jpg?sz=128", "display_name": "Doron Feinstein", "link": "https://stackoverflow.com/users/7714861/doron-feinstein"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1489857051, "post_id": 42822434, "comment_id": 72858466, "body": "The first result I get is &quot;Register a Meta Type in Qt&quot; in stackoverflow. Its not the same problem - he has a qobject class and I dont. He doesn&#39;t even get the same error as I do."}], "owner": {"reputation": 1, "user_id": 7714861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weiwGfvDMt4/AAAAAAAAAAI/AAAAAAAAAFk/HtElM2OBDQI/photo.jpg?sz=128", "display_name": "Doron Feinstein", "link": "https://stackoverflow.com/users/7714861/doron-feinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489630310, "creation_date": 1489619432, "last_edit_date": 1489630310, "question_id": 42822434, "link": "https://stackoverflow.com/questions/42822434/qt-4-8-signal-namespace-issue", "title": "Qt 4.8 signal namespace issue", "body": "<p>I am having an issue compiling some old code after upgrading to Visual Studio 2015.\nThe class that contains the signal is defined like this:</p>\n\n<pre><code>namespace aaa {\nnamespace bbb {\n\nclass MyCombo : public QComboBox\n{\nQ_OBJECT\npublic:\n\n  MyCombo(QWidget* parent=0);\n\nQ_SIGNALS:\n\n  void mySignal(ccc::SomeType::SomeTypeValues);\n};\n\n} // bbb\n} // aaa\n</code></pre>\n\n<p>SomeType is defined in a different header file like this:</p>\n\n<pre><code>namespace aaa {\nnamespace ccc {\n\nclass SomeType\n{\npublic:\n  enum SomeTypeValues { SomeValue=0, SomeOtherValue };\n};\n\n} // ccc\n} // aaa\n</code></pre>\n\n<p>When I compile the code, I get:</p>\n\n<pre><code>error C2327: 'QWidget::ccc': is not a type name, static, or enumerator\n</code></pre>\n\n<p>I tried to change the signal signature to:</p>\n\n<pre><code>void mySignal(aaa::ccc::SomeType::SomeTypeValues);\n</code></pre>\n\n<p>This compiles, but when the signal is emitted, neither of the slots connected to this signal get triggered.</p>\n"}, {"tags": ["c++", "nonlinear-optimization"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 6901839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf78152206f971d5180573a2fa0a836?s=128&d=identicon&r=PG&f=1", "display_name": "Zhaozhong Chen", "link": "https://stackoverflow.com/users/6901839/zhaozhong-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1491365444, "creation_date": 1491365444, "answer_id": 43221651, "question_id": 42822305, "link": "https://stackoverflow.com/questions/42822305/set-an-vector-as-outpot-nlopt/43221651#43221651", "title": "set an vector as outpot, nlopt", "body": "<p>In fact if we want to put a vector to optimizae this becomes to an multi-objective optimization problem. I am not sure if NLopt can do that. One of the proper way you can do when you want to optimize a vector is that you change your vector into a scalar. for instance you want to optimize [x,y], you may can use z= x+y and optimize z. This may look like wrong but sometimes it works. Or use more advanced way called \"Pareto Front\". See the following slide\n<a href=\"https://ocw.mit.edu/courses/engineering-systems-division/esd-77-multidisciplinary-system-design-optimization-spring-2010/lecture-notes/MITESD_77S10_lec14.pdf\" rel=\"nofollow noreferrer\">change a vector to a scalar</a>  </p>\n"}], "owner": {"reputation": 75, "user_id": 6901839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf78152206f971d5180573a2fa0a836?s=128&d=identicon&r=PG&f=1", "display_name": "Zhaozhong Chen", "link": "https://stackoverflow.com/users/6901839/zhaozhong-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491365444, "creation_date": 1489618829, "question_id": 42822305, "link": "https://stackoverflow.com/questions/42822305/set-an-vector-as-outpot-nlopt", "title": "set an vector as outpot, nlopt", "body": "<p>I want to use NLopt for my nonlinear optimization problem. I test the sample code in tutorial page <a href=\"http://ab-initio.mit.edu/wiki/index.php/NLopt_Tutorial\" rel=\"nofollow noreferrer\">enter link description here</a>, C++ example. It works good. But  the function I want to minimize should a return a vector. Which is, in the tutorial page it has</p>\n\n<pre><code>double minf;\nnlopt::result result = opt.optimize(x, minf);\nprintf(\"found minimum at f(%g,%g) = %g \", x[0],x[1],minf);\n</code></pre>\n\n<p>I hope minf is a vector, so I change it to one dimension vector for just test.</p>\n\n<pre><code>std::vector&lt;double&gt; minf(1);\nnlopt::result result = opt.optimize(x, minf);\nprintf(\"found minimum at f(%g,%g) = %g \", x[0],x[1],minf[0]);\n</code></pre>\n\n<p>Then it has errors<code>nltest2.cpp:44:44: error: no matching function for call to \u2018nlopt::opt::optimize(std::vector&lt;double&gt;&amp;, std::vector&lt;double&gt;&amp;)\u2019</code></p>\n\n<p>Is there any way I can let it recturn an vector?\nWhat's more(if you cannot answer this that's OK.) I hope to use armadillo matrix library. The better if I could (I have included the h file needed)</p>\n\n<pre><code>mat minf(1,1);\nnlopt::result result = opt.optimize(x, minf);\nprintf(\"found minimum at f(%g,%g) = %g \", x[0],x[1],minf(1,1));\n</code></pre>\n\n<p>This causes errors of course...</p>\n\n<p>Thanks for your answer!!</p>\n"}, {"tags": ["c++", "generic-programming"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 3, "creation_date": 1489619039, "post_id": 42822278, "comment_id": 72756309, "body": "Um... How about: becuase <code>typeid</code> is explictly and deliberately specified <i>not to decay</i> its argument?"}, {"owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1489619573, "post_id": 42822278, "comment_id": 72756518, "body": "@AnT Then how can <code>typeid</code> know the polymorphic type of the variable?"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1489619618, "post_id": 42822278, "comment_id": 72756533, "body": "@Dovahkiin Do you have a test case where <code>is_same&lt;A, B&gt;::value</code> and <code>typeid(A) == typeid(B)</code> disagree?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1489619829, "post_id": 42822278, "comment_id": 72756598, "body": "@Dovahkiin: I don&#39;t understand where you see the connection between dynamic type and type decay. These are two unrelated concepts. <code>typeid</code> is specified not to decay types. <code>typeid</code> is specified to return dynamic type of polymorphis classes. That&#39;s all there is to it. Where&#39;s the problem?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1489620010, "post_id": 42822278, "comment_id": 72756652, "body": "@Sebastian Redl: That&#39;s easy: <code>int</code> vs. <code>const int</code>. Not <code>is_same</code>, but same <code>typeid</code>."}, {"owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1489620021, "post_id": 42822278, "comment_id": 72756656, "body": "@SebastianRedl <code>const void* const</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1489630775, "post_id": 42822278, "comment_id": 72759580, "body": "@ant wrong way around?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1489630888, "post_id": 42822278, "comment_id": 72759611, "body": "@dova please be extremely specific.  Provide actual code you expect to behave one way, how you expect it to behave, how it does behave.  Your question above is &quot;there exists&quot; <b>without saying what</b> or what tests it fails exactly.  Edit actual types and expressions that do not behave the way you think they should.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1489631047, "post_id": 42822278, "comment_id": 72759659, "body": "@Yakk: Um... No. Why? See for yourself: <a href=\"http://coliru.stacked-crooked.com/a/1e5e7a6a789f2d82\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/1e5e7a6a789f2d82</a>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1489647602, "post_id": 42822278, "comment_id": 72764900, "body": "@AnT Shouldn&#39;t it be something like <code>std::is_same&lt;std::decay_t&lt;const int&gt;, int&gt;::value</code> accordingly with the question?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1489647672, "post_id": 42822278, "comment_id": 72764934, "body": "@skypjack: I was responding to Sebastian Red&#39;s request in the comments above. It is quite specific."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1489647761, "post_id": 42822278, "comment_id": 72764979, "body": "@AnT Oh, sorry, didn&#39;t follow exactly the trail of comments."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1489656324, "post_id": 42822278, "comment_id": 72769668, "body": "@AnT Ok, so I formulated this wrong. In line with the last question in the OP&#39;s post, I&#39;m looking for cases where is_same says they&#39;re the same, but typeid comparison says they&#39;re different. (Interesting about top level const not changing the typeid, though quite logical also.)"}], "owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489618689, "creation_date": 1489618689, "question_id": 42822278, "link": "https://stackoverflow.com/questions/42822278/why-doesnt-the-typeid-of-a-variable-equal-the-typeid-of-the-decayed-type", "title": "Why doesn&#39;t the TypeID of a variable equal the TypeID of the decayed type?", "body": "<p>To translate the question to C++ code, why doesn't</p>\n\n<p><code>typeid(T) == typeid(typename std::decay&lt;T&gt;::type)</code></p>\n\n<p>always evaluate to true? (In my tests, sometimes it does, sometimes it doesn't.)</p>\n\n<p>According to the <a href=\"http://en.cppreference.com/w/cpp/language/typeid\" rel=\"nofollow noreferrer\">typeid documentation</a>...</p>\n\n<blockquote>\n  <p>[typeid is] Used where the dynamic type of a polymorphic object must be known and for static type identification.</p>\n</blockquote>\n\n<p>And the <a href=\"http://en.cppreference.com/w/cpp/types/decay\" rel=\"nofollow noreferrer\">documentation for decay</a> provides this program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename U&gt;\nstruct decay_equiv : \nstd::is_same&lt;typename std::decay&lt;T&gt;::type, U&gt;::type \n{};\n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha\n          &lt;&lt; decay_equiv&lt;int, int&gt;::value &lt;&lt; '\\n'\n          &lt;&lt; decay_equiv&lt;int&amp;, int&gt;::value &lt;&lt; '\\n'\n          &lt;&lt; decay_equiv&lt;int&amp;&amp;, int&gt;::value &lt;&lt; '\\n'\n          &lt;&lt; decay_equiv&lt;const int&amp;, int&gt;::value &lt;&lt; '\\n'\n          &lt;&lt; decay_equiv&lt;int[2], int*&gt;::value &lt;&lt; '\\n'\n          &lt;&lt; decay_equiv&lt;int(int), int(*)(int)&gt;::value &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>true\ntrue\ntrue\ntrue\ntrue\ntrue\n</code></pre>\n\n<p>So, if the <code>is_same</code> meta-function says they're the same types, then why doesn't typeid seem to agree?</p>\n"}, {"tags": ["c++", "inheritance", "observer-pattern"], "comments": [{"owner": {"reputation": 1098, "user_id": 6497438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d4986f27a3f0a255bf095e3b1fd3de?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/6497438/evan"}, "edited": false, "score": 0, "creation_date": 1489625295, "post_id": 42822231, "comment_id": 72758184, "body": "Public inheritance so the polymorphism with work, SettingsClient needs a virtual destructor, ConcreteRepository does not need to also inherit SettingsClient because it already is one via RepositoryBase, and explicitly call RepositoryBase&#39;s reloadSettings from ConcreteBase&#39;s if you need to. There is no mechanism in C++ that will default to calling multiple base classes overridden members."}], "answers": [{"tags": [], "owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "is_accepted": true, "score": 1, "last_activity_date": 1489646857, "last_edit_date": 1489646857, "creation_date": 1489634216, "answer_id": 42824644, "question_id": 42822231, "link": "https://stackoverflow.com/questions/42822231/how-do-i-realize-the-observer-pattern-in-conjunction-with-inheritance/42824644#42824644", "title": "How do I realize the Observer pattern in conjunction with inheritance?", "body": "<p>There is no need for <code>ConcreteRepository</code> to also inherit from <code>SettingsClient</code>. Your can register your repository once in the base class constructor, and then call the base class <code>reloadSettings</code> from the subclass version.</p>\n\n<pre><code>class RepositoryBase : private SettingsClient\n{\npublic:\n  RepositoryBase(SettingsController&amp; controller)\n  {\n    controller.registerClient(this);\n  }\n\nprivate:\n  void reloadSettings() override\n  {\n    std::cout &lt;&lt; \"Reloading RepositoryBase\\n\";\n  }\n};\n\nclass ConcreteRepository : public RepositoryBase\n{\npublic:\n  using RepositoryBase::RepositoryBase;\n\nprivate:\n  void reloadSettings() override\n  {\n    std::cout &lt;&lt; \"Reloading ConcreteRepository\\n\";\n  }\n};\n</code></pre>\n\n<p>We use <em>private</em> inheritance from <code>SettingsClient</code> to prevent <code>reloadSettings</code> from being publicly visible in subclasses. If we need to call the base class function, we can use <em>protected</em> inheritance instead, at the cost of weakened encapsulation.</p>\n\n<pre><code>class RepositoryBase : protected SettingsClient\n{\npublic:\n  RepositoryBase(SettingsController&amp; controller)\n  {\n    controller.registerClient(this);\n  }\n\nprotected:\n  void reloadSettings() override\n  {\n    std::cout &lt;&lt; \"Reloading RepositoryBase\\n\";\n  }\n};\n\nclass ConcreteRepository : public RepositoryBase\n{\npublic:\n  using RepositoryBase::RepositoryBase;\n\nprotected:\n  void reloadSettings() override\n  {\n    RepositoryBase::reloadSettings();\n    std::cout &lt;&lt; \"Reloading ConcreteRepository\\n\";\n  }\n};\n</code></pre>\n\n<p>If you need or prefer to register two separate clients for the base class and subclass, you can use composition.</p>\n\n<pre><code>class RepositoryBase\n{\npublic:\n  RepositoryBase(SettingsController&amp; controller)\n  {\n    controller.registerClient(&amp;client);\n  }\n\nprivate:\n  struct : public SettingsClient\n  {\n    void reloadSettings() override\n    {\n      std::cout &lt;&lt; \"Reloading RepositoryBase\\n\";\n    }\n  } client;\n};\n\nclass ConcreteRepository : public RepositoryBase\n{\npublic:\n  ConcreteRepository(SettingsController&amp; controller) : RepositoryBase(controller)\n  {\n    controller.registerClient(&amp;client);\n  }\n\nprivate:\n  struct : public SettingsClient\n  {\n    void reloadSettings() override\n    {\n      std::cout &lt;&lt; \"Reloading ConcreteRepository\\n\";\n    }\n  } client;\n};\n</code></pre>\n\n<p>You can give the client a pointer to its repository if you need to access its non-static members.</p>\n"}], "owner": {"reputation": 348, "user_id": 7487521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b19198e5601885add8087c502f0f2c9f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7487521/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 42824644, "answer_count": 1, "score": -1, "last_activity_date": 1489646857, "creation_date": 1489618410, "question_id": 42822231, "link": "https://stackoverflow.com/questions/42822231/how-do-i-realize-the-observer-pattern-in-conjunction-with-inheritance", "title": "How do I realize the Observer pattern in conjunction with inheritance?", "body": "<p>I've got a class which manages a config file <code>SettingsController</code>, it allows a <code>SettingsClient</code> (one pure virtual function, no members) to be registered. A <code>SettingsClient</code> will be notified when a relevant configuration entry changes so it can refresh.</p>\n\n<p>Now I have a <code>RepositoryBase</code> which needs some configuration entries and thus inherits <code>SettingsClient</code> and registers at the <code>SettingsController</code> and a concrete repository <code>ConcreteRepository</code> which also needs some configuration entries and inherits the client and registers at the controller.</p>\n\n<p><code>ConcreteRepository</code> inherits <code>RepositoryBase</code> and both inherit <code>SettingsClient</code> to be able to register at the controller (in Java the <code>ConcreteRepository</code> would <code>extend</code> the <code>RepositoryBase</code> and both would <code>implement</code> the <code>SettingsClient</code>).</p>\n\n<p>My problem is: The compiler warns me not to do this as it is ambiguous. Sadly virtual inheritance won't help me here as it would overwrite the implemented function of either <code>ConcreteRepository</code> or <code>RepositoryBase</code> and so disable the refresh function of one of the two classes.</p>\n\n<p>Is there some way to realize this inheritance-observer-combination? I am thinking this might be a design flaw and <code>RepositoryBase</code> needs to be a member of <code>ConcreteRepository</code>(?)</p>\n\n<p>Here is some code to give an overview:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nclass SettingsClient {\npublic:\n  virtual void reloadSettings() = 0;\n};\n\nclass SettingsController {\n  void notify(){\n    for(SettingsClient* client : clients){\n      client-&gt;reloadSettings(); // error! reloadSettings() of RepositoryBase or ConcreteRepository?\n    }\n  }\n  void registerClient(SettingsClient *client) {\n    clients.push_back(client);\n  }\n\n  std::vector&lt;SettingsClient*&gt; clients;\n};\n\nclass RepositoryBase : private SettingsClient {\n  // ...\n  virtual void reloadSettings() {\n    std::cout &lt;&lt; \"Reloading Base!\" &lt;&lt; \"\\n\";\n  }\n  // ...\n};\n\nclass ConcreteRepository : private SettingsClient, private RepositoryBase {\n  // ...\n  virtual void reloadSettings() {\n    std::cout &lt;&lt; \"Reloading ConcreteRepository!\" &lt;&lt; \"\\n\";\n  }\n  // ...\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 0, "creation_date": 1489618117, "post_id": 42822140, "comment_id": 72755918, "body": "in <code>getScore()</code> you have <code>if(i &gt; 100)</code> it should be <code>if(scores[i] &gt; 100)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1489620584, "post_id": 42822559, "comment_id": 72756854, "body": "Good idea to put in a test that <code>cin</code> is still valid, handle and ignore if it isn&#39;t, to prevent an infinite loop on hopelessly bad input ."}], "tags": [], "owner": {"reputation": 25, "user_id": 7274676, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-G1ZfJAtHVQ4/AAAAAAAAAAI/AAAAAAAAHRg/8G7dCai8new/photo.jpg?sz=128", "display_name": "Alexandru Banu", "link": "https://stackoverflow.com/users/7274676/alexandru-banu"}, "is_accepted": false, "score": -1, "last_activity_date": 1489620090, "creation_date": 1489620090, "answer_id": 42822559, "question_id": 42822140, "link": "https://stackoverflow.com/questions/42822140/only-accept-positive-values-that-are-equal-to-or-under-100-in-c/42822559#42822559", "title": "Only accept positive values that are equal to or under 100 in C++", "body": "<p>This is wrong</p>\n\n<pre><code>if (i &gt; 100) \n{\n    cout &lt;&lt; \"Not a valid answer try again\";\n    cin &gt;&gt; scores[1];\n}\n</code></pre>\n\n<p>First of all, as JackVanier stated, you check for i to be greater then 100 instead of scores[i]. And one more thing: if the user inputs a wrong value again, you accept it, and always on the position 1 in your array. You should ask to re-enter the value until a valid one.</p>\n\n<p>Use this instead:</p>\n\n<pre><code>while (scores[i] &lt; 0.0 || scores[i] &gt; 100.0)\n{\n    cout &lt;&lt; \"Not a valid value! Enter again: \";\n    cin &gt;&gt; scores[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7270307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/252Na.jpg?s=128&g=1", "display_name": "Cynthia", "link": "https://stackoverflow.com/users/7270307/cynthia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1489620090, "creation_date": 1489617963, "question_id": 42822140, "link": "https://stackoverflow.com/questions/42822140/only-accept-positive-values-that-are-equal-to-or-under-100-in-c", "title": "Only accept positive values that are equal to or under 100 in C++", "body": "<p>So for what I'm doing I can only accept values that aren't negative and can't be greater than 100. The rest of the program works as planned. I've tried a couple of other things such as using absolute value yet they didn't quite work. Any help would be much appreciated. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#include &lt;iostream&gt;\r\n#include &lt;cmath&gt;\r\n\r\nusing namespace std;\r\n\r\nvoid getScore(double[]);\r\ndouble calcAverage(double[]); // Make it a double because you want the exact answer not a rounded one\r\ndouble findLowest(double[]);\r\n\r\n\r\nvoid main() {\r\n\r\n\tdouble scores[5]; // We want to store 5 answers\r\n\tdouble averageScore, lowestScore;\r\n\tgetScore(scores); // Collects the Input\r\n\taverageScore = calcAverage(scores); // The average\r\n\tlowestScore = findLowest(scores); // Finds the lowest score that was put into the array\r\n\r\n\tcout &lt;&lt; \"Here are the Results!\" &lt;&lt; endl;\r\n\tcout &lt;&lt; \"The average score was a: \" &lt;&lt; averageScore &lt;&lt; endl;\r\n\tcout &lt;&lt; \"The lowest score was a : \" &lt;&lt; lowestScore;\r\n\tcout &lt;&lt; endl;\r\n\r\n\r\n\tcin.ignore();\r\n\tcin.get();\r\n\r\n}\r\n\r\nvoid getScore(double scores[])\r\n{\r\n\tfor (int i = 0; i &lt; 5; i++) // Will loop 5 times for 5 answers\r\n\t{\r\n\t\tcout &lt;&lt; \"Enter The Test Score Here?:  \" &lt;&lt; endl;\r\n\t\tcin &gt;&gt; scores[i];// will store the inputs that you enter\r\n\r\n\t\t{\r\n\t\t\tif (i &gt; 100) \r\n\t\t\t{\r\n\t\t\t\tcout &lt;&lt; \"Not a valid answer try again\";\r\n\t\t\t\tcin &gt;&gt; scores[1];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ndouble calcAverage(double scores[])\r\n{\r\n\tdouble temp = 0.00; // It's 0.00 because we need decimals\r\n\r\n\tfor (int i = 0; i &lt; 5; i++)\r\n\t{\r\n\t\ttemp += scores[i]; // adding the score values to temp\r\n\t}\r\n\ttemp /= 5; // Divides all of the scores by 5 to find the average\r\n\treturn temp;\r\n}\r\n\r\n\r\ndouble findLowest(double scores[])\r\n{\r\n\tdouble temp = 0.00;\r\n\r\n\tfor (int i = 0; i &lt; 5; i++)\r\n\t{\r\n\t\ttemp = scores[i];\r\n\t\tif (scores[i - 1] &gt; scores[i]) {\r\n\t\t\tscores[i] = scores[i - 1];\r\n\t\t\tscores[i - 1] = temp;\r\n\t\t}\r\n\t}\r\n\ttemp = scores[0]; // Array starts at the lowest value\r\n\treturn temp;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "c", "linux", "address-sanitizer", "memory-sanitizer"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489617454, "post_id": 42821991, "comment_id": 72755650, "body": "Write unit tests. Lots. Then the unit tests may work without external dependencies and can be compiled in their entirety with instrumentation."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489618839, "post_id": 42821991, "comment_id": 72756233, "body": "@KerrekSB - A lot of my unit tests depend on Protocol Buffers, and I&#39;m getting errors within libprotobuf if I try to build with ASan, so unfortunately, that wouldn&#39;t be an easy change. And I&#39;d like to have integration tests run under the Sanitizers as well, if possible."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489655992, "post_id": 42821991, "comment_id": 72769465, "body": "@KerrekSB Unit tests in a large project may still require lots of dependencies. Also in a typical legacy codebase you only have system tests, not units."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 1, "creation_date": 1489656077, "post_id": 42821991, "comment_id": 72769511, "body": "@JoshKelley &quot;using private aliases for globals&quot; - in practice bugs like this are extremely rare. Also note that they are working fine in GCC and we&#39;ve recently submitted a <a href=\"http://lists.llvm.org/pipermail/llvm-commits/Week-of-Mon-20160208/330654.html\" rel=\"nofollow noreferrer\">patch to Clang</a> to fix it there (not enabled by default yet, though)."}], "answers": [{"comments": [{"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 0, "creation_date": 1489700781, "post_id": 42822070, "comment_id": 72799256, "body": "After further investigation, you&#39;re right; I was running into <a href=\"https://github.com/google/protobuf/issues/1450\" rel=\"nofollow noreferrer\">github.com/google/protobuf/issues/1450</a>, which was the root of my problem (and was causing different symptoms in Clang vs. GCC, which led me down the wrong trail of blaming using uninstrumented code in Clang)."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1489620833, "last_edit_date": 1489620833, "creation_date": 1489617646, "answer_id": 42822070, "question_id": 42821991, "link": "https://stackoverflow.com/questions/42821991/how-can-i-practically-use-addresssanitizer-and-memorysanitizer/42822070#42822070", "title": "How can I practically use AddressSanitizer and MemorySanitizer?", "body": "<p>The sanitizers can easily be used on your own code without rebuilding system dependencies. I do so routinely with a large(ish) 2M line code base on RHEL 6 &amp; 7 using both GCC and Clang - it's not a problem. If it is a problem; you are doing  it wrong (or there is a bug somewhere that needs fixing).</p>\n"}, {"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 2, "last_activity_date": 1489651809, "creation_date": 1489651809, "answer_id": 42828475, "question_id": 42821991, "link": "https://stackoverflow.com/questions/42821991/how-can-i-practically-use-addresssanitizer-and-memorysanitizer/42828475#42828475", "title": "How can I practically use AddressSanitizer and MemorySanitizer?", "body": "<p>AddressSanitizer supports separate instrumentation i.e. you <em>can</em> instrument just parts of your program with it (separate DSOs or even separate object files). Note however that if you use static Asan runtime (which is default on Clang, unless you build with <code>-shared-libasan</code>) you must instrument main executable. Shared runtime (default in GCC) does not have this problem but you'll need to <code>LD_PRELOAD</code> it if executable isn't instrumented. See <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerAsDso\" rel=\"nofollow noreferrer\">discussion in wiki</a> for details.</p>\n\n<p>As for MemorySanitizer, it indeed requires all of it's dependencies to be rebuilt. This is the major reason why the tool isn't widely used outside Google.</p>\n"}], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 1, "accepted_answer_id": 42828475, "answer_count": 2, "score": 2, "last_activity_date": 1489651809, "creation_date": 1489617317, "last_edit_date": 1489618351, "question_id": 42821991, "link": "https://stackoverflow.com/questions/42821991/how-can-i-practically-use-addresssanitizer-and-memorysanitizer", "title": "How can I practically use AddressSanitizer and MemorySanitizer?", "body": "<p>AddressSanitizer and MemorySanitizer are very useful tools, but they require that the <em>whole program</em> be appropriately instrumented. (At least, for the Clang version of AddressSanitizer; see <a href=\"https://clang.llvm.org/docs/MemorySanitizer.html#handling-external-code\" rel=\"nofollow noreferrer\">here</a> in the MemorySanitizer docs and the \"using private aliases for globals\" section of <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerClangVsGCC\" rel=\"nofollow noreferrer\">AddressSanitizerClangVsGCC</a>.)</p>\n\n<p>If taken at its word, this means that all library dependencies need to be built with the appropriate compiler flags to enable ASan or MSan. For a typical Linux application that requires various third-party dependencies, what's a practical way of doing this?  The Sanitizers are apparently a Google project, and I get the impression that Google code mostly just uses their own monorepo and their own <a href=\"https://bazel.build/\" rel=\"nofollow noreferrer\">build tools</a>, but this may be outside of the reach of the average developer. Is there a simple way of getting libraries built with the Sanitizers without investing in a lot of extra infrastructure or build scripts?</p>\n"}, {"tags": ["c++", "class", "operator-overloading"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1489616601, "post_id": 42821684, "comment_id": 72755304, "body": "IMHO it&#39;s usually a good idea not to try to be overly clever with overloads. Maybe what you <i>really</i> want is a constructor that takes the data you read from the user that you can explicitly call once you know you have the data you need to construct the object."}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 3, "last_activity_date": 1489616644, "last_edit_date": 1489616644, "creation_date": 1489616091, "answer_id": 42821712, "question_id": 42821684, "link": "https://stackoverflow.com/questions/42821684/using-cin-and-cout-to-populate-fields-of-a-class-c/42821712#42821712", "title": "Using cin &gt;&gt; and cout &lt;&lt; to populate fields of a class C++", "body": "<p>The compiler fails to see the operator overloads in your <code>main.cpp</code> translation unit, because the overloads are not found in that file, nor are they found in any of the <code>#include</code> files.  You need to declare both overloads in your <code>MyClass.h</code> file instead, after the <code>MyClass</code> declaration:</p>\n\n<p>MyClass.h:</p>\n\n<pre><code>#ifndef MyClass_h\n#define MyClass_h\n\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass MyClass {\npublic:\n    string input\n    void ReadFrom(istream &amp;is);\n    void WriteTo(ostream &amp;os) const;\n};\n\nistream&amp; operator &gt;&gt;(istream &amp;is, MyClass &amp;cls);    \nostream&amp; operator &lt;&lt;(ostream &amp;os, const MyClass &amp;cls);\n\n#endif /* MyClass_h */\n</code></pre>\n\n<p>You can leave the definitions as-is in your <code>MyClass.cpp</code> file.</p>\n"}], "owner": {"reputation": 183, "user_id": 4171692, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cd14ae2d93103b2f9b69c9460d7c4978?s=128&d=identicon&r=PG&f=1", "display_name": "Lenny", "link": "https://stackoverflow.com/users/4171692/lenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "accepted_answer_id": 42821712, "answer_count": 1, "score": 2, "last_activity_date": 1489616644, "creation_date": 1489615961, "last_edit_date": 1489616526, "question_id": 42821684, "link": "https://stackoverflow.com/questions/42821684/using-cin-and-cout-to-populate-fields-of-a-class-c", "title": "Using cin &gt;&gt; and cout &lt;&lt; to populate fields of a class C++", "body": "<p>I have a class in <code>MyClass.h</code> defined like this:</p>\n\n<pre><code>#ifndef MyClass_h\n#define MyClass_h\n\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass MyClass {\npublic:\n    string input\n    void ReadFrom(istream &amp;is);\n    void WriteTo(ostream &amp;os) const;\n};\n#endif /* MyClass_h */\n</code></pre>\n\n<p><code>MyClass.cpp</code> looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"MyClass.h\"\n\nusing namespace std;\n\nvoid MyClass::ReadFrom(istream &amp;is) {\n    // put data into member 'input'\n}\n\nvoid MyClass::WriteTo(ostream &amp;os) const {\n    // output data in member 'input'\n}\n\nistream&amp; operator &gt;&gt;(istream &amp;is, MyClass &amp;cls) {\n    cls.ReadFrom(is);\n    return is;\n}\n\nostream&amp; operator &lt;&lt;(ostream &amp;os, const MyClass &amp;cls) {\n    cls.WriteTo(os);\n    return os;\n}\n</code></pre>\n\n<p><code>main.cpp</code> looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"MyClass.h\"\n\nusing namespace std;\n\nint main(int argc, const char * argv[]) {\n   MyClass c;\n   std::cout &lt;&lt; \"Enter some input\" &lt;&lt; endl;\n   std::cin &gt;&gt; c;\n   return 0;\n}\n</code></pre>\n\n<p>What I am trying to accomplish is to override the <code>&gt;&gt;</code> and <code>&lt;&lt;</code> operators so that <code>std::cin</code> can simply read data into the class member(s), and then <code>std::cout</code> can spit out all of the data in those members.</p>\n\n<p>I do not want to use <code>friend</code> functions.</p>\n\n<p>Right now, I am getting an error around the <code>std::cin &gt;&gt; c;</code> line that says:</p>\n\n<blockquote>\n  <p>Invalid operands to binary expression ('istream' (aka 'basic_istream&lt;char>') and 'MyClass')</p>\n</blockquote>\n"}, {"tags": ["c++", "pointers", "return", "destructor"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1489615998, "post_id": 42821639, "comment_id": 72755047, "body": "Names that begin with underscore-capitals are reserved for the implementation; your program has undefined behaviour."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1489616014, "post_id": 42821639, "comment_id": 72755054, "body": "This <code>_Object;</code>, along with all identifiers that begin with an underscore and an upper-case character, or ones that contain two consecutive underscores,  is reserved in C++ for the implementation. You are not allowed to create such names yourself. And names like <code>_Object</code> are quite likely to be used by the implementation."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1489616107, "post_id": 42821639, "comment_id": 72755105, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is <code>queue.InsertElement</code>? Also, I don&#39;t see any <code>delete</code>s being done, were they removed to create shorter example?"}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489616285, "post_id": 42821639, "comment_id": 72755174, "body": "@AlgirdasPreid\u017eius I apologize, I had a page refresh incident and the relevant functions (that I added after realizing they were obviously relevant) apparently weren&#39;t saved and I did not realize. I will edit and correct that."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489616416, "post_id": 42821639, "comment_id": 72755222, "body": "@KerrekSB I was unaware of this. It doesn&#39;t seem to be explicitly causing errors during compilation or runtime but I will change those immediately."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1489616505, "post_id": 42821639, "comment_id": 72755265, "body": "@Caboose: The wonders of not following the rules are that you don&#39;t necessarily get told your mistakes, until perhaps you have shipped a million units and the law suits start coming in. In that sense, programming C++ is a lot harder than taking maths tests in school :-("}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489616588, "post_id": 42821639, "comment_id": 72755298, "body": "@KerrekSB I suppose that is the folly of coming from languages like C#, where you are explicitly told when you are using disallowed naming conventions."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489617143, "post_id": 42821639, "comment_id": 72755522, "body": "Why all the manual memory management (<code>new</code>/<code>delete</code>)? Why not use smart pointers (<code>std::unique_ptr</code>/<code>std::shared_ptr</code>/<code>std::weak_ptr</code>)? Are you living in a pre-C++11 world?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1489617296, "post_id": 42821639, "comment_id": 72755585, "body": "C++ is a cut to the bone, you don&#39;t need it, you don&#39;t get charged world. End result is a nasty surprise lurking around every corner that you don&#39;t look around first. There is almost always no checking to make sure you didn&#39;t do something silly. For example, the default behaviour for running off the end of an array is &quot;Sucks to be you&quot;."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1489617534, "post_id": 42821639, "comment_id": 72755678, "body": "@user4581301 This is neither true nor helpful. There are reasons to use low-level fast languages like C and C++, and those missing checks can take time which many applications (games, video, robotics, device drivers, \u2026) simply cannot afford. Yes, in a lot of cases a higher-level language is the right tool for the job, but in a lot of cases it isn\u2019t. You don\u2019t know why the OP is trying to learn C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489617633, "post_id": 42821639, "comment_id": 72755721, "body": "&quot;C++ is a cut to the bone&quot;  tldr - I know nothing about C++."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489617664, "post_id": 42821639, "comment_id": 72755730, "body": "@JesperJuhl In short, I don&#39;t want to. This is something of an excercise born from curiosity. I want to know how to best handle raw pointers, and I seem to be seriously missing something here."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1489618045, "post_id": 42821639, "comment_id": 72755890, "body": "Why the cast in <code>*((PriorityPair&lt;T&gt;)(*queueArray[0]))._Object</code>? Your <code>queueArray</code> already holds elements of type <code>PriorityPair&lt;T&gt;</code>. Since I don&#39;t the <i>exact</i> reason for why it is happening I won&#39;t post the answer, but <i>the cast, itself, creates a temporary</i>. In addition, your example isn&#39;t still complete due to missing <code>IsEmpty</code>, <code>maxSize</code>, and <code>currentHeapSize</code>, but those additions were straightforward."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489618420, "post_id": 42821639, "comment_id": 72756069, "body": "@AlgirdasPreid\u017eius The casting seemed to be necessary to get the object. QueueArray holds elements of type <code>PriorityPair&lt;T&gt;*</code> not <code>PriorityPair&lt;T&gt;</code>. Could that be my problem?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489618785, "post_id": 42821639, "comment_id": 72756209, "body": "@Caboose <i>Seemed</i>, or <i>was</i>? Yes, <code>queueArray</code> is a pointer to <code>PriorityPair&lt;T&gt;*</code>, but <code>*queueArray[0]</code> is already of type <code>PriorityPair&lt;T&gt;</code>, since it contains 2 dereferences: <code>queueArray[0]</code> returns <code>PriorityPair&lt;T&gt;*</code>, and <code>*</code> at the front of the expression - dereferences it to <code>PriorityPair&lt;T&gt;</code>. And, with removed cast, your <code>return</code> statement may look like: <code>return *(*queueArray[0])._Object;</code>"}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489619025, "post_id": 42821639, "comment_id": 72756304, "body": "@AlgirdasPreid\u017eius I think I&#39;m having Intellisense issues. That does work (and fixes the multiple calls to the destructor) but without the cast it doesn&#39;t shop up with Intellisense. Now, why does the cast change the behaviour?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1489619123, "post_id": 42821639, "comment_id": 72756344, "body": "@DanielH It&#39;s mostly true and very helpful. I&#39;ll pass on defending &quot;Cut to the Bone&quot; since the existence of C proves my hyperbole wrong right there. I don&#39;t know why OP is learning C++. I don&#39;t need to know. But OP does need to know early that a lot of the knowledge they are bringing in from C# does not apply for the very reason you list: runtime hand-holding takes time. The volume of questions that can be distilled to &quot;Why wasn&#39;t an exception thrown over obvious programming error X?&quot; shows that people aren&#39;t born knowing this tidbit, program accordingly, and get nasty surprises."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1489619286, "post_id": 42821639, "comment_id": 72756407, "body": "@DanielH I&#39;m just having problems with the languages nuances :) I&#39;ve done my fair share of assembly language programming so I understand the concept of letting go of high-level language preconceptions."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489619317, "post_id": 42821639, "comment_id": 72756417, "body": "@Caboose And that&#39;s why I didn&#39;t post the answer :) I don&#39;t know the exact reason <i>why</i> it is happening, I just described <i>what</i> is happening."}], "answers": [{"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1489620778, "post_id": 42822502, "comment_id": 72756933, "body": "It&#39;s also worth noting that the current implementation only works if <code>nullptr</code> is convertible to your <code>T</code>. If you want the option to return something for an empty queue, just returning a <code>T*</code> (which may be <code>nullptr</code>) would make more sense."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "edited": false, "score": 0, "creation_date": 1489621034, "post_id": 42822502, "comment_id": 72757010, "body": "Thank you, this is the exact type of response I was looking to see. It seems a big part of my problem was just the Intellisense, but as a consequence I learned the implications of casting like that. The bit about returning T&amp; instead is also helpful and closer to what I intended to do. Can you comment on why it is better to use initializer lists? My naive guess was that they would behave no differently than my current implementation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1489621057, "post_id": 42822502, "comment_id": 72757013, "body": "Good breakdown. Question can&#39;t really be answered in its current state, but worth the upvote."}, {"owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1489621434, "post_id": 42822502, "comment_id": 72757144, "body": "@Useless I actually was curious about that. The behavior in C# is well defined and easy to understand/deal with when returning null, but less so here. I was sort of ignoring that until I dealt with my other more pressing issues."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1489622653, "post_id": 42822502, "comment_id": 72757507, "body": "Initializer lists are where the members and base classes are initially constructed. In the body, you\u2019re assigning the members, but they\u2019ve already been constructed; the old values are overwritten/deleted/whatever else is done in <code>operator=</code>. For POD types, default initialization does nothing and they\u2019re pretty much equivalent, but this isn\u2019t true of all types. If you have a type where default initialization does something expensive and the work will be thrown away when you assign in the body, it makes a big difference."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1489620274, "last_edit_date": 1489620274, "creation_date": 1489619827, "answer_id": 42822502, "question_id": 42821639, "link": "https://stackoverflow.com/questions/42821639/unexpected-destructor-call-when-returning-object-from-a-pointer/42822502#42822502", "title": "Unexpected destructor call when returning object from a pointer", "body": "<p>Aside from the names starting with an underscore, which as people have pointed out in the comments, your problem appears to be in the line <code>return *((PriorityPair&lt;T&gt;)(*queueArray[0]))._Object</code>. Let\u2019s look at this piece by piece, from the inside and working our way out.</p>\n\n<p><code>queueArray</code> is a <code>PriorityPair&lt;T&gt;**</code>, as declared in <code>PriorityQueue</code>. This could be read as \u201cpointer to pointer to <code>PriorityPair&lt;T&gt;</code>\u201d, but in your case it looks like you mean it to be \u201craw array of pointer to <code>PriorityPair&lt;T&gt;</code>\u201d, which is also a valid reading. So far so good.</p>\n\n<p><code>queueArray[0]</code> is a <code>PriorityPair&lt;T&gt;*&amp;</code>, or \u201creference to pointer to <code>PriorityPair&lt;T&gt;</code>\u201d. References are pretty invisible in C++, and this just means you\u2019re dealing with the actual first element of the array and not a copy. Again, this is a reasonable thing to ask for when trying to peek at the top of the queue.</p>\n\n<p><code>*queueArray[0]</code> is simply a <code>PriorityPair&lt;T&gt;&amp;</code>, or \u201creference to <code>PriorityPair&lt;T&gt;</code>\u201d. Again, the reference here just means you\u2019re dealing with the actual thing being pointed to by <code>queueArray[0]</code>, and not a copy.</p>\n\n<p><code>(PriorityPair&lt;T&gt;)(*queueArray[0])</code> is a <code>PriorityPair&lt;T&gt;</code>, the result of casting the one you already had to a new one. <strong>This creates a temporary <code>PriorityPair&lt;T&gt;</code>, which is the one you see destroyed later</strong>. There is no programmatic reason to do this cast (your IntelliSense issues are a different question and I don\u2019t know enough about VS to comment about them); it\u2019s already the right type. You can verify that it\u2019s a different one that\u2019s destroyed if you add <code>this</code> to the output, since <code>this</code> is a pointer to the current object and a temporary would need to live somewhere else in memory.</p>\n\n<p><code>((PriorityPair&lt;T&gt;)(*queueArray[0]))._Object</code> is a <code>T*</code>, or \u201cpointer to <code>T</code>\u201d. In fact, it points to the <code>T</code> that was stored for the top of the priority queue, which is good.</p>\n\n<p>And finally, the full expression <code>*((PriorityPair&lt;T&gt;)(*queueArray[0]))._Object</code> dereferences this to give a <code>T</code>, and the return statement returns a <em>copy of</em> that <code>T</code>. This isn\u2019t affecting the behavior you\u2019re seeing, but if you added destructor calls to the objects you tested with, it would. It would probably be more efficient to return a reference to the <code>T</code>, which would forgo the copying, by changing the return type from <code>T</code> to <code>T&amp;</code> or <code>T const&amp;</code>.</p>\n\n<p>Other issues I noticed, not related to this question, which you might find useful when learning C++ (not a comprehensive list; I mostly wasn\u2019t looking for these):</p>\n\n<ul>\n<li>Both of your constructors should use <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">initializer lists</a> and have empty bodies (yes, <code>new</code> expressions can go in initializer lists, I think literally everybody I\u2019ve spoken to about it either asked this the first time or assumed incorrectly, including me). This will somewhat more efficient and much more idiomatic.</li>\n<li>You don\u2019t need to implement a destructor for the <code>PriorityPair</code> (except for learning the nuances of the language); it\u2019s what\u2019s known as a Plain Old Data (POD) type. If you wanted the <code>PriorityPair</code>\u2019s destruction to <code>delete</code> the <code>T</code>s you would need that, but you want the <code>T</code>s to be managed completely separately.</li>\n<li>As people pointed out in the comments, <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow noreferrer\">you aren\u2019t allowed to use those identifier names yourself</a> in case the compiler or standard library want them. This <em>might</em> be fine, it <em>might</em> cause problems for you at compile time, or it <em>might</em> appear to work correctly but send all your users\u2019 browser history and emails to their parents and/or employers. That last is unlikely, but the C++ standard doesn\u2019t forbid it; this is what undefined behavior means. Other allowed behaviors are creating a black hole to destroy the Earth and <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">shooting demons out of your nose</a>, but these are even less likely in practice.</li>\n<li>I <em>think</em> like you have the destructor logic for <code>PriorityQueue</code> correct, and it\u2019s easy to mess that sort of thing up. Congratulations!</li>\n</ul>\n"}], "owner": {"reputation": 409, "user_id": 2767100, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Hzozm.png?s=128&g=1", "display_name": "Caboose", "link": "https://stackoverflow.com/users/2767100/caboose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 42822502, "answer_count": 1, "score": 1, "last_activity_date": 1489620274, "creation_date": 1489615814, "last_edit_date": 1489617763, "question_id": 42821639, "link": "https://stackoverflow.com/questions/42821639/unexpected-destructor-call-when-returning-object-from-a-pointer", "title": "Unexpected destructor call when returning object from a pointer", "body": "<p>I'm trying to recreate a priority queue implementation I made in C# to C++ as a project to jump into C++ with, but a lot of the nuance is tripping me up. The queue is designed as a template to work on any given class T. The queue will explicitly work with a struct representing objects called Priority Pairs: a pointer to a T object and an associated priority value (int).</p>\n\n<p>The goal of this is to allow the actual objects (the T's) being compared in the queue to be completely separate and only ever be pointed to. I probably don't explicitly need the struct to accomplish this but this is how I'm doing it.</p>\n\n<p>The important bits from the queue implementation:</p>\n\n<pre><code>template &lt;class T&gt;\nclass PriorityQueue\n{\npublic:\n    PriorityQueue(const int maxSizeIn)\n    {\n        maxSize = maxSizeIn;\n        queueArray = new PriorityPair&lt;T&gt;*[maxSize];\n        currentHeapSize = 0;\n    }\n    ~PriorityQueue()\n    {\n        cout &lt;&lt; \"Destroy Queue with size: \" &lt;&lt; currentHeapSize &lt;&lt; endl;\n        for (int i = 0; i &lt; currentHeapSize; i++)\n        {\n            delete (PriorityPair&lt;T&gt;*)queueArray[i];\n        }\n        delete[] queueArray;\n}\nprivate:\n    PriorityPair&lt;T&gt;** queueArray;\n</code></pre>\n\n<p>The Struct for PriorityPair:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct PriorityPair\n{\n    PriorityPair(int valueIn, T* objectIn)\n    {\n        _PriorityValue = valueIn;\n        _Object = objectIn;\n    };\n\n    ~PriorityPair()\n    {\n         cout &lt;&lt; \"Destroy Pair for object :(\" &lt;&lt; *_Object &lt;&lt; \"):  &lt;&lt; endl;\n    }\n\n    int _PriorityValue;\n    T* _Object;\n};\n</code></pre>\n\n<p>During the course of my testing, I've found that calling my PeekTop method seems to cause a PriorityPair to have its destructor called. My best guess is that I am accidentally creating a temporary one due to a failure to understand some nuance of the language.</p>\n\n<p>Here's the peek method:</p>\n\n<pre><code>    T PeekTop()\n    {\n        if (IsEmpty())\n            return nullptr;\n        else\n            return *((PriorityPair&lt;T&gt;)(*queueArray[0]))._Object; \n    }\n</code></pre>\n\n<p>Additionally, here is the insert operation (minimally effective insert, does no heap/queue operations):</p>\n\n<pre><code>    int InsertElement(PriorityPair&lt;T&gt;* elementIn)\n    {\n        //do not insert nulls --\n        if (elementIn == nullptr)\n            return -2;\n        //we could user std::vector or manually expand the array, but a hard max is probably sufficient\n        if (currentHeapSize == maxSize)\n        {\n            return -1;\n        }\n        //insert the pointer to the new pair element in at the index corresponding to the current size, then increment the size\n        queueArray[currentHeapSize++] = elementIn;\n        return 0;\n    }\n</code></pre>\n\n<p>In the main I have the following:</p>\n\n<pre><code>PriorityQueue&lt;string&gt; queue = PriorityQueue&lt;string&gt;(10);\nstring s1 = \"string1\";\nint code = queue.InsertElement(new PriorityPair&lt;string&gt;(5, &amp;s1));\nstring i = queue.PeekTop();\ncout &lt;&lt; \"-------\\n\";\ncout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>This appears to work, insofar that it does insert the element correctly, but I don't understand if that new pair is behaving as I intend it to. When I run the code the destructor for my Priority Pair is getting called twice. This happens specifically when the function PeekTop is called. Once during the queue's lifetime and once when the queue goes out of scope and is destroyed.</p>\n\n<p>Here is the output from the above code:</p>\n\n<pre><code>Code: 0\nDestroy Pair for object :(string1): with priority :(5):\n-------\nstring1\nDestroy Queue with size: 1\nDestroy Pair for object :(): with priority :(5):\n</code></pre>\n\n<p>The first destructor call shows the string correctly with its value, but in the second we can see that the string itself has gone out of scope (which is fine and expected).</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 15683, "user_id": 46571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/79eede5b02caa81db17f34026b24a734?s=128&d=identicon&r=PG", "display_name": "pyon", "link": "https://stackoverflow.com/users/46571/pyon"}, "edited": false, "score": 0, "creation_date": 1489618311, "post_id": 42821606, "comment_id": 72756013, "body": "Other people have already explained the errors in your code. I&#39;d just like to add that using iterators is nicer and avoids those pesky potential off-by-one errors: <a href=\"http://ideone.com/rufVTp\" rel=\"nofollow noreferrer\">ideone.com/rufVTp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1469, "user_id": 471736, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1pGyS.gif?s=128&g=1", "display_name": "Dronz", "link": "https://stackoverflow.com/users/471736/dronz"}, "is_accepted": false, "score": 0, "last_activity_date": 1489616764, "last_edit_date": 1489616764, "creation_date": 1489615870, "answer_id": 42821653, "question_id": 42821606, "link": "https://stackoverflow.com/questions/42821606/beginner-whats-wrong-with-my-produce-word-backwards-program/42821653#42821653", "title": "Beginner - What&#39;s wrong with my &quot;produce word backwards&quot; program?", "body": "<p>You're missing any kind of code to display the reversed string. You only reversed it in memory.</p>\n\n<p>Try adding something to display the text after you reverse it, such as </p>\n\n<pre><code>cout &lt;&lt; wordbackw;\n</code></pre>\n\n<p>Oh, well and also your word swapping code looks backwards in a couple of ways. You load it into word but then try to set word to the reverse of wordbackw, which is empty. Also the indexing looks off - you're assigning locations in an empty string, and you're indexing forwards through the source string rather than backwards. So you'd want to do something more like:</p>\n\n<pre><code>for (int i = size - 1; i &gt;= 0 ; i--)\n    wordbackw += word[i];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7717752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9d32eb47def85ca112f3a5995aebca?s=128&d=identicon&r=PG&f=1", "display_name": "hiro", "link": "https://stackoverflow.com/users/7717752/hiro"}, "edited": false, "score": 0, "creation_date": 1489617943, "post_id": 42821670, "comment_id": 72755852, "body": "Could you demonstrate what you mean by your second point? Also, I did   wordbackw[i] = word[size-1-i];  instead of   word[size-1-i] = wordbackw[i]; , which seemed to have fixed it. Just flipped the two."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 21, "user_id": 7717752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9d32eb47def85ca112f3a5995aebca?s=128&d=identicon&r=PG&f=1", "display_name": "hiro", "link": "https://stackoverflow.com/users/7717752/hiro"}, "edited": false, "score": 0, "creation_date": 1489624087, "post_id": 42821670, "comment_id": 72757884, "body": "@hiro yes, but flip the two is not sufficient you need a wordbackw.resize(word.size()) before starting the loop. If you don&#39;t do this wordbackw would remain an empty string and accessing an element with indexing would be undefined behavior"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1489616343, "last_edit_date": 1489616343, "creation_date": 1489615916, "answer_id": 42821670, "question_id": 42821606, "link": "https://stackoverflow.com/questions/42821606/beginner-whats-wrong-with-my-produce-word-backwards-program/42821670#42821670", "title": "Beginner - What&#39;s wrong with my &quot;produce word backwards&quot; program?", "body": "<p>You must first resize <code>wordbackw</code> to the same size as <code>word</code>:</p>\n\n<ul>\n<li><p>You could either initialize <code>wordbackw = word;</code> before the loop and print out the result in <code>word</code>.</p></li>\n<li><p>Or you could resize <code>wordbackw</code> before the loop and copy <code>word</code> letters to <code>wordbackw</code> letters (you do the oposite for now), and display the result in <code>wordbackw</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1489617593, "last_edit_date": 1489617593, "creation_date": 1489616044, "answer_id": 42821699, "question_id": 42821606, "link": "https://stackoverflow.com/questions/42821606/beginner-whats-wrong-with-my-produce-word-backwards-program/42821699#42821699", "title": "Beginner - What&#39;s wrong with my &quot;produce word backwards&quot; program?", "body": "<p>The object <code>wordbackw</code> is empty. So you may not apply the subscript operator for the object. Also you should at least exchange the operands in this statement </p>\n\n<pre><code>word[size-1-i] = wordbackw[i];\n</code></pre>\n\n<p>provided that the operands will be written correctly.</p>\n\n<p>You could write instead of this code snippet</p>\n\n<pre><code>int size = word.size();\n\nfor (int i = 0; i &lt; size ; i++)\n    word[size-1-i] = wordbackw[i];\n</code></pre>\n\n<p>the following</p>\n\n<pre><code>wordbackw.reserve( word.size() );\n\nfor ( auto i = word.size(); i != 0 ; i-- )\n    wordbackw.push_back( word[i - 1] );\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>wordbackw.reserve( word.size() );\n\nfor ( auto i = word.size(); i != 0 ; i-- )\n    wordbackw += word[i - 1];\n</code></pre>\n\n<p>Or you could do the same without using the loop. For example</p>\n\n<pre><code>wordbackw.assign( word.rbegin(), word.rend() );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2325, "user_id": 1952879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c0d1e907a5506a461719a612a5ae21?s=128&d=identicon&r=PG", "display_name": "hmatar", "link": "https://stackoverflow.com/users/1952879/hmatar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489616415, "creation_date": 1489616415, "answer_id": 42821785, "question_id": 42821606, "link": "https://stackoverflow.com/questions/42821606/beginner-whats-wrong-with-my-produce-word-backwards-program/42821785#42821785", "title": "Beginner - What&#39;s wrong with my &quot;produce word backwards&quot; program?", "body": "<p>Two issues:</p>\n\n<ol>\n<li><p>You are overriding the input that you read with non-existent characters when you do <code>word[size-1-i] = wordbackw[i];</code> try doing <code>wordbackw.push_back(word[size-1-i]);</code></p></li>\n<li><p>You are not printing anything to the standard output after reading. Do this\n<code>cout &lt;&lt; wordbackw &lt;&lt; endl;</code></p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 7717752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9d32eb47def85ca112f3a5995aebca?s=128&d=identicon&r=PG&f=1", "display_name": "hiro", "link": "https://stackoverflow.com/users/7717752/hiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1489617593, "creation_date": 1489615708, "last_edit_date": 1489616601, "question_id": 42821606, "link": "https://stackoverflow.com/questions/42821606/beginner-whats-wrong-with-my-produce-word-backwards-program", "title": "Beginner - What&#39;s wrong with my &quot;produce word backwards&quot; program?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    string word, wordbackw;\n\n    getline(cin, word);\n    int size = word.size();\n\n    for (int i = 0; i &lt; size ; i++)\n        word[size-1-i] = wordbackw[i];\n\n    cout &lt;&lt; wordbackw &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The only thing that appears in the cmd is my input.</p>\n\n<p>Thanks for any help.</p>\n\n<p>EDIT: Sorry, forgot to add cout to the code.</p>\n"}, {"tags": ["c++", "opengl", "glut"], "comments": [{"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1489615575, "post_id": 42821537, "comment_id": 72754849, "body": "It looks like you are using old OpenGL, I suggest using modern OpenGL(3.2+) instead."}, {"owner": {"reputation": 21, "user_id": 7704899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/caciu.png?s=128&g=1", "display_name": "Engie", "link": "https://stackoverflow.com/users/7704899/engie"}, "reply_to_user": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1489618070, "post_id": 42821537, "comment_id": 72755901, "body": "Just checked, I&#39;m running 4.4. Do you mean my version of glut is out of date?"}, {"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1489622425, "post_id": 42821537, "comment_id": 72757446, "body": "With OpenGL version I mean the version you are using in the code. Have a look in your rendering function. glBegin() and glEnd() are deprecated in newer versions of OpenGL."}, {"owner": {"reputation": 21, "user_id": 7704899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/caciu.png?s=128&g=1", "display_name": "Engie", "link": "https://stackoverflow.com/users/7704899/engie"}, "reply_to_user": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1489624122, "post_id": 42821537, "comment_id": 72757893, "body": "Thanks for the help but that wasn&#39;t the problem."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7704899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/caciu.png?s=128&g=1", "display_name": "Engie", "link": "https://stackoverflow.com/users/7704899/engie"}, "is_accepted": true, "score": 1, "last_activity_date": 1489624183, "creation_date": 1489624183, "answer_id": 42823239, "question_id": 42821537, "link": "https://stackoverflow.com/questions/42821537/why-isnt-my-icosahedron-drawing/42823239#42823239", "title": "Why isn&#39;t my Icosahedron drawing?", "body": "<p>My apologies everyone, I forgot to glFlush(); after I finished drawing.</p>\n"}], "owner": {"reputation": 21, "user_id": 7704899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/caciu.png?s=128&g=1", "display_name": "Engie", "link": "https://stackoverflow.com/users/7704899/engie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 42823239, "answer_count": 1, "score": 0, "last_activity_date": 1489672584, "creation_date": 1489615438, "last_edit_date": 1489672584, "question_id": 42821537, "link": "https://stackoverflow.com/questions/42821537/why-isnt-my-icosahedron-drawing", "title": "Why isn&#39;t my Icosahedron drawing?", "body": "<p>For reference I'm using <a href=\"http://www.opengl.org.ru/docs/pg/0208.html\" rel=\"nofollow noreferrer\">this</a> guide.</p>\n\n<p>I've gone over several guides including one that almost had the answer I was looking for.</p>\n\n<p>I'm trying to draw an Icosahedron (an approximation on a sphere), as soon as I figure out why I'm not drawing I'll subdivide it so that I can progress from drawing with 20 triangles to 80 and then to 320 but currently I'm just trying to draw one with 20 sides.</p>\n\n<p>I've gone through debugging and really can't see what's wrong with the program, all variables have the right values when they encounter a function.</p>\n\n<p>Here's my program:</p>\n\n<pre><code>#define _USE_MATH_DEFINES\n#define X .525731112119133606f\n#define Z .850650808352039932f\n#define N 0.0f\n#include &lt;glut.h&gt;\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace std;\n\n\nGLsizei winWidth = 1000, winHeight = 1000;\n\nstatic GLfloat vdata[12][3] = {\n    { -X,N,Z },{ X,N,Z },{ -X,N,-Z },{ X,N,-Z },\n    { N,Z,X },{ N,Z,-X },{ N,-Z,X },{ N,-Z,-X },\n    { Z,X,N },{ -Z,X, N },{ Z,-X,N },{ -Z,-X, N }\n};\n\nstatic GLuint tindices[20][3] = {\n    { 0,4,1 },{ 0,9,4 },{ 9,5,4 },{ 4,5,8 },{ 4,8,1 },\n    { 8,10,1 },{ 8,3,10 },{ 5,3,8 },{ 5,2,3 },{ 2,7,3 },\n    { 7,10,3 },{ 7,6,10 },{ 7,11,6 },{ 11,0,6 },{ 0,1,6 },\n    { 6,1,10 },{ 9,0,11 },{ 9,11,2 },{ 9,2,5 },{ 7,2,11 } \n};\n\ndouble randFrac() {\n    return (double)rand() / RAND_MAX;\n}\n\nvoid init(void){\n    glClearColor(1.0, 1.0, 1.0, 0.0); // White display window.\n}\n\nvoid drawTriangle(float* v1, float* v2, float* v3) {\n    glBegin(GL_TRIANGLES);\n        glNormal3fv(v1);\n        glVertex3fv(v1);\n        glNormal3fv(v2);\n        glVertex3fv(v2);\n        glNormal3fv(v3);\n        glVertex3fv(v3);\n    glEnd();\n}\n\nvoid normalize(float v[3]) {\n    GLfloat d = sqrt(v[0] * v[0] + v[1] * v[1] + v[1] * v[2]);\n    if (!d) {\n        cerr &lt;&lt; \"VECTOR HAS LENGTH OF ZERO\";\n        return;\n    }\n    v[0] /= d;\n    v[1] /= d;\n    v[2] /= d;\n}\nvoid subdivide(float* v1, float* v2, float* v3, long depth) {\n    GLfloat v12[3],v23[3], v31[3];\n\n    if (!depth) {\n        drawTriangle(v1, v2, v3);\n        return;\n    }\n\n    for (GLint i = 0; i &lt; 3; i++) {\n        v12[i] = (v1[i] + v2[i]) / 2.0;\n        v23[i] = (v2[i] + v3[i]) / 2.0;\n        v31[i] = (v1[i] + v3[i]) / 2.0;;\n    }\n    normalize(v12);\n    normalize(v23);\n    normalize(v31);\n    subdivide(v1, v12, v31, depth - 1);\n    subdivide(v2, v23, v12, depth - 1);\n    subdivide(v3, v31, v23, depth - 1);\n    subdivide(v12, v23, v31, depth - 1);\n}\n\nvoid drawIcosahedrons() {\n    glClear(GL_COLOR_BUFFER_BIT); // Clear display window.\n    glColor3f(0.0, 0.0, 1.0); // Set line color to blue.\n                              /* Set viewing transformation. */\n    gluLookAt(5.0, 5.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);\n\n    for (int i = 0; i &lt; 20; i++) {\n        glColor3f(randFrac(), randFrac(), randFrac());  // set sides to random color\n        drawTriangle(&amp;vdata[tindices[i][0]][0], &amp;vdata[tindices[i][1]][0], &amp;vdata[tindices[i][2]][0]);\n    }\n}\n\nvoid winReshapeFcn(GLint newWidth, GLint newHeight) {\n    glViewport(0, 0, newWidth, newHeight);\n    glMatrixMode(GL_PROJECTION);\n    glFrustum(-1.0, 1.0, -1.0, 1.0, 2.0, 20.0);\n    glMatrixMode(GL_MODELVIEW);\n    glClear(GL_COLOR_BUFFER_BIT);\n}\n\nvoid main (int argc, char** argv){\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowPosition (100, 100);\n    glutInitWindowSize (winWidth, winHeight);\n    glutCreateWindow (\"title\");\n    init();\n    glutDisplayFunc (drawIcosahedrons);\n    glutReshapeFunc (winReshapeFcn);\n    glutMainLoop();\n}\n</code></pre>\n"}, {"tags": ["c++", "object", "initializer-list"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1489615000, "post_id": 42821386, "comment_id": 72754582, "body": "Post compilable code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1489615179, "post_id": 42821386, "comment_id": 72754658, "body": "<code>Book&amp; operator=(const Book&amp; old)</code> and <code>Book(const Book&amp; old);</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489615441, "post_id": 42821386, "comment_id": 72754784, "body": "Your title is misleading.  There is no loop in the <i>initializer list</i>.  There is a loop in the <i>constructor</i>.  The initializer list is: <code>: size { list.size() }</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489615744, "post_id": 42821386, "comment_id": 72754927, "body": "You have a <b>really</b> weird copy constructor."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 0, "last_activity_date": 1489615850, "creation_date": 1489615850, "answer_id": 42821650, "question_id": 42821386, "link": "https://stackoverflow.com/questions/42821386/loop-for-in-range-of-initializer-list/42821650#42821650", "title": "Loop for in range of initializer_list", "body": "<p>The iterator of an <code>std::initializer_list&lt;T&gt;</code> is <code>const T*</code>, so the range-based loop produces values of <code>const T</code>, or in your case, <code>const Book</code>.</p>\n\n<p>Your class <code>Book</code> is however <em>not</em> constructible from constant values, since both its copy and its move constructor require mutable values.</p>\n\n<p>You either cannot use an initializer list to communicate a list of <code>Book</code>s, or you need to redesign your class so that it can be constructed from a constant value.</p>\n"}], "owner": {"reputation": 327, "user_id": 5107857, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/44e7f2a92981accc0db1fc785d7462bf?s=128&d=identicon&r=PG&f=1", "display_name": "Yas", "link": "https://stackoverflow.com/users/5107857/yas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1355, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1489615850, "creation_date": 1489614771, "question_id": 42821386, "link": "https://stackoverflow.com/questions/42821386/loop-for-in-range-of-initializer-list", "title": "Loop for in range of initializer_list", "body": "<pre><code>Library::Library(std::initializer_list&lt;Book&gt; list) \n    : size{ list.size() }\n{\n    std::size_t i = 0;\n    for (Book b : list)\n    {\n       insertBook(actual, b);\n       actual = next(actual);\n       size++;\n    }\n}\n</code></pre>\n\n<p>And errors:</p>\n\n<blockquote>\n  <p>'initializing': cannot convert from 'const Book' to 'Book'</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>Cannot copy construct class 'Book' due to ambiguous copy constructors or no\n  available copy constructor</p>\n</blockquote>\n\n<p>My book.h constructors</p>\n\n<pre><code>Book();\nBook&amp; operator=(Book&amp; old);\nBook&amp; operator=(Book&amp;&amp; old);\nBook(std::string&amp; author, std::string&amp; title) :author(author), title(title)\n{\n    std::cout &lt;&lt; \"l-Referencja\" &lt;&lt; std::endl;\n}\nBook(std::string&amp;&amp; author, std::string&amp;&amp; title) :author(author), title(title) \n{\n    std::cout &lt;&lt; \"r-Referencja\" &lt;&lt; std::endl;\n}\nBook(Book&amp; old);\nBook(Book&amp;&amp; old);\n</code></pre>\n"}, {"tags": ["c++", "arrays", "int", "find", "qt-creator"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489614728, "post_id": 42821307, "comment_id": 72754450, "body": "We have some issues with reading links."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1489614825, "post_id": 42821307, "comment_id": 72754491, "body": "In addition to cplusplus.com, your C++ book will also have a description of <code>std::find</code>. If you are unable to understand that explanation at all, what makes you think that any explanation you get here will be more understandable to you? If there&#39;s something specific about the description of <code>std::find</code>, and its parameter, then you need to explain exactly what you are unclear about."}, {"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "edited": false, "score": 0, "creation_date": 1489614897, "post_id": 42821307, "comment_id": 72754524, "body": "@NeilButterworth at least the links are working properly so just answer the question if you have any ideas or don&#39;t show us how smart you can be in the comments section."}, {"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489614947, "post_id": 42821307, "comment_id": 72754549, "body": "@SamVarshavchik my question is about the second argument as i wrote in the question."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1489615101, "post_id": 42821307, "comment_id": 72754624, "body": "@XTard -- The problem with those links (now corrected by actual posting of the code) is that the links may not be permanent, thus making this question useless to persons linking to this thread in the future."}, {"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489615228, "post_id": 42821307, "comment_id": 72754678, "body": "@PaulMcKenzie yeah paul, i understand this and i tried to avoid that, but i had issues, i am pretty new in writing questions in www.stackoverflow.com. Thanks for the comment."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489615297, "post_id": 42821307, "comment_id": 72754717, "body": "As to your question, the <code>std::find</code> link (which is not the best site for a C++ reference, but that&#39;s another thing) says this:  <i>Input iterators to the initial and final positions in a sequence.</i> -- So what in that descriptions is not understandable?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489615307, "post_id": 42821307, "comment_id": 72754723, "body": "@XTard: Why don&#39;t you spend a few days browsing this website and observing how questions progress (noting in particular how successful questions evolve), so you get a feel for how to best approach this site."}, {"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489615614, "post_id": 42821307, "comment_id": 72754869, "body": "@KerrekSB well i really often use the Stacks for information about many things and fully read both the questions and the answers. But once again, i got issues, i know what do you mean, and i will improve, that&#39;s my first question. I believe comments of such kind won&#39;t really help answering my question (i am not talking only about your comment, nothing personal), however thanks for the advice. :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489615811, "post_id": 42821307, "comment_id": 72754962, "body": "@XTard  Once you figure out <code>std::find</code>, note that this way of filling an array with unique numbers is inefficient.  Imagine if the number of numbers was 1,000 instead of 10 numbers.  Think of using <code>std::set&lt;int&gt;</code>,  where you simply just keep looping, inserting random numbers into it, until the set reaches the size you&#39;re looking for.  Then that set has unique numbers without basically any effort, and is much more efficient than using <code>std::find</code> each time on an array."}], "answers": [{"comments": [{"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489615569, "post_id": 42821512, "comment_id": 72754846, "body": "Doesn&#39;t it go up to: <code>randNums + 3</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489615709, "post_id": 42821512, "comment_id": 72754914, "body": "@ABusyProgrammer: The end is always one past the last location.  So the end of the sequence is <code>randNums + 4</code>.  The sequence is <code>randNums[0]</code> through <code>randNums[3]</code> inclusive because <code>randNums[4]</code> is past the last slot to be searched."}, {"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "edited": false, "score": 0, "creation_date": 1489616100, "post_id": 42821512, "comment_id": 72755100, "body": "@Thomas Matthews got your point too, really liked your explanation it&#39;s pretty clear. Thanks for the answer. Have a nice day :)"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1489615329, "creation_date": 1489615329, "answer_id": 42821512, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly/42821512#42821512", "title": "C++ how to use std::find properly", "body": "<p>The <code>std::find</code> function that you are using has 3 parameters:</p>\n\n<ol>\n<li>Pointer (iterator) to beginning of sequence,</li>\n<li>Pointer (iterator) to end of sequence (last slot + 1)</li>\n<li>Value to find.</li>\n</ol>\n\n<p>The example you state:<br>\n<code>std::find(randNums, randNums + 4, newRandNum);</code></p>\n\n<p>is searching from:<br>\nThe beginning of the sequence (<code>randNums</code>),<br>\nThe end of the sequence (<code>randNums + 4</code>) or 4 positions after the beginning,<br>\nfor the value <code>newRandNum</code>.  </p>\n\n<p>Search also for: <em>pointer arithmetic</em>, <em>iterator addition</em>.  </p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 7677564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff1196acf11657c53961f94f370745b?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ubc94\uc11d", "link": "https://stackoverflow.com/users/7677564/%ec%b5%9c%eb%b2%94%ec%84%9d"}, "is_accepted": false, "score": 0, "last_activity_date": 1489615395, "creation_date": 1489615395, "answer_id": 42821530, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly/42821530#42821530", "title": "C++ how to use std::find properly", "body": "<p>you can initialize the randNum list with -1.</p>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1489617368, "last_edit_date": 1489617368, "creation_date": 1489615463, "answer_id": 42821544, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly/42821544#42821544", "title": "C++ how to use std::find properly", "body": "<p>From the reference:\nfirst, last\nInput iterators to the initial and final positions in a sequence. The range searched is [first,last), which contains all the elements between first and last, including the element pointed by first <strong>but not the element pointed by last.</strong></p>\n\n<p>I could be mistaken, but I have a hunch it's the last part (in bold) that's confusing you a bit.  The \"last\" position is EXclusive, so, it will not be searched.</p>\n\n<p>For your 4 element array, therefore:\nto search elements 0,1,2,and 3, you want a range of [0,4) (notice the paren instead of the bracket - exclusion vs inclusion, respectively)</p>\n\n<p><strong>Edited to add</strong>: as for the second part - that's just an initialization issue, I would imagine your int[4], is created with 4 zeroes...</p>\n\n<p>If you want to avoid that, you'll have to keep track of what you've loaded, and only search the valid range.  Of course, your first rand() would need to be put to [0], if you follow</p>\n"}, {"comments": [{"owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "edited": false, "score": 0, "creation_date": 1489616016, "post_id": 42821559, "comment_id": 72755057, "body": "@A Busy Programmer got your point too. Thanks for the answer. Have a nice day :)"}], "tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1489615515, "creation_date": 1489615515, "answer_id": 42821559, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly/42821559#42821559", "title": "C++ how to use std::find properly", "body": "<blockquote>\n  <p><em>The range searched is [first,last), which contains all the elements between first and last, including the element pointed by first but not the element pointed by last.</em> - <a href=\"http://www.cplusplus.com/reference/algorithm/find/\" rel=\"nofollow noreferrer\">std::find</a></p>\n</blockquote>\n\n<p>The last is the number of elements that will be searched in the array for the value in a standard <code>std::find</code> function like:</p>\n\n<pre><code>std::find(randNums, randNums + 4, newRandNum);\n</code></pre>\n\n<p>The range specified here is from the first element in <code>randNums</code> to <code>randNums + 4 - 1</code>. This means that the value <code>newRandNum</code> will be searched between the start of <code>randNums</code> and <code>randNums + 3</code>, including these 2 values.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "is_accepted": false, "score": 0, "last_activity_date": 1493043283, "creation_date": 1493043283, "answer_id": 43590493, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly/43590493#43590493", "title": "C++ how to use std::find properly", "body": "<p>Found the answer of the second question. I should set randNums's content to a integer which is different than 0-9.</p>\n"}], "owner": {"reputation": 56, "user_id": 7020946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e62268cb5d4a851f24b1304c117d1a?s=128&d=identicon&r=PG&f=1", "display_name": "XTard", "link": "https://stackoverflow.com/users/7020946/xtard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 42821544, "answer_count": 5, "score": -2, "last_activity_date": 1493043283, "creation_date": 1489614456, "last_edit_date": 1489614847, "question_id": 42821307, "link": "https://stackoverflow.com/questions/42821307/c-how-to-use-stdfind-properly", "title": "C++ how to use std::find properly", "body": "<p>I got a question about one article in www.cplusplus.com and exactly about <a href=\"http://www.cplusplus.com/reference/algorithm/find/\" rel=\"nofollow noreferrer\">std::find</a> which is function from the Algorithm library. Here is my code.</p>\n\n<p>Code in randnum.cpp:</p>\n\n<pre><code>#include \"randnum.h\"\n\nvoid randNum (char timeATM)\n{\n    int *p, newRandNum;\n\n    srand (timeATM);\n\n    for (int i = 0; i &lt; 4; i++)\n    {\n        newRandNum = rand() % 10;\n        p = std::find(randNums, randNums + 4, newRandNum);\n        if (p != randNums + 4)\n        {\n            std::cout &lt;&lt; \"!found! at \" &lt;&lt; i + 1 &lt;&lt; \"| num \" &lt;&lt; *p &lt;&lt; std::endl;\n            i = i - 1;\n        }\n        else\n        {\n            randNums[i] = Nums[newRandNum];\n            std::cout &lt;&lt; \"all ok; at \" &lt;&lt; i + 1 &lt;&lt; \"| num \" &lt;&lt; randNums[i] &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>Code in randnum.h:</p>\n\n<pre><code>#ifndef RANDNUM_H\n#define RANDNUM_H\n\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint Nums [10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\nint randNums [4];\n\n#endif // RANDNUM_H\n</code></pre>\n\n<p>So the question is what the second argument <code>randNums + 4</code> in the function <code>std::find(randNums, randNums + 4, newRandNum);</code> does?<br></p>\n\n<p>Also the idea of this piece of code is to generate one number from 0 to 9 and make sure there aren't any doubled numbers, for example the number three isn't used 2 times. But i saw that when the first generated number of the array (randNums[0]) is zero, the program decides that there is already a zero in the string so it skips it and generates another number. Can you explain me why does this happen and how to fix it?</p>\n\n<p>www.cplusplus.com was supposed to be link, but i am limited only to two links.. so.. sorry. And sorry for any mistakes within the code and the question.</p>\n"}, {"tags": ["c++", "ruby"], "comments": [{"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 1, "creation_date": 1489614342, "post_id": 42821224, "comment_id": 72754271, "body": "I really like #2.  Put it in some sort of globals.json file, include the json lib in C++ (or roll out your own solution).  I don&#39;t know of an easier way, let alone a way to share vectors and matrices as full types."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489614419, "post_id": 42821224, "comment_id": 72754306, "body": "@Bango Yeah, I&#39;m definitely leaning towards #2. Just wasn&#39;t sure if I was being crazy and there was something obvious I could do without too much &quot;glue code&quot;."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614443, "post_id": 42821224, "comment_id": 72754320, "body": "Search for &quot;ruby c++ bindings&quot;"}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614492, "post_id": 42821224, "comment_id": 72754347, "body": "@nwp Isn&#39;t that option #1?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1489614688, "post_id": 42821224, "comment_id": 72754433, "body": "@aardvarkk Maybe. A library is supposed to minimize the boiler plate though, so you might want to pick a different library if your complaint is the boiler plate."}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489615435, "post_id": 42821224, "comment_id": 72754782, "body": "Library is supposed to create the glue for you, minimizing how sticky your hands have to get.  JSON in this case is a light glue for storing string objects, but you have to get your fingers a little sticky if you want them to become C++ types, which is also coincidentally the minimal stickiness of any option I can think of."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 1, "creation_date": 1489646620, "post_id": 42821224, "comment_id": 72764455, "body": "IMHO, this problem better to solve with a code generator."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1489675112, "post_id": 42821224, "comment_id": 72783275, "body": "Yeah. After spending some time trying to get a map and vector type working, I ended up writing a shell script to generate both a C++ header file and a Ruby file instead. Although my first solution was fun and quirky, the second is probably more realistic. I will add another answer showing that shell script."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1489622433, "post_id": 42822579, "comment_id": 72757452, "body": "While this works, it&#39;s proably too clever by half. Since C++ often involves a build process involving something akin to a <code>Makefile</code>, and since you&#39;re using Ruby, it&#39;d make more sense for your Ruby code to consume some kind of config file, JSON perhaps, and emit a <code>.h</code> or <code>.cpp</code> file that handles the definitions. That way one change to your JSON impacts both code-bases properly, no need to do any fancy <code>#ifdef</code> junk."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1489675176, "post_id": 42822579, "comment_id": 72783320, "body": "@tadman Per your suggestion I ended up writing a shell script to generate a C++ header file and a Ruby script containing the constants. That way it was much easier to make it work with arbitrary types. I&#39;ll paste the contents of that script as another answer."}], "tags": [], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "is_accepted": false, "score": 0, "last_activity_date": 1489622172, "last_edit_date": 1489622172, "creation_date": 1489620173, "answer_id": 42822579, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby/42822579#42822579", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>OK -- after a lot of experimentation I came up with the following hack! And a pretty epic hack, if you ask me!</p>\n\n<p>It will allow me to define enum types and integers in a <strong>single common file</strong> shared by both Ruby and C++. SharedTypes.h is both valid Ruby and C++!</p>\n\n<p><strong>SharedTypes.h</strong></p>\n\n<pre><code>#if 0\n%q|\n#else\nenum MyEnum {\n#endif\n#if 0\n|\n#else\n#endif\n\nFOO = 0,\nBAR = 1\n\n#if 0\n%q|\n#else\n};\n#endif\n#if 0\n|\n#else\n#endif\n</code></pre>\n\n<p>So... how does it work? <code>#</code> denotes a line comment in Ruby, so Ruby sees the following:</p>\n\n<pre><code>%q|\n#else\nenum MyEnum {\n#endif\n#if 0\n|\n\nFOO = 0,\nBAR = 1\n\n%q|\n#else\n};\n#endif\n#if 0\n|\n</code></pre>\n\n<p>The <code>%q</code> operator defines a multi-line string in Ruby using a custom delimiter of <code>|</code>. It doesn't have to be <code>|</code>, but I chose something I wasn't going to use in the C++ code. The <code>#</code> symbols inside the string are treated as a part of the string, so they're effectively ignored. </p>\n\n<p>We do nothing with these strings, so really all Ruby sees is: <code>FOO = 0, BAR = 1</code>, which gives us access to the constants. A Ruby script that wants access to the values can just be like this:</p>\n\n<p><strong>test.rb</strong></p>\n\n<pre><code>load 'SharedTypes.h'\nputs FOO\n</code></pre>\n\n<p>From the C++ side, the <code>#if</code>, <code>#else</code> and <code>#end</code> are preprocessor directives. Since we say <code>#if 0</code>, C++ ignores everything between that point and the <code>#else</code>. Inside the <code>#else</code>, we have code that will only be \"seen\" by the C++ side. So we can define our <code>enum</code> type there. The second block just adds the final <code>};</code> to finish the enum. So the C++ perspective is like this after preprocessing stage:</p>\n\n<pre><code>enum MyEnum {\n  FOO = 0,\n  BAR = 1\n};\n</code></pre>\n\n<p>Now on the C++ side, we just have:</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include \"SharedTypes.h\"\nMyEnum test = FOO;\n</code></pre>\n\n<p>Magic.</p>\n\n<p>Hack the planet!</p>\n\n<p><strong>Note:</strong> I haven't been able to make it work with <code>std::map</code> and a Ruby hash yet, but I'd love for somebody to get something like that going! Or <code>std::vector</code> and a Ruby array!</p>\n"}, {"tags": [], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "is_accepted": true, "score": 0, "last_activity_date": 1494437977, "creation_date": 1494437977, "answer_id": 43899353, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby/43899353#43899353", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>My final approach was to create a <code>zsh</code> shell script that generated code for Ruby and C++ separately. It contained all shared values and was triggered on a code build to ensure that no inconsistencies appeared between the C++ and Ruby code. If anybody's interested in the code, let me know!</p>\n"}], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43899353, "answer_count": 2, "score": 0, "last_activity_date": 1494437977, "creation_date": 1489614094, "question_id": 42821224, "link": "https://stackoverflow.com/questions/42821224/easy-way-to-share-c-c-data-with-ruby", "title": "Easy way to share C/C++ data with Ruby?", "body": "<p>I have a C++ project from which I'd like to share some basic read-only constants with Ruby. I'd like to define the values in <em>one place</em>, such that if the values change they'd be reflected in both Ruby and C++ (after a recompile).</p>\n\n<p>Ideally it would support various basic data types (<code>std::vector&lt;int&gt;, std::map&lt;int&gt;</code>, but I think I could get by with just sharing integer values (<code>const int mysharedval = 1;</code>)</p>\n\n<p>I've thought of three approaches approaches, but all of them seem a bit too heavy for what I'd like:</p>\n\n<ol>\n<li>Wrap a C++ library with Ruby using <code>extconf.rb</code>. This seems to require a fairly high amount of boilerplate on both C++ and Ruby sides to get them working together.</li>\n<li>Storing values in a JSON file that's read from both C++ and Ruby. This adds a dependency on JSON to the C++ and would require code to translate the JSON values into C++ data types.</li>\n<li>Placing special comments inside C++ header files and manually parsing the file with Ruby to find the values. This is pretty ugly as it would require me to write some kind of basic parser, but once written it would probably be reasonably re-usable.</li>\n</ol>\n\n<p>Is there a simpler option I'm overlooking outside of the above that might be appropriate?</p>\n"}, {"tags": ["c++", "constructor", "destructor", "delete-operator"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1489613808, "post_id": 42821127, "comment_id": 72754025, "body": "How could you possibly use this? You do, say, <code>A* foo = new A;</code> -- then how do you know whether you can use <code>foo</code> or not? You have a pointer that may or may not be to an object -- what can you do with it?!"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1489613840, "post_id": 42821127, "comment_id": 72754041, "body": "Why in the world would you want to do that?? What if the object is created as an object of <i>automatic storage duration</i>?, There are so many open questions.... In the end its most likely going to be a really bad idea...."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1489613874, "post_id": 42821127, "comment_id": 72754056, "body": "if you seriously need to not use exceptions, a) have fun not using the standard library and losing RAII, because b) construct, then initialize"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1489613883, "post_id": 42821127, "comment_id": 72754062, "body": "Whatever it is you are trying to do, and it&#39;s not clear what that is, this is not the way. Either use exceptions or use an object that has an &quot;invalid&quot; state that callers can check for and then they discard the object."}, {"owner": {"reputation": 113, "user_id": 3373837, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ae93f3d037fad7f6a953f7f1a3848f47?s=128&d=identicon&r=PG&f=1", "display_name": "siri", "link": "https://stackoverflow.com/users/3373837/siri"}, "edited": false, "score": 0, "creation_date": 1489614782, "post_id": 42821127, "comment_id": 72754475, "body": "Okay, will try to avoid this scheme. Will a new operator return NULL if an object can&#39;t be allocated completely? Like if a member couldn&#39;t be allocated within the constructor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489615541, "post_id": 42821127, "comment_id": 72754835, "body": "@siri By default new throws an exception if it can&#39;t allocate. See nothrow  <a href=\"http://en.cppreference.com/w/cpp/memory/new/nothrow\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/new/nothrow</a> if you don&#39;t want this (but you almost certainly do)."}], "owner": {"reputation": 113, "user_id": 3373837, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ae93f3d037fad7f6a953f7f1a3848f47?s=128&d=identicon&r=PG&f=1", "display_name": "siri", "link": "https://stackoverflow.com/users/3373837/siri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1489613803, "answer_count": 0, "score": 0, "last_activity_date": 1489613695, "creation_date": 1489613695, "question_id": 42821127, "link": "https://stackoverflow.com/questions/42821127/can-you-call-a-delete-on-this-within-the-constructor-in-c", "closed_reason": "Duplicate", "title": "Can you call a delete on &#39;this&#39; within the constructor in C++?", "body": "<p>I am trying to handle situations where the constructor of an object can fail to allocate memory to some of its dynamically allocated members. How can I do this without exceptions?</p>\n\n<p>eg:</p>\n\n<pre><code>A::A()\n{\n    mem1_ = new Member1();\n    if (mem1_ == NULL) {\n        delete this;\n        return;\n    }\n}\nB::B()\n{\n    a1 = new A();\n    if (a1 == NULL) {\n        delete this;\n        return;\n    }\n}\n</code></pre>\n\n<p>Is this code block allowed? It is compiling.</p>\n"}, {"tags": ["c++", "audio", "libsndfile"], "comments": [{"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1489865067, "post_id": 42820706, "comment_id": 72861342, "body": "RTFM (<a href=\"http://www.mega-nerd.com/libsndfile/api.html#open\" rel=\"nofollow noreferrer\">mega-nerd.com/libsndfile/api.html#open</a>), check the return value of <code>sf_open()</code> for errors, come back here if you still don&#39;t know what&#39;s wrong. I guess you think that <code>SFM_WRITE</code> somehow reads the file ...? It doesn&#39;t, it destroys its contents without looking at them."}, {"owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "reply_to_user": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1489865114, "post_id": 42820706, "comment_id": 72861362, "body": "So I&#39;ll have to create the new wav file from scratch essentially?"}, {"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1489865226, "post_id": 42820706, "comment_id": 72861397, "body": "No, you don&#39;t have to. You can also open it in <code>SFM_RDWR</code> mode. But seriously, RTFM!"}, {"owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "reply_to_user": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1489865284, "post_id": 42820706, "comment_id": 72861418, "body": "I did, but I was pretty lost as it didn&#39;t offer much in the way of examples, which I would&#39;ve liked"}, {"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1489865730, "post_id": 42820706, "comment_id": 72861560, "body": "Apart from checking all function calls for potential errors (you should always do that!), you should also think about what you are doing to your <code>array</code>. When you loop over it, what should the third argument to <code>sf_write_float()</code> be? Why do you even loop over it when you can write multiple values at once?"}, {"owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "reply_to_user": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1490037701, "post_id": 42820706, "comment_id": 72923540, "body": "I eventually got it working with a bit of trial-and-error, the error string definitely helped solve a few issues. Although the code now just adds the adjusted values onto the end of the original wav file, but surely there must be a way to overwrite the old values?"}, {"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1490109313, "post_id": 42820706, "comment_id": 72959557, "body": "About your EDIT: You still don&#39;t check the return values in your code example! You should at least add a comment explaining what should be checked in real code. About your new question: You should get familiar with the concept of &quot;read pointer&quot; and &quot;write pointer&quot; and how you can use &quot;seek&quot; to move them: <a href=\"http://www.mega-nerd.com/libsndfile/api.html#seek\" rel=\"nofollow noreferrer\">mega-nerd.com/libsndfile/api.html#seek</a>. Then you can move the write pointer anywhere you want and overwrite to your heart&#39;s content!"}, {"owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "reply_to_user": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1490109398, "post_id": 42820706, "comment_id": 72959639, "body": "Sorry, I removed them from the code I pasted but they&#39;re still in my code! Also that&#39;s brilliant and exactly what I want, thank you"}, {"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1490109704, "post_id": 42820706, "comment_id": 72959885, "body": "I&#39;m happy to help. You should still mention the error checking for the sake of people who stumble upon your question, otherwise when they try your code they might have the same problems as you initially had ..."}, {"owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "reply_to_user": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1490109774, "post_id": 42820706, "comment_id": 72959957, "body": "Good point, I&#39;ll add it back in"}], "owner": {"reputation": 47, "user_id": 4671756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b7e2b87829a404ae10e8bf407f30eafb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Anks", "link": "https://stackoverflow.com/users/4671756/tom-anks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1490109848, "creation_date": 1489612135, "last_edit_date": 1490109848, "question_id": 42820706, "link": "https://stackoverflow.com/questions/42820706/overwriting-amplitude-values-of-a-wav-file-using-libsndfile", "title": "Overwriting amplitude values of a .wav file using libsndfile", "body": "<p>I am trying to implement a program with pitch corrects inputted audio signals. </p>\n\n<p>I have taken a .wav file, used autocorrelation to find the period of the signal every 0.04s. I now have an array of amplitude points which take the period length of the signal every 0.04s and repeat those values up until the next 0.04s. (I know that the signal has not been stretched yet, this is the final step).</p>\n\n<p>How can I use libsnd file to write these values back to the original .wav file so that it can be played?</p>\n\n<p>I tried something like: </p>\n\n<pre><code>SF_INFO sfinfo;\nsfinfo.frames;\n\nconst char* path = \"Vocal3.wav\";\n\nSNDFILE * outfile = sf_open(path, SFM_WRITE, &amp;sfinfo);\n\nfor (k = 0; k &lt; num; ++k) {\n    sf_count_t count = sf_write_float(outfile, &amp;array[k], num);\n    sf_write_sync(outfile);\n}\nsf_close(outfile);\n</code></pre>\n\n<p>but it creates a .wav file of 0 bytes that won't open. Do I have to create wav file from scratch? Does this mean creating the header too? Some pointers on how to do this would be much appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>I now think I understand the syntax of libsndfile a bit better, and I tried something like:</p>\n\n<pre><code>SF_INFO sfinfo;\nSNDFILE* outfile;\noutfile = sf_open(filename, SFM_RDWR, &amp;sfinfo);\nsf_count_t count = sf_writef_float(outfile, array, sfinfo.frames);\nconst char* error = sf_strerror(outfile);\nstd::cout &lt;&lt; error &lt;&lt; \"\\n\";\nsf_close(outfile);\n</code></pre>\n\n<p>Which doesn't overwrite the file, it instead appends the new amplitude values to the original file. Is there a way the original values can be removed?</p>\n\n<p>EDIT 2:</p>\n\n<p>The original files can be removed using the seek functions - <a href=\"http://www.mega-nerd.com/libsndfile/api.html#seek\" rel=\"nofollow noreferrer\">http://www.mega-nerd.com/libsndfile/api.html#seek</a> - thanks to Matthias for the help</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489612251, "post_id": 42820645, "comment_id": 72753228, "body": "You could just modify the existing interface."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489612342, "post_id": 42820645, "comment_id": 72753278, "body": "Why are you trying to simulate C# design in C++? I very much doubt you&#39;ll end up with an efficient design."}, {"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489612423, "post_id": 42820645, "comment_id": 72753325, "body": "@DeiDei its not C# per say. its one way of programming interfaces. What I am looking for is a better way."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489612439, "post_id": 42820645, "comment_id": 72753333, "body": "Btw; this &quot; virtual ~IForm2() = default;&quot; adds nothing useful over what you already got from the base class."}, {"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489612507, "post_id": 42820645, "comment_id": 72753379, "body": "@JesperJuhl I could but the architect argues that the interfaces are published to other teams so should remain unchanged. And any new functionality must be added in newer interface deriving the old one."}, {"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489612533, "post_id": 42820645, "comment_id": 72753389, "body": "@JesperJuhl I agree. If we can ignore that :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489612890, "post_id": 42820645, "comment_id": 72753566, "body": "Perhaps &quot;inline namespace&quot;s are what you are looking for??  Maybe read this: <a href=\"http://www.gotw.ca/publications/mill21.htm\" rel=\"nofollow noreferrer\">gotw.ca/publications/mill21.htm</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1489613999, "post_id": 42820645, "comment_id": 72754111, "body": "@Monku If the code is all internal to your organisation, go hit your architect with a clue-by-four and get the other teams to adjust to the new interface ;-) no point keeping legacy crap around or creating technical debt unless it&#39;s to please a customer (who&#39;s hopefully paying for it). When it&#39;s all internal, the code should just be fixed/updated IMHO and then ppl just have to deal with it.."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1489648079, "post_id": 42820645, "comment_id": 72765121, "body": "Why would you need an alternative? It&#39;s difficult to answer without knowing what properties should new alternative have."}], "answers": [{"comments": [{"owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "edited": false, "score": 0, "creation_date": 1489621289, "post_id": 42821086, "comment_id": 72757097, "body": "if I understand it correctly, decorator pattern does not add functionalities, it makes existing dynamic."}, {"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "reply_to_user": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "edited": false, "score": 0, "creation_date": 1489670414, "post_id": 42821086, "comment_id": 72779724, "body": "&quot;In object-oriented programming, the decorator pattern (also known as Wrapper, an alternative naming shared with the Adapter pattern) is a design pattern that allows behavior to be added to an individual object, either statically or dynamically, without affecting the behavior of other objects from the same class.&quot; -Wikipedia  So, per the definition, you can add additional functionality.  But, as per the discussion under the question, is this the right thing to do?  Probably not since the upkeep will eventually become over bearing for very little gain."}], "tags": [], "owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613582, "last_edit_date": 1495541367, "creation_date": 1489613582, "answer_id": 42821086, "question_id": 42820645, "link": "https://stackoverflow.com/questions/42820645/creating-new-c-interfaces-over-old-one-to-add-new-functions/42821086#42821086", "title": "Creating new c++ interfaces over old one to add new functions", "body": "<p>I've never actually had need of it but you might want to look up the decorator design pattern.</p>\n\n<p>Here's a link to a SO answer about decorators.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2988066/decorator-pattern-in-c\">Decorator pattern in C++</a></p>\n"}], "owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1489613582, "creation_date": 1489611878, "question_id": 42820645, "link": "https://stackoverflow.com/questions/42820645/creating-new-c-interfaces-over-old-one-to-add-new-functions", "title": "Creating new c++ interfaces over old one to add new functions", "body": "<p>I am trying to understand if there are best practices around than the one below.\nSo in our project we had created an interface <code>IForm</code> like below:</p>\n\n<pre><code>class IForm {\n protected:\n  IForm() {}\n\n public:\n\n  virtual ~IForm() {}\n  virtual const std::string&amp; GetId() const = 0;\n  virtual const std::string&amp; GetTitle() const = 0;\n  virtual void SetTitle(const std::string&amp; title) = 0;\n  virtual void SetFormError(const std::string&amp; error_text) = 0;\n  virtual void ClearFormError() = 0;\n};\n</code></pre>\n\n<p>And then the requirement came to have more functions and therefore we created new interface <code>IForm2</code>:</p>\n\n<pre><code>class IForm2: public IForm {\n protected:\n  IForm2() = default;\n\n public:\n  virtual ~IForm2() = default;\n  virtual void RemoveWidget(const std::string &amp;id) = 0;\n  virtual void Clear() = 0;\n};\n</code></pre>\n\n<p>My question is:</p>\n\n<p>Is there a way around this ? Instead of adding new interface, is there some design pattern that I can use to implement newer requirements rather than adding newer interfaces?</p>\n\n<p>I know the above method works fine. I am just looking for alternatives to implement functionalities.</p>\n"}, {"tags": ["c++", "multithreading", "mutex", "semaphore", "data-race"], "comments": [{"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "reply_to_user": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1489612956, "post_id": 42820542, "comment_id": 72753613, "body": "typo, thanks! updated it"}, {"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "reply_to_user": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1489613057, "post_id": 42820542, "comment_id": 72753669, "body": "oh , thanks again :)"}], "answers": [{"comments": [{"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489612460, "post_id": 42820703, "comment_id": 72753354, "body": "noticed it and added push_back , but the consumer does nothing with data now , it does not take it and print it."}, {"owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "reply_to_user": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489612791, "post_id": 42820703, "comment_id": 72753519, "body": "ConsumerInit will block indefinitely if there aren&#39;t 5 inputs waiting (and therefore the program can&#39;t do any more input).  Are you inputting &quot;2 1 1&quot; ?"}, {"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489612935, "post_id": 42820703, "comment_id": 72753595, "body": "users inpu is 2 1 1 , so it creates threads , and then push number in queue twice"}, {"owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "reply_to_user": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 1, "creation_date": 1489613160, "post_id": 42820703, "comment_id": 72753725, "body": "It creates 5 threads and then waits for them to terminate, then inputs another number."}, {"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489613665, "post_id": 42820703, "comment_id": 72753955, "body": "I see your point , however when i remove join() and input 1 1 1 1 1 1 2 , the 5 numbers are printed , cuz thred takes them , but how could i make them to print all numbers , in this case alll 6 of them , and after joining them , termiante threads when queue is empty?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489613879, "post_id": 42820703, "comment_id": 72754059, "body": "@trolkura Input the data one by one instead of a single line.  That will slow down things enough for you to see that consumer() is just sitting there in a wait state and producer() is never called.  As a matter of fact, the loop in <code>main()</code> never iterates to the top for any input after the first one (run in Visual Studio 2015).  Looks like you are relying on &quot;speed&quot;, and not safeness."}], "tags": [], "owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "is_accepted": true, "score": 1, "last_activity_date": 1489612124, "creation_date": 1489612124, "answer_id": 42820703, "question_id": 42820542, "link": "https://stackoverflow.com/questions/42820542/segfault-occuring-in-attempt-to-synchronize-queue/42820703#42820703", "title": "Segfault occuring in attempt to synchronize queue", "body": "<p>You aren't expanding the thrs vector when you do</p>\n\n<pre><code>thrs[i] = thread(&amp;CTest::consumer, this );\n</code></pre>\n\n<p>You should do</p>\n\n<pre><code>thrs.emplace_back(&amp;CTest::consumer, this);\n</code></pre>\n\n<p>That's where the crash would be.</p>\n"}, {"comments": [{"owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489612247, "post_id": 42820723, "comment_id": 72753226, "body": "noticed it and added push_back , but the consumer does nothing with data now , it does not take it and print it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "edited": false, "score": 0, "creation_date": 1489613671, "post_id": 42820723, "comment_id": 72753956, "body": "Then that is another issue altogether."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1489612298, "last_edit_date": 1489612298, "creation_date": 1489612198, "answer_id": 42820723, "question_id": 42820542, "link": "https://stackoverflow.com/questions/42820542/segfault-occuring-in-attempt-to-synchronize-queue/42820723#42820723", "title": "Segfault occuring in attempt to synchronize queue", "body": "<p>Your issue has nothing to do with multithreading.  You are accessing a <code>std::vector</code> out-of-bounds:</p>\n\n<pre><code>  for (int i = 0; i &lt; threads; i++) {\n        thrs[i] = thread(&amp;CTest::consumer, this);\n\n  //...\n  vector&lt;thread&gt; thrs;\n</code></pre>\n\n<p>The <code>thrs</code> vector is empty, and you're trying to access as if it has entries.</p>\n\n<p>To show the error, use:</p>\n\n<pre><code>        thrs.at(i) = thread(&amp;CTest::consumer, this);\n</code></pre>\n\n<p>and you will be greeted with a <code>std::out_of_range</code> exception instead of a segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 2325, "user_id": 1952879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c0d1e907a5506a461719a612a5ae21?s=128&d=identicon&r=PG", "display_name": "hmatar", "link": "https://stackoverflow.com/users/1952879/hmatar"}, "is_accepted": false, "score": 1, "last_activity_date": 1489613664, "creation_date": 1489613664, "answer_id": 42821116, "question_id": 42820542, "link": "https://stackoverflow.com/questions/42820542/segfault-occuring-in-attempt-to-synchronize-queue/42821116#42821116", "title": "Segfault occuring in attempt to synchronize queue", "body": "<p>Your program deadlocks, if the input sequence is not in the form of <code>1 1 1 1 1 ... 2</code>. That is if the number if <code>1s</code> preceding <code>2</code> is less than five. </p>\n\n<p>Here is the reason:</p>\n\n<p>If the total elements in queue size are less than 5 and the main thread calls <code>consumerInit</code>, some of the five created consumer threads will block waiting for the queue to receive elements. Meanwhile, the main thread blocks on the <code>join</code> operation. Since the main thread will be waiting for consumer threads to finish while some of those threads are waiting for data to consume, there will be no progress. Hence deadlock. </p>\n"}, {"tags": [], "owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "is_accepted": false, "score": 1, "last_activity_date": 1489614424, "creation_date": 1489614424, "answer_id": 42821297, "question_id": 42820542, "link": "https://stackoverflow.com/questions/42820542/segfault-occuring-in-attempt-to-synchronize-queue/42821297#42821297", "title": "Segfault occuring in attempt to synchronize queue", "body": "<p>Problem is here:</p>\n\n<pre><code>  for( auto &amp;a : thrs )\n        a.join();\n</code></pre>\n\n<p>Main thread gets blocked here after you enter <code>2</code> waiting for the consumers to finish. So after this point you think that you are entering inputs, while there is no <code>cin</code> happening.</p>\n\n<p>Remove these two lines and then you can enter <code>1</code> and producer/consumer will do their job. </p>\n"}], "owner": {"reputation": 4112, "user_id": 4048191, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/486fef69a96590dd206cbe6e87d5cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/4048191/darlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 42820703, "answer_count": 4, "score": 2, "last_activity_date": 1489614424, "creation_date": 1489611444, "last_edit_date": 1489613070, "question_id": 42820542, "link": "https://stackoverflow.com/questions/42820542/segfault-occuring-in-attempt-to-synchronize-queue", "title": "Segfault occuring in attempt to synchronize queue", "body": "<p>I am learning about multithreading and I wanted to simulate producer-consumer problem ( using semaphore if I can call it that ).</p>\n\n<p>I have a class that holds a queue, producer push ints into queue and consumer retrieves it and prints it. I simulated is as following</p>\n\n<pre><code>class TestClass{\npublic:\n    void producer( int i ){\n        unique_lock&lt;mutex&gt; l(m);\n        q.push(i);\n        if( q.size() )\n            cnd.notify_all();\n    }\n\n    void consumer(){\n        unique_lock&lt;mutex&gt; l(m);\n        while( q.empty() ){\n            cnd.wait(l);\n        }\n        int tmp = q.front();\n        q.pop();\n        cout &lt;&lt; \"Producer got \" &lt;&lt; tmp &lt;&lt; endl;\n    }\n    void ConsumerInit( int threads ){\n        for( int i = 0; i &lt; threads; i++ ){\n            thrs[i] = thread(&amp;TestClass::consumer, this );\n        }\n        for( auto &amp;a : thrs )\n            a.join();\n    }\n\n\nprivate:\n    queue&lt;int&gt; q;\n    vector&lt;thread&gt; thrs;\n    mutex m;\n    condition_variable cnd;\n};\n</code></pre>\n\n<p>And I used a little console application to call data:</p>\n\n<pre><code>int main(){\n    int x;   \n    TestClass t;\n    int counter = 0;\n    while( cin &gt;&gt; x ){\n        if( x == 0 )\n            break;\n        if( x == 1)\n            t.producer(counter++);\n        if( x == 2 )\n            t.ConsumerInit(5);\n    }   \n}\n</code></pre>\n\n<p>So when user input 1, a data is pushed into the queue , if user press 2 threads are spawned.</p>\n\n<p>In any order of invoking it, for example, pressing 1 1 and then 2, or 2 1 1\nit throws segfault. I am not sure why my understanding of my code is as following: let's assume order 2 1 1</p>\n\n<p>I initialize 5 threads, they see that queue is empty, so they go to sleep. When I push a number to the queue, it notifies all threads sleeping.\nThe first one to wake up lock mutex again and proceed to retrieve number from queue and afterwards releasing the mutex, when mutex is released another thread do the same and unlocks the mutex, the third thread after mutex is unlocked is still in loop and see that queue is yet again empty and goes to sleep again, same with all remaining threads.</p>\n\n<p>Is this logic correct? If so, why does this keep throwing segfault, if not, I appreciate all explanations.</p>\n\n<p>Thanks for the help!</p>\n\n<p>//edit \nBy answers suggets , i replaced [] with vector.push_back , but consumer does nothing with data now , does not take it or print it.</p>\n"}, {"tags": ["c++", "stdvector", "radix-sort"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489611137, "post_id": 42820431, "comment_id": 72752648, "body": "What optimizations did you use when you built your program?  If it is a &quot;debug&quot; or unoptimized build, then the results are meaningless.  You also failed to mention the number of numbers you&#39;re sorting, and also you didn&#39;t post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 196, "user_id": 3336523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b425660323c64ccad07e7908115ba55?s=128&d=identicon&r=PG&f=1", "display_name": "revelationnow", "link": "https://stackoverflow.com/users/3336523/revelationnow"}, "edited": false, "score": 0, "creation_date": 1489611567, "post_id": 42820431, "comment_id": 72752872, "body": "You can try to create a fixed size std:vector and not do erase/alloc for each digit. The overhead of allocating and releasing memory is probably hurting your runtime."}, {"owner": {"reputation": 341, "user_id": 7207527, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1814914645459557/picture?type=large", "display_name": "Moises Rojo", "link": "https://stackoverflow.com/users/7207527/moises-rojo"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489614370, "post_id": 42820431, "comment_id": 72754283, "body": "@PaulMcKenzie This edit, is almost complete, but you can get a better idea."}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 7207527, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1814914645459557/picture?type=large", "display_name": "Moises Rojo", "link": "https://stackoverflow.com/users/7207527/moises-rojo"}, "edited": false, "score": 0, "creation_date": 1489612554, "post_id": 42820787, "comment_id": 72753402, "body": "Or.. I can sort from end to begin. and this is more fast, right? You say that eliminate the end is not so expensive."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 341, "user_id": 7207527, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1814914645459557/picture?type=large", "display_name": "Moises Rojo", "link": "https://stackoverflow.com/users/7207527/moises-rojo"}, "edited": false, "score": 1, "creation_date": 1489612654, "post_id": 42820787, "comment_id": 72753457, "body": "@MoisesRojo If that works for your algorithm, then yes. But again, you can <i>only</i> remove elements from the end. Otherwise you&#39;re destroying performance."}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": true, "score": 1, "last_activity_date": 1489612572, "last_edit_date": 1495540821, "creation_date": 1489612373, "answer_id": 42820787, "question_id": 42820431, "link": "https://stackoverflow.com/questions/42820431/fastest-erase-element-from-vector-or-better-use-of-memory-sorting-radix/42820787#42820787", "title": "Fastest erase element from vector or better use of memory (sorting radix)", "body": "<p><code>std::vector</code> is not made to have parts removed from it. That's a fact you have to live with. Your trade between speed and memory usage is a classical problem. With vectors, any removal (except from its end) is expensive and is a waste. This is because every time you remove elements, the program either has to reallocate the array internally, or has to shift all elements to fill the voids. That's an ultimate limitation that you can never overcome if you keep using vectors.</p>\n\n<p><strong>vectors for your problem:</strong> fast but lots of memory usage.</p>\n\n<p>The other (probably) optimal extreme (memory-wise) is <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a>, which has absolutely no problem with removing anything anywhere. On the other hand, accessing elements is only possible by iterating over the whole list to the element, because it's basically a <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">doubly-linked list</a>, and you can't access an element by its number.</p>\n\n<p><strong>lists for your problem:</strong> best memory usage, but slow because accessing list elements are slow.</p>\n\n<p>Finally, the middle grounds is <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>std::deque</code></a>. They offer a middle grounds between vectors and lists. They're not contiguous in memory, but items can be found by their numbers. Removing elements from the middle doesn't necessarily cause the same destruction in vectors. <a href=\"https://stackoverflow.com/questions/6292332/what-really-is-a-deque-in-stl\">Read this</a> to learn more about them.</p>\n\n<p><strong>deques for your problem:</strong> middle grounds, depending on the problem, probably fast for both memory and access.</p>\n\n<p>If memory is your most important concern, then definitely go with lists. That's the fastest for that. If you want the most general solution, go with deque. Also don't neglect the possibility of copying the whole array to another container, sort it, and then copy it back. Depending on the size of the array, that might be helpful.</p>\n"}], "owner": {"reputation": 341, "user_id": 7207527, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1814914645459557/picture?type=large", "display_name": "Moises Rojo", "link": "https://stackoverflow.com/users/7207527/moises-rojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 42820787, "answer_count": 1, "score": 1, "last_activity_date": 1489613829, "creation_date": 1489610993, "last_edit_date": 1489613829, "question_id": 42820431, "link": "https://stackoverflow.com/questions/42820431/fastest-erase-element-from-vector-or-better-use-of-memory-sorting-radix", "title": "Fastest erase element from vector or better use of memory (sorting radix)", "body": "<p>I have a trouble, I create a implementation from radix sort algorithm, but I think that I can use less memory, And I can! but... I do this erasing the element of the vector after used. The problem: 3 minutes of execution vs 17 secs. How erase faster the element? or... How use the memory better.</p>\n\n<p><strong>sort.hpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nunsigned digits_counter(long long unsigned x);\n\nvoid radix( std::vector&lt;unsigned&gt; &amp;vec )\n{\n  unsigned size = vec.size();\n  if(size == 0);\n  else {\n    unsigned int max = *max_element(vec.begin(), vec.end());\n    unsigned int digits = digits_counter( max );\n\n    // FOR EVERY 10 POWER...\n    for (unsigned i = 0; i &lt; digits; i++) {\n      std::vector &lt; std::vector &lt;unsigned&gt;  &gt; base(10, std::vector &lt;unsigned&gt; ());\n\n#ifdef ERASE\n      // GET EVERY NUMBER IN THE VECTOR AND\n      for (unsigned j = 0; j &lt; size; j++) {\n    unsigned int digit = vec[0];\n\n    // GET THE DIGIT FROM POSITION \"i\" OF THE NUMBER vec[j]\n    for (unsigned k = 0; k &lt; i; k++)\n      digit /= 10;\n    digit %= 10;\n\n    // AND PUSH NUMBER IN HIS BASE BUCKET\n    base[ digit ].push_back( vec[0] );\n    vec.erase(vec.begin());\n      }\n\n#else\n      // GET EVERY NUMBER IN THE VECTOR AND\n      for (unsigned j = 0; j &lt; size; j++) {\n    unsigned int digit = vec[j];\n\n    // GET THE DIGIT FROM POSITION \"i\" OF THE NUMBER vec[j]\n    for (unsigned k = 0; k &lt; i; k++)\n      digit /= 10;\n    digit %= 10;\n\n    // AND PUSH NUMBER IN HIS BASE BUCKET\n    base[ digit ].push_back( vec[j] );\n      }\n      vec.erase(vec.begin(), vec.end()); \n#endif\n\n      for (unsigned j = 0; j &lt; 10; j++)\n    for (unsigned k = 0; k &lt; base[j].size(); k++)\n      vec.push_back( base[j][k] );\n    }\n  }\n}\n\n\nvoid fancy_sort( std::vector &lt;unsigned&gt; &amp;v ) {\n  if( v.size() &lt;= 1 )\n    return;\n  if( v.size() == 2 ) {\n    if (v.front() &gt;= v.back())\n      std::swap(v.front(), v.back());\n    return;\n  }\n  radix(v);\n}\n</code></pre>\n\n<p><strong>sort.cpp</strong></p>\n\n<pre><code>#include &lt;vector&gt;\n\n#include \"sort.hpp\"\n\nusing namespace std;\n\nint main(void)\n{\n  vector &lt;unsigned&gt; vec;\n\n  vec.resize(rand()%10000);\n\n  for (unsigned j = 0; j &lt; 10000; j++) {\n    for (unsigned int i = 0; i &lt; vec.size(); i++)\n      vec[i] = rand() % 100;\n    fancy_sort(vec);\n  }\n\n\n  return 0;\n}\n</code></pre>\n\n<p>I'm just learning... it's my 2nd chapter of Deitel C++. So... If someone have a more complex solution... I can learn how use it, the difficulty doesn't matter.</p>\n\n<p><strong>Results</strong>\nWithout erase:</p>\n\n<pre><code>g++ -O3 -Wall sort.cpp &amp;&amp; time ./a.out\n./a.out  2.93s user 0.00s system 98% cpu 2.964 total\n</code></pre>\n\n<p>With erase:</p>\n\n<pre><code>g++ -D ERASE -O3 -Wall sort.cpp &amp;&amp; time ./a.out\n./a.out  134.64s user 0.06s system 99% cpu 2:15.20 total\n</code></pre>\n"}, {"tags": ["c++", "c++14", "range-v3"], "answers": [{"tags": [], "owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "is_accepted": true, "score": 2, "last_activity_date": 1489613663, "creation_date": 1489613663, "answer_id": 42821115, "question_id": 42820420, "link": "https://stackoverflow.com/questions/42820420/retain-bidirectionality-with-ranges-v3-viewjoin/42821115#42821115", "title": "Retain bidirectionality with Ranges-v3 view::join", "body": "<p>Range-v3's <code>join</code> view satisfies <code>InputRange</code>, but not <code>Forward</code> or anything stronger. It has to do with how the join is accomplished. While iterating over an inner range, the range needs to be stored somewhere. That somewhere is in a member of the <code>join_view</code> object. In other words, <code>join_view</code> is mutated while you iterate over it. For that reason, it cannot model any range category stronger than <code>Input</code>.</p>\n"}], "owner": {"reputation": 709, "user_id": 2471708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56e762ba61956bdbe5099e0e368daba0?s=128&d=identicon&r=PG", "display_name": "apmccartney", "link": "https://stackoverflow.com/users/2471708/apmccartney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 42821115, "answer_count": 1, "score": 2, "last_activity_date": 1489613663, "creation_date": 1489610960, "last_edit_date": 1489612310, "question_id": 42820420, "link": "https://stackoverflow.com/questions/42820420/retain-bidirectionality-with-ranges-v3-viewjoin", "title": "Retain bidirectionality with Ranges-v3 view::join", "body": "<p>I've run into some difficulty with the <code>view::join</code> function object of the (amazing) Ranges-v3 library. My client code is dependent upon the presence of a back method (and would greatly appreciate random access iterators) for an aggregate view of a collection of ranges.</p>\n\n<p>After reviewing the <a href=\"https://ericniebler.github.io/range-v3/structranges_1_1v3_1_1join__view.html\" rel=\"nofollow noreferrer\">relevant documentation</a> it seems that a <code>back</code> method is compatible with instantations of the join_view class template, but I've been unable to instantiate it as such.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;range/v3/all.hpp&gt;\n\nstruct Foo{\n    std::vector&lt;int&gt; i = {1,2,3,4};\n    const std::vector&lt;int&gt;&amp; data() const { return this-&gt;i; }\n};\n\nint main(){\n    std::vector&lt; Foo &gt; foos = { Foo(), Foo(), Foo() };\n\n    auto data = []( auto&amp;&amp; foo ){ return foo.data() | ranges::view::all; };\n    auto flat = foos | ranges::view::transform(data) | ranges::view::join;\n    std::cout &lt;&lt; flat.back() &lt;&lt; std::endl; // compiler error\n}\n</code></pre>\n\n<p>The relevant bits of the compiler error message are:</p>\n\n<pre><code>main.cpp:17:28: error: no matching function for call to 'ranges::v3::join_view&lt;ranges::v3::transform_view&lt;ranges::v3::range&lt;__gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt;, __gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt; &gt;, main()::&lt;lambda(auto:1&amp;&amp;)&gt; &gt;, void&gt;::back()'\n\n std::cout &lt;&lt; flat.back() &lt;&lt; std::endl; // compiler error\n\n/usr/local/include/range/v3/range_interface.hpp:116:34: note: candidate: template&lt;class D, int _concept_requires_115, typename std::enable_if&lt;((_concept_requires_115 == 43) || ((std::is_same&lt;D, ranges::v3::join_view&lt;ranges::v3::transform_view&lt;ranges::v3::range&lt;__gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt;, __gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt; &gt;, main()::&lt;lambda(auto:1&amp;&amp;)&gt; &gt;, void&gt; &gt;() &amp;&amp; ranges::v3::concepts::models&lt;ranges::v3::concepts::BoundedView, T&gt;()) &amp;&amp; ranges::v3::concepts::models&lt;ranges::v3::concepts::BidirectionalView, T&gt;())), int&gt;::type &lt;anonymous&gt; &gt; ranges::v3::range_reference_t&lt;D&gt; ranges::v3::range_interface&lt;Derived, Inf&gt;::back() [with D = D; int _concept_requires_115 = _concept_requires_115; typename std::enable_if&lt;((_concept_requires_115 == 43) || ((std::is_same&lt;D, Derived&gt;() &amp;&amp; ranges::v3::concepts::models&lt;ranges::v3::concepts::BoundedView, D&gt;()) &amp;&amp; ranges::v3::concepts::models&lt;ranges::v3::concepts::BidirectionalView, D&gt;())), int&gt;::type &lt;anonymous&gt; = &lt;enumerator&gt;; Derived = ranges::v3::join_view&lt;ranges::v3::transform_view&lt;ranges::v3::range&lt;__gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt;, __gnu_cxx::__normal_iterator&lt;Foo*, std::vector&lt;Foo&gt; &gt; &gt;, main()::&lt;lambda(auto:1&amp;&amp;)&gt; &gt;, void&gt;; bool Inf = false]\n\n         range_reference_t&lt;D&gt; back()\n\n/usr/local/include/range/v3/range_interface.hpp:115:17: error: no type named 'type' in 'struct std::enable_if&lt;false, int&gt;'\n\n                 CONCEPT_REQUIRES_(Same&lt;D, Derived&gt;() &amp;&amp; BoundedView&lt;D&gt;() &amp;&amp; BidirectionalView&lt;D&gt;())&gt;\n</code></pre>\n\n<p>The first requirement seems to be enforcing proper use of the CRTP, which is satisfied. So the <code>join_view</code> violates either the <code>BoundedView</code> or <code>BidirectionalView</code> concepts (or both). I was able to quickly eliminate the former as a possiblity.</p>\n\n<pre><code>auto flat = foos \n  | ranges::view::transform(data) \n  | ranges::view::join \n  | ranges::view::bounded;\nstd::cout &lt;&lt; flat.back() &lt;&lt; std::endl; // compiler error\n</code></pre>\n\n<p>In this case, <code>flat</code> satisfies the <code>BoundedView</code> concept, but the error message remains unchanged.</p>\n\n<p>To verify the <code>BidirectionalView</code>, I attempted examined the iterators of the <code>join_view</code>, but encountered (what is suspect) is a bug.</p>\n\n<pre><code>auto it = flat.begin();\nstd::cout &lt;&lt; *it &lt;&lt; std::endl; // correct\n++it; std::cout &lt;&lt; *it &lt;&lt; std::endl; // correct\n--it; std::cout &lt;&lt; *it &lt;&lt; std::endl; // doesn't actually decrement\nauto other = --it;\nstd::cout &lt;&lt; *it &lt;&lt; ' ' &lt;&lt; *other &lt;&lt; std::endl; // also doesn't decrement\n</code></pre>\n\n<p>I've written up a <a href=\"http://coliru.stacked-crooked.com/a/c6607189d4c5b362\" rel=\"nofollow noreferrer\">live version</a> for easy inspection.</p>\n\n<p>Has anyone had any luck instantiating a bidirectional <code>join_view</code>? Any suggestion of how I might achieve similar behavior without copying the underlying data?</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "std-function", "perfect-forwarding"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1489610847, "post_id": 42820322, "comment_id": 72752495, "body": "Please <a href=\"https://stackoverflow.com/posts/42820322/edit\">edit</a> you question by removing all unnecessary code and comments and adding the exact error message your compiler gives you."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 7126955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150216638395300/picture?type=large", "display_name": "AlexD", "link": "https://stackoverflow.com/users/7126955/alexd"}, "edited": false, "score": 1, "creation_date": 1489612638, "post_id": 42820407, "comment_id": 72753448, "body": "Thanks, that&#39;s very helpful, what I failed to mention in my post was that the header introduces a new variable that gets passed to the forwarded function. I have tried <code>template &lt;typename F, typename ...Args&gt; auto test(F&amp;&amp; f, Args&amp;&amp;... args)     -&gt; decltype(std::forward&lt;F&gt;(f)(double, std::forward&lt;Args&gt;(args)...)) {   double x = 3.2;   return std::forward&lt;F&gt;(f)(x, std::forward&lt;Args&gt;(args)...); }</code> but I now get the compiler error <code>test.cpp:16:42: error: expected &#39;(&#39; for function-style cast or type construction     -&gt; decltype(std::forward&lt;F&gt;(f)(double, std::forward&lt;Args&gt;(args)...)) {</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 325, "user_id": 7126955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150216638395300/picture?type=large", "display_name": "AlexD", "link": "https://stackoverflow.com/users/7126955/alexd"}, "edited": false, "score": 0, "creation_date": 1489614125, "post_id": 42820407, "comment_id": 72754176, "body": "@AlexD: <code>decltype(std::forward&lt;F&gt;(f)(42., std::forward&lt;Args&gt;(args)...))</code> or <code>decltype(std::forward&lt;F&gt;(f)(std::declval&lt;double&gt;(), std::forward&lt;Args&gt;(args)...))</code>"}, {"owner": {"reputation": 325, "user_id": 7126955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150216638395300/picture?type=large", "display_name": "AlexD", "link": "https://stackoverflow.com/users/7126955/alexd"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1489614857, "post_id": 42820407, "comment_id": 72754508, "body": "@Jarod42 Thanks, got it now :)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 325, "user_id": 7126955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150216638395300/picture?type=large", "display_name": "AlexD", "link": "https://stackoverflow.com/users/7126955/alexd"}, "edited": false, "score": 0, "creation_date": 1489615132, "post_id": 42820407, "comment_id": 72754636, "body": "@AlexD: In the future, please ask questions that are representative of your actual problem, so that you can use the answer to derive a solution :-)"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 3, "last_activity_date": 1489610906, "creation_date": 1489610906, "answer_id": 42820407, "question_id": 42820322, "link": "https://stackoverflow.com/questions/42820322/templated-return-type-inferred-from-type-of-forwarded-function/42820407#42820407", "title": "Templated return type inferred from type of forwarded function", "body": "<p>How about this:</p>\n\n<pre><code>#include &lt;utility&gt;\n\ntemplate &lt;typename F, typename ...Args&gt;\nauto test(F&amp;&amp; f, Args&amp;&amp;... args)\n    -&gt; decltype(std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...)) {\n  return std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>test(f, j, dummy);\n</code></pre>\n\n<p>In C++14 you can write this more simply as:</p>\n\n<pre><code>template &lt;typename F, typename ...Args&gt;\ndecltype(auto) test(F&amp;&amp; f, Args&amp;&amp;... args) {\n  return std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 7126955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150216638395300/picture?type=large", "display_name": "AlexD", "link": "https://stackoverflow.com/users/7126955/alexd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 42820407, "answer_count": 1, "score": 4, "last_activity_date": 1489611382, "creation_date": 1489610616, "last_edit_date": 1489611382, "question_id": 42820322, "link": "https://stackoverflow.com/questions/42820322/templated-return-type-inferred-from-type-of-forwarded-function", "title": "Templated return type inferred from type of forwarded function", "body": "<p>I am attempting to write a header file containing a function that calls a function within main.cpp, forwarding an arbitrary number of parameters. The return type of this code needs to match the return type of the forwarded function. In an attempt to achieve this, I wrote the following dummy program, but I am unable to get this to compile. I would be grateful for some help:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ndouble f(double x, int params) {\n    return 1;\n}\n\ntemplate &lt;typename func, typename... Args&gt;\ndouble test(std::function&lt;func(double, Args...)&gt; predicate, Args&amp;&amp;... params){\n    return 2;\n}\n\nint main() {\n    int dummy = 1;\n    double result = test(&amp;f, dummy);\n    std::cout&lt;&lt;result&lt;&lt;std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>The compiler (clang++-3.8) gives the following error:</p>\n\n<pre><code>test.cpp:15:18: error: no matching function for call to 'test'\n        double result = test(&amp;f, dummy);\n                    ^~~~\ntest.cpp:9:8: note: candidate template ignored: could not match\n      'function&lt;type-parameter-0-0 (double, type-parameter-0-1...)&gt;'  against\n      'double (*)(double, int)'\ndouble test(std::function&lt;func(double, Args...)&gt; predicate, Args&amp;&amp;... params){\n       ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 2269, "user_id": 3104399, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/yzJGV.jpg?s=128&g=1", "display_name": "Ben Wainwright", "link": "https://stackoverflow.com/users/3104399/ben-wainwright"}, "edited": false, "score": 1, "creation_date": 1489610708, "post_id": 42820307, "comment_id": 72752414, "body": "&quot;It works&quot; or &quot;it doesn&#39;t&quot; are not useful statements. Please add the following to the post: What you are <i>expecting</i> to happen, and what <i>actually</i> happened"}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "reply_to_user": {"reputation": 2269, "user_id": 3104399, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/yzJGV.jpg?s=128&g=1", "display_name": "Ben Wainwright", "link": "https://stackoverflow.com/users/3104399/ben-wainwright"}, "edited": false, "score": 0, "creation_date": 1489610856, "post_id": 42820307, "comment_id": 72752502, "body": "@BenWainwright , Edited. Will mind from next time."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1489610913, "post_id": 42820307, "comment_id": 72752537, "body": "Have you tried using a debugger?"}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1489610998, "post_id": 42820307, "comment_id": 72752583, "body": "@JesperJuhl I tried some print statements in between to check where it breaks , it prints a few and then crashes."}], "answers": [{"comments": [{"owner": {"reputation": 624, "user_id": 6815225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6XG0.png?s=128&g=1", "display_name": "Florian p.i.", "link": "https://stackoverflow.com/users/6815225/florian-p-i"}, "edited": false, "score": 0, "creation_date": 1489611687, "post_id": 42820564, "comment_id": 72752952, "body": "Another issue: a[100] =&gt;index 0-99; return 1+(rand() %100) =&gt;value: 1-100 ... q[100] would be an overflow."}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "reply_to_user": {"reputation": 624, "user_id": 6815225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6XG0.png?s=128&g=1", "display_name": "Florian p.i.", "link": "https://stackoverflow.com/users/6815225/florian-p-i"}, "edited": false, "score": 0, "creation_date": 1489612933, "post_id": 42820564, "comment_id": 72753592, "body": "@Florianp.i. yeah , fixed that. Thanks a lot."}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "edited": false, "score": 0, "creation_date": 1489613099, "post_id": 42820564, "comment_id": 72753692, "body": "@Barmar ,  did what you said and totally understand the logical error. But it still happens idk why. I&#39;ve put print statements all throughout , it seems it crashes only when an element already exist and we&#39;re inserting in list with some elements.  **EDIT:**Its Giving &quot;Runtime Error&quot; in online compilers .  Though thanks for eye pointing the logical error !!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489613326, "post_id": 42820564, "comment_id": 72753808, "body": "The problem only happens when a bucket has more than 2 elements in the linked list and you try to add to it. The loop never gets past the 2nd element when looking for the end of the list. So when you have a small number of items, you don&#39;t usually get long lists, and the program works."}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "edited": false, "score": 0, "creation_date": 1489613705, "post_id": 42820564, "comment_id": 72753973, "body": "@Barmar , What if we want to have items ? I do understand its stupid as hash functions are meant to spread data evenly. But out curiosity , what if I want to as I don&#39;t know why it&#39;s not getting past the 2nd ? Thanks again tho."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489614050, "post_id": 42820564, "comment_id": 72754132, "body": "Because you keep setting <code>temp2</code> back to the beginning of the list. It&#39;s like if you&#39;re on a line and every time you take a step forward, you go back to the end of the line. You&#39;ll never get anywhere."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489614097, "post_id": 42820564, "comment_id": 72754160, "body": "But if the list has only 1 element, the test <code>while (temp2-&gt;next != NULL)</code> fails the first time, and the loop ends."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1489615405, "last_edit_date": 1489615405, "creation_date": 1489611537, "answer_id": 42820564, "question_id": 42820307, "link": "https://stackoverflow.com/questions/42820307/c-program-crash-time-limit-exceeded/42820564#42820564", "title": "C++ program crash ( Time limit exceeded )", "body": "<p>You have an infinite loop here:</p>\n\n<pre><code>    temp2=q[pos];\n    while(temp2-&gt;next != NULL )\n    {\n        temp2=q[pos];\n        temp2=temp2-&gt;next;\n    }\n</code></pre>\n\n<p>Every time through the loop you set <code>temp2</code> back to <code>q[pos]</code> before going to the next. So you never get past the second element of the linked list, and it never finds the <code>NULL</code> pointer.</p>\n\n<p>Get rid of the <code>temp=q[pos];</code> line in the loop, it should just be done once before the loop.</p>\n\n<p>Another problem is that array indexes are zero-based, so you shouldn't add <code>1</code> when calculating the hash code.</p>\n\n<pre><code>int hash_function(int data)\n{\n    return (rand() %100);\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/zvVDg3\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}], "owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 42820564, "answer_count": 1, "score": -3, "last_activity_date": 1489615405, "creation_date": 1489610543, "last_edit_date": 1489610832, "question_id": 42820307, "link": "https://stackoverflow.com/questions/42820307/c-program-crash-time-limit-exceeded", "title": "C++ program crash ( Time limit exceeded )", "body": "<p>Here's the full code. If in the main while inserting elements we run the loop for less than 30 times , it runs . Else it doesn't. Program crashes and give error \" Time limit exceeded in online compilers \". I wanted to see the output of all 100 random elements inserted into the list of array. But the program crashes for unknown reason to me.</p>\n\n<p>Here's the main </p>\n\n<pre><code>int main()\n{\n    node* a[100],*b,*temp,*temp2;\n    int num;\n    for(int i=0;i&lt;100;i++)\n    {    \n        a[i]=NULL;;\n    }\n    for(int i=0;i&lt;100;i++) // If this loop is less than 30 , it runs\n    {\n        num=(1+ (rand() %100) );\n\n        insert_node(a,num);\n    }\n    display(a);\n}\n</code></pre>\n\n<p>Here's the insert function </p>\n\n<pre><code>void insert_node(node **q,int data)\n{\n    node *temp,*temp2;\n    int pos;\n    pos=hash_function(data);\n    if(q[pos]==NULL)\n    {\n        temp=new node;\n        temp-&gt;next=NULL;\n       temp-&gt;data=data;\n       q[pos]=temp;\n    }\n    else\n    {\n        temp2=q[pos];\n        while(temp2-&gt;next != NULL )\n        {\n            temp2=q[pos];\n            temp2=temp2-&gt;next;\n        }\n        temp=new node;\n        temp-&gt;next=NULL;\n        temp-&gt;data=data;\n        temp2-&gt;next=temp;\n    }\n}\n</code></pre>\n\n<p>And here's the noobie hash function .</p>\n\n<pre><code>int hash_function(int data)\n{\n    return 1+(rand() %100);\n}\n</code></pre>\n\n<p>Here's the display one </p>\n\n<pre><code>void display(node **q)\n{\n    node * temp;\n    for(int i=0;i&lt;100;i++)\n    {\n            temp=q[i];\n            if(temp !=NULL)\n        {\n\n            cout&lt;&lt;\"\\n Position : \"&lt;&lt;i&lt;&lt;\" , Elements : \";\n            while(temp-&gt;next != NULL)\n            {\n                cout&lt;&lt;\" \"&lt;&lt;temp-&gt;data;\n                temp=temp-&gt;next;\n            }\n            cout&lt;&lt;\" \"&lt;&lt;temp-&gt;data;\n        }\n    }\n\n\n}\n</code></pre>\n\n<p>PS: Please don't judge on my attempt towards hashing. Really a noob programmer. Thanks in advace .</p>\n"}, {"tags": ["c++", "logic", "pow"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1489610680, "post_id": 42820276, "comment_id": 72752401, "body": "10 base logarithm will give the number of digits."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1489610758, "post_id": 42820276, "comment_id": 72752445, "body": "Are you looking for a somewhat accurate, in the ballpark, number or a precise number?"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1489610899, "post_id": 42820276, "comment_id": 72752530, "body": "Well only thing I need is number of digits, actual result of a^b is not important"}], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 5538150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/939792052758789/picture?type=large", "display_name": "Criss", "link": "https://stackoverflow.com/users/5538150/criss"}, "edited": false, "score": 0, "creation_date": 1489610963, "post_id": 42820323, "comment_id": 72752566, "body": "It&#39;s all about calculating amount of digits without having to actually store the number in memory. It even can be that it&#39;s not writeable even using 100% of your RAM. Anyway you&#39;ll probably need GMP to store a number representing amount of digits :D"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1489611022, "post_id": 42820323, "comment_id": 72752592, "body": "Is there some kind of other way that does not require downloading anything? :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1489610617, "creation_date": 1489610617, "answer_id": 42820323, "question_id": 42820276, "link": "https://stackoverflow.com/questions/42820276/how-to-calculate-number-of-digits-on-huge-number-c/42820323#42820323", "title": "How to calculate number of digits on huge number? C++", "body": "<p>You could use a library that supports arbitrarily large numbers, like <a href=\"https://gmplib.org\" rel=\"nofollow noreferrer\">GMP</a> .</p>\n\n<p>The core C++ language itself offers no types to work with such large numbers. So either you use a pre-existing library or write one yourself (I suggest the former - don't re-invent the wheel).</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1489611318, "post_id": 42820390, "comment_id": 72752737, "body": "I think it should be <code>floor() + 1</code>, otherwise it will give incorrect values for 1 10 100 etc."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1489611579, "post_id": 42820390, "comment_id": 72752882, "body": "for powers of 10, the value will be integer, so <code>ceil(n)==n</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1489611699, "post_id": 42820390, "comment_id": 72752957, "body": "Right so log(1) == 0, <code>ceil</code> of that is also 0, does it mean it takes 0 digits to store 1? log(10)==1 etc"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 6, "last_activity_date": 1489611871, "last_edit_date": 1489611871, "creation_date": 1489610842, "answer_id": 42820390, "question_id": 42820276, "link": "https://stackoverflow.com/questions/42820276/how-to-calculate-number-of-digits-on-huge-number-c/42820390#42820390", "title": "How to calculate number of digits on huge number? C++", "body": "<p>after fixing the one-off error suggested in the comments </p>\n\n<p>number of digits of <code>a^b = floor( b * log(a) ) + 1</code></p>\n"}, {"comments": [{"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 1, "creation_date": 1489611556, "post_id": 42820464, "comment_id": 72752864, "body": "@GaBoKaS See Slava&#39;s comment on karakfa&#39;s answer: it should be <code>floor() + 1</code> instead of <code>ceiling</code> to account for even powers of 10."}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 0, "creation_date": 1489611591, "post_id": 42820464, "comment_id": 72752892, "body": "BTW, it will be not easy to calculate it on 32-bit system. So 64-bit system is required."}], "tags": [], "owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "is_accepted": true, "score": 1, "last_activity_date": 1489611647, "last_edit_date": 1489611647, "creation_date": 1489611135, "answer_id": 42820464, "question_id": 42820276, "link": "https://stackoverflow.com/questions/42820276/how-to-calculate-number-of-digits-on-huge-number-c/42820464#42820464", "title": "How to calculate number of digits on huge number? C++", "body": "<p>karakfa has it right.</p>\n\n<p>The base-<code>k</code> logarithm of a number <code>n</code>, rounded up to the nearest whole number, will give you the number of digits required to represent <code>n</code> in base <code>k</code>.</p>\n\n<p>EDIT: as pointed out in comments, it should not be rounded up, but rounded down and then incremented by one. This accounts for round powers of 10 having an extra digit.</p>\n\n<p>If your number is <code>a^b</code> then take the base-10 logarithm, <code>log a^b</code> and use the laws of logarithms to simplify as <code>b log a</code>. Note that this simplification happens inside the <code>ceiling</code> function so the simplification is valid. Computing <code>log a</code> should not be an issue (it will be between 0 and 16) and <code>b</code> is known. Just make sure to round after multiplying, not before.</p>\n\n<p>Note that limited precision of floating-point numbers may introduce some errors into this method. If the true value of <code>b x log a</code> is different from the nearest floating-point representation of <code>b x log a</code> in such a way that they fall on different sides of an integer, the method fails. You can possibly detect when you are close to this condition and remediate it somehow.</p>\n"}], "owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 42820464, "answer_count": 3, "score": 3, "last_activity_date": 1489611871, "creation_date": 1489610462, "question_id": 42820276, "link": "https://stackoverflow.com/questions/42820276/how-to-calculate-number-of-digits-on-huge-number-c", "title": "How to calculate number of digits on huge number? C++", "body": "<p>so the problem I have is that there is two integers (a, b) that is in [1, 10^16] interval and I need to do find out how many digits will number a^b have? Those numbers are too big for saving them on single variables, and if I write them on Array it would take a lot of time.</p>\n\n<p>Is there a way to count the number a^b number of digits with some kind of formula or any simpler way then Arrays?</p>\n"}, {"tags": ["c++", "arrays", "function", "pointers", "reference"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1489610697, "post_id": 42820231, "comment_id": 72752412, "body": "Draw the array on a piece of paper. Draw arrows that point to its elements as you trace through the code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489610775, "post_id": 42820231, "comment_id": 72752453, "body": "&quot; I do not understand how the * in &quot;int *function&quot; interacts with the result (whether it is returning a reference or a value I cannot tell)&quot;  Neither, it&#39;s returning a pointer."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1489610795, "post_id": 42820231, "comment_id": 72752468, "body": "Why don&#39;t you write out the problem. What do you think what is happening? If you don&#39;t know about pointers and pointer dereferencing, <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">read this</a>. We are not going to do your homework for you, as you will not learn anything. Try playing around with pointers in C++ in for instance Microsoft Visual Studio"}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1489611001, "post_id": 42820231, "comment_id": 72752584, "body": "@molbdnilo thank you, I will follow that suggestion. I might even post a breakdown in reply."}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "edited": false, "score": 0, "creation_date": 1489611085, "post_id": 42820231, "comment_id": 72752619, "body": "@NeilButterworth so by that logic if it tries to return a value other than a pointer it will error out, correct?"}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1489611265, "post_id": 42820231, "comment_id": 72752711, "body": "@J.H.Bonarius I will take that suggestion. Thankfully I&#39;m just casually going through a C++ course online. Not even through a school so no homework involved!. But this problem stood out in particular and I wanted to know more about it. Thanks for your input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489611496, "post_id": 42820231, "comment_id": 72752838, "body": "@Brad It should at least give a warning."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "edited": false, "score": 0, "creation_date": 1489612241, "post_id": 42820540, "comment_id": 72753224, "body": "thank you very much for the clear explanation. I have one last question. For the function &quot;f1&quot;. It returns the int value 3 by derefencing the t[2] element and adding one to its value, correct?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1489612399, "post_id": 42820540, "comment_id": 72753310, "body": "You need <code>int&amp; a = *f2(t)</code>, otherwise the address gotten by <code>f3(a)</code> will not point into the array, and the subsequent pointer arithmetic will FAIL"}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1489613030, "post_id": 42820540, "comment_id": 72753654, "body": "@BenVoigt I see what you are saying. If it declares it is accepting a reference value of that type it will need just that as return value from <code>f2</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "edited": false, "score": 0, "creation_date": 1489613207, "post_id": 42820540, "comment_id": 72753752, "body": "@Brad: <code>f2</code> returns a pointer, when you apply <code>*</code> to a pointer you get a reference.  That reference can be used to initialize a reference (<code>int&amp; a = </code>) or a copy (<code>int a = </code>) but the code in the question does <code>f3(*f2(t))</code> and Rama&#39;s rewrite is invalid because of the extra copy."}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1489613578, "post_id": 42820540, "comment_id": 72753915, "body": "@BenVoigt good point! I edited the reference line: <code>int &amp;a(*f2(t));</code>"}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "reply_to_user": {"reputation": 5812, "user_id": 735425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x7BUU.png?s=128&g=1", "display_name": "ssell", "link": "https://stackoverflow.com/users/735425/ssell"}, "edited": false, "score": 0, "creation_date": 1489613892, "post_id": 42820540, "comment_id": 72754069, "body": "@ssell So by that logic <code>f2(&amp;t[0])</code> returns <code>int *t[1]</code>, <code>f3(*(int *t[1]))</code> returns <code>int *t[2]</code>, and <code>f1(int *t[2])</code> returns the int value of <code>t[2] + 1</code>."}, {"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1489614724, "post_id": 42820540, "comment_id": 72754446, "body": "@BenVoigt Ah, so <code>f1</code> uses <code>*</code> to grab the reference of <code>int *t[2]</code> then adding one changes the reference to the next element of the array returning its int value."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "edited": false, "score": 0, "creation_date": 1489627980, "post_id": 42820540, "comment_id": 72758807, "body": "@Brad it may be helpful to talk about the ADDRESS. Both pointers and references depend heavily on the address sorted inside, the difference is that while both pointer and references allow access to both address and value, references are focused on the value and pointers are focused on the address."}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": true, "score": 3, "last_activity_date": 1489613820, "last_edit_date": 1489613820, "creation_date": 1489611440, "answer_id": 42820540, "question_id": 42820231, "link": "https://stackoverflow.com/questions/42820231/unpacking-c-pointer-reference-syntax/42820540#42820540", "title": "Unpacking C++ pointer/reference syntax", "body": "<p>Divide and conquer:</p>\n\n<pre><code>int t[] = {0, 1, 2, 3}; // t is a pointer to the first element of the array\nint &amp;a(*f2(t)); // f2(t) returns a pointer, so you need to \"dereferencing\" using *, to get the referece to the value\nint *b = f3(a); //f3(a) take an int by reference and return a pointer to an int\ncout &lt;&lt; f1(b); //f1(b) take a pointer to an int and returns an int value;\n</code></pre>\n\n<p>Also be careful with these two lines:</p>\n\n<pre><code>return &amp;a + 1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>return *a + 1;\n</code></pre>\n\n<p>Maybe the are not doing the thing that you are thinking.</p>\n\n<p>Remember that these 3 functions are just incrementing a pointer by pointer arithmetic</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1489643658, "last_edit_date": 1489643658, "creation_date": 1489639393, "answer_id": 42825465, "question_id": 42820231, "link": "https://stackoverflow.com/questions/42820231/unpacking-c-pointer-reference-syntax/42825465#42825465", "title": "Unpacking C++ pointer/reference syntax", "body": "<p>With a great amount of help from Rama, Ben Voigt, and ssell among others. I believe I have been able to really deconstruct this problem. I hope it provides help to others.</p>\n\n<p>Beginning with main ():</p>\n\n<pre><code>int t[] = {0, 1, 2, 3};\n</code></pre>\n\n<p>An array by the name of <code>t</code> is populated with four elements (0, 1, 2, and 3). So <code>t[0] = 0</code>, <code>t[1] = 1</code>, <code>t[2] = 2</code>, and <code>t[3] = 3</code>.</p>\n\n<pre><code>cout &lt;&lt; f1(f3(*f2(t)));\n</code></pre>\n\n<p>We want to print the final results of these nested functions. Their invocation order is first <code>f2()</code> which returns its value to <code>f3()</code> which returns its value to <code>f1()</code> the value of which is printed with <code>cout</code>. So the resulting value returned from <code>f1()</code> will determine our final output. The <code>t</code> array is supplied as an argument to <code>f2()</code> which without an element represents a reference to the first element of the array, essentially <code>&amp;t[0]</code>. Now we jump to <code>f2()</code> to begin!</p>\n\n<pre><code>int *f2(int *a)\n</code></pre>\n\n<p>This function will return a type of pointer <code>int *</code>. It is accepting an actual argument of the same type. In this case <code>int *a = &amp;t[0]</code>, the pointer <code>a</code> has been set to the reference of the first element of the <code>t</code> array.</p>\n\n<pre><code>return a + 1;\n</code></pre>\n\n<p>The variable <code>a</code> which currently holds a pointer to the address of <code>&amp;t[0]</code> is incremented by 1, which in this case changes the pointer to the next element of the array, <code>&amp;t[1]</code>. We now head to <code>f3()</code></p>\n\n<pre><code>int *f3(int &amp;a)\n</code></pre>\n\n<p>The the argument of this function will not accept a pointer, it needs an <code>int</code> value to perform the <code>&amp;</code> referencing operator on. Therefore the <code>*</code> dereferencing operator is used on the value returned from <code>f2(t)</code>. Dereferencing <code>$t[1]</code> results in just the element itself <code>t[1]</code> that can be passed by reference to <code>f3()</code> via the <code>int &amp;a</code> argument.</p>\n\n<pre><code>return &amp;a + 1;\n</code></pre>\n\n<p>The reference value of <code>a</code> is incremented by one, moving the reference a single integer's worth of memory forward to the next element in the array <code>t[2]</code>, and returns the incremented reference value as a pointer. ON TO <code>f1()</code>!</p>\n\n<pre><code>int f1(int *a)\n</code></pre>\n\n<p>This function returns the integer that will be printed to the screen. The pointer to <code>t[2]</code> will fit nicely into the int pointer argument <code>int *a</code>.</p>\n\n<pre><code>return *a + 1;\n</code></pre>\n\n<p>The return statement <code>*</code> dereferences the pointer to <code>t[2]</code> acquiring its value. According to the array initialization above <code>t[2] = 2</code>, so <code>t[2] + 1 == 3</code>. The value is returned and <code>cout</code> prints <code>3</code>.</p>\n\n<p>Thanks for the big help everyone.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "edited": false, "score": 0, "creation_date": 1489643167, "post_id": 42825853, "comment_id": 72763102, "body": "I see that I need to revise my answer in explanation of dereferencing the result of <code>f2()</code>. Thanks!"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1489641560, "creation_date": 1489641560, "answer_id": 42825853, "question_id": 42820231, "link": "https://stackoverflow.com/questions/42820231/unpacking-c-pointer-reference-syntax/42825853#42825853", "title": "Unpacking C++ pointer/reference syntax", "body": "<ul>\n<li><code>f2(t)</code> is <code>&amp;t[0] + 1</code> which is <code>&amp;t[1]</code></li>\n<li><code>*(&amp;t[1])</code> is <code>t[1]</code></li>\n<li><code>f3(t[1])</code> is <code>&amp;t[1] + 1</code> which is <code>&amp;t[2]</code></li>\n<li><code>f1(&amp;t[2])</code> is <code>t[2] + 1</code> which is <code>3</code></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 7717462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496ab942ef595a71cc4ee341cc0b31a7?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Hansen", "link": "https://stackoverflow.com/users/7717462/brad-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 42820540, "answer_count": 3, "score": 1, "last_activity_date": 1489643658, "creation_date": 1489610290, "last_edit_date": 1489640722, "question_id": 42820231, "link": "https://stackoverflow.com/questions/42820231/unpacking-c-pointer-reference-syntax", "title": "Unpacking C++ pointer/reference syntax", "body": "<p>Recently I had a knowledge check that included code that continues to confuse me. Here it is:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint f1(int *a) {\n    return *a + 1;\n}\n\nint *f2(int *a) {\n    return a + 1;\n}\n\nint *f3(int &amp;a) {\n    return &amp;a + 1;\n}\n\nint main() {\n    int t[] = {0, 1, 2, 3};\n    cout &lt;&lt; f1(f3(*f2(t)));\n    return 0;\n}\n</code></pre>\n\n<p>The question for the assessment was \"What is the output of the program?\". By compiling this I get three.</p>\n\n<p>I know that this is displaying different ways by which to deal with pointers and references, but I cannot make heads or tales of the logic.</p>\n\n<p>Can someone comment the different lines of this code breaking down the methods by which the reference to the <code>t</code> array/vector is being handled? In particular I do not understand how the <code>int *function</code> interacts with the result (whether it is returning a reference or a value I cannot tell). Then inside the different bodies of the functions how the dereferencing/referencing operator is being used or not being used. I am just trying to unravel the logic of it all and I keep getting twisted around the axle.</p>\n\n<p><strong>EDIT</strong>\nWith a bit of help I believe I have this one licked. Check my answer below.</p>\n"}, {"tags": ["c++", "vector", "int"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489612127, "post_id": 42820230, "comment_id": 72753173, "body": "I&#39;m voting to close this question as off-topic because questions about coding style are more appropriate for CodeReview.stackexchange.com."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": true, "score": 1, "last_activity_date": 1489610674, "creation_date": 1489610674, "answer_id": 42820338, "question_id": 42820230, "link": "https://stackoverflow.com/questions/42820230/best-methods-with-working-with-integers/42820338#42820338", "title": "Best methods with working with integers?", "body": "<p>You can do this without using <code>vector</code>s at all - just maths. </p>\n\n<pre><code>long int NoZeros(long int num) {\n    bool sign = num &lt; 0;\n\n    long int ret = 0, running = 1;\n    while (num) {\n        if (num % 10) {\n            ret += running * (num % 10);\n            running *= 10;\n        }\n        num /= 10;\n    }\n    return sign?-num:num;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6005100, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8e7a79cfbb9720e19e78bc5028931f81?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/6005100/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1489655353, "accepted_answer_id": 42820338, "answer_count": 1, "score": 0, "last_activity_date": 1489610674, "creation_date": 1489610288, "question_id": 42820230, "link": "https://stackoverflow.com/questions/42820230/best-methods-with-working-with-integers", "closed_reason": "Opinion-based", "title": "Best methods with working with integers?", "body": "<p>I have few a question regarding techniques involving working with integers and overall coding.</p>\n\n<p>For example, if I have to modify or check integer numbers, I save the digits of a number in a vector and then work with them and then if necessary put them back together, however, I think it's a bit impractical.</p>\n\n<p>There was a task where I had to write a function that removes zeros from an integer and returns the same number without the zeros. </p>\n\n<pre><code>int removeZeros(int n) {\n    std::vector&lt;int&gt; v;\n\n    while(n != 0) {\n        v.push_back(n%10);\n        n /= 10;\n    }\n\n    for(int i = 0; i &lt; v.size(); i++) {\n        if(v[i] == 0) {\n            v.erase(v.begin() + i);\n            i--;\n        }\n    }\n\n    for(int i = v.size() - 1; i &gt;= 0; i--) {\n        n *= 10;\n        n += v[i];\n    }\n    return n;\n}\n</code></pre>\n\n<p>This code works good, however I am not sure whether it's \"written\" well, efficient.</p>\n\n<p>Do you think the method this method is good, efficient enough? or is there a better, more convenient way to work with (or modify) integers?</p>\n\n<p>Can you hand me any tips on how to be a more efficient coder?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4083, "user_id": 3303546, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1Xh6f.jpg?s=128&g=1", "display_name": "Cecilia", "link": "https://stackoverflow.com/users/3303546/cecilia"}, "edited": false, "score": 0, "creation_date": 1489612019, "post_id": 42820168, "comment_id": 72753132, "body": "Usually it is easier to help if you describe <i>how</i> your code is not working. Is the output unexpected? If so, what do you expect for a given input? Are you getting any errors or warnings? Do you not enter a code block that you expect to enter? &quot;Not working&quot; and &quot;goes nowhere&quot; is to vague for diagnosis."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1489839165, "post_id": 42820168, "comment_id": 72852840, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183402(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 7723614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580bcd98312f4170e72ae29c4712f12f?s=128&d=identicon&r=PG", "display_name": "Mr D", "link": "https://stackoverflow.com/users/7723614/mr-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1489830434, "creation_date": 1489830434, "answer_id": 42872787, "question_id": 42820168, "link": "https://stackoverflow.com/questions/42820168/how-to-copy-hdc-content-in-wingdi-c/42872787#42872787", "title": "How to copy HDC content in WinGDI / C++", "body": "<p>When you call <code>CreateCompatibleDC</code> function it'll create so called \"memory DC\" object. Memory DC doesn't have any image data attached to it by default (in fact id does, 1x1 monochrome bitmap, which is not what you want).</p>\n\n<p>You do select a bitmap object for your <code>imageDC</code>, but you don't select any bitmap object for your <code>bufferDC</code>, that's why \"bits go nowhere\".</p>\n\n<p>Create a <code>HBITMAP</code> object for your <code>bufferDC</code> (you can use <code>CreateCompatibleBitmap</code> for this) and select it for your <code>bufferDC</code> before performing any blits into it.</p>\n\n<p>Remember one thing: <code>DC</code> object is an interface to something you can paint on, it doesn't contain any bitmap data itself.</p>\n"}], "owner": {"reputation": 19, "user_id": 5998056, "user_type": "registered", "profile_image": "https://graph.facebook.com/1090156621015650/picture?type=large", "display_name": "Rafa\u0142 Krzysztof Kowalczyk", "link": "https://stackoverflow.com/users/5998056/rafa%c5%82-krzysztof-kowalczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 668, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506352413, "creation_date": 1489610057, "last_edit_date": 1506352413, "question_id": 42820168, "link": "https://stackoverflow.com/questions/42820168/how-to-copy-hdc-content-in-wingdi-c", "title": "How to copy HDC content in WinGDI / C++", "body": "<p>I need do copy <code>HDC</code> content but my code is not working - any ideas why? Everything is well until I'm trying to copy between <code>HDC</code> objects. It seems that bits goes nowhere. I'm new to GDI programming.</p>\n\n<p>I'm not sure how <code>SelectObject</code> should work here.</p>\n\n<pre><code>PAINTSTRUCT ps;\nHDC paintDC = BeginPaint(hWnd, &amp;ps);\nHDC imageDC = ::CreateCompatibleDC(paintDC);\nHDC bufferDC = ::CreateCompatibleDC(paintDC);\n\nBITMAPINFO bitmapInfo;\nmemset ( &amp;bitmapInfo, 0, sizeof(BITMAPINFOHEADER) );\nbitmapInfo.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);\nint scanLines = GetDIBits(imageDC,      // handle to DC\n                          m_bitmap,         // handle to bitmap\n                          0,                // first scan line to set\n                          0,                // number of scan lines to copy\n                          NULL,             // array for bitmap bits\n                          &amp;bitmapInfo,      // bitmap data buffer\n                          DIB_RGB_COLORS ); // RGB or palette index\n\n// Paint the bitmap image.\nHBITMAP pOldBitmap = (HBITMAP)SelectObject( imageDC, m_bitmap );\nint width = bitmapInfo.bmiHeader.biWidth;\nint height = bitmapInfo.bmiHeader.biHeight;\n\n// Copy imageDC to bufferDC\nBitBlt(bufferDC, 0, 0,\n        width, height,\n        imageDC, 0, 0, SRCCOPY) ;   \n\n\nBitBlt(paintDC, 0, 0,\n       width, height, \n       imageDC, 0, 0, SRCCOPY);\nSelectObject(imageDC, pOldBitmap);\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1489611578, "post_id": 42820462, "comment_id": 72752880, "body": "I see... This works! Wow. Can you explain why the extra template parameter <code>D</code> is <i>necessary</i>? It looks to me like my friend declaration would enable any <code>A&lt;Derived&gt;</code> to be a friend, but it seems you&#39;d need a separate template parameter for that."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1489611732, "post_id": 42820462, "comment_id": 72752970, "body": "@rwols I added more details. They are two different function templates, for they have different template parameters lists and different arguments. I don&#39;t know how to explain it better..."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 3, "last_activity_date": 1489611609, "last_edit_date": 1489611609, "creation_date": 1489611128, "answer_id": 42820462, "question_id": 42820061, "link": "https://stackoverflow.com/questions/42820061/template-friend-function-in-another-namespace-and-crtp/42820462#42820462", "title": "template friend function in another namespace and CRTP", "body": "<p>Your class definition must look like this:</p>\n\n<pre><code>template &lt;class Derived&gt; class A \n{\n    int data;\n    template &lt;class D, class Y&gt; friend void n1::f(A&lt;D&gt;&amp; a, const Y&amp; y);\n};\n</code></pre>\n\n<p>In fact, function declaration is:</p>\n\n<pre><code>template &lt;class Derived, class Y&gt; void f(n2::A&lt;Derived&gt;&amp; a, const Y&amp; y) \n</code></pre>\n\n<p>While your friend declaration is:</p>\n\n<pre><code>template &lt;class Y&gt; friend void n1::f(A&lt;Derived&gt;&amp; a, const Y&amp; y); \n</code></pre>\n\n<p>In this case, they are different beasts and that's why you receive that error. As you can see, template parameters lists are different. That's not a declaration of a function with a separated definition. They are two different function templates, one declared and the other one both declared and defined.<br>\nIn other terms, in your code you are declaring a friend function but you never define it. On the other side, you introduced a free function template that cannot read the <code>data</code> member for it's private and the function isn't a friend one of <code>A&lt;Derived&gt;</code>.</p>\n\n<hr>\n\n<p>See it running on <a href=\"http://melpon.org/wandbox/permlink/NvOJbS8TyiiwOP3x\" rel=\"nofollow noreferrer\">wandbox</a>.</p>\n"}], "owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 42820462, "answer_count": 1, "score": 2, "last_activity_date": 1489611609, "creation_date": 1489609730, "question_id": 42820061, "link": "https://stackoverflow.com/questions/42820061/template-friend-function-in-another-namespace-and-crtp", "title": "template friend function in another namespace and CRTP", "body": "<p>This has been driving me crazy for the past couple hours, and I cannot seem to get around this problem. I have distilled the problem down to these 60 lines of code (including a main function).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace n1 {\n\n// the general definition\ntemplate &lt;class X, class Y&gt; void f(X&amp;, const Y&amp;)\n{\n    std::cout &lt;&lt; \"general template definition.\\n\";\n}\n\n} // namespace n1\nnamespace n2 {\n\n// CRTP\ntemplate &lt;class Derived&gt; class A \n{\n    int data;\n\n    // partial function template specialization for n1::f, and declare\n    // it a friend too, so that it may access the data attribute of A\n    template &lt;class Y&gt; friend void n1::f(A&lt;Derived&gt;&amp; a, const Y&amp; y);\n\n}; // class A\n\n} // namespace n2\nnamespace n1 {\n\n// implementation for this particular function template specialization\ntemplate &lt;class Derived, class Y&gt; void f(n2::A&lt;Derived&gt;&amp; a, const Y&amp; y)\n{\n    std::cout &lt;&lt; \"partial template specialization: \" &lt;&lt; a.data &lt;&lt; \"\\n\";\n}\n\n} // namespace n1\nnamespace n2 {\n\n// Another class!\nclass B : public A&lt;B&gt; \n{\n\n}; // class B    \n} // namespace n2\nnamespace n1 {\n\n// --------------------\n// tricky part is here!\n// --------------------\ntemplate &lt;class Y&gt; void f(n2::B&amp; b, const Y&amp; y)\n{\n    // FAIL! not a friend! How?\n    f(static_cast&lt;n2::A&lt;n2::B&gt;&amp;&gt;(b), y);\n}\n\n} // namespace n1\n\nint main()\n{\n    n2::B b;\n    int x;\n    n1::f(b, x); // should print \"partial template specialization\"\n    return 0;\n}\n</code></pre>\n\n<p>So, what I \"want\" is to have the compiler select my function template specialization of <code>n1::f</code> whenever it is invoked with a concrete subclass of <code>A&lt;Derived&gt;</code>. In order to make sure that the compiler favors my specialization, I need to supply, for every subclass (<code>B</code> in this case), also a template specialization for <code>n1::f</code> that simply delegates the call. When that happens, I expect the <code>data</code> member variable of <code>A&lt;Derived&gt;</code> to be accessible to <code>n1::f</code>, because I declare <code>n1::f</code> to be a friend of <code>A&lt;Derived&gt;</code>. However, GCC complains that <code>A&lt;Derived&gt;::data</code> is private and inaccessible, <a href=\"http://coliru.stacked-crooked.com/a/2f36f9bdf9edc7f9\" rel=\"nofollow noreferrer\">see this snippet on Coliru</a>.</p>\n\n<p>Is this construction possible? If so, how can I get around the compiler complaining that <code>A&lt;Derived&gt;::data</code> is not accessible? (Making it public is not an option).</p>\n"}, {"tags": ["c++", "iterator", "maps", "dereference"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489609733, "post_id": 42820047, "comment_id": 72751807, "body": "It&#39;s because you say <code>j++</code> without checking whether <code>j</code> is already <code>end()</code>."}, {"owner": {"reputation": 37, "user_id": 5890183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/453080d3671c88b3794ed30f503791d1?s=128&d=identicon&r=PG&f=1", "display_name": "r.rodriguez", "link": "https://stackoverflow.com/users/5890183/r-rodriguez"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489610140, "post_id": 42820047, "comment_id": 72752060, "body": "So whats the syntax for that using iterators? <code>j!=words.end()-1;</code> isn&#39;t working"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489610456, "post_id": 42820047, "comment_id": 72752264, "body": "Rethink the algorithm? Maybe replace <code>j++</code> by <code>continue</code>?"}], "owner": {"reputation": 37, "user_id": 5890183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/453080d3671c88b3794ed30f503791d1?s=128&d=identicon&r=PG&f=1", "display_name": "r.rodriguez", "link": "https://stackoverflow.com/users/5890183/r-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489609677, "creation_date": 1489609677, "question_id": 42820047, "link": "https://stackoverflow.com/questions/42820047/map-set-iterator-no-dereferencable-for-seemingly-no-reason", "title": "map/set iterator no dereferencable for seemingly no reason", "body": "<p>I wrote this program which checks if words given in  a list are anagrams of each other, and for some reason my program seems to only get about halfway through running until I get a runtime error that says \"map/set iterator not dereferencable\". Ive been staring at this for a while now and trying to debug it and I can't figure out the problem, so I was hoping someone here could? Below is the code:</p>\n\n<pre><code>// Anagrams.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n#include &lt;set&gt;\n\n\nusing namespace std;\n\nint main()\n{\n    ifstream ifs(\"words.txt\");// opens file\n    if (!ifs) {\n        cout &lt;&lt; \"no file\";\n        exit(1);\n    }\n\n    set&lt;string&gt;anagrams;\n    map&lt;string, string&gt;words;\n    string word;\n    while (ifs &gt;&gt; word) {\n        string sortedWord = word;\n        sort(sortedWord.begin(), sortedWord.end());\n        words.insert(pair&lt;string, string&gt;(word, sortedWord));\n    }\n\n    for (map&lt;string, string&gt;::iterator i = words.begin(); i != words.end(); i++) {\n        //cout &lt;&lt; \"test i for loop\" &lt;&lt; endl;\n        for (map&lt;string, string&gt;::iterator j = words.begin(); j != words.end(); j++) {\n            //cout &lt;&lt; \"test j for loop\" &lt;&lt; endl;\n            if (i-&gt;first == j-&gt;first) {\n                j++;\n            }\n            if (i-&gt;second == j-&gt;second) {\n                anagrams.insert(i-&gt;first);\n                anagrams.insert(j-&gt;first);\n                for (set&lt;string&gt;::iterator i = anagrams.begin(); i != anagrams.end(); i++) {\n                    cout &lt;&lt; *i &lt;&lt; \" \";\n                }\n                cout &lt;&lt; endl;\n                anagrams.clear();\n                //cout &lt;&lt; i-&gt;first &lt;&lt; \" is an anagram of \" &lt;&lt; j-&gt;first &lt;&lt; \" and their sorted version is \" &lt;&lt; i-&gt;second &lt;&lt; endl;\n\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And below is the word list:</p>\n\n<pre><code>monday\ndynamo\nabbot\nacne\nalert\nalter\nbaby\nBaby\nBABY\nbest\nbets\ncane\nlater\nUnix\nUNIX\n</code></pre>\n\n<p>and the output is this before I get the runtime pop-up error:</p>\n\n<pre><code>acne cane\nalert alter\nalert later\nalert alter\nalert later\nbest bets\nbest bets\nacne cane\ndynamo monday\nalert later\nalert later\ndynamo monday\n</code></pre>\n\n<p>then the error.</p>\n\n<p>(Excuse the crappy output, I can fix that later. More concerned with the error at the moment)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "casting", "reference", "user-defined"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1489608908, "creation_date": 1489608908, "answer_id": 42819824, "question_id": 42819714, "link": "https://stackoverflow.com/questions/42819714/user-defined-conversion-operator-doesnt-work-on-references/42819824#42819824", "title": "User-defined conversion operator doesn&#39;t work on references", "body": "<p>This is a <code>const</code> vs non-<code>const</code> issue, not a reference vs object issue.</p>\n\n<p>Using</p>\n\n<pre><code>auto&amp; c = a;\nScalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c);\n</code></pre>\n\n<p>works for me.</p>\n\n<p>By changing the user defined conversion operator to <code>const</code> member function</p>\n\n<pre><code>template &lt;typename U&gt;\nexplicit operator Scalar&lt;U&gt;() const {\n  return Scalar&lt;U&gt;{static_cast&lt;U&gt;(this-&gt;value)};\n}\n</code></pre>\n\n<p>also makes sure that the following works.</p>\n\n<pre><code>const auto&amp; c = a;\nScalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c);\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 1499165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b47e0a6d7984e33e59581d8364cc3dd?s=128&d=identicon&r=PG", "display_name": "misev", "link": "https://stackoverflow.com/users/1499165/misev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 42819824, "answer_count": 1, "score": 0, "last_activity_date": 1489608908, "creation_date": 1489608508, "last_edit_date": 1489608874, "question_id": 42819714, "link": "https://stackoverflow.com/questions/42819714/user-defined-conversion-operator-doesnt-work-on-references", "title": "User-defined conversion operator doesn&#39;t work on references", "body": "<p>I have a simple primitive type wrapper:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Scalar {\n public:\n  explicit Scalar(T value) : value{value} {}\n\n  Scalar(Scalar&amp;&amp; other) = default;\n  Scalar&amp; operator=(Scalar&amp;&amp; other) = default;\n  Scalar(const Scalar&amp; other) = default;\n  Scalar&amp; operator=(const Scalar&amp; other) = default;\n\n  template &lt;typename U&gt;\n  explicit operator Scalar&lt;U&gt;() {\n    return Scalar&lt;U&gt;{static_cast&lt;U&gt;(this-&gt;value)};\n  }\n\n  inline T getValue() const noexcept { return this-&gt;value; }\n private:\n  T value;\n};\n</code></pre>\n\n<p>Casting Scalar values works well, but somehow it fails for references, e.g.</p>\n\n<pre><code>auto a = Scalar&lt;double&gt;{2.54};\nScalar&lt;int&gt; b = static_cast&lt;Scalar&lt;int&gt;&gt;(a); // works\n\nconst auto&amp; c = a;\nScalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c); // fails\n</code></pre>\n\n<p>Here's the compilation error (can be checked here <a href=\"http://rextester.com/GOPYU13091\" rel=\"nofollow noreferrer\">http://rextester.com/GOPYU13091</a>), any ideas what might be the issue here?</p>\n\n<pre><code>source_file.cpp: In function \u2018int main()\u2019:\nsource_file.cpp:31:47: error: no matching function for call to \u2018Scalar(const Scalar&lt;double&gt;&amp;)\u2019\n     Scalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c);\n                                               ^\nsource_file.cpp:12:3: note: candidate: Scalar&lt;T&gt;::Scalar(const Scalar&lt;T&gt;&amp;) [with T = int] &lt;near match&gt;\n   Scalar(const Scalar&amp; other) = default;\n   ^\nsource_file.cpp:12:3: note:   conversion of argument 1 would be ill-formed:\nsource_file.cpp:31:47: error: could not convert \u2018c\u2019 from \u2018const Scalar&lt;double&gt;\u2019 to \u2018const Scalar&lt;int&gt;&amp;\u2019\n     Scalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c);\n                                               ^\nsource_file.cpp:10:3: note: candidate: Scalar&lt;T&gt;::Scalar(Scalar&lt;T&gt;&amp;&amp;) [with T = int] &lt;near match&gt;\n   Scalar(Scalar&amp;&amp; other) = default;\n   ^\nsource_file.cpp:10:3: note:   conversion of argument 1 would be ill-formed:\nsource_file.cpp:31:47: error: could not convert \u2018c\u2019 from \u2018const Scalar&lt;double&gt;\u2019 to \u2018Scalar&lt;int&gt;&amp;&amp;\u2019\n     Scalar&lt;int&gt; d = static_cast&lt;Scalar&lt;int&gt;&gt;(c);\n                                               ^\n</code></pre>\n"}, {"tags": ["c++", "c++11", "std"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1489607858, "post_id": 42819461, "comment_id": 72750792, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/347441/erasing-elements-from-a-vector\">Erasing elements from a vector</a>"}, {"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1489607972, "post_id": 42819461, "comment_id": 72750847, "body": "I think the problem is a bit different, I&#39;m getting an exception for referring to an existing memory location as if it does not exist"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 3, "creation_date": 1489608028, "post_id": 42819461, "comment_id": 72750872, "body": "Have a look to <a href=\"http://stackoverflow.com/questions/8234779/how-to-remove-from-a-map-while-iterating-it\">http://stackoverflow.com/questions/8234779/how-to-remove-fro&zwnj;&#8203;m-a-map-while-iterat&zwnj;&#8203;ing-it</a>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489608158, "post_id": 42819461, "comment_id": 72750934, "body": "It does not exist, because you just freed it, and thus you are not allowed to access it. @em2er&#39;s duplicate is a bit better than mine though :)"}, {"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1489608392, "post_id": 42819461, "comment_id": 72751067, "body": "@Rakete1111 How come.. does the iterator life end after printing? and how about the second case? I&#39;m simply printing whatever is inside it then I clear without any iterators. + I&#39;m using the new version so there should not be any problem."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1489608744, "post_id": 42819461, "comment_id": 72751256, "body": "@user7631183 Deleting an iterator without using the idiom stated in the answers in a loop through the vector owning that iterator results in undefined behavior, because the iterators are invalidated. Basically, <code>printMap</code> has UB. See the answers linked please. And yes the iterator&#39;s life ends, but the element still exists (as long as you didn&#39;t remove it)."}, {"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1489609471, "post_id": 42819461, "comment_id": 72751648, "body": "@Rakete1111 I did follow the same approach but still the same problem :("}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1489610240, "post_id": 42819461, "comment_id": 72752117, "body": "What types are contained in your <code>map</code>?  Are you sure one of their destructors isn&#39;t what&#39;s causing the error?"}, {"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1489610900, "post_id": 42819461, "comment_id": 72752531, "body": "@MilesBudnek Here is the definition of it <code>std::map &lt;int, std::string&gt; MyMap;</code> I&#39;m using the one from std without changing anything in their destructors so I don&#39;t think there is a problem in here"}], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489609751, "post_id": 42819986, "comment_id": 72751819, "body": "When I tried this I got this error: thread 1 signal sigabrt. I complied it then run again I got the old error."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 1, "creation_date": 1489610297, "post_id": 42819986, "comment_id": 72752156, "body": "thread 1 signal abort would most likely mean an unhandled exception has occurred in a thread and may be completely unrelated. This is why it is important to narrow down what you are asking to the simplest test case possible and post that code with the question. If you create a new console application, create an std::map, fill it up with elements, and then use the given loop to erase, and have no other code in the application, you will see how it erases without error. As to the other errors, we have no idea, because we cannot possibly imagine what is in code that is not posted or debug it."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489610514, "post_id": 42819986, "comment_id": 72752298, "body": "for debugging unhandled exceptions, you can try enabling the break on exception in the exceptions dialog in Visual Studio, if that happens to be the IDE you are using. See <a href=\"https://msdn.microsoft.com/en-us/library/x85tt0dd.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/x85tt0dd.aspx</a>"}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 3, "last_activity_date": 1489609478, "creation_date": 1489609478, "answer_id": 42819986, "question_id": 42819461, "link": "https://stackoverflow.com/questions/42819461/iterating-over-map-and-erasing-element/42819986#42819986", "title": "Iterating over map and erasing element", "body": "<p>When you erase an element out of the map, you have invalidated the iterator you are using in the loop, thus causing error. The erase method returns an iterator for this reason.</p>\n\n<pre><code>for( auto it = MyMap.begin(); it != MyMap.end(); )\n{\n    std::cout &lt;&lt; it-&gt;second;\n    it = MyMap.erase(it);\n}\n</code></pre>\n\n<p>This is indeed a duplicate question. You just don't understand it well enough to see that it is a duplicate. I hope the explanation of invalidating the iterator helps clear it up.</p>\n"}, {"comments": [{"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489609960, "post_id": 42820005, "comment_id": 72751949, "body": "I used this code as exact and I&#39;m still getting the same error"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489610197, "post_id": 42820005, "comment_id": 72752089, "body": "Then, my guess is you are probably iterating a corrupted <code>std::map</code> to begin with.  Have you tried any other of the other idioms described on <a href=\"http://stackoverflow.com/questions/8234779/\">How to remove from a map while iterating it?</a>? Do they exhibit the same errors?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489614116, "post_id": 42820005, "comment_id": 72754172, "body": "Then your <code>std::map</code> is most likely corrupted, because these are proven idioms that are known to work under normal conditions."}, {"owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489646025, "post_id": 42820005, "comment_id": 72764187, "body": "it seems to be the case. Is there any alternative for the map that are efficient performance and memory wise?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "edited": false, "score": 0, "creation_date": 1489686900, "post_id": 42820005, "comment_id": 72791970, "body": "@user7631183 I think you missed my point. You are clearly operating on an invalid <code>std::map</code>, you need to figure out why and fix it, not try to work around it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1489610155, "last_edit_date": 1489610155, "creation_date": 1489609538, "answer_id": 42820005, "question_id": 42819461, "link": "https://stackoverflow.com/questions/42819461/iterating-over-map-and-erasing-element/42820005#42820005", "title": "Iterating over map and erasing element", "body": "<p>In C++11 and later, <a href=\"http://en.cppreference.com/w/cpp/container/map/erase\" rel=\"nofollow noreferrer\"><code>std:map::erase()</code></a> returns an <code>iterator</code> to the element following the one being erased.  Since you are using <code>auto</code>, you are using C++11 or later, so you can use the new iterator when erasing while looping through the <code>std::map</code>, eg:</p>\n\n<pre><code>void printMap(){\n    auto it = MyMap.cbegin();\n    while (it != MyMap.cend()) {\n        std::cout &lt;&lt; it-&gt;second;\n        it = MyMap.erase(it);\n    }\n}\n</code></pre>\n\n<p>Also, since you are using C++11, your first print function can be simplified using a <code>range-for</code> loop:</p>\n\n<pre><code>void printMap(){\n    for ( auto &amp;it: MyMap ){\n        std::cout &lt;&lt; it.second;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 806, "user_id": 7631183, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb7367e91c69b2ad355a235b16c0d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/7631183/wanderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1489656561, "creation_date": 1489607660, "last_edit_date": 1495535394, "question_id": 42819461, "link": "https://stackoverflow.com/questions/42819461/iterating-over-map-and-erasing-element", "title": "Iterating over map and erasing element", "body": "<p>I have a global variable as a <code>map</code> and a function that iterates over the elements of this <code>map</code> such as: </p>\n\n<pre><code>void printMap(){\n    for ( auto it = MyMap.begin(); it != MyMap.end(); ++it  ){\n        std::cout &lt;&lt; it-&gt;second;\n    }\n}\n</code></pre>\n\n<p>which works fine. <br> </p>\n\n<p>I want to add a functionality to the function which is after printing an element, it should be erased from the <code>map</code> like this:</p>\n\n<pre><code>void printMap(){\n    for ( auto it = MyMap.begin(); it != MyMap.end(); ++it  ){\n        std::cout &lt;&lt; it-&gt;second;\n        MyMap.erase(it);\n    }\n}\n</code></pre>\n\n<p>However, by adding the erase line I got an exception error of this type: </p>\n\n<blockquote>\n  <p>Thread 2: EXC_BAD_ACCESS (code=1, address=0x20000002)</p>\n</blockquote>\n\n<p>I tried another way which is like this: </p>\n\n<pre><code>void myFunction(){\n    printMap(); \n    MyMap.clear();\n}\n</code></pre>\n\n<p>but I also got the same exception </p>\n\n<blockquote>\n  <p>Thread 2: EXC_BAD_ACCESS (code=1, address=0x0) </p>\n</blockquote>\n\n<p>As I understand this kind of exception occurs when we refer to a memory location that does not exist. But I know it is there since the iterator got its value and it was printed. Even so I used the second method just in case that I don't refer to non-existing memory location but still I'm getting the exception. </p>\n\n<p>So how can I iterate over the elements print the result then erase it? </p>\n\n<p><strong>UPDATE1</strong><br>\nfollowing the suggestions below and the linked topic I changed my function into this:</p>\n\n<pre><code>void printMap(){\n    bool i = true;\n    for (auto it = MyMap.cbegin(), next_it = MyMap.cbegin(); it != MyMap.cend(); it = next_it)\n    {\n        cout &lt;&lt; it-&gt;second;\n        next_it = it; ++next_it;\n        if (i) {\n            MyMap.erase(it);\n        }\n\n    }\n}\n</code></pre>\n\n<p>I have also tried this <a href=\"https://stackoverflow.com/a/42820005/7631183\">https://stackoverflow.com/a/42820005/7631183</a> and this <a href=\"https://stackoverflow.com/a/42819986/7631183\">https://stackoverflow.com/a/42819986/7631183</a> <br> </p>\n\n<p>The problem is still <strong>not</strong> solved and I'm getting the same error </p>\n\n<p><br><br><br> \n<strong>UPDATE2</strong><br>\nI run the same exact code on a different machine and it worked fine. I still don't know what is the reason so I would guess as suggested in the comments that <code>std::map</code> on the first had some problems. </p>\n\n<p>P.S. The first machine was a mac and the second was a Linux </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 406, "user_id": 7451905, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10154898515247145/picture?type=large", "display_name": "Saim Mahmood", "link": "https://stackoverflow.com/users/7451905/saim-mahmood"}, "edited": false, "score": 0, "creation_date": 1489607663, "post_id": 42819447, "comment_id": 72750667, "body": "did you try count &lt;= length?"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1489607780, "post_id": 42819447, "comment_id": 72750747, "body": "Might be your problem: <a href=\"http://stackoverflow.com/questions/7594508/modulo-operator-with-negative-values\" title=\"modulo operator with negative values\">stackoverflow.com/questions/7594508/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 7705206, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210373484951539/picture?type=large", "display_name": "Jake Purdom", "link": "https://stackoverflow.com/users/7705206/jake-purdom"}, "edited": false, "score": 0, "creation_date": 1489608566, "post_id": 42819447, "comment_id": 72751171, "body": "If code is 10bexrrywoi1459&amp;4#9 then it comes in as                                run home 1459. which is right.    If the offset is 11 or more then it comes out                                                                                                                   run home 1451. No matter what the offset is above 11. Weird"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489609713, "post_id": 42819447, "comment_id": 72751797, "body": "@JakePurdom Have you tried stepping through the program with a debugger?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489609971, "post_id": 42819447, "comment_id": 72751954, "body": "Why does <code>1459</code> decode to <code>1459</code>? Shouldn&#39;t it decode to something else that depends on the offset?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489610014, "post_id": 42819447, "comment_id": 72751983, "body": "To know the correct way to decode it, we need to see how the encoding algorithm works."}], "answers": [{"comments": [{"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "reply_to_user": {"reputation": 1, "user_id": 7705206, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210373484951539/picture?type=large", "display_name": "Jake Purdom", "link": "https://stackoverflow.com/users/7705206/jake-purdom"}, "edited": false, "score": 0, "creation_date": 1489613140, "post_id": 42820080, "comment_id": 72753715, "body": "@JakePurdom -  You&#39;re very welcome.  One thing to keep in mind.  The same thing will probably occur with letters, if the offset is greater than 26."}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "reply_to_user": {"reputation": 1, "user_id": 7705206, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210373484951539/picture?type=large", "display_name": "Jake Purdom", "link": "https://stackoverflow.com/users/7705206/jake-purdom"}, "edited": false, "score": 0, "creation_date": 1489618870, "post_id": 42820080, "comment_id": 72756248, "body": "@JakePurdom - If you&#39;ve found an answer that answers your question, please remember to mark it so.  Thanks."}], "tags": [], "owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "is_accepted": false, "score": -1, "last_activity_date": 1489612958, "last_edit_date": 1489612958, "creation_date": 1489609781, "answer_id": 42820080, "question_id": 42819447, "link": "https://stackoverflow.com/questions/42819447/decrypting-caesar-cipher-fails-when-offset-is-11-or-more/42820080#42820080", "title": "Decrypting Caesar cipher fails when offset is 11 or more", "body": "<p>It looks to me that when the offset becomes greater than 10, adding 10 doesn't create the appropriate positive value on any digit that is equal to or less than the difference between the offset and 10.  One work around is to mod 10 the offset:</p>\n\n<pre><code>dmsg += ( abs( msg[count] - '0' - ( offset % 10 ) + 10 ) % 10 ) + '0';\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7705206, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210373484951539/picture?type=large", "display_name": "Jake Purdom", "link": "https://stackoverflow.com/users/7705206/jake-purdom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1489612958, "creation_date": 1489607602, "last_edit_date": 1489609692, "question_id": 42819447, "link": "https://stackoverflow.com/questions/42819447/decrypting-caesar-cipher-fails-when-offset-is-11-or-more", "title": "Decrypting Caesar cipher fails when offset is 11 or more", "body": "<p>I am doing a decryption program. I've been looking and trying to figure this out, but I don't see anything. So when I decrypt such as <code>9adwrqxvni0348&amp;4#9</code> it comes out fine, but when I have an offset of <code>11</code> or more it decrypts all but the last character. No matter what the offset past <code>11</code> is the last character is that same. I just now stuck all letters in, and they work. It is just the last number character that does not work past <code>11</code>. </p>\n\n<pre><code>for (int count = 0; count &lt; length; count++)\n{\n    if (msg[count] &gt;= 'a' &amp;&amp; msg[count] &lt;= 'z')//Letter wraping\n    {\n        dmsg += ((msg[count] - 'a' - offset + 26) % 26) + 'a';\n    }\n    else if (msg[count] &gt;= '0' &amp;&amp; msg[count] &lt;= '9')//Number wraping\n    {\n        dmsg += (abs(msg[count] - '0' - offset + 10) % 10) + '0';\n    }       \n}\n</code></pre>\n"}, {"tags": ["c++", "input", "maps", "streaming"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1489607593, "post_id": 42819400, "comment_id": 72750627, "body": "in what problem read <i>all or partial</i> file in buffer first and then put each character in a map with a corresponding key ?"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1489607665, "post_id": 42819400, "comment_id": 72750670, "body": "How do you create the key for each char?"}, {"owner": {"reputation": 23, "user_id": 7448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0985763fb8df793e693ef53a4ef035?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7448318/joe"}, "edited": false, "score": 0, "creation_date": 1489607774, "post_id": 42819400, "comment_id": 72750746, "body": "I&#39;m using a multimap, put the character in the key and then the line number and position in each line as a vector of ints for the association"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489610093, "post_id": 42819400, "comment_id": 72752034, "body": "Maybe you can save the map in another file, so you don&#39;t have to recreate it every time."}], "answers": [{"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 0, "last_activity_date": 1489662020, "creation_date": 1489662020, "answer_id": 42832180, "question_id": 42819400, "link": "https://stackoverflow.com/questions/42819400/reading-in-a-large-file/42832180#42832180", "title": "Reading in a large file", "body": "<p>Well, yes, ir gonna take forever, but you can use a <code>std::unordered_multimap</code> to speed it up a little, by skipping the sort phase.</p>\n"}], "owner": {"reputation": 23, "user_id": 7448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0985763fb8df793e693ef53a4ef035?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7448318/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1489662020, "creation_date": 1489607446, "last_edit_date": 1489607614, "question_id": 42819400, "link": "https://stackoverflow.com/questions/42819400/reading-in-a-large-file", "title": "Reading in a large file", "body": "<p>I have to read in a large file, character by character, and put each character in a <code>map</code> with a corresponding key. My question is, is there a way to read in the file to the <code>map</code> and save it there, so the program doesn't have to read the whole file character by character each time (takes forever)? \nThe characters are used later in the program to do an encode/decode thing. </p>\n"}, {"tags": ["c++", "csv", "for-loop", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1489608589, "post_id": 42819406, "comment_id": 72751178, "body": "I added code to your solution to print the columns! See if it makes sense"}, {"owner": {"reputation": 5812, "user_id": 735425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x7BUU.png?s=128&g=1", "display_name": "ssell", "link": "https://stackoverflow.com/users/735425/ssell"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1489609158, "post_id": 42819406, "comment_id": 72751477, "body": "@user2979872 You had the gist of it. See my latest revision."}, {"owner": {"reputation": 5812, "user_id": 735425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x7BUU.png?s=128&g=1", "display_name": "ssell", "link": "https://stackoverflow.com/users/735425/ssell"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1489609291, "post_id": 42819406, "comment_id": 72751546, "body": "@user2979872 Also keep in mind that CSV files use comma delimiters (hence the name Comma Separated Values). So your first column <code>cmd</code> does not have the extra space that the subsequent ones do (since the CSV parser only splits on commas). Also I would argue that <code>row</code> is a better name than <code>loop</code>, but I understand that is the name used in the original answer you reference."}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1489609382, "post_id": 42819406, "comment_id": 72751590, "body": "Thanks very much. Noted and duly appreciated."}], "tags": [], "owner": {"reputation": 5812, "user_id": 735425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x7BUU.png?s=128&g=1", "display_name": "ssell", "link": "https://stackoverflow.com/users/735425/ssell"}, "is_accepted": true, "score": 1, "last_activity_date": 1489609137, "last_edit_date": 1489609137, "creation_date": 1489607454, "answer_id": 42819406, "question_id": 42819204, "link": "https://stackoverflow.com/questions/42819204/iterator-to-count-the-number-of-columns-in-csv-using-c/42819406#42819406", "title": "Iterator to count the number of columns in csv using C++", "body": "<p>If you read through the <code>CSVIterator</code> code, it makes use of the <code>CSVRow</code> class which has the following method:</p>\n\n<pre><code>std::size_t size() const\n{\n    return m_data.size();\n}\n</code></pre>\n\n<p>Where <code>m_data</code> is a <code>std::vector&lt;std::string&gt;</code> where each <code>std::string</code> is an individual column in the row. So calling <code>CSVRow::size</code> returns the number of columns.</p>\n\n<pre><code>int main()\n{\n    std::ifstream file(\"plop.csv\");\n\n    for(CSVIterator loop(file); loop != CSVIterator(); ++loop)\n    {\n        const auto numCols = (*loop).size();\n\n        std::cout &lt;&lt; \"Number of Columns: \" &lt;&lt; numCols &lt;&lt; std::endl;\n\n        for(std::size_t i = 0; i &lt; numCols; ++i)\n        {\n            // Print each column on a new line\n            std::cout &lt;&lt; (*loop)[i] &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>For input:</p>\n\n<pre><code>cmd, id, addr, qos, len, lock, prot, burst, size, cache, user, duser, dstrb, data\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Number of Columns: 14\ncmd\n id\n addr\n qos\n len\n lock\n prot\n burst\n size\n cache\n user\n duser\n dstrb\n data\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2044, "favorite_count": 0, "accepted_answer_id": 42819406, "answer_count": 1, "score": 1, "last_activity_date": 1489609137, "creation_date": 1489606717, "last_edit_date": 1495540825, "question_id": 42819204, "link": "https://stackoverflow.com/questions/42819204/iterator-to-count-the-number-of-columns-in-csv-using-c", "title": "Iterator to count the number of columns in csv using C++", "body": "<p>I am following the solution code by Loki Astari on </p>\n\n<p><a href=\"https://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c?rq=1\">How can I read and parse CSV files in C++?</a></p>\n\n<p>How can i write an iterator in the main function to count the number of columns from CSV header</p>\n\n<pre><code>int main()\n{\n    std::ifstream       file(\"plop.csv\");\n\n    for(CSVIterator loop(file); loop != CSVIterator(); ++loop)\n    {\n        //Instead of printing the 4th element as shown below, I want to  print all the\n        //columns and thus determine the number of columns\n\n         //std::cout &lt;&lt; \"4th Element(\" &lt;&lt; (*loop)[3] &lt;&lt; \")\\n\";\n\n\n    }\n}\n</code></pre>\n\n<p>Here is an example header of a csv file I am working with</p>\n\n<pre><code>cmd, id, addr, qos, len, lock, prot, burst, size, cache, user, duser, dstrb, data\n</code></pre>\n\n<p>I want to print them using an iterator or some for loop and determine the number of columns which in this case is 14</p>\n"}, {"tags": ["c++", "eclipse", "compiler-errors", "botan"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1490205529, "post_id": 42819201, "comment_id": 73013010, "body": "See <a href=\"http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_proj_paths.htm\" rel=\"nofollow noreferrer\">Adding Include paths and symbols</a> in Eclipse Help Center and <a href=\"http://stackoverflow.com/q/2705947/608639\">With Eclipse: How to add include paths and libraries for all your C/C++ project</a> on Stack Overflow."}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 11854211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e124698e84294b5539204ab34fbed89?s=128&d=identicon&r=PG&f=1", "display_name": "fborges22", "link": "https://stackoverflow.com/users/11854211/fborges22"}, "is_accepted": false, "score": 0, "last_activity_date": 1565041234, "last_edit_date": 1565041234, "creation_date": 1565039873, "answer_id": 57366205, "question_id": 42819201, "link": "https://stackoverflow.com/questions/42819201/using-botan-library-with-eclispse/57366205#57366205", "title": "Using Botan library with Eclispse", "body": "<p>You need to add to your gcc command line the <code>-lbotan</code> option in order to compile correctly.</p>\n"}], "owner": {"reputation": 31, "user_id": 6914115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d64daf97b8670ea42390aec582598a0?s=128&d=identicon&r=PG&f=1", "display_name": "A.Salem", "link": "https://stackoverflow.com/users/6914115/a-salem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565041234, "creation_date": 1489606713, "last_edit_date": 1490205434, "question_id": 42819201, "link": "https://stackoverflow.com/questions/42819201/using-botan-library-with-eclispse", "title": "Using Botan library with Eclispse", "body": "<p>I am trying to use botan library with eclipse. I have compiled botan using Ubuntu and I created small program as follow</p>\n\n<pre><code>#include &lt;botan/botan.h&gt;\nint main()\n{\n    LibraryInitializer init;\n    return 0;\n}\n</code></pre>\n\n<p>But I have got fatal error: <code>botan/build.h: No such file or directory</code></p>\n\n<p>Thanks in advance and waiting for help.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1489606691, "post_id": 42819140, "comment_id": 72750082, "body": "Try it. Report if you run into any problems."}, {"owner": {"reputation": 868, "user_id": 5037033, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/100003248915821/picture?type=large", "display_name": "ShS", "link": "https://stackoverflow.com/users/5037033/shs"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1489606873, "post_id": 42819140, "comment_id": 72750198, "body": "@RSahu well this is obviously wrong. <code>It gives me: error: &#39;T::Choices&#39; is not a type</code> and <code>error: too many template-parameter-lists</code>"}], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 5037033, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/100003248915821/picture?type=large", "display_name": "ShS", "link": "https://stackoverflow.com/users/5037033/shs"}, "edited": false, "score": 0, "creation_date": 1489662280, "post_id": 42820613, "comment_id": 72774005, "body": "Ha I like this."}], "tags": [], "owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "is_accepted": true, "score": 1, "last_activity_date": 1489612043, "last_edit_date": 1489612043, "creation_date": 1489611736, "answer_id": 42820613, "question_id": 42819140, "link": "https://stackoverflow.com/questions/42819140/c-inferring-template-type-from-a-dependent-type/42820613#42820613", "title": "C++: &quot;Inferring&quot; template type from a dependent type", "body": "<p>I believe this is the best you can do using the idea of traits:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct choice_traits;\n\nclass MyClass{\npublic:\n    enum Choices : int\n    {\n        First,\n        Last\n    };\n    template&lt;MyClass::Choices choice&gt;\n    void bar(...) {}\n};\n\ntemplate &lt;&gt;\nstruct choice_traits&lt;MyClass::Choices&gt;\n{\n    using parent = MyClass;\n};\n\ntemplate &lt;MyClass::Choices C&gt;\nusing choice_const = std::integral_constant&lt;MyClass::Choices, C&gt;;\n\ntemplate &lt;typename C, C value&gt;\nvoid foo(std::integral_constant&lt;C, value&gt;)\n{\n    using T = typename choice_traits&lt;C&gt;::parent;\n\n    T* t = new T();\n\n    t-&gt;template bar&lt;value&gt;();\n}\n\nint main()\n{\n    foo(choice_const&lt;MyClass::Choices::First&gt;());\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>You need to specialize <code>choice_traits</code> for each container class that has an enum of choices. I also created a helper <code>choice_const</code> in order to avoid directly using <code>std::integral_constant</code>.</p>\n\n<p>It could be improved upon if there was more information but that's as much as can be done based on your explanation.</p>\n"}], "owner": {"reputation": 868, "user_id": 5037033, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/100003248915821/picture?type=large", "display_name": "ShS", "link": "https://stackoverflow.com/users/5037033/shs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42820613, "answer_count": 1, "score": 0, "last_activity_date": 1489612043, "creation_date": 1489606522, "last_edit_date": 1489606738, "question_id": 42819140, "link": "https://stackoverflow.com/questions/42819140/c-inferring-template-type-from-a-dependent-type", "title": "C++: &quot;Inferring&quot; template type from a dependent type", "body": "<p>I have a class:</p>\n\n<pre><code>class MyClass{\n    enum Choices : int\n    {\n        First,\n        Last\n    };\n    template&lt;MyClass::Choices choice&gt;\n    void bar(...);\n};\n</code></pre>\n\n<p>I want to be able to make a <code>choice</code>-templated call to <code>bar()</code> in the client code. Now since I don't want the client code to be in charge of managing the <code>MyClass</code> instances, I want to add another layer to be responsible for that, so that I would have:</p>\n\n<pre><code>{\n   t = new T();\n   t.bar&lt;choice&gt;();\n};\n</code></pre>\n\n<p>inside the function.</p>\n\n<p>Ideally, I would like to be able to call this layer, let's call it <code>foo()</code>, like this:</p>\n\n<pre><code>foo&lt;MyClass::Choices::One&gt;(...);\n</code></pre>\n\n<p>Is this possible? This is what I tried and am getting errors:</p>\n\n<pre><code>template&lt;typename T&gt;\ntemplate&lt;T::Choices choice&gt;\nvoid foo(){\n   t = new T();\n   t.bar&lt;choice&gt;();\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "for-loop", "vector", "stl"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1489606584, "post_id": 42819120, "comment_id": 72750001, "body": "<code>print_vector(&amp;xVector)</code> should be <code>print_vector(xVector)</code>."}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489606595, "post_id": 42819120, "comment_id": 72750010, "body": "use <code>print_vector(xVector);</code>"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1489606658, "post_id": 42819120, "comment_id": 72750061, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate()</code></a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1489606679, "post_id": 42819120, "comment_id": 72750075, "body": "It clearly says &quot;remove &amp;&quot; in the error message. Can you read?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1489606716, "post_id": 42819120, "comment_id": 72750099, "body": "BTW, your average will have rounding problem."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1489607013, "post_id": 42819120, "comment_id": 72750262, "body": "<code>if(x == xVector[y].size())</code> this condition will never be satisfied after <code>for(int x = 0; x &lt; xVector[y].size(); ++x)</code>"}, {"owner": {"reputation": 35, "user_id": 7709836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f22650229ed828ecf720231585ac8edb?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7709836/dan"}, "edited": false, "score": 0, "creation_date": 1489607049, "post_id": 42819120, "comment_id": 72750291, "body": "Sorry for not seeing &amp; part, but still the average function does not work.."}], "answers": [{"tags": [], "owner": {"reputation": 529, "user_id": 7401196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743a2271f4fff01a3667ec33f15e9023?s=128&d=identicon&r=PG&f=1", "display_name": "E.D.", "link": "https://stackoverflow.com/users/7401196/e-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1489607194, "creation_date": 1489607194, "answer_id": 42819333, "question_id": 42819120, "link": "https://stackoverflow.com/questions/42819120/average-vector-in-c/42819333#42819333", "title": "Average_vector in C++", "body": "<p>I think the comments have sufficiently addressed you issues with the error, so this is addressed to your question about your algorithm. You'll want to iterate over each value in a 2d vector, so nesting a loop in a loop is a pretty natural way of doing it. It should be something like this:<br></p>\n\n<pre><code>int sum, avg;\nfor(int y = 0; y &lt; xVector.size(); y++) {\n    sum = 0;\n    for(int x = 0; x &lt; xVector[y].size(); x++) {\n        sum += xVector[y][x];\n    }\n    avg = sum / (float) xVector[y].size();\n    for(int x = 0; x &lt; xVector[y].size(); x++) {\n        xVector[y][x] = avg;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1489607322, "creation_date": 1489607322, "answer_id": 42819366, "question_id": 42819120, "link": "https://stackoverflow.com/questions/42819120/average-vector-in-c/42819366#42819366", "title": "Average_vector in C++", "body": "<p>With <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">range-v3</a>, it would be:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt; &gt; v{{1, 2, 3}, {2, 2, 5}, {4, 4, 1 }};\n\nauto flat = v | ranges::view::join;\nauto total = ranges::accumulate(flat, 0);\nauto count =  flat.size();\n\nfor (auto&amp; e : flat) {\n    e = total / count;\n    total -= e;\n    --count;\n}\nprint_vector(v);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4598197adb2f1b7e\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 35, "user_id": 7709836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f22650229ed828ecf720231585ac8edb?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/7709836/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489607322, "creation_date": 1489606462, "last_edit_date": 1489606586, "question_id": 42819120, "link": "https://stackoverflow.com/questions/42819120/average-vector-in-c", "title": "Average_vector in C++", "body": "<p>I am working on generating average from vectors and having the avg as the vector outputs.</p>\n\n<p>for example,</p>\n\n<pre><code>1 2 3\n2 2 5\n4 4 1 \n</code></pre>\n\n<p>This will return to</p>\n\n<pre><code>2 2 2 \n3 3 3 \n3 3 3 \n</code></pre>\n\n<p>However, when working with my code below, I get </p>\n\n<blockquote>\n  <p>part2.cpp:48:2: error: no matching function for call to 'print_vector'\n         print_vector(&amp;xVector);\n         ^~~~~~~~~~~~\n  part2.cpp:15:6: note: candidate function not viable: no known conversion >from\n       'std::vector > *' to 'std::vector > &amp;'\n       for 1st argument; remove &amp;\n  void print_vector(std::vector >&amp; xVector)\n      ^</p>\n</blockquote>\n\n<p>I dont know which part is the problem.\nAlso, I feel like the algorithm that is necessary for the averaging the vectors is related to double loop and just want to make sure if the logic and code are correct.</p>\n\n<p>*I have a function that populates the vector in another cpp file. </p>\n\n<pre><code>void print_vector(std::vector&lt;std::vector&lt;int&gt; &gt;&amp; xVector)\n{\n        for(int y = 0; y &lt; xVector.size(); ++y)\n        {\n                for(int x = 0; x &lt; xVector[y].size(); ++x)\n                        cout &lt;&lt; xVector[y][x] &lt;&lt; \" \";\n\n                cout &lt;&lt; endl;\n        }\n}\n\nvoid average_vector(std::vector&lt;std::vector&lt;int&gt; &gt;&amp; xVector)\n{\n    int sum;\n    int avg;\n    for(int y = 0; y &lt; xVector.size(); ++y)\n    {\n        for(int x = 0; x &lt; xVector[y].size(); ++x)\n        {\n             sum += xVector[y][x];\n             if(x == xVector[y].size())\n             {\n                 avg = sum / xVector[y].size();\n                 for(int z = 0; z &lt; xVector.size(); ++z)\n                 {\n                     for(int a = 0; a &lt; xVector[z].size(); ++a)\n                     {\n                         xVector[a][z] = avg;\n                     }\n                 }\n             }\n        }\n    }\n    print_vector(&amp;xVector);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt4", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 6607, "user_id": 1150303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/675c7070033721308d1513f991193ae2?s=128&d=identicon&r=PG", "display_name": "DomTomCat", "link": "https://stackoverflow.com/users/1150303/domtomcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1489606959, "last_edit_date": 1489606959, "creation_date": 1489606292, "answer_id": 42819065, "question_id": 42819064, "link": "https://stackoverflow.com/questions/42819064/check-determine-if-qstring-contains-html/42819065#42819065", "title": "check/determine if QString contains html", "body": "<p>A solution can be to use <a href=\"http://doc.qt.io/qt-5/qt.html#mightBeRichText\" rel=\"nofollow noreferrer\">Qt::mightBeRichText</a> for <code>QString</code>:</p>\n\n<pre><code>#include &lt;QTextDocument&gt;\n\nQString ensurePlainText(const QString&amp; text)\n{\n    QString out;\n    if (Qt::mightBeRichText(text))\n    {\n        // is html -&gt; convert to plain text\n        QTextDocument text;\n        text.setHtml(value.toString());\n        out = text.toPlainText();\n    }\n    else\n    {\n        out = text;\n    }\n    return out;\n}\n</code></pre>\n\n<p>It is important to note that the presented method <a href=\"http://doc.qt.io/qt-5/qt.html#mightBeRichText\" rel=\"nofollow noreferrer\">uses a heuristic</a>. It may fail to detect html or falsely detect html in a non-html text. The former may return html tags in the string. The latter would, for instance, strip newline characters from the text.</p>\n"}], "owner": {"reputation": 6607, "user_id": 1150303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/675c7070033721308d1513f991193ae2?s=128&d=identicon&r=PG", "display_name": "DomTomCat", "link": "https://stackoverflow.com/users/1150303/domtomcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489647343, "creation_date": 1489606292, "last_edit_date": 1489647343, "question_id": 42819064, "link": "https://stackoverflow.com/questions/42819064/check-determine-if-qstring-contains-html", "title": "check/determine if QString contains html", "body": "<p>Since I wasn't able to find a suitable solution here, I wanted to Q&amp;A this question: </p>\n\n<p>Is there a way to determine if a <code>QString</code> is made of html, i.e. is rich-text, (or at least, contains html)?</p>\n\n<p>This may be the case for unknown/<code>QVariant</code> calls to <code>setData</code> of data editors in the <a href=\"http://doc.qt.io/qt-5/model-view-programming.html\" rel=\"nofollow noreferrer\">table/view model</a>.</p>\n"}, {"tags": ["c++", "text-to-speech"], "comments": [{"owner": {"reputation": 2592, "user_id": 3507061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/pyZFP.png?s=128&g=1", "display_name": "GavinBrelstaff", "link": "https://stackoverflow.com/users/3507061/gavinbrelstaff"}, "edited": false, "score": 0, "creation_date": 1489606909, "post_id": 42819007, "comment_id": 72750214, "body": "Microsoft has quite a few SAPI5 voices - which one are you using as your reference?  You might find it more useful to use a non MS voice as reference since some are much better - and they may have paid more attention to details such as  consistent rate variation . IMO  IVONA do v.good English voices."}, {"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "reply_to_user": {"reputation": 2592, "user_id": 3507061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/pyZFP.png?s=128&g=1", "display_name": "GavinBrelstaff", "link": "https://stackoverflow.com/users/3507061/gavinbrelstaff"}, "edited": false, "score": 0, "creation_date": 1489607201, "post_id": 42819007, "comment_id": 72750382, "body": "@GavinBrelstaff I can assure you as a developer that Microsoft did a great job on their voices. Any tags supported, all events fired, all data conversion done brilliantly. Ivona is not so good at it in the languages I tried."}], "answers": [{"comments": [{"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1489609472, "post_id": 42819466, "comment_id": 72751649, "body": "Are you sure? Could this be put into a formula?"}, {"owner": {"reputation": 2592, "user_id": 3507061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/pyZFP.png?s=128&g=1", "display_name": "GavinBrelstaff", "link": "https://stackoverflow.com/users/3507061/gavinbrelstaff"}, "reply_to_user": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1489676059, "post_id": 42819466, "comment_id": 72784059, "body": "@tmighty rather than a formula I give you a lookup table that you can use find the multiplier  you need for each of the 21 different rates"}], "tags": [], "owner": {"reputation": 2592, "user_id": 3507061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/pyZFP.png?s=128&g=1", "display_name": "GavinBrelstaff", "link": "https://stackoverflow.com/users/3507061/gavinbrelstaff"}, "is_accepted": true, "score": 1, "last_activity_date": 1489673019, "last_edit_date": 1489673019, "creation_date": 1489607687, "answer_id": 42819466, "question_id": 42819007, "link": "https://stackoverflow.com/questions/42819007/sapi-rate-formula-evaluation/42819466#42819466", "title": "SAPI rate formula evaluation", "body": "<p>Using IVONA 2 Amy (English UK) SAPI5 Voice reading the phrase <code>One Two Three Four Five.</code> I get a strictly linear relation for duration v. the slowing (negative) rate.\nBut for the speeding (positive) rate the relation is not the same.  It could be linear with a different slope.</p>\n\n<pre><code>Rate Duration (s)   \n-10 3.0   150%\n-9  2.9   145%\n-8  2.8   140%\n-7  2.7   135%\n-6  2.6   130%\n-5  2.5   125%\n-4  2.4   120%\n-3  2.3   115%\n-2  2.2   110%\n-1  2.1   105%\n 0  2.0   100%\n+1  1.8   90%\n+2  1.7   85%\n+3  1.6   80%\n+4  1.4   70%\n+5  1.3   65%\n+6  1.1   55%\n+7  1.0   50%\n+8  0.8   40%\n+9  0.7   35%\n+10 0.5   25%\n</code></pre>\n\n<p>Since there are only 21 discrete levels you could avoid a formula and simply use the percentage <strong>lookup table</strong> that I provide above in column 3. Here is the plot for your inspection.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZYEWL.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZYEWL.gif\" alt=\"Plot of duration v. rate\"></a></p>\n"}], "owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42819466, "answer_count": 1, "score": 0, "last_activity_date": 1489673019, "creation_date": 1489606162, "question_id": 42819007, "link": "https://stackoverflow.com/questions/42819007/sapi-rate-formula-evaluation", "title": "SAPI rate formula evaluation", "body": "<p>I have created a computer voice, and I would like to treat the rate command correctly.</p>\n\n<p>The Microsoft whitepaper says this about the rate (<a href=\"https://msdn.microsoft.com/en-us/library/ms717037(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ms717037(v=vs.85).aspx</a>):</p>\n\n<p>Rate:</p>\n\n<p>The Rate tag controls the rate of a voice. The tag can be empty, in which case it applies to all subsequent text, or it can have content, in which case it only applies to that content. The Rate tag has two attributes, Speed and AbsSpeed, one of which must be present. The value of these attributes should be an integer between negative ten and ten. Values outside of this range may be truncated by the engine (but are not truncated by SAPI). The AbsSpeed attribute controls the absolute rate of the voice, so a value of ten always corresponds to a value of ten; a value of five always corresponds to a value of five.</p>\n\n<p>\nThis text should be spoken at rate five.\n\nThis text should be spoken at rate negative five.\n\nAll text which follows should be spoken at rate ten.</p>\n\n<p>I haven't found any indication of what rate should actually be converted to. However, I would like to stay confirm with Microsoft's computer voice.</p>\n\n<p>I did some tests using a sample sentence.</p>\n\n<p>Microsoft's own computer voice produced the following outputs with a sample sentence (\"This is a test.\"):</p>\n\n<p>Rate 8:\n1,15 sec</p>\n\n<p>Rate 0:\n2,65 sec</p>\n\n<p>Rate -8:\n6,35 sec</p>\n\n<p>However, I don't see a real formula behind this. \nMy attempt of </p>\n\n<pre><code>float f1 = (rate / 10.0f);\nfloat fSpeed = 1+f1;\n</code></pre>\n\n<p>doesn't seem to correspond to MS's output length at all.</p>\n\n<p>I feed this value to sonicChangeFloatSpeed in the famous libSonic library.</p>\n\n<p>At rate -8, my voice's output is ~12 seconds while Microsoft's voice's output is ~6 sec.</p>\n\n<p>Can anybody estimate a formula behind MS's voice rate?</p>\n\n<p>Thank you for the help.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015", "stack-trace"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489606394, "post_id": 42819075, "comment_id": 72749883, "body": "The compiler is supposed to keep track of line numbers even as it&#39;s optimizing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489606570, "post_id": 42819075, "comment_id": 72749987, "body": "@Barmar It does. But only to a certain extend. <i>Especially</i> when optimizing it can&#39;t do it reliably. If you doubt me, try building any non-trivial program with gcc, clang or VS at the highest optimization level (include debug info) and then cause it to crash somewhere with a deep stack and take a look at the core dump."}, {"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "edited": false, "score": 0, "creation_date": 1489614040, "post_id": 42819075, "comment_id": 72754126, "body": "What of the case where I am building a DEBUG binary and optimization is turned off via <code>&#47;Od</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "edited": false, "score": 0, "creation_date": 1489614191, "post_id": 42819075, "comment_id": 72754208, "body": "@Jon then you can usually trust stack traces a lot more (although compilers still do sometimes change stuff even in that case). In any case; it&#39;s pretty common (in my experience) for compilers to assign something to the line just <i>after</i> a statement. So seeing &quot;foo()&quot; reported as &quot;foo.cc line just after the semi-colon&quot; wouldn&#39;t surprise me at all."}, {"owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "edited": false, "score": 0, "creation_date": 1489678874, "post_id": 42819075, "comment_id": 72786315, "body": "So, for a vanilla VC2015 C++ WIn32 Console App project, building the code above, you don&#39;t see any reason for the discrepancy, other than the compiler doing some funny tricks (IOW, it&#39;s not something I did or did not do)?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1489606324, "creation_date": 1489606324, "answer_id": 42819075, "question_id": 42818907, "link": "https://stackoverflow.com/questions/42818907/c-stack-tracing-oddity/42819075#42819075", "title": "C++ Stack Tracing Oddity", "body": "<p>You can't expect line numbers to be completely reliable - not even the stack trace itself for that matter. Once the optimizer is done chewing on your code it will look very different to what you actually wrote and there's only so much info that can be kept in debug info to map it back to source.</p>\n\n<p>You have to learn to read stack traces with a grain of salt.</p>\n"}], "owner": {"reputation": 1625, "user_id": 1139436, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a519e31546fe630d93d69728906be8e5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1139436/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489606324, "creation_date": 1489605800, "last_edit_date": 1495541366, "question_id": 42818907, "link": "https://stackoverflow.com/questions/42818907/c-stack-tracing-oddity", "title": "C++ Stack Tracing Oddity", "body": "<p>Following advice from <a href=\"https://stackoverflow.com/a/31677858/1139436\">here</a> and <a href=\"https://stackoverflow.com/questions/22467604/how-can-you-use-capturestackbacktrace-to-capture-the-exception-stack-not-the-ca\">here</a>, I created a class to print the call stack, with line numbers, just by inserting a call at a point in my code. It works well enough, but, I am confused by one aspect of the output - the line number.  My test code:</p>\n\n<pre><code>#define _WIN32 1\n#define DEBUG 1\n\n#include \"C:\\git\\StackTrace\\StackTrace.h\"\n\nint main()\n{\n    MyCompany::PrintStackTrace();\n    return 0;\n}\n</code></pre>\n\n<p>The call to print the stack trace is on line <strong>8</strong>, however, the output indicates it's on line <strong>9</strong>:</p>\n\n<pre><code>*** 0: main in c:\\git\\tests\\stacktrace\\stacktrace\\st_test.cpp: line: 9: address: 0x7FF629172070\n*** 1: invoke_main in f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl: line: 41: address: 0x7FF629173710\n*** 2: __scrt_common_main_seh in f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl: line: FD: address: 0x7FF6291734C0\n*** 3: __scrt_common_main in f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl: line: 128: address: 0x7FF6291734A0\n*** 4: mainCRTStartup in f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_main.cpp: line: 11: address: 0x7FF629173760\n*** SymGetLineFromAddr64 returned error code 487\n*** at BaseThreadInitThunk address 0x7FFA09648350\n*** SymGetLineFromAddr64 returned error code 487\n*** at RtlUserThreadStart address 0x7FFA0BF070B0\n</code></pre>\n\n<p>Please help me understand what I am missing here?</p>\n\n<p>My StackTrace.h code:</p>\n\n<pre><code>#ifdef _WIN32\n#ifdef DEBUG\n\n#include &lt;Windows.h&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;DbgHelp.h&gt;\n#include &lt;WinBase.h&gt;\n\n#pragma comment(lib, \"Dbghelp.lib\")\n\nusing namespace std;\n\nnamespace MyCompany\n{\n    class StackTrace\n    {\n    private:\n        static bool instanceFlag;\n        static StackTrace *single;\n        StackTrace() { }\n    public:\n        static StackTrace* GetInstance();\n        void PrintStack();\n        void PrintStack(ostream&amp; out, int skipFrames);\n        ~StackTrace()\n        {\n            instanceFlag = false;\n        }\n    };\n\n    bool StackTrace::instanceFlag = false;\n    StackTrace* StackTrace::single = NULL;\n\n    /**\n     * Returns the instance of the StackTrace class, generating the instance if needed.\n     *\n     * @return A pointer to the instance of the StackTrace class.\n     */\n    StackTrace* StackTrace::GetInstance()\n    {\n        if (!instanceFlag)\n        {\n            single = new StackTrace();\n            instanceFlag = true;\n            return single;\n        }\n        else\n        {\n            return single;\n        }\n    }\n\n    /**\n     * Prints the call stack to stdout.\n     *\n     * @param sourceStr\n     *        The multibyte character string.\n     */\n    void StackTrace::PrintStack()\n    {\n        // If PrintStackTrace() was called with no parameters, there is one more \n        // wrapper in the stack (this one) to skip.\n        int skipFrames = 3;\n\n        PrintStack(cout, skipFrames);\n    }\n\n    /**\n     * Prints the call stack to the given stream.\n     *\n     * @param out\n     *        The already-opened stream where the call stack will be printed.\n     *\n     * @param skipFrames\n     *        The number of frames to skip when capturing the call stack.\n     */\n    void StackTrace::PrintStack(ostream&amp; out, int skipFrames = 2)\n    {\n        const int maxCallers = 1024; // Not worried about size limits of OS's older than Windows 7.\n        void * callers_stack[maxCallers];\n        unsigned short frames;\n        SYMBOL_INFO * symbol;\n        HANDLE process;\n        DWORD displacement;\n\n        IMAGEHLP_LINE64 *line = (IMAGEHLP_LINE64 *)malloc(sizeof(IMAGEHLP_LINE64));\n        if (NULL == line)\n        {\n            return;\n        }\n\n        process = GetCurrentProcess();\n        SymInitialize(process, NULL, TRUE);\n        frames = CaptureStackBackTrace(skipFrames, maxCallers, callers_stack, NULL);\n\n        symbol = (SYMBOL_INFO *)calloc(sizeof(SYMBOL_INFO) + 256 * sizeof(char), 1);\n        if (NULL == symbol)\n        {\n            return;\n        }\n\n        symbol-&gt;MaxNameLen = 255;\n        symbol-&gt;SizeOfStruct = sizeof(SYMBOL_INFO);\n\n        out &lt;&lt; uppercase;\n\n        const unsigned short  MAX_CALLERS_SHOWN = 64;\n        frames = frames &lt; MAX_CALLERS_SHOWN ? frames : MAX_CALLERS_SHOWN;\n\n        for (unsigned int i = 0; i &lt; frames; i++)\n        {\n            DWORD64 address = (DWORD64)(callers_stack[i]);\n            SymFromAddr(process, address, 0, symbol);\n\n            if (SymGetLineFromAddr64(process, address, &amp;displacement, line))\n            {\n                out &lt;&lt; \"*** \" &lt;&lt; dec &lt;&lt; i &lt;&lt; \": \" &lt;&lt; symbol-&gt;Name &lt;&lt; \" in \" &lt;&lt; line-&gt;FileName \n                    &lt;&lt; \": line: \" &lt;&lt; line-&gt;LineNumber &lt;&lt; \": address: 0x\" &lt;&lt; hex &lt;&lt; symbol-&gt;Address &lt;&lt; endl;\n            }\n            else\n            {\n                out &lt;&lt; \"*** SymGetLineFromAddr64 returned error code \" &lt;&lt; dec &lt;&lt; GetLastError() &lt;&lt; endl;\n                out &lt;&lt; \"*** at \" &lt;&lt; symbol-&gt;Name &lt;&lt; \" address 0x\" &lt;&lt; hex &lt;&lt; symbol-&gt;Address &lt;&lt; endl;\n            }\n        }\n\n        if (symbol) free(symbol);\n        if (line) free(line);\n    }\n\n    /**\n     * Print the call stack to stdout.\n     */\n    void PrintStackTrace()\n    {\n        StackTrace::GetInstance()-&gt;PrintStack();\n    }\n\n    /**\n     * Print the call stack to the given stream.\n     *\n     * @param out\n     *        The already-opened stream where the call stack will be printed.\n     */\n    void PrintStackTrace(ostream&amp; out)\n    {\n        StackTrace::GetInstance()-&gt;PrintStack(out);\n    }\n}\n\n#endif // DEBUG\n#endif // _WIN32\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 1, "creation_date": 1489605997, "post_id": 42818904, "comment_id": 72749651, "body": "Your root is NULL, and you are doing  root-&gt;entry...  wont work"}, {"owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "reply_to_user": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489606146, "post_id": 42818904, "comment_id": 72749721, "body": "Sorry, it should be this     anEntry.createEntry(title, info);         insert(anEntry);"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1489606220, "post_id": 42818904, "comment_id": 72749770, "body": "<code>while (inFile &amp;&amp; !inFile.eof())</code> <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489606549, "post_id": 42818904, "comment_id": 72749973, "body": "Looks like you dont need that redundant bit before the while loop, because its already inside the while loop.  That won&#39;t solve the problem, but will make it more straightforward."}, {"owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "edited": false, "score": 0, "creation_date": 1489606556, "post_id": 42818904, "comment_id": 72749979, "body": "Yeah, it still persists, I&#39;ve updated my code slightly. and drescherjm, I understand that it is bad to use, however, it doesn&#39;t even step into the loop. Program stops at cin.get(title, TITLE, &#39;:&#39;); the very first read, doesn&#39;t step to next line of code"}, {"owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "edited": false, "score": 0, "creation_date": 1489606623, "post_id": 42818904, "comment_id": 72750035, "body": "Totally get that Bango, I&#39;ve just been following coding style from my instructor it&#39;s kind of a &quot;safety precaution&quot;, apparently, according to her."}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489606646, "post_id": 42818904, "comment_id": 72750049, "body": "See if it steps into the loop when you take out the part outside the loop.  Looks like you&#39;ve narrowed down the problem to your cin.get()  statements."}, {"owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "edited": false, "score": 0, "creation_date": 1489606950, "post_id": 42818904, "comment_id": 72750234, "body": "Bango, it opens the file, however still same problem persists."}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489607042, "post_id": 42818904, "comment_id": 72750284, "body": "I don&#39;t know why your prof wants you to put that bit before the while loop.  Seems like the opposite of safety precaution to me."}], "answers": [{"comments": [{"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 0, "creation_date": 1489606329, "post_id": 42819025, "comment_id": 72749841, "body": "True, but it is open, because they are getting the first line.  Why would the file close unless close() is being called?"}, {"owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "edited": false, "score": 0, "creation_date": 1489606757, "post_id": 42819025, "comment_id": 72750126, "body": "The problem exists with the first attempt to read in from the file.. could my text file be corrupt? If so, how can I check? OH and btw I&#39;ve had a similar issue in the past, when transferring files from windows to linux, the new line character is associated as \\r\\n in windows"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "edited": false, "score": 0, "creation_date": 1489607074, "post_id": 42819025, "comment_id": 72750308, "body": "@HaiNguyen use cmd command:  <code>dos2unix CS_terms.txt</code> to pre process your text file in the linux console"}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 1, "last_activity_date": 1489606660, "last_edit_date": 1489606660, "creation_date": 1489606199, "answer_id": 42819025, "question_id": 42818904, "link": "https://stackoverflow.com/questions/42818904/reading-from-a-file-c-program-halts-at-reading-put/42819025#42819025", "title": "reading from a file c++ [program halts at reading put]", "body": "<p>You should replace this line:</p>\n\n<pre><code>if (inFile)\n</code></pre>\n\n<p>by this</p>\n\n<pre><code>if (inFile.is_open())\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>while (inFile.is_open() &amp;&amp; !inFile.eof())\n</code></pre>\n\n<p>by </p>\n\n<pre><code>while (inFile.good()) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "is_accepted": true, "score": 1, "last_activity_date": 1489606899, "creation_date": 1489606899, "answer_id": 42819239, "question_id": 42818904, "link": "https://stackoverflow.com/questions/42818904/reading-from-a-file-c-program-halts-at-reading-put/42819239#42819239", "title": "reading from a file c++ [program halts at reading put]", "body": "<p>try replacing <code>cin.get()</code> with <code>inFile.get()</code></p>\n"}], "owner": {"reputation": 13, "user_id": 6227866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4168470716ff74714447c37a137291a7?s=128&d=identicon&r=PG&f=1", "display_name": "some dude", "link": "https://stackoverflow.com/users/6227866/some-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42819239, "answer_count": 2, "score": 1, "last_activity_date": 1489606899, "creation_date": 1489605793, "last_edit_date": 1489606256, "question_id": 42818904, "link": "https://stackoverflow.com/questions/42818904/reading-from-a-file-c-program-halts-at-reading-put", "title": "reading from a file c++ [program halts at reading put]", "body": "<p>I'm having a problem reading in from a file, I feel disoriented and I cannot seem to find the error within my code(I'm sure it's a minor mistake because I've done this before) This a homework assignment. The assignment calls for the constructor to load in contents from a file. However, the program halts after reading in the first line.</p>\n\n<pre><code>tree::tree()\n    {\n\n    root = NULL;\n    load();\n}\n\nint tree::load()\n{\n    ifstream inFile;\n\n    definition anEntry;\n\n    char title[TITLE], info[INFO];\n\n    inFile.open(\"CS_terms.txt\");\n\n    if (inFile.is_open())\n    {\n        cin.get(title, TITLE, ':');\n        cin.ignore(TITLE, ':');\n        cin.get(info, INFO, '\\n');\n        cin.ignore(INFO, '\\n'); \n\n        anEntry.createEntry(title, info);\n        insert(anEntry);\n\n        while (inFile.is_open() &amp;&amp; !inFile.eof())\n        {\n            cin.get(title, TITLE, ':');\n            cin.ignore(TITLE, ':');\n            cin.get(info, INFO, '\\n');\n            cin.ignore(INFO, '\\n'); \n            anEntry.createEntry(title, info);\n            insert(anEntry);\n        }\n        inFile.close();\n        return 1;\n    }\n    else\n    {\n        cout &lt;&lt; \"No File\" &lt;&lt; endl;\n        return 0;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489606807, "post_id": 42818899, "comment_id": 72750147, "body": "If you want the cursor to wait at <code>Enter Age: _</code>, then where do you want to see the output?"}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489606852, "post_id": 42818899, "comment_id": 72750188, "body": "Do you want the cursor to wait at enter age even when user presses enter?"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 7696140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb513e8b2a5c6afb3383a722f9f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Meccano", "link": "https://stackoverflow.com/users/7696140/meccano"}, "is_accepted": false, "score": 0, "last_activity_date": 1489605957, "creation_date": 1489605957, "answer_id": 42818944, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/42818944#42818944", "title": "Detecting ENTER key in C++", "body": "<p>You might want to cin into a char variable and then check if it the ENTER key, and if not, continue getting characters and turn them into an int (using character substraction and all that). It is not a very pretty solution but it is the first thing that came into my head.</p>\n"}, {"comments": [{"owner": {"reputation": 3972, "user_id": 3845972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71f639be4f401118bae03c6f5c5802e3?s=128&d=identicon&r=PG&f=1", "display_name": "Cava", "link": "https://stackoverflow.com/users/3845972/cava"}, "edited": false, "score": 0, "creation_date": 1592748103, "post_id": 42818970, "comment_id": 110529274, "body": "I cant use <code>cin &gt;&gt; myString</code>, but I can use <code>std::getline(std::cin, myString)</code> after <code>cin.ignore()</code>"}], "tags": [], "owner": {"reputation": 137, "user_id": 7631559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-d3vFaR2aWCw/AAAAAAAAAAI/AAAAAAAAACI/HhSa5BN4ItI/photo.jpg?sz=128", "display_name": "Arturo Aguilera", "link": "https://stackoverflow.com/users/7631559/arturo-aguilera"}, "is_accepted": true, "score": 10, "last_activity_date": 1489606031, "creation_date": 1489606031, "answer_id": 42818970, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/42818970#42818970", "title": "Detecting ENTER key in C++", "body": "<p>Have you tried this?:</p>\n\n<pre><code>cout &lt;&lt; \"Press Enter to Continue\";\ncin.ignore();\n</code></pre>\n\n<p>also check out <a href=\"http://www.cplusplus.com/forum/beginner/2624/\" rel=\"noreferrer\">this question</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1489613908, "last_edit_date": 1489613908, "creation_date": 1489613166, "answer_id": 42820972, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/42820972#42820972", "title": "Detecting ENTER key in C++", "body": "<p>You are several problems with your code:</p>\n\n<ol>\n<li><p>you are calling <code>operator&gt;&gt;</code> with <code>char[]</code> buffers without protection from buffer overflows.  Use <code>std::setw()</code> to specify the buffer sizes during reading.  Otherwise, use <code>std::string</code> instead of <code>char[]</code>.</p></li>\n<li><p><code>cin &gt;&gt; name</code> reads only the first whitespace-delimited word, leaving any remaining data in the input buffer, <strong>including the <kbd>ENTER</kbd> key</strong>, which is then picked up by <code>cin &gt;&gt; age</code> without waiting for new input.  To avoid that, you need to call <code>cin.ignore()</code> to discard any unread data.  Otherwise, consider using <code>cin.getline()</code> instead (or <code>std::getline()</code> for <code>std::string</code>), which consumes everything up to and including a linebreak, but does not output the linebreak (you should consider using this for the <code>name</code> value, at least, so that users can enter names with spaces in them).</p></li>\n<li><p>by default, <code>operator&gt;&gt;</code> skips leading whitespace before reading a new value, <strong>and that includes line breaks</strong>.  You can press <kbd>ENTER</kbd> all you want, <code>operator&gt;&gt;</code> will happily keep waiting until something else is entered.  To avoid that, you could use <code>std::noskipws</code>, but that causes an unwanted side effect when reading character data - leading whitespace is left in the input buffer, which causes <code>operator&gt;&gt;</code> to stop reading when it reads a whitespace character before any user input is read.  So, to avoid that, you can use <code>cin.peek()</code> to check for an entered linebreak before calling <code>cin &gt;&gt; age</code>.</p></li>\n</ol>\n\n<p>Try something more like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;iomanip&gt;\n\nchar name[100] = {0};\nchar age[12] = {0};\n\nstd::cout &lt;&lt; \"Enter Name: \";\nstd::cin &gt;&gt; std::setw(100) &gt;&gt; name;\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n/* or:\nif (!std::cin.getline(name, 100))\n    std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n*/\n\nstd::cout &lt;&lt; \"Enter Age: \";\nif (std::cin.peek() != '\\n')\n    std::cin &gt;&gt; std::setw(12) &gt;&gt; age;\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n\nstd::string name;\nstd::string age;\n\nstd::cout &lt;&lt; \"Enter Name: \";\nstd::cin &gt;&gt; name;\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n/* or:\nstd::getline(std::cin, name);\n*/\n\nstd::cout &lt;&lt; \"Enter Age: \";\nif (std::cin.peek() != '\\n')\n    std::cin &gt;&gt; age;\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n/* or:\nstd::getline(std::cin, age);\n*/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 1872964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c1eeb23e905c6fb458091418d504c569?s=128&d=identicon&r=PG", "display_name": "Brain", "link": "https://stackoverflow.com/users/1872964/brain"}, "is_accepted": false, "score": 0, "last_activity_date": 1536088014, "creation_date": 1536088014, "answer_id": 52172576, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/52172576#52172576", "title": "Detecting ENTER key in C++", "body": "<p>Just use:</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nPress Enter to continue\"; \nfgetc(stdin);\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>See more at <a href=\"http://www.cplusplus.com/reference/cstdio/fgetc/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/fgetc/</a></p>\n"}, {"tags": [], "owner": {"reputation": 225, "user_id": 5527420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ze2F5.jpg?s=128&g=1", "display_name": "Xiokraze", "link": "https://stackoverflow.com/users/5527420/xiokraze"}, "is_accepted": false, "score": 3, "last_activity_date": 1549510509, "creation_date": 1549510509, "answer_id": 54565914, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/54565914#54565914", "title": "Detecting ENTER key in C++", "body": "<p>One way to do it is to use getline to read the input, then test the length of the input string. If they only press enter, the length of the line will be 0 since getline ignores newlines by default.</p>\n\n<pre><code>std::string myString = \"\";\n\ndo {\n     std::cout &lt;&lt; \"Press ENTER to exit\" &lt;&lt; std::endl;\n     std::getline(std::cin, myString);\n} while (myString.length() != 0);\n\nstd::cout &lt;&lt; \"Loop exited.\" &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13049685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIcnM.jpg?s=128&g=1", "display_name": "TechBot", "link": "https://stackoverflow.com/users/13049685/techbot"}, "is_accepted": false, "score": 0, "last_activity_date": 1586004974, "creation_date": 1586004974, "answer_id": 61028416, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/61028416#61028416", "title": "Detecting ENTER key in C++", "body": "<p>you can include the \"conio.h\" library\nand use getch();</p>\n\n<pre><code>#include &lt;conio.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\ncout &lt;&lt; \"press enter\";\ngetch();\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 14394234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f9be9a7b75d60c1717144d367ad9379?s=128&d=identicon&r=PG&f=1", "display_name": "Sarwesh Arivazhagan", "link": "https://stackoverflow.com/users/14394234/sarwesh-arivazhagan"}, "is_accepted": false, "score": 0, "last_activity_date": 1603465043, "creation_date": 1603465043, "answer_id": 64502413, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c/64502413#64502413", "title": "Detecting ENTER key in C++", "body": "<p>When you use <code>cin.get()</code> compiler will take the lastly used Enter(i.e Enter key pressed while entering name). so you need to make the compiler to avoid the lastly entered Enter key to do so you need to include <code>cin.ignore()</code> before using <code>cin.get()</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61520, "favorite_count": 5, "accepted_answer_id": 42818970, "answer_count": 7, "score": 8, "last_activity_date": 1603465043, "creation_date": 1489605757, "last_edit_date": 1489606705, "question_id": 42818899, "link": "https://stackoverflow.com/questions/42818899/detecting-enter-key-in-c", "title": "Detecting ENTER key in C++", "body": "<p>I have a program like this,</p>\n\n<pre><code>char name[100];\nchar age[12];\ncout &lt;&lt; \"Enter Name: \";\ncin &gt;&gt; name;\n\ncout &lt;&lt; \"Enter Age: \";\ncin &gt;&gt; age;\n</code></pre>\n\n<p>Now age is a optional field, so user can simply press ENTER key and have that value as NULL. But the problem is, cin doesn't take ENTER key and just stay there waiting for a valid keyboard char or numerical input.</p>\n\n<p>I think the problem is because cin needs a valid input and thus stays there forever.</p>\n\n<p>So i tried below approach to detect ENTER key press for Age.</p>\n\n<pre><code>cout &lt;&lt; \"Enter Age: \";\nif (cin.get() == '\\n') {\n            cout &lt;&lt; \"ENTER WAS PRESSED\" &lt;&lt; endl;\n        }\n</code></pre>\n\n<p>Now as soon as user presses ENTER key after entering a NAME, it goes straight to the IF condition.</p>\n\n<p>I also tried:</p>\n\n<pre><code>getline(cin, age);\n</code></pre>\n\n<p>But that also simply doesn't stop at <code>cout &lt;&lt; \"Age: \";</code> waiting for an input from the user.</p>\n\n<p>The user can either a valid age or simply press ENTER key not to enter a age.</p>\n\n<p>For the below Code: </p>\n\n<pre><code>cout &lt;&lt; \"Enter Name: \";\n        cin &gt;&gt; name;\n\n        cout &lt;&lt; \"Enter Age: \";\n        if (cin.get() == '\\n') {\n            cout &lt;&lt; \"ENTER WAS PRESSED\" &lt;&lt; endl;\n        }\n</code></pre>\n\n<p>The Output is:</p>\n\n<pre><code>Enter Name: asdf\nEnter Age: ENTER WAS PRESSED\n</code></pre>\n\n<p>I want the cursor to wait at <strong>Enter Age: _</strong></p>\n\n<p>How can i do that?</p>\n"}, {"tags": ["c++", "ios", "opencv", "cascade-classifier"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1489621980, "post_id": 42818864, "comment_id": 72757315, "body": "Have you tried with the full path?"}, {"owner": {"reputation": 165, "user_id": 7405853, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00ddc6d0ae053fe947d18e132dc72a73?s=128&d=identicon&r=PG&f=1", "display_name": "NFarrell", "link": "https://stackoverflow.com/users/7405853/nfarrell"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1489978062, "post_id": 42818864, "comment_id": 72890990, "body": "Any ideas on how to do this with C++? I can&#39;t find the file&#39;s full path because I don&#39;t have OpenCV installed on my computer. Have been testing it with an iPhone so I haven&#39;t needed it."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 7405853, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00ddc6d0ae053fe947d18e132dc72a73?s=128&d=identicon&r=PG&f=1", "display_name": "NFarrell", "link": "https://stackoverflow.com/users/7405853/nfarrell"}, "edited": false, "score": 0, "creation_date": 1489977728, "post_id": 42824362, "comment_id": 72890921, "body": "Thanks for the response Quang. Currently my code is in just regular C++ that I am including within my OpenCV wrapper. So therefore I can&#39;t use objective-c code within my file. Any other suggestions?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 165, "user_id": 7405853, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00ddc6d0ae053fe947d18e132dc72a73?s=128&d=identicon&r=PG&f=1", "display_name": "NFarrell", "link": "https://stackoverflow.com/users/7405853/nfarrell"}, "edited": false, "score": 0, "creation_date": 1489979921, "post_id": 42824362, "comment_id": 72891419, "body": "You can mix C++ and Objective-C++ as long as you name your file <code>.mm</code> (or specify the source code type as Objective-C++)."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 2, "last_activity_date": 1489632175, "creation_date": 1489632175, "answer_id": 42824362, "question_id": 42818864, "link": "https://stackoverflow.com/questions/42818864/opencv-cascade-classifier-load-error-ios/42824362#42824362", "title": "OpenCV Cascade Classifier load error iOS", "body": "<p>In iOS, you need to locate the file path within the app bunnle. Something like this:</p>\n\n<pre><code>// get main app bundle\nNSBundle * appBundle = [NSBundle mainBundle];\n\n// constant file name\nNSString * cascadeName = @\"haarcascade_frontalface_alt\";\nNSString * cascadeType = @\"xml\";\n\n// get file path in bundle\nNSString * cascadePathInBundle = [appBundle pathForResource: cascadeName ofType: cascadeType];\n\n// convert NSString to std::string\nstd::string cascadePath([cascadePathInBundle UTF8String]);\n\n// load cascade\nif (face_cascade.load(cascadePath)){\n    printf(\"Load complete\");\n}else{\n    printf(\"Load error\");\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 7405853, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00ddc6d0ae053fe947d18e132dc72a73?s=128&d=identicon&r=PG&f=1", "display_name": "NFarrell", "link": "https://stackoverflow.com/users/7405853/nfarrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489632175, "creation_date": 1489605627, "question_id": 42818864, "link": "https://stackoverflow.com/questions/42818864/opencv-cascade-classifier-load-error-ios", "title": "OpenCV Cascade Classifier load error iOS", "body": "<p>Currently I am trying to using an OpenCV Cascade Classifier to detect faces in my iOS app. The problem is that when I go to load the classifier, it fails because the pathname to the \"haarcascade_frontalface_alt.xml\" isn't correct.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>cv::String face_cascade_name = \"haarcascade_frontalface_alt.xml\";\n</code></pre>\n\n<p>void detectFaces(cv::Mat frame){</p>\n\n<pre><code>cv::CascadeClassifier face_cascade;\nif (face_cascade.load(face_cascade_name)){\n    printf(\"Load complete\");\n}else{\n    printf(\"Load error\");\n}\nstd::vector&lt;cv::Rect&gt; faces;\n\nstd::vector&lt;cv::Mat&gt; rgbChannels(3);\ncv::split(frame, rgbChannels); // Making the frame gray scale\ncv::Mat frame_gray = rgbChannels[2];\n\nface_cascade.detectMultiScale(frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE|CV_HAAR_FIND_BIGGEST_OBJECT, cv::Size(150,150));\n\nif(faces.size()&gt; 0){\n    printf(\"TRUE\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Since this is an iOS project I don't know how to find the path of the required xml file in the framework. What is the proper way to load a Cascade Classifier into an iOS project? Or, what is the correct way to include the right filename so that it sees it properly? </p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "multithreading", "pthreads", "mutex"], "answers": [{"comments": [{"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1489606377, "post_id": 42818929, "comment_id": 72749871, "body": "Same question as to @JohnBollinger:  \t I&#39;d read about PTHREAD_MUTEX_INITIALIZER as well, but then that prompts the question what if default attributes won&#39;t do?. I&#39;m also curious, what happens with the &quot;solution&quot; code in a C compiler? Is that a compile or runtime error?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 1, "creation_date": 1489610212, "post_id": 42818929, "comment_id": 72752096, "body": "@StoneThrow What I&#39;d do in that case is either put my mutex initialization code where I <i>knew</i> it could only be called once (a shared object initialization function, for example, that&#39;s run only once when the shared object is loaded, or I&#39;d use a static mutex initialized with <code>PTHREAD_MUTEX_INITIALIZER</code> to protect my more complex initialization code.  FWIW, Linux provides extensions that can be used to initialize other, non-default mutexes such as <code>PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP</code>.  See <a href=\"http://elias.rhi.hi.is/libc/Mutexes.html\" rel=\"nofollow noreferrer\">elias.rhi.hi.is/libc/Mutexes.html</a>"}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 2, "last_activity_date": 1489605877, "creation_date": 1489605877, "answer_id": 42818929, "question_id": 42818852, "link": "https://stackoverflow.com/questions/42818852/how-to-ensure-single-initialization-of-shared-stack-allocated-pthread-mutex-t/42818929#42818929", "title": "How to ensure single initialization of shared stack-allocated pthread_mutex_t? (C++)", "body": "<pre><code>static int g_res = pthread_mutex_init( &amp;g_mutex, NULL );\n</code></pre>\n\n<p>is fine in C++ code, but doesn't work in C code (yes, your code is pure C++, but someone will try it in C...)</p>\n\n<p>For C (or an alternative in C++) per <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_init.html\" rel=\"nofollow noreferrer\">the POSIX standard</a>:</p>\n\n<blockquote>\n  <p>...</p>\n  \n  <p>In cases where default mutex attributes are appropriate, the macro\n  PTHREAD_MUTEX_INITIALIZER can be used to initialize mutexes. The\n  effect shall be equivalent to dynamic initialization by a call to\n  pthread_mutex_init() with parameter attr specified as NULL. ...</p>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>static pthread_mutex_t g_mutex = PTHREAD_MUTEX_INITIALIZER;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1489606287, "post_id": 42818936, "comment_id": 72749818, "body": "I&#39;d read about <code>PTHREAD_MUTEX_INITIALIZER</code> as well, but then that prompts the question <i>what if default attributes won&#39;t do?</i>. I&#39;m also curious, what happens with the &quot;solution&quot; code in a C compiler? Is that a compile or runtime error?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1489606872, "post_id": 42818936, "comment_id": 72750197, "body": "@StoneThrow, The proposed solution will be rejected by a conforming C compiler."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1489607318, "post_id": 42818936, "comment_id": 72750471, "body": "&quot;but it&#39;s ok in C++&quot;...so I guess in C++ if default attributes won&#39;t do, it&#39;d be acceptable to declare a <code>pthread_mutexattr_t</code> statically and pass that as the argument to the global function call to <code>pthread_mutex_init()</code>...? I am curious how this situation is solved in C. Maybe I&#39;ll ask as a separate question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1489607446, "post_id": 42818936, "comment_id": 72750540, "body": "@StoneThrow, generally speaking, one wants to set up each synchronization object before starting the second thread / process that will access it, as indeed is achieved by providing an initializer expression.  If you can&#39;t do that for whatever reason, then you&#39;re pretty much obligated to rely on a second synchronization object, as you describe in the question.  In that case, one hopes that that second synchronization object can be statically initialized, and I&#39;ve never come across a situation in which that was not possible."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1489605911, "creation_date": 1489605911, "answer_id": 42818936, "question_id": 42818852, "link": "https://stackoverflow.com/questions/42818852/how-to-ensure-single-initialization-of-shared-stack-allocated-pthread-mutex-t/42818936#42818936", "title": "How to ensure single initialization of shared stack-allocated pthread_mutex_t? (C++)", "body": "<blockquote>\n  <p>Is it legal to call <code>pthread_mutex_init()</code> at the global scope (i.e. the same scope as the <code>pthread_mutex_t</code> object declaration) as below, and is this considered a \"correct\" solution to this situation?</p>\n</blockquote>\n\n<p>It would not be legal in C, but it's ok in C++.  Since you're initializing the mutex with default attributes, however, it would be preferable to use the initializer macro:</p>\n\n<pre><code>static pthread_mutex_t g_mutex = PTHREAD_MUTEX_INITIALIZER;\n</code></pre>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 42818936, "answer_count": 2, "score": 1, "last_activity_date": 1489609838, "creation_date": 1489605586, "last_edit_date": 1489609838, "question_id": 42818852, "link": "https://stackoverflow.com/questions/42818852/how-to-ensure-single-initialization-of-shared-stack-allocated-pthread-mutex-t", "title": "How to ensure single initialization of shared stack-allocated pthread_mutex_t? (C++)", "body": "<p>What is an advisable/standard way to ensure that stack-allocated pthread_mutex_t objects are initialized only once in a multithreaded environment?</p>\n\n<p>The <code>pthread_mutex_init()</code> man page says:</p>\n\n<blockquote>\n  <p>Attempting to initialise an already initialised mutex results in\n  undefined behaviour.</p>\n</blockquote>\n\n<p>I have a <code>.cpp</code> file which is compiled to a shared library. A simplification of this file would be:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\nstatic pthread_mutex_t g_mutex;\n\nint initialize()\n{\n  pthread_mutex_init( &amp;g_mutex, NULL );\n  pthread_mutex_lock( &amp;g_mutex );\n  // Do init stuff.\n  pthread_mutex_unlock( &amp;g_mutex );\n  return 0;\n}\n</code></pre>\n\n<p><code>initialize()</code> may be called in a multithreaded environment. So as-is, <code>pthread_mutex_init()</code> may be called multiple times on the same object, which is undefined behavior, as quoted above. So that would require thread-safety...by using another mutex. But then who initializes that mutex in a threadsafe manner, ad infinitum...?</p>\n\n<p>Is it legal to call <code>pthread_mutex_init()</code> at the global scope (i.e. the same scope as the <code>pthread_mutex_t</code> object declaration) as below, and is this considered a \"correct\" solution to this situation?</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\nstatic pthread_mutex_t g_mutex;\nstatic int g_res = pthread_mutex_init( &amp;g_mutex, NULL );\n\nint initialize()\n{\n  // g_mutex already initialized (?) so no need to do so here.\n  pthread_mutex_lock( &amp;g_mutex );\n  // Do init stuff.\n  pthread_mutex_unlock( &amp;g_mutex );\n  return 0;\n}\n</code></pre>\n\n<p><strong>What I have tried</strong>:</p>\n\n<p>I compiled and ran the second code-block, both of which succeed.</p>\n\n<p>But I still wanted to ask the community because I'm a bit unclear about the legality of calling the <code>pthread_mutex_init()</code> function at the global scope, and I wanted to make sure the executable didn't just appear to work because of undefined behavior.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489605731, "post_id": 42818833, "comment_id": 72749512, "body": "You want to monitor packet inbound and outbound ?"}, {"owner": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489605821, "post_id": 42818833, "comment_id": 72749554, "body": "@AnkurJyotiPhukan I want to obtain information about packet inbound and outbound for every interface."}, {"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489606002, "post_id": 42818833, "comment_id": 72749656, "body": "You want to implement wireshark like software in c++"}, {"owner": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489606327, "post_id": 42818833, "comment_id": 72749839, "body": "@AnkurJyotiPhukan no no. I just want to obtain information about the stats."}, {"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489607420, "post_id": 42818833, "comment_id": 72750524, "body": "then use wireshark to do that .."}, {"owner": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489608422, "post_id": 42818833, "comment_id": 72751085, "body": "@AnkurJyotiPhukan My question isn&#39;t about using Wireshark. I want to retrieve this information using C++ on Windows."}, {"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "reply_to_user": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "edited": false, "score": 0, "creation_date": 1489608470, "post_id": 42818833, "comment_id": 72751112, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138152/discussion-between-ankur-jyoti-phukan-and-black-dragon\">continue this discussion in chat</a>."}], "owner": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489606547, "creation_date": 1489605515, "last_edit_date": 1489606547, "question_id": 42818833, "link": "https://stackoverflow.com/questions/42818833/how-to-get-packet-inbound-and-outbound-stats-for-each-interface-in-windows", "title": "How to get packet inbound and outbound stats for each interface in Windows?", "body": "<p>I am looking for stats such as:</p>\n\n<ol>\n<li>total packets received</li>\n<li>total inbound packets dropped</li>\n<li>total outbound packets dropped etc.</li>\n</ol>\n\n<p>Is there any Windows API for this?</p>\n"}, {"tags": ["c++", "algorithm", "vector", "runtime-error", "c++14"], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1489607292, "creation_date": 1489607292, "answer_id": 42819358, "question_id": 42818788, "link": "https://stackoverflow.com/questions/42818788/vector-input-in-for-loop-causing-run-time-error-debugging-times-out/42819358#42819358", "title": "Vector input in FOR loop causing run-time error - Debugging times out", "body": "<p>Not sure that is the problem but... is a problem</p>\n\n<p>Look at the case <code>if (m&lt;arr[i])</code> (that is your case, if I understand correctly, because <code>t</code> is 1; the only valid <code>arr[i]</code> is <code>arr[0]</code> that is 4 and is greather than <code>m</code> that is 2).</p>\n\n<p>Your actual code is </p>\n\n<pre><code>        for(int j=arr[i]-1;j&gt;m;j++)\n            sum=sum-comb(arr[i],j)*pow(9,arr[i]-j+1);\n</code></pre>\n\n<p>Remembering that <code>arr[i]</code> is <code>arr[0]</code> that is 4, and <code>m == 2</code>, you code become</p>\n\n<pre><code>        for ( int j = 3 ; j &gt; 2 ; j++ )\n           sum -= comb(4, j) * pow(9, 5 - j);\n</code></pre>\n\n<p>So <code>j</code> start from 3 and is <em>incremented</em> until <code>j &gt; 2</code>; but if <code>j</code> start from 3 and is incremented is ever greater that 2.</p>\n\n<p>I suppose your code should <em>decrement</em> <code>j</code>; something like</p>\n\n<pre><code>        for ( auto j = arr[i] - 1 ; j &gt; m ; ++j )\n            sum -= comb(arr[i], j) * pow(9, arr[i]-j+1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7386503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df134642073fee1b10dd5a2fa7a85dd5?s=128&d=identicon&r=PG&f=1", "display_name": "cnp", "link": "https://stackoverflow.com/users/7386503/cnp"}, "is_accepted": false, "score": 0, "last_activity_date": 1490509411, "creation_date": 1490509411, "answer_id": 43025757, "question_id": 42818788, "link": "https://stackoverflow.com/questions/42818788/vector-input-in-for-loop-causing-run-time-error-debugging-times-out/43025757#43025757", "title": "Vector input in FOR loop causing run-time error - Debugging times out", "body": "<p>@max66 has pointed out why your program is stuck in loop.</p>\n\n<p>Let me explain why vector arr is not showing the output 4.</p>\n\n<p>I think your input is reading it properly. But gdb hasn't printed it yet. Since output is buffered, its not necessary that it will be printed on screen at the same time you <code>cout</code>. \nIf you want to do so, then you should flush the output.</p>\n\n<pre><code>for(int i=0;i&lt;t;i++)\n    cout&lt;&lt;arr[i]&lt;&lt;\" \"&lt;&lt;flush;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4455806, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57e4d42a443a113e55344a57972c8186?s=128&d=identicon&r=PG&f=1", "display_name": "Mrinmay", "link": "https://stackoverflow.com/users/4455806/mrinmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 42819358, "answer_count": 2, "score": 0, "last_activity_date": 1532628098, "creation_date": 1489605384, "last_edit_date": 1532628098, "question_id": 42818788, "link": "https://stackoverflow.com/questions/42818788/vector-input-in-for-loop-causing-run-time-error-debugging-times-out", "title": "Vector input in FOR loop causing run-time error - Debugging times out", "body": "<p>I am trying to debug my C++ program for stdin as </p>\n\n<pre><code>2 1 /newline/\n4\n</code></pre>\n\n<p>Output of debugger (onlinegdb):-\nWhile the second line was getting read for another set of inputs provided by question; this time, the vector arr is not showing the output 4 \nset args \nReading symbols from /home/a.out...done.<br>\n(gdb) continue<br>\nThe program is not being run.<br>\n(gdb) run                                                                     </p>\n\n<pre><code>Starting program: /home/a.out &lt;/home/input.txt                                \n2 1  \n\nP.S. The program successfully compiles and runs for user provided input\n\n3 2\n3\n4\n</code></pre>\n\n<p>P.S. SO, WHY IS THE FIRST FOR LOOP IN THE PROGRAM NOT EXECUTING CORRECTLY?        </p>\n\n<p>SOURCE CODE-</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main() {\n    int m;\n    cin&gt;&gt;m;\n    int t;\n    cin&gt;&gt;t;\n    cout&lt;&lt;m&lt;&lt;\" \"&lt;&lt;t&lt;&lt;\"\\n\";\n    int sum=0;\n    vector&lt;int&gt; arr(t);\n    for(int i=0;i&lt;t;i++)\n        cin&gt;&gt;arr[i];                //arr[i]=k digit nos\n    for(int i=0;i&lt;t;i++)\n        cout&lt;&lt;arr[i]&lt;&lt;\" \"; \n    int comb(int a, int b);         //6,2\n\n    for(int i=0;i&lt;t;i++)\n    {\n        if(m==arr[i]){\n            cout&lt;&lt;m&lt;&lt;\" a \"&lt;&lt;9*pow(10,m-1)&lt;&lt;\"\\n\";\n        }\n        if(m&gt;arr[i]){\n            cout&lt;&lt;m&lt;&lt;\" b \"&lt;&lt;9*pow(10,m-1)&lt;&lt;\"\\n\";\n        } \n        if(m&lt;arr[i]){\n            /*if(m==arr[i]-1){\n            cout&lt;&lt;m&lt;&lt;\" c \"&lt;&lt;9*pow(10,arr[i]-1)-9&lt;&lt;\"\\n\";  \n            }\n            else{*/\n            sum=pow(10,arr[i])-1;\n            for(int j=arr[i]-1;j&gt;m;j++)\n                sum=sum-comb(arr[i],j)*pow(9,arr[i]-j+1);\n            cout&lt;&lt;\" d \"&lt;&lt;sum&lt;&lt;\"\\n\";\n            //}\n        }\n    }\n    //for m upto 10^4, k&lt;=10^5; else k=10^5\n    return 0;\n}\nint comb(int a, int b) {      //6,2\n        int j=1;\n        int s=a;\n        for(int k=a-1;k&gt;b;k--)     //5,4,3\n            s=s*k;\n        for(int l=1;l&lt;=b;l++)\n            s=s/l;\n        return s;\n    }\n    //It is a problem involving displaying number of integers with no digit //repeating more than m (=2 here) times for t(=1) inputs with each input //being a arr[i] (=4) digit number.\n</code></pre>\n"}, {"tags": ["c++", "coco2d-x"], "comments": [{"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489607011, "post_id": 42818699, "comment_id": 72750260, "body": "How can we answer without the code!"}, {"owner": {"reputation": 593, "user_id": 1955945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qt3vW.png?s=128&g=1", "display_name": "rlam12", "link": "https://stackoverflow.com/users/1955945/rlam12"}, "edited": false, "score": 0, "creation_date": 1489607728, "post_id": 42818699, "comment_id": 72750709, "body": "Because you are loading a lot of data from disk at startup? There are literally a million possible reasons why this could happen and you really gave no information. Try making a simple scene on Cocos2D and test that. If it is still slow, then buy a faster computer."}], "owner": {"reputation": 1, "user_id": 7710593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81efeea8b62234f83ae3cb34d8385974?s=128&d=identicon&r=PG&f=1", "display_name": "user7710593", "link": "https://stackoverflow.com/users/7710593/user7710593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489605043, "creation_date": 1489605043, "question_id": 42818699, "link": "https://stackoverflow.com/questions/42818699/how-do-i-fix-my-cocos2d-x-project-in-visual-studios-from-taking-a-long-time-to-l", "title": "How do I fix my Cocos2d-x project in visual Studios from taking a long time to load", "body": "<p><a href=\"https://i.stack.imgur.com/HkrtN.png\" rel=\"nofollow noreferrer\">Image of the load screen</a></p>\n\n<p>I am making a game in Cocos2d-x using Visual Studios 2015, it complies quickly, but then freezes on the below image.\nWhy does it compile quickly but then takes a long time to actually load up?</p>\n"}, {"tags": ["python", "c++", "tensorflow", "neural-network"], "comments": [{"owner": {"reputation": 460, "user_id": 3233501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/106821fa3fd78392c173217aaec13176?s=128&d=identicon&r=PG&f=1", "display_name": "KyleReemoN-", "link": "https://stackoverflow.com/users/3233501/kylereemon"}, "edited": false, "score": 0, "creation_date": 1489604478, "post_id": 42818483, "comment_id": 72748781, "body": "oh and here is my frozen_graph.pb file <a href=\"https://gist.github.com/KyleReemaN/419cce525a89f83018bd5ef71ae2316b#file-frozen_graph-pb\" rel=\"nofollow noreferrer\">gist.github.com/KyleReemaN/&hellip;</a>"}, {"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 2, "creation_date": 1489768071, "post_id": 42818483, "comment_id": 72831342, "body": "Can you import the frozen graph in Python without getting NaNs? Just trying to figure out if it&#39;s at all related to language compatibility. If the problem persists in Python, I would recommend <a href=\"https://www.tensorflow.org/programmers_guide/debugger\" rel=\"nofollow noreferrer\">the debugger</a> for figuring out where the NaNs come from (or <code>add_check_numerics_ops</code>)."}], "owner": {"reputation": 460, "user_id": 3233501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/106821fa3fd78392c173217aaec13176?s=128&d=identicon&r=PG&f=1", "display_name": "KyleReemoN-", "link": "https://stackoverflow.com/users/3233501/kylereemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2549, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1495546981, "creation_date": 1489604321, "last_edit_date": 1495546981, "question_id": 42818483, "link": "https://stackoverflow.com/questions/42818483/export-python-tensorflow-model-and-import-it-in-c", "title": "Export Python TensorFlow model and import it in C++", "body": "<p>I followed <a href=\"http://jackytung8085.blogspot.de/2016/06/loading-tensorflow-graph-with-c-api-by.html\" rel=\"nofollow noreferrer\">this tutorial</a> and tried to change it for my needs. I have a python file where I train a model and save the TensorFlow graph and frozen_graph, which should have the weights and architecture. And I've got a C++ file where I read the frozen_graph and try to predict an example.</p>\n\n<pre><code>// The session will initialize the outputs\nvector&lt;Tensor&gt; outputs;\n// Run the session, evaluating our \"softmax\" operation from the graph\nstatus = session-&gt;Run(inputs, {\"output_TT\"}, {}, &amp;outputs);\nint nHits = 0;\nint nClasses = 2;\nfor (vector&lt;Tensor&gt;::iterator it = outputs.begin(); it != outputs.end(); ++it) {\n    auto items = it-&gt;shaped&lt;float, 2&gt;({nTests, nClasses}); // 2 represent number of class\n    for (int i = 0; i &lt; nTests; i++) {\n        int arg_max = 0;\n        float val_max = items(i, 0);\n</code></pre>\n\n<p>but when I try to retrieve the results from the predictions I only get <code>NaN</code> from <code>items(i, 0)</code></p>\n\n<p>Here are all the files at github:</p>\n\n<ul>\n<li><p><a href=\"https://gist.github.com/KyleReemaN/419cce525a89f83018bd5ef71ae2316b#file-train_save_model-py\" rel=\"nofollow noreferrer\">train_save_model.py</a> (to train and save the graph)</p></li>\n<li><p><a href=\"https://gist.github.com/KyleReemaN/419cce525a89f83018bd5ef71ae2316b#file-pima-indians-diabetes-csv\" rel=\"nofollow noreferrer\">pima-indians-diabetes.csv</a> (csv for learning in python)</p></li>\n<li><p><a href=\"https://gist.github.com/KyleReemaN/419cce525a89f83018bd5ef71ae2316b#file-diabetes-cc\" rel=\"nofollow noreferrer\">diabetes.cc</a> (c++ file where I load and predict)</p></li>\n</ul>\n\n<p>Did I save the frozen_graph incorrectly? I also created a frozen graph on command line with bazel, but got the same effect. Did I read the data wrong in C++?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "opencl"], "comments": [{"owner": {"reputation": 3326, "user_id": 712452, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ab5a5d9538603a393f64dadf11367295?s=128&d=identicon&r=PG&f=1", "display_name": "smttsp", "link": "https://stackoverflow.com/users/712452/smttsp"}, "edited": false, "score": 1, "creation_date": 1489604502, "post_id": 42818462, "comment_id": 72748797, "body": "it seems you need to learn how to use cv::mat in any library, separately!!! <a href=\"http://stackoverflow.com/questions/42818297/how-to-iterate-every-element-of-cvmat/42818397#42818397\" title=\"how to iterate every element of cvmat\">stackoverflow.com/questions/42818297/&hellip;</a>"}, {"owner": {"reputation": 1223, "user_id": 1071908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a35a30f756a5e000625d21f187b0663?s=128&d=identicon&r=PG", "display_name": "themean", "link": "https://stackoverflow.com/users/1071908/themean"}, "reply_to_user": {"reputation": 3326, "user_id": 712452, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ab5a5d9538603a393f64dadf11367295?s=128&d=identicon&r=PG&f=1", "display_name": "smttsp", "link": "https://stackoverflow.com/users/712452/smttsp"}, "edited": false, "score": 0, "creation_date": 1489608420, "post_id": 42818462, "comment_id": 72751084, "body": "It seems that cv::mat is just input and output to my code. And iterate all over the elements and copying them to another buffer is obvious temporary solution for me OK???"}, {"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 0, "creation_date": 1489670249, "post_id": 42818462, "comment_id": 72779576, "body": "What kind of operation are you performing in opencl code? If they are image processing operations then opencv has opencl/cuda implementation of its own."}], "answers": [{"comments": [{"owner": {"reputation": 1223, "user_id": 1071908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a35a30f756a5e000625d21f187b0663?s=128&d=identicon&r=PG", "display_name": "themean", "link": "https://stackoverflow.com/users/1071908/themean"}, "edited": false, "score": 0, "creation_date": 1489778330, "post_id": 42835075, "comment_id": 72837363, "body": "Sorry maybe my English is not the best. But this is not what I ask for but thanks anyway"}], "tags": [], "owner": {"reputation": 1293, "user_id": 6093326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f3b47138d4c533e1faddc46ed9cac8?s=128&d=identicon&r=PG&f=1", "display_name": "Gwen", "link": "https://stackoverflow.com/users/6093326/gwen"}, "is_accepted": false, "score": 0, "last_activity_date": 1489669882, "creation_date": 1489669882, "answer_id": 42835075, "question_id": 42818462, "link": "https://stackoverflow.com/questions/42818462/how-to-use-cvmat-in-opencl/42835075#42835075", "title": "How to use cv::mat in opencl", "body": "<p><strong>Array to Mat</strong>: you can use the \"<a href=\"http://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a51615ebf17a64c968df0bf49b4de6a3a\" rel=\"nofollow noreferrer\">constructor for matrix headers pointing to user-allocated data</a>\" (see <a href=\"http://answers.opencv.org/question/45105/use-allocated-buffer-for-mat-data-pointer/\" rel=\"nofollow noreferrer\">this answer</a>):</p>\n\n<pre><code>Mat(int rows, int cols, int type, void* data, size_t step=AUTO_STEP);\n</code></pre>\n\n<p><strong>Mat to Ptr</strong>: you can use the <a href=\"http://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a4d33bed1c850265370d2af0ff02e1564\" rel=\"nofollow noreferrer\">data attribute</a> (from <a href=\"http://answers.opencv.org/question/38/what-is-the-most-effective-way-to-access-cvmat-elements-in-a-loop/?answer=7420#post-id-7420\" rel=\"nofollow noreferrer\">this answer</a>)</p>\n\n<pre><code>unsigned char *input = (unsigned char*)(img.data);\n\nfor(int j = 0;j &lt; img.rows;j++){\n    for(int i = 0;i &lt; img.cols;i++){\n        unsigned char b = input[img.step * j + img.channels() * i ] ;\n        unsigned char g = input[img.step * j + img.channels() * i + 1];\n        unsigned char r = input[img.step * j + img.channels() * i + 2];\n    }\n}\n</code></pre>\n\n<p>Of course, you need to adapt this to your data type.</p>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 1071908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a35a30f756a5e000625d21f187b0663?s=128&d=identicon&r=PG", "display_name": "themean", "link": "https://stackoverflow.com/users/1071908/themean"}, "edited": false, "score": 0, "creation_date": 1489778248, "post_id": 42839493, "comment_id": 72837316, "body": "Ok. Thanks. I&#39;m rather interested how to use opencl instead of cv rapper around opencl. I will give you + and if there is no more useful answer from yours I will accept yours"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1488118, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/74638bb1fe3873f2c5d1d31ac6cdafe2?s=128&d=identicon&r=PG", "display_name": "bweber", "link": "https://stackoverflow.com/users/1488118/bweber"}, "is_accepted": false, "score": 1, "last_activity_date": 1489681132, "last_edit_date": 1495542728, "creation_date": 1489681132, "answer_id": 42839493, "question_id": 42818462, "link": "https://stackoverflow.com/questions/42818462/how-to-use-cvmat-in-opencl/42839493#42839493", "title": "How to use cv::mat in opencl", "body": "<p>Maybe this answer helps you with your question: <a href=\"https://stackoverflow.com/questions/28529458/how-to-launch-custom-opencl-kernel-in-opencv-3-0-0-ocl/answer-28644721\">How to launch custom OpenCL kernel in OpenCV (3.0.0) OCL?</a></p>\n\n<p>You could maybe use the <code>UMat</code> class that OpenCV provides.</p>\n\n<pre><code>cv::Mat mat = ...;\n// Upload input mat\ncv::UMat input_gpu = mat.getUMat(cv::ACCESS_READ, cv::USAGE_ALLOCATE_DEVICE_MEMORY);\n// Create output mat on the GPU\ncv::UMat output_gpu(mat_src.size(), CV_32F, cv::ACCESS_WRITE, cv::USAGE_ALLOCATE_DEVICE_MEMORY);\n// Download output mat\ncv::Mat output = output_gpu.getMat(cv::ACCESS_READ);\n</code></pre>\n\n<p>From what I understand you should be able to pass the <code>UMat</code> directly to your kernel\nusing <code>cv::ocl::KernelArg::ReadWrite(output_gpu)</code>. The kernel argument for that mat would then be <code>__global uchar*</code>. I'm not sure though, I have only used OpenCV in combination with CUDA so far.</p>\n"}], "owner": {"reputation": 1223, "user_id": 1071908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a35a30f756a5e000625d21f187b0663?s=128&d=identicon&r=PG", "display_name": "themean", "link": "https://stackoverflow.com/users/1071908/themean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510672157, "creation_date": 1489604261, "last_edit_date": 1510672157, "question_id": 42818462, "link": "https://stackoverflow.com/questions/42818462/how-to-use-cvmat-in-opencl", "title": "How to use cv::mat in opencl", "body": "<h3>Problem</h3>\n\n<p>I have opencl code which must take <code>cv::mat</code> as input and return <code>cv::mat</code> as output. </p>\n\n<p>For now I convert the input to regular array of chars and pass it to opencl and convert the output (which is char array) to <code>cv::mat</code>.</p>\n\n<h3>What I have</h3>\n\n<p>I try to use <code>cv::mat</code> raw data but there are some gaps in the data. For that reason I copy <code>cv::mat</code> to the contiguous array, but I'm sure that I can force opencl to use data with gaps . </p>\n\n<h3>Question</h3>\n\n<p>Is it possible for someone to explain how I can avoid copying data to and from the array, and directly use <code>cv::mat</code> as input and output?</p>\n"}, {"tags": ["c++", "struct", "arduino", "polymorphism"], "comments": [{"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489604363, "post_id": 42818372, "comment_id": 72748702, "body": "What does pwm.setPWM function does? what are its parameters?Like the first parameter is pin what is 2nd and 3rd"}, {"owner": {"reputation": 205, "user_id": 5301461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b863d6004bdeff8aa7b4cbd781a72a5?s=128&d=identicon&r=PG&f=1", "display_name": "Skipher", "link": "https://stackoverflow.com/users/5301461/skipher"}, "reply_to_user": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489604510, "post_id": 42818372, "comment_id": 72748801, "body": "&quot;setPWM(channel, on, off): This function sets the start (on) and end (off) of the high segment of the PWM pulse on a specific channel.  You specify the &#39;tick&#39; value between 0..4095 when the signal will turn on, and when it will turn of.  Channel indicates which of the 16 PWM outputs should be updated with the new values.&quot;"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1489605473, "post_id": 42818372, "comment_id": 72749381, "body": "Why are your legs different class types? You can have a leg that takes the channels for that leg in the CTOR."}], "answers": [{"tags": [], "owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "is_accepted": false, "score": 0, "last_activity_date": 1489605623, "last_edit_date": 1489605623, "creation_date": 1489605262, "answer_id": 42818760, "question_id": 42818372, "link": "https://stackoverflow.com/questions/42818372/c-struct-polymorphism-in-arduino/42818760#42818760", "title": "C++ struct polymorphism in Arduino", "body": "<p>You have redefined <code>int channels[2]</code> in every successor, now you have Leg::channels available via Leg* and LegSuccessors::channels invisible in your use case. Leg::channels not initialiazed, so it filled with garbage values.\nTo solve the problem, first remove channels declarations in Leg successors. Second, redefine <code>Leg* myLegs[4]</code> to <code>{new fRight{0, 1}, new fLeft{2, 3}, ... and so on};</code></p>\n"}, {"comments": [{"owner": {"reputation": 205, "user_id": 5301461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b863d6004bdeff8aa7b4cbd781a72a5?s=128&d=identicon&r=PG&f=1", "display_name": "Skipher", "link": "https://stackoverflow.com/users/5301461/skipher"}, "edited": false, "score": 0, "creation_date": 1489631633, "post_id": 42819227, "comment_id": 72759794, "body": "I had thought that polymorphism allows the compiler to determine the appropriate variable type during runtime, so that the pointers to Leg will be able to see the member variables &quot;channels&quot; and &quot;started.&quot;"}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "reply_to_user": {"reputation": 205, "user_id": 5301461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b863d6004bdeff8aa7b4cbd781a72a5?s=128&d=identicon&r=PG&f=1", "display_name": "Skipher", "link": "https://stackoverflow.com/users/5301461/skipher"}, "edited": false, "score": 0, "creation_date": 1489651778, "post_id": 42819227, "comment_id": 72766934, "body": "@Skipher the compiler determines absolutely nothing at runtime, because there is no compiler at runtime."}], "tags": [], "owner": {"reputation": 603, "user_id": 3521005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f000bca57dbb23bba788e971e4332e2?s=128&d=identicon&r=PG&f=1", "display_name": "jhh", "link": "https://stackoverflow.com/users/3521005/jhh"}, "is_accepted": true, "score": 2, "last_activity_date": 1489606848, "creation_date": 1489606848, "answer_id": 42819227, "question_id": 42818372, "link": "https://stackoverflow.com/questions/42818372/c-struct-polymorphism-in-arduino/42819227#42819227", "title": "C++ struct polymorphism in Arduino", "body": "<p>Each of your leg classes (fRight, fLeft, bRight, bLeft) creates two variables:</p>\n\n<pre><code>int channels[2]= {2, 3};\nbool started= false;\n</code></pre>\n\n<p>...which creates a different copy which cannot be accessed through the Leg pointer.</p>\n\n<p>You need to change to something like the following to make sure you are setting the values in the base struct, Leg.</p>\n\n<pre><code>struct fRight :  Leg\n{\n    fRight() {\n        started = false;\n        channels[0] = 0;\n        channels[1] = 1;\n    }\n    virtual void foo() {}\n};\n</code></pre>\n\n<p>It's possible you don't even need these individual classes though (depending on what your pure virtual foo() needs to do).  If you were to change Leg to look like:</p>\n\n<pre><code>struct Leg\n{\n    Leg(int channel1, int channel2) :\n        started {false}\n    {\n        channels[0] = channel1;\n        channels[1] = channel1;\n    }\n\n    int channels[2];\n    bool started;\n    //virtual void foo() = 0;\n};\n</code></pre>\n\n<p>... you could just instantiate:</p>\n\n<pre><code>Leg* myLegs[4] = { new Leg{0,1}, new Leg{2,3}, new Leg{4,5}, new Leg{6,7} }\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 5301461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b863d6004bdeff8aa7b4cbd781a72a5?s=128&d=identicon&r=PG&f=1", "display_name": "Skipher", "link": "https://stackoverflow.com/users/5301461/skipher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 42819227, "answer_count": 2, "score": 0, "last_activity_date": 1489606866, "creation_date": 1489603980, "last_edit_date": 1489606866, "question_id": 42818372, "link": "https://stackoverflow.com/questions/42818372/c-struct-polymorphism-in-arduino", "title": "C++ struct polymorphism in Arduino", "body": "<p>I have a class called <code>Quadruped_Robot</code> that has four structures, <code>fRight</code>, <code>fLeft</code>, <code>bRight</code>, and <code>bLeft</code> that inherit from a base structure, <code>Leg</code>. In <em>Arduino</em>, I am trying to actuate 8 servo motors by cycling through each one, and the four structures hold the servo driver channel value. I've created an array of pointers to the four structures, so that the function, <code>actuateLeg</code>, can send PWM signals to the appropriate channel determined during runtime. However, none of the servos respond, and upon inspecting the values given by <code>myLeg-&gt;channels[0]</code> and <code>myLeg-&gt;channels[1]</code>, they report values that are in the range of thousands, both positive and negative. However, the values should be between <code>0</code> and <code>7</code>. Why are the channel values incorrect when I try to access them using the <code>-&gt;</code> operator?</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n#include &lt;Adafruit_PWMServoDriver.h&gt;\n\n//default address\nAdafruit_PWMServoDriver pwm = Adafruit_PWMServoDriver();\n\nclass Quadruped_Robot{\n\n  private:\n  //minimum and maximum pulse length count\n  //valid range: [0,4096]\n  //0   degrees:    200\n  //60  degrees:    360\n  //90  degrees:    510\n  //180 degrees:    915\n  size_t SERVOMIN= 200;\n  size_t SERVOMAX= 915;\n\n  //phase shift between upper and lower leg actuation in milliseconds\n  size_t OFFSET= 1000;\n\n  //pulse length to servo motors\n  size_t PULSE_LENGTH= 100;\n\n  struct Leg{\n    int channels[2];\n    bool started;\n    virtual void foo()=0;\n  };\n\n  struct fRight:Leg{\n    //channel numbers on the PWM/Servo driver for the front right leg\n    //0= upper leg\n    //1= lower leg\n    int channels[2]= {0, 1};\n    bool started= false;\n    virtual void foo(){}\n  };\n\n  struct fLeft:Leg{\n    //channel numbers on the PWM/Servo driver for the front left leg\n    //2= upper leg\n    //3= lower leg\n    int channels[2]= {2, 3};\n    bool started= false;\n    virtual void foo(){}\n  };\n\n  struct bRight:Leg{\n    //channel numbers on the PWM/Servo driver for the back right leg\n    //4= upper leg\n    //5= lower leg\n    int channels[2]= {4, 5};\n    bool started= false;\n    virtual void foo(){}\n  };\n\n  struct bLeft:Leg{\n    //channel numbers on the PWM/Servo driver for the back left leg\n    //6= upper leg\n    //7= lower leg\n    int channels[2]= {6, 7};\n    bool started= false;\n    virtual void foo(){}\n  };\n\n  //bool value indicating whether the servos have begun moving\n  bool started= false;\n\n  //holds the previous timestamp\n  unsigned long prevTime;\n\n  public:\n\n  Leg* myLegs[4]= {new fRight, new fLeft, new bRight, new bLeft};\n\n  void actuateLeg(size_t leg){  \n    prevTime= millis();\n    Leg *myLeg= myLegs[leg];\n    size_t PWM= SERVOMIN;\n\n    //Actuate upper leg and wait until the phase shift time has elapsed to actuate the lower leg\n    while(millis()-prevTime &lt; OFFSET){\n      pwm.setPWM(myLeg-&gt;channels[0], 0, PWM );\n      Serial.println(myLeg-&gt;channels[0]);\n    }\n    prevTime= millis();\n\n    //Actuate lower leg and wait until the phase shift time has elapsed to actuate the upper leg again\n    while(millis()-prevTime &lt; OFFSET){\n      pwm.setPWM(myLeg-&gt;channels[1], 0, PWM );\n      Serial.println(myLeg-&gt;channels[1]);\n    }\n    prevTime= millis();\n    PWM= SERVOMAX;\n\n    //Actuate upper leg and wait until the phase shift time has elapsed to actuate the lower leg again\n    while(millis()-prevTime &lt; OFFSET){\n      pwm.setPWM(myLeg-&gt;channels[0], 0, PWM );\n      Serial.println(myLeg-&gt;channels[0]);\n    }\n    prevTime= millis();\n\n    while(millis()-prevTime &lt; OFFSET){\n      pwm.setPWM(myLeg-&gt;channels[1], 0, PWM );\n      Serial.println(myLeg-&gt;channels[1]);\n    }\n    delete myLeg;\n  }\n\n  void walk(){\n    actuateLeg(0);\n    actuateLeg(2);\n    actuateLeg(1);\n    actuateLeg(3);\n  }\n\n};\n\n//Create a Quadruped_Robot object\nQuadruped_Robot myQuadruped;\n\nvoid setup() {\n  //Begin serial communication at 9600 bps\n  Serial.begin(9600);\n\n  //MG996R servo runs at 50 Hz\n  pwm.setPWMFreq(50);\n  pwm.begin();\n\n}\n\nvoid loop() {\n  myQuadruped.walk();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string", "algorithm", "search"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1489605874, "post_id": 42818267, "comment_id": 72749579, "body": "Just as a hasty guess after reviewing KMP, I think the key will be remembering the start and length of previous partial matches, until they can be eliminated by finding a character which is not part of any ongoing match."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489605937, "post_id": 42818267, "comment_id": 72749615, "body": "Can&#39;t you remove all of them using <code>regex_replace()</code>?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1489606184, "post_id": 42818267, "comment_id": 72749748, "body": "They may overlap, S = &quot;abababccc&quot;, T=&quot;abc&quot; -&gt; &quot;ababcc&quot;, incorrect with one pass of replace"}, {"owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1489610179, "post_id": 42818267, "comment_id": 72752080, "body": "@KennyOstrom Exactly what I&#39;m thinking. However, I have trouble implementing that. It seems to be more complicated than what I thought. T may be split up into many pieces."}, {"owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489610272, "post_id": 42818267, "comment_id": 72752138, "body": "@Barmar As Kenny Ostrom said, a new string T may form after removing T."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489610935, "post_id": 42818267, "comment_id": 72752550, "body": "Can&#39;t you just repeatedly do the replacements until the string isn&#39;t found?"}, {"owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489611049, "post_id": 42818267, "comment_id": 72752603, "body": "@Barmar The running time can go up to O(n^2)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1489612457, "post_id": 42818267, "comment_id": 72753350, "body": "@Barnar That algorithm may not be correct. Removing every occurrence of <code>abcab</code> from <code>a abcab bc abcab</code> (ignoring whitespace, those are there for emphasis) gives <code>abc</code>, but always removing the leftmost occurrence gives first <code>a bc abcab</code> = <code>abcab cab</code>, then <code>cab</code>. So regex-replacing all occurrences repeatedly can give different results than replacing the first occurrence repeatedly. The latter can still be done with regex, though for efficiency you probably want some operations that most regex libraries do not expose (e.g. to let you roll back the current DFA state after the replacement)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1489612830, "post_id": 42818267, "comment_id": 72753543, "body": "I think the simplest thing will be to just store the value of <code>i</code> and <code>j</code> for each position in <code>S</code>, so that you can restore them when you find a match."}, {"owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "edited": false, "score": 0, "creation_date": 1489625352, "post_id": 42818267, "comment_id": 72758198, "body": "Can you please show me how to know the value of <code>i</code> to change <code>j</code> to that position? How do I know the start of the current T in S? Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "is_accepted": true, "score": 0, "last_activity_date": 1489932295, "last_edit_date": 1489932295, "creation_date": 1489931720, "answer_id": 42887412, "question_id": 42818267, "link": "https://stackoverflow.com/questions/42818267/find-remaining-string-after-deleting-a-substring-repeately/42887412#42887412", "title": "Find remaining string after deleting a substring repeately", "body": "<p>I figured out the code. I need 2 more arrays:</p>\n\n<ul>\n<li><code>prev</code>: storing the previous positions of <code>i</code> indices on <code>S</code>. Initially <code>prev[i] = prev[i - 1]</code>. When we find a match at the <code>i + length(T)</code> position, we set <code>prev[i + length(T) + 1] = i - 1</code> (i.e We point <code>prev</code> of a new position <code>i</code> to skip the entire string <code>T</code>).</li>\n<li><code>jv</code>: storing the value of <code>j</code> at each <code>i</code> position on <code>S</code>.</li>\n</ul>\n\n<p>After deleting all <code>T</code> in <code>S</code>, we use <code>prev</code> to reconstruct the remaining string. The overall complexity is <code>O(n m)</code>.</p>\n\n<p>Here is the whole code:</p>\n\n<pre><code>std::string remaining_after_delete_repeatedly(std::string s, std::string t) {\n    std::vector&lt;int&gt; prefix = make_prefix(t);\n    s += \"#\";\n    std::vector&lt;int&gt; prev(s.length());\n    std::vector&lt;int&gt; jv(s.length());\n\n    for (int i = 0; i &lt; s.length(); prev[i] = i - 1, ++i);\n\n    for (int i = 0, j = 0; i &lt; s.length(); ) {\n        if (s[i] == t[j]) {\n            jv[i] = j;\n            ++i;\n            ++j;\n        }\n        else if (j &gt; 0)\n            j = prefix[j - 1];\n        else\n            jv[i++] = 0;\n        if (j == (int)t.length()) {\n            int u = i - 1;\n            for (int k = 0; k &lt; t.length(); ++k)\n                u = prev[u];\n            prev[i] = u;\n            j = u &lt; 0 ? 0 : jv[u] + 1;\n        }\n    }\n    std::string answer(1, s.back());\n    for (int i = prev[s.length() - 1]; i &gt; -1; i = prev[i])\n        answer += s[i];\n    std::reverse(answer.begin(), answer.end());\n    return answer.substr(0, answer.length() - 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 7132474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1b488662f59a230cc6e40ad52562e2?s=128&d=identicon&r=PG&f=1", "display_name": "dh16", "link": "https://stackoverflow.com/users/7132474/dh16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 42887412, "answer_count": 1, "score": 0, "last_activity_date": 1489932295, "creation_date": 1489603669, "last_edit_date": 1489605302, "question_id": 42818267, "link": "https://stackoverflow.com/questions/42818267/find-remaining-string-after-deleting-a-substring-repeately", "title": "Find remaining string after deleting a substring repeately", "body": "<p>Let S and T be given strings. Then we remove T from S at the first occurrence of T in S, and call the remaining string of S to be S1. Again, we remove T from S1 at the first occurrence of T in S1, and call the remaining string of S1 to be S2. Repeatly do so until there is no substring T in Sk.</p>\n\n<p>Note that we may have a substring T in S after removing T. What is the remaining string of S? (It is fine if S is empty.)</p>\n\n<p>Constraint:</p>\n\n<ul>\n<li>1 &lt;= length(S) &lt;= 10^6.</li>\n<li>1 &lt;= length(T) &lt;= 100.</li>\n</ul>\n\n<p>For example, S = \"aa<strong>abba</strong>b<strong>abba</strong>bab\", T = \"abba\". The remaining string is \"ab\".</p>\n\n<p>I'm thinking to use KMP to have a prefix on T. Then when we find a string T in S, we have to change the indices i and j (i for S, and j for T) to new locations. However, I'm not exactly sure what j (and probably i) should be? The string may have a lot of fragments.</p>\n\n<p>Is my approach correct? If so, could you please give me detailed steps how I can do it, especially what would be the new value of j? I stuck at the value of j. I don't know what I should assign j to after finding a match. This is part of the algorithm which I couldn't figure out.</p>\n\n<p>This is my uncompleted code.</p>\n\n<pre><code>std::vector&lt;int&gt; make_prefix(std::string &amp;t) {\n    std::vector&lt;int&gt; prefix(t.length());\n    prefix[0] = 0;\n    for (int i = 1, j = 0; i &lt; t.length(); )\n        if (t[i] == t[j]) {\n            prefix[i] = j + 1;\n            ++i; ++j;\n        }\n        else if (j &gt; 0)\n            j = prefix[j - 1];\n        else\n            prefix[i++] = 0;\n    return prefix;\n}\n\nstd::string repeatRemoving(std::string s, std::string t) {\n    std::vector&lt;int&gt; prefix = make_prefix(t);\n    for (int i = 0, j = 0; i &lt; s.length(); ) {\n        if (s[i] == t[j]) {\n            ++i;\n            ++j;\n        }\n        else if (j &gt; 0)\n            j = prefix[j - 1];\n        else\n            ++i;\n\n        if (j == (int)t.length()) {\n            // What should go here after finding a match?\n            // How can I adjust the values of i and j?\n            // How can I mark the deleted characters in s?\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "arrays", "vector", "cout"], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489603827, "post_id": 42818285, "comment_id": 72748339, "body": "The Vectors are of the same size - it&#39;s not an error."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489604137, "post_id": 42818285, "comment_id": 72748544, "body": "@bgaard  Each one of those vectors are resizable and independent of each other.  Yes, you wrote a toy program, but it is a mistake to write code like this.  If you want to ensure the vectors are the same size, you don&#39;t assume it -- write the code to ensure it."}, {"owner": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489604448, "post_id": 42818285, "comment_id": 72748756, "body": "Thanks, I&#39;ll keep that in mind the next time I use the command."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1489603985, "last_edit_date": 1489603985, "creation_date": 1489603715, "answer_id": 42818285, "question_id": 42818214, "link": "https://stackoverflow.com/questions/42818214/working-with-values-from-array-containing-multiple-vectors/42818285#42818285", "title": "Working with values from array, containing multiple vectors", "body": "<p>This loop counter is is incorrect:</p>\n\n<pre><code> for (int i = 0; i &lt; 20; i+2)\n</code></pre>\n\n<p>You're not incrementing <code>i</code> in this loop.</p>\n\n<p>Another potential error is that you're using the wrong vector as the loop counter:</p>\n\n<pre><code> for (int i = 0; i &lt; endPieceV[0].size(); i++) {\n                            // ^ Wrong, should be 1\n        std::cout &lt;&lt; endPieceV[1][i] &lt;&lt; \" \";\n</code></pre>\n\n<p>Even though you mentioned that the vectors are the same size, this is really not the way to write a loop like this.  </p>\n"}, {"comments": [{"owner": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489603963, "post_id": 42818311, "comment_id": 72748421, "body": "You just saved my day. I have been searching for solutions most of the day."}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "reply_to_user": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489604030, "post_id": 42818311, "comment_id": 72748468, "body": "Mark as answer if it helped you."}, {"owner": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "edited": false, "score": 0, "creation_date": 1489604077, "post_id": 42818311, "comment_id": 72748498, "body": "I have to wait 7 minutes, but I will ;)"}], "tags": [], "owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "is_accepted": true, "score": 1, "last_activity_date": 1489603800, "creation_date": 1489603800, "answer_id": 42818311, "question_id": 42818214, "link": "https://stackoverflow.com/questions/42818214/working-with-values-from-array-containing-multiple-vectors/42818311#42818311", "title": "Working with values from array, containing multiple vectors", "body": "<p>You are not incrementing i in first loop</p>\n\n<pre><code>for (int i = 0; i &lt; 20; i+2) {\n        endPieceV[0].push_back(i);\n        endPieceV[1].push_back(i*i+2);\n    }\n</code></pre>\n\n<p>Notice <code>i+2</code>  should be <code>i+=2</code></p>\n"}], "owner": {"reputation": 112, "user_id": 7179536, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c01509775f258f4fb18229cc27f9b9e?s=128&d=identicon&r=PG&f=1", "display_name": "bgaard", "link": "https://stackoverflow.com/users/7179536/bgaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 42818311, "answer_count": 2, "score": 0, "last_activity_date": 1489603985, "creation_date": 1489603528, "question_id": 42818214, "link": "https://stackoverflow.com/questions/42818214/working-with-values-from-array-containing-multiple-vectors", "title": "Working with values from array, containing multiple vectors", "body": "<p>So basically I have created an array containing two vectors, and I want to be able to change/output values. I have read that the following syntax should work, but when I run the program, it just keeps filling up the memory without printing anything.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n\nint main() {\n    std::array&lt;std::vector&lt;float&gt;, 2&gt; endPieceV;\n\n    for (int i = 0; i &lt; 20; i+2) {\n        endPieceV[0].push_back(i);\n        endPieceV[1].push_back(i*i+2);\n    }\n\n    std::cout &lt;&lt; \"Vector 1:\" &lt;&lt; std::endl;\n    for (int i = 0; i &lt; endPieceV[0].size(); i++) {\n        std::cout &lt;&lt; endPieceV[0][i] &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Vector 2:\" &lt;&lt; std::endl;\n    for (int i = 0; i &lt; endPieceV[0].size(); i++) {\n        std::cout &lt;&lt; endPieceV[1][i] &lt;&lt; \" \";\n    }\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>I don't understand why it doesn't start printing, but just keeps loading?</p>\n"}, {"tags": ["c++", "handle", "void-pointers"], "comments": [{"owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "edited": false, "score": 0, "creation_date": 1489603060, "post_id": 42818037, "comment_id": 72747905, "body": "<i>does that mean the value HANDLE points to is 21</i> No, it means <code>s</code> is 21. I doubt there&#39;s anything interesting at that memory address."}, {"owner": {"reputation": 1366, "user_id": 1147141, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0869f216c4bae930c93e7b568984ed01?s=128&d=identicon&r=PG", "display_name": "efekctive", "link": "https://stackoverflow.com/users/1147141/efekctive"}, "edited": false, "score": 0, "creation_date": 1489615031, "post_id": 42818037, "comment_id": 72754595, "body": "I may be wrong but in the code, you cast s to another type. The actual address never changes"}], "answers": [{"tags": [], "owner": {"reputation": 1422, "user_id": 4397543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-udEtVYPE4cM/AAAAAAAAAAI/AAAAAAAAAFA/4QsyAr61Tr4/photo.jpg?sz=128", "display_name": "Heinz Kessler", "link": "https://stackoverflow.com/users/4397543/heinz-kessler"}, "is_accepted": true, "score": 4, "last_activity_date": 1489603899, "creation_date": 1489603899, "answer_id": 42818345, "question_id": 42818037, "link": "https://stackoverflow.com/questions/42818037/handle-void-pointer-objects-in-c/42818345#42818345", "title": "Handle , Void Pointer , Objects in C++", "body": "<p>1.: A handle is an identifier for an object. Since \"21\" is no object, but simply a number, your function call is invalid. Your code will only work if '<code>s</code>' really points to a struct of type <code>Something</code>. Simply spoken, a handle is nothing than a pointer is nothing than a memory address, thus \"21\" would be interpreted as a memory address and will crash your program if you try to write to it</p>\n\n<p>2.: \"Opaque value\" means that no developer that uses your code can't take any assumptions about the inner structure of an object the handle identifies. This is an advantage over a pointer to a struct, where a developer can look at the structure and take some assumptions that will not be true anymore after you changed your code. \"Pass around\" simply means: assigning it and using it as a function call parameter, like in:</p>\n\n<pre><code>HANDLE s = CreateAnObject();\nDoSomethingWithObject( s );\nHANDLE t = s;\n</code></pre>\n\n<p>etc.</p>\n\n<p>By the way: In real code, you should give handles to your objects different names, like EMPLOYEE_HANDLE, ORDER_HANDLE etc.\nA typical example of a handle are window handles in Windows. They identify windows, without giving you any information about how a \"Window\" memory structure in the operating system is built, therefore Microsoft was able to change this inner structure without the risk of breaking other developer's code with changes to the \"Window\" structure.</p>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "edited": false, "score": 0, "creation_date": 1489604758, "post_id": 42818349, "comment_id": 72748951, "body": "It makes so much sense, but could you please elaborate on what the line Something&amp; something = arrayOfSomethingObjects[s]; means? Does it mean that in an array of object type if s is 3, so see which object it refers to at 3 and assign the type of Something to something?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "edited": false, "score": 0, "creation_date": 1489605177, "post_id": 42818349, "comment_id": 72749201, "body": "@GENIVI-LEARNER, I updated the answer a bit. When you use <code>Something&amp;</code>, you are creating a reference, not a copy."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1489605132, "last_edit_date": 1489605132, "creation_date": 1489603910, "answer_id": 42818349, "question_id": 42818037, "link": "https://stackoverflow.com/questions/42818037/handle-void-pointer-objects-in-c/42818349#42818349", "title": "Handle , Void Pointer , Objects in C++", "body": "<blockquote>\n  <p>If we pass the value to the function dosomething(21,2,2), does that mean the value HANDLE points to is 21, </p>\n</blockquote>\n\n<p>No. It just means that value of the <code>void*</code> is 21. If you treat 21 as the value of a pointer to an object of type <code>Something</code>, it will most likely lead to undefined behavior.</p>\n\n<blockquote>\n  <p>2.Secondly the link also says \"So in your code you just pass HANDLE around as an opaque value\" what does it actually mean? Why do we \"pass handle around\"? If someone can give more convincing example of handles that uses objects that will be great!</p>\n</blockquote>\n\n<p>A handle is opaque in the sense that you cannot see anything through it. If a handle is represented by a <code>void*</code>, you can't see anything about the object since a <code>void*</code> cannot be dereferenced. If a handle is represented by an <code>int</code> (as an index to some array defined elsewhere in your code), you can't look at the value of the handle and make any sense of what the corresponding object represents.</p>\n\n<p>The only way to make sense of a handle is to convert it a pointer or a reference using a method that is appropriate for the handle type.</p>\n\n<p>In the case where a handle is represented by a <code>void*</code>, the code you have posted illustrates how to extract a pointer to a concrete object and make sense of the object. </p>\n\n<p>In the case where a handle is represented by an <code>int</code>, you may see something along the lines of:</p>\n\n<pre><code>int doSomething(HANDLE s, int a, int b) {\n\n   // If the value of s is 3, something will be a reference\n   // to the fourth object in the array arrayOfSomethingObjects.\n\n   Something&amp; something = arrayOfSomethingObjects[s];\n   return something.doit(a, b);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "edited": false, "score": 0, "creation_date": 1489605027, "post_id": 42818381, "comment_id": 72749114, "body": "The word thingy explains a lot cause the word Handle is kinda confusing!.Thanks!"}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 1, "last_activity_date": 1489604004, "creation_date": 1489604004, "answer_id": 42818381, "question_id": 42818037, "link": "https://stackoverflow.com/questions/42818037/handle-void-pointer-objects-in-c/42818381#42818381", "title": "Handle , Void Pointer , Objects in C++", "body": "<p>I didn't realize there was one defacto article on HANDLEs or a defacto way to implement them. They are usually a windows construct and can be implemented any way some developer from 1985 decided to implement them.</p>\n\n<p>It really has as much meaning as \"thingy\", or rather \"thingy that can be used to get a resource\"</p>\n\n<p>Do not get into the habit of creating your own \"handle\" and certainly do not try to mimic code idioms from 1985. Void pointers, reinterpret_casts, and HANDLE are all things that you should avoid at all costs if possible.</p>\n\n<p>The only time you should have to deal with \"HANDLE\" is when using the Windows API in which case the documentation will tell you what to do with it.</p>\n\n<p>In modern C++, if you want to pass objects around, use references, pointers, and smart pointers(including unique_ptr, shared_ptr, weak_ptr)  and study up on which scenarios call for which.</p>\n"}], "owner": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3868, "favorite_count": 0, "accepted_answer_id": 42818345, "answer_count": 3, "score": 2, "last_activity_date": 1489605132, "creation_date": 1489602886, "last_edit_date": 1592644375, "question_id": 42818037, "link": "https://stackoverflow.com/questions/42818037/handle-void-pointer-objects-in-c", "title": "Handle , Void Pointer , Objects in C++", "body": "<p>So I was reading the article on <a href=\"https://stackoverflow.com/questions/1303123/what-is-a-handle-in-c\">Handle in C</a> and realized that we implement handles as void pointers so &quot;whatever&quot; Object/data type we get we can cast the void pointer to that kind of Object/data and get its value. So I have basically two concerns :</p>\n<p>1.If lets say in following example taken from <a href=\"https://stackoverflow.com/questions/1303123/what-is-a-handle-in-c\">Handle in C</a></p>\n<pre><code> typedef void* HANDLE;   \n int doSomething(HANDLE s, int a, int b) {\n         Something* something = reinterpret_cast&lt;Something*&gt;(s);\n         return something-&gt;doit(a, b);\n     }\n       \n</code></pre>\n<p>If we pass the value to the function <code>dosomething(21,2,2)</code>, does that mean the value HANDLE points to is 21, if yes how does any object when we type cast it to that object, will it be able to use it, like in this example, so in otherwords where does pointer to the object Something, <code>something</code>, will store the value 21.</p>\n<p>2.Secondly the link also says &quot;So in your code you just pass HANDLE around as an opaque value&quot; what does it actually mean? Why do we &quot;pass handle around&quot;? If someone can give more convincing example of handles that uses objects that will be great!</p>\n"}, {"tags": ["c++", "windows", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1489603106, "post_id": 42817878, "comment_id": 72747931, "body": "If you are only building a single executable then <code>MT</code> make your life easy.  If you are building a program that comprises an exe and supporting dlls then <code>MD</code> will be required unless you invest a lot of time and effort into dynamic memory management.  If you build <code>MD</code> then include the appropriate Microsoft runtime redistributable package with your installer and run it during the installation process."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1489603393, "post_id": 42817878, "comment_id": 72748095, "body": "Unless your user has Visual Studio (and the correct version) installed, the /Mxd versions of your library will be totally useless to them. The only ones that can be used are the /MT and /MD versions. Also, the client can&#39;t just install debug libraries -- they actually need an installation of Visual Studio"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1489603420, "post_id": 42817878, "comment_id": 72748108, "body": "@PaulMcKenzie Only the /MDd version needs Visual Studio itself installed. The /MD version needs the Visual C++ Redistributable installed and that can be bundled with the application, possibly just by including the DLL depending on the version of Visual Studio."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489604428, "post_id": 42817878, "comment_id": 72748742, "body": "I would have thought that the <code>&#47;MTd</code> would also need Visual Studio to be installed, since it is a debug library."}, {"owner": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490066652, "post_id": 42817878, "comment_id": 72934376, "body": "@PaulMcKenzie Since <code>&#47;MT</code> and <code>&#47;MTd</code> link the run-time library directly into the executable or DLL, forming a single unit, they don&#39;t require anything to be installed.  The result is a completely self-contained binary."}], "owner": {"reputation": 2305, "user_id": 2056201, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/bba9995d4071b28c1f54bcb8ae03a1f2?s=128&d=identicon&r=PG", "display_name": "Mich", "link": "https://stackoverflow.com/users/2056201/mich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2639, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1490053602, "creation_date": 1489602481, "question_id": 42817878, "link": "https://stackoverflow.com/questions/42817878/mt-vs-md-options-in-visual-studio-compiler", "title": "-MT vs -MD options in Visual Studio compiler", "body": "<p>Good afternoon,</p>\n\n<p>I want to understand these options a little better, \nThis is the reading I have done so far:\n<a href=\"https://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx</a></p>\n\n<p>Up to this point I understand that I need to compile all the libraries involved in the project with the same /MT, /MTd, /MD, /MDd options</p>\n\n<p>From the article above, it seems the /MT and /MTd options statically link the visual C library, msvcrt.lib to the executable, whereas the /MD option requires you to have this DLL.</p>\n\n<p>The DLL usually ships with Visual C++ redistributable (if compiling for release) or visual studio (if compiling a debug release) ? Correct?</p>\n\n<p>So if the client does not have the correct version of redistributable installed or the correct version of visual studio, they will need to install these if I build with /MD or /MDd options respectively,</p>\n\n<p>If I use /MT and /MTd, the client should not need to do this</p>\n\n<p>Is this correct?\nWould /MT option be the recommended choice for applications that are meant to be distributed and used across variety of windows OS's</p>\n\n<p>Thanks for you input.</p>\n"}, {"tags": ["c++", "c++11", "templates", "dynamic", "refactoring"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489602754, "post_id": 42817827, "comment_id": 72747709, "body": "<code>typeid().hash_code</code> makes my eyes bleed. Eventually, this is destined to be <a href=\"http://thedailywtf.com/articles/You-Cant-Handle-the-True!\" rel=\"nofollow noreferrer\">a feature article on thedailywtf.com</a>"}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489602965, "post_id": 42817827, "comment_id": 72747837, "body": "There is no typeids in the production code. We have our own meta information on types. It&#39;s for everyone to understand what this is about without worrying about how we identify types at runtime"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1489603701, "last_edit_date": 1489603701, "creation_date": 1489603322, "answer_id": 42818162, "question_id": 42817827, "link": "https://stackoverflow.com/questions/42817827/using-unspecialized-templated-type-as-template-parameter/42818162#42818162", "title": "Using unspecialized templated type as template parameter", "body": "<p>You're looking for <em>template template parameters</em>:</p>\n\n<pre><code>template&lt;template &lt;typename&gt; class myFunctionClass&gt;\nvoid applyPrint(  )\n{\n        if( int* t = tryGetValue&lt;int&gt;() )\n            myFunctionClass&lt;int&gt;::function( *t ); \n        else if( float* t = tryGetValue&lt;float&gt;() )\n            myFunctionClass&lt;float&gt;::function( *t ); \n        else\n            myFunctionClass&lt;const char*&gt;::function( *tryGetValue&lt;const char*&gt;() ); \n}\n</code></pre>\n\n<p>You can find a reference <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters#Template_template_parameter\" rel=\"nofollow noreferrer\">here: \"cppreference.com - Template template parameters\"</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "is_accepted": false, "score": 3, "last_activity_date": 1489603623, "creation_date": 1489603623, "answer_id": 42818249, "question_id": 42817827, "link": "https://stackoverflow.com/questions/42817827/using-unspecialized-templated-type-as-template-parameter/42818249#42818249", "title": "Using unspecialized templated type as template parameter", "body": "<p>Template template parameters are the answer.</p>\n\n<pre><code>template&lt;template &lt;typename&gt; class myFunctionClass&gt;\nvoid apply(  )\n{\n    if( int* t = tryGetValue&lt;int&gt;() )\n        myFunctionClass&lt;int&gt;::function( *t ); \n    else if( float* t = tryGetValue&lt;float&gt;() )\n        myFunctionClass&lt;float&gt;::function( *t ); \n    else\n        myFunctionClass&lt;const char*&gt;::function( *tryGetValue&lt;const char*&gt;() ); \n}\n\n// ...\n\napply&lt;print&gt;();\napply&lt;printMore&gt;();\n</code></pre>\n\n<p>For no good reason, they must always say \"class\" instead of \"typename\" (though C++ 17 fixes this). The inner set of parameters (here, the bare keyword typename) must be equal in number and kind to the number of parameters that the template uses, though they need not be given names.</p>\n"}], "owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 1, "closed_date": 1489654892, "accepted_answer_id": 42818162, "answer_count": 2, "score": 6, "last_activity_date": 1489603701, "creation_date": 1489602335, "question_id": 42817827, "link": "https://stackoverflow.com/questions/42817827/using-unspecialized-templated-type-as-template-parameter", "closed_reason": "Duplicate", "title": "Using unspecialized templated type as template parameter", "body": "<p>Here is a running example of what I want to achieve: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;typeinfo&gt;\n\ntemplate &lt;class T&gt; \nstruct print\n{\n    static void function( T thing)\n    {\n        std::cout &lt;&lt; thing &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;class T&gt;\nstruct printMore\n{\n    static void function( T thing )\n    {\n        std::cout &lt;&lt; thing &lt;&lt; \" and more\" &lt;&lt; std::endl;\n    }\n};\n\nstruct dynamicBase\n{\n    const char* m_value;\n\n    size_t getType()\n    {\n        switch( *m_value )\n        {\n        case '0': //the string is going to be a small script, the type returned is known during execution but not at compile time\n            return typeid( int ).hash_code();\n        case '1':\n            return typeid( float ).hash_code();\n        }\n        return typeid( const char* ).hash_code();\n    }\n\n    template&lt;class T&gt;\n    T* tryGetValue()\n    {\n        if( getType() == typeid( T ).hash_code() )\n            return (T*) ( &amp;( m_value[1] ) ); //dumb example, actually I'll evaluate the string as script and return a value based on that\n        else\n            return nullptr;\n    }\n\n    void applyPrint(  )\n    {\n        if( int* t = tryGetValue&lt;int&gt;() )\n            print&lt;int&gt;::function( *t ); //I can cout an int so this line compile\n        else if( float* t = tryGetValue&lt;float&gt;() )\n            print&lt;float&gt;::function( *t ); //I can cout a float so this one too\n        else\n            print&lt;const char*&gt;::function( *tryGetValue&lt;const char*&gt;() ); //same\n    }\n    void applyPrintMore()\n    {\n        if( int* t = tryGetValue&lt;int&gt;() )\n            printMore&lt;int&gt;::function( *t ); \n        else if( float* t = tryGetValue&lt;float&gt;() )\n            printMore&lt;float&gt;::function( *t );\n        else\n            printMore&lt;const char*&gt;::function( *tryGetValue&lt;const char*&gt;() ); //same\n    }\n\n    //.... applyprintPretty, applyprintInRed, applyprintInBlue, .....\n};\n\nint main()\n{\n    dynamicBase d;\n    d.m_value = \"0a\\0\\0\\0\";\n    d.applyPrint(); //97 == ascii value of 'a'\n\n    __asm {nop}; //for breakpoint purpose\n}\n</code></pre>\n\n<p>At first I though I could use a template like this :</p>\n\n<pre><code>    template&lt;class myFunctionClass&gt;\n    void applyPrint(  )\n   {\n        if( int* t = tryGetValue&lt;int&gt;() )\n            myFunctionClass&lt;int&gt;::function( *t ); \n        else if( float* t = tryGetValue&lt;float&gt;() )\n            myFunctionClass&lt;float&gt;::function( *t ); \n        else\n            myFunctionClass&lt;const char*&gt;::function( *tryGetValue&lt;const char*&gt;() ); \n    }\n</code></pre>\n\n<p>And then realized my mistake (templated types are not types until you give them template parameters). But is there a way to refactorize this code so I don't have 15 applyStuff functions? (I'm doing it wrong, am I not?)</p>\n"}, {"tags": ["c++", "input", "cin", "cascading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1489602174, "post_id": 42817720, "comment_id": 72747363, "body": "Are you sure there is not a space or non visible character between the first <code>2</code> and the <code>.</code> in <code>2.2</code>?"}, {"owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "edited": false, "score": 0, "creation_date": 1489602424, "post_id": 42817720, "comment_id": 72747514, "body": "Yes I am sure that there is nothing between the 2 and the ."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489602432, "post_id": 42817720, "comment_id": 72747520, "body": "The code works perfectly fine, just tried it myself."}, {"owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489602579, "post_id": 42817720, "comment_id": 72747601, "body": "Could you tell me how you separated the numbers , and which IDE you use? @ABusyProgrammer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489602610, "post_id": 42817720, "comment_id": 72747621, "body": "Post actual, compilable code, and a the contents of a text file containing your input."}, {"owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "edited": false, "score": 0, "creation_date": 1489602836, "post_id": 42817720, "comment_id": 72747756, "body": "#include&lt;iostream&gt;  using namespace std;   int main(){   float v,i,vr,vl,vc,r,xl,xc,z;   for(int i=1;i&lt;=9;i++){     cout&lt;&lt;&quot;Enter the values of v,i,vr,vl,vc&quot;&lt;&lt;endl;     cin&gt;&gt;v;     cin&gt;&gt;i;     cin&gt;&gt;vr;     cin&gt;&gt;vl;     cin&gt;&gt;vc;     cout&lt;&lt;endl&lt;&lt;v&lt;&lt;&quot; &quot;&lt;&lt;i&lt;&lt;&quot; &quot;&lt;&lt;vr&lt;&lt;&quot; &quot;&lt;&lt;vl&lt;&lt;&quot; &quot;&lt;&lt;vc&lt;&lt;endl;    }  return 0;  }"}, {"owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "edited": false, "score": 0, "creation_date": 1489602976, "post_id": 42817720, "comment_id": 72747845, "body": "@NeilButterworth I first inputted the numbers as 1.1 2.2 3.3 4.4 5.5 ie the numbers separated by spaces and then pressed enter . Then i tried by typing the numbers and pressing enter after each number , in this method , the output was displayed after I pressed enter after the FOURTH number . The output was same using both methods"}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1489605185, "post_id": 42817720, "comment_id": 72749207, "body": "I used cpp.sh as the compiler, however, with the code you had earlier posted."}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1489604895, "post_id": 42818182, "comment_id": 72749032, "body": "Also, being <code>int i</code> the loop counter, it makes undefined (dependent from input values) the number of repetitions of that loop itself."}, {"owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "edited": false, "score": 0, "creation_date": 1489674633, "post_id": 42818182, "comment_id": 72782856, "body": "Thank you @user64322 , your answer helped me a lot . I will be careful in the future"}], "tags": [], "owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "is_accepted": true, "score": 3, "last_activity_date": 1489603836, "last_edit_date": 1489603836, "creation_date": 1489603418, "answer_id": 42818182, "question_id": 42817720, "link": "https://stackoverflow.com/questions/42817720/inputting-multiple-floats-using-cin-error/42818182#42818182", "title": "Inputting multiple floats using cin ERROR", "body": "<p>You are using <code>i</code> as <code>float</code> in outer scope and then using <code>it</code> as <code>int</code> in inner scope.\nSo when you input </p>\n\n<pre><code>1.1 2.2 3.3 4.4 5.5\n</code></pre>\n\n<p>Using </p>\n\n<pre><code>cin&gt;&gt;v;\ncin&gt;&gt;i; \ncin&gt;&gt;vr; \ncin&gt;&gt;vl; \ncin&gt;&gt;vc;\n</code></pre>\n\n<p>It only takes <code>2</code> from <code>2.2</code> and then takes 0.2 for vr variable.</p>\n\n<p>So variable values become</p>\n\n<pre><code>v=1.1\ni=2\nvr=0.2\nvl=3.3\nvc=4.4\n</code></pre>\n\n<p>Hence 5.5 is left because it take 2.2 as 2 inputs</p>\n\n<blockquote>\n  <p>Solution:</p>\n</blockquote>\n\n<p>Change your <code>for</code> loop variable to <code>j</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613685, "last_edit_date": 1489613685, "creation_date": 1489606138, "answer_id": 42818994, "question_id": 42817720, "link": "https://stackoverflow.com/questions/42817720/inputting-multiple-floats-using-cin-error/42818994#42818994", "title": "Inputting multiple floats using cin ERROR", "body": "<p>There is a variable name conflict in your code:</p>\n\n<pre><code>float v, i, vr, vl, vc, r, xl, xc, z; // Here, variable \"i\" is declared as a floating-point variable\n\nfor (int i = 1; i &lt;= 9; i++) // Here, \"i\" is declared again, this time as an int\n</code></pre>\n\n<p>When there are multiple variables of the same names, but in different scopes of the code, then the compiler uses the variable that is local to the scope at that point. That causes the error; you want the variable <code>i</code> to store the value <code>2.2</code> input, however, the most local variable is the counter <code>i</code> of the for-loop. Hence, the compiler tries to store the value in the counter. Since the counter is of type <code>int</code>, the <code>2.2</code> is broken up; counter <code>i</code> stores 2, and <code>vr</code> stores the <code>0.2</code>.</p>\n\n<p>That is why your compiler only accepts 4 values; the second value input is divided between 2 variables.</p>\n\n<p>To correct this, change the name of the counter variable for your for-loop:</p>\n\n<pre><code>float v, i, vr, vl, vc, r, xl, xc, z;\nfor (int j = 1; j &lt;= 9; j++) // The name of the counter variable is changed from \"i\" to \"j\"\n{\n    cout &lt;&lt; \"Enter the values of v,i,vr,vl,vc\" &lt;&lt; endl;\n    cin &gt;&gt; v;\n    cin &gt;&gt; i;\n    cin &gt;&gt; vr;\n    cin &gt;&gt; vl;\n    cin &gt;&gt; vc;\n    cout &lt;&lt; endl &lt;&lt; v &lt;&lt; \" \" &lt;&lt; i &lt;&lt; \" \" &lt;&lt; vr &lt;&lt; \" \" &lt;&lt; vl &lt;&lt; \" \" &lt;&lt; vc &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Alternatively, change the name of the variable <code>i</code> (the one that has a scope outside the for-loop) to some other name:</p>\n\n<pre><code>float v, num, vr, vl, vc;\nfor (int i = 1; i &lt;= 9; i++)\n{\n    cout &lt;&lt; \"Enter the values of v,j,vr,vl,vc\" &lt;&lt; endl;\n    cin &gt;&gt; v;\n    cin &gt;&gt; num;\n    cin &gt;&gt; vr;\n    cin &gt;&gt; vl;\n    cin &gt;&gt; vc;\n    cout &lt;&lt; endl &lt;&lt; v &lt;&lt; \" \" &lt;&lt; num &lt;&lt; \" \" &lt;&lt; vr &lt;&lt; \" \" &lt;&lt; vl &lt;&lt; \" \" &lt;&lt; vc &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6912043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fe2abc34133e88ccb0822c5725d3d3?s=128&d=identicon&r=PG&f=1", "display_name": "KiraDeus", "link": "https://stackoverflow.com/users/6912043/kiradeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42818182, "answer_count": 2, "score": 0, "last_activity_date": 1489613685, "creation_date": 1489601995, "last_edit_date": 1489605529, "question_id": 42817720, "link": "https://stackoverflow.com/questions/42817720/inputting-multiple-floats-using-cin-error", "title": "Inputting multiple floats using cin ERROR", "body": "<p>I want to input 5 <code>float</code> values consecutively but the program is not working properly</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    float v, i, vr, vl, vc, r, xl, xc, z;\n    for (int i = 1; i &lt;= 9; i++)\n    {\n        cout &lt;&lt; \"Enter the values of v,i,vr,vl,vc\" &lt;&lt; endl;\n        cin &gt;&gt; v;\n        cin &gt;&gt; i;\n        cin &gt;&gt; vr;\n        cin &gt;&gt; vl;\n        cin &gt;&gt; vc;\n        cout &lt;&lt; endl &lt;&lt; v &lt;&lt; \" \" &lt;&lt; i &lt;&lt; \" \" &lt;&lt; vr &lt;&lt; \" \" &lt;&lt; vl &lt;&lt; \" \" &lt;&lt; vc &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If I try entering the input as 1.1 2.2 3.3 4.4 5.5 , the program only accepts four values</p>\n\n<p>The output is:<br>\n1.1 2 0.2 3.3 4.4</p>\n\n<p>Please tell me where I am going wrong and how do I correct my code.</p>\n"}, {"tags": ["c++", "c", "constants"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1489601855, "post_id": 42817641, "comment_id": 72747174, "body": "Undefined behaviour."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1489601859, "post_id": 42817641, "comment_id": 72747180, "body": "That&#39;s a lot of de- and re-referencing. Be careful."}, {"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489601974, "post_id": 42817641, "comment_id": 72747241, "body": "I know it has to be undefined behavior and it&#39;ll depend on the compiler as well, but why does the <code>*(int *)&amp;i</code> show the changed value?"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1489602004, "post_id": 42817641, "comment_id": 72747258, "body": "@AdityaGulavani That&#39;s the definition of undefined behavior -- behavior that you cannot predict."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1489602059, "post_id": 42817641, "comment_id": 72747296, "body": "@AdityaGulavani because compiler does not bother to look into memory and uses <code>const int</code> value directly."}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1489602062, "post_id": 42817641, "comment_id": 72747298, "body": "It could be the compiler detecting your iniquity and emit another variable, so <i>i</i> remains unchanged."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1489602073, "post_id": 42817641, "comment_id": 72747306, "body": "It&#39;s a waste of time to reason about undefined behaviour."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 5, "creation_date": 1489602079, "post_id": 42817641, "comment_id": 72747309, "body": "<i>&quot;is showing a different value, so there has to be a new variable.&quot;</i> -- No, there doesn&#39;t. Since you lied to the compiler and told it that the value of <code>i</code> would never change from 10, it is free to simply use the constant value 10 wherever you request the value of <code>i</code>. It doesn&#39;t need a variable for this."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1489602309, "post_id": 42817641, "comment_id": 72747439, "body": "Try disassembling the code to see what the compiler <i>actually</i> generates for this"}, {"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489602778, "post_id": 42817641, "comment_id": 72747727, "body": "I am currently exploring effects of declaring it as volatile as well. Would be great if you can add you two cents to that thought"}, {"owner": {"reputation": 3903, "user_id": 206545, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c03fef2c351700918666bca7b3d9f3ed?s=128&d=identicon&r=PG", "display_name": "sizzzzlerz", "link": "https://stackoverflow.com/users/206545/sizzzzlerz"}, "edited": false, "score": 0, "creation_date": 1489602780, "post_id": 42817641, "comment_id": 72747728, "body": "Under what programming use case would you ever want to do this?"}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1489602941, "post_id": 42817641, "comment_id": 72747824, "body": "Check this out  <a href=\"http://stackoverflow.com/questions/39106137/change-constant-value\" title=\"change constant value\">stackoverflow.com/questions/39106137/change-constant-value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489602593, "post_id": 42817844, "comment_id": 72747612, "body": "Yes, I never do that. I just wanted to know the underlying compiler behaviour when something like this comes up"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489603233, "post_id": 42817844, "comment_id": 72748005, "body": "@AdityaGulavani the compiler behaviour might not be consistent even between two compilations of same program. And it almost surely would differ between different compilers. One thing you can do is to make a list of most likely behaviour in simple situations, but it wouldn&#39;t be really useful. P.S. Did you get a <i>attempt to write into write-protected page</i> error already in your experiments?"}, {"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489603357, "post_id": 42817844, "comment_id": 72748078, "body": "Not yet, now that I&#39;ve heard of it, I would like to explore it :)"}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 3, "last_activity_date": 1489602395, "creation_date": 1489602395, "answer_id": 42817844, "question_id": 42817641, "link": "https://stackoverflow.com/questions/42817641/changing-value-of-const-by-pointer/42817844#42817844", "title": "Changing value of const by pointer", "body": "<p>As the original answer points out correctly:</p>\n\n<blockquote>\n  <p>It's \"undefined behaviour\", meaning that based on the standard you can't predict what will happen when you try this. It may do different things depending on the particular machine, compiler, and state of the program.</p>\n</blockquote>\n\n<p>Anything is fair game, including what you observe, which is probably just the result of a compiler optimization. You shouldn't spend to much time trying to interpret undefined behavior.</p>\n\n<p>Edit: To be more clear regarding the recommendation: <strong>DO NOT DO THAT</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489602764, "post_id": 42817851, "comment_id": 72747719, "body": "I am currently exploring effects of declaring it as volatile as well. Would be great if you can add you two cents to that thought"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1489605348, "post_id": 42817851, "comment_id": 72749303, "body": "@AdityaGulavani: The <code>const</code> specifier means you are telling the compiler that the value in the identifier will not change.  The <code>volatile</code> specifier means that the value of a variable my change by means outside of program execution (other threads, hardware registers, etc).   You can&#39;t have a <code>volatile</code> <code>const</code>, as it doesn&#39;t make sense."}, {"owner": {"reputation": 1260, "user_id": 3804799, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/938bb746e768e52b02aa3c2c1f7a672b?s=128&d=identicon&r=PG&f=1", "display_name": "icebp", "link": "https://stackoverflow.com/users/3804799/icebp"}, "edited": false, "score": 0, "creation_date": 1489605359, "post_id": 42817851, "comment_id": 72749309, "body": "Note that the constants may end up in a read only section inside your executable and even if you try to write at the address of a const variable (assuming there is one), the OS will kill your process with an access violation fault because you attempted to write a read only page."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1489605671, "post_id": 42817851, "comment_id": 72749483, "body": "@ThomasMatthews The standard has no prohibition against declaring a <code>const volatile T</code>, but after combing through the document a bit I still couldn&#39;t tell you what such a construct is supposed to mean.  My best guess is that it means &quot;its value may change, but you can&#39;t change it&quot;."}, {"owner": {"reputation": 1260, "user_id": 3804799, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/938bb746e768e52b02aa3c2c1f7a672b?s=128&d=identicon&r=PG&f=1", "display_name": "icebp", "link": "https://stackoverflow.com/users/3804799/icebp"}, "edited": false, "score": 0, "creation_date": 1489605983, "post_id": 42817851, "comment_id": 72749639, "body": "As far as &quot;volatile const&quot; goes:     volatile const i = 0; volatile int *p = &amp;i; *p = 2; both MSVC 2015 and GCC 5 will warn you about it. Both will generate code that writes at i&#39;s address (with optimizations disabled). Oddly enough, i will be placed in a read write section inside the PE. But this means nothing, as with other versions / settings the generated executable would probably be a lot different. And it will work and change i&#39;s value."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 6, "last_activity_date": 1489602420, "creation_date": 1489602420, "answer_id": 42817851, "question_id": 42817641, "link": "https://stackoverflow.com/questions/42817641/changing-value-of-const-by-pointer/42817851#42817851", "title": "Changing value of const by pointer", "body": "<p>The behavior when changing the value of a variable declared <code>const</code> is undefined.  The compiler doesn't have to do anything that makes sense.</p>\n\n<p>In this case, the compiler doesn't bother to look into memory when printing the <code>const</code> value <code>i</code>, since it knows that value couldn't have possibly been altered by any conforming code.  When you print <code>i</code>, it generates this assembly:</p>\n\n<pre><code>mov     esi, 10\nmov     rdi, rax\ncall    std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(int)\n</code></pre>\n\n<p>Notice that it just hard-codes <code>10</code> in that call.</p>\n"}], "owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 42817851, "answer_count": 2, "score": 0, "last_activity_date": 1489602420, "creation_date": 1489601770, "last_edit_date": 1495542316, "question_id": 42817641, "link": "https://stackoverflow.com/questions/42817641/changing-value-of-const-by-pointer", "title": "Changing value of const by pointer", "body": "<p>This <a href=\"https://stackoverflow.com/a/31583505\">answer</a> at <a href=\"https://stackoverflow.com/questions/12104839/how-to-modify-value-of-const-variable\">this question</a> explains how changing a constant variable via dereferencing a pointer to it's address works (apparently by creating a new variable).</p>\n\n<pre><code>const int i = 10;\n*(int *)&amp;i = 5;\n\nstd::cout &lt;&lt; &amp;i &lt;&lt; \"\\t\" &lt;&lt; i &lt;&lt; \"\\n\";                   // 0x7fff6b325244   10\n\nstd::cout &lt;&lt; &amp;*(int *)&amp;i &lt;&lt; \"\\t\" &lt;&lt; *(int *)&amp;i &lt;&lt; \"\\n\"; // 0x7fff6b325244   5\n</code></pre>\n\n<p>With <code>&amp;*(int *)&amp;i</code> I was trying to get the address of the new variable that the previous answer was talking about. How do I find where this new variable is stored?</p>\n\n<p><code>*(int *)&amp;i</code> is showing a different value, so there has to be a new variable. </p>\n\n<p>Compiled on g++ 5.4.0, Ubuntu 16.04</p>\n"}, {"tags": ["c++", "c++11", "char"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1489601398, "post_id": 42817490, "comment_id": 72746897, "body": "Why would you even consider using gets()? <a href=\"http://stackoverflow.com/questions/30890696/why-gets-is-deprecated\" title=\"why gets is deprecated\">stackoverflow.com/questions/30890696/why-gets-is-deprecated</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489601447, "post_id": 42817490, "comment_id": 72746926, "body": "Don&#39;t use <code>gets</code> in C++.  It is deprecated in C++11 and removed in C++14 and beyond."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489601461, "post_id": 42817490, "comment_id": 72746930, "body": "The <code>gets</code> function is dangerous, as it can overflow buffers.  If you must, use <code>fgets</code> instead.  Prefer to use <code>std::string</code> in C++ for text."}, {"owner": {"reputation": 728, "user_id": 7539811, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nyx4P.jpg?s=128&g=1", "display_name": "Linkon", "link": "https://stackoverflow.com/users/7539811/linkon"}, "edited": false, "score": 0, "creation_date": 1489601501, "post_id": 42817490, "comment_id": 72746958, "body": "Because i have to take input two lines where each line contains five words."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489601524, "post_id": 42817490, "comment_id": 72746973, "body": "Your <code>main</code> function should return a value to the operating system, such as 0 for success, other numbers for failure."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489601591, "post_id": 42817490, "comment_id": 72747011, "body": "You should be using <code>std::string</code> to read in words and <code>std::vector&lt;std::string&gt;</code> to store the words.  Try this: <code>std::string word; std::cin &gt;&gt; word;</code>."}, {"owner": {"reputation": 728, "user_id": 7539811, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nyx4P.jpg?s=128&g=1", "display_name": "Linkon", "link": "https://stackoverflow.com/users/7539811/linkon"}, "edited": false, "score": 0, "creation_date": 1489601613, "post_id": 42817490, "comment_id": 72747028, "body": "sorry, i can&#39;t understand your explanation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489601635, "post_id": 42817490, "comment_id": 72747038, "body": "@Thomas &quot;Your main function should return a value to the operating system&quot; - I would have thought that someone that posts so much stuff here would know this isn&#39;t necessary in C++."}, {"owner": {"reputation": 728, "user_id": 7539811, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nyx4P.jpg?s=128&g=1", "display_name": "Linkon", "link": "https://stackoverflow.com/users/7539811/linkon"}, "edited": false, "score": 0, "creation_date": 1489601722, "post_id": 42817490, "comment_id": 72747087, "body": "thank you, i know this. but why this happening for just using one gets() function outside ."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 7392144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/--mPZct3QfZQ/AAAAAAAAAAI/AAAAAAAAGj0/L50-l4adyRs/photo.jpg?sz=128", "display_name": "Moro Silverio", "link": "https://stackoverflow.com/users/7392144/moro-silverio"}, "is_accepted": false, "score": 0, "last_activity_date": 1489601795, "creation_date": 1489601795, "answer_id": 42817649, "question_id": 42817490, "link": "https://stackoverflow.com/questions/42817490/multiple-line-input-by-gets-function-in-c/42817649#42817649", "title": "Multiple line input by gets() function in c++", "body": "<p>in the <code>cin&gt;&gt;t</code> you entered a number and then pressed enter <code>\\n</code>, and the end of line is still waiting in the buffer, if you read another integer <code>cin&gt;&gt;another_integer</code>, <code>cin</code> will ignore <code>\\n</code> or <code>' '</code> (whitespaces), but gets will not. What you are really typing is something like follows</p>\n\n<p>5<code>\\n</code>         ---- see the end of line?<br>\nmy string<code>\\n</code><br>\nmy bigger string<code>\\n</code>  </p>\n\n<p>gets() reads until it find a <code>\\n</code> or <code>end of file</code></p>\n\n<p>by the way, gets() is deprecated in c++11, you should use getline() or other function instead</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1489602014, "post_id": 42817676, "comment_id": 72747265, "body": "&quot;Don&#39;t mix cin and functions from stdio.h.&quot; Please say exactly why not - technically it&#39;s perfectly safe; much C++ code would not work if it wasn&#39;t."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489602097, "post_id": 42817676, "comment_id": 72747320, "body": "Do you recommend reading a whole line, when the requirement is for a word?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489602865, "post_id": 42817676, "comment_id": 72747772, "body": "@ThomasMatthews, no, I don&#39;t. I didn&#39;t think I was making that recommendation."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1489602668, "last_edit_date": 1495542331, "creation_date": 1489601872, "answer_id": 42817676, "question_id": 42817490, "link": "https://stackoverflow.com/questions/42817490/multiple-line-input-by-gets-function-in-c/42817676#42817676", "title": "Multiple line input by gets() function in c++", "body": "<ol>\n<li>Don't use <code>gets</code>. See <a href=\"https://stackoverflow.com/questions/30890696/why-gets-is-deprecated\">Why gets() is deprecated?</a>.</li>\n<li><p>Don't mix <code>cin</code> and functions from <code>stdio.h</code>. By default, <code>cin</code> is synchronized with <code>stdin</code>. However, it is possible to make them stay out of sync by using </p>\n\n<pre><code>std::ios_base::sync_with_stdio(false);\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio</a> for further details.</p></li>\n</ol>\n\n<p>Real problem.</p>\n\n<pre><code>cin &gt;&gt; t;\n</code></pre>\n\n<p>leaves a newline character in the input stream. The next call to <code>gets</code> reads that. If you don't want <code>gets</code> to read that, you have to add code to read and discard the rest of the line.</p>\n\n<p>Here's what I suggest:</p>\n\n<pre><code>int main()\n{\n   int t;\n   cin &gt;&gt; t;\n\n   // Ignore the rest of the line.\n   cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\n   char nm1[50],nm2[50];\n   while(t--)\n   {\n      cin.get(nm1, 50);\n      cin.get(nm2, 50);\n\n      puts(nm1);\n      puts(nm2);\n   }\n}\n</code></pre>\n\n<p>Make sure to dd</p>\n\n<pre><code>#include &lt;limits&gt;\n</code></pre>\n\n<p>to be able to use <code>std::numeric_limits</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1489602039, "creation_date": 1489602039, "answer_id": 42817735, "question_id": 42817490, "link": "https://stackoverflow.com/questions/42817490/multiple-line-input-by-gets-function-in-c/42817735#42817735", "title": "Multiple line input by gets() function in c++", "body": "<p>I highly recommend performing safer I/O using C++ constructs:  </p>\n\n<pre><code>int main()\n{\n  unsigned int quantity;\n  cin &gt;&gt; quantity;\n  // Now input the words\n  std::vector&lt;std::string&gt; database;\n  while (cin &gt;&gt; word)\n  {\n    database.push_back(word);\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 728, "user_id": 7539811, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nyx4P.jpg?s=128&g=1", "display_name": "Linkon", "link": "https://stackoverflow.com/users/7539811/linkon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 42817676, "answer_count": 3, "score": 0, "last_activity_date": 1489602668, "creation_date": 1489601290, "last_edit_date": 1489601823, "question_id": 42817490, "link": "https://stackoverflow.com/questions/42817490/multiple-line-input-by-gets-function-in-c", "title": "Multiple line input by gets() function in c++", "body": "<p>When i write this code i could not enter two lines as input where each line contains 3 to 5 words by <strong>gets()</strong> function:</p>\n\n<pre><code>int main()\n{\n    int t;\n    cin&gt;&gt;t;\n    char nm1[50],nm2[50];\n    while(t--)\n    {\n       gets(nm1);\n       gets(nm2);\n\n       puts(nm1);\n       puts(nm2);\n\n    }\n}\n</code></pre>\n\n<p>But when i add a <strong>gets()</strong> function earlier before <strong>while()</strong> function now i can enter two line of strings like this :</p>\n\n<pre><code>int t;\ncin&gt;&gt;t;\nchar nm1[50],nm2[50];\ngets(nm1); //using gets() function here//\nwhile(t--)\n{\n   gets(nm1);\n   gets(nm2);\n\n   puts(nm1);\n   puts(nm2);\n}\n</code></pre>\n\n<p><strong>So, what is the logic behind this?</strong> </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1489615154, "post_id": 42817477, "comment_id": 72754646, "body": "Debugging tip: look at the value of <code>X</code> before concluding that <code>ceil(X)</code> is giving the wrong result."}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": false, "score": 3, "last_activity_date": 1489601495, "last_edit_date": 1489601495, "creation_date": 1489601384, "answer_id": 42817528, "question_id": 42817477, "link": "https://stackoverflow.com/questions/42817477/unexpected-behaviour-depicted-by-ceil-function/42817528#42817528", "title": "Unexpected behaviour depicted by ceil function", "body": "<p>The <code>long</code> data type is integral; it cannot store fractional components.  The line <code>std::cin &gt;&gt; X</code> is truncating the fractional part before <code>ceil</code> ever sees the value.  That is, when you invoke <code>ceil</code> you are passing it 10, not 10.42.</p>\n\n<p>Change <code>long X;</code> to <code>double X;</code> (or <code>float X;</code>).</p>\n\n<hr>\n\n<p>And before you use floating point types (<code>float</code> and <code>double</code>) please read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">the floating point guide</a>.</p>\n"}], "owner": {"reputation": 144, "user_id": 7588246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/63Aje.jpg?s=128&g=1", "display_name": "insomniac_tk", "link": "https://stackoverflow.com/users/7588246/insomniac-tk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489601495, "creation_date": 1489601265, "question_id": 42817477, "link": "https://stackoverflow.com/questions/42817477/unexpected-behaviour-depicted-by-ceil-function", "title": "Unexpected behaviour depicted by ceil function", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;cmath&gt;\n\nint main()\n{\nlong X;\nstd::cin &gt;&gt; X;\nlong f = ceil(X);\nstd::cout &lt;&lt; f;\n}\n</code></pre>\n\n<p>I'm using the gcc compiler(version 5.4.0) and instead of rounding up(what ceil is supposed to do , it rounds down the answer)\nInput:\n10.42\nOutput:\n10(11 expected)</p>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "edited": false, "score": 0, "creation_date": 1489650047, "post_id": 42817419, "comment_id": 72766077, "body": "Have you tried linking the boost libraries dynamically instead of statically for your library a.so?"}, {"owner": {"reputation": 73, "user_id": 5353482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5dd65a8923b1c08c96972d5b3451ea?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/5353482/sisyphe"}, "reply_to_user": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "edited": false, "score": 0, "creation_date": 1489761417, "post_id": 42817419, "comment_id": 72826656, "body": "No because as mentionned I don&#39;t have the source to recompile it."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5353482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5dd65a8923b1c08c96972d5b3451ea?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/5353482/sisyphe"}, "edited": false, "score": 0, "creation_date": 1489761481, "post_id": 42824356, "comment_id": 72826694, "body": "Thanks, I will try it out."}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1489632132, "creation_date": 1489632132, "answer_id": 42824356, "question_id": 42817419, "link": "https://stackoverflow.com/questions/42817419/cmake-how-to-hide-symbols-from-a-precompiled-library/42824356#42824356", "title": "CMake: How to hide symbols from a precompiled library", "body": "<p>You could use <a href=\"https://cmake.org/cmake/help/v3.0/command/add_custom_command.html\" rel=\"nofollow noreferrer\"><code>add_custom_command</code></a>, creating a <code>PRE_LINK</code> step, which removes the boost functions from <code>a.so</code>. You could either write it to a new file (and change which .so you link with in your CMake), or overwrite it. </p>\n\n<p>This can be done with the <a href=\"https://linux.die.net/man/1/objcopy\" rel=\"nofollow noreferrer\"><code>objcopy</code></a> utility and the <code>--strip-symbols</code> argument. Assuming there are a lot of boost symbols you'd like to strip, using <code>nm</code> on <code>a.so</code> and filtering the boost symbols into a file is probably prudent.</p>\n"}], "owner": {"reputation": 73, "user_id": 5353482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5dd65a8923b1c08c96972d5b3451ea?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/5353482/sisyphe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1489632132, "creation_date": 1489601061, "question_id": 42817419, "link": "https://stackoverflow.com/questions/42817419/cmake-how-to-hide-symbols-from-a-precompiled-library", "title": "CMake: How to hide symbols from a precompiled library", "body": "<p>I have a compiled library C++ (let's call it <em>a.so</em>) which have Boost library symbols linked in it and I don't have the source to recompile it.</p>\n\n<p>I've made a C++ program which needs to link to both this library and the boost version installed on my computer.</p>\n\n<p>But when my program try to reach Boost functions, it ends up calling Boost functions defined in <em>a.so</em> instead of the ones on my computer.</p>\n\n<p>I've tried to make a wrapper library around <em>a.so</em> to hide unwanted symbols but it failed to compile.</p>\n\n<p>How can I configure CMake to make it build and work, with or without wrapper ?</p>\n\n<p>The solution needs to be Linux-compatible.</p>\n"}, {"tags": ["c++", "encryption", "crypto++"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489603404, "post_id": 42817362, "comment_id": 72748101, "body": "<code>ArraySink</code> is the wrong tool for the job. You cannot get the actual size of the ciphertext from the encryption operation. Then, during decryption, you are flying blind because you don&#39;t know what size to use with the <code>ArraySource</code>. Consider switching to a <code>std::string</code> or a <code>ByteQueue</code>. Also see <a href=\"https://www.cryptopp.com/wiki/SecByteBlockSink\" rel=\"nofollow noreferrer\">SecByteBlockSink</a> on the Crypto++ wiki."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489603591, "post_id": 42817362, "comment_id": 72748203, "body": "Also, <code>E1A2AFC5D820ADF77DB656DEF3245570</code> and <code>E1A2AFC5D820ADF77DB656DEF3245570</code> almost look like a concatenation memory locations (i.e., pointers) to me. You should probably show the way you are calling <code>encrypt_barray</code> and <code>decrypt_barray</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3854783"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489604402, "post_id": 42817362, "comment_id": 72748725, "body": "@jww I went ahead and added how I am calling those 2 functions. Thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3854783"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489604971, "post_id": 42817362, "comment_id": 72749075, "body": "How would I go about incorporating a ByteQueue into these functions?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489605124, "post_id": 42817362, "comment_id": 72749167, "body": "The ciphertext will be larger than <code>testArray[ksize]</code> due to the mode of operation and PKCS padding. <code>ArraySink</code> will store up to <code>ksize</code> bytes, and then stop writing to the array."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3854783"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1489605511, "post_id": 42817362, "comment_id": 72749407, "body": "@jww That would make sense. So then you mentioned i should change it to use a ByteQueue. How would I go about incorporating a ByteQueue into these functions? Thanks again!"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3854783"}, "edited": false, "score": 0, "creation_date": 1489613584, "post_id": 42820221, "comment_id": 72753918, "body": "What an awesome answer! Really appreciate this cause now I also get to learn why it&#39;s the correct way. Thanks again!"}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 4, "last_activity_date": 1489610248, "creation_date": 1489610248, "answer_id": 42820221, "question_id": 42817362, "link": "https://stackoverflow.com/questions/42817362/encrypt-decrypt-byte-array-crypto/42820221#42820221", "title": "Encrypt/Decrypt byte array Crypto++", "body": "<p>Here's the way to do things using <code>ArraySource</code> and <code>ArraySink</code>. The <code>Redirector</code> ensures the <code>ArraySink</code> survives so you can call <code>TotalPutLength</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#include \"cryptlib.h\"\n#include \"filters.h\"\n#include \"files.h\"\n#include \"modes.h\"\n#include \"hex.h\"\n#include \"aes.h\"\nusing namespace CryptoPP;\n\nint main(int argc, char* argv[])\n{\n  byte key[AES::MAX_KEYLENGTH];\n  byte iv[AES::BLOCKSIZE];\n  vector&lt;byte&gt; plain, cipher, recover;\n  HexEncoder encoder(new FileSink(cout));\n\n  memset(key, 0x00, sizeof(key));\n  memset(iv, 0x00, sizeof(iv));\n\n  string str(\"Attack at dawn!\");\n  std::copy(str.begin(), str.end(), std::back_inserter(plain));\n\n  cout &lt;&lt; \"Plain text: \";\n  encoder.Put(plain.data(), plain.size());\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  /////////////////////////////////////////////////////////////\n\n  CBC_Mode&lt;AES&gt;::Encryption enc;\n  enc.SetKeyWithIV(key, sizeof(key), iv, sizeof(iv));\n\n  // Make room for padding\n  cipher.resize(plain.size()+AES::BLOCKSIZE);\n  ArraySink cs(&amp;cipher[0], cipher.size());\n\n  ArraySource(plain.data(), plain.size(), true,\n    new StreamTransformationFilter(enc, new Redirector(cs)));\n\n  // Set cipher text length now that its known\n  cipher.resize(cs.TotalPutLength());\n\n  cout &lt;&lt; \"Cipher text: \";\n  encoder.Put(cipher.data(), cipher.size());\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  /////////////////////////////////////////////////////////////\n\n  CBC_Mode&lt;AES&gt;::Decryption dec;\n  dec.SetKeyWithIV(key, sizeof(key), iv, sizeof(iv));\n\n  // Recovered text will be less than cipher text\n  recover.resize(cipher.size());\n  ArraySink rs(&amp;recover[0], recover.size());\n\n  ArraySource(cipher.data(), cipher.size(), true,\n    new StreamTransformationFilter(dec, new Redirector(rs)));\n\n  // Set recovered text length now that its known\n  recover.resize(rs.TotalPutLength());\n\n  cout &lt;&lt; \"Recovered text: \";\n  encoder.Put(recover.data(), recover.size());\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Running the program results in:</p>\n\n<pre><code>$ ./test.exe\nPlain text: 41747461636B206174206461776E21\nCipher text: 85928E5511BFE9E6EE235BCACC4894D4\nRecovered text: 41747461636B206174206461776E21\n</code></pre>\n\n<hr>\n\n<p>Here's the example using <code>ByteQueue</code>. The <code>Redirector</code> helps chain the pipeline together because a <code>ByteQueue</code> is a <code>BufferedTransformation</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n#include \"cryptlib.h\"\n#include \"filters.h\"\n#include \"files.h\"\n#include \"modes.h\"\n#include \"queue.h\"\n#include \"hex.h\"\n#include \"aes.h\"\nusing namespace CryptoPP;\n\nint main(int argc, char* argv[])\n{\n  byte key[AES::MAX_KEYLENGTH];\n  byte iv[AES::BLOCKSIZE];\n  HexEncoder encoder(new FileSink(cout));\n\n  memset(key, 0x00, sizeof(key));\n  memset(iv, 0x00, sizeof(iv));\n\n  ByteQueue plain, cipher, recover;\n  string str(\"Attack at dawn!\");\n  plain.Put(reinterpret_cast&lt;const byte*&gt;(str.data()), str.size());\n\n  cout &lt;&lt; \"Plain text: \";\n  plain.CopyTo(encoder);\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  /////////////////////////////////////////////////////////////\n\n  CBC_Mode&lt;AES&gt;::Encryption enc;\n  enc.SetKeyWithIV(key, sizeof(key), iv, sizeof(iv));\n\n  StreamTransformationFilter f1(enc, new Redirector(cipher));\n  plain.CopyTo(f1);\n  f1.MessageEnd();\n\n  cout &lt;&lt; \"Cipher text: \";\n  cipher.CopyTo(encoder);\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  /////////////////////////////////////////////////////////////\n\n  CBC_Mode&lt;AES&gt;::Decryption dec;\n  dec.SetKeyWithIV(key, sizeof(key), iv, sizeof(iv));\n\n  StreamTransformationFilter f2(dec, new Redirector(recover));\n  cipher.CopyTo(f2);\n  f2.MessageEnd();\n\n  cout &lt;&lt; \"Recovered text: \";\n  recover.CopyTo(encoder);\n  encoder.MessageEnd();\n  cout &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>It also results in:</p>\n\n<pre><code>skylake:cryptopp$ ./test.exe\nPlain text: 41747461636B206174206461776E21\nCipher text: 85928E5511BFE9E6EE235BCACC4894D4\nRecovered text: 41747461636B206174206461776E21\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3854783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7301, "favorite_count": 3, "accepted_answer_id": 42820221, "answer_count": 1, "score": 2, "last_activity_date": 1489610248, "creation_date": 1489600865, "last_edit_date": 1495542317, "question_id": 42817362, "link": "https://stackoverflow.com/questions/42817362/encrypt-decrypt-byte-array-crypto", "title": "Encrypt/Decrypt byte array Crypto++", "body": "<p>I am trying to encrypt a byte array using AES. I have been able to encrypt strings and files no problem, however byte arrays seem to not be working for me. I pass in a byte array to be encrypted, for ease of testing I just pass in a generated AES key by crypto++ (bArrayToEncrypt). The encryption appears to be working but then the decryption does work at all. I also found it strange that the encryption has a large amount of duplicate characters. What I am doing wrong here??</p>\n\n<p>I saw a similar question <a href=\"https://stackoverflow.com/questions/19814236/how-to-encrypt-a-byte-array-with-crypto\">Here</a>, but it was pertaining to RSA\n as well as the example provided encrypts strings which I already have up a running. </p>\n\n<h2>How functions are called:</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>   size_t ksize = CryptoPP::AES::MAX_KEYLENGTH;\n   size_t vsize = CryptoPP::AES::BLOCKSIZE;\n\n   byte key[ksize];\n   byte testArray[ksize];\n   byte encryptedksize];\n   byte decrypted[ksize];\n   byte iv[vsize];\n\n   //generate key &amp; iv, then generate a random byte array to encrypt/decrypt\n   CryptoPP::AutoSeededRandomPool prng;\n   prng.GenerateBlock(key, ksize);\n   prng.GenerateBlock(iv, vsize);\n   prng.GenerateBlock(testArray, ksize);\n\n\n   encrypt_barray(key, ksize, iv, vsize, testArray, ksize, encrypted);\n\n   //printed results here\n\n   decrypt_barray(key, ksize, iv, vsize, encrypted, ksize, decrypted);\n\n   //printed results here\n</code></pre>\n\n<h2>Encrypt_barray</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void encrypt_barray(byte* key, \n                    size_t kSize,\n                    byte* iv, \n                    size_t ivSize, \n                    byte* bArrayToEncrypt,\n                    size_t bArraySize,\n                    byte* encrypted) {\n\n   CryptoPP::CBC_Mode&lt;CryptoPP::AES&gt;::Encryption e;\n   e.SetKeyWithIV(key, kSize, iv, ivSize);\n\n   CryptoPP::ArraySource(key, true,\n      new CryptoPP::StreamTransformationFilter(e, new CryptoPP::ArraySink(encrypted, bArraySize)));\n}\n</code></pre>\n\n<h2>Decrypt_barray</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void decrypt_barray(byte* key,\n                    size_t kSize,\n                    byte* iv,\n                    size_t ivSize,\n                    byte* bArrayToDecrypt,\n                    size_t bArraySize,\n                    byte* decrypted) {\n\n   CryptoPP::CBC_Mode&lt;CryptoPP::AES&gt;::Decryption d;\n   d.SetKeyWithIV(keyFromHash, kfhSize, iv1, iv1Size);\n\n   CryptoPP::ArraySource(keyToDecrypt, true,\n      new CryptoPP::StreamTransformationFilter(d, new CryptoPP::ArraySink(decrypted, bArraySize)));\n}\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code> Encrypted: \u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\n\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560E1A2AFC5D820ADF7\n7DB656DEF3245570\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\n\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\n\u2568\u00d1\u266b\n\nDecrypted: \u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560E\n1A2AFC5D820ADF77DB656DEF3245570\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\n\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\n\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2560\u2568\u00d1\u266b\nPress any key to continue . . .\n</code></pre>\n"}, {"tags": ["c++", "regex", "string", "c++11", "replace"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1489600536, "post_id": 42817162, "comment_id": 72746438, "body": "<code>regex reg(R&quot;((\\w)\\*(?=\\w))&quot;);</code> and replace with <code>&quot;$1 &quot;</code>"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1489600750, "post_id": 42817162, "comment_id": 72746566, "body": "regex <code>[ ]</code> does not mean what you think it means,"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1489600885, "post_id": 42817162, "comment_id": 72746637, "body": "<code>[\\w*\\w]</code> means replace any of the characters <code>w</code> or <code>*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1489602537, "post_id": 42817284, "comment_id": 72747575, "body": "Great answer. It also replaces the <code>*</code> with ` ` from pattern like <code>32423*random</code>, <code>random*34234</code> and <code>323423*43421</code> which I don&#39;t want."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1489602822, "post_id": 42817284, "comment_id": 72747751, "body": "But you used <code>\\w</code> yourself. If you need to only match <code>*</code> in between <i>ASCII letters</i>, use <code>[a-zA-Z]</code> instead."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1489602868, "last_edit_date": 1489602868, "creation_date": 1489600636, "answer_id": 42817284, "question_id": 42817162, "link": "https://stackoverflow.com/questions/42817162/replace-a-specific-character-with-another-from-regex-match/42817284#42817284", "title": "Replace a specific character with another from regex match?", "body": "<p>Use</p>\n\n<pre><code>regex reg(R\"(([a-zA-Z])\\*(?=[a-zA-Z]))\");\ntext = regex_replace(text, reg, \"$1 \");\n// =&gt; Dear Customer, You have made a Debit Card purchase of INR962.00 on 26 Oct. Info.VPS Brown House. Your Net Available Balance is INR 5,584.58.\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/cCl9ca\" rel=\"nofollow noreferrer\">C++ online demo</a></p>\n\n<p>The <code>R\"(([a-zA-Z])\\*(?=[a-zA-Z]))\"</code> is a raw string literal where <code>\\</code> is treated as a literal <code>\\</code> symbol, not an escaping symbol for entities like <code>\\n</code> or <code>\\r</code>.</p>\n\n<p>The pattern <code>([a-zA-Z])\\*(?=[a-zA-Z])</code> matches and captures an ASCII letter char (with <code>([a-zA-Z])</code>), then matches a <code>*</code> (with <code>\\*</code>) and then requires (does not consume) an ASCII letter char (with <code>(?=[a-zA-Z])</code>).</p>\n\n<p>The <code>$1</code> is the backreference to the value captured with the <code>([a-zA-Z])</code> group.</p>\n"}], "owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 42817284, "answer_count": 1, "score": 0, "last_activity_date": 1489602868, "creation_date": 1489600254, "question_id": 42817162, "link": "https://stackoverflow.com/questions/42817162/replace-a-specific-character-with-another-from-regex-match", "title": "Replace a specific character with another from regex match?", "body": "<p>I am trying to replace <code>*</code> with <code></code> whenever <code>\\w*\\w</code> pattern is found. Here is what I have </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;regex&gt;\n\nusing namespace std;\n\nint main() {\n    string text = \"Dear Customer, You have made a Debit Card purchase of INR962.00 on 26 Oct. Info.VPS*Brown House. Your Net Available Balance is INR 5,584.58.\";\n\n    regex reg(\"[\\w*\\w]\");\n    text = regex_replace(text, reg, \" \");\n    cout &lt;&lt; text &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>But it replace the <code>*</code> with <code></code> and <code>w</code> with <code></code> also. </p>\n\n<p>Output of the above program is </p>\n\n<pre><code>Dear Customer, You have made a Debit Card purchase of INR962.00 on 26 Oct. Info.VPS Bro n House. Your Net Available Balance is INR 5,584.58.\n</code></pre>\n"}, {"tags": ["c++", "string", "wchar-t"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1489599973, "post_id": 42817050, "comment_id": 72746093, "body": "The short answer is: it&#39;s because you&#39;re using Microsoft Windows. This insanity is rarely seen in Linux, or pretty much anywhere else..."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1489600060, "post_id": 42817050, "comment_id": 72746146, "body": "You should probably <i>drop that Windows-ish insanity</i> and learn plain standard C++ first."}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600167, "post_id": 42817050, "comment_id": 72746208, "body": "Windows-ish insanity? Can you elaborate please?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489600172, "post_id": 42817050, "comment_id": 72746210, "body": "What&#39;s with big corporations disregarding standards... It&#39;s not even for the better when you look at Windows..."}, {"owner": {"reputation": 18953, "user_id": 2982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7917a6fc72eb5a132e55369403ce2826?s=128&d=identicon&r=PG", "display_name": "Inisheer", "link": "https://stackoverflow.com/users/2982/inisheer"}, "edited": false, "score": 6, "creation_date": 1489600178, "post_id": 42817050, "comment_id": 72746217, "body": "Or.... learn/use whatever the heck you want and don&#39;t be put off by the non-Windows guys. See here for the Microsoft C++ compiler specifics related to this subject. <a href=\"https://msdn.microsoft.com/en-us/library/69ze775t.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/69ze775t.aspx</a>"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1489600249, "post_id": 42817050, "comment_id": 72746257, "body": "Is this not similar to <a href=\"http://stackoverflow.com/questions/13087219/what-exactly-is-the-l-prefix-in-c\">What exactly is the L prefix in C++?</a>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1489600503, "post_id": 42817050, "comment_id": 72746416, "body": "@JohnSilver, this stuff is non-standard, so, if you try to move to Linux (or some UNIX-like platform), you&#39;ll spend hours dealing with lots of errors and finally end up with <i>standard C++</i> code. And when you try to compile standard C++ on Windows... it&#39;ll be just fine and it&#39;ll also look <i>much</i> cleaner."}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600689, "post_id": 42817050, "comment_id": 72746535, "body": "You guys are saying I should define it as const wchar_t* (standard) instead of LPCWSTR (non-standard)?"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1489600847, "post_id": 42817050, "comment_id": 72746617, "body": "FIY, the reference web on wich the C++ community mostly agrees is <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">en.cppreference.com/w</a> Check out <a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\"><code>wchar_t</code> here</a>."}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1489600941, "post_id": 42817050, "comment_id": 72746663, "body": "I would avoid defining it as <code>const wchar_t*</code> as that itself can change based on the <a href=\"https://msdn.microsoft.com/en-us/library/dh8che7s.aspx\" rel=\"nofollow noreferrer\"><code>&#47;Zc:wchar_t</code></a> flag. Using the macro will prevent errors."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1489600998, "post_id": 42817050, "comment_id": 72746699, "body": "@ForceBru there&#39;s nothing non-standard about using a proprietary header file. LPCWSTR? That&#39;s just a #define. L&quot;string&quot; ? A C++ standard wide-string literal. Hungarian notation? Just a standard-compliant convention. Agreed, it all looks ugly and inadvisable, but not non-standard. Posix has headers that are not part of the standard just like Windows has."}], "answers": [{"comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1489600345, "post_id": 42817179, "comment_id": 72746314, "body": "<i>C++ has two character types</i> No love for <code>char16_t</code> and <code>char32_t</code>?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489600376, "post_id": 42817179, "comment_id": 72746332, "body": "@DeiDei I didn&#39;t know those existed, actually. When did those get introduced?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489600408, "post_id": 42817179, "comment_id": 72746350, "body": "That would be with the C++11 revision."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1489600433, "post_id": 42817179, "comment_id": 72746367, "body": "@DeiDei Huh, I thought I knew all the new features that added. Guess I have some reading to do! Thanks for letting me know!"}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600573, "post_id": 42817179, "comment_id": 72746465, "body": "Just to be clear, it&#39;s perfectly normal for professional codes and stuff to have L infront of strings now and then? I haven&#39;t seen it too often so it has gotten me curious as to if I have done something wrong."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600628, "post_id": 42817179, "comment_id": 72746494, "body": "@JohnSilver It&#39;s part of the standard, so it&#39;s perfectly legal. I&#39;m not sure how widely-used this prefix is, though, since there&#39;s a bit of a sense that <code>wchar_t</code> wasn&#39;t thought through very well (it doesn&#39;t play well with Unicode, for example), though I&#39;m ready to be corrected."}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600782, "post_id": 42817179, "comment_id": 72746577, "body": "Sorry if I sound very confused, because I might be at times when we talk about this. But, &quot;so it&#39;s perfectly legal&quot;, the code errors unless I have an L infront of there, so apparently I am forced to. I read somewhere that unicode should be on aswell."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600801, "post_id": 42817179, "comment_id": 72746591, "body": "@JohnSilver @templatetypedef You see it all the time when interacting with the Win32 API.  Basically everything takes <code>LPCWSTR</code> when you use the &quot;Unicode&quot; variant."}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489600930, "post_id": 42817179, "comment_id": 72746661, "body": "Another short question though, kinda related to this. Why do people use the string data type from the string library when there are stuff like char and wchar_t? Again, sorry if I sound very confused."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489601070, "post_id": 42817179, "comment_id": 72746734, "body": "@JohnSilver <code>std::string</code> and it&#39;s variants (<code>std::wstring</code>, <code>std::u16string</code>, and <code>std::u32string</code>) are contianers that make manipulating and managing the lifetime of strings much easier than using raw <code>char*</code>s (or <code>whcar_t*</code>, <code>char16_t*</code>, and <code>char32_t*</code>)."}, {"owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489601435, "post_id": 42817179, "comment_id": 72746919, "body": "Just one last thing, back to the L-topic. Am I absolutely forced to do this? It just seems abit unusual instead of directly writing the string,. I haven&#39;t seen it in other codes that much either."}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1489601594, "post_id": 42817179, "comment_id": 72747014, "body": "You can define the string as <code>LPCSTR</code> instead of <code>LPCWSTR</code> and avoid the <code>L</code>, but you will need to be sure to call the ANSI version of any WIN32 functions you call."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "edited": false, "score": 0, "creation_date": 1489603079, "post_id": 42817179, "comment_id": 72747914, "body": "@JohnSilver when you build a program for Windows only, use <code>L&quot;string&quot;</code> always, in general no one is using ANSI APIs anymore. If you want to be platform independent, then that&#39;s another topic though..."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 6, "last_activity_date": 1489600448, "last_edit_date": 1489600448, "creation_date": 1489600294, "answer_id": 42817179, "question_id": 42817050, "link": "https://stackoverflow.com/questions/42817050/why-do-i-need-to-put-an-l-before-the-string-and-do-i-create-this-variable-correc/42817179#42817179", "title": "Why do I need to put an L before the string and do I create this variable correctly?", "body": "<p>C++ has several different character types, and the ones at issue here are <code>char</code> and <code>wchar_t</code>, with <code>wchar_t</code> being a <em>wide character</em> of some implementation-defined type. A string literal in C++ is treated like an array of characters, so you can write</p>\n\n<pre><code>const char* rawString = \"I'm a regular old string!\";\n</code></pre>\n\n<p>Because <code>char</code> and <code>wchar_t</code> aren't necessarily the same type, you can't write</p>\n\n<pre><code>const wchar_t* rawString = \"I'm a regular old string!\"; // Error!\n</code></pre>\n\n<p>because there's a type mismatch: you've got an array of <code>char</code>s on the right-hand side and a pointer of type <code>const wchar_t*</code> on the left. As a result, C++ lets you define <em>wide string literals</em> by prefixing a string literal with an <code>L</code>. the resulting string is then an array of elements of type <code>wchar_t</code>, so this will compile:</p>\n\n<pre><code>const wchar_t* rawString = L\"I'm a wide string!\"; // Totally fine!\n</code></pre>\n\n<p>Microsoft's alias <code>LPCWSTR</code> is essentially a <code>const wchar_t*</code>, which is why you need the <code>L</code> prefix.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1489603912, "last_edit_date": 1489603912, "creation_date": 1489603266, "answer_id": 42818145, "question_id": 42817050, "link": "https://stackoverflow.com/questions/42817050/why-do-i-need-to-put-an-l-before-the-string-and-do-i-create-this-variable-correc/42818145#42818145", "title": "Why do I need to put an L before the string and do I create this variable correctly?", "body": "<p>There is a way to have Ansi versus Unicode via project setting using TCHAR types and related functions, and a macro, but Ansi was last used for Windows NT and older versions. The switch to Unicode was done for Windows 2000 and later, so the tchar stuff is legacy, but Visual Studio will still create a default app using tchar on certain types of projects.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ff381407(v=vs.85).aspx\" rel=\"nofollow noreferrer\">http://msdn.microsoft.com/en-us/library/windows/desktop/ff381407(v=vs.85).aspx</a></p>\n\n<p>There are also some TCHAR based string functions.</p>\n\n<p>For character strings, instead of the L, you could use the TEXT() macro</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/dd374074(v=vs.85).aspx\" rel=\"nofollow noreferrer\">http://msdn.microsoft.com/en-us/library/windows/desktop/dd374074(v=vs.85).aspx</a></p>\n\n<p>such as TEXT(\"example string\"). This will create either an ansi string or unicode string based on the project setting for character set. You'll need to include windows.h for the TEXT macro.</p>\n\n<p>Again, this is legacy code, except that if Visual Studio creates a default source program for you, it may use the TCHAR related stuff.</p>\n"}], "owner": {"reputation": 83, "user_id": 6706700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1T3cr.jpg?s=128&g=1", "display_name": "JohnSilver", "link": "https://stackoverflow.com/users/6706700/johnsilver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2302, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1489603912, "creation_date": 1489599882, "last_edit_date": 1489600303, "question_id": 42817050, "link": "https://stackoverflow.com/questions/42817050/why-do-i-need-to-put-an-l-before-the-string-and-do-i-create-this-variable-correc", "title": "Why do I need to put an L before the string and do I create this variable correctly?", "body": "<p>I am sort of new to C++ and I got troubles understanding the usage of the data types fully.</p>\n\n<p>I have these variables to be applied to createwindow parameters and the class with it. That takes an LPCWSTR data type.</p>\n\n<pre><code>LPCWSTR szTitle = L\"Hello\";\nLPCWSTR szWindowClass = L\"There\";\n</code></pre>\n\n<p>Therefore I did that, although, I don't understand why I have to include the L before the string (the debugger put it there to be honest).  I have also not too often seen strings be defined as the direct types (instead I often see WCHAR,char, etc). If you would make these variables, how would you write them? I don't believe I should be using LPCWSTR. Again sorry, I am fairly new and I can't find exactly what I'm looking for online.</p>\n"}, {"tags": ["c#", "c++", ".net", "windows"], "comments": [{"owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 0, "creation_date": 1489606598, "post_id": 42817026, "comment_id": 72750016, "body": "What do you mean by &quot;registration of C# assembly&quot;?"}, {"owner": {"reputation": 11, "user_id": 6084266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4e1962a0f99982e1eaf544669c59db?s=128&d=identicon&r=PG&f=1", "display_name": "Ming Chen", "link": "https://stackoverflow.com/users/6084266/ming-chen"}, "reply_to_user": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 0, "creation_date": 1489611181, "post_id": 42817026, "comment_id": 72752669, "body": "for instance: running the command line &quot;regasm.exe /codebase my.dll&quot;."}], "owner": {"reputation": 11, "user_id": 6084266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4e1962a0f99982e1eaf544669c59db?s=128&d=identicon&r=PG&f=1", "display_name": "Ming Chen", "link": "https://stackoverflow.com/users/6084266/ming-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489599801, "creation_date": 1489599801, "question_id": 42817026, "link": "https://stackoverflow.com/questions/42817026/regasm-exe-are-there-alternatives-including-windows-api", "title": "Regasm.exe, are there alternatives, including Windows API?", "body": "<p>The software I am currently working on is C++ mainly, including the software installation process. But here comes the time I need to integrate some C# assemblies into our software process, which includes the installation and registration of the C# assembly.</p>\n\n<p>I have searched a few possible methods to accomplish this:</p>\n\n<ol>\n<li><p>Locate \"regasm.exe\" on client's machine and call CreateProcess(.. ) to perform the assembly registration.</p></li>\n<li><p>Basically create a C# assembly (DLL) and utilize RegistrationServices to create the registration routine. Then export the registration method in the DLL to the C++ components.</p></li>\n<li><p>Manually register the C# assembly. This involves creating a set of Windows registry keys.</p></li>\n</ol>\n\n<p>I can not decide the pro and con of each method, while wondering if there are other ways to accomplish this task...</p>\n"}, {"tags": ["c++", "opengl", "glsl"], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 2, "last_activity_date": 1489601567, "creation_date": 1489601567, "answer_id": 42817581, "question_id": 42817008, "link": "https://stackoverflow.com/questions/42817008/permanently-move-vertices-using-vertex-shader-glsl/42817581#42817581", "title": "Permanently move vertices using vertex shader GLSL", "body": "<p>While it's possible to write values from a shader into a buffer and later read it from the CPU-client side (i.e., by using <code>glReadPixels()</code>) I don't think it is your case.\n<p>You can move a group of vertices, all with the same movement, with a single matrix. Why don't you do it with the CPU and store the results, updating their gl-buffer when needed? (VAO remains unchanged if you just update the glBuffer) Once they are moved, you don't need that matrix anymore, right? Or if you want to undo the movement, then, yes, yo need to store also the matrix.</p>\n"}, {"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1489601791, "creation_date": 1489601791, "answer_id": 42817646, "question_id": 42817008, "link": "https://stackoverflow.com/questions/42817008/permanently-move-vertices-using-vertex-shader-glsl/42817646#42817646", "title": "Permanently move vertices using vertex shader GLSL", "body": "<p>It seems that <a href=\"https://www.khronos.org/opengl/wiki/Transform_Feedback\" rel=\"nofollow noreferrer\">transform feedback</a> is exactly what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1489601896, "creation_date": 1489601896, "answer_id": 42817687, "question_id": 42817008, "link": "https://stackoverflow.com/questions/42817008/permanently-move-vertices-using-vertex-shader-glsl/42817687#42817687", "title": "Permanently move vertices using vertex shader GLSL", "body": "<blockquote>\n  <p>What I would like to do is move them using the vertex shader but also not keep track of their new positions trough matrices</p>\n</blockquote>\n\n<p>If I understand you correctly then what you want is to send some vertices to the GPU. Then having the vertex shader moving them. You can't because a vertex shader is only able to read from the vertex buffer, it isn't able to write back to it.</p>\n\n<blockquote>\n  <p>it would be very pricey in terms of memory and computing power to store that many matrices.</p>\n</blockquote>\n\n<p>Considering:</p>\n\n<blockquote>\n  <p>I am good with camera rotations and translation</p>\n</blockquote>\n\n<p>Then in wouldn't be expensive at all. Considering that you already have a <code>view</code> and <code>projection</code> matrix for the camera and viewport. Then having a <code>model</code> matrix contain the translation, rotation and scaling of each object isn't anywhere near a bottleneck.</p>\n\n<p>In the vertex shader you'd simply have:</p>\n\n<pre><code>uniform mat4 mvp; // model view projection matrix\n...\ngl_Position = mvp * vec4(position, 1.0);\n</code></pre>\n\n<p>On the CPU side of things you'd do:</p>\n\n<pre><code>mvp = projection * view * model;\nGLint mvpLocation\u200b = glGetUniformLocation(shaderGeometryPass, \"mvp\")\nglUniformMatrix4fv(mvpLocation, 1, GL_FALSE, (const GLfloat*)&amp;mvp);\n</code></pre>\n\n<p>If this gives you performance issues then the problem lies elsewhere.</p>\n\n<p>If you really want to \"save\" which ever changes you make on the GPU side of things, then you'd have to look into <a href=\"https://www.khronos.org/opengl/wiki/Shader_Storage_Buffer_Object\" rel=\"nofollow noreferrer\">Shader Storage Buffer Object</a> and/or <a href=\"https://www.khronos.org/opengl/wiki/Transform_Feedback\" rel=\"nofollow noreferrer\">Transform Feedback</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7716611, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209489774215429/picture?type=large", "display_name": "Davide Passaro", "link": "https://stackoverflow.com/users/7716611/davide-passaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1489601896, "creation_date": 1489599758, "question_id": 42817008, "link": "https://stackoverflow.com/questions/42817008/permanently-move-vertices-using-vertex-shader-glsl", "title": "Permanently move vertices using vertex shader GLSL", "body": "<p>I am leaning GLSL and in general some OpenGL and I am having some trouble with vertex movement and management.\nI am good with camera rotations and translation but now I need to move a few vertices and have them stay in their new positions.</p>\n\n<p>What I would like to do is move them using the vertex shader but also not keep track of their new positions trough matrices (as I need to move them around independently and it would be very pricey in terms of memory and computing power to store that many matrices).</p>\n\n<p>If there were a way to change their position values in the VBO directly from the vertex shader, that would be optimal.</p>\n\n<p>Is there a way to do that? What other ways do you suggest?\nThanks in advance.</p>\n\n<p>PS I am using GLSL version 1.30</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1489599459, "post_id": 42816882, "comment_id": 72745774, "body": "In C++ there is rarely a reason to be a <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three star programmer</a>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1489599660, "post_id": 42816882, "comment_id": 72745919, "body": "Whichever book you&#39;re reading to learn C++, get rid of it and start reading a different book."}, {"owner": {"reputation": 196, "user_id": 3336523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b425660323c64ccad07e7908115ba55?s=128&d=identicon&r=PG&f=1", "display_name": "revelationnow", "link": "https://stackoverflow.com/users/3336523/revelationnow"}, "edited": false, "score": 0, "creation_date": 1489599729, "post_id": 42816882, "comment_id": 72745961, "body": "In the arguments to your functions, you have node** q[100], which is a triple pointer. What you want is either node **q or node *q[100]."}, {"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489600736, "post_id": 42816882, "comment_id": 72746559, "body": "@SamVarshavchik I didn&#39;t read any book. Can you suggest one to clear all basics out ?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489601976, "post_id": 42816882, "comment_id": 72747243, "body": "<a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1489602320, "post_id": 42816882, "comment_id": 72747446, "body": "@Ujjwalchhabra You want an array of a linked list?  Simple:  <code>std::array&lt;std::list&lt;node&gt;, 100&gt; my_array_of_linked_list;</code>.  An array of 100 linked list that stores <code>node</code> type."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "edited": false, "score": 0, "creation_date": 1489600660, "post_id": 42817027, "comment_id": 72746521, "body": "Okay I had to also remove all the de-references and it worked. But can you explain why we changed so ? Don&#39;t we need a pointer to pointer while receiving a pointer ?  <b>EDIT : Okay I get it. Thanks a ton :D</b>"}], "tags": [], "owner": {"reputation": 196, "user_id": 3336523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b425660323c64ccad07e7908115ba55?s=128&d=identicon&r=PG&f=1", "display_name": "revelationnow", "link": "https://stackoverflow.com/users/3336523/revelationnow"}, "is_accepted": true, "score": 0, "last_activity_date": 1489599801, "creation_date": 1489599801, "answer_id": 42817027, "question_id": 42816882, "link": "https://stackoverflow.com/questions/42816882/array-of-link-list/42817027#42817027", "title": "Array of link list", "body": "<p>Change </p>\n\n<pre><code>void insert_node(node **q[100],int pos,int data)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>void insert_node(node *q[100],int pos,int data)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void display(node **q[100], int pos)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>void display(node *q[100], int pos)\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7716666, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_o9rtp4gqFk/AAAAAAAAAAI/AAAAAAAAGWQ/RVcQBJpjxgQ/photo.jpg?sz=128", "display_name": "Ujjwal chhabra", "link": "https://stackoverflow.com/users/7716666/ujjwal-chhabra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 42817027, "answer_count": 1, "score": 1, "last_activity_date": 1489599801, "creation_date": 1489599344, "question_id": 42816882, "link": "https://stackoverflow.com/questions/42816882/array-of-link-list", "title": "Array of link list", "body": "<p>I'm having trouble while implementing array of link list in c++. I made 2 functions , one insert and display. Can someone help ? </p>\n\n<p>This is the main function </p>\n\n<pre><code>node* a[100],*b,*temp,*temp2;\nfor(int i=0;i&lt;100;i++)\n{\n\n    a[i]=NULL;;\n}\n\ninsert_node(a,1,143);\ndisplay(a,1)\n</code></pre>\n\n<p>And this is insert function </p>\n\n<pre><code>void insert_node(node **q[100],int pos,int data)\n{\nnode *temp,*temp2;\nif(*q[pos]==NULL)\n{\n    temp=new node;\n    temp-&gt;next=NULL;\n   temp-&gt;data=data;\n   *q[pos]=temp;\n}\nelse\n{\n    temp2=*q[pos];\n    while(temp2-&gt;next != NULL )\n    {\n        temp2=*q[pos];\n        temp2=temp2-&gt;next;\n    }\n    temp=new node;\n    temp-&gt;next=NULL;\n    temp-&gt;data=data;\n    temp2-&gt;next=temp;\n}\n}\n</code></pre>\n\n<p>and this is display function </p>\n\n<pre><code>void display(node **q[100], int pos)\n{\nnode * temp;\n\ntemp=*q[pos];\ncout&lt;&lt;\"\\n\";\nwhile(temp-&gt;next != NULL)\n{\n    cout&lt;&lt;\" \"&lt;&lt;temp-&gt;data;\n}\n}\n</code></pre>\n\n<p>It gives error that </p>\n\n<pre><code>error: cannot convert 'node**' to 'node***' for argument '1' to 'void insert_node(node***, int, int)'\n\nerror: cannot convert 'node**' to 'node***' for argument '1' to 'void display(node***, int)\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1489599568, "post_id": 42816876, "comment_id": 72745858, "body": "What do you mean by &quot;place the various class definitions in an array&quot;? A <i>class definition</i> is just some text."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1489599716, "post_id": 42816876, "comment_id": 72745956, "body": "The short answer is: C++ does not work this way."}, {"owner": {"reputation": 196, "user_id": 3336523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b425660323c64ccad07e7908115ba55?s=128&d=identicon&r=PG&f=1", "display_name": "revelationnow", "link": "https://stackoverflow.com/users/3336523/revelationnow"}, "edited": false, "score": 0, "creation_date": 1489600324, "post_id": 42816876, "comment_id": 72746300, "body": "Arrays will store the same data type for all elements. You could do an indirection by creating an array of pointers to the base class type and then point them to individual objects, but I&#39;m not sure if that is what you are looking for."}, {"owner": {"reputation": 11, "user_id": 7513788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae1a39226643c40d407ff18e31df68a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob B", "link": "https://stackoverflow.com/users/7513788/bob-b"}, "edited": false, "score": 0, "creation_date": 1489600382, "post_id": 42816876, "comment_id": 72746334, "body": "What I had in mind was something was given a set of class definitions such as class1, class2, classN, I put them in an array and then I can create the desired class by just indexing into the array of class definitions and using the &quot;new&quot; operator. The array contains references to class definitions, not instantiations of a class."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1489600461, "post_id": 42816876, "comment_id": 72746387, "body": "In C++, classes are not objects. You can work around the issue by storing factory functions."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7513788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae1a39226643c40d407ff18e31df68a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob B", "link": "https://stackoverflow.com/users/7513788/bob-b"}, "edited": false, "score": 0, "creation_date": 1489602565, "post_id": 42817473, "comment_id": 72747591, "body": "Thanks for the suggestions, it looks like factory functions will do what I want."}], "tags": [], "owner": {"reputation": 2606, "user_id": 2807083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5243f429132252828f081c61979aa614?s=128&d=identicon&r=PG&f=1", "display_name": "user2807083", "link": "https://stackoverflow.com/users/2807083/user2807083"}, "is_accepted": false, "score": 1, "last_activity_date": 1489601252, "creation_date": 1489601252, "answer_id": 42817473, "question_id": 42816876, "link": "https://stackoverflow.com/questions/42816876/creating-c-classes-using-an-array-of-class-definitions/42817473#42817473", "title": "Creating C++ classes using an array of class definitions", "body": "<p>If you can organize all your classes into one hierarchical tree, you could use <a href=\"https://en.wikipedia.org/wiki/Abstract_factory_pattern\" rel=\"nofollow noreferrer\">Abstract factory pattern</a> to get similar result. This is example:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;memory&gt;\n\nclass IBaseClass {\npublic:\n    virtual ~IBaseClass(){}\n};\n\nclass A : public IBaseClass {\npublic:\n// ....\n};\n\nclass B : public IBaseClass {\npublic:\n// ....\n};\n\nclass C : public IBaseClass {\npublic:\n// ....\n};\n\nclass IFactory {\n    public:\n    virtual ~IFactory(){}\n\n    virtual IBaseClass* create() = 0;\n};\n\ntemplate &lt;class T&gt;\nclass SimpleFactory :\n    public IFactory {\npublic:\n    IBaseClass* create() override {\n        return new T();\n    }\n};\n\ntemplate &lt;typename T&gt;\nstd::shared_ptr&lt;IFactory&gt; make_factory() {\n    return std::make_shared&lt;SimpleFactory&lt;T&gt; &gt;();\n\n}\n\nint main(int, char**)\n{\n    std::map&lt;int, std::shared_ptr&lt;IFactory&gt;&gt; factories = {\n        {1, make_factory&lt;A&gt;()},\n        {2, make_factory&lt;B&gt;()},\n        {3, make_factory&lt;C&gt;()}\n    };\n\n    // ....\n\n    int type_index = 1;\n    auto obj = factories[type_index]-&gt;create();\n    // ...\n    // don't forget to delete\n    delete obj;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7513788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae1a39226643c40d407ff18e31df68a?s=128&d=identicon&r=PG&f=1", "display_name": "Bob B", "link": "https://stackoverflow.com/users/7513788/bob-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489601252, "creation_date": 1489599329, "question_id": 42816876, "link": "https://stackoverflow.com/questions/42816876/creating-c-classes-using-an-array-of-class-definitions", "title": "Creating C++ classes using an array of class definitions", "body": "<p>I am writing a program that reads documents from a data base and turns the contents into C++ class instantiations. In each document there is a \"type\" field that I am mapping to a particular C++ class. Basically I read the document, construct an object of the corresponding class, and fill out the fields of the class object. I have maybe 10-15 different types of classes because the types of data in each document may be different, although some of the types are common. The common types of data are reflected in base/derived class definitions. Right now I have a switch statement with case statements corresponding to the different types of objects and in each case statement I create the right kind of object and then fill it in. It is a little messy though.</p>\n\n<p>I was wondering if there is a means to place the various class definitions in an array so that I can mostly get rid of the switch statement. My ideal code would look like:</p>\n\n<p>auto * obj = new arrayOfClassDefinitions[typeofClassIndex]</p>\n\n<p>where arrayOfClassDefinitions contains the names of a set of classes. The obj pointer would then point to a new instantiation of the desired class. </p>\n\n<p>I recall I could do things like this in Python but I am not sure about C++. </p>\n\n<p>any ideas??</p>\n"}, {"tags": ["c++", "inheritance", "overriding", "overloading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489599318, "post_id": 42816834, "comment_id": 72745689, "body": "What do you expect the output to be and why?"}, {"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489599365, "post_id": 42816834, "comment_id": 72745719, "body": "In the first case the output should be,Derived::fun(), x = 10.0, due to run time polymorphism. In the second and third case, how do you decide the output?"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489599521, "post_id": 42816895, "comment_id": 72745824, "body": "In the first case, why run time polymorphism is not there?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 1, "creation_date": 1489599645, "post_id": 42816895, "comment_id": 72745912, "body": "@YamanSingla Just updated the answer to explain what&#39;s going on."}, {"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489599861, "post_id": 42816895, "comment_id": 72746033, "body": "Thanks a lot for the help @templatetypedef. I understood now what is going on actually!"}, {"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489683541, "post_id": 42816895, "comment_id": 72789861, "body": "In the second and third case, function overloading is not possible (since the function definitions differ only in whether default argument is present or not) , but since as you said in your answer that in the first case, the functions get overloaded (and not overridden). Isn&#39;t this a contradiction?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489684650, "post_id": 42816895, "comment_id": 72790562, "body": "@YamanSingla Can you explain why function overloading isn&#39;t possible?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 1, "creation_date": 1489685275, "post_id": 42816895, "comment_id": 72790961, "body": "@YamanSingla Oh, I think I see what you&#39;re saying. The way C++ does name lookup here works list this. First, it looks at the static type of the receiver object to determine where to start looking. (Here, that&#39;s <code>Derived</code>). It then looks at the name of the function you&#39;re calling (here, <code>fun</code>) and looks for a match. Since it finds a function named <code>fun</code> inside of <code>Derived</code>, it stops looking for other matches. (There&#39;s a quirk in C++ where the base class is never searched for an overload if a name is found in a derived class). Therefore, it finds <code>Derived::fun(float)</code> and uses that."}, {"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489685339, "post_id": 42816895, "comment_id": 72790997, "body": "Since they differ only whether the declaration contains default argument or not. See this <a href=\"http://ideone.com/oFKZPf\" rel=\"nofollow noreferrer\">ideone.com/oFKZPf</a>  void fun(int x = 0) void fun(float x = 10.0)."}, {"owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "edited": false, "score": 0, "creation_date": 1489685539, "post_id": 42816895, "comment_id": 72791127, "body": "OOPS in C++!! There are lots of rules and exceptions! BTW please merge your comment with your answer. Thanks again!"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 15, "last_activity_date": 1489689009, "last_edit_date": 1489689009, "creation_date": 1489599374, "answer_id": 42816895, "question_id": 42816834, "link": "https://stackoverflow.com/questions/42816834/overloading-of-virtual-functions/42816895#42816895", "title": "Overloading of virtual functions", "body": "<p>In C++, for a member function to override a base class function, the argument types have to exactly match the base class function's argument types. Since the base class function takes in an <code>int</code> and your derived class's function takes in a <code>float</code>, it's not considered an override. You can see this by using the <code>override</code> keyword:</p>\n\n<pre><code>class Base\n{\npublic:\n    virtual void fun ( int x = 0)\n    {\n        cout &lt;&lt; \"Base::fun(), x = \" &lt;&lt; x &lt;&lt; endl;\n    }\n};\n\nclass Derived : public Base\n{\npublic:\n    virtual void fun ( float x = 10.0 ) override // Doesn't compile!\n    {\n        cout &lt;&lt; \"Derived::fun(), x = \" &lt;&lt; x &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>What's happening in your code is that C++ considers your function to be an <em>overload</em> (another function with the same name) rather than an <em>override</em>. Let's look at this code:</p>\n\n<pre><code>Derived d1;\nBase *bp = &amp;d1;\nbp-&gt;fun();\n</code></pre>\n\n<p>Here, since the line <code>bp-&gt;fun()</code> uses a call through a base class pointer, C++ looks in <code>Base</code> to see which function to call. It finds <code>Base::fun(int)</code>. Now, since that function is marked <code>virtual</code>, it will call <code>Base::fun(int)</code> unless something overrode it. But since there isn't an override, <code>Base::fun(int)</code> ends up getting invoked.</p>\n\n<p>So what about these later two lines?</p>\n\n<pre><code>d1.fun();\nd1.fun(1.2);\n</code></pre>\n\n<p>Here, since you're calling these functions on objects of static type <code>Derived</code>, C++ tries to find a function called <code>fun</code> in the <code>Derived</code> class. It finds your new function <code>Derived::fun(float)</code>, and due to the way C++ does name lookup in classes it does not look in the base class to find <code>Base::fun(int)</code>. Therefore, both of these calls are treated as calls to <code>Derived::fun(float)</code>, so there's no ambiguity about which function to call when no arguments are presented. The compiler never even looked in the <code>Base</code> type because there was no need to.</p>\n\n<p>So, to summarize:</p>\n\n<ul>\n<li>You've introduced an <em>overload</em>, not an <em>override</em>. Using the <em>override</em> keyword would help you diagnose issues like this in the future.</li>\n<li>Calling <code>fun</code> through the base pointer looks for a function named <code>fun</code> taking in an <code>int</code>, since the base pointer's <code>fun</code> function takes in an <code>int</code>. That finds the version in <code>Base</code> because there's no oerride.</li>\n<li>Calling <code>fun</code> through the derived object looks for a function named <code>fun</code> starting in <code>Derived</code>, and it finds your override.</li>\n</ul>\n"}], "owner": {"reputation": 336, "user_id": 5216232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1074587822570746/picture?type=large", "display_name": "Yaman K Singla", "link": "https://stackoverflow.com/users/5216232/yaman-k-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7791, "favorite_count": 5, "accepted_answer_id": 42816895, "answer_count": 1, "score": 9, "last_activity_date": 1489689009, "creation_date": 1489599219, "last_edit_date": 1489683816, "question_id": 42816834, "link": "https://stackoverflow.com/questions/42816834/overloading-of-virtual-functions", "title": "Overloading of virtual functions", "body": "<p>I was asked this question in an interview. I was not able to answer this there. Neither am I able to get it now, as to why the output is the way it is.\nHere is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Base\n{\npublic:\n    virtual void fun ( int x = 0)\n    {\n        cout &lt;&lt; \"Base::fun(), x = \" &lt;&lt; x &lt;&lt; endl;\n    }\n};\n\nclass Derived : public Base\n{\npublic:\n    virtual void fun ( float x = 10.0 )\n    {\n        cout &lt;&lt; \"Derived::fun(), x = \" &lt;&lt; x &lt;&lt; endl;\n    }\n};\n\n\nint main()\n{\n    Derived d1;\n    Base *bp = &amp;d1;\n    bp-&gt;fun();\n    d1.fun();\n    d1.fun(1.2);\n    return 0;\n}\n</code></pre>\n\n<p>The output of the above code is:</p>\n\n<pre><code>Base::fun(), x = 0\nDerived::fun(), x = 10\nDerived::fun(), x = 1.2\n</code></pre>\n\n<p>The problem is:\nIn the first case we say that both the fun() functions get overloaded (and not overridden since they differ in their declarations) and the base fun() gets called, but it is not possible for these declarations of fun() to be overloaded (since they differ only whether the declaration contains default argument or not)</p>\n\n<pre><code>void fun(int x = 0)\nvoid fun(float x = 10.0)\n</code></pre>\n\n<p>It is not possible for these functions to get overloaded. </p>\n\n<p>There seems to be a contradiction in both the above cases.</p>\n\n<p>Any related article/ link explaining the situation would be highly helpful.</p>\n"}, {"tags": ["c++", "windows", "cmd"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1489599235, "post_id": 42816818, "comment_id": 72745634, "body": "Check out <a href=\"https://en.wikipedia.org/wiki/Ncurses\" rel=\"nofollow noreferrer\">ncurses</a>"}, {"owner": {"reputation": 8646, "user_id": 6242376, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/582463495261362/picture?type=large", "display_name": "Matt Corby", "link": "https://stackoverflow.com/users/6242376/matt-corby"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489599830, "post_id": 42816818, "comment_id": 72746017, "body": "I&#39;m not sure if that works with windows"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489600204, "post_id": 42816818, "comment_id": 72746232, "body": "D&#39;oh.  Missed that.  <a href=\"https://www.projectpluto.com/win32a.htm#flavors\" rel=\"nofollow noreferrer\">this</a> alternative might work."}, {"owner": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "edited": false, "score": 0, "creation_date": 1489607673, "post_id": 42816818, "comment_id": 72750677, "body": "Use the windows <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">console functions</a>"}], "owner": {"reputation": 8646, "user_id": 6242376, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/582463495261362/picture?type=large", "display_name": "Matt Corby", "link": "https://stackoverflow.com/users/6242376/matt-corby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489599180, "creation_date": 1489599180, "question_id": 42816818, "link": "https://stackoverflow.com/questions/42816818/how-to-make-text-fixed-to-console-screen-using-c-on-windows-cmd", "title": "How to make text fixed to console screen using c++ on windows cmd?", "body": "<p>So i've used programs like htop using bash and they have cool ways of showing data. It does things like having a fixed bar that shows what buttons you can push and what they do.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IhxjU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IhxjU.png\" alt=\"enter image description here\"></a></p>\n\n<p>The bottom row of commands is fixed to the screen so it won't move when you scroll. Is there any way for me to program this kind of behavior into a windows cmd c++ application? If so, how?</p>\n"}, {"tags": ["c++", "boost", "boost-multi-array"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1489598686, "post_id": 42816485, "comment_id": 72745308, "body": "See this: <a href=\"http://stackoverflow.com/a/23649263/3962537\">stackoverflow.com/a/23649263/3962537</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1489598836, "creation_date": 1489598836, "answer_id": 42816703, "question_id": 42816485, "link": "https://stackoverflow.com/questions/42816485/converting-boost-multi-array-to-its-native-array-type/42816703#42816703", "title": "Converting boost multi_array to its native array type", "body": "<p>Since the storage order of <code>boost::multi_array</code> is <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/multi_array/doc/user.html#sec_storage\" rel=\"nofollow noreferrer\">well defined</a>, you can actually call it safely like that:</p>\n\n<pre><code>function((float (*)[COLS])array.data());\n</code></pre>\n\n<p><code>c_storage_order</code> is the default, make sure to not use anything else upon construction of the object.</p>\n"}], "owner": {"reputation": 103, "user_id": 6283961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c8d32b69263908cc6dceb618ff880eb?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/6283961/codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42816703, "answer_count": 1, "score": 2, "last_activity_date": 1489598836, "creation_date": 1489598116, "question_id": 42816485, "link": "https://stackoverflow.com/questions/42816485/converting-boost-multi-array-to-its-native-array-type", "title": "Converting boost multi_array to its native array type", "body": "<p>I am writing a class that acts as a go-between for c++ classes and legacy c code.\nI have been using boost multi_array's to simplify a lot of the code. This mult_array is declared as such:</p>\n\n<pre><code>using Array = boost::multi_array&lt;float,2&gt;\n</code></pre>\n\n<p>However, I have run into a problem where I need to pass my multi_array to a legacy function that has a signature similar to</p>\n\n<pre><code>void function(float param[ROWS][COLS]);\n</code></pre>\n\n<p>My multi_array is of size ROWS and COLS, but I do not know of any easy way to convert the mutli_array to an array. Is there any way to do so?</p>\n"}, {"tags": ["c++", "templates", "shared-libraries"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1489597731, "post_id": 42816330, "comment_id": 72744750, "body": "Probably because templates are <i>templates</i> and not concrete classes. Take e.g. <code>std::vector</code>, it is a template. <code>std::vector&lt;int&gt;</code> is a concrete class."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1489597812, "post_id": 42816330, "comment_id": 72744804, "body": "Templates must be instantiated in order to be compiled. The conclusion is that you can&#39;t have templates in your shared library."}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489597832, "post_id": 42816330, "comment_id": 72744822, "body": "Does your .so instantiate some of exported template functions?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1489597877, "post_id": 42816330, "comment_id": 72744848, "body": "There&#39;s no such thing as a &quot;templated class&quot;. That&#39;s may be at the core of the misunderstanding. There are only &quot;classes&quot; and &quot;class templates&quot;. Templates are not classes. (Also, even classes don&#39;t get emitted to object code as such, only functions and static data members do.)"}], "answers": [{"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 0, "last_activity_date": 1489598868, "creation_date": 1489598868, "answer_id": 42816720, "question_id": 42816330, "link": "https://stackoverflow.com/questions/42816330/how-to-make-sure-template-class-definitions-make-it-into-shared-library/42816720#42816720", "title": "How to make sure template class definitions make it into shared library?", "body": "<p>A template is something that exists for the compiler during compilation only. The complier uses the template to create instantiations of said template. Those are then \"real\" classes or functions. They're visible to the linker and can thus be put into a shared library.</p>\n\n<p>To achieve that you need to inform the compiler that is compiling the code which links against the library that a particular instantiation of some template exists within the library. This is done by declaring an explicit instantiation (in the header):</p>\n\n<pre><code>extern template\u200b Class&lt;int&gt;; // since C++11\n</code></pre>\n\n<p>Second you need to inform the compiler which compiles the code for the library that said instantiation shall exist, using an explicit template definition (in the source code of the library):</p>\n\n<pre><code>template Class&lt;int&gt;;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7656458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b29cf7fddaa3e403d7767253873af142?s=128&d=identicon&r=PG&f=1", "display_name": "actdir42", "link": "https://stackoverflow.com/users/7656458/actdir42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "closed_date": 1489598544, "answer_count": 1, "score": 0, "last_activity_date": 1489598868, "creation_date": 1489597610, "question_id": 42816330, "link": "https://stackoverflow.com/questions/42816330/how-to-make-sure-template-class-definitions-make-it-into-shared-library", "closed_reason": "Duplicate", "title": "How to make sure template class definitions make it into shared library?", "body": "<p>I am trying to compile a .so for a fairly large project, and I am running into the issue that none of the classes, templated or otherwise, written in any of the files are in the completed .so file.</p>\n\n<p>I made the file with:</p>\n\n<pre><code>g++ -shared -fPIC -Wall filename1.cpp -o libfilename1.so\n</code></pre>\n\n<p>I'll spare you the full output of the nm, but all of the non-templated functions that were defined are there, and none of the templated functions, templated classes, or classes are there. I tried using <code>__attribute__ ((visibility=(\"default\")))</code> in the class declarations, but it didn't seem to do anything.</p>\n"}, {"tags": ["c++", "linux", "visual-studio"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489598905, "post_id": 42816228, "comment_id": 72745423, "body": "Do they have gdbserver installed? Which version?"}, {"owner": {"reputation": 170, "user_id": 2017263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7777f58c83b9930bf45c7e2c83c45c67?s=128&d=identicon&r=PG", "display_name": "theNotSoPro", "link": "https://stackoverflow.com/users/2017263/thenotsopro"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489602701, "post_id": 42816228, "comment_id": 72747676, "body": "Yeah it&#39;s installed on the remote server and it&#39;s v7.11.1. I just checked the onsite linux machine it&#39;s the same there."}, {"owner": {"reputation": 170, "user_id": 2017263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7777f58c83b9930bf45c7e2c83c45c67?s=128&d=identicon&r=PG", "display_name": "theNotSoPro", "link": "https://stackoverflow.com/users/2017263/thenotsopro"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489607266, "post_id": 42816228, "comment_id": 72750431, "body": "@n.m. don&#39;t know if i have to tag, but just in case..."}], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 2017263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7777f58c83b9930bf45c7e2c83c45c67?s=128&d=identicon&r=PG", "display_name": "theNotSoPro", "link": "https://stackoverflow.com/users/2017263/thenotsopro"}, "is_accepted": true, "score": 1, "last_activity_date": 1489975221, "creation_date": 1489975221, "answer_id": 42894714, "question_id": 42816228, "link": "https://stackoverflow.com/questions/42816228/msvs2015-linux-debug-starting-gdbserver-failed/42894714#42894714", "title": "MSVS2015 Linux Debug starting gdbserver failed", "body": "<p>I had a snapshot of the server prior to installing gdbserver. It worked after I installed all the components again by doing this:</p>\n\n<ol>\n<li>sudo apt-get install openssh-server g++ gdb gdbserver</li>\n</ol>\n\n<p>Don't know what fixed it but this worked...</p>\n"}], "owner": {"reputation": 170, "user_id": 2017263, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7777f58c83b9930bf45c7e2c83c45c67?s=128&d=identicon&r=PG", "display_name": "theNotSoPro", "link": "https://stackoverflow.com/users/2017263/thenotsopro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 42894714, "answer_count": 1, "score": 1, "last_activity_date": 1489975221, "creation_date": 1489597318, "question_id": 42816228, "link": "https://stackoverflow.com/questions/42816228/msvs2015-linux-debug-starting-gdbserver-failed", "title": "MSVS2015 Linux Debug starting gdbserver failed", "body": "<p>I'm trying to debug a linux c++ application on a remote offsite server and I got this message:</p>\n\n<p><a href=\"https://i.stack.imgur.com/f1F4a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f1F4a.png\" alt=\"gdbserver error\"></a></p>\n\n<p>Any ideas? I've tried debugging it on an onsite linux machine (through MSVS2015 on windows) and it works fine.</p>\n"}, {"tags": ["c++", "bitwise-operators", "evaluation"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 15, "creation_date": 1489595069, "post_id": 42815421, "comment_id": 72743014, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>, the equality operator has higher precedence than the bitwise operators hence the need for parentheses"}, {"owner": {"reputation": 108, "user_id": 7291681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Xq-XsxUy1pY/AAAAAAAAAAI/AAAAAAAAAEQ/c3cHpZgSVL0/photo.jpg?sz=128", "display_name": "Nishant sharma", "link": "https://stackoverflow.com/users/7291681/nishant-sharma"}, "edited": false, "score": 0, "creation_date": 1489595546, "post_id": 42815421, "comment_id": 72743361, "body": "Yeah my mistake."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1489595625, "post_id": 42815421, "comment_id": 72743443, "body": "@EdChum I would use a stronger &quot;need for parentheses&quot; viz. any mixing of operators. Just easier that way"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1489595868, "post_id": 42815421, "comment_id": 72743605, "body": "And that&#39;s why you should have your warnings on. My GCC says <code>warning: suggest parentheses around comparison in operand of &#39;&amp;&#39; [-Wparentheses]</code> about the first snippet."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1489596254, "post_id": 42815421, "comment_id": 72743872, "body": "@Caleth yes that&#39;s true, it becomes even more important once you start using multiple conditions"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 4, "creation_date": 1489596261, "post_id": 42815421, "comment_id": 72743878, "body": "Including parentheses whenever there is any question about order-of-operations issues will help readers of your code understand the behavior your intended to implement -- without them, they will have to wonder if they are looking at a subtle order-of-operations bug, or not."}], "answers": [{"comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1489596655, "post_id": 42815774, "comment_id": 72744110, "body": "Honestly, this is another reason I prefer C#&#39;s behavior around the <code>bool</code> type. Equality and relational operators evaluate as <code>bool</code>, and <code>bool</code> can&#39;t be used with arithmetic or bitwise operators, so even if operator precedence binds the equality operator first, you get a compile time error when you try to do <code>int &amp; bool</code>."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1489596018, "creation_date": 1489596018, "answer_id": 42815774, "question_id": 42815421, "link": "https://stackoverflow.com/questions/42815421/why-bitwise-operators-require-parentheses/42815774#42815774", "title": "why bitwise operators require parentheses?", "body": "<p>\nAs EdChum mentioned in his comment: the equality operator has a higher precedence than the bitwise and, i. e. the equality will be evaluated first, just as the multiplication is evaluated first because of higher precedence in this term:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if(1 + 3 * 0 == 0) // won't be true!\n</code></pre>\n\n<p>(I personally was never happy about this, always would have preferred the bitwise operators having higher precedence - but the standard is as it is, we have to live with...)</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1489597218, "post_id": 42815991, "comment_id": 72744432, "body": "The expression <code>if (i&amp;1)</code> <i>may</i> be faster, depending on the optimization settings for the compiler and the compilers optimization technology.  If the compiler recognizes <code>i%2</code>, it may convert it to <code>i&amp;1</code>."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 1, "last_activity_date": 1489596617, "creation_date": 1489596617, "answer_id": 42815991, "question_id": 42815421, "link": "https://stackoverflow.com/questions/42815421/why-bitwise-operators-require-parentheses/42815991#42815991", "title": "why bitwise operators require parentheses?", "body": "<p>You actually don't need to compare to 0 here.  MSVC will perhaps deliver a performance warning, but you can just say <code>if (i%2) { odd; } else { even; }</code>.</p>\n\n<p>There's of course debate about readability and such, but any C++ dev should know what that does.</p>\n"}, {"comments": [{"owner": {"reputation": 1450, "user_id": 5358284, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/tf9Cf.jpg?s=128&g=1", "display_name": "polfosol \u0c20_\u0c20", "link": "https://stackoverflow.com/users/5358284/polfosol-%e0%b0%a0-%e0%b0%a0"}, "edited": false, "score": 0, "creation_date": 1531720471, "post_id": 42816315, "comment_id": 89682946, "body": "But still, the precedence of <code>&amp;</code> is higher than <code>&amp;&amp;</code>. So something like <code>n&amp;&amp;1==0</code> would be equivalent to <code>n&amp;&amp;(1==0)</code>, while it&#39;s not :/"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1450, "user_id": 5358284, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/tf9Cf.jpg?s=128&g=1", "display_name": "polfosol \u0c20_\u0c20", "link": "https://stackoverflow.com/users/5358284/polfosol-%e0%b0%a0-%e0%b0%a0"}, "edited": false, "score": 0, "creation_date": 1531747488, "post_id": 42816315, "comment_id": 89697933, "body": "@polfosol\u0c20_\u0c20 yes it is equivalent"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1531747538, "last_edit_date": 1531747538, "creation_date": 1489597568, "answer_id": 42816315, "question_id": 42815421, "link": "https://stackoverflow.com/questions/42815421/why-bitwise-operators-require-parentheses/42816315#42816315", "title": "why bitwise operators require parentheses?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a> this expression:</p>\n\n<pre><code>n&amp;1==0\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>n&amp;(1==0)\n</code></pre>\n\n<p>which means result of operation <code>1==0</code> which is always <code>false</code> is used with binary AND with <code>n</code>. Boolean <code>false</code> is implicitly converted to <code>int</code> which is required \nby binary operation and value is 0. As binary AND with 0 is always 0 that code is convoluted way to say:</p>\n\n<pre><code>if(0) \n    cout&lt;&lt;\"Number is even\";\nelse\n    cout&lt;&lt;\"Number is odd\";\n</code></pre>\n\n<p>and 0 converted back to boolean as <code>false</code> so you always get \"Number is odd\" output. So yes, brackets are required in this case. </p>\n\n<blockquote>\n  <p>my question is do we have to put bracket whenever we are using bitwise operators?</p>\n</blockquote>\n\n<p>No, you have to use them when other operations with higher precedence are involved. It does not have to be always, but if you prefer you can always put them.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1489597999, "creation_date": 1489597999, "answer_id": 42816443, "question_id": 42815421, "link": "https://stackoverflow.com/questions/42815421/why-bitwise-operators-require-parentheses/42816443#42816443", "title": "why bitwise operators require parentheses?", "body": "<blockquote>\n  <p>my question is do we have to put bracket whenever we are using bitwise operators? or else we got logical error in our program.</p>\n</blockquote>\n\n<p>If you look at the <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ operator precedence table</a>, you'll notice that the equality operator (<code>==</code>) has higher precedence than the bitwise operators.</p>\n\n<p>Hence, <code>n&amp;1==0</code> is interpreted as <code>n &amp; ( 1 == 0 )</code>. To make sure that <code>n &amp; 1</code> is given higher precedence than <code>1 == 0</code>, you will need to use parenthesis: <code>(n &amp; 1) == 0</code>. (As an aside, you could have used <code>n % 2 == 0</code> with expected results but I would still recommend using <code>(n % 2) == 0</code>).</p>\n\n<p>That answers the specific question of whether parenthesis need to be used when dealing with bitwise operators and the equality operator.</p>\n\n<p>To answer the general question of whether parenthesis need to be used when dealing with bitwise operators and <em>all other operators</em>, you'll need to use the operator precedence table as the guide.</p>\n\n<p>As a general practice, I recommend using parenthesis to make the code more readable and the intention more clear. It also works when you are not always sure about the order of precedence of the operators involved.</p>\n"}], "owner": {"reputation": 108, "user_id": 7291681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Xq-XsxUy1pY/AAAAAAAAAAI/AAAAAAAAAEQ/c3cHpZgSVL0/photo.jpg?sz=128", "display_name": "Nishant sharma", "link": "https://stackoverflow.com/users/7291681/nishant-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1646, "favorite_count": 0, "accepted_answer_id": 42816315, "answer_count": 4, "score": -2, "last_activity_date": 1531747538, "creation_date": 1489595016, "last_edit_date": 1513111260, "question_id": 42815421, "link": "https://stackoverflow.com/questions/42815421/why-bitwise-operators-require-parentheses", "title": "why bitwise operators require parentheses?", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n    {\n\n    int n;\n    cin&gt;&gt;n;\n    if(n&amp;1==0)   //without using bracket  (n&amp;1)\n        cout&lt;&lt;\"Number is even\";\n    else\n        cout&lt;&lt;\"Number is odd\";\n    return 0;\n    }\n</code></pre>\n\n<p>output : odd //for n=6</p>\n\n<pre><code>#include&lt;iostream&gt;\n    using namespace std;\n    int main()\n        {\n        int n;\n        cin&gt;&gt;n;\n        if((n&amp;1)==0)\n            cout&lt;&lt;\"Number is even\";\n        else\n            cout&lt;&lt;\"Number is odd\";\n        return 0;\n        }\n</code></pre>\n\n<p>output : even //for n=6</p>\n\n<p>Do we have to use parentheses whenever we use bitwise operators? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 5, "creation_date": 1489594331, "post_id": 42815100, "comment_id": 72742507, "body": "What do you mean by <i>most efficient</i> ?  You&#39;re surely not trying to shave nanoseconds off a loop with a human in it ?"}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1489594410, "post_id": 42815100, "comment_id": 72742550, "body": "&quot;best&quot; - depends on what you mean &#39;best&#39; to be; &quot;most efficient&quot; - you should measure each one in perticular case."}, {"owner": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1489594562, "post_id": 42815100, "comment_id": 72742653, "body": "@EdChum Thanks. No, I just wanted to know what would be most efficient so that I can use it within future, much larger programs."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1489594721, "post_id": 42815100, "comment_id": 72742761, "body": "@CypherPsyco You&#39;d have to profile some specific code for such specific scenario&#39;s, but if you&#39;re just learning you really shouldn&#39;t at all care about efficiency, as in most cases the gains will be ridiculously minor and far outweighed by any gains you could make in readability/maintainability/ease to write."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1489597361, "post_id": 42815100, "comment_id": 72744516, "body": "You comment is wrong.  The expression <code>(age &gt;= 18)</code>, is checking if age is greater than <i>or equal to</i> 18.  By the way, the 2nd if is not necessary because the <code>else</code> clause means greater than or equal to (in this case)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "edited": false, "score": 0, "creation_date": 1489594817, "post_id": 42815292, "comment_id": 72742825, "body": "Thanks, that works great. So console applications where the user is expected to input data is bad? Why is this so?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489594861, "post_id": 42815292, "comment_id": 72742850, "body": "Try entering &quot;a&quot;."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "edited": false, "score": 0, "creation_date": 1489595138, "post_id": 42815292, "comment_id": 72743068, "body": "@CypherPsyco What do you mean by &quot;bad&quot;? If the goal is to interact with a human, no, it isn&#39;t &quot;bad&quot;"}, {"owner": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1489595229, "post_id": 42815292, "comment_id": 72743134, "body": "@Caleth Referring to Peter <i>and then write for the user to type something (which is many orders of magnitude worse)</i>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "edited": false, "score": 0, "creation_date": 1489595358, "post_id": 42815292, "comment_id": 72743230, "body": "@CypherPsyco He means there is no point to optimising for nanoseconds when it takes a human about a second to read the prompt and press a button."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "edited": false, "score": 1, "creation_date": 1489595403, "post_id": 42815292, "comment_id": 72743267, "body": "@CypherPsyco what we are trying to get you to understand is that you <b>should not care</b> about shaving nanoseconds off a round trip through a human, because humans are <i>billions</i> of times slower than computers for this sort of task"}, {"owner": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1489595581, "post_id": 42815292, "comment_id": 72743404, "body": "@Caleth Ahh, I understand."}], "tags": [], "owner": {"reputation": 5153, "user_id": 1612743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/599402c77aed8fa96fc13f7b071d31a8?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1612743/peter"}, "is_accepted": false, "score": 3, "last_activity_date": 1489612830, "last_edit_date": 1489612830, "creation_date": 1489594644, "answer_id": 42815292, "question_id": 42815100, "link": "https://stackoverflow.com/questions/42815100/how-to-loop-a-statement-in-c/42815292#42815292", "title": "How to loop a statement in C++", "body": "<p>Efficient can mean many things, but it certainly doesn't mean performance when you write to console (which is expensive enough in terms of performance) and then write for the user to type something (which is many orders of magnitude more expensive in terms of performance).</p>\n\n<p>So let's assume efficiency means ease of typing, ease of reading and ease of maintaining.</p>\n\n<pre><code>do\n{\n    cout &lt;&lt; \"Enter Age: \"; // Asks the user to enter their age\n    cin &gt;&gt; age; // Takes input as age\n    if (age &lt; 18) // If age is less than 18\n        cout &lt;&lt; \"Sorry, you cannot use this program\" &lt;&lt; endl;   \n}\nwhile (age &lt; 18);\ncout &lt;&lt; \"Welcome\"\n</code></pre>\n\n<p>If you want something that is not as easy to type, read and maintain, I suggest recursion. The (only?) upside of this approach it that it will impress a first semester programming teacher:</p>\n\n<pre><code>int GetAge()\n{\n    int age;\n    cout &lt;&lt; \"Enter Age: \"; // Asks the user to enter their age\n    cin &gt;&gt; age; // Takes input as age\n    if (age &gt;= 18)\n        return age;\n    cout &lt;&lt; \"Sorry, you cannot use this program\" &lt;&lt; endl;\n    return GetAge();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1489597126, "creation_date": 1489597126, "answer_id": 42816160, "question_id": 42815100, "link": "https://stackoverflow.com/questions/42815100/how-to-loop-a-statement-in-c/42816160#42816160", "title": "How to loop a statement in C++", "body": "<p>actually entering age doesn't need any special algorithm since it isn't a complex process.\nsimply write:</p>\n\n<pre><code>while (age &lt; 18){\ncout &lt;&lt; \"you can't use this program\" &lt;&lt; endl;\ncin &gt;&gt; age;\n}\n</code></pre>\n\n<p>(i didn't know where you want to use the loop, so i write this code as an example)</p>\n"}, {"tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1489612808, "last_edit_date": 1489612808, "creation_date": 1489599341, "answer_id": 42816881, "question_id": 42815100, "link": "https://stackoverflow.com/questions/42815100/how-to-loop-a-statement-in-c/42816881#42816881", "title": "How to loop a statement in C++", "body": "<p>To answer your question, there is no one specific <em>best</em> way to do your loop, because you cannot have one loop that trumps all others in efficience and performance and size, etc... . You need to pick a specific parameter by which you want to gauge the \"best\" loop.</p>\n\n<p>Having said that, an alternate way is to use recursion; this will not need any <code>while</code> loop. Since there is no specification as to \"which\" kind of loop you <em>have</em> to use, here is a different alternative to the while loop or the do-while loop:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint Age(void)\n{\n    int age;\n\n    cout &lt;&lt; \"Enter Age: \";\n    cin &gt;&gt; age;\n\n    if (age &lt; 18)\n    {\n        cout &lt;&lt; \"Sorry, you cannot use this program\" &lt;&lt; endl;\n        age = Age(); // recursion here when invalid age is entered\n    }\n\n    else if (age &gt;= 18) \n        cout &lt;&lt; \"Welcome\" &lt;&lt; endl; \n\n    return age;\n}\n\nint main()\n{\n    int age = Age();\n    cout &lt;&lt; age &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>What I have done here is move the code into a separate function called <code>Age()</code>, and call that function in <code>int main()</code>. However, I also call the function when the user enters an age smaller than 18, creating a loop where the function is repeatedly called to re-enter the age until an acceptable value is entered. That value is stored in age, which is then returned to the <code>main()</code> function.</p>\n"}], "owner": {"reputation": 1, "user_id": 7716147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a027658dedff553422c68027e221c5?s=128&d=identicon&r=PG&f=1", "display_name": "CypherPsyco", "link": "https://stackoverflow.com/users/7716147/cypherpsyco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 3, "score": -11, "last_activity_date": 1489612830, "creation_date": 1489594198, "last_edit_date": 1489598916, "question_id": 42815100, "link": "https://stackoverflow.com/questions/42815100/how-to-loop-a-statement-in-c", "title": "How to loop a statement in C++", "body": "<p><strong>EDIT :</strong></p>\n\n<p>Here is the code that works, although if you enter anything but a number, the program goes into an infinite loop.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int age; // Declare age as integer\n\n    do\n    {\n        cout &lt;&lt; \"Enter Age: \"; // Asks the user to enter their age\n        cin &gt;&gt; age; // Takes input as age\n        if (age &lt; 18) // If age is less than 18\n            cout &lt;&lt; \"Sorry, you cannot use this program\" &lt;&lt; endl;\n    } while (age &lt; 18);\n    cout &lt;&lt; \"Welcome\";\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>ORIGINAL POST :</strong></p>\n\n<p>I've recently started learning C++ and would like to know the <strong>best</strong> way to loop the <code>Enter Age</code> procedure so that the user is able to re-enter their age.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int age; // Declare age as integer\n\n    cout &lt;&lt; \"Enter Age: \"; // Asks the user to enter their age\n    cin &gt;&gt; age; // Takes input as age\n\n    if (age &lt; 18) // If age is less than 18\n    { \n        cout &lt;&lt; \"Sorry, you cannot use this program\" &lt;&lt; endl;   \n    } \n\n    else if (age &gt;= 18) // If age is greater than 18\n    {\n        cout &lt;&lt; \"Welcome\" &lt;&lt; endl; \n    }\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "c++14", "variadic-templates"], "comments": [{"owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1489594273, "post_id": 42815010, "comment_id": 72742460, "body": "Why do you need such specific way? You can change code slightly and use similar code <code>Something_t&lt;int&gt;::Something2&lt;double&gt;</code>"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1489594538, "post_id": 42815010, "comment_id": 72742637, "body": "@LmTinyToon It is possible to do without it but I am just wondering if it is a thing."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 3, "creation_date": 1489594580, "post_id": 42815010, "comment_id": 72742662, "body": "@LmTinyToon Because he&#39;s Curious... :P"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1489595790, "post_id": 42815010, "comment_id": 72743557, "body": "I don&#39;t know about an alias, but you might be able to build something similar using an old-school struct-with-typedef by using a delimiter type."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1489595833, "post_id": 42815010, "comment_id": 72743583, "body": "@cdhowie you mean a delimiter in between the type lists to separate them?"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1489595971, "post_id": 42815010, "comment_id": 72743672, "body": "@Curious Right. I&#39;m trying to get an example working."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1489596446, "post_id": 42815010, "comment_id": 72743987, "body": "@Curious I got my example working with the same approach as the posted answer, just using a custom <code>template &lt;typename...&gt; struct pack;</code> instead of using <code>std::tuple</code>."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1489596149, "creation_date": 1489596149, "answer_id": 42815814, "question_id": 42815010, "link": "https://stackoverflow.com/questions/42815010/how-to-alias-a-nested-template-class-with-variadic-parameter-packs/42815814#42815814", "title": "How to alias a nested template class with variadic parameter packs", "body": "<p>Not exactly what you asked but... if you can wrap your variadic type lists as arguments of tuples (or similar classes)... </p>\n\n<pre><code>#include &lt;tuple&gt;\n\ntemplate &lt;typename ... Types&gt;\nstruct Something\n {\n   template &lt;typename ... TypesTwo&gt;\n   struct Another {};\n };\n\ntemplate &lt;typename, typename&gt;\nstruct variadicWrapper;\n\ntemplate &lt;typename ... Ts1, typename ... Ts2&gt;\nstruct variadicWrapper&lt;std::tuple&lt;Ts1...&gt;, std::tuple&lt;Ts2...&gt;&gt;\n { using type = typename Something&lt;Ts1...&gt;::template Another&lt;Ts2...&gt;; };\n\ntemplate &lt;typename T1, typename T2&gt;\nusing Something_t = typename variadicWrapper&lt;T1, T2&gt;::type;\n\nint main()\n {\n   Something_t&lt;std::tuple&lt;int&gt;, std::tuple&lt;double&gt;&gt;{};\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1489667544, "post_id": 42816086, "comment_id": 72777616, "body": "He tried with bad syntax (two template parameter lists) - sure <i>that</i> can&#39;t work. Above is now the correct syntax (compare to max66&#39;s anwwer), but still can&#39;t work due to ambiguites..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1489596910, "creation_date": 1489596910, "answer_id": 42816086, "question_id": 42815010, "link": "https://stackoverflow.com/questions/42815010/how-to-alias-a-nested-template-class-with-variadic-parameter-packs/42816086#42816086", "title": "How to alias a nested template class with variadic parameter packs", "body": "<p>\nNot a standalone answer, but an addition to max66's answer:</p>\n\n<p>You could have <em>tried</em> this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename ... TT, typename ... TTT&gt;\nusing Alias = typename Something&lt;TT...&gt;::Another&lt;TTT...&gt;;\n</code></pre>\n\n<p>Looks really nice at first, doesn't it?</p>\n\n<p>Problem then, however will already be with one single template parameter:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Alias&lt;int&gt; a;\n</code></pre>\n\n<p>Which one is it now? <code>Something&lt;int&gt;::Another&lt;&gt;</code> or <code>Something&lt;&gt;::Another&lt;int&gt;</code>? And if you have more parameters, how to distribute? No chance to get a meaningful solution. So no, you can't do that directly, you have to help yourself with tricks such as max66 proposed...</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 1, "answer_count": 2, "score": 10, "last_activity_date": 1489925120, "creation_date": 1489593954, "last_edit_date": 1495540459, "question_id": 42815010, "link": "https://stackoverflow.com/questions/42815010/how-to-alias-a-nested-template-class-with-variadic-parameter-packs", "title": "How to alias a nested template class with variadic parameter packs", "body": "<p>Is there any way one can alias a nested template class with a <code>using</code> keyword?  Something like this</p>\n\n<pre><code>template &lt;typename... Types&gt;\nstruct Something {\n    template &lt;typename... TypesTwo&gt;\n    struct Another {};\n};\n\ntemplate &lt;typename... Types&gt;\ntemplate &lt;typename... TypesTwo&gt;\nusing Something_t = typename Something&lt;Types...&gt;::template Another&lt;TypesTwo...&gt;;\n\nint main() {\n    Something_t&lt;int&gt;&lt;double&gt;{};\n    return 0;\n}\n</code></pre>\n\n<p>This answer <a href=\"https://stackoverflow.com/questions/18699973/template-template-alias-to-a-nested-template\">template template alias to a nested template?</a> shows a way to do that but that will no longer work if both the parameter packs are variadic, as the compiler will not know where to start and where to end the type lists.   </p>\n"}, {"tags": ["c++", "c", "assembly", "dll", "inline"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1489594054, "post_id": 42814998, "comment_id": 72742294, "body": "Wouldn&#39;t MSDN be the correct addressee for this question? We are not the Microsoft support forum."}, {"owner": {"reputation": 51, "user_id": 6190073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/033654b398ed5094ca9b76e65401a9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Joris Borza", "link": "https://stackoverflow.com/users/6190073/joris-borza"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489594264, "post_id": 42814998, "comment_id": 72742454, "body": "I have not experience with the MSDN forums and I do here. Secondly I don&#39;t know if this &#39;issue&#39; is related to MS or if it is not possible in general."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489594880, "post_id": 42814998, "comment_id": 72742862, "body": "Inline-assmbly is not part of the C language. So, of course it is MS-specific. Wrt you not knowing the MSDN-forum: non sequitur. That&#39;s not an argument."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6190073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/033654b398ed5094ca9b76e65401a9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Joris Borza", "link": "https://stackoverflow.com/users/6190073/joris-borza"}, "edited": false, "score": 0, "creation_date": 1489594752, "post_id": 42815288, "comment_id": 72742780, "body": "Thanks for the answer!"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1489594843, "post_id": 42815288, "comment_id": 72742842, "body": "...because <code>size_t</code> is <code>unsigned</code>... ? ;)"}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1489594845, "post_id": 42815288, "comment_id": 72742843, "body": "The assembler is distinct from the C/C++ compiler proper, but it ships with Visual Studio."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489594975, "post_id": 42815288, "comment_id": 72742924, "body": "Inline assembly is a compiler extension, thus not standardised at all. Just because two compilers support it does not mean youj can use the same construct/syntax for it on both implementations."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1489595018, "post_id": 42815288, "comment_id": 72742967, "body": "@LPs: exactly =)"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489595151, "post_id": 42815288, "comment_id": 72743080, "body": "@Olaf: of course, but my point here was essentially to clear up the potential misunderstanding that it&#39;s an intrinsic problem of those platforms - which of course doesn&#39;t make sense, it&#39;s just that MS chose not to implement this common extension. I&#39;ll try to make this clearer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489595281, "post_id": 42815288, "comment_id": 72743174, "body": "As I wrote, it is a matter of the implementation. Sorry, I thought was was obvious, as the question cites from the VisualStudio text. How would that be relevant for gcc? (retorical question)"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 2, "last_activity_date": 1489595479, "last_edit_date": 1489595479, "creation_date": 1489594634, "answer_id": 42815288, "question_id": 42814998, "link": "https://stackoverflow.com/questions/42814998/inline-assembly-on-x64-via-a-dll/42815288#42815288", "title": "Inline assembly on x64 via a DLL", "body": "<p>As specified by the MSDN, the <em>VC++ compiler</em> doesn't support inline assembly on those platforms. Of course it's not an intrinsic limitation of those platforms - it's just a feature not implemented in those versions of VC++, other compilers (e.g. gcc) support it just fine. Nothing so strange, it's not a standard feature (as in: a feature required by the C or C++ standard), it's just a common extension. </p>\n\n<p>Still, even with VC++ you don't need to go as far as making a dll - you can just assemble your asm file into an object module, and link it together with the other ones (generated e.g. by the C or C++ compiler) into a single executable. This is in fact the procedure they recommend to mix C/C++ and assembly - the Microsoft assembler itself is shipped along with VC++ as always. </p>\n"}], "owner": {"reputation": 51, "user_id": 6190073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/033654b398ed5094ca9b76e65401a9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Joris Borza", "link": "https://stackoverflow.com/users/6190073/joris-borza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 42815288, "answer_count": 1, "score": -1, "last_activity_date": 1489595479, "creation_date": 1489593926, "question_id": 42814998, "link": "https://stackoverflow.com/questions/42814998/inline-assembly-on-x64-via-a-dll", "title": "Inline assembly on x64 via a DLL", "body": "<p>Today I read on the <a href=\"https://msdn.microsoft.com/en-us/library/4ks26t93.aspx\" rel=\"nofollow noreferrer\">MSDN</a> website, that inline assembly is not supported on ARM and x64 processors. Since I'm not good at C, C++ or ASM, I couldn't test it out myself, but it sparked my interest. </p>\n\n<p>I wondered if it is not possible to do this in Visual Studio, since its on the MSDN website. </p>\n\n<p>Regardless of the answer to my first question, my second question remains: is it possible to compile a DLL with inline ASM, which is then called via a x64 C/C++ program to execute the inline ASM. \nIf so, why, and if not: why not.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "qt"], "answers": [{"comments": [{"owner": {"reputation": 1390, "user_id": 1200914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d3c21d029de13a98c973b98f28ad6867?s=128&d=identicon&r=PG", "display_name": "Learning from masters", "link": "https://stackoverflow.com/users/1200914/learning-from-masters"}, "edited": false, "score": 0, "creation_date": 1489594811, "post_id": 42815214, "comment_id": 72742821, "body": "So if I connect different radiobuttons to this slot, how can I know from on_rdbMethod_change which radiobutton did it call it?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 1390, "user_id": 1200914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d3c21d029de13a98c973b98f28ad6867?s=128&d=identicon&r=PG", "display_name": "Learning from masters", "link": "https://stackoverflow.com/users/1200914/learning-from-masters"}, "edited": false, "score": 1, "creation_date": 1489595121, "post_id": 42815214, "comment_id": 72743054, "body": "If you call QObject::sender() ( <a href=\"http://doc.qt.io/qt-5/qobject.html#sender\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qobject.html#sender</a> ) from within the slot method, it will return a pointer-to-QObject of the QObject that emitted the signal.   You can then downcast that pointer to a QAbstractButton (or whatever) using dynamic_cast&lt;&gt; and compare it to myradiobutton1 (or whatever) to see which button it is.  (Note that this is not considered a good object-oriented design, since it means your slot will probably not do the right thing if ever called from some other context; but as a practical matter it works)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1489601435, "post_id": 42815214, "comment_id": 72746920, "body": "Or use the new syntax and lambdas and you can forget about <code>sender()</code>, runtime errors, and all related annoyances. Then it will just work."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 2, "last_activity_date": 1489594461, "creation_date": 1489594461, "answer_id": 42815214, "question_id": 42814986, "link": "https://stackoverflow.com/questions/42814986/qt-signal-slot-visual-studio-doesnt-seem-to-be-connected/42815214#42815214", "title": "Qt signal slot visual studio: doesn&#39;t seem to be connected", "body": "<blockquote>\n<pre><code>connect(this-&gt;ui.myradiobutton1, SIGNAL(clicked), this, SLOT(on_rdbMethod_change(this-&gt;ui.myradiobutton1-&gt;isChecked, 0)));\n</code></pre>\n</blockquote>\n\n<p>The above is incorrect -- if you look at your program's stdout output, you'll probably see that connect() is printing an error message about it.</p>\n\n<p>In particular, you didn't include parentheses after clicked, and also your slot-methods arguments have to be either the same as the signal-method's arguments, or at least the same as the first N of the signal-method's arguments.  In this case, since the signal (clicked()) has no arguments, that means that your slot-method needs to have no arguments as well; so you'll need to either change on_rdbMethod_change() to take no arguments, or specify a different slot-method instead (perhaps that slot-method could be implemented to call on_rdbMethod_change(this->ui.myradiobutton1->isChecked, 0), if that's what you want it to do).  Also, connect() calls can't take values in their SIGNAL/slot arguments list, only types.</p>\n\n<p>So the corrected connect() call would look something like this:</p>\n\n<blockquote>\n<pre><code>connect(this-&gt;ui.myradiobutton1, SIGNAL(clicked()), this, SLOT(on_rdbMethod_change()));\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1390, "user_id": 1200914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d3c21d029de13a98c973b98f28ad6867?s=128&d=identicon&r=PG", "display_name": "Learning from masters", "link": "https://stackoverflow.com/users/1200914/learning-from-masters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 42815214, "answer_count": 1, "score": 0, "last_activity_date": 1489594461, "creation_date": 1489593901, "last_edit_date": 1489594212, "question_id": 42814986, "link": "https://stackoverflow.com/questions/42814986/qt-signal-slot-visual-studio-doesnt-seem-to-be-connected", "title": "Qt signal slot visual studio: doesn&#39;t seem to be connected", "body": "<p>I'm learning how to use QT with visual studio. At the moment, I'm using QT 5.8 and vs 2017. I created a new project and added some radiobuttons with QT designer. Now, I want to implemment some actions like \"do that when you click the radiobutton\". This is my code:</p>\n\n<p>Draw.cpp</p>\n\n<pre><code>#include \"Draw.h\"\n\n#include \"qpushbutton.h\"\n#include \"qradiobutton.h\"\n#include \"qgroupbox.h\"\n\nDraw::Draw(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n\n    //Invisible elements\n    ui.frmAbsolut-&gt;setVisible(false);\n\n    //We create the connections to methods\n    connect(this-&gt;ui.myradiobutton1, SIGNAL(toggled(bool)), this, SLOT(on_rdbMethod_change(this-&gt;ui.myradiobutton1-&gt;isChecked, 0)));\n\n}\n\nvoid Draw::on_rdbMethod_change(bool value, int option)\n{\n    //0: frmAbsolut\n    printf(\"%d \\n\", option);\n    if (value == true){\n        if (option == 0) {\n            this-&gt;ui.frmAbsolut-&gt;setVisible(true);\n        }\n    }\n}\n</code></pre>\n\n<p>Draw.h</p>\n\n<pre><code>#pragma once\n\n#include &lt;QtWidgets/QMainWindow&gt;\n#include \"ui_Draw.h\"\n\nclass Draw: public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    Draw(QWidget *parent = Q_NULLPTR);\n\nprivate:\n    Ui::DrawClass ui;\n\nprotected slots:\n    void on_rdbMethod_change(bool, int);\n\n};\n</code></pre>\n\n<p>If I run the program, I don't get any errors and if I check the connect(...) line, I see that is called but when I click that radiobutton, it doesn't call to my method. What is wrong with this?</p>\n"}, {"tags": ["c++", "string", "c++11", "visual-c++", "substring"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1489594109, "post_id": 42814877, "comment_id": 72742344, "body": "If that line was correct, then you wouldn&#39;t get an exception. Just check all the values before the exception is thrown. And please don&#39;t call those variables <code>iter</code>; they are not of type <code>std::string::iterator</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489595563, "post_id": 42814877, "comment_id": 72743388, "body": "<i>I&#39;m making an equation solver which solves a mathematical equation when it gets any input.</i> -- FYI, the way you&#39;re going about doing this isn&#39;t the way it should be done.  Lookup &quot;production rules&quot; and &quot;recursive descent parser&quot;.  <a href=\"http://stackoverflow.com/questions/42769104/unhandled-exception-at-in-consoleapplication1-exe-microsoft-c-exception-std\">Also, I see that all you did was to implement addition</a>, and your code ballooned into what you have now.  That&#39;s what happens when you don&#39;t write a formal parser for this -- code that becomes hard-to-maintain and use."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1489596042, "post_id": 42814877, "comment_id": 72743720, "body": "And in any event, your program probably gives the wrong answer even if you didn&#39;t get the exception.  The division is done first, as per the order of operations, not the addition.  How do you control that?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1489603998, "post_id": 42814877, "comment_id": 72748440, "body": "When you get the exception in Visual Studio, press <code>Ctrl+Alt+C</code> to open the callstack and examine the arguments for <code>string.substr()</code>. That should tell you which index variable is out of range."}, {"owner": {"reputation": 50, "user_id": 7704061, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749075055407466/picture?type=large", "display_name": "Riasat Mahbub", "link": "https://stackoverflow.com/users/7704061/riasat-mahbub"}, "edited": false, "score": 0, "creation_date": 1489641123, "post_id": 42814877, "comment_id": 72762382, "body": "Thnx. I really needed that tip.Im new to visual studio and programming in general. So this helps a lot"}], "owner": {"reputation": 50, "user_id": 7704061, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749075055407466/picture?type=large", "display_name": "Riasat Mahbub", "link": "https://stackoverflow.com/users/7704061/riasat-mahbub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489593606, "creation_date": 1489593606, "question_id": 42814877, "link": "https://stackoverflow.com/questions/42814877/function-stringsubstr-shows-exception-thrown-at-x-microsoft-c-exception-st", "title": "function string::substr shows Exception thrown at X. Microsoft C++ exception: std::out_of_range at memory location X. during Debugging", "body": "<p>Im making an equation solver which solves a mathematical equation when it gets any input.\nThe code  for division is:</p>\n\n<pre><code>void Calculation_div(string &amp;str)\n{\n    std::size_t iter_a;\n    std::size_t iter_r, iter_l;\n    while(str.find('/') != string::npos) {\n        iter_a = str.find('/');\n        if (str.find('/', iter_a + 1) != string::npos || str.find('*',       iter_a + 1) != string::npos|| \n        str.find('-', iter_a + 1) != string::npos|| str.find('+', iter_a + 1) != string::npos) {\n        iter_r = str.find('/', iter_a + 1);\n        if (str.find('*', iter_a + 1) &lt; iter_r) {\n            iter_r = str.find('*', iter_a + 1);\n        }\n        if (str.find('-', iter_a + 1) &lt; iter_r){\n            iter_r = str.find('-', iter_a + 1);\n        }\n        if (str.find('+', iter_a + 1) &lt; iter_r) {\n            iter_r = str.find('+', iter_a + 1);\n        }\n    }\n    else {\n        iter_r = str.length();\n    }\n    if (str.rfind('/', iter_a - 1) != string::npos || str.rfind('*', iter_a - 1) != string::npos ||\n        str.rfind('-', iter_a - 1) != string::npos || str.rfind('+', iter_a - 1) != string::npos) {\n        iter_l = str.rfind('/', iter_a - 1);\n        if (str.rfind('*', iter_a - 1) &gt; iter_l &amp;&amp; iter_l!=string::npos) {\n            iter_l = str.rfind('*', iter_a - 1);\n        }\n        if (str.rfind('-', iter_a - 1) &gt; iter_r &amp;&amp; iter_l != string::npos) {\n            iter_l = str.rfind('-', iter_a - 1);\n        }\n        if (str.rfind('+', iter_a - 1) &gt; iter_r &amp;&amp; iter_l!=string::npos) {\n            iter_l = str.rfind('+', iter_a - 1);\n        }\n    }\n    else {\n        iter_l = 0;\n    }\n    string bi_l = str.substr(iter_l, (iter_a - iter_l+1));\n    string bi_r = str.substr(iter_a+1, (iter_r - iter_a+1));\n    float do_l = stod(bi_l);\n    double do_r = stod(bi_r);\n    double res_i = do_l / do_r;\n        string res_s = std::to_string(res_i);\n        str.replace(iter_l, iter_r - iter_l, res_s, 0, iter_r - iter_l -2);\n        cout &lt;&lt; str &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>the code for addition:</p>\n\n<pre><code>void Calculation_plus(string &amp;str)\n{\nstd::size_t iter_a;\nstd::size_t iter_r, iter_l;\nwhile (str.find('+') != string::npos) {\n    iter_a = str.find('+');\n    if (str.find('+', iter_a + 1) != string::npos) {\n        iter_r = str.find('+', iter_a + 1);\n    }\n    else {\n        iter_r = str.length();\n    }\n    if (str.rfind('+', iter_a - 1) != string::npos) {\n        iter_l = str.rfind('+', iter_a - 1);\n    }\n    else {\n        iter_l = 0;\n    }\n    string bi_l = str.substr(iter_l, (iter_a - iter_l));\n    string bi_r = str.substr(iter_a + 1, (iter_r - iter_a + 1));\n    double do_l = stod(bi_l);\n    double do_r = stod(bi_r);\n    double res_i = do_l + do_r;\n    string res_s = std::to_string(res_i);\n    str.replace(iter_l, iter_r-iter_l,res_s,0, iter_r - iter_l-2);\n    cout &lt;&lt; str&lt;&lt;\"\\n\";\n    }\n}\n</code></pre>\n\n<p>But when I put the value of str as 22+22/22 it returns the following error</p>\n\n<blockquote>\n  <p>Exception thrown at 0x75F8DB18 in ConsoleApplication1.exe: Microsoft C++ exception: std::out_of_range at memory location 0x0133EF90.\n  It seems the problem lies in the line</p>\n</blockquote>\n\n<pre><code>string bi_l = str.substr(iter_l, (iter_a - iter_l+1));\n</code></pre>\n\n<p>of both calculation_div and calculation_plus.\nBut even then i cant find out the problem as everything seems correct to me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1489593654, "post_id": 42814721, "comment_id": 72742009, "body": "Changing the value of <code>k</code> only changes how many times you preform <code>uu = a*u1 + b*u0;</code>. Regardless of the number of times you do it, the value of <code>a</code>, <code>u1</code>, <code>b</code> and <code>u0</code> are the same, so the result is always the same."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1489593666, "post_id": 42814721, "comment_id": 72742020, "body": "Did you try to <i>step through</i> your code, using the debugger?"}, {"owner": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "edited": false, "score": 0, "creation_date": 1489594473, "post_id": 42814721, "comment_id": 72742590, "body": "Thank you for your answer, i noticed that now. Therefore my question is, how can i make the values f u0 and u1 change taking into consideration their previous ones. For example, i did the math on my notebook and if U0 is 3 and U1 is 5, U3 should be 38. If i compile the program now , the output is 38 but how do i make it to proceed further ?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1489596888, "post_id": 42814721, "comment_id": 72744251, "body": "@user7716102 There&#39;s a hint to a way in the name: &quot;recurrence&quot; and &quot;recursion&quot; have the same root."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "edited": false, "score": 0, "creation_date": 1489594749, "post_id": 42815167, "comment_id": 72742779, "body": "Yes, brilliant. Thank you very much for your help."}, {"owner": {"reputation": 2325, "user_id": 1952879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c0d1e907a5506a461719a612a5ae21?s=128&d=identicon&r=PG", "display_name": "hmatar", "link": "https://stackoverflow.com/users/1952879/hmatar"}, "reply_to_user": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "edited": false, "score": 0, "creation_date": 1489596699, "post_id": 42815167, "comment_id": 72744139, "body": "@user7716102 it would be appreciating if you accept the answer."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1489595574, "last_edit_date": 1489595574, "creation_date": 1489594348, "answer_id": 42815167, "question_id": 42814721, "link": "https://stackoverflow.com/questions/42814721/for-loop-calculates-the-same-value-each-time/42815167#42815167", "title": "for loop calculates the same value each time", "body": "<p>You evaluate the same values in expression in the loop, so result would not change regardless how many times you execute it. Looks like this is what you need:</p>\n\n<pre><code>int recurrence(int a, int b, int k, int u0, int u1)\n{\n    for (int i = 0; i &lt; k; i++) {\n        auto tmp = a*u1 + b*u0;\n        u0 = u1;\n        u1 = tmp;\n    }\n    return u1;\n}\n</code></pre>\n\n<p>or simpler:</p>\n\n<pre><code>int recurrence(int a, int b, int k, int u0, int u1)\n{\n    for (int i = 0; i &lt; k; i++) {\n        u0 = a*u1 + b*u0;\n        std::swap( u1, u0 );\n    }\n    return u1;\n}\n</code></pre>\n\n<p>second function needs to be changed the same way.</p>\n\n<p>PS you asked how could you maintain state of variables for further invocations, best way is to have <code>class</code> that maintains it:</p>\n\n<pre><code>class Recurrence {\n     int m_a;\n     int m_b;\n     int m_u0;\n     int m_u1;\n\n public:\n     Recurrence( int a, int b, int u0, int u1 ) :\n         m_a( a ),\n         m_b( b ),\n         m_u0( u0 ),\n         m_u1( u1 )\n     {\n     }\n\n     int value() const { return m_u1; }\n\n     void interate()\n     {\n          m_u0 = m_a * m_u1 + m_b * m_u0;\n          std::swap( m_u0, m_u1 );\n     }\n\n     void interateN( int n )\n     {\n          for( int i = 0; i &lt; n; ++i ) iterate();\n     }\n};\n\nint main()\n{\n     Recurence recurence( 7, 1, 3, 5 );\n     recurence.iterateN( 5 );\n     int h = recurence.value();\n     recurence.iterateN( 5 ); // continue\n     ...\n}\n</code></pre>\n\n<p>In reality you may want to have that class more generic - for example use different number of arguments, different types, store them in array etc. This code just to show you the idea.</p>\n"}], "owner": {"reputation": 53, "user_id": 7716102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e8625d127e351f079ca95f6b0eb8b5?s=128&d=identicon&r=PG&f=1", "display_name": "user7716102", "link": "https://stackoverflow.com/users/7716102/user7716102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1489608701, "creation_date": 1489593167, "last_edit_date": 1489608701, "question_id": 42814721, "link": "https://stackoverflow.com/questions/42814721/for-loop-calculates-the-same-value-each-time", "title": "for loop calculates the same value each time", "body": "<p>I am trying to implement a recurrence relation that will return me the kth term. But I am receiving the same output when I change the k value. Here is my code:</p>\n\n<pre><code>int recurrence(int a, int b, int k, int u0, int u1) {\n  int u = u0;\n  int uu = u1;\n\n  for (int i = 0; i &lt; k; i++)\n    uu = a*u1 + b*u0;\n\n  return uu;\n}\n\nint recurrence2(int a1, int b1, int k1, int u4, int u5) {\n  int u = u4;\n  int uu = u5;\n\n  for (int i = 0; i &lt; k1; i++)\n    uu = a1*u5 + b1*u4;\n\n\n  return uu;\n\n}\n\nint main() {\n  int h;\n  h = recurrence(7, 1, 5, 3, 5 );\n  int g;\n  g = recurrence2(17, 11, 2, 1, 2);\n\n  cout &lt;&lt; \"The result is:  \" &lt;&lt; h;\n  cout &lt;&lt; \"The result is : \" &lt;&lt; g;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "memory-leaks"], "comments": [{"owner": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "edited": false, "score": 0, "creation_date": 1489593936, "post_id": 42814671, "comment_id": 72742209, "body": "Show us the codez.  <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "edited": false, "score": 1, "creation_date": 1489594801, "post_id": 42814671, "comment_id": 72742817, "body": "Probably you have a bad case of memory corruption... Try executing it at the start of the program and in various moments of the program. Clearly you&#39;ll see many leaks (because there are many objects that are still referenced), but at least you&#39;ll be able to pinpoint the corruption"}, {"owner": {"reputation": 289, "user_id": 1541494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I3wYb.png?s=128&g=1", "display_name": "BartmanDilaw", "link": "https://stackoverflow.com/users/1541494/bartmandilaw"}, "edited": false, "score": 0, "creation_date": 1489596893, "post_id": 42814671, "comment_id": 72744254, "body": "Corrected as you suggest. OK. I go through out the dump...  But here is the code :  \tchar * memLeak = (char *) malloc(64); \tmemset(memLeak,0,64); \t_CrtDumpMemoryLeaks();  I get no memory leaks !  Normal ?"}], "answers": [{"tags": [], "owner": {"reputation": 289, "user_id": 1541494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I3wYb.png?s=128&g=1", "display_name": "BartmanDilaw", "link": "https://stackoverflow.com/users/1541494/bartmandilaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1489597195, "creation_date": 1489597195, "answer_id": 42816187, "question_id": 42814671, "link": "https://stackoverflow.com/questions/42814671/c-memory-leak-with-managed-c-using-crt-library-crtdumpmemoryleaks-issue/42816187#42816187", "title": "C++ memory leak with managed C++ using CRT library - _CrtDumpMemoryLeaks() issues", "body": "<p>Here is a part of the first lines </p>\n\n<pre><code>char * memLeak = (char *) malloc(64);\nmemset(memLeak,0,64);\n_CrtDumpMemoryLeaks();\n</code></pre>\n\n<p>With xanatos help, _CrtDumpMemoryLeaks() finally runs...</p>\n\n<p>But returns nothing !\nI attend to get the memLeak variable shown as memory Leak.</p>\n"}], "owner": {"reputation": 289, "user_id": 1541494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I3wYb.png?s=128&g=1", "display_name": "BartmanDilaw", "link": "https://stackoverflow.com/users/1541494/bartmandilaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1489597195, "creation_date": 1489593071, "question_id": 42814671, "link": "https://stackoverflow.com/questions/42814671/c-memory-leak-with-managed-c-using-crt-library-crtdumpmemoryleaks-issue", "title": "C++ memory leak with managed C++ using CRT library - _CrtDumpMemoryLeaks() issues", "body": "<p>I try to get program memory leaks using the MSDN CRT Library, but get an anormal issue while launching _CrtDumpMemoryLeaks() because it never ends the execution of the thread.</p>\n\n<p>Structure :\nnUnit Test that intiates a DLL wrapped class that just calls _CrtDumpMemoryLeaks()... The debugger runs for a while (process activity) then hangs but doesn't stop - no more activity.</p>\n\n<p>The new, malloc, calloc, realloc and free functions have been overwritten as saied in MSDN documentation.</p>\n\n<p>What am I missing ?</p>\n\n<p>My context :\nVisual Studio 2012 Update 5, Managed C++ (C++/CLI), Unit Test C# (nUnit)</p>\n"}, {"tags": ["android", "c++", "arm", "openmp"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489592712, "post_id": 42814413, "comment_id": 72741205, "body": "Is that C or C++? Don&#39;t spam tags."}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489594594, "post_id": 42814413, "comment_id": 72742671, "body": "Both. The library is C++, and it executes C++ style and C style code on the phone. Will it change the answer anyway ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1489595370, "post_id": 42814413, "comment_id": 72743246, "body": "Well, does it matter that both are different languages with different behaviour for even identical source code? Of course it does. Please get the tags right on questions and don&#39;t spam tags."}], "owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489671991, "creation_date": 1489592460, "last_edit_date": 1489671991, "question_id": 42814413, "link": "https://stackoverflow.com/questions/42814413/openmp-handling-heterogeneous-platform", "title": "OpenMP handling heterogeneous platform", "body": "<p>I am working on optimizing a library using OpenMP. I benchmark the library on two different platforms:</p>\n\n<ul>\n<li>My working x86 computer that has 4 Intel Core i5-6500 CPU @3.20GHz</li>\n<li>A rooted Honor 5c phone that has 4 ARM Cortex-A53 @2.0GHz and 4 ARM Cortex-A53 @1.7GHz</li>\n</ul>\n\n<p>In order to execute code on the phone, I just cross compile everything on my workstation and control the benchmarks with scripts that use adb. However, I had some issues getting everything optimized as I wanted i.e. close to an 8 theoretical speedup on the phone. The explanation would be the CPU usage when performing a simple Matrix multiplication operation. I have this basic code that helps me measuring the usage :</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n// For custom types\n#include \"smu/core.h\"\n\nint main(void) {\n  long double cpua[4], cpub[4], loadavg;\n  FILE *fp;\n  char dump[50];\n\n  // Setting matrices\n  int32 nr = 500;\n  int32 nc = 500;\n  float32 *a = (float32*)malloc(nr * nc * sizeof(float32));\n  float32 *b = (float32*)malloc(nr * nc * sizeof(float32));\n  float32 *c = (float32*)malloc(nr * nc * sizeof(float32));\n  for (int32 i = 0; i &lt; nr; ++i) {\n    float32 *adata = a + i * nc;\n    float32 *bdata = b + i * nc;\n    int32 cache_nc = nc;\n    for (int32 j = 0; j &lt; cache_nc; ++j) {\n      adata[j] = (float32)rand() / (float32)RAND_MAX * 100.;\n      bdata[j] = (float32)rand() / (float32)RAND_MAX * 100. - 50.;\n    }\n  }\n\n  for(;;) {\n    fp = fopen(\"/proc/stat\", \"r\");\n    fscanf(fp,\"%*s %Lf %Lf %Lf %Lf\", &amp;cpua[0], &amp;cpua[1], &amp;cpua[2], &amp;cpua[3]);\n    fclose(fp);\n    for (int32 i = 0; i &lt; nr ; ++i) {\n      int32 cache_nc = nc;\n      float32 *adata = a + i * cache_nc;\n      float32 *cdata = c + i * cache_nc;\n      for (int32 j = 0; j &lt; cache_nc; ++j) {\n        cdata[j] = 0.;\n        for (int32 k = 0; k &lt; cache_nc; ++k)\n          cdata[j] += adata[k] * b[k * cache_nc + j];\n      }\n    }\n    fp = fopen(\"/proc/stat\", \"r\");\n    fscanf(fp,\"%*s %Lf %Lf %Lf %Lf\", &amp;cpub[0], &amp;cpub[1], &amp;cpub[2], &amp;cpub[3]);\n    fclose(fp);\n    loadavg = ((cpub[0] + cpub[1] + cpub[2]) - (cpua[0] + cpua[1] + cpua[2])) /\n        ((cpub[0] + cpub[1] + cpub[2] + cpub[3]) - (cpua[0] + cpua[1] + cpua[2] + cpua[3]));\n    printf(\"CPU usage             : %Lf\\n\", loadavg);\n\n    fp = fopen(\"/proc/stat\", \"r\");\n    fscanf(fp,\"%*s %Lf %Lf %Lf %Lf\", &amp;cpua[0], &amp;cpua[1], &amp;cpua[2], &amp;cpua[3]);\n    fclose(fp);\n  #pragma omp parallel for num_threads(8) schedule(dynamic, 1)\n    for (int32 i = 0; i &lt; nr ; ++i) {\n      int32 cache_nc = nc;\n      float32 *adata = a + i * cache_nc;\n      float32 *cdata = c + i * cache_nc;\n      for (int32 j = 0; j &lt; cache_nc; ++j) {\n        cdata[j] = 0.;\n        for (int32 k = 0; k &lt; cache_nc; ++k)\n          cdata[j] += adata[k] * b[k * cache_nc + j];\n      }\n    }\n    fp = fopen(\"/proc/stat\", \"r\");\n    fscanf(fp,\"%*s %Lf %Lf %Lf %Lf\", &amp;cpub[0], &amp;cpub[1], &amp;cpub[2], &amp;cpub[3]);\n    fclose(fp);\n    loadavg = ((cpub[0] + cpub[1] + cpub[2]) - (cpua[0] + cpua[1] + cpua[2])) /\n        ((cpub[0] + cpub[1] + cpub[2] + cpub[3]) - (cpua[0] + cpua[1] + cpua[2] + cpua[3]));\n    printf(\"CPU usage with OpenMP : %Lf\\n\", loadavg);\n  }\n\n  free(a);\n  free(b);\n  free(c);\n\n  return(0);\n}\n</code></pre>\n\n<p>On my x86 workstation, the results are as expected:</p>\n\n<pre><code>CPU usage             : 0.267606\nCPU usage with OpenMP : 1.000000\nCPU usage             : 0.271429\nCPU usage with OpenMP : 1.000000\n</code></pre>\n\n<p>While on the phone it seems, it cannot get all the cores at once:</p>\n\n<pre><code>CPU usage             : 0.143388\nCPU usage with OpenMP : 0.495968\nCPU usage             : 0.129955\nCPU usage with OpenMP : 0.496626\n</code></pre>\n\n<p>That is strange as the No OpenMP usage let me think as only 1 on 8 cores is used. I checked the OpenMP platform info and he can see correctly 8 cores on the Honor 5c. </p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>How OpenMP handles that kind of asynchronous platforms ?</li>\n<li>Is there any solution in order to get close to 100% core usage anytime, anywhere ?</li>\n<li>How OpenMP handles virtualized cores (not directly related to this topic but it still interests me to have an answer to that) ?</li>\n</ul>\n\n<p>EDIT:</p>\n\n<p>I've tried to see directly in the OS how he handle the cores by executing this simple script:</p>\n\n<pre><code>#!/system/bin/sh\ni=0\nwhile : ; do\n  i=$(($i + 1))\ndone\n</code></pre>\n\n<p>And even having 8 threads running it would result in maximum 50% of CPU usage. </p>\n\n<p>I read this article explaining that <a href=\"http://www.osnews.com/story/27416/The_second_operating_system_hiding_in_every_mobile_phone\" rel=\"nofollow noreferrer\">there could be several OS in a phone</a> making only one of them usable. In my case it would be 1 per group of 4 cores. But then I don't understand why OpenMP would see 8 cores...</p>\n"}, {"tags": ["c++", "qt", "properties", "macros"], "comments": [{"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489592874, "post_id": 42814346, "comment_id": 72741342, "body": "You can do it using QMetaObject capabilities. Take a look <a href=\"http://stackoverflow.com/a/34362205/7705264\">here</a>"}, {"owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489595521, "post_id": 42814346, "comment_id": 72743343, "body": "thank you ;) @em2er"}, {"owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1489595602, "post_id": 42814346, "comment_id": 72743422, "body": "could you please formulate an answer and give some examples so the next person can easily find it without too much browsing? @em2er"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1489600654, "post_id": 42814346, "comment_id": 72746513, "body": "You will still have to create a list for the model anyway, the difference is it will happen automatically rather than you having to type it manually."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "edited": false, "score": 0, "creation_date": 1489602381, "post_id": 42816078, "comment_id": 72747486, "body": "propertyOffset() returns what? I can&#39;t find it in the doc"}, {"owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "edited": false, "score": 0, "creation_date": 1489761737, "post_id": 42816078, "comment_id": 72826886, "body": "I put `metaObject()-&gt;property(metaObject()-&gt;propertyCount()-1).nam&zwnj;&#8203;e();&#180; into the constructor of node, but I get an compiler-error"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "reply_to_user": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "edited": false, "score": 0, "creation_date": 1489765237, "post_id": 42816078, "comment_id": 72829382, "body": "@ThefrenchSpeedruns provide full example please. Maybe to open new question is more appropriate for that. <code>CNode::CNode() {       qDebug() &lt;&lt; metaObject()-&gt;property(metaObject()-&gt;propertyCount() - 1).name(); }</code> works for me"}, {"owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "edited": false, "score": 0, "creation_date": 1489765902, "post_id": 42816078, "comment_id": 72829873, "body": "Ok, I just forgot to include QMetaProperty and QMetaObject"}], "tags": [], "owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "is_accepted": true, "score": 3, "last_activity_date": 1489604016, "last_edit_date": 1489604016, "creation_date": 1489596870, "answer_id": 42816078, "question_id": 42814346, "link": "https://stackoverflow.com/questions/42814346/qt-listing-properties-of-class/42816078#42816078", "title": "Qt listing properties of Class", "body": "<p>You need to use the <a href=\"http://doc.qt.io/qt-5/qmetaobject.html\" rel=\"nofollow noreferrer\">QMetaObject</a> instance of your class, that holds information about properties, signals, slots and other meta data.\nSuppose we have</p>\n\n<pre><code>class CNode: public QObject\n{\n      Q_OBJECT\n\n      Q_PROPERTY(int myInt_ READ myInt WRITE setMyInt)\n      Q_PROPERTY(QString myStr_ READ myStr WRITE setMyStr)\n\npublic:\n      int myInt() const {return myInt_;}\n      QString myStr() const {return myStr_;}\n      void setMyInt(int value) {myInt_ = value;}\n      void setMyStr(const QString&amp; value) {myStr_ = value;}\n\nprivate:\n      int myInt_;\n      QString myStr_;\n};\n</code></pre>\n\n<p>So now we can get all properties with names and values:</p>\n\n<pre><code>CNode* node = new CNode;\nnode-&gt;setMyInt(100);\nnode-&gt;setMyStr(\"Its my string\");\nfor(int i = node-&gt;metaObject()-&gt;propertyOffset(); i &lt; node-&gt;metaObject()-&gt;propertyCount(); ++i)\n{\n      qDebug() &lt;&lt; node-&gt;metaObject()-&gt;property(i).name() &lt;&lt; node-&gt;metaObject()-&gt;property(i).read(node);\n}\n</code></pre>\n\n<p><strong>Edit</strong>: <code>propertyOffset</code> returns integer index at which properties of CNode starts (supposed that superclass may have its own properties). If you wish to get properties of superclasses too, you can start <code>i</code> with 0. You can find more information at <a href=\"http://doc.qt.io/qt-5.8/qmetaobject.html#propertyOffset\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5.8/qmetaobject.html#propertyOffset</a>.</p>\n"}], "owner": {"reputation": 93, "user_id": 7549492, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac3ba97ca457d4dc18dd88212ba52386?s=128&d=identicon&r=PG&f=1", "display_name": "ThefrenchSpeedruns ", "link": "https://stackoverflow.com/users/7549492/thefrenchspeedruns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "accepted_answer_id": 42816078, "answer_count": 1, "score": 2, "last_activity_date": 1489604016, "creation_date": 1489592291, "question_id": 42814346, "link": "https://stackoverflow.com/questions/42814346/qt-listing-properties-of-class", "title": "Qt listing properties of Class", "body": "<p>I have a class (CNode)</p>\n\n<p>CNode has this property</p>\n\n<pre><code>Q_OBJECT\nQ_PROPERTY(QString name READ getName WRITE setName/* NOTIFY nameChanged*/)\n</code></pre>\n\n<p>Everything compiles fine... </p>\n\n<p><code>Question is</code>: How can I list all of the properties? Sure, I could create an array of property-names but that doesn't seem very space-efficient as the program has to run on 50mb of Ram.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 1, "creation_date": 1489591890, "post_id": 42814132, "comment_id": 72740534, "body": "It&#39;s not the compiler ignoring the line, but the program. The title is thus misleading."}, {"owner": {"reputation": 23, "user_id": 7534902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee71f01943173aa52f087329bb091d4?s=128&d=identicon&r=PG&f=1", "display_name": "C.H.", "link": "https://stackoverflow.com/users/7534902/c-h"}, "reply_to_user": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 0, "creation_date": 1489592019, "post_id": 42814132, "comment_id": 72740637, "body": "@riodoro1 Noted and fixed :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489592052, "post_id": 42814132, "comment_id": 72740663, "body": "Do your names have spaces in them?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1489592061, "post_id": 42814132, "comment_id": 72740675, "body": "It&#39;s not skipping the line. Try putting <code>cout &lt;&lt; s &lt;&lt; &#39;\\n&#39;;</code> after it to see what it read."}, {"owner": {"reputation": 23, "user_id": 7534902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee71f01943173aa52f087329bb091d4?s=128&d=identicon&r=PG&f=1", "display_name": "C.H.", "link": "https://stackoverflow.com/users/7534902/c-h"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489592135, "post_id": 42814132, "comment_id": 72740738, "body": "@Barmar It simply skips it and it won&#39;t let me enter any input when it really should.."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489592199, "post_id": 42814132, "comment_id": 72740784, "body": "I don&#39;t think so. I think it&#39;s reading the input that it got an error from when you tried to do <code>cin &gt;&gt; score;</code> and entered something that wasn&#39;t a number."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489592388, "post_id": 42814132, "comment_id": 72740927, "body": "Most likely this is a dupe of <a href=\"http://stackoverflow.com/questions/5838711/stdcin-in-input-with-spaces\">this</a>(read string with spaces) and <a href=\"http://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">this</a>(mixing getline and cin)"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489592434, "post_id": 42814368, "comment_id": 72740973, "body": "<code>operator &gt;&gt;</code> ingnores white space which <code>\\n</code> is considered to be."}, {"owner": {"reputation": 81, "user_id": 7710724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a94acbdbc0838ad1d4d14cfd68252f?s=128&d=identicon&r=PG&f=1", "display_name": "DatCorno", "link": "https://stackoverflow.com/users/7710724/datcorno"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489592618, "post_id": 42814368, "comment_id": 72741113, "body": "Thanks, I did not know that. Why is the code working with the snippet I provided then?"}, {"owner": {"reputation": 23, "user_id": 7534902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee71f01943173aa52f087329bb091d4?s=128&d=identicon&r=PG&f=1", "display_name": "C.H.", "link": "https://stackoverflow.com/users/7534902/c-h"}, "edited": false, "score": 0, "creation_date": 1489592676, "post_id": 42814368, "comment_id": 72741171, "body": "Well now after adding these lines it simply won&#39;t execute anything when I tell it to. It simply does &quot;\\n&quot; instead of executing the code."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489592738, "post_id": 42814368, "comment_id": 72741233, "body": "Aren&#39;t the default arguments to <code>cin.ignore()</code> the same as the ones you gaver?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489592761, "post_id": 42814368, "comment_id": 72741253, "body": "The most likely problem is one of the names has a space in it.  That will cause <code>cin &gt;&gt; score</code> to fail since there will still be text in the buffer.  That in turn means ever other call to <code>cin</code> will fail untill the buffer and error flags are cleared."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489592818, "post_id": 42814368, "comment_id": 72741300, "body": "@Barmar <code>ignore</code> is <code>ignore( std::streamsize count = 1, int_type delim = Traits::eof() )</code>"}, {"owner": {"reputation": 81, "user_id": 7710724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a94acbdbc0838ad1d4d14cfd68252f?s=128&d=identicon&r=PG&f=1", "display_name": "DatCorno", "link": "https://stackoverflow.com/users/7710724/datcorno"}, "reply_to_user": {"reputation": 23, "user_id": 7534902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee71f01943173aa52f087329bb091d4?s=128&d=identicon&r=PG&f=1", "display_name": "C.H.", "link": "https://stackoverflow.com/users/7534902/c-h"}, "edited": false, "score": 0, "creation_date": 1489592993, "post_id": 42814368, "comment_id": 72741449, "body": "@ChenHaviv the code works fine on my end. Did you had the <code>cin.clear()</code> and <code>cin.ignore()</code> directly after the <code>cin &gt;&gt; name</code>?"}], "tags": [], "owner": {"reputation": 81, "user_id": 7710724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a94acbdbc0838ad1d4d14cfd68252f?s=128&d=identicon&r=PG&f=1", "display_name": "DatCorno", "link": "https://stackoverflow.com/users/7710724/datcorno"}, "is_accepted": false, "score": -1, "last_activity_date": 1489592353, "creation_date": 1489592353, "answer_id": 42814368, "question_id": 42814132, "link": "https://stackoverflow.com/questions/42814132/the-program-seems-to-ignore-the-second-input-line/42814368#42814368", "title": "The program seems to ignore the second input line", "body": "<p>What happens here is, when you press enter the character '\\n' is still in the stream. So you need to flush cin to be able to continue again. To do so use </p>\n\n<pre><code>std::cin.clear();\nstd::cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>after every call to cin. The <code>numeric_limits&lt;streamsize&gt;::max</code> can be use with the header <code>#include &lt;limits&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1489592701, "creation_date": 1489592701, "answer_id": 42814521, "question_id": 42814132, "link": "https://stackoverflow.com/questions/42814132/the-program-seems-to-ignore-the-second-input-line/42814521#42814521", "title": "The program seems to ignore the second input line", "body": "<p>I think the problem is that when you use <code>cin &gt;&gt; score</code> and enter something that isn't an integer, the error flag on the <code>cin</code> stream is set, and future operations fail. You need to clear this error with <code>cin.clear()</code> before you read more input.</p>\n\n<p>Your loop for the student names is also wrong. You never check for the \"no more\" name. You check for \"|\" as the name, but not until you finish processing the input. As the instructions say, the purpose of using <code>no more</code> as the input is so that <code>cin &gt;&gt; score</code> will fail because <code>more</code> is not a number.</p>\n\n<p>Instead, use <code>while (cin &gt;&gt; name &gt;&gt; score)</code> to read both the name and score at once. When you enter an invalid score, this will fail and the loop ends.</p>\n\n<pre><code>using namespace std;\n\nint main() {\n    vector &lt;string&gt; names;\n    string name;\n    vector &lt;int&gt; scores;\n    int score;\n    cout &lt;&lt; \"Please write a player's name and the player's score: \\n\";\n    while (cin &gt;&gt; name &gt;&gt; score) {\n        names.push_back(name);\n        scores.push_back(score);\n        cin.ignore();\n    }       \n    cin.clear(); // Clear error flag from above\n    for (size_t j = 0; j &lt; scores.size(); j++) {\n        for (size_t p = 0; p &lt; scores.size(); p++) {\n            if (names[j] == names[p] &amp;&amp; j != p) {\n                cout &lt;&lt; \"Error! You have reiterated the name: \" &lt;&lt; names[j] &lt;&lt; \"\\n\";\n                system(\"pause\");\n                return 1;\n            }\n        }\n    }\n    cout &lt;&lt; \"Please insert a name to see it's score:\\n\";\n    cin &gt;&gt; s;\n    for (size_t d = 0; d &lt; scores.size(); d++) {\n        if (s == names[d]) { \n            cout &lt;&lt; names[d] &lt;&lt; \"'s score is: \" &lt;&lt; scores[d] &lt;&lt; \"\\n\";\n        }\n    }\n    system(\"pause\");\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7534902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee71f01943173aa52f087329bb091d4?s=128&d=identicon&r=PG&f=1", "display_name": "C.H.", "link": "https://stackoverflow.com/users/7534902/c-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489593228, "creation_date": 1489591764, "last_edit_date": 1489593228, "question_id": 42814132, "link": "https://stackoverflow.com/questions/42814132/the-program-seems-to-ignore-the-second-input-line", "title": "The program seems to ignore the second input line", "body": "<p>So I have been studying programming from the book PPP by Bjarne Stroustrup and there is the following assignment:</p>\n\n<ol start=\"19\">\n<li>Write a program where you first enter a set of name\u00b7and\u00b7value pairs,\nsuch as Joe 17 and Barbara 22. For each pair, add the name to a vector\ncalled names and the number to a vector called scores (in corresponding\npositions, so that if names[7]==\"Joe\" then scores[7]==18). Terminate\ninput by the line No more (\"more\" will make the attempt to read another\ninteger fail ). Check that each name is unique and terminate with an error\nmessage if a name is entered twice. Write out all the (name,score) pairs,\none per line.</li>\n<li>Modify the program from exercise 19 so that when you enter a name,\nthe program will output the corresponding score or \"name not found\".</li>\n<li><p>Modify the program from exercise 19 so that when you enter an integer,\nthe program will Output all the names with that score or \"score not found\".\nSo this is the code I wrote:</p>\n\n<pre><code>using namespace std;\n\nint main() {\n    vector &lt;string&gt; names;\n    string name;\n    vector &lt;int&gt; scores;\n    int score;\n    string finish = \"no more\";\n    cout &lt;&lt; \"Please write a player's name and the player's score: \\n\";\n    while (name != \"|\") {\n        cin &gt;&gt; name;\n        cin &gt;&gt; score;\n        names.push_back(name);\n        scores.push_back(score);\n        cin.ignore();\n    }       \n    for (size_t j = 0; j &lt; scores.size(); j++) {\n    for (size_t p = 0; p &lt; scores.size(); p++) {\n        if (names[j] == names[p] &amp;&amp; j != p) {\n            cout &lt;&lt; \"Error! You have reiterated the name: \" &lt;&lt; names[j] &lt;&lt; \"\\n\";\n            system(\"pause\");\n            return 1;\n            }\n        }\n    }\n    cout &lt;&lt; \"Please insert a name to see it's score:\\n\";\n    string s = \" \";\n    cin &gt;&gt; s;\n        for (size_t d = 0; d &lt; scores.size(); d++) {\n            if (s == names[d]) { \n                cout &lt;&lt; names[d] &lt;&lt; \"'s score is: \" &lt;&lt; scores[d] &lt;&lt; \"\\n\";\n            }\n    }\n    system(\"pause\");\n}\n</code></pre></li>\n</ol>\n\n<p>Now my problem is quite simple I believe. In the second <strong>cin (cin >> s)</strong> the compiler simply seems to skip this line and terminates the program instead of letting me write an input. I read online that it is because that you can't use <strong>cin</strong> twice so when I added the line <code>cin.ignore()</code>, hoping that the problem will be solved, it did not help solve the problem. Any tips on how to fix this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1489592663, "post_id": 42814022, "comment_id": 72741153, "body": "I get the impression you are trying to do something like what is being discussed in <a href=\"http://stackoverflow.com/questions/8401777/simple-glob-in-c-on-unix-system\" title=\"simple glob in c on unix system\">stackoverflow.com/questions/8401777/&hellip;</a>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1489592721, "post_id": 42814022, "comment_id": 72741219, "body": "Please <a href=\"https://stackoverflow.com/posts/42814022/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">what you have tried so far</a>.  You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "owner": {"reputation": 7, "user_id": 5703637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7716fdb1cc816fcb16b2e4face9a424?s=128&d=identicon&r=PG&f=1", "display_name": "Laurentiu Bobora", "link": "https://stackoverflow.com/users/5703637/laurentiu-bobora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489591774, "creation_date": 1489591535, "last_edit_date": 1489591774, "question_id": 42814022, "link": "https://stackoverflow.com/questions/42814022/how-to-use-glob-in-c-if-i-have-an-parent-folder-and-on-child-folder", "title": "How to use glob in c++ if I have an parent folder and on child folder?", "body": "<p>how to use glob if I have a parent folder and an child folder and I want to read from each all files.</p>\n\n<p>From example if I have folder Results and into folder Results I have  <code>5 folders</code>, <code>Results1</code>, <code>Results2</code> ... <code>Results5</code> and in each folder I have more images how to read in order each pictures, from <code>Result1</code> after <code>Result2</code> ...</p>\n\n<p>How to make it using glob, or you have another suggestion, for example how to storage all name of file from folder Results ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11", "templates", "c++14", "template-templates"], "answers": [{"tags": [], "owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "is_accepted": true, "score": 9, "last_activity_date": 1489607735, "last_edit_date": 1489607735, "creation_date": 1489592003, "answer_id": 42814233, "question_id": 42814011, "link": "https://stackoverflow.com/questions/42814011/how-to-inspect-the-interface-of-a-template-template-class/42814233#42814233", "title": "How to inspect the interface of a template template class", "body": "<p>If I understand correctly what you're wanting, it's not possible with the level of generality that you showed in your example. You can't know whether the template has a type member type alias unless you know the arguments it's instantiated with, because it could differ based on the specialization. Example:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct my_trait\n{\n    using type = int;\n};\n\ntemplate &lt;&gt;\nstruct my_trait&lt;double&gt; {};\n</code></pre>\n\n<p>How would you expect <code>EnableIfHasTypeMember</code> to behave in this case? That's why you can't reason about the contents of a template until it is instantiated. </p>\n\n<p>It helps in situations like this to keep in mind that all instantiations of <code>my_trait&lt;T&gt;</code> for different types <code>T</code> <strong>are distinct types from one another</strong>. There is no actual relationship between the types; they originated from a common template, which admits the ability to write a generic implementation that is reused, but the concrete types once instantiated are wholly separate.</p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1489594377, "last_edit_date": 1489594377, "creation_date": 1489593856, "answer_id": 42814970, "question_id": 42814011, "link": "https://stackoverflow.com/questions/42814011/how-to-inspect-the-interface-of-a-template-template-class/42814970#42814970", "title": "How to inspect the interface of a template template class", "body": "<p>@Jason R is correct, you can't do this at the class template level.</p>\n\n<p>If you are wanting to detect class templates with <code>type</code> members, you have to provide arguments to get a specific type, to inspect the members of.</p>\n\n<p>Adapting <a href=\"http://en.cppreference.com/w/cpp/types/void_t\" rel=\"nofollow noreferrer\">an example</a></p>\n\n<pre><code>// primary template handles types that have no nested ::type member:\ntemplate&lt; class, class = std::void_t&lt;&gt; &gt;\nstruct has_type_member : std::false_type { };\n\n// specialization recognizes types that do have a nested ::type member:\ntemplate&lt; class T &gt;\nstruct has_type_member&lt;T, std::void_t&lt;typename T::type&gt;&gt; : std::true_type { };\n\n// specialization recognizes class templates that do have a nested ::type member:\ntemplate&lt; template&lt; class ... &gt; class T, class ... Args &gt;\nstruct has_type_member&lt;T&lt;Args...&gt;, std::void_t&lt;typename T&lt;Args...&gt;::type&gt;&gt; : std::true_type { };\n</code></pre>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 42814233, "answer_count": 2, "score": 4, "last_activity_date": 1489607735, "creation_date": 1489591503, "question_id": 42814011, "link": "https://stackoverflow.com/questions/42814011/how-to-inspect-the-interface-of-a-template-template-class", "title": "How to inspect the interface of a template template class", "body": "<p>I was trying to overload a template class with SFINAE based on whether a template template parameter had the type <code>type</code> defined in it (for example <code>std::remove_reference</code> has a <code>type</code> member type alias), but I cannot figure out a good way to go about doing that.  </p>\n\n<p>For example, I wanted to do </p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class Trait&gt;\nusing EnableIfHasTypeMember = std::void_t&lt;Trait::type&gt;;\n\ntemplate &lt;template &lt;typename...&gt; class Trait, typename OtherStuff,\n          EnableIfHasTypeMember&lt;Trait&gt;* = nullptr&gt;\nclass Something { ... }\n</code></pre>\n\n<p>But this gives me a compiler error.  Is there any way I can go about inspecting the interface of a template template parameter?</p>\n"}, {"tags": ["c++", "vector", "struct"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1489591524, "post_id": 42813950, "comment_id": 72740235, "body": "Why are you using a template if you&#39;re going to access specific member variables anyway?"}, {"owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1489591595, "post_id": 42813950, "comment_id": 72740303, "body": "i thought it was odd as well, but the instructions clearly state that a template was necessary."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1489591719, "post_id": 42813950, "comment_id": 72740394, "body": "If you are going to do it this way, you need another <code>template</code> clause: <code>template &lt;typename T&gt; void makeAccount(vector&lt;T&gt;&amp;v) { ... }</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1489591771, "post_id": 42813950, "comment_id": 72740439, "body": "It&#39;s not clear what you&#39;re asking here. Your code is a good start though - well done."}, {"owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489592093, "post_id": 42813950, "comment_id": 72740703, "body": "so essentially- in my main I declare a vector of type account called bankAccounts. Then i try to call the method makeAccount(bankAccounts), it throws an error saying undefined reference to makeAccount, im having trouble understanding what exactly im passing to the function. I think im passing a reference of the vector bankAccounts, but then im stuck as to what to do with that vector. How do i manipulate add another struct element to my vector and modify its member variables?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489592446, "post_id": 42814298, "comment_id": 72740982, "body": "yes thats what im asking, but say i want to add another bank account with a different name, accnum, etc... If i call this function again, then will it simply append to the end of &#39;v&#39; in this case."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489592490, "post_id": 42814298, "comment_id": 72741023, "body": "@zrendy Yes, it will. That&#39;s what push_back does. And since v is always located at the address at which accounts is located - that&#39;s the idea of a reference - everything is okay."}, {"owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489592556, "post_id": 42814298, "comment_id": 72741072, "body": "So how do i go about and access say, element at index 5 of this vector and print out the information i need?"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489592871, "post_id": 42814298, "comment_id": 72741338, "body": "@zrendy std::cout &lt;&lt; accounts[5].firstName &lt;&lt; std::endl; for example, although I&#39;d define a method print in Account for that and then go with accounts[5].print();. You might want to look at this example I just coded: <a href=\"http://cpp.sh/6hpya\" rel=\"nofollow noreferrer\">cpp.sh/6hpya</a>"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489593503, "post_id": 42814298, "comment_id": 72741891, "body": "@zrendy Another thing, coding it this way is somewhat unorthodox. I don&#39;t see why you use a reference instead of either making makeAccount to return an Account, like <code>Account makeAccount();</code> and then call it by <code>accounts.push_back(makeAccount());</code> or making it a method of Account, like <code>struct Account{... Account()}; Account::Account(){accountNumber=rand()%9000+1000; ...}</code> and then call it by <code>accounts.push_back(Account);</code> or if this should not be the standard constructor, going with something like  <code>struct Account{... static Account read_account()};</code>"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489593654, "post_id": 42814298, "comment_id": 72742010, "body": "@zrendy Or even creating a class Accounts that wraps such a vector and has makeAccount() as a method."}, {"owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "edited": false, "score": 0, "creation_date": 1489594724, "post_id": 42814298, "comment_id": 72742762, "body": "i found it confusing as well, but the instructions state most of this. I still dont understand why a template is necessary if the only struct we are working with is Account."}], "tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": true, "score": 0, "last_activity_date": 1489592180, "creation_date": 1489592180, "answer_id": 42814298, "question_id": 42813950, "link": "https://stackoverflow.com/questions/42813950/c-banking-project-vector-of-structs/42814298#42814298", "title": "C++ banking project, vector of structs.", "body": "<p>I assume that makeAccount is supposed to add to the referenced vector and you do not know how. If so, the answer is simple, simply go with <code>v.push_back(newacc);</code> at the end of your function (it's not a method, by the way, methods are within some class).</p>\n\n<p>v is a reference, which means that everything that happens to v inside makeAccount happens to the variable that you gave to makeAccount, just as you want. push_back is the usual method for vector to add an entry.</p>\n\n<p>Btw, makeAccount has no idea what T is, you have to put <code>template&lt;typename T&gt;</code> in front.</p>\n\n<p>In your main, it would look like this</p>\n\n<pre><code>int main(){\n\n    vector&lt;Account&gt; accounts;\n\n    while(some_condition){\n\n        makeAccount(accounts);\n        do_something_that_changes_condition;\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>As for the error you talk about in the comments, give us your main.</p>\n\n<p>That said, your question is somewhat hard to understand, if this is not what you wanted to know, I'll edit this.</p>\n"}], "owner": {"reputation": 23, "user_id": 7635879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed90007cd2412a420f65446e197ad9e?s=128&d=identicon&r=PG&f=1", "display_name": "zrendy", "link": "https://stackoverflow.com/users/7635879/zrendy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "accepted_answer_id": 42814298, "answer_count": 1, "score": 0, "last_activity_date": 1489592180, "creation_date": 1489591364, "question_id": 42813950, "link": "https://stackoverflow.com/questions/42813950/c-banking-project-vector-of-structs", "title": "C++ banking project, vector of structs.", "body": "<p>i am working on a project to create a database of bank accounts. So i have to use a vector of structs. So here in my header file there is the struct and also the function prototype for a method to makeAccount(). </p>\n\n<pre><code>struct Account{ \nint accountNumber;\nstring lastName;\nstring firstName;\ndouble accountBalance;\n};\n\n//function prototype\ntemplate &lt;typename typeStruct&gt;\nvoid makeAccount(vector &lt;typeStruct&gt;&amp;);\n\n\n//makeAccount method\nvoid makeAccount(vector&lt;T&gt;&amp;v)\n{\n    T newacc;\n    newacc.accountNumber=rand()%9000+1000;\n    cout&lt;&lt;\"Creating bank account number \"&lt;&lt;newacc.accountNumber&lt;&lt;endl;\n    cout&lt;&lt;\"Enter first name: \";\n    cin&gt;&gt;fname;\n    newacc.firstName=fname;\n    cout&lt;&lt;\"Enter last name: \";\n    cin&gt;&gt;lname;\n    newacc.lastName=lname;\n    cout&lt;&lt;\"Enter starting balance: \";\n    cin&gt;&gt;principal;\n    newacc.accountBalance=principal;\n\n}\n</code></pre>\n\n<p>My implemented method is supposed to create a new account every time it is called and ask for first name, last name, and starting balance with a random acc number being generated. Right now Im having trouble figuring out how to call by reference to the function as well as to add the inputted values to the vector of structs. Im a beginner so any explanations would be great, thank you. </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1489591122, "post_id": 42813811, "comment_id": 72739859, "body": "You are looking for the flood fill algorithm: <a href=\"https://en.wikipedia.org/wiki/Flood_fill\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Flood_fill</a>?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489591300, "post_id": 42813811, "comment_id": 72740014, "body": "Also, you only posted the initialization code here. SO is not a free coding service. If you wrote 90% of the code, post it here and let us know where the <i>specific</i> problem is."}, {"owner": {"reputation": 35, "user_id": 7606370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3d8eea2042df639759f5450ee4af2bd?s=128&d=identicon&r=PG&f=1", "display_name": "fishyperil", "link": "https://stackoverflow.com/users/7606370/fishyperil"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489591600, "post_id": 42813811, "comment_id": 72740306, "body": "alright. well, the rest of the code doesn&#39;t have anything to do with this particular problem. I didn&#39;t say I solved 90% of the problem I posted, just 90% of the whole program. And as you can see, the post is pretty expansive and possibly confusing as it is, didn&#39;t think it would make sense to post the code unrelated to this particular part of it."}, {"owner": {"reputation": 35, "user_id": 7606370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3d8eea2042df639759f5450ee4af2bd?s=128&d=identicon&r=PG&f=1", "display_name": "fishyperil", "link": "https://stackoverflow.com/users/7606370/fishyperil"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489591776, "post_id": 42813811, "comment_id": 72740444, "body": "and thx for the link, gonna look into it. It&#39;s not that I want someone to code for me lol, it&#39;s just that I&#39;m learning programming on my own using only the internet , and some times you just come across a problem you have absolutely no reference to"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489591923, "post_id": 42813811, "comment_id": 72740561, "body": "I understand that. While I will not write the code for you, check out this post I made about flood fill in Java: <a href=\"http://stackoverflow.com/a/42583801/2988730\">stackoverflow.com/a/42583801/2988730</a>. It is not 100% related to what you are doing, but it might help you visualize a solution in C++, especially since the syntax should be similar enough to understand easily."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489591985, "post_id": 42813811, "comment_id": 72740615, "body": "Here&#39;s another thing that might help: <a href=\"http://www.geeksforgeeks.org/flood-fill-algorithm-implement-fill-paint/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/flood-fill-algorithm-implement-fill-paint</a>"}, {"owner": {"reputation": 35, "user_id": 7606370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3d8eea2042df639759f5450ee4af2bd?s=128&d=identicon&r=PG&f=1", "display_name": "fishyperil", "link": "https://stackoverflow.com/users/7606370/fishyperil"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1489592098, "post_id": 42813811, "comment_id": 72740710, "body": "Great, thx a lot for the help, gonna check them all out :)"}], "owner": {"reputation": 35, "user_id": 7606370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3d8eea2042df639759f5450ee4af2bd?s=128&d=identicon&r=PG&f=1", "display_name": "fishyperil", "link": "https://stackoverflow.com/users/7606370/fishyperil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489591243, "creation_date": 1489591023, "last_edit_date": 1489591243, "question_id": 42813811, "link": "https://stackoverflow.com/questions/42813811/changing-all-adjacent-elements-in-a-two-dimensional-vector", "title": "changing all adjacent elements in a two dimensional vector", "body": "<p>I'm trying to solve a problem that has to do with manipulating the elements of a 2D char vector . Imagine the vector as an X by Y matrix where X is the number of columns and Y is the number of rows. Initially all the elements are 0.</p>\n\n<p>I need to write code that will, when I address an element of the vector by it's index (i.e vect[3][4]) and change it's value , change all elements adjacent to it in the matrix (4 elements - above, below, left, right) to the same value and then proceed to change all elements adjacent to those in the same fashion - but only as long as they have the same initial value as the first element addressed. Let's say the matrix is 9x5.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;char&gt;&gt; vect;\nint x,y;\nchar input;\nfor (int i = 0; i &lt; n; i++) {\n    std::vector&lt;char&gt; temp;\n    for (int i = 0; i &lt; m; i++) {\n        temp.push_back('0');\n    }\n    vect.push_back(temp);\n} //used to initialize the vector of char vectors and set all the elements to 0\nstd::cin&gt;&gt;x;\nstd::cin&gt;&gt;y;\nstd::cin&gt;&gt;input;\ntable[y][x] = input; // changes the initial element to the value specified\n\n/*imagine this as a matrix that already had some elements changed beforehand (at some point between the initialization and the code I need to write)\n000000A00\n000000AAA\n000000A00\n0A00000AA\n0000AAAA0 */\n</code></pre>\n\n<p>Now if I enter let's say 2 for x, 3 for y and the letter B as char input, first the element vect[3][2] should change to B, then all those adjacent to it and so on until elements have changed to B, except those that weren't 0 even before the input was given or weren't adjacent to any 0 elements that have changed value as result of the input. So the matrix should look like this:</p>\n\n<pre><code>/*matrix after x=2, y=3, input=B\nBBBBBBA00\nBBBBBBAAA\nBBBBBBA00\nBABBBBBAA\nBBBBAAAA0\n*/\n</code></pre>\n\n<p>There's more to what the program is intended to be and I've figured out about 90% of it but I just can't wrap my head around this. Any ideas?</p>\n"}, {"tags": ["c++", "c++11", "recursion", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 8, "last_activity_date": 1489647968, "last_edit_date": 1489647968, "creation_date": 1489591328, "answer_id": 42813933, "question_id": 42813810, "link": "https://stackoverflow.com/questions/42813810/capturing-by-value-in-recursive-lambda/42813933#42813933", "title": "Capturing by value in recursive lambda", "body": "<p>Capture by value is evaluated as part of evaluating the lambda expression. At that time, <code>fun</code> is still uninitialised, because you're still evaluating its initialiser. Only after that is <code>fun</code> initialised, but by that time the copy has already happened.</p>\n\n<p>The net effect is that the lambda function object stored inside <code>fun</code> has a data member named <code>fun</code> which is a copy of an uninitalised <code>std::function</code> &mdash; Undefined Behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1489591871, "post_id": 42814081, "comment_id": 72740520, "body": "Or don&#39;t use a lambda \u2014 use a class or function."}, {"owner": {"reputation": 1329, "user_id": 1048959, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8086a707c18684ccfa50c5e335221771?s=128&d=identicon&r=PG", "display_name": "Dan Stahlke", "link": "https://stackoverflow.com/users/1048959/dan-stahlke"}, "edited": false, "score": 0, "creation_date": 1516857655, "post_id": 42814081, "comment_id": 83863573, "body": "For the y-combinator I had to specify the return value of the lambda to get it to compile: <code>[](auto&amp;&amp; gcd, int a, int b) -&gt; int</code>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1506710986, "last_edit_date": 1506710986, "creation_date": 1489591668, "answer_id": 42814081, "question_id": 42813810, "link": "https://stackoverflow.com/questions/42813810/capturing-by-value-in-recursive-lambda/42814081#42814081", "title": "Capturing by value in recursive lambda", "body": "<p>Using <code>std::function</code> for a recursive lambda isn't a good plan.  In your case, you get an uninitialized copy of the function prior to it having the lambda within it.</p>\n\n<p>Which seems bad.  Undefined behavior crashes when you are lucky.</p>\n\n<p><strong>Recursive Lambdas</strong></p>\n\n<p>Let's say we wish to write Euclid's <code>gcd()</code> as a lambda. As a function, it is:</p>\n\n<pre><code>int gcd(int a, int b) {\n    return b == 0 ? a : gcd(b, a%b);\n}\n</code></pre>\n\n<p>But a lambda cannot be recursive, it has no way to invoke itself. A lambda has no name and using <code>this</code> within the body of a lambda refers to a captured <code>this</code> (assuming the lambda is created in the body of a member function, otherwise it is an error). So how do we solve this problem?</p>\n\n<h3>Use <code>std::function</code></h3>\n\n<p>We can have a lambda capture a reference to a not-yet constructed <code>std::function</code>:</p>\n\n<pre><code>std::function&lt;int(int, int)&gt; gcd = [&amp;](int a, int b){\n    return b == 0 ? a : gcd(b, a%b);\n};\n</code></pre>\n\n<p>This works, but should be used sparingly. It's slow (we're using type erasure now instead of a direct function call), it's fragile (copying <code>gcd</code> or returning <code>gcd</code> will break since the lambda refers to the original object), and it won't work with generic lambdas. </p>\n\n<h3>Using two smart pointers:</h3>\n\n<pre><code>auto gcd_self = std::make_shared&lt;std::unique_ptr&lt; std::function&lt;int(int, int)&gt; &gt;&gt;();\n*gcd_self = std::make_unique&lt;std::function&lt;int(int, int)&gt;&gt;(\n  [gcd_self](int a, int b){\n    return b == 0 ? a : (**gcd_self)(b, a%b);\n  };\n};\n</code></pre>\n\n<p>This adds a lot of indirection (which is overhead), but it can be copied/returned, and all copies share state.  It does let you return the lambda, and is otherwise less fragile than the above solution.</p>\n\n<h3>Use a Y-combinator</h3>\n\n<p>With the help of a short utility struct, we can solve all of these problems:</p>\n\n<pre><code>template &lt;class F&gt;\nstruct y_combinator {\n    F f; // the lambda will be stored here\n\n    // a forwarding operator():\n    template &lt;class... Args&gt;\n    decltype(auto) operator()(Args&amp;&amp;... args) const {\n        // we pass ourselves to f, then the arguments.\n        // the lambda should take the first argument as `auto&amp;&amp; recurse` or similar.\n        return f(*this, std::forward&lt;Args&gt;(args)...);\n    }\n};\n// helper function that deduces the type of the lambda:\ntemplate &lt;class F&gt;\ny_combinator&lt;std::decay_t&lt;F&gt;&gt; make_y_combinator(F&amp;&amp; f) {\n    return {std::forward&lt;F&gt;(f)};\n}\n// (Be aware that in C++17 we can do better than a `make_` function)\n</code></pre>\n\n<p>we can implement our <code>gcd</code> as:</p>\n\n<pre><code>auto gcd = make_y_combinator(\n  [](auto&amp;&amp; gcd, int a, int b){\n    return b == 0 ? a : gcd(b, a%b);\n  }\n);\n</code></pre>\n\n<p>The <code>y_combinator</code> is a concept from the lambda calculus that lets you have recursion without being able to name yourself until you are defined.  This is exactly the problem lambdas have.</p>\n\n<p>You create a lambda that takes \"recurse\" as its first argument.  When you want to recurse, you pass the arguments to recurse.</p>\n\n<p>The <code>y_combinator</code> then returns a function object that calls that function with its arguments, but with a suitable \"recurse\" object (namely the <code>y_combinator</code> itself) as its first argument.  It forwards the rest of the arguments you call the <code>y_combinator</code> with to the lambda as well.</p>\n\n<p>In short:</p>\n\n<pre><code>auto foo = make_y_combinator( [&amp;](auto&amp;&amp; recurse, some arguments) {\n  // write body that processes some arguments\n  // when you want to recurse, call recurse(some other arguments)\n});\n</code></pre>\n\n<p>and you have recursion in a lambda with no serious restrictions or significant overhead.</p>\n\n<p>Part of this answer (The Recursive Lambda) was originally written by <a href=\"https://stackoverflow.com/users/2069064/barry\">@Barry</a> on the defunct Stack Overflow Documentation.</p>\n"}], "owner": {"reputation": 738, "user_id": 4699294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WzHD5.jpg?s=128&g=1", "display_name": "Dinesh Maurya", "link": "https://stackoverflow.com/users/4699294/dinesh-maurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 42813933, "answer_count": 2, "score": 4, "last_activity_date": 1506710986, "creation_date": 1489591022, "last_edit_date": 1489591276, "question_id": 42813810, "link": "https://stackoverflow.com/questions/42813810/capturing-by-value-in-recursive-lambda", "title": "Capturing by value in recursive lambda", "body": "<p>We can define recursive lambda function like</p>\n\n<pre><code>std::function&lt;void(int)&gt; fun = [&amp;fun](int a) {  if (a) fun(a - 1); };\n</code></pre>\n\n<p>then we can call it with</p>\n\n<pre><code>fun(10);\n</code></pre>\n\n<p>However if I change the definition to</p>\n\n<pre><code>std::function&lt;void(int)&gt; fun = [fun](int a) {  if (a) fun(a - 1); };\n</code></pre>\n\n<p>and then try it to call with</p>\n\n<pre><code>fun(10);\n</code></pre>\n\n<p>segmentation fault occurs.</p>\n\n<p>Can someone explain about why capture by reference works while capture by value gives segmentation fault.</p>\n"}, {"tags": ["c++", "algorithm", "directx"], "comments": [{"owner": {"reputation": 2761, "user_id": 2329287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e5c25b179f8b1396a39e89019a7791?s=128&d=identicon&r=PG", "display_name": "GuyRT", "link": "https://stackoverflow.com/users/2329287/guyrt"}, "edited": false, "score": 0, "creation_date": 1489592585, "post_id": 42813718, "comment_id": 72741089, "body": "What is <code>jitter</code> and what is <code>RANDMAX &#47; 2</code> AND <code>RANDMIN &#47; 2</code> supposed to do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5373865"}, "reply_to_user": {"reputation": 2761, "user_id": 2329287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e5c25b179f8b1396a39e89019a7791?s=128&d=identicon&r=PG", "display_name": "GuyRT", "link": "https://stackoverflow.com/users/2329287/guyrt"}, "edited": false, "score": 0, "creation_date": 1489594765, "post_id": 42813718, "comment_id": 72742787, "body": "@GuyRT Added declaration of jitter to question"}, {"owner": {"reputation": 2761, "user_id": 2329287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e5c25b179f8b1396a39e89019a7791?s=128&d=identicon&r=PG", "display_name": "GuyRT", "link": "https://stackoverflow.com/users/2329287/guyrt"}, "edited": false, "score": 0, "creation_date": 1489595525, "post_id": 42813718, "comment_id": 72743347, "body": "That definition of <code>jitter</code> doesn&#39;t really make sense. As you&#39;ve described it, it won&#39;t change. I think you need a function taking <code>RANDMIN</code> and <code>RANDMAX</code> as arguments. Also to make the recursion work, you need to pass <code>RANDMIN</code> and <code>RANDMAX</code> to <code>MidPointDisplacement</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5373865"}, "reply_to_user": {"reputation": 2761, "user_id": 2329287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e5c25b179f8b1396a39e89019a7791?s=128&d=identicon&r=PG", "display_name": "GuyRT", "link": "https://stackoverflow.com/users/2329287/guyrt"}, "edited": false, "score": 0, "creation_date": 1489676427, "post_id": 42813718, "comment_id": 72784341, "body": "@GuyRT I have now passed the jitter into the function and halfed it before I call the function again however the terrain still seems to be jaggered"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5373865"}, "reply_to_user": {"reputation": 2761, "user_id": 2329287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e5c25b179f8b1396a39e89019a7791?s=128&d=identicon&r=PG", "display_name": "GuyRT", "link": "https://stackoverflow.com/users/2329287/guyrt"}, "edited": false, "score": 0, "creation_date": 1489687305, "post_id": 42813718, "comment_id": 72792223, "body": "Solution in question. Thanks to @GuyRT for pointing out error."}], "owner": {"user_type": "does_not_exist", "display_name": "user5373865"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489687255, "creation_date": 1489590725, "last_edit_date": 1489687255, "question_id": 42813718, "link": "https://stackoverflow.com/questions/42813718/implementing-midpoint-displacement", "title": "Implementing Midpoint Displacement", "body": "<p>I have been able to successfully implement midpoint displacement in a numbered array in another program and so i'v tried to implement it in a 3D world to create terrain however the outcome of the algorithm isn't what i expected.</p>\n\n<pre><code>void MidPointDisplacement(float grid[][WIDTH], int left, int right, int top, int bottom, int row, int col)\n{\n  int centreX = (left + right) / 2;     //Get the centre of the row\n  int centreY = (top + bottom) / 2;     //Get the centre of the column\n\n  if (centreX == left)\n  {\n    return;\n  }\n  if (centreY == bottom)\n  {\n    return;\n  }\n\n  grid[top][centreX] = ((grid[top][left] + grid[top][right]) / 2) + jitter;     //define top\n  grid[bottom][centreX] = ((grid[bottom][left] + grid[bottom][right]) / 2) + jitter; //define bottom\n  grid[centreY][left] = ((grid[top][left] + grid[bottom][left]) / 2) + jitter; //define left\n  grid[centreY][right] = ((grid[top][right] + grid[bottom][right]) / 2) + jitter;  //define right\n\n  grid[centreX][centreY] = ((grid[centreY][left] + grid[centreY][right] +     grid[top][centreX] + grid[bottom][centreX]) / 4) + jitter; //Get centre\n\n //decreased the random values\n RANDMAX / 2;\n RANDMIN / 2;\n\n MidPointDisplacement(grid, centreX, right, centreY, bottom, row, col);\n MidPointDisplacement(grid, left, centreX, top, centreY, row, col);\n MidPointDisplacement(grid, centreX, right, top, centreY, row, col);\n MidPointDisplacement(grid, left, centreX, centreY, bottom, row, col);\n}\n</code></pre>\n\n<p>The result of the above is this:\n<a href=\"https://i.stack.imgur.com/zfEUp.png\" rel=\"nofollow noreferrer\">3D Midpoint Displacement</a></p>\n\n<p>However I expected a terrain like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0taeZ.png\" rel=\"nofollow noreferrer\">What I expected</a></p>\n\n<p>Is there any reason why this maybe? I initially thought it could've been the jitter however decreasing the initial value doesn't solve this problem.</p>\n\n<pre><code>float jitter = rand() % (int)(RANDMAX - RANDMIN + 1) + RANDMIN;\n</code></pre>\n\n<p>Jitter is a global float that takes a random value between RANDMAX (initial value of 5.0f) and RANDMIN (initial value of -5.0f).</p>\n\n<p>Solution:</p>\n\n<p>To fix the above error I deleted the jitter I had created in the program and instead made jitter a float variable of 1.</p>\n\n<p>In the MidpointDisplacement function I changed this:</p>\n\n<pre><code>  grid[top][centreX] = ((grid[top][left] + grid[top][right]) / 2) + jitter;     //define top\n  grid[bottom][centreX] = ((grid[bottom][left] + grid[bottom][right]) / 2) + jitter; //define bottom\n  grid[centreY][left] = ((grid[top][left] + grid[bottom][left]) / 2) + jitter; //define left\n  grid[centreY][right] = ((grid[top][right] + grid[bottom][right]) / 2) + jitter;  //define right\n\n  grid[centreX][centreY] = ((grid[centreY][left] + grid[centreY][right] +     grid[top][centreX] + grid[bottom][centreX]) / 4) + jitter; //Get centre\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>  grid[top][centreX] = ((grid[top][left] + grid[top][right]) / 2) + ((rand() % 256) - 128) / 128.0F * JITTER_RANGE * jitter;  //define top\n  grid[bottom][centreX] = ((grid[bottom][left] + grid[bottom][right]) / 2) + ((rand() % 256) - 128) / 128.0F * JITTER_RANGE * jitter; //define bottom\n  grid[centreY][left] = ((grid[top][left] + grid[bottom][left]) / 2) + ((rand() % 256) - 128) / 128.0F * JITTER_RANGE * jitter; //define left\n  grid[centreY][right] = ((grid[top][right] + grid[bottom][right]) / 2) + ((rand() % 256) - 128) / 128.0F * JITTER_RANGE * jitter;  //define right\n\n  grid[centreY][centreX] = ((grid[centreY][left] + grid[centreY][right] + grid[top][centreX] + grid[bottom][centreX]) / 4) + ((rand() % 256) - 128) / 128.0F * JITTER_RANGE * jitter; //Get centre\n</code></pre>\n\n<p>I then called the function again as done before however this time I divided the jitter by 2.</p>\n\n<p>Also, I discovered that I stupidly had centreX and centreY the wrong way around in the line(Not changed here):</p>\n\n<pre><code>  grid[centreX][centreY] = ((grid[centreY][left] + grid[centreY][right] +     grid[top][centreX] + grid[bottom][centreX]) / 4) + jitter; //Get centre\n</code></pre>\n"}, {"tags": ["c++", "memory", "memory-management"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1489590826, "post_id": 42813665, "comment_id": 72739616, "body": "Global variables, static or not, are not allocated dynamically on the heap. They are put in special segments that are initialized when the program is loaded. The storage in the special segments is done by the compiler, the initialization of the segments in memory is done by the program loader before your program is running."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489591033, "post_id": 42813665, "comment_id": 72739780, "body": "Are you targeting MS DOS? Which compiler are you using?"}, {"owner": {"reputation": 941, "user_id": 454237, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Njczq.png?s=128&g=1", "display_name": "Gravis", "link": "https://stackoverflow.com/users/454237/gravis"}, "edited": false, "score": 0, "creation_date": 1489591244, "post_id": 42813665, "comment_id": 72739961, "body": "Yes, I&#39;m targetting MS-DOS using DJGPP (i586-pc-msdosdjgpp-gcc (GCC) 6.3.0)"}], "answers": [{"tags": [], "owner": {"reputation": 941, "user_id": 454237, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Njczq.png?s=128&g=1", "display_name": "Gravis", "link": "https://stackoverflow.com/users/454237/gravis"}, "is_accepted": true, "score": 0, "last_activity_date": 1489772271, "creation_date": 1489772271, "answer_id": 42863924, "question_id": 42813665, "link": "https://stackoverflow.com/questions/42813665/is-custom-static-allocator-possible-a-way-to-fake-it/42863924#42863924", "title": "Is custom static allocator possible? / A way to fake it?", "body": "<p>Sadly, there is no keyword to specify the type of memory allocation you wish to use and there are no standard templates to force heap allocation.  The best answer I could find was to just make a small wrapper class a that allocates and deletes memory how you want and provides you with access to the pointer.  It's nothing fancy but here's some of my code.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass mem\n{\npublic:\n  mem(void) { m_data = reinterpret_cast&lt;T*&gt;(dos::malloc(sizeof(T))); }\n ~mem(void) { dos::free(m_data); m_data = nullptr; }\n  T* operator -&gt;(void) noexcept { return m_data; }\n  operator T*(void) noexcept { return m_data; }\n\nprivate:\n  T* m_data;\n};\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 454237, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Njczq.png?s=128&g=1", "display_name": "Gravis", "link": "https://stackoverflow.com/users/454237/gravis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 42863924, "answer_count": 1, "score": 3, "last_activity_date": 1489772271, "creation_date": 1489590600, "question_id": 42813665, "link": "https://stackoverflow.com/questions/42813665/is-custom-static-allocator-possible-a-way-to-fake-it", "title": "Is custom static allocator possible? / A way to fake it?", "body": "<p><strong>Background:</strong>\nFor hardware dependant reasons, I need to allocate memory of using the <a href=\"https://en.wikipedia.org/wiki/DOS_Protected_Mode_Interface\" rel=\"nofollow noreferrer\">DOS Protected Mode Interface</a> in order to communicate with some low-level interfaces (e.g. <a href=\"https://en.wikipedia.org/wiki/VESA_BIOS_Extensions\" rel=\"nofollow noreferrer\">VESA BIOS Extensions</a>).</p>\n\n<p><strong>Situation:</strong>\nSo I can overload <code>new</code> and <code>delete</code> for dynamically allocated memory which is great but I really want to overload the allocators for statically allocated memory.  The project I'm working on is rather old library and therefore requires a fair number of static global variables.</p>\n\n<p><strong>Question:</strong>\nIs there some way I could overload the allocation process for these variables?  If not, is there a template to dynamically allocate these variables that wouldn't require explicit allocation or deletion and be almost entirely transparent?</p>\n"}, {"tags": ["c++", "intellij-idea", "clion"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1489590679, "post_id": 42813641, "comment_id": 72739489, "body": "Redirection is part of the <i>shell</i> not something that happens automatically when running a program. Maybe you should invoke a shell instead, that runs your program with the redirection? Or modify your program to handle command-line arguments?"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 4, "creation_date": 1489590689, "post_id": 42813641, "comment_id": 72739498, "body": "It appears this is not supported yet: <a href=\"https://youtrack.jetbrains.com/issue/CPP-3153\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/CPP-3153</a>  You may need to pass the file name as an argument string and let your application handle opening and reading from the file"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7123451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLwuH.png?s=128&g=1", "display_name": "Tim Zhang", "link": "https://stackoverflow.com/users/7123451/tim-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1575485191, "last_edit_date": 1575485191, "creation_date": 1575483779, "answer_id": 59182504, "question_id": 42813641, "link": "https://stackoverflow.com/questions/42813641/intellij-clion-what-should-i-do-to-use-input-text-file/59182504#59182504", "title": "IntelliJ - CLion : What should I do to use input text file?", "body": "<p>Not a direct solution but the alternative you can do using your command line.</p>\n\n<pre><code>g++ -Wall -ggdb filename.cpp -o filename\n</code></pre>\n\n<p>and run it using:</p>\n\n<pre><code>./filename &lt; inputFile\n</code></pre>\n\n<p>Also, I don't think JetBrain has an official answer to this type of issue for Clion yet...</p>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 5557585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJ5faS1sHtQ/AAAAAAAAAAI/AAAAAAAAApY/PE3LfjNskuY/photo.jpg?sz=128", "display_name": "Vishal Singh", "link": "https://stackoverflow.com/users/5557585/vishal-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1582657142, "creation_date": 1582657142, "answer_id": 60401491, "question_id": 42813641, "link": "https://stackoverflow.com/questions/42813641/intellij-clion-what-should-i-do-to-use-input-text-file/60401491#60401491", "title": "IntelliJ - CLion : What should I do to use input text file?", "body": "<p>It is not officially supported as of now, you can do the following.</p>\n\n<p>If your input file is input.txt, you can use freopen to set stdin file as input.txt</p>\n\n<pre><code>freopen(\"input.txt\",\"r\",stdin);\n</code></pre>\n\n<p>if you want to do the same with your output:</p>\n\n<pre><code>freopen(\"output.txt\",\"w\",stdout);\n</code></pre>\n\n<p>this will work for std::cin (if using c++), printf, etc...</p>\n\n<p>This will help you in debugging your code in clion</p>\n\n<p>Similar Question\n<a href=\"https://stackoverflow.com/questions/32971803/clion-standard-input-while-debugging\">CLion standard input while debugging</a></p>\n"}, {"tags": [], "owner": {"reputation": 232, "user_id": 10145397, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208447481133981/picture?type=large", "display_name": "Miguel Duran Diaz", "link": "https://stackoverflow.com/users/10145397/miguel-duran-diaz"}, "is_accepted": false, "score": 3, "last_activity_date": 1596476369, "creation_date": 1596476369, "answer_id": 63234366, "question_id": 42813641, "link": "https://stackoverflow.com/questions/42813641/intellij-clion-what-should-i-do-to-use-input-text-file/63234366#63234366", "title": "IntelliJ - CLion : What should I do to use input text file?", "body": "<p>If someone is still interested in this, at the current date, CLion has added this feature. Go Edit Configurations (top right corner toolbar, name of your project | Debug):\n<a href=\"https://i.stack.imgur.com/JS4MI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JS4MI.png\" alt=\"enter image description here\" /></a></p>\n<p>Now there is an option: &quot;Redirect input from&quot;. Just click the folder and find your input file.\n<a href=\"https://i.stack.imgur.com/gUJGl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gUJGl.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 539, "user_id": 7064420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a60fda2a96706777e02bd57f81c77a2e?s=128&d=identicon&r=PG&f=1", "display_name": "newbie16", "link": "https://stackoverflow.com/users/7064420/newbie16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5637, "favorite_count": 4, "answer_count": 3, "score": 5, "last_activity_date": 1596476369, "creation_date": 1489590548, "last_edit_date": 1489600262, "question_id": 42813641, "link": "https://stackoverflow.com/questions/42813641/intellij-clion-what-should-i-do-to-use-input-text-file", "title": "IntelliJ - CLion : What should I do to use input text file?", "body": "<p>I want to read .txt file in my C/C++ project in CLion IDE.</p>\n\n<p>I want to automate the command that I run in bash: </p>\n\n<p><code>./&lt;executable_file&gt; &lt; input.txt</code></p>\n\n<p>I edited program parameter in Run/Debug configuration.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dfew3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dfew3.png\" alt=\"picture\"></a></p>\n\n<p>But it does not works.</p>\n"}, {"tags": ["c++", "windows", "move"], "comments": [{"owner": {"reputation": 762, "user_id": 2493292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39ea4f86f873cca1afd4a02edff6483?s=128&d=identicon&r=PG&f=1", "display_name": "jamek", "link": "https://stackoverflow.com/users/2493292/jamek"}, "edited": false, "score": 0, "creation_date": 1489590758, "post_id": 42813533, "comment_id": 72739570, "body": "The problem depends on platform OS. In Windows read about WinAPI. In Linux read about XOrg/Wayland. Have a nice lecture"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1489591131, "post_id": 42813533, "comment_id": 72739867, "body": "@LukasDark I&#39;m really not sure whether I should support this, but the following research by google &quot;Windows handle hook&quot; and &quot;get all windows handles of window&quot; provided some promising hits. If &quot;MSDN&quot; appears in the URL, I would prefer these links"}, {"owner": {"reputation": 23, "user_id": 7420172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1234418216638022/picture?type=large", "display_name": "Lukas Dark", "link": "https://stackoverflow.com/users/7420172/lukas-dark"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1489595008, "post_id": 42813533, "comment_id": 72742958, "body": "@Scheff I am not going to do &quot;evil&quot; stuff with it when you mean this. I only want troll by friends."}], "owner": {"reputation": 23, "user_id": 7420172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1234418216638022/picture?type=large", "display_name": "Lukas Dark", "link": "https://stackoverflow.com/users/7420172/lukas-dark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489590268, "creation_date": 1489590268, "question_id": 42813533, "link": "https://stackoverflow.com/questions/42813533/c-bouncing-moving-open-windows", "title": "C++ - Bouncing / Moving open Windows", "body": "<p>I saw a Prank Virus - some time ago - which was doing some cool stuff. For example, that all open windows for example the Browser and all other opened Windows moving randomly over the full screen so that the user dont can use them anymore and when the user opens a new window the window starts moving too. How can I do this with C++</p>\n"}, {"tags": ["c++", "sfml", "sfgui"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1489589162, "post_id": 42812997, "comment_id": 72738271, "body": "You tell <code>std::bind</code> to pass the variable <code>button</code> as an argument to the <code>pressEnter</code> function when it&#39;s called. And yet your function doesn&#39;t take any arguments."}, {"owner": {"reputation": 169, "user_id": 5476491, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fzbEp.jpg?s=128&g=1", "display_name": "Manu", "link": "https://stackoverflow.com/users/5476491/manu"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1489590429, "post_id": 42812997, "comment_id": 72739287, "body": "I know right? The first thing I tried was setting <code>pressEnter</code> to receive a parameter, because it seemed odd, but it didn&#39;t work. Plus, the tutorials keep it that way."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1489590574, "post_id": 42812997, "comment_id": 72739403, "body": "If you have errors, first of all show the code that gives errors. Then also include the actual errors you get, in full, complete with possible informational notes, and unedited. Please take some time to  <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 169, "user_id": 5476491, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fzbEp.jpg?s=128&g=1", "display_name": "Manu", "link": "https://stackoverflow.com/users/5476491/manu"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1489592355, "post_id": 42812997, "comment_id": 72740902, "body": "Thanks a lot for the advice. I actually red the guide some time ago, but looks like I forgot about the most important parts. Thank you for taking your time nevertheless, I&#39;ve edited my post and added the errors for each of the two lines, along with the full output from the console."}], "answers": [{"tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1489593956, "creation_date": 1489593956, "answer_id": 42815011, "question_id": 42812997, "link": "https://stackoverflow.com/questions/42812997/trying-to-bind-a-simple-button-to-an-onclick-function-in-sfgui/42815011#42815011", "title": "Trying to bind a simple button to an OnClick function in SFGUI", "body": "<p>One choice would be to have your variable in a scope where both can access it.</p>\n\n<pre><code>sfg::Button::Ptr button;\n\nvoid pressEnter(){\n    button-&gt;SetLabel(\"Tocado\");\n}\n\nint main(){\n\n    sfg::SFGUI sfgui;\n\n    sf::VideoMode video_mode( 800, 600 );\n    sf::RenderWindow rwindow( video_mode, \"In-joked - Menu Principal\");\n    sf::Event event;\n\n    button = sfg::Button::Create(\"Status\");\n    button-&gt;GetSignal(sfg::Button::OnLeftClick).Connect(&amp;pressEnter);\n\n    ...\n}\n</code></pre>\n\n<p>This is a global variable and probably not the best way to do this, but it will work. How to structure your program to not have global variables is a bit too broad for a Q&amp;A here. </p>\n"}], "owner": {"reputation": 169, "user_id": 5476491, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fzbEp.jpg?s=128&g=1", "display_name": "Manu", "link": "https://stackoverflow.com/users/5476491/manu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489594103, "creation_date": 1489589053, "last_edit_date": 1489594103, "question_id": 42812997, "link": "https://stackoverflow.com/questions/42812997/trying-to-bind-a-simple-button-to-an-onclick-function-in-sfgui", "title": "Trying to bind a simple button to an OnClick function in SFGUI", "body": "<p>So, I've just started using SFGUI in my SFML project and I'm struggling to understand how everything works. I've been reading through the hello world tutorial and some of the examples the library itself offers in it's folders.</p>\n\n<p>I am now trying to create a simple button that does something when it detects a left click, but I can't even get that to work properly. The errors window says the <code>button</code> variable is not defined in my <code>OnClick</code> method, and if I try to send <code>button</code> using the parameters of <code>std::bind</code> I get the typical \"no matching function for...\".</p>\n\n<p>In most examples of the library, this problem is solved by using <code>this</code> as the second parameter, next to the function name, but that doesn't seem to work for me.</p>\n\n<p>How should this be done?</p>\n\n<p>My code:</p>\n\n<pre><code>void pressEnter(){\n    button-&gt;SetLabel(\"Tocado\"); // FIRST ERROR IN THIS LINE\n}\n\nint main(){\n\n    sfg::SFGUI sfgui;\n\n    sf::VideoMode video_mode( 800, 600 );\n    sf::RenderWindow rwindow( video_mode, \"In-joked - Menu Principal\");\n    sf::Event event;\n\n    auto button = sfg::Button::Create(\"Status\");\n    button-&gt;GetSignal(sfg::Button::OnLeftClick).Connect(\n            std::bind(&amp;pressEnter, button)); //SECOND ERROR IN THIS LINE\n\n    ...\n}\n</code></pre>\n\n<p>The error NetBeans shows for the first line:\n\"Unable to resolve identifier \"button\". \"button\" was not declared in this scope\"</p>\n\n<p>And for the second line:</p>\n\n<p>\"in file included from</p>\n\n<p>error: no matching function for call to \u2018sfg::Signal::Connect(std::_Bind_helper&amp;>::type)\u2019\n             std::bind(&amp;pressEnter, button));\"</p>\n\n<p>Full error in run console output:</p>\n\n<pre><code>main.cpp: In function \u2018void pressEnter()\u2019:\nmain.cpp:7:5: error: \u2018button\u2019 was not declared in this scope\n     button-&gt;SetLabel(\"Tocado\");\n     ^\nIn file included from /usr/include/c++/5/memory:79:0,\n                 from /usr/local/include/SFGUI/Signal.hpp:6,\n                 from /usr/local/include/SFGUI/Object.hpp:4,\n                 from /usr/local/include/SFGUI/Adjustment.hpp:3,\n                 from /usr/local/include/SFGUI/Widgets.hpp:6,\n                 from main.cpp:2:\n/usr/include/c++/5/functional: In instantiation of \u2018struct std::_Bind_check_arity&lt;void (*)(), std::shared_ptr&lt;sfg::Button&gt;&amp;&gt;\u2019:\n/usr/include/c++/5/functional:1439:12:   required from \u2018struct std::_Bind_helper&lt;false, void (*)(), std::shared_ptr&lt;sfg::Button&gt;&amp;&gt;\u2019\n/usr/include/c++/5/functional:1462:5:   required by substitution of \u2018template&lt;class _Func, class ... _BoundArgs&gt; typename std::_Bind_helper&lt;std::__is_socketlike&lt;_Func&gt;::value, _Func, _BoundArgs ...&gt;::type std::bind(_Func&amp;&amp;, _BoundArgs&amp;&amp; ...) [with _Func = void (*)(); _BoundArgs = {std::shared_ptr&lt;sfg::Button&gt;&amp;}]\u2019\nmain.cpp:20:42:   required from here\n/usr/include/c++/5/functional:1410:7: error: static assertion failed: Wrong number of arguments for function\n       static_assert(sizeof...(_BoundArgs) == sizeof...(_Args),\n       ^\nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:20:43: error: no matching function for call to \u2018sfg::Signal::Connect(std::_Bind_helper&lt;false, void (*)(), std::shared_ptr&lt;sfg::Button&gt;&amp;&gt;::type)\u2019\n             std::bind(&amp;pressEnter, button));\n                                           ^\nIn file included from /usr/local/include/SFGUI/Object.hpp:4:0,\n                 from /usr/local/include/SFGUI/Adjustment.hpp:3,\n                 from /usr/local/include/SFGUI/Widgets.hpp:6,\n                 from main.cpp:2:\n/usr/local/include/SFGUI/Signal.hpp:40:16: note: candidate: unsigned int sfg::Signal::Connect(std::function&lt;void()&gt;)\n   unsigned int Connect( std::function&lt;void()&gt; delegate );\n                ^\n/usr/local/include/SFGUI/Signal.hpp:40:16: note:   no known conversion for argument 1 from \u2018std::_Bind_helper&lt;false, void (*)(), std::shared_ptr&lt;sfg::Button&gt;&amp;&gt;::type {aka std::_Bind&lt;void (*(std::shared_ptr&lt;sfg::Button&gt;))()&gt;}\u2019 to \u2018std::function&lt;void()&gt;\u2019\nnbproject/Makefile-Debug.mk:78: recipe for target 'build/Debug/GNU-Linux/main.o' failed\nmake[2]: *** [build/Debug/GNU-Linux/main.o] Error 1\nmake[2]: Leaving directory '/home/manu/NetBeansProjects/GameMenu'\nnbproject/Makefile-Debug.mk:59: recipe for target '.build-conf' failed\nmake[1]: *** [.build-conf] Error 2\nmake[1]: Leaving directory '/home/manu/NetBeansProjects/GameMenu'\nnbproject/Makefile-impl.mk:39: recipe for target '.build-impl' failed\nmake: *** [.build-impl] Error 2\n\nBUILD FAILED (exit value 2, total time: 953ms)\n</code></pre>\n"}, {"tags": ["c++", "multiplication"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1489588976, "post_id": 42812923, "comment_id": 72738117, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefined behaviour</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1489588995, "post_id": 42812923, "comment_id": 72738138, "body": "C dupe target: <a href=\"http://stackoverflow.com/questions/26428107/multiplication-of-three-numbers-in-c-give-a-wrong-results\" title=\"multiplication of three numbers in c give a wrong results\">stackoverflow.com/questions/26428107/&hellip;</a>"}, {"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1489589006, "post_id": 42812923, "comment_id": 72738154, "body": "Your <code>int</code> can&#39;t hold the value <code>4047886129</code>, so you get what&#39;s known as an overflow."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1489589253, "post_id": 42812923, "comment_id": 72738339, "body": "First convert your integers to <code>double</code>, then multiply them."}], "owner": {"reputation": 47, "user_id": 6105838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc37159d5c22b07b5db08d3c854bb941?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja Warrior", "link": "https://stackoverflow.com/users/6105838/ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "closed_date": 1489588991, "answer_count": 0, "score": 0, "last_activity_date": 1489588887, "creation_date": 1489588887, "question_id": 42812923, "link": "https://stackoverflow.com/questions/42812923/multiplication-of-two-variables-in-c", "closed_reason": "Duplicate", "title": "Multiplication of two variables in c++", "body": "<p>I know it sound really stupid but I cannot understand the output of the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n#include &lt;vector&gt;\n#include &lt;gsl/gsl_math.h&gt;  \n#include &lt;gsl/gsl_cdf.h&gt;\n\nusing namespace std;\n\n\nint main(){\n\nint num_rows = 63623; // number of rows adj matrix\nint num_cols = 63623; // number of columns adj matrix\nint e = 334186; //number of edges\n\ndouble bonferroni_lvl;\nbonferroni_lvl=((num_rows*num_cols));\ncout &lt;&lt; bonferroni_lvl &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>If I run it on my terminal it gives: </p>\n\n<pre><code>-2.47081e+08\n</code></pre>\n\n<p>How is that possible? The absolute value is wrong and the sign too ! </p>\n\n<p>I know that I am missing something. Can you please help? Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1489589000, "post_id": 42812844, "comment_id": 72738146, "body": "Are <code>m_pModelSpace</code> and <code>m_pSelectionSet</code> of the same or different types? (using <code>auto</code> makes this really unclear) Also if they are different, do they have some common base class (or interface)?"}, {"owner": {"reputation": 461, "user_id": 6933790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef7fb7c460676595845863a65a6461b?s=128&d=identicon&r=PG&f=1", "display_name": "J Reid", "link": "https://stackoverflow.com/users/6933790/j-reid"}, "edited": false, "score": 0, "creation_date": 1489589075, "post_id": 42812844, "comment_id": 72738210, "body": "I would assume the newIterator return type is the same for both objects ModelSpace and SelectionSet, also the return type for step() and next() are the same; if so putting the loop into a function would be the best way to go with those return types as the inputs to the function"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1489589170, "post_id": 42812844, "comment_id": 72738280, "body": "@UnholySheep note <code>itFrom-&gt;step()</code> vs <code>itFrom-&gt;next()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3177, "user_id": 3375847, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/QHIcL.png?s=128&g=1", "display_name": "Glen Pierce", "link": "https://stackoverflow.com/users/3375847/glen-pierce"}, "edited": false, "score": 0, "creation_date": 1489589431, "post_id": 42812904, "comment_id": 72738477, "body": "Is there some reason this wouldn&#39;t work? This seems like the obvious solution."}, {"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489603537, "post_id": 42812904, "comment_id": 72748176, "body": "I see this work for one loop but it seems messy for 2 loops"}, {"owner": {"reputation": 637, "user_id": 7567578, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-XmjrqKxidIg/AAAAAAAAAAI/AAAAAAAAFFI/3Zdsipc1dGU/photo.jpg?sz=128", "display_name": "Loay Ashmawy", "link": "https://stackoverflow.com/users/7567578/loay-ashmawy"}, "edited": false, "score": 0, "creation_date": 1489651076, "post_id": 42812904, "comment_id": 72766578, "body": "Why messy ? It would be exactly the same thing (the same line containing the function)"}, {"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489736436, "post_id": 42812904, "comment_id": 72810557, "body": "Maybe I am understanding you wrong but to make this work I would need 2 functions since it is a double for loop and the main problem stays the iterators with a different interface. Can you provide a code example?"}], "tags": [], "owner": {"reputation": 637, "user_id": 7567578, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-XmjrqKxidIg/AAAAAAAAAAI/AAAAAAAAFFI/3Zdsipc1dGU/photo.jpg?sz=128", "display_name": "Loay Ashmawy", "link": "https://stackoverflow.com/users/7567578/loay-ashmawy"}, "is_accepted": false, "score": 1, "last_activity_date": 1489588835, "creation_date": 1489588835, "answer_id": 42812904, "question_id": 42812844, "link": "https://stackoverflow.com/questions/42812844/avoid-almost-identical-code-duplication-in-double-for-loop-with-different-iterat/42812904#42812904", "title": "Avoid almost identical code duplication in double for loop with different iterators", "body": "<p>Create a function that takes as entry the parameters that you use and where you put your identical code and call it in each loop and </p>\n"}, {"comments": [{"owner": {"reputation": 461, "user_id": 6933790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef7fb7c460676595845863a65a6461b?s=128&d=identicon&r=PG&f=1", "display_name": "J Reid", "link": "https://stackoverflow.com/users/6933790/j-reid"}, "edited": false, "score": 0, "creation_date": 1489589267, "post_id": 42813061, "comment_id": 72738351, "body": "please note the second loop uses <code>itFrom-&gt;next()</code> as opposed to <code>itFrom-&gt;step()</code>, you get my vote with that edit"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1489589861, "post_id": 42813061, "comment_id": 72738830, "body": "I think OP specified that there is no common type <code>WhateverType</code> for both variables."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1489589957, "post_id": 42813061, "comment_id": 72738905, "body": "Then <code>auto</code> for parameter would work for for c++14 or template can be used."}, {"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489603823, "post_id": 42813061, "comment_id": 72748336, "body": "Yeah first and second loop use a different iterator next and step method. So this would probably only work for one of the loops."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1489590073, "last_edit_date": 1489590073, "creation_date": 1489589213, "answer_id": 42813061, "question_id": 42812844, "link": "https://stackoverflow.com/questions/42812844/avoid-almost-identical-code-duplication-in-double-for-loop-with-different-iterat/42813061#42813061", "title": "Avoid almost identical code duplication in double for loop with different iterators", "body": "<p>You can write a function with <code>m_pModelSpace</code> as parameter. In case you have to pass to match that is used in that code from local context use lambda:</p>\n\n<pre><code>auto advance = []( auto &amp;it ) { it-&gt;step() };\nauto loop = [&amp;]( auto p ) {\n     for (auto itFrom = p-&gt;newIterator(); !itFrom-&gt;done() &amp;&amp; nodesPassed &lt; maxNodes; advance( itFrom ), ++nodesPassed)\n     {\n        /*\n         ...\n        */\n           for (auto itTo = p-&gt;newIterator(); itTo-&gt;objectId() != itFrom-&gt;objectId(); advance( itTo ) )\n           {\n               /*\n                ...\n               */\n           }\n     }\n};\nloop( m_pModelSpace );\nadvance = []( auto &amp;it ) { it-&gt;next() };\nloop( m_pSelectionSet );\n</code></pre>\n\n<p>Note: I changed lamdas parameter type to <code>auto</code> as you said that container types are unrelated. This would work for c++14 or later, otherwise you can use template.</p>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1489589743, "post_id": 42813257, "comment_id": 72738734, "body": "This does not cope with the <code>step</code> vs <code>next</code> differences in the two loops."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1489589927, "post_id": 42813257, "comment_id": 72738884, "body": "I added a level of indirection to solve that problem, but the interface should really be fixed."}, {"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489603778, "post_id": 42813257, "comment_id": 72748300, "body": "This looks promising, I&#39;ve got a vacation day tomorrow but I&#39;ll test it Friday and I&#39;ll accept this if it works."}, {"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489742199, "post_id": 42813257, "comment_id": 72813525, "body": "Had to add another function because of the special intricacies of the code but it pretty much worked perfectly and did not break any of my tests. Thanks for the help."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1489589905, "last_edit_date": 1489589905, "creation_date": 1489589599, "answer_id": 42813257, "question_id": 42812844, "link": "https://stackoverflow.com/questions/42812844/avoid-almost-identical-code-duplication-in-double-for-loop-with-different-iterat/42813257#42813257", "title": "Avoid almost identical code duplication in double for loop with different iterators", "body": "<p>What about using a template function with a level of indirection to handle the iterator increment?</p>\n\n<pre><code>void increment_iterator(&lt;model space iterator type&gt;&amp; iter) { iter-&gt;step(); }\nvoid increment_iterator(&lt;selection set iterator type&gt;&amp; iter) { iter-&gt;next(); }\n\ntemplate &lt;typename Container&gt;\nvoid execute_nested_loop(Container* c)\n{\n    for (auto itFrom = c-&gt;newIterator(); !itFrom-&gt;done() &amp;&amp; nodesPassed &lt; maxNodes; increment_iterator(itFrom), ++nodesPassed)\n    {\n        /*\n        ...\n        */\n        for (auto itTo = c-&gt;newIterator(); itTo-&gt;objectId() != itFrom-&gt;objectId(); increment_iterator(itTo))\n        {\n            /*\n            ...\n            */\n        }\n    }\n}\n</code></pre>\n\n<p>Then call it:</p>\n\n<pre><code>execute_nested_loop(m_pModelSpace);\nexecute_nested_loop(m_pSelectionSet);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1489603568, "post_id": 42813258, "comment_id": 72748194, "body": "As I said, I cannot change the interfaces."}], "tags": [], "owner": {"reputation": 5153, "user_id": 1612743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/599402c77aed8fa96fc13f7b071d31a8?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1612743/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1489589600, "creation_date": 1489589600, "answer_id": 42813258, "question_id": 42812844, "link": "https://stackoverflow.com/questions/42812844/avoid-almost-identical-code-duplication-in-double-for-loop-with-different-iterat/42813258#42813258", "title": "Avoid almost identical code duplication in double for loop with different iterators", "body": "<p>In C++, normalize the interfaces (get rid of <code>step()</code> vs <code>next()</code>), then use a template function.</p>\n"}], "owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 42813257, "answer_count": 4, "score": 2, "last_activity_date": 1489742114, "creation_date": 1489588680, "last_edit_date": 1489742114, "question_id": 42812844, "link": "https://stackoverflow.com/questions/42812844/avoid-almost-identical-code-duplication-in-double-for-loop-with-different-iterat", "title": "Avoid almost identical code duplication in double for loop with different iterators", "body": "<p>I must construct a graph from 2 different custom types <strong>that I cannot change</strong>.<br>\nBecause their signatures and purpose are almost the same I have some code duplication I would like to remove.<br>\nProblem is they return a different iterator.</p>\n\n<pre><code>for (auto itFrom = m_pModelSpace-&gt;newIterator(); !itFrom-&gt;done() &amp;&amp; nodesPassed &lt; maxNodes; itFrom-&gt;step(), ++nodesPassed)\n{\n    /*\n    ...\n    */\n    for (auto itTo = m_pModelSpace-&gt;newIterator(); itTo-&gt;objectId() != itFrom-&gt;objectId(); itTo-&gt;step())\n    {\n        /*\n        ...\n        */\n    }\n}\n\nfor (auto itFrom = m_pSelectionSet-&gt;newIterator(); !itFrom-&gt;done() &amp;&amp; nodesPassed &lt; maxNodes; itFrom-&gt;next(), ++nodesPassed)\n{\n    /*\n    ...\n    */\n    for (auto itTo = m_pSelectionSet-&gt;newIterator(); itTo-&gt;objectId() != itFrom-&gt;objectId(); itTo-&gt;next())\n    {\n        /*\n        ...\n        */\n    }\n}\n</code></pre>\n\n<p>The comments are exactly the same code.<br>\nIs there any way to work around this?<br>\nI was thinking about a wrapper with 2 constructors for each type but then I also need a wrapper for the object iterator.<br>\nAnother idea was multiple inheritance of the 2 types but that also doesn't really feel right.</p>\n\n<p>Any advice?</p>\n\n<p><strong>Summurarized solution</strong><br>\nThanks to Mark B I have come to the following solution:  </p>\n\n<pre><code>namespace {\nOdDbObjectIteratorPtr get_iterator(OdSmartPtr&lt;OdDbBlockTableRecord&gt;&amp; pEntityCollection)\n{\n    return pEntityCollection-&gt;newIterator();\n}\n\nOdDbSelectionSetIteratorPtr get_iterator(OdSmartPtr&lt;OdSelectionSet&gt;&amp; pEntityCollection)\n{\n    return pEntityCollection-&gt;newIterator();\n}\n\nvoid increment_iterator(OdDbObjectIteratorPtr&amp; iter)\n{\n    iter-&gt;step();\n}\nvoid increment_iterator(OdDbSelectionSetIteratorPtr&amp; iter)\n{\n    iter-&gt;next();\n}\n\n}\n\nnamespace spax{\ntemplate &lt;typename Collection&gt;\nvoid ConnectionGraph::ConstructGraph(Collection&amp; pEntityCollection, int maxNodes)\n{\n    // ...\n    for (auto itFrom = get_iterator(pEntityCollection); !itFrom-&gt;done() &amp;&amp; nodesPassed &lt; maxNodes; increment_iterator(itFrom), ++nodesPassed)\n    {\n        //...\n        for (auto itTo = get_iterator(pEntityCollection); itTo-&gt;objectId() != itFrom-&gt;objectId(); increment_iterator(itTo))\n        {\n            //...\n        }\n    }\n}\n}\n</code></pre>\n\n<p>Because the Selection set returned a parent OdSelectionSetIteratorPtr of OdDbSelectionSetIteratorPtr I added another function inspired by this solution to get the iterators.\nThanks for the help, I'm really pleased with the outcome.</p>\n"}, {"tags": ["c++", "templates", "c++17", "non-type"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1489589176, "post_id": 42812829, "comment_id": 72738281, "body": "Because passing a function pointer as a template parameter will result in a chicken vs egg problem, see <a href=\"http://stackoverflow.com/questions/1174169/function-passed-as-template-argument\" title=\"function passed as template argument\">stackoverflow.com/questions/1174169/&hellip;</a> (don&#39;t feel this one is actually a dupe). You&#39;ll have to define the type of the function as the first template parameter, but you need the remaining template parameters to do that."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1489590017, "post_id": 42812829, "comment_id": 72738948, "body": "One is a type, the other is a value."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1489590183, "post_id": 42812829, "comment_id": 72739085, "body": "@SamVarshavchik Dude, what are you talking about? C++17, <code>template auto</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 4, "last_activity_date": 1489613520, "last_edit_date": 1489613520, "creation_date": 1489589733, "answer_id": 42813310, "question_id": 42812829, "link": "https://stackoverflow.com/questions/42812829/why-doesnt-stdis-invocable-accept-a-non-type-template-parameter/42813310#42813310", "title": "Why doesn&#39;t std::is_invocable accept a non type template parameter", "body": "<p>The primary use for <code>std::is_invocable</code> is to use with types and template parameters. Not to be only usable by directly using function pointers.</p>\n\n<p>Let's change your code a bit and add a useful case:</p>\n\n<pre><code>void callF(F function, Args&amp;&amp; args) {\n    std::invoke(function, std::forward&lt;Args&gt;(args)...);\n}\n\n// Later, in your main\n\ncallF(hello_world);\n</code></pre>\n\n<p>You'd like to filter your function to not be callable when the invoke call would be invalid. You can use <code>std::is_invokable</code> just like that:</p>\n\n<pre><code>auto callF(F function, Args&amp;&amp; args) -&gt; std::enable_if&lt;std::is_invocable_v&lt;F, Args...&gt;&gt; {\n    std::invoke(function, std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>As you can see, <em>the types sent as arguments to <code>std::is_invocable</code> reflect the arguments sent to <code>std::invoke</code></em>.</p>\n\n<p>As a bonus, much more than function pointers are supported. Function objects too, and even member function pointers are supported. Right now, you could use the <code>callF</code> function like that:</p>\n\n<pre><code>callF([](int i){ /* ... */ }, 8);\n\nstruct Test { void test() {} };\n\nTest t;\n\ncallF(&amp;Test::test, t);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1489590651, "creation_date": 1489590651, "answer_id": 42813686, "question_id": 42812829, "link": "https://stackoverflow.com/questions/42812829/why-doesnt-stdis-invocable-accept-a-non-type-template-parameter/42813686#42813686", "title": "Why doesn&#39;t std::is_invocable accept a non type template parameter", "body": "<blockquote>\n  <p>I am wondering why it needs a user to provide a type for a function pointer as opposed to just providing the function pointer itself which might be more convenient</p>\n</blockquote>\n\n<p>Because you <em>always</em> have the <em>type</em> of the callable that you want to test, but you don't always have the <em>value</em> of it as a constant expression. Sure, when you do have the value you have to write out <code>decltype(foo)</code> instead of just <code>foo</code>, but that seems like a fairly minor burden, and would cover a fairly percentage of the use-case. Not sure it'd be worth the added complexity of having a <code>template &lt;auto F, class... Args&gt; is_invocable</code> just so that, sometimes, you as the user don't have to write <code>decltype</code>.</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 42813686, "answer_count": 2, "score": 3, "last_activity_date": 1489613520, "creation_date": 1489588643, "last_edit_date": 1489589845, "question_id": 42812829, "link": "https://stackoverflow.com/questions/42812829/why-doesnt-stdis-invocable-accept-a-non-type-template-parameter", "title": "Why doesn&#39;t std::is_invocable accept a non type template parameter", "body": "<p>I recently stumbled upon <a href=\"http://en.cppreference.com/w/cpp/types/is_invocable\" rel=\"nofollow noreferrer\">std::is_invocable</a> that is going to be introduced into the C++17 standard and I am wondering why it needs a user to provide a type for a function pointer as opposed to just providing the function pointer itself which might be more convenient, especially since non type template parameters can now be unconstrained. </p>\n\n<p>What I mean can be explained in the example below</p>\n\n<pre><code>void hello_world() {\n    cout &lt;&lt; \"Hello world\" &lt;&lt; endl;\n}\nint main() {\n    cout &lt;&lt; std::is_invocable_v&lt;decltype(hello_world)&gt; &lt;&lt; endl;\n    // as opposed to being able to do\n    // cout &lt;&lt; std::is_invocable_v&lt;hello_world&gt; &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "interface", "qlineedit", "qtplugin"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1489589999, "post_id": 42812817, "comment_id": 72738929, "body": "you add <code>&quot;fullNames&quot;</code> , but check for <code>myObject -&gt; contains(&quot;type&quot;)</code> ?"}, {"owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1489590587, "post_id": 42812817, "comment_id": 72739410, "body": "Sorry. That was an typo I made while trying to shorten the question. I have it right in my app, but it doesn&#39;t work."}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489591415, "creation_date": 1489588620, "last_edit_date": 1489591415, "question_id": 42812817, "link": "https://stackoverflow.com/questions/42812817/how-to-get-text-from-a-qlineedit-in-a-different-qt-plugin", "title": "How to get text from a QLineEdit in a different Qt plugin", "body": "<p>I have an interface <code>MyInterface</code>:  </p>\n\n<pre><code>class MyInterface\n{\n\npublic:\n    virtual ~MyInterface() {}\n\n    virtual QMap&lt;QString, QString&gt; *inputsMap() const = 0;\n};\n</code></pre>\n\n<p>I have a class <strong>MyImplementingClass</strong> that implements <code>MyInterface</code>. However, I'm unable to get the text from <code>QLineEdit *fullNames</code>:  </p>\n\n<pre><code>QLineEdit *fullNames = new QLineEdit();\n\nQMap&lt;QString, QString&gt; *MyImplementingClass::inputsMap() const\n{\n    QMap&lt;QString, QString&gt; *map = new QMap&lt;QString, QString&gt;();\n    map -&gt; insert(\"fullNames\", this -&gt; fullNames -&gt; text());\n    map -&gt; insert(\"coolText\", \"This works OK\");\n    return map;\n}\n</code></pre>\n\n<p>In <code>ImplementorsCollector</code> is where I gather all the plugins that implement <code>MyInterface</code>:  </p>\n\n<pre><code>void ImplementorsCollector :: initImplementors(QObject *plugin)\n{\n    MyInterface *iMyInterface = qobject_cast&lt;MyInterface *&gt;(plugin);\n    if (iMyInterface)\n        myObject = iMyInterface -&gt; inputsMap();\n}\n</code></pre>\n\n<p>However, still in <code>ImplementorsCollector</code>:  </p>\n\n<pre><code>/* This prints nothing. Nothing gets passed from **QLineEdit *fullNames** */\n\nif (myObject -&gt; contains(\"fullNames\"))\nqDebug() &lt;&lt; \"fullNames : \" &lt;&lt; myObject -&gt; value(\"fullNames\");\n\n/* This prints OK */\n\nif (myObject -&gt; contains(\"coolText\"))\nqDebug() &lt;&lt; \"coolText : \" &lt;&lt; myObject -&gt; value(\"coolText\");\n</code></pre>\n\n<p>How can I go about getting the text input from <code>**QLineEdit *fullNames**</code> from a different plugin?  </p>\n\n<p>Thank you all in advance.</p>\n"}]