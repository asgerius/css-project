[{"tags": ["c++"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1576107771, "post_id": 59295710, "comment_id": 104795830, "body": "&quot;does not work&quot; is a pretty generic description of what&#39;s going on. Does it not compile? Does it compile, but throws an error? Does it run, but produces wrong results? Please clarify."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1576107784, "post_id": 59295710, "comment_id": 104795833, "body": "How exactly does it &quot;not work&quot; and how exactly did you try to make it work, and what happened?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576107813, "post_id": 59295710, "comment_id": 104795846, "body": "Compare your code with the pseudocode <a href=\"https://en.wikipedia.org/wiki/Matrix_multiplication_algorithm\" rel=\"nofollow noreferrer\">here</a>. One glaring problem is that since all of the loop bounds are <code>4</code>, you&#39;re reading <code>A</code> and <code>B</code> out of bounds."}, {"owner": {"reputation": 45, "user_id": 12433215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8SqZ9ddvRo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relEcJlOqjLwILsuxq79FzNH0QVaA/photo.jpg?sz=128", "display_name": "AAAA", "link": "https://stackoverflow.com/users/12433215/aaaa"}, "edited": false, "score": 0, "creation_date": 1576107834, "post_id": 59295710, "comment_id": 104795851, "body": "please see the edited post"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1576107946, "post_id": 59295710, "comment_id": 104795872, "body": "You&#39;re going out of bounds, so you&#39;re lucky if giving the wrong result is the worst it does."}, {"owner": {"reputation": 45, "user_id": 12433215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8SqZ9ddvRo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relEcJlOqjLwILsuxq79FzNH0QVaA/photo.jpg?sz=128", "display_name": "AAAA", "link": "https://stackoverflow.com/users/12433215/aaaa"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1576108512, "post_id": 59295710, "comment_id": 104796007, "body": "@Beta why out of bounds ?  the  multiplication matrix will be 4x4 ?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1576108862, "post_id": 59295710, "comment_id": 104796081, "body": "<code>A</code> is a 4x2 matrix. What happens when <code>i == 3</code> and <code>k == 3</code> and you&#39;re accessing <code>A[3][3]</code>? Likewise for <code>B</code>."}], "answers": [{"tags": [], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "is_accepted": true, "score": 2, "last_activity_date": 1576107825, "creation_date": 1576107825, "answer_id": 59295753, "question_id": 59295710, "link": "https://stackoverflow.com/questions/59295710/matrix-multiplication-of-two-matrices-of-sizes-42-and-24/59295753#59295753", "title": "Matrix multiplication of two matrices of sizes 4*2 and 2*4", "body": "<p>Your inner loop is wrong. It should be</p>\n\n<pre><code>for(int k =0 ;k&lt;2;k++){\n    multi_res[i][j]+=A[i][k]*B[k][j];\n}\n</code></pre>\n\n<p>Assuming that the row is the first index in your array.</p>\n"}], "owner": {"reputation": 45, "user_id": 12433215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8SqZ9ddvRo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relEcJlOqjLwILsuxq79FzNH0QVaA/photo.jpg?sz=128", "display_name": "AAAA", "link": "https://stackoverflow.com/users/12433215/aaaa"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "closed_date": 1576111155, "accepted_answer_id": 59295753, "answer_count": 1, "score": -3, "last_activity_date": 1576107825, "creation_date": 1576107467, "last_edit_date": 1576107811, "question_id": 59295710, "link": "https://stackoverflow.com/questions/59295710/matrix-multiplication-of-two-matrices-of-sizes-42-and-24", "closed_reason": "Not suitable for this site", "title": "Matrix multiplication of two matrices of sizes 4*2 and 2*4", "body": "<p>I am trying to write the code of Matrix multiplication of two matrices of sizes 4*2 and 2*4. Assume the matrices are A and B. \nMy trial for the multiplication part is as follows : </p>\n\n<pre><code>int multi_res[4][4];\n\n    for(int i =0 ; i&lt;4;i++)\n    {\n        for(int j = 0 ; j&lt;4;j++){\n            multi_res[i][j]=0;\n            for(int k =0 ;k&lt;4;k++){\n\n            multi_res[i][j]+=A[i][k]*B[j][k];\n            }\n\n        }\n\n\n\n    }\n</code></pre>\n\n<p>However, this code doesn't work for my problem [gives wrong result].</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1576108068, "post_id": 59295709, "comment_id": 104795901, "body": "Are you familiar with pointers, like <code>BaseClass *p</code>?"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1576122428, "post_id": 59295709, "comment_id": 104798731, "body": "Why would the user need to switch objects? Well, I get that you want to switch <i>functionality</i> but why would the user care which object is being used? That seems more like a design decision you made and which might be worth revisiting."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1576122727, "post_id": 59295709, "comment_id": 104798792, "body": "Simplifying a situation to ask a focused question is good. In this case, however, I would be interested in knowing how much simplification went on. (Some solutions scale better than others.) Why is the base class treated as being on the same functional level as the derived class? Is there a plan to have more than one derived class? The example of a list of valid operations is succinct, but is there more going on? (Why have a derived class instead of just changing the list of valid operations as needed?)"}, {"owner": {"reputation": 163, "user_id": 871883, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SAqMG.png?s=128&g=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/871883/konrad"}, "edited": false, "score": 0, "creation_date": 1576135560, "post_id": 59295709, "comment_id": 104802410, "body": "That&#39;s a good question. This is for a project where the instructions were to make use of classes as part of the design, but I agree that it doesn&#39;t seem to make much sense given there isn&#39;t much else going on. The only &quot;feature&quot; the derived class adds is additional operations which can simply be toggled on/off using a flag on the base class."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1576108548, "creation_date": 1576108548, "answer_id": 59295852, "question_id": 59295709, "link": "https://stackoverflow.com/questions/59295709/how-to-use-one-variable-for-a-parent-and-derived-class/59295852#59295852", "title": "How to use one variable for a parent and derived class", "body": "<p>You can't do it with an array variable, but if you opt for a vector, you could declare it in the base, and initialize in the protected constructor, like this:</p>\n\n<pre><code>class BaseClass {\nprivate:\n    std::vector&lt;string&gt; valid_operations;\nprotected:\n    BaseClass(std::vector&lt;string&gt; vo) : valid_operations(vo) {}\npublic:\n    void ShowValidOperations() {\n        for (string op : valid_operations) {\n            std::cout &lt;&lt; op &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n};\n\nclass OptionOneDerived : public BaseClass {\npublic:\n    OptionOneDerived() : BaseClass({\"%\", \"#\"}) {\n    }\n};\n\nclass OptionTwoDerived : public BaseClass {\npublic:\n    OptionTwoDerived() : BaseClass({\"!\", \"q\", \"%\", \"#\"}) {\n    }\n};\n\nint main() {\n    BaseClass *b;\n    OptionOneDerived a;\n    b = &amp;a;\n    b-&gt;ShowValidOperations();\n    OptionTwoDerived c;\n    b = &amp;c;\n    b-&gt;ShowValidOperations();\n    return 0;\n}\n</code></pre>\n\n<p>Note that rather than using one derived class the example sets up a base that has no operations of its own, and relies on the subclass to provide the operation list in the constructor.</p>\n\n<p>Also note that the implementation allocates derived classes in the <code>main</code> using automatic storage for expediency. An actual implementation would almost certainly use dynamic allocation with operators <code>new</code> and <code>delete</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "is_accepted": false, "score": 1, "last_activity_date": 1576143013, "last_edit_date": 1576143013, "creation_date": 1576135324, "answer_id": 59299546, "question_id": 59295709, "link": "https://stackoverflow.com/questions/59295709/how-to-use-one-variable-for-a-parent-and-derived-class/59299546#59299546", "title": "How to use one variable for a parent and derived class", "body": "<p>You could declare the function <code>apply_action()</code> as a virtual function in the base class. You can then override the function in your derived class and make use of polymorphism.</p>\n\n<pre><code>class BaseClass {\npublic:\n    BaseClass(std::set&lt;std::string&gt; actions) : valid_operations(std::move(actions)) {}\n\n    virtual void apply_action(std::string action)\n    {\n        if (IsValid(action))\n        {\n            //Do stuff\n        }\n    }\n\nprotected:\n    bool IsValid(const std::string&amp; action)\n    {\n        return valid_operations.find(action) != std::end(valid_operations);\n    }\n\nprivate:\n    std::set&lt;std::string&gt; valid_operations;\n};\n\nclass DerivedClass : public BaseClass {\npublic:\n    DerivedClass(std::set&lt;std::string&gt; actions) : BaseClass(actions) {}\n\n    virtual void apply_action(std::string action) override \n    {\n        if (IsValid(action))\n        {\n            //Do stuff\n        }\n    }\n\n};\n</code></pre>\n\n<p>In your <code>main()</code> function or wherever you want to use these classes you can create instances like this:</p>\n\n<pre><code>BaseClass base({ \"%\", \"#\" });\nDerivedClass derived({ \"!\", \"q\", \"%\", \"#\" });\n</code></pre>\n\n<p>Using one <code>BaseClass*</code> pointer you can switch to use either one of these objects. This is how polymorphism works: same name but different behaviour depending on the actual object used. Use a <code>BaseClass*</code> pointer and point to either <code>base</code> or <code>derived</code>.</p>\n"}], "owner": {"reputation": 163, "user_id": 871883, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SAqMG.png?s=128&g=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/871883/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576143013, "creation_date": 1576107467, "question_id": 59295709, "link": "https://stackoverflow.com/questions/59295709/how-to-use-one-variable-for-a-parent-and-derived-class", "title": "How to use one variable for a parent and derived class", "body": "<p>I have a a base class and a derived class. The derived class has some additional functionality, and the user can switch between which class they're accessing.</p>\n\n<pre><code>class BaseClass {\nprivate:\n    string valid_operations[2] = {\"%\", \"#\"};\n};\n\nclass DerivedClass : BaseClass {\nprivate:\n    string valid_operations[4] = {\"!\", \"q\", \"%\", \"#\"};\n};\n</code></pre>\n\n<p>What I'm trying to do is instantiate a single object, and have the user be able to switch between these two objects interchangeably.</p>\n\n<p>For example:</p>\n\n<pre><code>BaseClass obj;\nstring input;\nwhile (true) {\n    cin &gt;&gt; input;\n    if (input == \"switch\")\n      obj = DerivedClass();\n    else\n      obj.apply_action(input);\n}\n</code></pre>\n\n<p>Is there a way to do this in C++? Also, is there a way I can declare <code>valid_operations</code> in <code>DerivedClass</code> to be <code>{\"!\", \"q\"} + BaseClass.valid_operations</code>?</p>\n"}, {"tags": ["c++", "linux", "c++11", "system", "std"], "comments": [{"owner": {"reputation": 781, "user_id": 11819469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd1083e1960d13ae760f3e72b8ee93b?s=128&d=identicon&r=PG&f=1", "display_name": "Akib Azmain", "link": "https://stackoverflow.com/users/11819469/akib-azmain"}, "edited": false, "score": 0, "creation_date": 1597940400, "post_id": 59295533, "comment_id": 112303186, "body": "You should put those strings inside single quotes, as those can contain special characters or malicious script."}], "answers": [{"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1576177244, "post_id": 59295568, "comment_id": 104824382, "body": "Note also that system calls the shell interpretter, so if the password (in particular) could contain characters that might be treated specially by the shell, even spaces, then you would need to quote it and/or escape those characters."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1597943674, "last_edit_date": 1597943674, "creation_date": 1576106368, "answer_id": 59295568, "question_id": 59295533, "link": "https://stackoverflow.com/questions/59295533/trying-to-pass-string-variables-into-stdsystem/59295568#59295568", "title": "Trying to pass string variables into std::system", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/utility/program/system\" rel=\"nofollow noreferrer\"><code>std::system()</code></a> takes a <code>const char*</code> as input, but you are trying to pass it a <a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> instead.  <code>std::string</code> is not <em>implicitly</em> convertible to <code>const char*</code>, hence the compiler error. However, you can use the string's <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str()</code></a> method to get a <code>const char*</code>, eg:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string cmd = &quot;perl zap2xml.pl -u '&quot; + mail + &quot;' -p '&quot; + password + &quot;' -o ~/.cache/pbt&quot;;\nstd::system(cmd.c_str());\n</code></pre>\n<p>Alternatively:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::system((&quot;perl zap2xml.pl -u '&quot; + mail + &quot;' -p '&quot; + password + &quot;' -o ~/.cache/pbt&quot;).c_str());\n</code></pre>\n<p>Note the <code>mail</code> and <code>password</code> strings are being wrapped inside of single quotes. This is because these two parameters can contain special characters or malicious code, and so should be escaped accordingly.</p>\n"}], "owner": {"reputation": 3, "user_id": 12521406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c758a2bbc60c1bbbb824d1e63440ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan_Realman", "link": "https://stackoverflow.com/users/12521406/jonathan-realman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 59295568, "answer_count": 1, "score": 0, "last_activity_date": 1597943674, "creation_date": 1576106087, "last_edit_date": 1597929728, "question_id": 59295533, "link": "https://stackoverflow.com/questions/59295533/trying-to-pass-string-variables-into-stdsystem", "title": "Trying to pass string variables into std::system", "body": "<h3>My code:</h3>\n<pre><code>std::string mail;\nstd::string password;\nstd::system(&quot;mkdir ~/.cache/pbt&quot;);\nstd::cout &lt;&lt; &quot;Enter your accounts mail&quot; &lt;&lt; std::endl;\nstd::cin &gt;&gt; mail;\nstd::cout &lt;&lt; &quot;Now enter your accounts password&quot;;\nstd::cin &gt;&gt; password;\nstd::system(&quot;perl zap2xml.pl -u &quot; + mail + &quot; -p &quot; + password + &quot; -o ~/.cache/pbt&quot;);\n</code></pre>\n<p>When I try to compile this code:</p>\n<h3>The compiler says</h3>\n<pre><code>main.cpp:13:62: error: cannot convert \u2018std::__cxx11::basic_string&lt;char&gt;\u2019 to \u2018const char*\u2019\n   13 | std::system(&quot;perl zap2xml.pl -u &quot; + mail + &quot; -p &quot; + password + &quot; -o ~/.cache/pbt&quot;);\n      |             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~\n      |                                                              |\n      |                                                              std::__cxx11::basic_string&lt;char&gt;\nIn file included from /usr/include/c++/9.2.0/cstdlib:75,\n                 from /usr/include/c++/9.2.0/ext/string_conversions.h:41,\n                 from /usr/include/c++/9.2.0/bits/basic_string.h:6493,\n                 from /usr/include/c++/9.2.0/string:55,\n                 from /usr/include/c++/9.2.0/bits/locale_classes.h:40,\n                 from /usr/include/c++/9.2.0/bits/ios_base.h:41,\n                 from /usr/include/c++/9.2.0/ios:42,\n                 from /usr/include/c++/9.2.0/ostream:38,\n                 from /usr/include/c++/9.2.0/iostream:39,\n                 from main.cpp:1:\n/usr/include/stdlib.h:784:32: note:   initializing argument 1 of \u2018int system(const char*)\u2019\n  784 | extern int system (const char *__command) __wur;\n      |                    ~~~~~~~~~~~~^~~~~~~~~\n</code></pre>\n<p>It looks like <code>std::system</code> can't read <code>std::string</code> variables and only can reads <code>const char*</code> , but there must be some way to do this.</p>\n<h3>How can I resolve this issue?</h3>\n"}, {"tags": ["c++", "pointers", "search", "vector"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576106599, "post_id": 59295484, "comment_id": 104795510, "body": "Your 1st and 2nd constructors are not initializing the <code>parent</code> pointer at all, so its value is <i>indeterminate</i>.  Those constructor should be setting the <code>parent</code> to <code>NULL</code>/<code>nullptr</code>, and then you need to check for <code>NULL</code>/<code>nullptr</code> before calling <code>parent-&gt;print()</code>"}, {"owner": {"reputation": 950, "user_id": 9116982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afc421c1de8249bb7a457825d4b2084?s=128&d=identicon&r=PG&f=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/9116982/lenz"}, "edited": false, "score": 0, "creation_date": 1576106709, "post_id": 59295484, "comment_id": 104795544, "body": "You should run it in Gdb and see what&#39;s happening"}, {"owner": {"reputation": 950, "user_id": 9116982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afc421c1de8249bb7a457825d4b2084?s=128&d=identicon&r=PG&f=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/9116982/lenz"}, "edited": false, "score": 0, "creation_date": 1576106792, "post_id": 59295484, "comment_id": 104795565, "body": "Once you&#39;re in that for loop you can use <code>watch current</code> to track the changes in the value of <code>current</code>"}], "owner": {"reputation": 13, "user_id": 9603875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed0db23242873c08aaf27e5d4fea12b?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Francisco Garcia", "link": "https://stackoverflow.com/users/9603875/juan-francisco-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576105653, "creation_date": 1576105653, "question_id": 59295484, "link": "https://stackoverflow.com/questions/59295484/vector-of-objects-that-contains-a-pointer-to-another-object-c", "title": "Vector of objects that contains a pointer to another object C++", "body": "<p>I have the class state_t with a pointer to a parent node of the same type</p>\n\n<pre><code>class state_t{\n    public : \n        int pos_bus, cost;\n        map&lt;int, vector&lt;int&gt;&gt; kids_waiting;\n        vector&lt;int&gt; kids_bus;\n        state_t* parent;\n        int g, f;\n\n        state_t(int _pos_bus, vector&lt;int&gt; _kids_bus, map&lt;int, vector&lt;int&gt;&gt; _kids_waiting) {\n            pos_bus = _pos_bus;\n            kids_bus = _kids_bus;\n            kids_waiting = _kids_waiting;\n            g = 0;\n            f = 0;\n        };\n\n        state_t() {};\n        state_t(state_t *parent_){\n            parent = parent_;\n            pos_bus = parent_-&gt;pos_bus;\n            kids_bus = parent_-&gt;kids_bus;\n            kids_waiting = parent_-&gt;kids_waiting;\n            f = parent_-&gt;f;\n            g = parent_-&gt;g;\n        };\n</code></pre>\n\n<p>The first constructor is only used for the first state_t object, the next ones will be created with the third constructor. Then i also have a <code>vector&lt;state_t&gt;</code>, when I generate new nodes I can print it and view that their parent pointer is what it should be, but after pushing it to a vector it changes it values.</p>\n\n<p>In the following code:</p>\n\n<pre><code>void astar::solve(problem_t problem){\n    state_t current = problem.initial_state;\n    bool success = false;\n\n    //We put the initial state in the opened list\n    open.push_back(current);\n\n    //while the list is not empty and no solution is found\n    while(!success &amp;&amp; !open.empty()){\n        //we get the last element of the opened list\n        current = open.back();\n\n\n        //we erase it from the opened list\n        open.pop_back();\n        //we add the state itself to the closed list\n        closed.push_back(current);\n\n        for(state_t succesor : problem.getSuccesors(current)){\n            if(!in(succesor, closed) ){\n                open.push_back(succesor);\n                //IF I MAKE PRINT OF PARENT HERE\n                 succesor.print();\n                 succesor.parent-&gt;print();\n            }\n        }      \n\n         // IF I PRINT HERE\n         current.print();\n         current.parent-&gt;print();\n    }\n}\n</code></pre>\n\n<p>In the first one I get the expected value:</p>\n\n<pre><code>CHILD NODE: &lt;1, &lt;  &gt;, [2]: &lt; 3 4 &gt;  &gt;\nf: 0g: 8\nPARENT NODE: &lt;0, &lt;  &gt;, [2]: &lt; 3 4 &gt;  &gt;\n</code></pre>\n\n<p>In the second parent is the same as child:</p>\n\n<pre><code>CHILD NODE: &lt;0, &lt;  &gt;,  &gt;\nf: 0g: 92\nPARENT NODE: &lt;0, &lt;  &gt;,  &gt;\nf: 0g: 92\n</code></pre>\n"}, {"tags": ["c++", "format", "try-catch", "clang-format", "catch-block"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7074281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d99eec882cab7cce0c1fa27dd48c59?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pitman", "link": "https://stackoverflow.com/users/7074281/alex-pitman"}, "is_accepted": false, "score": 0, "last_activity_date": 1576622711, "creation_date": 1576622711, "answer_id": 59383178, "question_id": 59295462, "link": "https://stackoverflow.com/questions/59295462/clang-format-catch-with-empty-statement-on-single-line/59383178#59383178", "title": "clang format catch with empty statement on single line", "body": "<p>For now my work around has been to keep SplitEmptyFunction as false and apply a post clang format hack to change the empty catch to be on a single line using a perl regex:</p>\n\n<pre><code>  # Hack - allow empty catch statements on a single line.\n  if ($line =~ /^.+catch.+$/ &amp;&amp;\n      $lines[$lineNo + 1] =~ /^ +\\{ *$/ &amp;&amp;\n      $lines[$lineNo + 2] =~ /^ +\\} *$/)\n  {\n    $line = $line.\" {}\";\n    # Flag following lines when iterated over to be ignored.\n    $lines[$lineNo + 1] = \"clang_format_no_op_entire_statement\";\n    $lines[$lineNo + 2] = \"clang_format_no_op_entire_statement\";\n  }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7074281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d99eec882cab7cce0c1fa27dd48c59?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pitman", "link": "https://stackoverflow.com/users/7074281/alex-pitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576622711, "creation_date": 1576105534, "question_id": 59295462, "link": "https://stackoverflow.com/questions/59295462/clang-format-catch-with-empty-statement-on-single-line", "title": "clang format catch with empty statement on single line", "body": "<p>I am wondering if it is possible to get clang format to have the following formatting for exception handling.</p>\n\n<pre><code>// Scenario 1: Catch and ignore exception\ntry\n{\n  DoWork();\n}\ncatch (const SomeException&amp;) {}\n\n// Scenario 2: Handle exception\ntry\n{\n  DoWork();\n}\ncatch (const SomeException&amp; Exception)\n{\n  // Code handling exception.\n}\n</code></pre>\n\n<p>I have not been able to get scenario 1 formatting on a single line it prefers to put a new line before the { and then depending on SplitEmptyFunction will be:</p>\n\n<pre><code>// Scenario 1: Catch and ignore exception (SplitEmptyFunction is true)\ntry\n{\n  DoWork();\n}\ncatch (const SomeException&amp;)\n{}\n\n// Scenario 1: Catch and ignore exception (SplitEmptyFunction is false)\ntry\n{\n  DoWork();\n}\ncatch (const SomeException&amp;)\n{\n}\n</code></pre>\n\n<p>Have I missed a setting or is this just not possible?</p>\n"}, {"tags": ["c++", "arrays", "file"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1576105279, "post_id": 59295367, "comment_id": 104795135, "body": "First of all, test for <code>testFile.good()</code> to see if you opened the file successfully. This is probably your problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576105556, "post_id": 59295367, "comment_id": 104795230, "body": "I don&#39;t think you are reading from the file at all."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1576116900, "post_id": 59295367, "comment_id": 104797673, "body": "Does not look like <code>ifstream testFile(&quot;test.txt&quot;);</code> succeeds. You must validate whether it does by either checking <code>testFile.good()</code> or in validating each read operation <code>if (!(testFile &gt;&gt; score)) { &#47;* handle error *&#47; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 0, "creation_date": 1576125629, "post_id": 59297106, "comment_id": 104799392, "body": "I&#39;m sure this would work and I can see why it would but I still have an issue opening the file. It always results in an error when testing the file. I even followed your example exactly and it still didn&#39;t work. The file is within the resource files of my Visual Studio project. I&#39;ll keep trying and hopefully get it tomorrow. I&#39;ll post the working code if I ever do."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 2, "creation_date": 1576125717, "post_id": 59297106, "comment_id": 104799412, "body": "(1) are you using an IDE? (2) if so, I suspect you are having a path problem. If you are using the command line, then you can specify the path on the command line. Let me know which and we can work through the problem."}, {"owner": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 0, "creation_date": 1576128083, "post_id": 59297106, "comment_id": 104799986, "body": "Yes, I&#39;m using Visual Studio 2017. I placed the test.txt file into the &quot;resource files&quot; folder on the right side. It&#39;s still only going through the if statement where it would tell the user that there was an error opening the file. I&#39;m also using some examples that my professor gave us when we first learned about files weeks ago."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 1, "creation_date": 1576129970, "post_id": 59297106, "comment_id": 104800512, "body": "Good, you have VS2017. See <a href=\"https://dailydotnettips.com/how-to-pass-command-line-arguments-using-visual-studio/\" rel=\"nofollow noreferrer\">How to Pass Command Line Arguments using Visual Studio ?</a>. You have another option. In the VS2017 menu folder, open the <code>VS Developers Command Prompt</code>. This gives you the complete freedom of a command line for VS2017. Now simply <code>cd \\Users\\you\\path\\to\\your\\project</code> and put your <code>test.txt</code> there. Then simply run <code>nameofproject.exe</code> test.txt` and it will find your file. This is why I hate IDEs for new programmers. You are not stuck on C, you are stuck on <code>How do I configure VS?</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 1, "creation_date": 1576130081, "post_id": 59297106, "comment_id": 104800544, "body": "(sorry for the delay, my daughter was playing League and a spurious IPv6 packet locked the router -- with 2 routers (smart switches), a WLAN/wifi router and 3 hubs it took a white to figure out which was locked....)"}, {"owner": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 0, "creation_date": 1576131808, "post_id": 59297106, "comment_id": 104801085, "body": "Okay, I&#39;ll definitely try this tomorrow when I&#39;ve the time. I don&#39;t mind the delay. I&#39;m just glad to have some help. And the Visual Studio IDE is a pain sometimes."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576157533, "post_id": 59297106, "comment_id": 104813683, "body": "The file should probably be in the same folder as your project. The default debugging settings set the working directory to $(ProjectDir)"}, {"owner": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "edited": false, "score": 0, "creation_date": 1576173419, "post_id": 59297106, "comment_id": 104822787, "body": "It indeed was a problem with the file&#39;s path. It had to be placed in the source directory and not in the reference."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1576197792, "post_id": 59297106, "comment_id": 104830996, "body": "Good deal. Glad you got it working. IDEs are nice, but often they can frustrate simple tasks by requiring you to navigate 3+ levels of nested dialogs just to find the correct place to add an argument for your program, or struggling to write a <code>launch.vs.json</code> file to pass them. MS did a good job including the <code>VS Developers Command Prompt</code> as part of the package. You can compile and run any program you like without having to worry with setting up a project, etc.. (and you learn what compiler options you actually need and how to use them). Then you can tell the IDE what to do."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1576120955, "last_edit_date": 1576120955, "creation_date": 1576119685, "answer_id": 59297106, "question_id": 59295367, "link": "https://stackoverflow.com/questions/59295367/reading-a-file-and-storing-its-contents-into-a-2-d-array-c/59297106#59297106", "title": "Reading a file and storing its contents into a 2-D Array C++", "body": "<p>The output suggests your attempt to open your file with <code>ifstream testFile(\"test.txt\");</code> fails. You never validate whether the file is open and you fail to validate every read so you have no way of knowing your file never opened.</p>\n\n<p>When handling input, you must <strong><em>validate</em></strong> every operation. You can do that by validating the stream-state <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios\" rel=\"nofollow noreferrer\">std::basic_ios</a> provides member functions allowing you to check your stream state through the member functions <code>.good(), .eof(), .fail() &amp; .bad()</code>. You should validate the stream state immediately after attempting to open the file. Either explicitly with <code>.good()</code> or implicitly by validating that every attempted read from the file succeeds.</p>\n\n<p>In your case you could do:</p>\n\n<pre><code>/* read test scores from file 'fname' */\nvoid getTests(double testScores[][T], std::string fname)\n{\n    std::ifstream testFile (fname); /* open file */\n    double score;\n\n    if (!testFile.good()) { /* validate file is open for reading */\n        std::cerr &lt;&lt; \"error: file open failed - \" &lt;&lt; fname &lt;&lt; '\\n';\n        return;\n    }\n</code></pre>\n\n<p>(<strong>note:</strong> don't hardcode filenames in your code, especially not buried down in a function. Pass the filename as a parameter, or better, open the file in the caller and pass an open file-stream as a parameter after validating the open succeeded in the caller. No need to make the function call to begin with if the file cannot be successfully opened...)</p>\n\n<p>When you read the scores from the file, you must <strong><em>validate every read</em></strong>. You can do this by controlling your read-loop with the result of the read itself. A simple remainder of the <code>getTests()</code> function could be:</p>\n\n<pre><code>    for (int student = 0; testFile.good() &amp;&amp; student &lt; S; student++) {\n        int test = 0;\n        std::cout &lt;&lt; \"Student \" &lt;&lt; student + 1 &lt;&lt; '\\n';\n        while (test &lt; T &amp;&amp; testFile &gt;&gt; score) { /* validate EVERY input */\n            testScores[student][test] = score;  /* store value in array */\n            std::cout &lt;&lt; \"Test \" &lt;&lt; ++test &lt;&lt; '\\n' &lt;&lt; score &lt;&lt; '\\n';\n        }\n    }\n}\n</code></pre>\n\n<p>Above the read-loop is conditioned upon <code>test &lt; T</code> and <code>testFile &gt;&gt; score</code>. If your read of <code>score</code> fails, your loop exits. Similarly, since you are using nested loops to read a certain number of students, your outer loop only increments while <code>testFile.good()</code> remains true.</p>\n\n<p>Putting it altogether, your short example would be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nconst int S = 3;    /* number of students */\nconst int T = 4;    /* number of scores per-student */\n\nvoid getTests(double[][T], std::string fname);  /* pass filename as parameter */\n\nint main (int argc, char **argv) {\n\n    double testScores[S][T];\n    std::string filename = argc &gt; 1 ? argv[1] : \"test.txt\";\n\n    getTests (testScores, filename);\n}\n\n/* read test scores from file 'fname' */\nvoid getTests(double testScores[][T], std::string fname)\n{\n    std::ifstream testFile (fname); /* open file */\n    double score;\n\n    if (!testFile.good()) { /* validate file is open for reading */\n        std::cerr &lt;&lt; \"error: file open failed - \" &lt;&lt; fname &lt;&lt; '\\n';\n        return;\n    }\n\n    for (int student = 0; testFile.good() &amp;&amp; student &lt; S; student++) {\n        int test = 0;\n        std::cout &lt;&lt; \"Student \" &lt;&lt; student + 1 &lt;&lt; '\\n';\n        while (test &lt; T &amp;&amp; testFile &gt;&gt; score) { /* validate EVERY input */\n            testScores[student][test] = score;  /* store value in array */\n            std::cout &lt;&lt; \"Test \" &lt;&lt; ++test &lt;&lt; '\\n' &lt;&lt; score &lt;&lt; '\\n';\n        }\n    }\n}\n</code></pre>\n\n<p>(<strong>note:</strong> the program expects the filename to read from as the 1<sup>st</sup> argument to the program. If no argument is provided, your program will attempt to read from <code>test.txt</code> by default. Also <strong>note:</strong> you generally want to avoid including the entire <code>namespace std</code> in your code. It's up to you, but it is generally frowned upon.)</p>\n\n<p><strong>Example Input File</strong></p>\n\n<pre><code>$ cat dat/test12elements.txt\n70\n80\n90\n75\n85\n90\n60\n80\n80\n90\n80\n75\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/studentscores dat/test12elements.txt\nStudent 1\nTest 1\n70\nTest 2\n80\nTest 3\n90\nTest 4\n75\nStudent 2\nTest 1\n85\nTest 2\n90\nTest 3\n60\nTest 4\n80\nStudent 3\nTest 1\n80\nTest 2\n90\nTest 3\n80\nTest 4\n75\n</code></pre>\n\n<p>Look things over and let me know if you have further questions. Additionally, instead of storing the scores in a plain-old-array of <code>double</code>, consider using <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> or <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> instead. You can even create a short struct or <code>std::unordered_set</code> to allow you to store the student name along with the array or vector of test scores.</p>\n"}], "owner": {"reputation": 11, "user_id": 12345655, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBARTnYhFV31kEVMhTO5Ijz5XCxpk5Xbmy3K4hXog=k-s128", "display_name": "MrAmbiguous", "link": "https://stackoverflow.com/users/12345655/mrambiguous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 59297106, "answer_count": 1, "score": 0, "last_activity_date": 1576120955, "creation_date": 1576104883, "last_edit_date": 1576118757, "question_id": 59295367, "link": "https://stackoverflow.com/questions/59295367/reading-a-file-and-storing-its-contents-into-a-2-d-array-c", "title": "Reading a file and storing its contents into a 2-D Array C++", "body": "<p>I've been trying to create a function that reads a file named \"test.txt\" and stores its contents into a 2-D array to be used in other functions. </p>\n\n<p>It appears to be reading something from the text file but it only repeats \"-9.25996e+61\" in the areas where the test.txt numbers should be.</p>\n\n<p>Any help would be appreciated, thanks.</p>\n\n<blockquote>\n  <p>the \"test.txt\" file contains the following 12 elements. They are aligned vertically in the document:</p>\n</blockquote>\n\n<pre><code>70\n80\n90\n75\n85\n90\n60\n80\n80\n90\n80\n75\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\n//S is the # of students and T is the number of test scores per student\nconst int S = 3;\nconst int T = 4;\n\nvoid getTests(double[][T]);\n\nint main()\n{\n    double testScores[S][T];\n    getTests(testScores);\n}\n//*******************\n//Gets test scores\nvoid getTests(double testScores[S][T])\n{\n    ifstream testFile(\"test.txt\");\n\n    double score;\n\n    for (int student = 0; student &lt; S; student++)\n    {\n        cout &lt;&lt; \"Student \" &lt;&lt; student + 1 &lt;&lt; endl;\n        for (int test = 0; test &lt; T; test++)\n        {\n            testFile &gt;&gt; score;\n            cout &lt;&lt; \"Test \" &lt;&lt; test + 1 &lt;&lt; endl;\n            cout &lt;&lt; score &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>The above code's output:</p>\n\n<pre><code>Student 1\nTest 1\n9.25596e+61\nTest 2\n9.25596e+61\nTest 3\n9.25596e+61\nTest 4\n9.25596e+61\nStudent 2\nTest 1\n9.25596e+61\nTest 2\n9.25596e+61\nTest 3\n9.25596e+61\nTest 4\n9.25596e+61\nStudent 3\nTest 1\n9.25596e+61\nTest 2\n9.25596e+61\nTest 3\n9.25596e+61\nTest 4\n9.25596e+61\n</code></pre>\n"}, {"tags": ["c++", "template-argument-deduction"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 3, "creation_date": 1576103853, "post_id": 59295158, "comment_id": 104794708, "body": "<code>const int*</code> is a pointer to a constant int. Since <code>Iterator</code> is deduced as &quot;pointer to an int&quot; in the first parameter, <code>const Iterator</code> is a &quot;constant pointer to an int&quot;, which is a different type. try <code>int* const</code> instead for cp1"}], "answers": [{"comments": [{"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1576104861, "post_id": 59295214, "comment_id": 104795017, "body": "Ah ok I understand. But then the only way to get around it is to declare a second template parameter? I was hoping there was a more constrained way (yet not too heavy) to get around..."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1576105270, "post_id": 59295214, "comment_id": 104795131, "body": "@B&#233;renger A simple way is to introduce a second template argument like class Iterator2."}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1576158446, "post_id": 59295214, "comment_id": 104814208, "body": "Yes I know but then there is no constrain on this <code>Iterator2</code> class, whereas it should be the const version of <code>Iterator</code>"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1576104009, "creation_date": 1576104009, "answer_id": 59295214, "question_id": 59295158, "link": "https://stackoverflow.com/questions/59295158/template-argument-deduction-failing-for-const-pointers/59295214#59295214", "title": "Template argument deduction failing for const pointers", "body": "<p>The Iterator can be either <code>int *</code> or <code>const int *</code>. The qualifier const of the second function parameter means either <code>int * const</code> or <code>const int * const</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576251308, "last_edit_date": 1576251308, "creation_date": 1576183049, "answer_id": 59312348, "question_id": 59295158, "link": "https://stackoverflow.com/questions/59295158/template-argument-deduction-failing-for-const-pointers/59312348#59312348", "title": "Template argument deduction failing for const pointers", "body": "<p>You could create a trait to check if the iterator is an iterator over const values.</p>\n\n<pre><code>#include &lt;iterator&gt;    // iterator_traits\n#include &lt;type_traits&gt; // is_const_v, remove_pointer_t, enable_if_t\n\ntemplate&lt;typename T&gt;\nstruct is_const_iterator {\n    // Define a pointer type to the type iterated over. Something already a pointer\n    // will still be a pointer\n    using pointer = typename std::iterator_traits&lt;T&gt;::pointer;\n\n    // Remove the pointer part from the type and check for constness.\n    static const bool value = std::is_const_v&lt;std::remove_pointer_t&lt;pointer&gt;&gt;;\n};\n\n// Helper variable template to simplify the use of the above.\ntemplate&lt;class T&gt;\ninline constexpr bool is_const_iterator_v = is_const_iterator&lt;T&gt;::value;\n</code></pre>\n\n<p>SFINAE use of <code>is_const_iterator_v</code></p>\n\n<pre><code>template&lt;class It, class CIt, std::enable_if_t&lt;is_const_iterator_v&lt;CIt&gt;, int&gt; = 0&gt;\nvoid f(It x, CIt y) {\n    //for(; x != y; ++x) std::cout &lt;&lt; *x &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Alternatively, if your function doesn't have other overloads (does not need SFINAE), you can use <code>static_assert</code> to make it even clearer for the user:</p>\n\n<pre><code>template&lt;class It, class CIt&gt;\nvoid f(It x, CIt y) {\n    static_assert(is_const_iterator_v&lt;CIt&gt;, \"Arg 2 must be a const iterator\");\n    //for(; x != y; ++x) std::cout &lt;&lt; *x &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main() {\n    int values[]{1, 2};\n\n    int* pi = values;\n    const int* cpi = values + std::size(values);\n\n    std::vector&lt;int&gt; v{3, 4};\n\n    f(pi, cpi);\n    f(v.begin(), v.cend());\n    // f(pi, pi);             // error, pi is non-const\n    // f(v.begin(), v.end()); // error v.end() is non-const\n}\n</code></pre>\n"}], "owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 59312348, "answer_count": 2, "score": 1, "last_activity_date": 1576251308, "creation_date": 1576103666, "question_id": 59295158, "link": "https://stackoverflow.com/questions/59295158/template-argument-deduction-failing-for-const-pointers", "title": "Template argument deduction failing for const pointers", "body": "<p>I don't understand why template argument deduction fails in this case:</p>\n\n<pre><code>template&lt;class Iterator&gt; void\nf(Iterator x, const Iterator y) {}\n\nint main()\n{\n    const int* cpi;\n    int* pi;\n    f(pi,cpi);\n}\n</code></pre>\n\n<p>Why does <code>Iterator</code> does not deduce to <code>int*</code> for the second parameter?</p>\n\n<p>What would be the most idiomatic declaration for <code>f</code>?</p>\n"}, {"tags": ["c++", "arrays", "return", "n-queens"], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1576108639, "post_id": 59295368, "comment_id": 104796033, "body": "then a question pops up in my mind. Why would he need a return value when the only thing the function can return is <code>board</code>"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1576108900, "post_id": 59295368, "comment_id": 104796086, "body": "It doesn&#39;t, as far as I can tell. Possibly a stepping ground?"}], "tags": [], "owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "is_accepted": true, "score": 1, "last_activity_date": 1576104883, "creation_date": 1576104883, "answer_id": 59295368, "question_id": 59295102, "link": "https://stackoverflow.com/questions/59295102/n-queens-problem-returning-array-from-functions-c/59295368#59295368", "title": "N-Queens problem. Returning array from functions c++", "body": "<p>Your recursive calls don't return anything. With all warnings on, you should be seeing something about \"not all control paths return a value\". Change your recursive calls to</p>\n\n<pre><code>return Successor( board, n );\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12521261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4314d27d992ffc308b243ac32f5f8df?s=128&d=identicon&r=PG&f=1", "display_name": "wowisbad", "link": "https://stackoverflow.com/users/12521261/wowisbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59295368, "answer_count": 1, "score": 1, "last_activity_date": 1576104883, "creation_date": 1576103432, "question_id": 59295102, "link": "https://stackoverflow.com/questions/59295102/n-queens-problem-returning-array-from-functions-c", "title": "N-Queens problem. Returning array from functions c++", "body": "<p>While trying to solve the n-queens problem in c++. I came across this error where I would get the correct answer but when returning the array pointer, I end up getting garbage numbers instead of my answer. The weird part about this is that I use recursion to solve the problem and I only get garbage numbers when the recursion gets used (even though it correctly passes through the recursion). The array is completely correct before returning it.</p>\n\n<pre><code>int* Successor(int board[], int n) {\n    bool currentlyLegal = isLegalPosition(board, n);\n    int firstZero = -1;\n    int templast;\n\n    for(int i = 0; i &lt; n; i++) {\n        if(board[i] == 0) {\n            firstZero = i;\n            break;\n        }\n    }\n\n    if(currentlyLegal) {\n        if(firstZero != -1) {\n            for(int i = 1; i &lt; n; i++) {\n                board[firstZero] = i;\n                if(isLegalPosition(board, n) &amp;&amp; i != lastNum) {\n                    return board;\n                }\n            }\n            lastNum = -1;\n            board[firstZero - 1] = 0;\n            Successor(board, n);\n        } else {\n            templast = board[n - 1];\n            for(int i = board[n - 1]; i &lt; n; i++) {\n                board[n - 1] = i;\n                if(isLegalPosition(board, n) &amp;&amp; i != board[n-1] &amp;&amp; i != lastNum) {\n                    return board;\n                }\n            }\n            lastNum = templast;\n            board[n - 1] = 0;\n            Successor(board, n);\n        }\n    } else {\n        if(firstZero != -1) {\n            if(firstZero != 0) {\n                for(int i = board[firstZero - 1]; i &lt; n; i++) {\n                    board[firstZero - 1] = i;\n                    if(isLegalPosition(board, n) &amp;&amp; i != board[firstZero - 1]) {\n                        return board;\n                    }\n                }\n                lastNum = -1;\n                board[firstZero - 1] = 0;\n                Successor(board, n);\n            } else {\n                board[0] = 1;\n                return board;\n            }\n        } else {\n            templast = board[n - 1];\n            for(int i = board[n - 1]; i &lt; n; n++) {\n                board[n - 1] = i;\n                if(isLegalPosition(board, n) &amp;&amp; i != board[n - 1] &amp;&amp; i != templast) {\n                    return board;\n                }\n            }\n            lastNum = templast;\n            board[n - 1] = 0;\n            Successor(board, n);\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "api", "service"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576105184, "post_id": 59295036, "comment_id": 104795110, "body": "What is the result of <code>GetLastError</code>? Is it access denied, or something else?"}, {"owner": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576105843, "post_id": 59295036, "comment_id": 104795314, "body": "error 5 Access Denied"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "edited": false, "score": 0, "creation_date": 1576111588, "post_id": 59295851, "comment_id": 104796648, "body": "thanks for correcting the last part of the code but I still get an access denied error, can you tell me how or where to find info on one of the solutions that you suggest?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "edited": false, "score": 0, "creation_date": 1576112906, "post_id": 59295851, "comment_id": 104796889, "body": "As I said in my answer: &quot;<i>If you still get an &quot;Access Denied&quot; error after fixing this in your code, then the service really requires your account to have permissions to start/stop the service.</i>&quot;  So this becomes a permissions issue, not a coding issue. If you want to solve this in code, you could separate your restart code into its own function, and then if it fails with &quot;access denied&quot; and you are not already running elevated then use <code>ShellExecute&#47;Ex(&quot;runas&quot;)</code> to run a new elevated copy of your EXE passing it a command-line parameter that tells it to only call that function and then exit."}, {"owner": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "edited": false, "score": 0, "creation_date": 1576113235, "post_id": 59295851, "comment_id": 104796953, "body": "I tried reading some articles on the net but I don&#39;t understand why my account can restart the service manually but not via the code. Would the ShellExecute/Ex(&quot;runas&quot;)  not trigger a uac?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "edited": false, "score": 0, "creation_date": 1576113710, "post_id": 59295851, "comment_id": 104797037, "body": "Obviously the native SCM app is running with a user account that has more permissions than your user account has when running your app. So figure out why your user account is lacking the permissions you want. Or just make sure your app is run as an elevated admin user to begin with. And yes, <code>ShellExecute&#47;Ex(&quot;runas&quot;)</code> would trigger UAC, that is the whole point - to start a new process that has elevated permissions when started by a process that is lacking them."}, {"owner": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "edited": false, "score": 0, "creation_date": 1576154272, "post_id": 59295851, "comment_id": 104811900, "body": "this seems to work  <code>CreateProcessWithLogonW(L&quot;Administrator&quot;,L&quot;MyPC&quot;,L&quot;Password&quot;&zwnj;&#8203;,LOGON_WITH_PROFILE,&zwnj;&#8203;NULL,szCmdline,CREAT&zwnj;&#8203;E_NEW_CONSOLE, NULL, NULL, &amp;siStartInfo, &amp;processInfo)</code> So with my current account which is a domain account and a member of local administrator it does not work, but with the builtin administrator account it works. Can you or somebody else explain to me why it works with my domain account when I restart the service from the services.msc without any uac or elevation that I can observe"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1576109587, "last_edit_date": 1576109587, "creation_date": 1576108539, "answer_id": 59295851, "question_id": 59295036, "link": "https://stackoverflow.com/questions/59295036/c-restart-service-in-windows-as-admin/59295851#59295851", "title": "c++ restart service in windows as admin", "body": "<p>You are asking for too many permissions that you don't actually need. Don't use <code>SC_MANAGER_ALL_ACCESS</code> and <code>SERVICE_ALL_ACCESS</code>. NEVER ask for more permissions than you really need.  All you really need in this situation are <code>SC_MANAGER_CONNECT</code> for <code>OpenSCManager()</code>, and <code>SERVICE_STOP</code>, <code>SERVICE_START</code> and <code>SERVICE_QUERY_STATUS</code> for <code>OpenService()</code>.</p>\n\n<p>If you still get an \"Access Denied\" error after fixing this in your code, then the service really requires your account to have permissions to start/stop the service.  So either run your code in an elevated admin process, or at least configure your user account with the appropriate permissions.</p>\n\n<p>And FYI, your query loop is too minimalistic. You are ignoring the <code>Status</code> that <code>ControlService()</code> reports, and you are not accounting for the possibility of the service entering a pending state, or refusing to stop. You need to check the initial status, only if it is in a pending state than enter the query loop until it is no longer in a pending state, then check the final state for stopped before then attempting to start the service. Also be sure to check if the service hangs while trying to stop it.</p>\n\n<p>See <a href=\"https://docs.microsoft.com/en-us/windows/win32/services/stopping-a-service\" rel=\"nofollow noreferrer\">Stopping a Service</a> on MSDN.</p>\n\n<p>Try something more like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto showError = []()\n{\n    DWORD err = GetLastError();\n    qDebug() &lt;&lt; \"Restart PostgreSQL service failed. Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n};\n\nSERVICE_STATUS Status;\n\nSC_HANDLE SCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CONNECT);\nif (!SCManager)\n{\n    showError();\n    return;\n}\n\nSC_HANDLE SHandle = OpenService(SCManager, L\"postgres\", SERVICE_STOP | SERVICE_START | SERVICE_QUERY_STATUS);\nif (!SHandle)\n{\n    showError();\n    CloseServiceHandle(SCManager);\n    return;\n}\n\nif (!QueryServiceStatus(SHandle, &amp;Status))\n{\n    showError(); \n    CloseServiceHandle(SHandle);\n    CloseServiceHandle(SCManager);\n    return;\n}\n\nif (Status.dwCurrentState != SERVICE_STOPPED)\n{\n    qDebug() &lt;&lt; \"Stopping PostgreSQL service...\\n\";\n\n    if (!ControlService(SHandle, SERVICE_CONTROL_STOP, &amp;Status))\n    {\n        showError();\n        CloseServiceHandle(SHandle);\n        CloseServiceHandle(SCManager);\n        return;\n    }\n\n    DWORD dwStartTime = GetTickCount();\n    DWORD dwTimeout = 30000; // 30-second time-out\n    DWORD dwWaitTime;\n\n    while (Status.dwCurrentState == SERVICE_STOP_PENDING)\n    {\n        qDebug() &lt;&lt; \"Waiting for PostgreSQL service to stop...\\n\";\n\n        dwWaitTime = Status.dwWaitHint / 10;\n        if (dwWaitTime &lt; 1000)\n            dwWaitTime = 1000;\n        else if (dwWaitTime &gt; 10000)\n            dwWaitTime = 10000;\n\n        Sleep(dwWaitTime);\n\n        if (!QueryServiceStatus(SHandle, &amp;Status))\n        {\n            showError();\n            CloseServiceHandle(SHandle);\n            CloseServiceHandle(SCManager);\n            return;\n        }\n\n        if (Status.dwCurrentState != SERVICE_STOP_PENDING)\n            break;\n\n        if (GetTickCount() - dwStartTime &gt; dwTimeout)\n        {\n            qDebug() &lt;&lt; \"Stop of PostgreSQL service timed out.\\n\";\n            CloseServiceHandle(SHandle);\n            CloseServiceHandle(SCManager);\n            return;\n        }\n    }\n\n    if (Status.dwCurrentState != SERVICE_STOPPED)\n    {\n        qDebug() &lt;&lt; \"Restart PostgreSQL service failed. Service did not stop.\\n\";\n        CloseServiceHandle(SHandle);\n        CloseServiceHandle(SCManager);\n        return;\n    }\n\n    qDebug() &lt;&lt; \"PostgreSQL service stopped successfully.\\n\";\n}\n\nif (!StartService(SHandle, 0, NULL))\n    showError();\n\nCloseServiceHandle(schService); \nCloseServiceHandle(schSCManager);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2711153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70e04faf1dd1697d46849192a20c9d7?s=128&d=identicon&r=PG&f=1", "display_name": "xyfix", "link": "https://stackoverflow.com/users/2711153/xyfix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576109587, "creation_date": 1576103058, "question_id": 59295036, "link": "https://stackoverflow.com/questions/59295036/c-restart-service-in-windows-as-admin", "title": "c++ restart service in windows as admin", "body": "<p>I'm trying to restart the \"postgres\" service in my C++ application on windows 10 but I having some problems with access rights( my guess ). I have tried running the code as a domain user that has local admin rights and as a local administrator but none of these seem to work. I can restart the service manually via the services.msc. The code fails already at OpenSCManager which returns NULL. I have also tried other access rights but then OpenService fails. This is my code</p>\n\n<pre><code>auto showError = []()\n{\n    std::ostringstream os;\n    os &lt;&lt; GetLastError();\n\n    qDebug() &lt;&lt; \"Restart PostgreSQL service failed : \" &lt;&lt; QString::fromStdString( os.str());\n};\n\nSERVICE_STATUS Status;\n\nSC_HANDLE SCManager = OpenSCManager(NULL, SERVICES_ACTIVE_DATABASE, SC_MANAGER_ALL_ACCESS );\n\nif(SCManager == NULL)\n    showError();\n\nSC_HANDLE SHandle = OpenService(SCManager, L\"postgres\", SERVICE_ALL_ACCESS );\n\nif(SHandle == NULL)\n    showError();\n\nif(!ControlService(SHandle, SERVICE_CONTROL_STOP, &amp;Status))\n    showError();\n\ndo\n{\n    QueryServiceStatus(SHandle, &amp;Status);\n    qDebug() &lt;&lt; \"Checking Service Status...\\n\";\n}while(Status.dwCurrentState != SERVICE_STOPPED);\n\n\nif(!StartService(SHandle, 0, NULL))\n    showError();\n\nstd::cin.sync();\nstd::cin.ignore();\n\nCloseServiceHandle(SCManager);\nCloseServiceHandle(SHandle);\n</code></pre>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576102923, "post_id": 59294922, "comment_id": 104794413, "body": "<a href=\"https://stackoverflow.com/q/12573816/5910058\">stackoverflow.com/q/12573816/5910058</a>"}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576103099, "post_id": 59294922, "comment_id": 104794476, "body": "Thanks, i&#39;ll look over it. But it does not really answer my question since i can understand where is my mistake but have no clue how to fix it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1576104557, "post_id": 59294922, "comment_id": 104794916, "body": "This error - a failure to link a standard library function - suggests a problem with your build system that we cannot possibly see from here, sorry. You would need to give much more information about your environment, tools, versions of your tools, settings, actions/commands... pretend we are not sitting there right with you because, well, we&#39;re not."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576104695, "post_id": 59294922, "comment_id": 104794959, "body": "So... i can probably compile it if i just reinstall Codeblocks with default settings?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576104913, "post_id": 59294922, "comment_id": 104795030, "body": "<b><i>i can probably compile it if i just reinstall Codeblocks with default settings?</i></b> I am doubtful that reinstalling your IDE this will help at all."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576105021, "post_id": 59294922, "comment_id": 104795055, "body": "And what to do with that kind of error? Where to find a way to solve this?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576105158, "post_id": 59294922, "comment_id": 104795103, "body": "You have to understand the build process. And debug it. Could be caused by a bad setting you changed in your project."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576105637, "post_id": 59294922, "comment_id": 104795251, "body": "I tried to recreate project with default settings, but that doesn&#39;t help."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576106006, "post_id": 59294922, "comment_id": 104795363, "body": "Create a simple &quot;Hello World&quot; application."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576106307, "post_id": 59294922, "comment_id": 104795431, "body": "Well, actually i recreated the project one time again, one file by another, and it worked. Maybe there something worked incorrectly when i added multiple files to the existing project. Not i&#39;m messing with other mistaked :D"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576106348, "post_id": 59294922, "comment_id": 104795444, "body": "That is unusual, I don&#39;t have a good reason."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576107062, "post_id": 59294922, "comment_id": 104795630, "body": "Well.. actually it only worked because i inserted #include &quot;program.cpp&quot; to the main.cpp, but it took me to the &quot;redefinition of class&quot; error. well, since i can&#39;t really solve it now, gotta go for sleep, maybe tomorrow i&#39;ll find the answer (or delete this question)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576107172, "post_id": 59294922, "comment_id": 104795659, "body": "That means <code>program.cpp</code> was not part of your project."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576107197, "post_id": 59294922, "comment_id": 104795664, "body": "Was <b><i>undefined reference to operator&lt;&lt;(std::ostream&amp;, char const</i>)</b> the exact text of the error message?"}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576135051, "post_id": 59294922, "comment_id": 104802229, "body": "Yes, it is. Actually i get same error even if i try to include &quot;cout &lt;&lt;&quot; into main.cpp."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576134966, "post_id": 59296081, "comment_id": 104802206, "body": "I made a function Auto::~Auto(){ cout &lt;&lt; &quot;Object was killed!&quot; &lt;&lt; endl; } But it does not help. And actually even if i try to include &quot;cout&quot; in my main.cpp, i get the exaxt error message."}, {"owner": {"reputation": 472, "user_id": 1231862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WBmX0.jpg?s=128&g=1", "display_name": "ozox", "link": "https://stackoverflow.com/users/1231862/ozox"}, "reply_to_user": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576176320, "post_id": 59296081, "comment_id": 104824016, "body": "It is likely your compiler setup is not finding the library files for stdc++."}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "edited": false, "score": 0, "creation_date": 1576189167, "post_id": 59296081, "comment_id": 104828903, "body": "Thanks, you were close, i actually haven&#39;t added one necessary library. I have simplified and translated code to english to make it look better, but since i deleted line #include &lt;lvtocon.h&gt; from the description it was impossible to find the answer. Should i delete my question?"}], "tags": [], "owner": {"reputation": 472, "user_id": 1231862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WBmX0.jpg?s=128&g=1", "display_name": "ozox", "link": "https://stackoverflow.com/users/1231862/ozox"}, "is_accepted": false, "score": -1, "last_activity_date": 1576110804, "creation_date": 1576110804, "answer_id": 59296081, "question_id": 59294922, "link": "https://stackoverflow.com/questions/59294922/include-lvtocon-h-undefined-reference-to-operatorstdostream-char-cons/59296081#59296081", "title": "include &quot;lvtocon.h&quot;, undefined reference to `operator&lt;&lt;(std::ostream&amp;, char const*)", "body": "<p>You don't seem to implement your destructor. Please try to include the implementation of ~A() {}.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1576190787, "post_id": 59313484, "comment_id": 104829346, "body": "sounds like this header defines macros that change <code>&lt;iostream&gt;</code>? What happens if you include it after <code>&lt;iostream&gt;</code> instead?"}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576312664, "post_id": 59313484, "comment_id": 104865537, "body": "The place of ` #include &quot;lvfriendly.h&quot; ` stroke does not affect the program. It&#39;s just a library that allows to use latvian symbols in the program, so i don&#39;t think it changes iostream. P. S. Sorry, i have messed up &quot;&quot; and &lt;&gt; in the other comment."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576316227, "post_id": 59313484, "comment_id": 104866106, "body": "Well your answer makes no sense then, <code>operator&lt;&lt;(std::ostream&amp;, char const*)</code> is part of the standard library and has nothing to do with any addon"}, {"owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577001608, "post_id": 59313484, "comment_id": 105068349, "body": "Well, it was the only step that helped me with that mistake. Nothing else worked and each time i returned my program to the original condition."}], "tags": [], "owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "is_accepted": false, "score": 0, "last_activity_date": 1576189019, "creation_date": 1576189019, "answer_id": 59313484, "question_id": 59294922, "link": "https://stackoverflow.com/questions/59294922/include-lvtocon-h-undefined-reference-to-operatorstdostream-char-cons/59313484#59313484", "title": "include &quot;lvtocon.h&quot;, undefined reference to `operator&lt;&lt;(std::ostream&amp;, char const*)", "body": "<p>In my case, the problem was that I did not include all the necessary libraries in the project.\nFor latvian language support i used library lvtocon.h and lvtocon.cpp, but since my program has include and didn't see the file, it would not run succesfully. </p>\n\n<p>After adding all the necessary files to the project it compiled succesfully.</p>\n"}], "owner": {"reputation": 23, "user_id": 12228598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666436043486861/picture?type=large", "display_name": "dac0n", "link": "https://stackoverflow.com/users/12228598/dac0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576191747, "creation_date": 1576102436, "last_edit_date": 1576191747, "question_id": 59294922, "link": "https://stackoverflow.com/questions/59294922/include-lvtocon-h-undefined-reference-to-operatorstdostream-char-cons", "title": "include &quot;lvtocon.h&quot;, undefined reference to `operator&lt;&lt;(std::ostream&amp;, char const*)", "body": "<p>Working with C++ (Codeblocks 17.12 compiler), everytime program sees 'cout' in program.cpp i kept getting this message. Ideally need to create 'GoodAuto' object with three inserted variables (fuel_amount, double fuel_consumption and double best_speed); ability to change them with _change variables; ability to delete that 'GoodAuto' object.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>main.cpp\n\n#include &lt;iostream&gt;\n#include \"program.h\"\nusing namespace std;\n\nint main(){\n        Auto GoodAuto(200, 5, 60);\n}\n</code></pre>\n\n<pre><code>program.cpp\n\n#include \"lvtocon.h\"\n#include &lt;iostream&gt;\n#include \"program.h\"\nusing namespace std;\n\nAuto::Auto(double fuel_amount, double fuel_consumption, double best_speed)\n{\n    cout &lt;&lt; \"Enter fuel amount: \" &lt;&lt;endl;\n    this-&gt;fuel_amount = (fuel_amount&gt;=0)?fuel_amount: 10;\n    cout &lt;&lt; \"Enter fuel consumption for 100 km: \" &lt;&lt;endl;\n    this-&gt;fuel_consumption = (fuel_consumption&gt;0)?fuel_consumption: 1;\n    cout &lt;&lt; \"Enter optimal car speed: \" &lt;&lt;endl;\n    this-&gt;best_speed = (best_speed&gt;0)?best_speed: 120;\n}\n\nvoid Auto::Change(double fuel_amount_change, double fuel_consumption_change, double best_speed_change)\n{\n    if (fuel_amount+fuel_amount_change&gt;0) this-&gt;fuel_amount += fuel_amount_change; else fuel_amount = 0;\n    if (fuel_consumption+fuel_consumption_change&gt;0) this-&gt;fuel_consumption += fuel_consumption_change; else fuel_consumption = 1;\n    if(best_speed + best_speed_change&gt;0) this-&gt;best_speed += best_speed_change; else best_speed = 120;\n}\n\nvoid Auto::Print(){\n    cout &lt;&lt; \"Fuel amount = \" &lt;&lt; fuel_amount &lt;&lt; \" l.\"&lt;&lt; endl;\n    cout &lt;&lt; \"Fuel consumption for 100 km = \" &lt;&lt; fuel_consumption &lt;&lt;  \" l/stunda.\" &lt;&lt;endl;\n    cout &lt;&lt; \"Auto optimal speed = \" &lt;&lt; best_speed &lt;&lt;\" km/stunda.\"&lt;&lt;endl;\n}\n</code></pre>\n\n<pre><code>program.h   \n\nclass Auto                                                   \n{\nprivate:\n    double fuel_amount;\n    double fuel_consumption;\n    double best_speed;\npublic:\n\n    Auto(double fuel_amount, double fuel_consumption, double best_speed);\n    ~Auto();\nvoid Change(double fuel_amount_change, double fuel_consumption_change, double best_speed_change);\nvoid Print();\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1576106037, "post_id": 59294880, "comment_id": 104795368, "body": "Don&#39;t use identifiers that start with an underscore and then an uppercase letter. These are reserved for the implementation (compiler, standard library, etc.)."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576104125, "post_id": 59295116, "comment_id": 104794796, "body": "<code>myMultiArray map1(_Size3, _Size2, _Size);</code>  how can I check this, it does not work, I do not understand a bit. can write with an example <code>main</code> please"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576104586, "post_id": 59295116, "comment_id": 104794925, "body": "@1221 it will have to be <code>myMultiArray&lt;3&gt; map1({{_Size3, _Size2, _Size}});</code> due to <code>std::array</code> nuances and the fact that there is no class template type deduction in C++14."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576105363, "post_id": 59295116, "comment_id": 104795162, "body": "<code>array&lt;size_t, dim&gt; m_sizes;</code> hmm .. trying to understand why it gives an error."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576105478, "post_id": 59295116, "comment_id": 104795195, "body": "but I also want to say that the implementation looks strange. :)"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576105516, "post_id": 59295116, "comment_id": 104795208, "body": "@1221 alright I wrote you a better example with an issue fixed;"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576105902, "post_id": 59295116, "comment_id": 104795332, "body": "@1221 there is a better way to write it - without <code>std::array</code> in the constructor but it will require SFINEA stuff - which is complicated."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576106423, "post_id": 59295116, "comment_id": 104795463, "body": "I\u2019ll try now to figure out how it works to understand. :)"}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576106648, "post_id": 59295116, "comment_id": 104795529, "body": "and this code is better than mine, meaning it works faster yes?"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576106731, "post_id": 59295116, "comment_id": 104795547, "body": "@1221 indeed multitude of <code>new</code> makes allocation slower and might result in poor memory fragmentation. Also accessing data is faster because you won&#39;t need to dereference several pointers."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576107327, "post_id": 59295116, "comment_id": 104795701, "body": "I can access the array like this, otherwise it gives me an error? <code>map1[i][k][j]</code>  or I can\u2019t do this, it\u2019s important for me what it would be."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576108470, "post_id": 59295116, "comment_id": 104795996, "body": "@1221 you&#39;ll need to make an iterator class for this kind of access (so that <code>operator []</code> returns appropriate iterator). If it was two dimensional you could&#39;ve simply returned a pointer."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576109289, "post_id": 59295116, "comment_id": 104796177, "body": "I\u2019ll deal with it again, but I like your code, it\u2019s unusual, but I\u2019m interested, can I remove the extra brackets <code>({{_Size3, _Size2, _Size}})</code>"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576109869, "post_id": 59295116, "comment_id": 104796304, "body": "@1221 it requires making a constructor that accepts <code>(args...)</code> simple implementation isn&#39;t too hard, but to make it type-safe you&#39;ll have to make restrictions to number of inputs and make sure they are integer-like types. To do so: check out type_traits STL library and SFINAE principles. Find some guides online - its syntax is annoying AF."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576110187, "post_id": 59295116, "comment_id": 104796370, "body": "Yes, I don\u2019t like it either, I don\u2019t want to use SFINAE code to become very complex"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576110306, "post_id": 59295116, "comment_id": 104796397, "body": "@1221 also, if you can assume that you have only 3 dimension and third size is fixed - say 3 - then you can make a two dimensional dynamic array of elements <code>std::array&lt;int,3&gt;</code> - which much easier to implement than genetic multi-dimensional array."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576110725, "post_id": 59295116, "comment_id": 104796485, "body": "I don\u2019t have a fixed size; it can be 3 or maybe 10 or 2 so there\u2019s no way to create a simple one :)"}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576110945, "post_id": 59295116, "comment_id": 104796531, "body": "I removed two brackets and the code works, is this normal? :) <code>({_Size3, _Size2, _Size})</code>"}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576111227, "post_id": 59295116, "comment_id": 104796577, "body": "I\u2019m kind of starting to understand how your code works. I would never have thought of that. Did you come up with this?"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576111265, "post_id": 59295116, "comment_id": 104796585, "body": "@1221 I remember there was some problem when initializing <code>std::array</code> and <code>std::vector</code> from initializer list - that sometimes it doesn&#39;t compile or work properly - which is why I added extra brackets. But if it works then it should be fine. Just be careful."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576113210, "post_id": 59295116, "comment_id": 104796947, "body": "I can do this, otherwise I&#39;m not sure what works? <code>map1({ i, k, map1({ i, k, j }) });</code>"}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576114654, "post_id": 59295116, "comment_id": 104797235, "body": "help me to add an implementation with brackets map1[4][5][2] otherwise I won\u2019t be able to do it"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576119559, "post_id": 59295116, "comment_id": 104798169, "body": "@1221 I wrote something simple, but seriously you ought to write it yourself. Don&#39;t ask for more."}, {"owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "edited": false, "score": 0, "creation_date": 1576123228, "post_id": 59295116, "comment_id": 104798893, "body": "I didn\u2019t even hope that you would write :) Thank."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": true, "score": 1, "last_activity_date": 1576119903, "last_edit_date": 1576119903, "creation_date": 1576103492, "answer_id": 59295116, "question_id": 59294880, "link": "https://stackoverflow.com/questions/59294880/how-to-combine-two-codes-into-one-function/59295116#59295116", "title": "How to combine two codes into one function?", "body": "<p>You have too many <code>new</code> operations in the code. Also <code>del_vector</code> doesn't make any sense in your preferred version as any decent class will deallocate its data in the destructor (lest it has no ownership over it).</p>\n\n<p>What you need is to make a class or a template class that wraps things up.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\ntemplate&lt;size_t index, size_t dim&gt;\nvoid ModifyArray(std::array&lt;size_t,dim&gt;&amp; lcAarray){}\n\ntemplate&lt;size_t index, size_t dim, typename... Args&gt;\nvoid ModifyArray(std::array&lt;size_t, dim&gt;&amp; lcAarray, size_t arg, Args... args)\n{\n    lcAarray[index] = arg;\n    ModifyArray&lt;index+1&gt;(lcAarray, args...);\n}\n\ntemplate&lt;typename... Args&gt;\nstd::array&lt;size_t, sizeof...(Args)&gt; MakeArray(Args... args)\n{\n    std::array&lt;size_t, sizeof...(Args)&gt; lclArray;\n    ModifyArray&lt;0&gt;(lclArray, args...);\n    return lclArray;\n}\n\ntemplate&lt; std::size_t dim &gt; \nclass myMultiArray;\n\ntemplate&lt;std::size_t dim, std::size_t crDim&gt;\nclass MyMultiArrayIterator\n{\n    public:\n    MyMultiArrayIterator(myMultiArray&lt;dim&gt;* multiArray, size_t index):\n        m_pMultiArray(multiArray),\n        m_index(index)\n    {}\n\n    template&lt;size_t newDim = crDim+1,  typename std::enable_if&lt;newDim &lt; dim, int&gt;::type = 0&gt;\n    MyMultiArrayIterator&lt;dim, newDim&gt; operator [] (size_t idx)\n    {\n        return MyMultiArrayIterator&lt;dim, newDim&gt;(m_pMultiArray, m_index + idx*m_pMultiArray-&gt;GetStep(crDim));\n    }\n\n    template&lt;size_t newDim = crDim+1,  typename std::enable_if&lt;newDim == dim, int&gt;::type = 0&gt;\n    int&amp; operator [] (size_t idx)\n    {\n        return m_pMultiArray-&gt;GetValue(m_index+idx*m_pMultiArray-&gt;GetStep(crDim));\n    }\n\n    private:\n    size_t              m_index;\n    myMultiArray&lt;dim&gt;*  m_pMultiArray;\n};\n\ntemplate&lt; std::size_t dim &gt; \nclass myMultiArray\n{\npublic:\n    myMultiArray() = default;\n\n    template&lt;class... Args, typename std::enable_if&lt;sizeof...(Args) == dim-1, int&gt;::type = 0&gt;\n    myMultiArray(size_t size0, Args... args)\n    {\n        m_sizes = MakeArray(size0, args...);\n\n        std::size_t uTotalSize = 1;\n        for (std::size_t i = 0; i &lt; dim; i++)\n        {\n            m_steps[i] = uTotalSize;\n            uTotalSize *= m_sizes[i];\n        }\n        std::cout  &lt;&lt; uTotalSize &lt;&lt; \"\\n\";\n        m_data.resize(uTotalSize);\n     }\n     // resizes m_data to multiplication of sizes\n     int operator  () (std::array &lt; std::size_t, dim &gt; indexes) const\n     {\n        return m_data[computeIndex(indexes)];\n     }\n     int &amp;operator  () (std::array &lt; std::size_t, dim &gt; indexes)\n     {\n        return m_data[computeIndex(indexes)];\n     }\n     // modify operator\n     // you'll probably need more utility functions for such a multi dimensional array\n\n     int GetValue(size_t index) const\n     {\n        return m_data[index];\n     }\n\n     int &amp;GetValue(size_t index)\n     {\n        return m_data[index];\n     }\n\n     size_t GetSize(size_t index) const\n     {\n         return m_sizes[index];\n     }\n\n     size_t GetStep(size_t index) const\n     {\n         return m_steps[index];\n     }\n\n     MyMultiArrayIterator&lt;dim, 1&gt; operator [] (size_t index)\n     {\n         return  MyMultiArrayIterator&lt;dim, 1&gt;(this, index*m_steps[0]);\n     }\n\nprivate:\n     size_t computeIndex(std::array &lt; std::size_t, dim &gt; indexes)\n     {\n       size_t location = 0;\n       for(size_t i=0; i&lt; dim; i++)\n       {\n           location += m_steps[i]*indexes[i];\n       }\n       return location;\n    }\n\nprivate:\n    std::vector &lt; int &gt;             m_data;\n    std::array &lt; std::size_t, dim &gt; m_sizes;\n    std::array &lt; std::size_t, dim &gt; m_steps;\n};\n\ntemplate&lt;typename... Args&gt;\nmyMultiArray&lt;sizeof...(Args)&gt; MakeMyMultiArray(Args... args)\n{\n    return myMultiArray&lt;sizeof...(Args)&gt;(args...);\n}\n\nint main ()\n{\n    auto mapMA = MakeMyMultiArray(3,4,5);\n\n    mapMA({2ull,3ull,4ull}) = 7;\n    std::cout &lt;&lt; mapMA({{2ull,3ull,4ull}})  &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; mapMA[2][3][4];\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11993846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1fa2037fb46507711379e31b1ab6293?s=128&d=identicon&r=PG&f=1", "display_name": "1221", "link": "https://stackoverflow.com/users/11993846/1221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 59295116, "answer_count": 1, "score": 0, "last_activity_date": 1576119903, "creation_date": 1576102250, "last_edit_date": 1576102667, "question_id": 59294880, "link": "https://stackoverflow.com/questions/59294880/how-to-combine-two-codes-into-one-function", "title": "How to combine two codes into one function?", "body": "<p>My code creates arrays, I need to implement deletions for it, but I don\u2019t know how to do it beautifully and correctly.</p>\n\n<p>main code</p>\n\n<pre><code>template&lt;class T1&gt;\nauto auto_vector(T1&amp;&amp; _Size) {\n    return new int64_t[_Size]{};\n}\ntemplate &lt;class T1, class... T2&gt;\nauto auto_vector(T1&amp;&amp; _Size, T2&amp;&amp;... _Last)\n{\n    auto result = new decltype(auto_vector(_Last...))[_Size];\n    for (int64_t i = 0; i &lt; _Size; ++i) {\n        result[i] = auto_vector(_Last...);\n    }\n    return result;\n}\n</code></pre>\n\n<p>this is the code that I want to combine with the first</p>\n\n<pre><code>template &lt;class T1, class T2, class T3, class T4&gt;\nvoid del_vector(T4&amp; _Del, T1&amp; _Size, T2&amp; _Size2, T3&amp; _Size3) {\n    for (ptrdiff_t i = 0; i &lt; _Size3; ++i) {\n        for (ptrdiff_t k = 0; k &lt; _Size2; ++k) {\n            delete _Del[i][k];\n        }\n        delete _Del[i];\n    }\n    delete _Del;\n}\nint main()\n{\n    auto map1 = auto_vector(_Size, _Size2, _Size3);\n\n    auto map2 = auto_vector(3, 4, 5, 7);\n\n    del_vector(map1, _Size, _Size2, _Size3);\n\n    return 0;\n}\n</code></pre>\n\n<p>I do not like this option I would like something like that.</p>\n\n<pre><code>int main()\n{\n    auto_vector map1(_Size, _Size2, _Size3);\n\n    del_vector map1(_Size, _Size2, _Size3);\n\n    //or so\n\n    auto_vector&lt;_Size, _Size2, _Size3&gt; map1;\n\n    del_vector&lt;_Size, _Size2, _Size3&gt; map1;\n\n    return 0;\n}\n</code></pre>\n\n<p>the reason why I do this is because I cannot implement the same thing using just a vector\nand I don\u2019t understand why the vector does not work with dynamic arrays, the fact is that I do not know the exact data\n<code>_Size, _Size2, _Size3 = ?</code> before compilation.</p>\n\n<p>therefore I use <code>new</code> and all this I do only for his sake.</p>\n\n<p>if it is useful to you to look at the data for tests</p>\n\n<pre><code>cout &lt;&lt; \" ---------TEST---------- \" &lt;&lt; endl;\n    for (ptrdiff_t i = 0; i &lt; _Size3; ++i) {\n        for (ptrdiff_t k = 0; k &lt; _Size2; ++k) {\n            for (ptrdiff_t j = 0; j &lt; _Size; ++j) {\n                cout &lt;&lt; map1[i][k][j] &lt;&lt; \" \";\n            }\n            cout &lt;&lt; endl;\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; \" ---------TEST---------- \" &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "gcc", "g++", "fortify-source"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576103079, "post_id": 59294849, "comment_id": 104794467, "body": "Using LTO will <i>drastically</i> reduce the size. You may want to do that as well."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576104881, "post_id": 59294849, "comment_id": 104795024, "body": "Thanks, I&#39;ll check that out. I&#39;m currently trying to build small sections of our codebase to narrow down what parts of the code cause the largest binary bloat when fortified"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576331946, "post_id": 59294849, "comment_id": 104869533, "body": "@JesperJuhl That&#39;s not always (or even often) true. LTO increases opportunities for inlining and cloning which may actually <i>increase</i> code size."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1576332274, "post_id": 59294849, "comment_id": 104869618, "body": "Could you check which section increased with fortification (<code>readelf -SW</code>)? Also note that compiler most likely removed <i>all</i> calls to <code>strcpy</code> in your simple program due to optimization. You&#39;ll need something more elaborate."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1576333563, "post_id": 59294849, "comment_id": 104869918, "body": "@yugr Depends on the program of course. But in my experience, with the programs I&#39;ve worked on it has pretty consistently led to nice size reductions (and speed improvements). But of course that&#39;s not <i>guaranteed</i>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1576333563, "post_id": 59294849, "comment_id": 104869919, "body": "@yugr Depends on the program of course. But in my experience, with the programs I&#39;ve worked, on it has pretty consistently led to nice size reductions (and speed improvements). But of course that&#39;s not <i>guaranteed</i>."}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576102119, "creation_date": 1576102119, "question_id": 59294849, "link": "https://stackoverflow.com/questions/59294849/gcc-fortify-source-drastically-increases-binary-size", "title": "gcc FORTIFY_SOURCE drastically increases binary size", "body": "<p>We have a very large C++ codebase that we would like to compile using gcc with the \"FORTIFY_SOURCE=2\" option to improve security and reduce the risk of buffer overflows. The problem is when we compile the system using FORTIFY_SOURCE, the binary sizes drastically increase. (From a total of 4GB to over 25GB) This causes issues when we need to deploy the code because it takes 5x as long to zip it up and deploy it.</p>\n\n<p>In an attempt to figure out what was going on, I made a simple test program that does a bunch of string copies with <code>strcpy</code> (one of the functions FORTIFY_SOURCE is supposed to enhance and compiled it both with and without \"FORTIFY_SOURCE\".</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    char buf1[100];\n    char buf2[100];\n    char buf3[100];\n    char buf4[100];\n    char buf5[100];\n    char buf6[100];\n    char buf7[100];\n    char buf8[100];\n    char buf9[100];\n    char buf10[100];\n\n    strcpy(buf1, \"this is a string\");\n    strcpy(buf2, \"this is a string\");\n    strcpy(buf3, \"this is a string\");\n    strcpy(buf4, \"this is a string\");\n    strcpy(buf5, \"this is a string\");\n    strcpy(buf6, \"this is a string\");\n    strcpy(buf7, \"this is a string\");\n    strcpy(buf8, \"this is a string\");\n    strcpy(buf9, \"this is a string\");\n    strcpy(buf10, \"this is a string\");\n}\n</code></pre>\n\n<p>Compilation:</p>\n\n<pre><code>g++ -o main -O3 fortify_test.cpp\n</code></pre>\n\n<p>and</p>\n\n<pre><code>g++ -o main -D_FORTIFY_SOURCE=2 -O3 fortify_test.cpp\n</code></pre>\n\n<p>I discovered that using \"FORTIFY_SOURCE\" on a simple example had no noticeable impact on binary size (the resulting binary was 8.4K with and without fortifying the source.)</p>\n\n<p>When there's no noticeable impact with a simple example, I wouldn't expect to see such a drastic size increase in more complex examples. What could FORTIFY_SOURCE possibly be doing to increase our binary sizes so drastically?</p>\n"}, {"tags": ["c++", "esp32"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12521146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db1f75049d9a5bb34f90f1d19b4b463?s=128&d=identicon&r=PG&f=1", "display_name": "tom45", "link": "https://stackoverflow.com/users/12521146/tom45"}, "is_accepted": false, "score": 0, "last_activity_date": 1576115632, "creation_date": 1576115632, "answer_id": 59296612, "question_id": 59294756, "link": "https://stackoverflow.com/questions/59294756/esp32-using-esp-console-argtable3-in-a-c-project/59296612#59296612", "title": "ESP32 &gt; using esp_console + argtable3 in a C++ project", "body": "<p>After being copying/pasting very simple sample codes found on internet, I finally found what was the problem :</p>\n\n<p>I was including <code>&lt;argtable3/argtable3.h&gt;</code> after <code>\"myclass.h\"</code></p>\n\n<p>It took me almost 2 days for a dumb error...</p>\n\n<p>But if somebody has an explanation about why the inclusion order was allowing me to compile the program but making a \"corrupted\" binary, feel free to answer !</p>\n"}], "owner": {"reputation": 1, "user_id": 12521146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db1f75049d9a5bb34f90f1d19b4b463?s=128&d=identicon&r=PG&f=1", "display_name": "tom45", "link": "https://stackoverflow.com/users/12521146/tom45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576115632, "creation_date": 1576101630, "last_edit_date": 1576103799, "question_id": 59294756, "link": "https://stackoverflow.com/questions/59294756/esp32-using-esp-console-argtable3-in-a-c-project", "title": "ESP32 &gt; using esp_console + argtable3 in a C++ project", "body": "<p>I'am developping a C++ project on an ESP32.\nI'd like to use esp_console + argtable3 (C libraries) in it.\nI'm trying to use argtable3 in my members functions.\nTo do so, I'm creating callback functions to my members functions with a global pointer.\nI'm sure my class is going to be instanced only once so I assume it's ok to create callback functions.</p>\n\n<p>The problem is that argtable isn't giving me back the parameters entered by the user.\nIt checks for them successfully (number of args and their type) but the data it gives me back is random.\nI've tested my code outside of members functions and it works well. But I want to use it inside members functions to access other parts of my object.\nHere is my code :</p>\n\n<pre><code>// Pointer for my callback functions\nMyClass * _callback;\n\nstruct arg_int *argInt;\nstruct arg_end *endPage;\n\n// My callback function (GLOBAL)\nint _setInt(int argc, char *argv[])\n{\n    return _callback-&gt;setInt(argc, argv);\n}\n\n// Tab of struct for argtable lib (GLOBAL)\nvoid *setInt_argtable[] =\n{\n    argInt = arg_int1(NULL, NULL, \"&lt;0-12&gt;\", \"Integer argument\"),\n    endInt = arg_end(10)\n};\n\n// Function I'm calling back\nint MyClass::setInt(int argc, char *argv[])\n{\n    int nerrors = arg_parse(argc,argv,setInt_argtable);\n    if (nerrors &gt; 0)\n    {\n        arg_print_errors(stdout, endPage, \"myprog\");\n        return 0;\n    }\n    printf(\"argc = %d\\n\", argc);                // argc gives the correct number of args\n    printf(\"argv[0] = %s\\n\", argv[0]);          // argv[0] gives the correct command name\n    printf(\"argv[1] = %s\\n\", argv[1]);          // argv[1] gives the correct value\n    printf(\"argInt-&gt;ival[0] = %d\\n\", argInt-&gt;ival[0]);  // argInt-&gt;ival[0] gives random value\n    return 0;\n}\n\nvoid MyClass::main(void)\n{\n    // Callback pointer initialisation\n    _callback = this;\n\n    /* Initializing the console */\n    esp_console_config_t console_config\n    {\n        256,\n        8,\n        atoi(LOG_COLOR_CYAN),\n        0\n    };\n    ESP_ERROR_CHECK( esp_console_init(&amp;console_config) );\n\n    /* Configure linenoise line completion library */\n    /* Enable multiline editing. If not set, long commands will scroll within\n    * single line.\n    */\n    linenoiseSetMultiLine(1);\n\n    /* Tell linenoise where to get command completions and hints */\n    linenoiseSetCompletionCallback(&amp;esp_console_get_completion);\n    linenoiseSetHintsCallback((linenoiseHintsCallback*) &amp;esp_console_get_hint);\n\n    /* Set command history size */\n    linenoiseHistorySetMaxLen(100);\n\n\n    esp_console_register_help_command();\n\n    //\n    // Feeding my console with argtable parameters\n    //\n\n    esp_console_cmd_t consoleCmd;\n    consoleCmd.command  = \"setInt\";\n    consoleCmd.func     = &amp;_setInt;\n    consoleCmd.help     = \"Trying to set a integer argument\";\n    consoleCmd.argtable = setInt_argtable;\n    esp_console_cmd_register(&amp;consoleCmd);\n\n    /* Main loop */\n    while(true)\n    {\n        // Getting command from user\n    }\n}\n</code></pre>\n\n<p>Is my approach of using callback member function good ?\nAny idea of what is my problem and how I could solve it ?</p>\n\n<p>Thanks in advance for your answers.</p>\n"}, {"tags": ["c++", "templates", "sfinae", "template-specialization", "generic-programming"], "comments": [{"owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "edited": false, "score": 0, "creation_date": 1576101507, "post_id": 59294685, "comment_id": 104793945, "body": "@Frank Could you explain what you mean a bit more?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101530, "post_id": 59294685, "comment_id": 104793950, "body": "why does it not work with const? Why is using SFINAE a bad idea?"}, {"owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101670, "post_id": 59294685, "comment_id": 104793997, "body": "@formerlyknownas_463035818 A lot of companies don&#39;t like templates in general because it can be difficult to maintain. For example, <a href=\"https://google.github.io/styleguide/cppguide.html#Template_metaprogramming\" rel=\"nofollow noreferrer\">Google says not to use SFINAE in their style guide</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101683, "post_id": 59294685, "comment_id": 104794001, "body": "hm ok, get it. Your real example needs to distinguish between <code>const</code> and non-const,the example here is fine with both"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101824, "post_id": 59294685, "comment_id": 104794049, "body": "google guidelines is full of example of overly protective and conservative guidelines. Consider that those guidelines target a million lines code base with lots of legacy code. Luckily they always give the rationale and you can make your own decision"}, {"owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101844, "post_id": 59294685, "comment_id": 104794059, "body": "@formerlyknownas_463035818 I&#39;ll add this to the question, but it&#39;s because, when trying to do a range-based loop on an <code>std::unordered_set</code> to send every element through to the <code>print</code> function, I get IntelliSense telling me I can&#39;t convert from an <code>int</code> (which is what I was using as an example type) to a <code>const int</code>. I have a feeling it has something to do with <code>unordered_set</code> objects making their keys <code>const</code> or something"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101953, "post_id": 59294685, "comment_id": 104794095, "body": "not being able to convert an <code>int</code> to a <code>const int</code> sounds a bit fishy, perhaps it would be better if you show that broken code and ask a question about that (though that would be a different question)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576102095, "post_id": 59294685, "comment_id": 104794138, "body": "Btw, yes keys are <code>const</code> in <code>unordered_set</code>"}, {"owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576102435, "post_id": 59294685, "comment_id": 104794255, "body": "@formerlyknownas_463035818 I added what I was specifically having problems with to the question. I don&#39;t think it&#39;s too off-topic here"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1576107786, "post_id": 59294685, "comment_id": 104795836, "body": "I don&#39;t see a problem here, except with the invalid line <code>const auto last = --lines.end();</code>: <a href=\"https://godbolt.org/z/4JK_kQ\" rel=\"nofollow noreferrer\">godbolt.org/z/4JK_kQ</a> Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that produces the error you&#39;re trying to solve?"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1576106592, "creation_date": 1576106592, "answer_id": 59295597, "question_id": 59294685, "link": "https://stackoverflow.com/questions/59294685/general-function-for-types-and-const-types-without-overloading/59295597#59295597", "title": "General function for types and const types without overloading", "body": "<p>Isn't clear what do you exactly want (enable when <code>T</code> is <code>const</code> or isn't <code>const</code>; if you have a function that print value of some types it's necessary wrap it in a template class? Can't you apply SFINAE directly over the function?) anyway... some useful elements...</p>\n\n<p>(1) starting from C++11 there is <code>std::is_const</code> that you can use to check if a type is constant or not</p>\n\n<p>(2) to make an example, a possible way to enable a specialization only for constant types is the following</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct print;\n\ntemplate &lt;typename T&gt;\nstruct print&lt;T, typename std::enable_if&lt;std::is_const&lt;T&gt;::value&gt;::type&gt;\n {\n   print (T line)\n    { std::cout &lt;&lt; line &lt;&lt; std::endl; }\n };\n</code></pre>\n\n<p>The specialization can be simplified, starting from C++14, using <code>std::enable_if_t</code></p>\n\n<pre><code>struct print&lt;T, std::enable_if_t&lt;std::is_const&lt;T&gt;::value&gt;&gt;\n</code></pre>\n\n<p>and, starting from C++17, also using <code>std::is_const_v</code></p>\n\n<pre><code>struct print&lt;T, std::enable_if_t&lt;std::is_const_v&lt;T&gt;&gt;&gt;\n</code></pre>\n\n<p>(3) you can enable/disable directly the constructor, but only making is a template one (or SFINAE can't work)</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct print\n {\n   template &lt;typename U = T,\n             typename std::enable_if&lt;std::is_const&lt;U&gt;::value, int&gt;::type = 0&gt;\n   print (U line)\n    { std::cout &lt;&lt; line &lt;&lt; std::endl; }\n\n   // possible alternative do-nothing constructor for not const values\n   template &lt;typename U = T,\n             typename std::enable_if&lt;! std::is_const&lt;U&gt;::value, int&gt;::type = 0&gt;\n   print (U)\n    { }\n };\n</code></pre>\n\n<p>Observe that, in this case, the SFINAE tests (<code>std::is_same</code> and <code>std::is_const&lt;U&gt;</code>) are (also) over the template parameter of the constructor, <code>U</code>, not over the template parameter of the class, <code>T</code>. Otherwise SFINAE doesn't works.</p>\n\n<p>The first <code>std::enable_if</code> impose that <code>T</code> and <code>U</code> are the same.</p>\n"}], "owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576106592, "creation_date": 1576101246, "last_edit_date": 1576103220, "question_id": 59294685, "link": "https://stackoverflow.com/questions/59294685/general-function-for-types-and-const-types-without-overloading", "title": "General function for types and const types without overloading", "body": "<p>I know it's generally a bad idea to rely on SFINAE unless absolutely necessary, but I'm curious about how to do the following anyway.</p>\n\n<p>So let's say I have a function that prints a type to the console (class used for partial specialization since it more closely matches my situation):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class Ty&gt;\nclass print\n{\npublic:\n    print(Ty line)\n    {\n        std::cout &lt;&lt; line &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>Since this is scaled down code, I'm not sure if it would also work with <code>const</code> types, but (because does not in my specific case) let's say the above function does <em>not</em> work with <code>const</code> types. Correct me if I'm wrong, but I believe this would be how you'd accomplish this with partial template specialization?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class Ty&gt;\nclass print &lt;const Ty&gt;\n{\npublic:\n    print(const Ty line)\n    {\n        std::cout &lt;&lt; line &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>However, is there a way to use the <code>&lt;type_traits&gt;</code> header to do this? I've come across <a href=\"https://stackoverflow.com/questions/14926482/const-and-non-const-template-specialization\">a question that was specific to <code>char*</code> and <code>const char*</code></a>, but it seems to be different when generalized. Additionally, that question (and answer) is nearly 7 years old.</p>\n\n<p>I've tried the following code (untested) when trying to adapt the answer from the above question to my own situation, but it seems like there should simply be a better way to accomplish this task. In fact, I'm pretty sure my code won't compile (specifically if <code>Ty</code> is already <code>const</code>)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class Ty&gt;\nstruct print_accept_const :\n    std::enable_if&lt;std::is_same&lt;Ty, Ty&gt;::value || std::is_same&lt;Ty, const Ty&gt;&gt;\n{};\n\ntemplate &lt;class Ty, class = print_accept_const&lt;Ty&gt;&gt;\nclass print\n{\n    print(Ty line)\n    {\n        std::cout &lt;&lt; line &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>Just for reference, I'm using partial template specialization because I'm specializing this <code>print</code> class for <code>std::vector</code> objects, <code>std::set</code> objects, <code>std::unordered_set</code> objects, etc. If there is a way to do this without SFINAE, then I'd be totally open to that.\n<br /><br />\n<strong>Edit 1</strong><br />\nAs asked in a comment, my exact error happens when I try to specialize for <code>std::unordered_set</code> objects.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class ValTy&gt;\nclass print &lt;std::unordered_set&lt;ValTy&gt;&gt;\n{\npublic:\n    print(std::unordered_set&lt;int&gt; lines)  // 'int' instead of 'ValTy' to activate IntelliSense for errors\n    {\n        const auto last = --lines.end();\n\n        for (auto&amp; line : lines)\n        {\n            // IntelliSense, for the line below when 'ValTy' is\n            // replaced with 'int', says:\n            //\n            // no instance of constructor \"print&lt;std::unordered_set&lt;ValTy, \n            // std::hash&lt;ValTy&gt;, std::equal_to&lt;ValTy&gt;, std::allocator&lt;ValTy&gt;&gt;&gt;\n            // ::print(std::unordered_set&lt;int, std::hash&lt;int&gt;, ...&gt;)\" matches\n            // the argument list. Argument types are (int).\n            //\n            print&lt;ValTy&gt; p(line);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "arduino"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576101307, "post_id": 59294677, "comment_id": 104793881, "body": "afaik arduino is some C++ dialect, in any case it is not C <b>and</b> C++"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1576101661, "post_id": 59294677, "comment_id": 104793995, "body": "<code>sizeof(message)</code> print that out."}, {"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1576101841, "post_id": 59294677, "comment_id": 104794057, "body": "try (sizeof(char) * 6) instead of sizeof(message) in your for-loop"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576101868, "post_id": 59294677, "comment_id": 104794067, "body": "I tried printing it out and it had the correct size."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1576101888, "post_id": 59294677, "comment_id": 104794075, "body": "What value did you get and did you read the link?"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102124, "post_id": 59294677, "comment_id": 104794147, "body": "i used (sizeof(char) * 6) and it worked thank you, but how would i do this if I didn&#39;t know the size of the string being passed through"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102196, "post_id": 59294677, "comment_id": 104794182, "body": "I read the link but didn&#39;t really understand it fully"}, {"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1576102210, "post_id": 59294677, "comment_id": 104794184, "body": "pass the size of the string with the string or you can also (sometimes) get the size of a string with sizeof(string)/sizeof(string[0])"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102213, "post_id": 59294677, "comment_id": 104794187, "body": "could you please explain"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1576102285, "post_id": 59294677, "comment_id": 104794215, "body": "Use <code>String</code> and not a char array. Then use <a href=\"https://www.arduino.cc/en/Tutorial/StringLength\" rel=\"nofollow noreferrer\"><code>String length</code></a>."}, {"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1576102329, "post_id": 59294677, "comment_id": 104794227, "body": "that works too^^^^ yeah didn&#39;t think about that if you aren&#39;t writing c why not just use String??"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102375, "post_id": 59294677, "comment_id": 104794244, "body": "ok so how would i use that in my scenario"}, {"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1576102444, "post_id": 59294677, "comment_id": 104794262, "body": "So basicamente the reason I wanted you to do sizeof(char)*6 is because referencing &#39;message&#39; in your function is the same as referencing &amp;message[0] which is the size of your char pointer in bytes. You want the size of the actual string not the pointer to the first char @Wowkster"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102614, "post_id": 59294677, "comment_id": 104794309, "body": "ok i see,  so would it still be better to use the String.length() if i didn&#39;t know the size of the string being passed?"}, {"owner": {"reputation": 385, "user_id": 11262560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K9uJLJS_1iU/AAAAAAAAAAI/AAAAAAAAAS8/-c1ZLcoQlXo/photo.jpg?sz=128", "display_name": "bturner1273", "link": "https://stackoverflow.com/users/11262560/bturner1273"}, "edited": false, "score": 0, "creation_date": 1576102677, "post_id": 59294677, "comment_id": 104794328, "body": "yes the String class (which I am pretty sure Arduino has their own String class) will keep track of your string length for you so you will never need to try to calculate/remember it just call .length on it. It may not be a function it could be a member so you may have to call .length not .length()"}, {"owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "edited": false, "score": 0, "creation_date": 1576102776, "post_id": 59294677, "comment_id": 104794365, "body": "ok thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 6895840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAA5Q.jpg?s=128&g=1", "display_name": "Anteino", "link": "https://stackoverflow.com/users/6895840/anteino"}, "is_accepted": false, "score": 0, "last_activity_date": 1576103910, "last_edit_date": 1576103910, "creation_date": 1576103546, "answer_id": 59295130, "question_id": 59294677, "link": "https://stackoverflow.com/questions/59294677/self-made-arduino-morse-code-library-stops-after-first-letter/59295130#59295130", "title": "Self Made Arduino Morse Code Library Stops After First Letter", "body": "<p>In your <strong>Morse::writeStr</strong> function there is a problem. Doing <strong>sizeof(message)</strong> should throw the following error:</p>\n\n<pre><code>warning: 'sizeof' on array function parameter 'message' will return size of 'char*'\n</code></pre>\n\n<p>You cannot find the actual length of the message by looking at the size of <em>message</em> in the way you do. The variable <em>message</em> in your <strong>writeStr</strong> function is passed as a pointer to the char array, the size of the pointer is equal to 1.</p>\n\n<p>Next to this you're iterating from <code>i = 0</code> to <code>i &lt; sizeof(message) - 1</code>. Since the size of <em>message</em> <strong>IS</strong> 1, you're iterating from <code>i = 0</code> to <code>i &lt; 0</code> and the for loop should not even execute once.</p>\n\n<p>Next to the pointer to the char array, you should also pass the length of the array and use that in in your for loop. For example like so:</p>\n\n<pre><code>void Morse::writeStr(char *message, int size_)\n{\n    for (char i = 0; i &lt; size_; i++)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>Remember to also change this function declaration in your header file. Then, in your <strong>loop</strong> or <strong>setup</strong> function you can send a char array to the function like this:</p>\n\n<pre><code>Morse morse(13);\nchar msg[] = \"test\";\nmorse.writeStr(msg, 4);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8227047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114199b2f46082a69328e054281617b7?s=128&d=identicon&r=PG&f=1", "display_name": "Wowkster", "link": "https://stackoverflow.com/users/8227047/wowkster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1576150475, "answer_count": 1, "score": 0, "last_activity_date": 1576103910, "creation_date": 1576101228, "last_edit_date": 1576101412, "question_id": 59294677, "link": "https://stackoverflow.com/questions/59294677/self-made-arduino-morse-code-library-stops-after-first-letter", "closed_reason": "Duplicate", "title": "Self Made Arduino Morse Code Library Stops After First Letter", "body": "<p>I am trying to write an Arduino Library that easily outputs Morse code on a digital pin. I followed a tutorial but then tried to add a bit myself. When I compile and upload my code to the arduino, it compiles fine with no errors but when it gets run on the arduino, it properly outputs the first letter and then stops.</p>\n\n<p>here is my .ino file:</p>\n\n<pre><code>#include &lt;Morse.h&gt;\n\nMorse morse(13);\n\nvoid setup()\n{\n  morse.writeStr(\"Wow\");\n  delay(3000);\n}\n\nvoid loop()\n{\n\n}\n</code></pre>\n\n<p>and here is my library header file (.h):</p>\n\n<pre><code>/*\n  Morse.h - Library for flashing Morse code.\n  Created by Adrian Wowk, December 11, 2019.\n  Released into the public domain.\n*/\n#ifndef Morse_h\n#define Morse_h\n\n#include \"Arduino.h\"\n\nclass Morse\n{\n  public:\n    Morse(int pin);\n    void dot();\n    void dash();\n    void writeStr(char message[6]);\n  private:\n    int _pin;\n\n};\n\n#endif\n</code></pre>\n\n<p>and here is my library C++ file:</p>\n\n<pre><code>/*\n  Morse.cpp - Library for flashing Morse code.\n  Created by Adrian Wowk, December 11, 2019.\n  Released into the public domain.\n*/\n\n#include \"Arduino.h\"\n#include \"Morse.h\"\n\nMorse::Morse(int pin)\n{\n    pinMode(pin, OUTPUT);\n    _pin = pin;\n}\n\nvoid Morse::dot()\n{\n    digitalWrite(_pin, HIGH);\n    delay(250);\n    digitalWrite(_pin, LOW);\n    delay(250);\n}\n\nvoid Morse::dash()\n{\n    digitalWrite(_pin, HIGH);\n    delay(1000);\n    digitalWrite(_pin, LOW);\n    delay(250);\n}\n\nvoid Morse::writeStr(char message[6])\n{\n    for (byte i = 0; i &lt; sizeof(message) - 1; i++)\n    {\n        switch (message[i])\n        {\n        case 1:\n            dot();\n            dash();\n            dash();\n            dash();\n            dash();\n            break;\n        case 2:\n            dot();\n            dot();\n            dash();\n            dash();\n            dash();\n            break;\n        case 3:\n            dot();\n            dot();\n            dot();\n            dash();\n            dash();\n            break;\n        case 4:\n            dot();\n            dot();\n            dot();\n            dot();\n            dash();\n            break;\n        case 5:\n            dot();\n            dot();\n            dot();\n            dot();\n            dot();\n            break;\n        case 6:\n            dash();\n            dot();\n            dot();\n            dot();\n            dot();\n            break;\n        case 7:\n            dash();\n            dash();\n            dot();\n            dot();\n            dot();\n            break;\n        case 8:\n            dash();\n            dash();\n            dash();\n            dot();\n            dot();\n            break;\n        case 9:\n            dash();\n            dash();\n            dash();\n            dash();\n            dot();\n            break;\n        case 0:\n            dash();\n            dash();\n            dash();\n            dash();\n            dash();\n            break;\n        case 'a':\n            dot();\n            dash();\n            break;\n        case 'A':\n            dot();\n            dash();\n            break;\n        case 'b':\n            dash();\n            dot();\n            dot();\n            dot();\n            break;\n        case 'B':\n            dash();\n            dot();\n            dot();\n            dot();\n            break;\n        case 'c':\n            dash();\n            dot();\n            dash();\n            dot();\n            break;\n        case 'C':\n            dash();\n            dot();\n            dash();\n            dot();\n            break;\n        case 'd':\n            dash();\n            dot();\n            dot();\n            break;\n        case 'D':\n            dash();\n            dot();\n            dot();\n            break;\n        case 'e':\n            dot();\n            break;\n        case 'E':\n            dot();\n            break;\n        case 'f':\n            dot();\n            dot();\n            dash();\n            dot();\n            break;\n        case 'F':\n            dot();\n            dot();\n            dash();\n            dot();\n            break;\n        case 'g':\n            dash();\n            dash();\n            dot();\n            break;\n        case 'G':\n            dash();\n            dash();\n            dot();\n            break;\n        case 'h':\n            dot();\n            dot();\n            dot();\n            dot();\n            break;\n        case 'H':\n            dot();\n            dot();\n            dot();\n            dot();\n            break;\n        case 'i':\n            dot();\n            dot();\n            break;\n        case 'I':\n            dot();\n            dot();\n            break;\n        case 'j':\n            dot();\n            dash();\n            dash();\n            dash();\n            break;\n        case 'J':\n            dot();\n            dash();\n            dash();\n            dash();\n            break;\n        case 'k':\n            dash();\n            dot();\n            dash();\n            break;\n        case 'K':\n            dash();\n            dot();\n            dash();\n            break;\n        case 'l':\n            dot();\n            dash();\n            dot();\n            dot();\n            break;\n        case 'L':\n            dot();\n            dash();\n            dot();\n            dot();\n            break;\n        case 'm':\n            dash();\n            dash();\n            break;\n        case 'M':\n            dash();\n            dash();\n            break;\n        case 'n':\n            dash();\n            dot();\n            break;\n        case 'N':\n            dash();\n            dot();\n            break;\n        case 'o':\n            dash();\n            dash();\n            dash();\n            break;\n        case 'O':\n            dash();\n            dash();\n            dash();\n            break;\n        case 'p':\n            dot();\n            dash();\n            dash();\n            dot();\n            break;\n        case 'P':\n            dot();\n            dash();\n            dash();\n            dot();\n            break;\n        case 'q':\n            dash();\n            dash();\n            dot();\n            dash();\n            break;\n        case 'Q':\n            dash();\n            dash();\n            dot();\n            dash();\n            break;\n        case 'r':\n            dot();\n            dash();\n            dot();\n            break;\n        case 'R':\n            dot();\n            dash();\n            dot();\n            break;\n        case 's':\n            dot();\n            dot();\n            dot();\n            break;\n        case 'S':\n            dot();\n            dot();\n            dot();\n            break;\n        case 't':\n            dash();\n            break;\n        case 'T':\n            dash();\n            break;\n        case 'u':\n            dot();\n            dot();\n            dash();\n            break;\n        case 'U':\n            dot();\n            dot();\n            dash();\n            break;\n        case 'v':\n            dot();\n            dot();\n            dot();\n            dash();\n            break;\n        case 'V':\n            dot();\n            dot();\n            dot();\n            dash();\n            break;\n        case 'w':\n            dot();\n            dash();\n            dash();\n            break;\n        case 'W':\n            dot();\n            dash();\n            dash();\n            break;\n        case 'x':\n            dash();\n            dot();\n            dot();\n            dash();\n            break;\n        case 'X':\n            dash();\n            dot();\n            dot();\n            dash();\n            break;\n        case 'y':\n            dash();\n            dot();\n            dash();\n            dash();\n            break;\n        case 'Y':\n            dash();\n            dot();\n            dash();\n            dash();\n            break;\n        case 'z':\n            dash();\n            dash();\n            dot();\n            dot();\n            break;\n        case 'Z':\n            dash();\n            dash();\n            dot();\n            dot();\n            break;\n        case ' ':\n            delay(250);\n            break;\n\n        default:\n            delay(1000);\n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 9205446, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k0eBEZh5FSE/AAAAAAAAAAI/AAAAAAAAAB4/PnaLocfTGfM/photo.jpg?sz=128", "display_name": "Emil Kabirov", "link": "https://stackoverflow.com/users/9205446/emil-kabirov"}, "edited": false, "score": 0, "creation_date": 1576444676, "post_id": 59295294, "comment_id": 104892284, "body": "I&#39;ve learned that if a file is being written (or just have been written), then when I read the file, std::filesystem::file_size may return 0, and ifstream returns true from operator bool. So the file is not available for some time, but I get no errors and I can&#39;t distinguish this case from a case of real empty file. So I have to read a file in a loop while its size is 0 for some time."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 387, "user_id": 9205446, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k0eBEZh5FSE/AAAAAAAAAAI/AAAAAAAAAB4/PnaLocfTGfM/photo.jpg?sz=128", "display_name": "Emil Kabirov", "link": "https://stackoverflow.com/users/9205446/emil-kabirov"}, "edited": false, "score": 0, "creation_date": 1576489123, "post_id": 59295294, "comment_id": 104902752, "body": "@EmilKabirov I was unaware of that, but it sounds like an OS/implementation problem."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1576104425, "creation_date": 1576104425, "answer_id": 59295294, "question_id": 59294651, "link": "https://stackoverflow.com/questions/59294651/check-istreambuf-iterator-fail/59295294#59295294", "title": "Check istreambuf_iterator fail", "body": "<p>The easiest way to check whether the stream has errors is to use <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">operator bool</a> after every operation on streams.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string file_name{\"data.txt\"};\n    std::ifstream ifs(file_name);\n    if ( !ifs)  // &lt;---\n        std::cout &lt;&lt; \"Error: unable to open \" &lt;&lt; file_name &lt;&lt; \".\\n\";\n\n    std::string text{ std::istreambuf_iterator&lt;char&gt;(ifs),\n                      std::istreambuf_iterator&lt;char&gt;() };\n    //              ^                                  ^\n\n    if ( ifs )  // &lt;--                    \n        std::cout &lt;&lt; text &lt;&lt; '\\n';\n    else \n        std::cout &lt;&lt; \"An error occured while reading the file.\\n\";\n}\n</code></pre>\n\n<p>Note that OP's snippet suffers from the <a href=\"https://stackoverflow.com/questions/14077608/what-is-the-purpose-of-the-most-vexing-parse\">Most Vexing Parse</a>, which can be fixed using the <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list-initialization</a> of the string.</p>\n"}], "owner": {"reputation": 387, "user_id": 9205446, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k0eBEZh5FSE/AAAAAAAAAAI/AAAAAAAAAB4/PnaLocfTGfM/photo.jpg?sz=128", "display_name": "Emil Kabirov", "link": "https://stackoverflow.com/users/9205446/emil-kabirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576444807, "creation_date": 1576101116, "last_edit_date": 1576444807, "question_id": 59294651, "link": "https://stackoverflow.com/questions/59294651/check-istreambuf-iterator-fail", "title": "Check istreambuf_iterator fail", "body": "<p>We can read a whole file into a string:</p>\n\n<pre><code>std::ifstream ifs(path);\nassert(ifs.good());\nstd::string text(std::istreambuf_iterator&lt;char&gt;(ifs), std::istreambuf_iterator&lt;char&gt;())\n</code></pre>\n\n<p>Once this code returned an empty string. How can I check that there were no errors during the reading?</p>\n\n<p><strong>UPD:</strong></p>\n\n<p>I've learned that if a file is being written (or just have been overwritten), then when I read the file, std::filesystem::file_size may return 0, and ifstream returns true from operator bool (on Windows). So the file is not available for some time, but I get no errors and I can't distinguish this case from a case of real empty file. So I have to read a file in a loop while its size is 0 for some time. </p>\n"}, {"tags": ["c++", "initialization"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 66, "user_id": 7631407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eb608e093d07dbc12c46990b52e149d?s=128&d=identicon&r=PG&f=1", "display_name": "RPDF", "link": "https://stackoverflow.com/users/7631407/rpdf"}, "edited": false, "score": 1, "creation_date": 1576100699, "post_id": 59294508, "comment_id": 104793694, "body": "@RPDF OP explicitly mentions that this is not the issue, the question is about something else"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1576100858, "post_id": 59294508, "comment_id": 104793742, "body": "Be careful with terminology. A <b>function returns</b> a value, with one or more <code>return</code> statements. An <b>expression has</b> a value. It doesn&#39;t &quot;return&quot; anything."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1576107086, "post_id": 59294508, "comment_id": 104795633, "body": "In <code>int age = 30;</code> the <code>=</code>, despite its appearance, is not an assignment. It&#39;s an initialization. In C++ that declaration could also be written <code>int age{30};</code> with the same meaning. For object types with constructors it&#39;s a bit more complicated, but still, that <code>=</code> is not an assignment."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "edited": false, "score": 0, "creation_date": 1576101769, "post_id": 59294636, "comment_id": 104794031, "body": "Okay thanks. But does that means the assignment operator meaning is being used here? And the declaration in this case is yielding an integral type, which is then converted to a bool?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "edited": false, "score": 2, "creation_date": 1576101916, "post_id": 59294636, "comment_id": 104794086, "body": "The declaration has an initialization, not an assignment. That&#39;s probably a distinction without a difference for <code>int</code>, but may have implications for class types. The declaration is not yielding a value, but a variable that is used to control the loop. The <code>while</code> statement evaluates the variable and,  yes, converts the <code>int</code> to a <code>bool</code>. 0 is falsey, nonzero is truthy."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1576102552, "post_id": 59294636, "comment_id": 104794288, "body": "Is something like <code>if (int i = Calculate()) ...</code> a special case of sorts?  (The predicate part in particular.)  Is that also valid in <code>C</code>?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1576103124, "post_id": 59294636, "comment_id": 104794484, "body": "@Eljay: Yes, <a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\">it has the same sort of language for <code>if</code></a>. But I do not find such language <a href=\"https://en.cppreference.com/w/c/language/while\" rel=\"nofollow noreferrer\">for C</a>."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 6, "last_activity_date": 1576101024, "creation_date": 1576101024, "answer_id": 59294636, "question_id": 59294508, "link": "https://stackoverflow.com/questions/59294508/what-is-the-result-of-an-initialization-in-c/59294636#59294636", "title": "What is the result of an initialization in C++?", "body": "<p>A declaration statement with an initializer is a just a declaration statement, not an expression. It does not yield a value. You can't do something like <code>int x = (int n = 42);</code>.</p>\n\n<p>The <code>while</code> loop is something of a special case. You <em>can</em> use a declaration as the condition of a <code>while</code> loop. According to <a href=\"https://en.cppreference.com/w/cpp/language/while\" rel=\"noreferrer\">cppreference.com</a>,</p>\n\n<blockquote>\n  <p>If this is a declaration, the initializer is evaluated before each\n  iteration, and if the value of the declared variable converts to\n  false, the loop is exited.</p>\n</blockquote>\n"}], "owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 59294636, "answer_count": 1, "score": 6, "last_activity_date": 1576101900, "creation_date": 1576100364, "last_edit_date": 1576101900, "question_id": 59294508, "link": "https://stackoverflow.com/questions/59294508/what-is-the-result-of-an-initialization-in-c", "title": "What is the result of an initialization in C++?", "body": "<p>What is the return value of an initialization? For example:\nIn the following code;  </p>\n\n<pre><code>#include&lt;iostream&gt;\n\nint main()\n{\n    int age = 30;          //does this statement return (thus; yield) anything?\n\n    while(int i = 0){      //a similar statement (expression) used here in this condition\n        std::cout&lt;&lt;\"OK\";   \n    }\n\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li>What does the statement <code>int age = 27;</code> return?</li>\n<li>Does the usual assignment operator meaning apply when there is an initialization, where the left operand of the assignment operator is returned?</li>\n</ul>\n\n<p>The reason why I want to know this is that, when we take a look at the conditional statement above we see a similar initialization of a variable that is used as the condition. I know that whatever value that is returned is converted to the bool type though.</p>\n\n<p><strong>Note</strong>: I am not trying to compare i to 0 in the condition of the while statement.</p>\n"}, {"tags": ["c++", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12401816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7968eee9af4e1c12bf575c930bca67ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/12401816/anatoly"}, "edited": false, "score": 0, "creation_date": 1576140781, "post_id": 59295125, "comment_id": 104804533, "body": "Can you explain what unordered_map is and how it is applied?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12505281"}, "is_accepted": false, "score": 0, "last_activity_date": 1576103534, "creation_date": 1576103534, "answer_id": 59295125, "question_id": 59294506, "link": "https://stackoverflow.com/questions/59294506/the-problem-is-finding-the-largest-negative-least-positive-numbers/59295125#59295125", "title": "The problem is finding the largest negative, least positive numbers", "body": "<p>You can use sets for that. </p>\n\n<p>Here is the solution: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include&lt;set&gt;\n\nusing namespace std;\nint main()\n{\n    setlocale(LC_ALL, \"\");\n\n    const int rows = 5;\n    const int cols = 5;\n\n    int pos = 0;\n    int neg = 0;\n    int null = 0;\n\n    int iMin = 0;\n    int jMin = 0;\n    int iMax = 0;\n    int jMax = 0;\n\n    //for larget negative\n    int ineg=0;\n    int jneg=0;\n    //for lowest positive\n    int ipos=0;\n    int jpos=0;\n\n    double average;\n    double sum = 0;\n\n    ifstream matrix(\"Matrix.txt\", ios::in);\n\n    int arr[rows][cols];\n    for (int i = 0; i &lt; rows; i++)\n    {\n        for (int j = 0; j &lt; cols; j++)\n        {\n            matrix &gt;&gt; arr[i][j];\n            cout &lt;&lt; arr[i][j] &lt;&lt; \" \" &lt;&lt; \"\\t\";\n        }\n\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl;\n\n    matrix.close();\n\n    ofstream final_matrix(\"Final_matrix.txt\", ios::out);\n\n                set&lt;int, greater&lt;int&gt;&gt; s;\n\n                set&lt;int&gt; s1;\n\n        for (int i = 0; i &lt; rows; i++)\n        {\n            for (int j = 0; j &lt; cols; j++)\n            {\n                if (arr[i][j] &gt; 0)\n                {\n                    pos++;\n                }\n                else if (arr[i][j] &lt; 0)\n                {\n                    neg++;\n                }\n                else\n                {\n                    null++;\n                }\n\n                if (arr[i][j] &lt; arr[iMin][jMin])\n                {\n                    iMin = i;\n                    jMin = j;\n                }\n\n\n                if (arr[i][j] &gt; arr[iMax][jMax])\n                {\n                    iMax = i;\n                    jMax = j;\n                }\n\n                sum += arr[i][j]; \n\n                if(arr[i][j]&lt;0)\n                {\n                    s.insert(arr[i][j]);\n                }\n\n                if(arr[i][j]&gt;0)\n                {\n                    s1.insert(arr[i][j]);\n                }\n            }\n        }\n        int prod = rows * cols;\n\n                set&lt;int&gt;::iterator it1 = s1.begin();\n                set&lt;int, greater&lt;int&gt; &gt; ::iterator it = s.begin(); \n\n        cout &lt;&lt; \"The number of positive numbers in the matrix: \" &lt;&lt; pos &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The number of positive numbers in the matrix: \" &lt;&lt; pos &lt;&lt; endl;\n\n        cout &lt;&lt; \"The number of negative numbers in the matrix: \" &lt;&lt; neg &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The number of negative numbers in the matrix: \" &lt;&lt; neg &lt;&lt; endl;\n\n        cout &lt;&lt; \"The number of zeros in the matrix: \" &lt;&lt; null &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The number of zeros in the matrix: \" &lt;&lt; null &lt;&lt; endl;\n\n        cout &lt;&lt; \"The minimum number in the matrix: \" &lt;&lt; arr[iMin][jMin] &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The minimum number in the matrix: \" &lt;&lt; arr[iMin][jMin] &lt;&lt; endl;\n\n        cout &lt;&lt; \"The maximum number in the matrix: \" &lt;&lt; arr[iMax][jMax] &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The maximum number in the matrix: \" &lt;&lt; arr[iMax][jMax] &lt;&lt; endl;\n\n        cout &lt;&lt; \"The lowest positive number in the matrix: \" &lt;&lt; *it1 &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The lowest positive number in the matrix: \" &lt;&lt; *it1 &lt;&lt; endl;\n\n        cout &lt;&lt; \"The largest negative number in the matrix: \" &lt;&lt; *it &lt;&lt; endl;\n        final_matrix &lt;&lt; \"The largest negative number in the matrix: \" &lt;&lt; *it &lt;&lt;endl;\n\n        cout &lt;&lt; \"Arithmetic mean of the matrix: \" &lt;&lt; sum / prod &lt;&lt; endl;\n        final_matrix &lt;&lt; \"Arithmetic mean of the matrix: \" &lt;&lt; sum / (rows * cols) &lt;&lt; endl;\n\n        final_matrix.close();\n\n    cin.get();\n}\n</code></pre>\n\n<p>If you want coordinates also, use unordered_map where you can insert a pair of your coordinates.</p>\n"}], "owner": {"reputation": 3, "user_id": 12401816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7968eee9af4e1c12bf575c930bca67ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/12401816/anatoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576103534, "creation_date": 1576100356, "question_id": 59294506, "link": "https://stackoverflow.com/questions/59294506/the-problem-is-finding-the-largest-negative-least-positive-numbers", "title": "The problem is finding the largest negative, least positive numbers", "body": "<p>In general, the task, most of which I did:\n<a href=\"https://i.stack.imgur.com/Pn8bY.png\" rel=\"nofollow noreferrer\">Task</a></p>\n\n<p>My problem is 2 things: 1) How to find the smallest positive and largest negative number. 2) How to find their position (and yes, I could not find the positions of the smaller and maximum numbers either).</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;fstream&gt;\n    #include &lt;string&gt;\n\n    using namespace std;\n    int main()\n    {\n        setlocale(LC_ALL, \"\");\n\n        const int rows = 5;\n        const int cols = 5;\n\n        int pos = 0;\n        int neg = 0;\n        int null = 0;\n\n        int iMin = 0;\n        int jMin = 0;\n        int iMax = 0;\n        int jMax = 0;\n\n        double average;\n        double sum = 0;\n\n        ifstream matrix(\"C:\\\\Folder\\\\Matrix.txt\", ios::in);\n\n        int arr[rows][cols];\n        for (int i = 0; i &lt; rows; i++)\n        {\n            for (int j = 0; j &lt; cols; j++)\n            {\n                matrix &gt;&gt; arr[i][j];\n                cout &lt;&lt; arr[i][j] &lt;&lt; \" \" &lt;&lt; \"\\t\";\n            }\n\n            cout &lt;&lt; endl;\n        }\n        cout &lt;&lt; endl;\n\n        matrix.close();\n\n        ofstream final_matrix(\"C:\\\\Folder\\\\Final matrix.txt\", ios::out);\n\n            for (int i = 0; i &lt; rows; i++)\n            {\n                for (int j = 0; j &lt; cols; j++)\n                {\n                    if (arr[i][j] &gt; 0)\n                    {\n                        pos++;\n                    }\n                    else if (arr[i][j] &lt; 0)\n                    {\n                        neg++;\n                    }\n                    else\n                    {\n                        null++;\n                    }\n\n                    if (arr[i][j] &lt; arr[iMin][jMin])\n                    {\n                        iMin = i;\n                        jMin = j;\n                    }\n\n                    if (arr[i][j] &gt; arr[iMax][jMax])\n                    {\n                        iMax = i;\n                        jMax = j;\n                    }\n\n\n\n                    sum += arr[i][j]; \n\n                }\n            }\n            int prod = rows * cols;\n\n            cout &lt;&lt; \"The number of positive numbers in the matrix: \" &lt;&lt; pos &lt;&lt; endl;\n            final_matrix &lt;&lt; \"The number of positive numbers in the matrix: \" &lt;&lt; pos &lt;&lt; endl;\n\n            cout &lt;&lt; \"The number of negative numbers in the matrix: \" &lt;&lt; neg &lt;&lt; endl;\n            final_matrix &lt;&lt; \"The number of negative numbers in the matrix: \" &lt;&lt; neg &lt;&lt; endl;\n\n            cout &lt;&lt; \"The number of zeros in the matrix: \" &lt;&lt; null &lt;&lt; endl;\n            final_matrix &lt;&lt; \"The number of zeros in the matrix: \" &lt;&lt; null &lt;&lt; endl;\n\n            cout &lt;&lt; \"The minimum number in the matrix: \" &lt;&lt; arr[iMin][jMin] &lt;&lt; endl;\n            final_matrix &lt;&lt; \"The minimum number in the matrix: \" &lt;&lt; arr[iMin][jMin] &lt;&lt; endl;\n\n            cout &lt;&lt; \"The maximum number in the matrix: \" &lt;&lt; arr[iMax][jMax] &lt;&lt; endl;\n            final_matrix &lt;&lt; \"The maximum number in the matrix: \" &lt;&lt; arr[iMax][jMax] &lt;&lt; endl;\n\n            cout &lt;&lt; \"Arithmetic mean of the matrix: \" &lt;&lt; sum / prod &lt;&lt; endl;\n            final_matrix &lt;&lt; \"Arithmetic mean of the matrix: \" &lt;&lt; sum / (rows * cols) &lt;&lt; endl;\n\n            final_matrix.close();\n\n        cin.get();\n    }\n</code></pre>\n\n<p>Below I also present the result of the code (it showed only what is displayed on the console; in addition, the results are still saved in a separate file).\n<a href=\"https://i.stack.imgur.com/s954b.png\" rel=\"nofollow noreferrer\">Work</a></p>\n"}, {"tags": ["c++", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1576100428, "post_id": 59294500, "comment_id": 104793575, "body": "No it would not work."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576112720, "post_id": 59294586, "comment_id": 104796845, "body": "FYI, in C++17 and later, you can use <a href=\"https://en.cppreference.com/w/cpp/iterator/size\" rel=\"nofollow noreferrer\"><code>std::size()</code></a> to get the size of a fixed array, so you don&#39;t need to write a custom template for that: <code>size_t n = std::size(s); std::cout &lt;&lt; s[n-1] &lt;&lt; &#39;\\n&#39;;</code> If you are not using a C++17 compiler, you can write your own templated <code>size()</code> function: <code>template &lt;typename T, size_t N&gt; size_t size(const T (&amp;s)[N]) { return N; }</code>"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1576112617, "last_edit_date": 1576112617, "creation_date": 1576100757, "answer_id": 59294586, "question_id": 59294500, "link": "https://stackoverflow.com/questions/59294500/in-c-using-pointer-arithmetic/59294586#59294586", "title": "In c++ using pointer arithmetic", "body": "<p>If a character array contains a C-style string, ie it contains a null terminator, then you can apply the standard C function <code>strlen()</code>, like this:</p>\n\n<pre><code>char s[] = \"Hello\";\n//...\nsize_t n = strlen( s );\n\nif ( n != 0 ) std::cout &lt;&lt; s[n-1] &lt;&lt; '\\n';\n</code></pre>\n\n<p>Otherwise, you can write a template function like this:</p>\n\n<pre><code>template &lt;size_t N&gt;\nchar last_char( const char ( &amp;s )[N] )\n{\n    return s[N-1];\n}\n</code></pre>\n\n<p>and call it like this:</p>\n\n<pre><code>char s[] = { 'H', 'e', 'l', 'l', 'o' };\n\nstd::cout &lt;&lt; last_char( s ) &lt;&lt; '\\n';\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12240365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d9d2d1b0dbfd64316ffcdb5403a635a?s=128&d=identicon&r=PG&f=1", "display_name": "jraharris", "link": "https://stackoverflow.com/users/12240365/jraharris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59294586, "answer_count": 1, "score": -1, "last_activity_date": 1576112617, "creation_date": 1576100331, "question_id": 59294500, "link": "https://stackoverflow.com/questions/59294500/in-c-using-pointer-arithmetic", "title": "In c++ using pointer arithmetic", "body": "<p>How do you display the last character in a character array when you don't know how big the array is?\nWould array *('\\0' - 1) work? </p>\n"}, {"tags": ["c++", "cmake", "static-libraries"], "comments": [{"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "reply_to_user": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1576101646, "post_id": 59294499, "comment_id": 104793990, "body": "According to answer I can&#39;t do anything about this problem i guess i can just report the problem to Linux. I&#39;ll try it on CodeBlocks maybe it will work."}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1576101987, "post_id": 59294499, "comment_id": 104794110, "body": "For sure your <code>ld</code> is failing. You have to check your installation of Linux."}], "owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1576103785, "answer_count": 0, "score": 0, "last_activity_date": 1576100328, "creation_date": 1576100328, "question_id": 59294499, "link": "https://stackoverflow.com/questions/59294499/sqlapi-linking-with-cmake", "closed_reason": "Duplicate", "title": "SQLAPI linking with CMake", "body": "<p>I am trying to link my static library files (SQLAPI Library Files) to my project. I've done this before by using VS 2017 but in CLion I couldn't done. Surely, I think my CMake experience is not enough to do this process. Firstly I thought that maybe my CMake doesn't work, then I tried to install OpenCV in same way and it worked.</p>\n\n<p>Basicly my main body;</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SQLAPI.h&gt;\nint main() {\n    SAConnection connection;\n    connection.Connect(\"test\",\"test\",\"test\",SA_Oracle_Client);\n    std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Therefore here is my CMakeList.txt;</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.13)\nproject(kutuphanedeneme)\n\nset(CMAKE_CXX_STANDARD 14)\n#find_package(OpenCV REQUIRED)\ninclude_directories(kutuphanedeneme ${CMAKE_SOURCE_DIR}/SQLAPI/include)\nadd_executable(kutuphanedeneme main.cpp)\n\ntarget_link_libraries(kutuphanedeneme ${CMAKE_SOURCE_DIR}/SQLAPI/lib/libsqlapi.a)\ntarget_link_libraries(kutuphanedeneme ${CMAKE_SOURCE_DIR}/SQLAPI/lib/libsqlapiu.a)\n\n#target_link_libraries(kutuphanedeneme ${OpenCV_LIBS})\n#target_link_libraries(kutuphanedeneme ${CMAKE_SOURCE_DIR}/libsqlapi.so)\n\n#message(${OpenCV_LIBS})\n</code></pre>\n\n<p>My error part; </p>\n\n<pre><code>Scanning dependencies of target kutuphanedeneme\n[ 50%] Building CXX object CMakeFiles/kutuphanedeneme.dir/main.cpp.o\n[100%] Linking CXX executable kutuphanedeneme\ncollect2: fatal error: ld terminated with signal 11 [Par\u00e7alama ar\u0131zas\u0131], core dumped\ncompilation terminated.\n/usr/bin/ld: girdi dosyas\u0131 `CMakeFiles/kutuphanedeneme.dir/build.make:85: recipe for target 'kutuphanedeneme' failed\nmake[3]: *** [kutuphanedeneme] Error 1\nmake[3]: *** 'kutuphanedeneme' dosyas\u0131 siliniyor\nCMakeFiles/Makefile2:72: recipe for target 'CMakeFiles/kutuphanedeneme.dir/all' failed\nmake[2]: *** [CMakeFiles/kutuphanedeneme.dir/all] Error 2\nCMakeFiles/Makefile2:84: recipe for target 'CMakeFiles/kutuphanedeneme.dir/rule' failed\nmake[1]: *** [CMakeFiles/kutuphanedeneme.dir/rule] Error 2\nMakefile:118: recipe for target 'kutuphanedeneme' failed\nmake: *** [kutuphanedeneme] Error 2\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "friend"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1576100640, "post_id": 59294485, "comment_id": 104793672, "body": "You have an include loop. There cannot be <code>a.h</code> include <code>b.h</code> and <code>b.h</code> include <code>a.h</code> . You need to design your classes so the includes come in a hierarchy without loops."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1576100755, "post_id": 59294485, "comment_id": 104793705, "body": "A possible solution here is to make <code>Item</code> not dependent on <code>Order</code>; give it a public getter function instead of trying to friend Order&#39;s += operator"}], "answers": [{"tags": [], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "is_accepted": true, "score": 1, "last_activity_date": 1576106017, "last_edit_date": 1576106017, "creation_date": 1576105638, "answer_id": 59295479, "question_id": 59294485, "link": "https://stackoverflow.com/questions/59294485/friendship-and-operator-overloading/59295479#59295479", "title": "Friendship and Operator+= overloading", "body": "<p>The problem is 'Item.h' is trying to include 'Order.h' and 'Order.h' is trying to include 'Item.h' which is creating a loop. </p>\n\n<pre><code>Item.h -&gt; Order.h -&gt; Item.h -&gt; Order.h -&gt; ...\n</code></pre>\n\n<p>This is the reason why there is no proper definition for classes Item and Order and compiler is throwing error when you are trying to compile.</p>\n\n<p>To solve this issue, you can forward declare Object class in Item.h as you are not using Order class inside Item.h other than just declaring as friend. A forward declaration tells the compiler about the existence of an entity before actually defining the entity. There are some other errors like no definition for Item class destructor. I fixed those and Code is as below.</p>\n\n<p><strong>Item.h</strong></p>\n\n<pre><code>class Order;\n\nclass Item\n{\n    double Iprice;\npublic:\n    friend Order;\n    Item(double p =0):Iprice(p){\n\n    }\n\n    ~Item()\n    {\n    }\n};\n</code></pre>\n\n<p><strong>Order.h</strong></p>\n\n<pre><code>#pragma once\n#include\"Item.h\"\n#include&lt;iostream&gt;\nusing namespace std;\n\n    class Order\n    {\n        double Oprice;\n        int n_items;\n        friend ostream&amp; operator&lt;&lt;(ostream&amp; c , Order O );\n    public:\n\n        Order(double price =0, int n=0 ) {\n            Oprice = price;\n            n_items = n;\n        }\n\n        Order&amp; operator+=(Item I1) {\n            n_items++;\n            Oprice += I1.Iprice;\n\n            return (*this);\n        }\n    };\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n//#include \"Item.h\" // No need to include Item.h here as Order.h in the next line internally includes Item.h\n#include \"Order.h\"\nusing namespace std;\n\nostream&amp; operator&lt;&lt;(ostream&amp; c , Order O ){\n    c&lt;&lt; \"Total Price = \" &lt;&lt; O.Oprice &lt;&lt; \"-- item Count = \" &lt;&lt; O.n_items &lt;&lt; endl ;\n\n    return c ;\n\n}\nint main(){\n\nItem t1;\nt1 = 1000;\n\nOrder ord1;\n\ncout &lt;&lt; (ord1 += t1);\n}\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>Total Price = 1000-- item Count = 1\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 12521018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865aaf533f8525bb47ff56e503c436e?s=128&d=identicon&r=PG&f=1", "display_name": "Abdelrahman Hosny", "link": "https://stackoverflow.com/users/12521018/abdelrahman-hosny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59295479, "answer_count": 1, "score": 1, "last_activity_date": 1576106017, "creation_date": 1576100269, "last_edit_date": 1576100489, "question_id": 59294485, "link": "https://stackoverflow.com/questions/59294485/friendship-and-operator-overloading", "title": "Friendship and Operator+= overloading", "body": "<p>So I've been trying to over load the += operator but it isn't working in the Class Item I try to make only the += operator a friend but it says that members are still in accessible(the Commented line) my first question is why doesnt this work, so i make the whole Order class a friend , now it can access the data member however the overloading still doesnt work</p>\n\n<p>Here's my Code : Item Class</p>\n\n<pre><code>#pragma once\n#include\"Order.h\"\nclass Item\n{\n    double Iprice;\npublic:\n    friend Order ;\n    //friend Order&amp; Order::operator+=(Item);\n    Item(double p =0):Iprice(p){\n\n    }\n\n    ~Item(void);\n};\n</code></pre>\n\n<p>Order Class :</p>\n\n<pre><code>#pragma once\n#include\"Item.h\"\n#include&lt;iostream&gt;\nusing namespace std;\nclass Order\n{\n    double Oprice;\n    int n_items;\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; c , Order O );\npublic:\n\n    Order(double price =0, int n=0 ){\n        Oprice = price;\n        n_items = n;\n    }\n\n    Order&amp; operator+=(Item I1){\n        n_items++;\n        Oprice += I1.Iprice;\n\n        return (*this);\n    }\n\n};\n</code></pre>\n\n<p>Main function  :</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include\"Item.h\"\n#include\"Order.h\"\nusing namespace std;\n\n\nostream&amp; operator&lt;&lt;(ostream&amp; c , Order O ){\n    c&lt;&lt; \"Total Price = \" &lt;&lt; O.Oprice &lt;&lt; \"-- item Count = \" &lt;&lt; O.n_items &lt;&lt; endl ;\n\n    return c ;\n\n}\nint main(){\n\nItem t1;  \nt1 = 1000;\n\nItem t2 = 100;\nItem t3 = 10;\n\nOrder ord1; \n\nOrder ord2;\ncout &lt;&lt; (ord1 += t1);\n\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "arrays", "object", "operator-overloading"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1576099501, "post_id": 59294282, "comment_id": 104793198, "body": "The &quot;conventional&quot; way to do this would be to overload <code>operator()(int, int)</code> instead. Would that be in the cards for you?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1576099611, "post_id": 59294282, "comment_id": 104793244, "body": "&quot;unfortantly I was unable to get to the Board array, and to n variable.&quot; what does that mean? Do you get compiler errors? Runtime errors? wrong output?"}, {"owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1576132665, "post_id": 59294282, "comment_id": 104801364, "body": "@Frank I know its not the conventional way but this is the demand from the lectur.."}], "answers": [{"comments": [{"owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576133238, "post_id": 59295053, "comment_id": 104801553, "body": "i&#39;ve updated the code thank you!, but i <code>receive write access</code> violation on the line <code>ch=nch;</code> that in side <code>operator=</code> ."}, {"owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576134861, "post_id": 59295053, "comment_id": 104802155, "body": "on second thought, before i want to get/set the value I want to check if the given number is smaller than n-1 to avoid run time error."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576142666, "post_id": 59295053, "comment_id": 104805506, "body": "@itzikb I&#39;ve never heard of <code>receive write access violation</code> but I&#39;m pretty sure that nothing in the code I showed will cause that. Did you copy, compile and run the code in my answer? &quot;<i>before i want to get/set the value I want to check if the given number is smaller than n-1</i>&quot; - What do you mean? I put comments in the code where you should put your validation logic."}, {"owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576151859, "post_id": 59295053, "comment_id": 104810648, "body": "<a href=\"https://pastebin.com/nXZAA4HD\" rel=\"nofollow noreferrer\">pastebin.com/nXZAA4HD</a>, Because the function need to return Cell, when the parameters that sent from outside is out range from <code>0-(n-1)</code> i get an error because its not a cell object, i want to print message to the screen that the parameter is not good."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576152993, "post_id": 59295053, "comment_id": 104811216, "body": "@itzikb Ok, it&#39;s uncommon to have bounds checking in <code>operator[]</code>, but sure, it doesn&#39;t hurt (much). I strongly advice against printing messages to screen if the validation check fails though. Throw an exception that you can catch and log any way you want. I&#39;ll make an update."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576153225, "post_id": 59295053, "comment_id": 104811321, "body": "Also, <code>pos.first-1</code> and <code>pos.second-1</code> is wrong. The indexing is zero-based already so no <code>-1</code> there."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "edited": false, "score": 0, "creation_date": 1576153938, "post_id": 59295053, "comment_id": 104811732, "body": "And, if you decide to <b>not</b> throw an exception when you check index bounds you still would need to return a <code>Cell&amp;</code> - or otherwise you&#39;d have undefined behaviour. What should you then return? It becomes very ugly. You could perhaps return something like <code>std::optional&lt;Cell&amp;&gt;</code> but that would force the user to check for success on every use of <code>operator[]</code>. That&#39;d be terrible."}, {"owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1576166585, "post_id": 59295053, "comment_id": 104819311, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204136/discussion-between-itzikb-and-ted-lyngmo\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576153045, "last_edit_date": 1576153045, "creation_date": 1576103141, "answer_id": 59295053, "question_id": 59294282, "link": "https://stackoverflow.com/questions/59294282/overload-operator-to-give-a-specific-index-from-array-of-objects/59295053#59295053", "title": "overload operator [] to give a specific index from array of objects", "body": "<p>As mentioned in the comments, using <code>operator[]</code> for multidimensional subscripting is unconventional, but if you want that, you should make sure you get the correct amount of values (2 in this case) and that you return the correct type (a <code>Cell&amp;</code> in this case). </p>\n\n<p>Also be aware of <a href=\"https://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">shadowing</a>. If you try to construct a <code>Board</code> with a value less than 3, you'll set <code>this-&gt;n</code> to 3 but go on with the construction using the erroneous <code>n</code> (that may even be a negative value).</p>\n\n<p>More comments inline:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n#include &lt;tuple&gt;\n\nclass Cell {\nprivate:\n    char ch;\n\npublic:\n    Cell(char nch = '.') : // after the colon comes the member initializer list\n        ch(nch)            // which is usually good to use\n    {\n        // if(ch is not valid) throw ...\n    }\n\n    char getCellValue() const { return ch; }\n\n    // a convenient conversion operator to automatically\n    // convert a Cell to a char where a char is needed\n    // (like when streaming a Cell to std::cout)\n    operator char() const { return ch; }\n\n    // void setCellValue(char nch); // replaced by operator=\n    Cell&amp; operator=(char nch) {\n        // if(nch is not valid) throw ...\n        ch = nch;\n        return *this;\n    }\n};\n\nclass XOBoard {\nprivate:\n    size_t n;       // use an unsigned type for sizes/indices\n    Cell** Board;\n\npublic:\n    // constructor\n    XOBoard(size_t xy_size) :          // a member initializer list again\n        n(xy_size &gt;= 3 ? xy_size : 3), // assign to \"n\" here\n        Board(new Cell*[n])            // the correct n is now used\n    {\n        // if the below construction fails, a bad_alloc will be thrown.\n        // you need to add code to clean up what you've already allocated to take\n        // care of that situation.\n        for(size_t i = 0; i &lt; n; i++) {\n            Board[i] = new Cell[n];\n        }\n    }\n\n    // Copying or moving need careful handling of the pointers.\n    // Read \"The rule of three/five/zero\". Until then, disable it.\n    XOBoard(const XOBoard&amp;) = delete;\n    XOBoard&amp; operator=(const XOBoard&amp;) = delete;\n\n    // destructor\n    ~XOBoard() {\n        for(size_t i = 0; i &lt; n; i++) delete[] Board[i];\n        delete[] Board;\n    }\n\n    // added for convenience\n    size_t size() const { return n; }\n\n    // return a Cell&amp; and use a std::pair since you\n    // expect exactly 2 values\n    Cell&amp; operator[](std::pair&lt;size_t, size_t&gt; pos) {\n        auto&amp; [x, y] = pos;\n        if(x&gt;=n || y&gt;=n)\n            throw std::out_of_range(\"{\"+std::to_string(x)+\",\"+std::to_string(y)+\"}\");\n        return Board[x][y];\n    }\n\n};\n\nint main() {\n    try {\n        XOBoard a{2};                   // trying an invalid size\n        std::cout &lt;&lt; a.size() &lt;&lt; '\\n';\n        a[{2, 2}] = 'a';\n        std::cout &lt;&lt; a[{2, 2}] &lt;&lt; '\\n';\n        Cell x = 'b';\n        a[{2, 2}] = x;\n        std::cout &lt;&lt; a[{2, 2}] &lt;&lt; '\\n';\n        a[{2, 3}] = 'c';                // index out of bounds\n    } catch(const std::out_of_range&amp; ex) {\n        std::cerr &lt;&lt; \"out_of_range exception: \" &lt;&lt; ex.what() &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3\na\nb\nout_of_range exception: {2,3}\n</code></pre>\n\n<p>You should try to avoid raw pointers and actual multidimensional arrays. It's often better to emulate dimensionality by allocating a 1d array and provide an interface to the user that calculates the correct element to work on.</p>\n"}], "owner": {"reputation": 863, "user_id": 6356090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f80e28568316e33f41778d11ce9fe03?s=128&d=identicon&r=PG&f=1", "display_name": "itzikb", "link": "https://stackoverflow.com/users/6356090/itzikb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59295053, "answer_count": 1, "score": -1, "last_activity_date": 1576153045, "creation_date": 1576099307, "question_id": 59294282, "link": "https://stackoverflow.com/questions/59294282/overload-operator-to-give-a-specific-index-from-array-of-objects", "title": "overload operator [] to give a specific index from array of objects", "body": "<p>I have class <code>XOBoard</code> that present an array that is size n*n,each cell of the array is an Object called <code>Cell</code>.</p>\n\n<p>Each Cell object is defined by </p>\n\n<pre><code>class Cell {\n    private:\n        char ch;\n    public:\n        Cell(char ch = '.');\n        char getCellValue();\n        void setCellValue(char nch);\n};\n</code></pre>\n\n<p>Board is defined this way:</p>\n\n<pre><code>class XOBoard {\n    private:\n        int n;\n        Cell **Board;\n};\nXOBoard::XOBoard(int n) { //constructor\n    this-&gt;n = (n &gt;= 3) ? n : 3;\n    Board = new Cell*[n];\n    for (int i = 0; i &lt; n; i++) {\n        Board[i] = new Cell[n];\n    }\n}\n</code></pre>\n\n<p>I wanted to get to a specific Cell value by using this method: <code>board1[{1,2}]</code>, but I want to check if the values that sent to me is withing the range(n), but unfortantly I was unable to get to the Board array, and to <code>n</code> variable.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>XOBoard&amp; operator[](list&lt;int&gt; list){\n            int x = list.front(), y = list.back();\n            return Board[x][y].getCellValue();\n        }\n</code></pre>\n\n<p>Thanks a head!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 3, "creation_date": 1576099346, "post_id": 59294273, "comment_id": 104793131, "body": "<code>&#47;&#47; Sixth</code> there are only 5 elements in your array."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576099497, "post_id": 59294273, "comment_id": 104793195, "body": "I suggest you not to use raw arrays. If you learn about <code>std::vector</code> and/or <code>std::array</code> and how to use it instead, you will be much less surprised by the unintuitive behavior of raw arrays."}, {"owner": {"reputation": 3, "user_id": 12520917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67603bf47dc4fcf921b1acc477de81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Charlesistaken", "link": "https://stackoverflow.com/users/12520917/charlesistaken"}, "edited": false, "score": 0, "creation_date": 1576099677, "post_id": 59294273, "comment_id": 104793270, "body": "I know that there are only 5 elements, but I was too lazy to change it when I was solving another problem already :P the problem is that it applies the status effect to the first and second &quot;slot&quot;, when I only want it to apply to the first."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576099833, "post_id": 59294273, "comment_id": 104793329, "body": "@Charlesistaken Trying to use an array outside its bounds causes <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\"><i>undefined behavior</i></a>. That means that your whole program may start doing anything at all. You loose any guarantee that it will do anything sensible. Never be lazy about something like this. You should also not ask two questions at once."}, {"owner": {"reputation": 3, "user_id": 12520917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67603bf47dc4fcf921b1acc477de81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Charlesistaken", "link": "https://stackoverflow.com/users/12520917/charlesistaken"}, "edited": false, "score": 0, "creation_date": 1576103346, "post_id": 59294273, "comment_id": 104794548, "body": "Welp, sorry about that. The being lazy thing and also the asking two questions part. Thanks for the help though!"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1576099638, "creation_date": 1576099638, "answer_id": 59294347, "question_id": 59294273, "link": "https://stackoverflow.com/questions/59294273/c-assigning-value-to-array-if-element-is-equal-to-x/59294347#59294347", "title": "C++ assigning value to array if element is equal to X", "body": "<p>You are telling the computer to print the address of the array.<br>\nTo print the contents of the array, you'll need to use a loop:  </p>\n\n<pre><code>for (i = 0; i &lt; 5; ++i)\n{\n  cout &lt;&lt; statusEffect[i] &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12520917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67603bf47dc4fcf921b1acc477de81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Charlesistaken", "link": "https://stackoverflow.com/users/12520917/charlesistaken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "closed_date": 1576099708, "accepted_answer_id": 59294347, "answer_count": 1, "score": 0, "last_activity_date": 1576103169, "creation_date": 1576099247, "last_edit_date": 1576103169, "question_id": 59294273, "link": "https://stackoverflow.com/questions/59294273/c-assigning-value-to-array-if-element-is-equal-to-x", "closed_reason": "Duplicate", "title": "C++ assigning value to array if element is equal to X", "body": "<p>I'm brand new to C++, and I've been trying to make a simple game. I want a system for status effects the player can apply to the enemy, so I made an array of strings that can hold 5 elements, like \"burning\" or \"poisoned\" etc. When I tested this, however, it seemed to always apply the status effect (in this case, burning) to the first AND second status \"slot\". I want it to only apply to my first empty slot. I took this portion of the code out and expanded it from a for loop to an if statement, and this time I outputted the value of statusEffect and it gave me 0x1000020f0. I have no idea what that even is.</p>\n\n<p>Here's my code, I'm working on Xcode if that helps.</p>\n\n<pre><code>int statusEffectDuration[5] = {0, 0, 0, 0, 0};\nstring statusEffect[5] = {\"NONE\", \"NONE\", \"NONE\", \"NONE\", \"NONE\"};\n\n// Function for applying status effects\nvoid applyStatusEffect(string appliedEffect, int statusDuration) {\n\n    if (statusEffect[0] == \"NONE\") { // If first status effect is nothing then changes first status to \"EFFECT\"\n        statusEffect[0] = appliedEffect;\n        statusEffectDuration[0] = statusDuration;\n    }\n    else if (statusEffect[1] == \"NONE\") { // Same as first, but if second status is nothing then changes second status to \"EFFECT\"\n        statusEffect[1] = appliedEffect;\n        statusEffectDuration[1] = statusDuration;\n    }\n    else if (statusEffect[2] == \"NONE\") { // Third\n        statusEffect[2] = appliedEffect;\n        statusEffectDuration[2] = statusDuration;\n    }\n    else if (statusEffect[3] == \"NONE\") { // Fourth\n        statusEffect[3] = appliedEffect;\n        statusEffectDuration[3] = statusDuration;\n    }\n    else if (statusEffect[4] == \"NONE\") { // Fifth\n        statusEffect[4] = appliedEffect;\n        statusEffectDuration[4] = statusDuration;\n    }\n    else if (statusEffect[5] == \"NONE\") { // Sixth\n        statusEffect[5] = appliedEffect;\n        statusEffectDuration[5] = statusDuration;\n    }\n}\n\nint main() {\n\n    applyStatusEffect(\"EFFECT\", 5); // \"EFFECT\" is the effect that is given, 5 is duration of effect\n\n    // Displays status effect and effect duration\n    cout &lt;&lt; statusEffect; // Displays 0x1000020f0\n    cout &lt;&lt; \"\\n\";\n    cout &lt;&lt; statusEffectDuration; // Displays 0x1000020f0\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: I'm dumb. I was printing the address. But the problem with it giving the value to the first two empty spaces instead of one is the original reason I posted this.</p>\n"}, {"tags": ["c++", "opencv", "emscripten", "webassembly"], "answers": [{"tags": [], "owner": {"reputation": 4662, "user_id": 4035845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IXWOi.jpg?s=128&g=1", "display_name": "AnthumChris", "link": "https://stackoverflow.com/users/4035845/anthumchris"}, "is_accepted": false, "score": 0, "last_activity_date": 1577279295, "creation_date": 1577279295, "answer_id": 59478703, "question_id": 59294110, "link": "https://stackoverflow.com/questions/59294110/how-to-pass-to-image-buffer-to-wasm/59478703#59478703", "title": "How to pass to image buffer to wasm", "body": "<p><code>malloc()</code> and <code>HEAP8.set()</code> can be used to achieve that. <a href=\"https://developers.google.com/web/updates/2018/03/emscripting-a-c-library\" rel=\"nofollow noreferrer\">Surma's article</a> describes how to do this indetail.  Another example is this <a href=\"https://github.com/AnthumChris/opus-stream-decoder/blob/master/src/emscripten-post.js#L75\" rel=\"nofollow noreferrer\"><code>decode()</code></a> function, which sets values in Wasm from a JavaScript ArrayBuffer.</p>\n"}], "owner": {"reputation": 45, "user_id": 7862130, "user_type": "registered", "profile_image": "https://graph.facebook.com/727642224083052/picture?type=large", "display_name": "Kaushal Chhaunkar", "link": "https://stackoverflow.com/users/7862130/kaushal-chhaunkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577279295, "creation_date": 1576098542, "question_id": 59294110, "link": "https://stackoverflow.com/questions/59294110/how-to-pass-to-image-buffer-to-wasm", "title": "How to pass to image buffer to wasm", "body": "<p>I'm trying to pass array buffer js to wasm OpenCV but some times It throws an exception or some time blank array when using imdecode function.\n<strong>Simple HTML:</strong></p>\n\n<p><code>&lt;input type='file' id accept='image/*' onchange='openFile(event)'&gt;</code></p>\n\n<p><strong>Javascript code</strong></p>\n\n<pre><code> var openFile = function (e) {\n            const fileReader = new FileReader();\n            fileReader.onload = (event) =&gt; {\n                const uint8Arr = new Uint8Array(event.target.result);\n                passToWasm(uint8Arr);\n            };\n            fileReader.readAsArrayBuffer(e.target.files[0]);\n        };\n\n   function passToWasm(uint8ArrData) {\n            // copying the uint8ArrData to the heap\n            const numBytes = uint8ArrData.length * uint8ArrData.BYTES_PER_ELEMENT;\n            const dataPtr = Module._malloc(numBytes);\n            const dataOnHeap = new Uint8Array(Module.HEAPU8.buffer, dataPtr, numBytes);\n            dataOnHeap.set(uint8ArrData);\n            // calling the Wasm function\n            const res = Module._image_input(dataOnHeap.byteOffset, uint8ArrData.length);\n        }\n</code></pre>\n\n<p><strong>C++ code:</strong> </p>\n\n<pre><code>extern \"C\"\n{\n   int image_input(uint8_t* buffer, size_t nSize) //query image input\n    {\n        Mat raw_data = cv::Mat(1, nSize, CV_8UC1, buffer);\n        img_object = cv::imdecode(raw_data, cv::IMREAD_UNCHANGED);\n        cout &lt;&lt; img_object &lt;&lt; endl;\n        return 1\n    }\n}\n</code></pre>\n\n<p>Please help me I have spent many days to solve this problem.\nI'm trying the same with the help of the following question.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/55845033/how-to-pass-image-frames-camera-to-a-function-in-wasm-c\">How to pass image frames camera to a function in wasm (C++)?</a></p>\n"}, {"tags": ["c++", "arrays"], "owner": {"reputation": 11, "user_id": 11365242, "user_type": "registered", "profile_image": "https://graph.facebook.com/2711007178950520/picture?type=large", "display_name": "Colten Gaines", "link": "https://stackoverflow.com/users/11365242/colten-gaines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576098242, "creation_date": 1576098242, "question_id": 59294042, "link": "https://stackoverflow.com/questions/59294042/having-an-issue-inserting-values-into-an-array-at-an-index-given-by-my-hash-func", "title": "Having an issue inserting values into an array at an index given by my hash function", "body": "<p>I am getting memory locations when I attempt to print out given indexes of arrays that are being \"filled\" by two hash functions.\nwhen I print out x or y to the console I get valid integers within the size of the array, however it does not appear that the array is actually being affected when i try to add 1 to the array at x or y (horner[x] or myH[y]). I am unsure how to progress forward</p>\n\n<pre><code>int main() {\n    int *horn;\n    int *myH;\n    int size;\n    int x = 0;\n    int y = 0;\n    char choice;\n    int hc, mc, maxH, maxM;\n    string key;\n\n    fstream inFile;\n    inFile.open(\"words.txt\");\n\n    do {\n        cout &lt;&lt; \"Enter number of words to be hashed\";\n        cin &gt;&gt; size;\n\n        horn = new int[size];\n        myH = new int[size];\n\n            for (int i = 0; i &lt; size; i++) {\n                inFile &gt;&gt; key;\n\n                x = hashHorner(key, size);\n                y = myHash(key, size);\n\n\n                horn[x] += 1;\n                myH[y] += 1;\n            }\n\n        hc = numCollisions(horn, size);\n        mc = numCollisions(myH, size);\n        maxH = maxCollisions(horn, size);\n        maxM = maxCollisions(myH, size);\n\n        cout &lt;&lt; horn[5];\n        cout &lt;&lt; myH[10];\n\n        cout &lt;&lt; \"\\nhashHorner num collisions: \" &lt;&lt; hc;\n        cout &lt;&lt; \"\\nmyHash num collisions: \" &lt;&lt; mc;\n        cout &lt;&lt; \"\\nhashHorner max collisions: \" &lt;&lt; maxH;\n        cout &lt;&lt; \"\\nmyHash max collisions: \" &lt;&lt; maxM;\n\n        cout &lt;&lt; \"\\nWould you like to continue hashing?\";\n        cin &gt;&gt; choice;\n\n    } while (choice != 'n');\n\n    inFile.close();\n}\n\n\nint hashHorner(const string&amp; key, int size) {\n    unsigned int hashVal = 0;\n\n    for (char ch : key)\n        hashVal = 37 * hashVal + ch;\n\n    return (int)(hashVal % size);\n}\n\n\nint myHash(const string&amp; key, int size) {\n    unsigned int hashVal = 0;\n\n    for (char ch : key)\n        hashVal = 3301 * hashVal + ch;\n\n    return (int)(hashVal % size);\n}\n\nint numCollisions(int array[], int size) {\n    int n = 0;\n    for (int i = 0; i &lt; size; i++) {\n        if (array[i] &gt; 1) n++;\n    }\n    return n;\n}\n\nint maxCollisions(int array[], int size) {\n    int max = 0;\n    for (int i = 0; i &lt; size; i++) {\n        if (array[i] &gt; max) max = array[i];\n    }\n    return max;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 3, "creation_date": 1576097959, "post_id": 59293960, "comment_id": 104792576, "body": "What do you mean by &quot;removing&quot; and &quot;deleting&quot;? Do you want to zero all the elements?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1576098009, "post_id": 59293960, "comment_id": 104792602, "body": "also what do you mean with &quot;the array is still not deleted&quot;. The thing is there is no way to see that, because once deleted you are not allowed to access it anymore"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1576098048, "post_id": 59293960, "comment_id": 104792612, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 57, "user_id": 11946349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkR4m.jpg?s=128&g=1", "display_name": "loli", "link": "https://stackoverflow.com/users/11946349/loli"}, "edited": false, "score": 0, "creation_date": 1576098072, "post_id": 59293960, "comment_id": 104792621, "body": "There is no completely clean and delete from memory, during the cycle the memory is full if the array is not completely removed and the program crashes."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576098165, "post_id": 59293960, "comment_id": 104792648, "body": "<code>delete</code> (i.e. freeing memory) and overwriting with zero (<code>memset</code>) are too completely independent things to do. If you want to free the memory, you first need to show how you allocated it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576098169, "post_id": 59293960, "comment_id": 104792651, "body": "Multi dimensional arrays get huge, fast."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1576098170, "post_id": 59293960, "comment_id": 104792652, "body": "how do you do that? It is unclear what you are talking about. Please show code"}, {"owner": {"reputation": 57, "user_id": 11946349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkR4m.jpg?s=128&g=1", "display_name": "loli", "link": "https://stackoverflow.com/users/11946349/loli"}, "edited": false, "score": 0, "creation_date": 1576098787, "post_id": 59293960, "comment_id": 104792888, "body": "I threw off an example, the point is that the array can be any, depending on what I write, and I would like to just delete it right away if the function turns off."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576098812, "post_id": 59293960, "comment_id": 104792897, "body": "in the code you posted you are not calling any <code>delete</code>. With  &quot;the array is still not deleted&quot;. do you mean that you can still access the array elements after calling <code>delete</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576098840, "post_id": 59293960, "comment_id": 104792910, "body": "for every <code>new</code> you need a <code>delete</code>..."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1576098859, "post_id": 59293960, "comment_id": 104792920, "body": "@loli You delete it the same way you allocated it. Just with <code>delete[]</code> instead of <code>new[]</code>."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576099008, "post_id": 59293960, "comment_id": 104792977, "body": "You cannot completely delete the allocated memory without knowing exactly how you allocated it. There must be one <code>delete[]</code> executed (not <code>delete</code>!) for each <code>new[]</code> executed. I suggest you stop using <code>new</code>/<code>delete</code> all together and use <code>std::vector</code> instead, which is the proper way to handle arrays of dynamic size in C++. Using raw <code>new</code>/<code>delete</code> outside of a class managing one specific <code>new</code> allocation is considered bad style (you can see why) and is not exception-safe."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1576099031, "post_id": 59293960, "comment_id": 104792988, "body": "you can try <a href=\"https://www.boost.org/doc/libs/1_70_0/libs/multi_array/doc/user.html\" rel=\"nofollow noreferrer\">boost::multi_array</a>"}, {"owner": {"reputation": 57, "user_id": 11946349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkR4m.jpg?s=128&g=1", "display_name": "loli", "link": "https://stackoverflow.com/users/11946349/loli"}, "edited": false, "score": 0, "creation_date": 1576099075, "post_id": 59293960, "comment_id": 104793005, "body": "and I can do the removal once so as not to cause constantly delete[]?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1576099189, "post_id": 59293960, "comment_id": 104793060, "body": "You need one delete[] for each and every new[].  You could make a matrix class that contains a matrix class of a dimension one smaller - then you would need just one new[] in the constructor and one delete[] in the destructor.  Or you could use the built in vector class like was suggested before."}, {"owner": {"reputation": 57, "user_id": 11946349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkR4m.jpg?s=128&g=1", "display_name": "loli", "link": "https://stackoverflow.com/users/11946349/loli"}, "edited": false, "score": 0, "creation_date": 1576099603, "post_id": 59293960, "comment_id": 104793241, "body": "I realized thanks to everyone."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576101836, "post_id": 59293960, "comment_id": 104794054, "body": "Side note: this sort of multi-dimensional array can be quite slow because there is no spatial connection between the many arrays that make it up. If the array is rectangular (all of the columns are the same size) you are often better off allocating one big array and faking the second dimension by performing the indexing yourself. <a href=\"https://stackoverflow.com/a/2076668/4581301\">Here&#39;s a good example</a> using a <code>std::vector</code> that you can use as a basis for your own array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576101986, "post_id": 59293960, "comment_id": 104794107, "body": "<a href=\"https://isocpp.org/wiki/faq/operator-overloading#matrix-subscript-op\" rel=\"nofollow noreferrer\">Here is an incomplete implementation</a>  of the same thing without <code>std::vector</code>. Pay special attention to the copy constructor and assignment operator that are <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">required to make sure the allocated array is properly handled</a>. Sadly they are not implemented in this example. <code>std::vector</code> looks after the copying for you, allowing other objects using <code>std::vector</code> to observe the Rule of Zero (see preceding link)."}], "answers": [{"tags": [], "owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576100449, "last_edit_date": 1576100449, "creation_date": 1576100021, "answer_id": 59294424, "question_id": 59293960, "link": "https://stackoverflow.com/questions/59293960/how-to-completely-remove-a-multidimensional-dynamic-array/59294424#59294424", "title": "how to completely remove a multidimensional dynamic array?", "body": "<p>When you create an array with <code>new SomeType[M]</code> you must use <code>delete []</code> to free the memory allocated to the array.</p>\n\n<p>In the case of 2D arrays as you have written, you create an array of pointers first. Let's call this the \"outer array\". Then for each element in the outer array you create another array again with <code>new SomeType[N]</code>. The return of <code>new SomeType[N]</code> is a pointer, which will point to the corresponding \"inner array\".</p>\n\n<p>In order to free all the memory in your \"2D array\" you need to first call <code>delete []</code> for each inner array and only after that you call <code>delete []</code> for the outer array. Not doing any of these will result in a memory leak.</p>\n\n<p>In you example you don't have any delete command and thus we know for sure that there is a memory leak. Let's pretend we don't know this and check with valgrind. If we ran the executable with valgrind passing 2 and 3 as the inputs for the size, then valgrind returns something like</p>\n\n<pre><code>==194743== \n==194743== HEAP SUMMARY:\n==194743==     in use at exit: 40 bytes in 3 blocks\n==194743==   total heap usage: 6 allocs, 3 frees, 74,792 bytes allocated\n==194743== \n==194743== LEAK SUMMARY:\n==194743==    definitely lost: 16 bytes in 1 blocks\n==194743==    indirectly lost: 24 bytes in 2 blocks\n==194743==      possibly lost: 0 bytes in 0 blocks\n==194743==    still reachable: 0 bytes in 0 blocks\n==194743==         suppressed: 0 bytes in 0 blocks\n==194743== Rerun with --leak-check=full to see details of leaked memory\n==194743== \n==194743== For lists of detected and suppressed errors, rerun with: -s\n==194743== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>The leak summary from valgrind clearly tells us that some memory was not properly freed.\nNow, add the following code to the end of your main function to properly free all that memory</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Free all the inner arrays. Notice that we call `delete []` passing the\n// pointer of an inner array\nfor ( i = 0; i &lt; M; i++) {\n    delete [] matrix[i];\n}\n\n// Delete the outer array. Notice that now we pass the pointer of the outer array\ndelete [] matrix;\n</code></pre>\n\n<p>If we ran this with valgrind again we get something like</p>\n\n<pre><code>==197046== \n==197046== HEAP SUMMARY:\n==197046==     in use at exit: 0 bytes in 0 blocks\n==197046==   total heap usage: 6 allocs, 6 frees, 74,792 bytes allocated\n==197046== \n==197046== All heap blocks were freed -- no leaks are possible\n==197046== \n==197046== For lists of detected and suppressed errors, rerun with: -s\n==197046== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Valgrind is now telling us that we have indeed freed all the memory we have dynamic allocated. </p>\n\n<p><strong>All heap blocks were freed -- no leaks are possible</strong></p>\n"}], "owner": {"reputation": 57, "user_id": 11946349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkR4m.jpg?s=128&g=1", "display_name": "loli", "link": "https://stackoverflow.com/users/11946349/loli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 3, "accepted_answer_id": 59294424, "answer_count": 1, "score": 1, "last_activity_date": 1576100449, "creation_date": 1576097836, "last_edit_date": 1576098691, "question_id": 59293960, "link": "https://stackoverflow.com/questions/59293960/how-to-completely-remove-a-multidimensional-dynamic-array", "title": "how to completely remove a multidimensional dynamic array?", "body": "<p>actually the size of a multidimensional array I don\u2019t know, it can be such a </p>\n\n<pre><code>arr[i][k][j]; \n</code></pre>\n\n<p>or such a</p>\n\n<pre><code>arr[i][k][j][l];\n</code></pre>\n\n<p>or such a</p>\n\n<pre><code>arr[i];\n</code></pre>\n\n<p>I recognize this after starting, but I also need to delete or clear the array completely</p>\n\n<p>I tried to do it like this</p>\n\n<pre><code>memset(&amp;arr[i][k], 0, sizeof arr[i][k]);\n</code></pre>\n\n<p>and tried to do so</p>\n\n<pre><code>delete arr[i][k];\n</code></pre>\n\n<p>But the array is still not deleted, maybe there is a ready-made library that allows me to do this, please help.</p>\n\n<pre><code>int main() \n{ \n    int M ;\n    int N ; \n    int i, j;\n    int** matrix;\n    cin &gt;&gt; M;\n    cin &gt;&gt; N;\n\n    matrix = new int*[M]; \n    for ( i = 0; i &lt; M; i++) \n        matrix[i] = new int[N];\n\n    for ( i = 0; i &lt; M; i++) \n        for ( j = 0; j &lt; N; j++) \n        { \n            cout &lt;&lt; \"Inter element \" &lt;&lt; \"[\" &lt;&lt; i &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"]  \"; \n            cin &gt;&gt; matrix[i][j]; \n        }\n\n        cout &lt;&lt; endl;\n        for ( i = 0; i &lt; M; i++) \n            for ( j = 0; j &lt; N; j++) \n            { \n                cout &lt;&lt; matrix[i][j]; \n            } \n            cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "texture-atlas"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12127171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ca7c9c42157b750c31927918b4ef1?s=128&d=identicon&r=PG&f=1", "display_name": "BrodaJarek3", "link": "https://stackoverflow.com/users/12127171/brodajarek3"}, "edited": false, "score": 0, "creation_date": 1576177445, "post_id": 59307031, "comment_id": 104824457, "body": "I like to initialize some classes with <code>Create</code>. You are right with <code>rootNode</code> size. It works perfectly. Thank you."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 1, "last_activity_date": 1576161758, "creation_date": 1576161758, "answer_id": 59307031, "question_id": 59293818, "link": "https://stackoverflow.com/questions/59293818/why-a-texture-cannot-find-its-position-in-a-texture-atlas-after-the-atlas-has-be/59307031#59307031", "title": "Why a texture cannot find its position in a texture atlas after the atlas has been resized?", "body": "<p>You haven't set the root's size properly, so the <code>realSize</code> is never tweaked.</p>\n\n<p>Note that a default constructed <code>TextureAtlas</code> is in an invalid state. Why have a separate <code>Create</code>?</p>\n\n<p>Also your destructor does the same thing as the default destructor. It's better to omit it.</p>\n\n<pre><code>explicit TextureAtlas(const Vector2&lt;uint32&gt;&amp; size = { 512, 512 })\n  : textureSize(size),\n    rootNode(std::make_unique&lt;TextureNode&gt;(0, { INT_MAX, INT_MAX })),\n    buffer(size.w * size.h)\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 12127171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ca7c9c42157b750c31927918b4ef1?s=128&d=identicon&r=PG&f=1", "display_name": "BrodaJarek3", "link": "https://stackoverflow.com/users/12127171/brodajarek3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59307031, "answer_count": 1, "score": 0, "last_activity_date": 1576161758, "creation_date": 1576097206, "last_edit_date": 1576148611, "question_id": 59293818, "link": "https://stackoverflow.com/questions/59293818/why-a-texture-cannot-find-its-position-in-a-texture-atlas-after-the-atlas-has-be", "title": "Why a texture cannot find its position in a texture atlas after the atlas has been resized?", "body": "<p>I've got texture atlas from: <a href=\"https://straypixels.net/texture-packing-for-fonts/\" rel=\"nofollow noreferrer\">https://straypixels.net/texture-packing-for-fonts/</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct TextureNode\n{\n    TextureNode(const Vector2&lt;uint32&gt;&amp; origin, const Vector2&lt;uint32&gt;&amp; size)\n        : origin(origin), size(size)\n    {\n    }\n\n    Vector2&lt;uint32&gt; origin = 0;    // Top left of the rectangle this node represents\n    Vector2&lt;uint32&gt; size = 0;      // Size of the rectangle this node represents\n    bool empty = true;                // true if this node is a leaf and is filled\n\n    std::unique_ptr&lt;TextureNode&gt; left = nullptr;  // Left (or top) subdivision\n    std::unique_ptr&lt;TextureNode&gt; right = nullptr; // Right (or bottom) subdivision\n};\n\nstruct TextureAtlas\n{\n    TextureAtlas() = default;\n    ~TextureAtlas()\n    {\n        buffer.clear();\n    }\n\n    void Create(const Vector2&lt;uint32&gt;&amp; size)\n    {\n        textureSize = size;\n        rootNode = std::make_unique&lt;::TextureNode&gt;(0, size);\n        buffer.resize(size.w * size.h);\n    }\n\n    TextureNode* Pack(TextureNode* node, const Vector2&lt;uint32&gt;&amp; size)\n    {\n        if (!node-&gt;empty) {\n            // The node is filled, not gonna fit anything else here\n            assert(!node-&gt;left &amp;&amp; !node-&gt;right);\n            return nullptr;\n        } else if (node-&gt;left &amp;&amp; node-&gt;right) {\n            // Non-leaf, try inserting to the left and then to the right\n            TextureNode* retval = Pack(node-&gt;left.get(), size);\n            if (retval != nullptr) {\n                return retval;\n            }\n            return Pack(node-&gt;right.get(), size);\n        } else {\n            // This is an unfilled leaf - let's see if we can fill it\n            Vector2&lt;uint32&gt; realSize = node-&gt;size;\n\n            // If we're along a boundary, calculate the actual size\n            if (node-&gt;origin.x + node-&gt;size.x == INT_MAX) {\n                realSize.x = textureSize.x - node-&gt;origin.x;\n            }\n            if (node-&gt;origin.y + node-&gt;size.y == INT_MAX) {\n                realSize.y = textureSize.y - node-&gt;origin.y;\n            }\n\n            if (node-&gt;size.x == size.x &amp;&amp; node-&gt;size.y == size.y) {\n                // Perfect size - just pack into this node\n                node-&gt;empty = false;\n                return node;\n            } else if (realSize.x &lt; size.x || realSize.y &lt; size.y) {\n                // Not big enough\n                return nullptr;\n            } else {\n                // Large enough - split until we get a perfect fit\n                TextureNode* left = nullptr;\n                TextureNode* right = nullptr;\n\n                // Determine how much space we'll have left if we split each way\n                int remainX = realSize.x - size.x;\n                int remainY = realSize.y - size.y;\n\n                // Split the way that will leave the most room\n                bool verticalSplit = remainX &lt; remainY;\n                if (remainX == 0 &amp;&amp; remainY == 0) {\n                    // Edge case - we are are going to hit the border of\n                    // the texture atlas perfectly, split at the border instead\n                    if (node-&gt;size.x &gt; node-&gt;size.y) {\n                        verticalSplit = false;\n                    } else  verticalSplit = true;\n                }\n\n                if (verticalSplit) {\n                    // Split vertically (left is top)\n                    left = new TextureNode(node-&gt;origin, Vector2&lt;uint32&gt;(node-&gt;size.x, size.y));\n                    right = new TextureNode(Vector2&lt;uint32&gt;(node-&gt;origin.x, node-&gt;origin.y + size.y), Vector2&lt;uint32&gt;(node-&gt;size.x, node-&gt;size.y - size.y));\n                } else {\n                    // Split horizontally\n                    left = new TextureNode(node-&gt;origin, Vector2&lt;uint32&gt;(size.x, node-&gt;size.y));\n                    right = new TextureNode(Vector2&lt;uint32&gt;(node-&gt;origin.x + size.x, node-&gt;origin.y), Vector2&lt;uint32&gt;(node-&gt;size.x - size.x, node-&gt;size.y));\n                }\n\n                node-&gt;left.reset(left);\n                node-&gt;right.reset(right);\n                return Pack(node-&gt;left.get(), size);\n            }\n        }\n\n        return nullptr;\n    }\n\n    Vector2&lt;uint32&gt; PackTexture(unsigned char* textureBuffer, const Vector2&lt;uint32&gt;&amp; bufferSize)\n    {\n        TextureNode* node = Pack(rootNode.get(), bufferSize);\n        if (node == nullptr) {\n            ResizeBuffer(textureSize * 2U);\n            node = Pack(rootNode.get(), bufferSize);\n\n            // Note: this assert will be hit if we try to pack a texture larger\n            // than the current size of the texture\n            assert(node != nullptr);\n        }\n\n        assert(bufferSize.x == node-&gt;size.x);\n        assert(bufferSize.y == node-&gt;size.y);\n\n        // Copy the texture to the texture atlas' buffer\n        for (uint32 ly = 0; ly &lt; bufferSize.y; ly++) {\n            for (uint32 lx = 0; lx &lt; bufferSize.x; lx++) {\n                int y = node-&gt;origin.y + ly;\n                int x = node-&gt;origin.x + lx;\n                buffer[y * textureSize.x + x] = textureBuffer[ly * bufferSize.x + lx];\n            }\n        }\n\n        return node-&gt;origin;\n    }\n\n    void ResizeBuffer(const Vector2&lt;uint32&gt;&amp; newSize)\n    {\n        vector&lt;uchar&gt; newBuffer;\n        newBuffer.resize(newSize.y * newSize.x);\n        for (uint32 y = 0; y &lt; textureSize.y; y++) {\n            for (uint32 x = 0; x &lt; textureSize.x; x++) {\n                newBuffer[y * newSize.x + x] = buffer[y * textureSize.x + x];\n            }\n        }\n\n        textureSize = newSize;\n        buffer = std::move(newBuffer);\n        rootNode-&gt;size = newSize;\n    }\n\n    vector&lt;uchar&gt; buffer;\n    Vector2&lt;uint32&gt; textureSize = 512;\n\n    std::unique_ptr&lt;TextureNode&gt; rootNode = nullptr;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nint main()\n{\n    TextureAtlas atlas;\n    atlas.Create({256, 256};\n\n    Font font;\n    //                       size\n    font.Create(\"arial.ttf\", 100.0f);\n\n    std::string chars = \"ABCDEFGHIJKLMNOPRSTUWXYZabcdefghijklmnoprstuwzyw1234567890\";\n\n    for(const auto&amp; c : chars) {\n        auto txt = font.LoadGlyph(c);\n        atlas.PackTexture(txt.data(), txt.w, txt.h);\n    }\n}\n\n</code></pre>\n\n<p>It works when the atlas space has not been changed. When there is no space left and atlas needs to be resized, the size changes, but a algorithm cannot find where to put another texture and it hits <code>assert(node != nullptr);</code> in <code>PackTexture(..)</code> method. You can use whatever texture you want. The result is the same. After running through the code by a breakpoint it looks like <code>rootNode</code> changes its size, but <code>left</code> and <code>right</code> still remain the same. <code>Nullptr</code> is returned by this step in <code>Pack(..)</code> method:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (realSize.x &lt; size.x || realSize.y &lt; size.y) {\n    // Not big enough\n    return nullptr;\n}\n</code></pre>\n\n<p>Why is that? How to change the algorithm, so it can handle resizing properly?</p>\n"}, {"tags": ["c++", "c++14", "c++17", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1576097374, "post_id": 59293812, "comment_id": 104792327, "body": "If you use <code>remove_if()</code> without reading and understanding what it actually does, you will get very confused."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1576097408, "post_id": 59293812, "comment_id": 104792347, "body": "How can a <code>Point</code> be both <code>&lt; 0</code> and <code>&gt; 25</code> at the same time? I think your statement will always evaluate as false, so will not remove anything.  You likely meant to use <code>||</code> instead of <code>&amp;&amp;</code>. Also note that <code>remove_if()</code> doesn&#39;t actually remove anything, it just moves the &quot;removed&quot; elements to the end of the specified range, you have to then &quot;erase&quot; those elements to actually remove them from the container"}], "answers": [{"tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1576098522, "last_edit_date": 1576098522, "creation_date": 1576098167, "answer_id": 59294029, "question_id": 59293812, "link": "https://stackoverflow.com/questions/59293812/how-can-i-remove-the-numbers-outside-of-the-0-25-from-header-file/59294029#59294029", "title": "How can I remove the numbers outside of the 0-25 from header file?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\"><code>std::remove_if()</code></a> is a bit deceiving, because it doesn't actually remove anything. Rather, it moves all the values not meeting the removal criteria toward the beginning of the container, overwriting the ones that do meet the removal criteria. It returns an iterator pointing at the first \"removed\" entry. But the entries from that point on are not necessarily the removed values; their contents are unspecified.</p>\n\n<p>So you need to learn about the <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">Erase Remove Idiom</a>. Here's an example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\nvoid filter(std::vector&lt;int&gt;&amp; vec)\n{\n    vec.erase(std::remove_if(begin(vec), end(vec),\n                [](int n) { return n &lt; 0 ||  n &gt; 25; }),\n            end(vec));\n}\n\nint main()\n{\n    std::vector&lt;int&gt; vec = {27, 1, 9, 6, 93, 73, 22, 25, 0, 18, 73};\n\n    std::cout &lt;&lt; \"Original: \";\n    std::copy(begin(vec), end(vec), std::ostream_iterator&lt;int&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; '\\n';\n\n    filter(vec);\n    std::cout &lt;&lt; \"Filtered: \";\n    std::copy(begin(vec), end(vec), std::ostream_iterator&lt;int&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This erases all the entries from the return value of <code>std::remove_if()</code> to the end of the container. Then they actually <em>are</em> removed. The output is:</p>\n\n<pre><code>Original: 27 1 9 6 93 73 22 25 0 18 73 \nFiltered: 1 9 6 22 25 0 18 \n</code></pre>\n\n<p>Note also that your comparison was incorrect and would always yield <code>false</code>, because there is no number that is both less than 0 and greater than 25.</p>\n"}], "owner": {"reputation": 1, "user_id": 12209911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0380ddb044e688f6d94ea2a66035bc?s=128&d=identicon&r=PG&f=1", "display_name": "filofil", "link": "https://stackoverflow.com/users/12209911/filofil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1576098522, "creation_date": 1576097178, "last_edit_date": 1576097361, "question_id": 59293812, "link": "https://stackoverflow.com/questions/59293812/how-can-i-remove-the-numbers-outside-of-the-0-25-from-header-file", "title": "How can I remove the numbers outside of the 0-25 from header file?", "body": "<p>I have <code>PointCloud.h</code> where it gives points. I wrote something like this on my header file:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void RadiusOutlierFilter::filter(PointCloud&amp; pc) {\n    std::remove_if(pc.points(), pc.points() + pc.pointNumber(), [](const Point&amp; p)\n    {\n        return(p &lt; 0 &amp;&amp; p&gt;25);\n    });\n}\n</code></pre>\n\n<p>I wrote this without knowing what <code>remove_if()</code> does. I believe with this I remove the points under 0 and greater than 25, is it correct? How can I return the numbers between 0-25? If you can fix the code I would be very grateful, I'm pretty desperate at this point because I couldn't figured it out and it stresses me.</p>\n"}, {"tags": ["c++", "caching"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1576096948, "post_id": 59293751, "comment_id": 104792160, "body": "Benchmark and find out. If you&#39;re doing sequential memory access that&#39;s generally better than random, or working back and forth between multiple contiguous sets of data."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576097081, "post_id": 59293751, "comment_id": 104792202, "body": "The only way to really know is to try both and get the results.  The two things you want to strive for is hot data and hot instructions.  That means that you are constantly accessing pre-fetched data and instructions.  If you can do that, then you normally see a speed increase."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576106823, "post_id": 59293751, "comment_id": 104795577, "body": "Generally for writing really large amounts of data to ram keep successive writes within a cache line for max write throughput. You will be limited by the time it takes to write the cache line to physical ram. If ram writes are scattered, it gets more complicated. L1,2,3 cache will adsorb some of it up to a point and you may be more limited by calculation time. Worth it to do a bit of experimenting to get an intuitive feel for any given hardware platform. As @NathanOliver-ReinstateMonica says, you have to measure. Plan on it."}], "owner": {"reputation": 715, "user_id": 1695537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e7629192ffb2655aad9702ac9726998c?s=128&d=identicon&r=PG", "display_name": "DragonGamer", "link": "https://stackoverflow.com/users/1695537/dragongamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576096844, "creation_date": 1576096844, "question_id": 59293751, "link": "https://stackoverflow.com/questions/59293751/is-there-cache-friendliness-for-writing-access", "title": "Is there &quot;cache friendliness&quot; for writing access?", "body": "<p>Am writing code that fills a massive vertex buffer for procedural mesh generation (on CPU). This is fairly time critical.\nAmong other data, each vertex buffer consists of coordinates (X, Y, Z) as well as a normal vector (Xn, Yn, Zn).\nThose are technically computed from fairly well separable code blocks.</p>\n\n<p>My question is, should I write a loop to set all coordinates and then in another loop, set all normal vectors?\nOr should I combine the two loops to ensure that all the indices within the vertex buffer are set one after another?</p>\n\n<p>So is there a caching mechanism when writing consecutive array elements, or is that only for reading?</p>\n"}, {"tags": ["java", "c++", "polymorphism", "game-engine", "wrapper"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1576096806, "post_id": 59293666, "comment_id": 104792106, "body": "<i>I can wrap my head around most of the way that c++ is coded</i> -- I suggest you actually know C++.  Trying to figure out a complex language like C++ on a line-by-line basis rarely, if ever, works out correctly."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1576096833, "post_id": 59293666, "comment_id": 104792112, "body": "Isn&#39;t wstring just UTF8 Unicode?  Two byte character string instead of single byte characters.  Java Strings are Unicode by default, so you&#39;re all set."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 4, "creation_date": 1576096900, "post_id": 59293666, "comment_id": 104792143, "body": "I don&#39;t see what line 198 has got to do with <code>std::function</code>?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1576096991, "post_id": 59293666, "comment_id": 104792176, "body": "@duffymo No, <code>std::wstring</code> uses <code>wchar_t</code>&#39;s instead of <code>char</code>. It doesn&#39;t really say much about the encoding."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1576097102, "post_id": 59293666, "comment_id": 104792212, "body": "The key is two bytes per character versus one, regardless of encoding.  Still not pertinent?  Java Strings are always two bytes per character - no choice."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 1, "creation_date": 1576097512, "post_id": 59293666, "comment_id": 104792391, "body": "@duffymo Hard to say. <code>std::wstring</code> is often used for UTF-16LE encoded strings in Windows. If some interoperability is needed some care should be taken - but if the translated game engine is going to run standalone, I&#39;m guessing that  whatever encoding java uses doesn&#39;t matter, it&#39;ll be fine as you said."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1576098135, "post_id": 59293666, "comment_id": 104792641, "body": "<code>std::wstring</code> uses <code>wchar_t</code>, which is 2 bytes (UCS-2/UTF-16) on Windows, but is 4 bytes (UCS-4/UTF-32) on other platforms."}], "answers": [{"tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1576137305, "last_edit_date": 1576137305, "creation_date": 1576096976, "answer_id": 59293767, "question_id": 59293666, "link": "https://stackoverflow.com/questions/59293666/stdwstring-sfile-in-java/59293767#59293767", "title": "std::wstring sFile in java", "body": "<p>When you look <a href=\"http://www.cplusplus.com/reference/string/wstring/\" rel=\"nofollow noreferrer\">here</a> you find:</p>\n\n<pre><code>std::wstring\ntypedef basic_string&lt;wchar_t&gt; wstring;\nWide string\nString class for wide characters.\n</code></pre>\n\n<p>In other word: that is a constructor that <strong>simply</strong> takes string, and that string represents a file name, which then is used to do file system stuff. </p>\n\n<p>The only \"special\" thing here, it is a string with \"wide chars\", see <a href=\"https://www.geeksforgeeks.org/wide-char-and-library-functions-in-c/\" rel=\"nofollow noreferrer\">there</a>. </p>\n\n<p>None of your code uses std::function though. That is all there is to this, this is a constructor of the <code>olcSprite</code> class that probably reads bytes for the \"sprite\" from disc. </p>\n"}], "owner": {"reputation": 11, "user_id": 12503839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB2JvjVZdtMAUC0euuYf2GEFpDLJwhqGI7mVofXMg=k-s128", "display_name": "Evan", "link": "https://stackoverflow.com/users/12503839/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576137305, "creation_date": 1576096473, "last_edit_date": 1576096864, "question_id": 59293666, "link": "https://stackoverflow.com/questions/59293666/stdwstring-sfile-in-java", "title": "std::wstring sFile in java", "body": "<p>I am working on making a game in java and I want to use an engine (<a href=\"https://github.com/OneLoneCoder/videos/blob/master/olcConsoleGameEngine.h\" rel=\"nofollow noreferrer\">olcConsoleGameEngine</a>) that was coded in c++ but I want to make it in java. I can wrap my head around most of the way that c++ is coded but I am stuck on a specific line (198): <code>olcSprite(std::wstring sFile)</code>.</p>\n\n<pre><code>class olcSprite\n{\npublic:\n    olcSprite()\n    {\n\n    }\n\n    olcSprite(int w, int h)\n    {\n        Create(w, h);\n    }\n\n    olcSprite(std::wstring sFile)     // line 198\n    {\n        if (!Load(sFile))\n            Create(8, 8);\n    }\n\n    //...\n</code></pre>\n\n<p>I looked up and found out that <code>std::function</code> is a \"general-purpose polymorphic function wrapper\" according to <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/utility/functional/function</a>. but I'm not sure what that means or how to specifically implement an equivalent for my case in java. if anyone could either help me understand this better or point me in the right direction, I would really appreciate it.</p>\n"}, {"tags": ["c++", "windows", "codeblocks", "cppcheck"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576096369, "post_id": 59293598, "comment_id": 104791916, "body": "<a href=\"http://cppcheck.sourceforge.net/\" rel=\"nofollow noreferrer\">http://cppcheck.sourceforge.net/</a> says its integrated."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576096532, "post_id": 59293598, "comment_id": 104791990, "body": "This may help: <a href=\"http://forums.codeblocks.org/index.php?topic=18895.0\" rel=\"nofollow noreferrer\">http://forums.codeblocks.org/index.php?topic=18895.0</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4268, "user_id": 10155936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5498b635fa9e0b5e78f317de115bc5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh P Bhandari", "link": "https://stackoverflow.com/users/10155936/saurabh-p-bhandari"}, "is_accepted": true, "score": 0, "last_activity_date": 1577018367, "creation_date": 1577018367, "answer_id": 59444273, "question_id": 59293598, "link": "https://stackoverflow.com/questions/59293598/installing-cppcheck-on-codeblocks/59444273#59444273", "title": "Installing CppCheck on Codeblocks", "body": "<p>Steps to follow :</p>\n\n<ul>\n<li>Download <a href=\"http://www.codeblocks.org/downloads/26\" rel=\"nofollow noreferrer\">Codeblocks</a>\n\n<ul>\n<li>Cppcheck is a Contrib plugin integrated in Codeblocks</li>\n<li>So, choose the setup from the download page which has all the plugins available</li>\n</ul></li>\n<li>Install Codeblocks\n\n<ul>\n<li>Make sure Cppcheck plugin is selected under Contrib plugins</li>\n</ul></li>\n<li>Install <a href=\"http://cppcheck.sourceforge.net/\" rel=\"nofollow noreferrer\">Cppcheck tool</a> for your respective platform</li>\n<li>Open Codeblocks and open the Environment Settings via the Settings Menu\n\n<ul>\n<li>Scroll down and select the Cppcheck/Vera++ Tab</li>\n<li>Change the Cppcheck application field by clicking on the button with <code>...</code></li>\n<li>Navigate to the path where Cppcheck tool was installed (Ex: <code>C:\\Program Files\\Cppcheck\\cppcheck.exe</code>)</li>\n<li>Click OK</li>\n</ul></li>\n<li>Open a project in Codeblocks and under Plugins Menu select CppCheck to run the tool</li>\n</ul>\n"}], "owner": {"reputation": 470, "user_id": 11121949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5X11V.jpg?s=128&g=1", "display_name": "Emanuele Oggiano", "link": "https://stackoverflow.com/users/11121949/emanuele-oggiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 59444273, "answer_count": 1, "score": 1, "last_activity_date": 1577018367, "creation_date": 1576096146, "question_id": 59293598, "link": "https://stackoverflow.com/questions/59293598/installing-cppcheck-on-codeblocks", "title": "Installing CppCheck on Codeblocks", "body": "<p>I have downloaded Codeblocks in a Windows 10 computer and now I am trying to install CppCheck on it.</p>\n\n<p>However, also surfing the net to find a solution, I can't understand how can I install CppCheck (on Codeblocks). \nCan anyone explain it to me?</p>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576205696, "post_id": 59293567, "comment_id": 104832425, "body": "What is <code>o</code>? I don&#39;t see enough information here to diagnose the problem."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576205885, "post_id": 59293567, "comment_id": 104832469, "body": "There&#39;s stuff here that doesn&#39;t make sense, and stuff that&#39;s missing, and overall, it looks like you tried to simplify things (which is good) but didn&#39;t know how to do so properly (which is a skill you should try to learn), leaving us with something that only bears a vague resemblance to your code, and not in the ways it needs to. When building a simplified version of your code, the result needs to be <i>runnable</i> and needs to <i>reproduce the error when run</i>, without needing any hidden context."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576206150, "post_id": 59293567, "comment_id": 104832526, "body": "Looking at what you posted on SourceForge, I suspect you may be on Python 2, where classes behave differently by default and 0-argument <code>super</code> isn&#39;t a thing. The code you posted on SourceForge used 0-argument <code>super</code>."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207383, "post_id": 59293567, "comment_id": 104832755, "body": "Hi @user2357112 supports Monica, I did put this question together a bit too haphazardly, sorry about that.  I was a bit more extensive in my other forum post, but I&#39;ve edited this question so my process should be more clear.  Additionally, I am using python 3.8, and am now making explicit calls to the parent class instead of using super().  Still no dice."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207565, "post_id": 59293567, "comment_id": 104832796, "body": "Well, the new version still isn&#39;t runnable, but it suggests its own entirely new set of problems. The module handling in what you&#39;ve posted makes no sense. It looks like you&#39;re running everything in the context of <code>__main__</code> instead of actually importing modules. Do you know you can import modules in the Python C API? <a href=\"https://docs.python.org/3.8/c-api/import.html\" rel=\"nofollow noreferrer\">docs.python.org/3.8/c-api/import.html</a>"}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207965, "post_id": 59293567, "comment_id": 104832867, "body": "Yes, unfortunately, I can&#39;t duplicate too much of the code due to the proprietary nature of the source, so I can only give snippets that provide the gist.  I&#39;m thinking that my module handling might be a major problem, given that I didn&#39;t think there were any problems with running everything in the context of <b>main</b>.  Is this bad practice?  What is the alternative?  I&#39;m not really familiar with what the usage of PyImport_ImportModule is supposed to be, or how it differs from defining and instantiating classes in <b>main</b>."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576208717, "post_id": 59293567, "comment_id": 104833007, "body": "Sorry @user2357112 supports Monica, forgot to tag you."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576208828, "post_id": 59293567, "comment_id": 104833034, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204162/discussion-between-danny-and-user2357112-supports-monica\">continue this discussion in chat</a>."}], "owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576207772, "creation_date": 1576096042, "last_edit_date": 1576207772, "question_id": 59293567, "link": "https://stackoverflow.com/questions/59293567/why-isnt-inheritance-working-properly-when-embedding-python-in-a-c-applicatio", "title": "Why isn&#39;t inheritance working properly when embedding python in a C++ application?", "body": "<p>I'd asked this question <a href=\"https://sourceforge.net/p/pythonqt/discussion/631393/thread/862ff73f88/?limit=25#aaf7\" rel=\"nofollow noreferrer\">on another forum</a>, but apparently this issue is more generically python-related than I'd thought.  Weirdly enough, I haven't been able to find too many topics on this particular issue.</p>\n\n<p>Essentially, I have a base class in base.py:</p>\n\n<pre><code>class B:\n   def __init__(self):\n       ...\n   def func(self):\n       ...\n</code></pre>\n\n<p>And a child class in child.py:</p>\n\n<pre><code>from base import B\n\nclass C(B):\n   def __init__(self):\n       B.__init__(self)\n       ...\n   def func(self):\n       B.func(self)\n       ...\n</code></pre>\n\n<p>If I make these classes and call them purely through Python, everything works fine.  However, when I try to do so through the C API, C.func() fails to call B.func(). It's almost as if C.func() is ignoring the line where I call <code>B.func(self)</code> entirely.  </p>\n\n<p>I am defining these classes via the C API by loading the contents of base.py and child.py into strings. This is done via Qt through a loadFromFile routine, and I am confident that this is working correctly. I am then calling the code that I've loaded for each class through a function that wraps <code>PyRun_SimpleString</code>:</p>\n\n<pre><code>bool PythonAPI::runCode(const std::string&amp; code)\n{\n    int ran = PyRun_SimpleString(code.c_str());\n    if (ran &lt; 0) {\n        printErrors();\n        return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>So my routine to instantiate a Child instance and run a method if it is essentially:</p>\n\n<pre><code>// Initialize interpreter\nPy_Initialize();\n\n// Initialize main module\nPyObject* mainModule = PyImport_AddModule(\"__main__\");\n\n// Load in code frombase.py and child.py\nstd::string baseCode = loadFromFile(base.py);\nstd::string childCode = loadFromFile(child.py);\n\n// Define classes by running code\nrunCode(baseCode);\nrunCode(childCode);\n\n// Obtain Child class from python and instantiate\nPyObject* cls = PyObject_GetAttrString(mainModule, \"Child\");\nPyObject* instance= PyObject_CallObject(cls, argList);\n\n// Call routine of child instance\nPyObject* result = call(instance, func, NULL);\n\n</code></pre>\n\n<p>Is there any strangeness with how the API works that could cause this to be the case? My routine to call methods of a class instance (minus the error handling) looks like this:</p>\n\n<pre><code>PyObject * PythonAPI::call(PyObject * instance, const std::string&amp; methodName, PyObject * args)\n{\n    // Obtain pointer to function\n    PyObject* method = PyObject_GetAttrString(instance, methodName.c_str());\n\n    // Call function\n    PyObject* output = PyObject_CallObject(method, args);\n\n    // Decrement count for function, ignoring if it is null\n    Py_XDECREF(method);\n\n    return output;\n}\n</code></pre>\n\n<p>I'd like for users of my application to interface purely through Python, which is why I want to pack everything they would need into the class B, from which they could inherit. Thanks!</p>\n\n<p>Edit:  After much investigation, it seems that inheritance works just fine when class B and C are in the same file.  However, I need class B to be in its own file due to the constraints of the project, so I can't use this workaround.  I'm not sure why this would cause problems.</p>\n"}, {"tags": ["c++", "linux", "gcc", "bcrypt"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1576096630, "post_id": 59293557, "comment_id": 104792033, "body": "Put the <code>-lbrypt</code> flag after the <code>cpp</code> files on the command line. Order of linker flags / source files matters. (I am not saying that this definitively resolves the issue though.)"}, {"owner": {"reputation": 1, "user_id": 12520601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee13207b9765b41a5d533f3d094c332?s=128&d=identicon&r=PG&f=1", "display_name": "JustAFurryCow", "link": "https://stackoverflow.com/users/12520601/justafurrycow"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576099072, "post_id": 59293557, "comment_id": 104793004, "body": "In fact that was the problem. Thank you so much! I was searching for the answer for so long. Best regards!"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1576099172, "post_id": 59293557, "comment_id": 104793052, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">Why does the order in which libraries are linked sometimes cause errors in GCC?</a>"}, {"owner": {"reputation": 1, "user_id": 12520601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee13207b9765b41a5d533f3d094c332?s=128&d=identicon&r=PG&f=1", "display_name": "JustAFurryCow", "link": "https://stackoverflow.com/users/12520601/justafurrycow"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576101327, "post_id": 59293557, "comment_id": 104793886, "body": "Wow that is really complicated. I have to take a look into this. Thank you! Edit: tbh I really don&#39;t have any idea of how the compiler works. All I&#39;ve done was copy pasta and was glad that I was able to compile all files based on a 1 file example. I really have to look what&#39;s happening there."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576103040, "post_id": 59293557, "comment_id": 104794454, "body": "You might want to read through <a href=\"https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\">this question</a> and click yourself through other linked questions. That should give you a rough overview, although the details are indeed often quite complicated and compiler-dependent. A <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good introductory book to C++</a> should also explain the basic ideas."}], "owner": {"reputation": 1, "user_id": 12520601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee13207b9765b41a5d533f3d094c332?s=128&d=identicon&r=PG&f=1", "display_name": "JustAFurryCow", "link": "https://stackoverflow.com/users/12520601/justafurrycow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576341228, "creation_date": 1576095990, "last_edit_date": 1576341228, "question_id": 59293557, "link": "https://stackoverflow.com/questions/59293557/how-do-i-use-bcrypt-in-c-under-linux-using-wrapper-libbcrypt", "title": "How do I use bcrypt in c++ under Linux using wrapper libbcrypt", "body": "<p>I try to write a simple login script using bcrypt. I've tried to use the C wrapper libbcrypt library - <a href=\"https://github.com/trusch/libbcrypt\" rel=\"nofollow noreferrer\">https://github.com/trusch/libbcrypt</a> - but got stuck with the compiler complaining about undefined references to bcrypt_checkpw, bcrypt_hashpw, bcrypt_gensalt in the BCrypt class.</p>\n\n<p>First thing I've done was to follow the instructions from the readme.md - <a href=\"https://github.com/trusch/libbcrypt/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/trusch/libbcrypt/blob/master/README.md</a> :</p>\n\n<pre><code>git clone https://github.com/trusch/libbcrypt\ncd libbcrypt\nmkdir build\ncd build\ncmake ..\nmake\nsudo make install\nsudo ldconfig\n</code></pre>\n\n<p>Then I have my main.cpp file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"User_Class.hpp\"\n\nvoid checkPermission();\n\nint main(int argc, char* argv[]) {    \n    checkPermission();\n    return 0;\n}\n\nvoid checkPermission() {\n    User_Class User;\n    User.Login(\"test\");\n}\n</code></pre>\n\n<p>My User_Class.cpp file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Password_Class.hpp\"\n#include \"User_Class.hpp\"\n\nbool User_Class::Login(std::string password) {\n    return Password_Class::authenticate(password);\n}\n</code></pre>\n\n<p>My User_Class.hpp file</p>\n\n<pre><code>class User_Class {\n    public:\n        bool Login(std::string password);\n};\n</code></pre>\n\n<p>My Password_Class.cpp file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Password_Class.hpp\"\n#include \"bcrypt/BCrypt.hpp\"\n\nbool Password_Class::authenticate(std::string password) {\n\n    // this fails!\n    std::string hash = BCrypt::generateHash(password);  \n    std::cout &lt;&lt; BCrypt::validatePassword(password,hash) &lt;&lt; std::endl;\n\n    return true;\n\n}\n</code></pre>\n\n<p>And my Password_Class.hpp file</p>\n\n<pre><code>class Password_Class {\n    public:\n        static bool authenticate(Glib::ustring password);\n};\n</code></pre>\n\n<p>When compiling with this command</p>\n\n<pre><code>g++ -lbcrypt main.cpp User_Class.cpp Password_Class.cpp -o main `pkg-config --libs --cflags gtkmm-3.0`\n</code></pre>\n\n<p>I get errors</p>\n\n<pre><code>/tmp/ccc3Va1h.o: In Funktion \u00bbBCrypt::generateHash(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)\u00ab:\nPassword_Class.cpp:(.text._ZN6BCrypt12generateHashERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEi[_ZN6BCrypt12generateHashERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEi]+0x44): Warnung: undefinierter Verweis auf \u00bbbcrypt_gensalt\u00ab\nPassword_Class.cpp:(.text._ZN6BCrypt12generateHashERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEi[_ZN6BCrypt12generateHashERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEi]+0xb0): Warnung: undefinierter Verweis auf \u00bbbcrypt_hashpw\u00ab\n/tmp/ccc3Va1h.o: In Funktion \u00bbBCrypt::validatePassword(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)\u00ab:\nPassword_Class.cpp:(.text._ZN6BCrypt16validatePasswordERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES7_[_ZN6BCrypt16validatePasswordERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES7_]+0x33): Warnung: undefinierter Verweis auf \u00bbbcrypt_checkpw\u00ab\ncollect2: error: ld returned 1 exit status\n\n</code></pre>\n\n<p>So please can someone tell me what's going on here? What have I done wrong so how do I use bcrypt in C++? I guess some libraries couldn't be found but I'm really no expert in linux or C++ so please forgive me ;)</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576095735, "post_id": 59293477, "comment_id": 104791667, "body": "Thinks about it.  If <code>*it</code> gives you the element that is in the vector at that position, what is that type that you are getting?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576095744, "post_id": 59293477, "comment_id": 104791673, "body": "the elements in the vectors are addresses!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11144947"}, "edited": false, "score": 0, "creation_date": 1576095900, "post_id": 59293477, "comment_id": 104791736, "body": "so when i push back an object to the vector it only stores the address and not the name of the object ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576095961, "post_id": 59293477, "comment_id": 104791760, "body": "It does if you use a <code>vector &lt;Shape*&gt;</code>.  The <code>Shape*</code> says that the elements of the vector should be <code>Shape*</code>&#39;s"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1576096004, "post_id": 59293477, "comment_id": 104791785, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1576096035, "post_id": 59293477, "comment_id": 104791803, "body": "@OpenSourcerer42 There are no names at runtime, unless you store them yourself in string variables"}], "answers": [{"comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1576095982, "post_id": 59293535, "comment_id": 104791770, "body": "You are assuming that using operator <code>&lt;&lt;</code> on a Shape object makes sense to the compiler. Without an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that is a little daring."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11144947"}, "edited": false, "score": 0, "creation_date": 1576096012, "post_id": 59293535, "comment_id": 104791790, "body": "I get an error on the &lt;&lt; operator, would i just have to implement operator overloading to fix that"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1576096032, "post_id": 59293535, "comment_id": 104791801, "body": "See? That is what I meant."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576096078, "post_id": 59293535, "comment_id": 104791822, "body": "@OpenSourcerer42 yes, you would need to implement <code>operator&lt;&lt;</code> for your <code>Shape</code> class"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11144947"}, "edited": false, "score": 0, "creation_date": 1576096381, "post_id": 59293535, "comment_id": 104791921, "body": "im not sure how to implement operator&lt;&lt; for a shape vector"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1576096508, "post_id": 59293535, "comment_id": 104791980, "body": "@OpenSourcerer42 -- It is up to you <i>how</i> you want your data to be outputted.  You know more about your <code>Shape</code> type than we do, and we can&#39;t tell you what the best or nicest way to present your output.  However once you determine how you want your output to look, then you implement <code>operator &lt;&lt;</code> on your <code>Shape</code> type."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1576096512, "post_id": 59293535, "comment_id": 104791981, "body": "@OpenSourcerer42 the operator &lt;&lt; is not a member function - it is a free function.  <code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const Shape&amp; s) { os &lt;&lt; s.x &lt;&lt; &#39;, &#39; &lt;&lt; s.y &lt;&lt; &#39;\\n&#39;; return os; }</code>  where x and y are members actually in your Shape class."}], "tags": [], "owner": {"reputation": 647, "user_id": 11923286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6998eee0e8f86bdd85902f148333df9?s=128&d=identicon&r=PG&f=1", "display_name": "ignacio", "link": "https://stackoverflow.com/users/11923286/ignacio"}, "is_accepted": false, "score": 1, "last_activity_date": 1576097284, "last_edit_date": 1576097284, "creation_date": 1576095918, "answer_id": 59293535, "question_id": 59293477, "link": "https://stackoverflow.com/questions/59293477/printing-out-each-element-in-a-vector-of-objects-c/59293535#59293535", "title": "printing out each element in a vector of objects C++", "body": "<p>As the elements in your vectors are pointers, <code>*it</code> gives you the values of those pointers, but pointers store addresses. If you want to get the value under those addresses, you should use <code>**it</code>.\nThis <code>Shape</code> class may print the area, volume, or its dimensions. You should either create a method to <code>printVolume()</code> this or an <code>overloading operator &lt;&lt;</code> </p>\n\n<p>Sample code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Shape \n{\n    private:\n        int _x, _y, _z;\n    public:\n        Shape(int x, int y, int z): _x(x), _y(y), _z(z)\n        {\n        }\n        void printVolume()\n        {\n            std::cout &lt;&lt; \"Print volume: \" &lt;&lt; _x * _y * _z &lt;&lt; std::endl;\n        }\n\n        friend std::ostream &amp;operator&lt;&lt; (std::ostream &amp;out, const Shape&amp; object)\n        {\n            std::cout &lt;&lt; \"Inside overload operator to return the volume\" &lt;&lt; std::endl;\n            out &lt;&lt; object._x * object._y * object._z &lt;&lt; std::endl;\n            return out;\n        }\n};\n\n\nint main ()\n{\n    Shape cube(1, 2, 3);\n    std::cout &lt;&lt; cube;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11144947"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576097284, "creation_date": 1576095643, "last_edit_date": 1576097190, "question_id": 59293477, "link": "https://stackoverflow.com/questions/59293477/printing-out-each-element-in-a-vector-of-objects-c", "title": "printing out each element in a vector of objects C++", "body": "<p>im trying to output the objects that are stored in a vector but i keep getting addresses of those objects instead of the name of the actual object.</p>\n\n<pre><code>vector &lt;Shape*&gt; shapes;\n\nfor (std::vector&lt;Shape*&gt;::iterator it = shapes.begin(); it != shapes.end(); ++it)\n            std::cout &lt;&lt; *it &lt;&lt; endl;\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Enter the command: display\n01724888\n017309B0\n01731238\n</code></pre>\n\n<p>Example of how an object is stored in shapes:</p>\n\n<pre><code>Circle* c = new Circle(x, y, r);\n        shapes.push_back(c);\n</code></pre>\n"}, {"tags": ["c++", "makefile", "compiler-errors"], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 0, "last_activity_date": 1576095803, "creation_date": 1576095803, "answer_id": 59293513, "question_id": 59293392, "link": "https://stackoverflow.com/questions/59293392/why-does-my-makefile-file-return-error-193/59293513#59293513", "title": "Why does my makefile file return error 193?", "body": "<p>Add <code>g++</code> or the linker you'd like to use first on the line supposed to link your program:</p>\n\n<pre><code>program:BSTDugum.o Kontrol.o Program.o\n        g++ ./lib/BSTDugum.o ./lib/Kontrol.o ./lib/Program.o -o ./bin/program\n</code></pre>\n\n<p>As it is right now, you're trying to use the object file <code>./lib/BSTDugum.o</code> as the linking command.</p>\n"}], "owner": {"reputation": 1, "user_id": 12442240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5efa0463ddfe99afa157c55d07fb703?s=128&d=identicon&r=PG&f=1", "display_name": "adakakif", "link": "https://stackoverflow.com/users/12442240/adakakif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 59293513, "answer_count": 1, "score": -1, "last_activity_date": 1576105517, "creation_date": 1576095289, "last_edit_date": 1576105517, "question_id": 59293392, "link": "https://stackoverflow.com/questions/59293392/why-does-my-makefile-file-return-error-193", "title": "Why does my makefile file return error 193?", "body": "<pre><code>g++ -I \"./include\" -c ./src/BSTDugum.cpp -o ./lib/BSTDugum.o\ng++ -I \"./include\" -c ./src/Kontrol.cpp -o ./lib/Kontrol.o\ng++ -I \"./include\" -c ./src/Program.cpp -o ./lib/Program.o\n./lib/BSTDugum.o ./lib/Kontrol.o ./lib/Program.o -o ./bin/program\nprocess_begin: CreateProcess(C:\\Users\\monster\\Desktop\\ODEV_3\\lib\\BSTDugum.o, ./lib/BSTDugum.o \n./lib/Kontrol.o ./lib/Program.o -o ./bin/program, ...) failed.\nmake (e=193): Error 193\nMakefile:3: recipe for target 'program' failed\nmingw32-make: *** [program] Error 193\n</code></pre>\n\n<p>I can't solve this problem everything looks good. I can debug this program on visual studio This is my makefile file : </p>\n\n<pre><code>program:BSTDugum.o Kontrol.o Program.o\n    ./lib/BSTDugum.o ./lib/Kontrol.o ./lib/Program.o -o ./bin/program\nBSTDugum.o:\n    g++ -I \"./include\" -c ./src/BSTDugum.cpp -o ./lib/BSTDugum.o\nKontrol.o:\n    g++ -I \"./include\" -c ./src/Kontrol.cpp -o ./lib/Kontrol.o\nProgram.o:\n    g++ -I \"./include\" -c ./src/Program.cpp -o ./lib/Program.o\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576095341, "post_id": 59293364, "comment_id": 104791518, "body": "why you cannot read from the file? There is a <code>void readData(void)</code>, what is wrong with it?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1576095342, "post_id": 59293364, "comment_id": 104791519, "body": "&quot;<i>I cannot read or output what is saved to the file.</i>&quot; - Why? Compilation error? Did you add debug prints in the code or run it in a debugger?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576095461, "post_id": 59293364, "comment_id": 104791562, "body": "<a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\" title=\"why is can someone help me not an actual question\">meta.stackoverflow.com/questions/284236/&hellip;</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1576095611, "post_id": 59293364, "comment_id": 104791617, "body": "The <code>break; getline(...); fieldCount++;</code> part looks suspicious. When the program reaches the <code>break;</code>, what do you expect to happen?"}, {"owner": {"reputation": 13, "user_id": 12197995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b53a70214775324ef29b902d76b4?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTry_ButNo", "link": "https://stackoverflow.com/users/12197995/nicetry-butno"}, "edited": false, "score": 0, "creation_date": 1576100535, "post_id": 59293364, "comment_id": 104793631, "body": "The program compiles and runs, debugging doesn&#39;t flag anything."}, {"owner": {"reputation": 13, "user_id": 12197995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b53a70214775324ef29b902d76b4?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTry_ButNo", "link": "https://stackoverflow.com/users/12197995/nicetry-butno"}, "edited": false, "score": 0, "creation_date": 1576100592, "post_id": 59293364, "comment_id": 104793657, "body": "Ted that part of the code was given to the class by the instructor... no wonder it doesn&#39;t work. Thanks for the input. I will look at changing that."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1576123100, "post_id": 59293364, "comment_id": 104798864, "body": "In writeData you open an output file <code>ofstream outFile(&quot;testAddress.txt&quot;);</code> and close the output file <code>outFile.close();</code> but where do you write any data to it?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 12197995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b53a70214775324ef29b902d76b4?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTry_ButNo", "link": "https://stackoverflow.com/users/12197995/nicetry-butno"}, "is_accepted": false, "score": 0, "last_activity_date": 1576174318, "creation_date": 1576174318, "answer_id": 59310517, "question_id": 59293364, "link": "https://stackoverflow.com/questions/59293364/logic-error-in-menu-and-read-functions-to-save-and-read-to-and-from-a-file/59310517#59310517", "title": "Logic error in menu and read functions to save and read to and from a file", "body": "<p>I have fixed a number of errors in this code, THANX to all who commented! Everything is working now except the readData function. When I input data to the file and run the readData function I get an infinite loop. Is there a break statement out of place?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid menu(void);\nvoid writeData(void);\nvoid readData(void);\nconst char FileName[] = \"TestAddress.txt\";\nstring choice;\n\nint main()\n{\n    menu();\n    return 0;\n}\nvoid menu(void)\n{\n    while (choice != \"Q\")\n    {\n        cout &lt;&lt; \"What would you like to do?\\nA. Read the existing data:\\nB. Write new data to the list:\\nQ.Quit\\n\";\n        cin &gt;&gt; choice;\n        if (choice == \"A\")\n        {\n            readData();\n        }\n        else if (choice == \"B\")\n        {\n            writeData();\n        }\n        else\n            break;\n\n    }\n}\n\nvoid writeData(void)\n{\n    ofstream outFile(\"TestAddress.txt\");\n    string name;\n    string street;\n    string city;\n    string state;\n    int zip;\n    string cont = \"y\";\n    ifstream inFile;\n\n    while (cont != \"q\")\n    {       \n        cout &lt;&lt; \"Please enter the name:\\n\";\n        cin.ignore();\n        getline(cin, name);\n        cout &lt;&lt; \"Please enter the street:\\n\";\n        getline(cin, street);\n        cout &lt;&lt; \"Please enter the city:\\n\";\n        getline(cin, city);\n        cout &lt;&lt; \"Please enter the state:\\n\";\n        getline(cin, state);\n        cout &lt;&lt; \"Please enter the zip code:\\n\";\n        cin &gt;&gt; zip;\n        outFile &lt;&lt; name&lt;&lt; \"#\" &lt;&lt; street&lt;&lt; \"#\"&lt;&lt; city &lt;&lt; \"#\" &lt;&lt; state &lt;&lt; \"#\" &lt;&lt; zip &lt;&lt; \"#\" &lt;&lt; endl;\n        cin.ignore();\n        cout &lt;&lt; \"Would you like to continue? Type q to quit:\";\n        getline(cin, cont);\n        cin.ignore();\n    }\n    outFile.close();\n\n    inFile.open(\"TestAddress.txt\");\n    string fieldBuffer;\n    if (inFile.is_open())\n    {\n        while (!inFile.eof())\n        {\n            getline(inFile, fieldBuffer, '#');\n            cout &lt;&lt; fieldBuffer;\n            cout &lt;&lt; endl;\n\n        }\n    }\n}\n//use # sign for delimiter\nvoid readData(void)\n{\n    ifstream inMyStream(FileName);\n    if (inMyStream.is_open())\n    {\n        string recBreaks = \"\";\n        recBreaks.assign(20, '*');\n\n        int fieldCount = 0;\n        int recordCount = 1;\n\n        fieldCount = 1;\n        string fieldBuffer;\n        getline(inMyStream, fieldBuffer, '#');\n\n        while (!inMyStream.eof())\n        {\n            switch (fieldCount)\n            {\n            case 1:\n                cout &lt;&lt; recBreaks &lt;&lt; endl;\n                cout &lt;&lt; \"Record #\" &lt;&lt; recordCount &lt;&lt; endl;\n                cout &lt;&lt; \"Name....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                break;\n            case 2:\n                cout &lt;&lt; \"Street....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                break;\n            case 3:\n                cout &lt;&lt; \"City....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                break;\n            case 4:\n                cout &lt;&lt; \"State....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                break;\n            case 5:\n                cout &lt;&lt; \"Zip Code....\" &lt;&lt; fieldBuffer &lt;&lt; endl; \n                fieldCount = 0;\n                recordCount++;\n                break;\n\n                getline(inMyStream, fieldBuffer, '#');\n                fieldCount++;       \n            }\n            cout &lt;&lt; recBreaks &lt;&lt; endl;\n            inMyStream.close();\n\n\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12197995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b53a70214775324ef29b902d76b4?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTry_ButNo", "link": "https://stackoverflow.com/users/12197995/nicetry-butno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576174318, "creation_date": 1576095148, "last_edit_date": 1576122531, "question_id": 59293364, "link": "https://stackoverflow.com/questions/59293364/logic-error-in-menu-and-read-functions-to-save-and-read-to-and-from-a-file", "title": "Logic error in menu and read functions to save and read to and from a file", "body": "<p>This program is supposed to call a read and write function from a menu, ask for inputs, save those inputs to a file then output the data to the screen. The menu works but I can only write to the file and save the data and exit. I cannot read or output what is saved to the file. Any help with this will be greatly appreciated. I should have three working functions, main(), writeData(), and readData().</p>\n\n<pre><code>#include &lt; iostream &gt;\n#include &lt; fstream &gt;\n#include &lt; string &gt;\n    using namespace std;\n\nvoid menu(void);\nvoid writeData(void);\nvoid readData(void);\nconst char FileName[] = \"TestAddress.txt\";\nstring choice;\n\nint main()\n{\n    menu();\n    return 0;\n}\nvoid menu(void)\n{\n    while (choice != \"Q\") {\n        cout &lt;&lt; \"What would you like to do?\\nA. Read the existing data:\\nB. Write new data to the list:\\nQ.Quit\\n\";\n        cin &gt;&gt; choice;\n        if (choice == \"A\") {\n            readData();\n        }\n        else if (choice == \"B\") {\n            writeData();\n        }\n        else\n            break;\n\n    }\n}\n\nvoid writeData(void)\n{\n    ofstream outFile(\"testAddress.txt\");\n    string name;\n    string street;\n    string city;\n    string state;\n    int zip;\n    string cont = \"y\";\n    ifstream inFile;\n\n    while (cont != \"q\") {\n        cout &lt;&lt; \"Please enter the name:\\n\";\n        getline(cin, name);\n        cout &lt;&lt; \"Please enter the street:\\n\";\n        getline(cin, street);\n        cout &lt;&lt; \"Please enter the city:\\n\";\n        getline(cin, city);\n        cout &lt;&lt; \"Please enter the state:\\n\";\n        getline(cin, state);\n        cout &lt;&lt; \"Please enter the zip code:\\n\";\n        cin &gt;&gt; zip;\n        outFile &lt;&lt; name &lt;&lt; street &lt;&lt; \"#\" &lt;&lt; city &lt;&lt; state &lt;&lt; zip &lt;&lt; endl;\n        cin.ignore();\n        cout &lt;&lt; \"Would you like to continue? Type q to quit:\";\n        getline(cin, cont);\n        cin.ignore();\n    }\n    outFile.close();\n\n    inFile.open(\"testAddress.txt\");\n    string fieldBuffer;\n    if (inFile.is_open()) {\n        while (inFile.eof()) {\n            getline(inFile, fieldBuffer, ',');\n            cout &lt;&lt; fieldBuffer;\n            cout &lt;&lt; endl;\n\n        }\n    }\n}\n//use # sign for delimiter\nvoid readData(void)\n{\n    ifstream inMyStream(FileName);\n    if (inMyStream.is_open()) {\n        string recBreaks = \"\";\n        recBreaks.assign(20, '*');\n\n        int fieldCount = 0;\n        int recordCount = 1;\n\n        fieldCount = 1;\n        string fieldBuffer;\n        getline(inMyStream, fieldBuffer, '#');\n\n        while (inMyStream.eof()) {\n            switch (fieldCount) {\n                case 1:\n                    cout &lt;&lt; recBreaks &lt;&lt; endl;\n                    cout &lt;&lt; \"Record #\" &lt;&lt; recordCount &lt;&lt; endl;\n                    cout &lt;&lt; \"Name....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                    break;\n                case 2:\n                    cout &lt;&lt; \"Street....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                    break;\n                case 3:\n                    cout &lt;&lt; \"City....\" &lt;&lt; fieldBuffer &lt;&lt; endl;\n                    break;\n                case 4:\n                    cout &lt;&lt; \"State....\" &lt;&lt; endl;\n                    break;\n                case 5:\n                    cout &lt;&lt; \"Zip Code....\" &lt;&lt; endl;\n                    fieldCount = 0;\n                    recordCount++;\n                    break;\n                    getline(inMyStream, fieldBuffer, '#');\n                    fieldCount++;\n            }\n            cout &lt;&lt; recBreaks &lt;&lt; endl;\n            inMyStream.close();\n\n\n        }\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "memory", "sizeof"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1576094988, "post_id": 59293288, "comment_id": 104791358, "body": "What is your actual output?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576095020, "post_id": 59293288, "comment_id": 104791369, "body": "<code>new</code> allocates more memory than you request.  It has to store metadata inside the memory block for <code>delete</code> to use (allocation size, etc), as well as for the MemoryManager itself (mark the memory in use, etc). It also has to ensure the returned pointer is aligned properly, which may require rounding up the allocated size."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1576095023, "post_id": 59293288, "comment_id": 104791372, "body": "What is <code>peakmemory</code> and how is it implemented?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576095123, "post_id": 59293288, "comment_id": 104791414, "body": "Consider that memory is often allocated to processes as pages when the process needs more."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1576095151, "post_id": 59293288, "comment_id": 104791423, "body": "What is <code>peakmemory()</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576095211, "post_id": 59293288, "comment_id": 104791448, "body": "Does it really matter?  What is it that you are trying to determine?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576095241, "post_id": 59293288, "comment_id": 104791461, "body": "In some environments like Visual Studio in debug mode allocations may have guard bytes used for heap corruption detection."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576095291, "post_id": 59293288, "comment_id": 104791490, "body": "I&#39;d say that&#39;s &quot;implementation defined&quot;. Whether or not an implementation allocates more memory than you need is not something you need to concern yourself with. Whether an implementation gives memory back to the OS when you free it is also not of your concern. The OS may also itself allocate memory sparsely (or not) but your program doesn&#39;t know (and shouldn&#39;t care)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576095593, "post_id": 59293288, "comment_id": 104791613, "body": "The one thing you can be sure of though is that once your process exits, the kernel will reclaim <i>all</i> the memory it used - leaks or no leaks. You can&#39;t leak memory past process exit (ok, there are exceptions, like sysv shared memory and the like, but those are esoteric)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576095969, "post_id": 59293288, "comment_id": 104791766, "body": "Your OS is clever. It doesn&#39;t keep unused memory around. It also sometimes caches memory. You cannot just look at what your program does in isolation."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2451079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMRXp.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/2451079/john"}, "edited": false, "score": 0, "creation_date": 1576112354, "post_id": 59293422, "comment_id": 104796776, "body": "I have tested on both Windows and linux. Final conclusion is <code>Node * p = new Node;</code> will allocate a memory larger than <code>sizeof(Node)</code> where Node is a class."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 2, "last_activity_date": 1576095436, "creation_date": 1576095436, "answer_id": 59293422, "question_id": 59293288, "link": "https://stackoverflow.com/questions/59293288/where-did-the-memory-go/59293422#59293422", "title": "where did the memory go?", "body": "<p>Since you haven't specified what platform you're running on, here are a few possibilities:</p>\n\n<ol>\n<li>Allocation size: Your C++ implementation may be allocating memory in units which are larger than <code>sizeof(Node)</code>, e.g. to limit the amount of book-keeping it does.</li>\n<li>Alignment: The allocator may have a policy of returning addresses aligned to some minimum power of 2. Again, this may simplify its implementation somewhat.</li>\n<li>Overhead: Some allocators, in addition to the memory <em>you</em> are using, have some padding with a fixed pattern to protect against memory corruption; or some meta-data used by the allocator.</li>\n</ol>\n\n<p>That is not to say this <em>actually</em> happens. But it could; it certainly agrees with the language specification (AFAICT).</p>\n"}, {"tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": false, "score": 0, "last_activity_date": 1576112623, "creation_date": 1576112623, "answer_id": 59296290, "question_id": 59293288, "link": "https://stackoverflow.com/questions/59293288/where-did-the-memory-go/59296290#59296290", "title": "where did the memory go?", "body": "<p>Pretty much all memory allocators (such as those on linux/win32) have an allocation header that proceeds the memory allocation (which includes info about the size of the allocation). On linux for example, you can look at the source for malloc, and that gives info about the stored header (and how to compute its size):</p>\n\n<p><a href=\"https://git.busybox.net/uClibc/tree/libc/stdlib/malloc/malloc.h#n106\" rel=\"nofollow noreferrer\">https://git.busybox.net/uClibc/tree/libc/stdlib/malloc/malloc.h#n106</a></p>\n\n<p>As already mentioned in a comment, debug builds may also allocate additional bytes at either side of the allocation to guard against buffer overrun errors. </p>\n"}], "owner": {"reputation": 105, "user_id": 2451079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMRXp.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/2451079/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 59293422, "answer_count": 2, "score": 0, "last_activity_date": 1576112623, "creation_date": 1576094831, "last_edit_date": 1576111454, "question_id": 59293288, "link": "https://stackoverflow.com/questions/59293288/where-did-the-memory-go", "title": "where did the memory go?", "body": "<pre><code>class Node\n{\n//some member variables.\n};\nstd::cout&lt;&lt;\"size of the class is \"&lt;&lt;sizeof(Node)&lt;&lt;\"\\n\";\nint pm1 =peakmemory();\nstd::cout&lt;&lt;\"Peak memory before loop is \"&lt;&lt; pm1&lt;&lt;\"\\n\";\nfor(i=0; i&lt; nNode; ++i)\n{\n  Node * p = new Node;\n}\nint pm2 =peakmemory();\nstd::cout&lt;&lt;\"Peak memory after loop is \"&lt;&lt; pm2&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>I thought <code>pm2-pm1</code> approximates <code>nNode * sizeof(Node)</code>. But it turns out <code>pm2-pm1</code> is much larger than <code>nNode *sizeof(Node)</code>. Where did the memory go? I suspect <code>sizeof(Node)</code> does not reflect the correct memory usage.</p>\n\n<p>I have tested on both Windows and linux. Final conclusion is <code>Node * p = new Node;</code> will allocate a memory larger than <code>sizeof(Node)</code> where <code>Node</code> is a class.</p>\n"}, {"tags": ["c++", "pointers", "exception"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1576093114, "post_id": 59292870, "comment_id": 104790452, "body": "What happens if <code>node</code> is a <code>nullpointer</code>?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1576093143, "post_id": 59292870, "comment_id": 104790463, "body": "Psychic Debugger says: Incorrect copy constructor and copy assignment operators, conflicting with Destructor."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1576093274, "post_id": 59292870, "comment_id": 104790529, "body": "<i>but I&#39;ve tried many ways of initializing the pointer to no avail</i> -- How do you know initialization is the cause of the error?  What if your <code>Tree</code> just happens to mismanage things, and it just so happens you are sending invalid pointers to it?  Bad coding, even with &quot;proper initialization&quot;, can cause these issues."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576093403, "post_id": 59292870, "comment_id": 104790592, "body": "<code>node</code> is almost certainly bogus, but we have too little information to tell you what made it bogus. Check for dancing gremlins on line 42."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576093455, "post_id": 59292870, "comment_id": 104790618, "body": "If I recall, <code>0xCCCCCCCC</code> (from your screen shot) is uninitialized pointer in VS in Debug."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1576093628, "post_id": 59292870, "comment_id": 104790696, "body": "Also, since you are using the debugger, <i>follow your code path slowly by single-stepping in the debugger</i>.  There is a reason for the invalid pointer, and you just have to single-step through your code to find where/why your code is faulty."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576093628, "post_id": 59292870, "comment_id": 104790697, "body": "0xCCCCCCCC = Uninitialized Stack Memory. <a href=\"https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations/127404#127404\">https://stackoverflow.com/questions/127386/in-visual-studio-&zwnj;&#8203;c-what-are-the-memor&zwnj;&#8203;y-allocation-represe&zwnj;&#8203;ntations/127404#1274&zwnj;&#8203;04</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576093687, "post_id": 59292870, "comment_id": 104790721, "body": "@ChrisMM brings up a good point. When you see a highly unlikely number like CCCCCCCC in an error message, you should <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_debug_values\" rel=\"nofollow noreferrer\">look it up to see if it means something</a>.  Keep an eye out for BEEF, DEAD, F00D, and repetition."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1576093917, "post_id": 59292870, "comment_id": 104790837, "body": "<code>this-&gt;root = &amp;node;</code> ... <code>node-&gt;right = &amp;Node(element, node);</code> is a bug that you repeat often. You can&#39;t store the address of a temporary or local variable that goes out of scope."}, {"owner": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 0, "creation_date": 1576560671, "post_id": 59292870, "comment_id": 104929459, "body": "Welcome to SO. Instead of editing your post to include an answer, you should <code>upvote</code> and/or <code>accept</code> answers &amp; comments you find useful.  This allows others to view the question, independent from any 1 particular answer. They can easily see if Q is relevant to their own situation. Scanning the list of answers, comments, and votes, visitors can quickly find what works for their situation. Keeping the original question up, &amp; separating Q&#39;s from A&#39;s makes the site efficient, clear, and highly useful to future visitors. Our gratitude, reward, and feedback are in giving and receiving votes. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1576563888, "creation_date": 1576563888, "answer_id": 59368646, "question_id": 59292870, "link": "https://stackoverflow.com/questions/59292870/c-exception-code-c0000005-when-trying-to-check-if-a-pointer-is-null/59368646#59368646", "title": "C++: Exception Code: C0000005 when trying to check if a pointer is null", "body": "<pre><code>void Tree::add(TreeElement* element)\n{\n    if (this-&gt;isEmpty()) {\n        Node node = Node(element, nullptr);\n        this-&gt;root = &amp;node;\n    }\n</code></pre>\n\n<p>You set <code>this-&gt;root</code> to point to <code>node</code>. But <code>node</code> is local to this <code>if</code> block. As soon as the <code>if</code> block exits, <code>node</code> no longer exits. So <code>this-&gt;root</code> is pointing to an object that no longer exists.</p>\n\n<p>It is your responsibility to ensure that an object lives longer than any pointer to it that might be dereferenced. The easiest way to handle this is not to use \"dumb pointers\" but to instead use smart pointers like <code>std::unique_ptr&lt;Node&gt;</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12520398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jsAVA.jpg?s=128&g=1", "display_name": "Louis-David Dionne", "link": "https://stackoverflow.com/users/12520398/louis-david-dionne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576563888, "creation_date": 1576092981, "last_edit_date": 1576560984, "question_id": 59292870, "link": "https://stackoverflow.com/questions/59292870/c-exception-code-c0000005-when-trying-to-check-if-a-pointer-is-null", "title": "C++: Exception Code: C0000005 when trying to check if a pointer is null", "body": "<p>I've been trying to do unit testing for my AVL Tree class and when I call the \"depth()\" function which calls a recursive \"depth(...)\" I get the following exception Code:\n<a href=\"https://i.stack.imgur.com/1o3Bm.png\" rel=\"nofollow noreferrer\">Error Code: C0000005</a></p>\n\n<p>This is my code for the depth function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int Tree::depth()\n{\n    int currentDepth = -1;\n    if (this-&gt;isEmpty() == false) {\n        currentDepth = depth(this-&gt;root, currentDepth);\n    }\n    return currentDepth;\n}\n\nint Tree::depth(Node* node, int currentDepth)\n{\n    int nodeDepth = currentDepth;\n    if (node-&gt;left != nullptr) { // &lt;-------------- Error happens at this line\n        nodeDepth = depth(node-&gt;left, currentDepth);\n    }\n    if (node-&gt;right != nullptr) {\n        nodeDepth = depth(node-&gt;right, currentDepth);\n    }\n    return nodeDepth + 1;\n}\n</code></pre>\n\n<p>I've looked up what can cause this error and most people say it is due to an uninitialized pointer but I've tried many ways of initializing the pointer to no avail. This is what I have now:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Node {\n    public:\n        TreeElement* element;\n        Node* parent;\n        Node* left;\n        Node* right;\n\n        Node(TreeElement* element, Node* parent) {\n            this-&gt;element = element;\n            this-&gt;parent = parent;\n            this-&gt;left = nullptr; // &lt;------------ This part here\n            this-&gt;right = nullptr;\n        }\n\n        ~Node(){}\n\n\n    };\n</code></pre>\n\n<p>When I debug the test it ends up lifting this exception: <a href=\"https://i.stack.imgur.com/tnlmx.png\" rel=\"nofollow noreferrer\">Read access violation</a></p>\n\n<p>I'm trying to find out how to fix this error.</p>\n\n<p>Here's my Unit test and code to add a node to the tree in case you need it</p>\n\n<p>Test Method:</p>\n\n<pre><code>TEST_METHOD(WHEN_anElementIsAddedToATree_THEN_itHasCorrectDepth)\n{\n    // Arrange\n    Tree tree;\n    Word* element = new Word(ANY_WORD);\n\n    // Act\n    tree.add(element);\n\n    // Assert\n    int ANSWER = tree.depth();\n    const int EXPECTED_ANSWER = 0;\n    Assert::AreEqual(ANSWER, EXPECTED_ANSWER);\n}\n</code></pre>\n\n<p>Add Function:</p>\n\n<pre><code>void Tree::add(TreeElement* element)\n{\n    if (this-&gt;isEmpty()) {\n        Node node = Node(element, nullptr);\n        this-&gt;root = &amp;node;\n    }\n    else if (this-&gt;find(element) &gt; -1){\n        throw \"Cet \u00e9l\u00e9ment est d\u00e9j\u00e0 pr\u00e9sent\";\n    }\n    else {\n        add(element, this-&gt;root);\n    }\n}\n\nvoid Tree::add(TreeElement* element, Node* node)\n{\n    if (element-&gt;isBiggerThan(node-&gt;element)) {\n        if (node-&gt;right != nullptr) {\n            add(element, node-&gt;right);\n        }\n        else {\n            node-&gt;right = &amp;Node(element, node);\n        }\n    }\n    else {\n        if (node-&gt;left != nullptr) {\n            add(element, node-&gt;left);\n        }\n        else {\n            node-&gt;left = &amp;Node(element, node);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576094823, "post_id": 59292771, "comment_id": 104791280, "body": "What&#39;s wrong with <code>std::vector</code>?"}, {"owner": {"reputation": 147, "user_id": 10152861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4888eb3770bfd42752c129a5e1e55568?s=128&d=identicon&r=PG&f=1", "display_name": "Lester", "link": "https://stackoverflow.com/users/10152861/lester"}, "edited": false, "score": 0, "creation_date": 1576094858, "post_id": 59292771, "comment_id": 104791294, "body": "Oh nothing. I just need to know how to implement templates correctly :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576094917, "post_id": 59292771, "comment_id": 104791320, "body": "<code>&#47;&#47;vector.cpp #ifndef Vector_h #define Vector_h</code> - why would you have header guards in your <i>implementation</i> file?"}, {"owner": {"reputation": 147, "user_id": 10152861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4888eb3770bfd42752c129a5e1e55568?s=128&d=identicon&r=PG&f=1", "display_name": "Lester", "link": "https://stackoverflow.com/users/10152861/lester"}, "edited": false, "score": 0, "creation_date": 1576096561, "post_id": 59292771, "comment_id": 104792006, "body": "Thanks everyone."}], "owner": {"reputation": 147, "user_id": 10152861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4888eb3770bfd42752c129a5e1e55568?s=128&d=identicon&r=PG&f=1", "display_name": "Lester", "link": "https://stackoverflow.com/users/10152861/lester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 1, "closed_date": 1576096569, "answer_count": 0, "score": 0, "last_activity_date": 1576095068, "creation_date": 1576092580, "last_edit_date": 1576095068, "question_id": 59292771, "link": "https://stackoverflow.com/questions/59292771/implementing-a-simple-vector-example-with-templates-causing-undefined-symbol-err", "closed_reason": "Duplicate", "title": "Implementing a Simple Vector Example With Templates Causing Undefined Symbol Error", "body": "<p>Can anyone tell me why I am getting the error Undefined Symbol: Vector::Vector(int)?</p>\n\n<p>I am trying to learn the language by making a simple vector class.</p>\n\n<p>The first iteration used doubles as elements. Now I am trying to get it to work with templates so it will work with any type. It was working fine until I did that. I must have implemented it wrong.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n#include \"Vector.h\"\n#include &lt;list&gt;\n#include &lt;algorithm&gt;\n\nint main(int argc, const char * argv[]) {\n    // insert code here...\n    std::cout &lt;&lt; \"Hello, World!\\n\";\n\n    Vector&lt;int&gt; a(5);\n    Vector&lt;int&gt; b(5);\n\n    return 0;\n}\n\n//vector.h\n#ifndef Vector_h\n#define Vector_h\n\ntemplate&lt;typename T&gt;\nclass Vector {\npublic:\n    explicit Vector(int s); // constr uctor: establish invariant, acquire resources\n    ~Vector() { delete[] elem; } // destructor: release resources\n    // ... copy and move operations ...\n    T&amp; operator[](int i); // for non-const Vectors\n    const T&amp; operator[](int i) const; // for const Vectors (\u00a74.2.1)\n    int size() const { return sz; }\n\n\n    friend Vector operator+(const Vector&amp; a, const Vector&amp; b);\n\n    Vector(const Vector&amp; a); // copy constructor\n    Vector&amp; operator=(const Vector&amp; a); // copy assignment\n\n    Vector(Vector&amp;&amp; a); // move constructor\n    Vector&amp; operator=(Vector&amp;&amp; a); // move assignment move assignment operator\n\n    T* begin(Vector&lt;T&gt;&amp; x);\n    T* end(Vector&lt;T&gt;&amp; x);\n\nprivate:\n    T* elem; // elem points to an array of sz elements of type T\n    int sz;\n};\n\n//vector.cpp:\n#include &lt;stdio.h&gt;\n#include \"Vector.h\"\n#include &lt;iostream&gt;\n#include &lt;exception&gt;\n\ntemplate&lt;typename T&gt;\nVector&lt;T&gt;::Vector(int s) // definition of the constructor\n//:elem{new double[s]}, sz{s} // initialize members or do whats in bottom here.\n{\n    elem = new T[s];\n    sz = s;\n    std::cout &lt;&lt; \"Main Constructor\" &lt;&lt; std::endl;\n}\n\n    template&lt;typename T&gt;\n    T&amp; Vector&lt;T&gt;::operator[](int i) // definition of subscripting\n    {\n    return elem[i];\n    }\n\n    template&lt;typename T&gt;\n    const T&amp; Vector&lt;T&gt;::operator[](int i) const // definition of subscripting\n    {\n    return elem[i];\n    }\n\n    template&lt;typename T&gt;\n    Vector&lt;T&gt; operator+(const Vector&lt;T&gt;&amp; a, const Vector&lt;T&gt;&amp; b)\n    {\n    //if (a.size()!=b.size())\n    //  throw Vector_size_mismatch{};\n    std::cout &lt;&lt; \"Move Constructor\" &lt;&lt; std::endl;\n    Vector&lt;T&gt; res(a.size());\n    for (int i=0; i!=a.size(); ++i)\n    res[i]=a[i]+b[i];\n    return res;\n    }\n\n    template&lt;typename T&gt;\n    Vector&lt;T&gt;::Vector(const Vector&lt;T&gt;&amp; a) // copy constructor\n    :elem{new double[a.sz]}, // allocate space for elements\n    sz{a.sz}\n    {\n    for (int i=0; i!=sz; ++i) // copy elements\n    elem[i] = a.elem[i];\n    std::cout &lt;&lt; \"Copy Constructor\" &lt;&lt; std::endl;\n    }\n\n    template&lt;typename T&gt;\n    Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator=(const Vector&lt;T&gt;&amp; a) // copy assignment\n    {\n    std::cout &lt;&lt; \"Copy Assignment Constructor\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Element is \" &lt;&lt; a[0] &lt;&lt; std::endl;\n    double* p = new double[a.sz];\n    for (int i=0; i!=a.sz; ++i)\n    p[i] = a.elem[i];\n    delete[] elem; // delete old elements\n    elem = p;\n    sz = a.sz;\n    return *this;\n    }\n\n    template&lt;typename T&gt;\n    Vector&lt;T&gt;::Vector(Vector&lt;T&gt;&amp;&amp; a) // Move construtor\n    :elem{a.elem}, // \"grab the elements\" from a\n    sz{a.sz}\n    {\n        a.elem = nullptr; // now a has no elements\n        a.sz = 0;\n    }\n\n    template&lt;typename T&gt;\n    Vector&lt;T&gt;&amp; Vector&lt;T&gt;::operator=(Vector&lt;T&gt;&amp;&amp;) { return *this;  } // Move assignment\n\n\n    template&lt;typename T&gt;\n    T* begin(Vector&lt;T&gt;&amp; x)\n    {\n        return x.size() ? &amp;x[0] : nullptr; // pointer to first element or nullptr\n    }\n        template&lt;typename T&gt;\n    T* end(Vector&lt;T&gt;&amp; x)\n    {\n        return x.size() ? &amp;x[0]+x.size() : nullptr; // pointer to one-past-last element\n    }\n</code></pre>\n"}, {"tags": ["c++", "gcc", "clang", "compiler-optimization", "gsl"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576093780, "post_id": 59292640, "comment_id": 104790776, "body": "What is the purpose of the <code>(void)(t);</code> lines? To suppress warnings? If so, you can also just not name the parameters: <code>int system(double, const double y[], double dydt[], void *params)</code>"}, {"owner": {"reputation": 3, "user_id": 6750779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c53b9687f0ec5894bd8bb052f6350?s=128&d=identicon&r=PG&f=1", "display_name": "Lsheep", "link": "https://stackoverflow.com/users/6750779/lsheep"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576179321, "post_id": 59292640, "comment_id": 104825182, "body": "Yes, I&#39;m using <code>(void)(t)</code> to suppress warnings as my system doesn&#39;t use <code>t</code> explicitly. I wasn&#39;t aware that unnamed parameters did the same thing. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 0, "last_activity_date": 1576093649, "creation_date": 1576093649, "answer_id": 59293012, "question_id": 59292640, "link": "https://stackoverflow.com/questions/59292640/reducing-compile-resources-using-gsl-for-an-ode-system/59293012#59293012", "title": "Reducing compile resources using GSL for an ODE system", "body": "<p>Don't write assignments for this. Instead copy the data into the array.</p>\n\n<p>I would suggest reading the values first from a file into a <code>std::vector&lt;double&gt; vec;</code> at program startup. You can then keep reusing its contents. This also makes it easier to modify the values without recompilation and the compiler won't have to do so much unnecessary work.</p>\n\n<p>Then</p>\n\n<pre><code>std::copy(vec.begin(), vec.end(), dydt);\n</code></pre>\n\n<p>This requires <code>#include&lt;algorithm&gt;</code> for <code>std::copy</code> and <code>#include&lt;vector&gt;</code> for <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6750779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c53b9687f0ec5894bd8bb052f6350?s=128&d=identicon&r=PG&f=1", "display_name": "Lsheep", "link": "https://stackoverflow.com/users/6750779/lsheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 59293012, "answer_count": 1, "score": 0, "last_activity_date": 1576093649, "creation_date": 1576091979, "question_id": 59292640, "link": "https://stackoverflow.com/questions/59292640/reducing-compile-resources-using-gsl-for-an-ode-system", "title": "Reducing compile resources using GSL for an ODE system", "body": "<p>I'm using C++ and GSL (Gnu Scientific Library) to integrate a large ODE system with 4503 equations. As the system is stiff, I need to setup a Jacobian for the integration and the resulting matrix has about 20 million entries.</p>\n\n<p>To initialize the ODE system and the Jacobian, GSL requires the use of a functions with specific signatures, that is,</p>\n\n<pre><code>int system(double t, const double y[], double dydt[], void *params);\nint jac (double t, const double y[], double *dfdy, double dfdt[], void *params);\n</code></pre>\n\n<p>Where <code>dydt[]</code> and <code>*dfdy</code> are the arrays for the system and Jacobian, respectively.</p>\n\n<p>I have declared these functions in two separate <code>.cpp</code> files. For the system, I have something like</p>\n\n<pre><code>// ODESystem.cpp\n\nint system(double t, const double y[], double dydt[], void *params) {\n    (void)(t);\n    double l = *(static_cast&lt;double*&gt;(params));\n\n    dydt[0] = 0;\n\n    // lots of assignment statements like the above\n\n    return GSL_SUCCESS;\n}\n</code></pre>\n\n<p>and for the Jacobian I have something like</p>\n\n<pre><code>// ODEJacobian.cpp\n\nint jacobian(double t, const double y[], double *dfdy, double dfdt[], void *params) {\n    (void)(t);\n    (void)(y);\n    double l = *(static_cast&lt;double*&gt;(params));\n\n    dfdy[0] = 0;\n\n    // lots of assignment statements like the above\n\n    return GSL_SUCCESS;\n}\n\n</code></pre>\n\n<p>So far, GCC is able to handle <code>ODESystem.cpp</code> quite well, but it takes a very long time (and about 45Gs of ram) to compile <code>ODEJacobian.cpp</code>, (which is, i guess, understandable due to the size of the expression tree for the assignment operations in this monster) but it eventually does so without errors or warnings.</p>\n\n<p>Clang seems unable to cope with the size of the function, and while it exits normally, it issues a warning about \"reaching the end of a non void function and finding no return statement\", which seems to me as if clang \"gives up\" compiling somewhere before the Jacobian function ends. For smaller sizes, however (about 5,745,609 assignments) Clang does fine and issues no warnings.</p>\n\n<p>My question is: What can be done in this case to reduce the amount of resources (time and memory) necessary to compile the Jacobian while respecting the constraints imposed by GSL with either (or both) GCC and Clang?</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 8, "creation_date": 1576091524, "post_id": 59292509, "comment_id": 104789779, "body": "<a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 5, "creation_date": 1576091529, "post_id": 59292509, "comment_id": 104789785, "body": "It seems that you are not familiar with <a href=\"https://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">Operator overloading</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576091600, "post_id": 59292509, "comment_id": 104789818, "body": "With enough operator overloading you can almost turn C++ into a completely different language."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576091742, "post_id": 59292509, "comment_id": 104789869, "body": "Code can&#39;t modify core language syntax. But, operator overloading is part of the language."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1576091964, "post_id": 59292509, "comment_id": 104789969, "body": "Just wait until your first encounter with a lunatic using macros like <code>#define public private</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1576092307, "post_id": 59292509, "comment_id": 104790120, "body": "Boost Spirit uses operator overloading to allow a pretty fair approximation of BNF grammars in C++. It&#39;s amazing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1576092476, "post_id": 59292509, "comment_id": 104790185, "body": "@FredLarson It&#39;s also a bit scary.."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1576092641, "post_id": 59292509, "comment_id": 104790254, "body": "@user4581301 Well that&#39;s not only lunatic, but also technically UB."}, {"owner": {"reputation": 17, "user_id": 8336179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2737bd82d2b83d4f673fcea2d6eaa884?s=128&d=identicon&r=PG&f=1", "display_name": "Jatearoon Keene Boondicharern", "link": "https://stackoverflow.com/users/8336179/jatearoon-keene-boondicharern"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576092709, "post_id": 59292509, "comment_id": 104790286, "body": "@user4581301 what the heck"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576093038, "post_id": 59292509, "comment_id": 104790424, "body": "With great power comes great responsibility, and C++ offers a LOT of power."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1576093670, "creation_date": 1576093670, "answer_id": 59293017, "question_id": 59292509, "link": "https://stackoverflow.com/questions/59292509/is-the-eigen-library-modifying-c-syntax/59293017#59293017", "title": "Is the Eigen Library Modifying C++ Syntax", "body": "<p>I dont know Eigen and I think you should take a look at how these operators are implemented. However, a small toy example may help to see what is going on.</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n\nstruct my_matrix {\n    std::array&lt; std::array&lt; int,10&gt;,10&gt; data;\n    int&amp; operator()(size_t i,size_t j) { return data[i][j]; }\n    const int&amp; operator()(size_t i,size_t j) const { return data[i][j]; }\n};\n\n\nint main (){\n    my_matrix x;\n    x(1,1) = 42;\n    std::cout &lt;&lt; x(1,1);\n}\n</code></pre>\n\n<p>Overloading <code>operator()</code> is rather flexible, because it allows aribtrary number of parameters. Returning a reference to an element of <code>data</code> allows the user to modify elements of a non-const <code>my_matrix</code>. To also allow accessing elements of a <code>const my_matrix</code> (without modifiying them) there is also a <code>const</code> overload of the operator. Similarly to overloading <code>operator()</code>, <code>&lt;&lt;</code> is also an operator that can be overloaded to do different things. For more on operator overloading see <a href=\"https://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1576169643, "post_id": 59295174, "comment_id": 104820991, "body": "FYI: The return type of <code>operator&lt;&lt;</code> is <a href=\"https://gitlab.com/libeigen/eigen/blob/master/Eigen/src/Core/CommaInitializer.h\" rel=\"nofollow noreferrer\"><code>Eigen::CommaInitializer</code></a> which keeps a reference to the object which gets initialized, overloads <code>operator,</code> and internally keeps track how far the object is already initialized."}, {"owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1576183690, "post_id": 59295174, "comment_id": 104826838, "body": "I imagine that Eigen probably had a separated type just for this, since implementing this functionality directly in the matrix class would just make it more bloated."}], "tags": [], "owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576103761, "creation_date": 1576103761, "answer_id": 59295174, "question_id": 59292509, "link": "https://stackoverflow.com/questions/59292509/is-the-eigen-library-modifying-c-syntax/59295174#59295174", "title": "Is the Eigen Library Modifying C++ Syntax", "body": "<p>In both code blocks there is some operator overloading. </p>\n\n<p>In the first code block, the line <code>MatrixXd m(2,2);</code> is <strong>creating the object</strong>, since it's the declaration and we have the type <code>MatrixXd</code> there. Therefore, the syntax <code>m(i, j)</code> must be a call to a constructor receiving two parameters (it can also be a constructor receiving more parameters as long as te other parameters have default values). </p>\n\n<p>The other lines in the first code block are not calling the constructor and therefore the syntax <code>m(i, j)</code> means calling the implementation of <code>operator()(i, j)</code>. Technically, something similar to <code>operator()(int i, int j)</code>.\nIn summary, the first code block only needs one operator overload, and it is one people often implement.</p>\n\n<p>The second code block is what seems more like magic to me. The part <code>m &lt;&lt; Number</code> means that the type of <code>m</code>, which is <code>Matrix3f</code>, has an overload for <code>operator&lt;&lt;</code>. Then I think that the type of whatever <code>operator&lt;&lt;</code> returns<sup>1</sup> must have an implementation of the comma operator to allow the <code>1, 2, 3, ...</code> part. The comma operator is rarely used and it is the most obscure operator to overload IMHO. In summary, the second code block requires two operator overloads and one of them is more obscure. Yeah, it's magic.</p>\n\n<hr>\n\n<p><sup>1</sup> It could be a reference to <code>m</code> and thus be <code>Matrix3f</code> or it could even be a completely different type created by Eigen authors to allow this nice syntax to initialize a matrix.</p>\n"}], "owner": {"reputation": 17, "user_id": 8336179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2737bd82d2b83d4f673fcea2d6eaa884?s=128&d=identicon&r=PG&f=1", "display_name": "Jatearoon Keene Boondicharern", "link": "https://stackoverflow.com/users/8336179/jatearoon-keene-boondicharern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 59295174, "answer_count": 2, "score": 0, "last_activity_date": 1576103761, "creation_date": 1576091411, "question_id": 59292509, "link": "https://stackoverflow.com/questions/59292509/is-the-eigen-library-modifying-c-syntax", "title": "Is the Eigen Library Modifying C++ Syntax", "body": "<p>I've been using Eigen recently and while everything makes sense, and I am just a little confused about how the library gets away with the weird syntax that it uses.</p>\n\n<p>For example, when defining an matrix, you are supposed to do:</p>\n\n<pre><code>MatrixXd m(2,2); //defines a 3 x 4 matrix\nm(0, 0) = 1;\nm(0, 1) = 2;\nm(1, 0) = 3;\nm(1, 1) = 4;\n</code></pre>\n\n<p>or you can do something like:</p>\n\n<pre><code>Matrix3f m;\nm &lt;&lt; 1, 2, 3,\n     4, 5, 6,\n     7, 8, 9;\nstd::cout &lt;&lt; m;\n</code></pre>\n\n<p>While these commands make sense conceptually to me, I am curious about how they make sense to the compiler. I thought &lt;&lt; was used for bit-shifting and that the bracket notation was used for inputting parameter functions or something, not for parsing through a matrix structure like an array.</p>\n\n<p>I haven't been working with C++ for long enough to understand all of this syntax, but I was wondering if the writers of Eigen somehow defined custom syntax or something.</p>\n"}, {"tags": ["c++", "stack"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576091631, "post_id": 59292259, "comment_id": 104789827, "body": "Warning: check the IO for success. Eg: <code>cin &gt;&gt; b;</code> should be <code>if (cin &gt;&gt; b) { use b } else { clean up and prompt user for new b }</code> or similar. Never count on the meatbag at the keyboard to give you good input. In fact count on the meatbag to do evil, malicious stuff."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576091821, "post_id": 59292259, "comment_id": 104789906, "body": "Side note: Variables like <code>a</code>, <code>b</code>, and <code>x</code> do not describe the intent of the code very well and make it very easy to insert and not find typos. Use longer and descriptive identifiers. The time you save typing single letter identifiers can be more than consumed by the time spent solving one bug that results."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12487570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dLi6zsL3b5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUYk-2N9nV1erzVtGEOf27d3P8sg/photo.jpg?sz=128", "display_name": "Catherine Brower", "link": "https://stackoverflow.com/users/12487570/catherine-brower"}, "is_accepted": false, "score": 1, "last_activity_date": 1576090966, "creation_date": 1576090966, "answer_id": 59292394, "question_id": 59292259, "link": "https://stackoverflow.com/questions/59292259/i-am-creating-a-calculator-in-c-which-it-has-an-undo-and-clear-using-stacks/59292394#59292394", "title": "I am creating a calculator in c++ which it has an undo and clear. Using stacks", "body": "<p>If you're looking to implement a calculator, use the Shunting Yard algo. This algorithm works in the same manner as swapping a position in two arrays with the exception that instead of using a single cell as temporary storage, it utilizes a stack. The end result is to transform human readable expressions (infix notation) notation to computer executable expressions (postfix notation). For example, shunting yard will translate this infix expression \"1 + 1\" to \"1 1 +\". The postfix expression is stored in a stack and evaluated by poping the elements from the postfix stack until your reach an operator. Take the operator and apply it to the numbers already poped. That's a super brief overview so here's some more:</p>\n\n<p>Rosetta Code: <a href=\"http://www.rosettacode.org/wiki/Parsing/Shunting-yard_algorithm\" rel=\"nofollow noreferrer\">http://www.rosettacode.org/wiki/Parsing/Shunting-yard_algorithm</a>\nWiki: <a href=\"https://en.wikipedia.org/wiki/Shunting-yard_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Shunting-yard_algorithm</a></p>\n\n<p>I've implemented this a few times so if you need any more help just ask!</p>\n"}, {"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1576094581, "last_edit_date": 1576094581, "creation_date": 1576091849, "answer_id": 59292611, "question_id": 59292259, "link": "https://stackoverflow.com/questions/59292259/i-am-creating-a-calculator-in-c-which-it-has-an-undo-and-clear-using-stacks/59292611#59292611", "title": "I am creating a calculator in c++ which it has an undo and clear. Using stacks", "body": "<p>You are too eager in evaluating the user input with </p>\n\n<pre><code> char ASMD;\n int b = 0;\n ...\n cin &gt;&gt; b;\n cin &gt;&gt; ASMD;\n</code></pre>\n\n<p>You should read it into a string first and then decide the what the next action is.</p>\n\n<ol>\n<li>if the input is <code>'u'</code> or <code>'c'</code> then there is no further input.</li>\n<li>if the input is convertible to an integer then you need to read the operand.</li>\n<li>if the input is 'wrong' then print some sort of error message and <code>continue</code>.</li>\n</ol>\n\n<p>You are also not popping the values off the stack. Here is an improved but not fully functional version </p>\n\n<pre><code>cin &gt;&gt; in;    \n\nif( in == \"u\" ){\n    std::cout &lt;&lt; \"undo not implemented\\n\";\n    continue;\n}\n\ntry{\n    b = stoi( in );\n} \ncatch( std::invalid_argument&amp; ){\n    std::cout &lt;&lt; \"invalid input\\n\";\n    continue;\n}\n\na = math.top();\nmath.pop(); // ! need to pop here, well somewhere        \ncin &gt;&gt; ASMD;    \n\n</code></pre>\n\n<p>see improved version <a href=\"http://coliru.stacked-crooked.com/a/75b4b5d83eeebd28\" rel=\"nofollow noreferrer\">live</a></p>\n"}, {"tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": false, "score": 0, "last_activity_date": 1576091903, "creation_date": 1576091903, "answer_id": 59292624, "question_id": 59292259, "link": "https://stackoverflow.com/questions/59292259/i-am-creating-a-calculator-in-c-which-it-has-an-undo-and-clear-using-stacks/59292624#59292624", "title": "I am creating a calculator in c++ which it has an undo and clear. Using stacks", "body": "<p>You can read a string and then check if it can be converted to an int.</p>\n\n<pre><code>std::string input;\nint inputAsInt;\n\nif(std::cin &lt;&lt; input) // Just to check that reading was successfull\n{\n    try {\n        inputAsInt = std::stoi(input);\n        // conversion succeeded, input was an int\n    }\n    catch(const std::exception &amp;) {\n        // conversion failed, the input was a string\n    }\n}\n</code></pre>\n\n<p>That's just a basic example, but I hope it points you in the right direction.</p>\n"}], "owner": {"reputation": 11, "user_id": 7842261, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3m72teTqS30/AAAAAAAAAAI/AAAAAAAAWXw/EvJq9_VJezg/photo.jpg?sz=128", "display_name": "zhaq", "link": "https://stackoverflow.com/users/7842261/zhaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576094909, "creation_date": 1576090327, "last_edit_date": 1576094909, "question_id": 59292259, "link": "https://stackoverflow.com/questions/59292259/i-am-creating-a-calculator-in-c-which-it-has-an-undo-and-clear-using-stacks", "title": "I am creating a calculator in c++ which it has an undo and clear. Using stacks", "body": "<p>For my assignment I need to make calculator using stacks. I got the adding subtracting multiplying part. I keno for undo I just pop the stack and for clear I can just add a 0 to the top of the stack but every time a user enters U or C the program crashes because user input is supposed to be int. </p>\n\n<p>output:</p>\n\n<pre><code>=&gt;1\n2\n+\n=&gt;3\n2\n-\n=&gt;1\n9\n*\n=&gt;9\n9\n/\n=&gt;1\nu\n=&gt;9\nc\n=&gt;0\n</code></pre>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stack&gt;\n\nusing namespace std;\n\nint add(int a, int b)\n{\n    int x;\n    x = a + b;\n    return x;\n}\n\nint sub(int a, int b)\n{\n    int x;\n    x = a - b;\n    return x;\n}\n\nint multi(int a, int b)\n{\n    int x;\n    x = a * b;\n    return x;\n}\n\nint divide(int a, int b)\n{\n    int x;\n    x = a / b;\n    return x;\n}\n\nint main()\n{\n    stack&lt;int&gt;math;\n    char ASMD;\n    int x = 0;\n    int a = 0;\n    int b = 0;\n    bool control = false;\n\n    math.push(x);\n\n    cout &lt;&lt; \"=&gt; \" &lt;&lt; math.top() &lt;&lt; endl;\n\n    while (control == false)\n    {\n        cin &gt;&gt; b;\n        cin &gt;&gt; ASMD;\n        a = math.top();\n\n        switch (ASMD)\n        {\n            case '+':\n            {\n                x = add(a, b);\n                break;\n\n            }\n            case '-':\n            {\n                x = sub(a, b);\n                break;\n            }\n            case '*':\n            {\n                x = multi(a, b);\n                break;\n            }\n            case '/':\n            {\n                if (b != 0)\n                {\n                    x = divide(a, b);\n                    break;\n                }\n                else\n                {\n                    cout &lt;&lt; \"error: can't divide my 0\" &lt;&lt; endl;\n                    break;\n                }\n\n            }\n\n            default:\n            {\n                control = true;\n                break;\n            }\n\n        }\n\n        math.push(x);\n        cout &lt;&lt; \"=&gt; \" &lt;&lt; math.top() &lt;&lt; endl;\n\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1576089229, "post_id": 59292018, "comment_id": 104788822, "body": "<code>std::vector</code> uses <code>new</code>, it&#39;s just wrapped in a <code>std::allocator</code>."}, {"owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576089456, "post_id": 59292018, "comment_id": 104788917, "body": "@NathanOliver-ReinstateMonica how then should I create a multidimensional array using a vector. I didn\u2019t succeed for some reason and I created my own :)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576089684, "post_id": 59292018, "comment_id": 104789001, "body": "Worst case, use <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>.  Best case use something like: <a href=\"https://stackoverflow.com/a/53038618/4342498\">stackoverflow.com/a/53038618/4342498</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576089787, "post_id": 59292018, "comment_id": 104789037, "body": "You could also use something like <a href=\"https://stackoverflow.com/a/43358434/4342498\">stackoverflow.com/a/43358434/4342498</a>"}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1576090546, "post_id": 59292018, "comment_id": 104789365, "body": "there is also <a href=\"https://www.boost.org/doc/libs/1_70_0/libs/multi_array/doc/user.html\" rel=\"nofollow noreferrer\">boost::multi_array</a>"}, {"owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "edited": false, "score": 0, "creation_date": 1576091089, "post_id": 59292018, "comment_id": 104789584, "body": "I didn\u2019t really like the multi boots library. I am reading other links, until I realized that the vector cannot work with dynamic data, until I understand it. for example, data int _Size, _Size2, _Size3, _Size4, _Size5; they are not known before compilation, I know the intentions after starting the program."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576090051, "post_id": 59292182, "comment_id": 104789162, "body": "Whilst this may theoretically answer the question, <a href=\"//meta.stackoverflow.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}, {"owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "edited": false, "score": 0, "creation_date": 1576092484, "post_id": 59292182, "comment_id": 104790190, "body": "a little confused I can not for some reason initialize the array with zeros, I do so <code>return new int64_t[_Size]{};</code>"}, {"owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "edited": false, "score": 0, "creation_date": 1576093715, "post_id": 59292182, "comment_id": 104790739, "body": "Unfortunately, I can\u2019t use this code yet, and don\u2019t know how to initialize the array with zeros. I don\u2019t know how to program like you :)"}, {"owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "edited": false, "score": 0, "creation_date": 1576094488, "post_id": 59292182, "comment_id": 104791117, "body": "I figured it out, I was dumb, I had to add in the opposite direction. Thank you very much your example works fine, I will think about how now it is also possible to implement deletions."}], "tags": [], "owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "is_accepted": true, "score": 0, "last_activity_date": 1576091560, "last_edit_date": 1576091560, "creation_date": 1576089978, "answer_id": 59292182, "question_id": 59292018, "link": "https://stackoverflow.com/questions/59292018/how-to-make-one-function-with-three-different-output-conditions/59292182#59292182", "title": "how to make one function with three different output conditions?", "body": "<p>You can do this using variadic templates</p>\n\n<p>See this link:</p>\n\n<p><a href=\"https://eli.thegreenplace.net/2014/variadic-templates-in-c/\" rel=\"nofollow noreferrer\">https://eli.thegreenplace.net/2014/variadic-templates-in-c/</a></p>\n\n<p>See example:</p>\n\n<pre><code>template&lt;class T1&gt;\nauto auto_vector(T1&amp;&amp; _Size) {\n    return new int64_t[_Size];\n}\n\ntemplate &lt;class T1, class... TT&gt;\nauto auto_vector(T1&amp;&amp; _Size, TT&amp;&amp;... r)\n{\n    auto result = new decltype(auto_vector(r...))[_Size];\n    for (int64_t i = 0; i &lt; _Size; ++i) {\n        result[i] = auto_vector(r...);\n    }\n    return result;\n}\n\nint main()\n{\n    auto x = auto_vector(2,2,2,2);\n\n    return 0;\n}\n</code></pre>\n\n<p>For the delete you do the same way</p>\n"}], "owner": {"reputation": 43, "user_id": 12111839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261e7873fca2c5fcb61308cbb1cc2199?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12111839/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 2, "accepted_answer_id": 59292182, "answer_count": 1, "score": 1, "last_activity_date": 1576092710, "creation_date": 1576089141, "last_edit_date": 1576092710, "question_id": 59292018, "link": "https://stackoverflow.com/questions/59292018/how-to-make-one-function-with-three-different-output-conditions", "title": "how to make one function with three different output conditions?", "body": "<p>I am trying to implement a dynamic array with new because the standard std libraries do not.\nhere is my code.</p>\n\n<pre><code>template &lt;class T1, class T2, class T3&gt;\nauto auto_vector(T1&amp; _Size, T2&amp; _Size2, T3&amp; _Size3) {\n    auto result = new int64_t **[_Size3];\n    for (ptrdiff_t i = 0; i &lt; _Size3; ++i) {\n        result[i] = new int64_t *[_Size2];\n        for (ptrdiff_t k = 0; k &lt; _Size2; ++k) {\n            result[i][k] = new int64_t [_Size]{};\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>this is how i delete my array</p>\n\n<pre><code>template &lt;class T1, class T2, class T3, class T4&gt;\nvoid del_vector(T4&amp; _Del, T1&amp; _Size, T2&amp; _Size2, T3&amp; _Size3) {\n    for (ptrdiff_t i = 0; i &lt; _Size3; ++i) {\n        for (ptrdiff_t k = 0; k &lt; _Size2; ++k) {\n            delete _Del[i][k];\n        }\n        delete _Del[i];\n    }\n    delete _Del;\n}\n</code></pre>\n\n<p>I can use it to create a multidimensional array with three tabs.\nlike so</p>\n\n<pre><code>auto tor3 = auto_vector(_Size, _Size2, _Size3);\n</code></pre>\n\n<p>But I also want to create other arrays with two tabs or four, or all of a sudden I need to create a 10x multi-dimensional array. If suddenly I lose my mind\nlike so</p>\n\n<pre><code>int _Size, _Size2, _Size3, _Size4, _Size5; \n_Size = _Size2 = _Size3 =_Size4 = _Size5 = 4;\n\n\nauto tor2 = auto_vector(_Size, _Size2);\n\nauto tor1 = auto_vector(_Size);\n\nauto tor10 = auto_vector(_Size,_Size2,_Size3,_Size4,_Size5);\n</code></pre>\n\n<p>How can I make one function from my function that can do all this, and is it possible to do this?</p>\n\n<pre><code>cout &lt;&lt; \" ---------TEST---------- \" &lt;&lt; endl;\n    for (ptrdiff_t i = 0; i &lt; _Size3; ++i) {\n        for (ptrdiff_t k = 0; k &lt; _Size2; ++k) {\n            for (ptrdiff_t j = 0; j &lt; _Size; ++j) {\n                cout &lt;&lt; _Tor[i][k][j] &lt;&lt; \" \";\n            }\n            cout &lt;&lt; endl;\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; \" ---------TEST---------- \" &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glut"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1576089025, "post_id": 59291968, "comment_id": 104788732, "body": "Please post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and complete error message."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1576089955, "post_id": 59291968, "comment_id": 104789115, "body": "Which GLUT implementation are you using?  How did you install it, from source or binaries?  OS?  Compiler?"}, {"owner": {"reputation": 35, "user_id": 10772103, "user_type": "registered", "profile_image": "https://graph.facebook.com/1814950375252014/picture?type=large", "display_name": "MU&#39;men Ahmed", "link": "https://stackoverflow.com/users/10772103/mumen-ahmed"}, "edited": false, "score": 0, "creation_date": 1576090310, "post_id": 59291968, "comment_id": 104789274, "body": "I installed it from binaries. I put &#39;glut32.dll&#39; in &#39;C:\\Windows\\SysWOW64&#39; path, &#39;glut32.lib&#39; in &#39;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib&#39; &#39;glut.h&#39; in &#39;C:\\Program Files (x86)\\CodeBlocks\\MinGW\\include\\GL&#39;. As i saw in this link <a href=\"https://www.youtube.com/watch?v=Ufpg11EqWzs\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Ufpg11EqWzs</a>."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1576090905, "post_id": 59291968, "comment_id": 104789489, "body": "Don&#39;t go anywhere near the ancient <a href=\"https://user.xmission.com/~nate/glut.html\" rel=\"nofollow noreferrer\">Nate Robins GLUT</a>.  Use <a href=\"http://freeglut.sourceforge.net/\" rel=\"nofollow noreferrer\">FreeGLUT</a>, it&#39;s actually maintained."}, {"owner": {"reputation": 35, "user_id": 10772103, "user_type": "registered", "profile_image": "https://graph.facebook.com/1814950375252014/picture?type=large", "display_name": "MU&#39;men Ahmed", "link": "https://stackoverflow.com/users/10772103/mumen-ahmed"}, "edited": false, "score": 0, "creation_date": 1576091276, "post_id": 59291968, "comment_id": 104789673, "body": "I&#39;m not sure about what FreeGLUT is tbh. Is there any difference between FreeGlut and Nate Robins GLUT? because my assignment is to use only GLUT."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1576094794, "post_id": 59291968, "comment_id": 104791267, "body": "GLUT is no longer maintained and it&#39;s license did not permit the redistribution of modified versions of the library (so no one else can update it)  <a href=\"https://en.wikipedia.org/wiki/OpenGL_Utility_Toolkit\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/OpenGL_Utility_Toolkit</a>  FreeGLUT is maintained and updated  <a href=\"https://en.wikipedia.org/wiki/FreeGLUT\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/FreeGLUT</a>"}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 10772103, "user_type": "registered", "profile_image": "https://graph.facebook.com/1814950375252014/picture?type=large", "display_name": "MU&#39;men Ahmed", "link": "https://stackoverflow.com/users/10772103/mumen-ahmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1576187945, "creation_date": 1576187945, "answer_id": 59313293, "question_id": 59291968, "link": "https://stackoverflow.com/questions/59291968/glut-problem-error-redeclaration-of-c-built-in-type-wchar-t/59313293#59313293", "title": "GLUT Problem: error redeclaration of c++ built-in type &#39;wchar_t&#39;", "body": "<p>In my case, codeblocks was setting the path to the compiler to the installation under old folder C:\\MinGW. When I changed to the installation in the directory of codeblocks, compilation worked:</p>\n\n<p>In the codeblocks, go to settings-compiler-toolchain executables, and change the compiler's installation directory to the installation of MinGW in the codeblocks directory.\nThanks to @Joao Pedro.</p>\n"}], "owner": {"reputation": 35, "user_id": 10772103, "user_type": "registered", "profile_image": "https://graph.facebook.com/1814950375252014/picture?type=large", "display_name": "MU&#39;men Ahmed", "link": "https://stackoverflow.com/users/10772103/mumen-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 59313293, "answer_count": 1, "score": 0, "last_activity_date": 1576187945, "creation_date": 1576088955, "last_edit_date": 1576090791, "question_id": 59291968, "link": "https://stackoverflow.com/questions/59291968/glut-problem-error-redeclaration-of-c-built-in-type-wchar-t", "title": "GLUT Problem: error redeclaration of c++ built-in type &#39;wchar_t&#39;", "body": "<p>Just installed GLUT and giving me <code>'error redeclaration of c++ built-in type 'wchar_t'</code>. I searched for solution and found that i should include <code>&lt;graphics.h&gt;</code>. But doing this didn't help. Any help?</p>\n\n<p>The code is the default of any new glut project.</p>\n\n<p>The code is:</p>\n\n<pre><code>/*\n * GLUT Shapes Demo\n *\n * Written by Nigel Stewart November 2003\n *\n * This program is test harness for the sphere, cone\n * and torus shapes in GLUT.\n *\n * Spinning wireframe and smooth shaded shapes are\n * displayed until the ESC or q key is pressed.  The\n * number of geometry stacks and slices can be adjusted\n * using the + and - keys.\n */\n\n#ifdef __APPLE__\n#include &lt;GLUT/glut.h&gt;\n#else\n#include &lt;GL/glut.h&gt;\n#endif\n\n#include &lt;stdlib.h&gt;\n\nstatic int slices = 16;\nstatic int stacks = 16;\n\n/* GLUT callback Handlers */\n\nstatic void resize(int width, int height)\n{\n    const float ar = (float) width / (float) height;\n\n    glViewport(0, 0, width, height);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 100.0);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity() ;\n}\n\nstatic void display(void)\n{\n    const double t = glutGet(GLUT_ELAPSED_TIME) / 1000.0;\n    const double a = t*90.0;\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glColor3d(1,0,0);\n\n    glPushMatrix();\n        glTranslated(-2.4,1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutSolidSphere(1,slices,stacks);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslated(0,1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutSolidCone(1,1,slices,stacks);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslated(2.4,1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutSolidTorus(0.2,0.8,slices,stacks);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslated(-2.4,-1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutWireSphere(1,slices,stacks);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslated(0,-1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutWireCone(1,1,slices,stacks);\n    glPopMatrix();\n\n    glPushMatrix();\n        glTranslated(2.4,-1.2,-6);\n        glRotated(60,1,0,0);\n        glRotated(a,0,0,1);\n        glutWireTorus(0.2,0.8,slices,stacks);\n    glPopMatrix();\n\n    glutSwapBuffers();\n}\n\n\nstatic void key(unsigned char key, int x, int y)\n{\n    switch (key)\n    {\n        case 27 :\n        case 'q':\n            exit(0);\n            break;\n\n        case '+':\n            slices++;\n            stacks++;\n            break;\n\n        case '-':\n            if (slices&gt;3 &amp;&amp; stacks&gt;3)\n            {\n                slices--;\n                stacks--;\n            }\n            break;\n    }\n\n    glutPostRedisplay();\n}\n\nstatic void idle(void)\n{\n    glutPostRedisplay();\n}\n\nconst GLfloat light_ambient[]  = { 0.0f, 0.0f, 0.0f, 1.0f };\nconst GLfloat light_diffuse[]  = { 1.0f, 1.0f, 1.0f, 1.0f };\nconst GLfloat light_specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };\nconst GLfloat light_position[] = { 2.0f, 5.0f, 5.0f, 0.0f };\n\nconst GLfloat mat_ambient[]    = { 0.7f, 0.7f, 0.7f, 1.0f };\nconst GLfloat mat_diffuse[]    = { 0.8f, 0.8f, 0.8f, 1.0f };\nconst GLfloat mat_specular[]   = { 1.0f, 1.0f, 1.0f, 1.0f };\nconst GLfloat high_shininess[] = { 100.0f };\n\n/* Program entry point */\n\nint main(int argc, char *argv[])\n{\n    glutInit(&amp;argc, argv);\n    glutInitWindowSize(640,480);\n    glutInitWindowPosition(10,10);\n    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);\n\n    glutCreateWindow(\"GLUT Shapes\");\n\n    glutReshapeFunc(resize);\n    glutDisplayFunc(display);\n    glutKeyboardFunc(key);\n    glutIdleFunc(idle);\n\n    glClearColor(1,1,1,1);\n    glEnable(GL_CULL_FACE);\n    glCullFace(GL_BACK);\n\n    glEnable(GL_DEPTH_TEST);\n    glDepthFunc(GL_LESS);\n\n    glEnable(GL_LIGHT0);\n    glEnable(GL_NORMALIZE);\n    glEnable(GL_COLOR_MATERIAL);\n    glEnable(GL_LIGHTING);\n\n    glLightfv(GL_LIGHT0, GL_AMBIENT,  light_ambient);\n    glLightfv(GL_LIGHT0, GL_DIFFUSE,  light_diffuse);\n    glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);\n    glLightfv(GL_LIGHT0, GL_POSITION, light_position);\n\n    glMaterialfv(GL_FRONT, GL_AMBIENT,   mat_ambient);\n    glMaterialfv(GL_FRONT, GL_DIFFUSE,   mat_diffuse);\n    glMaterialfv(GL_FRONT, GL_SPECULAR,  mat_specular);\n    glMaterialfv(GL_FRONT, GL_SHININESS, high_shininess);\n\n    glutMainLoop();\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1576092921, "post_id": 59291922, "comment_id": 104790364, "body": "WAV is just a container format, what is important is the <i>codec</i> that is used to encode the audio samples within in. There are MANY audio codecs available, some more compressed than others (for instance, my company uses Microsoft&#39;s GSM, which is highly compressed without losing audio quality, we produce HOURS of audio that make small WAVs). <code>PlaySound()</code> can play any WAV file as long as there is an appropriate codec installed on the machine."}, {"owner": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576094582, "post_id": 59291922, "comment_id": 104791158, "body": "@RemyLebeau Hey Remy, can you help me with compressing my wav file ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1576094944, "post_id": 59291922, "comment_id": 104791333, "body": "there is really nothing to help with. Just be sure to select a codec that uses compression when creating your WAVs. Or, for existing WAVs, find a 3rd party tool that can re-encode them."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 10986393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYJ8Y.png?s=128&g=1", "display_name": "John Meschke", "link": "https://stackoverflow.com/users/10986393/john-meschke"}, "is_accepted": false, "score": 0, "last_activity_date": 1576091915, "creation_date": 1576091915, "answer_id": 59292628, "question_id": 59291922, "link": "https://stackoverflow.com/questions/59291922/is-there-a-way-i-can-play-a-sound-with-different-method/59292628#59292628", "title": "Is there a way I can play a sound with different method?", "body": "<p>You might want to start digging into Windows <a href=\"https://docs.microsoft.com/en-us/windows/win32/multimedia/mci\" rel=\"nofollow noreferrer\">Media Control Interface (MCI)</a> if you want to play other media types. Microsoft also recommends it for playing larger files, which it sounds like you might want to do. Here's an <a href=\"https://docs.microsoft.com/en-us/windows/win32/multimedia/playing-a-waveform-audio-file\" rel=\"nofollow noreferrer\">example</a> of playing a WAVE audio file with MCI. </p>\n\n<p>There are other alternatives like <a href=\"https://docs.microsoft.com/en-us/windows/win32/xaudio2/xaudio2-introduction\" rel=\"nofollow noreferrer\">XAudio2</a> with DirectX, but it can get really complicated really fast with a lot more code. A simpler solution would be to find an existing library and incorporate it into your project. Here's an <a href=\"https://superpowered.com/audio-library-list\" rel=\"nofollow noreferrer\">article</a> that lists some of your options. There are some open-source free solutions out there.</p>\n\n<p>Whichever route you take, check to see if the solution supports streaming audio from file, meaning you're only loading and playing small chunks of an audio file at a given time. Loading in multiple audio files that span several megabytes is just taking up memory and can be a detriment to performance.</p>\n"}, {"comments": [{"owner": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576135710, "post_id": 59299027, "comment_id": 104802480, "body": "Hey! I have tried to use <code>mciSendString</code> to play MP3 file, and it does not work, I can&#39;t hear anything."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576136179, "post_id": 59299027, "comment_id": 104802664, "body": "@nakE Is your MP3 file in the correct audio format? Can you play it with the  Windows Media Player?"}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576157440, "post_id": 59299027, "comment_id": 104813637, "body": "@nakE   Please use my code and try again, what you need to do is to replace the mp3 file."}, {"owner": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576157707, "post_id": 59299027, "comment_id": 104813804, "body": "Have you try it ? I know that I need to replace the mp3, but it does not work, I can&#39;t hear anything."}, {"owner": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576157939, "post_id": 59299027, "comment_id": 104813939, "body": "But How can I make it a loop ?"}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "edited": false, "score": 0, "creation_date": 1576198894, "post_id": 59299027, "comment_id": 104831176, "body": "@nakE Please use &quot;play Current_Sound_Command repeat&quot;, it will make it a loop."}], "tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": true, "score": 0, "last_activity_date": 1576133348, "last_edit_date": 1576133348, "creation_date": 1576132853, "answer_id": 59299027, "question_id": 59291922, "link": "https://stackoverflow.com/questions/59291922/is-there-a-way-i-can-play-a-sound-with-different-method/59299027#59299027", "title": "Is there a way I can play a sound with different method?", "body": "<p><strong>And if the song is 30 seconds, when the song ends there is a delay for one second, and then it start again. and it is not fun to hear it, I want the song to be 5 minutes for example so the user does not hear the delay.</strong></p>\n\n<p>This is the same as a <a href=\"https://stackoverflow.com/questions/59128549/is-there-a-way-to-play-a-sound-without-delay\">case</a> I saw before. Interestingly, they all want to eliminate the delay.</p>\n\n<p>When using <code>PlaySound(pathtosound.c_str(), 0, SND_ASYNC | SND_LOOP)</code> to replay audio files, there will inevitably be a little delay, and the time is less than 1 second.</p>\n\n<p>In my opinion, this delay seems inevitable. Unless you try to cut and copy the wav file from 30 seconds to 5 minutes with a third-party tool. And in this way, you can avoid repeating 30 seconds of audio. </p>\n\n<p><strong>Is there a way to play other file types ?</strong></p>\n\n<p>You can use <a href=\"https://docs.microsoft.com/en-us/previous-versions/dd757161(v%3Dvs.85)\" rel=\"nofollow noreferrer\">mciSendString</a>.</p>\n\n<blockquote>\n  <p>The mciSendString function sends a command string to an MCI device.\n  The device that the command is sent to is specified in the command\n  string.</p>\n</blockquote>\n\n<p><code>mciSendString</code> has many interesting functions. You can get commands from this <a href=\"https://docs.microsoft.com/en-us/windows/win32/multimedia/multimedia-command-strings?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">document</a>.</p>\n\n<p>Example of using <code>mciSendStringto</code> play other audios, such as looping mp3.</p>\n\n<pre><code>#include &lt;conio.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n\n#pragma comment (lib,\"Winmm.lib\")\nusing namespace std;\n\nint main() \n{\n\n    LPCSTR const Sound_File_Open = \"open C:\\\\Users\\\\xxx\\\\Desktop\\\\nyan-clipped.mp3 type mpegvideo alias Current_Sound_Command\";\n\n    MCIERROR open = mciSendString(Sound_File_Open, NULL, 0, NULL);\n\n    MCIERROR play = mciSendString(\"play Current_Sound_Command repeat\", NULL, 0,  NULL);\n\n    system(\"pause\");\n}\n</code></pre>\n\n<p>More cases: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/56822577/how-can-you-fix-this-error-from-mcisendstring-and-make-it-play-a-sound/56833861#56833861\">How can you fix this error from mciSendString() and make it play a\nsound?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15490552/mp3-playing-using-mci-send-string-c\">MP3 playing using mci send string c++</a></li>\n</ul>\n\n<p><strong>Or reduce the size of the file ?</strong></p>\n\n<p>A wav file is lossless, uncompressed audio.You should try a lossy format like mp3. A high quality mp3 file is often indistinguishable from a lossless file.</p>\n\n<p>If it is absolutely crucial that the file must be a .wav, there is a way to reduce file size, although you will lose more quality in the process than you would by using a lossy audio codec.</p>\n\n<p>Potential options for reducing filesize are:</p>\n\n<ul>\n<li>Converting from stereo to mono</li>\n<li>Lowering the audio sample rate</li>\n<li>Lowering the audio bit depth</li>\n</ul>\n\n<p>Here is an <a href=\"https://superuser.com/a/457033\">example</a> of how to compress wav files.</p>\n"}], "owner": {"reputation": 352, "user_id": 12490238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCBnw.jpg?s=128&g=1", "display_name": "nakE", "link": "https://stackoverflow.com/users/12490238/nake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 59299027, "answer_count": 2, "score": -2, "last_activity_date": 1576524911, "creation_date": 1576088814, "last_edit_date": 1576524911, "question_id": 59291922, "link": "https://stackoverflow.com/questions/59291922/is-there-a-way-i-can-play-a-sound-with-different-method", "title": "Is there a way I can play a sound with different method?", "body": "<p>I made a program that downloads sound and then plays it with <code>PlaySound</code> function.</p>\n\n<p>My problem is that the compiler can only play <strong>wav</strong> files, and usually this such of files weigh a lot and take a lot of time to download.</p>\n\n<p>And if the song is 30 seconds, when the song ends there is a delay for one second, and then it start again. and it is not fun to hear it, I want the song to be 5 minutes for example so the user does not hear the delay.</p>\n\n<p>My 'nyan' cat sound is only 30 seconds, and weigh <strong>25</strong> MB.</p>\n\n<p><strong>Is there a way to play other file types ?</strong></p>\n\n<p><strong><em>Or reduce the size of the file ?</em></strong></p>\n\n<hr>\n\n<p><strong>My Function:</strong></p>\n\n<pre><code>Void PlayNyanSound()\n{\n    // Nyan cat sound\n\n    string dir = \"C:\\\\Users\\\\\" + username() + \"\\\\Documents\\\\Dragonite\";\n    string dwnld_URL = \"https://srv-file4.gofile.io/download/TyizCg/y2mate.com%20-%20nyan_cat_sound_effect_12_OAN-miWCDm4_360p.wav\";\n    string savepath = \"C:\\\\Users\\\\\" + username() + \"\\\\Documents\\\\Dragonite\\\\nyan.wav\";\n\n    CreateDirectory(dir.c_str(), NULL);\n\n    URLDownloadToFile(NULL, dwnld_URL.c_str(), savepath.c_str(), 0, NULL);\n\n    std::string pathtosound = \"C:\\\\Users\\\\\" + username() + \"\\\\Documents\\\\Dragonite\\\\nyan.wav\";\n    while (true) {\n        PlaySound(pathtosound.c_str(), 0, SND_SYNC);\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>With Strive's help, I came to this result. But I can't hear anything, it does not work.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#pragma comment (lib,\"Winmm.lib\")\n\nusing namespace std;\n\nint main()\n{\n\n    while (true)\n    {\n        LPCSTR const Sound_File_Open = \"open C:\\\\Users\\\\roeil\\\\Desktop\\\\nyan.mp3\";\n\n        MCIERROR open = mciSendString(Sound_File_Open, NULL, 0, NULL);\n\n        MCIERROR play = mciSendString(Sound_File_Open, NULL, 0, NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "c++17", "unique-ptr"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1576088455, "post_id": 59291802, "comment_id": 104788455, "body": "It&#39;s an elaborated type specifier. See <a href=\"https://stackoverflow.com/questions/28007165/class-keyword-in-variable-definition-in-c\">here</a>, <a href=\"https://stackoverflow.com/questions/35959438/what-is-the-class-keyword-before-a-function-argument\">here</a> or <a href=\"https://stackoverflow.com/questions/29754917/class-keyword-on-return-type-c\">here</a>. I guess we don&#39;t have a dupe that discusses elaborated type specifiers when used as template arguments (but that&#39;s also hard to search for without getting unrelated results). Edit: Better dupe is <a href=\"https://stackoverflow.com/questions/50436381/c-template-type-specification\" title=\"c template type specification\">stackoverflow.com/questions/50436381/&hellip;</a>"}], "owner": {"reputation": 1465, "user_id": 1513773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/gtUGB.jpg?s=128&g=1", "display_name": "A. Mashreghi", "link": "https://stackoverflow.com/users/1513773/a-mashreghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1576088759, "answer_count": 0, "score": 1, "last_activity_date": 1576094014, "creation_date": 1576088157, "last_edit_date": 1576094014, "question_id": 59291802, "link": "https://stackoverflow.com/questions/59291802/class-t-vs-t-when-defining-unique-ptr-in-c", "closed_reason": "Duplicate", "title": "Class T vs T when defining unique_ptr in C++?", "body": "<p>I usually use the following line to declare/init a unique_ptr for a class named T:</p>\n\n<pre><code>unique_ptr&lt;T&gt; tPtr(new T());\n</code></pre>\n\n<p>However, I've also seen the following.</p>\n\n<pre><code>unique_ptr&lt;class T&gt; tPtr(new T());\n</code></pre>\n\n<p>I've tested both and there seems to be no difference when using the two. So, is there any advantage in putting the class keyword? For example, does it optimize anything? Or is there more to it?</p>\n"}, {"tags": ["python", "c++", "machine-learning"], "comments": [{"owner": {"reputation": 428, "user_id": 7265997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0655be88229452b3edbff68de3d8d83d?s=128&d=identicon&r=PG&f=1", "display_name": "timedacorn", "link": "https://stackoverflow.com/users/7265997/timedacorn"}, "edited": false, "score": 0, "creation_date": 1576089874, "post_id": 59291753, "comment_id": 104789079, "body": "neural networks are efficient when you are batch processing input data.time taken wont increase linearly with  increase in the input data.so if 1 data takes 1 sec to infer, 10 data points may take 2-3 seconds but not 10 seconds because of vectorisation."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1576094747, "post_id": 59291753, "comment_id": 104791246, "body": "There are too many possibilities: but basicly instantiations take time. If you use GPU - you have to initiate it, compile kernels, transfer data, etc..."}], "owner": {"reputation": 525, "user_id": 12323228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6498d422e6c38d0808483be485b0fcc4?s=128&d=identicon&r=PG&f=1", "display_name": "cmed123", "link": "https://stackoverflow.com/users/12323228/cmed123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1576087926, "creation_date": 1576087926, "question_id": 59291753, "link": "https://stackoverflow.com/questions/59291753/streaming-data-from-c-to-python-inference-time-reduction", "title": "Streaming Data from C++ to Python Inference Time Reduction", "body": "<p>I'm working on testing a neural network model on hardware and have the hardware code in C++ and model code in Python. </p>\n\n<p>When I execute the Python code to run inference on a single streaming data point, the time for inference is about 2.5 seconds. \nBut, if I execute inference on 200+ streaming data points, the average time for inference drops down to 0.10 seconds for each data point.</p>\n\n<p>Is there a reason why inference runs so much faster basically for any number of points GREATER than 1? Is it because the GPU needs time to warm up or something?</p>\n\n<p>Also, how can I take advantage of this when executing the Python script from my C++? I don't want to just call the Python script each time but rather emulate that I'm calling multiple streaming points. I'm currently thinking of using system() calls or Py_Initialize() from C++, but I feel that would still be calling inference on a single point at each time, so therefore I'm always running with the slowest inference.</p>\n"}, {"tags": ["c++", "compiler-optimization"], "comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 2, "creation_date": 1576087583, "post_id": 59291618, "comment_id": 104788072, "body": "<code>Log::operator &lt;&lt;</code> depends on <code>printLog</code> though, which is a global variable. The compiler will expect that to change, you could use a constant if it really can&#39;t. And it&#39;s the same <code>ulog</code> object both ways, I think the standard might forbid that &quot;optimisation&quot; of <code>ulog::operator &lt;&lt;</code>, what if there was two threads for example?"}], "answers": [{"comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576087830, "post_id": 59291693, "comment_id": 104788188, "body": "<code>LOG</code> has to be a global variable, but returning <code>LOG.ulog</code> by value <a href=\"https://godbolt.org/z/mA-eg5\" rel=\"nofollow noreferrer\">does enable the optimization</a> too."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576088368, "post_id": 59291693, "comment_id": 104788407, "body": "<code>printImpl</code> could call <code>LOG.operator&lt;&lt;</code> and <code>const_cast</code> the result to change it&#39;s member. That&#39;s why returning by value enables the optimization. But returning by value had nothing to do with the <code>reinterpret_cast</code> case you mentioned in the answer. So compilers shouldn&#39;t have enabled the optimization?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576088631, "post_id": 59291693, "comment_id": 104788532, "body": "@Ayxan But, every time you write a <code>const_cast</code>, a kitten dies. Never do that. <code>reinterpret_cast</code> is not much better.."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576088633, "post_id": 59291693, "comment_id": 104788533, "body": "@Ayxan The point is that the <i><code>unchecked_log</code> instance</i> returned by-value is not reachable by <code>printImpl</code>, it has no way of getting a pointer or reference to it. If it has a pointer or reference, then it basically doesn&#39;t matter how you tried to protect yourself with <code>private</code> and friends, there are ways to modify members even if you don&#39;t have access to their names. (It doesn&#39;t matter for this case, I just mentioned it as an aside.)"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576088899, "post_id": 59291693, "comment_id": 104788668, "body": "@walnut I think <code>reinterpret_cast</code> method wouldn&#39;t work because <code>Log::unchecked_log</code> is a private class, so there is no way to name it in <code>reinterpret_cast&lt;Log::unchecked_log*&gt;(&amp;LOG)</code>, hence the <code>const_cast</code> method was the only thing preventing the optimization."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576088945, "post_id": 59291693, "comment_id": 104788694, "body": "@Ayxan You can <code>decltype</code> for it though. Anyway, I believe walnut means that you can <code>reinterpret_cast&lt;bool*&gt;</code> to access the member if you get an instance of <code>unchecked_log</code>."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576089242, "post_id": 59291693, "comment_id": 104788826, "body": "@Fran&#231;oisAndrieux You&#39;re right. So the <code>printImpl</code> could do something like <code>auto l = LOG &lt;&lt; 1;     auto&amp; ulog = *(reinterpret_cast&lt;decltype(l)*&gt;(&amp;LOG));     ulog.active = true;</code> So what compilers did was illegal?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576089398, "post_id": 59291693, "comment_id": 104788897, "body": "@Ayxan If you return by-value or use a <code>LOG</code> without external linkage, then <code>printImpl</code> has no way of obtaining a reference to the instance of relevance, so it cannot use that. These hypotheticals are for the case where you keep using the global <code>LOG.ulog</code> with external linkage. Therefore the optimization is valid."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576090565, "post_id": 59291693, "comment_id": 104789376, "body": "@walnut In <a href=\"https://godbolt.org/z/cGWYRb\" rel=\"nofollow noreferrer\">this</a> example <code>LOG</code> is still a global variable. So <code>printImpl</code> could still do all the evil things you mentioned in the answer and I mentioned in <a href=\"https://stackoverflow.com/questions/59291618/is-this-a-missed-optimization-opportunity-or-not#comment104788826_59291693\">this</a> previous comment. But <code>if (active)</code> seems to be optimized out. Why is it optimized then? Am I getting something wrong? I am really sorry if there is something obvious I am missing."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1576090936, "post_id": 59291693, "comment_id": 104789506, "body": "@Ayxan Yes <code>printImpl</code> can modfiy <code>LOG.ulog.active</code>, but that is not what you keep using in <code>test</code>. The first <code>&lt;&lt;</code> returns another <code>unchecked_log</code> instance by value, which is then manifested as a temporary in the <code>LOG &lt;&lt; ...</code> expression in <code>test</code> and on which then the other <code>&lt;&lt;</code> are called. <code>printImpl</code> cannot reach this temporary instance if you don&#39;t hand it a reference to it explicitly."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576091110, "post_id": 59291693, "comment_id": 104789597, "body": "@JesperJuhl I&#39;ve written <code>const_cast</code> when I have a pair of functions, one of which takes a const pointer and returns another const pointer which is related, and another which takes a non-const pointer and returns a similar non-const pointer.  The non-const calls the const function, and const-casts the result.  No kittens harmed."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1576091188, "post_id": 59291693, "comment_id": 104789632, "body": "@walnut Oh, now I get it. Thank you very much for the effort and time you spent on this question."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576091253, "post_id": 59291693, "comment_id": 104789662, "body": "@MartinBonner Well, as long as none of the objects you cast const off were originally declared as const (can be hard to know) and they are not modified, then there&#39;s no UB and the kittens live. I&#39;d still call it questionable practice though."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1576091294, "post_id": 59291693, "comment_id": 104789686, "body": "@Ayxan Note however that since you are calling <code>printImpl</code> first, before constructing the return value, there will actually be two branches (see the assembly). It is not entirely optimal. To make it optimal you should first make a copy of <code>ulog</code>, that you then return later or make <code>ulog</code> entirely local to the <code>operator&lt;&lt;</code> overload of <code>Log</code>."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 2, "last_activity_date": 1576090019, "last_edit_date": 1576090019, "creation_date": 1576087657, "answer_id": 59291693, "question_id": 59291618, "link": "https://stackoverflow.com/questions/59291618/is-this-a-missed-optimization-opportunity-or-not/59291693#59291693", "title": "Is this a missed optimization opportunity or not", "body": "<p><code>LOG</code> is a global variable with external linkage. Therefore <code>printImpl</code>'s definition in another translation unit can reach it and can potentially modify <code>LOG.ulog.active</code> between calls.</p>\n\n<p>Make <code>LOG</code> a local variable in <code>test</code> and the repeated checks will be consolidated into one at the entry of <code>test</code> or leave <code>LOG</code> where it is and make it <code>static</code>, so a different compilation unit containing <code>printImpl</code>'s definition cannot reach this translation unit's instance.</p>\n\n<p>As mentioned in a comment below, alternatively let <code>operator&lt;&lt;</code> return by copy, so that the instance it returns (now a temporary) is unreachable for <code>printImpl</code>.</p>\n\n<hr>\n\n<p>Note that the accessibility (<code>private</code>, etc.) of <code>ulog</code> and <code>ulog.active</code> does not matter. As soon as <code>printImpl</code> is able to obtain a pointer or reference to the instance of relevance, <code>private</code> does not protect from modification no matter what. Here are few examples of how that is possible (non-exhaustive):</p>\n\n<ol>\n<li>Calling <code>operator&lt;&lt;</code> on <code>LOG</code> which may now change <code>LOG.ulog.active</code> based on an intervening modification of <code>printLog</code> or by <code>const_cast</code>ing the result</li>\n<li>Calling the defaulted copy/move assignment operators</li>\n<li>(since this is a standard-layout class) <code>reinterpret_cast</code> <code>LOG</code> to a reference to its <code>ulog</code> member</li>\n<li>(since the classes are trivially copyable) <code>memcpy</code> a different state into <code>LOG</code></li>\n<li>placement-new a new instance of <code>Log</code> into <code>LOG</code>, which will make previous references reference the new object automatically, because <code>Log</code> satisfies the conditions for that</li>\n<li>etc.</li>\n</ol>\n"}], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 59291693, "answer_count": 1, "score": 3, "last_activity_date": 1576090019, "creation_date": 1576087300, "question_id": 59291618, "link": "https://stackoverflow.com/questions/59291618/is-this-a-missed-optimization-opportunity-or-not", "title": "Is this a missed optimization opportunity or not", "body": "<p>I posted <a href=\"https://stackoverflow.com/a/59290242/10147399\">this</a> answer. Code:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;utility&gt;\nvoid printImpl(...);\n\nstd::atomic&lt;bool&gt; printLog = false;\n\nclass Log {\n public:\n  template &lt;typename T&gt;\n  const auto&amp; operator&lt;&lt;(T&amp;&amp; t) {\n    if (printLog) {\n      ulog.active = true;\n      return ulog &lt;&lt; std::forward&lt;T&gt;(t);\n    } else {\n      ulog.active = false;\n      return ulog;\n    }\n  }\n\n private:\n  struct unchecked_log {\n    template &lt;typename T&gt;\n    const auto&amp; operator&lt;&lt;(T&amp;&amp; t) const {\n      if (active) {\n        printImpl(std::forward&lt;T&gt;(t));\n      }\n      return *this;\n    }\n    bool active{false};\n  };\n  unchecked_log ulog{};\n};\n\n// Instead of the macro. Doesn't break backward compatibility\nLog LOG;\n\nvoid test(bool) { LOG &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3 &lt;&lt; 4 &lt;&lt; 5 &lt;&lt; 6 &lt;&lt; 7 &lt;&lt; 8 &lt;&lt; 9 &lt;&lt; 10; }\n</code></pre>\n\n<p>In essence, the code either ignores or logs all the data. The idea was to record the <code>atomic&lt;bool&gt;</code> in a regular <code>bool</code> which can be optimized out more easily. I thought most compilers could easily optimize out the <code>if (active)</code> part since there is no way it can change between calls. <a href=\"https://godbolt.org/z/4kKH5N\" rel=\"nofollow noreferrer\">Turns out</a> though, most compilers do inline the function call to <code>unchecked_log::operator&lt;&lt;</code> but do not optimize out the branching. Is there something preventing this optimization? Would it be illegal. </p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1576087369, "post_id": 59291552, "comment_id": 104787977, "body": "I&#39;d assume (in modern code) that any raw pointer is a &quot;observing&quot; pointer and doesn&#39;t participate in ownership. So it shouldn&#39;t be necessary to &quot;consume&quot; it. If it&#39;s an owning pointer it should <i>already</i> be a <code>unique_ptr</code> or a <code>shared_ptr</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1576087463, "post_id": 59291552, "comment_id": 104788018, "body": "In c++, the main function is spelled <code>main</code> and it must always have the return type <code>int</code>."}, {"owner": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 1, "creation_date": 1576087566, "post_id": 59291552, "comment_id": 104788067, "body": "Of course, I&#39;m talking about using a function which was created that way (bool GetTheObject(CustomType** object)), an API function let&#39;s say, where I have no control over it and I need to consume the result of that function in a best possible way. Regarding the &quot;main&quot; function, please, it was just an example to depict the actual question, you can call it &quot;global&quot; or whatever."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1576087627, "post_id": 59291552, "comment_id": 104788091, "body": "@Alex That&#39;s the problem with raw pointers. You can&#39;t assume if it&#39;s owning based on the type alone. If you trust the code base, you can rely on conventions. Otherwise, you need to look up the function&#39;s documentation or source dive to see what it is. If you <i>know</i> its an owning pointer, then the best thing may be to immediatly give that ownership to a <code>unique_ptr</code> like you do here. But since it looks like you can modify <code>GetTheObject</code>, I would bundle it with the return value."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1576091417, "post_id": 59291552, "comment_id": 104789743, "body": "Is your wording in respect of <i>&quot;consume&quot;</i> accidential or intentional? Because if it&#39;s intentional, then there is only one correct solution, and that&#39;s exactly how you do it (seeing how you explained that you do not control <code>GetTheObject</code>). Consume means ownership (and responsibilty) is transferred, so <code>unique_ptr</code> is the right thing. <code>shared_ptr</code> would be <i>&quot;I don&#39;t quite know who owns it&quot;</i>, and a raw pointer is commonly interpreted similar to, or the same as <code>std::experimental::observer_ptr</code>, i.e. non-owning."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 0, "creation_date": 1576087843, "post_id": 59291689, "comment_id": 104788194, "body": "I totally understand that. You are changing the initial conditions of the question. I have no control over the GetTheObject function signature. That is the problem. I want to find a best way to consume that pointer in those particular conditions."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 0, "creation_date": 1576088929, "post_id": 59291689, "comment_id": 104788685, "body": "@Alex There is no general &quot;best way&quot;. When dealing with legacy code and potentially owning raw pointers, you just have to read the code to see what&#39;s going on and adapt accordingly."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 2, "last_activity_date": 1576087647, "creation_date": 1576087647, "answer_id": 59291689, "question_id": 59291552, "link": "https://stackoverflow.com/questions/59291552/what-is-the-best-practice-to-consume-a-pointer-returned-as-an-argument/59291689#59291689", "title": "What is the best practice to consume a pointer returned as an argument", "body": "<p>I would think that returning a <code>std::unique_ptr</code> would be safer than returning a raw pointer, since returning a raw pointer risks the calling code accidentally leaking the object.  I'd recommend doing it this way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass CustomType\n{\n   // ...\n};\n\nstd::unique_ptr&lt;CustomType&gt; GetTheObject()\n{\n   if ((rand()%2) != 0) return std::make_unique&lt;CustomType&gt;();\n\n   return std::unique_ptr&lt;CustomType&gt;();  // nothing to return, sorry\n}\n\nint main(int argc, char ** argv)\n{\n   if (std::unique_ptr&lt;CustomType&gt; p = GetTheObject())\n   {\n      std::cout &lt;&lt; \"Got the object!\" &lt;&lt; std::endl;\n   }\n   return 0;\n}\n</code></pre>\n\n<p>If you have to live with an existing function that you don't like the shape of and can't change, you can hide the ugliness inside a wrapper function and then call the wrapper function instead:</p>\n\n<pre><code>std::unique_ptr&lt;CustomType&gt; PrettyGetTheObject()\n{\n   CustomObject * obj;\n   if (GetTheObject(&amp;obj)) return std::unique_ptr&lt;CustomObject&gt;(obj);\n\n   return std::unique_ptr&lt;CustomType&gt;();  // nothing to return, sorry\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 0, "creation_date": 1576088284, "post_id": 59291725, "comment_id": 104788369, "body": "You think the best way is to create a wrapper for each function that returns a pointer as an argument? In this case I could technically create a method signature like std::unique_ptr&lt;CustomType&gt; GetTheObjectWrap() suggested in another answer but what if there are 10 or 30 functions, wrapping each of them seems like too much. I was thinking about creating a single adapter or another implementation of unique_ptr or something that I could do once and use it everywhere. Something that is not verbose and easy to use."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 0, "creation_date": 1576109774, "post_id": 59291725, "comment_id": 104796283, "body": "That&#39;s what I meant with the general wrapper .. e.g. for a usage similar to <code>wrap(GetOriginal, &amp;the_unique_ptr)</code> in the end"}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 0, "last_activity_date": 1576109999, "last_edit_date": 1576109999, "creation_date": 1576087805, "answer_id": 59291725, "question_id": 59291552, "link": "https://stackoverflow.com/questions/59291552/what-is-the-best-practice-to-consume-a-pointer-returned-as-an-argument/59291725#59291725", "title": "What is the best practice to consume a pointer returned as an argument", "body": "<p>A possible approach is to use a wrapper function. Example:</p>\n\n<pre><code>bool GetOriginal(char **pptr);\n\nbool GetWrapped(std::unique_ptr&lt;char&gt; * puptr) {\n  bool result;\n  if (puptr != nullptr) {\n    char * cptr;\n    result = GetOriginal(&amp;cptr);\n    *puptr = std::make_unique(cptr);\n  } else {\n    result = GetOriginal(nullptr);\n  }\n  return result;\n}\n</code></pre>\n\n<p>This assumes the commonly used pattern of passing null to avoid getting a pointer to manage (e.g. if you're only interested in the return value).</p>\n\n<p>If passing null to the original function is not part of its api, then you could of course use a reference to a <code>std::unique_ptr</code> instead of a raw pointer.</p>\n\n<p>If you have many such functions you could also write a general wrapper function for that, of course:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Fn, typename T&gt;\nbool wrap(Fn fn, std::unique_ptr&lt;T&gt; * puptr) {\n  bool result;\n  if (puptr != nullptr) {\n    T * cptr = nullptr;\n    result = fn(&amp;cptr);\n    *puptr = std::make_unique(cptr);\n  } else {\n    result = fn(nullptr);\n  }\n  return result;\n}\n\n// usage: wrap(GetOriginal, &amp;some_unique_ptr)\n</code></pre>\n\n<p>If the original function takes more arguments, then use <code>std::bind</code> or a lambda.</p>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "edited": false, "score": 0, "creation_date": 1576092687, "post_id": 59292000, "comment_id": 104790279, "body": "Very interesting. Thank you. I&#39;ll probably try to refactor it to call it like call&lt;MakeTheObject&gt; but overall it looks almost what I wanted."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1576089074, "creation_date": 1576089074, "answer_id": 59292000, "question_id": 59291552, "link": "https://stackoverflow.com/questions/59291552/what-is-the-best-practice-to-consume-a-pointer-returned-as-an-argument/59292000#59292000", "title": "What is the best practice to consume a pointer returned as an argument", "body": "<p>I might be tempted to write code that automates the conversion to/from the unique ptr.  We generate a new function from our existing function \"automatically\" that has the same signature, but <code>T*</code> return values are <code>unique_ptr&lt;T&gt;</code> and <code>T**</code> arguments are <code>unique_ptr&lt;T&gt;*</code> arguments.</p>\n\n<p>Then we inject the conversion boilerplate using RAII and template metaprogramming.</p>\n\n<p>A <code>ptr_filler</code> is a RAII type that converts a <code>unique_ptr&lt;T&gt;*</code> into a <code>T**</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct ptr_filler {\n  std::unique_ptr&lt;T&gt;* output = nullptr;\n  T* temporary = nullptr;\n  ptr_filler( std::unique_ptr&lt;T&gt;* bind ):output(bind) {}\n  operator T**()&amp;&amp;{return &amp;temporary;}\n  ~ptr_filler() {\n    if (temporary)\n      *output = std::unique_ptr&lt;T&gt;(temporary);\n  }\n};\n</code></pre>\n\n<p><code>ret_converter_t</code> does a type conversion from the C-style API to a C++ unique-ptr API:</p>\n\n<pre><code>template&lt;class T&gt; struct ret_converter { using type=T; };\ntemplate&lt;class T&gt; using ret_converter_t = typename ret_converter&lt;T&gt;::type;\ntemplate&lt;class T&gt; struct ret_converter&lt;T*&gt; { using type=std::unique_ptr&lt;T&gt;; };\n</code></pre>\n\n<p><code>get_converter_t</code> converts argument types from the C-style API, to one that fills unique ptrs via a <code>ptr_filler</code>:</p>\n\n<pre><code>template&lt;class T&gt; struct get_converter { using type=T; };\ntemplate&lt;class T&gt; using get_converter_t = typename get_converter&lt;T&gt;::type;\ntemplate&lt;class T&gt; struct get_converter&lt;T**&gt; { using type=ptr_filler&lt;T&gt;; };\n</code></pre>\n\n<p>Finally, <code>call</code> deduces its arguments from the function pointer you pass it, then converts the arguments and retval to use unique ptr memory management, and calls the function <code>f</code> for you:</p>\n\n<pre><code>template&lt;class R, class...Args&gt;\nret_converter_t&lt;R&gt; call( R(* f)(Args...), get_converter_t&lt;Args&gt;... args ) {\n  return static_cast&lt;ret_converter_t&lt;R&gt;&gt;( f( std::forward&lt;decltype(args)&gt;(args)... ) );\n}\n</code></pre>\n\n<p>now we can:</p>\n\n<pre><code>struct CustomType {\n  int x;\n};\nCustomType* GetTheObject(int x) { return new CustomType{x}; }\nbool MakeTheObject( CustomType** pp, int a, int b ) { *pp = new CustomType{a+b}; return a&gt;b; }\n</code></pre>\n\n<p>we can do:</p>\n\n<pre><code>int main() {\n  std::unique_ptr&lt;CustomType&gt; ptr;\n  std::cout &lt;&lt; call( MakeTheObject, &amp;ptr, 2, 1 ) &lt;&lt; \" = 1\\n\";\n  std::cout &lt;&lt; ptr-&gt;x &lt;&lt; \" = 3\\n\";\n  ptr = call( GetTheObject, 7 );\n  std::cout &lt;&lt; ptr-&gt;x &lt;&lt; \" = 7\\n\";\n}\n</code></pre>\n\n<p>You can get fancier with <code>call&lt;MakeTheObject&gt;</code> syntax, but it takes work.  This assumes that the API you are wrapping is an C-ish API but returns <code>new</code>'d objects.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/97cbf11919f02539\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}], "owner": {"reputation": 485, "user_id": 1170447, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ab7770d11c40e4e78ac2edc30d6ce111?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1170447/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 59292000, "answer_count": 3, "score": 1, "last_activity_date": 1576109999, "creation_date": 1576087058, "question_id": 59291552, "link": "https://stackoverflow.com/questions/59291552/what-is-the-best-practice-to-consume-a-pointer-returned-as-an-argument", "title": "What is the best practice to consume a pointer returned as an argument", "body": "<p>Normally when a pointer to an object is created and returned from a function you consume it using unique_ptr to ensure it is deleted at the end of the scope.</p>\n\n<pre><code>CustomType* GetTheObject(); // Let's say this the function signature and it returns a new object\n\nvoid Main() {\n   auto object = make_unique(GetTheObject());\n   object-&gt;DoSomething();\n   // Then the object is deleted automatically\n}\n</code></pre>\n\n<p>What if the function signature is like this</p>\n\n<pre><code>bool GetTheObject(CustomType** object);\n</code></pre>\n\n<p>I can imagine a rather verbose way to consume it</p>\n\n<pre><code>void Main() {\n   // Declare a pointer which we never need\n   CustomType* object_ptr;\n   if(GetTheObject(&amp;object_ptr)) {\n      // Then create a unique_ptr out of it\n      auto object = make_unique(object_ptr);\n      object-&gt;DoSomething();\n      // Then the object is deleted automatically\n   }\n}\n</code></pre>\n\n<p>Is there a better recommended way how to consume an object in this case. I can think about another let's say unique_ptr2 class which implements &amp; operator and then use it like</p>\n\n<pre><code>unique_ptr2 object;\nif(GetTheObject(&amp;object)) {\n   // use it\n}\n</code></pre>\n\n<p>Is there a ready to be used implementation of unique_ptr2 which would allow doing that? It still feel to be not ideal. Is there a better way?</p>\n"}, {"tags": ["c++", "hashmap", "pseudocode"], "comments": [{"owner": {"reputation": 700, "user_id": 5351370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DIXlPTT7PX0/AAAAAAAAAAI/AAAAAAAAAEg/YKyBJlcyYv4/photo.jpg?sz=128", "display_name": "Biesi Grr", "link": "https://stackoverflow.com/users/5351370/biesi-grr"}, "edited": false, "score": 1, "creation_date": 1576086674, "post_id": 59291431, "comment_id": 104787663, "body": "What errors are you getting?"}, {"owner": {"reputation": 15, "user_id": 12520032, "user_type": "registered", "profile_image": "https://graph.facebook.com/2736352673092417/picture?type=large", "display_name": "Omar Baz", "link": "https://stackoverflow.com/users/12520032/omar-baz"}, "reply_to_user": {"reputation": 700, "user_id": 5351370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DIXlPTT7PX0/AAAAAAAAAAI/AAAAAAAAAEg/YKyBJlcyYv4/photo.jpg?sz=128", "display_name": "Biesi Grr", "link": "https://stackoverflow.com/users/5351370/biesi-grr"}, "edited": false, "score": 0, "creation_date": 1576086762, "post_id": 59291431, "comment_id": 104787709, "body": "In the &quot;int HASH&quot; I&#39;m getting default argument not at end of parameter list."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1576086777, "post_id": 59291431, "comment_id": 104787717, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your attempt."}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 4, "creation_date": 1576086827, "post_id": 59291431, "comment_id": 104787742, "body": "@OmarBaz Seems like the error you&#39;re getting is pretty descriptive of what is wrong."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1576087092, "post_id": 59291431, "comment_id": 104787866, "body": "<code>h</code> must be the last parameter. Also, <code>sizeof(ex_array)</code> is not going to work well."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576087210, "post_id": 59291431, "comment_id": 104787920, "body": "<code>struct entry ex_array[]</code> in <code>c++</code> you don&#39;t need the <code>struct</code>. This is one difference between <code>c</code> and <code>c++</code>"}, {"owner": {"reputation": 15, "user_id": 12520032, "user_type": "registered", "profile_image": "https://graph.facebook.com/2736352673092417/picture?type=large", "display_name": "Omar Baz", "link": "https://stackoverflow.com/users/12520032/omar-baz"}, "edited": false, "score": 0, "creation_date": 1576087278, "post_id": 59291431, "comment_id": 104787944, "body": "Thank you, that solved the HASH problem but now I&#39;m getting an error with the mod operator: no operator &quot;%&quot; matches these operands.  Operand types are entry % int."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576087342, "post_id": 59291431, "comment_id": 104787966, "body": "Pass the size of the array as a parameter. You can&#39;t do <code>sizeof(ex_array) &#47; sizeof(ex_array[0])</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1576087386, "post_id": 59291431, "comment_id": 104787988, "body": "It does not make sense to use the <code>%</code> operator with a struct."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1576087875, "post_id": 59291431, "comment_id": 104788208, "body": "Perhaps the <code>m</code> in <code>h = (h * 128) + ex_array[i] % m;</code> is really the <code>M</code> from <code>#define M 661</code>? Otherwise the former is undefined and the later is unused."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576088729, "post_id": 59291431, "comment_id": 104788579, "body": "The reason <code>sizeof(ex_array) &#47; sizeof(ex_array[0])</code> does not work: <code>ex_array</code> <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">decayed to a pointer</a>, so <code>sizeof(ex_array)</code> will always be the size of a pointer, not the size of the array used as the argument."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1576089660, "post_id": 59291431, "comment_id": 104788993, "body": "Since it&#39;s tagged C++, here is the obligatory recommendation to use vectors: Use <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> instead of C-style arrays to make your life easier."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1576089703, "post_id": 59291431, "comment_id": 104789005, "body": "or <code>std::array</code> if the array size is fixed at compile time."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12520032, "user_type": "registered", "profile_image": "https://graph.facebook.com/2736352673092417/picture?type=large", "display_name": "Omar Baz", "link": "https://stackoverflow.com/users/12520032/omar-baz"}, "edited": false, "score": 0, "creation_date": 1576100386, "post_id": 59292877, "comment_id": 104793562, "body": "Thank you so much foe your help, this is exactly what I wanted."}], "tags": [], "owner": {"reputation": 26, "user_id": 7278656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d55fc57e0f3688d3757cdba4ba6b3195?s=128&d=identicon&r=PG&f=1", "display_name": "Tanner Lyman", "link": "https://stackoverflow.com/users/7278656/tanner-lyman"}, "is_accepted": true, "score": 0, "last_activity_date": 1576093022, "creation_date": 1576093022, "answer_id": 59292877, "question_id": 59291431, "link": "https://stackoverflow.com/questions/59291431/how-do-i-implement-this-pseudocode/59292877#59292877", "title": "How do I implement this Pseudocode?", "body": "<p>This would be a way you could implement that</p>\n\n<pre><code>#include &lt;string&gt;\n#define M 661\n\nint Hash(std::string s, int h = 0){\n   for(int i = 0 ; i &lt; s.length(); i++)\n      h = (h * 128 + s [i]) % M;\n   return h;\n}\n</code></pre>\n\n<p>I have one note though. In the pseudo code you provided i'm not so sure that the \"parameters\" provided are talking about actual function parameters because it seems a little strange to pass in 'i' since you immediately set it to to 0 (for i = 0 ...). But if you do need to pass 'i' in then you can just add it to the beginning of the argument list and remove the 'int' from inside the for loop.</p>\n\n<p>Then you can use this function to get the hash value of the German word. </p>\n\n<p>Here's an example of how to use it</p>\n\n<pre><code>string arr[M]; //assuming M is size of array\nstd::string germanWord{\"german\"}; //some German word\nstd::string englishWord{\"english\"} //same word but in English\narr[Hash(germanWord)] = englishWord //adding new English word to the array\nstring s = arr[Hash(germanWord)] // accessing that word from the array\n</code></pre>\n\n<p>there are other things you might have to think about if you are going to make an actual hash map (Like how you deal with collisions) but this is enough if you just want to implement that pseudo code. </p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 15, "user_id": 12520032, "user_type": "registered", "profile_image": "https://graph.facebook.com/2736352673092417/picture?type=large", "display_name": "Omar Baz", "link": "https://stackoverflow.com/users/12520032/omar-baz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 59292877, "answer_count": 1, "score": 1, "last_activity_date": 1576093022, "creation_date": 1576086558, "last_edit_date": 1576088342, "question_id": 59291431, "link": "https://stackoverflow.com/questions/59291431/how-do-i-implement-this-pseudocode", "title": "How do I implement this Pseudocode?", "body": "<p>I am trying to write a function to hash strings into integers so I can use strings as keys in my hash map. I'm required to use the pseudocode written below, but I still can't get it to work without errors.\nThe program is to enter a German word (as key) and return it's English translation (as value).</p>\n\n<p>The pseudocode:</p>\n\n<pre><code>Parameters : natural numbers i, h = 0; Field s\n for i = 0 to i &lt;length_of (s)\n    h = (h * 128 + s [i]) mod M;\nResult : h.\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#define M 661\nusing namespace std;\n\nstruct entry {\n    string key_de, val_en;\n};\n\nint HASH(int i, int h = 0, struct entry ex_array[])\n{\n    for (i = 0; i &lt; sizeof(ex_array) / sizeof(ex_array[0]); i++)\n    {\n        h = (h * 128) + ex_array[i] % m;\n    }\n    return h;\n}\n\nint main()\n{\n\n}\n</code></pre>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576086725, "post_id": 59291395, "comment_id": 104787682, "body": "Make sure the source files are part of your Visual Studio project."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 1, "creation_date": 1576088008, "post_id": 59291395, "comment_id": 104788257, "body": "This isn&#39;t really solvable without seeing your project. I expect one of the C++ source files was not compiled for some reason (missing, &quot;Item Type&quot; got changed somehow, etc.)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576088286, "post_id": 59291395, "comment_id": 104788372, "body": "Intentionally put a syntax error in the file that implements your class and see if it is compiled in your output tab of Visual Studio. You probably need to right click on &quot;Solution Explorer&quot; and click Add-&gt;&quot;Existing Item&quot; and select your cpp file that implements your class."}, {"owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576089080, "post_id": 59291395, "comment_id": 104788757, "body": "@drescherjm it does show the syntax errors"}, {"owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576089796, "post_id": 59291395, "comment_id": 104789040, "body": "@drescherjm added all files to the post"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576090428, "post_id": 59291395, "comment_id": 104789322, "body": "Templates need to be implemented in the header. <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">https://stackoverflow.com/questions/495021/why-can-templates&zwnj;&#8203;-only-be-implemented&zwnj;&#8203;-in-the-header-file</a>"}, {"owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1576090955, "post_id": 59291395, "comment_id": 104789518, "body": "@drescherjm man i almost went crazy :) reading it now. thanks"}], "owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1576089856, "answer_count": 0, "score": 0, "last_activity_date": 1576089775, "creation_date": 1576086458, "last_edit_date": 1576089775, "question_id": 59291395, "link": "https://stackoverflow.com/questions/59291395/visual-studio-not-linking-source-files", "closed_reason": "Duplicate", "title": "Visual studio not linking source files", "body": "<p>So I have a simple project with one main.cpp and BaseWindow class which is split into header and source file. <a href=\"https://docs.microsoft.com/en-us/windows/win32/learnwin32/managing-application-state-\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/learnwin32/managing-application-state-</a></p>\n\n<p>this is the source files. Basically I have split the class my self since it was defined and implemented in main.cpp compiling as it was gave no errors and code work. After refactoring which I described above I get LINK2019 ERROR which is the unresolved external symbol. I went ahead and searched what could cause that, and it turns out that visuals studio is not linking BaseWindow.cpp</p>\n\n<p>The ERROR</p>\n\n<p>Severity    Code    Description Project File    Line    Suppression State\nError   LNK2019 unresolved external symbol \"public: int <strong>cdecl BaseWindow::Create(wchar_t const *,unsigned long,unsigned long,int,int,int,int,struct HWND</strong> *,struct HMENU__ *)\" (?Create@?$BaseWindow@VMainWindow@@@@QEAAHPEB_WKKHHHHPEAUHWND__@@PEAUHMENU__@@@Z) referenced in function wWinMain   win32_API_Learning  E:\\Learning GameDev\\Projects\\win32_API_Learning\\win32_API_Learning\\main.obj 1   </p>\n\n<p>FILES:</p>\n\n<p>BaseWindow.h</p>\n\n<pre><code>#pragma once\n\n#include &lt;windows.h&gt;\n\ntemplate &lt;class DERIVED_TYPE&gt;\nclass BaseWindow\n{\npublic:\n    static LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);\n\n    BaseWindow() : m_hwnd(NULL) { }\n\n    BOOL Create(\n        PCWSTR lpWindowName,\n        DWORD dwStyle,\n        DWORD dwExStyle = 0,\n        int x = CW_USEDEFAULT,\n        int y = CW_USEDEFAULT,\n        int nWidth = CW_USEDEFAULT,\n        int nHeight = CW_USEDEFAULT,\n        HWND hWndParent = 0,\n        HMENU hMenu = 0\n    );\n\n    HWND Window() const { return m_hwnd; }\n\nprotected:\n\n    virtual PCWSTR  ClassName() const = 0;\n    virtual LRESULT HandleMessage(UINT uMsg, WPARAM wParam, LPARAM lParam) = 0;\n\n    HWND m_hwnd;\n};\n</code></pre>\n\n<p>BaseWindow.cpp</p>\n\n<pre><code>#include \"BaseWindow.h\"\n#include &lt;windows.h&gt;\n\n\ntemplate &lt;class DERIVED_TYPE&gt;\nLRESULT CALLBACK BaseWindow&lt;DERIVED_TYPE&gt;::WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    DERIVED_TYPE* pThis = NULL;\n\n    if (uMsg == WM_NCCREATE)\n    {\n        CREATESTRUCT* pCreate = (CREATESTRUCT*)lParam;\n        pThis = (DERIVED_TYPE*)pCreate-&gt;lpCreateParams;\n        SetWindowLongPtr(hwnd, GWLP_USERDATA, (LONG_PTR)pThis);\n\n        pThis-&gt;m_hwnd = hwnd;\n    }\n    else\n    {\n        pThis = (DERIVED_TYPE*)GetWindowLongPtr(hwnd, GWLP_USERDATA);\n    }\n    if (pThis)\n    {\n        return pThis-&gt;HandleMessage(uMsg, wParam, lParam);\n    }\n    else\n    {\n        return DefWindowProc(hwnd, uMsg, wParam, lParam);\n    }\n}\n\n\n\ntemplate &lt;class DERIVED_TYPE&gt;\nBOOL BaseWindow&lt;DERIVED_TYPE&gt;::Create(PCWSTR lpWindowName, DWORD dwStyle, DWORD dwExStyle /*= 0*/, int x /*= CW_USEDEFAULT*/, int y /*= CW_USEDEFAULT*/, int nWidth /*= CW_USEDEFAULT*/, int nHeight /*= CW_USEDEFAULT*/, HWND hWndParent /*= 0*/, HMENU hMenu /*= 0 */)\n{\n    WNDCLASS wc = { 0 };\n\n    wc.lpfnWndProc = DERIVED_TYPE::WindowProc;\n    wc.hInstance = GetModuleHandle(NULL);\n    wc.lpszClassName = ClassName();\n\n    RegisterClass(&amp;wc);\n\n    m_hwnd = CreateWindowEx(\n        dwExStyle, ClassName(), lpWindowName, dwStyle, x, y,\n        nWidth, nHeight, hWndParent, hMenu, GetModuleHandle(NULL), this\n    );\n\n    return (m_hwnd ? TRUE : FALSE);\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif \n\n#include &lt;windows.h&gt;\n#include \"BaseWindow.h\"\n\n\n\nclass MainWindow : public BaseWindow&lt;MainWindow&gt;\n{\npublic:\n    PCWSTR  ClassName() const { return L\"Sample Window Class\"; }\n    LRESULT HandleMessage(UINT uMsg, WPARAM wParam, LPARAM lParam);\n};\n\nLRESULT MainWindow::HandleMessage(UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg)\n    {\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        return 0;\n\n    case WM_PAINT:\n    {\n        PAINTSTRUCT ps;\n        HDC hdc = BeginPaint(m_hwnd, &amp;ps);\n        FillRect(hdc, &amp;ps.rcPaint, (HBRUSH)(COLOR_WINDOW + 1));\n        EndPaint(m_hwnd, &amp;ps);\n    }\n    return 0;\n\n    default:\n        return DefWindowProc(m_hwnd, uMsg, wParam, lParam);\n    }\n    return TRUE;\n}\n\nint WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow)\n{\n    MainWindow win;\n\n    if (!win.Create(L\"Learn to Program Windows\", WS_OVERLAPPEDWINDOW))\n    {\n        return 0;\n    }\n\n    ShowWindow(win.Window(), nCmdShow);\n\n    // Run the message loop.\n\n    MSG msg = { };\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "g++"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1576087172, "post_id": 59291389, "comment_id": 104787901, "body": "I have a feeling it&#39;s a compiler bug. Clang accepts it."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1576087275, "post_id": 59291389, "comment_id": 104787941, "body": "Just a note, it works if you do a specialized <code>Foo&lt;char&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 764, "user_id": 3401785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FE5f.jpg?s=128&g=1", "display_name": "jhoffman0x", "link": "https://stackoverflow.com/users/3401785/jhoffman0x"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098090, "creation_date": 1576098090, "answer_id": 59294014, "question_id": 59291389, "link": "https://stackoverflow.com/questions/59291389/friend-declaration-of-literal-operator-in-class-template/59294014#59294014", "title": "Friend declaration of literal operator in class template", "body": "<p>This is a bug and it was reported 5 years ago.</p>\n\n<blockquote>\n  <p>Bug 61648 - g++ accepts literal operator friends for non-template\n  classes but not for <em>template</em> classes</p>\n  \n  <p><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61648\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61648</a></p>\n</blockquote>\n"}], "owner": {"reputation": 764, "user_id": 3401785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FE5f.jpg?s=128&g=1", "display_name": "jhoffman0x", "link": "https://stackoverflow.com/users/3401785/jhoffman0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576098090, "creation_date": 1576086434, "question_id": 59291389, "link": "https://stackoverflow.com/questions/59291389/friend-declaration-of-literal-operator-in-class-template", "title": "Friend declaration of literal operator in class template", "body": "<p>I'm trying to make a class that can only be constructed through a literal operator, but it fails to build on gcc.</p>\n\n<p>Here's a stripped down example:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\ntemplate&lt;typename C&gt;\nclass Foo;\nFoo&lt;char&gt; operator \"\" _foo(const char*, std::size_t);\n\ntemplate&lt;typename C&gt;\nclass Foo\n{\n    Foo() = default;\n    friend Foo&lt;char&gt; operator \"\" _foo(const char*, std::size_t);\n};\n\nFoo&lt;char&gt; operator \"\" _foo(const char* str, std::size_t size)\n{\n    return Foo&lt;char&gt;();\n}\n\nint main()\n{\n    auto foo = \"Foo\"_foo;\n    return 0;\n}\n</code></pre>\n\n<p>It fails with this message: <a href=\"https://godbolt.org/z/kfcNMR\" rel=\"nofollow noreferrer\">https://godbolt.org/z/kfcNMR</a></p>\n\n<pre><code>&lt;source&gt;:11:22: error: 'Foo&lt;char&gt; operator\"\"_foo(const char*, std::size_t)' has invalid argument list\n</code></pre>\n\n<p>It works on clang and msvc, and without the template it works on gcc: <a href=\"https://godbolt.org/z/exfm5Q\" rel=\"nofollow noreferrer\">https://godbolt.org/z/exfm5Q</a></p>\n\n<p>Is this a compiler bug or am I making a mistake?</p>\n"}, {"tags": ["c++", "windows", "curl", "cmake", "vcpkg"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "is_accepted": true, "score": 1, "last_activity_date": 1576232494, "creation_date": 1576232494, "answer_id": 59320513, "question_id": 59291118, "link": "https://stackoverflow.com/questions/59291118/a-suspected-bug-in-vcpkg-curl-on-windows/59320513#59320513", "title": "A suspected bug in vcpkg curl on windows", "body": "<p>Solved here <a href=\"https://github.com/microsoft/vcpkg/issues/9290\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vcpkg/issues/9290</a></p>\n\n<p>Reason: Compiling all required packages with :x64-windows argument passed to vcpkg AND calling cmake with -DVCPKG_TARGET_TRIPLET=x64-windows compiles successfully!</p>\n\n<p>Hope this helps someone!</p>\n"}, {"tags": [], "owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1605799430, "creation_date": 1605799430, "answer_id": 64914719, "question_id": 59291118, "link": "https://stackoverflow.com/questions/59291118/a-suspected-bug-in-vcpkg-curl-on-windows/64914719#64914719", "title": "A suspected bug in vcpkg curl on windows", "body": "<p>For me it turned out that I was accidently compiling for x86 (which is default sometimes in CLion). Changing to x64 fixed the issue.</p>\n"}], "owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 59320513, "answer_count": 2, "score": 0, "last_activity_date": 1605799430, "creation_date": 1576085259, "question_id": 59291118, "link": "https://stackoverflow.com/questions/59291118/a-suspected-bug-in-vcpkg-curl-on-windows", "title": "A suspected bug in vcpkg curl on windows", "body": "<p>Simply doing: \n<code>vcpkg.exe install curl:x86-windows</code></p>\n\n<p>And then building with cmake:\n<code>cmake .. -DCMAKE_TOOLCHAIN_FILE=C:\\vcpkg\\scripts\\buildsystems\\vcpkg.cmake</code></p>\n\n<p>Would output:</p>\n\n<pre><code>C:\\Users\\altffour\\Desktop\\Projects\\ContractNotifier\\build&gt;cmake .. -DCMAKE_TOOLCHAIN_FILE=C:\\vcpkg\\scripts\\buildsystems\\vcpkg.cmake\n-- Selecting Windows SDK version 10.0.18362.0 to target Windows 10.0.17763.\nCMake Error at C:/vcpkg/installed/x86-windows/share/curl/vcpkg-cmake-wrapper.cmake:5 (_find_package):\n  Could not find a configuration file for package \"CURL\" that is compatible\n  with requested version \"\".\n\n  The following configuration files were considered but not accepted:\n\n    C:/vcpkg/installed/x86-windows/share/curl/CURLConfig.cmake, version: 7.66.0-DEV (32bit)\n</code></pre>\n\n<p>CMakeLists:</p>\n\n<pre><code># curl\nfind_package(CURL CONFIG REQUIRED)\ninclude_directories(${CURL_INCLUDE_DIR})\n\nfile(GLOB_RECURSE hdrs \"src/*.h\")\nfile(GLOB_RECURSE srcs \"src/*.cpp\")\nfile(GLOB_RECURSE ui \"src/*.ui\")\ninclude_directories(\".\" \"src/\")\n\nadd_executable(contractNotifier ${ui} ${hdrs} ${srcs})\ntarget_link_libraries(contractNotifier Qt5::Core Qt5::Widgets Boost::serialization ${CMAKE_THREAD_LIBS_INIT} CURL::libcurl)\n</code></pre>\n\n<p>Have I found a bug?</p>\n"}, {"tags": ["c++", "graph"], "comments": [{"owner": {"reputation": 2034, "user_id": 2486496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpd3r.jpg?s=128&g=1", "display_name": "gravity", "link": "https://stackoverflow.com/users/2486496/gravity"}, "edited": false, "score": 0, "creation_date": 1576087727, "post_id": 59290926, "comment_id": 104788145, "body": "What is not working correctly?  What is expected, what is actually happening?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11139033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9799d2ff2033f5428988a63deeab9c8?s=128&d=identicon&r=PG&f=1", "display_name": "MD.Maruf Hasam", "link": "https://stackoverflow.com/users/11139033/md-maruf-hasam"}, "edited": false, "score": 0, "creation_date": 1576115117, "post_id": 59291175, "comment_id": 104797316, "body": "Just tell me what to do when I have to break the loop by pressing enter."}, {"owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "reply_to_user": {"reputation": 5, "user_id": 11139033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9799d2ff2033f5428988a63deeab9c8?s=128&d=identicon&r=PG&f=1", "display_name": "MD.Maruf Hasam", "link": "https://stackoverflow.com/users/11139033/md-maruf-hasam"}, "edited": false, "score": 0, "creation_date": 1576141422, "post_id": 59291175, "comment_id": 104804878, "body": "@MD.MarufHasam You need to describe in more detail what you want to do. With my fix, the for loops will break automatically when the specified number of vertices and edges have been entered. If you want to break on enter, why are you initially asking for the number of vertices and edges?"}], "tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1576085499, "creation_date": 1576085499, "answer_id": 59291175, "question_id": 59290926, "link": "https://stackoverflow.com/questions/59290926/creating-an-user-based-graph/59291175#59291175", "title": "Creating an user based graph", "body": "<p>You are using the variable <code>i</code> for two loops. After the inner <code>for</code> loop, <code>i</code> will always be equal to <code>ed</code>, and if that is smaller than <code>ver</code>, you're in an endless loop.</p>\n\n<p>Use a different variable for the inner loop, e.g. the <code>j</code> you already defined:</p>\n\n<pre><code>for (j = 0; j &lt; ed; j++)\n</code></pre>\n\n<p>Also note that while you are allowed to compare <code>v2</code> to <code>'\\n'</code>, this does not check whether the user pressed enter. Instead, you're comparing <code>v2</code> with the ASCII value of the linefeed character (i.e. <code>10</code>). You can change separators, e.g. to only stop input at a newline character, see <a href=\"https://stackoverflow.com/questions/7302996/changing-the-delimiter-for-cin-c\">this question</a>.</p>\n"}], "owner": {"reputation": 5, "user_id": 11139033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9799d2ff2033f5428988a63deeab9c8?s=128&d=identicon&r=PG&f=1", "display_name": "MD.Maruf Hasam", "link": "https://stackoverflow.com/users/11139033/md-maruf-hasam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576085499, "creation_date": 1576084617, "question_id": 59290926, "link": "https://stackoverflow.com/questions/59290926/creating-an-user-based-graph", "title": "Creating an user based graph", "body": "<p>I am new at the graph section. I recently tried to write program which will take number of vertices , edges and the connections between vertices. </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;queue&gt;\n#include&lt;vector&gt;\n\nusing namespace std ;\n\nvoid add_edge(vector&lt;int&gt; adj[] , int v1 , int v2 )\n{\n    adj[v1].push_back(v2);\n    adj[v2].push_back(v1);\n}\n\nvoid print_graph ( vector&lt;int&gt;adj[] , int vertices)\n{\n    for(int i = 0 ; i &lt; vertices ; i++)\n    {\n        cout&lt;&lt; \"adjacency list of vertex \" &lt;&lt; i &lt;&lt; \" is : \\n\" ;\n        cout&lt;&lt; \"head -&gt; \" ;\n        for(auto it = adj[i].begin() ; it != adj[i].end() ; it++)\n        {\n            cout &lt;&lt; *it &lt;&lt; \" -&gt; \" ;\n        }\n        cout&lt;&lt; \"\\n\" ;\n    }\n}\nint main()\n{\n    int ver , ed , i , j , s , v1 , v2 , temp ;\n    cin &gt;&gt; ver &gt;&gt; ed ;\n    vector&lt;int&gt; adj[ver] ;\n    for(i = 0 ; i &lt; ver ; i++)\n    {\n        cin&gt;&gt; v1 ;\n        for(i = 0 ; i &lt; ed ; i++)\n        {\n            cin &gt;&gt; v2 ;\n            char ch = (char)v2 ;\n            if (v2 == '\\n')\n            {\n                break ;\n            }\n            add_edge(adj , v1 , v2 ) ;\n        }\n    }\n\n    print_graph(adj , ver);\n\nreturn 0 ;\n}\n</code></pre>\n\n<p>I was confused about how to stop the loop when the user presses enter . So I tried this. Doesn't look so cool but logical in my opinion.</p>\n\n<pre><code>   cin &gt;&gt; v2 ;\n   char ch = (char)v2 ;\n    if (v2 == '\\n')\n     {\n         break ;\n     }\n</code></pre>\n\n<p>But the complete program is not working properly. Please help me to figure out. </p>\n"}, {"tags": ["c++", "arrays", "string", "palindrome"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1576084553, "post_id": 59290878, "comment_id": 104786621, "body": "<code>s[i]=word[i];</code> is undefined behavior due to <code>s</code> being empty."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1576084568, "post_id": 59290878, "comment_id": 104786633, "body": "your title seems to be unrelated to the question"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1576084646, "post_id": 59290878, "comment_id": 104786670, "body": "when you ask for help fixing compiler errors you should include the error message in the question"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 1, "creation_date": 1576084726, "post_id": 59290878, "comment_id": 104786710, "body": "If you say <code>I have an error</code> it&#39;s not helpful, because for all we know the error could be you trying to compile it with Java compiler instead of c++ compiler, or trying to open this program in Sony Vegas Pro. Please put the error in the question body."}, {"owner": {"reputation": 77, "user_id": 12264383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/930a4fb39d5a00c2400dab151e546bdc?s=128&d=identicon&r=PG&f=1", "display_name": "IvanCompSci2003", "link": "https://stackoverflow.com/users/12264383/ivancompsci2003"}, "edited": false, "score": 0, "creation_date": 1576084795, "post_id": 59290878, "comment_id": 104786745, "body": "here is the error .       Implicit conversion loses integer precision: &#39;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::size_type&#39; (aka &#39;unsigned long&#39;) to &#39;int&#39;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1576084820, "post_id": 59290878, "comment_id": 104786758, "body": "you can edit your question <a href=\"https://stackoverflow.com/posts/59290878/edit\">here</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1576084926, "post_id": 59290878, "comment_id": 104786809, "body": "The error is due to saving an <code>unsigned long</code> (the result type of the <code>length()</code> member of <code>word</code>), to an <code>int</code>. Changing <code>int i</code> to <code>auto i</code> would solve it. So would throwing out the loop, and <code>s</code>, and just doing <code>std::cout &lt;&lt; word == std::string(word.rbegin(), word.rend());</code>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1576085102, "post_id": 59290878, "comment_id": 104786885, "body": "BTW, please note that you don&#39;t need to create a reversed copy of a string to check if it&#39;s a palindrome. Just compare its elements."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1576085413, "last_edit_date": 1576085413, "creation_date": 1576085071, "answer_id": 59291067, "question_id": 59290878, "link": "https://stackoverflow.com/questions/59290878/how-do-i-cout-string-array-in-this-way/59291067#59291067", "title": "How do I cout string array in this way", "body": "<p>In fact there is no need to use an additional string to check whether a given string is a palindrome. You can perform such a check in a loop.</p>\n\n<p>However using your approach you could write simpler. for example</p>\n\n<pre><code>if ( word == std::string( word.rbegin(), word.rend() ) ) std::cout &lt;&lt; 1; \n</code></pre>\n\n<p>As for the error you are saying it seems that the compiler does not .like when you are comparing signed integer i with the unsigned integer value returned by the call word.length*().</p>\n\n<p>Moreover as the string s is empty then you may not use the subscript operator</p>\n\n<pre><code>s[i]=word[i];\n</code></pre>\n\n<p>You could write either</p>\n\n<pre><code>s += word[i];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s.push_back( word[i] );\n</code></pre>\n\n<p>Preliminary you could reserve enough memory for the string s like</p>\n\n<pre><code>s.reserve( word.size() );\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 12264383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/930a4fb39d5a00c2400dab151e546bdc?s=128&d=identicon&r=PG&f=1", "display_name": "IvanCompSci2003", "link": "https://stackoverflow.com/users/12264383/ivancompsci2003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59291067, "answer_count": 1, "score": 1, "last_activity_date": 1576085603, "creation_date": 1576084467, "last_edit_date": 1576085603, "question_id": 59290878, "link": "https://stackoverflow.com/questions/59290878/how-do-i-cout-string-array-in-this-way", "title": "How do I cout string array in this way", "body": "<p>So I decided to check if the word is palindrome. So I made 2 string, and I have to input word(like <code>\"Hello\"</code>).I don't understand how do I compare this 2 strings, and also I have an error with using <code>word.length</code> with variable <code>i</code>. How do I fix it? Is it necessary to change code or I can just change something in mine? </p>\n\n<pre><code>string word,s;\ncin&gt;&gt;word;\nfor(int i=word.length()-1;i&gt;=0;i--){\n    s[i]=word[i];\n}\nif(s==word)\n    cout&lt;&lt;1;\n</code></pre>\n"}, {"tags": ["c++", "windows", "usb"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1576084431, "post_id": 59290826, "comment_id": 104786572, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/13927475/windows-how-to-enumerate-all-connected-usb-devices-device-path\">windows - How to enumerate all connected USB devices&#39; device path?</a>"}], "owner": {"reputation": 15, "user_id": 12127498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aaeda31d9ff6fdb4e05abcd23b86e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Gimmacus", "link": "https://stackoverflow.com/users/12127498/gimmacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576084234, "creation_date": 1576084234, "question_id": 59290826, "link": "https://stackoverflow.com/questions/59290826/how-to-target-a-specific-usb-hub-port", "title": "How to target a specific USB hub port?", "body": "<p>I have a program that will periodically try to talk to ~40 devices connected via multiple USB hubs. To my knowledge, there is no way to differentiate these devices based on data stored in the unit. The devices attached will constantly be changing over time as well. What I was wondering is how to target a specific usb hub's port. So for example, I have a device connected in hub 2 port 4 and a device connected to hub 4 port 1. I want the software to scan each and every port on each and every hub so that I can catch that these two ports have something attached while none of the others do. Is there a way to target and check every port statically? More so maybe I'm just asking if there's a way I can see USB addresses on a windows PC and talk to that.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1576084146, "post_id": 59290738, "comment_id": 104786441, "body": "Nothing is copied here. <code>f</code> is move-constructed from the lambda expression in <code>queue_read</code>. But it still shouldn&#39;t work because in <code>doSomething</code> you no longer know that <code>f</code> can&#39;t be copied."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1576084155, "post_id": 59290738, "comment_id": 104786448, "body": "clang errors; g++ and MSVC compile: <a href=\"https://godbolt.org/z/Nuv-hn\" rel=\"nofollow noreferrer\">godbolt.org/z/Nuv-hn</a> suggest [language-lawyer] tag"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1576086611, "post_id": 59290738, "comment_id": 104787629, "body": "Always keep in mind that C++ has this unique failure mode where asking the compiler &quot;is this a valid program&quot; has false positives.."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1576117588, "post_id": 59290738, "comment_id": 104797800, "body": "<code>(t)](){test(std::move(t));});</code> Is it normal to have so many ()()({][][}}[[]]{]]())(( without spaces in C++?"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "edited": false, "score": 0, "creation_date": 1576085371, "post_id": 59290932, "comment_id": 104787028, "body": "<a href=\"https://github.com/OpenVPN/openvpn3/blob/275cf80efb7a08adc920f7ca49075c776e596b08/openvpn/tun/tunio.hpp#L212\" rel=\"nofollow noreferrer\">github.com/OpenVPN/openvpn3/blob/&hellip;</a> do you have any idea of why the same code works here? I&#39;ve written my question from here, but it shouldn&#39;t work. However it works"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "edited": false, "score": 1, "creation_date": 1576085534, "post_id": 59290932, "comment_id": 104787112, "body": "@GuerlandoOCs If you give me links to the classes <code>TunIO</code> is instantiated with I can take a look, but I don&#39;t have the time to dig for some instantiation and the definitions of the classes used as template parameters of <code>TunIO</code> in there myself."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "edited": false, "score": 2, "creation_date": 1576085539, "post_id": 59290932, "comment_id": 104787117, "body": "@GuerlandoOCs <code>async_read_some</code> doesn\u2019t accept a <code>std::function</code> but a <code>HANDLER&amp;&amp;</code>, where <code>HANDLER</code> is a template type. In other words, nothing to see here: the lambda is moved into the function."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "edited": false, "score": 0, "creation_date": 1576085721, "post_id": 59290932, "comment_id": 104787220, "body": "@GuerlandoOCs There is no same code there. I see neither <code>std::unique_ptr</code> nor <code>std::function</code>."}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1576085788, "post_id": 59290932, "comment_id": 104787251, "body": "@KonradRudolph but when I call async_read_some with a lambda as a parameter, what is the template that it uses? I thougth it was an std::function"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "edited": false, "score": 1, "creation_date": 1576087930, "post_id": 59290932, "comment_id": 104788233, "body": "@GuerlandoOCs No. Each lambda has a unique, un-nameable type. That&#39;s the type that the template parameter will have. Think of it as <code>struct __SOME_HASH__ { auto operator()(&#47;* your arguments *&#47;) { &#47;* your code *&#47; }; &#47;* your captures *&#47; };</code> - on a high level. If <code>std::function</code> didn&#39;t exist, lambdas would work exactly like they do right now (but accepting a capturing lambda into a non-templated method would require essentially a <code>std::function</code> reimplementation). Lambdas are not a <code>std::function</code> and do not &quot;decay&quot; to them automatically (but can be converted to them seamlessly)."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 16, "last_activity_date": 1576085011, "last_edit_date": 1576085011, "creation_date": 1576084638, "answer_id": 59290932, "question_id": 59290738, "link": "https://stackoverflow.com/questions/59290738/how-can-stdfunction-be-copied-if-it-captures-a-unique-ptr/59290932#59290932", "title": "How can std::function be copied if it captures a unique_ptr?", "body": "<p>This code doesn't actually \"work\" in that sense. It compiles, but only because you don't ever call <code>queue_read</code>.</p>\n\n<p>If you try to use it (which forces the compiler to actually instantiate the <code>R&lt;P&gt;::queue_read</code>, which it doesn't have to do until that point) then you get an error from every compiler:</p>\n\n<pre><code>template&lt;class P&gt; \nclass R{\n    public:\n    void queue_read(P *t)\n    {\n        doSomething([this, t = std::unique_ptr&lt;P&gt;(t)]() { test(std::move(t)); });\n    }\n\n    void doSomething(std::function&lt;void()&gt; f) {\n        (void)f;\n    }\n\n    void test(std::unique_ptr&lt;P&gt; p) {\n        (void)p;\n    }\n};\n\nint main()\n{\n    R&lt;int&gt; r;\n    r.queue_read(new int(1));\n\n    return 0;\n}\n</code></pre>\n\n<p>clang 9.0:</p>\n\n<blockquote>\n<pre><code>error: call to deleted constructor of 'std::unique_ptr&lt;int&gt;'\n    doSomething([this, t = std::unique_ptr&lt;P&gt;(t)]() { test(std::move(t)); });\n</code></pre>\n</blockquote>\n\n<p>gcc 9.2:</p>\n\n<blockquote>\n<pre><code>error: use of deleted function 'std::unique_ptr&lt;_Tp, _Dp&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Dp&gt;&amp;) [with _Tp = int; _Dp = std::default_delete&lt;int&gt;]'\n11 |         doSomething([this, t = std::unique_ptr&lt;P&gt;(t)]() { test(std::move(t)); });\n</code></pre>\n</blockquote>\n\n<p>MSVC 19.22:</p>\n\n<blockquote>\n<pre><code>error C2280: 'std::unique_ptr&lt;P,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://godbolt.org/z/KmjVJB\" rel=\"noreferrer\">https://godbolt.org/z/KmjVJB</a> (thanks Richard!)</p>\n\n<p>Again, the key here is that the compiler didn't actually compile the code of <code>queue_read</code> because there was no need. The function is implicitly <code>inline</code> by virtue of being defined within the class body. Instantiating <code>R&lt;P&gt;</code> for some <code>P</code> causes only the <em>declarations</em>, but not the <em>definitions</em> of its member functions to be instantiated. Only once you actually call <code>queue_read</code> does the compiler have to complain.</p>\n\n<p>This is a good thing by the way. You can use <code>std::vector&lt;MoveOnlyType&gt;</code> and do everything that doesn't require copying, even though some of the <code>std::vector</code> member functions require a copyable type. But as long as you never use the latter functions, everything is fine. If the compiler always instantiated all the member function definitions and reported errors in those (even if never used) it would be way more cumbersome.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 11, "last_activity_date": 1576086014, "last_edit_date": 1576086014, "creation_date": 1576084720, "answer_id": 59290962, "question_id": 59290738, "link": "https://stackoverflow.com/questions/59290738/how-can-stdfunction-be-copied-if-it-captures-a-unique-ptr/59290962#59290962", "title": "How can std::function be copied if it captures a unique_ptr?", "body": "<blockquote>\n  <p>How can std::function be copied if it captures an unique_ptr?</p>\n</blockquote>\n\n<p>A <code>std::function</code> doesn't capture anything.</p>\n\n<p>A lambda that captures a non-copyable object such as <code>std::unique_ptr</code> is itself non-copyable. Such lambda doesn't satisfy, nor does any other non-copyable function object type satisfy the requirements of <code>std::function</code> which requires the functor to be copyable. Standard rule (from latest draft):</p>\n\n<blockquote>\n  <p>[func.wrap.func.con]</p>\n\n<pre><code>template&lt;class F&gt; function(F f);\n</code></pre>\n  \n  <p>Requires: F shall be Cpp17CopyConstructible.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>However the code compiles fine.</p>\n</blockquote>\n\n<p>This is typical when the ill-formed function is an unused function of a template. It should fail to compile if you attempt to call the function.</p>\n"}], "owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 1, "accepted_answer_id": 59290932, "answer_count": 2, "score": 14, "last_activity_date": 1576156028, "creation_date": 1576083905, "last_edit_date": 1576156028, "question_id": 59290738, "link": "https://stackoverflow.com/questions/59290738/how-can-stdfunction-be-copied-if-it-captures-a-unique-ptr", "title": "How can std::function be copied if it captures a unique_ptr?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;functional&gt;\n\nstruct PacketFrom\n{\n    typedef std::unique_ptr&lt;PacketFrom&gt; SPtr;\n};\n\ntemplate&lt;class P&gt; \nclass R{\n    public:\n    void queue_read(P *t)\n    {\n        doSomething([t = typename PacketFrom::SPtr(t)](){test(std::move(t));});\n    }\n\n    void doSomething(std::function&lt;void()&gt; f) {\n\n    }\n\n    void test(PacketFrom::SPtr p) {\n\n    }\n};\n\nint main()\n{\n    R&lt;PacketFrom&gt; r;\n\n    return 0;\n}\n</code></pre>\n\n<p>How can this code work if the lambda function is being passed by copy? The lambda owns a <code>unique_ptr</code> which cannot be copied. I thought it was simply not capturing the unique_ptr so I added <code>test()</code> just to be sure it was capturing. However the code compiles fine.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "mfc"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1576083025, "post_id": 59290401, "comment_id": 104785904, "body": "I found (with VS 2017, in my case) that it would sometimes generate enhanced instructions even with Enable Enhanced Instruction Set: Not Set.  As an ad-hoc solution, I switched from optimising for speed to optimising for size and that fixed it for me.  YMMV."}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1576083623, "post_id": 59290401, "comment_id": 104786181, "body": "Can you check latest windows SDK version for VS2019? You mentioned 8.1, which is older. Try it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1576083848, "post_id": 59290401, "comment_id": 104786284, "body": "@Mannoj yes, I will try this. For compatibility reasons with wine we need to use the 8.1 toolkit for the moment."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1576083929, "post_id": 59290401, "comment_id": 104786331, "body": "@PaulSanders this information is most useful. Do you remember the processor you had problems with?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1576106986, "post_id": 59290401, "comment_id": 104795617, "body": "It was a truly ancient Pentium III, with no enhanced instructions at all (apart from MMX).  So different in detail from your findings."}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1576116945, "post_id": 59290401, "comment_id": 104797683, "body": "Whether the software now run properly in Visual Studio 2017, Platform Toolset Visual Studio 2015 (v140) and using ISO c ++ 14? And then we could determine whether the code is causing the issue."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1576138931, "post_id": 59290401, "comment_id": 104803711, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/win32/wer/collecting-user-mode-dumps\" rel=\"nofollow noreferrer\">Collecting User-Mode Dumps</a>. That gives you something to work with."}], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1576105389, "creation_date": 1576082559, "last_edit_date": 1576105389, "question_id": 59290401, "link": "https://stackoverflow.com/questions/59290401/crash-on-customers-computer", "title": "Crash on customer&#39;s computer", "body": "<p>Our software (32 bit code) crashes on one of our customer's computer upon an illegal instruction (Exception: code c000001d). The crash happens very early upon program start, most likely in some c++ startup code.</p>\n\n<p>The CPU reported by Windows on that machine is \"Intel(R) Xeon(R) Gold 5115 @ 2.40Ghz (4 processors)\" and the OS is \"Windows Sever 2012 R2 Standard\".\"</p>\n\n<p>Apparently it is an AVX512 instruction (starting with 0x62, 0xf1) which causes the trouble.</p>\n\n<p>Our software is compiled with Visual Studio 2019 and these (probably relevant) settings:</p>\n\n<ul>\n<li>no external binary libraries are used (except standard Windows import libraries and statically linked MFC), the whole code is compiled with the settings below</li>\n<li>no external dlls are used</li>\n<li>Platform toolset: Visual Studio 2019 (v142)</li>\n<li>Windows SDK version: 8.1</li>\n<li>C++ language standard : ISO C++17</li>\n<li>Enable Enhanced Instruction Set: Not Set (meaning that SSE2 intructions are used, but no AVX instructions, as per MS documentation).</li>\n</ul>\n\n<p>What appeals to me here is the fact that the previous version of the software works seemlessly on the very same computer, but that version was generated with Visual Studio 2017, platform toolset <em>Visual Studio 2015 (v140)</em> instead of <em>v142</em> and with the C++ language standard : <em>ISO C++14</em> instead of <em>ISO C++17</em>. </p>\n\n<p>All other settings were the same. These are the main differences between those two versions, the rest is only minor corrections in the code.</p>\n\n<p>That's all the information I have right now.</p>\n\n<p>Has anybody ever come upon a similar problem? Or at least some clues?</p>\n"}, {"tags": ["c++", "operator-precedence", "comma-operator"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 8, "creation_date": 1576082124, "post_id": 59290239, "comment_id": 104785395, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">Because it works in this way</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1576082145, "post_id": 59290239, "comment_id": 104785405, "body": "Why not just use <code>sum += ++val;</code> and now there is no ambiguity and everyone knows what you mean?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1576082221, "post_id": 59290239, "comment_id": 104785445, "body": "Or better yet, <code>++val; sum += val;</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 8, "creation_date": 1576082231, "post_id": 59290239, "comment_id": 104785449, "body": "the comma operators main usage is to obfuscate code. There are some strange corners where it comes in handy, but never you want a comma operator for its own sake"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 4, "creation_date": 1576082268, "post_id": 59290239, "comment_id": 104785472, "body": "Don&#39;t forget that code isn&#39;t written for the compiler : it&#39;s written for humans. If two lines convey a clearer intent, don&#39;t try to one-line it."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1576082389, "post_id": 59290239, "comment_id": 104785545, "body": "Well, you are not learning operator precedence.  You are learning what kind of code to never write.  Good thing."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1576082902, "post_id": 59290239, "comment_id": 104785826, "body": "@Nicol, that&#39;s only better if some braces are also added, else it&#39;s <i>much</i> worse!  (BTW, I do recommend the braces, in case that&#39;s not clear)"}, {"owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576083081, "post_id": 59290239, "comment_id": 104785929, "body": "@NathanOliver-ReinstateMonica, I am not yet a developer, am learning to code. I only want to understand concepts now, so that I would be able to make the good decisions you have suggested when I start writing code that others may later have to deal with. Thank you and all for your explanations"}, {"owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1576083747, "post_id": 59290239, "comment_id": 104786238, "body": "@BiagioFesta thank you for the reference it was great!"}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576082450, "post_id": 59290315, "comment_id": 104785582, "body": "@NathanOliver: &quot;<i>Why is it about order of evaluation?</i>&quot; Because the OP asked &quot;Why did the comma operator seem to have affected the order of evaluation?&quot; The OP seems to clearly understand how the comma separates the two expressions in terms of parsing; his question is why they happen in that order."}, {"owner": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 1, "creation_date": 1576082541, "post_id": 59290315, "comment_id": 104785635, "body": "Then why this doesn&#39;t follow: <code>printf(&quot;%d %d  %d&quot;, x, x++, x++)</code> Initially <code>x=0</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 9, "creation_date": 1576082634, "post_id": 59290315, "comment_id": 104785684, "body": "@Raj Because that is not the comma operator. :)"}, {"owner": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1576082964, "post_id": 59290315, "comment_id": 104785869, "body": "@LightnessRaceswithMonica Can you explain why does it evaluate to <code>2 1 0</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 3, "creation_date": 1576083041, "post_id": 59290315, "comment_id": 104785908, "body": "@Raj Not really. That code has undefined (pre-C++17) or unspecified (since C++17) behaviour. Don&#39;t write code like that. Why do you think you want to write code like that?"}, {"owner": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 0, "creation_date": 1576083322, "post_id": 59290315, "comment_id": 104786037, "body": "I don&#39;t like such piece of code, but sadly my hiring manager thinks it&#39;s a nice question to evaluate candidates :("}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "reply_to_user": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 0, "creation_date": 1576083394, "post_id": 59290315, "comment_id": 104786068, "body": "@Raj No one can. It is undefined behavior (UB) because the order of evaluation of function arguments is not specified: <a href=\"https://en.cppreference.com/w/c/language/eval_order\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/eval_order</a>"}, {"owner": {"reputation": 395, "user_id": 3176160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/729027518/picture?type=large", "display_name": "Uri Raz", "link": "https://stackoverflow.com/users/3176160/uri-raz"}, "reply_to_user": {"reputation": 654, "user_id": 7400286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9271f8e34fe60b468daaeb42b23d067?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/7400286/raj"}, "edited": false, "score": 0, "creation_date": 1576084241, "post_id": 59290315, "comment_id": 104786489, "body": "@Raj whether behavior is undefined or unspecified in the standard, the compiler has to make correct code behave in <i>some</i> way. Your compiler seems to push parameters left to right, and therefore post increments X and pushes the old value (zero), post increments and pushes the old value (now one), pushes the current value (2), and finally pushes the pointer to the string. <i>But</i> a different compiler might choose to push parameters left to right, hence 0, 0, 1, and leave X being equal to 2."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 395, "user_id": 3176160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/729027518/picture?type=large", "display_name": "Uri Raz", "link": "https://stackoverflow.com/users/3176160/uri-raz"}, "edited": false, "score": 1, "creation_date": 1576085252, "post_id": 59290315, "comment_id": 104786961, "body": "@UriRaz Did you mean &quot;compiled code&quot; instead of &quot;correct code&quot;? Because that is certainly not &quot;correct code&quot;..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 395, "user_id": 3176160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/729027518/picture?type=large", "display_name": "Uri Raz", "link": "https://stackoverflow.com/users/3176160/uri-raz"}, "edited": false, "score": 0, "creation_date": 1576093910, "post_id": 59290315, "comment_id": 104790831, "body": "@UriRaz -- or some other compiler might push the same value three times, then add 2 to <code>x</code>. Or any of a whole bunch of other possibilities. The order that the arguments get pushed has nothing to do with the order in which the expressions that produce the arguments get evaluated."}, {"owner": {"reputation": 395, "user_id": 3176160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/729027518/picture?type=large", "display_name": "Uri Raz", "link": "https://stackoverflow.com/users/3176160/uri-raz"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1576112985, "post_id": 59290315, "comment_id": 104796903, "body": "@Max Langhof By corrrect code I mean code that would compile with no error messages, rather than code that would correctly execute."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 395, "user_id": 3176160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/729027518/picture?type=large", "display_name": "Uri Raz", "link": "https://stackoverflow.com/users/3176160/uri-raz"}, "edited": false, "score": 1, "creation_date": 1576140121, "post_id": 59290315, "comment_id": 104804221, "body": "@UriRaz Your categories of code are not really adequate. According to the C++ standard, <code>int x = *(int*)(nullptr);</code> is invalid code - it has undefined behavior - yet most compilers will happily compile it to a binary (they wouldn&#39;t have to). ODR violations make a program literally ill-formed, but no compiler diagnostic is required. Again, compilers <i>could</i> refuse the program with an error, but they don&#39;t have to. So it doesn&#39;t make sense to sort programs into &quot;correct&quot; and &quot;incorrect&quot; based on &quot;the compiler will compile it&quot; - that&#39;s not a property of the program but of the compiler you use."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 13, "last_activity_date": 1576082303, "creation_date": 1576082303, "answer_id": 59290315, "question_id": 59290239, "link": "https://stackoverflow.com/questions/59290239/precedence-of-the-c-comma-operator/59290315#59290315", "title": "Precedence of the C++ Comma Operator", "body": "<p>This is not about precedence; it's about order of evaluation. The comma operator, unlike most other C++ operators (pre-C++17), <em>strictly</em> enforces a specific order of evaluation. Comma expressions are always evaluated left-to-right.</p>\n"}], "owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 59290315, "answer_count": 1, "score": 5, "last_activity_date": 1576094138, "creation_date": 1576082027, "last_edit_date": 1576094138, "question_id": 59290239, "link": "https://stackoverflow.com/questions/59290239/precedence-of-the-c-comma-operator", "title": "Precedence of the C++ Comma Operator", "body": "<p>Hi I am a little confused with the following code:</p>\n\n<pre><code>int main()\n{\n    int sum = 0, val = 1;\n    while(val &lt;= 10)\n        sum += val, ++val;     //source of problem\n\n    cout&lt;&lt;\"Sum of 1 to 10 inclusive is \" &lt;&lt; sum &lt;&lt; endl;\n    //\n    return 0;\n}\n</code></pre>\n\n<p>I am currently learning about operator precedence. Know that the comma operator has the lowest precedence among the C++ operators, I was hoping that the statement in the while loop evaluate in the following order:</p>\n\n<pre><code>++val; //so that val is incremented to 2 the first time the code in the while loop is evaluated\nsum += val; //so that the incremented value of val is added to the sum variable \n</code></pre>\n\n<p>But the code evaluated in this order instead:</p>\n\n<pre><code>sum += val;\n++val;\n</code></pre>\n\n<p>Why did the comma operator seem to have affected the order of evaluation?</p>\n"}, {"tags": ["c++", "visual-studio", "qt5", "visual-studio-2019", "cgal"], "comments": [{"owner": {"reputation": 601, "user_id": 5523687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfcfd95740cd3b1ae7cfe4dade4b226?s=128&d=identicon&r=PG", "display_name": "mgimeno", "link": "https://stackoverflow.com/users/5523687/mgimeno"}, "edited": false, "score": 0, "creation_date": 1576139370, "post_id": 59290221, "comment_id": 104803894, "body": "Did you check that page ? <a href=\"https://doc.cgal.org/latest/Manual/windows.html#ssec-vcpkg-compile-example\" rel=\"nofollow noreferrer\">doc.cgal.org/latest/Manual/&hellip;</a>  More specifically, did you check the coherency between x86 and x64 configurations ? Default for cmake vcpkg config is 32bit, so if you try to compile the code with visual in 64bits there is a good chance you will run into  errors."}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 5523687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfcfd95740cd3b1ae7cfe4dade4b226?s=128&d=identicon&r=PG", "display_name": "mgimeno", "link": "https://stackoverflow.com/users/5523687/mgimeno"}, "is_accepted": false, "score": 1, "last_activity_date": 1576140750, "creation_date": 1576140750, "answer_id": 59300777, "question_id": 59290221, "link": "https://stackoverflow.com/questions/59290221/unable-to-compile-cgal-example-triangulation-2/59300777#59300777", "title": "Unable to compile CGAL example Triangulation_2", "body": "<p>You need to install cgal[qt] for examples that use Qt5 : \n<code>vcpkg install cgal[qt]</code>\nThis contains specific headers for most 3D examples and demos used by CGAL. </p>\n\n<p>Also there is a specificity when using vcpkg with cmake, because the default behavior for <code>Optional Platform</code> is x64 in cmake, but x86 in vcpkg. it means that if you leave it empty, everything that comes from outside vcpkg will be x64, and everything inside vcpkg x86, and you will run into warnings, link errors and probably some build errors too. <a href=\"https://doc.cgal.org/latest/Manual/windows.html#ssec-vcpkg-compile-example\" rel=\"nofollow noreferrer\">This page</a> explains the steps to configure and build an example of CGAL with vcpg. </p>\n"}], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614695047, "creation_date": 1576081963, "question_id": 59290221, "link": "https://stackoverflow.com/questions/59290221/unable-to-compile-cgal-example-triangulation-2", "title": "Unable to compile CGAL example Triangulation_2", "body": "<p>I have installed <code>CGAL</code> with <code>vcpkg</code>. Also installed <code>Qt5</code> with <code>vcpgk</code>. Then I have dowloaded <code>CGAL-5.0-examples</code> and ran <code>cmake-gui ..</code>. It did without errors. Qt5 variables appeared to point to some places inside <code>vcpkg</code>. Unfortunately, after <code>sln</code> is genereted and I am opening it, I can't build it:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State   Suppression State\nError   LNK1104 cannot open file 'Debug\\CGAL_Qt5_moc_and_resources.lib' for_loop_2  D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\LINK 1       \nError   C1083   Cannot open source file: 'D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\qrc_CGAL.cpp': No such file or directory   CGAL_Qt5_moc_and_resources  D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\c1xx 1       \nError   C1083   Cannot open source file: 'D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\qrc_Input.cpp': No such file or directory  CGAL_Qt5_moc_and_resources  D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\c1xx 1       \nError   C1083   Cannot open source file: 'D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\qrc_File.cpp': No such file or directory   CGAL_Qt5_moc_and_resources  D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\c1xx 1       \nError   C1083   Cannot open source file: 'D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\qrc_Triangulation_2.cpp': No such file or directory    CGAL_Qt5_moc_and_resources  D:\\dev\\CGAL-5.0\\examples\\Triangulation_2\\build\\c1xx 1   \n</code></pre>\n\n<p>Why is it trying to open <code>cpp</code> files from build directory, although source directory is one level up?   </p>\n\n<p><a href=\"https://i.stack.imgur.com/MwIu6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MwIu6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "cmake", "geographic-lib"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "edited": false, "score": 0, "creation_date": 1576085720, "post_id": 59290523, "comment_id": 104787217, "body": "Thanks I instaled cygwin and ran the commands in the cygwin terminal but i stil get errors. I updated my question with the errors"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "edited": false, "score": 0, "creation_date": 1576087359, "post_id": 59290523, "comment_id": 104787973, "body": "@Koos It is assumed that you run these commands from the <i>top-level directory</i> of the GeographicLib package you installed. It appears you simply ran them from your home directory."}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "edited": false, "score": 0, "creation_date": 1576088213, "post_id": 59290523, "comment_id": 104788343, "body": "You have to change your <i>working directory</i> to be the top-level directory of the package (wherever you downloaded it and placed it on your machine). Use the <code>cd</code> command with something like <code>cd C:&#47;path&#47;to&#47;your&#47;GeographicLib</code>. Only then should you run the commands in the instructions. I&#39;ll update the answer to show this."}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "edited": false, "score": 0, "creation_date": 1576103199, "post_id": 59290523, "comment_id": 104794510, "body": "Cygwin does not know how to find your MinGW executables (specifically <code>mingw32-make</code>). The <code>export</code> command should set this, so does the path <code>c:&#47;QtSDK&#47;mingw&#47;bin</code> exist on your machine, and contain the <code>mingw32-make</code> executable?"}, {"owner": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "edited": false, "score": 0, "creation_date": 1576128730, "post_id": 59290523, "comment_id": 104800162, "body": "The path <code>C:\\Qt\\Tools\\mingw730_64\\bin</code> contains mingw32-make.exe but after changing the path I get this error : <code>CMake Error: CMake was unable to find a build program corresponding to &quot;MinGW Makefiles&quot;</code>"}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": false, "score": 0, "last_activity_date": 1576088393, "last_edit_date": 1576088393, "creation_date": 1576083048, "answer_id": 59290523, "question_id": 59290167, "link": "https://stackoverflow.com/questions/59290167/how-to-use-geographiclib-in-qt/59290523#59290523", "title": "How to use GeographicLib in Qt", "body": "<p>The <a href=\"https://geographiclib.sourceforge.io/html/install.html#qt\" rel=\"nofollow noreferrer\">instructions</a> from the GeographicLib site say to run the commands with Cygwin:</p>\n\n<blockquote>\n  <p>If you are using the mingw compiler on Windows for Qt, then you need to build GeographicLib with mingw. <strong>You can accomplish this with cmake under cygwin with, for example,</strong> ...</p>\n</blockquote>\n\n<p>The commands like <code>export</code>, <code>env</code>, and <code>sed</code> are not native to Windows, but are Linux commands. These must be run in a Cygwin command prompt. Your question does not mention Cygwin in your setup so I'm guessing you either haven't installed it or are not using it. Try installing <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">Cygwin</a> for your machine and running the listed commands from within a Cygwin command prompt.</p>\n\n<p>The instructions assume you are running the commands from the <em>top-level</em> directory of the GeographicLib package, so you must navigate to that directory first. The updated commands would look something like this:</p>\n\n<pre><code> cd C:/path/to/your/GeographicLib\n export PATH=\"`cygpath -m c:/QtSDK/mingw/bin`:$PATH\"\n mkdir BUILD\n cd BUILD\n cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program Files/GeographicLib\" ..\n mingw32-make\n mingw32-make install\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "is_accepted": true, "score": 0, "last_activity_date": 1576673277, "creation_date": 1576673277, "answer_id": 59392423, "question_id": 59290167, "link": "https://stackoverflow.com/questions/59290167/how-to-use-geographiclib-in-qt/59392423#59392423", "title": "How to use GeographicLib in Qt", "body": "<p>Typing the following commands in Cygwin worked for me :</p>\n\n<pre><code> set CC=C:/Qt/Tools/mingw730_64/bin/x86_64-w64-mingw32-gcc\n set CXX=C:/Qt/Tools/mingw730_64/bin/x86_64-w64-mingw32-g++\n\n cd C:/path/to/my/GeographicLib\n rm -rf BUILD; mkdir BUILD; cd BUILD\n export PATH=\"`cygpath C:/Qt/Tools/mingw730_64/bin`:$PATH\"\n cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program Files/GeographicLib\" ..\n mingw32-make\n mingw32-make install\n\n env PATH=\"$( echo $PATH | tr : '\\n' |\n while read d; do test -f \"$d/sh.exe\" || echo -n \"$d:\"; done |\n sed 's/:$//' )\" \\\n cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program Files/GeographicLib\" ..\n mingw32-make\n cygstart --action=runas mingw32-make install\n</code></pre>\n\n<p>NB: Make sure you have Cmake Installed, you can download the installer for windows <a href=\"https://cmake.org/download/\" rel=\"nofollow noreferrer\">here</a>. Do not install the cygwin version of cmake because it does not have the MinGW Makefiles generator and make sure to check the \"Add to system PATH\" checkbox in the cmake installer. When installing <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">cygwin</a> make sure to select the \"make\" (gnu version of the make utility) package.</p>\n"}], "owner": {"reputation": 71, "user_id": 12099905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe11ff5c6a1fe7f8d6af6e431ac0d8ed?s=128&d=identicon&r=PG&f=1", "display_name": "Koos", "link": "https://stackoverflow.com/users/12099905/koos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 59392423, "answer_count": 2, "score": 0, "last_activity_date": 1576673277, "creation_date": 1576081730, "last_edit_date": 1576133775, "question_id": 59290167, "link": "https://stackoverflow.com/questions/59290167/how-to-use-geographiclib-in-qt", "title": "How to use GeographicLib in Qt", "body": "<p>Hi I am new to qt and CMake , this is probably an easy fix but I have been struggling with it the entire day.</p>\n\n<p>I am trying to use <a href=\"https://geographiclib.sourceforge.io/html/index.html\" rel=\"nofollow noreferrer\">GeographicLib</a> in a Qt project. I instaled CMake and downloaded the files from <a href=\"https://geographiclib.sourceforge.io/html/intro.html\" rel=\"nofollow noreferrer\">https://geographiclib.sourceforge.io/html/intro.html</a>. On the Geographiclib website there is a guide for <a href=\"https://geographiclib.sourceforge.io/html/install.html#qt\" rel=\"nofollow noreferrer\">Building the library for use with Qt</a>. There are a couple of commands you have to run :</p>\n\n<pre><code> export PATH=\"`cygpath -m c:/QtSDK/mingw/bin`:$PATH\"\n mkdir BUILD\n cd BUILD\n cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program Files/GeographicLib\" ..\n mingw32-make\n mingw32-make install\n</code></pre>\n\n<p>after running the above I get the following:</p>\n\n<pre><code>C:\\Users\\koos&gt;  export PATH=\"`cygpath -m c:/QtSDK/mingw/bin`:$PATH\"\n'export' is not recognized as an internal or external command,\noperable program or batch file.\n\nC:\\Users\\koos&gt;  mkdir BUILD\nA subdirectory or file BUILD already exists.\n\nC:\\Users\\koos&gt;  cd BUILD\n\nC:\\Users\\koos\\BUILD&gt;  cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program \nFiles/GeographicLib\" ..\nCMake Error: The source directory \"C:/Users/koos\" does not appear to contain CMakeLists.txt.\nSpecify --help for usage, or press the help button on the CMake GUI.\n</code></pre>\n\n<p><a href=\"https://geographiclib.sourceforge.io/html/install.html#qt\" rel=\"nofollow noreferrer\">the website</a> said that if cmake complains you have to run the following:</p>\n\n<pre><code>env PATH=\"$( echo $PATH | tr : '\\n' |\nwhile read d; do test -f \"$d/sh.exe\" || echo -n \"$d:\"; done |\nsed 's/:$//' )\" \\\ncmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program Files/GeographicLib\" ..\n</code></pre>\n\n<p>then I get :</p>\n\n<pre><code>C:\\Users\\koos\\BUILD&gt;  env PATH=\"$( echo $PATH | tr : '\\n' |\n'env' is not recognized as an internal or external command,\noperable program or batch file.\n\nC:\\Users\\koos\\BUILD&gt;  while read d; do test -f \"$d/sh.exe\" || echo -n \"$d:\"; done |\nThe syntax of the command is incorrect.\n\nC:\\Users\\koos\\BUILD&gt;  sed 's/:$//' )\" \\\n'sed' is not recognized as an internal or external command,\noperable program or batch file.\n\nC:\\Users\\koos\\BUILD&gt;  cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program \nFiles/GeographicLib\" ..\n</code></pre>\n\n<p>I am using Desktop Qt 13.0 MinGw 64-bit. I think there is a problem with the following: \"\"mingw32-make\"\"\n(being 32 in stead of 64 but i tried changing it and got no where). Can someone please explain to me how i should go about installing the Geographic lib library in Qt(maybe how to use the cmake qui to accomplish the task because i don't know much about cmake)</p>\n\n<p><strong>Edit :</strong></p>\n\n<p>So I installed cygwin and now it gives me the following:</p>\n\n<pre><code>koos@computer ~\n$   mkdir BUILD\nexport PATH=\"`cygpath -m C:\\Qt\\Tools\\mingw730_64\\bin`:$PATH\"\n  cd BUILD\n  cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program \nFiles/GeographicLib\" ..\n mingw32-make\nmingw32-make install\nkoos@computer ~\n$   mkdir BUILD\n\nkoos@computer ~\n$   cd BUILD\n\nkoos@computer ~/BUILD\n$   cmake -G \"MinGW Makefiles\" -D CMAKE_INSTALL_PREFIX=\"C:/Program \nFiles/GeographicLib\" ..\nCMake Error: The source directory \"C:/cygwin64/home/koos\" does not appear \nto contain CMakeLists.txt.\nSpecify --help for usage, or press the help button on the CMake GUI.\n\nkoos@computer ~/BUILD\n$   mingw32-make\n-bash: mingw32-make: command not found\n\nkoos@computer ~/BUILD\n$   mingw32-make install\n-bash: mingw32-make: command not found\n</code></pre>\n\n<p>After running from the top-level directory of GeographicLib I get the following errors :</p>\n\n<pre><code>CMake Error: CMake was unable to find a build program corresponding to \n\"MinGW Makefiles\".  CMAKE_MAKE_PROGRAM is not set.  You probably need to \nselect a different build tool.\nCMake Error: CMake was unable to find a build program corresponding to \n\"MinGW Makefiles\".  CMAKE_MAKE_PROGRAM is not set.  You probably need to \nselect a different build tool.\nCMake Error: CMAKE_C_COMPILER not set, after EnableLanguage\nCMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage\n-- Configuring incomplete, errors occurred!\n</code></pre>\n\n<p>The path <code>C:\\Qt\\Tools\\mingw730_64\\bin</code> does contain mingw32-make.</p>\n\n<p>Thanks for your patience!</p>\n\n<p>Regards \nKoos</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1576081684, "post_id": 59290133, "comment_id": 104785197, "body": "Did you follow the link to <a href=\"https://en.cppreference.com/w/cpp/algorithm/lexicographical_compare\" rel=\"nofollow noreferrer\"><code>std::lexicographical_compare</code></a> to see what it does?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1576081722, "post_id": 59290133, "comment_id": 104785215, "body": "Also, <code>std::set</code> is an ordered container.   Insertion order != stored order"}, {"owner": {"reputation": 113, "user_id": 12519542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa3471d4dc26f994f286629daa7f3b0?s=128&d=identicon&r=PG&f=1", "display_name": "bricoletc", "link": "https://stackoverflow.com/users/12519542/bricoletc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576086497, "post_id": 59290133, "comment_id": 104787568, "body": "Ah yes, I was thinking in terms of an underlying binary search tree implementing the set, and different insertion order of the same elements producing different trees. Yet such trees have the same sort/lexicographic order, so the comparison is fine."}], "answers": [{"comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1576082437, "post_id": 59290293, "comment_id": 104785569, "body": "I believe specifically cppreference is referring to the interaction with the <code>Compare</code> template parameter for <code>std::set</code> (default <code>std::less&lt;Key&gt;</code>). Likewise that makes your &quot;are in increasing numerical order&quot; the default, but you could make it store in say the opposite order."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1576082573, "post_id": 59290293, "comment_id": 104785649, "body": "@FireLancer Yes, you can override the comparator if you like."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1576082933, "post_id": 59290293, "comment_id": 104785853, "body": "@FireLancer The difference/effect of what? What is &quot;it&quot;? I don&#39;t know what you&#39;re asking, sorry. Feel free to ask a new question."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1576083269, "post_id": 59290293, "comment_id": 104786016, "body": "On what the OP linked, I assume they wrote that for some reason. &quot;Compares the contents of lhs and rhs lexicographically. The comparison is performed by a function equivalent to <code>std::lexicographical_compare</code>. <b>This comparison ignores the container&#39;s ordering Compare.</b>&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1576083472, "post_id": 59290293, "comment_id": 104786109, "body": "@FireLancer Ah, interesting, so yeah the ordering is <i>always</i> lexicographical and the <code>Compare</code> that maintains order within each container is just ignored. There&#39;s no &quot;effect&quot; of that other than what it says"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1576083478, "last_edit_date": 1576083478, "creation_date": 1576082230, "answer_id": 59290293, "question_id": 59290133, "link": "https://stackoverflow.com/questions/59290133/inserting-stdset-as-keys-to-stdmap/59290293#59290293", "title": "Inserting std::set as keys to std::map", "body": "<p>It means what it says - comparing two sets does so <em>lexicographically</em>.</p>\n\n<p>The very same site <a href=\"https://en.cppreference.com/w/cpp/algorithm/lexicographical_compare\" rel=\"nofollow noreferrer\">tells you what that means</a> if you simply click through:</p>\n\n<blockquote>\n  <p>Lexicographical comparison is a operation with the following properties:</p>\n  \n  <ul>\n  <li>Two ranges are compared element by element.</li>\n  <li>The first mismatching element defines which range is lexicographically less or greater than the other.</li>\n  <li>If one range is a prefix of another, the shorter range is lexicographically less than the other.</li>\n  <li>If two ranges have equivalent elements and are of the same length, then the ranges are lexicographically equal.</li>\n  <li>An empty range is lexicographically less than any non-empty range.</li>\n  <li>Two empty ranges are lexicographically equal.</li>\n  </ul>\n</blockquote>\n\n<p>Simplified, it basically means an intuitive element-by-element comparison from left-to-right (<a href=\"https://en.wikipedia.org/wiki/Lexicographical_order#Numeral_systems_and_dates\" rel=\"nofollow noreferrer\">ref</a>).</p>\n\n<p>As for your second question, the contents of a <code>set&lt;int&gt;</code> are in increasing numerical order, irrespective of what order you inserted the elements, so no.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1576082542, "last_edit_date": 1576082542, "creation_date": 1576082308, "answer_id": 59290316, "question_id": 59290133, "link": "https://stackoverflow.com/questions/59290133/inserting-stdset-as-keys-to-stdmap/59290316#59290316", "title": "Inserting std::set as keys to std::map", "body": "<blockquote>\n  <p>I have read on cppreference that <code>std::set</code> implements the Compare operation via <code>std::lexicographical_compare</code> of two <code>std::set</code> - what does this actually mean?</p>\n</blockquote>\n\n<p>It means that the comparison operator of <code>std::set</code> calls <code>std::lexicographical_compare</code> with the range of the elements of the operands as arguments, and returns the result. <code>std::lexicographical_compare</code> compares the lexicographical order of the operand ranges. This is the same order as is used to order words in a dictionary.</p>\n\n<blockquote>\n  <p>Also, is it possible for two <code>std::set</code> with the same <code>std::uint32_t</code>s inserted, but in different order ...</p>\n</blockquote>\n\n<p><code>std::set</code> is ordered. All sets with same comparison function have the same order. Elements that compare less are before elements that compare as higher. Thus, if both elements and the comparison function are the same, then the sets will compare equal in lexicographical comparison.</p>\n\n<p>If the comparison function is stateless, then all instances of it produce the same order. In theory, a stateful comparison function could produce a different order for different set. I would recommend to avoid such counter-intuitive comparison functions.</p>\n"}], "owner": {"reputation": 113, "user_id": 12519542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa3471d4dc26f994f286629daa7f3b0?s=128&d=identicon&r=PG&f=1", "display_name": "bricoletc", "link": "https://stackoverflow.com/users/12519542/bricoletc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576083478, "creation_date": 1576081595, "last_edit_date": 1576082364, "question_id": 59290133, "link": "https://stackoverflow.com/questions/59290133/inserting-stdset-as-keys-to-stdmap", "title": "Inserting std::set as keys to std::map", "body": "<p>I am using <code>std::set&lt;std::uint32_t&gt;</code> as keys to a <code>std::map</code>. I have read on <a href=\"https://en.cppreference.com/w/cpp/container/set/operator_cmp\" rel=\"nofollow noreferrer\">cppreference</a> that <code>std::set</code> implements the Compare operation via <code>std::lexicographical_compare</code> of two <code>std::set</code>- what does this actually mean?</p>\n\n<p>Also, is it possible for two <code>std::set</code> with the same <code>std::uint32_t</code>s inserted, but in different order, to not evaluate equal?</p>\n"}, {"tags": ["c++", "recursion", "depth-first-search", "breadth-first-search"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1576081771, "post_id": 59290117, "comment_id": 104785240, "body": "&quot;When I run it in the terminal, it says a warning message&quot; I guess you mean when you compile. What warning, anyway?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1576081854, "post_id": 59290117, "comment_id": 104785285, "body": "<code>noOfNodes</code> is Uninitialized in <code>bfs</code> resulting in Undefined Behavior."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1576082145, "post_id": 59290117, "comment_id": 104785404, "body": "<code>int size = 0; int* bfsarray[size];</code> -- This is not valid C++.  Arrays in C++ must have their sizes denoted by a constant expression, not a runtime variable.  Second, even if this were legal C++, you are creating an array with maximum size of 0 elements."}, {"owner": {"reputation": 1, "user_id": 12162023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81527eee6557e06091a0da0484879dd?s=128&d=identicon&r=PG&f=1", "display_name": "softwares12", "link": "https://stackoverflow.com/users/12162023/softwares12"}, "edited": false, "score": 0, "creation_date": 1576106433, "post_id": 59290117, "comment_id": 104795468, "body": "I got it to work more but my bfs function is only printing out zeros. I initialized size, begin, adjMatrix, noOfNodes to zero, which one of these should I not initialize to zero?"}, {"owner": {"reputation": 121, "user_id": 4416191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f7413a54e587474e3f24c906d5db02?s=128&d=identicon&r=PG", "display_name": "Vinod Krishnan", "link": "https://stackoverflow.com/users/4416191/vinod-krishnan"}, "edited": false, "score": 0, "creation_date": 1576173991, "post_id": 59290117, "comment_id": 104823008, "body": "I do not see a recursive call in you <code>dfsRecursive</code> method. Also I am not sure why you are using two for loop, IMO first <code>for(int i =0; i &lt;noOfNodes; i++)</code> is not needed"}], "owner": {"reputation": 1, "user_id": 12162023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81527eee6557e06091a0da0484879dd?s=128&d=identicon&r=PG&f=1", "display_name": "softwares12", "link": "https://stackoverflow.com/users/12162023/softwares12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576081700, "creation_date": 1576081526, "last_edit_date": 1576081700, "question_id": 59290117, "link": "https://stackoverflow.com/questions/59290117/dfs-and-bfs-c", "title": "DFS and BFS C++", "body": "<p>I can't find the error in my code. When I run it in the terminal, it says a warning message, not an error, but still doesn't display any results. I am working on a dfsrecursive, BFS, bfs helper, and DFS function. Please help!</p>\n\n<pre><code>void\nGraph::dfs()\n{\n    // reset the labels of all nodes and edges, then calls dfsRecursive on every unexplored node\n\n\n    Node* v=0;\n\n    resetLabels();\n\n    map&lt;string, Node*&gt;::iterator w;\n\n\n    vector&lt;Edge*&gt; incidentEdges;\n\n    for(w= this-&gt;nodeTable-&gt;begin(); w != this-&gt; nodeTable-&gt; end(); w++)\n    {\n        if(w-&gt;second-&gt;getLabel() == (NodeLabel::unexplored))\n            dfsRecursive(w-&gt;second);\n    }\n\n    }\n\n    void\n    Graph::dfsRecursive(Node* v)\n     {\n    // recursively perform a depth-first search starting from the input node v.\n\n\n    vector&lt;Edge*&gt; incidentEdges = v-&gt;getIncidentEdges();\n\n    for(int e=0; e &lt; incidentEdges.size(); e++)\n    {\n        if(incidentEdges[e]-&gt; getLabel() == EdgeLabel::unexplored){\n\n\n            Node* w = incidentEdges[e]-&gt; opposite(v);\n            if(w-&gt;getLabel() == NodeLabel::unexplored){\n\n                incidentEdges[e]-&gt; getLabel() == (EdgeLabel::discovery);\n                w-&gt; setLabel(NodeLabel::visited);\n            }\n\n        }\n\n        else\n            incidentEdges[e]-&gt; setLabel(EdgeLabel::back);\n\n        }\n\n    }\n\n    void\n    Graph::bfs()\n    {\n\n\n    int size = 0;\n    int* bfsarray[size];\n\n    int begin = 0;\n    int** adjMatrix;\n    int noOfNodes;\n\n    bool* visited = new bool[noOfNodes];\n\n    for(int i =0; i &lt;noOfNodes; i++)\n    {\n\n        visited[i] = false;\n\n        list&lt;int&gt; queue;\n        visited[begin] =true;\n        queue.push_back(begin);\n\n        while(!queue.empty()){\n\n            begin  = queue.front();\n            cout &lt;&lt; begin;\n\n            queue.pop_front();\n            for(int i =0; i &lt; noOfNodes; i++){\n\n                if(adjMatrix[begin][i] == 1 &amp;&amp; !visited[i]){\n\n                    visited[i] = true;\n                    queue.push_back(i);\n                }\n\n\n            }\n\n        }\n\n    }\n\n\n\n\n    }\n\n    void\n    Graph::bfsHelper(Node* s)\n   {\n\n    vector&lt;Edge*&gt; incidentEdges = s-&gt; getIncidentEdges();\n    if(s-&gt;getLabel() == NodeLabel::unexplored &amp;&amp; s == nodeTable-&gt;begin()-&gt;second){\n\n        s-&gt;setLabel(NodeLabel::visited);\n    }\n\n    for(int i =0; i &lt; s-&gt; getIncidentEdges().size(); i++)\n    {\n\n        if(incidentEdges[i]-&gt; getLabel() == (EdgeLabel:: unexplored))\n        {\n\n            Node* e = incidentEdges[i] -&gt; opposite(s);\n            if(e-&gt;getLabel() == NodeLabel::unexplored)\n            {\n                incidentEdges[i] -&gt; setLabel(EdgeLabel::discovery);\n                e-&gt;setLabel(NodeLabel::visited);\n\n\n            }\n            else{\n\n                incidentEdges[i]-&gt;setLabel(EdgeLabel::cross);\n            }\n        }\n\n\n    }\n\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "sorting", "quicksort", "mergesort"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1576081189, "post_id": 59289957, "comment_id": 104784943, "body": "You may be running out of <i>stack</i> space.  Try declaring the array as static or moving it outside of <code>main()</code>."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 3, "creation_date": 1576081357, "post_id": 59289957, "comment_id": 104785032, "body": "just use <code>std::vector</code> instead C-array as it should be done from begging."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 2, "creation_date": 1576081471, "post_id": 59289957, "comment_id": 104785097, "body": "If this isn&#39;t some sort of assignment, consider using <code>std::vector</code> and <code>std::sort</code>."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1576081766, "post_id": 59289957, "comment_id": 104785236, "body": "definitely running out of stack space, 500K integers requires 8MB of memory which just happens to be the default stack size on Linux and Mac."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1576081816, "post_id": 59289957, "comment_id": 104785264, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/17617794/stack-heap-overflow-when-declaring-a-large-array\">Stack/heap overflow when declaring a large array</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1576085486, "post_id": 59289957, "comment_id": 104787086, "body": "<code>srand(time(NULL));</code> does <i>not</i> belong in <i>any</i> repetition-called code, and in your case, that means <code>RPartition</code>. Remove that line."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1576234734, "creation_date": 1576234734, "answer_id": 59321181, "question_id": 59289957, "link": "https://stackoverflow.com/questions/59289957/quicksort-does-not-work-with-large-arrays/59321181#59321181", "title": "Quicksort does not work with large arrays", "body": "<p>The explanation is very simple: you allocate the array as a local variable with automatic storage (aka <em>on the stack</em>), hence if the size is too large, you get a <em>stack overflow</em>.</p>\n\n<p>You should either allocate the array from the heap or define it as static data.</p>\n\n<p>Here is a modified version:</p>\n\n<pre><code>int main() {\n    srand(time(NULL));\n\n    int *A = new int[N];\n    for (int i = 0; i &lt; N; i++) {\n        A[i] = rand();\n    }\n\n    cout &lt;&lt; \"Array non ordinato\\n\";\n    Stampa(A, N);\n\n    auto start = std::chrono::system_clock::now();\n    QuickSort(A, 0, N - 1);\n    auto end = std::chrono::system_clock::now();\n\n    cout &lt;&lt; \"\\nArray ordinato\\n\";\n    Stampa(A, N);\n\n    std::chrono::duration&lt;double&gt; elapsed = end - start;\n    cout &lt;&lt; \"Elapsed time: \" &lt;&lt; elapsed.count() &lt;&lt; \"s\";\n    delete[] A;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9057026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066c96192cb0192dc97877ca6cd8e2aa?s=128&d=identicon&r=PG&f=1", "display_name": "Luigi105", "link": "https://stackoverflow.com/users/9057026/luigi105"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576234734, "creation_date": 1576080970, "last_edit_date": 1576234523, "question_id": 59289957, "link": "https://stackoverflow.com/questions/59289957/quicksort-does-not-work-with-large-arrays", "title": "Quicksort does not work with large arrays", "body": "<p>I'm trying to sort large arrays with Quicksort and Mergesort to evaluate performances.</p>\n\n<p>I've a problem: if I impose a large number of elements in an array, the program does not start to generate values randomly. In the code below, if <code>N=500000</code>, it works very well. If <code>N &gt; 500000</code>, for example <code>1000000</code>, it does not work. With MergeSort the limit is <code>200000</code>. I tried on multiple devices, C++ on Eclipse IDE.</p>\n\n<p>Someone knows how to solve the problem?</p>\n\n<pre><code>#define N 800000\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\nvoid Exchange(int *a, int *b) {\n    int temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nint Partition(int A[], int p, int r) {\n     int x = A[r];\n     int i = p - 1;\n     for (int j = p; j &lt;= r; j++) {\n         if (A[j] &lt; x) {\n             i++;\n             Exchange(&amp;A[i], &amp;A[j]);\n         }\n\n    }\n    Exchange(&amp;A[i + 1], &amp;A[r]);\n    return i + 1;\n}\n\nint RPartition(int A[], int p, int r) {\n    srand(time(NULL));\n    int i = p + rand() % (p - r);\n    Exchange(&amp;A[i], &amp;A[r]);\n    return Partition(A, p, r);\n}\n\nvoid QuickSort(int A[], int p, int r) {\n    if (p &lt; r) {\n        int q = RPartition(A, p, r);\n        QuickSort(A, p, q - 1);\n        QuickSort(A, q + 1, r);\n    }\n}\n\nvoid Stampa(int A[], int n) {\n    for (int i = 0; i &lt; n; i++) {\n        cout &lt;&lt; A[i] &lt;&lt; \"\\n\";\n    }\n}\n\nint main() {\n    srand(50000);\n    int A[N];\n    for (int i = 0; i &lt; N; i++) {\n        A[i] = rand();\n    }\n\n    cout &lt;&lt; \"Array non ordinato\\n\";\n    Stampa(A, N);\n    auto start = std::chrono::system_clock::now();\n    QuickSort(A, 0, N - 1);\n    auto end = std::chrono::system_clock::now();\n    cout &lt;&lt; \"\\nArray ordinato\\n\";\n    Stampa(A, N);\n    std::chrono::duration&lt;double&gt; elapsed = end - start;\n    cout &lt;&lt; \"Elapsed time: \" &lt;&lt; elapsed.count() &lt;&lt; \"s\";\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "primes", "largenumber", "primality-test"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1576081102, "post_id": 59289922, "comment_id": 104784896, "body": "This references a large integer library with a test for prime <a href=\"https://stackoverflow.com/questions/52767319/big-primes-loop-with-gmp-library-c\" title=\"big primes loop with gmp library c\">stackoverflow.com/questions/52767319/&hellip;</a> There are several choices out there."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1576081121, "post_id": 59289922, "comment_id": 104784908, "body": "You won&#39;t like me for saying this, but ditch the whole string way of modelling a number, and use a large number library. The one in Boost is excellent, and even gives you cute <code>typedef</code>s like <code>uint1024_t</code>. Then it&#39;s a matter of doing the mathematics. Google <i>probable prime</i> as a starting point."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1576081453, "post_id": 59289922, "comment_id": 104785088, "body": "Although it&#39;s fun writing prime number algorithms, mathematicans dedicate their professional lives to the field, so it&#39;s a good idea to leverage their work!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1576081638, "post_id": 59289922, "comment_id": 104785173, "body": "if you want to do it just for the fun of it I would suggest to implement the missing basic operations (subtraction, modulo,..) and try the &quot;normal&quot; prime test. Dont expect it to be fast, but it will be a starting point for refinement"}, {"owner": {"reputation": 3, "user_id": 5529766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c896b9078b8f0c136f45229e3d6c09f3?s=128&d=identicon&r=PG&f=1", "display_name": "moreQthanAs", "link": "https://stackoverflow.com/users/5529766/moreqthanas"}, "edited": false, "score": 0, "creation_date": 1576091714, "post_id": 59289922, "comment_id": 104789860, "body": "How would I implement the missing basic operation of modulo?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1576098802, "post_id": 59289922, "comment_id": 104792892, "body": "Divide two numbers with pen and paper ... this gives you divisor and remainder. Implement that in code; won&#39;t be fast but gives you a starting point"}], "owner": {"reputation": 3, "user_id": 5529766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c896b9078b8f0c136f45229e3d6c09f3?s=128&d=identicon&r=PG&f=1", "display_name": "moreQthanAs", "link": "https://stackoverflow.com/users/5529766/moreqthanas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576080848, "creation_date": 1576080848, "question_id": 59289922, "link": "https://stackoverflow.com/questions/59289922/testing-for-primality-on-a-large-integer-that-is-stored-as-a-string-in-c", "title": "Testing for primality on a large integer that is stored as a string in C++", "body": "<p>I have a program that calculates large numbers by storing them as strings, so that I can have very large digits that extend beyond long long.</p>\n\n<p>I can add the strings using a function I've written that models how we humans do addition by hand on paper, and it works. I'm able to add large \"string integers\" together accurately, even when they have hundreds of digits in them.</p>\n\n<p>I now want to use this to enumerate large numbers and test for primality. The problem is, I don't know how I would do this on a string-int that is very large, because I can't convert it to a long long and then perform the test.</p>\n\n<p>Are there techniques for testing for prime numbers that would work on the digits of the number or something? How would I try to factor large numbers that are represented as strings, and test if numbers are factors of it, etc? How do I approach this problem?</p>\n"}, {"tags": ["c++", "gcc", "mingw", "codeblocks", "eigen"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1576079938, "post_id": 59289624, "comment_id": 104784225, "body": "You should post the compiler errors.  -- <i>What compilers should I download to use Eigen C++ ?</i> -- I doubt Eigen would fail to compile with any C++14 compliant compiler."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1576080207, "post_id": 59289624, "comment_id": 104784382, "body": "On Linux, I never had problems compiling Eigen with gcc. It is likely that the problem is not in compiler selection"}, {"owner": {"reputation": 151, "user_id": 12497701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f67880dc9bf2e75021d2321480f114?s=128&d=identicon&r=PG&f=1", "display_name": "Uninitialized", "link": "https://stackoverflow.com/users/12497701/uninitialized"}, "edited": false, "score": 0, "creation_date": 1576080251, "post_id": 59289624, "comment_id": 104784405, "body": "The eigen library works well with the g++ compiler! What are the errors you get?"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1576080447, "post_id": 59289624, "comment_id": 104784520, "body": "Please provide a complete and simple test programme"}, {"owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "edited": false, "score": 0, "creation_date": 1576080473, "post_id": 59289624, "comment_id": 104784539, "body": "I will try to add as many error examples as I can. Thanks everyone for instant respond :D"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1576080476, "post_id": 59289624, "comment_id": 104784542, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 2, "creation_date": 1576080816, "post_id": 59289624, "comment_id": 104784747, "body": "Please show the full code you are compiling, including all files in the project and the compiler command line you are invoking and the complete compiler output verbatim."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1576081550, "post_id": 59289624, "comment_id": 104785131, "body": "I have just downloaded the  &quot;Basic linear solving example&quot; from your first link. No problem here to compile with gcc on Linux and execute it."}, {"owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "edited": false, "score": 0, "creation_date": 1576082232, "post_id": 59289624, "comment_id": 104785450, "body": "I just gave an answer for the question. It turns out that the compiler actually work, but Codeblock always give the error in update 2, which is annoying because it makes the program outputs a whole lot of messages and takes 30+ seconds to compile."}, {"owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "edited": false, "score": 0, "creation_date": 1576082834, "post_id": 59289624, "comment_id": 104785796, "body": "Found the solution, thank you everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576082314, "post_id": 59290269, "comment_id": 104785497, "body": "<i>&quot;So now the question is&quot;</i> If you have a new question, ask a separate question. <i>&quot;skipping 3 instantiation contexts&quot;</i> This has to be a part of a longer error/warning message. You&#39;re probably looking at the &quot;Build messages&quot; tab; open &quot;Build log&quot; to see the entire message."}, {"owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576082815, "post_id": 59290269, "comment_id": 104785783, "body": "Anyway, I found the solution. It was such a stupid error with the warning setting. Thank you for your help!"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 2, "creation_date": 1576087295, "post_id": 59290269, "comment_id": 104787950, "body": "@user3192711 For the next time you ask a question: This is exactly the reason we ask for the full compiler output and complete compiler invocation. Seeing that would have made the problem obvious immediately."}], "tags": [], "owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "is_accepted": false, "score": 0, "last_activity_date": 1576082735, "last_edit_date": 1576082735, "creation_date": 1576082138, "answer_id": 59290269, "question_id": 59289624, "link": "https://stackoverflow.com/questions/59289624/which-codeblock-compiler-is-needed-to-use-eigen-c/59290269#59290269", "title": "Which codeblock compiler is needed to use Eigen C++?", "body": "<p>Solution: I just notice that the program actually compile successfully, but it's just that it always gives the error \"[ skipping 3 instantiation contexts, use -ftemplate-backtrace-limit=0 to disable ]\", line 100, file CoreEvaluators.h</p>\n\n<p>So the regular MinGW compiler for Codeblock still works. It's just that it always give that error (+ 20-second long compile where it outputs a bunch of messages like the above).</p>\n\n<p><strong>Updated solution:</strong> OH MY GOD I FEEL SO STUPID. <strong>Disable</strong> the following warning: </p>\n\n<p><strong>Enable Effective-C++ warnings (thanks Scott Meyers) [-Weffc++].</strong> </p>\n\n<p>The \"errors\" (actually warnings) are no longer spammed and the program compiles immediately. For some reasons theese warnings appear as error and cause the compilation process to stop suddenly (making it appears as failed). Pretty much an undebugable error. </p>\n"}], "owner": {"reputation": 180, "user_id": 3192711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148a8f3949371f87321b53cfd58d7e51?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Le", "link": "https://stackoverflow.com/users/3192711/duke-le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1576082735, "creation_date": 1576079856, "last_edit_date": 1576081611, "question_id": 59289624, "link": "https://stackoverflow.com/questions/59289624/which-codeblock-compiler-is-needed-to-use-eigen-c", "title": "Which codeblock compiler is needed to use Eigen C++?", "body": "<p>Currently, I use mingw32-g++.exe (GNU GCC Compiler) for codeblock, with -std=C++14. The compiler was downloaded here: <a href=\"http://www.codeblocks.org/downloads/26\" rel=\"nofollow noreferrer\">http://www.codeblocks.org/downloads/26</a></p>\n\n<p>However, all tutorial programs here fail to compile: <a href=\"https://eigen.tuxfamily.org/dox/group__TutorialLinearAlgebra.html\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox/group__TutorialLinearAlgebra.html</a></p>\n\n<p>The #include has been done correctly. Only the compute lines such as</p>\n\n<p><code>Matrix2f x = A.ldlt().solve(b);</code> and <code>Matrix2f x = A.ldlt().solve(b);</code>\nfails. I also tried using the Intel C++ compiler, but it still fails.</p>\n\n<p>What compilers should I download to use Eigen C++ ? </p>\n\n<p>Thank you very much for your help</p>\n\n<p><strong>Update1:</strong> using the \"Basic linear solving\" example, I get this error:</p>\n\n<p>File IndexedViewHelper.h:</p>\n\n<p>\"undefined reference to Eigen::fix&lt;1>\", line 57</p>\n\n<p>\"Undefined reference to Eigen::fix&lt;0>\"</p>\n\n<p><strong>Update 2:</strong> using the second example <code>A.ldlt().solve(b)</code>, I get this:</p>\n\n<p>\"[ skipping 3 instantiation contexts, use -ftemplate-backtrace-limit=0 to disable ]\", line 100</p>\n\n<p>\"[ skipping 3 instantiation contexts, use -ftemplate-backtrace-limit=0 to disable ]\", line 90</p>\n\n<p>...</p>\n\n<p><strong>Update 3:</strong> Full code + compiler:\nLiterally just one main.cpp file + add eigen folder to search directories </p>\n\n<pre><code>` #include &lt;Eigen/Dense&gt;\nusing namespace std;\nusing namespace Eigen;\nint main()\n{\n   Matrix2f A, b;\n   A &lt;&lt; 2, -1, -1, 3;\n   b &lt;&lt; 1, 2, 3, 1;\n   cout &lt;&lt; \"Here is the matrix A:\\n\" &lt;&lt; A &lt;&lt; endl;\n   cout &lt;&lt; \"Here is the right hand side b:\\n\" &lt;&lt; b &lt;&lt; endl;\n   Matrix2f x = A.ldlt().solve(b);\n   cout &lt;&lt; \"The solution is:\\n\" &lt;&lt; x &lt;&lt; endl;\n}`\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++-standard-library"], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1576080933, "post_id": 59289711, "comment_id": 104784807, "body": "@Fran&#231;oisAndrieux: But you could do <code>std::array name = {1.f, 2.f};</code>, specifying neither the type nor the size."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576081099, "post_id": 59289711, "comment_id": 104784893, "body": "@Fran&#231;oisAndrieux: That&#39;s class template argument deduction. There&#39;s a <a href=\"https://en.cppreference.com/w/cpp/container/array/deduction_guides\" rel=\"nofollow noreferrer\">specific deduction guide for it</a>."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 7, "last_activity_date": 1576080567, "last_edit_date": 1576080567, "creation_date": 1576080092, "answer_id": 59289711, "question_id": 59289612, "link": "https://stackoverflow.com/questions/59289612/what-is-was-the-purpose-of-stdmake-array-is-it-still-needed-in-c20/59289711#59289711", "title": "What is/was the purpose of std::make_array? Is it still needed in C++20?", "body": "<p><code>make_array(1,'2',3,4,5)</code> or <code>make_array&lt;float&gt;(1,'2',3,4,5)</code> would be valid whereas <a href=\"https://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">Class Template Argument Deduction (CTAD)</a> of <a href=\"https://en.cppreference.com/w/cpp/container/array/deduction_guides\" rel=\"nofollow noreferrer\"><code>std::array</code></a> only allows same type.</p>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 59289711, "answer_count": 1, "score": 5, "last_activity_date": 1576080567, "creation_date": 1576079826, "question_id": 59289612, "link": "https://stackoverflow.com/questions/59289612/what-is-was-the-purpose-of-stdmake-array-is-it-still-needed-in-c20", "title": "What is/was the purpose of std::make_array? Is it still needed in C++20?", "body": "<p>I just found that in library fundamentals TS v2 there is a <a href=\"https://en.cppreference.com/w/cpp/experimental/make_array\" rel=\"noreferrer\"><code>make_array</code></a> (<code>std::experimental::make_array</code>) template that allows to deduce an arrays type from its parameters. I guess the main intention was to enable usage of <code>auto</code> similar to the example on cppreference:</p>\n\n<pre><code>auto x = std::experimental::make_array(1,2,3,4,5);\n</code></pre>\n\n<p>Is there a different motivation that I don't see?</p>\n\n<p>With the new type deduction facilites in C++20, can one still expect that <code>make_array</code> will make it into the standard one day, or is it already obsolete?</p>\n"}, {"tags": ["c++", "g++", "fftw", "linkage"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576086180, "post_id": 59289435, "comment_id": 104787421, "body": "Please show the contents of <code>..filepath..\\\\&quot;FFTW learning&quot;</code> so we can help you construct the proper command line."}, {"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576146222, "post_id": 59289435, "comment_id": 104807558, "body": "Thanks for the response. I am on a server system at my university so the filepath is a little odd but it goes as: \\\\tawe_dfs\\students\\1\\1915821\\Desktop\\\\&quot;C++ Programs&quot;\\\\&quot;FFTW learning&quot;"}, {"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576146479, "post_id": 59289435, "comment_id": 104807726, "body": "I also realize that I forgot to include -std=c++11 before the FFTW.cpp command in the above compile command."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576152547, "post_id": 59289435, "comment_id": 104810983, "body": "By contents I meant &quot;what files are there&quot;."}, {"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576154796, "post_id": 59289435, "comment_id": 104812148, "body": "Right, of course. Here&#39;s a link to a screenshot of the folder contents. <a href=\"https://i.stack.imgur.com/qUxS5.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/qUxS5.png</a>"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576154971, "post_id": 59289435, "comment_id": 104812242, "body": "so <code>-llibfftw3-3</code> ?"}, {"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576158627, "post_id": 59289435, "comment_id": 104814310, "body": "Thanks for all the responses, I have tried using -llibfftw3-3 for which I get the error &quot;cannont find -llibfftw3-3&quot; and -Llibfftw3-3 for which I get the original error listed saying that there are undefind references and that the final link has failed."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576159007, "post_id": 59289435, "comment_id": 104814552, "body": "<code>-L</code> tells the linker WHERE to search. <code>-l</code> tells the linker WHAT to link in. So you should add <code>-L..filepath..\\\\&quot;FFTW learning&quot; -lllibfftw3-3</code> You can also just use <code>-L.</code> to point to the current directory."}, {"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576159331, "post_id": 59289435, "comment_id": 104814770, "body": "Thanks for the help Botje, I just stumbled upon that myself."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "edited": false, "score": 0, "creation_date": 1576084962, "post_id": 59290141, "comment_id": 104786820, "body": "Thanks for the response, I have tried using -llibfftw3, -llibfftw3-3, -llibfftwl3-3, and -llibbfftwf3-3. all .dll files included in the .zip file. All these produce the same error. There are no .lib files in the .zip provided by FFTW."}], "tags": [], "owner": {"reputation": 151, "user_id": 12497701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f67880dc9bf2e75021d2321480f114?s=128&d=identicon&r=PG&f=1", "display_name": "Uninitialized", "link": "https://stackoverflow.com/users/12497701/uninitialized"}, "is_accepted": false, "score": 1, "last_activity_date": 1576081620, "creation_date": 1576081620, "answer_id": 59290141, "question_id": 59289435, "link": "https://stackoverflow.com/questions/59289435/fftw-linking-with-g-error-on-windows-machine/59290141#59290141", "title": "FFTW linking with g++ error on windows machine", "body": "<p>Since it is on Windows, I suspect fftw is offered as a .lib file. In which case, you cannot just use <code>-l</code> (only works for .a and .so files), you need to do <code>-llibfftw3</code>. It's a deviation from convention, but Mingw states the same. </p>\n"}, {"comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1576159343, "post_id": 59306311, "comment_id": 104814778, "body": "See my remark about <code>-L.</code> above. <code>-I.</code> works similarly. If you go beyond a single .cpp file, consider writing a Makefile to tie it all together and spare your wrists."}], "tags": [], "owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "is_accepted": true, "score": 0, "last_activity_date": 1576159259, "creation_date": 1576159259, "answer_id": 59306311, "question_id": 59289435, "link": "https://stackoverflow.com/questions/59289435/fftw-linking-with-g-error-on-windows-machine/59306311#59306311", "title": "FFTW linking with g++ error on windows machine", "body": "<p>I was mistaking my linking directory command with the library name command. The correct g++ command comes in as:</p>\n\n<pre><code>g++ -I\\\\tawe_dfs\\students\\1\\1915821\\Desktop\\\\\"C++ Programs\"\\\\\"FFTW learning\" -L\\\\tawe_dfs\\students\\1\\1915821\\Desktop\\\\\"C++ Programs\"\\\\\"FFTW learning\" -std=c++11 FFTW.cpp -llibfftw3-3\n</code></pre>\n\n<p>This error highlights my ignorance as the -L command specifies a directory for the compiler while the -l command specifies a library name.</p>\n\n<p>Thanks to all that helped. </p>\n"}], "owner": {"reputation": 11, "user_id": 12519291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NdwOnkSuKHM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1RZM7ON5R_UP7zhVnAKohwU62jQ/photo.jpg?sz=128", "display_name": "Drew Riley", "link": "https://stackoverflow.com/users/12519291/drew-riley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 59306311, "answer_count": 2, "score": 1, "last_activity_date": 1576159259, "creation_date": 1576079302, "last_edit_date": 1576146582, "question_id": 59289435, "link": "https://stackoverflow.com/questions/59289435/fftw-linking-with-g-error-on-windows-machine", "title": "FFTW linking with g++ error on windows machine", "body": "<p>I am trying to learn to use FFTW on a windows machine compiling using g++ from windows command line. I have read the FFTW manual and search the forums but nothing seems to be the same as my issue. I think I am not understanding how to link to the FFTW library properly. I have downloaded the FFTW3.zip file and copied all the files into the directory that my .cpp file is in. My simple example is to transform a sin wave with the code provided:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;math.h&gt;\n#include&lt;string.h&gt;\n#include&lt;studio.h&gt;\n#include&lt;bits/stdc++.h&gt;\n#include&lt;fftw3.h&gt;\n\n\n\nint main(){\n        int length = 1000;\n        fftw_complex time[length];\n        fftw_complex signal[length];\n        fftw_complex fftsignal[length];\n        double omega = 1;\n        for (int i=0;i&lt;length;i++){\n            time[i][0] = 0.1*i;\n            time[i][1] = 0;\n            signal[i][0] = sin(time[i][0]*omega);\n            signal[i][1] = 0;\n        }\n\n        ofstream savefile;\n        string name = \"sinwave.txt\";\n        savefile.open(name);\n        for (int i=0;i&lt;length;i++){\n            savefile &lt;&lt;time[i][0]&lt;&lt;\"\\t\"&lt;&lt;signal[i][0]&lt;&lt;endl;\n        }\n        savefile.close();\n\n        fftw_plan my_plan;\n\n        my_plan = fftw_plan_dft_1d(length,signal,fftsignal,FFTW_FORWARD,FFTW_ESTIMATE);\n\n        fftw_execute(my_plan);\n        fftw_destroy_plan(my_plan);\n        fftw_free(signal);\n        fftw_free(fftsignal);\n    }\n</code></pre>\n\n<p>The command I use to compile is:</p>\n\n<pre><code>g++ -I..filepath..\\\\\"FFTW learning\" -L..filepath..\\\\\"FFTW learning\" -std=c++11 FFTW.cpp -Lfftw3 -lm\n</code></pre>\n\n<p>The error gives me multiple underfined references to various objects that I cannot locate in the fftw3 file or my own. It futher states that \"the final link failed\" in the last line of the error. </p>\n\n<pre><code>C:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o:FFTW.cpp:(.text+0x1408): undefined reference to `__imp_fftw_plan_dft_1d'\nC:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o:FFTW.cpp:(.text+0x1422): undefined reference to `__imp_fftw_execute'\nC:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o:FFTW.cpp:(.text+0x1435): undefined reference to `__imp_fftw_destroy_plan'\nC:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o:FFTW.cpp:(.text+0x1448): undefined reference to `__imp_fftw_free'\nC:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o:FFTW.cpp:(.text+0x145b): undefined reference to `__imp_fftw_free'\nc:/programs/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/bin/ld.exe: C:\\Users\\1915821\\AppData\\Local\\Temp\\ccnK99CJ.o: bad reloc address 0x0 in section `.pdata'\nc:/programs/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/bin/ld.exe: final link failed: Invalid operation\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>I have also tried using all combinations of upper and lowercase -l for links, all return the error </p>\n\n<pre><code>cannot find -lfftw3\n</code></pre>\n\n<p>If anyone knows how to link properly to these libraries or can spot why my linking does not work I appreciate the help. \nThanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576079069, "post_id": 59289348, "comment_id": 104783713, "body": "Are you getting undefined references?"}, {"owner": {"reputation": 313, "user_id": 8844422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3be47bef1efa5446cfd2409d401d50?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxik CZ", "link": "https://stackoverflow.com/users/8844422/maxxik-cz"}, "edited": false, "score": 3, "creation_date": 1576079130, "post_id": 59289348, "comment_id": 104783746, "body": "Well, what does the error say?"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 3, "creation_date": 1576079226, "post_id": 59289348, "comment_id": 104783813, "body": "You can&#39;t <code>delete data</code> when <code>data</code> is type <code>int</code>"}, {"owner": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576079546, "post_id": 59289348, "comment_id": 104783999, "body": "I have written the definition and implementation of the template in separate files and imported definition with a header file"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1576080290, "post_id": 59289348, "comment_id": 104784427, "body": "&quot;<i>The compiler will report an error,but i can&#39;t find what&#39;s wrong.</i>&quot; Hint: when asking about compiler errors, consider providing said compiler errors in the question."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576080908, "post_id": 59289436, "comment_id": 104784797, "body": "although I delate my destructor,the compiler also says errors like:LNK2019 and LNK1120. What dose that mean?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576081062, "post_id": 59289436, "comment_id": 104784874, "body": "@chris_piglet That mean error codes, but I am not a robot I read error messages in plain language"}, {"owner": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576081361, "post_id": 59289436, "comment_id": 104785034, "body": "Do I have any other errors besides the constructor?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576081508, "post_id": 59289436, "comment_id": 104785114, "body": "@chris_piglet Yes \u2014 read the duplicate question that is linked in the big, blue post notice above."}, {"owner": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "edited": false, "score": 0, "creation_date": 1576081969, "post_id": 59289436, "comment_id": 104785328, "body": "thanks, my friends. Learning c++ is a real challenge"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1576079302, "creation_date": 1576079302, "answer_id": 59289436, "question_id": 59289348, "link": "https://stackoverflow.com/questions/59289348/whys-wrong-with-this-template-how-can-i-compile-it-correctly/59289436#59289436", "title": "Why&#39;s wrong with this template? how can I compile it correctly", "body": "<p>Your destructor as written:</p>\n\n<pre><code>template&lt;typename T&gt;\ntest&lt;T&gt;::~test()\n{\n    delete data;\n}\n</code></pre>\n\n<p>assumes that <code>data</code> is a pointer. As it is declared having type <code>T</code> this means you cannot instantiate it with type <code>int</code> probably <code>int *</code> is the closest, but then your constructor does not make much sense. You probably want to remove <code>delete</code> statement from destructor, but it is difficult to say without seeing the whole picture.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1576081463, "post_id": 59289604, "comment_id": 104785094, "body": "OK you gotta tell me how you managed to post an answer to a closed question."}, {"owner": {"reputation": 151, "user_id": 12497701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f67880dc9bf2e75021d2321480f114?s=128&d=identicon&r=PG&f=1", "display_name": "Uninitialized", "link": "https://stackoverflow.com/users/12497701/uninitialized"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1576081831, "post_id": 59289604, "comment_id": 104785272, "body": "That&#39;s my superpower :P"}], "tags": [], "owner": {"reputation": 151, "user_id": 12497701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f67880dc9bf2e75021d2321480f114?s=128&d=identicon&r=PG&f=1", "display_name": "Uninitialized", "link": "https://stackoverflow.com/users/12497701/uninitialized"}, "is_accepted": false, "score": 0, "last_activity_date": 1576079814, "creation_date": 1576079814, "answer_id": 59289604, "question_id": 59289348, "link": "https://stackoverflow.com/questions/59289348/whys-wrong-with-this-template-how-can-i-compile-it-correctly/59289604#59289604", "title": "Why&#39;s wrong with this template? how can I compile it correctly", "body": "<p>If you wish to use the <code>delete</code> call in your destructor, your class member should almost always be type <code>T*</code>. However, having a member of type T is based on your use-case, and if you do, that member has memory allocated based on how you instantiate your class (calling <code>new()</code> and having it on the heap, or on the stack as you have). In this scenario, deleting the member T also happens when you call <code>delete()</code> on your instantiated class object, or is removed automatically from the stack when your object goes out of scope.</p>\n"}], "owner": {"reputation": 1, "user_id": 12518156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064aa7f0294d11f1dd9376b7f4cca6b0?s=128&d=identicon&r=PG&f=1", "display_name": "chris_piglet", "link": "https://stackoverflow.com/users/12518156/chris-piglet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1576079677, "answer_count": 2, "score": -1, "last_activity_date": 1576079814, "creation_date": 1576079037, "last_edit_date": 1576079094, "question_id": 59289348, "link": "https://stackoverflow.com/questions/59289348/whys-wrong-with-this-template-how-can-i-compile-it-correctly", "closed_reason": "Duplicate", "title": "Why&#39;s wrong with this template? how can I compile it correctly", "body": "<pre><code>#include \"test.h\"\ntemplate&lt;typename T&gt;\ntest&lt;T&gt;::test(const T &amp;elem):data(elem)\n{\n}\n\ntemplate&lt;typename T&gt;\ntest&lt;T&gt;::~test()\n{\n    delete data;\n}\ntemplate&lt;typename T&gt;\nclass test\n{\nprivate:\n    T data;\npublic:\n    test(const T &amp;elem);\n    ~test();\n};\n#include\"test.h\"\nint main()\n{\n    test&lt;int&gt; a(2);\n}\n</code></pre>\n\n<p>Classes and implementations and main functions are written in different files by me, when i try to compile it ,The compiler will report an error,but i can't find what's wrong.</p>\n"}, {"tags": ["c++", "boost", "boost-asio", "asio"], "comments": [{"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 1, "creation_date": 1576077977, "post_id": 59288980, "comment_id": 104783049, "body": "Could you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 405, "user_id": 1590926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05666a44c076a1fbb7853a972982501c?s=128&d=identicon&r=PG", "display_name": "ikku", "link": "https://stackoverflow.com/users/1590926/ikku"}, "reply_to_user": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1576078293, "post_id": 59288980, "comment_id": 104783253, "body": "just added more code, thnx"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1576080829, "post_id": 59288980, "comment_id": 104784756, "body": "are you sure your callback is never triggered? Is the data sent back 1024 or more bytes long? If not <code>async_read</code> will only return when the socket closes."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1576080956, "post_id": 59288980, "comment_id": 104784824, "body": "There&#39;s also a chance <code>notify_one</code> will be called before <code>wait</code> and <code>wait</code> will therefore never return"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 2, "creation_date": 1576081491, "post_id": 59288980, "comment_id": 104785104, "body": "<code>io_service::run</code> is blocking method. It returns only if all handlers were processed and there are no more outstanding handlers. So the chain of actions in your program is: <code>handler1</code> called -&gt; <code>handler2</code> called (which invokes <code>notify_one</code>) -&gt; <code>io_service::run</code> returns -&gt; <code>wait</code> is called, and waits forever, because it was not able to catch notification."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1576179173, "creation_date": 1576179173, "answer_id": 59311571, "question_id": 59288980, "link": "https://stackoverflow.com/questions/59288980/boostasio-doesnt-trigger-the-read-handler-while-wireshark-sees-data-comming/59311571#59311571", "title": "boost::asio doesn&#39;t trigger the read handler, while wireshark sees data comming in", "body": "<p>The problem that @rafix07 calls out is your problem.</p>\n\n<p>Even if you \"fake it out\" by running <code>io_service::run()</code> on another thread, you technically still have a time window for the same race condition.</p>\n\n<p>In general, locking synchronization primitives do not mix with task-based parallelism. In this case it would very much appear you just want to </p>\n\n<ol>\n<li>post another task to the service when the read completes</li>\n<li>expire a timer that you can respond to</li>\n</ol>\n\n<p>In the very simple case of your code, you could even use other, simpler, options:</p>\n\n<ol start=\"3\">\n<li><em>exploit</em> the fact that <code>run()</code> blocks until all handlers completed. That is to say, you can take the sheer fact that <code>run()</code> returned as indication that the read completed:</li>\n<li>don't use asynchronous handlers, since it doesn't serve a purpose (this could be down to oversimplified example code here)</li>\n</ol>\n\n<h2>4. use synchronous IO</h2>\n\n<p>This is by far the simplest. Many other simplifications made throughout the program</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/5a3263028825ac34\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#ifndef NOBOOST\n    #include &lt;boost/asio.hpp&gt;\n    namespace asio = boost::asio;\n    using boost::system::error_code;\n#else\n    #include &lt;asio.hpp&gt;\n    namespace asio = boost::asio;\n    using std::error_code;\n#endif\n\nstatic const int polynomial = 0x1021; // represents x^16+x^12+x^5+1\nuint16_t calc_crc(uint8_t* bytes, std::size_t length) {\n    uint16_t new_crc = 0x0000;\n\n    // bytes part\n    for (std::size_t j = 0; j &lt; length; ++j) {\n        for (int i = 0; i &lt; 8; ++i) {\n            bool bit = ((bytes[j] &gt;&gt; (7 - i) &amp; 1) == 1);\n            bool c15 = ((new_crc &gt;&gt; 15 &amp; 1) == 1);\n            new_crc &lt;&lt;= 1;\n            // If coefficient of bit and remainder polynomial = 1 xor crc with polynomial\n            if (c15 ^ bit)\n                new_crc ^= polynomial;\n        }\n    }\n\n    return new_crc;\n}\n\nint main() {\n    static const std::string ip = \"127.0.0.1\";\n    static const unsigned short portP = 4001, portS = 4002;\n\n    using asio::ip::address;\n\n    asio::io_service io;\n    asio::ip::tcp::socket sPrimary(io), sSecondary(io);\n\n    sPrimary.connect({ address::from_string(ip), portP });\n    sSecondary.connect({ address::from_string(ip), portS });\n\n    uint8_t msg[] {\n        0x02, 0xFF, 0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, //crc\n        0x03\n    };\n\n    {   // set crc\n        uint16_t const crc = calc_crc(msg, sizeof(msg)-3);\n        msg[sizeof(msg)-3] = (uint8_t)(crc &amp; 0xFF);\n        msg[sizeof(msg)-2] = (uint8_t)(crc &gt;&gt; 8);\n    }\n\n    std::string buff;\n\n    auto bytesWritten = asio::write(sPrimary, asio::buffer(msg));\n    std::cout &lt;&lt; bytesWritten &lt;&lt; \" sent\" &lt;&lt; std::endl;\n    auto bytesRead    = asio::read(sPrimary, asio::dynamic_buffer(buff), asio::transfer_exactly(32));\n    std::cout &lt;&lt; bytesRead &lt;&lt; \" received\" &lt;&lt; std::endl;\n\n    for (uint8_t ch : buff)\n        std::cout &lt;&lt; std::hex &lt;&lt; static_cast&lt;int&gt;(ch);\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>9 sent\n32 received\n23696e636c756465203c63737464696e743ea23696e636c756465203c696f73\n</code></pre>\n\n<p>And indeed, that's the hex encoding of the first 32 bytes of <code>main.cpp</code></p>\n\n<h2>3. use implicit completion</h2>\n\n<p>Trust that the handlers ran if <code>run()</code> returns (error handling would be required). The code is essentially the same but with more elaborate concerns around lambda captures and object lifetimes.</p>\n\n<blockquote>\n  <p>Note: all other simplifications still apply</p>\n</blockquote>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/994d8ef57a749781\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>asio::async_write(sPrimary, asio::buffer(msg), [&amp;sPrimary, &amp;buff](error_code ec, size_t bytesWritten) {\n    std::cout &lt;&lt; \"async_write: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesWritten &lt;&lt; \" sent\" &lt;&lt; std::endl;\n    asio::async_read(sPrimary, asio::dynamic_buffer(buff), asio::transfer_exactly(32), [](error_code ec, size_t bytesRead) {\n        std::cout &lt;&lt; \"async_read: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesRead &lt;&lt; \" received\" &lt;&lt; std::endl;\n    });\n});\n\nio.run();\n\nfor (uint8_t ch : buff)\n    std::cout &lt;&lt; std::hex &lt;&lt; static_cast&lt;int&gt;(ch);\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>async_write: Success, 9 sent\nasync_read: Success, 32 received\n23696e636c756465203c63737464696e743ea23696e636c756465203c696f73\n</code></pre>\n\n<h2>2. use a timer signal</h2>\n\n<p>This most closely \"resembles\" the CV approach you had, by using a timer object to represent the condition.</p>\n\n<ul>\n<li>notably, this does error handling better than the above \"3.\" code</li>\n<li>note also, it guarantees to call the completion handler of <code>signal_complete</code> (unless the program terminates prematurely)</li>\n<li>as such, the information is in the <code>expiry()</code> of the timer, not in the error code (the time will <em>always</em> appear canceled)</li>\n</ul>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/947af30a480a0def\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>std::string buff;\nasio::high_resolution_timer signal_complete(io, std::chrono::high_resolution_clock::time_point::max());\nsignal_complete.async_wait([&amp;signal_complete, &amp;buff](error_code ec) {\n     std::cout &lt;&lt; \"signal_complete: \" &lt;&lt; ec.message() &lt;&lt; std::endl;\n\n     if (signal_complete.expiry() &lt; std::chrono::high_resolution_clock::now()) {\n        for (uint8_t ch : buff)\n            std::cout &lt;&lt; std::hex &lt;&lt; static_cast&lt;int&gt;(ch);\n        std::cout &lt;&lt; std::endl;\n     }\n});\n\nasio::async_write(sPrimary, asio::buffer(msg), [&amp;sPrimary, &amp;buff, &amp;signal_complete](error_code ec, size_t bytesWritten) {\n    std::cout &lt;&lt; \"async_write: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesWritten &lt;&lt; \" sent\" &lt;&lt; std::endl;\n    asio::async_read(sPrimary, asio::dynamic_buffer(buff), asio::transfer_exactly(32), [&amp;signal_complete](error_code ec, size_t bytesRead) {\n        std::cout &lt;&lt; \"async_read: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesRead &lt;&lt; \" received\" &lt;&lt; std::endl;\n\n        if (!ec) {\n            signal_complete.expires_at(std::chrono::high_resolution_clock::time_point::min());\n        } else {\n            signal_complete.cancel();\n        }\n    });\n});\n\nio.run();\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>async_write: Success, 9 sent\nasync_read: Success, 32 received\nsignal_complete: Operation canceled\n23696e636c756465203c63737464696e743ea23696e636c756465203c696f73\n</code></pre>\n\n<h2>1. Post another task when read completes</h2>\n\n<p>This is the most natural fit to most async IO scenarios, because it puts all tasks in the same queue.</p>\n\n<p>The only part that is further complicated is getting the life-times of (shared) objects right.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/8f36cd00f2b79c7b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>std::string buff;\n\nasio::async_write(sPrimary, asio::buffer(msg), [&amp;io, &amp;sPrimary, &amp;buff](error_code ec, size_t bytesWritten) {\n    std::cout &lt;&lt; \"async_write: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesWritten &lt;&lt; \" sent\" &lt;&lt; std::endl;\n    asio::async_read(sPrimary, asio::dynamic_buffer(buff), asio::transfer_exactly(32), [&amp;io, &amp;buff](error_code ec, size_t bytesRead) {\n        std::cout &lt;&lt; \"async_read: \" &lt;&lt; ec.message() &lt;&lt; \", \" &lt;&lt; bytesRead &lt;&lt; \" received\" &lt;&lt; std::endl;\n\n        if (!ec) {\n            post(io, [&amp;buff] {\n                for (uint8_t ch : buff)\n                    std::cout &lt;&lt; std::hex &lt;&lt; static_cast&lt;int&gt;(ch);\n                std::cout &lt;&lt; std::endl;\n            });\n        }\n    });\n});\n\nio.run();\n</code></pre>\n\n<p>Printing, again:</p>\n\n<pre><code>async_write: Success, 9 sent\nasync_read: Success, 32 received\n23696e636c756465203c63737464696e743ea23696e636c756465203c696f73\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 1590926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05666a44c076a1fbb7853a972982501c?s=128&d=identicon&r=PG", "display_name": "ikku", "link": "https://stackoverflow.com/users/1590926/ikku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1576179173, "creation_date": 1576077726, "last_edit_date": 1576079200, "question_id": 59288980, "link": "https://stackoverflow.com/questions/59288980/boostasio-doesnt-trigger-the-read-handler-while-wireshark-sees-data-comming", "title": "boost::asio doesn&#39;t trigger the read handler, while wireshark sees data comming in", "body": "<p>I am trying to send some data and act on the reply. I see (using wireshark) that data is sent and received by the system, but <code>boost::asio</code> doesn't trigger my callback. Does somebody has an idea what I am doing wrong?</p>\n\n<pre><code>#include &lt;asio.hpp&gt;\n#include &lt;bits/stdint-uintn.h&gt;\n#include &lt;chrono&gt;\n#include &lt;condition_variable&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n#include &lt;string&gt;\n#include &lt;system_error&gt;\n#include &lt;thread&gt;\n\nstatic const int polynomial = 0x1021; // represents x^16+x^12+x^5+1\nuint16_t calc(uint8_t* bytes, std::size_t length)\n{\n  uint16_t new_crc = 0x0000;\n\n  // bytes part\n  for (std::size_t j = 0; j &lt; length; ++j)\n  {\n    for (int i = 0; i &lt; 8; ++i)\n    {\n      bool bit = ((bytes[j] &gt;&gt; (7 - i) &amp; 1) == 1);\n      bool c15 = ((new_crc &gt;&gt; 15 &amp; 1) == 1);\n      new_crc &lt;&lt;= 1;\n      // If coefficient of bit and remainder polynomial = 1 xor crc with polynomial\n      if (c15 ^ bit) new_crc ^= polynomial;\n    }\n  }\n\n  return new_crc;\n}\n\nint main(int argc, const char* argv[])\n{\n\n  asio::io_service main_io_service;\n\n  std::string ip = \"192.168.100.155\";\n  int portP = 4001, portS = 4002;\n\n  auto sPrimary = std::shared_ptr&lt;asio::ip::tcp::socket&gt;(new asio::ip::tcp::socket(main_io_service));\n  auto sSecondary = std::shared_ptr&lt;asio::ip::tcp::socket&gt;(new asio::ip::tcp::socket(main_io_service));\n  auto epPrimary = asio::ip::tcp::endpoint(asio::ip::address::from_string(ip), portP);\n  auto epSecondary = asio::ip::tcp::endpoint(asio::ip::address::from_string(ip), portS);\n\n  std::error_code ec;\n  sPrimary-&gt;connect(epPrimary, ec);\n  if (ec || !sPrimary-&gt;is_open())\n  {\n    std::cerr &lt;&lt; \"primary failed to connect\" &lt;&lt; std::endl;\n  }\n\n  ec.clear();\n  sSecondary-&gt;connect(epSecondary, ec);\n  if (ec || !sSecondary-&gt;is_open())\n  {\n    std::cerr &lt;&lt; \"secondary failed to connect\" &lt;&lt; std::endl;\n  }\n\n  std::mutex mutex;\n  std::unique_lock&lt;std::mutex&gt; lock(mutex);\n  std::condition_variable cv;\n\n  const std::size_t msgSize = 9;\n  uint8_t msg[msgSize];\n  int i = 0;\n  msg[i++] = 0x02;\n  msg[i++] = 0xFF;\n  msg[i++] = 0x00;\n  msg[i++] = 0x00;\n  msg[i++] = 0x00;\n  msg[i++] = 0x00;\n\n  uint16_t crc = calc(msg, i);\n\n  msg[i++] = (uint8_t) (crc &amp; 0xFF);\n  msg[i++] = (uint8_t) (crc &gt;&gt; 8);\n  msg[i++] = 0x03;\n\n  const std::size_t buffSize = 1024;\n  uint8_t buff[buffSize];\n  std::size_t bytesRead = 0;\n\n  asio::async_write((*sPrimary.get()), asio::buffer(msg, msgSize), [&amp;sPrimary, &amp;cv, &amp;buff, &amp;buffSize, &amp;bytesRead](const std::error_code &amp;ec, std::size_t bytesWritten)\n  {\n    asio::async_read((*sPrimary.get()), asio::buffer(buff, buffSize), [&amp;cv, &amp;bytesRead](const std::error_code &amp;ec, std::size_t currentBytesRead)\n    {\n      bytesRead += currentBytesRead;\n      cv.notify_one();\n    });\n  });\n\n  main_io_service.run();\n\n  cv.wait(lock);\n\n  for (std::size_t i = 0; i &lt; bytesRead; ++i)\n    std::cout &lt;&lt; std::hex &lt;&lt; buff[i];\n\n  main_io_service.stop();\n\n  return 0;\n}\n\n</code></pre>\n\n<p>Just added the whole test code that will compile. Although you need a device that answers. This code talks to a serial server that has a piece of hardware that replies on the sent packet.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "linux", "networking", "epoll"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1576077064, "post_id": 59288735, "comment_id": 104782471, "body": "It sounds like the answer is yes. Well, you can make your program deal with it however you want. That is one way. You could also consider using epoll_ctl to disable EPOLLOUT when you&#39;re not waiting to write data."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1576077416, "post_id": 59288735, "comment_id": 104782674, "body": "@demonatic Is there a good reason for using edge-triggered semantics? A cleaner and more robust way would be to use level-triggered polling and modify the event sets as you need them at the moment."}, {"owner": {"reputation": 67, "user_id": 8735688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N-hjHp-odOg/AAAAAAAAAAI/AAAAAAAAAA0/ZBJnbIvM0DY/photo.jpg?sz=128", "display_name": "demonatic", "link": "https://stackoverflow.com/users/8735688/demonatic"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1576077932, "post_id": 59288735, "comment_id": 104783013, "body": "@Ctx  I use edge trigger mainly to reduce system calls and the number of fds possibly returns from epoll_wait"}], "answers": [{"tags": [], "owner": {"reputation": 5431, "user_id": 212264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1d6c9fc211a9cda08a289aedb76814f2?s=128&d=identicon&r=PG", "display_name": "Ron Burk", "link": "https://stackoverflow.com/users/212264/ron-burk"}, "is_accepted": false, "score": 0, "last_activity_date": 1602657515, "creation_date": 1602657515, "answer_id": 64347850, "question_id": 59288735, "link": "https://stackoverflow.com/questions/59288735/epoll-wait-return-epollout-even-with-epollet-flag/64347850#64347850", "title": "epoll_wait return EPOLLOUT even with EPOLLET flag", "body": "<p>What a great question (since I had pretty much the same question)! I'll just summarize what I think I know now wrt to your informative question/description and your helpful links and hopefully smarter folk will correct any mistakes.</p>\n<p>Yes, the if/else handling of event flags is definitely bogus. For sure at least two can events can arrive at effectively the same time. E.g., both the read and write sides might have become unblocked since last you called <code>epoll_wait()</code>. And, of course, as soon as you <code>accept()</code> the connection, both reading and writing suddenly become possible, so you get an &quot;event&quot; of <code>EPOLLIN|EPOLLOUT</code>.</p>\n<p>I really didn't grok that <code>epoll_wait()</code> is always delivering the entire current state, rather than only the parts of the state that changed -- thanks for clearing that up. To be perhaps clearer, <code>epoll_wait()</code> won't return an fd unless <em>something</em> changed on that socket, but if something did change, it returns all the flags representing the current state. So, I found myself staring at a stream of <code>EPOLLIN|EPOLLOUT</code> events wondering why it was claiming there was an &quot;output&quot; event, even though I hadn't written anything yet. Your answer being correct: it's just telling me the output side is <em>still</em> writeable.</p>\n<p>&quot;Should I maintain a flag...&quot; Yes, but I would imagine that in all but the most trivial situations you were probably going to end up maintaining at least one bit of &quot;am I currently blocked&quot; state for your readers/writers anyway. For example, if you ever want to process data in an order different than how it arrives (e.g., prioritize responses over requests to make your server more resistant to overload) you instantly have to give up the simplicity of just having the arrival of I/O drive everything. In the particular case of writing, epoll simply doesn't have enough information to notify you at the &quot;right&quot; time. As soon as you accept a connection, there's an event that says &quot;you can write now&quot;--but you probably have nothing to write if you're a server who couldn't possibly have already gotten a request from the client. epoll just can't know whether you have something to write or not, so you were always going to have to either suffer essentially &quot;extraneous&quot; events, or maintain your own state.</p>\n<p>In all but the simplest cases, the socket file descriptor ends up being insufficient information for handling I/O events, so you invariably have to associate some data structure with it, or object if you prefer. So, my C++ looks something like:</p>\n<pre><code>nAwake = epoll_wait(epollFd, events, 100, milliseconds);\nif(nAwake &lt; 0)\n    {\n    perror(&quot;epoll_wait failed&quot;);\n    assert(false);\n    }\nfor(int iSocket=0; iSocket &lt; nAwake; ++iSocket)\n    {\n    auto This = static_cast&lt;Eventable*&gt;(events[iSocket].data.ptr);\n    auto eventFlags = events[iSocket].events;\n    fprintf(stderr, &quot;%s event on socket [%d] -&gt; %s\\n&quot;,\n        This-&gt;ClassName(), This-&gt;fd, DumpEvent(eventFlags));\n\n    This-&gt;Event(eventFlags);\n    }\n</code></pre>\n<p>Where <code>Eventable</code> is a C++ class (or derivative thereof) that has all the state needed to decide how to handle the flags epoll delivers. (Of course, this is letting the kernel store a pointer to a C++ object, requiring a design that is very clear about pointer ownership/lifetimes.)</p>\n<p>And since you're writing low-level code on Linux, you may also care about <code>EPOLLRDHUP</code>. This not-highly-portable flag lets you save one call to <code>read()</code>. If the client (curl seems pretty good at evoking this behavior) closes its write side of the connection (sends a FIN), you normally discover that when epoll tells you <code>EPOLLIN</code>, but <code>read()</code> returns zero bytes. However, Linux maintains an extra bit to indicate your client's write side (your read side) has been closed. So, if you tell epoll you want the <code>EPOLLRDHUP</code> event you can use it to avoid doing a <code>read()</code> whose sole purpose will turn out to be telling you the writer closed their side.</p>\n<p>Note that <code>EPOLLIN</code> will still be turned on whenever <code>EPOLLRDHUP</code> is, AFAIK. Even after you do a <code>shutdown(fd, SHUT_RD)</code>. Another example of how you will usually be driven to maintain your own idea of the state of the connection. You care more about clients who are kind enough to do half-shutdowns <a href=\"https://apenwarr.ca/log/20090814\" rel=\"nofollow noreferrer\">if you are implementing HTTP</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8313907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08895f85baa06e35e9e6c16f151c4a4c?s=128&d=identicon&r=PG&f=1", "display_name": "\u738b\u4f20\u4e49", "link": "https://stackoverflow.com/users/8313907/%e7%8e%8b%e4%bc%a0%e4%b9%89"}, "is_accepted": false, "score": 0, "last_activity_date": 1613977697, "creation_date": 1613977697, "answer_id": 66311372, "question_id": 59288735, "link": "https://stackoverflow.com/questions/59288735/epoll-wait-return-epollout-even-with-epollet-flag/66311372#66311372", "title": "epoll_wait return EPOLLOUT even with EPOLLET flag", "body": "<p>When used as an edge-triggered interface, <strong>for performance  reasons,</strong><br />\nit\nis  possible  to  add  the  file  descriptor inside the epoll interface\n(EPOLL_CTL_ADD) once by specifying (EPOLLIN|EPOLLOUT).<br />\nThis allows you\nto  avoid  continuously  <strong>switching</strong> between EPOLLIN and EPOLLOUT calling\nepoll_ctl(2) with EPOLL_CTL_MOD.\n<a href=\"https://i.stack.imgur.com/GgVtd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GgVtd.jpg\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 67, "user_id": 8735688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N-hjHp-odOg/AAAAAAAAAAI/AAAAAAAAAA0/ZBJnbIvM0DY/photo.jpg?sz=128", "display_name": "demonatic", "link": "https://stackoverflow.com/users/8735688/demonatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1613977697, "creation_date": 1576076887, "last_edit_date": 1576081705, "question_id": 59288735, "link": "https://stackoverflow.com/questions/59288735/epoll-wait-return-epollout-even-with-epollet-flag", "title": "epoll_wait return EPOLLOUT even with EPOLLET flag", "body": "<p>I am using linux epoll in edge trigger mode.\nEach time a new connection is incoming, I add the file descriptor to epoll with EPOLLIN|EPOLLOUT|EPOLLET flag. My first question is: What's the right way to check which kind of event(s) occur for each ready file descriptor after the epoll_wait returns? I mean, I see some example code e.g from <a href=\"https://github.com/yedf/handy/blob/master/raw-examples/epoll-et.cc\" rel=\"nofollow noreferrer\">https://github.com/yedf/handy/blob/master/raw-examples/epoll-et.cc</a> line 124 do it like this:</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++) {\n    //...\n    if (events &amp; (EPOLLIN | EPOLLERR)) {\n        if (fd == lfd) {\n            handleAccept(efd, fd);\n        } else {\n            handleRead(efd, fd);\n        }\n    } else if (events &amp; EPOLLOUT) {\n        if (output_log)\n            printf(\"handling epollout\\n\");\n        handleWrite(efd, fd);\n    } else {\n        exit_if(1, \"unknown event\");\n    }\n}\n</code></pre>\n\n<p>What caught my attention is: it uses \"if and else if and else\" to check which event occurs, which means if it handleRead, then it can't handleWrite at the same time. And I think this may cause loss of event in the following condition: Both socket read and write operation have meet EAGAIN and then the remote end both read and send some data, thus the epoll wait may set both EPOLLIN and EPOLLOUT, but it can only handleRead, and the data remaining in output buffer can't be sent since handleWrite is not being called. \nSo is the above usage wrong?</p>\n\n<p>According man 7 epoll QA:</p>\n\n<blockquote>\n  <ol start=\"7\">\n  <li><p>If more than one event occurs between epoll_wait(2) calls, are\n         they combined or reported separately?</p>\n  \n  <p>They will be combined.</p></li>\n  </ol>\n</blockquote>\n\n<p>If i got it right, several events can occur on a single file descriptor between epoll_wait calls. So I think I should use multiple \"if if and if\" to check on by one whether readable/writable/error events occur instead of using \"if and else if\". I went to see how nginx epoll module do, from <a href=\"https://github.com/nginx/nginx/blob/953f53921505a884f3912f2d8db5217a71c0479a/src/event/modules/ngx_epoll_module.c#L867\" rel=\"nofollow noreferrer\">https://github.com/nginx/nginx/blob/953f53921505a884f3912f2d8db5217a71c0479a/src/event/modules/ngx_epoll_module.c#L867</a> I see the following code:</p>\n\n<pre><code>    if (revents &amp; (EPOLLERR|EPOLLHUP)) {\n        //...\n    }\n    if ((revents &amp; EPOLLIN) &amp;&amp; rev-&gt;active) {\n        //....\n        rev-&gt;handler(rev);\n    }\n    if ((revents &amp; EPOLLOUT) &amp;&amp; wev-&gt;active) {\n        //....\n        wev-&gt;handler(wev);\n    }\n</code></pre>\n\n<p>It seems to adhere to my thoughts of checking all EPOLLERR..,EPOLLIN,EPOLLOUT events one after another.\nThen I do the same kind of thing as nginx do in my application. But What I realized after experiment is: if I add the file descriptor to epoll with EPOLLIN|EPOLLOUT|EPOLLET flag, and I didn't fill up the output buffer, I will always get EPOLLOUT flag set after epoll_wait returns due to some data arrives and this fd becomes readable, therefore redundant write_handler would be called, which is not what I expect.</p>\n\n<p>I did some search and found that this situation indeed exists and not caused by any bug in my application. According to the top voted answer at <a href=\"https://stackoverflow.com/questions/12892286/epoll-with-edge-triggered-event\">epoll with edge triggered event</a> says:</p>\n\n<blockquote>\n  <p>On a somewhat related note: if you register for EPOLLIN and EPOLLOUT events and assuming you never fill up the send buffer, you still get the EPOLLOUT flag set in the event returned by epoll_wait each time EPOLLIN is triggered - see <a href=\"https://lkml.org/lkml/2011/11/17/234\" rel=\"nofollow noreferrer\">https://lkml.org/lkml/2011/11/17/234</a> for a more detailed explanation.</p>\n</blockquote>\n\n<p>And the link in this answer says:</p>\n\n<blockquote>\n  <p>It's doesn't mean there's an EPOLLOUT \"event\", it just means a message\n  is triggered (by the socket becoming readable) so you get a status\n  update.  In theory the program doesn't need to be told about EPOLLOUT\n  here (it should be assuming the socket is writable already), but it\n  doesn't do any harm.</p>\n</blockquote>\n\n<p>So far What I understand about epoll <strong>edge trigger</strong> mode is:</p>\n\n<ul>\n<li><p>the epoll_wait return when the state of any fd being monitored has changed, e.g from nothing to read -> readable or buffer is full-> buffer can write</p></li>\n<li><p>the epoll_wait may return one or several event(flags) for each fd in the ready list. </p></li>\n<li><p>the flags in sturct epoll_event.events field indicate the current state of this fd. Even if we don't fill out the output buffer, the EPOLLOUT flag would be set when epoll_wait return due to readable, because the current state of the fd is just writable.</p></li>\n</ul>\n\n<p>Please correct me if I am wrong.\nThen my question would be: Should I maintain a flag in each connection to indicate whether EAGAIN occurs when write to output buffer, if it is not set, don't call write_handler/handleWrite in \"if (events &amp; EPOLLOUT)\" branch, so that my upper layer program would not be told about EPOLLOUT here?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1576076949, "post_id": 59288691, "comment_id": 104782405, "body": "Did you mean to reorder the declarations (or have forward declarations)? As it stands, this code cannot compile because <code>BaseImpl</code> and <code>DerivedImpl</code> are used before they are declared."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1576077086, "post_id": 59288691, "comment_id": 104782484, "body": "Did you forget <code>virtual</code> in the <code>Base</code> class&#39;s function declaration?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1576077225, "post_id": 59288691, "comment_id": 104782569, "body": "<a href=\"https://godbolt.org/z/Zv2GVr\" rel=\"nofollow noreferrer\">Cannot reproduce</a>. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (which will require the code to not be intentionally unsorted)."}, {"owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1576077269, "post_id": 59288691, "comment_id": 104782595, "body": "@MaxLanghof It is irrelevant as my code compiles without override keywords"}, {"owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576077272, "post_id": 59288691, "comment_id": 104782596, "body": "@ChrisMM Sorry, I forgot it in my code sample but not in my actual code"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576077460, "post_id": 59288691, "comment_id": 104782703, "body": "Works fine. See here: <a href=\"https://godbolt.org/z/jXfc7y\" rel=\"nofollow noreferrer\">godbolt.org/z/jXfc7y</a> Which compiler are you using?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1576077460, "post_id": 59288691, "comment_id": 104782704, "body": "@A.Gille It also compiles if you delete all your code. Point being that &quot;it compiles&quot; need not mean &quot;it does what you want&quot;. But the behavior you see is indeed strange - whether you add <code>override</code> or not shouldn&#39;t change whether that error is produced. Can you add the compiler and version you are using?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1576077907, "post_id": 59288691, "comment_id": 104782997, "body": "My guess would be, you only forward-declared <code>BaseImpl</code> and <code>DerivedImpl</code> before defining <code>Base</code> and <code>Derived</code>. So the compiler is not aware that <code>DerivedImpl</code> is in fact derived from <code>BaseImpl</code>. As far as it can tell, these are two unrelated classes, and therefore not covariant."}, {"owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1576078107, "post_id": 59288691, "comment_id": 104783149, "body": "@IgorTandetnik You&#39;re right. Since I don&#39;t want my implementation headers to be linked in interface headers to avoid delivering them, I have to forward declare them instead..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1576078515, "post_id": 59288691, "comment_id": 104783397, "body": "Purpose of pimpl is to hide the class definition from interface... why have <code>virtual</code> method returning it?"}, {"owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1576079487, "post_id": 59288691, "comment_id": 104783960, "body": "@Jarod42 Since <code>pImpl</code> is stored in <code>Base</code>, derived classes need to implement a method down-casting this pointer to their type. Calling <code>getImpl()</code> from base class must return <code>pImpl</code> while calling it from derived class must return a cast of it. Maybe not the best/cleanest solution. Would appreciate better solution if any"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1576079874, "post_id": 59288691, "comment_id": 104784188, "body": "@A.Gille: Maybe just a naming issue, but <code>virtual BaseImpl&amp; getImpl() const;</code> seems wrong. <code>virtual IService&amp; getMyService() const = 0;</code> would be correct."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "edited": false, "score": 0, "creation_date": 1576079530, "post_id": 59289167, "comment_id": 104783980, "body": "I think your last sentence is the root cause of my issue"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1576078927, "last_edit_date": 1576078927, "creation_date": 1576078385, "answer_id": 59289167, "question_id": 59288691, "link": "https://stackoverflow.com/questions/59288691/invalid-covariant-return-type-on-overridden-methods-with-reference-return-types/59289167#59289167", "title": "Invalid covariant return type on overridden methods with reference return types", "body": "<blockquote>\n  <p>Since DerivedImpl derives from BaseImpl and I return references, where is the issue with covariance here?</p>\n</blockquote>\n\n<p>The issue is that the compiler cannot predict whether <code>DerivedImpl</code> would derive from <code>BaseImpl</code> or not. It doesn't yet know that because <code>DerivedImpl</code> isn't yet defined at the point where the overridden function was declared. This could be solved by re-ordering the definitions:</p>\n\n<pre><code>class BaseImpl {  };\nclass DerivedImpl : public BaseImpl {  };\n\nclass Derived : public Base\n{\n  DerivedImpl&amp; getImpl() const override ;\n};\n</code></pre>\n\n<p>If you cannot make the definition of the return type visible at the point of the declaration of the function, then you cannot use covariant return type.</p>\n"}], "owner": {"reputation": 603, "user_id": 5631673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dd8802f901c6e38887ab1dc61b8ef3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gille", "link": "https://stackoverflow.com/users/5631673/a-gille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 59289167, "answer_count": 1, "score": -2, "last_activity_date": 1576081013, "creation_date": 1576076768, "last_edit_date": 1576081013, "question_id": 59288691, "link": "https://stackoverflow.com/questions/59288691/invalid-covariant-return-type-on-overridden-methods-with-reference-return-types", "title": "Invalid covariant return type on overridden methods with reference return types", "body": "<p>I'm implementing inheritence with PIMPL idiom. I have two classes such as :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// In Base.h\nclass Base\n{\n  virtual BaseImpl&amp; getImpl() const;\nprivate:\n  std::unique_ptr&lt;BaseImpl&gt; _pImpl;\n};\n\n// In Derived.h\nclass Derived : public Base\n{\n  DerivedImpl&amp; getImpl() const /* override */;\n};\n\n// In BaseImpl.h\nclass BaseImpl { ... };\n\n// In DerivedImpl.h\nclass DerivedImpl : public BaseImpl { ... };\n</code></pre>\n\n<p>Now if I uncomment the <code>override</code> keyword above, compiler complains that the covariant return type is invalid while overriding <code>getImpl()</code>.</p>\n\n<p>Since <code>DerivedImpl</code> derives from <code>BaseImpl</code> and I return references, where is the issue with covariance here?</p>\n\n<p><strong>NOTE</strong> : This code sample is voluntarily not sorted, classes are in independent files. The issue is only about <code>override</code> keyword. Code compiles without it.</p>\n"}, {"tags": ["c++", "class", "recursion"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1576076870, "post_id": 59288661, "comment_id": 104782357, "body": "In the 2nd loop, <code>if (findPerson(...)) return findPerson(....)</code>. You also need to <code>return nullptr</code> if not found."}, {"owner": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1576077116, "post_id": 59288661, "comment_id": 104782498, "body": "@JohnnyMopp Do you mean add a loop or modify the existing loop?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1576077776, "post_id": 59288661, "comment_id": 104782901, "body": "The most important thing about recursion is that recursive functions work exactly like non-recursive functions. If you called any other function than <code>findPerson</code>, what would the function return?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1576077991, "post_id": 59288661, "comment_id": 104783066, "body": "What do you think this function will return if the <code>if</code> statement is false?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 0, "creation_date": 1576077766, "post_id": 59288847, "comment_id": 104782895, "body": "but I think I need a parameter so that I can make the <code>this</code> points to <code>Person</code> other than <code>Alex</code>? Would&#39;t it always points to the first one if there is no <code>Person*</code> parameter?"}, {"owner": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 0, "creation_date": 1576077930, "post_id": 59288847, "comment_id": 104783012, "body": "for the reason using dynamic objects, this question is  simplified from a question from homework and I&#39;m not allowed to modify the class definition."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 0, "creation_date": 1576077955, "post_id": 59288847, "comment_id": 104783031, "body": "You most likely have a root <code>Person</code> object that is at the top of the tree. You would call this function on that: <code>root.findPerson(&quot;blah&quot;);</code>. Also, if you have any instance of the <code>Person</code> class, you can call the function on that. For example, assume <code>john</code> is a <code>Person</code> object somewhere in the tree. You can search just john&#39;s descendants with <code>john.findPerson(&quot;blah&quot;);</code>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 1, "creation_date": 1576078159, "post_id": 59288847, "comment_id": 104783178, "body": "Note: I had a mistake in the 2nd code block that I just fixed."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 0, "creation_date": 1576078803, "post_id": 59288847, "comment_id": 104783569, "body": "Argh. Another one. I didn&#39;t notice <code>childrenList</code> is an array of pointers. It&#39;s almost lunch time...."}, {"owner": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "edited": false, "score": 1, "creation_date": 1576078892, "post_id": 59288847, "comment_id": 104783622, "body": "nvm I got the idea. Thanks a lot!"}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 3, "last_activity_date": 1576078703, "last_edit_date": 1576078703, "creation_date": 1576077222, "answer_id": 59288847, "question_id": 59288661, "link": "https://stackoverflow.com/questions/59288661/c-return-in-recursion-of-tree/59288847#59288847", "title": "C++ - Return in Recursion of Tree", "body": "<p>You need to:</p>\n\n<ol>\n<li><code>return</code> the result of the recursive call, if successful</li>\n<li><code>return nullptr</code> if the person is not found</li>\n</ol>\n\n<pre><code>const Person* Person::findPerson(const Person* thisPerson, const char* target_name) const {\n    if (strcmp(thisPerson-&gt;name(), target_name) == 0)\n        return thisPerson;\n    for (int i = 0; i &lt; thisPerson-&gt;numChildren(); i++) {\n        const Person *p = findPerson(thisPerson-&gt;childrenList[i], target_name);\n        // Found in child tree? Return it (terminate recursion)\n        if (p) return p;\n    }\n    // Not found in this branch of the tree\n    return nullptr;\n}\n</code></pre>\n\n<p>Although it seems a bit odd to pass a <code>Person</code> pointer to a <code>Person</code> member function. Also, <code>numChildren</code> and <code>name</code> are member variables, not functions.</p>\n\n<p>Shouldn't it be:</p>\n\n<pre><code>const Person* Person::findPerson(const char* target_name) const {\n    if (strcmp(name, target_name) == 0)\n        return this;\n    for (int i = 0; i &lt; numChildren; i++) {\n        const Person *p = childrenList[i]-&gt;findPerson(target_name);\n        // Found in child tree? Return it (terminate recursion)\n        if (p) return p;\n    }\n    // Not found in this branch of the tree\n    return nullptr;\n}\n</code></pre>\n\n<p>And, I am obliged to ask why you are not using <code>std::vector</code> and <code>std::string</code> instead of arrays and char pointers?</p>\n"}], "owner": {"reputation": 37, "user_id": 12509180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c34282756e25a50c028746d18b09c8?s=128&d=identicon&r=PG&f=1", "display_name": "keanehui1", "link": "https://stackoverflow.com/users/12509180/keanehui1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59288847, "answer_count": 1, "score": 0, "last_activity_date": 1576078703, "creation_date": 1576076641, "question_id": 59288661, "link": "https://stackoverflow.com/questions/59288661/c-return-in-recursion-of-tree", "title": "C++ - Return in Recursion of Tree", "body": "<pre><code>class Person {\nprivate:\n    char* name;\n    int numChildren;\n    Person** childrenList;\npublic:\n    Person(char* name);\n    ~Person();\n    // member functions\n        // ...\n};\n</code></pre>\n\n<blockquote>\n  <p>Suppose I create a <code>Person</code> by this code: <code>Person* me = new Person(\"Alex\");</code>, <code>Alex</code>'s descendants' object will also be created. For a specific instance, the structure will be like this: <a href=\"https://i.stack.imgur.com/XkpJZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XkpJZ.jpg\" alt=\"enter image description here\"></a></p>\n</blockquote>\n\n<p>I'd like to implement a function <code>const Person* Person::findPerson(const Person* thisPerson, const char* target_name) const;</code>, that searches through all <code>Person</code> to find the one with <code>name</code> equals <code>target_name</code>.<br>\nHere is my code:</p>\n\n<pre><code>const Person* Person::findPerson(const Person* thisPerson, const char* target_name) const {\n    if (strcmp(thisPerson-&gt;name(), target_name) == 0)\n        return thisPerson;\n    for (int i = 0; i &lt; thisPerson-&gt;numChildren(); i++)\n        findPerson(thisPerson-&gt;childrenList[i], target_name);\n}\n</code></pre>\n\n<p>I think the code will work but the compiler thinks it might returns nothing and don't let me compile it. And also, I don't know how to return <code>nullptr</code> if nobody is found.</p>\n"}, {"tags": ["c++", "waveform"], "answers": [{"tags": [], "owner": {"reputation": 886, "user_id": 7991532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLSXV.jpg?s=128&g=1", "display_name": "zrrbite", "link": "https://stackoverflow.com/users/7991532/zrrbite"}, "is_accepted": false, "score": 0, "last_activity_date": 1602183326, "creation_date": 1602183326, "answer_id": 64268975, "question_id": 59288534, "link": "https://stackoverflow.com/questions/59288534/waveform-widget-touchgfx/64268975#64268975", "title": "Waveform Widget Touchgfx", "body": "<p>With TouchGFX 4.15.0 (just out) the TouchGFX Designer now supports a Graph widget (previously only found in source code in demos) which can be used to produce your waveforms. It has some more elegant ways of inserting points which may suit your needs.</p>\n"}], "owner": {"reputation": 3, "user_id": 12369135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7301d7b580c8c2923b00464d36a2e4d?s=128&d=identicon&r=PG&f=1", "display_name": "bmarasc1", "link": "https://stackoverflow.com/users/12369135/bmarasc1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1602555375, "creation_date": 1576076241, "last_edit_date": 1602555375, "question_id": 59288534, "link": "https://stackoverflow.com/questions/59288534/waveform-widget-touchgfx", "title": "Waveform Widget Touchgfx", "body": "<p>I\u2019m creating a waveform widget in TouchGFX, but unsure how best to loop the waveform back to zero at the end because there are three frame buffers so you have to invalidate over an area three times or you get flickering . How would you handle looping the array back to start (x=0).</p>\n\n<p>The main issue is my code originally assumed there was only one frame buffer. I think my code needs to be refactored for three framebuffers or add the ability to write directly to the frame buffer. Any hints would be greatly appreciated. </p>\n\n<pre><code>  bool Graph::drawCanvasWidget(const Rect&amp; invalidatedArea) const\n  {\nif (numPoints &lt; 3)\n{\n    // A graph line with a single (or not even a single) point is invisible\n    return true;\n}\nelse{\n\nCanvas canvas(this, invalidatedArea);   \nfor (int index = 0; index &lt; (numPoints-1); index++)\n{\n    canvas.moveTo(points[index].x,points[index].y);\n    canvas.lineTo(points[index].x,points[index+1].y);\n    canvas.lineTo(points[index+1].x,points[index+1].y);\n    canvas.lineTo(points[index+1].x,points[index].y);       \n}\nreturn canvas.render(); // Shape above automatically closed\n}\nreturn true;\n  }\n\n  void Graph::newPoint(int y)\n  {\n    if(numPoints==501){\n        numPoints=0;\n    }else if ((maxPoints-numPoints)&lt;=20){\n    points[numPoints].x = numPoints;\n    points[numPoints].y = y;\n    Rect minimalRect(480,0,20,100);\n    invalidateRect(minimalRect);            \n    numPoints++;\n    }else{\n    points[numPoints].x = numPoints;\n    points[numPoints].y = y;\n    Rect minimalRect(numPoints-3,0,20,100);\n    invalidateRect(minimalRect);\n    numPoints++;\n    }\n\n  }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "move-semantics"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1576076409, "post_id": 59288463, "comment_id": 104782107, "body": "<code>Vector d(std::move(a));</code> would use the move constructor. I believe the compiler is optimizing <code>Vector d(Vector(3))</code> to be the same as <code>Vector d(3)</code> to avoid constructing a temporary and then moving it."}, {"owner": {"reputation": 257, "user_id": 9176725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6863fbbb18f5599c9911697dc079b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "J. D.", "link": "https://stackoverflow.com/users/9176725/j-d"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1576078004, "post_id": 59288463, "comment_id": 104783075, "body": "@JamesAdkison compiling with -O0 does not change the output (I&#39;m using the GNU compiler). Is there a way to disable the optimisation?"}, {"owner": {"reputation": 257, "user_id": 9176725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6863fbbb18f5599c9911697dc079b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "J. D.", "link": "https://stackoverflow.com/users/9176725/j-d"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576078135, "post_id": 59288463, "comment_id": 104783162, "body": "@walnut thanks. Apart from this optimisation I was unaware of, are both my attempted move constructors fine? Is one of the two preferable over the other?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1576078916, "post_id": 59288463, "comment_id": 104783639, "body": "@J.D. The second one is a bit convoluted and the first one does too much work. It allocates in the delegated constructor (<code>Vector(v.size_)</code>), while it probably just should call a default-constructor (that you are currently lacking) to set the members to <code>nullptr</code>/<code>0</code>. Then you could also make it, the default-constructor and the <code>swap</code> function <code>noexcept</code> (assuming the <code>cout</code>&#39;s don&#39;t stay there)."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1576081695, "post_id": 59288463, "comment_id": 104785202, "body": "I&#39;m not sure how to disable it. Why would you want to disable it? A quick search provided the following info which may be applicable: &quot;GCC provides the \u2011fno\u2011elide\u2011constructors option to disable copy-elision&quot;"}, {"owner": {"reputation": 257, "user_id": 9176725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6863fbbb18f5599c9911697dc079b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "J. D.", "link": "https://stackoverflow.com/users/9176725/j-d"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1576082040, "post_id": 59288463, "comment_id": 104785360, "body": "@JamesAdkison this flag works, thanks. I think for people who are learning C++ it could be useful to have the compiler generate an executable that is as close as possible to what we write in the source. I also realise that C++ is very much concerned with performance, so it is better to get accustomed to the compiler doing aggressive optimisation even with the -O0 flag.  I also find it strange that compiling the code with <code>Vector d(std::move(Vector(3))); </code>with the flag -Wpessimizing-move does not produce any warning that we are missing out an optimisation opportunity."}], "owner": {"reputation": 257, "user_id": 9176725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6863fbbb18f5599c9911697dc079b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "J. D.", "link": "https://stackoverflow.com/users/9176725/j-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 1, "closed_date": 1576079015, "answer_count": 0, "score": 0, "last_activity_date": 1576076045, "creation_date": 1576076045, "question_id": 59288463, "link": "https://stackoverflow.com/questions/59288463/implementing-a-resource-handling-class-with-move-constructor", "closed_reason": "Duplicate", "title": "Implementing a resource handling class with move constructor", "body": "<p>I am trying to learn move semantics in modern C++.\nIt is my understanding that this construct is useful when designing a class which manages a resource.\nI tried to experiment with this by building a very simple wrapper around C-style arrays, as follows.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// A wrapper around int[] to practice with the rule of three/five\n#include &lt;algorithm&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n\n\nclass Vector {\npublic:\n    Vector(const std::size_t n) : size_(n), data_(new int[n]) {\n    std::cout &lt;&lt; \"called constructor\" &lt;&lt; std::endl; }\n    ~Vector() { delete[] data_;\n    std::cout &lt;&lt; \"called destructor\" &lt;&lt; std::endl; }\n    Vector(const Vector&amp;);\n    Vector&amp; operator=(Vector);\n    friend void swap(Vector&amp;, Vector&amp;);\n    std::size_t size() { return size_; }\n    int&amp; operator[](std::size_t i) { if (i &gt;= size_) throw \"out of bounds\"; return data_[i]; }\n    int operator[](std::size_t i) const { if (i &gt;= size_) throw \"out of bounds\"; return data_[i]; }\n    // move constructor\n    Vector(Vector&amp;&amp; v);\n    // move assignment not needed (see current copy assignment)\n    //Vector&amp; operator=(Vector&amp;&amp;);\nprivate:\n    std::size_t size_;\n    int* data_;\n};\n\n\nvoid swap(Vector&amp; a, Vector&amp; b) {\n    std::swap(a.size_, b.size_);\n    std::swap(a.data_, b.data_);\n}\n\n\nVector::Vector(const Vector&amp; v) :\n  size_(v.size_),\n  data_(new int[v.size_])\n{\n    std::copy(v.data_, v.data_ + v.size_, data_);\n    std::cout &lt;&lt; \"called copy constructor\" &lt;&lt; std::endl;\n}\n\n\nVector::Vector(Vector&amp;&amp; v) :\n  Vector(v.size_)\n{\n    swap(*this, v);\n    std::cout &lt;&lt; \"called move constructor\" &lt;&lt; std::endl;\n}\n\n\nVector&amp; Vector::operator=(Vector v) {\n    std::cout &lt;&lt; \"called copy assignement\" &lt;&lt; std::endl;\n    swap(*this, v);\n    return *this;\n}\n\n\nint main() {\n    Vector a(2);\n    Vector b(6);\n    for (std::size_t i = 0; i &lt; b.size(); ++i) {\n        b[i] = static_cast&lt;int&gt;(i);\n    }\n    a = b;\n    Vector c(b);\n    Vector d(Vector(3));\n}\n\n</code></pre>\n\n<p>I would expect that the last line of code, namely <code>Vector d(Vector(3))</code> would call the move constructor, as I initialise d with an rvalue (or at least I think this is what I am trying to do here).</p>\n\n<p>However, this is the output when executing the program:</p>\n\n<pre><code>called constructor\ncalled constructor\ncalled copy constructor\ncalled copy assignement\ncalled destructor\ncalled copy constructor\ncalled constructor\ncalled destructor\ncalled destructor\ncalled destructor\ncalled destructor\n</code></pre>\n\n<p>It seems that the code is never calling the move constructor.\nWhy is this happening? How can I change my code so that it takes advantage of the move constructor?</p>\n\n<p>I also tried changing the implementation of the move constructor as shown in <a href=\"https://stackoverflow.com/a/5976829/9176725\">this answer</a>, namely:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Vector::Vector(Vector&amp;&amp; v) :\n  size_(std::move(v.size_)),\n  data_(std::move(v.data_))\n{\n    v.size_ = 0;\n    v.data_ = nullptr;\n    std::cout &lt;&lt; \"called move constructor\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>But still the move constructor is not used.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1576076830, "post_id": 59288441, "comment_id": 104782335, "body": "Because when OpenCV calls it, it passes two parameters."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1576078281, "creation_date": 1576078281, "answer_id": 59289149, "question_id": 59288441, "link": "https://stackoverflow.com/questions/59288441/opencv-on-low-height-thresh-trackbar-parameter-clarification/59289149#59289149", "title": "OpenCV on_low_height_thresh_trackbar() parameter clarification", "body": "<p>Since those are callbacks, they are called by OpenCV when the trackbar position changes and you're not supposed to call them yourself.</p>\n\n<p>The <code>int</code> parameter is the new trackbar position, the <code>void*</code> is a pointer to arbitrary \"user data\".</p>\n\n<p>If you pass a pointer as the <code>userdata</code> argument to <code>createTrackbar</code>, that pointer will be passed back to the callback when it is called.<br>\nIn C++, it's very common to pass a pointer to an object as the \"user data\".<br>\nYou could, for instance, write a <code>TrackBar</code> class that encapsulates a trackbar and passes <code>this</code> as the \"user data\".</p>\n\n<p>Most callback interfaces provide a way to let your own data make a \"round trip\" through it in this way.</p>\n"}], "owner": {"reputation": 3, "user_id": 12382628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n0QKdaz_Q4Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfzbVcErgJo-UEByMwZF7Ee4yKFqA/photo.jpg?sz=128", "display_name": "watermelon_shooter", "link": "https://stackoverflow.com/users/12382628/watermelon-shooter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59289149, "answer_count": 1, "score": 0, "last_activity_date": 1576082336, "creation_date": 1576075974, "last_edit_date": 1576082336, "question_id": 59288441, "link": "https://stackoverflow.com/questions/59288441/opencv-on-low-height-thresh-trackbar-parameter-clarification", "title": "OpenCV on_low_height_thresh_trackbar() parameter clarification", "body": "<p>Given the following program code:</p>\n\n<pre><code>void on_low_height_thresh_trackbar(int, void*);\nvoid on_high_height_thresh_trackbar(int, void*);\nint low_height = 50, high_height = 85;\n\nint main()\n{\n    img_Original = cv::imread(\"ROI1.jpg\", 0);\n    cv::medianBlur(img_Original, img_Median, 5);\n\n    cv::namedWindow(\"original image\");\n    cv::namedWindow(\"selected image\");\n\n    cv::createTrackbar(\"Low height\", \"selected image\", &amp;low_height, 255, on_low_height_thresh_trackbar);\n    cv::createTrackbar(\"High height\", \"selected image\", &amp;high_height, 255, on_high_height_thresh_trackbar);\n\n    cv::imshow(\"original image\", img_Original);\n    on_low_height_thresh_trackbar(low_height, 0);\n    on_high_height_thresh_trackbar(high_height, 0);\n\n    cv::waitKey(0);\n    return 0;\n}\n\nvoid on_low_height_thresh_trackbar(int, void*)\n{\n    low_height = cv::min(high_height - 1, low_height);\n    cv::setTrackbarPos(\"Low height\", \"selected image\", low_height);\n    cv::inRange(img_Median, low_height, high_height, img_Ranged);\n    cv::imshow(\"selected image\", img_Ranged);\n}\nvoid on_high_height_thresh_trackbar(int, void*)\n{\n    high_height = cv::max(high_height, low_height + 1);\n    cv::setTrackbarPos(\"High height\", \"selected image\", high_height);\n    cv::inRange(img_Median, low_height, high_height, img_Ranged);\n    cv::imshow(\"selected image\", img_Ranged);\n}\n</code></pre>\n\n<p>why should we need this two formal parameters <code>int</code> and <code>void*</code> in this callback function:</p>\n\n<pre><code>void on_low_height_thresh_trackbar(int, void*)\n</code></pre>\n\n<p>I think they are of no use.</p>\n"}, {"tags": ["c++", "pointers", "struct", "c++17"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1576075809, "post_id": 59288363, "comment_id": 104781779, "body": "<code>node* a =1001;</code> won&#39;t compile."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576075810, "post_id": 59288363, "comment_id": 104781780, "body": "Since you used the C++17 tag specifically, I removed the C tag. C and C++ are different languages and the answer might depend on that. If you wanted to ask about C, please change the C++ tags to a C tag."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1576075912, "post_id": 59288363, "comment_id": 104781824, "body": "Why should the address of <code>b-&gt;next</code> be different from the one to which <code>b</code> is pointing? Where else would <code>b-&gt;next</code> be located, in your opinion? The fact that both are of type <code>node*</code> is irrelevant. Consider: <code>struct S {int n;}; S s; std::cout &lt;&lt; ( (void*)&amp;s == (void*)&amp;s.n );</code> This will print <code>1</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1576076002, "post_id": 59288363, "comment_id": 104781868, "body": "Trying random things is not a good way to learn C++."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576076034, "post_id": 59288363, "comment_id": 104781896, "body": "Pointer are hard and a long topic. I suggest going through the cahpter(s) of a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> on pointers and then see if that answers your question.  Another bit of info that is needed is that for standard layout types (what node is) the address of the class is the same as the address of it&#39;s first member."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576076139, "post_id": 59288474, "comment_id": 104781947, "body": "<i>the first member of a structure points in the same address than the structure itself.</i> This is only guaranteed for standard layout types."}], "tags": [], "owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "is_accepted": false, "score": -1, "last_activity_date": 1597586349, "last_edit_date": 1597586349, "creation_date": 1576076076, "answer_id": 59288474, "question_id": 59288363, "link": "https://stackoverflow.com/questions/59288363/initialization-of-struct-pointer-containing-a-struct-pointer-of-same-type/59288474#59288474", "title": "Initialization of struct pointer containing a struct pointer of same type", "body": "<p>It's a requirement of C++ (modulo memory padding): the first member of a structure is located to the same address as the structure itself.</p>\n<p>For the comparison,\nyou can see it as an array, in the string</p>\n<p><code>abcd</code></p>\n<p>(The <code>a</code> is taken for practical purpose, it is not the same as the <code>a</code> in your question)</p>\n<p>The <code>a</code>, is located to the same location as the string <code>abcd</code>.\nThe string is your structure, and each letter is a field. <code>a</code> can be <code>node::next</code>. The term &quot;pointing to a structure&quot; is a synonym for &quot;pointing to the first byte of the given structure&quot;.</p>\n<p>For example, if the question is, where is the string <code>abcd</code> located in this sequence :</p>\n<p><code>1234abcd56789</code></p>\n<p>You would say <code>4</code> because it's where the <em>first element</em> of the string is. It's juste the same, in most cases, with C++. And <code>a</code> is also located in the position <code>4</code>.</p>\n<p>Note: As mentioned by NathanOlivier, this is only valid for <strong>standard layout types</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1576076441, "last_edit_date": 1576076441, "creation_date": 1576076136, "answer_id": 59288494, "question_id": 59288363, "link": "https://stackoverflow.com/questions/59288363/initialization-of-struct-pointer-containing-a-struct-pointer-of-same-type/59288494#59288494", "title": "Initialization of struct pointer containing a struct pointer of same type", "body": "<blockquote>\n  <p>Lets say I declare a pointer of type node and assign it some starting memory (e.g 1001)</p>\n</blockquote>\n\n<p>For the sake of argument, I'm going to pretend that this code compiles, that you can directly assign an arbitrary integer to a pointer without a <code>reinterpret_cast</code>.</p>\n\n<p><code>a</code> now is what C++ calls an \"invalid pointer\". It is a pointer, but it doesn't point to anything.</p>\n\n<blockquote>\n  <p>Now what happens is that \"b\" points to the same address as \"a\" i.e 1001.</p>\n</blockquote>\n\n<p>That is correct. <code>b</code> is now as invalid as <code>a</code>.</p>\n\n<blockquote>\n  <p>The pointer \"b->next\"</p>\n</blockquote>\n\n<p>Nope. If you dereference an invalid pointer, you get undefined behavior. <code>b</code> does not actually point to a <code>node</code> object, so there is no <code>b-&gt;next</code> pointer. So talking about the value of a <code>b-&gt;next</code> pointer that doesn't exist is meaningless.</p>\n\n<blockquote>\n  <p>the address of the pointer \"b->next\" is the same as the address to which b is pointing i.e 1001.</p>\n</blockquote>\n\n<p>It sounds like what you're actually talking about is the layout of the struct <code>node</code>. The fact that, given some object of type <code>node</code>, the address of that object and the address of its first data member will be the same. Since <code>node</code> is standard layout, that will be true.</p>\n\n<p>But it's important to note that the address of the first data member is not the address that <code>next</code> <em>points to</em>. It is the address of <code>next</code> <em>itself</em>. A pointeris an object, just like any other object, so it has storage in memory. Therefore, you can get a pointer <em>to a pointer</em>. It is that pointer to the <code>next</code> pointer which will have the same address as the <code>node</code> object it lives within, not the <em>value</em> of the <code>next</code> pointer itself.</p>\n\n<p>That is, in a hypothetically valid example, the address of <code>b</code> and <code>&amp;b-&gt;next</code> would be the same.</p>\n"}, {"comments": [{"owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "edited": false, "score": 0, "creation_date": 1576076677, "post_id": 59288602, "comment_id": 104782246, "body": "It&#39;s rationnal: if a = b, f(a) = f(b)."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1576076787, "post_id": 59288602, "comment_id": 104782308, "body": "&quot;could differ&quot; -&gt; &quot;could appear to differ&quot;"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1576076843, "last_edit_date": 1576076843, "creation_date": 1576076430, "answer_id": 59288602, "question_id": 59288363, "link": "https://stackoverflow.com/questions/59288363/initialization-of-struct-pointer-containing-a-struct-pointer-of-same-type/59288602#59288602", "title": "Initialization of struct pointer containing a struct pointer of same type", "body": "<p>Lets take the basic premises, but with a valid example instead:</p>\n\n<pre><code>node* a = new node;\nnode* b = a;\n</code></pre>\n\n<p>Now both <code>a</code> and <code>b</code> are pointing to the very same object, the very same location in memory.</p>\n\n<p>Somewhat graphically it would look like this:</p>\n\n<pre>\n+---+\n| a | --\\\n+---+    \\     +-----------------+\n          >--> | the node object |\n+---+    /     +-----------------+\n| b | --/\n+---+\n</pre>\n\n<p>Because both <code>a</code> and <code>b</code> are pointing to the exact same object, then it follows that <code>a-&gt;next</code> and <code>b-&gt;next</code> must be exactly the same. You could verify it by printing <code>&amp;a-&gt;next</code> and <code>&amp;b-&gt;next</code>.</p>\n\n<p>The only way that the (currently indeterminate) value of <code>a-&gt;next</code> and <code>b-&gt;next</code> could appear to differ is because of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>. First of all because <code>a-&gt;next</code> (and therefore <code>b-&gt;next</code>) is indeterminate, using its value in any way except to initialize it leads to UB. Secondly, if you don't initialize <code>a</code> or <code>b</code> in a correct way (for example you really initialize it as in your question) then you also have UB when you dereference <code>a</code> or <code>b</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12518841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8548f9a2de65c746e847d360f4485680?s=128&d=identicon&r=PG&f=1", "display_name": "Saad_Khan", "link": "https://stackoverflow.com/users/12518841/saad-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1597586349, "creation_date": 1576075716, "last_edit_date": 1576166290, "question_id": 59288363, "link": "https://stackoverflow.com/questions/59288363/initialization-of-struct-pointer-containing-a-struct-pointer-of-same-type", "title": "Initialization of struct pointer containing a struct pointer of same type", "body": "<p>I am trying to understand how the initialization of a pointer to a struct object (which contains a pointer to a struct of the same type) occurs. e.g I have a <code>struct</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct node {\n    node *next;\n  };\n</code></pre>\n\n<p>Suppose I have the starting address of a pool of memory i.e pool is a pointer to the starting location. (For sake of argument lets say the starting memory is <code>1001</code>.)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char* pool[65536];\n</code></pre>\n\n<p>Now I declare a pointer of type <code>node</code> and assign it the starting memory through <code>reinterpret_cast</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>node* a =reinterpret_cast&lt;node *&gt;(pool);\n</code></pre>\n\n<p>Currently <code>a</code> points to the memory <code>1001</code>. Now I declare another pointer</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>node* b;\nb=a;\n</code></pre>\n\n<p>Now what happens is that <code>b</code> points to the same address as <code>a</code> i.e <code>1001</code>. The pointer <code>b-&gt;next</code> points to some random location which is expected but the address of the pointer <code>b-&gt;next</code> is the same as the address to which <code>b</code> is pointing i.e <code>1001</code>. i.e</p>\n\n<pre><code>&amp;b-&gt;next = b\n</code></pre>\n\n<p>I don't understand why the address of <code>b-&gt;next</code> is the same as the one to which pointer <code>b</code> is pointing? According to my understanding <code>b-&gt;next</code> should be located where <code>b</code> is located.</p>\n\n<p>P.S: I have tried to find how this happens but could not find the relevant documentation. If this type of question is already answered in some documentation or another question, please do provide a link.</p>\n\n<p>P.P.S: After discussing this problem further with my colleague, I found out that <code>b</code> is a pointer and not an object. It is pointing to a location (i.e <code>1001</code>) where according to <code>b</code> a node object exists which contains the pointer <code>next</code> and therefore the address of <code>b-&gt;next</code> (<code>&amp;b-&gt;next</code>) is the same as the location to which <code>b</code> is pointing.</p>\n\n<p><img src=\"https://i.stack.imgur.com/vtGNR.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 7, "creation_date": 1576076201, "post_id": 59288265, "comment_id": 104781988, "body": "Please <i>please</i> <i>PLEASE</i> at least <i>glance</i> at the fairly recent <a href=\"https://cloud.r-project.org/web/packages/Rcpp/vignettes/Rcpp-introduction.pdf\" rel=\"nofollow noreferrer\">Rcpp-introduction</a> vignette, and possibly also the <a href=\"https://cloud.r-project.org/web/packages/Rcpp/vignettes/Rcpp-attributes.pdf\" rel=\"nofollow noreferrer\">Rcpp Attributes</a> one.  And/or consider starting from a &#39;create a package with Rcpp&#39; helper such as the one in RStudio or of course our <code>Rcpp.package.skeleton()</code> function written for <i>exactly</i> this purpose."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 6, "creation_date": 1576077612, "post_id": 59288265, "comment_id": 104782798, "body": "&quot;I do not want the lincoef function exported at all&quot; is saying I do not want to call it from R.  You can still control via <code>NAMESPACE</code> what your package exports."}, {"owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 5, "creation_date": 1576079625, "post_id": 59288265, "comment_id": 104784051, "body": "In addition to what @DirkEddelbuettel has said, a look at Writing R Extensions would be a worthwhile investment."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 4, "creation_date": 1576177131, "post_id": 59288265, "comment_id": 104824331, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/46039132/renaming-and-hiding-an-exported-rcpp-function-in-an-r-package\">Renaming and Hiding an Exported Rcpp function in an R Package</a>"}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1576151714, "post_id": 59303671, "comment_id": 104810564, "body": "Nice answer. One trick to add is that <code>&#47;&#47; [[Rcpp::export(.linCoef)]]</code> would be exported <i>from C++</i> to an <i>R function</i> following the &#39;if it starts with a dot it is &quot;hidden&quot; as an R function&#39; convention which would appear to be the desire here.  Then there is no need to change the regexp in <code>NAMESPACE</code> as dot-starting names to not match &#39;starts with alphanumerical character&#39;."}], "tags": [], "owner": {"reputation": 55402, "user_id": 12500315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2liqZ.jpg?s=128&g=1", "display_name": "Allan Cameron", "link": "https://stackoverflow.com/users/12500315/allan-cameron"}, "is_accepted": true, "score": 9, "last_activity_date": 1576150451, "creation_date": 1576150451, "answer_id": 59303671, "question_id": 59288265, "link": "https://stackoverflow.com/questions/59288265/rcpp-calling-c-function-in-r-without-exporting-c-function/59303671#59303671", "title": "Rcpp: calling c++ function in R without exporting c++ function", "body": "<p>I think you're probably mixing up the concept of exporting C++ code to be used in R (via <code>// [[Rcpp::export]]</code>), which is entirely different to exporting R functions from your package, i.e. making those functions available to end-users of your package.</p>\n\n<p>To make your Rcpp functions callable from within R at all, you <em>need</em> to <code>// [[Rcpp::export]]</code> them. If you don't do this, none of your C++ code will be available from within your R package. </p>\n\n<p>It sounds like what you would like to do is to use the Rcpp-exported functions within your package but to hide them from end-users. This is a common use case for Rcpp, as it allows you to have an R function that acts as an end-user interface to your C++ code, while leaving you free to alter the C++ implementation in future developments without the risk of breaking existing users' code.</p>\n\n<p><em>Any</em> function you have created within your package, be it an R function or an Rcpp-exported function, has to actively be <em>exported</em> from your package to make it available to end-users. This is a different concept from <code>// [[Rcpp::export]]</code>, which is needed to access C++ functions from within your package's R code. </p>\n\n<p>Any R functions will only be exported from your R package if you specify them in the <code>NAMESPACE</code> file in your project's root directory. Thus to export <code>myfunction()</code> you need to have a line that says <code>export(myfunction)</code> in the NAMESPACE file. You are using roxygen2, which will generate this line automatically as long as you write <code>@export</code> in the roxygen skeleton. An alternative to using roxygen's exporting system is to specify an <code>exportPattern</code> in the <code>NAMESPACE</code> file that uses regex to export only functions whose names match a certain pattern.</p>\n\n<p>My usual workflow is to prefix any Rcpp-exported functions with a period by writing my C++ functions like this:</p>\n\n<pre><code>// [[Rcpp::export(.MyCppFunction)]]\nint BoringFunction() { return 0; }\n</code></pre>\n\n<p>I can now call the C++ function from R like this:</p>\n\n<pre><code>MyRFunction &lt;- function()\n{\n  result &lt;- .MyCppFunction()\n  return(result)\n}\n</code></pre>\n\n<p>The first line in my <code>NAMESPACE</code> file looks like this:</p>\n\n<pre><code>exportPattern(\"^[[:alpha:]]+\")\n</code></pre>\n\n<p>Which means that any R function in my package starting with a letter will be exported. Since all the functions I <code>Rcpp::export</code> start with a period, I can use them internally within the R package but they won't be exported to end-users.</p>\n\n<p>In other words, end-users of the package can call <code>MyRFunction()</code> but would get an error if they tried to call <code>.MyCppFunction</code></p>\n"}], "owner": {"reputation": 285, "user_id": 10394751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2yTJA.png?s=128&g=1", "display_name": "Aiden Kenny", "link": "https://stackoverflow.com/users/10394751/aiden-kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "accepted_answer_id": 59303671, "answer_count": 1, "score": 0, "last_activity_date": 1576150451, "creation_date": 1576075397, "question_id": 59288265, "link": "https://stackoverflow.com/questions/59288265/rcpp-calling-c-function-in-r-without-exporting-c-function", "title": "Rcpp: calling c++ function in R without exporting c++ function", "body": "<p>I am trying to make a package with Rcpp. I have all of my <code>C++</code> functions in a single <code>.cpp</code> file as follows:</p>\n\n<pre><code>double meanvec(NumericVector x) {\n  int n = x.size();\n  double tot = 0;\n  for (int i = 0; i &lt; n; i++) {\n    tot += x[i];\n  }\n  tot /= n;\n  return tot;\n}\n\ndouble inprod(NumericVector u, NumericVector v) {\n  int m = u.size();\n  double val = 0;\n  for (int i = 0; i &lt; m; i++) {\n    val += u[i] * v[i];\n  }\n  return val;\n}\n\nNumericVector lincoef(NumericVector x, NumericVector y) {\n  int n = x.size();\n  double xm = meanvec(x);\n  double ym = meanvec(y);\n  NumericVector xa(n);\n  for (int i = 0; i &lt; n; i++) {\n    xa[i] = x[i] - xm;\n  }\n  NumericVector ya(n);\n  for (int i = 0; i &lt; n; i++) {\n    ya[i] = y[i] - ym;\n  }\n  double b1 = inprod(xa, ya) / inprod(xa, xa);\n  double b0 = ym - (b1 * xm);\n  NumericVector beta = NumericVector::create(b0, b1);\n  return beta;\n}\n</code></pre>\n\n<p>Basically, the last function takes two vectors as input and outputs a single vector. I would like to call this function into a separate <code>.R</code> file where I am trying to write another function. Something like this:</p>\n\n<pre><code>#' Title\n#'\n#' @param x Numeric vector.\n#' @param y Numeric vector.\n#'\n#' @return\n#' @export\nlinfit338 = function(x, y){\n  beta = .Call(`_pkg338_lincoef`, x, y)\n  fmod = function(x){\n    beta[1] + beta[2]*x\n  }\n  flist = list(beta, fmod)\n  return(flist)\n}\n</code></pre>\n\n<p>Here the output is a list, where the first element is a vector from the <code>C++</code> function being called and the second element is the created function. When I try to install and restart, I get this error message:</p>\n\n<pre><code>RcppExports.o:RcppExports.cpp:(.rdata+0x790): undefined reference to `_pkg338_lincoef'\n</code></pre>\n\n<p>My guess is that is has something to do with exporting the function. When I add <code>// [[Rcpp::export]]</code> above the <code>lincoef</code> function in the <code>C++</code> file, I don't get any error message, and my final <code>R</code> function works. However, my whole goal is that I do not want the <code>lincoef</code> function exported at all. </p>\n\n<p>Any way to fix this? I would also be open to suggestions as to how I can improve organizing these files, as this is my first experience building a package with <code>Rcpp</code>.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 318, "user_id": 11158992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2EkNIAQ1BSY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaGWERYAG6ZiMmgyaHhLHxHZMcKg/mo/photo.jpg?sz=128", "display_name": "smitsyn", "link": "https://stackoverflow.com/users/11158992/smitsyn"}, "edited": false, "score": 0, "creation_date": 1576075188, "post_id": 59288140, "comment_id": 104781419, "body": "If I understand correctly the code that you didn&#39;t post, <code>m_list</code> is a list of Entity_c, which are held by value. The <code>push_back</code> invocation <i>copies</i> values into the list, not moves. Also, looks like copy constructor cannot be generated for Entity_c, probably because it has some non-copyable members (without copy constructor)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1576075189, "post_id": 59288140, "comment_id": 104781420, "body": "<code>Entity_c</code> is not defined like that at all. <code>...</code> is not valid C++."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1576075211, "post_id": 59288140, "comment_id": 104781442, "body": "The <code>...</code> part within <code>Entity_c</code> is where the problem lies. One of the data members must be non-copyable, probably <code>sf::Mutex</code>. And your <code>operator++</code> definition leaks memory. Avoid using <code>new</code> if you&#39;re new to C++."}, {"owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "reply_to_user": {"reputation": 318, "user_id": 11158992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2EkNIAQ1BSY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaGWERYAG6ZiMmgyaHhLHxHZMcKg/mo/photo.jpg?sz=128", "display_name": "smitsyn", "link": "https://stackoverflow.com/users/11158992/smitsyn"}, "edited": false, "score": 0, "creation_date": 1576075286, "post_id": 59288140, "comment_id": 104781486, "body": "@smitsyn to be honnest, it is just too long to post. Everything else (I think) do not help the comprehension. Variables are already explicitly named"}, {"owner": {"reputation": 318, "user_id": 11158992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2EkNIAQ1BSY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaGWERYAG6ZiMmgyaHhLHxHZMcKg/mo/photo.jpg?sz=128", "display_name": "smitsyn", "link": "https://stackoverflow.com/users/11158992/smitsyn"}, "edited": false, "score": 0, "creation_date": 1576075374, "post_id": 59288140, "comment_id": 104781539, "body": "If <code>Entity_c</code> absolutely must be non-copyable, you may hold them in list by <code>std::unique_ptr&lt;Entity_c&gt;</code>. Otherwise, consider making them copyable, and create them without using operator <code>new</code>."}, {"owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1576075381, "post_id": 59288140, "comment_id": 104781544, "body": "@Praetorian okay I still can post the rest of the class if that helps. But why should I avoid using new ?"}, {"owner": {"reputation": 318, "user_id": 11158992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2EkNIAQ1BSY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfaGWERYAG6ZiMmgyaHhLHxHZMcKg/mo/photo.jpg?sz=128", "display_name": "smitsyn", "link": "https://stackoverflow.com/users/11158992/smitsyn"}, "edited": false, "score": 0, "creation_date": 1576075450, "post_id": 59288140, "comment_id": 104781586, "body": "@DiantArts because it leaks memory - operator <code>new</code> allocates <code>Entity_c</code> objects on the free store (heap), but they are not deleted anywhere."}, {"owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "edited": false, "score": 0, "creation_date": 1576075520, "post_id": 59288140, "comment_id": 104781625, "body": "so, there is no difference with malloc ? I know that I&#39;ll have to call delete else where. I don&#39;t want to call new, but If i do not alloc them, those entities will be destroyed at the end of the function"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1576075750, "post_id": 59288140, "comment_id": 104781748, "body": "@DiantArts maybe take a step back and start by reading a <a href=\"https://stackoverflow.com/q/388242/241631\">C++ book</a> for beginners. You don&#39;t need to <code>new</code> within the <code>operator++</code> definition you&#39;ve shown. A typical post-increment operator signature would be <code>List_c List_c::operator++(int)</code> and implementing an increment operator for <code>List_c</code>, assuming it&#39;s a linked-list like class, makes little sense."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "edited": false, "score": 0, "creation_date": 1576076377, "post_id": 59288449, "comment_id": 104782087, "body": "+Thanks a lot. I&#39;ve to say first that I know this ++ isn&#39;t common. I&#39;m just overloading this operator for the practicaly side. it is just better to do <code>list++</code> than <code>list.add_entity()</code>. That said, i don&#39;t really understand why my object should be copied, since I wanna create a new one from the base constructor."}, {"owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "edited": false, "score": 0, "creation_date": 1576076444, "post_id": 59288449, "comment_id": 104782134, "body": "I think C++ is really differente from C, because your first exemple wouldn&#39;t work at all since the entity created would be destroyed at the end of the function. That the only reason why I&#39;ve tried to <code>new</code> it"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "edited": false, "score": 0, "creation_date": 1576076698, "post_id": 59288449, "comment_id": 104782257, "body": "@DiantArts No, they work in the same (safe) way in both languages; the object is copied in both C and C++. When the original is destroyed, the copy still exists. The only way to avoid copying is to use <code>emplace_back</code> to create the object in-place."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1576076000, "creation_date": 1576076000, "answer_id": 59288449, "question_id": 59288140, "link": "https://stackoverflow.com/questions/59288140/note-entity-centity-cconst-entity-c-is-implicitly-deleted-because-the-de/59288449#59288449", "title": "note: \u2018Entity_c::Entity_c(const Entity_c&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:", "body": "<p>The main clues are <code>class SFML_SYSTEM_API Mutex : NonCopyable</code> and \"use of deleted function \u2018sf::Mutex::Mutex(const sf::Mutex&amp;)\" - a <code>sf::Mutex</code> can't be copied, and <code>push_back</code> does exactly that.</p>\n\n<p>Since <code>sf::Mutex</code> can't be copied, neither can (by default) things that have one as a member. </p>\n\n<p>You can make <code>Entity_c</code> copyable by adding a copy constructor that doesn't copy the mutex from the original but creates a new one.<br>\n(Or avoid copying - see below.)</p>\n\n<p>You should also not create the object with <code>new</code> - you're leaking memory.  </p>\n\n<p>Either do this:</p>\n\n<pre><code>Entity_c entity;                                                   \nm_list.push_back(entity);\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>m_list.push_back(Entity_c{});\n</code></pre>\n\n<p>or this, which does not require copying at all:</p>\n\n<pre><code>m_list.emplace_back();\n</code></pre>\n\n<p>(As a side note, that use of <code>++</code> is quite surprising. I doubt that you do this so often that you need very terse syntax for it - I would go with <code>List_c::add_entity()</code> or something like that.)</p>\n"}], "owner": {"reputation": 29, "user_id": 12257925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f361754ddf6a7455bc61b74c1baec42?s=128&d=identicon&r=PG&f=1", "display_name": "DiantArts", "link": "https://stackoverflow.com/users/12257925/diantarts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576076000, "creation_date": 1576074980, "question_id": 59288140, "link": "https://stackoverflow.com/questions/59288140/note-entity-centity-cconst-entity-c-is-implicitly-deleted-because-the-de", "title": "note: \u2018Entity_c::Entity_c(const Entity_c&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:", "body": "<p>I know this question have been already asked and answered, but even with that, I cannot figure it out</p>\n\n<pre><code>    In file included from /usr/include/c++/9.2.0/x86_64-pc-linux-gnu/bits/c++allocator.h:33,\n                     from /usr/include/c++/9.2.0/bits/allocator.h:46,\n                     from /usr/include/c++/9.2.0/list:61,\n                     from src/composants/List/List.hpp:14,\n                     from src/composants/List/List.cpp:8:\n    /usr/include/c++/9.2.0/ext/new_allocator.h: In instantiation of \u2018void __gnu_cxx::new_allocator&lt;_Tp&gt;::construct(_Up*, _Args&amp;&amp; ...) [with _Up = Entity_c; _Args = {const Entity_c&amp;}; _Tp = std::_List_node&lt;Entity_c&gt;]\u2019:\n    /usr/include/c++/9.2.0/bits/alloc_traits.h:482:2:   required from \u2018static void std::allocator_traits&lt;std::allocator&lt;_Tp1&gt; &gt;::construct(std::allocator_traits&lt;std::allocator&lt;_Tp1&gt; &gt;::allocator_type&amp;, _Up*, _Args&amp;&amp; ...) [with _Up = Entity_c; _Args = {const Entity_c&amp;}; _Tp = std::_List_node&lt;Entity_c&gt;; std::allocator_traits&lt;std::allocator&lt;_Tp1&gt; &gt;::allocator_type = std::allocator&lt;std::_List_node&lt;Entity_c&gt; &gt;]\u2019\n    /usr/include/c++/9.2.0/bits/stl_list.h:633:33:   required from \u2018std::__cxx11::list&lt;_Tp, _Alloc&gt;::_Node* std::__cxx11::list&lt;_Tp, _Alloc&gt;::_M_create_node(_Args&amp;&amp; ...) [with _Args = {const Entity_c&amp;}; _Tp = Entity_c; _Alloc = std::allocator&lt;Entity_c&gt;; std::__cxx11::list&lt;_Tp, _Alloc&gt;::_Node = std::_List_node&lt;Entity_c&gt;]\u2019\n    /usr/include/c++/9.2.0/bits/stl_list.h:1907:10:   required from \u2018void std::__cxx11::list&lt;_Tp, _Alloc&gt;::_M_insert(std::__cxx11::list&lt;_Tp, _Alloc&gt;::iterator, _Args&amp;&amp; ...) [with _Args = {const Entity_c&amp;}; _Tp = Entity_c; _Alloc = std::allocator&lt;Entity_c&gt;; std::__cxx11::list&lt;_Tp, _Alloc&gt;::iterator = std::_List_iterator&lt;Entity_c&gt;]\u2019\n    /usr/include/c++/9.2.0/bits/stl_list.h:1208:9:   required from \u2018void std::__cxx11::list&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = Entity_c; _Alloc = std::allocator&lt;Entity_c&gt;; std::__cxx11::list&lt;_Tp, _Alloc&gt;::value_type = Entity_c]\u2019\n    src/composants/List/List.cpp:57:29:   required from here\n    /usr/include/c++/9.2.0/ext/new_allocator.h:145:20: error: use of deleted function \u2018Entity_c::Entity_c(const Entity_c&amp;)\u2019\n      145 |  noexcept(noexcept(::new((void *)__p)\n          |                    ^~~~~~~~~~~~~~~~~~\n      146 |        _Up(std::forward&lt;_Args&gt;(__args)...)))\n          |        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    In file included from src/composants/List/List.cpp:9:\n    src/composants/Entity/Entity.hpp:16:7: note: \u2018Entity_c::Entity_c(const Entity_c&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:\n       16 | class Entity_c {\n          |       ^~~~~~~~\n    src/composants/Entity/Entity.hpp:16:7: error: use of deleted function \u2018sf::Mutex::Mutex(const sf::Mutex&amp;)\u2019\n    In file included from src/composants/List/List.hpp:12,\n                     from src/composants/List/List.cpp:8:\n    /usr/include/SFML/System/Mutex.hpp:47:23: note: \u2018sf::Mutex::Mutex(const sf::Mutex&amp;)\u2019 is implicitly deleted because the default definition would be ill-formed:\n       47 | class SFML_SYSTEM_API Mutex : NonCopyable\n          |                       ^~~~~\n    /usr/include/SFML/System/Mutex.hpp:47:23: error: \u2018sf::NonCopyable::NonCopyable(const sf::NonCopyable&amp;)\u2019 is private within this context\n    In file included from /usr/include/SFML/System/Thread.hpp:32,\n                     from src/composants/List/List.hpp:11,\n                     from src/composants/List/List.cpp:8:\n    /usr/include/SFML/System/NonCopyable.hpp:77:5: note: declared private here\n       77 |     NonCopyable(const NonCopyable&amp;);\n          |     ^~~~~~~~~~~\n    In file included from src/composants/List/List.cpp:9:\n    src/composants/Entity/Entity.hpp:16:7: error: use of deleted function \u2018sf::Mutex::Mutex(const sf::Mutex&amp;)\u2019\n       16 | class Entity_c {\n</code></pre>\n\n<p>I do not understand thoses errors, but I've still figured out which part of my code is throwing it :</p>\n\n<pre><code> 54 void List_c::operator++(int)\n 55 {\n 56     Entity_c *entity = new Entity_c;                                                   \n 57     m_list.push_back(*entity);\n 58 }\n</code></pre>\n\n<p>I have to say that I don't really understand why this is throwing something like (as I understood) I'm trying to call <code>Entity_c::Entity_c(const Entity_c&amp;)</code>.</p>\n\n<p>Entity_c is defined as follow :</p>\n\n<pre><code> 16 class Entity_c {                \n 17 public:                         \n 18     Entity_c();                 \n 19     ~Entity_c();\n ...\n 81 };\n</code></pre>\n\n<p>Well, it is possible that I just didn't understand that error at all, so please, feel free to show me my mistakes.</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 3936, "user_id": 1675804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f375fecf87753c214d732aaa119d59c6?s=128&d=identicon&r=PG", "display_name": "xception", "link": "https://stackoverflow.com/users/1675804/xception"}, "edited": false, "score": 1, "creation_date": 1576074998, "post_id": 59288065, "comment_id": 104781300, "body": "I don&#39;t see where you create <code>clientList[acc]</code>... What is the type of clientList? Did you try debugging? What is happening instead of what you expect? Do you have people with more than 2 names in the file?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1576075045, "post_id": 59288065, "comment_id": 104781337, "body": "Most likely this is a result of a failure of properly checking for the input stream&#39;s error state. What does your debugger show? If you don&#39;t know how to use a debugger this is a good opportunity to learn how to use it to run your program one line at a time, and seeing what happens. Knowing how to use a debugger is a required skill for every C++ developer, no exceptions. With your debugger&#39;s help you should be able to quickly find all bugs in this and all future programs you write, without having to ask anyone for help."}, {"owner": {"reputation": 518, "user_id": 12254159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoWA4.jpg?s=128&g=1", "display_name": "octopus", "link": "https://stackoverflow.com/users/12254159/octopus"}, "edited": false, "score": 0, "creation_date": 1576075648, "post_id": 59288065, "comment_id": 104781693, "body": "@Ya_Boi can you also add the content of your array clientList and how you created the ifstream inFile to the question please?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1576075682, "post_id": 59288065, "comment_id": 104781711, "body": "Please read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">while (!inFile.eof()) considered wrong</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 12215217, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9-mdFZzZY_A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCA6_1SWZGNBaIFtHrAGDxo5ayXw/photo.jpg?sz=128", "display_name": "Ya_Boi", "link": "https://stackoverflow.com/users/12215217/ya-boi"}, "is_accepted": true, "score": 0, "last_activity_date": 1576077021, "creation_date": 1576077021, "answer_id": 59288781, "question_id": 59288065, "link": "https://stackoverflow.com/questions/59288065/reading-from-a-file-and-looping-over-the-file-to-write-to-an-array/59288781#59288781", "title": "Reading from a file, and looping over the file to write to an array", "body": "<p>I think I figured it out through a combination of @Sam Varshavchik and @PaulMcKenzie:</p>\n\n<ul>\n<li>I used the debugger to figure out where my program was failing, it was continuously reading the same line so it had nowhere to exit the loop.</li>\n<li><p>I changed how I was detecting the end file by listing the account number twice and checking to make sure that a new piece of data was read on each loop:</p>\n\n<pre><code>while (**inFile &gt;&gt; beg**) {\n    inFile &gt;&gt; acc;\n    cout &lt;&lt; acc &lt;&lt; endl;\n    clientList[acc].acctNum = acc;\n    inFile &gt;&gt; clientList[acc].pin;\n    inFile &gt;&gt; clientList[acc].firstName;\n    inFile &gt;&gt; clientList[acc].lastName;\n    inFile &gt;&gt; clientList[acc].balance;\n}\n</code></pre></li>\n</ul>\n\n<p>So now my data in my text file looks like this: </p>\n\n<pre><code>1\n1 22 Doug Dimmadome 300\n2\n2 66 Dif Difadif 400\n34\n34 123 Mike Wasowski 666\n44\n44 67 Dale Dalers 600\n99\n99 44 Mitch Turtle 0.02\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12215217, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9-mdFZzZY_A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCA6_1SWZGNBaIFtHrAGDxo5ayXw/photo.jpg?sz=128", "display_name": "Ya_Boi", "link": "https://stackoverflow.com/users/12215217/ya-boi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59288781, "answer_count": 1, "score": 0, "last_activity_date": 1576077021, "creation_date": 1576074721, "last_edit_date": 1576075727, "question_id": 59288065, "link": "https://stackoverflow.com/questions/59288065/reading-from-a-file-and-looping-over-the-file-to-write-to-an-array", "title": "Reading from a file, and looping over the file to write to an array", "body": "<p>I am writing a banking program to practice my c++ skills, and I am stuck on reading/writing from/to a file. I am storing some basic info (name, account number, pin, balance) to a file, and want to be able to read from that file anytime I open the program. I made a simple class called client:</p>\n\n<pre><code>class client\n{\npublic:\nint acctNum;\nstring firstName;\nstring lastName;\nfloat balance;\nint pin;\n}\n</code></pre>\n\n<p>I save the info to a txt file formatted by account number, pin, first name, last name, and balance: </p>\n\n<pre><code>1 88 Doug Dimmadome 5\n</code></pre>\n\n<p>My loop over the input file only reads in the account number though, and continuously does so with no end (inFile is the variable name for my ifstream, and clientList is my variable name for an array of clients):</p>\n\n<pre><code>while (!inFile.eof()) {\n    inFile &gt;&gt; acc;\n    cout &lt;&lt; acc &lt;&lt; endl;\n    clientList[acc].acctNum = acc;\n    inFile &gt;&gt; clientList[acc].pin;\n    inFile &gt;&gt; clientList[acc].firstName;\n    inFile &gt;&gt; clientList[acc].lastName;\n    inFile &gt;&gt; clientList[acc].balance;\n}\n</code></pre>\n\n<p>What am I doing wrong in my loop so that it doesn't properly loop over all the data in the file?</p>\n\n<p>------EDIT------\nI'm adding my variable declaration and opening my file:</p>\n\n<pre><code>client clientList[maxClients];\nclient currTrans;\nint choice = NULL;\nchar atm = 'y';\nifstream inFile;\nofstream file;\nconst string fileName = \"clientList.txt\";\nint acc;\n\n\ninFile.open(fileName);\nif (!inFile.is_open()) {\n    cout &lt;&lt; \"File could not open.\";\n    return 1;\n}\n</code></pre>\n\n<p>And my client constructor:</p>\n\n<pre><code>client::client() {\nacctNum = NULL;\nfirstName = \"\";\nlastName = \"\";\nbalance = NULL;\npin = NULL;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "c", "googletest", "automake"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1576075427, "post_id": 59287962, "comment_id": 104781570, "body": "I do not understand why the close vote.  Although I am not  <code>C++</code> conversant (and so cannot answer), this question appears to be well researched, well presented and includes clear problem statement.  And in case the close voter checks back, please leave a comment letting OP know how to fix problem.  And IMO, <i>This question does not appear to be about programming within the scope defined in the help center.</i> does not describe this post in the least."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "is_accepted": true, "score": 1, "last_activity_date": 1576138753, "creation_date": 1576138753, "answer_id": 59300287, "question_id": 59287962, "link": "https://stackoverflow.com/questions/59287962/fff-fake-function-with-google-test/59300287#59300287", "title": "FFF fake function with google test", "body": "<p>I have a solution but I'm not sure if it's the best one.</p>\n\n<p>When I compile my library I want to test it generates <code>.o</code> files for every <code>.c</code> file I have. As I only want to test <code>libmylib.c</code> I linked only <code>libmylib_la-libmylib.o</code> instead of the <code>.la</code> file.</p>\n\n<p>The generated <code>.o</code> files in <code>src/libmylib/</code> were:</p>\n\n<pre><code>libmylib_la-libmylib.o\nlibmylib_la-private_functions.o\n</code></pre>\n\n<p>My updated <code>MakeFile.am</code> in <code>./test/libmylib_test/</code> looks like this now:</p>\n\n<pre><code>LIBSRC = $(top_srcdir)/src/libstorage\n\ncheck_PROGRAMS = libmylib_test\nlibstorage_test_SOURCES = test.cc\nlibstorage_test_CFLAGS = $(AM_CFLAGS)\nlibstorage_test_CXXFLAGS = -I$(top_srcdir)/include -I$(LIBSRC) -std=c++11 $(AM_CPPFLAGS)\nlibstorage_test_LDFLAGS = $(AM_LDFLAGS) -static -pthread\nlibstorage_test_LDADD = $(top_srcdir)/src/libmylib/libmylib_la-libmylib.o\n</code></pre>\n\n<p>As I had another function in the <code>private_functions.h</code> I had to mock that one too because it was not defined elsewhere.</p>\n\n<p>After these updates the tests compiled without problems and ran fine. </p>\n\n<p>Test file now looks like this:</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"public_header.h\"\n#include \"fff.h\"\n\nextern \"C\" {\n    #include \"private_functions.h\"\n}\n\nDEFINE_FFF_GLOBALS;\n\nFAKE_VALUE_FUNC(int, function, char *, char *);\nFAKE_VOID_FUNC(other_func, char *);\n...\n</code></pre>\n"}], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 59300287, "answer_count": 1, "score": 3, "last_activity_date": 1576138753, "creation_date": 1576074369, "question_id": 59287962, "link": "https://stackoverflow.com/questions/59287962/fff-fake-function-with-google-test", "title": "FFF fake function with google test", "body": "<p>I am trying to test my C library with google test but I'm having trouble mocking functions with the <code>fff.h</code> framework. This is my file structure:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 Makefile.am\n\u251c\u2500\u2500 configure.ac\n\u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Makefile.am\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 public_header.h\n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 libmylib\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 Makefile.am\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 private_functions.c\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 private_functions.h\n\u2502       \u251c\u2500\u2500 libmylib.la\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 libmylib.c\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 libmylib_test\n        \u251c\u2500\u2500 Makefile.am\n        \u251c\u2500\u2500 fff.h\n        \u2514\u2500\u2500 test.cc\n</code></pre>\n\n<p>I want to mock a function from the header <code>private_functions.h</code> which is used in a function from the <code>public_header.h</code> using the <code>fff.h</code> framework.</p>\n\n<pre><code>public_function()\n{\n        private_function(); //This function is the one I want to mock.\n}\n</code></pre>\n\n<p>My test looks like this:</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"public_header.h\"\n#include \"fff.h\"\n\nextern \"C\" {\n    #include \"private_functions.h\"\n}\n\nDEFINE_FFF_GLOBALS;\n\nFAKE_VALUE_FUNC(int, function, char *, char *);\n\nclass libtest : public testing::Test\n{\npublic:       \n    virtual void SetUp()\n    {\n        RESET_FAKE(function);\n    }\n\n    virtual void TearDown()\n    {\n    }\n};\n\nTEST_F(libtest, test_fff)\n{\n    public_function(\"val1\", \"val2\");\n    EXPECT_EQ(function_fake.call_count, 1);\n}\n...\n</code></pre>\n\n<p>When I run make it says that the <code>private_function()</code> is defined multiple times. </p>\n\n<p>My <code>test/libmylib_test/MakeFile.am</code> looks like this:</p>\n\n<pre><code>LIBSRC = $(top_srcdir)/src/libstorage\n\ncheck_PROGRAMS = libmylib_test\nlibstorage_test_SOURCES = test.cc\nlibstorage_test_CFLAGS = $(AM_CFLAGS)\nlibstorage_test_CXXFLAGS = -I$(top_srcdir)/include -I$(LIBSRC) -std=c++11 $(AM_CPPFLAGS)\nlibstorage_test_LDFLAGS = $(AM_LDFLAGS) -static -pthread\nlibstorage_test_LDADD = $(top_srcdir)/src/libmylib/libmylib.la\n</code></pre>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1576074713, "post_id": 59287937, "comment_id": 104781144, "body": "@walnut: See this: <a href=\"https://stackoverflow.com/q/154136/10077\">stackoverflow.com/q/154136/10077</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576075189, "post_id": 59287937, "comment_id": 104781421, "body": "Seems like it would be easier to just have a <code>LOG</code> be a global object which contains the condition <code>printLogs</code> as part of it&#39;s state."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1576075264, "post_id": 59287937, "comment_id": 104781474, "body": "@FredLarson I see, but this isn&#39;t directly the same form asked for here."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576075328, "post_id": 59287937, "comment_id": 104781516, "body": "@Fran&#231;oisAndrieux But then <code>LOG &lt;&lt; someFunction();</code> would call the function even if the log is disabled."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1576075437, "post_id": 59287937, "comment_id": 104781579, "body": "@interjay If the condition is known at compile time you can arrange for it to be removed at compilation. For example, if you make the condition a template argument you can specialize <code>LOG</code>&#39;s type so that <code>operator&lt;&lt;</code> is a NOP when you don&#39;t want to log. Any half way decent optimizer will remove calls to NOP functions."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576075509, "post_id": 59287937, "comment_id": 104781619, "body": "@Fran&#231;oisAndrieux Sure, but we have no reason to believe that the condition is known at compile time."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1576075591, "post_id": 59287937, "comment_id": 104781663, "body": "I&#39;m sure the best ways to create a logger stream have been well covered on this site and elsewhere already"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1576075597, "post_id": 59287937, "comment_id": 104781669, "body": "@interjay I&#39;ve edited my comment, because you are right that the behavior is not entirely known at compile time."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576078180, "post_id": 59287937, "comment_id": 104783202, "body": "<i>&quot;I must be sure that solution would not cause any problems in the same way that the &quot;do while&quot; trick does.&quot;</i> <code>do {...} while(0)</code> is only necessary when you have several statements in one macro. Your macro only contains a single incomplete statement."}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576079068, "post_id": 59287937, "comment_id": 104783712, "body": "@Fran&#231;oisAndrieux for the case of global object see &quot;update 3&quot; in my question"}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1576079182, "post_id": 59287937, "comment_id": 104783788, "body": "@HolyBlackCat I mean you can insert that <code>do while</code> construction anywhere in your code and it will not cause you any problems. I need to be sure that the same holds true for my construction"}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576079542, "post_id": 59287937, "comment_id": 104783989, "body": "@Fran&#231;oisAndrieux I gave an explanation why compiler is NOT allowed to do this optimization. This optimization is NOT correct. If you still do not believe you could follow the last link in the &quot;update 3&quot;"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576080355, "post_id": 59287937, "comment_id": 104784471, "body": "@SaveMyLife While I&#39;m not convinced that this optimization can&#39;t happen, you&#39;re right that it doesn&#39;t here. If you could point to a language rule that makes the optimization illegal, I would be very curious to read it. But either way, have you considered using a function call syntax instead? Then you only have to check the branch once. Edit : For example <a href=\"https://godbolt.org/z/-mNr3M\" rel=\"nofollow noreferrer\">godbolt.org/z/-mNr3M</a>"}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576082021, "post_id": 59287937, "comment_id": 104785350, "body": "@Fran&#231;oisAndrieux 1) This optimization is illegal because compiler does not see the body of the function, which could contain <code>printLogs = !printLogs;</code>. While you assume that <code>printImpl</code> does not do this, the compile cannot prove this, it sees only the declaration. Thus for the compiler <code>printImpl</code> is a function that could change ANY(even constants) variables, including <code>printLogs</code>. Hence the check is needed after EVERY <code>printImpl</code> call."}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576082144, "post_id": 59287937, "comment_id": 104785402, "body": "@Fran&#231;oisAndrieux 2) as for your function solution -- by all means it is better, except for it is not compatible with the old version. Since I&#39;m not allowed to break compatibility, your solution does not fit my case."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576082688, "post_id": 59287937, "comment_id": 104785713, "body": "@SaveMyLife My false assumption was that the definition of <code>printImpl</code> was visible to the compiler and the missing definition was just for brevity. If in fact it&#39;s not visible then you are entirely correct."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 1, "creation_date": 1576075034, "post_id": 59288028, "comment_id": 104781324, "body": "<code>if (1) LOG &lt;&lt; 1; else LOG &lt;&lt; 2;</code> would be broken"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 0, "creation_date": 1576075584, "post_id": 59288028, "comment_id": 104781659, "body": "@SaveMyLife why would that be broken?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1576075634, "post_id": 59288028, "comment_id": 104781686, "body": "@Ayxan: Because the <code>else </code> would go with the <code>if</code> in the macro instead of the <code>if</code> before the macro."}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 0, "creation_date": 1576076669, "post_id": 59288028, "comment_id": 104782245, "body": "How is that different from my solution? It is still unclear why this would not cause any problems"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 0, "creation_date": 1576077112, "post_id": 59288028, "comment_id": 104782497, "body": "@SaveMyLife: I&#39;d say it&#39;s no less effective than your <code>for</code> loop solution, and probably a bit clearer. By negating the condition and putting the work in the <code>else</code>, it eliminates the <code>else</code> problem of the naive <code>if</code> in the macro."}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1576077231, "post_id": 59288028, "comment_id": 104782570, "body": "@FredLarson the main part of the question is the correctness of the macro and the problems it could cause. This solution is does not differ from mine in that sense"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576083564, "post_id": 59288028, "comment_id": 104786160, "body": "I would undelete your other answer. You may be right about having a member <code>bool</code> enabling the optimization that a global atomic <code>bool</code> prevents."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576086941, "post_id": 59288028, "comment_id": 104787794, "body": "@Fran&#231;oisAndrieux looks like almost all compilers inline the function call but non optimizes the <code>if (active)</code> out. I wonder why <a href=\"https://godbolt.org/z/4kKH5N\" rel=\"nofollow noreferrer\">godbolt.org/z/4kKH5N</a>"}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 2, "last_activity_date": 1576077435, "last_edit_date": 1576077435, "creation_date": 1576074608, "answer_id": 59288028, "question_id": 59287937, "link": "https://stackoverflow.com/questions/59287937/c-c-can-for-loop-be-used-in-a-marco-instead-of-do-while/59288028#59288028", "title": "C/C++ Can &quot;for loop&quot; be used in a marco instead of &quot;do while&quot;?", "body": "<p>You can do it like this:</p>\n\n<pre><code>#define LOG if (!printLogs){} else PrinterClass()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 0, "creation_date": 1576082606, "post_id": 59290242, "comment_id": 104785667, "body": "This will definitely work. Thank you. I&#39;m still interested in the correctness of your first solution. If you have any ideas feel free to extend this answer :)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576082880, "post_id": 59290242, "comment_id": 104785819, "body": "It doesn&#39;t actually work as written. Only the first argument is ignored in the <code>&lt;&lt;</code> chain if the logging condition is false. You would need to return a non-printing stream object when the condition is false, and then the return type is not known at compile time."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576082968, "post_id": 59290242, "comment_id": 104785872, "body": "@Fran&#231;oisAndrieux you&#39;re right. Let me see how I can fix it."}, {"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576083122, "post_id": 59290242, "comment_id": 104785948, "body": "@Fran&#231;oisAndrieux thank you! Actually I do not see any way it could be fixed"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1576087879, "post_id": 59290242, "comment_id": 104788211, "body": "Related question : <a href=\"https://stackoverflow.com/questions/59291618/is-this-a-missed-optimization-opportunity-or-not\" title=\"is this a missed optimization opportunity or not\">stackoverflow.com/questions/59291618/&hellip;</a>"}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 0, "last_activity_date": 1576084925, "last_edit_date": 1576084925, "creation_date": 1576082033, "answer_id": 59290242, "question_id": 59287937, "link": "https://stackoverflow.com/questions/59287937/c-c-can-for-loop-be-used-in-a-marco-instead-of-do-while/59290242#59290242", "title": "C/C++ Can &quot;for loop&quot; be used in a marco instead of &quot;do while&quot;?", "body": "<p>If you want an object-oriented solution without the overhead of multiple checks, consider something like this:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;utility&gt;\nvoid printImpl(...);\n\nstd::atomic&lt;bool&gt; printLog;\n\nclass Log {\n public:\n  template &lt;typename T&gt;\n  const auto&amp; operator&lt;&lt;(T&amp;&amp; t) {\n    if (printLog) {\n      ulog.active = true;\n      return ulog &lt;&lt; std::forward&lt;T&gt;(t);\n    } else {\n      ulog.active = false;\n      return ulog;\n    }\n  }\n\n private:\n  struct unchecked_log {\n    template &lt;typename T&gt;\n    const auto&amp; operator&lt;&lt;(T&amp;&amp; t) const {\n      if (active) {\n        printImpl(std::forward&lt;T&gt;(t));\n      }\n      return *this;\n    }\n    bool active{false};\n  };\n  unchecked_log ulog{};\n};\n\n// Instead of the macro. Doesn't break backward compatibility\nLog LOG;\n\nvoid test(bool) { LOG &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3 &lt;&lt; 4 &lt;&lt; 5 &lt;&lt; 6 &lt;&lt; 7 &lt;&lt; 8 &lt;&lt; 9 &lt;&lt; 10; }\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1576084925, "creation_date": 1576074299, "last_edit_date": 1576079409, "question_id": 59287937, "link": "https://stackoverflow.com/questions/59287937/c-c-can-for-loop-be-used-in-a-marco-instead-of-do-while", "title": "C/C++ Can &quot;for loop&quot; be used in a marco instead of &quot;do while&quot;?", "body": "<p>Are the two below constructions equivalent in assumption that \"cond\" is not conflicting with any name in the program</p>\n\n<pre><code>#define DOWHILE do { (some_code); } while (0)\n\n#define FORLOOP for(bool cond = true; cond; cond = false) (some_code)\n</code></pre>\n\n<p>The purpose of this question is:</p>\n\n<p>I have something like this</p>\n\n<pre><code>bool printLogs; // nonconstant dynamic variable\n</code></pre>\n\n<p>And I have a macro(I cannot do big changes, it is a big project; I have to deal with this macro) <code>#define LOG ...</code>\nwhich is used like</p>\n\n<pre><code>LOG &lt;&lt; \"message\" &lt;&lt; 1 &lt;&lt; 0.5 &lt;&lt; 'a';\n</code></pre>\n\n<p>And I want this macro to turn into</p>\n\n<pre><code>if (printLogs) {\n    PrinterClass() &lt;&lt; \"message\" &lt;&lt; 1 &lt;&lt; 0.5 &lt;&lt; 'a';\n}\n</code></pre>\n\n<p>So the printed arguments are not calculated if not printed. In this case my solution is</p>\n\n<pre><code>#define LOG for(cond = printLogs; cond; cond = false) PrinterClass()\n</code></pre>\n\n<p>Is this solution correct? Are there any other ways?</p>\n\n<p><strong>UPDATE:</strong> Obviouse you cannot use a simple <code>if</code> here. For example this code won't work</p>\n\n<pre><code>#define LOG if(printLogs) PrinterClass()\n\nint main() {\n    if (1)\n        LOG &lt;&lt; 1;\n    else\n        LOG &lt;&lt; 2;\n}\n</code></pre>\n\n<p><strong>UPDATE 2:</strong> I expect to see the explanation of the correctness of my or your solution. I must be sure that solution would not cause any problems. You can insert the \"do while\" construction anywhere in your code where you can insert a statement. So \"do while\" behaves as a simple statement. Is that true for my construction?</p>\n\n<p><strong>UPDATE 3:</strong> The solution with global object does not satisfy as it will cause a huge overhead</p>\n\n<pre><code>#include &lt;atomic&gt;\nvoid printImpl(...);\n\nstd::atomic&lt;bool&gt; printLog;\n\nstruct Log {\n    template &lt;typename T&gt;\n    Log&amp; operator&lt;&lt;(const T&amp; t) {\n        if (printLog) { \n            printImpl(t);\n        }\n        return *this;\n    }\n};\n\nint main() {\n   Log() &lt;&lt; 1 &lt;&lt; 2;\n}\n</code></pre>\n\n<p>After all optimizations will turn into</p>\n\n<pre><code>int main() {\n    if (printLog) {\n        printImpl(1);\n    }\n// Still should check because printImpl could have changed this variable.\n// C++ does not provide any way to say \"I promise it won't change printLog\"\n    if (printLog) { \n        printImpl(2);\n    }\n}\n</code></pre>\n\n<p>So you have atomic comparison for each use of &lt;&lt;. See <a href=\"https://godbolt.org/z/sEoUCw\" rel=\"nofollow noreferrer\">https://godbolt.org/z/sEoUCw</a></p>\n"}, {"tags": ["c++", "c", "windows", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1576078726, "last_edit_date": 1576078726, "creation_date": 1576078569, "answer_id": 59289219, "question_id": 59287731, "link": "https://stackoverflow.com/questions/59287731/windows-wmi-what-is-the-difference-and-order-between-win32-processstarttrace/59289219#59289219", "title": "Windows WMI - What is the difference (and order) between Win32_ProcessStartTrace and __InstanceCreationEvent?", "body": "<p><code>_InstanceCreationEvent</code> has a <code>TargetInstance</code> field, which for a new process is a <a href=\"https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-process\" rel=\"nofollow noreferrer\"><code>Win32_Process</code></a> object, which has most of the same fields (and more) that <code>Win32_ProcessStartTrace</code> provides. </p>\n"}], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 59289219, "answer_count": 1, "score": 1, "last_activity_date": 1576078726, "creation_date": 1576073663, "question_id": 59287731, "link": "https://stackoverflow.com/questions/59287731/windows-wmi-what-is-the-difference-and-order-between-win32-processstarttrace", "title": "Windows WMI - What is the difference (and order) between Win32_ProcessStartTrace and __InstanceCreationEvent?", "body": "<p>Just getting started with WMI, and I am trying to understand what is the difference between <strong>Win32_ProcessStartTrace</strong> and <strong>__InstanceCreationEvent</strong>. They both are available when a new process starts, however which one is first ?</p>\n\n<p>I have tested several examples provided by Microsoft and I cannot see any major difference like performance issues, besides the fact that one provides some useful=l information and the other does not. (or does it?)</p>\n\n<p>From the documentantion for <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/desktop/krnlprov/win32-processstarttrace\" rel=\"nofollow noreferrer\">Win32_ProcessStartTrace</a> and <a href=\"https://docs.microsoft.com/en-us/windows/win32/wmisdk/--instancecreationevent\" rel=\"nofollow noreferrer\">__InstanceCreationEvent</a>  we can see quite a difference, as the Win32_ provides more details like ProcessID whilst __Instance does not.</p>\n\n<p>If one wants to monitor process creation effectively (asynchronously) which one of these 2 should be used ?</p>\n\n<p>Getting information about the process is a must, at least the ProcessID.</p>\n\n<p>A good explanation is much appreciated, I`m sure others are interested as well.</p>\n"}, {"tags": ["c++", "regex"], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 6386071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26be0ea5d61441d4e82d33853e34241?s=128&d=identicon&r=PG&f=1", "display_name": "NoComprende", "link": "https://stackoverflow.com/users/6386071/nocomprende"}, "edited": false, "score": 0, "creation_date": 1576073838, "post_id": 59287706, "comment_id": 104780618, "body": "That&#39;s what I was afraid of. I only looked at the sregex_iterator because the easier to work with smatch seemed to involve a lot of copying."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 573, "user_id": 6386071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26be0ea5d61441d4e82d33853e34241?s=128&d=identicon&r=PG&f=1", "display_name": "NoComprende", "link": "https://stackoverflow.com/users/6386071/nocomprende"}, "edited": false, "score": 1, "creation_date": 1576074408, "post_id": 59287706, "comment_id": 104780972, "body": "@NoComprende You may be able to use <code>m-&gt;length()</code> and <code>m-&gt;position()</code> instead to index into the original string, instead of using <code>m-&gt;str()</code>. See my updated answer for a bit more on that."}, {"owner": {"reputation": 573, "user_id": 6386071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26be0ea5d61441d4e82d33853e34241?s=128&d=identicon&r=PG&f=1", "display_name": "NoComprende", "link": "https://stackoverflow.com/users/6386071/nocomprende"}, "edited": false, "score": 0, "creation_date": 1576074659, "post_id": 59287706, "comment_id": 104781117, "body": "That&#39;s it Lightness. c=&amp;b[m-&gt;position()]. Many thanks."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 573, "user_id": 6386071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26be0ea5d61441d4e82d33853e34241?s=128&d=identicon&r=PG&f=1", "display_name": "NoComprende", "link": "https://stackoverflow.com/users/6386071/nocomprende"}, "edited": false, "score": 0, "creation_date": 1576075795, "post_id": 59287706, "comment_id": 104781771, "body": "@NoComprende As I said, that&#39;s not null terminated at the end of the match, so it&#39;s not the same thing. That&#39;s why I didn&#39;t give that solution."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1576074527, "last_edit_date": 1576074527, "creation_date": 1576073593, "answer_id": 59287706, "question_id": 59287656, "link": "https://stackoverflow.com/questions/59287656/can-i-get-a-char-to-a-stdsregex-iterator-match-str/59287706#59287706", "title": "Can I get a char * to a std::sregex_iterator match str()", "body": "<pre><code>const char *c = m-&gt;str().c_str()\n</code></pre>\n\n<p><code>m-&gt;str()</code> is a temporary value, not a reference to data inside <code>m</code>, so <code>c</code> is immediately dangling.</p>\n\n<p>Just store the string first:</p>\n\n<pre><code>const std::string str = m-&gt;str();\nconst char* c = str.c_str();\n</code></pre>\n\n<p>Yes, the copy is unfortunate.</p>\n\n<hr>\n\n<p>A cheaper way than the copy would be:</p>\n\n<pre><code>const std::string_view sv{\n   b.data() + m-&gt;position(),\n   m-&gt;length()\n};\n</code></pre>\n\n<p>This is great if you can use string views. <strong>But</strong> it is not null-terminated! So, if you really do need a <code>const char*</code>, this won't work for you and you're pretty much stuck with a fresh buffer.</p>\n"}], "owner": {"reputation": 573, "user_id": 6386071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26be0ea5d61441d4e82d33853e34241?s=128&d=identicon&r=PG&f=1", "display_name": "NoComprende", "link": "https://stackoverflow.com/users/6386071/nocomprende"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59287706, "answer_count": 1, "score": 1, "last_activity_date": 1576074809, "creation_date": 1576073451, "last_edit_date": 1576074809, "question_id": 59287656, "link": "https://stackoverflow.com/questions/59287656/can-i-get-a-char-to-a-stdsregex-iterator-match-str", "title": "Can I get a char * to a std::sregex_iterator match str()", "body": "<pre><code>string b=\"some string another string\";    \nstd::regex r(\"string\");\nstd::sregex_iterator m(b.begin(),b.end(),r);\n\nfor (std::sregex_iterator end; m!=end; m++)\n{\n   // want a char* to m-&gt;str() in here\n}\n</code></pre>\n\n<p>I'm gettng totally lost trying to determine what's what because of the templates. I've tried</p>\n\n<pre><code>const char *c = m-&gt;str().c_str() // compiles but points to \"\"\n</code></pre>\n\n<p>Answer\nPointed out by lightness below</p>\n\n<pre><code>const char *c = &amp;b[m-&gt;position()]; // length of str is m-&gt;length()\n</code></pre>\n"}, {"tags": ["c++", "indexing"], "comments": [{"owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "edited": false, "score": 0, "creation_date": 1576073705, "post_id": 59287642, "comment_id": 104780547, "body": "reason for close vote?"}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1576074097, "post_id": 59287642, "comment_id": 104780780, "body": "You post is decent, but it would help if you provided the actual output and the desired output. (NB: I am not the downvoter)"}, {"owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "reply_to_user": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1576074656, "post_id": 59287642, "comment_id": 104781115, "body": "well the current output is different every time cause the indexes are out of bounds, but I added 2 pictures to clarify what&#39;s supposed to happen"}], "answers": [{"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": true, "score": 1, "last_activity_date": 1576074919, "creation_date": 1576074919, "answer_id": 59288122, "question_id": 59287642, "link": "https://stackoverflow.com/questions/59287642/implement-opengl-like-mirrored-repeat/59288122#59288122", "title": "Implement OpenGl-like MIRRORED_REPEAT", "body": "<p>If you replace the line</p>\n\n<pre><code>std::cout &lt;&lt; values[mirrored_repeat(i)] &lt;&lt; std::endl;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>std::cout &lt;&lt; mirrored_repeat(i) &lt;&lt; std::endl;\n</code></pre>\n\n<p>you'll see that the indices returned by <code>mirrored_repeat</code> are clearly wrong (they are negative, to begin with).</p>\n\n<p>I believe the formula in the spec is a bit wrong, for it has one mismatched bracket. If we rewrite the line</p>\n\n<pre><code>return (10 - 1) - mirror(mod(x, 2 * 10)) - 10;\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>return (10 - 1) - mirror(mod(x, 2 * 10) - 10);\n</code></pre>\n\n<p>the code starts producing something more reasonable.</p>\n"}], "owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 59288122, "answer_count": 1, "score": 0, "last_activity_date": 1576074919, "creation_date": 1576073414, "last_edit_date": 1576074473, "question_id": 59287642, "link": "https://stackoverflow.com/questions/59287642/implement-opengl-like-mirrored-repeat", "title": "Implement OpenGl-like MIRRORED_REPEAT", "body": "<p>I am supposed to implement a MIRRORED_REPEAT for my raytracing textures. I looked at how it's defined in OpenGL <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf\" rel=\"nofollow noreferrer\">https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf</a> page 260 and then I tried it myself, first with a 1-dimesional array. The behaviour should be: <a href=\"https://i.stack.imgur.com/9mGmO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9mGmO.png\" alt=\"returns x\"></a> </p>\n\n<p>Basically it repeats the index into the array ( modulo ) but mirrors the input based on wether or not the offset is even or odd. ( 2nd image below )\n<a href=\"https://i.stack.imgur.com/1vig6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1vig6.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int values[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n    const auto mod = [](const int a, const int n) noexcept\n    {\n        return (a % n + n) % n;\n    };\n\n    const auto mirror = [](const int a) noexcept\n    {\n        return a &gt;= 0.f ? a : -(1 + a);\n    };\n\n    const auto mirrored_repeat = [&amp;](const int x) noexcept {\n        return (10 - 1) - mirror(mod(x, 2 * 10)) - 10;\n    };\n\n    for(int i = -5; i &lt; 6; ++i) {\n        std::cout &lt;&lt; values[mirrored_repeat(i)] &lt;&lt; std::endl;   \n    }\n}\n</code></pre>\n\n<p>This doesn't work however, but gives me nice undefined-behaviourish output instead x) Can someone tell me how I can do it properly?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1576073339, "post_id": 59287597, "comment_id": 104780353, "body": "Short answer: Threads"}, {"owner": {"reputation": 15, "user_id": 10904693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abce57766ddb4f2a6b8ad88a72598d54?s=128&d=identicon&r=PG", "display_name": "Win", "link": "https://stackoverflow.com/users/10904693/win"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576073398, "post_id": 59287597, "comment_id": 104780394, "body": "@NathanOliver-ReinstateMonica so i have to put all my functions to a  thread?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576073484, "post_id": 59287597, "comment_id": 104780438, "body": "Run each function in it&#39;s own thread.  This will require changes though since you need to make the code thread safe."}, {"owner": {"reputation": 431, "user_id": 6040328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGVfA.png?s=128&g=1", "display_name": "SubMachine", "link": "https://stackoverflow.com/users/6040328/submachine"}, "edited": false, "score": 0, "creation_date": 1576073546, "post_id": 59287597, "comment_id": 104780474, "body": "To solve this, you should use multithreading. This is an advanced C++ topic, which I suggest you learn later if you are a newbie. In this case, you need to run one of the functions in a separate thread (1 additional thread is enough since main function is already executed by &quot;main thread&quot;)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1576073551, "post_id": 59287597, "comment_id": 104780477, "body": "Before you start with multi-threading, please, be aware multi-threading is not that easy. Alternatively, you could interleave your functions without threads, i.e. re-organize your code that you can perform one step per call. Then move the endless loop into <code>main()</code> and call <code>shoot_step()</code> and <code>bunny_step()</code> in the loop."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1576073720, "post_id": 59287597, "comment_id": 104780555, "body": "E.g. Instead of <code>sleep()</code>, you could store a start time in a &quot;first&quot; step and compare current time with start time in each following step to measure a duration. (<code>sleep()</code> isn&#39;t very precise btw.) ;-)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576074131, "post_id": 59287597, "comment_id": 104780800, "body": "Isn&#39;t <code>*(DWORD*)(val.gameModule + offsets.ForceAttack, 5);</code> just dereferencing a <code>DWORD</code> at address <code>5</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576074286, "post_id": 59287597, "comment_id": 104780895, "body": "@NathanOliver-ReinstateMonica Looks like this entire program is a hack, writing at arbitrary memory offsets to achieve some goal. I doubt OP is concerned with thread safety, it seems impossible to me these these memory writes are synchronized so you can already throw defined behavior out the window. In principal you&#39;re right though."}, {"owner": {"reputation": 15, "user_id": 10904693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abce57766ddb4f2a6b8ad88a72598d54?s=128&d=identicon&r=PG", "display_name": "Win", "link": "https://stackoverflow.com/users/10904693/win"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1576074952, "post_id": 59287597, "comment_id": 104781279, "body": "@Fran&#231;oisAndrieux you are fully correct. Its a hack. shoot func should calculate correct address and write 5 to it,so this value will a make a shoot in game :)"}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 2023321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iHEw.jpg?s=128&g=1", "display_name": "Eduardo Fernandes", "link": "https://stackoverflow.com/users/2023321/eduardo-fernandes"}, "is_accepted": false, "score": 1, "last_activity_date": 1576074334, "creation_date": 1576074334, "answer_id": 59287950, "question_id": 59287597, "link": "https://stackoverflow.com/questions/59287597/how-to-make-2-functions-work-instead-of-only-1/59287950#59287950", "title": "How to make 2 functions work instead of only 1", "body": "<p>Try to do this, and check if this is what you need:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;thread&gt;\n\nvoid shoot()\n{\n    *(DWORD*)(val.gameModule + offsets.ForceAttack, 5);\n    Sleep(5000);\n    *(DWORD*)(val.gameModule + offsets.ForceAttack, 4);\n}\n\nvoid bunny()\n{\n    val.gameModule = (DWORD)GetModuleHandle(\"client_panorama.dll\");\n\n    std::cout &lt;&lt; (GetModuleHandle(\"client_panorama.dll\")) &lt;&lt; std::endl;;\n    val.localPlayer = *(DWORD*)(val.gameModule + offsets.lplayer);\n    while (true)\n    {\n        if (bunnyON == 1);\n        else\n            return;\n        val.flag = *(BYTE*)(val.localPlayer + offsets.flags);\n        if (isMoving())\n            if (GetAsyncKeyState(VK_SPACE) &amp;&amp; val.flag &amp; (1 &lt;&lt; 0))\n                * (DWORD*)(val.gameModule + offsets.jump) = 6;\n    }\n}\n\nint main()\n{\n    std::thread t1(bunny);\n    std::thread t2(shoot);\n\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10904693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abce57766ddb4f2a6b8ad88a72598d54?s=128&d=identicon&r=PG", "display_name": "Win", "link": "https://stackoverflow.com/users/10904693/win"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576074334, "creation_date": 1576073279, "last_edit_date": 1576073387, "question_id": 59287597, "link": "https://stackoverflow.com/questions/59287597/how-to-make-2-functions-work-instead-of-only-1", "title": "How to make 2 functions work instead of only 1", "body": "<p>I have 2 void functions and a main func.</p>\n\n<p>But since first function has while(true) it works always and due to that second is not working. How to make it work all together at the same time?</p>\n\n<pre><code>   void shoot()\n{\n    *(DWORD*)(val.gameModule + offsets.ForceAttack, 5);\n    Sleep(5000);\n    *(DWORD*)(val.gameModule + offsets.ForceAttack, 4);\n}\n\nvoid bunny()\n{\n\n\n    val.gameModule = (DWORD)GetModuleHandle(\"client_panorama.dll\");\n\n    std::cout &lt;&lt; (GetModuleHandle(\"client_panorama.dll\")) &lt;&lt; std::endl;;\n    val.localPlayer = *(DWORD*)(val.gameModule + offsets.lplayer);\n    while (true)\n    {\n        if (bunnyON == 1);\n        else\n            return;\n        val.flag = *(BYTE*)(val.localPlayer + offsets.flags);\n        if (isMoving())\n            if (GetAsyncKeyState(VK_SPACE) &amp;&amp; val.flag &amp; (1 &lt;&lt; 0))\n                * (DWORD*)(val.gameModule + offsets.jump) = 6;\n    }\n}\n\n\n\n\nint main()\n{\n\n\n    bunny();\n    shoot();\n}\n`\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glut"], "comments": [{"owner": {"reputation": 68, "user_id": 3517001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MYWnf.jpg?s=128&g=1", "display_name": "Three", "link": "https://stackoverflow.com/users/3517001/three"}, "edited": false, "score": 1, "creation_date": 1576073536, "post_id": 59287435, "comment_id": 104780469, "body": "I dont think you should call glClear every time you want to redraw the score. It should be done once per render pass."}, {"owner": {"reputation": 23, "user_id": 12499616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAVCMzSZh0jIthr3pY7CiPUtk1uMXWeIxSWORB1jw=k-s128", "display_name": "Vincent Clavel", "link": "https://stackoverflow.com/users/12499616/vincent-clavel"}, "reply_to_user": {"reputation": 68, "user_id": 3517001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MYWnf.jpg?s=128&g=1", "display_name": "Three", "link": "https://stackoverflow.com/users/3517001/three"}, "edited": false, "score": 0, "creation_date": 1576074093, "post_id": 59287435, "comment_id": 104780779, "body": "Thanks a lot, it solved the problem !"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 12499616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAVCMzSZh0jIthr3pY7CiPUtk1uMXWeIxSWORB1jw=k-s128", "display_name": "Vincent Clavel", "link": "https://stackoverflow.com/users/12499616/vincent-clavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1576074353, "creation_date": 1576074353, "answer_id": 59287957, "question_id": 59287435, "link": "https://stackoverflow.com/questions/59287435/screen-flickering-using-glutbitmapcharacter/59287957#59287957", "title": "Screen flickering using glutBitmapCharacter()?", "body": "<p>\"I dont think you should call glClear every time you want to redraw the score. It should be done once per render pass\" from Three.</p>\n\n<p>This solved the problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 12499616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAVCMzSZh0jIthr3pY7CiPUtk1uMXWeIxSWORB1jw=k-s128", "display_name": "Vincent Clavel", "link": "https://stackoverflow.com/users/12499616/vincent-clavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1576075448, "creation_date": 1576072770, "last_edit_date": 1576075448, "question_id": 59287435, "link": "https://stackoverflow.com/questions/59287435/screen-flickering-using-glutbitmapcharacter", "title": "Screen flickering using glutBitmapCharacter()?", "body": "<p>I'm trying to make a game using OpenGL. My game is working well but i want to display the score. I managed to display it using glutBitmapCharacter but the screen started <a href=\"https://www.youtube.com/watch?v=RTOmCVMIcSY\" rel=\"nofollow noreferrer\">flickering</a>.</p>\n\n<pre><code>void drawBitmapText(char *string) \n{  \nchar *c;\nglWindowPos3f(10,1000,0);\n\nfor (c=string; *c != '\\0'; c++) \n{\n    glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, *c);\n\n}\n//glutPostRedisplay();\n\n}\n\nvoid AffichageScore(int scoreAafficher){ \n    glClear(GL_COLOR_BUFFER_BIT); \n\n    std::string scoreSTR = std::to_string(scoreAafficher);\n    scoreSTR = \"Score : \"+scoreSTR;\n    int len = scoreSTR.length();\n    char scoreArray[len+1];\n    std::strcpy(scoreArray, scoreSTR.c_str()); \n\n    drawBitmapText(scoreArray);\n    //glutSwapBuffers();\n\n    //glutPostRedisplay();\n\n}\n\n\nstatic void end(){\n\n}\n\n\n\nstatic void timer_callback(int)\n{\nmove_trees();\nmove_floor();\nscore += 1;\nprintf(\"Score : %d \\n\",score);  \n\n\n\n\n//demande de rappel de cette fonction dans 25ms\nglutTimerFunc(25, timer_callback, 0);\n\n//v\u00e9rifie la pr\u00e9sence de collisions toutes les 25ms\nbool verif_col=collisions();\nif (verif_col==true){\n    int scoreFinal = score;\n    fin = true;        \n    //AffichageScore(scoreFinal);\n\n    }\n\n\nglutPostRedisplay();\n\n\n//reactualisation de l'affichage\nglutSwapBuffers();\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "plugins", "gcc-plugins"], "answers": [{"comments": [{"owner": {"reputation": 6631, "user_id": 1488533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e063fcfd88a6af736427025f7ac14649?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllllll", "link": "https://stackoverflow.com/users/1488533/lllllllllllll"}, "edited": false, "score": 0, "creation_date": 1592484431, "post_id": 59313433, "comment_id": 110445988, "body": "I did the same thing, but somehow when using <code>xg++</code> to comple the plugin, it throws &quot;cannot find #include &lt;iostream&gt;`. Do you happen to to know how to address this? THanks!"}, {"owner": {"reputation": 41, "user_id": 11436646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d8324401dbf71afacc507c81095e71?s=128&d=identicon&r=PG&f=1", "display_name": "CookieCutter43", "link": "https://stackoverflow.com/users/11436646/cookiecutter43"}, "reply_to_user": {"reputation": 6631, "user_id": 1488533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e063fcfd88a6af736427025f7ac14649?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllllll", "link": "https://stackoverflow.com/users/1488533/lllllllllllll"}, "edited": false, "score": 0, "creation_date": 1592573338, "post_id": 59313433, "comment_id": 110481483, "body": "When using xg++ or xgcc to compile, you have to provide the path where you built gcc using the -B flag. Are you doing that?"}], "tags": [], "owner": {"reputation": 41, "user_id": 11436646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d8324401dbf71afacc507c81095e71?s=128&d=identicon&r=PG&f=1", "display_name": "CookieCutter43", "link": "https://stackoverflow.com/users/11436646/cookiecutter43"}, "is_accepted": true, "score": 2, "last_activity_date": 1576188728, "creation_date": 1576188728, "answer_id": 59313433, "question_id": 59287434, "link": "https://stackoverflow.com/questions/59287434/debugging-a-gcc-plugin/59313433#59313433", "title": "Debugging a gcc plugin", "body": "<p>I have found a solution:</p>\n\n<p>g++ (or xg++ in this case) is just a driver that calls several compiling tools including the actual compiler cc1plus process. So to make sure that gdb attaches to this process, one has to set the following setting in gdb:</p>\n\n<pre><code>set follow-fork-mode child\n</code></pre>\n\n<p>Afterwards (you might have to just let it run for once) loading the symbols and stepping through the plugin works without problem.</p>\n"}], "owner": {"reputation": 41, "user_id": 11436646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d8324401dbf71afacc507c81095e71?s=128&d=identicon&r=PG&f=1", "display_name": "CookieCutter43", "link": "https://stackoverflow.com/users/11436646/cookiecutter43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 59313433, "answer_count": 1, "score": 2, "last_activity_date": 1576188728, "creation_date": 1576072762, "question_id": 59287434, "link": "https://stackoverflow.com/questions/59287434/debugging-a-gcc-plugin", "title": "Debugging a gcc plugin", "body": "<p>I'm currently writing a plugin for gcc (9.2) and am looking for a way to debug said plugin. For this purpose I have built gcc using <a href=\"https://gcc.gnu.org/wiki/DebuggingGCC#gccbuilddebug\" rel=\"nofollow noreferrer\">these instructions</a> to enable debug symbols for gcc. I then try to debug the plugin by invoking gcc within gdb with the following command:</p>\n\n<blockquote>\n  <p>./xg++ -wrapper gdb,--args -fplugin=plugin_name.so</p>\n</blockquote>\n\n<p>This results in me being able to step through gcc itself, seeing its symbols. However, I am not able to access the plugins symbols. The plugin is compiled with the -g flag.</p>\n\n<p>What do I need to do to also step through the plugin's code?</p>\n"}, {"tags": ["c++", "opengl", "sdl", "glm-math"], "answers": [{"comments": [{"owner": {"reputation": 546, "user_id": 3290179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yytlZ.jpg?s=128&g=1", "display_name": "Theodore_Kim", "link": "https://stackoverflow.com/users/3290179/theodore-kim"}, "edited": false, "score": 0, "creation_date": 1576616286, "post_id": 59290573, "comment_id": 104955897, "body": "Thank you, reading more up on the topic and adjusting the shaders according to your suggestions. One follow up: how would this affect performance for more complex models?"}, {"owner": {"reputation": 2550, "user_id": 191012, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5cd6859716d64ed0a877c7a8e8969135?s=128&d=identicon&r=PG", "display_name": "prideout", "link": "https://stackoverflow.com/users/191012/prideout"}, "reply_to_user": {"reputation": 546, "user_id": 3290179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yytlZ.jpg?s=128&g=1", "display_name": "Theodore_Kim", "link": "https://stackoverflow.com/users/3290179/theodore-kim"}, "edited": false, "score": 0, "creation_date": 1576617838, "post_id": 59290573, "comment_id": 104956498, "body": "Any time you change <code>gl_FragDepth</code> in the fragment shader, you&#39;re potentially causing the GPU to go through a slow path.  But, there are a lot of factors so it&#39;s hard to answer your question."}], "tags": [], "owner": {"reputation": 2550, "user_id": 191012, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5cd6859716d64ed0a877c7a8e8969135?s=128&d=identicon&r=PG", "display_name": "prideout", "link": "https://stackoverflow.com/users/191012/prideout"}, "is_accepted": true, "score": 2, "last_activity_date": 1576083257, "creation_date": 1576083257, "answer_id": 59290573, "question_id": 59287396, "link": "https://stackoverflow.com/questions/59287396/out-of-order-z-buffer-in-opengl/59290573#59290573", "title": "Out of order Z-buffer in OpenGL", "body": "<p>It appears that your vertex shader is setting <code>logz</code> to a constant value then passing it to the fragment shader, which then assigns it to <code>gl_FragDepth</code>. Therefore all your fragments have roughly the same depth.</p>\n\n<p>I would try removing all the special logarithm math from the vertex shader and instead do it all in the fragment shader. OpenGL performs perspective-correct interpolation, so expects the vertex shader's outgoing Z to be clipped between -W and +W.</p>\n"}], "owner": {"reputation": 546, "user_id": 3290179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yytlZ.jpg?s=128&g=1", "display_name": "Theodore_Kim", "link": "https://stackoverflow.com/users/3290179/theodore-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 59290573, "answer_count": 1, "score": 0, "last_activity_date": 1576083257, "creation_date": 1576072676, "last_edit_date": 1576075487, "question_id": 59287396, "link": "https://stackoverflow.com/questions/59287396/out-of-order-z-buffer-in-opengl", "title": "Out of order Z-buffer in OpenGL", "body": "<p>I am working on an OpenGL application in C++. It is a scene in space with large distances and geometries, therefore I am using a logarithmic depth scale. I have included the basics of the code below. Essentially, I cannot seem to get depth testing correct. The below picture should have the cube appearing before the grey sphere. Additionally, you can see that the triangles on the larger sphere in the back are incorrectly depth ordered. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Nuvd1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nuvd1.png\" alt=\" B=\"></a></p>\n\n<p>Here is how I initialize the depth buffer in my application (I am using SDL2 and Glew). Am I missing something? </p>\n\n<p>(Some additional information, the blue sphere is 650000 units in diameter, the cube is 100 units in width, and the grey sphere is 1000 units in diameter)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream.h&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;SDL.h&gt;\n#include &lt;SDL_opengl.h&gt;\n#include &lt;glm/mat4x4.hpp&gt;\n\nint main() {\n  // Set up the window\n  SDL_Init(SDL_INIT_VIDEO);\n  SDL_GL_SetAttribute (SDL_GL_CONTEXT_FLAGS, SDL_GL_CONTEXT_FORWARD_COMPATIBLE_FLAG);\n  SDL_GL_SetAttribute (SDL_GL_CONTEXT_MAJOR_VERSION, 3); //OpenGL 3+\n  SDL_GL_SetAttribute (SDL_GL_CONTEXT_MINOR_VERSION, 3); //OpenGL 3.3\n  SDL_GL_SetAttribute (SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE); //OpenGL core profile\n\n  SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n  SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);\n\n  displayWindow = SDL_CreateWindow(GAME_NAME, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, (int)screenWidth, (int)screenHeight, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);\n\n  SDL_GLContext context = SDL_GL_CreateContext(displayWindow);\n  // SDL_GL_MakeCurrent(displayWindow, context);\n\n  SDL_GL_SetSwapInterval( 1 );\n\n  glewExperimental = GL_TRUE; \n  GLenum glewError = glewInit();\n  if( glewError != GLEW_OK ) {\n    std::cout &lt;&lt; \"Error Initializing GLEW\" &lt;&lt; std::endl;\n    exit(1);\n  }\n\n  glEnable(GL_BLEND);\n  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n  // Enable Depth Buffering\n  glEnable(GL_DEPTH_TEST);\n  glDepthFunc(GL_LEQUAL);\n}\n</code></pre>\n\n<p>Here is the vertex shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>layout(location = 0) in vec3 position;\nlayout(location = 1) in vec3 normal;\n\nuniform vec3 lightPosition;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix; \nuniform mat4 projectionMatrix;\nuniform mat4 normalMatrix;\n\nout vec3 Normal_camera;\nout vec3 LightDirection_camera;\nout vec3 Position_global;\nout vec3 EyeDirection_camera;\nout float logz;\n\nvoid main()\n{\n  // vec3 lightPosition = vec3(1, 1, 0);\n  // Position of the vertex, in worldspace : modelMatrix * position\n  Position_global = (modelMatrix * vec4(position, 1)).xyz;\n\n  // Vector that goes from the vertex to the camera, in camera space.\n  // In camera space, the camera is at the origin (0,0,0).\n  vec3 Position_camera = (viewMatrix * vec4(Position_global, 1)).xyz;\n  EyeDirection_camera = (vec4(0, 0, 0, 0) - vec4(Position_camera, 1)).xyz;\n\n  // Vector that goes from the vertex to the light, in camera space. M is ommited because it's identity.\n  vec3 LightPosition_camera = (viewMatrix * vec4(lightPosition, 1)).xyz;\n  LightDirection_camera = LightPosition_camera + EyeDirection_camera;\n\n  // Normal of the the vertex, in camera space\n  Normal_camera = (modelMatrix * vec4(normal, 0)).xyz;\n  // Only correct if ModelMatrix does not scale the model ! Use its inverse transpose if not\n\n  gl_Position = projectionMatrix * vec4(Position_camera, 1);\n  logz = 0.0f;\n  float ZNEAR = 0.0001;\n    float ZFAR = 1000000.0;\n    float FCOEF = 2.0 / log2(ZFAR + 1.0);\n  logz = FCOEF;\n    gl_Position.z = log2(max(ZNEAR, 1.0 + gl_Position.w)) * FCOEF - 1.0;\n}\n</code></pre>\n\n<p>And finally, the fragment shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#version 330 core\nuniform vec4 color;\nuniform float lightPower;\nuniform vec3 lightPosition;\nuniform vec3 lightColor;\n\nin vec3 Normal_camera;\nin vec3 LightDirection_camera;\nin vec3 Position_global;\nin vec3 EyeDirection_camera;\nin float logz;\n\nout vec4 FragColor;\n\nvoid main() {\n  vec3 n = normalize(Normal_camera);\n  vec3 l = normalize(lightPosition - Position_global);\n  float cosTheta = clamp(dot(n, l), 0.0, 1.0);\n  float distance = length( lightPosition - Position_global );\n\n  // Eye vector (towards the camera)\n    vec3 E = normalize(EyeDirection_camera);\n    // Direction in which the triangle reflects the light\n    vec3 R = reflect(-l,n);\n    // Cosine of the angle between the Eye vector and the Reflect vector,\n    // clamped to 0\n    //  - Looking into the reflection -&gt; 1\n    //  - Looking elsewhere -&gt; &lt; 1\n    float cosAlpha = clamp( dot( E,R ), 0.0, 1.0);\n  float specularStrength = 0.3;\n  float shininess = 16.0;\n  float ambientStrength = 0.3;\n  float sqDistance = distance * distance;\n\n  vec3 MaterialAmbientColor = ambientStrength * lightColor;\n  //* lightPower / sqDistance;  \n  vec3 MaterialDiffuseColor = lightColor * lightPower * cosTheta / sqDistance;\n  vec3 MaterialSpecularColor = specularStrength * lightColor * lightPower * pow(cosAlpha, shininess) / sqDistance;\n\n  vec4 c = color * vec4(MaterialAmbientColor + MaterialDiffuseColor + MaterialSpecularColor, 1);\n  FragColor = c;\n  gl_FragDepth = logz;\n\n  // Later on, I assign glm::perspective(radians(45.0f), SCREEN_HEIGHT/SCREEN_WIDTH, 1.0f, 1000.0f) to the perspective uniform\n}\n</code></pre>\n"}, {"tags": ["c++", "msxml6"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1576071939, "post_id": 59287042, "comment_id": 104779572, "body": "That&#39;s a liability of depending on MinGW, they did not manage to reverse-engineer it (yet).  These open source projects progress by taking contributions from programmers that have a need to fill, you&#39;re it right now.  Good luck."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1576073754, "post_id": 59287042, "comment_id": 104780573, "body": "Thanks! Just checked and there&#39;s a new version of the compiler in the past couple weeks. Lucky me! I don&#39;t have time to wait or get involved in extra projects right now. I might have to figure out something else."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1576075139, "post_id": 59287042, "comment_id": 104781394, "body": "Throw that in an answer and I\u2019ll check it for you if you\u2019d like."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1576083231, "post_id": 59287042, "comment_id": 104786006, "body": "...and thanks for teaching me something I didn&#39;t know. I appreciate it. That doesn&#39;t get said enough around the forum, I think. I posted on SorceForge to see if they will include a header with the next update or if there is something I can do to get my hands on the header to send to them for the next one."}], "owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576071413, "creation_date": 1576071413, "question_id": 59287042, "link": "https://stackoverflow.com/questions/59287042/msxml6-lib-import-doesnt-seem-to-be-working-properly-code-blocks-msxml2-h", "title": "MSXML6.lib import doesn&#39;t seem to be working properly. CODE BLOCKS, MSXML2.h?", "body": "<p>On a 64 bit system, Windows 10, using <code>CODEBLOCKS</code> with the <code>MingW/GCC</code> compiler. I need to use the \n<code>MSXML6.lib</code> library and include the <code>msxml6.h</code> header.</p>\n\n<p>The library is included with a current Windows SDK (which I have installed).</p>\n\n<p>I have the appropriate linker path set up in CODE BLOCKS.</p>\n\n<p>The problem is my <code>#include &lt;msxml6.h&gt;</code> directive does not work. The only header files the compiler finds are:</p>\n\n<p><code>&lt;msxml.h&gt;</code>, <code>&lt;msxml2.h&gt;</code>, <code>&lt;msxml2did.h&gt;</code>, and <code>&lt;msxmldid.h&gt;</code>.</p>\n\n<p>Internet and SE/SO search of my problem turns up this:\n<a href=\"https://stackoverflow.com/questions/18749881/msxml6-failing-to-link-properly\">MsXml6 failing to link properly</a></p>\n\n<p>Not quite what I'm looking for.</p>\n\n<p>Tried the CODE BLOCKS forum. Perusing there, they are not all to welcoming of library and linker questions. This is ok, that's their rules, but not really all that helpful.</p>\n\n<p>Anyone seen anything like this before? Is there someplace I can go to get the right header file for that library? For some reason, the library is there but header is missing from the SDK.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1576072106, "post_id": 59287012, "comment_id": 104779673, "body": "You could remove almost all the code you show, keeping only the code inside the <code>case 3</code> to show us (and the definitions and initalizations of the used variables of course), truly making it a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You could even hard-code input values for <code>num1</code> and <code>num2</code> and create a very simple <code>main</code> function that we could easily copy-paste and try ourselves."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1576072237, "post_id": 59287012, "comment_id": 104779755, "body": "I also recommend that you learn how to use a debugger to stepp through your code statement by statement, while monitoring variables and their values. By debugging like that it should be possible that you figure out the problem yourself."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1576072377, "post_id": 59287012, "comment_id": 104779844, "body": "Lastly for an alternative for solving your problem: How would you do it using pen and paper? It&#39;s very straight-forward and relatively simple to translate the pen-and-paper way into code. I also recommend that you use <i>strings</i> to do it, since then it&#39;s must simpler to handle it digit by digit, and figure out the number of decimals after the decimal point for each number (and to pad the numbers so they have the same number of digits before and after the decimal point)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1576072957, "post_id": 59287012, "comment_id": 104780161, "body": "In binary floating point arithmetic, 100 * a * b * 0.01 is not necessarily equal to a * b."}], "answers": [{"comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1576073531, "post_id": 59287430, "comment_id": 104780463, "body": "Very nice indeed! I could only think of some loops specifying a precision (3, 4, ... decimals)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1576074199, "post_id": 59287430, "comment_id": 104780844, "body": "The &quot;algorithm based on exponentation by squaring&quot; is known by various names, including <a href=\"https://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication\" rel=\"nofollow noreferrer\">Ancient Egyptian multiplication</a>; it&#39;s simply binary long-multiplication."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1576074255, "post_id": 59287430, "comment_id": 104780874, "body": "@TobySpeight: Absolutely - that&#39;s very insightful. I&#39;ve wiki&#39;d the answer, do please feel free to contributed at your leisure."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1576073611, "last_edit_date": 1576073611, "creation_date": 1576072750, "answer_id": 59287430, "question_id": 59287012, "link": "https://stackoverflow.com/questions/59287012/multiplying-a-decimal-value-without-using-operator-in-c/59287430#59287430", "title": "Multiplying a decimal value without using * operator in c++", "body": "<p>The primary issue is caused by the fact that repeated addition of a floating point type will likely cause the result to \"go off\": see for yourself by adding 0.1 ten times, for example. So you shouldn't necessarily return the value attained once the loop stops; perhaps the value immediately before that is closer to the result you want. If both arguments are non-integral then multiplication becomes a fair challenge, and the devil in me would look for an alternative that still satisfies the problem constraints:</p>\n\n<p>Note that an alternative way to achieve multiplication which seems to me at least to satisfy the question constraints is to note that </p>\n\n<pre><code>a * b = std::exp(std::log(a) + std::log(b))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>a / b = std::exp(std::log(a) - std::log(b))\n</code></pre>\n\n<p>A less facetious approach would be to use an algorithm based on exponentation by squaring, except that you add instead of multiply.</p>\n"}], "owner": {"reputation": 19, "user_id": 12371221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CSwkcWJCy68/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcpoMy_k5NQlpJh9XWC9_iI-sazew/photo.jpg?sz=128", "display_name": "Kathleen Rose", "link": "https://stackoverflow.com/users/12371221/kathleen-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576073611, "creation_date": 1576071310, "last_edit_date": 1576072756, "question_id": 59287012, "link": "https://stackoverflow.com/questions/59287012/multiplying-a-decimal-value-without-using-operator-in-c", "title": "Multiplying a decimal value without using * operator in c++", "body": "<p>I was asked to create a calculator without using * in multiplication. The calculator must be able to add, subtract and multiply decimal value also.I'm having problems in the multiplication part. If I multiply a whole number I get the correct answer but if I multiply some decimal value, it outputs an incorrect answer. I can't figure out what is wrong with the code.</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    double num1 = 0, num2 = 0, product = 0, a = 0, b = 0, c = 0, answer = 0, fres = 0, d = 0.01;\n\n    std::cout &lt;&lt; \"\\nEnter two values:\\n\";\n    std::cin &gt;&gt; num1 &gt;&gt; num2;\n\n    while (a &lt; 100) {\n        product = product + num2;\n        a++;\n    }\n\n    while (b &lt; product) {\n        fres = fres + num1;\n        b++;\n    }\n\n    while (c &lt; fres) {\n        answer = answer + d;\n        c++;\n    }\n    std::cout &lt;&lt; answer;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "dictionary", "vector", "word"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576070981, "post_id": 59286827, "comment_id": 104778953, "body": "Lambda should take a <code>std::pair</code>. <code>std::map</code> &quot;consists&quot; of pairs, and these pairs are fed into lambda by <code>std::transform</code>."}, {"owner": {"reputation": 1, "user_id": 12518569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2c596da644399cedfcb0bebfa6c8ed?s=128&d=identicon&r=PG&f=1", "display_name": "johan820", "link": "https://stackoverflow.com/users/12518569/johan820"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071075, "post_id": 59286827, "comment_id": 104779021, "body": "What is lambda?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1576071099, "post_id": 59286827, "comment_id": 104779032, "body": "@ohan820 You may not change keys if a map."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071150, "post_id": 59286827, "comment_id": 104779062, "body": "Lambda is this beast: <code>[&amp;inlist] (string c){ ... }</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1576071271, "post_id": 59286827, "comment_id": 104779135, "body": "&quot; I first create a map with the first transform() and then I want to use the second transform() to change the ints in the map using the function counter()&quot; why if you can count just in one pass? Just in sake of using <code>std::transform</code>?"}, {"owner": {"reputation": 1, "user_id": 12518569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2c596da644399cedfcb0bebfa6c8ed?s=128&d=identicon&r=PG&f=1", "display_name": "johan820", "link": "https://stackoverflow.com/users/12518569/johan820"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071401, "post_id": 59286827, "comment_id": 104779206, "body": "@evg so what would be the allowed syntax? Should it be [&amp;inlist](string c, int i) instead?"}, {"owner": {"reputation": 1, "user_id": 12518569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2c596da644399cedfcb0bebfa6c8ed?s=128&d=identicon&r=PG&f=1", "display_name": "johan820", "link": "https://stackoverflow.com/users/12518569/johan820"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1576071638, "post_id": 59286827, "comment_id": 104779367, "body": "@SlavasupportsMonica That worked and is a way simpler solution. Thank you!"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071707, "post_id": 59286827, "comment_id": 104779419, "body": "It should be <code>[...](std::pair&lt;const std::string, int&gt;&amp;) {...}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1576071727, "post_id": 59287013, "comment_id": 104779430, "body": "I believe main culprit is not traversing vector two times but doing lookups in the <code>std::map</code> 2 times for each word in the vector"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1576071855, "last_edit_date": 1576071855, "creation_date": 1576071317, "answer_id": 59287013, "question_id": 59286827, "link": "https://stackoverflow.com/questions/59286827/counting-how-many-times-a-word-occurs-in-a-map-using-transform-no-match-fo/59287013#59287013", "title": "Counting how many times a word occurs in a map - using transform() - no match for call to", "body": "<p>In this call</p>\n\n<pre><code>transform(wordcount.begin(), wordcount.end(), wordcount.begin(), [&amp;inlist] (string c){return counter(c, inlist);});\n</code></pre>\n\n<p>you are trying to change keys of the map.</p>\n\n<p>That is pairs in the map have the type <code>std::pair&lt;const std::string, int&gt;</code>. You may not reassign such a pair.</p>\n\n<p>All you need is the following</p>\n\n<pre><code>void input_a( const std::vector&lt;std::string&gt; &amp;inlist )\n{\n    std::map&lt;std::string, int&gt; wordcount;\n\n    for ( const auto &amp;item : inlist ) ++wordcount[item];\n    // ...\n}\n</code></pre>\n\n<p>It is more efficient than to traverse the vector many times.</p>\n"}], "owner": {"reputation": 1, "user_id": 12518569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2c596da644399cedfcb0bebfa6c8ed?s=128&d=identicon&r=PG&f=1", "display_name": "johan820", "link": "https://stackoverflow.com/users/12518569/johan820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576071855, "creation_date": 1576070726, "last_edit_date": 1576071804, "question_id": 59286827, "link": "https://stackoverflow.com/questions/59286827/counting-how-many-times-a-word-occurs-in-a-map-using-transform-no-match-fo", "title": "Counting how many times a word occurs in a map - using transform() - no match for call to", "body": "<p>I'm trying to count how many times a word exists in a map. The map is then supposed to contain the word as a string and the number of times it exists as an int. inlist is the vector with all the words. I first create a map with the first transform() and then I want to use the second transform() to change the ints in the map using the function counter()</p>\n\n<pre><code>void input_a(vector&lt;string&gt; inlist)\n{\n    map&lt;string, int&gt; wordcount;\n\n    transform(inlist.begin(), inlist.end(), inserter(wordcount, wordcount.end()), [] (string c){return make_pair(c, 0);});\n\n    transform(wordcount.begin(), wordcount.end(), wordcount.begin(), [&amp;inlist] (string c){return counter(c, inlist);});\n\n</code></pre>\n\n<p>The function counter() returns a pair because that's what I want to insert in the map.</p>\n\n<pre><code>pair &lt;string, int&gt; counter(string word, vector&lt;string&gt; list)\n{\n    int n{1};\n    n = count(list.begin(), list.end(), word);\n\n    return make_pair(word, n);\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>In file included from /usr/include/c++/7/algorithm:62:0,\n                 from wordlist.h:7,\n                 from wordlist.cc:1:\n/usr/include/c++/7/bits/stl_algo.h: In instantiation of \u2018_OIter std::transform(_IIter, _IIter, _OIter, _UnaryOperation) [with _IIter = std::_Rb_tree_iterator&lt;std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, int&gt; &gt;; _OIter = std::_Rb_tree_iterator&lt;std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, int&gt; &gt;; _UnaryOperation = input_a(std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;)::&lt;lambda(std::__cxx11::string)&gt;]\u2019:\nwordlist.cc:75:118:   required from here\n/usr/include/c++/7/bits/stl_algo.h:4306:24: error: no match for call to \u2018(input_a(std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;)::&lt;lambda(std::__cxx11::string)&gt;) (std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, int&gt;&amp;)\u2019\n  *__result = __unary_op(*__first);\n              ~~~~~~~~~~^~~~~~~~~~\nwordlist.cc:75:89: note: candidate: input_a(std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;)::&lt;lambda(std::__cxx11::string)&gt;\n unt.begin(), wordcount.end(), wordcount.begin(), [&amp;inlist] (string c){return counter(c, inlist);});\n                                                                     ^\nwordlist.cc:75:89: note:   no known conversion for argument 1 from \u2018std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, int&gt;\u2019 to \u2018std::__cxx11::string {aka std::__cxx11::basic_string&lt;char&gt;}\u2019\n</code></pre>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1576072430, "post_id": 59286796, "comment_id": 104779868, "body": "Is this to avoid the typing or do you really need functions which take the same (as in same types) parameter pack?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1576072676, "post_id": 59286796, "comment_id": 104780005, "body": "do you limit this parameter packs to some subset of types or number of arguments? If not why this is a problem?"}, {"owner": {"reputation": 320, "user_id": 10018947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TbL0J.jpg?s=128&g=1", "display_name": "Nanashi No Gombe", "link": "https://stackoverflow.com/users/10018947/nanashi-no-gombe"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1576072768, "post_id": 59286796, "comment_id": 104780055, "body": "@DanielJour The latter. All the parameters in each of the variadic functions are going to have exactly the same type\u2013just one type."}, {"owner": {"reputation": 320, "user_id": 10018947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TbL0J.jpg?s=128&g=1", "display_name": "Nanashi No Gombe", "link": "https://stackoverflow.com/users/10018947/nanashi-no-gombe"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1576072977, "post_id": 59286796, "comment_id": 104780173, "body": "@MarekR Sorry, I don&#39;t understand your objection."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1576075329, "post_id": 59286796, "comment_id": 104781518, "body": "Simply I (and probably others) do not understand what is the gain/goal. Is it just to save you a typing when defining this templates? Does it have it impact on how templates are used?"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1576072819, "last_edit_date": 1576072819, "creation_date": 1576072453, "answer_id": 59287334, "question_id": 59286796, "link": "https://stackoverflow.com/questions/59286796/single-template-parameter-pack-for-multiple-variadic-functions/59287334#59287334", "title": "Single template parameter pack for multiple variadic functions?", "body": "<p>Pre C++20 answer: No, there isn't anything you can do to get a syntax like that.  Best you could do is create a macro that does a lot of the work for you.</p>\n\n<p>C++20: You can use <code>auto</code> for the function parameter type which is syntactic sugar for writing out a template like it is for a lambda currently.  That would give you</p>\n\n<pre><code>void func1(auto... params);\nvoid func2(auto... params);\nvoid func3(auto... params);\nvoid func4(auto... params);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1576073548, "post_id": 59287560, "comment_id": 104780476, "body": "No longer deduced though."}], "tags": [], "owner": {"reputation": 408, "user_id": 4108711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fae9624eae1a541e5c83baf8c173674?s=128&d=identicon&r=PG&f=1", "display_name": "rezaebrh", "link": "https://stackoverflow.com/users/4108711/rezaebrh"}, "is_accepted": false, "score": 1, "last_activity_date": 1576073150, "creation_date": 1576073150, "answer_id": 59287560, "question_id": 59286796, "link": "https://stackoverflow.com/questions/59286796/single-template-parameter-pack-for-multiple-variadic-functions/59287560#59287560", "title": "Single template parameter pack for multiple variadic functions?", "body": "<p>Try wrap them inside a struct. If you want them independent from any object state you should declare them static.</p>\n\n<pre><code>template &lt;typename ...Pack&gt;\nstruct FunctionHolder\n{\n    static void func1(Pack... params);\n\n    static void func2(Pack... params);\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b0c906290be158c2\" rel=\"nofollow noreferrer\"><strong>LIVE SAMPLE</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576074787, "post_id": 59287987, "comment_id": 104781189, "body": "Down side to this is now you have to memorize a number for a function, instead of having a nice descriptive function name."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576075092, "post_id": 59287987, "comment_id": 104781369, "body": "@NathanOliver-ReinstateMonica - Well... if the descriptive function names are <code>func1</code>, <code>func2</code>, <code>func3</code>, I don&#39;t think it&#39;s worse. If names are really descriptive... instead of an integer, the additional template parameter can be an enum with descriptive values, I suppose."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1576075205, "post_id": 59287987, "comment_id": 104781437, "body": "I have a feeling func1, func2, ...,  are just place holder names for the OP"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1576077166, "post_id": 59287987, "comment_id": 104782525, "body": "@NathanOliver-ReinstateMonica - I suppose your felling is correct. Answer improved to show the <code>enum</code> (verbose and descriptive) alternative."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1576077069, "last_edit_date": 1576077069, "creation_date": 1576074450, "answer_id": 59287987, "question_id": 59286796, "link": "https://stackoverflow.com/questions/59286796/single-template-parameter-pack-for-multiple-variadic-functions/59287987#59287987", "title": "Single template parameter pack for multiple variadic functions?", "body": "<p>If you can use C++17... maybe you can define a single function, with an additional template parameter that is the number of the function, and use <code>if constexpr</code> to separate the bodies of the single functions.</p>\n\n<p>I mean something as follows</p>\n\n<pre><code>template &lt;int Id, typename ... Pack&gt;\nvoid func (Pack ... params)\n {\n   if constexpr ( 1 == id )\n    { /* body of func1() */ }\n   else if constexpr ( 2 == id )\n    { /* body of func2() */ }\n   else if constexpr ( 3 == id )\n    { /* body of func3() */ }\n   // else // etc...\n }\n</code></pre>\n\n<p>Calling <code>func()</code> you have to explicit the integer template parameter</p>\n\n<pre><code>func&lt;1&gt;(\"abc\"); // equivalent to func1(\"abc\");\n</code></pre>\n\n<p>As observed by Nathan Oliver, when names of functions are important and descriptive (and not a simple enumeration), the use of a integer template parameter gives you a loose of description.</p>\n\n<p>In this case, instead of an <code>int</code>, you can add an enum value additional template parameter. With descriptive names for enum values.</p>\n\n<p>Something as </p>\n\n<pre><code>enum funcId\n {\n   a_complex_and_descriptive_func_id,\n   another_complex_func_id,\n   a_third_complex_func_id // , etc...\n }     \n\ntemplate &lt;funcId Id, typename ... Pack&gt;\nvoid func (Pack ... params)\n {\n   if constexpr ( a_complex_and_descriptive_func_id == id )\n    { /* body of first function */ }\n   else if constexpr ( another_complex_func_id == id )\n    { /* body of second function */ }\n   else if constexpr ( a_third_complex_func_id == id )\n    { /* body of third function */ }\n   // else // etc...\n }\n</code></pre>\n\n<p>and the call become</p>\n\n<pre><code>func&lt;a_complex_and_descriptive_func_id&gt;(\"abc\");\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 10018947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TbL0J.jpg?s=128&g=1", "display_name": "Nanashi No Gombe", "link": "https://stackoverflow.com/users/10018947/nanashi-no-gombe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59287334, "answer_count": 3, "score": 2, "last_activity_date": 1576077069, "creation_date": 1576070629, "question_id": 59286796, "link": "https://stackoverflow.com/questions/59286796/single-template-parameter-pack-for-multiple-variadic-functions", "title": "Single template parameter pack for multiple variadic functions?", "body": "<p>Usually we would do something like this to define multiple variadic functions taking the same parameter pack:</p>\n\n<pre><code>template&lt;typename ...Pack&gt;\nvoid func1(Pack... params);\n\ntemplate&lt;typename ...Pack&gt;\nvoid func2(Pack... params);\n\ntemplate&lt;typename ...Pack&gt;\nvoid func3(Pack... params);\n\ntemplate&lt;typename ...Pack&gt;\nvoid func4(Pack... params);\n</code></pre>\n\n<p>Is there some way to avoid this redundant repetition? For example, something like:</p>\n\n<pre><code>template&lt;typename ...Pack&gt;\n{\n    void func1(Pack... params);\n    void func2(Pack... params);\n    void func3(Pack... params);\n    void func4(Pack... params);\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576072223, "post_id": 59286635, "comment_id": 104779746, "body": "For example: When your <code>y</code> is <code>18</code>, it will fail if there is at least 1 <code>2</code> and exactly 1 <code>3</code> in the list. In this case it would not look for <code>3*6</code> or <code>2*9</code>. So, your code does not find all cases."}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576072637, "post_id": 59286635, "comment_id": 104779982, "body": "I understand it. But the problem is that the whole concept of my solution is wrong. I need only an algorithm or some kind of hint."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576073461, "post_id": 59286635, "comment_id": 104780426, "body": "I would start with <code>k=0</code>, instead of <code>k=p-1</code>. Also you excluded <code>k=0</code>, you stop at <code>k=1</code>. <code>4 % 11 == 4</code>, so a solution is <code>4</code>, e.g. whenever <code>x</code> is in the list, it is a solution."}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576073618, "post_id": 59286635, "comment_id": 104780505, "body": "Here, for the most part, the problem is that the algorithm takes too much time."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1576073924, "post_id": 59286635, "comment_id": 104780665, "body": "No, your first problem is that it gives wrong answers. What is the benefit of speed optimizing a program, which gives wrong answers?"}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576074453, "post_id": 59286635, "comment_id": 104780999, "body": "I&#39;m not talking about optimization, but about a completely different approach."}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576074746, "post_id": 59286635, "comment_id": 104781164, "body": "ok, I rewrote the code with brute force variable k. Now the code will always give the right solution. But it still takes too much time. And does not change the situation."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576080043, "post_id": 59286635, "comment_id": 104784291, "body": "You still exclude <code>k=0</code>. What if <code>x</code> is a prime number and in the vector? You wouldn&#39;t find it and loop forever ==&gt; TL"}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1576081197, "post_id": 59286635, "comment_id": 104784945, "body": "fixed, but the result is the same"}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576156723, "post_id": 59286635, "comment_id": 104813240, "body": "How large can <code>n</code> be? Is it always 100?"}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "edited": false, "score": 0, "creation_date": 1576158027, "post_id": 59286635, "comment_id": 104813986, "body": "The condition for the task says yes. Although this is strange because it is not clear why then input n"}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576159790, "post_id": 59286635, "comment_id": 104815039, "body": "Can you please share a link to the online judge? (It would make it easier to confirm suggestions.)"}, {"owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "edited": false, "score": 0, "creation_date": 1576161927, "post_id": 59286635, "comment_id": 104816362, "body": "unfortunately there is limited registration"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1578586045, "post_id": 59286635, "comment_id": 105494753, "body": "Too bad you deleted <a href=\"https://stackoverflow.com/q/59608622/5459839\">this question</a>. I spent a lot of time on it, and was close to posting an answer. :/ Is that question no longer relevant?"}], "answers": [{"tags": [], "owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "is_accepted": false, "score": 1, "last_activity_date": 1576193889, "last_edit_date": 1576193889, "creation_date": 1576171895, "answer_id": 59309965, "question_id": 59286635, "link": "https://stackoverflow.com/questions/59286635/product-modulo-random-numbers/59309965#59309965", "title": "Product modulo random numbers", "body": "<p>I would consider a backtracking routine over the hashed multiset of the input list. Since <code>p</code> is a prime, at any point we can consider if the current multiple, <code>m</code>, has <code>(multiplicative_inverse(m, p) * x) % p</code> in our multiset (<a href=\"https://en.wikipedia.org/wiki/Multiplicative_inverse\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Multiplicative_inverse</a>). If it exists, we're done. Otherwise, try multiplying either by the same number we are currently visiting in the multiset, or by the next one (keep the result of the multiplication modulo <code>p</code>).</p>\n\n<p>Please see comment below for a link to example code in Python. The example you gave has trivial solutions so it would be helpful to have some non-trivial, as well as challenging examples to test and refine on. Please also clarify if more than one number is expected in the output.</p>\n"}, {"comments": [{"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576198634, "post_id": 59314470, "comment_id": 104831130, "body": "<code>O(p*n)</code> time and <code>O(p)</code> space?  How is this practical for <code>2 &lt;= p &lt;= 10^9</code>?"}, {"owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576199439, "post_id": 59314470, "comment_id": 104831270, "body": "Max 16mb, I assume. with some optimization tricks - can be packed into 8. Also, if you have limits for &quot;n&quot; (input size), there is also can be added some optimization."}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576202016, "post_id": 59314470, "comment_id": 104831720, "body": "But aren&#39;t 100,000,000,000 or so iterations going to take too long (TLE)?"}, {"owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1576208438, "post_id": 59314470, "comment_id": 104832965, "body": "Yes, maybe. I do not know your limitations. Also, as I mentioned before, there is possible some optimizations - for example, do not proceed value, which does not produce new values in the DP-dataset. But, there is long thinking and coding, I demonstrated you approach, not solution for your requirements."}], "tags": [], "owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "is_accepted": false, "score": 1, "last_activity_date": 1576251875, "last_edit_date": 1576251875, "creation_date": 1576195872, "answer_id": 59314470, "question_id": 59286635, "link": "https://stackoverflow.com/questions/59286635/product-modulo-random-numbers/59314470#59314470", "title": "Product modulo random numbers", "body": "<p>You can use dynamic programming approach. It requires O(p) memory cells and O(p*n) loop iterations. There is possible several optimization (to exclude processing input duplicates, or print longest/shortest selection chain). Following is simplest and basic DP-program, demonstrating this approach.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint data[] = {\n9, 6, 1, 1, 10, 4, 9, 10, 3, 1, 10, 1, 6, 8, 3, 3, 9, 8,\n10, 3, 7, 7, 1, 3, 3, 1, 5, 2, 10, 4, 1, 5, 6, 7, 2, 6,\n2, 8, 3, 3, 6, 7, 6, 3, 1, 5, 10, 2, 2, 10, 9, 6, 8, 6,\n2, 10, 3, 2, 7, 4, 3, 2, 8, 6, 4, 1, 7, 2, 10, 8, 4, 9,\n7, 9, 8, 7, 4, 7, 3, 2, 8, 2, 3, 7, 1, 5, 2, 10, 7, 1, 8,\n6, 4, 10, 10, 3, 6, 10, 2, 1\n};\n\nstruct elm {\n  int val;  // Value\n  int prev; // from which elemet we come to this\n  int n;    // add loop cound for prevent multiple use same val\n};\n\nvoid printsol(int n, int p, int x, const int *in) {\n  struct elm *dp = (struct elm *)calloc(p, sizeof(struct elm));\n  int i, j;\n  for(i = 0; i &lt; n; i++) // add initial elements into DP array\n    dp[in[i]].val = in[i];\n  for(i = 0; i &lt; n; i++) { // add elements, one by one, to DP array\n    if(dp[in[i]].val &lt;= 1) // skip secondary \"1\" multipliers\n      continue;\n    for(j = 1; j &lt; p; j++) \n      if(dp[j].val != 0 &amp;&amp; dp[j].n &lt; i) {\n        int y = ((long)j * in[i]) % p;\n        dp[y].val  = in[i]; // current value, for printout\n        dp[y].prev = j; // reference to prev element\n        dp[y].n    = n; // loop num, for prevent double reuse\n        if(x == y &amp;&amp; dp[x].n &gt; 0) {\n          // targed reached - print result, by iterate linklist\n          int mul = 1;\n          while(x != 0) {\n            printf(\" %d \", dp[x].val);\n            mul *= dp[x].val; mul %= p;\n            x = dp[x].prev;\n          }\n          printf(\"; mul=%d\\n\", mul);\n          free(dp);\n          return;\n        }\n      } // for+if\n  } // for i\n  free(dp);\n}\n\nint main(int argc, char **argv) {\n  printsol(100, 11, 4, data);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 9558050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDWnV.png?s=128&g=1", "display_name": "dmitry klemenkov", "link": "https://stackoverflow.com/users/9558050/dmitry-klemenkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1576251875, "creation_date": 1576070049, "last_edit_date": 1576081188, "question_id": 59286635, "link": "https://stackoverflow.com/questions/59286635/product-modulo-random-numbers", "title": "Product modulo random numbers", "body": "<p>A prime <code>p</code> is fixed. A sequence of n numbers is given, each from <code>1</code> to <code>p - 1</code>. It is known that the numbers in the sequence are chosen randomly, equally likely and independently from each other. Choose some numbers from the sequence so that their product, taken modulo <code>p</code>, is equal to the given number <code>x</code>. If no numbers are selected, the product is considered equal to one.</p>\n\n<p><strong>Input:</strong></p>\n\n<p>The first line contains three integers separated by spaces: the length of the sequence <code>n</code>, the prime number <code>p</code> and the desired value <code>x</code> </p>\n\n<pre><code>(n=100, 2&lt;=p&lt;=10^9, 0&lt;x&lt;p)\n</code></pre>\n\n<p>Next, <code>n</code> integers are written, separated by spaces or line breaks: the sequence <code>a1</code>, <code>a2</code>,. . ., <code>an</code> </p>\n\n<pre><code>(0 &lt;ai &lt;p)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p>Print the numbers from the sequence whose product modulo <code>p</code> is equal to <code>x</code>. The order in which numbers are displayed is not important. If there are several possible answers, print any of them</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>INPUT:\n\n100 11 4\n9 6 1 1 10 4 9 10 3 1 10 1 6 8 3 3 9 8\n10 3 7 7 1 3 3 1 5 2 10 4 1 5 6 7 2 6\n2 8 3 3 6 7 6 3 1 5 10 2 2 10 9 6 8 6\n2 10 3 2 7 4 3 2 8 6 4 1 7 2 10 8 4 9\n7 9 8 7 4 7 3 2 8 2 3 7 1 5 2 10 7 1 8\n6 4 10 10 3 6 10 2 1\n\nOUTPUT:\n4 6 10 9\n</code></pre>\n\n<p><strong>My solution:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std; \n\nint main()\n{\n    int n,p,x,y,m,k,tmp; \n\n    vector&lt;int&gt; v;\n    cin &gt;&gt; n &gt;&gt; p &gt;&gt; x;\n    for (int i = 0; i&lt;n; i++){\n        cin &gt;&gt; tmp;\n        v.push_back(tmp);\n    } \n\n    sort(v.begin(), v.end());\n    v.erase(v.begin(), upper_bound(v.begin(), v.end(), 1));\n\n    k=-1;\n    while(1){\n        k++;\n        m = 1;\n        y = x+p*k;;\n        vector&lt;int&gt; res; \n        for (int i = 0; i&lt;n; i++){ \n            if (y == 1) break;\n            if ( y%v[i] == 0){\n                res.push_back(v[i]);\n                m*=v[i];\n                m%=p;\n                y = y/v[i];\n            }\n        } \n        if (m==x) {\n            for (int i = 0; i&lt;res.size(); i++){\n                cout &lt;&lt; res[i] &lt;&lt; \" \";\n            }\n            break;\n        }\n\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>In my solution, I used condition (<code>y=x+k*p</code>, where <code>y</code> is the product of numbers in the answer, and <code>k</code> is some kind of natural number). And also iterated over the value <code>k</code>.</p>\n\n<p>This solution sometimes goes beyond the allotted time. Please tell me a more correct algorithm.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nqq2l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqq2l.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1576070231, "post_id": 59286544, "comment_id": 104778548, "body": "What if you write <code>const auto _x = []{ return (x); }();</code>?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1576070304, "post_id": 59286544, "comment_id": 104778586, "body": "@Evg, you need to capture <code>x</code>. Also, I think lambdas are the right way to go here; since they&#39;re constexpr if possible. Make a lambda for testing equality and then immediately invoke it."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1576070378, "post_id": 59286544, "comment_id": 104778619, "body": "@AndyG, why? It&#39;s a macro. <code>x</code> could be <code>1+1</code>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576070509, "post_id": 59286544, "comment_id": 104778703, "body": "@Evg: That&#39;s a good point; it could be an expression or it could be a variable... but there&#39;s no way to tell."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1576070724, "post_id": 59286544, "comment_id": 104778831, "body": "@AndyG, I see. I have to capture variables that might be in <code>x</code>. Something like <code>[&amp;]</code> might work in a restricted set of cases."}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "edited": false, "score": 2, "creation_date": 1576070726, "post_id": 59286544, "comment_id": 104778832, "body": "May I ask you why don&#39;t you just use <code>Assert::AreEqual</code>, directly? <a href=\"https://docs.microsoft.com/it-it/visualstudio/test/microsoft-visualstudio-testtools-cppunittestframework-api-reference?view=vs-2019#general_are_equal\" rel=\"nofollow noreferrer\">docs.microsoft.com/it-it/visualstudio/test/&hellip;</a>"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "edited": false, "score": 0, "creation_date": 1576071140, "post_id": 59286544, "comment_id": 104779053, "body": "@p-a-o-l-o \u2026 that is a very good question for that example; although I also have less than, greater than, etc. versions"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071354, "post_id": 59286544, "comment_id": 104779175, "body": "@Evg, your recommendation worked in most cases. Your follow up suggestion of using <code>[&amp;]</code> was also necessary, since sometimes it is called with a variable."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576071625, "post_id": 59286544, "comment_id": 104779359, "body": "@Evg, just recompiled all tests right now to see if that comes up or not, which it did not. They expected values are all literals and variables, with the occasional calling of a function of an object. I&#39;ll have to re-run code analysis on all tests to ensure it worked properly, which will take about 30 minutes though."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576074475, "post_id": 59286544, "comment_id": 104781015, "body": "@Evg, just a follow up. Your solution seems to work -- at least I&#39;m not getting warnings now :)"}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1576074734, "post_id": 59286544, "comment_id": 104781155, "body": "Up to you -- it did solve the issue, so it&#39;s an answer for my specific problem. Just include the <code>[&amp;]</code> part ;)"}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 3597782, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/95331b2d06f87770ae74dec2a74d588a?s=128&d=identicon&r=PG&f=1", "display_name": "razr32", "link": "https://stackoverflow.com/users/3597782/razr32"}, "edited": false, "score": 1, "creation_date": 1577804008, "post_id": 59288344, "comment_id": 105259995, "body": "As a side note, you really shouldn&#39;t be doing this just to prevent a warning. This just obfuscates code for a warning that isn&#39;t all that useful and ultimately it all depends on how good the compiler is at determining if it should be <code>constexpr</code> or not. The above case it just wasn&#39;t good enough, as it could still be <code>constexpr</code>."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 3, "last_activity_date": 1576075652, "creation_date": 1576075652, "answer_id": 59288344, "question_id": 59286544, "link": "https://stackoverflow.com/questions/59286544/conditionally-constexpr-variable/59288344#59288344", "title": "Conditionally constexpr variable", "body": "<p>One possible solution is to use a lambda that is invoked immediately:</p>\n\n<pre><code>const auto _x = [&amp;]{ return (x); }();\n</code></pre>\n\n<p><code>[&amp;]</code> will capture every variable that might be used in the <code>x</code> expression.</p>\n"}], "owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59288344, "answer_count": 1, "score": 2, "last_activity_date": 1576075652, "creation_date": 1576069682, "question_id": 59286544, "link": "https://stackoverflow.com/questions/59286544/conditionally-constexpr-variable", "title": "Conditionally constexpr variable", "body": "<p>I have a bunch tests for a project which were originally written using Gtest, but I have since moved them into Microsoft's CppUnitTestFramework. In order to prevent having to rewrite all my tests, I made macros which follows how GTest does its tests -- for example, <code>EXPECT_EQ</code>. </p>\n\n<p>Now, I am trying to eliminate all warnings generated by MsBuild, including those by the Code Analysis, which relate to using <code>constexpr</code> if available. In the tests, there's quite a few of these, since the expected value is usually a literal, although not always. So I have my own <code>EXPECT_EQ</code> which is as follows:</p>\n\n<pre><code>#define EXPECT_EQ( x, y ) { const auto _x = (x); const auto _y = (y); if ( _x == _y ) {} else { Assert::Fail(createFailMessage( _x, L\" == \", _y ).c_str(), LINE_INFO() ); } }\n</code></pre>\n\n<p>This works fine; however, if it is called with <code>EXPECT_EQ( 7, getTime() )</code>, then I get a warning about how <code>_x</code> can be <code>constexpr</code>.</p>\n\n<p>I know I can just create a separate macro like so:</p>\n\n<pre><code>#define EXPECT_CEQ( x, y ) { constexpr auto _x = (x); const auto _y = (y); if ( _x == _y ) {} else { Assert::Fail(createFailMessage( _x, L\" == \", _y ).c_str(), LINE_INFO() ); } }\n</code></pre>\n\n<p>However, if I go back to GTest later, then I would have to fix all my tests to change <code>EXPECT_CEQ</code> to <code>EXPECT_EQ</code>. </p>\n\n<p>So, my question is, is it possible to combine these two macros to make <code>_x</code> conditionally <code>constexpr</code> based on whether or not it can be <code>constexpr</code>? </p>\n\n<p>PS: Yes, I know, macros bad. </p>\n"}, {"tags": ["c++", "stack"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1576069730, "post_id": 59286534, "comment_id": 104778250, "body": "You never change <code>num</code>, and change <code>i</code> unconditionally"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1576069962, "post_id": 59286534, "comment_id": 104778381, "body": "Once you fix the division by zero, your prime factorization of 8 will be 8 * 4 * 2 * 1. You need to 1) only test prime numbers; 2) take duplicated factors into account."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1576070198, "post_id": 59286534, "comment_id": 104778524, "body": "Has the factorization to be the smallest possible?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 2, "creation_date": 1576070381, "post_id": 59286534, "comment_id": 104778621, "body": "@RoQuOTriX Prime factorizations are unique."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1576070441, "post_id": 59286534, "comment_id": 104778659, "body": "Do you really have a stack where you push <code>int</code>s and pop <code>string</code>s? (Note that you really <i>don&#39;t</i> want to assign an <code>int</code> to a <code>string</code>, even though it&#39;s not a compilation error. You don&#39;t even need <code>answer</code> - <code>cout &lt;&lt; s.top();</code> will do.)"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1576070532, "post_id": 59286534, "comment_id": 104778716, "body": "<code>#include &quot;Stack.cpp&quot;</code> that&#39;s not how this is (&quot;normally&quot;) supposed to work ... you need to compile Stack.cpp separately and then link the resulting object files together."}], "owner": {"reputation": 39, "user_id": 10156351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CAQ6mOMfFBE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7optjcwlX7aL8vrZmQ7WZ9it_4tWw/mo/photo.jpg?sz=128", "display_name": "Vincent Baldassari", "link": "https://stackoverflow.com/users/10156351/vincent-baldassari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576069657, "creation_date": 1576069657, "question_id": 59286534, "link": "https://stackoverflow.com/questions/59286534/prime-factorization-stacks", "title": "Prime factorization stacks", "body": "<p>I'm trying to write a program that takes a number and then determines the prime numbers that you can multiply together to get the number entered. For example if you enter 3960 you should get 11 * 5 * 3 * 3 * 2 * 2 *2 However I can't get the answer to print. Is there something I'm missing in my code?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"Stack.h\"\n#include \"Stack.cpp\"\n\nint main(void)\n{\n   Stack s;\n   int num;\n   string answer;\n\n\n   cout &lt;&lt; \"Enter a number greater than one: \";\n   cin &gt;&gt; num;\n\n   for(int i=0; i &lt;= num; i++){\n    if((num%i) == 0){\n        s.push(i);\n    }\n   }\n\n    while(!s.empty()){\n        answer = s.top();\n        cout &lt;&lt; answer;\n        cout &lt;&lt; \"*\";\n        s.pop();\n    }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "stepper"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1576070067, "post_id": 59286531, "comment_id": 104778441, "body": "Unfortunately your question doesn&#39;t have clearly defined problem that could be answered in a few paragraphs. Question in it&#39;s current state will most likely require lenghty tutorial to be any useful, and such things are off topic here. Please narrow your question somekind of concrete problem that can be answered."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1576070237, "post_id": 59286531, "comment_id": 104778553, "body": "tooooooooo broad. Start studing something about microstepping and PIDs andtrajectory generation. Google it."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1576071043, "post_id": 59286531, "comment_id": 104778996, "body": "If you edit this post to <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">include the code</a> you have used in an attempt to do what you have described, and in the post also pointed out specifically where it is deficient, (buggy, bad performance, etc., which you have kind of done ) this question would get a much more usable response."}, {"owner": {"reputation": 51, "user_id": 7889829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnrpX.jpg?s=128&g=1", "display_name": "GSerum_", "link": "https://stackoverflow.com/users/7889829/gserum"}, "edited": false, "score": 0, "creation_date": 1576071533, "post_id": 59286531, "comment_id": 104779292, "body": "Thanks for the reply, I&#39;ve attached the code and hopefully narrowed down my question."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1576135349, "post_id": 59286531, "comment_id": 104802342, "body": "Some 20 years ago I worked on such a stepper software for a 3D machine. We didn&#39;t use trigonomy functions, but simple linear acceleration and deceleration. So it was easy to calculate the frequency and its changes for each axis. Note, that especially for the final ramp you need to do some calculation <i>before</i> you start your vector."}], "owner": {"reputation": 51, "user_id": 7889829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnrpX.jpg?s=128&g=1", "display_name": "GSerum_", "link": "https://stackoverflow.com/users/7889829/gserum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576078029, "creation_date": 1576069653, "last_edit_date": 1576077912, "question_id": 59286531, "link": "https://stackoverflow.com/questions/59286531/smooth-movement-of-stepper-motor", "title": "Smooth movement of stepper motor", "body": "<p>So I tried to implement an S-Curve for the movement of my stepper motor; however, I feel like this is way too complicated for the simple thing I want the stepper motor to do: Smooth movement. It doesn't have to go from a to b within the blink of an eye, just smoothly. Also, the function overshoots by a gigantic amount of steps (pos_err is almost 40% of steps, always).</p>\n\n<pre><code>void stepper_t::step(int32_t steps, direction dir)\n{\n\n    float32_t pulse_delay;      /* Stepper pulse delay [microsec] */\n\n    int8_t count = 0;           /* Count the number of pulses */\n    int32_t pos_err = 0;        /* Error in position */\n\n    int16_t speed = 3200;       /* Steady state velocity [pulse/s] */\n\n    int8_t var = 0;\n\n    int32_t move_time = (steps / (speed / 1000000));                    /* Total time moving */\n    int32_t accel_time = move_time &lt; 30000 ? (move_time / 2) : 30000;   /* Acceleration time [microsec] */\n    int32_t decel_time = move_time &lt; 30000 ? (move_time / 2) : 30000;   /* Deceleration time [microsec] */\n    int32_t constant_speed = move_time - (accel_time + decel_time);     /* Time during constant velocity [microsec] */\n\n    int32_t curr_time = decel_time / 30; /* Current time     [microsec] \n                                            You need to seed the initial time \n                                            with something &gt; 0 so you don't \n                                            calculate too long of a delay */\n\n    this-&gt;set_direction(dir);\n\n    while (var &lt; 1) {         \n        if (curr_time &lt; accel_time) {  \n            /* Acceleration */                                     \n            pulse_delay = ((float32_t) accel_time / (2.f * ((float32_t) speed / 1000000.f) * (float32_t) curr_time));\n        } else if ((curr_time &gt;= accel_time) &amp;&amp; (curr_time &lt; (accel_time + constant_speed))) {      \n            /* Constant velocity */\n            pulse_delay = (1.f / (2.f * ((float32_t) speed / 1000000.f)));\n        } else if ((curr_time &gt;= (accel_time + constant_speed)) &amp;&amp; (curr_time &lt; (accel_time + constant_speed + decel_time))) {    \n            /* Deceleration */\n            pulse_delay = (1.f / (2.f * (((float32_t) speed / 1000000.f) - ((float32_t) speed / (1000000.f * (float32_t) decel_time)) * ((float32_t) curr_time - (float32_t) accel_time - (float32_t) constant_speed))));\n        }\n\n        /* Time is incremented by pulse delay twice due to the pin going\n        high, then low, delaying twice */\n        curr_time = curr_time + (int32_t) (float32_t) (2.f * pulse_delay);\n\n        /* Send pulse with calculated delay */\n        Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, true);\n        OS_Delayus((OS_U16) pulse_delay);\n        Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, false);\n        OS_Delayus((OS_U16) pulse_delay);\n\n        count++;\n\n        /* Correct for any position error due to rounding */\n        if (curr_time &gt; (accel_time + constant_speed + decel_time)) {\n            pos_err = steps - count;\n\n            if (pos_err &lt; 0) {\n                pos_err = -1 * pos_err;\n\n                if (dir == OUTWARD) {\n                    this-&gt;set_direction(INWARD);\n                } else {\n                    this-&gt;set_direction(OUTWARD);\n                }\n            }\n\n            for (; pos_err &gt; 0; pos_err--) {\n                Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, true);\n                OS_Delayus((OS_U16) pulse_delay);\n                Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, false);\n                OS_Delayus((OS_U16) pulse_delay);\n            }\n\n            count = 0;\n            curr_time = decel_time / 9;\n            var++;\n        }\n    }\n}\n</code></pre>\n\n<p>Why wouldn't I just use a cosine to calculate the delays in between like this?</p>\n\n<pre><code>void step2(int32_t steps) {\n\n    int8_t count = 0;\n    float32_t delay;\n\n    while (count &lt; steps) {\n        delay = (cos ( (PI * 2 * count)/steps ) + 1) * 5000 + 10000;\n        Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, true);\n        OS_Delayus((OS_U16) delay);\n        Chip_GPIO_SetPinState(LPC_GPIO_PORT, this-&gt;GPIO_step_port, this-&gt;GPIO_step_pin, false);\n        OS_Delayus((OS_U16) delay);\n        count++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "makefile", "header"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 2, "creation_date": 1576069578, "post_id": 59286470, "comment_id": 104778149, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 3, "creation_date": 1576069614, "post_id": 59286470, "comment_id": 104778174, "body": "Two <code>main</code> functions?"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1576069754, "post_id": 59286470, "comment_id": 104778269, "body": "Try to specify the exact error you are getting in future questions."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1576069825, "post_id": 59286470, "comment_id": 104778312, "body": "Make sure you don&#39;t get totally unrelated errors in your example code before you post it. Example: <code>CFLAGS = -I</code> will make <code>$&lt;</code> be treated as an include directory rather than a source file."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5551302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1214556038558296/picture?type=large", "display_name": "Augusto Celis", "link": "https://stackoverflow.com/users/5551302/augusto-celis"}, "edited": false, "score": 0, "creation_date": 1576087630, "post_id": 59287025, "comment_id": 104788093, "body": "Unless I am misspelling something, which I don&#39;t think I am, I am still getting an undefined reference to &#39;initalize&#39; error. I do want to thank you for being so thorough with your answer though, it is greatly appreciated!"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 21, "user_id": 5551302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1214556038558296/picture?type=large", "display_name": "Augusto Celis", "link": "https://stackoverflow.com/users/5551302/augusto-celis"}, "edited": false, "score": 0, "creation_date": 1576088773, "post_id": 59287025, "comment_id": 104788602, "body": "@AugustoCelis If you just copy the files from my answer (and make sure the <code>makefile</code> get &lt;tab&gt; characters where it should), you will not get any undefined references. You misspelled &quot;<i>initialize</i>&quot; but I let that be and it&#39;s spelled &quot;<i>initalize</i>&quot; in all 3 files - so, no undefined reference."}, {"owner": {"reputation": 21, "user_id": 5551302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1214556038558296/picture?type=large", "display_name": "Augusto Celis", "link": "https://stackoverflow.com/users/5551302/augusto-celis"}, "edited": false, "score": 1, "creation_date": 1578951065, "post_id": 59287025, "comment_id": 105599348, "body": "It did work. I am sorry for such a late response, but thank you very much!"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576071363, "creation_date": 1576071363, "answer_id": 59287025, "question_id": 59286470, "link": "https://stackoverflow.com/questions/59286470/undefined-reference-when-compiling-a-c-and-c-file-with-same-header/59287025#59287025", "title": "Undefined reference when compiling a C and C++ file with same header", "body": "<p>[<a href=\"http://eel.is/c++draft/basic.start.main#3\" rel=\"nofollow noreferrer\">basic.start.main</a>]</p>\n\n<blockquote>\n  <p>A program that declares a variable <code>main</code> at global scope, or that declares a function <code>main</code> at global scope attached to a named module, <strong>or that declares the name <code>main</code> with C language linkage</strong> (in any namespace) is ill-formed.</p>\n</blockquote>\n\n<p>So, as a <code>C++</code> program, it's ill-formed. Remove the <code>C</code> <code>main</code> function.  </p>\n\n<p>Other problems:  </p>\n\n<p>In the makefile you have<br>\n<code>CFLAGS = -I</code><br>\nand whatever comes after that when compiling will be treated as a directory to search for header files in. In your makefile, that's the source file. Correction:<br>\n<code>CFLAGS =</code><br>\nor<br>\n<code>CFLAGS = -I.</code>  </p>\n\n<p>Your header file is missing a header guard and header files that are supposed to be used by both C and C++ code usually contain the <code>extern \"C\"</code> part themselves to not burden C++ users to add it.</p>\n\n<p><em>cpp_code.cpp</em></p>\n\n<pre><code>#include \"header_code.h\"\n#include &lt;iostream&gt;\n\nint main() {\n    initalize(); // call the C function\n    std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><em>c_code.c</em></p>\n\n<pre><code>#include \"header_code.h\"\n#include &lt;stdio.h&gt;\n\nvoid initalize(){\n    printf(\"Initilized\");\n}\n</code></pre>\n\n<p><em>header_code.h</em></p>\n\n<pre><code>#ifndef HEADER_CODE_H_\n#define HEADER_CODE_H_\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nextern void initalize();\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p><em>makefile</em></p>\n\n<pre><code>CXX = g++\nCXXFLAGS = -std=c++11\nCC = gcc\nDEPS = header_code.h\nCFLAGS = -I.\nOBJS = cpp_code.o c_code.o\n\nc: $(OBJS) \n    $(CXX) -o $@ $^ $(CXXFLAGS)\n\n%.o : %.cpp\n    $(CXX) -c $(CXXFLAGS) $&lt;\n\n%.o : %.c $(DEPS)\n    $(CC) -c $(CFLAGS) $&lt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5551302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1214556038558296/picture?type=large", "display_name": "Augusto Celis", "link": "https://stackoverflow.com/users/5551302/augusto-celis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 59287025, "answer_count": 1, "score": -1, "last_activity_date": 1576071363, "creation_date": 1576069419, "question_id": 59286470, "link": "https://stackoverflow.com/questions/59286470/undefined-reference-when-compiling-a-c-and-c-file-with-same-header", "title": "Undefined reference when compiling a C and C++ file with same header", "body": "<p>To make this short, I have a CPP and C code, and my CPP code is trying to reference functions from the C code with a header file. Whenever I run the make command, I end up getting \"undefined reference\" errors. Here are my codes:</p>\n\n<p>cpp_code.cpp:</p>\n\n<pre><code>extern \"C\"{\n    #include \"header_code.h\";\n}\n\nint main(){\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>c_code.c:</p>\n\n<pre><code>#include \"header_code.h\"\n\nint main(){\n    printf(\"Hello\");\n    return 0;\n}\n\nvoid initalize(){\n    printf(\"Initilized\");\n}\n</code></pre>\n\n<p>header_code.h:</p>\n\n<pre><code>extern void initalize();\n</code></pre>\n\n<p>makefile:</p>\n\n<pre><code>CXX = g++\nCXXFLAGS = -std=c++11\nCC = gcc\nDEPS = header_code.h\nCFLAGS = -I\nOBJS = cpp_code.o c_code.o\n\nc: $(OBJS) \n    $(CXX) -o $@ $^ $(CXXFLAGS)\n\n%.o : %.cpp\n    $(CXX) -c $(CXXFLAGS) $&lt;\n\n%.o : %.c $(DEPS)\n    $(CC) -c $(CFLAGS) $&lt;\n</code></pre>\n\n<p>Whenever running make it always gives me problems. Can anyone please help me? Thank you for your time reading all of this!</p>\n"}, {"tags": ["c++", "opencv", "convex-hull"], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 3, "last_activity_date": 1576070113, "creation_date": 1576070113, "answer_id": 59286655, "question_id": 59286458, "link": "https://stackoverflow.com/questions/59286458/can-cvconvexhull-be-applied-to-double-precision-points-data/59286655#59286655", "title": "can cv::convexHull be applied to double-precision points data", "body": "<p><code>convexHull</code> works only with <code>Point2i</code> (same as <code>Point</code>) and <code>Point2f</code>.\nSee the <a href=\"https://github.com/opencv/opencv/blob/9a18330f3a1a5eddb5e4f23e8daa9534d83fa8c6/modules/imgproc/src/convhull.cpp#L137\" rel=\"nofollow noreferrer\">code</a> for reference:</p>\n\n<pre><code>CV_Assert(total &gt;= 0 &amp;&amp; (depth == CV_32F || depth == CV_32S));\n</code></pre>\n\n<p>So you can work with floating point values, but they must be <code>float</code>, not <code>double</code>:</p>\n\n<pre><code>typedef cv::Point2f cvp;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7486021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6320604323e820aa996dfa7d90d7d8b0?s=128&d=identicon&r=PG&f=1", "display_name": "Nur Arad", "link": "https://stackoverflow.com/users/7486021/nur-arad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576070392, "creation_date": 1576069365, "last_edit_date": 1576070392, "question_id": 59286458, "link": "https://stackoverflow.com/questions/59286458/can-cvconvexhull-be-applied-to-double-precision-points-data", "title": "can cv::convexHull be applied to double-precision points data", "body": "<p>The following code works fine: </p>\n\n<pre><code>typedef cv::Point cvp;\n\n    std::vector &lt;cvp&gt; points{ cvp(0, 0), cvp(1, 0), cvp(0, 1), cvp(0.5, 0.5) };\n    std::vector&lt;cvp&gt; hullPoints;\n\n    cv::convexHull(points, hullPoints);\n</code></pre>\n\n<p>However, when I change the definition of <code>cvp</code>: </p>\n\n<pre><code>typedef cv::Point2d cvp;  // cvp is now a double-precision point\n</code></pre>\n\n<p>the program crashes on entering the <code>cv::convexHull</code> procedure. Looks like \neither <code>cv::convexHull</code> may be called only for integer-valued points, or I am doing something terribly wrong. </p>\n\n<p>I found nothing on this issue in OpenCV documentation. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 2, "creation_date": 1576069317, "post_id": 59286430, "comment_id": 104777998, "body": "Expect null pointer."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576069360, "post_id": 59286430, "comment_id": 104778025, "body": "@Evg  Why? How? ... QAQ"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 4, "creation_date": 1576069376, "post_id": 59286430, "comment_id": 104778037, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/936999/what-is-the-default-constructor-for-c-pointer\">What is the default constructor for C++ pointer?</a>"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576069627, "post_id": 59286430, "comment_id": 104778181, "body": "@Evg Sorry I don&#39;t understand that linked question. I don&#39;t see arguments similar like <code>pointer ptr = pointer()</code> :("}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576069710, "post_id": 59286430, "comment_id": 104778240, "body": "<code>pointer</code> is <code>data_type</code> <a href=\"https://stackoverflow.com/a/937119/1625187\">and</a> &quot;The expression <code>data_type()</code> evaluates to a default-initialized object. In case of non-POD types, the default constructor is invoked, but in case of POD types, such as pointers, default initialization is equivalent to zero initialization.&quot;"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576072868, "post_id": 59286430, "comment_id": 104780117, "body": "@Evg Ah I see. Let me check again. I just noticed that <code>pointer</code> is a type member of <code>unique_ptr</code>. Sorry I didn&#39;t notice that."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 3, "creation_date": 1576072987, "post_id": 59286430, "comment_id": 104780179, "body": "@Evg: That statement (partly due to its age, presumably) is confusing default-initialization with value-initialization, which is what <code>T()</code> does."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1576073341, "post_id": 59286430, "comment_id": 104780354, "body": "@DavisHerring, agree."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576073471, "post_id": 59286430, "comment_id": 104780434, "body": "@Evg But how does that work ? For example, I can&#39;t initialize a pointer with <code>int* p = int*()</code>"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1576073561, "post_id": 59286430, "comment_id": 104780484, "body": "The definition of <code>pointer</code> is <code>std::remove_reference&lt;Deleter&gt;::type::pointer if that type exists, otherwise T*. Must satisfy NullablePointer</code>. <code>T* ptr = T*()</code> ?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576073761, "post_id": 59286430, "comment_id": 104780576, "body": "Unless you use some fancy custom deleter, it is just <code>T*</code>. Try this for <code>int</code>: <code>using T = int*; T p = T();</code> or <code>int* p = (int*){};</code>."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576073905, "post_id": 59286430, "comment_id": 104780655, "body": "@Evg But what&#39;s the equivalent of that without using <code>using</code>? using <code>using</code> only makes more confusion to me.. There must be a &quot;raw&quot;  format."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1576073952, "post_id": 59286430, "comment_id": 104780676, "body": "@Rick No, there need not be, and there isn&#39;t one. As a much more gratuitious example, <code>a.~int()</code> is an error, but <code>a.~T()</code> is a no-op for <code>int a; using T = int;</code>."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1576074039, "post_id": 59286430, "comment_id": 104780744, "body": "@Deduplicator ...seriously? I can&#39;t write that expression with raw type? OMG"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576074063, "post_id": 59286430, "comment_id": 104780763, "body": "There are some syntactic limitations. You should either use a <code>typedef</code>/<code>using</code> or curly braces."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576074554, "post_id": 59286430, "comment_id": 104781058, "body": "I&#39;m not sure about the correct quote from the standard. But if the type name is not a single word, you can&#39;t say <code>some type()</code> like <code>unsigned int()</code> or <code>int*()</code>. But if it is a single word like <code>pointer</code>, you can say <code>pointer()</code>, and if <code>pointer</code> is just a plain pointer like <code>int*</code>, <code>pointer()</code> means zero-initialization as explained in the linked question."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576074745, "post_id": 59286430, "comment_id": 104781163, "body": "See this: <a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/value_initialization</a> - &quot;4) otherwise, the object is zero-initialized.&quot;"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1576074928, "post_id": 59286430, "comment_id": 104781265, "body": "@Evg: <code>(int*){}</code> is a compound literal; those exist in C but not C++."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1576075118, "post_id": 59286430, "comment_id": 104781382, "body": "@DavisHerring, thanks. It seems to be supported by Gcc and Clang as an extension."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576083529, "post_id": 59286430, "comment_id": 104786145, "body": "@Evg Thanks. Things get much clearer after I read this post <a href=\"https://stackoverflow.com/questions/5113365/do-built-in-types-have-default-constructors\">Do built-in types have default constructors?</a>. Also I think <code>int* p = (int*){};</code> may be the &quot;raw&quot; pattern(I just ran it on my machine and it compiles), as someone in that answer says <i>&quot;So technically there are no constructors for basic-POD types. But for all intents and purposes they act just like they have a copy constructor and default constructor (<b>when initialized with the braces</b>).&quot;</i>"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1576084096, "post_id": 59286430, "comment_id": 104786415, "body": "As Davis noted above, <code>(int*){}</code> is not really standard C++, it is C. <code>using T = int*; T();</code> is the example with a raw pointer. You can&#39;t write it without <code>T</code>, because <code>int*</code> is not single-word type name. See also <a href=\"https://stackoverflow.com/questions/53336344/braced-init-list-and-unsigned-types\">this question</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1576089728, "post_id": 59290992, "comment_id": 104789016, "body": "Makes a good point. A friend in chatroom also mentioned that &quot;generic&quot; part. <a href=\"https://chat.stackoverflow.com/transcript/message/48085012#48085012\">chat.stackoverflow.com/transcript/message/48085012#48085012</a>"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1576090003, "post_id": 59290992, "comment_id": 104789140, "body": "What&#39;s do you mean by saying &quot;we alreay have <code>(int*)0</code>&quot; ? Sorry I don&#39;t remember much about the template part. I just tested on my machine. I can only use <code>(int*)0</code> to initialize built-in types like <code>int, int*</code> , but not for custom class type. <code>(T)0</code> doesn&#39;t seem to be a substitude of <code>using pointer = int*; pointer ptr = pointer()</code>."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1576090439, "post_id": 59290992, "comment_id": 104789325, "body": "Another question: &quot;The first statement is disallowed because it&#39;s a no-op. &quot;. So <code>no-p == not allowed</code>? I know little about the <code>no-op</code> concept and how it interacts with the language."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1576090922, "post_id": 59290992, "comment_id": 104789497, "body": "@Rick <code>(T)0</code> yeah just built-in types. It&#39;s a no-op, so allowing it would be misleading since it doesn&#39;t do anything"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 2, "last_activity_date": 1576084852, "creation_date": 1576084852, "answer_id": 59290992, "question_id": 59286430, "link": "https://stackoverflow.com/questions/59286430/how-does-a-pointer-built-in-types-which-gets-constructed-like-a-custom-class-w/59290992#59290992", "title": "How does a pointer (built-in types) which gets constructed like a custom class work?", "body": "<p>There is no need for the \"raw\" syntax as you put it, since pointers can be zero initialized with a <code>0</code>.</p>\n\n<pre><code>int *p = 0; // nullptr\n</code></pre>\n\n<p>I guess it might be useful for template argument deduction, but we already have a syntax for that: <code>(int*)0</code>. There isn't really a need to add yet more syntax for something small like that (or maybe someone forgot to add it; but either way, it's unnecessary now).</p>\n\n<p>The <code>T(...)</code> syntax is mostly used to initialize objects of user-defined types.</p>\n\n<blockquote>\n  <p>I used to think that everything use a <code>typedef</code> or <code>using</code> could be written down with a \"raw\" version.</p>\n</blockquote>\n\n<p>Here's another example:</p>\n\n<pre><code>int a;\na.~int(); // syntax error\n\nusing Int = int;\na.~Int(); // ok!\n</code></pre>\n\n<p>The first statement is disallowed because it's a no-op. The second isn't because in a generic context it might do something (destroy the object) instead of being a no-op. Since the language doesn't want to unnecessarily restrict this going through an alias is allowed.</p>\n\n<p>It's for this same reason that <code>pointer()</code> is allowed even if you can't write out the syntax: If it would be disallowed it would be a pain to work in a generic context.</p>\n"}], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 59290992, "answer_count": 1, "score": 3, "last_activity_date": 1576084852, "creation_date": 1576069256, "last_edit_date": 1576083819, "question_id": 59286430, "link": "https://stackoverflow.com/questions/59286430/how-does-a-pointer-built-in-types-which-gets-constructed-like-a-custom-class-w", "title": "How does a pointer (built-in types) which gets constructed like a custom class work?", "body": "<p>I've changed the question title and body see if it suits better :).</p>\n\n<hr>\n\n<p>I read a member function signature on <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/reset\" rel=\"nofollow noreferrer\">cppreference: unique_ptr/reset</a>.</p>\n\n<pre><code>void reset( pointer ptr = pointer() ) noexcept;\n</code></pre>\n\n<p>and <code>pointer</code> is a member type of <code>unique_ptr</code>, <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">documented</a> as </p>\n\n<blockquote>\n  <p><code>pointer</code> | <code>std::remove_reference&lt;Deleter&gt;::type::pointer</code> if that type exists, otherwise <code>T*</code>. Must satisfy <code>NullablePointer</code></p>\n</blockquote>\n\n<p>What I've learnt in the comments:</p>\n\n<ol>\n<li><code>pointer ptr = pointer()</code> is somehow equivalent to e.g. <code>int</code>, <code>using pointer = int*; pointer ptr = pointer()</code></li>\n<li>And if it's a built-in type like <code>int</code>, then <code>ptr</code> is a <strong>zero-initialized</strong> variable. I get a <code>int*</code> pointer with <code>0/NULL/nullptr</code> here.</li>\n<li>There is not a \"raw\" statement for <code>using pointer = int*; pointer ptr = pointer()</code>, which is that <code>int* ptr = int*()</code> won't work.</li>\n</ol>\n\n<p>I also read <a href=\"https://stackoverflow.com/questions/5113365/do-built-in-types-have-default-constructors\">Do built-in types have default constructors?\n</a> and that helps a lot.</p>\n\n<hr>\n\n<p>I want to know a bit more about this behaviour(a built-in type can be constructed in a custom class way), if it can be explained in more details:</p>\n\n<p><code>using pointer = int*; pointer ptr = pointer()</code></p>\n\n<p>Seriously no \"raw\" syntax for this statment? I used to think that everything use a <code>typedef</code> or <code>using</code> could be written down with a \"raw\" version. Like a one-to-one mapping.</p>\n"}]